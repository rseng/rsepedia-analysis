pyc document statushttpscosmograilgitlabiopycsdoc_statussvghttpscosmograilgitlabiopyc pipelin statushttpsgitlabcomcosmograilpycsbadgesmasterpipelinesvghttpsgitlabcomcosmograilpycscommitsmast coverag reporthttpsgitlabcomcosmograilpycsbadgesmastercoveragesvghttpscosmograilgitlabiopycscoverag python httpsimgshieldsiobadgepythonbluesvghttpswwwpythonorgdownloadsreleasepython licens gpl vhttpsimgshieldsiobadgelicensegplvbluesvghttpswwwgnuorglicensesgpl doihttpsjosstheojorgpapersjossstatussvghttpsdoiorgjoss pyc softwar toolbox estim time delay multipl imag gravit lens quasar develop within cosmograilhttpwwwcosmograilorg collabor updat pycshttpsgithubcomcosmograilpyc longer maintain proceed documentationhttpscosmograilgitlabiopyc get inform case question feel free open issu gitlab instal git clone httpsgitlabcomcosmograilpyc cd pyc python setuppi instal prefer instal local python setuppi instal user requir pyc requir follow standard python packag numpi scipi matplotlib multiprocess want use regdiff optimis also need scikitlearn exampl notebook document full document found herehttpscosmograilgitlabiopyc exampl notebook locat notebookhttpsgitlabcomcosmograilpycstreemasternotebook folder import export display light curveshttpsgitlabcomcosmograilpycsblobmasternotebookimport_export_and_displayipynb measur time delay regdiff splineshttpsgitlabcomcosmograilpycsblobmasternotebookmeasuringtimedelayswithsplineandregdiffipynb estim uncertainti pycshttpsgitlabcomcosmograilpycsblobmasternotebookuncertaintiesestimationipynb attribut use code pleas cite papershttpscosmograilgitlabiopycscitinghtml indic document licens pyc free softwar redistribut andor modifi term gnu gener public licens publish free softwar foundat either version licens option later version pyc distribut hope use without warranti without even impli warranti merchant fit particular purpos see gnu gener public licens detail licensetxtlicens contribut contribut pyc mani way appreci report bug pleas use gitlab issu report bugif report bug pleas includ oper system name version detail step reproduc bug implement new featur pleas use pull request want modifi master branch pull request includ test pull request add function doc updat put new function function docstr pyc test pipelin folder contain script process multipl light curv tdc time aim provid test framework check precis accuraci pyc base origin pipelin script folder list light curv tdc liao et al httpsarxivorgab use subpackag avail herehttpslsstdescorgtimedelaychallengedownloadshtml four metric select timedelay challeng evalu perform curveshift techniqu accuraci precis chi x fraction estim without outlier chi recent ran test pipelin first curv rung tdc data close mimic real euler light curv term cadenc photometr nois microlens reproduc figur liao et al httpsarxivorgab summar metric one plot figuress_final_plotpngtdc rung result dot blind submiss liao et al httpsarxivorgab new result pyc spline regress differ estim mark triangl differ strategi marginalis estim paramet parametr sigma threshold paramet see millon et al httpsarxivorgab detail result present silver sampl ss contain curv exclud curv precis one time delay day enough overlap measur robust time delay cours result blind demonstr pyc abl measur timedelay curv tdc rung autom procedur accuraci better use pipelin first defin work directori must contain light curv subfold data data name convent name_double_pairx_ecamrdb x number light curv must contain one column day observ two column per len imag measur magnitud associ uncertainti also need true time delay light curv subfold datatruth name convent truth_nametxt second column true time delay like follow exampl test_double_pair test_double_pair test_double_pair set run command python multiple_pi name doubl numberofcurv dirpath_to_working_directori set directori multipl pipelin gener multipl config file configmultipl directori name config_multiple_namepi modifi run next script check readmescriptsreadmemd main pipelin inform differ paramet creat data set run command python multiple_pi name doubl numberofcurv dirpath_to_working_directori run script _create_datasetpi pyc main pipelin curv specif config file curv creat config directori name config_name_double_pairx_exampi singl config file updat paramet multipl config file previous mention initi guess randomli taken around true time delay datatruthtruth_nametxt initi guess save simulationmultiplename_doublepost_gaussian_guesstxt fit spline run command python multiple_pi name doubl numberofcurv dirpath_to_working_directori run script _fit_splinepi pyc main pipelin curv launch spline modifi clustermultiple_launchersh paramet cluster make sure line execut start_allslurm updat number curv run line run command cluster folder multiple_launchersh run script a_generate_tweakmlpi b_draw_copy_mockspi c_optimise_copy_mockspi d_check_statisticspi pyc main pipelin curv get time delay spline run command python multiple_api name doubl numberofcurv dirpath_to_working_directori run script a_plot_resultspi pyc main pipelin curv bi launch regdiff run command python multiple_update_configpi name doubl numberofcurv dirpath_to_working_directori updat everi config file order use regdiff instead spline modifi clustermultiple_launchersh paramet cluster make sure line execut start_cslurm updat number curv run line run command cluster folder multiple_launchersh run script c_optimise_copy_mockspi pyc main pipelin curv time regdiff get time delay regdiff run command python multiple_api name doubl numberofcurv dirpath_to_working_directori run script a_plot_resultspi pyc main pipelin curv time regdiff b margininalis spline estim run command python multiple_bpi name doubl numberofcurv dirpath_to_working_directori run script b_marginalise_splinepi pyc main pipelin curv three differ sigmathresh find inform marginalis readm main pipelin b margininalis regdiff estim run command python multiple_cpi name doubl numberofcurv dirpath_to_working_directori run script c_marginalise_regdiffpi pyc main pipelin curv three differ sigmathresh find inform marginalis readm main pipelin marginalis spline regress differ estim run command python multiple_dpi name doubl numberofcurv dirpath_to_working_directori run script d_marginalise_rallpi pyc main pipelin curv sigmathresh comput tdc metric need updat config_multiple_namepi simul fail failed_sim list choos want display gold silver sampl add pair want silvergolden sampl also decid plot want display run command python multiple_pi name doubl numberofcurv dirpath_to_working_directori comput statist sampl estim summari file creat simulationmultiplenam folder subfold figur also creat contain figur produc folder contain copi mock light curv use measur timedelay uncertainti product exampl notebook save titl pyc python toolbox timedelay measur lens quasar tag python astronomi author name martin millon orcid x affili name malt tew orcid affili name vivien bonvin orcid affili name bastian lengen affili name freder courbin orcid affili affili name institut physic laboratori astrophysiqu ecol polytechniqu fédérale de lausann epfl switzerland index name argelanderinstitut für astronomi bonn germani index date june bibliographi paperbib summari timedelay cosmographi competit techniqu measur current expans rate univers hubbl constant see eg riess review wong recent result reli strong gravit lens effect happen massiv foreground galaxi deviat light background object produc mirag imag background sourc configur optic path length slightli differ multipl imag thu travel time photon along path also slightli differ background sourc vari variat visibl multipl imag differ delay lens quasar lens supernova ideal target measur rel time delay variabl short timescal suffici bright observ cosmolog distanc measur delay use infer socal timedelay distanc d_delta directli invers proport hubbl constant method reli three main ingredi precis accur determin time delay model mass distribut lens galaxi estim mass galaxi along line sight also deviat light ray thu perturb time delay obtain time delay lens quasar typic requir decad continu observ produc long light curv contain sever variat quasar unambigu match multipl imag exampl light curv multipl imag lens quasar rxj present autoreffiglc aim pyc softwar measur time delay curv light curv lens quasar rxj present millon left panel quasar variat seen imag day imag wherea imag b c arriv approxim time right panel show hubbl space telescop imag rxj suyulabelfiglcsrxjpng statement need simpl problem measur time delay irregularli sampl light curv receiv attent almost three decad eg press complic factor microlens multipl imag happen star len galaxi pass front quasar imag also act gravit lens affect shape light curv microlens effect perturb light curv quasar imag individu ignor perturb would often result signific bias measur time delay directli propag hubbl constant pyc python packag develop cosmograilwwwcosmograilorg collabor design address problem allow us measur time delay lens quasar presenc microlens provid flexibl datadriven model extrins variat spline account microlens recov accur estim time delay realist estim uncertainti also extrem import cosmographi approach follow pyc base bestfit point estim framework faith simul input data assess uncertainti follow mont carlo approach bayesian infer delay given model quasar variabl microlens would attract hamper difficulti accur model microlens high number nuisanc paramet problem previou version packag pyc first present tew success appli real data tew bonvin bonvin bonvin method also test simul light curv timedelay challeng liao bonvin empir shown provid excel result even light curv strongli affect microlens develop autom pipelin base pyc measur time delay larg sampl lens quasar millon millon improv toward autom procedur necessari hundr new lens quasar expect discov near futur function basic function pyc built around lightcurv class manipul photometr monitor data method import shift fit export light curv locat pycsgen subpackag pyc contain two timedelay estim name freeknot spline regress differ pycsspl pycsregdiff subpackag two estim fundament differ allow us check robust measur time delay subpackag pycssim use gener simul light curv order estim uncertainti timedelay measur pyc ensur simul curv constrain power origin data crucial correct estim uncertainti simul curv shift either freeknot spline regress differ estim script folder contain pipelin autom measur time delay function use pipelin locat pycspip subpackag automat explor sever set estim paramet gener simul light curv return best fit valu associ uncertainti select combin differ set estim paramet also make use subpackag pycstdcomb display combin final timedelay estim detail method found millon final tdlmc_test folder contain ensembl python script appli pyc simul data gener timedelay challeng liao provid benchmark test framework assess precis accuraci pycss curveshift algorithm acknowledg acknowledg support swiss nation scienc foundat snsf european research council erc european union horizon research innov programm cosmiclen grant agreement refer pyc pipelin folder contain script process light curv measur time delay complet descript pipelin found millon et al httpsarxivorgab first defin work directori must contain light curv subfold data data name convent lensname_datasetrdb must contain one column day observ two column per len imag measur magnitud associ uncertainti dataset typic correspond monitor campaign conduct singl telescop creat data set run command python _create_datasetpi lensnam dataset dirpath_to_working_directori setup config file creat new folder len dataset subfold simulationlensname_dataset work directori specifi work directori simpli use current folder config file creat config directori name config_lensname_datasetpi modifi fit spline first step consist fit spline origin data chang mean knotstep microlens model config file key paramet knotstep mean initi space knot intrins spline give list valu want test mlknotstep altern nmlspl use option forcen use valu given nmlspl list contain number knot extrins spline equal distribut monitor period knot fix posit option recommend short light curv ensur microlens model much freedom note use nmlspl place intern knot microlens model polynomi degre long curv one season recommend turn forcen option use mlknotstep instead nmlspl need provid mean initi space knot microlens spline free move insert nmlspl mlknotstep list introduc microlens model preselection_fil use_preselected_regdiff provid directli regdiff set paramet dictionari save json readabl file altern directli provid regdiff paramet want test covkernel pointdens pow errscal list chosen estim paramet run command python _fit_splinepi lensnam dataset dirpath_to_working_directori produc origin fit combin intrins microlens model provid check visual qualiti fit figur save figurespline_and_residuals_plot gener mock light curv fit paramet gener nois model tricki part process need adjust two paramet ensur gener nois model creat simul curv constrain power origin data fit two paramet done simpl dichotom search algorithm key paramet control behaviour algorithm n_curve_stat number curv comput statist larg number curv reduc random fluctuat acceler converg come price heavi comput curv comput parallel might want choos multipl number core avail exampl usual good number max_it maximum number iter stop algorithm find good solut stop automat algorithm tri find paramet produc curv mean rm residu sigma mean number run zsubrunsub fall within sigma real curv script save function optim paramet python file name tweakml_pspi run python a_generate_tweakmlpi lensnam dataset dirpath_to_working_directori __warning__ quad happen regularli algorithm match sigma criterion iter choos closest valu match sigma zsubrunsub within sigma suffici case still continu script check posteriori simul curv inde differ b draw mock light gener nois model next step gener copi mock adjust number copi mock gener chang ncopi ncopypkl nsim nsimpkl total number copi gener ncopyncopypkl everi combin knotstep mlknotstep comput time increas quickli recommend gener copi mock reliabl estim uncertainti python b_draw_copy_mockspi lensnam dataset dirpath_to_working_directori turn ask_quest option run script mani time gener mock default eras alreadi exist file c optimis mock light curv fit copi mock want run mock turn run_on_copi option default need run optimis mock copi choos optimis use simoptfctkw run python c_optimise_copy_mockspi lensnam dataset dirpath_to_working_directori script optimis batch curv save pickl file run mani core parallel use max_cor option run script twice spline optimis regdiff optimis check statist check posteriori gener curv roughli match origin data term zsubrunsub sigma run python d_check_statisticspi lensnam dataset dirpath_to_working_directori creat seri plot figurecheck_stat_plot folder check residu mock curv look similar residu data marginalis estim paramet get time delay estim first step collect result optimis mock copi done run python a_plot_resultspi lensnam dataset dirpath_to_working_directori run script estim switch one estim simoptfctkw paramet creat plot figurefinal_result folder verifi distribut delay run copi peak indic data inde constrain time delay also visual random systemat error made mock b margininalis spline estim obtain final spline estim either select precis model margin avail model follow hybrid approach describ millon et al httpsarxivorgab control sigmathresh paramet true marginalis hybrid approach high number pick precis estim ensur high numer precis turn testmod option take bit longer name combin name_marg_splin option use want combin estim someth els futur also select manual model includ combin need provid list paramet knotstep_marg mlknotsteps_marg run python b_marginalise_splinepi lensnam dataset dirpath_to_working_directori default code take model provid knotstep mlknotstep nmlspl list c marginalis regress differ estim similarli spline estim choos gener nois model use knotstep_marg_regdiff mlknotsteps_marg_regdiff list default choos gener nois model give precis estim use sigmathresh combin differ set regdiff paramet python c_marginalise_regdiffpi lensnam dataset dirpath_to_working_directori marginalis spline regress differ estim last step combin regdiff spline togeth choos estim combin name_marg_list list threshold use previou step sigmathresh_list also recommend marginalis two estim correspond use sigmathresh_fin decid estim includ final measur run python d_marginalise_allpi lensnam dataset dirpath_to_working_directori combin estim differ data set sever data set object might interest combin data set togeth run python _combine_datasetpi lensnam dirpath_to_working_directori creat folder combinationlensnam edit file config_combination_lensnamepi locat folder rerun script