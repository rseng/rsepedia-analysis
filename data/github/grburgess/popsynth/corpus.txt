titl popsynth gener astrophys popul synthesi framework tag python astronomi popul synthesi cosmolog author name j michael burgess orcid affili name francesca capel orcid affili bibliographi paperbib affili name max planck institut extraterrestri physic giessenbachstrass garch germani index name technic univers munich boltzmannstrass garch germani index date april summari simul survey flux redshift distanc astrophys popul routin task popsynth provid gener objectori framework produc synthet survey variou distribut luminos function appli select function observ variabl store portabl hdf format popul synthesi routin construct either use class serializ yaml format allow flexibl portabl user sampl luminos distanc popul creat auxiliari distribut paramet arbitrarili complex depend one anoth thu user simul complex astrophys popul use calibr analysi framework quickli test idea statement need popsynth provid gener framework simul astrophys popul easili extens class inherit scheme allow user adapt code need understand rate function astrophys popul eg gravit wave sourc gammaray burst activ galact nuclei becom increasingli import field loredo research develop variou way estim popul real data popsynth provid way calibr analysi techniqu produc synthet data input known eg mortlock moreov select effect import part popul analysi abil includ properti gener popul vital calibr survey analysi method oper incomplet sampl similar framework exist simul data specif catalog skypi skypi firesong firesong howev much focus applic includ abil impos select function procedur rate function associ distribut specifi popsynth numer integr rate function produc total rate object popul survey creat make draw poisson distribut mean equal total rate object multipli survey durat number object survey object properti distanc luminos sampl associ distribut select function appli latent observ variabl specifi user final popul object variabl return object serial disk later examin detail mathemat procedur detail custom found extens documentationhttpspopsynthreadthedocsio acknowledg project inspir convers daniel j mortlock wherein tri calibr analysi method eventu get around finish inspir also came want gener exampl farr lectur note select j michael burgess acknowledg support alexand von humboldt stiftung francesca capel acknowledg financi support excel cluster origin fund deutsch forschungsgemeinschaft dfg german research foundat germani excel strategi exc refer cihttpsgithubcomgrburgesspopsynthworkflowscibadgesvgbranchmast codecovhttpscodecovioghgrburgesspopsynthbranchmastergraphbadgesvghttpscodecovioghgrburgesspopsynth codaci badgehttpsapicodacycomprojectbadgegradedcefcaebehttpsappcodacycomghgrburgesspopsynthutm_sourcegithubcomutm_mediumreferralutm_contentgrburgesspopsynthutm_campaignbadge_grade_set document statushttpsreadthedocsorgprojectspopsynthbadgeversionlatesthttpspopsynthreadthedocsioenlatestbadgelatest doihttpszenodoorgbadgedoizenodosvghttpsdoiorgzenodo pypihttpsimgshieldsiopypivpopsynth pypi downloadshttpsimgshieldsiopypidmpopsynth statushttpsjosstheojorgpapersaecceaacstatussvghttpsjosstheojorgpapersaecceaac popsynth alt texthttpsrawgithubusercontentcomgrburgesspopsynthmasterexternallogopng popsynth core function creat observ survey latent popul model first let defin popul object term gener model two main ingredi object spatial distribut img srchttpsrendergithubusercontentcomrendermathmathlambdavecrvecpsi distribut inher properti img srchttpsrendergithubusercontentcomrendermathmathpivecphi vecpsi img srchttpsrendergithubusercontentcomrendermathmathvecpsi latent popul paramet img srchttpsrendergithubusercontentcomrendermathmathvecr spatial locat object img srchttpsrendergithubusercontentcomrendermathmathvecphi properti individu object luminos spin view angl mass etc spatial distribut defin img srchttpsrendergithubusercontentcomrendermathmathfracd lambdadtvecpsi int r fracdvdr lambdavecr vecpsi intens object given set popul paramet definit defin probabl object posit img srchttpsrendergithubusercontentcomrendermathmathvecr properti img srchttpsrendergithubusercontentcomrendermathmathvecphi img srchttpsrendergithubusercontentcomrendermathmathpivecr vecphi vecpsi fraclambdavecr vecpsi pivecphi vecpsi int r fracdvdr lambdavecr vecpsi popsynth allow specifi spatial properti distribut objectori way creat survey final ingredi creat sampl survey know mani object sampl popul select effect appli often see number simul framework present draw n object guarante enough incorrect survey take place given period time img srchttpsrendergithubusercontentcomrendermathmathdelta observ object count descript poisson process thu number object simul survey draw poisson distribut img srchttpsrendergithubusercontentcomrendermathmathn sim poisson left delta fracdlambdadt right thu popsynth first numer integr spatial distribut determin poisson rate paramet given vecpsi make poisson draw number object popul survey object posit properti drawn arbitrari depend final select function appli either latent observ without measur error properti note instead draw preset number object done mani astrophys popul simul framework equival run survey specif number object detect process distribut neg binomi process ie wait number success requir differ statist framework compar model data instal bash pip instal popsynth note synth pop look hard drive beat yamaha keyboard bell look elsewher alt texthttpsrawgithubusercontentcomgrburgesspopsynthmasterexternalpopgif contribut contribut popsynth alway welcom come form bug report pleas use github issu track system bugshttpsgithubcomgrburgesspopsynthissu question featur request code distribut easi creat custom distribut local setup would like add popsynth directli go ahead pleas includ test ensur contribut compat code maintain long term document addit exampl tutori better explan alway welcom ensur document build current version softwar use jupytexthttpsjupytextreadthedocsioenlatest write document markdown automat convert execut jupyt notebook chang push github jupyt jupytext format ipynbmd text_represent extens md format_nam markdown format_vers jupytext_vers kernelspec display_nam python languag python name python core concept popsynth core function creat observ survey latent popul model first let defin popul object term gener model two main ingredi object spatial distribut lambdavecr vecpsi distribut inher properti pivecphi vecpsi vecpsi latent popul paramet vecr spatial locat object vecphi properti individu object luminos spin view angl mass etc spatial distribut defin fracd lambdadtvecpsi int r fracdvdr lambdavecr vecpsi intens object given set popul paramet definit defin probabl object posit vecr properti vecphi pivecr vecphi vecpsi fraclambdavecr vecpsi pivecphi vecpsi int r fracdvdr lambdavecr vecpsi popsynth allow specifi spatial properti distribut objectori way creat survey final ingredi creat sampl survey know mani object sampl popul select effect appli often see number simul framework present draw n object guarante enough incorrect survey take place given period time delta observ object count descript poisson process thu number object simul survey draw poisson distribut n sim mathrmpoissonleftdelta fracdlambdadtright mathrm thu popsynth first numer integr spatial distribut determin poisson rate paramet given vecpsi make poisson draw number object popul survey object posit properti drawn arbitrari depend final select function appli either latent observ without measur error properti note instead draw preset number object done mani astrophys popul simul framework equival run survey specif number object detect process distribut neg binomi process ie wait number success requir differ statist framework compar model data follow process construct distribut popul describ jupyt jupytext format ipynbmd text_represent extens md format_nam markdown format_vers jupytext_vers kernelspec display_nam python languag python name python region instal popsynth instal bash pip instal popsynth altern one instal via git bash git clone httpsgithubcomgrburgesspopsynth cd popsynth python setuppi instal order produc graph popul one need option graphizhttpsgraphvizreadthedocsioenst librari plot seen document requir properli set ipyvolumehttpsipyvolumereadthedocsioenlatest packag configur local setup endregion python jupyt jupytext format ipynbmd text_represent extens md format_nam markdown format_vers jupytext_vers kernelspec display_nam python languag python name python stellar massluminos bia suppos star massluminos relationship l propto fluxlimit survey bia us toward observ massiv star repres full mass distribut let see set popsynth setup problem first assum initi mass function imf star describ mass distribut simplic assum imf lognorm distribut python matplotlib inlin import matplotlibpyplot plt jupyterthem import jtplot jtplotstylecontextnotebook fscale gridfals purpl bff yellow fefb import networkx nx import numpi np import warn warningssimplefilterignor import popsynth creat sampler mass directli observ mass latent quantiti initial_mass_funct popsynthlognormalauxsamplernamemass observ fals assum depend variabl luminos need derivedlumauxsampl gener luminos given mass python class massluminosityrelationpopsynthderivedlumauxsampl _auxiliary_sampler_nam massluminosityrel def __init__self mu tau sigma time set observedtru supermassluminosityrel self__init__mass_lum_rel uses_distancefals def true_samplerself size secondari quantiti mass mass self_secondary_samplersmasstrue_valu store log mass cube self_true_valu nplogmass def compute_luminosityself comput luminos relat return nppower self_true_valu luminos massluminosityrel put everyth togeth first need assign mass secondari quantiti luminos python luminosityset_secondary_samplerinitial_mass_funct final use simpl spheric geometri hold star also put hard flux limit survey simul fluxlimit catalog python pop_gen popsynthpopulationssphericalpopul r_max creat flux select flux_selector popsynthhardfluxselect flux_selectorboundari e pop_genset_flux_selectionflux_selector add luminis sampler pop_genadd_observed_quantityluminos let draw survey python pop pop_gendraw_surveyflux_sigma look distribut mass python tagsnbsphinxthumbnail fig ax pltsubplot bin nplinspac axhistpopmass binsbin labelal colorpurpl histtypestep lw axhistpopmasspopselect binsbin labelselect coloryellow histtypestep lw axset_xlabelstellar mass axlegend see inde select mass bias toward higher valu let look massluminostiy plane python fig ax pltsubplot bin nplinspac axscatterpopmasspopselect popluminosities_latentpopselect labelnot select colorpurpl alpha axscatterpopmasspopselect popluminosities_latentpopselect labelselect coloryellow alpha axset_xlabelstellar mass axset_ylabelluminos axset_yscalelog axlegend jupyt jupytext format ipynbmd text_represent extens md format_nam markdown format_vers jupytext_vers kernelspec display_nam python languag python name python custom distribut popul custom popul creat either piec togeth exist popul spatial luminos popul build scratch distribut popsynth come load mani combin typic popul distribut howev demonstr creat creat distribut popul sampler reli distribut popul intern spatial luminos distribut exampl let look simpl spatial distribut python matplotlib inlin import numpi np import matplotlibpyplot plt jupyterthem import jtplot jtplotstylecontextnotebook fscale gridfals purpl bff yellow fefb import popsynth popsynthupdate_logging_levelinfo import warn warningssimplefilterignor python popsynthdistribut import spatialdistribut class mysphericaldistributionspatialdistribut need properti regist class _distribution_nam mysphericaldistribut def __init__ self seed formnon latex formula ditribut form r pi r need truth dict paramet supermysphericaldistribut self__init__ seedse namespher formform def differential_volumeself r differenti volum sphere return nppi r r def transformself l r luminos flux return l nppi r r def dndvself r defin crazi chang numbervolum fun return r region simpli defin differenti volum luminos transform flux metric simpl sphere r_max cours subclass object add normal defin luminos distribut endregion python popsynthdistribut import luminositydistribut distributionparamet class myparetodistributionluminositydistribut _distribution_nam myparetodistribut lmin distributionparameterdefault vmin alpha distributionparameterdefault def __init__self seed namepareto latex formula ditribut lf_form rfracalpha l_rm minalphalalpha supermyparetodistribut self__init__ seedse namepareto formlf_form def phiself l actual function plot npzeros_likel idx l selflmin outidx selfalpha selflmin selfalpha lidx selfalpha return def draw_luminosityself size sampl latent paramet return nprandomparetoselfalpha size selflmin div classalert alertinfo note want creat cosmolog distribut inherit comologicaldistribut class div creat popul synthes defin distribut creat popul synthes encapsul python popsynthpopulation_synth import populationsynth class mypopulationpopulationsynth def __init__self lmin alpha r_max seed instanti distribut luminosity_distribut myparetodistributionseedse luminosity_distributionalpha alpha luminosity_distributionlmin lmin spatial_distribut mysphericaldistributionseedse spatial_distributionr_max r_max pass super class supermypopul self__init__ spatial_distributionspatial_distribut luminosity_distributionluminosity_distribut seedse python my_pop_gen mypopulationlmin alpha r_max flux_selector popsynthhardfluxselect flux_selectorboundari e my_pop_genset_flux_selectionflux_selector popul my_pop_gendraw_survey python fig populationdisplay_obs_fluxes_spherecmapmagma background_colorblack jupyt jupytext format ipynbmd text_represent extens md format_nam markdown format_vers jupytext_vers kernelspec display_nam python languag python name python short grb ghirlanda et al httpsarxivorgab fit algorithm use determin redshift luminos short grb use paramet reproduc popul observ gbm survey python popsynth import sfrdistribut bpldistribut populationsynth normalauxsampl auxiliarysampl hardfluxselect popsynth import update_logging_level update_logging_levelinfo python matplotlib inlin import matplotlibpyplot plt jupyterthem import jtplot jtplotstylecontextnotebook fscale gridfals purpl bff yellow fefb import networkx nx import numpi np import warn warningssimplefilterignor work luminos function short grb model broken power law python bpl bpldistribut bplalpha bplbeta bpllmin e erg bpllbreak e bpllmax e model redshift distribut empir form cole et al httpsacademicoupcommnrasarticlelogintru use popsynth call sfrdistribut perhap better name need python sfr sfrdistribut python sfrr sfra sfrrise sfrdecay sfrpeak checkout rate chang redshift python fig ax pltsubplot z nplinspac axplotz sfrdndvz colorpurpl axset_xlabelz axset_ylabelrfracmathrmdnmathrmdv region model author also secondari paramet connect luminos paramet spectrum grb propos spectra peak energi ep link luminos power law relat log e_mathrmp propto b log l build auxiliari sampl simul well also add bit scatter intercept relat endregion python intercept normalauxsamplernameintercept observedfals interceptmu interceptsigma python class epsamplerauxiliarysampl _auxiliary_sampler_nam epsampl def __init__self pass super class superepsampl self__init__ep observedtru uses_luminos true def true_samplerself size get intercept latent true valu sampler intercept self_secondary_samplersintercepttrue_valu slope self_true_valu nppower intercept slope nplogself_luminosity nplog def observation_samplerself size also add measur error ep self_obs_valu self_true_valu nprandomnorm sizes put togeth python pop_synth populationsynthspatial_distributionsfr luminosity_distributionbpl hard flux select fermigbm fluz limit e ergscm python select hardfluxselect selectionboundari e python pop_synthset_flux_selectionselect need add ep sampler set intercept sampler secondari automat ad popul synth python ep epsampl python epset_secondary_samplerintercept python pop_synthadd_auxiliary_samplerep readi sampl popul add measur uncertainti flux well python popul pop_synthdraw_surveyflux_sigma python tagsnbsphinxthumbnail populationdisplay_fluxestrue_colorpurpl obs_coloryellow with_arrowsfals let look distribut ep python fig ax pltsubplot axhistnplogpopulationep_obspopulationselect histtypestep coloryellow lw labelep observ axhistnplogpopulationeppopulationselect histtypestep colorpurpl lw labelep hidden axset_xlabellog ep axlegend python fig ax pltsubplot axscatterpopulationfluxes_observedpopulationselect populationep_obspopulationselectioncpurpl alpha axscatterpopulationfluxes_observedpopulationselect populationep_obspopulationselectioncyellow alpha axset_xscalelog axset_yscalelog axset_xlabellog ep axset_xlabellog flux look like observ catalog jupyt jupytext format ipynbmd text_represent extens md format_nam markdown format_vers jupytext_vers kernelspec display_nam python languag python name python fun milki way entir use moment support gener simplist spiral galaxi distribtuion python import popsynth import ipyvolum ipv astropycoordin import skycoord matplotlib inlin import matplotlibpyplot plt jupyterthem import jtplot purpl bff popsynthupdate_logging_levelinfo popsynthpopulationsspatial_popul import mwradialpopul python ld popsynthdistributionspareto_distributionparetodistribut ldalpha ldlmin python synth mwradialpopulationrho luminosity_distributionld python popul synthdraw_survey python fig populationdisplay_obs_fluxes_spher cmapmagma background_colorblack size jupyt jupytext format ipynbmd text_represent extens md format_nam markdown format_vers jupytext_vers kernelspec display_nam python languag python name python bl lac blazar model luminos function cosmic evolut bl lac type blazar present ajello et al httpsarxivorgab base observ gammaray fermilat instrument use result paper build bl lac popul abl reproduc result report recent fgl fermilat cataloghttpsarxivorgab reason well python scipi import special sf astropycoordin import skycoord popsynth import zpowercosmodistribut softfluxselect galacticplaneselect popsynth import sfrdistribut bpldistribut populationsynth normalauxsampl auxiliarysampl hardfluxselect matplotlib inlin import matplotlibpyplot plt jupyterthem import jtplot jtplotstylecontextnotebook fscale gridfals purpl bff yellow fefb import networkx nx import numpi np import warn warningssimplefilterignor work mention present model bl lac luminos function focu case pure densiti evolut refer pde paper case bl lac popul parametris broken power law luminos distribut independ densiti evolut follow cosmolog power law distribut work luminos rang l_mathrmmin time erg mathrm l_mathrmmax erg mathrm follow ajello et al luminos unit erg mathrm similarli maxium redshift consid z start set broken power law distribut bpldistribut python bpl bpldistribut bplalpha bplbeta bpllmin e bpllmax e bpllbreak e fig ax pltsubplot l npgeomspacebpllmin bpllmax axplotl bplphil colorpurpl axset_xscalelog axset_yscalelog axset_xlabelrl erg mathrm move redshift distribut follow paper parametr neg power law z purpos exampl assum bl lac blazar emit steadi state mean need set is_rat paramet fals defin zpowercosmodistribut cosmolog distribut mean local number densiti lambda per unit time also want survey whole sky integr pi sr valu pass lambda python zpow zpowercosmodistributionis_ratefals zpowlambda gpc sr zpowdelta fig ax pltsubplot z nplinspac axplotz zpowdndvz colorpurpl axset_yscalelog axset_xlabelz axset_ylabelrfracmathrmdnmathrmdv apart redshift luminos bl lac also properti simpl exampl consid spectral index assum gammaray emiss well model energi rang interest gev simpl power law assum true valu indic normal distribut mean mu standard deviat tau addit recognis reconstruct quantiti real survey uncertain valu reflect error sigma observ valu python index normalauxsamplernameindex indexmu indextau indexsigma know fermilat detector detect object univers necessari model kind select function gener brighter spectral harder object easier detect take acount select flux flpi d_lz d_l luminos distanc cm select effect realli hard boundari although could approxim realiti probabl detect object increas function flux captur effect consid softfluxselect follow python flux_selector softfluxselect flux_selectorboundari e erg cm flux_selectorstrength happen hood fig ax pltsubplot f npgeomspace e axplotf sfexpitflux_selectorstrength nplogf nplogflux_selectorboundari colorpurpl axset_xscalelog axset_xlabelf erg mathrmcm mathrm axset_ylabeldetect prob final sometim harder detect object near bright galact plane take account exclud circ either side plane galact longitud use galacticplaneselector python gp galacticplaneselect gpb_limit let final bring togeth make simul popul defin luminos spatial distribut alreadi use directli populationsynth also bplzpowercosmopopul avail quick interfac python main pop synth pop_synth populationsynthspatial_distributionzpow luminosity_distributionbpl add select effect pop_synthset_flux_selectionflux_selector pop_synthadd_spatial_selectorgp add auxiliari param spectral index pop_synthadd_observed_quantityindex let run last paramet set ad uncertainti observ flux valu python popul pop_synthdraw_surveyflux_sigma look properti simul popul detect undetect flux distanc python populationdisplay_fluxestrue_colorpurpl obs_coloryellow with_arrowsfals python fig ax pltsubplot axhistpopulationdist colorpurpl histtypestep lw labelal axhistpopulationdistancespopulationselect histtypestep lw coloryellow labeldetect axset_xlabelz axlegend also check spectral index distribut python fig ax pltsubplot axhistpopulationindex colorpurpl histtypestep lw labelal axhistpopulationindexpopulationselect histtypestep lw coloryellow labeldetect axset_xlabelspectr index axlegend let see distribut object sky galact coordin python tagsnbsphinxthumbnail c_all skycoordpopulationra populationdec unitdeg frameicr c_sel skycoordpopulationrapopulationselect populationdecpopulationselect unitdeg frameicr fig ax pltsubplotssubplot_kwproject hammer axscatterc_allgalacticlradnppi c_allgalacticbrad alpha colorpurpl labelal axscatterc_selgalacticlradnppi c_selgalacticbrad alpha coloryellow labeldetect axaxhlin colork axlegend imagin chang input paramet fit model observ order optim represent true bl lac blazar popul parameter python jupyt jupytext format ipynbmd text_represent extens md format_nam markdown format_vers jupytext_vers kernelspec display_nam python languag python name python auxiliari sampler along sampl spatial luminos distribut auxiliari properti sampl depend andor influenc luminos well allow build arbitrailiy complex depend paramet lead divers popul python import networkx nx import numpi np import matplotlibpyplot plt matplotlib inlin jupyterthem import jtplot jtplotstylecontextnotebook fscale gridfals purpl bff yellow fefb import warn warningssimplefilterignor import popsynth popsynthupdate_logging_levelinfo built auxiliari sampler sever built auxiliari sampler allow quickli add auxiliari paramet python popsynthlist_available_auxiliary_sampl add popul let look use python x popsynthnormalauxsamplernameaux_param observedtru xmu xsigma draw observ valu normal distribut std equal tau xtau valu x observ gener data set width normal distribtuion observ valu sampl latent valu otherwis latent valu store appli built auxiliari sampler howev custom ad creat custom auxiliari sampler let creat two auxiliari sampler sampl valu normal distribut depend first specifi main popul time chose sfrlike redshift distribut schecter luminos function python pop_gen popsynthpopulationsschechtersfrpopul ra rise decay peak lmine alpha region suppos properti demo want sampl well properti observ directli get mean properti latent could influenc paramet measur directli familiar bayesian hierarch model concept may familiar exampl could temperatur star influenc spectrum spectrum creat observ tempreatur impli random latent variabl sampl distribut creat auxiliarysampl child class defin true_sampl latent valu endregion python class demosamplerpopsynthauxiliarysampl _auxiliary_sampler_nam demosampl mu popsynthauxiliary_samplerauxiliaryparameterdefault tau popsynthauxiliary_samplerauxiliaryparameterdefault vmin def __init__self pass super class superdemosampl self__init__demo observedfals def true_samplerself size sampl latent valu properti self_true_valu nprandomnormalselfmu selftau sizes instanti assign pop_gen object draw survey python demo demosampl pop_genadd_observed_quantitydemo flux_selector popsynthhardfluxselect flux_selectorboundari e pop_genset_flux_selectionflux_selector popul pop_gendraw_survey plot option node_color purpl node_s width po nxdrawingnx_agraphgraphviz_layoutpopulationgraph progdot nxdrawpopulationgraph with_labelstru pospo option python fig populationdisplay_fluxesobs_colorpurpl true_coloryellow see popul store demo auxiliari properti python all_demo populationdemo obs_demo populationdemo_ob selected_demo populationdemo_select also see demo sampler known import creat popul yaml file regist happen add properti _auxiliary_sampler_nam demosampl must name class python popsynthlist_available_auxiliary_sampl observ auxiliari properti depend paramet suppos want simul properti observ instrument depend latent paramet creat second demo sampler tell observ error well read secondari sampler python class demosamplerpopsynthauxiliarysampl _auxiliary_sampler_nam demosampl mu popsynthauxiliary_samplerauxiliaryparameterdefault tau popsynthauxiliary_samplerauxiliaryparameterdefault vmin sigma popsynthauxiliary_samplerauxiliaryparameterdefault vmin def __init__ self time set observedtru superdemosampl self__init__demo observedtru uses_distancetru def true_samplerself size access secondari sampler dictionari case demo sampler true_valu paramet secondari self_secondary_samplersdemo sampl demo latent valu add depend demo tmp nprandomnormalselfmu selftau sizes fun substract log distanc auxiliari sampl know distanc self_true_valu tmp secondarytrue_valu nplog self_dist def observation_samplerself size defin observ valu ie laten valu observ error self_obs_valu self_true_valu nprandomnorm selfsigma sizes recreat base sampler python pop_gen popsynthpopulationsschechtersfrpopul r rise decay peak lmine alpha make new demo time attach base sampler instead assign secondari sampler demo popsynth smart enough search draw survey python demo demosampl demo demosampl demoset_secondary_samplerdemo attach base sampler pop_genadd_observed_quantitydemo python po nxdrawingnx_agraphgraphviz_layoutpop_gengraph progdot fig ax pltsubplot nxdrawpop_gengraph with_labelstru pospo axax option python flux_selector popsynthhardfluxselect flux_selectorboundari e pop_genset_flux_selectionflux_selector popul pop_gendraw_surveyflux_sigma python fig ax pltsubplot axscatterpopulationdemo_select populationdemo_select cpurpl axscatterpopulationdemo populationdemo cyellow deriv luminos sampler sometim luminos come directli distribut rather comput quantiti case want use derivedlumauxsampl class allow sampl auxiliari paramet comput luminos python class demosamplerpopsynthderivedlumauxsampl _auxiliary_sampler_nam demosampl mu popsynthauxiliary_samplerauxiliaryparameterdefault tau popsynthauxiliary_samplerauxiliaryparameterdefault vmin def __init__self mu tau sigma time set observedtru superdemosampl self__init__demo uses_distancefals def true_samplerself size draw random number tmp nprandomnormalselfmu selftau sizes self_true_valu tmp def compute_luminosityself comput luminos secondari self_secondary_samplersdemo return self_true_valu secondarytrue_valu python pop_gen popsynthpopulationsschechtersfrpopul ra rise decay peak lmine alpha python demo demosampl demo demosampl demoset_secondary_samplerdemo attach base sampler pop_genadd_observed_quantitydemo po nxdrawingnx_agraphgraphviz_layoutpop_gengraph progdot fig ax pltsubplot nxdrawpop_gengraph with_labelstru pospo option axax python flux_selector popsynthhardfluxselect flux_selectorboundari e pop_genset_flux_selectionflux_selector popul pop_gendraw_surveyflux_sigma python populationdisplay_fluxesobs_colorpurpl true_coloryellow jupyt jupytext format ipynbmd text_represent extens md format_nam markdown format_vers jupytext_vers kernelspec display_nam python languag python name python select select paramet includ flux distanc auxiliari variabl perform arbitrarili complex way familiar add select onto flux distanc examin detail built select function sever avail select function python import matplotlibpyplot plt import numpi np matplotlib inlin jupyterthem import jtplot jtplotstylecontextnotebook fscale gridfals purpl bff yellow fefb import popsynth popsynthloud_mod popsynthlist_available_selection_funct use set select paramet let add dummi paramet sampl normal distribut python aux_paramet popsynthnormalauxsamplernamedummi observedfals aux_parametermu aux_parametersigma use built box select function assign auxiliari sampler need tell select observ valu python box_select popsynthboxselectionnameaux_selector use_obs_valuetru box_selectvmin box_selectvmax also add select function flux python flux_select popsynthhardfluxselect flux_selectboundari e put togeth creat survey python ps popsynthschechterzpowercosmopopul lambda delta lmine alpha seed aux_parameterset_selection_probabilitybox_select psset_flux_selectionflux_select psadd_auxiliary_sampleraux_paramet pop psdraw_survey python fig ax pltsubplot axscatt nplogpopfluxes_observ popdummi colorpurpl alpha labeltot axscatt nplogpopselected_fluxes_observ popdummy_select coloryellow alpha labelselect axsetxlabellog flux ylabeldummi axlegend region custom select also creat custom select function first look simpli creat select simplic look bernoulli select class built endregion python class bernoulliselectionpopsynthselectionprob requir regist class _selection_nam bernoulliselect defin paramet use probabl popsynthselectionparametervmin vmax default def __init__self none superbernoulliselect self__init__namebernoulli def drawself size int none draw function take integ size sampl set privat variabl _select array boolean valu self_select statsbernoullirv self_prob sizesizeastypebool type npndarray procedur becom arbitraliy complex import note select know sever privat variabl _observed_flux _observed_valu _distanc _luminos enabl use valu select function sever build select use select variabl though done background python my_box_select popsynthboxselectionnamebox_flux_select use_fluxtru my_box_selectionvmin e my_box_selectionvmax e set flux selector select flux limit jupyt jupytext format ipynbmd text_represent extens md format_nam markdown format_vers jupytext_vers kernelspec display_nam python languag python name python distribut basic requir object creat popul synth spatial option deriv luminos sampler creat luminos distribut python matplotlib inlin import matplotlibpyplot plt jupyterthem import jtplot jtplotstylecontextnotebook fscale gridfals purpl bff yellow fefb import networkx nx import numpi np import warn warningssimplefilterignor popsynth come sever built distribut includ python import popsynth popsynthupdate_logging_levelinfo popsynthlist_available_distribut creat simpl popul synth first creat spatial distribut case spheric distribut power law densiti python spatial_distribut popsynthzpowersphericaldistribut spatial_distributionlambda spatial_distributiondelta spatial_distributionr_max creat powerlaw luminos distribut python luminosity_distribut popsynthparetodistribut luminosity_distributionalpha luminosity_distributionlmin combin togeth random seed popul synthesi object python pop_gen popsynthpopulationsynthluminosity_distributionluminosity_distribut spatial_distribut spatial_distribut seed python pop_gendisplay python popul pop_gendraw_survey python figpopulationdisplay_obs_fluxes_spherebackground_colorblacks cosmolog distribut want creat cosmolog spatial distribut use built python spatial_distribut popsynthzpowercosmodistribut spatial_distributionlambda spatial_distributiondelta spatial_distributionr_max distribut know cosmolog univers flux comput use luminos distanc rather linear distac python luminosity_distribut popsynthschechterdistribut luminosity_distributionalpha luminosity_distributionlmin python pop_gen popsynthpopulationsynthluminosity_distributionluminosity_distribut spatial_distribut spatial_distribut seed python pop_gendisplay python popul pop_gendraw_survey python figpopulationdisplay_obs_fluxes_spherecmapviridi background_colorblacks cosmolog paramet use simul store cosmolog object python popsynthcosmologyom python popsynthcosmologyh python popsynthcosmologyod div classalert alertinfo note valu om h chang chang valu cosmolog calcul div python popsynthcosmologyom python popsynthcosmologyod let run last simul see chang thing python pop_genclean python popul pop_gendraw_survey python figpopulationdisplay_obs_fluxes_spherebackground_colorblacks python jupyt jupytext format ipynbmd text_represent extens md format_nam markdown format_vers jupytext_vers kernelspec display_nam python languag python name python contribut contribut popsynth alway welcom come form bug report pleas use github issu track system bugshttpsgithubcomgrburgesspopsynthissu question featur request code distribut easi creat custom distribut local setup would like add popsynth directli go ahead pleas includ test ensur contribut compat code maintain long term document addit exampl tutori better explan alway welcom ensur document build current version softwar use jupytexthttpsjupytextreadthedocsioenlatest write document markdown automat convert execut jupyt notebook chang push github jupyt jupytext format ipynbmd text_represent extens md format_nam markdown format_vers jupytext_vers kernelspec display_nam python languag python name python quick start first let run exampl see go simul simpl exampl popul observ survey let say giant sphere surround fire fli fill volum homogen furthermor light emit follow pareto distribut power law luminos cours popul anyth activ galact nuclei agn gammaray burst grb etc framework provid popsynth intend gener python matplotlib inlin import matplotlibpyplot plt jupyterthem import jtplot jtplotstylecontextnotebook fscale gridfals purpl bff yellow fefb import popsynth popsynthupdate_logging_levelinfo import networkx nx import numpi np import warn warningssimplefilterignor python nbsphinxhidden class demosamplerpopsynthauxiliarysampl _auxiliary_sampler_nam demosampl mu popsynthauxiliary_samplerauxiliaryparameterdefault tau popsynthauxiliary_samplerauxiliaryparameterdefault vmin def __init__self superdemosampl self__init__demo observedfals def true_samplerself size self_true_valu nprandomnormalselfmu selftau sizes class demosamplerpopsynthderivedlumauxsampl _auxiliary_sampler_nam demosampl mu popsynthauxiliary_samplerauxiliaryparameterdefault tau popsynthauxiliary_samplerauxiliaryparameterdefault vmin sigma popsynthauxiliary_samplerauxiliaryparameterdefault vmin def __init__self superdemosampl self__init__demo def true_samplerself size secondari self_secondary_samplersdemo self_true_valu nprandomnormalselfmu selftau sizes secondarytrue_valu nplog self_dist def observation_samplerself size self_obs_valu self_true_valu nprandomnorm selfsigma sizes def compute_luminosityself secondari self_secondary_samplersdemo return self_true_valu secondarytrue_valu spheric homogen popul fire fli pareto luminos function popsynth come sever type popul includ though easili construct ownhttpspopsynthreadthedocsioenlatestnotebookscustomhtml access built popul synthes one simpli instanti popul popsynthpopul modul simul survey homogen spheric spatial distribut pareto distribut luminos python homogeneous_pareto_synth popsynthpopulationsparetohomogeneoussphericalpopul lambda lmin alpha densiti normal lower bound lf index lf printhomogeneous_pareto_synth python homogeneous_pareto_synthdisplay networkxhttpsnetworkxorg gravizhttpsgraphvizreadthedocsioenst plot graph connect python also display graph object option node_color purpl node_s width po nxdrawingnx_agraphgraphviz_layouthomogeneous_pareto_synthgraph progdot nxdrawhomogeneous_pareto_synthgraph with_labelstru pospo option creat survey sampl popul draw_survey function first need specifi flux select ad flux select function use hard select function exampl make ownhttpspopsynthreadthedocsioenlatestnotebooksselectionshtmlcustomselect select function mark object observ flux select boundari hidden still access popul python flux_selector popsynthhardfluxselect flux_selectorboundari e homogeneous_pareto_synthset_flux_selectionflux_selector observ flux mean latent flux obscur observ error sampl observ error log normal distribut sigma futur popsynth option python popul homogeneous_pareto_synthdraw_surveyflux_sigma creat popul survey get spatial luminos function specifi integr given distanc comput number expect object poisson draw mean made determin number total object survey next quantiti sampl distanc luminos need luminos convert flux given observ error select function case hard cutoff appli popul object creat could specifi soft cutoff invers logit logarithm well python homogeneous_pareto_synthclean flux_selector popsynthsoftfluxselect flux_selectorboundari e flux_selectorstrength homogeneous_pareto_synthset_flux_selectionflux_selector popul homogeneous_pareto_synthdraw_surveyflux_sigma detail process behind simulationhttpspopsynthreadthedocsioenlatestnotebooksdistributionshtmlcoreconcept found deeper document popul object popul object store inform sampl survey includ inform latent paramet measur paramet distanc select nonselect object look fluxdist distribut survey yellow dot latent flux valu ie without observ nois purpl dot measur valu select object arrow point latent measur valu python fig populationdisplay_fluxesobs_colorpurpl true_coloryellow fun display flux simul univers python fig populationdisplay_obs_fluxes_spherebackground_colorblack popul object store lot inform exampl array select boolean python populationselect retriev select nonselect distanc python distanc populationselected_dist python hidden_dist populationhidden_dist python fig ax pltsubplot bin nplinspac axhisthidden_dist binsbin fcyellow ecklw axhistdist binsbin fcpurpl ecklw axset_xlabelz save popul record result popul synth hdf file maintain inform run true valu popul paramet alway store truth dictionari python populationtruth python populationwritetosaved_poph python reloaded_popul popsynthpopulationfrom_filesaved_poph python reloaded_populationtruth creat popul yaml file sometim easier quickli write popul yaml file without creat object python let take look format yaml seed seed specifiy luminos distribut parmet luminos distribut paretodistribut lmin e alpha specifiy flux select function parmet flux select hardfluxselect boundari e specifiy spatial distribut parmet spatial distribut zpowercosmodistribut lambda delta r_max specifi distanc select function parmet distanc select bernoulliselect probabl spatial select need spatial select none auxiliari function must known registri run time custom auxiliari sampler stellar_mass type normalauxsampl observ fals mu sigma select secondari init variabl demo type demosampl observ fals select upperbound boundari demo type demosampl observ true select secondari demo stellar_mass sampler sampler depend load yaml file popul synth use save file demonstr python my_fil popsynthutilspackage_dataget_path_of_data_filepopyml ps popsynthpopulationsynthfrom_filemy_fil printp python psdisplay python option node_color purpl node_s width po nxdrawingnx_agraphgraphviz_layoutpsgraph progdot nxdrawpsgraph with_labelstru pospo option region see popul creat correctli us mean easili pass popul around collabor test endregion python pop psdraw_surveyflux_sigma sinc read popul synth file also write one creat class file python psto_dict python pswrite_totmpmy_pop_synthyml popul synth also serial popul python poppop_synth therefor alway know exactli simul data popsynth document master file creat sphinxquickstart mon aug adapt file complet like least contain root toctre direct welcom popsynth document imag externallogopng framework provid abstract way gener survey popul arbitrari luminos function redshift distribut addit auxiliari quantiti sampl store popul save restor via hdf file later use popul synthesi routin creat via class structur yaml file user construct class spatial luminos etc distribut connect arbitrarili complex select function note synth pop expect suggest check depech mode though possibl combin code good music_ imag externalpopgif _music httpsopenspotifycomplaylistwlbjvjxiuggujnuesijuxycrosxmpsaqvajw toctre maxdepth hidden notebooksinstallationipynb notebooksquickstartipynb notebooksconceptipynb notebooksdistributionsipynb notebookscustomipynb notebooksselectionsipynb notebooksauxipynb notebookscontributeipynb apiapi nbgalleri caption exampl notebooksshort_grbsipynb notebooksbl_lacsipynb notebooksstellar_massipynb notebooksmilkywayipynb referencefil includ referencefil endif objnam underlin automodul fullnam block function function rubric function autosummari item function item endfor endif endblock block class class rubric class autosummari item class item endfor endif endblock block except except rubric except autosummari item except item endfor endif endblock referencefil includ referencefil endif objnam underlin currentmodul modul auto objtyp objnam referencefil includ referencefil endif objnam underlin currentmodul modul autoclass objnam showinherit __init__ method set caught_result methodsremove__init__ endif block attributes_summari attribut rubric attribut summari autosummari toctre templat baserst item attribut name item endfor endif endblock block methods_summari method rubric method summari autosummari toctre templat baserst item method name item endfor endif endblock popsynth toctre maxdepth popsynth api find document class method includ modulesrst