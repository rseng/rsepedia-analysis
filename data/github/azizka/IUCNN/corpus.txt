badg start project statu activ project reach stabl usabl state activ developedhttpswwwrepostatusorgbadgeslatestactivesvghttpswwwrepostatusorgact doihttpszenodoorgbadgesvghttpszenodoorgbadgelatestdoi rcmdcheckhttpsgithubcomazizkaiucnnworkflowsrcmdcheckbadgesvghttpsgithubcomazizkaiucnnact badg end iucnn batch estim speci iucn red list threat statu use neural network instal instal iucnn directli github use devtool r installpackagesdevtool librarydevtool install_githubiucnniucnn sinc iucnn function run python iucnn need set python environ easili done within r use install_miniconda function packag reticul need c gb disk space problem occur step check excel document reticulatehttpsrstudiogithubioreticulateindexhtml r installpackagesreticul libraryreticul install_miniconda instal tensorflow python librari use maco linux recommend instal tensorflow use conda r reticulateconda_installrreticulatetensorflow use window instal tensorflow use pip r reticulatepy_installtensorflowrc pip true final instal npbnn python librari github r reticulatepy_installhttpsgithubcomdsilvestronpbnnarchiverefstagsvtargz pip true usag multipl model featur avail iucnn vignett detail tutori use avail part packag vignetteapproximate_iucn_red_list_assessments_with_iucnn run iucnn write file work directori simpl exampl run terrestri orchid take minut download mb data featur prepar work directori r librarytidyvers libraryiucnn load exampl data datatraining_occ geograph occurr speci iucn assess datatraining_label correspond iucn assess dataprediction_occ occurr evalu speci prdict featur label prepar featur iucnn_prepare_featurestraining_occ train featur labels_train iucnn_prepare_labelsx training_label featur train label features_predict iucnn_prepare_featuresprediction_occ predict featur model train iucnn_train_modelx featur lab labels_train summarym plotm predict iucnn_predict_statusx features_predict model model test r librarytidyvers libraryiucnn load exampl data datatraining_occ geograph occurr speci iucn assess datatraining_label correspond iucn assess dataprediction_occ occurr evalu speci predict featur label prepar featur iucnn_prepare_featurestraining_occ train featur labels_train iucnn_prepare_labelsx training_label featur train label features_predict iucnn_prepare_featuresprediction_occ predict featur model test illustr model differ dropout rate number layer mod_test iucnn_modeltestx featur lab labels_train logfil model_testing_resultstxt model_outpath iucnn_modeltest mode nnclass dropout_r c n_layer c _ __ cv_fold init_logfil true select best model m_best iucnn_best_modelx mod_test criterion val_acc require_dropout true inspect model structur perform summarym_best plotm_best train best model train data predict m_prod iucnn_train_modelx featur lab labels_train production_model m_best predict rl categori target speci pred iucnn_predict_statusx features_predict model m_prod plotpr use convolut neural network r featur iucnn_cnn_featurestraining_occ train featur labels_train iucnn_prepare_labelsx training_label featur train label features_predict iucnn_cnn_featuresprediction_occ predict featur citat r libraryiucnn citationiucnn zizka andermann silvestro iucnn deep learn approach approxim speci extinct risk divers distribut doi ddihttpsdoiorgddi zizka silvestro vitt p knight autom conserv assess orchid famili deep learn conserv biolog doi doiorgcobihttpsdoiorgdoiorgcobi iucnn fix bug export iucnn_feature_import function iucnn move iucnniucnn ad iucnn_cnn_featur function standard function name scheme ad test polygon valid iucnn_biome_featur add iucnn_bias_featur function sampbia suggest packag iucnn minor fix output valloss testloss nnreg mode iucnn final version first releas minor fix typo vignett readm iucnn final version last releas test iucnn add footprint_featur function ad option select variabl rang clim_featur function ad option remov empti biom biom_featur function improv spellcheck add rescal option eoo aoo part geo_featur set eoo aoo speci less three occurr updat normal climat variabl iucnn bug fix predict_iucn function bug fix train_iucn function iucnn ad descript inform add citat inform start readm add vignett iucnn ad newsmd file track chang packag packag skeleton titl approxim red list assess iucnn output rmarkdownhtml_vignett vignett vignetteindexentryapproxim red list assess iucnn vignetteengineknitrknitr vignetteencodingutf background red list intern union conserv natur wwwiucnorg iucn rl arguabl one thorough wide use tool assess global extinct risk speci howev iucn rl assess processusu perform group specialist taxonom group profession assessorsar time consum therefor small fraction global biodivers evalu iucn rl strong bia toward vertebr certain region bias low fraction speci evalu bia conserv toward evalu group prevent synthet largescal ecolog biogeograph analys extinct risk iucnn implement neural network predict iucn statu far evalu data defici speci base speci trait iucnn model train exist iucn rl assess trait may use predict although iucnn implement workflow base sole publicli avail georeferenc speci occurr record environment data typic exampl applic iucnn predict conserv statu larg number speci approxim extinct risk number threaten speci region specif taxonom group synthet analys predict iucn categori individu speci interest systemat ecolog case studi r libraryiucnn librarymagrittr librarydplyr instal iucnn use r python softwar need instal via r instal iucnn directli github use devtool r installpackagesdevtool librarydevtool libraryiucnn python need instal instanc use miniconda reticul within r need c gb disk space problem occur step check excel document reticulatehttpsrstudiogithubioreticulateindexhtml r installpackagesreticul libraryreticul install_miniconda python instal specifi python version sue reticulateuse_python instal tensorflow python modul iucnn use function python modul tensorflow npbnn also need instal via r r reticulateconda_installrreticulatetensorflow reticulatepy_installhttpsgithubcomdsilvestronpbnnarchivevtargz pip true prepar input data iucnn predict iucn rl categori evalu data defici speci base geograph occurr record set train speci occurr record iucn assess avail set refer speci train data amount train speci necessari vari number categori gener better ideal train dataset compris sever hundr speci typic scenario use avail plant speci region avail speci plant famili avail train speci limit good option reduc detail predict possibl threaten iucn categori cr en vu v threaten speci nt lc three type input necessari easili avail mani speci geograph occurr record train speci train occurr occurr record might obtain varieti databas exampl field collect public databas bien httpsbiennceasucsbedubien gbif wwwgbiforg gbif data obtain within r via rgbif packag see herehttpsdocsropensciorgrgbifarticlesindexhtml tutori iucnn need dataset least three column contain speci name decim longitud coordin decim latitud coordin interest clean record gbif may want look blog posthttpsdatabloggbiforgpostgbiffilteringguid check coordinatecleanerhttpsgithubcomropenscicoordinateclean bracatushttpsgithubcomeduardoarlebracatu packag iucn global red list assess train speci train label iucn rl assess train speci obtain iucn either via wwwiucnredlistorg via rredlist packag via r prefer mani speci see herehttpsropensciorgtutorialsrredlist_tutori tutori use rredlist import target label class well repres train data rare case iucn data sinc instanc vu nt rare class imbalanc consid use possibl threaten iucn categori cr en vu v threaten speci nt lc supersampl option iucnn_train_model function geograph occurr record speci iucn statu predict predict occurr geograph occurr target speci format train occurr describ exampl dataset avail iucnn datatraining_occ train occurr datatraining_label train label dataprediction_occ featur prepar iucnn use per speci trait featur neural network requir input format datafram one row per speci one column contain speci name number addit column contain numer featur speci gener featur might repres trait instanc taxonomi eg famili anatomi eg bodi size ecolog eg feed guild conserv eg popul dynam howev sinc often geograph occurr data avail iucnn contain function obtain default featur georeferenc occurr record alon combin publicli avail environment data default featur inform speci rang climat nich human footprint biom see tabl detail list default featur user may chose use specif group featur via type option iucnn_prepare_label tutori use exampl dataset orchid famili orchidacea provid iucnn packag prepar default featur singl call iucnn_prepare_featur r datatraining_occ geograph occurr speci iucn assess dataprediction_occ features_train iucnn_prepare_featurestraining_occ train featur features_predict iucnn_prepare_featuresprediction_occ predict featur label prepar iucnn expect label train numer categori use iucn rl categori need convert numer right way done use iucnn_prepare_label function function convert categori label obtain iucn rl standard numer valu either detail level iucn rl categori broader possibl threatenednot threaten level see iucnn_prepare_label inform label convert numer categori follow accepted_label argument instanc default case lc cr chang accept label match chang accordingli r datatraining_label labels_train iucnn_prepare_labelsx training_label features_train train label run iucnn run iucnn consist two step train neural network predict statu new speci iucnn contain three differ neural network approach predict iucn statu speci custom present default approach see section custom analys tutori detail train bayesian regress type neural network model train base train featur label iucnn train neural network via iucnn_train_model function multipl option custom design network includ among other number layer fraction record use test valid iucnn_train_model function write folder work directori contain model return summari statist includ crossentropi loss accuraci valid set use compar perform differ model follow code train neural network model hidden layer node relu activ function specifi seed default make sure subset data design train valid test set across differ run model configur see model estim weight save current work directori r res_ iucnn_train_modelx features_train lab labels_train path_to_output iucnn_model_ summari plot method give overview train process model perform r summaryres_ model type nnclass train speci featur train accuraci valid accuraci accuraci unseen data test set label detail class detail label represent label input_count estimated_count confus matrix row test data column predict lc nt vu en cr lc nt vu en cr plotres_ plot chunk unnamedchunkfigureunnamedchunkpng predict iucn global red list statu train model predict conserv statu evalu data defici speci iucnn_predict_statu function output contain data frame speci name numer label gener iucnn_prepare_label r predict iucnn_predict_statusx features_predict model res_ plotpredict plot chunk unnamedchunkfigureunnamedchunkpng import rememb follow use iucnn result iucnn categori approxim iucnn reach accuraci broad threaten v nonthreaten level detail level case accuraci may consider lower case mean speci misclassifi iucnn indiffer provid featur one hand mean speci trait data avail use hand mean thought need choic featur default featur iucnn usual safe choic number featur limit current iucnn support miss valu featur tabl remov speci miss valu iucnn indiffer relat train test data possibl use train data palearct bird predict conserv statu south american nematod recommend instead better approach predict conserv statu speci train data genu order famili altern train data could chosen geograph region function aspect eg feed guild bodi size howev inclus taxonomyevolutionari histori choic train data recommend amount train data import better minimum sever hundr train speci less equal distribut label class includ train data limit broader threatenednot threaten level recommend proport iucn rl categori imbalanc train data neural network may bias toward reproduc frequenc predict especi imbal categori differ categori frequenc among train predict set larg avoid categori frequenc balanc train data possibl otherwis use supersampl option nnreg type model limit broader possibl threatenednot threaten level detail may remedi issu iucnn predict equival full iucn red list assess see main purpos iucnn identifi speci like need conserv action trigger full iucn assess provid largescal overview extinct risk given taxonom group instanc macroecolog macroevolutionari context custom iucnn analys iucnn contain multipl option custom step analys adapt fulli connect neural network peculiar iucn rl speci distribut data describ import option custom featur label prepar model train test statu predict import step option custom iucnn analysi summar tabl tabl critic step custom iucnn analysi relev consider point step function argument descript user consider featur design iucnn_prepare_featur iucnn_feature_import defin featur extract provid occurr record avail default biom presenc bioclim variabl human footprint geograph featur averag per speci rescal determin extinct risk target group data avail result featur import suggest label detail prep_label level threaten mani differ categori speci classifi number default support full iucn categori lc nt vu en cr binari possibl threaten v threaten detail need accuraci detail level suffici target applic model type iucnn_train_model mode model framework appli categor classif classif take ordin number categori account classif base bayesian framework mani target categori import high accuraci intermedi class eg vu nt en import uncertainti estim speci model structur iucnn_train_model valid fraction fraction input train data use valid v train fraction data use valid henc train larg train data model structur iucnn_train_model cv_fold number fold use crossvalid instanc data divid fold data use valid run larg train data given number fold subset still includ label class model structur iucnn_train_model n_layer number hidden layer node neural network complex model model structur iucnn_train_model balance_class frequenc class label train data balanc use supersampl imbalanc class label frequenc class label differ train data predict data set model structur iucnn_train_model act_f_outact_f activ function neural network relationship featur label expect model structur iucnn_train_model label_stretch_factor factor stretch input class label use nnreg type model model test suggest effect model accuraci model structur iucnn_train_model drop_out rate number node remov individu epoch necessari target threshold use nnclass model bnnclass though target accuraci su predict mani node model predict predict_iucnn target_acc defin overal target accuraci model speci classifi enough certainti reach threshold label data defici error rate accept proport speci need includ featur label add remov featur block default featur select base empir test relev differ taxa region howev analys part featur may relev exclud featur block use type argument iucnn_prepare_featur function instanc exclud biom featur r features_train iucnn_prepare_featurestraining_occ type cgeograph climat humanfootprint prepar featur individu control featur prepar necessari featur block obtain individu function tabl function obtain default featur option custom featur featur blockfunct nameopt custom geographiciucnn_geographic_featur biomesiucnn_biome_featureschang refer dataset biom biome_input biomeid remov biom without speci occurr remove_zero climateiucnn_climate_featuresth amount bioclim variabl default sourc includ type resolut default input data re human footprintiucnn_footprint_featureschos time point default sourc year break point differ footprint categori break default approxim quantil global footprint dataset default sourc human footprint footp_input geograph biasiucnn_bias_featuresth resolut bia raster re provid templat raster ra instanc r clim_featur iucnn_climate_featuresx training_occ type select clim_featur iucnn_climate_featuresx training_occ type use custom featur also possibl provid featur unrel default featur may contain continu categor featur process need format need datafram compulsori column contain speci name continu variabl rescal cover similar rang wherea categor featur code binari presentabs result iucnn_biome_featur instanc r feat dataframespeci cadansonia digitata ceiba pentandra max_plant_size_m c africa c south_america c fraction_of_records_in_protected_area c tabl descript default featur includ iucnn_prepare_featur continu variabl rescal similar rang featur block name descript tot_occgeographicnumb occurrencesth total number occurr avail speci uni_occgeographicnumb geograph uniqu occurrencesth number geograph uniqu record avail speci mean_latgeographicmean latitudeth mean latitud record speci mean_longeographicmean longitudeth mean longitud record speci lat_rangegeographiclatitudin rangeth latitudin rang quantil quantil lon_rangegeographiclongitudin rangeth longitudin rang quantil quantil alt_hemispheregeographicth hemispher southern hemispher northern hemispher eoogeographicextend occurrenceth extend occurr calcul rcat speci less record set aoo aoogeographicarea occupancyth area occup sum area sqkm grid cell speci occur biometrop subtrop moist broadleaf forestsar least speci record present biom biometrop subtrop dri broadleaf forestsar least speci record present biom biometrop subtrop conifer forestsar least speci record present biom biometemper broadleaf mix forestsar least speci record present biom biometemper conif forestsar least speci record present biom biomebor foreststaigaar least speci record present biom biometrop subtrop grassland savanna shrublandsar least speci record present biom biometemper grassland savanna shrublandsar least speci record present biom biomeflood grassland savannasar least speci record present biom biomemontan grassland shrublandsar least speci record present biom biometundraar least speci record present biom biomemediterranean forest woodland scrubar least speci record present biom biomedesert xeric shrublandsar least speci record present biom biomemangrovestrop subtrop moist broadleaf forestsar least speci record present biom biomelakear least speci record present biom biomerock icear least speci record present biom bioclimateannu mean temperatureth median valu bioclimat layer occurr record speci record na valu remov bioclimatetemperatur seasonalityth median valu bioclimat layer occurr record speci record na valu remov bioclimatemean temperatur coldest quarterth median valu bioclimat layer occurr record speci record na valu remov bioclimateannu precipitationth median valu bioclimat layer occurr record speci record na valu remov bioclimateprecipit seasonalityth median valu bioclimat layer occurr record speci record na valu remov bioclimateprecipit driest quarterth median valu bioclimat layer occurr record speci record na valu remov range_bioclimaterang annual mean temperatureth rang valu bioclimat layer occurr record speci record na valu remov rang quantil range_bioclimaterang temperatur seasonalityth rang valu bioclimat layer occurr record speci record na valu remov rang quantil range_bioclimaterang mean temperatur coldest quarterth rang valu bioclimat layer occurr record speci record na valu remov rang quantil range_bioclimaterang annual precipitationth rang valu bioclimat layer occurr record speci record na valu remov rang quantil range_bioclimaterang precipit seasonalityth rang valu bioclimat layer occurr record speci record na valu remov rang quantil range_bioclimaterang precipit driest quarterth rang valu bioclimat layer occurr record speci record na valu remov rang quantil humanfootprint__human footprint human footprint year lowest impactth fraction record area lowest categori human footprint year footprint categor categor repres roughli quantil humanfootprint__human footprinthuman footprint year intermedi impact fraction record area second lowest categori human footprint year footprint categor categor repres roughli quantil humanfootprint__human footprinthuman footprint year intermedi impact fraction record area second highest categori human footprint year footprint categor categor repres roughli quantil humanfootprint__human footprinthuman footprint year highest impactth fraction record area highest categori human footprint year footprint categor categor repres roughli quantil humanfootprint__human footprinthuman footprint year lowest impactth fraction record area lowest categori human footprint year footprint categor categor repres roughli quantil humanfootprint__human footprinthuman footprint year intermedi impact fraction record area second lowest categori human footprint year footprint categor categor repres roughli quantil humanfootprint__human footprinthuman footprint year intermedi impact fraction record area second highest categori human footprint year footprint categor categor repres roughli quantil humanfootprint__human footprinthuman footprint year highest impactth fraction record area highest categori human footprint year footprint categor categor repres roughli quantil label full categori vs threatenednot threaten iucnn_prepare_label function may accept custom label long includ accepted_label option also provid classif threatenednonthreaten via level threaten option broader level model accuraci usual significantli higher instanc r labels_train iucnn_prepare_labelstraining_label featur level broad model train nn regress model custom model paramet iucnn_train_model function contain variou option custom neural network includ among fraction valid test data maximum number epoch number layer node activ function dropout random input data see iucnn_train_model comprehens list option descript default iucnn_train_model train neural network three hidden layer node sigmoid activ function depend dataset differ network may improv perform instanc set differ model hidden layer node sigmoid activ function without use bia node first hidden layer r res_ iucnn_train_modelx features_train lab labels_train dropout_r path_to_output iucnn_model_ n_layer use_bia fals act_f sigmoid compar valid loss model use res_validation_loss res_validation_loss model case yield lower valid loss therefor prefer chose prefer model configur base valid loss check test accuraci best model res_test_accuraci iucnn_train_model function contain variou option adapt model see iucnn_train_model detail chang model algorithm three neural network algorithm implement iucnn besid default classifi approach base tensorflow implement bayesian neural network classifi regress type neural network bayesian approach advantag return true probabl classif speci rel output class eg probabl speci lc consid approach suitabl classif speci iucn categori default option need time model train best appli identifi best model paramet use default approach run bnn set mode option iucnn_train_model bnnclass r res_ iucnn_train_modelx features_train lab labels_train path_to_output iucnn_model_ mode bnnclass iucnn also offer option train nn regress model instead classifi sinc iucn threat status constitut list ordin categori sort increas threat level model task estim categori regress problem model train iucnn_train_model function specifi train regress model set mode nnreg r res_ iucnn_train_modelx features_train lab labels_train path_to_output iucnn_model_ mode nnreg rescale_featur true featur import feature_import function use gaug import differ featur block individu featur model perform function implement permut featur import techniqu randomli reshuffl valu within individu featur block featur evalu random affect model predict accuraci given featur block featur import model abil predict random featur lead larg drop predict accuraci use feature_import featur default featur block defin use feature_block option r fi feature_importancex res_ plotfi plot chunk unnamedchunkfigureunnamedchunkpng model test train final model use predict conserv statu evalu speci recommend use iucnn_modeltest function find best set model dataset process often refer hyperparamet tune essenti step build suitabl model predict task iucnn_modeltest function allow provid set iucnn_train_model vector lead function train separ model provid set function explor possibl permut provid set follow command result differ model train r modeltest_result iucnn_modeltestfeatur label dropout_r c n_layer c___ model specif set test model written logfil inspect iucnn_best_model function decid model set pick best model differ criteria pick best model select best predict accuraci best predict overal statu distribut lowest weight misclassif error etc r best_m iucnn_best_modelmodeltest_result criterionval_acc model test necessari retrain use model specif identifi iucnn_best_model possibl take respect set directli output iucnn_best_model function via productionmodel argument iucnn_train_model r train best model train data predict m_prod iucnn_train_modeltrain_feat train_lab production_model m_best overwrit true product model use final predict r predict rl categori target speci pred iucnn_predict_statuspred_feat m_prod plotpr statu predict iucnn_predict_statu function offer option custom predict import option mani case target_acc allow set overal targetaccuraci threshold model need achiev option avail nnclass nnreg model train use dropout see help function iucnn_train_model explan well bnnclass model target_acc achiev model select make categori call given instanc speci classifi enough certainti reach target accuraci classifi na assess r pred_ iucnn_predict_statusx features_predict target_acc model res_ plotpred_ plot chunk unnamedchunkfigureunnamedchunkpng furthermor turn return_iucn option return numer label instead iucnn rl categori label r pred_ iucnn_predict_statusx features_predict model res_ return_iucn fals output iucnn_predict_statu function iucnn_predict object contain sever output object predict label individu instanc access pred_class_predict label probabl estim neural network via pred_mc_dropout_prob nnclass nnreg dropout pred_posterior_prob bnnclass detail pred_raw_predict object contain individu label probabl result softmax output layer case nnclass regress label case nnreg number speci per categori anoth statist extract iucnn_predict object overal categori distribut predict given predict instanc access pred_pred_cat_count show distribut label predict includ count speci could predict given chosen target_acc anoth statist predsampled_cat_freq avail dropout model bnnclass model see show class distribut sampl pred_mc_dropout_prob pred_posterior_prob bnnclass model differ predsampled_cat_freq pred_mc_dropout_probspred_posterior_prob former repres count best label determin instanc wherea latter repres label sampl predict label probabl also proport sampl label given instanc receiv maximum label probabl latter done repeatedli includ stochast random sampl class given probabl vector pred_mc_dropout_probspred_posterior_prob use plot histogram estim class report uncertainti interv around number speci class set speci predict train predict use convolut neural network instead fulli connect neural network present iucnn also implement predict algorithm use convolut neural network cnn input data predict raster perspeci grid occurr number sinc input featur network structur differ cnn implement iucnn separ workflow featur prepar featur prepar use iucnn_cnn_featur function count number occurr record custom raster extent speci occurr function simpli run data frame train predict occurr separ yet sinc extent two dataset like differ recommend creat custom raster beforehand use simpl latlon raster user may provid coordin raster suitabl coordin refer system long agre occurr coordin raster r preapr custom raster split step train test occurr extent libraryterra datatraining_occ dataprediction_occ find minimum latitud longitud valu extent raster min_lon mincmintraining_occdecimallongitud minprediction_occdecimallongitud max_lon maxcmaxtraining_occdecimallongitud maxprediction_occdecimallongitud min_lat mincmintraining_occdecimallatitud minprediction_occdecimallatitud max_lat maxcmaxtraining_occdecimallatitud maxprediction_occdecimallatitud set coordin refer system ra rastcr projlonglat datumwg set raster extent extra cmin_lon max_lon min_lat max_lat set raster resolut resra resolut cr unit case degre latlon train featur cnn_featur iucnn_cnn_featuresx training_occ ra predict featur cnn_features_predict iucnn_cnn_featuresx prediction_occ ra train label cnn_label iucnn_prepare_labelsx training_label cnn_featur model train r trained_model iucnn_cnn_traincnn_featur cnn_label overwrit true dropout_r optimize_for accuraci plottrained_model summarytrained_model statu predict r pred iucnn_predict_statuscnn_features_predict trained_model target_acc titl approxim red list assess iucnn output rmarkdownhtml_vignett output pdf_document vignett vignetteindexentryapproxim red list assess iucnn vignetteengineknitrknitr vignetteencodingutf background red list intern union conserv natur wwwiucnorg iucn rl arguabl one thorough wide use tool assess global extinct risk speci howev iucn rl assess processusu perform group specialist taxonom group profession assessorsar time consum therefor small fraction global biodivers evalu iucn rl strong bia toward vertebr certain region bias low fraction speci evalu bia conserv toward evalu group prevent synthet largescal ecolog biogeograph analys extinct risk iucnn implement neural network predict iucn statu far evalu data defici speci base speci trait iucnn model train exist iucn rl assess trait may use predict although iucnn implement workflow base sole publicli avail georeferenc speci occurr record environment data typic exampl applic iucnn predict conserv statu larg number speci approxim extinct risk number threaten speci region specif taxonom group synthet analys predict iucn categori individu speci interest systemat ecolog case studi r libraryiucnn librarymagrittr librarydplyr instal iucnn use r python softwar need instal via r instal iucnn directli github use devtool r installpackagesdevtool librarydevtool libraryiucnn python need instal instanc use miniconda reticul within r need c gb disk space problem occur step check excel document reticulatehttpsrstudiogithubioreticulateindexhtml r installpackagesreticul libraryreticul install_miniconda python instal specifi python version sue reticulateuse_python instal tensorflow python modul iucnn use function python modul tensorflow npbnn also need instal via r r reticulateconda_installrreticulatetensorflow reticulatepy_installhttpsgithubcomdsilvestronpbnnarchivevtargz pip true prepar input data iucnn predict iucn rl categori evalu data defici speci base geograph occurr record set train speci occurr record iucn assess avail set refer speci train data amount train speci necessari vari number categori gener better ideal train dataset compris sever hundr speci typic scenario use avail plant speci region avail speci plant famili avail train speci limit good option reduc detail predict possibl threaten iucn categori cr en vu v threaten speci nt lc three type input necessari easili avail mani speci geograph occurr record train speci train occurr occurr record might obtain varieti databas exampl field collect public databas bien httpsbiennceasucsbedubien gbif wwwgbiforg gbif data obtain within r via rgbif packag see herehttpsdocsropensciorgrgbifarticlesindexhtml tutori iucnn need dataset least three column contain speci name decim longitud coordin decim latitud coordin interest clean record gbif may want look blog posthttpsdatabloggbiforgpostgbiffilteringguid check coordinatecleanerhttpsgithubcomropenscicoordinateclean bracatushttpsgithubcomeduardoarlebracatu packag iucn global red list assess train speci train label iucn rl assess train speci obtain iucn either via wwwiucnredlistorg via rredlist packag via r prefer mani speci see herehttpsropensciorgtutorialsrredlist_tutori tutori use rredlist import target label class well repres train data rare case iucn data sinc instanc vu nt rare class imbalanc consid use possibl threaten iucn categori cr en vu v threaten speci nt lc supersampl option iucnn_train_model function geograph occurr record speci iucn statu predict predict occurr geograph occurr target speci format train occurr describ exampl dataset avail iucnn datatraining_occ train occurr datatraining_label train label dataprediction_occ featur prepar iucnn use per speci trait featur neural network requir input format datafram one row per speci one column contain speci name number addit column contain numer featur speci gener featur might repres trait instanc taxonomi eg famili anatomi eg bodi size ecolog eg feed guild conserv eg popul dynam howev sinc often geograph occurr data avail iucnn contain function obtain default featur georeferenc occurr record alon combin publicli avail environment data default featur inform speci rang climat nich human footprint biom see tabl detail list default featur user may chose use specif group featur via type option iucnn_prepare_label tutori use exampl dataset orchid famili orchidacea provid iucnn packag prepar default featur singl call iucnn_prepare_featur r datatraining_occ geograph occurr speci iucn assess dataprediction_occ features_train iucnn_prepare_featurestraining_occ train featur features_predict iucnn_prepare_featuresprediction_occ predict featur label prepar iucnn expect label train numer categori use iucn rl categori need convert numer right way done use iucnn_prepare_label function function convert categori label obtain iucn rl standard numer valu either detail level iucn rl categori broader possibl threatenednot threaten level see iucnn_prepare_label inform label convert numer categori follow accepted_label argument instanc default case lc cr chang accept label match chang accordingli r datatraining_label labels_train iucnn_prepare_labelsx training_label features_train train label run iucnn run iucnn consist two step train neural network predict statu new speci iucnn contain three differ neural network approach predict iucn statu speci custom present default approach see section custom analys tutori detail train bayesian regress type neural network model train base train featur label iucnn train neural network via iucnn_train_model function multipl option custom design network includ among other number layer fraction record use test valid iucnn_train_model function write folder work directori contain model return summari statist includ crossentropi loss accuraci valid set use compar perform differ model follow code train neural network model hidden layer node relu activ function specifi seed default make sure subset data design train valid test set across differ run model configur see model estim weight save current work directori r res_ iucnn_train_modelx features_train lab labels_train path_to_output iucnn_model_ summari plot method give overview train process model perform r summaryres_ model type nnclass train speci featur train accuraci valid accuraci accuraci unseen data test set label detail class detail label represent label input_count estimated_count confus matrix row test data column predict lc nt vu en cr lc nt vu en cr plotres_ plot chunk unnamedchunkfigureunnamedchunkpng predict iucn global red list statu train model predict conserv statu evalu data defici speci iucnn_predict_statu function output contain data frame speci name numer label gener iucnn_prepare_label r predict iucnn_predict_statusx features_predict model res_ plotpredict plot chunk unnamedchunkfigureunnamedchunkpng import rememb follow use iucnn result iucnn categori approxim iucnn reach accuraci broad threaten v nonthreaten level detail level case accuraci may consider lower case mean speci misclassifi iucnn indiffer provid featur one hand mean speci trait data avail use hand mean thought need choic featur default featur iucnn usual safe choic number featur limit current iucnn support miss valu featur tabl remov speci miss valu iucnn indiffer relat train test data possibl use train data palearct bird predict conserv statu south american nematod recommend instead better approach predict conserv statu speci train data genu order famili altern train data could chosen geograph region function aspect eg feed guild bodi size howev inclus taxonomyevolutionari histori choic train data recommend amount train data import better minimum sever hundr train speci less equal distribut label class includ train data limit broader threatenednot threaten level recommend proport iucn rl categori imbalanc train data neural network may bias toward reproduc frequenc predict especi imbal categori differ categori frequenc among train predict set larg avoid categori frequenc balanc train data possibl otherwis use supersampl option nnreg type model limit broader possibl threatenednot threaten level detail may remedi issu iucnn predict equival full iucn red list assess see main purpos iucnn identifi speci like need conserv action trigger full iucn assess provid largescal overview extinct risk given taxonom group instanc macroecolog macroevolutionari context custom iucnn analys iucnn contain multipl option custom step analys adapt fulli connect neural network peculiar iucn rl speci distribut data describ import option custom featur label prepar model train test statu predict import step option custom iucnn analysi summar tabl tabl critic step custom iucnn analysi relev consider point step function argument descript user consider featur design iucnn_prepare_featur iucnn_feature_import defin featur extract provid occurr record avail default biom presenc bioclim variabl human footprint geograph featur averag per speci rescal determin extinct risk target group data avail result featur import suggest label detail prep_label level threaten mani differ categori speci classifi number default support full iucn categori lc nt vu en cr binari possibl threaten v threaten detail need accuraci detail level suffici target applic model type iucnn_train_model mode model framework appli categor classif classif take ordin number categori account classif base bayesian framework mani target categori import high accuraci intermedi class eg vu nt en import uncertainti estim speci model structur iucnn_train_model valid fraction fraction input train data use valid v train fraction data use valid henc train larg train data model structur iucnn_train_model cv_fold number fold use crossvalid instanc data divid fold data use valid run larg train data given number fold subset still includ label class model structur iucnn_train_model n_layer number hidden layer node neural network complex model model structur iucnn_train_model balance_class frequenc class label train data balanc use supersampl imbalanc class label frequenc class label differ train data predict data set model structur iucnn_train_model act_f_outact_f activ function neural network relationship featur label expect model structur iucnn_train_model label_stretch_factor factor stretch input class label use nnreg type model model test suggest effect model accuraci model structur iucnn_train_model drop_out rate number node remov individu epoch necessari target threshold use nnclass model bnnclass though target accuraci su predict mani node model predict predict_iucnn target_acc defin overal target accuraci model speci classifi enough certainti reach threshold label data defici error rate accept proport speci need includ featur label add remov featur block default featur select base empir test relev differ taxa region howev analys part featur may relev exclud featur block use type argument iucnn_prepare_featur function instanc exclud biom featur r features_train iucnn_prepare_featurestraining_occ type cgeograph climat humanfootprint prepar featur individu control featur prepar necessari featur block obtain individu function tabl function obtain default featur option custom featur featur blockfunct nameopt custom geographiciucnn_geographic_featur biomesiucnn_biome_featureschang refer dataset biom biome_input biomeid remov biom without speci occurr remove_zero climateiucnn_climate_featuresth amount bioclim variabl default sourc includ type resolut default input data re human footprintiucnn_footprint_featureschos time point default sourc year break point differ footprint categori break default approxim quantil global footprint dataset default sourc human footprint footp_input geograph biasiucnn_bias_featuresth resolut bia raster re provid templat raster ra instanc r clim_featur iucnn_climate_featuresx training_occ type select clim_featur iucnn_climate_featuresx training_occ type use custom featur also possibl provid featur unrel default featur may contain continu categor featur process need format need datafram compulsori column contain speci name continu variabl rescal cover similar rang wherea categor featur code binari presentabs result iucnn_biome_featur instanc r feat dataframespeci cadansonia digitata ceiba pentandra max_plant_size_m c africa c south_america c fraction_of_records_in_protected_area c tabl descript default featur includ iucnn_prepare_featur continu variabl rescal similar rang featur block name descript tot_occgeographicnumb occurrencesth total number occurr avail speci uni_occgeographicnumb geograph uniqu occurrencesth number geograph uniqu record avail speci mean_latgeographicmean latitudeth mean latitud record speci mean_longeographicmean longitudeth mean longitud record speci lat_rangegeographiclatitudin rangeth latitudin rang quantil quantil lon_rangegeographiclongitudin rangeth longitudin rang quantil quantil alt_hemispheregeographicth hemispher southern hemispher northern hemispher eoogeographicextend occurrenceth extend occurr calcul rcat speci less record set aoo aoogeographicarea occupancyth area occup sum area sqkm grid cell speci occur biometrop subtrop moist broadleaf forestsar least speci record present biom biometrop subtrop dri broadleaf forestsar least speci record present biom biometrop subtrop conifer forestsar least speci record present biom biometemper broadleaf mix forestsar least speci record present biom biometemper conif forestsar least speci record present biom biomebor foreststaigaar least speci record present biom biometrop subtrop grassland savanna shrublandsar least speci record present biom biometemper grassland savanna shrublandsar least speci record present biom biomeflood grassland savannasar least speci record present biom biomemontan grassland shrublandsar least speci record present biom biometundraar least speci record present biom biomemediterranean forest woodland scrubar least speci record present biom biomedesert xeric shrublandsar least speci record present biom biomemangrovestrop subtrop moist broadleaf forestsar least speci record present biom biomelakear least speci record present biom biomerock icear least speci record present biom bioclimateannu mean temperatureth median valu bioclimat layer occurr record speci record na valu remov bioclimatetemperatur seasonalityth median valu bioclimat layer occurr record speci record na valu remov bioclimatemean temperatur coldest quarterth median valu bioclimat layer occurr record speci record na valu remov bioclimateannu precipitationth median valu bioclimat layer occurr record speci record na valu remov bioclimateprecipit seasonalityth median valu bioclimat layer occurr record speci record na valu remov bioclimateprecipit driest quarterth median valu bioclimat layer occurr record speci record na valu remov range_bioclimaterang annual mean temperatureth rang valu bioclimat layer occurr record speci record na valu remov rang quantil range_bioclimaterang temperatur seasonalityth rang valu bioclimat layer occurr record speci record na valu remov rang quantil range_bioclimaterang mean temperatur coldest quarterth rang valu bioclimat layer occurr record speci record na valu remov rang quantil range_bioclimaterang annual precipitationth rang valu bioclimat layer occurr record speci record na valu remov rang quantil range_bioclimaterang precipit seasonalityth rang valu bioclimat layer occurr record speci record na valu remov rang quantil range_bioclimaterang precipit driest quarterth rang valu bioclimat layer occurr record speci record na valu remov rang quantil humanfootprint__human footprint human footprint year lowest impactth fraction record area lowest categori human footprint year footprint categor categor repres roughli quantil humanfootprint__human footprinthuman footprint year intermedi impact fraction record area second lowest categori human footprint year footprint categor categor repres roughli quantil humanfootprint__human footprinthuman footprint year intermedi impact fraction record area second highest categori human footprint year footprint categor categor repres roughli quantil humanfootprint__human footprinthuman footprint year highest impactth fraction record area highest categori human footprint year footprint categor categor repres roughli quantil humanfootprint__human footprinthuman footprint year lowest impactth fraction record area lowest categori human footprint year footprint categor categor repres roughli quantil humanfootprint__human footprinthuman footprint year intermedi impact fraction record area second lowest categori human footprint year footprint categor categor repres roughli quantil humanfootprint__human footprinthuman footprint year intermedi impact fraction record area second highest categori human footprint year footprint categor categor repres roughli quantil humanfootprint__human footprinthuman footprint year highest impactth fraction record area highest categori human footprint year footprint categor categor repres roughli quantil label full categori vs threatenednot threaten iucnn_prepare_label function may accept custom label long includ accepted_label option also provid classif threatenednonthreaten via level threaten option broader level model accuraci usual significantli higher instanc r labels_train iucnn_prepare_labelstraining_label featur level broad model train nn regress model custom model paramet iucnn_train_model function contain variou option custom neural network includ among fraction valid test data maximum number epoch number layer node activ function dropout random input data see iucnn_train_model comprehens list option descript default iucnn_train_model train neural network three hidden layer node sigmoid activ function depend dataset differ network may improv perform instanc set differ model hidden layer node sigmoid activ function without use bia node first hidden layer r res_ iucnn_train_modelx features_train lab labels_train dropout_r path_to_output iucnn_model_ n_layer use_bia fals act_f sigmoid compar valid loss model use res_validation_loss res_validation_loss model case yield lower valid loss therefor prefer chose prefer model configur base valid loss check test accuraci best model res_test_accuraci iucnn_train_model function contain variou option adapt model see iucnn_train_model detail chang model algorithm three neural network algorithm implement iucnn besid default classifi approach base tensorflow implement bayesian neural network classifi regress type neural network bayesian approach advantag return true probabl classif speci rel output class eg probabl speci lc consid approach suitabl classif speci iucn categori default option need time model train best appli identifi best model paramet use default approach run bnn set mode option iucnn_train_model bnnclass r res_ iucnn_train_modelx features_train lab labels_train path_to_output iucnn_model_ mode bnnclass iucnn also offer option train nn regress model instead classifi sinc iucn threat status constitut list ordin categori sort increas threat level model task estim categori regress problem model train iucnn_train_model function specifi train regress model set mode nnreg r res_ iucnn_train_modelx features_train lab labels_train path_to_output iucnn_model_ mode nnreg rescale_featur true featur import iucnn_feature_import function use gaug import differ featur block individu featur model perform function implement permut featur import techniqu randomli reshuffl valu within individu featur block featur evalu random affect model predict accuraci given featur block featur import model abil predict random featur lead larg drop predict accuraci use iucnn_feature_import featur default featur block defin use feature_block option r fi iucnn_feature_importancex res_ plotfi plot chunk unnamedchunkfigureunnamedchunkpng model test train final model use predict conserv statu evalu speci recommend use iucnn_modeltest function find best set model dataset process often refer hyperparamet tune essenti step build suitabl model predict task iucnn_modeltest function allow provid set iucnn_train_model vector lead function train separ model provid set function explor possibl permut provid set follow command result differ model train r modeltest_result iucnn_modeltestfeatur label dropout_r c n_layer c___ model specif set test model written logfil inspect iucnn_best_model function decid model set pick best model differ criteria pick best model select best predict accuraci best predict overal statu distribut lowest weight misclassif error etc r best_m iucnn_best_modelmodeltest_result criterionval_acc model test necessari retrain use model specif identifi iucnn_best_model possibl take respect set directli output iucnn_best_model function via productionmodel argument iucnn_train_model r train best model train data predict m_prod iucnn_train_modeltrain_feat train_lab production_model m_best overwrit true product model use final predict r predict rl categori target speci pred iucnn_predict_statuspred_feat m_prod plotpr statu predict iucnn_predict_statu function offer option custom predict import option mani case target_acc allow set overal targetaccuraci threshold model need achiev option avail nnclass nnreg model train use dropout see help function iucnn_train_model explan well bnnclass model target_acc achiev model select make categori call given instanc speci classifi enough certainti reach target accuraci classifi na assess r pred_ iucnn_predict_statusx features_predict target_acc model res_ plotpred_ plot chunk unnamedchunkfigureunnamedchunkpng furthermor turn return_iucn option return numer label instead iucnn rl categori label r pred_ iucnn_predict_statusx features_predict model res_ return_iucn fals output iucnn_predict_statu function iucnn_predict object contain sever output object predict label individu instanc access pred_class_predict label probabl estim neural network via pred_mc_dropout_prob nnclass nnreg dropout pred_posterior_prob bnnclass detail pred_raw_predict object contain individu label probabl result softmax output layer case nnclass regress label case nnreg number speci per categori anoth statist extract iucnn_predict object overal categori distribut predict given predict instanc access pred_pred_cat_count show distribut label predict includ count speci could predict given chosen target_acc anoth statist predsampled_cat_freq avail dropout model bnnclass model see show class distribut sampl pred_mc_dropout_prob pred_posterior_prob bnnclass model differ predsampled_cat_freq pred_mc_dropout_probspred_posterior_prob former repres count best label determin instanc wherea latter repres label sampl predict label probabl also proport sampl label given instanc receiv maximum label probabl latter done repeatedli includ stochast random sampl class given probabl vector pred_mc_dropout_probspred_posterior_prob use plot histogram estim class report uncertainti interv around number speci class set speci predict train predict use convolut neural network instead fulli connect neural network present iucnn also implement predict algorithm use convolut neural network cnn input data predict raster perspeci grid occurr number sinc input featur network structur differ cnn implement iucnn separ workflow featur prepar featur prepar use iucnn_cnn_featur function count number occurr record custom raster extent speci occurr function simpli run data frame train predict occurr separ yet sinc extent two dataset like differ recommend creat custom raster beforehand use simpl latlon raster user may provid coordin raster suitabl coordin refer system long agre occurr coordin raster r preapr custom raster split step train test occurr extent libraryterra datatraining_occ dataprediction_occ find minimum latitud longitud valu extent raster min_lon mincmintraining_occdecimallongitud minprediction_occdecimallongitud max_lon maxcmaxtraining_occdecimallongitud maxprediction_occdecimallongitud min_lat mincmintraining_occdecimallatitud minprediction_occdecimallatitud max_lat maxcmaxtraining_occdecimallatitud maxprediction_occdecimallatitud set coordin refer system ra rastcr projlonglat datumwg set raster extent extra cmin_lon max_lon min_lat max_lat set raster resolut resra resolut cr unit case degre latlon train featur cnn_featur iucnn_cnn_featuresx training_occ ra predict featur cnn_features_predict iucnn_cnn_featuresx prediction_occ ra train label cnn_label iucnn_prepare_labelsx training_label cnn_featur model train r trained_model iucnn_cnn_traincnn_featur cnn_label overwrit true dropout_r optimize_for accuraci plottrained_model summarytrained_model statu predict r pred iucnn_predict_statuscnn_features_predict trained_model target_acc