contributor coven code conduct pledg interest foster open welcom environ contributor maintain pledg make particip project commun harassmentfre experi everyon regardless age bodi size disabl ethnic sex characterist gender ident express level experi educ socioeconom statu nation person appear race religion sexual ident orient standard exampl behavior contribut creat posit environ includ use welcom inclus languag respect differ viewpoint experi grace accept construct critic focus best commun show empathi toward commun member exampl unaccept behavior particip includ use sexual languag imageri unwelcom sexual attent advanc troll insultingderogatori comment person polit attack public privat harass publish other privat inform physic electron address without explicit permiss conduct could reason consid inappropri profession set respons project maintain respons clarifi standard accept behavior expect take appropri fair correct action respons instanc unaccept behavior project maintain right respons remov edit reject comment commit code wiki edit issu contribut align code conduct ban temporarili perman contributor behavior deem inappropri threaten offens harm scope code conduct appli within project space also appli individu repres project commun public space exampl repres project commun includ use offici project email address post via offici social media account act appoint repres onlin offlin event represent project may defin clarifi project maintain enforc instanc abus harass otherwis unaccept behavior may report contact project team insert email address complaint review investig result respons deem necessari appropri circumst project team oblig maintain confidenti regard report incid detail specif enforc polici may post separ project maintain follow enforc code conduct good faith may face temporari perman repercuss determin member project leadership attribut code conduct adapt contributor covenanthomepag version avail httpswwwcontributorcovenantorgversioncodeofconducthtml homepag httpswwwcontributorcovenantorg answer common question code conduct see httpswwwcontributorcovenantorgfaq opfi document statushttpsreadthedocsorgprojectsopfibadgeversionlatesthttpsopfireadthedocsioenlatestbadgelatest pypihttpimgshieldsiopypivopfisvghttpspypipythonorgpypiopfi anacondaserv badgehttpsanacondaorgbiocondaopfibadgesinstallercondasvghttpscondaanacondaorgbioconda python packag discoveri annot analysi gene cluster genom metagenom dataset instal recommend way instal opfi biocondahttpsbiocondagithubio requir condahttpsdocscondaioenlatest packag manag instal opfi depend read herehttpsopfireadthedocsioenlatestinstallationhtml current bioconda support bit linux mac os window user still instal opfi pip see howev complet instal procedur fulli test window system instal conda linux mac os first set conda bioconda follow quickstarthttpsbiocondagithubiouserinstallhtml guid done run conda instal c bioconda opfi that note instal opfi conda environ current activ creat fresh environ opfi instal conda creat name opfienv c bioconda opfi conda activ opfienv instal pip method automat instal nonpython depend need instal separ follow individu instal instruct complet list requir softwar avail herehttpsopfireadthedocsioenlatestinstallationhtmldepend step complet instal opfi pip run pip instal opfi inform instal develop check document sitehttpsopfireadthedocsioenlatestinstallationhtml gene finder gene finder iter execut homolog search identifi gene cluster interest exampl script set search put crisprca system rippkaea orientali pcc cyanobacteria genom data input provid opfi tutori tutorialstutorialipynb python gene_finderpipelin import pipelin import os genomic_data gcf__asmv_genomicfnagz p pipelin padd_seed_stepdbca nameca e_val blast_typeprot num_thread padd_filter_stepdbcas_al namecas_al e_val blast_typeprot num_thread padd_crispr_step use input filenam job id job_id ospathbasenamegenomic_data result prunjob_idjob_id datagenomic_data min_prot_len span gziptru operon analyz operon analyz filter result gene finder identifi promis candid operon accord given set criteria also contain tool visual candid perform basic statist pleas note use word operon throughout librari somewhat artifact earli develop time opfi predict whether candid system repres true operon set gene control singl promot although candid gene cluster may certainli qualifi operon current user make distinct analysi analysi modul provid tool identifi operon conform certain rule requir contain certain gene two gene within given distanc full list given csv output written stdout identifi outcom analysi put operon rule defin ruleset determin whether operon consid candid analysi filter defin filterset help defin featur consid evalu rule might exampl want exclud operon contain particular gene copi gene coincident exist kb true operon might want ignor purpos evalu rule sampl script perform task given python import sy operon_analyzeranalyz import analyz operon_analyzerrul import ruleset filterset rs rulesetrequiretransposas excludeca at_most_n_bp_from_anythingtransposas same_orient fs filtersetpick_overlapping_features_by_bit_scor must_be_within_n_bp_of_anyth __name__ __main__ analyzesysstdin rs fs list avail rule excludefeature_nam str forbid presenc particular featur requirefeature_nam str requir presenc particular featur max_distancefeature_nam str feature_nam str distance_bp int two given featur must distance_bp base pair apart requir exactli one featur present at_least_n_bp_from_anythingfeature_nam str distance_bp int requir featur least distance_bp base pair away featur mostli use elimin overlap featur at_most_n_bp_from_anythingfeature_nam str distance_bp int given featur must within distance_bp base pair anoth featur requir exactli one match featur present return fals given featur featur same_orientationexcept optionalliststr none featur operon must orient contains_any_set_of_featuresset listliststr return true operon contain featur name least one list use determin operon contain essenti gene particular system exampl contains_exactly_one_offeature_nam str feature_nam str exclusiveor presenc two featur one featur must present must contains_at_least_n_featuresfeature_nam liststr feature_count int count_multiple_copi bool fals operon must contain least feature_count featur list default match featur appear multipl time operon count count multipl copi featur set count_multiple_copiestru contains_groupself feature_nam liststr max_gap_distance_bp int require_same_orient bool operon must contain contigu set featur order separ max_gap_distance_bp option user may requir featur must orient maximum_sizeself feature_nam str max_bp int all_matching_features_must_pass bool fals regex bool fals operon must contain least one featur feature_nam size base pair max_bp smaller all_matching_features_must_pass true everi match featur must least max_bp long minimum_sizeself feature_nam str min_bp int all_matching_features_must_pass bool fals regex bool fals operon must contain least one featur feature_nam size base pair min_bp larger all_matching_features_must_pass true everi match featur must least min_bp long customrul rule add rule userdefin function list avail filter must_be_within_n_bp_of_anythingdistance_bp int featur far away anyth probabl part operon must_be_within_n_bp_of_featurefeature_nam str distance_bp int may situat two featur alway appear near function operon pick_overlapping_features_by_bit_scoreminimum_overlap_threshold float two featur overlap minimum_overlap_threshold one lower bit score ignor customfilt filter add filter userdefin function analysi output line csv contain access id path file contain contig coordin whether pass fail given rule pass last column contain word pass otherwis start fail follow commadelimit list serial rule fail adher name paramet pass method visual interest operon visual simpl gene diagram user decid defin though sampl script creat diagram operon pass given rule python import sy operon_analyzeranalyz import load_analyzed_operon operon_analyzervisu import build_operon_dictionari plot_operon analysis_csv pipeline_csv image_directori sysargv good_operon openpipeline_csv f operon build_operon_dictionaryf openanalysis_csv f contig filenam start end result load_analyzed_operonsf result pass continu op operonsgetcontig filenam start end op none continu good_operonsappendop plot_operonsgood_operon image_directori overview statist basic tool provid inspect natur operon pass given rule intent help research determin filter aggress aggress enough get overal better feel data simpl bar plot produc follow python import sy import matplotlibpyplot plt operon_analyzeranalyz import load_analyzed_operon operon_analyzeroverview import load_count def plot_bar_chartfilenam titl data rotatetru fig ax pltsubplot x strdreplac n data data axbarx edgecolork rotat pltxticksrot axset_ylabelcount axset_titletitl pltsavefigspng filenam bbox_inchestight pltclose __name__ __main__ unique_rule_viol failed_rule_occurr rule_failure_count load_countssysstdin plot_bar_chartsolefailurepng number time rulenwa one fail sortedunique_rule_violateditem plot_bar_charttotalfailur total number rule failur sortedfailed_rule_occurrencesitem plot_bar_chartfailuresateachcontig number rule fail contig sortedrule_failure_countsitem rotatefals changelog opfi updat version number joss public archiv opfi pypi badg ad document opfi initi releas contribut thank interest contribut opfi contributut take mani form includ report bug discuss current state code submit fix propos new featur issu issu use report problem bug librari request new featur discuss potenti chang pr creat good bug report summari issu specif step reproduc problem prefer form code exampl descript expect behavior descript actual behavior pull request gener use github flowhttpsguidesgithubcomintroductionflowindexhtml mean chang happen pull request fork repositori github account clone project machin creat branch local succinct descript name commit chang branch push chang fork open pr repositori includ descript chang refer issu pr address code style contributor attempt adher pephttpswwwpythonorgdevpepspep style guid possibl although current strictli enforc minimum new contribut follow style consist preexist code base test use pytesthttpsdocspytestorgenx framework creat unit test pleas write test new code contribut project licens contribut agre contribut licens mit licens code conduct take open sourc commun serious hold contributor high standard commun particip contribut project agre uphold code conducthttpsgithubcomwilkelabopfiblobcontributingguidecodeofconductmd attribut document adapt gener contribut guidelineshttpsgithubcomextendrrextendrblobmaincontributingmd rextendr project contribut templatehttpsgistgithubcombriandkdebecdafaa develop briandkhttpsgistgithubcombriandk titl opfi python packag identifi gene cluster larg genom metagenom data set tag python bioinformat metagenom gene cluster analysi author name alexi hillcofirst author correspond author affili name jame r rybarskicofirst author affili name kuang hu affili name ilya j finkelstein affili name clau wilk affili affili name depart integr biolog univers texa austin austin texa usa index name depart molecular bioscienc univers texa austin austin texa usa index name center system synthet biolog univers texa austin austin texa usa index date juli bibliographi paperbib summari gene cluster set coloc often contigu gene togeth perform specif function mani relev biotechnolog need softwar tool extract candid gene cluster vast amount avail genom data therefor develop opfi modular pipelin identif arbitrari gene cluster assembl genom metagenom sequenc opfi contain function annot dededupl visual put gene cluster util customiz rulebas filter approach select candid system adher userdefin criteria opfi implement python avail python packag index bioconda grüning statement need gene cluster success repurpos number biotechn applic includ biofuel product organ compound synthesi gene edit fischbach despit broad util known gene cluster identif novel gene cluster remain challeng task mani tool avail annot singular gene protein domain biolog sequenc data camacho steinegg buchfink program identifi whole gene cluster box mani case research must combin bioinformat tool ad hoc result oneoff pipelin difficult reproduc sever softwar packag develop discoveri specif type gene cluster blin santosabertura vanheel tool may suffici flexibl identifi cluster arbitrari genom composit address gap develop modular pipelin integr multipl bioinformat tool provid flexibl uniform comput framework identif arbitrari gene cluster recent studi use opfi uncov novel crisprassoci transposon cast larg metagenom dataset rybarski implement opfi implement python use sever bioinformat tool featur annot camacho steinegg buchfink edgar shi user instal opfi depend bioconda grüning opfi consist two major compon gene finder discoveri gene cluster operon analyz rulebas filter dedupl visual gene cluster identifi gene finder modul gener output commasepar csv format common entir packag exampl gene finder usag follow exampl script search put crisprca loci genom rippkaea orientali pcc inform biolog signific exampl well data input descript found tutori directori project github repositori exampl illustr use pipelin class set gene cluster search first add_seed_step specifi step annot ca gene use protein blast blastp camacho databas repres ca protein sequenc bp region directli downstream put ca gene select analysi region discard next add_filter_step add step annot candid region additon ca gene candid least one addit ca gene discard master list put system final add_crispr_step add step search remain candid crispr array ie region altern bp direct repeat variabl sequenc use pilercr repeat find softwar edgar python gene_finderpipelin import pipelin import os genomic_data gcf__asmv_genomicfnagz job_id r_orientali p pipelin padd_seed_stepdbca nameca e_val blast_typeprot padd_filter_stepdbcas_al nameca e_val blast_typeprot padd_crispr_step prunjob_idjob_id datagenomic_data span gziptru run code creat csv file r_orientalis_resultscsv contain inform system identifi exampl two canon crisprca system one locu weak homolog ca gene line file repres singl put featur candid locu featur candid group togeth csv detail inform output format found opfi documentationhttpsopfireadthedocsio exampl operon analyz usag previou exampl pass system must meet rel permiss criterion least one ca gene coloc one addit ca gene suffici identifi crisprca loci may also captur region contain function crisprca system rather consist open read frame orf weak homolog ca gene improb system could elimin homolog search make match accept threshold restrict ie decreas evalu howev could result loss interest highli diverg system therefor implement modul enabl posthomolog search filter candid system use flexibl rule combin creat sophist elimin function allow user first perform broad homolog search permiss paramet appli rule cull unlik candid without lose interest andor novel system addit rule may use select candid specif genom composit downstream analysi note use term operon throughout librari artifact earli develop opfi time opfi predict whether candid system repres true operon set gene control singl promot although candid gene cluster may certainli qualifi operon current user make distinct rulebas filter illustr follow exampl sampl script take output gener previou exampl reconstruct system operon object next ruleset class use assess candid pass system must contain two cascad gene ca ca bp apart least one ca effector gene complet list rule see opfi documentationhttpsopfireadthedocsio python operon_analyz import analyz rule rs rulesruleset rscontains_groupca ca max_gap_distance_bp rsrequireca openr_orientalis_resultscsv r input_csv openfiltered_outputcsv w output_csv analyzeevaluate_rules_and_reserializeinput_csv rs output_csv run code file filtered_outputcsv contain highconfid typei crisprca system reseri csv format pass rule rule set candid visual opfi integr dnafeaturesview packag zulkow creat gene diagram candid system input system visual singl png imag sampl script read output previou exampl gener two gene diagram imag one crisprca system present rippkaea orientali one imag provid refer autoreffigoperon python operon_analyz import load rule visual feature_color ca lightblu ca seagreen ca gold ca springgreen ca darkr ca thistl ca coral ca red ca palegreen ca blue ca tan ca orang ca saddlebrown crispr array purpl fs rulesfiltersetpick_overlapping_features_by_bit_scor openfiltered_outputcsv r operon_data operon operon operon loadload_operonsoperon_data operon operon fsevaluateoperon visualizeplot_operonsoperon output_directori plot_ignoredfals feature_colorsfeature_color filterset class use resolv featur sequenc overlap specif overlap featur highest bitscor valu quantiti describ overal qualiti align render pick_overlapping_features_by_bit_scor appli note requir candid visual improv gene diagram clariti one two typei crisprca system present genom rippkaea orientali pcc note orf begin posit homolog ca ca align ident bitscor ie good align quival use metric annot appear diagram even though pick_overlapping_features_by_bit_scor appliedlabelfigoperonoperon_diagrampng acknowledg author would like thank staff texa advanc comput center provid comput resourc member finkelstein wilk lab help discuss work support nigm grant rgm ijf welch foundat grant f ijf nigm grant r gm cow colleg natur scienc catalyst award seed fund refer contribut thank interest contribut opfi contributut take mani form includ report bug discuss current state code submit fix propos new featur issu issu use report problem bug librari request new featur discuss potenti chang pr creat good bug report summari issu specif step reproduc problem prefer form code exampl descript expect behavior descript actual behavior pull request gener use github flow httpsguidesgithubcomintroductionflowindexhtml_ mean chang happen pull request fork repositori github account clone project machin creat branch local succinct descript name commit chang branch push chang fork open pr repositori includ descript chang refer issu pr address code style contributor attempt adher pep httpswwwpythonorgdevpepspep_ style guid possibl although current strictli enforc minimum new contribut follow style consist preexist code base test use pytest httpsdocspytestorgenx_ framework creat unit test pleas write test new code contribut project licens contribut agre contribut licens mit licens code conduct take open sourc commun serious hold contributor high standard commun particip contribut project agre uphold code conduct httpsgithubcomwilkelabopfiblobcontributingguidecodeofconductmd_ attribut document adapt gener contribut guidelin httpsgithubcomextendrrextendrblobmaincontributingmd_ rextendr project contribut templat httpsgistgithubcombriandkdebecdafaa_ develop briandk httpsgistgithubcombriandk_input output _buildingsequencedatabas build sequenc databas search gene cluster opfi user must compil repres protein nucleic acid sequenc gene expect target cluster nonessenti accessori gene interest may preexist privat collect sequenc perhap previou bioinformat analysi altern user may download sequenc public avail databas uniprot httpswwwuniprotorg_ maintain european bioinformat institut httpswwwebiacuk_ one databas httpswwwncbinlmnihgov_ provid nation center biotechnolog inform target sequenc compil must convert applicationspecif databas format opfi current support programblast programmmseq programdiamond homolog search instruct creat sequenc databas blast use makeblastdb httpswwwncbinlmnihgovbooksnbk_ instruct creat sequenc databas mmseq use mmseq createdb httpsgithubcomsoedinglabmmseqswikisearching_ diamond makedb command option httpsgithubcombbuchfinkdiamondwikicommandlineoptionsmakedboptions_ fasta file format genom input data refer sequenc data fasta httpsblastncbinlmnihgovblastcgicmdwebpage_typeblastdocsdoc_typeblasthelp_ format simpl flat text represent biolog sequenc data individu sequenc delin greater charact exampl codeblock uniref_qml crisprassoci endonucleas ca n repidcas_pseab mddispselktilhskranlyylqhcrvlvnggrveyvtdegrhshywnipianttsll gtgtsitqaamrelaragvlvgfcggggtplfsanevdvevswltpqseyrpteylqrwv gfwfdeekrlvaarhfqrarlerirhswledrvlrdagfavdatalavavedsaraleqa pnhehllteearlskrlfklaaqatrygefvrakrgsggdpanrfldhgnylayglaata twvlgiphglavlhgktrrgglvfdvadlikdslilpqaflsamrgdeeqdfrqacldnl sraqaldfmidtlkdvaqrstvsa uniref_qri crisprassoci endonucleas ca n repidcasa_rhort madpafvplrpiaikdrssivflqrgqldvvdgafvlidqegvrvqipvgglaclmlepg trithaaivlcarvgclviwvgergtrlyaagqpggaradrllfqarnaldetarlnvvr emyrrrfdddpparrsvdqlrgmegvrvreiyrllakkyavdwnarrydhndwdgadipn rclsaataclyglceaailaagyapaigflhrgkpqsfvydvadlykvetvvptafsiaa kiaagkgddspperqvriacrdqfrksgllekiipdieeilraggleppldapeavdpvi ppeepsgddghrg sequenc definit deflin come directli charact separ line sequenc one subsequ line specif deflin format howev opfi requir genom input sequenc data definit line contain uniqu sequenc identif singl wordtoken immedi follow charact ie space charact identifi allow addit text deflin pars singl string appear output csv see refopfioutputformat tip biolog sequenc download public databas access numberidentifi default _labelingsequ annot sequenc databas take full advantag rulebas filter method modoperon_analyzerrul user encourag annot refer sequenc namelabel easili search label broad specif necessari provid meaning annot target gene cluster gene label pars sequenc deflin specif opfi look second wordtoken follow charact exampl follow fasta sequenc annot label ca codeblock uniref_qml ca crisprassoci endonucleas ca n repidcas_pseab mddispselktilhskranlyylqhcrvlvnggrveyvtdegrhshywnipianttsll gtgtsitqaamrelaragvlvgfcggggtplfsanevdvevswltpqseyrpteylqrwv gfwfdeekrlvaarhfqrarlerirhswledrvlrdagfavdatalavavedsaraleqa pnhehllteearlskrlfklaaqatrygefvrakrgsggdpanrfldhgnylayglaata twvlgiphglavlhgktrrgglvfdvadlikdslilpqaflsamrgdeeqdfrqacldnl sraqaldfmidtlkdvaqrstvsa run classgene_finderpipelinepipelin user could select candid hit sequenc use follow rule set codeblock python operon_analyzerrul import ruleset rs rulesetrequireca practic genom search might use refer databas hundr even thousand repres protein sequenc case label sequenc individu would tediou recommend organ sequenc group relat protein given singl label script use python packag programbiopython annot sequenc multisequ fasta file codeblock python bio import seqio import os sy def annotate_referenceprot_ref_fil label record listseqioparseref_fasta fasta record record de recorddescriptionsplit prot_id despop des_with_label formatprot_id label joind recorddescript des_with_label seqiowriterecord ref_fasta fasta __name__ __main__ ref_fasta sysargv label sysargv annotate_referenceref_fasta label possibl use entir sequenc descript ie text follow sequenc identifi gene label particularli use use prebuilt databas like nr httpswwwncbinlmnihgovrefseqaboutnonredundantproteins_ contain repres protein sequenc mani differ protein famili use sequenc databas havent annot user set parse_descriptionsfals classgene_finderpipelinepipelin add_step method call convert sequenc file sequenc databas refer sequenc compil option label must convert sequenc databas format specif homolog search program use current opfi support programblast programmmseq programdiamond softwar packag automat instal companion util program gener sequenc databas follow exampl show typic call programmakeblastdb blast databas util program might look like codeblock bash makeblastdb my_sequencesfasta my_sequencesdb dbtype prot titl my_sequ hash_index command take textfasta file my_sequencesfasta input write result databas file directori my_sequ databas file prefix db dbtype prot specifi input amino acid sequenc use titl name databas requir blast hash_index direct programmakeblastdb gener hash index protein sequenc speed comput time tip programmmseq programdiamond similar databas creation command see refbuildingsequencedatabas blast advanc option blast program number tunabl paramet exampl use adjust sensit search algorithm anticip applic default suffici user nevertheless possibl use nondefault program option pass keyword argument classgene_finderpipelinepipelin add_step method exampl use programblastp command line could adjust number cpu four pass argument num_thread program use opfi would look like num_thread flag boolean argument gener preced addit data also possibl exampl command line flag use_sw_tback tell programblastp comput local optim smithwaterman align correct way specifi behavior via classgene_finderpipelinepipelin api would use argument use_sw_tbacktru list option accept opfi note blast option allow mainli modifi blast output csvtabl header program allow option programblastp programpsiblast dbsize word_siz gapopen gapextend qcov_hsp_perc xdrop_ungap xdrop_gap xdrop_gap_fin searchsp sum_stat seg soft_mask matrix threshold culling_limit window_s num_thread comp_based_stat gilist seqidlist negative_gilistdb_soft_mask db_hard_mask entrez_queri max_hspsbest_hit_overhang best_hit_score_edg max_target_seqsimport_search_strategi export_search_strategi num_align programblastp task programpsiblast gap_trigg num_iter out_pssm out_ascii_pssm pseudocount inclusion_ethresh programblastp flag lcase_mask ungap use_sw_tback remot programpsiblast flag lcase_mask use_sw_tback save_pssm_after_last_round save_each_pssm remot programblastn filtering_algorithm sum_stat window_masker_db window_s template_typ version parse_deflin min_raw_gapped_scor string format max_hsp taxid negative_taxid num_align strand off_diagonal_rang subject_besthit num_sequ no_greedi negative_taxidlist culling_limit xdrop_ungap open_penalti dust_opt sorthit xdrop_gap_fin negative_gilist subject use_index bool_valu filenam seqidlist task_nam sort_hit database_nam lcase_mask query_loc subject_loc sort_hsp line_length boolean db_hard_mask negative_seqidlist template_length filtering_db filtering_databas penalti searchsp ungap type gapextend db_soft_mask dbsize qcov_hsp_perc sorthsp window_masker_taxid index_nam export_search_strategi float_valu soft_mask gilist entrez_queri show_gi best_hit_score_edg gapopen subject_input_fil rang html word_siz best_hit_overhang perc_ident input_fil num_descript xdrop_gap dust taxidlist max_target_seq num_thread task remot int_valu extend_penalti reward import_search_strategi num_lett read blast option blast appendic httpswwwncbinlmnihgovbooksnbk_ note use advanc option programmmseq programdiamond support time _opfioutputformat opfi output format result classgene_finderpipelinepipelin search written singl csv file exampl tutori see refexampleusag csvtabl file csvexample_outputcsv headerrow first two column contain input genomecontig sequenc id sometim call access number coordin candid gene cluster respect sinc input file multipl genom sequenc two field togeth uniqu specifi candid gene cluster row repres singl annot featur candid locu featur candid alway group togeth csv descript output field provid align statist name convent blast document see blast appendic httpswwwncbinlmnihgovbooksnbk_ specif outfmt tabl c glossari httpswwwncbinlmnihgovbooksnbk_ common blast term may also use interpret align statist mean csvtabl file csvfieldnamescsv headerrow _exampleusag exampl usag exampl find crisprca system cyanobacteria genom exampl annot visual crisprca system cyanobacteria speci rippkaea orientali crisprca widespread bacteri defens system found least known prokaryot speci system signific leverag precis gene edit tool advanc award nobel prize chemistri genom r orientali harbor two complet crisprca loci one chromosom one extrachromosomalplasmid download complet assembl genom httpswwwncbinlmnihgovassemblygcf__ also avail httpsgithubcomwilkelabopfi_ tutori along data file necessari run exampl interact jupyt notebook version tutori tutori assum user alreadi instal opfi depend instal conda done automat familiar blast basic homolog search algorithm may also help requir use makeblastdb util convert ca protein databas blast format start convert ca sequenc databas format blast recogn use command line util programmakeblastdb part core ncbi blast distribut set nonredund ca sequenc download uniprot httpswwwuniprotorguniref_ avail tar archiv tutorialscas_databasetargz well make new directori blastdb extract sequenc codeblock bash mkdir blastdb cd blastdb tar xzf cas_databasetargz cd next creat two blast databas sequenc data one contain ca sequenc anoth contain remain ca sequenc codeblock bash cd blastdb cat casfasta makeblastdb dbtype prot titl ca hash_index cas_db cd cd blastdb cat casfasta casfasta casphifasta makeblastdb dbtype prot titl cas_al hash_index cas_all_but__db cd dbtype prot simpli tell programmakeblastdb expect amino acid sequenc use titl name databas requir blast prefix databas file respect hash_index direct programmakeblastdb gener hash index protein sequenc speed comput time use gene finder search crisprca loci crisprca system extrem divers recent classif effort httpswwwnaturecomarticlessx_ identifi major type subtyp composit destinct system although suffic sequenc similar subtyp infer exist common ancestor protein famili present major crisprca subtyp conserv endonucleas ca search defin candid crisprca loci minim ca gene first creat anoth directori output codeblock bash mkdir example__output follow bit code use opfi modgene_finderpipelin modul search crisprca system codeblock python gene_finderpipelin import pipelin import os genomic_data gcf__asmv_genomicfnagz output_directori example__output p pipelin padd_seed_stepdbblastdbcas_db nameca e_val blast_typeprot num_thread padd_filter_stepdbblastdbcas_all_but__db namecas_al e_val blast_typeprot num_thread padd_crispr_step use input filenam job id result written file job id_resultscsv job_id ospathbasenamegenomic_data result prunjob_idjob_id datagenomic_data output_directoryoutput_directori min_prot_len span gziptru first initi classgene_finderpipelinepipelin object keep track search paramet well run list system meet search criteria next add three search step pipelin methgene_finderpipelinepipelineadd_seed_step blast use search input genom databas ca sequenc region around put ca hit becom intial candid rest genom ignor methgene_finderpipelinepipelineadd_filter_step candid region search addit ca gene candid without least one addit put ca gene also discard methgene_finderpipelinepipelineadd_crispr_step remain candid annot crispr repeat sequenc use pilercr final run pipelin execut step order ad min_prot_len set minimum length amino acid residu hit keep realli short hit unlik real protein encod gene span region directli downstream initi hit candid system kbp length result written singl csv file final candid loci contain least one put ca gene one addit ca gene see rel permiss criteria captur noncrisprca loci opfi addit modul reduc unlik system gene find stage visual annot crisprca gene cluster operon analyz sometim use visual candid system especi exploratori phase genom survey opfi provid function visual candid system modoperon_analyzervisu well use visual crisprca gene cluster r orientali codeblock python import csv import sy operon_analyz import load visual feature_color ca lightblu ca seagreen ca gold ca springgreen ca darkr ca thistl ca coral ca red ca palegreen ca yellow ca tan ca orang ca saddlebrown casphi oliv crispr array purpl read output gene finder creat gene diagram cluster operon openexample__outputgcf__asmv_genomicfnagz_resultscsv r operon_data operon loadload_operonsoperon_data visualizeplot_operonsoperonsoperon output_directoryexample__output feature_colorsfeature_color nucl_per_lin run script produc follow three gene diagram one system input csv _fig figur imgoperon_image_png crisprca system chromosom r orientali _fig figur imgoperon_image_png second crisprca system r orientali plasmid _fig figur imgoperon_image_png r orientali locu put crisprca gene see crisprca system identifi numreffig numreffig also see system dont resembl function crisprca operon numreffig use rel permiss evalu threshhold run blast opfi retain region low sequenc similar true crisprca gene fact region like crisprca loci use lower evalu would like elimin fals posit system modoperon_analyzerrul expos function filter unlik candid intial blast search gener found use permiss blast paramet intial filter elimin candid downstream analysi effect way search gene cluster larg amount genomicmetagenom data toy exampl could rerun blast mani time without signific cost realist dataset need redo comput expens homolog search could detrail project sinc optim search paramet may known priori better permiss homolog search initi narrow result later final clean temporari directori desir codeblock bash rm r example__output blastdb exampl filter classifi crisprca system base genom composit discuss previou exampl known crisprca system fall broad categori base presenc particular signatur gene well overal composit genom architectur exampl use opfi search classifi crisprca system strain fusobacteria dataset chosen repres magnitud would encount real genom studi addit fusobacteria phylum contain varieti crisprca subtyp given homolog search portion analysi take sever hour use singl core complet prerun gene finder use setup previou exampl make anoth temporari directori output codeblock bash mkdir example__output filter gene finder output extract highconfid crisprca system follow code read unfilt output classgene_finderpipelinepipelin appli set condit rule accomplish two thing select bin system accord type elimin candid like repres true crisprca system well leverag modoperon_analyzerrul modoperon_analyzeranalyz modul codeblock python operon_analyz import analyz rule fs rulesfiltersetpick_overlapping_features_by_bit_scor cas_typ ii iii v ruleset type rule rulesetsappendrulesrulesetcontains_groupfeature_nam ca ca max_gap_distance_bp require_same_orient true requireca type ii rule rulesetsappendrulesrulesetcontains_at_least_n_featuresfeature_nam ca ca ca feature_count minimum_sizeca type iii rule rulesetsappendrulesrulesetcontains_groupfeature_nam ca ca max_gap_distance_bp require_same_orient true requireca type v rule rulesetsappendrulesrulesetcontains_at_least_n_featuresfeature_nam ca ca ca feature_count rs cas_typ zipruleset cas_typ openrefseq_fusobacteriacsv r input_csv openfexample__outputrefseq_fuso_filtered_typecas_typecsv w output_csv analyzeevaluate_rules_and_reserializeinput_csv rs fs output_csv rule set inform establish crisprca classif system learn paper httpswwwnaturecomarticlessx_ recent system recogn major crisprca type sinc fusobacteria doesnt contain type iv vi system identifi protein dataset didnt defin correspond rule set verifi result addit visual altogth analysi identifi sever hundr system wont look system individu free sake confirm code ran expect well creat gene diagram type v system sinc two codeblock python import csv import sy operon_analyz import load visual feature_color ca lightblu ca seagreen ca gold ca springgreen ca darkr ca thistl ca coral ca red ca palegreen ca yellow ca tan ca orang ca saddlebrown casphi oliv crispr array purpl read output gene finder creat gene diagram cluster operon openexample__outputrefseq_fuso_filtered_typevcsv r operon_data operon loadload_operonsoperon_data visualizeplot_operonsoperonsoperon output_directoryexample__output feature_colorsfeature_color nucl_per_lin plot system look like figur imgoperon_image_png type v crisprca system figur imgoperon_image_png second type v crisprca system final clean temporari output directori desir codeblock bash rm r example__output gene finder gene_finderpipelin automodul gene_finderpipelin member memberord bysourc get start _instal instal recommend way instal opfi bioconda httpsbiocondagithubio_ requir conda httpsdocscondaioenlatest_ packag manag instal opfi depend read see refdepend current bioconda support bit linux mac os window user still instal opfi pip see howev complet instal procedur fulli test window system _installwithconda instal conda linux mac os first set conda bioconda follow quickstart httpsbiocondagithubiouserinstallhtml_ guid done run codeblock bash conda instal c bioconda opfi that note instal opfi conda environ current activ creat fresh environ opfi instal codeblock bash conda creat name opfienv c bioconda opfi conda activ opfienv _installwithpip instal pip method automat instal nonpython depend need instal separ follow individu instal instruct complet list requir softwar provid see refdepend step complet instal opfi pip run codeblock bash pip instal opfi instal sourc final latest develop build may instal directli github first nonpython refdepend need instal work environ easi way first instal opfi conda use refinstallwithconda method well reinstal develop version opfi packag next step altern depend instal individu depend instal work environ run follow code download instal develop build codeblock bash git clone httpsgithubcomwilkelabopfigit cd opfi pip instal pip instal e edit version pip instal r requir conda use skip test build regardless instal method user download run opfi suit unit test confirm build work expect first download test github codeblock bash git clone httpsgithubcomwilkelabopfi cd opfi run test suit use pytest codeblock bash pytest runslow runmmseq rundiamond may take minut complet _depend depend opfi use follow bioinformat softwar packag find annot genom featur csvtabl softwar depend header applic descript ncbi blast httpsblastncbinlmnihgovblastcgipage_typeblastdocs_ protein nucleic acid homolog search tool diamond httpsgithubcombbuchfinkdiamond_ altern blast fast protein homolog search mmseq httpsgithubcomsoedinglabmmseqs_ altern blast fast protein homolog search pilercr httpswwwdrivecompilercr_ crispr repeat detect gener repeat finder httpsgithubcombioinfolabmugenericrepeatfinder_ transposonassoci repeat detect first three blast diamond mmseq popular homolog search applic program look local similar input sequenc either protein nucleic acid target use opfi classgene_finderpipelinepipelin annot gene noncod region interest input genomecontig user specifi homolog search tool use pipelin setup see classgene_finderpipelinepipelin detail note blast distribut contain multipl program homolog search three blastp blastn psiblast current support opfi follow tabl summar main differ homolog search program may help user decid applic best meet need note perform test inher hardwar context depend taken loos guid rather definit comparison csvtabl comparison homolog search program support opfi header applic rel sensit rel speed requir protein nucleic acid sequenc databas diamond protein mmseq protein blastp protein psiblast protein blastn na na nucleic acid last two softwar depend pilercr gener repeat finder grf deal annot repet sequenc dna pilercr identifi crispr array region alternat bp direct repeat variabl sequenc play role prokaryot immun grf identifi repeat associ transpos element termin invert repeat tir long termin repeat ltr operon analyz follow modul compris core operon analyz function operon_analyzergen automodul operon_analyzergen member memberord bysourc operon_analyzerrul automodul operon_analyzerrul member memberord bysourc operon_analyzeranalyz automodul operon_analyzeranalyz member memberord bysourc operon_analyzervisu automodul operon_analyzervisu member memberord bysourc excludememb build_image_filenam calculate_adjusted_operon_bound plot_operon_pair make_operon_pair create_operon_figur save_operon_figur save_pair_figur build_operon_dictionari operon_analyzeroverview automodul operon_analyzeroverview member memberord bysourc operon_analyzerreannot automodul operon_analyzerreannot member memberord bysourc operon_analyzerload automodul operon_analyzerload member memberord bysourc operon_analyzerpars automodul operon_analyzerpars member excludememb parse_coordin read_pipeline_output next set modul expos simpl function deal crispr array sequenc presum would use research interest crisprca genom system operon_analyzerpiler_pars automodul operon_analyzerpiler_pars member memberord bysourc operon_analyzerrepeat_find automodul operon_analyzerrepeat_find member memberord bysourc excludememb bufferedsequ operon_analyzerspac automodul operon_analyzerspac member memberord bysourc api refer toctre maxdepth gene_find operon_analyz opfi document master file creat sphinxquickstart mon aug adapt file complet like least contain root toctre direct opfi welcom opfi document site opfi modular rulebas framework creat gene cluster identif pipelin particularli larg genom metagenom dataset opfi implement entir python download conda python packag index consist two major modul gene finder discoveri novel gene cluster operon analyz rulebas filter dedupl visual reannot system identifi gene finder content toctre maxdepth instal exampl tip modul contribut