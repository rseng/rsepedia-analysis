readmemd gener readmermd pleas edit file rtxshift badg start rcmdcheckhttpsgithubcomnhejazitxshiftworkflowsrcmdcheckbadgesvghttpsgithubcomnhejazitxshiftact coverag statushttpsimgshieldsiocodecovcgithubnhejazitxshiftmastersvghttpscodecoviogithubnhejazitxshiftbranchmast cranhttpswwwrpkgorgbadgesversiontxshifthttpswwwrpkgorgpkgtxshift cran downloadshttpscranlogsrpkgorgbadgestxshifthttpscranrprojectorgpackagetxshift cran total downloadshttpcranlogsrpkgorgbadgesgrandtotaltxshifthttpscranrprojectorgpackagetxshift project statu activ project reach stabl usabl state activ developedhttpswwwrepostatusorgbadgeslatestactivesvghttpswwwrepostatusorgact mit licensehttpsimgshieldsiobadgelicensemitbrightgreensvghttpsopensourceorglicensesmit doihttpszenodoorgbadgedoizenodosvghttpsdoiorgzenodo doihttpsjosstheojorgpapersjossstatussvghttpsdoiorgjoss badg end effici estim causal effect stochast intervent author nima hejazihttpsnimahejaziorg david benkeserhttpswwwsphemoryedufacultyprofiledbenk what txshift txshift r packag design provid facil construct effici estim counterfactu mean outcom stochast intervent depend natur valu treatment dıaz van der laan haneus rotnitzki txshiftimpl build upon simplifi algorithm target maximum likelihood tml estim causal paramet origin propos dıaz van der laan make use analog machineri comput effici onestep estim pfanzagl wefelmey txshift integr sl packagehttpsgithubcomtlversesl coyl hejazi malenica et al allow ensembl machin learn leverag estim procedur mani practic applic eg vaccin efficaci trial observ data often subject twophas sampl mechan ie use twostag design case effici estim varieti must augment construct unbias estim populationlevel causal paramet rose van der laan first introduc augment procedur reli introduc invers probabl censor ipc weight directli appropri loss function effici influenc function estim equat txshift extend approach comput ipcweight onestep tml estim counterfactu mean outcom shift stochast treatment regim packag design implement statist methodolog describ hejazi et al extens thereof instal standard use recommend instal packag cranhttpscranrprojectorgpackagetxshift via r installpackagestxshift note txshift instal cranhttpscranrprojectorgpackagetxshift sl enhanc depend allow ensembl machin learn use nuisanc paramet estim wont includ highli recommend addit instal sl github via remoteshttpscranrprojectorgpackageremot r remotesinstall_githubtlverseslmast latest featur instal recent stabl version txshift github via remoteshttpscranrprojectorgpackageremot r remotesinstall_githubnhejazitxshiftmast contribut instal develop version txshift github via remoteshttpscranrprojectorgpackageremot r remotesinstall_githubnhejazitxshiftdevel exampl illustr txshift may use ascertain effect treatment consid follow exampl r librarytxshift txshift v effici estim causal effect stochast intervent librarysl setse simul simpl data n_ob w replic rbinomn_ob rnormn_ob mean w sd rbinomn_ob plogisa w rnormn_ob mean sd let introduc twostag sampl process c_samp rbinomn_ob plogisw fit fulldata tmle ignor twophas sampl tmle txshift w w delta estim tmle g_exp_fit_arg list fit_typ sl sl_learners_dens lrnr_density_hsenewlrnr_halnew q_fit_arg listfit_typ glm glm_formula tmle counterfactu mean shift treatment intervent treatment txshift estim tmle estim std error ci fit fulldata onestep estim comparison sampl os txshift w w delta estim onestep g_exp_fit_arg list fit_typ sl sl_learners_dens lrnr_density_hsenewlrnr_halnew q_fit_arg listfit_typ glm glm_formula os counterfactu mean shift treatment intervent treatment txshift estim onestep estim std error ci fit ipcwtml account twophas sampl process tmle_ipcw txshift w w delta c_samp c_samp v cw estim tmle max_it eif_reg_typ glm samp_fit_arg listfit_typ glm g_exp_fit_arg list fit_typ sl sl_learners_dens lrnr_density_hsenewlrnr_halnew q_fit_arg listfit_typ glm glm_formula tmle_ipcw counterfactu mean shift treatment intervent treatment txshift estim tmle estim std error ci compar ipcwagu onestep estim twophas sampl os_ipcw txshift w w delta c_samp c_samp v cw estim onestep eif_reg_typ glm samp_fit_arg listfit_typ glm g_exp_fit_arg list fit_typ sl sl_learners_dens lrnr_density_hsenewlrnr_halnew q_fit_arg listfit_typ glm glm_formula os_ipcw counterfactu mean shift treatment intervent treatment txshift estim onestep estim std error ci issu encount bug specif featur request pleas file issuehttpsgithubcomnhejazitxshiftissu detail file issu provid contribut guidelineshttpsgithubcomnhejazitxshiftblobmastercontributingmd contribut contribut welcom interest contributor consult contribut guidelineshttpsgithubcomnhejazitxshiftblobmastercontributingmd prior submit pull request citat use txshift r packag pleas cite follow articlehejazieffici author hejazi nima van der laan mark j jane holli e gilbert peter b benkes david c titl effici nonparametr infer effect stochast intervent twophas sampl applic vaccin efficaci trial year doi biom url httpsdoiorgbiom journal biometr publish wiley onlin librari articlehejazitxshiftjoss author hejazi nima benkes david c titl txshift effici estim causal effect stochast intervent r year doi joss url httpsdoiorgjoss journal journal open sourc softwar publish open journal softwarehejazitxshiftrpkg author hejazi nima benkes david c titl txshift effici estim causal effect stochast intervent year doi zenodo url httpscranrprojectorgpackagetxshift note r packag version relat rtmleshifthttpsgithubcomtlversetmleshift r packag provid independ implement core routin tml estim procedur statist methodolog made avail relianc unifi interfac target learn provid tmlehttpsgithubcomtlversetml engin tlvers ecosystemhttpsgithubcomtlvers rmedshifthttpsgithubcomnhejazimedshift r packag provid facil estim causal effect stochast treatment regim mediat set includ classic ipw augment doubl robust onestep estim implement methodolog explor dıaz hejazi rhaldensifyhttpsgithubcomnhejazihaldensifi minim packag estim condit densiti treatment mechan compon paramet base use highli adapt lassohttpsgithubcomtlverseh coyl hejazi phillip et al hejazi coyl van der laan combin pool hazard regress packag implement variant approach advoc dıaz van der laan fund develop softwar support part grant nation librari medicin award lmhttpsreporternihgovprojectdetail nation institut allergi infecti diseas award r aihttpsreporternihgovprojectdetail nation institut health well nation scienc foundat award dm httpswwwnsfgovawardsearchshowawardawd_id licens nima hejazihttpsnimahejaziorg content repositori distribut mit licens see detail mit licens copyright c nima hejazi permiss herebi grant free charg person obtain copi softwar associ document file softwar deal softwar without restrict includ without limit right use copi modifi merg publish distribut sublicens andor sell copi softwar permit person softwar furnish subject follow condit copyright notic permiss notic shall includ copi substanti portion softwar softwar provid without warranti kind express impli includ limit warranti merchant fit particular purpos noninfring event shall author copyright holder liabl claim damag liabil whether action contract tort otherwis aris connect softwar use deal softwar refer div idref classrefer div idrefcoyleslrpkg coyl jeremi r nima hejazi ivana malenica rachael v phillip oleg sofrygin sl modern machin learn pipelin super learn httpsdoiorgzenodo div div idrefcoylehalrpkg coyl jeremi r nima hejazi rachael v phillip lar w van der laan mark j van der laan hal scalabl highli adapt lasso httpsdoiorgzenodo div div idrefdiazcaus dıaz iván nima hejazi causal mediat analysi stochast intervent journal royal statist societi seri b statist methodolog httpsdoiorgrssb div div idrefdiazsup dıaz iván mark j van der laan super learner base condit densiti estim applic margin structur model intern journal biostatist div div idrefdiazpopul popul intervent causal effect base stochast intervent biometr div div idrefdiazstochast stochast treatment regim target learn data scienc causal infer complex longitudin studi springer scienc busi media div div idrefhaneuseestim haneus sebastian andrea rotnitzki estim effect intervent modifi receiv treatment statist medicin div div idrefhejazihaljoss hejazi nima jeremi r coyl mark j van der laan hal scalabl highli adapt lasso regress r journal open sourc softwar httpsdoiorgjoss div div idrefhejazieffici hejazi nima mark j van der laan holli e jane peter b gilbert david c benkes effici nonparametr infer effect stochast intervent twophas sampl applic vaccin efficaci trial biometr httpsdoiorgbiom div div idrefpfanzaglcontribut pfanzagl j w wefelmey contribut gener asymptot statist theori statist risk model div div idrefrosetargetedsd rose sherri mark j van der laan target maximum likelihood estim twostag design intern journal biostatist div div txshift octob minor updat ensur compat v hal v haldensifi recent updat cran remov lazydata field descript sinc data directori includ packag minor tweak exist unit test remov rlang suggest field descript vignett standard ipcwaug estim procedur combin reduc redund reduc build time per cran request may use halfit_h intern evalu condit mean fulldata eif revis compat v hal packag default pass argument g_exp_fit_arg function est_g_exp updat compat v haldensifi packag april print method updat remov use cli functionshttpsgithubcomrlibcli simplic replac use messag addit hidden slot eif_mat txshift_msm class support export matrix eif estim shift delta_grid txshift februari remov crosslink sl function per request cran revers sl avail cran januari simul experi test perform procedur presenc loss followup censor indic tml estim outperform onestep eifbas twophas sampl correct gener recommend use tml estim default across set though perform onestep estim much wors decemb delta slot ad txshift class record shift hidden slot similarli ad txshift_msm class summari method remov function support print method txshift txshift_msm class plot method amend support simultan confid band octob chang refer argument c c_samp indic inclus secondstag sampl add new argument c_cen denot censor due loss followup ie prior occurr outcom add nuisanc regress censor c_cen adjust estim procedur use invers censor weight fulldata eif procedur note updat twophas sampl correct renam argument intern function function est_g est_g_exp exposur mechan densiti estim est_ipcw est_samp twophas sampl mechan add est_g_cen loss followup censor mechan txshift septemb move sl depend enhanc design cran submiss remov sl remot ad instal safeti check june add singleknot spline msm summar msm_vimshift add class plot method msm summar msm_vimshift fix bug msm_vimshift comput ci binari outcom switch manual comput ci intern use custom confint method fix bug msm_vimshift build lm model object weight regress move model plot method msm_vimshift finish draft brief paper _journal open sourc software_ txshift april chang export statu intern function eg longer export onestep_txshift tmle_txshift finish ad roxygen detail return slot throughout function add exampl main estim function txshift vimshift_msm updat argument name add sever assert_that check chang fit_spec terminolog fit_ext extern fit add unit test msm function nuisanc paramet estim march extens document includ fix estim terminolog eg onestep instead aipw ad roxygen detail return slot begin ad exampl export function txshift march correct depend prepar eventu cran releas chang sever previous export function intern includ eif est_hn est_q est_g est_ipcw fit_fluctu ipcw_eif_upd removereduc githubonli depend sl chang titl partial target learn effici estim lock depend version eg sl v extens document updat txshift decemb chang argument halfit_h pseudooutcom regress effici estim explicitli includ max_degre null chang tmle converg criterion use less strict criterion pn leq sigma sqrtn cdot max logn instead leq n empir studi suggest curb issu address overagress updat target step remov pin sl depend specif tag formerli v lock depend version sl v hal v txshift octob chang use asdatat datat intern function catch chang depend txshift septemb remov errant intercept term lower iter fluctuat model chang weight scheme margin structur model summar weight estim ident rather invers varianc default updat document txshift septemb add safeti check converg fluctuat regress base appear drtmle andor survtml chang default confid interv type use margin ci across multipl paramet instead simultan confid band switch intern parametr regress use sllrnr_glm instead sllrnr_glm_fast txshift juli improv argument name clariti updat document addit tighter unit test onestep tml estim june pin sl depend version packag stabil txshift june chang argument halfit_h pseudooutcom eif regress addit clarifi note core intern function remov outdat comment code core intern function clarifi alter intern function argument name renam intern function tx_shift shift_addit txshift june remov invers weight estim effici influenc function necessari pseudooutcom regress effici ipcwaug estim reduc use redund variabl across core function reorgan function across file clarifi document tweak argument fit pseudooutcom regress hal order diagnos perform issu reveal simul fix invers weight pass fulldata estim pare argument onestep estim routin txshift june introduc bound_propens function bound propens score away zero factor n rather numer precis april minor improv document vignett fix bug output ipcw onestep estim pare packag list import move sever suggest introduc option comput simultan confid band work msm fix bug introduc newli ad imput function sl txshift march introduc function comput onestep estim complement avail tmle add initi function summar estim effect across grid shift via work margin structur model msm txshift februari ad helper function caught edg case auxiliari covari tmle fluctuat model fix bug auxiliari covari tmle comput keep track extra shift gadeltaw revis infer machineri creat confid interv logit scale case binari outcom txshift may initi public releas packag version version includ complet function standard tml ipcwtml estim contribut txshift develop author txshift r packag use guid use contribut develop popular tidyvers ecosystem r packag document simpli formal restat fact goal guid help get contribut txshift quickli possibl guid divid two main piec file bug report featur request issu suggest chang via pull request issu file issu import thing includ minim reproduc exampl quickli verifi problem figur fix three thing need includ make exampl reproduc requir packag data code packag load top script easi see one exampl need easiest way includ data use dput gener r code recreat spend littl bit time ensur code easi other read make sure youv use space variabl name concis inform use comment indic problem lie best remov everyth relat problem shorter code easier understand check actual made reproduc exampl start fresh r session past script unless youv specif ask pleas dont includ output sessioninfo pull request contribut chang txshift follow step creat branch git make chang push branch github issu pull request pr discuss pull request iter either accept pr decid good fit txshift step describ detail might feel overwhelm first time get set get easier practic your familiar git github pleas start read httprpkgshadconzgithtml pull request evalu checklist __motivation__ pull request clearli concis motiv need chang pleas describ problem pr address show pull request solv concis possibl also includ motiv news new releas txshift come easi user see what chang add item top file use markdown format news item end yourgithubusernam the_issue_numb __onli relat changes__ submit pull request pleas check make sure havent accident includ unrel chang make harder see exactli what chang evalu unexpect side effect pr correspond git branch expect submit multipl chang make sure creat multipl branch multipl chang depend start first one dont submit other first one process __use txshift code style__ pleas follow offici tidyvers style guidehttpstyletidyverseorg maintain consist style across whole code base make much easier jump code your modifi exist txshift code doesnt follow style guid separ pull request fix style would greatli appreci your ad new paramet new function youll also need document roxygenhttpsgithubcomklutometisroxygen make sure rerun devtoolsdocu code submit seem like lot work dont worri pull request isnt perfect learn process pull request process unless youv submit past unlik pull request accept pleas dont submit pull request chang exist behaviour instead think add new featur minim invas way test environ ubuntu local github action r maco local github action r window github action r r cmd check result error warn note downstream depend downstream depend addit note resubmiss packag remov cran due solari build failur longer part cran buildcheck suit affect one upstream depend hal upstream depend hal haldensifi recent reupload cran titl txshift effici estim causal effect stochast intervent r tag causal infer machin learn twophas sampl effici estim target learn stochast intervent modifi treatment polici r author name nima hejazi orcid affili name david benkes orcid affili affili name graduat group biostatist univers california berkeley index name center comput biolog univers california berkeley index name depart biostatist bioinformat rollin school public health emori univers index date octob bibliographi refsbib summari statist causal infer tradit focus effect defin inflex static intervent applic binari categor exposur evalu intervent often plagu mani problem theoret eg nonidentif practic eg posit violat howev stochast intervent provid promis solut fundament issu diazstochast txshift r packag provid research biostatist epidemiolog health polici econom relat disciplin access stateoftheart statist methodolog evalu causal effect stochast shift intervent _continuousvalued_ exposur txshift estim causal effect modifi treatment polici feasibl intervent take account natur valu exposur assign intervent level accommod use studi design incorpor outcomedepend twophas sampl eg casecontrol packag provid two type modern correct root semiparametr theori construct unbias effici estim despit signific limit induc design thu txshift make possibl estim causal effect stochast intervent experiment observ studi set subject realworld design limit commonli aris modern scientif practic statement need research seek build upon appli cuttingedg statist approach causal infer often face signific obstacl method usual accompani robust welltest welldocu softwar packag yet code method scratch often impract appli research understand theoret underpin method requir advanc train sever complic assess test bespok causal infer softwar what even softwar tool exist usual minim implement provid support deploy statist method problem set untouch complex realworld data txshift r packag solv problem provid open sourc tool evalu causal effect flexibl stochast intervent applic categor continuousvalu exposur provid correct appropri handl data gener commonli use complex twophas sampl design background causal infer tradit focus effect static intervent magnitud exposur set fix prespecifi valu unit evalu intervent face host issu among nonidentif violat assumpt posit ineffici stochast intervent provid promis solut fundament issu allow target paramet defin mean counterfactu outcom hypothet shift version observ exposur distribut diazpopul modifi treatment polici particular class intervent may interpret shift natur exposur level level given observ unit haneuseestim diazstochast despit promis advanc causal infer real data analys often complic econom constraint primari variabl interest far expens collect auxiliari covari twophas sampl often use bypass limit unfortun sampl scheme produc side effect requir adjust formal statist infer princip goal studi among rich literatur twophas design rosetargetedsd stand provid studi nonparametr effici theori broad class twophas design work provid guidanc construct effici estim causal effect gener twophas sampl design txshift scope build prior work hejazieffici outlin novel approach use set augment target minimum loss tml onestep estim causal effect stochast intervent guarante consist effici multipl robust despit presenc twophas sampl author outlin techniqu summar effect shift exposur variabl outcom interest via nonparametr work margin structur model analog doserespons analysi txshift softwar packag r languag environ statist comput r implement methodolog txshift design facilit construct tml onestep estim causal effect modifi treatment polici shift observ exposur valu arbitrari scalar delta may possibl take account natur valu exposur futur version covari r packag includ tool deploy effici estim outcomedepend twophas sampl design two type correct reweight procedur introduc invers probabl censor weight directli relev loss function discuss rosetargetedsd well augment effici influenc function estim equat studi thoroughli hejazieffici txshift integr sl packagehttpsgithubcomtlversesl coylesl allow ensembl machin learn leverag estim nuisanc paramet what txshift packag draw hal coyleh hejazih haldensifi hejazihaldensifi r packag allow effici estim construct manner consist methodolog theoret advanc hejazieffici requir fast converg rate nuisanc paramet true counterpart effici result estim avail txshift packag made publicli avail via githubhttpsgithubcomnhejazitxshift comprehens r archiv networkhttpscranrprojectorgpackagetxshift use txshift packag extens document packag readm two vignett pkgdown document websitehttpscodenimahejaziorgtxshift acknowledg nima hejazi contribut work support part grant nation institut health lmhttpsprojectreporternihgovproject_info_descriptioncfmaidicdeddparamddvalueddsubcrcsbdefaultcsascpbal refer output rmarkdowngithub_docu bibliographi instreferencesbib readmemd gener readmermd pleas edit file r echo fals knitropts_chunkset collaps true comment figpath readm rtxshift badg start rcmdcheckhttpsgithubcomnhejazitxshiftworkflowsrcmdcheckbadgesvghttpsgithubcomnhejazitxshiftact coverag statushttpsimgshieldsiocodecovcgithubnhejazitxshiftmastersvghttpscodecoviogithubnhejazitxshiftbranchmast cranhttpswwwrpkgorgbadgesversiontxshifthttpswwwrpkgorgpkgtxshift cran downloadshttpscranlogsrpkgorgbadgestxshifthttpscranrprojectorgpackagetxshift cran total downloadshttpcranlogsrpkgorgbadgesgrandtotaltxshifthttpscranrprojectorgpackagetxshift project statu activ project reach stabl usabl state activ developedhttpswwwrepostatusorgbadgeslatestactivesvghttpswwwrepostatusorgact mit licensehttpsimgshieldsiobadgelicensemitbrightgreensvghttpsopensourceorglicensesmit doihttpszenodoorgbadgedoizenodosvghttpsdoiorgzenodo doihttpsjosstheojorgpapersjossstatussvghttpsdoiorgjoss badg end effici estim causal effect stochast intervent __authors__ nima hejazihttpsnimahejaziorg david benkeserhttpswwwsphemoryedufacultyprofiledbenk what txshift txshift r packag design provid facil construct effici estim counterfactu mean outcom stochast intervent depend natur valu treatment diazpopul haneuseestim txshift implement build upon simplifi algorithm target maximum likelihood tml estim causal paramet origin propos diazstochast make use analog machineri comput effici onestep estim pfanzaglcontribut txshift integr sl packagehttpsgithubcomtlversesl coyleslrpkg allow ensembl machin learn leverag estim procedur mani practic applic eg vaccin efficaci trial observ data often subject twophas sampl mechan ie use twostag design case effici estim varieti must augment construct unbias estim populationlevel causal paramet rosetargetedsd first introduc augment procedur reli introduc invers probabl censor ipc weight directli appropri loss function effici influenc function estim equat txshift extend approach comput ipcweight onestep tml estim counterfactu mean outcom shift stochast treatment regim packag design implement statist methodolog describ hejazieffici extens thereof instal standard use recommend instal packag cranhttpscranrprojectorgpackagetxshift via r craninstal eval fals installpackagestxshift _note_ txshift instal cranhttpscranrprojectorgpackagetxshift sl enhanc depend allow ensembl machin learn use nuisanc paramet estim wont includ highli recommend addit instal sl github via remoteshttpscranrprojectorgpackageremot r slghmasterinstal eval fals remotesinstall_githubtlverseslmast latest featur instal recent _stabl version_ txshift github via remoteshttpscranrprojectorgpackageremot r ghmasterinstal eval fals remotesinstall_githubnhejazitxshiftmast contribut instal _develop version_ txshift github via remoteshttpscranrprojectorgpackageremot r ghdevelinstal eval fals remotesinstall_githubnhejazitxshiftdevel exampl illustr txshift may use ascertain effect treatment consid follow exampl r exampl warningfals librarytxshift librarysl setse simul simpl data n_ob w replic rbinomn_ob rnormn_ob mean w sd rbinomn_ob plogisa w rnormn_ob mean sd let introduc twostag sampl process c_samp rbinomn_ob plogisw fit fulldata tmle ignor twophas sampl tmle txshift w w delta estim tmle g_exp_fit_arg list fit_typ sl sl_learners_dens lrnr_density_hsenewlrnr_halnew q_fit_arg listfit_typ glm glm_formula tmle fit fulldata onestep estim comparison sampl os txshift w w delta estim onestep g_exp_fit_arg list fit_typ sl sl_learners_dens lrnr_density_hsenewlrnr_halnew q_fit_arg listfit_typ glm glm_formula os fit ipcwtml account twophas sampl process tmle_ipcw txshift w w delta c_samp c_samp v cw estim tmle max_it eif_reg_typ glm samp_fit_arg listfit_typ glm g_exp_fit_arg list fit_typ sl sl_learners_dens lrnr_density_hsenewlrnr_halnew q_fit_arg listfit_typ glm glm_formula tmle_ipcw compar ipcwagu onestep estim twophas sampl os_ipcw txshift w w delta c_samp c_samp v cw estim onestep eif_reg_typ glm samp_fit_arg listfit_typ glm g_exp_fit_arg list fit_typ sl sl_learners_dens lrnr_density_hsenewlrnr_halnew q_fit_arg listfit_typ glm glm_formula os_ipcw issu encount bug specif featur request pleas file issuehttpsgithubcomnhejazitxshiftissu detail file issu provid contribut guidelineshttpsgithubcomnhejazitxshiftblobmastercontributingmd contribut contribut welcom interest contributor consult contribut guidelineshttpsgithubcomnhejazitxshiftblobmastercontributingmd prior submit pull request citat use txshift r packag pleas cite follow articlehejazieffici author hejazi nima van der laan mark j jane holli e gilbert peter b benkes david c titl effici nonparametr infer effect stochast intervent twophas sampl applic vaccin efficaci trial year doi biom url httpsdoiorgbiom journal biometr publish wiley onlin librari articlehejazitxshiftjoss author hejazi nima benkes david c titl txshift effici estim causal effect stochast intervent r year doi joss url httpsdoiorgjoss journal journal open sourc softwar publish open journal softwarehejazitxshiftrpkg author hejazi nima benkes david c titl txshift effici estim causal effect stochast intervent year doi zenodo url httpscranrprojectorgpackagetxshift note r packag version relat rtmleshifthttpsgithubcomtlversetmleshift r packag provid independ implement core routin tml estim procedur statist methodolog made avail relianc unifi interfac target learn provid tmlehttpsgithubcomtlversetml engin tlvers ecosystemhttpsgithubcomtlvers rmedshifthttpsgithubcomnhejazimedshift r packag provid facil estim causal effect stochast treatment regim mediat set includ classic ipw augment doubl robust onestep estim implement methodolog explor diazcaus rhaldensifyhttpsgithubcomnhejazihaldensifi minim packag estim condit densiti treatment mechan compon paramet base use highli adapt lassohttpsgithubcomtlverseh coylehalrpkg hejazihaljoss combin pool hazard regress packag implement variant approach advoc diazsup fund develop softwar support part grant nation librari medicin award lmhttpsreporternihgovprojectdetail nation institut allergi infecti diseas award r aihttpsreporternihgovprojectdetail nation institut health well nation scienc foundat award dm httpswwwnsfgovawardsearchshowawardawd_id licens copi nima hejazihttpsnimahejaziorg content repositori distribut mit licens see detail mit licens copyright c nima hejazi permiss herebi grant free charg person obtain copi softwar associ document file softwar deal softwar without restrict includ without limit right use copi modifi merg publish distribut sublicens andor sell copi softwar permit person softwar furnish subject follow condit copyright notic permiss notic shall includ copi substanti portion softwar softwar provid without warranti kind express impli includ limit warranti merchant fit particular purpos noninfring event shall author copyright holder liabl claim damag liabil whether action contract tort otherwis aris connect softwar use deal softwar refer titl evalu causal effect modifi treatment polici author nima hejazihttpsnimahejaziorg david benkeserhttpswwwsphemoryedufacultyprofiledbenk date r sysdat output rmarkdownhtml_vignett bibliographi instreferencesbib vignett vignetteindexentryevalu causal effect modifi treatment polici vignetteengineknitrrmarkdown vignetteencodingutf introduct stochast treatment regim constitut flexibl framework evalu effect continuousvalu exposurestreat _modifi treatment policies_ one techniqu within framework examin effect attribut shift observ natur valu treatment usual scalar delta txshift packag implement algorithm comput onestep target minimum lossbas tml estim counterfactu mean induc addit modifi treatment polici mtp defin shift function deltaaw technic present interest reader invit consult diazstochast earlier work diazpopul haneuseestim background target learn consid consult vdltarget vdltarget vdltarget start let load packag well need set seed simul r setup librarydatat libraryhaldensifi librarytxshift setse data notat well consid n observ unit o_ ldot o_n random variabl w correspond data avail singl unit within w denot baselin covari eg age biolog sex bmi mathbbr continuousvalu exposur eg dosag nutrit supplement taken outcom interest eg diseas statu minim unjustifi assumpt let sim mathcalp mathcalm mathcalp simpli distribut within nonparametr statist model mathcalm formal definit stochast intervent correspond causal effect consid nonparametr structur equat model npsem introduc pearlcaus defin system chang intervent interest beginalignlabeleqnnpsem w f_wu_w f_aw u_a f_ya w u_i endalign denot observ data structur w assum distribut condit w w support interv lw uw conveni assum minimum natur valu treatment individu covari w w lw similarli maximum uw simpl mtp base shift delta beginequationlabeleqnshift deltaa w begincas delta textif lw delta textif leq lw delta endcas endequ leq delta arbitrari prespecifi valu defin degre observ valu shift possibl casecohort studi common practic make use outcomedepend twophas sampl design allow expens measur made exposur eg genom sequenc immun marker avoid complic sampl scheme alter observ data structur simpler w w delta delta sampl indic delta may function variabl w revis data structur valu observ unit twophas sampl delta hejazieffici provid detail investig methodolog detail effici estim design context vaccin efficaci trial work use analysi immun correl protect hiv hejazieffici covid gilbertcovpn cours one may also account loss followup ie censor txshift packag support c_cen argument eponym txshift function though avoid complic subsequ exampl interest clariti exposit correct censor twophas sampl make use invers probabl censor weight ipcw lead ipcwaug onestep tml estim simul data r make_data paramet simul exampl n_ob number observ baselin covari simpl binari w rbinomn_ob creat treatment base baselin w rnormn_ob mean w sd creat outcom linear function w white nois w rnormn_ob mean sd twophas sampl base covari delta_samp rbinomn_ob plogisw treatment shift paramet delta estim effect addit mtp simplest way comput effici estim addit mtp fit nuisanc paramet intern procedur sped use gener linear model glm fit outcom regress q_n txshift function provid simpl interfac r est_simpl est_shift txshift w w delta delta g_exp_fit_arg list fit_typ hal n_bin grid_typ equal_mass lambda_seq expseq length q_fit_arg list fit_typ glm glm_formula est_shift interlud ensembl machin learn sl easili incorpor ensembl machin learn estim procedur txshift integr sl r packagehttpstlverseorgsl coyleslrpkg complet guid use sl r packag consid consult chapter super learninghttpstlverseorgtlversehandbookslhtml vdltarget r setup_sl eval fals librarysl sl learner use fit eg ipcw outcom regress mean_learn lrnr_meannew glm_learner lrnr_glmnew rf_learner lrnr_rangernew q_lib stacknewmean_learn glm_learner rf_learner sl_learner lrnr_slnewlearn q_lib metalearn lrnr_nnlsnew sl learner fit gener propens score fit hose_learn make_learnerlrnr_density_semiparametr mean_learn glm_learner hese_learn make_learnerlrnr_density_semiparametr mean_learn rf_learner var_learn glm_learner g_lib stacknewhose_learn hese_learn sl_learner_dens lrnr_slnew learner g_lib metalearn lrnr_solnp_densitynew effici effect estim machin learn use framework provid sl packagehttpsgithubcomtlversesl nuisanc function requir effici estim may fit ensembl machin learn super learner algorithm vdlsuper implement sl use asymptot optim vfold crossvalid dudoitasymptot vdlasymptot vdvoracl select optim predict function librari construct optim combin predict function r est_with_sl eval fals est_shift_sl txshift w w delta delta g_exp_fit_arg list fit_typ sl sl_learners_dens sl_learner_dens q_fit_arg list fit_typ sl sl_learner sl_learner est_shift_sl estim effect addit mtp twophas sampl casecohort studi twophas sampl use data structur take w delta delta previous discuss sampl txshift function may still use estim causal effect addit mtp addit argument need specifi r ipcw_est_shift est_shift_ipcw txshift w w delta delta c_samp delta_samp v cw samp_fit_arg listfit_typ glm g_exp_fit_arg list fit_typ hal n_bin grid_typ equal_mass lambda_seq expseq length q_fit_arg list fit_typ glm glm_formula eif_reg_typ glm est_shift_ipcw note specifi addit argument call txshift includ c_samp indic inclus twophas sampl v set variabl may affect sampl decis case baselin covari outcom samp_fit_arg indic sampl mechan ought estim eif_reg_typ indic particular reduceddimens nuisanc regress ought estim see rosetargetedsd hejazieffici detail last argument option use glm highli adapt lasso hal nonparametr regress estim use hal packagehttpsgithubcomtlverseh coylehalrpkg hejazihaljoss practic recommend leav argument default fit nuisanc function hal howev significantli costli comput statist infer onestep tml estim effici estim implement txshift asymptot linear thu estim psi_n converg true paramet valu psi_ psi_n psi_ p_n p_ cdot dbarq_nstar g_n rhatpstar p_ yield psi_n psi_ p_n p_ cdot dp_ o_p left fracsqrtn right provid follow condit dbarq_nstar g_n converg dp_ l_p_ norm size class function consid estim barq_nstar g_n bound technic exist mathcalf dbarq_nstar g_n mathcalf high probabl mathcalf donsker class remaind term rhatpstar p_ decay o_p left fracsqrtn right central limit theorem estim gaussian limit distribut sqrtnpsi_n psi n vdp_ vdp_ varianc effici influenc function canon gradient impli psi_n sqrtnconsist estim psi asymptot normal given local effici allow us build waldtyp confid interv straightforward manner psi_n pm z_alpha cdot fracsigma_nsqrtn sigma_n estim vdp_ estim sigma_n may obtain use bootstrap comput directli via follow sigma_n fracn sum_i n dbarq_nstar g_no_i confid interv may easili creat confint method r confint ci_est_shift confintest_shift _advanc usage_ userspecifi nuisanc regress special case may use experienc user comput treatment mechan censor mechan outcom regress sampl mechan fit separ ie outsid txshift wrapper function instead appli wrapper construct effici onestep tml estim case option argument end _ext r fit_extern evalfals comput censor mechan produc ipc weight extern pi_mech plogisw ipcw_out pi_mech comput treatment mechan propens score extern first produc downshift treatment data gn_downshift dnorma delta mean tx_mult w sd next initi produc upshift treatment data gn_upshift dnorma delta mean tx_mult w sd initi produc upupshift delta treatment data gn_upupshift dnorma delta mean tx_mult w sd initi produc unshift treatment data gn_noshift dnorma mean tx_mult w sd final put togeth object like what produc intern gn_out asdatatablecbindgn_downshift gn_noshift gn_upshift gn_upupshiftc setnamesgn_out cdownshift noshift upshift upupshift comput outcom regress extern note transform lie unit interv bound predict valu fall near bound interv qn_noshift w mini diffrangey qn_upshift w delta mini diffrangey qn_noshiftqn_noshift qn_noshiftqn_noshift qn_upshiftqn_upshift qn_upshiftqn_upshift qn_out asdatatablecbindqn_noshift qn_upshiftc setnamesqn_out cnoshift upshift construct effici estim appli wrapper function est_shift_spec txshift w w delta delta samp_fit_arg null samp_fit_ext ipcw_out g_exp_fit_arg listfit_typ extern q_fit_arg listfit_typ extern gn_exp_fit_ext gn_out qn_fit_ext qn_out refer gener roxygen edit hand pleas edit document rfit_mechanismsr nameest_q aliasest_q titleestim outcom mechan usag est_q c_cen rep lengthi w delta samp_weight rep lengthi fit_typ csl glm glm_formula sl_learner null argument itemya codenumer vector observ outcom itemc_censa codenumer vector loss followup indic itemaa codenumer vector observ exposur valu itemwa codenumer matrix observ baselin covari valu itemdeltaa codenumer indic magnitud shift comput exposur codea pass intern codelinkshift_addit current limit addit shift itemsamp_weightsa codenumer vector observationlevel sampl weight produc intern procedur estim twophas sampl mechan codelinkest_samp itemfit_typea codecharact indic whether use glm super learner fit outcom regress option glm select argument codeglm_formula must codenul instead contain model formula per codelinkstatsglm codecharact option sl select argument codesl_learn must codenul instead instanti pkgsl codelrnr_sl object specifi learner metalearn super learner fit must provid consult document pkgsl detail itemglm_formulaa codecharact give codelinkstatsformula fit gener linear model via codelinkstatsglm itemsl_learnersobject contain set instanti learner pkgsl use fit ensembl model valu codedatat two column contain estim outcom mechan natur valu exposur qa w upshift exposur qa delta w descript estim outcom mechan detail comput outcom regress observ data includ shift impos intervent return outcom regress observ data counterfactu shift shift delta gener roxygen edit hand pleas edit document rboundr namescale_to_unit aliasscale_to_unit titletransform valu scale unit interv usag scale_to_unitv argument itemvalsa codenumer vector correspond observ valu variabl interest rescal unit interv valu codenumer vector length codev valu rescal lie unit interv descript transform valu scale unit interv detail transform scale arbitrari set input valu unit interv see codelinkscale_to_origin correspond backtransform gener roxygen edit hand pleas edit document rutilsr nameprinttxshift_msm aliasprinttxshift_msm titleprint method margin structur model usag methodprinttxshift_msmx argument itemxan object class codetxshift_msm itemoth option current use valu none call side effect print inform summari slot object class codetxshift_msm descript print method margin structur model detail codeprint method object class codetxshift_msm exampl requiresl setse n_ob w asnumericrepl rbinomn_ob asnumericrnormn_ob mean w sd rbinomn_ob plogi w msm msm_vimshift w w estim tmle g_exp_fit_arg list fit_typ sl sl_learners_dens lrnr_density_hsenewlrnr_glmnew q_fit_arg list fit_typ glm glm_formula delta_grid seq printmsm gener roxygen edit hand pleas edit document rboundr namebound_precis aliasbound_precis titlebound precis usag bound_precisionv argument itemvalscodenumer vector valu interv bound within arbitrari machin precis common use function avoid indetermin nonfinit valu applic codestatsqlog valu codenumer vector length codev return valu bound machin precis intend avoid numer instabl issu descript bound precis detail bound valu unit interv machin precis order avoid numer instabl issu downstream comput gener roxygen edit hand pleas edit document rplotsr nameplottxshift_msm aliasplottxshift_msm titleplot work msm causal effect intervent grid usag methodplottxshift_msmx argument itemxobject class codetxshift_msm produc call codelinkmsm_vimshift itemaddit argument pass codeplot necessari descript plot work msm causal effect intervent grid detail creat visual interventionspecif counterfactu mean well work margin structur model summar trend across posit valu intervent exampl requiresl setse n_ob w asnumericrepl rbinomn_ob asnumericrnormn_ob mean w sd rbinomn_ob plogi w msm msm_vimshift w w estim tmle g_exp_fit_arg list fit_typ sl sl_learners_dens lrnr_density_hsenewlrnr_glmnew q_fit_arg list fit_typ glm glm_formula delta_grid seq plotmsm fit linear spline knot setse n_ob w asnumericrepl rbinomn_ob asnumericrnormn_ob mean w sd rbinomn_ob plogi w msm msm_vimshift w w estim tmle g_exp_fit_arg list fit_typ sl sl_learners_dens lrnr_density_hsenewlrnr_glmnew q_fit_arg list fit_typ glm glm_formula delta_grid seq msm_form listtyp piecewis knot plotmsm gener roxygen edit hand pleas edit document rmsmr namemsm_vimshift aliasmsm_vimshift titlework margin structur model causal effect intervent grid usag msm_vimshift w c_cen rep lengthi c_samp rep lengthi v null delta_grid seq msm_form listtyp linear knot na estim ctmle onestep weight cident varianc ci_level ci_typ cmargin simultan argument itemwa codematrix codedatafram similar contain set baselin covari itemaa codenumer vector correspond treatment variabl paramet interest defin locat shift quantiti itemc_censa codenumer indic whether given observ subject censor way loss followup default assum censor due loss followup itemya codenumer vector observ outcom itemc_sampa codenumer indic whether given observ subject censor omit secondstag sampl use comput invers probabl censor weight estim case default assum censor due twophas sampl itemvth covari use determin sampl procedur give rise censor default codenul correspond scenario censor case valu preced argument codec must uniqu specifi pass name codelist identifi variabl amongst w thought play role defin samplingcensor mechan c itemdelta_grida codenumer vector give individu valu shift paramet use comput estim itemmsm_forma codelist specifi type work msm fit summar counterfactu mean codelist two compon codetyp may either linear piecewis codeknot specifi must valu codedelta_grid see exampl use itemestimatorth type estim fit either codetml target maximum likelihood estim codeonestep onestep augment invers probabl weight aipw estim itemweightingwheth weight paramet estim invers varianc order improv stabil result msm fit simpli weight paramet estim equal default option codeident weight estim ident itemci_levela codenumer indic desir coverag level confid interv comput itemci_typewheth construct simultan confid band cover paramet estim margin confid interv cover paramet estim separ default construct margin confid interv paramet estim rather simultan confid band itemaddit argument pass codelinktxshift valu codelist contain estim individu counterfactu mean grid shift paramet codedelta_grid alongsid estim margin structur model summar trend counterfactu mean descript work margin structur model causal effect intervent grid detail comput estim counterfactu mean grid shift stochast intervent fit work margin structur model summar trend counterfactu mean function specifi shift intervent work margin structur model may linear shift paramet piecewis linear singl knot point provid support two weight scheme may use either onestep tml estim also allow construct margin simultan confid interv exampl requiresl n_ob w asnumericrepl rbinomn_ob asnumericrnormn_ob mean w sd rbinomn_ob plogi w msm msm_vimshift w w estim tmle g_exp_fit_arg list fit_typ sl sl_learners_dens lrnr_density_hsenewlrnr_glmnew q_fit_arg list fit_typ glm glm_formula delta_grid seq fit linear spline knot n_ob w asnumericrepl rbinomn_ob asnumericrnormn_ob mean w sd rbinomn_ob plogi w msm msm_vimshift w w estim tmle g_exp_fit_arg list fit_typ sl sl_learners_dens lrnr_density_hsenewlrnr_glmnew q_fit_arg list fit_typ glm glm_formula delta_grid seq msm_form listtyp piecewis knot gener roxygen edit hand pleas edit document rutilsr nameprinttxshift aliasprinttxshift titleprint method counterfactu mean stochast shift intervent usag methodprinttxshiftx ci_level argument itemxan object class codetxshift itemoth option current use itemci_levela codenumer indic level confid interv comput valu none call side effect print inform summari slot object class codetxshift descript print method counterfactu mean stochast shift intervent detail codeprint method object class codetxshift exampl requiresl setse n_ob w replic rbinomn_ob rnormn_ob mean w sd rbinomn_ob plogisa w rnormn_ob mean sd txout txshift w w delta estim tmle g_exp_fit_arg list fit_typ sl sl_learners_dens lrnr_density_hsenewlrnr_glmnew q_fit_arg list fit_typ glm glm_formula printtxout gener roxygen edit hand pleas edit document rfit_mechanismsr nameest_g_exp aliasest_g_exp titleestim exposur mechan via gener propens score usag est_g_exp w delta samp_weight rep lengtha fit_typ chal sl sl_learners_dens null haldensify_arg listgrid_typ equal_rang lambda_seq expseq length argument itemaa codenumer vector observ exposur valu itemwa codenumer matrix observ baselin covari valu itemdeltaa codenumer valu identifi shift observ valu exposur observ evalu itemsamp_weightsa codenumer vector observationlevel sampl weight produc intern procedur estim twophas sampl mechan codelinkest_samp itemfit_typea codecharact specifi whether use super learner pkgsl highli adapt lasso pkghal estim condit exposur densiti itemsl_learners_densityobject contain set instanti learner pkgsl use fit ensembl model itemhaldensify_argsa codelist argument directli pass codelinkhaldensifyhaldensifi codefit_typ set codeh note invok highli adapt lasso instead super learner thu feasibl rel small data set valu codedatat four column contain estim gener propens score downshift ga delta w shift ga w upshift ga delta w upshift magnitud two ga delta w descript estim exposur mechan via gener propens score detail comput propens score exposur mechan observ data includ shift give propens score observ data observ counterfactu shift exposur level delta delta delta gener roxygen edit hand pleas edit document reifsr nameeif aliaseif titlecomput shift paramet estim effici influenc function usag eif qn hn estim ctmle onestep fluc_mod_out null c_samp rep lengthi ipc_weight rep lengthi argument itemya codenumer vector observ outcom itemqnan object provid valu outcom evalu impos shift treatment object pass construct call intern function codeest_q itemhnan object provid valu auxiliari clever covari construct treatment mechan requir target minimum lossbas estim object object pass construct call intern function codeest_hn itemestimatorth type estim fit either codetml target maximum likelihood estim codeonestep onestep estim itemfluc_mod_outan object give valu logist tilt model target minimum loss estim type object output intern routin perform step tml estim procedur given codelinkfit_fluctu itemc_sampind missing due exclus secondphas sampl use compat ipcwtml estim routin itemipc_weightsa codenumer vector give invers probabl censor weight observ gener invok routin estim censor mechan valu codelist contain paramet estim estim varianc base effici influenc function eif estim eif incorpor invers probabl censor weight estim eif without applic weight descript comput shift paramet estim effici influenc function detail estim valu causal paramet alongsid statist infer paramet estim base effici influenc function target paramet take follow form dpo hawi barqaw barqdaw psip gener roxygen edit hand pleas edit document rfit_mechanismsr nameest_hn aliasest_hn titleestim auxiliari covari full data effici influenc function usag est_hngn_exp argument itemgn_expan estim exposur densiti gener propens score use output provid codelinkest_g_exp valu codedatat two column contain estim auxiliari covari natur valu exposur ha w shift valu exposur ha delta w descript estim auxiliari covari full data effici influenc function detail comput estim auxiliari covari effici influenc function requir updat initi estim logist tilt model target minimum loss estim gener roxygen edit hand pleas edit document rtmle_txshiftr namefit_fluctu aliasfit_fluctu titlefit onedimension fluctuat model updat initi estim usag fit_fluctu qn_scale hn ipc_weight rep lengthi method cstandard weight flucmod_tol argument itemya codenumer vector correspond outcom variabl itemqn_scaledan object provid valu outcom evalu induc shift exposur object pass construct call codelinkest_q itemhnan object provid valu auxiliari clever covari construct treatment mechan requir target minimum loss estim object object pass construct call codelinkest_hn itemipc_weightsa codenumer vector give invers probabl censor weight observ gener invok routin estim censor mechan itemmethoda codecharact give type regress use travers fluctuat submodel avail choic weight standard consult literatur detail differ itemflucmod_tola codenumer indic largest valu toler fluctuat model target minimum loss estim valu codelist contain fluctuat model codeglm object produc logist regress codecharact vector indic type fluctuat whether auxiliari covari use weight includ directli model formula updat estim outcom regress shift valu exposur updat estim outcom regress natur valu exposur descript fit onedimension fluctuat model updat initi estim detail procedur fit onedimension fluctuat model updat initi estim outcom regress base auxiliari covari updat estim subsequ use construct tml estim counterfactu mean modifi treatment polici gener roxygen edit hand pleas edit document reifsr nameipcw_eif_upd aliasipcw_eif_upd titleit ipcw updat procedur augment effici influenc function usag ipcw_eif_upd data_intern c_samp v ipc_mech ipc_weight qn_estim hn_estim estim ctmle onestep fluctuat null flucmod_tol eif_reg_typ chal glm argument itemdata_internala codedatat contain observ select secondphas sampl itemc_sampa codenumer indic missing due exclus secondstag sampl itemva codedatat give valu across observ variabl play role censor mechan itemipc_mecha codenumer vector censor mechan estim observ twophas sampl mechan note well valu account censor loss followup itemipc_weightsa codenumer vector invers probabl censor weight includ weight censor due loss followup without loss followup equival codec_samp ipc_mech initi run procedur itemqn_estima codedatat correspond outcom regress produc invok intern function codeest_q itemhn_estima codedatat correspond valu produc comput auxiliari clever covari produc easili invok intern function codeest_hn itemestimatorth type estim fit either codetml target maximum likelihood estim codeonestep onestep estim itemfluctuationa codecharact give type regress use travers fluctuat submodel choic weight standard itemflucmod_tola codenumer indic largest valu toler fluctuat model target minimum loss estim itemeif_reg_typewheth flexibl nonparametr function ought use dimensionreduc nuisanc regress target step censor data case default method use nonparametr regress base highli adapt lasso pkghal set codeglm instead use simpl linear regress model step effici influenc function eif regress covari contribut censor mechan ie eif v c valu codelist contain estim outcom mechan fit fluctuat model tml updat updat invers probabl censor weight ipcw updat estim effici influenc function estim ipcw compon eif descript iter ipcw updat procedur augment effici influenc function detail adapt ipcwtml iter construct effici invers probabl censor weight tml onestep estim effici influenc function paramet updat ipc weight iter process converg criteria satisfi gener roxygen edit hand pleas edit document rboundr namescale_to_origin aliasscale_to_origin titletransform valu unit interv back origin scale usag scale_to_originalscaled_v max_orig min_orig argument itemscaled_valsa codenumer vector correspond rescal valu unit interv rescal origin interv itemmax_origa codenumer scalar valu give maximum valu origin scale itemmin_origa codenumer scalar valu give minimum valu origin scale valu codenumer vector length codescaled_v valu rescal lie originalnatur interv descript transform valu unit interv back origin scale detail backtransform return valu comput unit interv origin scale use rescal updat tml estim back natur scale undo codelinkscale_to_unit gener roxygen edit hand pleas edit document ronestep_txshiftr nameonestep_txshift aliasonestep_txshift titleonestep estim counterfactu mean stochast shift intervent usag onestep_txshift data_intern c_samp rep nrowdata_intern v null delta samp_estim gn_cens_weight qn_estim hn_estim eif_reg_typ chal glm samp_fit_arg ipcw_effici true argument itemdata_internala codedatat construct intern call codelinktxshift contain data element need comput onestep estim itemc_sampa codenumer indic whether given observ includ secondstag sampl use comput ipcweight onestep estim case twostag sampl perform default assum censor due sampl itemvth covari use determin sampl procedur give rise censor default codenul correspond scenario censor case valu preced argument codec must uniqu specifi pass name codelist identifi variabl amongst w thought play role defin samplingcensor mechan c itemdeltaa codenumer valu indic shift treatment use defin target paramet defin respect scale treatment itemsamp_estiman object provid valu censor mechan evalu across full data object pass construct call intern function codelinkest_samp itemgn_cens_weightstodo document itemqn_estiman object provid valu outcom evalu impos shift treatment object pass construct call intern function codeest_q itemhn_estiman object provid valu auxiliari clever covari construct treatment mechan requir target minimum loss estim object object pass construct call intern function codeest_hn itemeif_reg_typewheth flexibl nonparametr function ought use dimensionreduc nuisanc regress target step censor data case default method use nonparametr regress base highli adapt lasso pkghal set codeglm instead use simpl linear regress model step effici influenc function eif regress covari contribut censor mechan ie eif v c itemsamp_fit_argsa codelist argument one pass codelinkest_samp detail consult document codelinkest_samp first element ie codefit_typ use determin regress fit glm gener linear model sl super learner extern userspecifi input form produc codelinkest_samp itemipcw_efficiencywheth invok augment ipcwtml procedur perform iter process ensur effici result estim default codetru set codefals use ipcweight loss rather ipcaug influenc function valu object class codetxshift contain result procedur comput onestep estim treatment shift paramet descript onestep estim counterfactu mean stochast shift intervent detail invok procedur construct onestep estim counterfactu mean modifi treatment polici gener roxygen edit hand pleas edit document rboundr namebound_propens aliasbound_propens titlebound gener propens score usag bound_propensityv argument itemvalscodenumer vector propens score estim valu note paramet propens score condit densiti ought bound valu codenumer vector length codev return valu bound minimum lower n sampl size n descript bound gener propens score detail bound estim valu gener propens score condit densiti avoid numer instabl issu aris practic violat assumpt posit gener roxygen edit hand pleas edit document rfit_mechanismsr nameest_samp aliasest_samp titleestim probabl censor twophas sampl usag est_sampv c_samp fit_typ csl glm sl_learner null argument itemva codenumer vector codematrix codedatafram similar object give observ valu covari known potenti inform sampl mechan itemc_sampa codenumer vector observ valu indic inclus secondphas sampl itemfit_typea codecharact indic whether perform fit use glm super learner ensembl model use super learner desir argument codesl_learn must provid itemsl_learnersan pkgsl codelrnr_sl object super learner ensembl learner instanti extern use pkgsl valu codenumer vector estim sampl mechan descript estim probabl censor twophas sampl detail comput estim sampl probabl inclus secondphas via twophas sampl mechan estim use creation invers probabl weight gener roxygen edit hand pleas edit document rshift_funsr nameshift_addit aliasshift_addit titlesimpl addit modifi treatment polici usag shift_additivea w null delta argument itemaa codenumer vector observ treatment valu itemwa codenumer matrix observ baselin covari valu itemdeltaa codenumer indic magnitud shift comput treatment codea valu codenumer vector contain shift exposur valu descript simpl addit modifi treatment polici detail simpl modifi treatment polici modif observ valu exposur shift valu codedelta note shift function assum support aw across strata w gener roxygen edit hand pleas edit document rtmle_txshiftr nametmle_txshift aliastmle_txshift titletarget minimum loss estim counterfactu mean stochast shift intervent usag tmle_txshift data_intern c_samp rep nrowdata_intern v null delta samp_estim gn_cens_weight qn_estim hn_estim fluctuat cstandard weight max_it eif_reg_typ chal glm samp_fit_arg ipcw_effici true argument itemdata_internala codedatat construct intern call codelinktxshift contain data comput target minimum loss tml estim itemc_sampa codenumer indic whether given observ includ secondstag sampl use comput ipcweight onestep estim case twostag sampl perform default assum censor due sampl itemvth covari use determin sampl procedur give rise censor default codenul correspond scenario censor case valu preced argument codec_samp must specifi pass name codelist identifi variabl amongst w thought play role defin sampl mechan itemdeltaa codenumer valu indic shift treatment use defin target paramet defin respect scale treatment itemsamp_estiman object provid valu sampl mechan evalu across full data object pass construct call intern function codelinkest_samp itemgn_cens_weightstodo document itemqn_estiman object provid valu outcom evalu impos shift treatment object pass construct call intern function codelinkest_q itemhn_estiman object provid valu auxiliari clever covari construct treatment mechan requir target minimum lossbas estim object object pass construct call codelinkest_hn itemfluctuationth method use submodel fluctuat step target step comput tml estim choic standard weight place auxiliari covari logist tilt regress itemmax_itera codenumer integ give maximum number step taken iter solut effici influenc function itemeif_reg_typewheth flexibl nonparametr function ought use dimensionreduc nuisanc regress target step censor data case default method use nonparametr regress base highli adapt lasso pkghal set codeglm instead use simpl linear regress model step effici influenc function eif regress covari contribut censor mechan ie eif v c itemsamp_fit_argsa codelist argument one pass codelinkest_samp detail consult document codelinkest_samp first element ie codefit_typ use determin regress fit glm gener linear model sl super learner extern userspecifi input form produc codelinkest_samp itemipcw_efficiencywheth invok augment ipcwtml procedur perform iter process ensur effici result estim default codetru set codefals use ipcweight loss rather ipcaug influenc function valu object class codetxshift contain result procedur comput tml estim treatment shift paramet descript target minimum loss estim counterfactu mean stochast shift intervent detail invok procedur construct target minimum loss estim tmle counterfactu mean modifi treatment polici gener roxygen edit hand pleas edit document rfit_mechanismsr nameest_g_cen aliasest_g_cen titleestim censor mechan usag est_g_cen c_cen w samp_weight rep lengthc_cen fit_typ csl glm glm_formula c_cen sl_learner null argument itemc_censa codenumer vector loss followup indic itemaa codenumer vector observ exposur valu itemwa codenumer matrix observ baselin covari valu itemsamp_weightsa codenumer vector observationlevel sampl weight produc intern procedur estim twophas sampl mechan codelinkest_samp itemfit_typea codecharact indic whether use glm super learner fit censor mechan option glm select argument codeglm_formula must codenul instead contain model formula per codelinkstatsglm codecharact option sl select argument codesl_learn must codenul instead instanti pkgsl codelrnr_sl object specifi learner metalearn super learner fit must provid consult document pkgsl detail itemglm_formulaa codecharact give codelinkstatsformula fit gener linear model via codelinkstatsglm itemsl_learnersobject contain set instanti learner pkgsl use fit ensembl model valu codenumer vector propens score censor descript estim censor mechan detail comput censor mechan observ data order appli joint intervent remov censor reweight gener roxygen edit hand pleas edit document rconfintr nameconfinttxshift aliasconfinttxshift titleconfid interv counterfactu mean stochast intervent usag methodconfinttxshiftobject parm seq_lenobjectpsi level ci_mult null argument itemobjectan object class codetxshift produc invok function codelinktxshift confid interv comput itemparma codenumer vector indic indic codeobjectest return confid interv itemlevela codenumer indic level confid interv comput itemoth argument current use itemci_multprecomput multipli gener confid interv default codenul gener chang use intern machineri creat simultan confid band valu name codenumer vector contain paramet estim codetxshift object alongsid lower upper waldstyl confid interv specifi coverag level descript confid interv counterfactu mean stochast intervent detail comput confid interv estim produc codelinktxshift exampl setse n_ob w replic rbinomn_ob rnormn_ob mean w sd rbinomn_ob plogisa w rnormn_ob mean sd txout txshift w w delta estim tmle g_exp_fit_arg list fit_typ hal n_bin grid_typ equal_mass lambda_seq exp q_fit_arg list fit_typ glm glm_formula confinttxout gener roxygen edit hand pleas edit document rtxshiftr nametxshift aliastxshift titleeffici estim counterfactu mean stochast shift intervent usag txshift w c_cen rep lengtha c_samp rep lengthi v null delta estim ctmle onestep fluctuat cstandard weight max_it samp_fit_arg listfit_typ cglm sl extern sl_learner null g_exp_fit_arg listfit_typ chal sl extern lambda_seq expseq length sl_learners_dens null g_cens_fit_arg listfit_typ cglm sl extern glm_formula c_cen sl_learner null q_fit_arg listfit_typ cglm sl extern glm_formula sl_learner null eif_reg_typ chal glm ipcw_effici true samp_fit_ext null gn_exp_fit_ext null gn_cens_fit_ext null qn_fit_ext null argument itemwa codematrix codedatafram similar contain set baselin covari itemaa codenumer vector correspond treatment variabl paramet interest defin locat shift quantiti itemc_censa codenumer indic whether given observ subject censor way loss followup default assum censor due loss followup itemya codenumer vector observ outcom itemc_sampa codenumer indic whether given observ subject censor omit secondstag sampl use comput invers probabl censor weight estim case default assum censor due twophas sampl itemvth covari use determin sampl procedur give rise censor default codenul correspond scenario censor case valu preced argument codec_samp must uniqu specifi pass codecharact vector identifi variabl amongst w thought impact definit sampl mechan c_samp argument also accept codedatat similar object compos combin variabl w use option recommend itemdeltaa codenumer valu indic shift treatment use defin target paramet defin respect scale treatment itemestimatorth type estim fit either codetml target maximum likelihood codeonestep onestep estim itemfluctuationth method use submodel fluctuat step target step comput tml estim choic standard weight place auxiliari covari logist tilt regress itemmax_itera codenumer integ give maximum number step taken iter solut effici influenc function itemsamp_fit_argsa codelist argument one pass codelinkest_samp detail consult document codelinkest_samp first element ie codefit_typ use determin regress fit gener linear model glm super learner sl extern userspecifi input form produc codelinkest_samp itemg_exp_fit_argsa codelist argument one pass codelinkest_g_exp detail see document codelinkest_g_exp st element ie codefit_typ specifi regress fit codeh estim condit densiti via highli adapt lasso via pkghaldensifi codesl pkgsl learner use fit super learner ensembl densiti via pkgsl codelrnr_haldensifi similar codeextern userspecifi input form produc codelinkest_g_exp itemg_cens_fit_argsa codelist argument one pass codelinkest_g_cen detail see document codelinkest_g_cen st element ie codefit_typ specifi regress fit codeglm gener linear model codesl pkgsl learner use fit super learner ensembl censor mechan codeextern userspecifi input form produc codelinkest_g_cen itemq_fit_argsa codelist argument one pass codelinkest_q detail consult document codelinkest_q first element ie codefit_typ use determin regress fit codeglm gener linear model outcom mechan codesl pkgsl learner use fit super learner outcom mechan codeextern userspecifi input form produc codelinkest_q itemeif_reg_typewheth flexibl nonparametr function ought use dimensionreduc nuisanc regress target step censor data case default method use nonparametr regress base highli adapt lasso pkghal set codeglm instead use simpl linear regress model step effici influenc function eif regress covari contribut censor mechan ie eif v c itemipcw_efficiencywheth use augment invers probabl censor weight eif estim equat ensur effici result estim default codetru ineffici estim procedur specifi codefals support complet itemsamp_fit_extth result extern fit procedur use estim twophas sampl mechan use construct invers probabl censor weight tml onestep estim input provid must match output codelinkest_samp exactli itemgn_exp_fit_extth result extern fit procedur use estim exposur mechan gener propens score use construct tml onestep estim input provid must match output codelinkest_g_exp exactli itemgn_cens_fit_extth result extern fit procedur use estim censor mechan propens score missing use construct tml onestep estim input provid must match output codelinkest_g_cen exactli itemqn_fit_extth result extern fit procedur use estim outcom mechan use construct tml onestep estim input provid must match output codelinkest_q exactli use argument recommend power user valu object class codetxshift contain result procedur comput tml onestep estim counterfactu mean modifi treatment polici shift continuousvalu exposur scalar amount codedelta estim augment consist effici twophas sampl perform descript effici estim counterfactu mean stochast shift intervent detail construct onestep estim target minimum loss estim counterfactu mean modifi treatment polici automat make adjust twophas sampl censor indic includ ensembl machin learn may use construct initi estim nuisanc function use pkgsl exampl setse n_ob w replic rbinomn_ob rnormn_ob mean w sd rbinomn_ob plogisa w rnormn_ob mean sd c_samp rbinomn_ob plogisw twophas sampl c_cen rbinomn_ob plogisrowsumsw construct tml estim ignor censor tmle txshift w w delta estim onestep g_exp_fit_arg list fit_typ hal n_bin lambda_seq expseq length q_fit_arg list fit_typ glm glm_formula dontrun construct tml estim account censor tmle txshift w w c_cen c_cen delta estim onestep g_exp_fit_arg list fit_typ hal n_bin lambda_seq expseq length g_cens_fit_arg list fit_typ glm glm_formula c_cen q_fit_arg list fit_typ glm glm_formula construct tml estim twophas sampl ignor censor ipcwtml txshift w w delta c_samp c_samp v cw estim onestep max_it samp_fit_arg listfit_typ glm g_exp_fit_arg list fit_typ hal n_bin lambda_seq expseq length q_fit_arg list fit_typ glm glm_formula eif_reg_typ glm construct tml estim accont twophas sampl censor ipcwtml txshift w w c_cen c_cen delta c_samp c_samp v cw estim onestep max_it samp_fit_arg listfit_typ glm g_exp_fit_arg list fit_typ hal n_bin lambda_seq expseq length g_cens_fit_arg list fit_typ glm glm_formula c_cen q_fit_arg list fit_typ glm glm_formula eif_reg_typ glm