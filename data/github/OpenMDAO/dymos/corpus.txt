dymo open sourc optim dynam multidisciplinari system dymo testshttpsgithubcomopenmdaodymosactionsworkflowsdymos_tests_workflowymlbadgesvghttpsgithubcomopenmdaodymosactionsworkflowsdymos_tests_workflowyml coverag statushttpscoverallsioreposgithubopenmdaodymosbadgesvgbranchmastertdjxuqhttpscoverallsiogithubopenmdaodymosbranchmast doihttpsjosstheojorgpapersjossstatussvghttpsdoiorgjoss dymo framework simul optim dynam system within openmdao multidisciplinari analysi optim environ dymo leverag implicit explicit simul techniqu simul gener dynam system arbitari complex softwar two primari object provid gener ode integr interfac allow analysi dynam system allow user solv optim control problem involv dynam multidisciplinari system instal default instal development version dymo instal minimum number prerequisit python pip instal dymo advanc instal instruct avail herehttpsopenmdaogithubiodymosinstallationhtml citat see overview paperhttpsjosstheojorgpapersjoss journal open sourc softwar use dymo work pleas cite articlefalck doi joss url httpsdoiorgjoss year publish open journal volum number page author robert falck justin gray kaushik ponnap ted wright titl dymo python packag optim control multidisciplinari system journal journal open sourc softwar document onlin document avail httpsopenmdaogithubiodymoshttpsopenmdaogithubiodymo defin ordinari differenti equat first step simul optim dynam system defin ordinari differenti equat integr user first build openmdao model output provid rate state variabl model openmdao model arbitrari complex includ nest group compon layer nonlinear solver etc dymo solut construct one _phases_ set phase add state variabl dynam control paramet tell dymo valu connect ode system tell dymo variabl path system contain rate state variabl integr integr ordinari differenti equat dymoss solverbas pseudspectr transcript provid abil numer integr ode system given use optim control context provid shoot method iter provid physic viabl trajectori pseudospectr method dymo current support radau pseudospectr method highord gausslobatto transcript implicit techniqu reli optim impos defect constraint enforc physic accuraci result trajectori verifi physic accuraci solut dymo explicitli integr use variablestep method solv optim control problem dymo use concept _phases_ support optim control dynam system user connect one phase construct trajectori phase optim control transcript gausslobatto radau pseudospectr equat motion boundari path constraint dymo phase trajectori ultim openmdao group exist problem along numer model allow simultan optim system dynam python import numpi np import openmdaoapi om import dymo dm import matplotlibpyplot plt class brachistochroneeomomexplicitcompon def initializeself selfoptionsdeclarenum_nod typesint def setupself nn selfoptionsnum_nod input selfadd_inputv shapenn descveloc unitsm selfadd_inputtheta shapenn descangl wire unitsrad selfadd_outputxdot shapenn descveloc compon x unitsm selfadd_outputydot shapenn descveloc compon unitsm selfadd_outputvdot valnpzerosnn descacceler magnitud unitsm selfadd_outputcheck valnpzerosnn desca check solut vsintheta constant unitsm use openmdao abil automat determin spars color jacobian ode compon selfdeclare_coloringwrt methodc def computeself input output theta inputstheta cos_theta npcostheta sin_theta npsintheta v inputsv outputsvdot cos_theta outputsxdot v sin_theta outputsydot v cos_theta outputscheck v sin_theta defin openmdao problem p omproblemmodelomgroup defin trajectori object traj dmtrajectori pmodeladd_subsystemtraj subsystraj defin dymo phase object gausslobatto transcript phase dmphaseode_classbrachistochroneeom transcriptiondmradaunum_seg order trajadd_phasenamephas phasephas set time option phaseset_time_optionsfix_initialtru duration_bound set state option phaseadd_statex rate_sourcexdot fix_initialtru fix_finaltru phaseadd_statey rate_sourceydot fix_initialtru fix_finaltru phaseadd_statev rate_sourcevdot fix_initialtru fix_finalfals defin theta control phaseadd_controlnametheta unitsrad lower uppernppi minim final time phaseadd_objectivetim locfin set driver pdriver omscipyoptimizedriv allow openmdao automat determin sparsiti pattern total deriv significantli speed execut dymo pdriverdeclare_color setup problem psetup openmdao problem setup guess valu time state control pset_valtrajphaset_dur state control use linearli interpol initi guess along trajectori pset_valtrajphasestatesx phaseinterpolatey nodesstate_input unitsm pset_valtrajphasestatesi phaseinterpolatey nodesstate_input unitsm pset_valtrajphasestatesv phaseinterpolatey nodesstate_input unitsm pset_valtrajphasecontrolstheta phaseinterpolatey nodescontrol_input unitsdeg use dymo run_problem method run driver simul result record result dymos_solutiondb dymos_simulationdb dmrun_problemp simulatetru load solut simul file sol_cas omcasereaderdymos_solutiondbget_casefin sim_cas omcasereaderdymos_simulationdbget_casefin plot result fig axe pltsubplotsnrow ncol figsiz axesplotsol_caseget_valtrajphasetimeseriesstatesx sol_caseget_valtrajphasetimeseriesstatesi ro labelsolut axesplotsim_caseget_valtrajphasetimeseriesstatesx sim_caseget_valtrajphasetimeseriesstatesi b labelsimul axesset_xlabelx axesset_ylab ms axeslegend axesgrid axesplotsol_caseget_valtrajphasetimeseriestim sol_caseget_valtrajphasetimeseriescontrolstheta unitsdeg ro labelsolut axesplotsim_caseget_valtrajphasetimeseriestim sim_caseget_valtrajphasetimeseriescontrolstheta unitsdeg b labelsimul axesset_xlabeltim axesset_ylabelrtheta deg axeslegend axesgrid pltshow brachistochron solutionbrachistochronesolutionpng brachistochron solut releas note dymo januari version dymo includ fix grid refin simul paramet minor perform improv variou document updat enhanc disabl check_parti dymo core compon default httpsgithubcomopenmdaodymospul ad perform improv pseudospectraltimeseriesoutputcomp httpsgithubcomopenmdaodymospul ad warn bound appli state solve_seg httpsgithubcomopenmdaodymospul expand includ standard atmospher model cover ft ft doc cleanup httpsgithubcomopenmdaodymospul ad brysondenham exampl problem variou document improv httpsgithubcomopenmdaodymospul httpsgithubcomopenmdaodymospul httpsgithubcomopenmdaodymospul chang deprec valu metadata usag val httpsgithubcomopenmdaodymospul bug fix fix bug could result incorrect paramet valu simul httpsgithubcomopenmdaodymospul fix exampl doesnt work googl collab httpsgithubcomopenmdaodymospul fix bug grid refin error estim state rate ode httpsgithubcomopenmdaodymospul miscellan ad notebook spec instal pip httpsgithubcomopenmdaodymospul ad ci matrix entri test without pyoptspars httpsgithubcomopenmdaodymospul releas note dymo novemb version dymo releas dymo introduc explicitshoot transcript provid explicit rungekutta integr ode across phase transcript current limit fixedstep rk method rk default timeseri output provid startend segment phase similar solveseg capabl colloc transcript fixedstep provid _an_ answer albeit inaccur across integr rather fail converg dynam becom highli nonlinear enhanc ad path constraint explicit shoot transcript httpsgithubcomopenmdaodymospul ad control continu enforc explicitshoot transcript refactor continu compon gener httpsgithubcomopenmdaodymospul ad indic fix variabl linkag report httpsgithubcomopenmdaodymospul replac tensordot comput method timeseries_output_comp regular dot product remov perform bottleneck httpsgithubcomopenmdaodymospul ad constraint report summar boundari path constraint phase trajectori httpsgithubcomopenmdaodymospul ad explicitshoot transcript httpsgithubcomopenmdaodymospul significantli improv speed explicitshoot httpsgithubcomopenmdaodymospul ad radau bdf lsoda option scipi integr method use simul httpsgithubcomopenmdaodymospul bug fix remov solver connect linkag need solve_seg httpsgithubcomopenmdaodymospul chang default valu unit trajectoryadd_paramet _unspecifi httpsgithubcomopenmdaodymospul ad fix allow paramet static_targetstru work explicitshoot httpsgithubcomopenmdaodymospul fix format constraint report httpsgithubcomopenmdaodymospul miscellan none releas note dymo octob version dymo releas provid compat openmdao add perform improv begin bring true explicit shoot capabl dymo capabl fulli fill releas backward incompat api chang deprec dymo requir openmdao due chang way indic specifi openmdao enhanc updat run_problempi return success state httpsgithubcomopenmdaodymospul ad experiment explicit shoot transcript dymo httpsgithubcomopenmdaodymospul ad control rate deriv use explicitshoot httpsgithubcomopenmdaodymospul rewrit usatmcomp use precomput akima coeffici interpol complexsaf consider faster httpsgithubcomopenmdaodymospul allow addit ode output explicitshoot timeseri httpsgithubcomopenmdaodymospul bug fix fix issu simul work run mpi run_problem httpsgithubcomopenmdaodymospul ad better error messag simul fail due inabl find good step size httpsgithubcomopenmdaodymospul fix bug t_initial_target t_duration_target would work input_initi input_dur true respect httpsgithubcomopenmdaodymospul fix elimin warn messag relat recent index updat openmdao requir openmdao httpsgithubcomopenmdaodymospul remov except introduc openmdao pr httpsgithubcomopenmdaoopenmdaopul httpsgithubcomopenmdaodymospul miscellan fix issu execut notebook httpsgithubcomopenmdaodymospul updat ci matrix test latest releas develop version openmdao httpsgithubcomopenmdaodymospul releas note dymo juli version dymo releas provid compat openmdao updat document jupyterbook add new featur backward incompat api chang deprec remov vectorize_deriv option phase object due openmdao updat httpsgithubcomopenmdaodymospul dynam argument add_paramet remov new argument static_target ad opposit mean dynam httpsgithubcomopenmdaodymospul updat phaseinterpol automat detect variabl type renam phaseinterp old version deprec httpsgithubcomopenmdaodymospul enhanc document updat jupyterbook httpsgithubcomopenmdaodymospul httpsgithubcomopenmdaodymospul httpsgithubcomopenmdaodymospul httpsgithubcomopenmdaodymospul httpsgithubcomopenmdaodymospul httpsgithubcomopenmdaodymospul simulate_opt store within phase httpsgithubcomopenmdaodymospul remov vectorize_deriv option phase object due openmdao updat httpsgithubcomopenmdaodymospul updat dymo handl new openmdao distribut io approach httpsgithubcomopenmdaodymospul dynam argument add_paramet remov new argument static_target ad opposit mean dynam httpsgithubcomopenmdaodymospul updat phaseinterpol automat detect variabl type renam phaseinterp old version deprec httpsgithubcomopenmdaodymospul bug fix fix issu unit linkag constraint httpsgithubcomopenmdaodymospul fix key error perform order reduct hp adapt refin httpsgithubcomopenmdaodymospul paramet ode system respect dynamictru fals httpsgithubcomopenmdaodymospul miscellan ad miss exampl brachistochron upstream initi durat state httpsgithubcomopenmdaodymospul ad require_pyoptspars test use pyoptsparsedriv httpsgithubcomopenmdaodymospul ad coupl fix exampl doc httpsgithubcomopenmdaodymospul fix typo get start section doc httpsgithubcomopenmdaodymospul instal coveral pypi github workflow httpsgithubcomopenmdaodymospul chang base_dir arg coveral httpsgithubcomopenmdaodymospul fix minor typo doc httpsgithubcomopenmdaodymospul remov require_pyoptspars move openmdao httpsgithubcomopenmdaodymospul ad publish mkdoc ghpage httpsgithubcomopenmdaodymospul ad github action workflow ci httpsgithubcomopenmdaodymospul readm updat point joss paper httpsgithubcomopenmdaodymospul updat joss bibliographi httpsgithubcomopenmdaodymospul httpsgithubcomopenmdaodymospul httpsgithubcomopenmdaodymospul httpsgithubcomopenmdaodymospul fix refer joss paper httpsgithubcomopenmdaodymospul minor grammar consist edit joss paper httpsgithubcomopenmdaodymospul releas note dymo march version dymo releas primarili remov deprec experiment featur along implement bug fix backward incompat api chang deprec rungekutta transcript remov httpsgithubcomopenmdaodymospul twocharact locat specifi remov favor initi final httpsgithubcomopenmdaodymospul user must specifi solve_segmentsforward solve_segmentsbackward use solve_seg capabl true longer valid httpsgithubcomopenmdaodymospul add_input_paramet add_design_paramet drop favor add_paramet httpsgithubcomopenmdaodymospul httpsgithubcomopenmdaodymospul remov deprec command line interfac due somewhat hackish abus openmdao hook httpsgithubcomopenmdaodymospul remov deprec disc node subset favor correct state_disc httpsgithubcomopenmdaodymospul remov deprec custom_target option paramet httpsgithubcomopenmdaodymospul enhanc user warn multipl timeseri output attempt name httpsgithubcomopenmdaodymospul bug fix ode_class option phase mark nonrecord httpsgithubcomopenmdaodymospul fix doc build due chang openmdao httpsgithubcomopenmdaodymospul miscellan modifi exampl use prefer fix_initialtru time state instead pinch bound eg initial_bound httpsgithubcomopenmdaodymospul releas note dymo februari releas dymo add sever exampl demonstr variou capabl code per user request ode system provid via callabl function take num_nod potenti initi keywod argument allow openmdao execcomp use ode wrap lambda instanc bug fix part introduc exampl instanc default valu state time ignor fix addit trajectori paramet save simul databas file expect final releas dymo v sever exist deprec featur remov code backward incompat api chang deprec none enhanc ad racecar exampl pwmdebuck demonstr cycl constraint integr arclength instead time httpsgithubcomopenmdaodymospul simplifi ssto exampl use singl ode compon complexstep httpsgithubcomopenmdaodymospul ad balanc field length exampl httpsgithubcomopenmdaodymospul ad abil use callabl return system ode httpsgithubcomopenmdaodymospul bug fix remov duplic input timeseri multipl output may use sourc data httpsgithubcomopenmdaodymospul fix bug timeseri output nondynam ode output would caus except httpsgithubcomopenmdaodymospul miscellan rework cannonbal exampl make simpl httpsgithubcomopenmdaodymospul place test use_tempdir decor clean output httpsgithubcomopenmdaodymospul ad test check docstr vs numpydoc standard httpsgithubcomopenmdaodymospul clean implement wildcard unit ad multipl timeseri httpsgithubcomopenmdaodymospul releas note dymo januari releas dymo bring improv bug fix weve implement introspect boundari path constraint unit shape constrain quantiti determin setup process longer requir specifi use solve_seg solver converg dynam thu provid shoot method optim improv option solve_seg take valu forward backward provid forward backward shoot linkag constraint result error quantiti side linkag govern optim design variabl fix valu allow vari backward incompat api chang deprec command line interfac deprec due inconsist behavior httpsgithubcomopenmdaodymospul enhanc chang coercedesvar handl vector valu refrefscaleradd carri chang defect refdefect scaler httpsgithubcomopenmdaodymospul chang solve_seg allow use neither fix_initi fix_fin true httpsgithubcomopenmdaodymospul ad detect unsatisfi linkag constraint quantiti side chang optim httpsgithubcomopenmdaodymospul ad introspect boundari path constraint httpsgithubcomopenmdaodymospul bug fix fix bug use grid refin one state vectorvalu httpsgithubcomopenmdaodymospul fix issu show_plot argument run_problem perman chang matplotlib backend httpsgithubcomopenmdaodymospul fix bug trajectorysimul would crash trajectori name common traj name httpsgithubcomopenmdaodymospul fix bug prevent restart work multiphas trajectori includ static paramet solut file httpsgithubcomopenmdaodymospul fix bug associ polynomi control rate sourc ad coverag case httpsgithubcomopenmdaodymospul fix except simul trajectori paramet none declar target one phase httpsgithubcomopenmdaodymospul miscellan none releas note dymo decemb releas dymo add import featur dymo automat gener plot timeseri output state rate may tag ode also sever bug fix backward incompat api chang deprec none enhanc dymo automat gener plot timeseri output httpsgithubcomopenmdaodymospul state discov automat tag rate variabl ode httpsgithubcomopenmdaodymospul httpsgithubcomopenmdaodymospul httpsgithubcomopenmdaodymospul bug fix fix issu polynomi control abl link across phase httpsgithubcomopenmdaodymospul fix bug prevent paramet state rate sourc httpsgithubcomopenmdaodymospul user may specifi paramet shape integ iter tupl httpsgithubcomopenmdaodymospul miscellan fix apach licens string setuppi classifi sinc recogn pypi httpsgithubcomopenmdaodymospul ad long descript pypi httpsgithubcomopenmdaodymospul document cleanup joss review httpsgithubcomopenmdaodymospul httpsgithubcomopenmdaodymospul drop depend parameter packag intent util subtest futur httpsgithubcomopenmdaodymospul releas note dymo novemb releas dymo fix issu allow portion array output connect paramet version work openmdao version offer improv handl paramet backward incompat api chang deprec paramet shape store shape paramet shape expect httpsgithubcomopenmdaodymospul enhanc state shape unit explicitli given pull target present uniqu defin rate sourc variabl httpsgithubcomopenmdaodymospul bug fix fix bug userdefin shape state collid found introspect state introspect updat httpsgithubcomopenmdaodymospul fix bug prevent use numpi array boundari constraint httpsgithubcomopenmdaodymospul miscellan ad test verifi function openmdao allow final valu control partial portion output connect paramet httpsgithubcomopenmdaodymospul releas note dymo octob longoverdu releas dymo featur sever use new featur take advantag recent chang openmdao setup process use introspect determin lot thing automat instanc user longer requir specifi shape default unit timeseri output constraint although overrid unit choos also topic timeseri dymo support glob pattern ad ode output timeseri ad output larg ode timeseri output accomplish singl line phaseadd_timeseries_output introspect also use state time control state get default unit shape associ state rate variabl control polynomi control paramet get default unit shape target advent automat indepvarcomp openmdao longer need distinct inputparamet designparamet user add paramet trajectori phase user choos make design variabl case perform designparamet connect extern variabl paramet make function inputparamet plan make releas dymo roughli per month backward incompat api chang deprec add_input_paramet add_design_paramet deprec replac add_paramet httpsgithubcomopenmdaodymospul use twocharact locat string replac initi final link phase httpsgithubcomopenmdaodymospul endpoint condit compon use pull initi final valu variabl phase remov valu instead pull timeseri httpsgithubcomopenmdaodymospul result simul automat record databas record dymos_simulationdb store case name final use casereaderdymos_simulationdbget_casefin access case instead previou behavior casereaderdymos_simulationdbget_cas httpsgithubcomopenmdaodymospul rungekutta transcript deprec function equival gausslobatto transcript order sinc signficantli differ hood drag develop one note anoth backward incompat sinc use newer openmdao capabl way paramet handl current possibl connect upstream output paramet dymo _when src_indic used_ plan fix issu upcom openmdao releas reli capabl recommend wait updat use version dymo use intermedi passthrough compon pull correct index origin output pass _that_ valu dymo paramet enhanc dymo compon longer list check_parti output default use dymosoptionsinclude_check_parti true overrid debug httpsgithubcomopenmdaodymospul output link across phase ad gener power add_linkage_constraint method simpler link_phas method remain place simpl continu httpsgithubcomopenmdaodymospul time control polynomi control unit determin target httpsgithubcomopenmdaodymospul state pull default unit shape rate sourc httpsgithubcomopenmdaodymospul phase method add_timeseries_output support wildcard allow multipl timeseri output ad httpsgithubcomopenmdaodymospul timeseri output automat detect shape default unit httpsgithubcomopenmdaodymospul ad phadapt refin method capabl shrink grid httpsgithubcomopenmdaodymospul control target automat set toplevel input ode present httpsgithubcomopenmdaodymospul state target automat set toplevel input ode present httpsgithubcomopenmdaodymospul waterpow rocket mdo exampl ad httpsgithubcomopenmdaodymospul state rate includ timeseri output default httpsgithubcomopenmdaodymospul default run_problem use problem record record final solut optim httpsgithubcomopenmdaodymospul move setup function configur allow introspect chang httpsgithubcomopenmdaodymospul includ exampl use ipopt via pyoptspars httpsgithubcomopenmdaodymospul paramet may select omit timeseri output includ default httpsgithubcomopenmdaodymospul ad test distribut ode capabl httpsgithubcomopenmdaodymospul replac load_cas reinterpolate_solut httpsgithubcomopenmdaodymospul bug fix fix bug caus matrixshap state connect error httpsgithubcomopenmdaodymospul fix bug simul fail standard polynomi control present httpsgithubcomopenmdaodymospul fix issu paramet promot twice case caus error upcom version openmdao httpsgithubcomopenmdaodymospul fix bug caus matrixshap state connect error httpsgithubcomopenmdaodymospul analysiserror rais scipyintegratesolve_ivp fail simul httpsgithubcomopenmdaodymospul fix bug involv gausslobatto transcript get_rate_sourc method httpsgithubcomopenmdaodymospul fix simul encount error time option input_initi input_dur true httpsgithubcomopenmdaodymospul fix bug shape input paramet break simul httpsgithubcomopenmdaodymospul sort linkag order make converg repeat httpsgithubcomopenmdaodymospul miscellan switch use prefer assert_near_equ method instead assert_rel_error openmdao httpsgithubcomopenmdaodymospul document handl via mkdoc instead sphinx httpsgithubcomopenmdaodymospul httpsgithubcomopenmdaodymospul __bug fix__ phase linkag unit check optim control variabl first phase linkag unit previous unit thing neither state time control assign __enhancement__ remov python support __enhancement__ remov deprec ode decor __enhancement__ ad abil subclass phase assign ode default state variabl option __docs__ ad doc _subclass phases_ __enhancement__ autom grid refin avail via dymosrun_problem function __enhancement__ grid data avail upon instanti transcript instead defer setup time __bug fix__ user get meaning messag phaseinterpol call soon __bug fix__ state rate correctli pass interleav compon provid timeseri output gausslobatto transcript __enhancement__ ad hypersensit exampl problem __docs__ document ad grid refin __enhancement__ deprec use ode decor __enhancement__ ad shuttl reentri exampl problem __enhancement__ phase method like set_state_opt add_control longer use kwarg order make ide friendli __enhancement__ addit timeseri output ad phase interpol onto new set grid point enabl concept tandem phase two differ ode oper time interv integr differ grid fast state variabl integr dens grid slower state variabl integr spars grid perform exampl see tandem phase document featur doc __enhancement__ ode option specifi phase level rather ode featur experiment allow one way programmat defin ode __enhancement__ chang use openmdao import openmdaoapi om consist openmdao document __enhancement__ dymo import exampl import dymo dm issu type x bug enhanc doc miscellan descript bug explain happen differ expect behavior enhanc explain desir function exampl bug possibl provid short snip reproduc issu link file anoth repositori issu demonstr enhanc critic possibl provid exampl propos usag enhanc refer implement implement desir merg dymo site refer implement issu pull request pull request cite issu number relat issu section environ oper system ie os x window ubuntu python environ ie anaconda python packag version dymo openmdao pertin python packag past output pip freez summari summari pr relat issu resolv backward incompat none new depend none titl dymo python packag optim control multidisciplinari system tag python openmdao optim control trajectori optim multidisciplinari optim nasa author name robert falck orcid affili name justin gray orcid affili name kaushik ponnap affili name ted wright affili affili name nasa glenn research center index name hx llc index date march bibliographi paperbib summari dymo librari optim control schedul dynam system sometim refer optim control trajectori optim number optim control librari tackl similar kind problem oti pari gpopsii pattersongpopsiiand casadi andersson tool reli gradientbas optim solv optim control problem though method comput gradient vari dymo built top openmdao framework graya support modular deriv system allow user mixandmatch finitedifferenc complexstep handdifferenti algorithm differenti flexibl allow dymo effici solv optim control problem construct ordinari differenti equat ode differentialalgebra equat dae dymo also help solv gener optim problem dynam one part larger systemlevel model addit potenti comput expens calcul come dynam calcul broader problem commonli refer codesign controlscodesign multidisciplinari design optim dymo provid specif api featur make possibl integr tradit optimalcontrol model codesign context still support analyt deriv necessari comput effici complex use case exampl codesign problem solv dymo coupl trajectorytherm design electr vertic takeoff land aircraft thermal manag propuls system design simultan flight trajectori ensur compon overh haritona differ optimalcontrol codesign optimalcontrol codesign problem deal dynam system evolut state time govern ordinari differenti equat ode differentialalgebra equat dae beginalign dotbarx f_odebarxtbarubard endalign barx vector timevari state variabl whose behavior affect time vector dynam control baru vector static design paramet bard optim dynam system also need account object function j beginalign mathrmj f_objbarxtbarubard endalign addit constraint typic need enforc beginalign mathrmtim qquad t_lb leq leq t_ub mathrmstat variabl qquad barx_lb leq barx leq barx_ub mathrmdynam control qquad baru_lb leq baru leq baru_ub mathrmdesign paramet qquad bard_lb leq bard leq bard_ub mathrminiti boundari constraint qquad barg_lb leq g_barx_t_baru_ bard leq barg_ub mathrmfin boundari constraint qquad barg_flb leq g_fbarx_ft_fbaru_f bard leq barg_fub mathrmpath constraint qquad barp_lb leq pbarxtbarubard leq barp_ub endalign mathemat sens distinguish optim control codesign particular design variabl constraint actual consid optim pure optimalcontrol problem deal system fix design seek maxim perform adjust dynam quantiti barx baru posit speed fuelburn batteri stateofcharg codesign problem simultan vari static design paramet system bard dynam behavior barx baru reach maximum perform practic mathemat distinct rigid practic distinct made base static dynam calcul implement complex simpl physic design paramet eg radiu cannon ball spring constant linkag length etc common integr design calcul directli ode even though calcul static natur easili code part ode still fit well optimalcontrol paradigm optim structur thu look like model structur tradit optim control problemflow_chartsopt_controlpngwidth howev problem handl compact implement exampl physic design problem includ shape airfoil use expens numer solut partial differenti equat pde predict drag one would want emb pde solver dynam model instead user could set coupl model pde solver go first pass tabl data interpol dynam model effect split calcul static dynam compon implement structur call codesign tradit codesign implement would done via sequenti optim manual outer design iter static dynam model potenti differ team peopl work one one team would come physic design use intern optim setup second team take design gener optimalcontrol profil cours iter need manual also possibl set iter loop around static dynam model converg problem numer sequenti codesign implement look like model structur sequenti codesign problemflow_chartssequential_co_designpngwidth dymo support sequenti codesign uniqu valu also enabl tightlycoupl codesign process singl top level optim handl part problem simultan model structur coupl codesign problemflow_chartscoupled_co_designpngwidth compar sequenti codesign coupl codesign offer potenti find better design much lower comput cost howev also challeng implement toplevel optim requir deriv propag static dynam part model dymo overcom difficulti provid api exploit openmdao analyt deriv function model level data pass static model dynam model vice versa allow construct coupl model optim ode versu dae optimalcontrol softwar typic requir dynam system defin set ordinari differenti equat ode use explicit function comput rate state variabl timeintegr sometim dynam instead pose set differentialalgebra equat dae residu equat need satisfi implicitli order solv state rate perspect optimalcontrol codesign problem ode dae formul provid state rate need integr time differ ode explicit function rel easi differenti dae implicit function much difficult differenti sinc deriv need perform optim dae challeng optim one rel common use case dae differenti inclus state trajectori pose dynam control tradit control schedul need achiev trajectori found use nonlinear solver within dynam model seywald problem method provid natur numericallybenefici design space optim travers nonlinear solver pose numer challeng comput deriv optim simpl approach use finitediffer across nonlinear solver shown expens numer unstabl grayderiv anoth option taken optim control librari appli monolith algorithm differenti griewankmathemat across nonlinear solver provid accur deriv monolith approach expens use lot memori maderadjoint kenwayeffect effici approach use pair analyt deriv approach call direct adjoint method gener singl unifi deriv equat ude hwang martin hwangb dymo adopt ude approach use linear solver comput total deriv need optim use partial deriv residu equat dae approach offer two key advantag first partial deriv dae residu equat much less comput challeng comput second use openmdao underpin dymo user construct dae modular fashion combin variou method comput partial deriv via finitediffer complexstep martinsc algorithm differenti hand differenti need dymo perspect optim control dymo break trajectori portion time call _phases_ break trajectori phase provid sever capabl intermedi constraint along trajectori enforc appli boundari constraint phase begin end time interest instanc optim trajectori launch vehicl may requir ascend vertic clear launch tower pitch way orbit path constraint appli within phase bound perform paramet within phase exampl reentri vehicl may need adjust trajectori limit aerodynam heat phase trajectori use separ ode instanc aircraft vertic takeoff land capabl may use differ ode vertic flight horizont flight ode implement standard openmdao model pass phase instanti time addit annot identifi state stater control input everi phase use specif time discret tailor dynam portion trajectori one part trajectori fast dynam anoth slow dynam time evolut broken two phase separ time discret optimalcontrol commun number differ techniqu discret continu optim control problem form solv nonlinear optim algorithm one call transcript dymo support two differ colloc transcript highord gausslobatto herman radau garg repres state control trajectori piecewis polynomi least rd order formul way make possibl effici comput need quantiti perform integr numer rigor fashion dymo also allow user choos whether optim problem solv use explicit implicit approach caution terminolog must taken term implicit often use describ time integr scheme eg backward euler meant optimalcontrol context explicit propag one full state trajectori comput start initi valu propag forward final valu propag backward optim perspect set valu initi final state barx design paramet bard control baru expect given physic valid time evolut state output wrap optim around explicit propag give tradit call shoot method optimalcontrol world contrast implicit propag use within optim provid valid trajectori instead implicit method add discret timeevolut state vector barx addit design variabl optim add associ set defect constraint must driven zero enforc physic set discret point time ode evalu net effect full state trajectori known optim fulli converg context multidisciplinari design optim field explicit phase similar multidisciplinari design feasibl mdf optim architectur implicit phase similar simultan analysi design sand optim architectur martin implicit explicit phase use differ circumst explicit propag seem mani like natur way formul problem match way one would use time integr without optim howev use optim explicit propag comput expens sensit singular ode potenti unabl converg valid solut implicit propag tend less intuit comput sinc provid valid state histori without converg optim advantag implicit propag tend faster numer stabl scalabl though also highli sensit initi condit optim scale dymo support explicit implicit propag transcript even allow mixtur implicitli explicitli propag state within phase flexibl valuabl allow user tailor optim suit need switch transcript chang implicit explicit requir minor code chang typic singl line runscript exampl swap given code sampl choic optim algorithm dymo distribut optim reli optim avail openmdao instal openmdao ship interfac optim scipi scipynmeth addit wrapper pyoptspars librari wu_pyoptsparse_ power optim option snopt gilm ipopt wachter openmdao also allow user integr optim choic dymo seamlessli use without addit modif simpl problem scipi slsqp optim gener work fine challeng optimalcontrol problem higherqu optim import get good perform though one could technic choos optim algorithm dymo design work primarili gradientbas algorithm gener optimalcontrol codesign problem larg number design variabl larg number constraint issu make gradientbas method stronglypref choic gradientfre method could potenti use certain narrow circumst problem built use pure explicit phase set intent small set design variabl constraint statement need deal design complex system includ transient behavior codesign becom critic garciasan broadli two approach sequenti codesign coupl codesign fathi peter best choic depend degre interact coupl variou subsystem coupl strong coupl codesign approach necessari achiev best perform though number effect optimalcontrol librari tend assum top model stack frame everi optim problem pure optimalcontrol problem henc best suit use sequenti codesign style pose larg challeng expand tightlycoupl problem interact static dynam system strong dymo provid set uniqu capabl make coupl codesign possibl via effici gradientbas optim method provid differenti timeintegr scheme gener transient model user provid ode along api enabl user coupl transient model model form codesign system carri differenti coupl also support effici differenti dae includ implicit relationship allow much broader set possibl way pose transient model two featur combin make dymo capabl handl coupl codesign problem manner effici pure optimalcontrol approach select applic dymo dymo use demonstr coupl flight dynam subsystem thermal constraint electr aircraft applic falcka haritona nasa x maxwel use dymo mission plan maxim data collect abid limit batteri storag capac subsystem temperatur schnuloa schnuloa author use dymo perform studi aircraft acoust ingrahama design superson aircraft thermal fuel manag system jasaa optimalcontrol exampl brachistochron simpl use case dymo consid classic brachistochron optimalcontrol problem bead slide along frictionless wire strung two point differ height seek shape wire bead travel start finish shortest time timevari control angl wire point time design paramet make pure optimalcontrol problem small python import numpi np import openmdaoapi om import dymo dm import matplotlibpyplot plt first defin system comput equat motion class brachistochroneeomomexplicitcompon def initializeself selfoptionsdeclarenum_nod typesint def setupself nn selfoptionsnum_nod input selfadd_inputv valnpzerosnn unitsm descveloc selfadd_inputtheta valnpzerosnn unitsrad descangl wire selfadd_outputxdot valnpzerosnn unitsm descx rate chang selfadd_outputydot valnpzerosnn unitsm desci rate chang selfadd_outputvdot valnpzerosnn unitsm descv rate chang ask openmdao comput partial deriv use complexstep partial color algorithm improv perform selfdeclare_partialsof wrt methodc selfdeclare_coloringwrt methodc show_summarytru def computeself input output v theta inputsvalu outputsvdot npcostheta outputsxdot v npsintheta outputsydot v npcostheta p omproblem defin trajectori object traj pmodeladd_subsystemtraj dmtrajectori defin dymo phase object gausslobatto transcript tx dmgausslobattonum_seg order phase dmphaseode_classbrachistochroneeom transcriptiontx trajadd_phasenamephas phasephas set time option phaseset_time_optionsfix_initialtru duration_bound set state option phaseadd_statex rate_sourcexdot fix_initialtru fix_finaltru phaseadd_statey rate_sourceydot fix_initialtru fix_finaltru phaseadd_statev rate_sourcevdot fix_initialtru fix_finalfals defin theta control phaseadd_controlnametheta unitsrad lower uppernppi minim final time phaseadd_objectivetim locfin set driver pdriver omscipyoptimizedriv allow openmdao automat determin total deriv sparsiti pattern work conjunct partial deriv color give larg speedup pdriverdeclare_color setup problem psetup openmdao problem setup guess valu time state control pset_valtrajphaset_dur state control use linearli interpol initi guess along trajectori pset_valtrajphasestatesx phaseinterpolatey nodesstate_input unitsm pset_valtrajphasestatesi phaseinterpolatey nodesstate_input unitsm pset_valtrajphasestatesv phaseinterpolatey nodesstate_input unitsm constant initi guess control pset_valtrajphasecontrolstheta unitsdeg run driver solv problem gener default plot state control valu vs time dmrun_problemp make_plotstru simulatetru addit custom plot vs x show actual wire shape fig ax pltsubplotsfigs x pget_valtrajphasetimeseriesstatesx unitsm pget_valtrajphasetimeseriesstatesi unitsm axplotxi markero axset_xlabelx axset_ylab figsavefigbrachistochone_yxpng bbox_inchestight normals builtin plot util dymo plot relev quantiti vs time brachistochron solut state trajectorybrachistochrone_states_ypngwidth brachistochron solut x state trajectorybrachistochrone_states_xpngwidth tradit way view brachistochron solut view actual shape wire ie vs x brachistochron solut function xbrachistochone_yxpngwidth coupl codesign exampl design cannonbal codesign exampl seek find best size cannonbal maxim rang consid aerodynam drag subject limit initi kinet energi given kinet energi lighter ball go faster henc farther aerodynam drag ignor heavier cannonbal inertia counteract drag balanc two effect optim seek find static calcul find mass frontal area cannonbal given radiu ode take mass area input via dymo comput total rang demonstr purpos trajectori broken ascent descent phase break set exactli apoge flight path small python import numpi np scipyinterpol import interpd import matplotlibpyplot plt import openmdaoapi om import dymo dm dymosmodelsatmosphereatmos_ import _usatmdata usatmdata creat atmospher interpol english_to_metric_rho omunit_conversionslugft kgm english_to_metric_alt omunit_conversionft rho_interp interpdnparrayusatmdataaltenglish_to_metric_alt dtypecomplex nparrayusatmdatarhoenglish_to_metric_rho dtypecomplex kindlinear class cannonballsizeomexplicitcompon static calcul perform dynam model def setupself selfadd_inputnameradiu val desccannonbal radiu unitsm selfadd_inputnamedens val desccannonbal densiti unitskgm selfadd_outputnamemass shape desccannonbal mass unitskg selfadd_outputnamearea shape descaerodynam refer area unitsm selfdeclare_partialsof wrt methodc def computeself input output radiu inputsradiu rho inputsdens outputsmass rho nppi radiu outputsarea nppi radiu class cannonballodeomexplicitcompon cannonbal ode assum flat earth account air resist def initializeself selfoptionsdeclarenum_nod typesint def setupself nn selfoptionsnum_nod static paramet selfadd_inputmass unitskg selfadd_inputarea unitsm time vari input selfadd_inputalt unitsm shapenn selfadd_inputv unitsm shapenn selfadd_inputgam unitsrad shapenn state rate selfadd_outputv_dot shapenn unitsm selfadd_outputgam_dot shapenn unitsrad selfadd_outputh_dot shapenn unitsm selfadd_outputr_dot shapenn unitsm selfadd_outputk shapenn unitsj ask openmdao comput partial deriv use complexstep partial color algorithm improv perform selfdeclare_parti methodc selfdeclare_coloringwrt methodc def computeself input output gam inputsgam v inputsv alt inputsalt inputsmass inputsarea cd good assumpt sphere graviti ms handl complexstep grace interpol npiscomplexobjalt rho rho_interpinputsalt els rho rho_interpinputsaltr q rhoinputsv qs q qs cd cgam npcosgam sgam npsingam outputsv_dot dmgravitysgam outputsgam_dot gravityvcgam outputsh_dot vsgam outputsr_dot vcgam outputsk mv __name__ __main__ p omproblem codesign part model static analysi outsid dymo static_calc pmodeladd_subsystemstatic_calc cannonballs static_calcsadd_design_varradiu lower upper ref ref pmodelconnectstatic_calcsmass trajparametersmass pmodelconnectstatic_calcsarea trajparametersarea traj pmodeladd_subsystemtraj dmtrajectori declar paramet constant across two phase trajectori connect trajadd_parametermass unitskg val dynamicfals trajadd_parameterarea unitsm dynamicfals tx dmradaunum_seg order compressedtru ascent dmphasetranscriptiontx ode_classcannonballod trajadd_phaseasc ascent first phase ascent initi state except flight path angl fix ascentadd_stat unitsm rate_sourcer_dot fix_initialtru fix_finalfals ascentadd_stateh unitsm rate_sourceh_dot fix_initialtru fix_finalfals ascentadd_statev unitsm rate_sourcev_dot fix_initialfals fix_finalfals final flight path angl fix set zero phase end apoge ascentadd_stategam unitsrad rate_sourcegam_dot fix_initialfals fix_finaltru ascentset_time_optionsfix_initialtru duration_bound duration_ref unitss ascentadd_parametermass unitskg val dynamicfals ascentadd_parameterarea unitsm dynamicfals limit initi muzzl energi creat well pose problem respect cannonbal size initi veloc ascentadd_boundary_constraintk lociniti unitsj upper lower ref second phase descent tx dmgausslobattonum_seg order compressedtru descent dmphasetranscriptiontx ode_classcannonballod trajadd_phasedesc descent initi state time free valu link final ascent valu final altitud fix ensur final impact ground descentadd_stat unitsm rate_sourcer_dot fix_initialfals fix_finalfals descentadd_stateh unitsm rate_sourceh_dot fix_initialfals fix_finaltru descentadd_stategam unitsrad rate_sourcegam_dot fix_initialfals fix_finalfals descentadd_statev unitsm rate_sourcev_dot fix_initialfals fix_finalfals descentset_time_optionsinitial_bound duration_bound duration_ref unitss descentadd_parametermass unitskg val dynamicfals descentadd_parameterarea unitsm dynamicfals link phase link time state variabl trajlink_phasesphasesasc descent var maxim rang descentadd_objectiv locfin ref pdriver ompyoptsparsedriv pdriveroptionsoptim slsqp pdriverdeclare_color finish problem setup psetup set initi guess static dv ascent pset_valstatic_calcsradiu unitsm pset_valtrajascentt_dur pset_valtrajascentstatesr ascentinterpolatey nodesstate_input pset_valtrajascentstatesh ascentinterpolatey nodesstate_input pset_valtrajascentstatesv ascentinterpolatey nodesstate_input pset_valtrajascentstatesgam ascentinterpolatey nodesstate_input unitsdeg intiti guess descent pset_valtrajdescentt_initi pset_valtrajdescentt_dur pset_valtrajdescentstatesr descentinterpolatey nodesstate_input pset_valtrajdescentstatesh descentinterpolatey nodesstate_input pset_valtrajdescentstatesv descentinterpolatey nodesstate_input pset_valtrajdescentstatesgam descentinterpolatey nodesstate_input unitsdeg dmrun_problemp simulatetru make_plotstru fig ax pltsubplot x pget_valtrajascenttimeseriesstatesr unitsm pget_valtrajascenttimeseriesstatesh unitsm x pget_valtrajdescenttimeseriesstatesr unitsm pget_valtrajdescenttimeseriesstatesh unitsm tab pltcmget_cmaptabcolor axplotxi markero labelasc colortab axplotxi markero labeldesc colortab axlegendlocbest axset_xlabelrang axset_ylabelheight figsavefigcannonball_hrpng bbox_inchestight normals builtin plot dymo give time evolut time vari quantiti exampl trajectori rang height cannonbal solut height vs timecannonball_states_hpngwidth cannonbal solut rang vs timecannonball_states_rpngwidth natur way view solut consid height vs rang cannonbal solut height vs timecannonball_hrpngwidth parabol trajectori slightli skew due effect air resist slow cannonbal move slower descent ascent acknowledg dymo develop fund nasa transform tool technolog project refer multidisciplinari optim control librari goal dymo enabl optim subsystem design tightli connect well oper overal system dymo librari optim control dynam multidisciplinari system optim typic optim control problem key featur abil optim _systems_ trajectori one part overal optim optim softwar frequent reli parameter hardwar model instanc approxim mass engin function thrust level instead dymo allow impos higherfidel design consider subsystem simpl parameter model highfidel cfd model appli result subsystem design trajectori profil dymo reli abil openmdao comput accur deriv effici capabl enabl user dymo emb iter procedur within system dynam normal would significantli impair perform dymo optim system minim perform degrad free user reformul design specif purpos optim control implement key featur employ gausslobatto colloc citehermandirect radau pseudospectr method citegargdirect find optim control dynam system find optim design system satisfi varieti differ trajectori emb nonlinear solver within system dynam transform typic state variabl control variabl differenti inclus citeseywald use nonlinear solver satisfi colloc constraint singl multipl shoot within interfac leverag multiprocess capabl improv perform dymo shortag optim control softwar base pseudospectr approach number optim control librari tackl similar kind problem oti citeparis_riehl_sjauw_ gpopsii citepattersongpopsand casadi citeandersson given amount softwar exist space develop dymo want use optim control context multidisciplinari optim exist stateoftheart tool would mean wrap one exist tool pass differ disciplin perform reason also want abl pass deriv differ disciplin includ trajectori design approach drive us toward monolith optim problem singl object optim encompass inform subsystem collabor optim approach optim subsystem minim amount inform pass subsystem boundari gener slower fail find solut good monolith approach first object therefor develop optim control softwar capabl provid accur analyt deriv mani stateoftheart optim control softwar packag reli finitedifferenc estim deriv need optim solv problem although begin chang inher coupl accuraci deriv scale problem wed like use analyt deriv calcul better decoupl interact even softwar packag employ analyt deriv gener use forwarddifferenti approach work hwang martin citehwangb demonstr develop framework accur deriv calcul includ analyt deriv complexstep finitediffer approxim fallback approach give us key capabl adjoint differenti effici pure shootingmethod optim control number constraintsobject far fewer number design variabl abil comput deriv across complex iter system _without need reconverg system_ abil provid gener bidirect deriv color system citegraycolor minim comput effort requir comput sensitivi output respect input addit make optim control perform use multidisciplinari optim keen studi sort work capabl could enabl embed iter system within optim particular gener avoid perform reason stateoftheart differenti approach openmdao built upon work martin hwang emb complex implicit system minim impact perform enabl effici optim via differenti inclus citeseywald allow us employ shoot method within pseudospectr framework develop involv dymo involv nasa legaci optim control softwar oti gener approach use dymo similar oti trajectori divid time portion call phase dynam control static paramet bound constraint well nonlinear boundari constraint path constraint notion carri oti oti pioneer softwar offer great capabl also lack lot desir modern featur develop commun sinc incept thirti year ago dymo featur modular way user defin dynam addit pseudospectr method better differenti approach reliabl converg citat see overview paperhttpsjosstheojorgpapersjoss journal open sourc softwar use dymo work pleas cite articlefalck doi joss url httpsdoiorgjoss year publish open journal volum number page author robert falck justin gray kaushik ponnap ted wright titl dymo python packag optim control multidisciplinari system journal journal open sourc softwar refer bibliographi filter docnam docnam instal dymo basic instal dymo instal pip use bash python pip instal dymo cuttingedg develop version dymo may instal bash python pip instal githttpsgithubcomopenmdaodymosgit instal develop mode intend modifi dymo build document run test local add pip instal includ document testingspecif instal depend clone dymo local directori instal use e flag instal dymo develop mode remov need reinstal dymo chang made bash git clone httpsgithubcomopenmdaodymosgit dymosgit python pip instal e dymosgital instal advanc depend mani simpl depend dymo instal via pip howev depend requir advanc usecas pyoptspars recommend dymo work outofthebox use openmdao scipyoptimizedriv mani simpl problem complex problem implicit optim techniqu use dymo easili gener problem hundr even thousand design variabl constraint nonlinear optim problem gener dymo becom complic free optim avail via scipyoptimizedriv struggl converg reason author tend use opensourc ipopthttpscoinorgithubioipopt optim proprietari snopthttpsccomucsdeduoptimizerssolverssnopt optim optim abl capit _sparse_ natur optim control problem gener dymo significantli reduc time memori requir solv problem uniform access varieti optim includ slsqp ipopt snopt dymo use openmdao pyoptsparsedriv interfac extern optim via pyoptsparsehttpsgithubcommdolabpyoptspars produc mdolab univers michigan user os x linux system use script avail httpsgithubcomopenmdaobuild_pyoptsparsehttpsgithubcomopenmdaobuild_pyoptspars build instal pyoptspars support ipopt script also handl support snopt user access snopt sourc code instal depend windowsbas system requir intel fortranhttpssoftwareintelcomcontentwwwusendeveloptoolsoneapicomponentsfortrancompilerhtml free fortran compil window time write compat microsoft abi use python window mpipi petscpi togeth mpipi petscpi enabl parallel process dymo via mpi easiest way instal mpipi use anacondahttpswwwanacondacomproductsindividu python environ conda creat n py python conda activ py conda config add channel condaforg conda instal mpipi conda instal petscpi mpi capabl gener necessari nich usecas phase phasesphasesipynb segmentssegmentsipynb variablesvariablesipynb constraintsconstraintsipynb objectiveobjectiveipynb time seriestimeseriesipynb dymo exampl goal exampl walk user process formul optim control problem solv use dymo work exampl well tri emphas follow process formul optim control problem identifi state control variabl ordinari differenti equat ode govern dynam build ode openmdao system test evalu ode defin partial deriv ode test partial deriv ode finitediffer prefer complexstep approxim prerequisit exampl assum user work knowledg follow python numpi packag numer comput python matplotlib packag plot result exampl may requir addit option packag note notebook dymo refer api dymo run_problem functionrun_problem phase apiphase_api transcript apitranscriptions_api trajectori apitrajectory_api optim control transcript solv optim control problem use classic techniqu typic matter find continu control function move system desir state extrem object minim time fuel cost etc solv problem directli use nonlinear optim find way discret continu problem form solv nonlinear optim process call _transcription_ dymo support two form direct transcript collocationgetting_startedcollocationwhat_is_colloc explicit shoot collocationbas optim control method also known pseudospectr method implicit techniqu entir state control histori system propos discret set point time calcul accur propos state control histori obey ode govern system dynam residu call _defects_ iter vari state control elaps time trajectori reduc defect zero mean propos state histori solut ode system given control histori time propag explicit shoot explicit numer integr techniqu use propag initi state given time durat subject given control process integr trajectori elimin defect differ colloc explicit shoot design variabl implicit colloc techniqu design variabl includ state set point along trajectori initi final one may includ theyr fix control discret point time elaps time trajectori explicit shoot techniqu design variabl includ initi state assum fix assum singl integr interv _singl shooting_ initi state integr interv _multipl shooting_ control valu set discret point time elaps time trajectori design variabl vector consider larger implicit colloc techniqu depend size state vector number discret point time constraint implicit colloc techniqu constraint includ defect constraint state variou discret point time throughout trajectori continu constraint ensur state valu remain continu compressedfals continu constraint control valu compressedfals option rate path boundari constraint impos explicit shoot techniqu constraint includ continu constraint ensur state valu remain continu assum multipl integr interv _multipl shooting_ continu constraint control valu compressedfals option rate path boundari constraint impos constraint vector consider larger implicit colloc techniqu depend size state vector number point trajectori discret also note implicit colloc techniqu state valu start end trajectori design variabl mean valu trivial _fixed_ remov design variabl vector bound use simpl bound correspond design variabl way impos constraint path final valu state shoot method nonlinear path boundari constraint perform due fact design variabl constraint vector consider larger implicit colloc problem might logic conclud theyr slower explicit shoot solv correspond problem case singl shoot method valu state later time least potenti function everyth happen correspond _jacobian matrix_ deriv state valu along trajectori lower triangular implicit colloc techniqu state one integr _segment_ function anyth happen outsid integr segment jacobian matrix much spars increas sparsiti help two way first determin deriv much effici consid finit differenc techniqu know state valu first integr segment trajectori impact segment segment simultan perturb state valu segment compar result defect vector nomin defect valu comput sensit via finit differ massiv perform gain that possibl singl shoot techniqu though multipl shoot help second optim capit sparsiti jacobian matric provid significantli improv perform vs oper dens matric factor colloc techniqu order magnitud faster explicit shoot counterpart robust faster implicit techniqu impos far defect constraint problem case scale optim problem challeng converg poor instanc thrust rocket engin taken experiment data extrem noisi without first smooth data implicit simul result trajectori may difficult case explicit intgrat method power provid _an_ answer even subject amount error explicit integr least use fixedstep form doesnt fail provid answer import user verifi accuraci hand explicit integr subservi ode sometim featur problemat follow prescrib control profil take system region dynam becom singular result error caus optim fail minimum timetoclimbexamplesminimum_time_climb problem classic exampl equat motion use problem singular vertic flight divis zero deriv equat motion case rel easi prescrib profil angleofattack histori control send aircraft vertic flight integr requir follow convers colloc techniqu decoupl propos control histori trajectori rather govern control flight path angl variou time throughout trajectori design variabl bound valu avoid singular optim work make control histori compat correspond state trajectori two compat defect constraint satisfi optim control optim control impli optim dynam system typic take form trajectori state system evolv time evolut state leftbarxright typic govern ordinari differenti equat ode differenti algebra equat dae dymo character dynam ode although solv system dae also possibl beginalign dotbarx f_odebarxtbarubard endalign control paramet order impact behavior system need control control may allow vari time angleofattack aircraft flight refer _dynamic_ control leftbaruright control paramet might fix time wingspan aircraft refer _parameters_ leftbardright although literatur may also refer static control endpoint time state valu control valu design paramet valu defin independ variabl optim problem dymo discret variabl time convert continuoustim optim control problem nonlinear program nlp problem constraint optim problem alway constraint system constraint character bound independ variabl instanc fix initi condit trajectori accomplish bound initi state time desir valu beginalign mathrmtim qquad t_lb leq leq t_ub mathrmstat variabl qquad barx_lb leq barx leq barx_ub mathrmdynam control qquad baru_lb leq baru leq baru_ub mathrmdesign paramet qquad bard_lb leq bard leq bard_ub endalign time may want constrain output system specif point along trajectori boundari constraint along entir trajectori path constraint socal nonlinear constraint may nonlinear function independ variabl beginalign mathrminiti boundari constraint qquad barg_lb leq g_barx_t_baru_ bard leq barg_ub mathrmfin boundari constraint qquad barg_flb leq g_fbarx_ft_fbaru_f bard leq barg_fub mathrmpath constraint qquad barp_flb leq p_fbarxtbarubard leq barp_fub endalign practic bound constraint typic govern limit optim must observ provid valu independ variabl nonlinear constraint hand constraint appli output system put anoth way bound constraint alway observ nonlinear constraint necessarili observ optim finish solv optim problem object dymo may use simul optim dynam system phase construct gener use optim context within phase user set object beginalign mathrmj f_objbarxtbarubard endalign constraint object may output within phase phase also incorpor larger model wherein object defin subsystem outsid phase case standard openmdao method add_object use overal optim problem optim problem defin dymo thu state beginalign mathrmminim qquad mathrmj f_objbarxtbarubard mathrmsubject mathrmdynam constraint qquad dotbarx f_odebarxtbarubard mathrmtim qquad t_lb leq leq t_ub mathrmstat variabl qquad barx_lb leq barx leq barx_ub mathrmdynam control qquad baru_lb leq baru leq baru_ub mathrmdesign paramet qquad bard_lb leq bard leq bard_ub mathrminiti boundari constraint qquad barg_lb leq g_barx_t_baru_ bard leq barg_ub mathrmfin boundari constraint qquad barg_flb leq g_fbarx_ft_fbaru_f bard leq barg_fub mathrmpath constraint qquad barp_flb leq p_fbarxtbarubard leq barp_fub endalign frequent ask question add ode output timeseri outputsadd_ode_output_to_timeseriesmd connect scalar input odeconnect_scalar_parameters_to_odemd connect output upstream analysi input dymosupstream_analysismd connect output dymo downstream analysisdownstream_analysismd run two phase parallelintimetandem_phasesmd effici use finitedifferenc compon odeuse_partial_coloringmd debug model thing go wrongdebuggingmd