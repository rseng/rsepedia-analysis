contributor code conduct contributor maintain project pledg respect peopl contribut report issu post featur request updat document submit pull request patch activ commit make particip project harassmentfre experi everyon regardless level experi gender gender ident express sexual orient disabl person appear bodi size race ethnic age religion exampl unaccept behavior particip includ use sexual languag imageri derogatori comment person attack troll public privat harass insult unprofession conduct project maintain right respons remov edit reject comment commit code wiki edit issu contribut align code conduct project maintain follow code conduct may remov project team instanc abus harass otherwis unaccept behavior may report open issu contact one project maintain code conduct adapt contributor coven httpcontributorcovenantorg version avail httpcontributorcovenantorgvers readmemd gener readmermd pleas edit file comtradr travisci build statushttpstravisciorgropenscicomtradrsvgbranchmasterhttpstravisciorgropenscicomtradr appveyor build statushttpsciappveyorcomapiprojectsstatusgithubropenscicomtradrbranchmastersvgtruehttpsciappveyorcomprojectropenscicomtradr codecovhttpscodecoviogithubropenscicomtradrbranchmastergraphsbadgesvghttpscodecoviogithubropenscicomtradr cran_status_badgehttpswwwrpkgorgbadgesversioncomtradrhttpscranrprojectorgpackagecomtradr httpsbadgesropensciorg_statussvghttpsgithubcomropenscionboardingissu cran rstudio mirror downloadshttpscranlogsrpkgorgbadgesgrandtotalcomtradrhttpswwwrpackagesiopackagecomtradr r packag interact un comtrad databasehttpscomtradeunorgdata public api un comtrad provid histor data weight valu specif good ship countri info found herehttpscomtradeunorg full api document found herehttpscomtradeunorgdatadocapi packag inspir r tutorialhttpscomtradeunorgdatadocapiexr post comtrad built use httrhttpscranrprojectorgpackagehttr jsonlitehttpscranrprojectorgpackagejsonlit ive also built shini app visual comtrad ship data that power packag app view herehttpschrismuirshinyappsiocomtrade_plot_shinyapp pleas reporthttpsgithubcomropenscicomtradrissu issu comment featur request pleas note project releas contributor code conductconductmd particip project agre abid term inform citat packag use citationcomtradr instal instal cran r installpackagescomtradr instal repo r installpackagesdevtool devtoolsinstall_githubropenscicomtradr exampl usag exampl return export china south korea unit state mexico year r librarycomtradr countri name pass api queri function must spell appear comtrad db use ct_country_lookup queri countri db return exact spell specif countri ct_country_lookupkorea dem peopl rep korea rep korea sinc want south korea well use rep korea within api queri exampl ct_searchreport china partner crep korea usa mexico trade_direct export inspect return data strexampl datafram ob variabl classif chr h h h h year int period int period_desc chr aggregate_level int is_leaf_cod int trade_flow_cod int trade_flow chr export export export export reporter_cod int report chr china china china china reporter_iso chr chn chn chn chn partner_cod int partner chr rep korea mexico usa rep korea partner_iso chr kor mex usa kor second_partner_cod logi na na na na na na second_partn chr na na na na second_partner_iso chr na na na na customs_proc_cod chr na na na na custom chr na na na na mode_of_transport_cod chr na na na na mode_of_transport chr na na na na commodity_cod chr total total total total commod chr commod commod commod commod qty_unit_cod int qty_unit chr quantiti quantiti quantiti quantiti alt_qty_unit_cod logi na na na na na na alt_qty_unit chr na na na na qti logi na na na na na na alt_qti logi na na na na na na netweight_kg logi na na na na na na gross_weight_kg logi na na na na na na trade_value_usd num e e e e e cif_trade_value_usd logi na na na na na na fob_trade_value_usd logi na na na na na na flag int attr url chr httpscomtradeunorgapigetmaxtypecfreqapxhspsallrpccrgcctotalfmtjsonheadh attr time_stamp posixct format attr req_dur num exampl return export relat shrimp thailand countri year thru r librarycomtradr fetch shrimp relat commod code comtrad commod db vector code get pass api queri shrimp_cod ct_commodity_lookupshrimp return_cod true return_char true api queri exampl ct_searchreport thailand partner trade_direct export start_dat end_dat commod_cod shrimp_cod inspect output strexampl datafram ob variabl classif chr h h h h year int period int period_desc chr aggregate_level int is_leaf_cod int trade_flow_cod int trade_flow chr export export export export reporter_cod int report chr thailand thailand thailand thailand reporter_iso chr tha tha tha tha partner_cod int partner chr world australia austria bahrain partner_iso chr wld au aut bhr second_partner_cod logi na na na na na na second_partn chr na na na na second_partner_iso chr na na na na customs_proc_cod chr na na na na custom chr na na na na mode_of_transport_cod chr na na na na mode_of_transport chr na na na na commodity_cod chr commod chr shrimp prawn whethernot shell frozen shrimp prawn whethernot shell frozen shrimp prawn whethernot shell frozen shrimp prawn whethernot shell frozen qty_unit_cod int qty_unit chr weight kilogram weight kilogram weight kilogram weight kilogram alt_qty_unit_cod logi na na na na na na alt_qty_unit chr na na na na qti int alt_qti logi na na na na na na netweight_kg int gross_weight_kg logi na na na na na na trade_value_usd int cif_trade_value_usd logi na na na na na na fob_trade_value_usd logi na na na na na na flag int attr url chr httpscomtradeunorgapigetmaxtypecfreqapxhspsccccrpallr __truncated__ attr time_stamp posixct format attr req_dur num ropensci_footerhttpsropensciorgpublic_imagesropensci_footerpnghttpsropensciorg comtradr new featur modif ct_search add support commod code ag httpsgithubcomropenscicomtradrpul bug fix function ct_register_token check provid token recogn offici api grant premium credenti httpsgithubcomropenscicomtradrissu pass api token string ct_register_token properli bump hourli rate limit httpsgithubcomropenscicomtradrissu func ct_search pass charact vector longform commod descript arg commod_cod throw error prior make api call would fail httpsgithubcomropenscicomtradrissu updat countri packag data stay date reporterpartn countri tabl comtrad use updat file instextdatacountry_tablerda httpsgithubcomropenscicomtradrissu func ct_search improv error messag input countri invalid httpsgithubcomropenscicomtradrissu func ct_search fix bug run queri use sitcrev commod type return raw html oppos json data httpsgithubcomropenscicomtradrissu comtradr remov unus depend method import comtradr new featur modif ct_search allow pull monthli data entir year singl queri httpsgithubcomropenscicomtradrissu function ct_search expand valid input type arg start_dat end_dat httpsgithubcomropenscicomtradrissu bug fix ct_search support commod classif offer un comtrad httpsgithubcomropenscicomtradrissu updat gener function ct_update_databas properli preserv r session httpsgithubcomropenscicomtradrissu pass servic arg type within function ct_search use commod classif eb default previous would throw error fix httpsgithubcomropenscicomtradrissu use commod classif eb within function ct_search pass total arg commod_cod longer return zero result httpsgithubcomropenscicomtradrissu ct_commodity_lookup longer return zero result pass cap input arg search_term httpsgithubcomropenscicomtradrissu comtradr pkg api chang elimin function ct_commodities_t ct_countries_t ad new function ct_update_databas ct_use_pretty_col ct_commodity_db_typ ct_register_token ct_get_reset_tim ct_get_remaining_hourly_queri renam function commodity_lookup ct_commodity_lookup country_lookup ct_country_lookup commod countri refer tabl save cach packag data access comtradr function necessari replac need function ct_commodities_t ct_countries_t reorder function argument within function ct_search chang function argument name ensur snake_cas use throughout packag ct_search return data frame oppos list minor chang ad vignett directori intro comtradr vignett api request throttl base rate limitshttpscomtradeunorgdatadocapilimit impos un comtrad ad function set valid api keytoken ct_register_token append api metadata return data frame attribut url api call datetim queri durat queri second ad packag level man page use nativ r errorswarn oppos nest api statu code return list import chang remov dplyr add magrittr purrr expand improv test coverag via testthathttpsgithubcomhadleytestthat bug fix issu relat typesafeti function commodity_lookup fix import purrr use purrrmap place sappli fix issu httpsgithubcomropenscicomtradrissu issu httpsgithubcomropenscicomtradrissu comtradr new featur commodity_lookup expand function accept multipl commod commod code either charact vector numer vector also ad argument return_char allow user specifi list output char vector output argument return_cod specifi output commod descript commod code minor improv add unit test via testthathttpsgithubcomhadleytestthat comtradr new featur releas cran test environ ubuntu lt travisci r maco high sierra travisci r cran winbuild r develop unstabl r r cmd check result error warn note check cran incom feasibl note maintain chri muir chrismuirrvagmailcom downstream depend revers import itnr revdepcheck result error warn note packag chang implement version remov unus depend method import setup platform set valu version r version system x_ darwin ui rstudio languag en collat en_usutf tz americanew_york date packag packag version date sourc comtradr cran dplyr cran ggplot cran httr cran jsonlit cran knitr cran magrittr cran purrr cran rmarkdown cran testthat cran check result packag packag version error warn note itnr error warn note output github_docu default html_document default readmemd gener readmermd pleas edit file r echo fals knitropts_chunksetcollaps true comment comtradr travisci build statushttpstravisciorgropenscicomtradrsvgbranchmasterhttpstravisciorgropenscicomtradr appveyor build statushttpsciappveyorcomapiprojectsstatusgithubropenscicomtradrbranchmastersvgtruehttpsciappveyorcomprojectropenscicomtradr codecovhttpscodecoviogithubropenscicomtradrbranchmastergraphsbadgesvghttpscodecoviogithubropenscicomtradr cran_status_badgehttpswwwrpkgorgbadgesversioncomtradrhttpscranrprojectorgpackagecomtradr httpsbadgesropensciorg_statussvghttpsgithubcomropenscionboardingissu cran rstudio mirror downloadshttpscranlogsrpkgorgbadgesgrandtotalcomtradrhttpswwwrpackagesiopackagecomtradr r packag interact un comtrad databasehttpscomtradeunorgdata public api un comtrad provid histor data weight valu specif good ship countri info found herehttpscomtradeunorg full api document found herehttpscomtradeunorgdatadocapi packag inspir r tutorialhttpscomtradeunorgdatadocapiexr post comtrad built use httrhttpscranrprojectorgpackagehttr jsonlitehttpscranrprojectorgpackagejsonlit ive also built shini app visual comtrad ship data that power packag app view herehttpschrismuirshinyappsiocomtrade_plot_shinyapp pleas reporthttpsgithubcomropenscicomtradrissu issu comment featur request pleas note project releas contributor code conductconductmd particip project agre abid term inform citat packag use citationcomtradr instal instal cran r evalfals installpackagescomtradr instal repo r evalfals installpackagesdevtool devtoolsinstall_githubropenscicomtradr exampl usag exampl return export china south korea unit state mexico year r librarycomtradr countri name pass api queri function must spell appear comtrad db use ct_country_lookup queri countri db return exact spell specif countri ct_country_lookupkorea sinc want south korea well use rep korea within api queri exampl ct_searchreport china partner crep korea usa mexico trade_direct export inspect return data strexampl exampl return export relat shrimp thailand countri year thru r librarycomtradr fetch shrimp relat commod code comtrad commod db vector code get pass api queri shrimp_cod ct_commodity_lookupshrimp return_cod true return_char true api queri exampl ct_searchreport thailand partner trade_direct export start_dat end_dat commod_cod shrimp_cod inspect output strexampl ropensci_footerhttpsropensciorgpublic_imagesropensci_footerpnghttpsropensciorg titl intro comtradr output rmarkdownhtml_vignett vignett vignetteindexentryintro comtradr vignetteengineknitrrmarkdown vignetteencodingutf r echo fals knitropts_chunksetcom collaps true figwidth figheight packag inform api wrapper un comtrad databasehttpscomtradeunorgdata featur intercountri trade data date back earli full api document found herehttpscomtradeunorgdatadocapi packag allow user interact api directli r featur function make queri import data instal load comtradr instal cran r eval fals installpackagescomtradr instal develop version github r eval fals devtoolsinstall_githubchrismuircomtradr load comtradr r librarycomtradr make api call let say want get data import unit state germani franc japan mexico year r echo fals v_data_ systemfileextdata vignette_data_rda packag comtradr fileexistsv_data_ stopintern vignett data set extdatavignette_data_rda found call fals loadv_data_ r eval fals q ct_searchreport usa partner cgermani franc japan mexico trade_direct import api call return tidi data frame r strq exampl show differ paramet option limit search rang shipment r eval fals q ct_searchreport usa partner cgermani franc japan mexico trade_direct import start_dat end_dat default return data yearli amount pass monthli arg freq return data monthli amount howev api limit monthli queri singl year r eval fals get monthli data singl year api max month per call q ct_searchreport usa partner cgermani franc japan mexico trade_direct import start_dat end_dat freq monthli get monthli data specif span month api max five month per call q ct_searchreport usa partner cgermani franc japan mexico trade_direct import start_dat end_dat freq monthli countri pass paramet report partner must spell appear comtrad countri refer tabl function ct_country_lookup allow us queri countri refer tabl r ct_country_lookupkorea report ct_country_lookupbolivia partner r eval fals q ct_searchreport rep korea partner bolivia plurin state trade_direct search trade relat specif commod say tomato queri comtrad commod refer tabl see differ commod descript avail tomato r ct_commodity_lookuptomato want search shipment data commod descript list simpli adjust paramet ct_commodity_lookup return code pass along ct_search r eval fals tomato_cod ct_commodity_lookuptomato return_cod true return_char true q ct_searchreport usa partner cgermani franc mexico trade_direct commod_cod tomato_cod hand want exclud juic sauc search pass vector relev code api call r eval fals q ct_searchreport usa partner cgermani franc mexico trade_direct commod_cod c api search metadata addit trade data api return object contain metadata attribut r url api call attributesqurl datetim api call attributesqtime_stamp total durat api call second attributesqreq_dur lookup function function ct_country_lookup ct_commodity_lookup abl take multipl search term input r ct_country_lookupcbelgium vietnam brazil report ct_commodity_lookupctomato trout return_char true ct_commodity_lookup return vector seen name list use paramet return_char r ct_commodity_lookupctomato trout return_char fals ct_commodity_lookup input search term return zero result paramet verbos set true warn print consol set verbos fals turn featur r ct_commodity_lookupctomato sldfkjkfdsklsd verbos true api rate limit comtrad api impos rate limit guest user premium user comtradr featur autom throttl api call ensur user stay within limit defin comtrad breakdown limit api doc detail found herehttpscomtradeunorgdatadocapiauthent without user token request per second request per hour valid user token request per second request per hour addit rate limit api impos limit paramet combin arg report partner queri date rang one three may use catchal input group three report partner date rang input maximum number input valu five date rang use start_dat end_dat must span five month five year one except rule arg freq monthli singl year pass start_dat end_dat api return monthli data year arg commod_cod use input maximum number input valu although alway valid input addit maximum number return record singl queri without token token number comtradr featur function work api rate limit token ct_register_token allow user set api token within packag environ ct_get_remaining_hourly_queri return number remain queri current hour ct_get_reset_tim return datetim current hourli time limit reset posixct object packag data comtradr ship differ packag data object function interact use packag data countrycommod refer tabl explain previous make api call comtradr often requir user queri countri refer tabl andor commod refer tabl done use function ct_country_lookup ct_commodity_lookup refer tabl gener un comtrad updat roughli year sinc theyr updat infrequ tabl save cach data object within comtradr packag referenc packag function need comtradr featur function ct_update_databas check comtrad websit updat either refer tabl updat found function download updat tabl save packag directori make avail current r session also print messag indic whether updat found like r eval fals ct_update_databas db date action requir updat found messag state refer tabl updat user may forc download refer tabl regardless whether updat exist use arg forc true within function ct_update_databas use event either refer tabl file delet remov packag directori case either refer tabl file found upon packag load subsequ comtradr function requir use refer tabl result error error messag prompt user run ct_update_databasesforc true addit comtrad api featur number differ commod refer tabl base differ trade data classif scheme detail see thishttpscomtradeunorgdatadocapidataavailabilityrequest page api doc comtradr ship commod tabl harmon system hs scheme user may download avail commod tabl specifi arg commodity_typ within function ct_update_databas eg ct_update_databasescommodity_typ sitc download commod tabl follow standard intern trade classif scheme replac commod tabl file one specifi see classif scheme commod tabl current file use ct_commodity_db_typ r ct_commodity_db_typ polish column header ct_pretty_col name vector column header valu provid option use column header polish humanfriendli return api function ct_search polish column header may use plot comtrad data use public tabl data access directli use datact_pretty_col also function appli polish header comtradr data frame ct_use_pretty_col quick demonstr r column header return function ct_search colnamesq r appli polish column header q ct_use_pretty_colsq print new column header colnamesq visual data collect use creat basic visual plot plot total valu usd chines export mexico south korea unit state year r echo fals v_data_ systemfileextdata vignette_data_rda packag comtradr fileexistsv_data_ stopintern vignett data set extdatavignette_data_rda found call fals loadv_data_ r eval fals comtrad api queri df ct_searchreport china partner crep korea usa mexico trade_direct export r warn fals messag fals libraryggplot appli polish col header df ct_use_pretty_colsdf creat plot ggplotdf aesyear trade valu usd color factorpartn countri shape factorpartn countri geom_points geom_lines scale_x_continuouslimit cmindfyear maxdfyear break seqintmindfyear maxdfyear scale_color_manualvalu corang blue red name destinationncountri scale_shape_discretenam destinationncountri labstitl total valu usd chines export year themeaxistextx element_textangl vjust hjust plot plot top eight destin countriesarea thai shrimp export weight kg r echo fals v_data_ systemfileextdata vignette_data_rda packag comtradr fileexistsv_data_ stopintern vignett data set extdatavignette_data_rda found call fals loadv_data_ r eval fals first collect commod code relat shrimp shrimp_cod ct_commodity_lookupshrimp return_cod true return_char true comtrad api queri df ct_searchreport thailand partner trade_direct export start_dat end_dat commod_cod shrimp_cod r warn fals messag fals libraryggplot librarydplyr appli polish col header df ct_use_pretty_colsdf creat countri specif total weight per year datafram plot plotdf df group_by_dot cpartner countri year summarisekg asnumericsumnet weight kg narm true as_data_fram get vector top destin countriesarea total weight ship across year subset plotdf includ observ relat countriesarea top plotdf group_bypartn countri summarisekg asnumericsumkg narm true top_n kg arrangedesckg partner countri plotdf plotdf filterpartn countri top creat plot yaxi fix across panel allow us id trend time within countryarea individu qplotyear kg data plotdf geom_linedata plotdfplotdfpartn countri nameswhichtableplotdfpartn countri xlimminplotdfyear maxplotdfyear labstitl weight kg thai shrimp export destin area themeaxistextx element_textangl vjust hjust axistext element_texts facet_wrapfactorpartn countri level top scale free nrow ncol titl intro comtradr output rmarkdownhtml_vignett vignett vignetteindexentryintro comtradr vignetteengineknitrrmarkdown vignetteencodingutf r echo fals knitropts_chunksetcom collaps true figwidth figheight packag inform api wrapper un comtrad databasehttpscomtradeunorgdata featur intercountri trade data date back earli full api document found herehttpscomtradeunorgdatadocapi packag allow user interact api directli r featur function make queri import data instal load comtradr instal cran r eval fals installpackagescomtradr instal develop version github r eval fals devtoolsinstall_githubchrismuircomtradr load comtradr r librarycomtradr make api call let say want get data import unit state germani franc japan mexico year r echo fals v_data_ systemfileextdata vignette_data_rda packag comtradr fileexistsv_data_ stopintern vignett data set extdatavignette_data_rda found call fals loadv_data_ r eval fals q ct_searchreport usa partner cgermani franc japan mexico trade_direct import api call return tidi data frame r strq exampl show differ paramet option limit search rang shipment r eval fals q ct_searchreport usa partner cgermani franc japan mexico trade_direct import start_dat end_dat default return data yearli amount pass monthli arg freq return data monthli amount howev api limit monthli queri singl year r eval fals get monthli data singl year api max month per call q ct_searchreport usa partner cgermani franc japan mexico trade_direct import start_dat end_dat freq monthli get monthli data specif span month api max five month per call q ct_searchreport usa partner cgermani franc japan mexico trade_direct import start_dat end_dat freq monthli countri pass paramet report partner must spell appear comtrad countri refer tabl function ct_country_lookup allow us queri countri refer tabl r ct_country_lookupkorea report ct_country_lookupbolivia partner r eval fals q ct_searchreport rep korea partner bolivia plurin state trade_direct search trade relat specif commod say tomato queri comtrad commod refer tabl see differ commod descript avail tomato r ct_commodity_lookuptomato want search shipment data commod descript list simpli adjust paramet ct_commodity_lookup return code pass along ct_search r eval fals tomato_cod ct_commodity_lookuptomato return_cod true return_char true q ct_searchreport usa partner cgermani franc mexico trade_direct commod_cod tomato_cod hand want exclud juic sauc search pass vector relev code api call r eval fals q ct_searchreport usa partner cgermani franc mexico trade_direct commod_cod c api search metadata addit trade data api return object contain metadata attribut r url api call attributesqurl datetim api call attributesqtime_stamp total durat api call second attributesqreq_dur lookup function function ct_country_lookup ct_commodity_lookup abl take multipl search term input r ct_country_lookupcbelgium vietnam brazil report ct_commodity_lookupctomato trout return_char true ct_commodity_lookup return vector seen name list use paramet return_char r ct_commodity_lookupctomato trout return_char fals ct_commodity_lookup input search term return zero result paramet verbos set true warn print consol set verbos fals turn featur r ct_commodity_lookupctomato sldfkjkfdsklsd verbos true api rate limit comtrad api impos rate limit guest user premium user comtradr featur autom throttl api call ensur user stay within limit defin comtrad breakdown limit api doc detail found herehttpscomtradeunorgdatadocapiauthent without user token request per second request per hour valid user token request per second request per hour addit rate limit api impos limit paramet combin arg report partner queri date rang one three may use catchal input group three report partner date rang input maximum number input valu five date rang use start_dat end_dat must span five month five year one except rule arg freq monthli singl year pass start_dat end_dat api return monthli data year arg commod_cod use input maximum number input valu although alway valid input addit maximum number return record singl queri without token token number comtradr featur function work api rate limit token ct_register_token allow user set api token within packag environ ct_get_remaining_hourly_queri return number remain queri current hour ct_get_reset_tim return datetim current hourli time limit reset posixct object packag data comtradr ship differ packag data object function interact use packag data countrycommod refer tabl explain previous make api call comtradr often requir user queri countri refer tabl andor commod refer tabl done use function ct_country_lookup ct_commodity_lookup refer tabl gener un comtrad updat roughli year sinc theyr updat infrequ tabl save cach data object within comtradr packag referenc packag function need comtradr featur function ct_update_databas check comtrad websit updat either refer tabl updat found function download updat tabl save packag directori make avail current r session also print messag indic whether updat found like r eval fals ct_update_databas db date action requir updat found messag state refer tabl updat user may forc download refer tabl regardless whether updat exist use arg forc true within function ct_update_databas use event either refer tabl file delet remov packag directori case either refer tabl file found upon packag load subsequ comtradr function requir use refer tabl result error error messag prompt user run ct_update_databasesforc true addit comtrad api featur number differ commod refer tabl base differ trade data classif scheme detail see thishttpscomtradeunorgdatadocapidataavailabilityrequest page api doc comtradr ship commod tabl harmon system hs scheme user may download avail commod tabl specifi arg commodity_typ within function ct_update_databas eg ct_update_databasescommodity_typ sitc download commod tabl follow standard intern trade classif scheme replac commod tabl file one specifi see classif scheme commod tabl current file use ct_commodity_db_typ r ct_commodity_db_typ polish column header ct_pretty_col name vector column header valu provid option use column header polish humanfriendli return api function ct_search polish column header may use plot comtrad data use public tabl data access directli use datact_pretty_col also function appli polish header comtradr data frame ct_use_pretty_col quick demonstr r column header return function ct_search colnamesq r appli polish column header q ct_use_pretty_colsq print new column header colnamesq visual data collect use creat basic visual plot plot total valu usd chines export mexico south korea unit state year r echo fals v_data_ systemfileextdata vignette_data_rda packag comtradr fileexistsv_data_ stopintern vignett data set extdatavignette_data_rda found call fals loadv_data_ r eval fals comtrad api queri df ct_searchreport china partner crep korea usa mexico trade_direct export r warn fals messag fals libraryggplot appli polish col header df ct_use_pretty_colsdf creat plot ggplotdf aesyear trade valu usd color factorpartn countri shape factorpartn countri geom_points geom_lines scale_x_continuouslimit cmindfyear maxdfyear break seqintmindfyear maxdfyear scale_color_manualvalu corang blue red name destinationncountri scale_shape_discretenam destinationncountri labstitl total valu usd chines export year themeaxistextx element_textangl vjust hjust plot plot top eight destin countriesarea thai shrimp export weight kg r echo fals v_data_ systemfileextdata vignette_data_rda packag comtradr fileexistsv_data_ stopintern vignett data set extdatavignette_data_rda found call fals loadv_data_ r eval fals first collect commod code relat shrimp shrimp_cod ct_commodity_lookupshrimp return_cod true return_char true comtrad api queri df ct_searchreport thailand partner trade_direct export start_dat end_dat commod_cod shrimp_cod r warn fals messag fals libraryggplot librarydplyr appli polish col header df ct_use_pretty_colsdf creat countri specif total weight per year datafram plot plotdf df group_by_dot cpartner countri year summarisekg asnumericsumnet weight kg narm true as_data_fram get vector top destin countriesarea total weight ship across year subset plotdf includ observ relat countriesarea top plotdf group_bypartn countri summarisekg asnumericsumkg narm true top_n kg arrangedesckg partner countri plotdf plotdf filterpartn countri top creat plot yaxi fix across panel allow us id trend time within countryarea individu qplotyear kg data plotdf geom_linedata plotdfplotdfpartn countri nameswhichtableplotdfpartn countri xlimminplotdfyear maxplotdfyear labstitl weight kg thai shrimp export destin area themeaxistextx element_textangl vjust hjust axistext element_texts facet_wrapfactorpartn countri level top scale free nrow ncol gener roxygen edit hand pleas edit document rct_searchr namect_search aliasct_search titleget un comtrad data usag ct_search report partner trade_direct call import export re_import re_export freq cannual monthli start_dat end_dat commod_cod total max_rec null type cgood servic url httpscomtradeunorgapiget argument itemreporterscountri interest charact vector either vector countri name repres countri itempartnerscountri interact report countri charact vector either vector countri name repres countri itemtrade_directionind trade direct focu charact vector must either vector contain combin follow import export re_import re_export default valu itemfreqtim frequenc return result charact string must either annual monthli default valu annual itemstart_datestart date time period default valu see detail info valid input format use input itemend_dateend date time period default valu see detail info valid input format use input itemcommod_codescharact vector commod code total valid commod code input restrict queri look trade relat commod total input return trade indic report countri partner countri default valu total itemmax_recmax number record return api call integ max_rec set null valu determin whether api token regist api cap without token cap valid token default valu null detail regist valid token see codelinkct_register_token itemtypetyp trade charact string must either good servic default valu good itemurlbas comtrad url string charact string default valu httpscomtradeunorgapiget mot chang unless comtrad chang endpoint url valu data frame comtrad ship data descript make queri un comtrad api data return tidi data frame comtrad db host unit nation hous countrylevel ship data full api doc found urlhttpscomtradeunorgdatadocapi detail basic rate limit restrict list detail regist valid token see codelinkct_register_token api doc rate limit see urlhttpscomtradeunorgdatadocapilimit item item without authent token request per second request per hour per ip address item valid authent token request per second request per hour per ip address authent user addit rate limit api impos limit paramet combin list item item param report partner queri date rang dictat two param start_dat end_dat one three may use catchal input item group three report partner date rang input maximum number input valu five date rang use start_dat end_dat must span five month five year one except rule arg freq monthli singl year pass start_dat end_dat api return monthli data year item param commod_cod use input maximum number input valu although alway valid input function return object metadata relat api call access via codelinkattribut metadata access item item url url api call item time_stamp datetim api call item req_dur total durat api call second arg codestart_d codeend_d input date oppos catchal input valid input format depend input pass arg codefreq codefreq annual codestart_d codeend_d must either string w format yyyi yyyymmdd year integ would valid codefreq monhtli codestart_d codeend_d must string format yyyymm yyyymmdd would valid exampl dontrun exampl api call number export china south korea unit state mexico year ex_ ct_searchreport china partner crep korea usa mexico trade_direct export nrowex_ exampl api call number shipment relat shrimp canada countri perform shrimp queri shrimp_cod ct_commodity_lookupshrimp return_cod true return_char true make api call ex_ ct_searchreport canada partner trade_direct start_dat end_dat commod_cod shrimp_cod nrowex_ access metadata attributesex_url attributesex_time_stamp attributesex_req_dur gener roxygen edit hand pleas edit document rct_use_pretty_colsr namect_use_pretty_col aliasct_use_pretty_col titleus pretti column header usag ct_use_pretty_colsdf argument itemdfdata frame comtrad api data frame return function codelinkct_search valu data frame input df polish column header descript transform column header return data function codelinkct_search polish set column header intend use plot public tabl etc exampl dontrun pull api data df ct_searchgermani canada use polish column name df ct_use_pretty_colsdf gener roxygen edit hand pleas edit document rcomtradrr doctypepackag namecomtradr aliascomtradr titleinterfac unit nation comtrad api descript interfac extract data unit nation comtrad api comtrad provid countri level ship data varieti commod function allow easi api queri data return tidi data frame sectionpackag vignett item item urldoccomtradrvignettehtml sectiondocument comtrad api item item main comtrad site urlhttpscomtradeunorg item comtrad data queri web gui urlhttpscomtradeunorgdata item full api document urlhttpscomtradeunorgdatadocapi sectiondevelop link item item urlhttpsgithubcomchrismuircomtradr item report bug urlhttpsgithubcomchrismuircomtradrissu sectioncodecomtradr featur follow function item item codelinkct_commodity_db_typ item codelinkct_commodity_lookup item codelinkct_country_lookup item codelinkct_get_remaining_hourly_queri item codelinkct_get_reset_tim item codelinkct_register_token item codelinkct_search item codelinkct_update_databas item codelinkct_use_pretty_col gener roxygen edit hand pleas edit document rrate_limitr namect_register_token aliasct_register_token titlecomtradr set api token usag ct_register_tokentoken argument itemtokenchar string valid api token valu set comtradr api token updat rate limit descript function set api token un comtrad api detail token rate limit found urlhttpscomtradeunorgdatadocapiauthent exampl dontrun ct_register_tokensome_valid_token_str gener roxygen edit hand pleas edit document rrate_limitr namect_get_remaining_hourly_queri aliasct_get_remaining_hourly_queri titlecomtradr rate limit check usag ct_get_remaining_hourly_queri valu numer valu number current queri left hour descript get remain number queri left current hour exampl ct_get_remaining_hourly_queri gener roxygen edit hand pleas edit document rct_commodity_lookupr namect_commodity_lookup aliasct_commodity_lookup titleun comtrad commod databas queri usag ct_commodity_lookup search_term return_cod fals return_char fals verbos true ignorecas true argument itemsearch_termscommod name commod code char numer vector itemreturn_codelog set fals function return set commod descript along commod code singl string match found set true return commod code default valu fals itemreturn_charlog set fals function return match name list set true return charact vector default valu fals itemverboselog set true warn messag print consol element input search_term return match messag indic element return data default true itemignorecaselog pass along arg ignorecas within codelinkgrepl default valu true itemaddit arg pass along codelinkgrepl valu list charact vector commod descript andor commod code match element search_term descript comtrad api requir search specif commod done use commod code helper function queri comtrad commod databas take input vector commod commod code output list vector commod descript code associ input search_term use un comtrad api full api doc found urlhttpscomtradeunorgdatadocapi detail function use regular express regex find match within commod db mean treat match commod descript contain input search term use regex within r see great tutori gloria li jenni bryan urlhttpstatcomblock_regularexpressionhtml exampl look commod descript relat halibut ct_commodity_lookuphalibut return_cod fals return_char fals verbos true look commod code relat shrimp ct_commodity_lookupshrimp return_cod true return_char fals verbos true seealso codelinkgrepl gener roxygen edit hand pleas edit document rrate_limitr namect_get_reset_tim aliasct_get_reset_tim titlecomtradr rate limit time check usag ct_get_reset_timeset null argument itemsetlog codetru current reset time codenul set reset time one hour current codesystim valu date time hourli queri limit reset return posixct object see codelinkdatetimeclass descript get time hourli limit reset exampl ct_get_reset_tim get minut remain limit reset numer valu asdoublect_get_reset_tim systim gener roxygen edit hand pleas edit document rct_update_databasesr namect_update_databas aliasct_update_databas titlecheck updat countrycommod databas usag ct_update_databas forc fals verbos true commodity_typ ch hs hs hs hs hs hs sitc sitcrev sitcrev sitcrev sitcrev bec eb commodity_url null reporter_url null partner_url null argument itemforcelog true countri commod databas download regardless statu db file default valu fals itemverboselog true updat statu messag print consol default valu true itemcommodity_typetrad data classif scheme use see detail list valid input default valu hs default type commod databas file upon instal codecomtradr pleas note valu pass arg doesnt match valu variabl type current commod db function replac current commod db type specifi arg dont intend chang type current commod db input arg requir see type current commod db use codelinkct_commodity_db_typ itemcommodity_urldefault valu null otherwis base url comtrad json data directori necessari comtrad site chang httpscomtradeunorgdatacach partial url string commod extens append creat valid url commod extens chosen base input arg codecommodity_typ itemreporter_urldefault valu null otherwis url char string point report area json dataset comtrad websit necessari comtrad site chang urlhttpscomtradeunorgdatacachereporterareasjson itempartner_urldefault valu null otherwis url char string point report area json dataset comtrad websit necessari comtrad site chang urlhttpscomtradeunorgdatacachepartnerareasjson valu updat databas commod countri descript use comtrad api requir access comtrad countri databas commod databas codecomtradr packag keep db save data frame packag directori comtrad make updat db infrequ roughli per year detail function check see comtrad made updat either databas updat found download updat db save codecomtradr packag directori updat db use within current r session default arg codecommodity_typ codeh list valid input brief descript inform type see urlhttpscomtradeunorgdatadocapidataavailabilityrequest item item codeh harmon system hs report item codeh hs item codeh hs item codeh hs item codeh hs item codeh hs item codeh hs item codesitc standard intern trade classif sitc report item codesitcrev sitc revis item codesitcrev sitc revis item codesitcrev sitc revis item codesitcrev sitc revis item codebec broad econom categori item codeeb extend balanc payment servic classif exampl dontrun ct_update_databas gener roxygen edit hand pleas edit document rct_commodity_db_typ namect_commodity_db_typ aliasct_commodity_db_typ titleget current commod databas type usag ct_commodity_db_typ valu charact vector type current commod databas descript return type current commod databas use codecomtradr complet list differ commod db type see detail detail list commod databas type brief descript inform type see urlhttpscomtradeunorgdatadocapidataavailabilityrequest item item codeh harmon system hs report item codeh hs item codeh hs item codeh hs item codeh hs item codeh hs item codesitc standard intern trade classif sitc report item codesitcrev sitc revis item codesitcrev sitc revis item codesitcrev sitc revis item codesitcrev sitc revis item codebec broad econom categori item codeeb extend balanc payment servic classif exampl ct_commodity_db_typ gener roxygen edit hand pleas edit document rcomtradrr doctypedata namect_pretty_col aliasct_pretty_col titlepretti column header comtrad api data format name vector polish column header name machineread column header valu element meant treat keyvalu pair function codelinkct_search return data machineread column header default descript name vector polish column header intend use plot public tabl etc exampl datact_pretty_col gener roxygen edit hand pleas edit document rct_country_lookupr namect_country_lookup aliasct_country_lookup titleun comtrad countri databas queri usag ct_country_lookup search_term type creport partner ignorecas true argument itemsearch_termschar vector countri name itemtypestr countri list use search valid input report partner itemignorecaselog pass along arg ignorecas within codelinkgrepl default valu true itemaddit arg pass along codelinkgrepl valu charact vector countri name complet partial match input countri name descript countri name pass comtrad api must precis spellingcapit helper function queri countri namesspel use comtrad take input vector countri name output countri name contain input string use regex via base function grepl use un comtrad api full api doc found urlhttpscomtradeunorgdatadocapi detail function use regular express regex find match within countri db mean treat match countri string contain input search term use regex within r see great tutori gloria li jenni bryan urlhttpstatcomblock_regularexpressionhtml exampl look report contain term korea vietnam ct_country_lookupckorea vietnam report seealso codelinkgrepl