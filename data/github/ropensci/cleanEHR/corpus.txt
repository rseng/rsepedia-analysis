build statushttpstravisciorgropenscicleanehrsvgbranchmasterhttpstravisciorgropenscicleanehr codecovhttpscodecovioghropenscicleanehrbranchmastergraphbadgesvghttpscodecovioghropenscicleanehr aurhttpsimgshieldsioaurlicenseyaourtsvg cran_status_badgehttpwwwrpkgorgbadgesversioncleanehrhttpscranrprojectorgpackagecleanehr downloadshttpcranlogsrpkgorgbadgescleanehrcolorbrightgreenhttpwwwrpkgorgpkgcleanehr doihttpszenodoorgbadgesvghttpszenodoorgbadgelatestdoi httpsbadgesropensciorg_statussvghttpsgithubcomropenscionboardingissu cleanehr electron health care record ehr data clean process platform work critic care health informat collabor data set purpos project enabl research answer clinic question import patient normal difficult data unstandardis silo inaccess sinc data critic care unit cambridg guyskingsst thoma imperi oxford univers colleg london extract store secur standardis format data crucial need healthcar profession deliveri continu care administr audit plan servic improv academ industri research translat scientif progress patient benefit process cchic improv patient outcom reduc cost care acceler pace translat health research physic databas held ucl idhshttpwwwuclacukisditforslmsserviceshandlingsensdatatechsoln within inform servic divis univers colleg london ucl ucl manag ensur databas surround govern structur appropri hold identifi sensit nh data safe compliant nh inform govern toolkit level oper iso safe alreadi hold identifi sensit nh data secondari purpos critic care hic manag group maintain oversight point contact research wish access data secur put place ensur safeti resourc inevit creat challeng research therefor creat three side tool make cchic _research ready_ share code librari anonymis develop data set virtual machin simul work within safe request access anonymis toy dataset herehttpsformjotformeucom requir packag r xml datat yaml pander rcpp method instal r packag cran get last stabl version installpackagescleanehr github instal latest develop version installpackagesdevtool devtoolsinstall_githubcchiccleanehr vignett introduct cchic critic care data herehttpsdocsropensciorgcleanehrarticlescchic_overviewhtml data clean wrangl cleanehr herehttpsdocsropensciorgcleanehrarticlesdata_cleanhtml contribut cleanehr packag current develop wish find softwar tool use research project question code data pleas rais issu ticket github contact us via email sshiuclacuk cleanehr open sourc commun project also welcom contribut kind would like make cleanehr platform collabor critic care data analysi idea comment pleas feel free rais issu ticket herehttpsgithubcomropenscicleanehrissu would also encourag everyon integr code cleanehr repositori benefit entir commun pleas feel free contact us wish contribut code ropensci_footerhttpsropensciorgpublic_imagesropensci_footerpnghttpsropensciorg titl critic care data process tool tag critic care electron health record data manipul data pipelin data clean anonymis author name sinan shi orcid affili name david pérezsuárez orcid affili name steve harri orcid affili name niall maccallum orcid affili name david brealey orcid affili name mervyn singer orcid affili name jame hetherington orcid affili affili name research softwar develop group research servic univers colleg london index name univers colleg london hospit index date decemb bibliographi paperbib summari cleanehr cleanehr data clean wrangl platform work critic care health informat collabor cchic databas cchic collect gather high resolut longitudin patient record critic care unit cambridg guyskingsst thoma imperi oxford ucl hospit increas adopt high resolut longitudin ehr creat novel opportun research clinician data scientist access larg enrich patient databas icnarc mimic purpos cleanehr enabl research answer clinic question import patient cleanehr solut address variou data reliabl access problem well provid platform enabl data manipul transform reduct clean valid friendli user interfac empow nonprogramm conduct basic data analysi simpli write humanread configur file high resolut longitudin ehr cchic cchic databas total collect admiss uniqu patient contain million data point mean data point per patient recruit patient age rang year old physiolog laboratori drug nurs inform longitudin data record patient stay icu full list longitudin data collect cchic list list cchic longitudin data fieldsgraphitem_ref_timepng select data field admissiongraphepisode_graphpdf data clean wrangl data kind though provid vast inform often face two main issu low data qualiti b low access due complex propos workflow incorpor cleanehr packag address issu highlight workflow includ follow tabl structur cctabl data manipul configur file research without technic knowledg select clean data data clean includ variou filter data interpol imput function detail descript function exampl pleas see manual vignett cleanehr cleanehr exampl filter abnorm heart rate valu rangegraphrange_filterpng refer titl data qualiti report nep r ccdnepisod np r maxccdinfotbpid narmtru site r uniqueccdinfotbsite_id ssna admt r minccdinfotbt_admiss narmtru disct r maxccdinfotbt_discharg narmtru dbupdat r maxccdinfotbparse_tim fulldb r dbfull r echofals warningfals itemd ch_rate bp_m_a bp_sys_a lactate_abg bilirubin fluid_balance_h pao_abg newconfig functionitem conf list item confstnamecodei list conf cctb createcctableccd confnewconfigitemd freqtorigin suppresswarningslibrarypand panderoptionsdigit panderoptionstablesplitt inf demg sqldemographictableccd data summari r echofals dp totaldatapointccd np maxccdinfotbpid narmtru databas contain r ccdnepisod episod data r lengthssna site base nh number pa number identifi r np uniqu patient among earliest admiss r minccdinfotbt_admiss narmtru latest discharg time r maxccdinfotbt_discharg narmtru r dp total data point found current databas make averag r rounddpnp per uniqu patient site refer r echofals panderasdataframesiteinfo stylermarkdown origin xml file pars inform r echofals resultsasi fs filesummaryccd panderasdataframef cfile number episod site withfals r figwidth figheight echofals xmlfiledurationplotccd r figwidth figheight echofals xmlsitedurationplotccd newpag r echofals resultsasi tabledemg csex ethnic loca di hdi complet demograph data complet r echofals warningfals resultsasi demographicdatacompletenessdemg sampl period timewis data section show complet key timewis data eg physiolog data complet data measur sampl period sampl period p defin ratio total admiss hour number valid hour data found p fractd r echofals warningfals resultsasi sampleratedcctb newpag data distribut demograph r echofals resultsasi warningfals demgdistributiondemg chcm apache_scor physiolog drug r echofals resultsasi warningfals physiodistributioncctb itemd titl introduct cchic critic care data author david perez suarez sinan shi date r sysdat output rmarkdownhtml_vignett vignett vignetteengineknitrrmarkdown vignetteindexentryintroduct cchic critic care date usepackageutfinputenc cchic data strongli impact design cleanehr complex heterogen high resolut longitudin data trend ehr analysi take advantag ever sophist statist techniqu grow comput capabl cchic repres exampl databas kind record field includ timevari field patient stay intens care unit across five nh trust england record variabl includ patient demograph time admiss discharg surviv statu diagnosi physiolog laboratori nurs drug latest databas contain admiss million data point k per patient anonymis data subset obtain herehttpsformjotformeucomdrstevokcchicenduserlicensecleanehr select number research get access identifi data ucl idhshttpwwwuclacukisditforslmsserviceshandlingsensdatatechsoln episod icu stay timelin introduc concept episod fundament entiti ehr compris data record icu stay episod also contain demograph inform patient ward transfer origin destin within hospit diagnosi inform allow us link episod data singl patient across entir multicentr databas key date time record follow img srccchic_timelinepng width height r messagefals warningfals librarycleanehr datasample_ccd extract nonlongitudin data demograph time surviv statu diagnosi dt ccd_demographic_tableccd dtypetru ccd_demographic_t function return tabl nontimevari field alongsid sever deriv field field directli record origin data row tabl uniqu admiss everi column nontimevari data field pid uniqu patient id deriv nh number pa number age date birth unit admiss time spell see spell r printdt data miss caus mani reason understand larg databas data qualiti vari anonymis dataset data miss due secur reason miss data either null na depend field data type demograph data everi patient england uniqu nh number pa patient admiss system number use identifi uniqu patient demograph inform also found cchic dataset age sex gp code postcod demograph data remov pseudonimis modifi anonymis dataset protect patient privaci spell ward transfer within beyond icu count differ episod respect research one may interest look sick develop treatment histori beyond icu stay spell includ number episod uniqu patient occur user defin period one link episod spell id r headccd_unique_spellccd durat cepisode_id spell diagnosi data instead use free text adopt icnarc diagnosishttpswwwicnarcorgourauditauditscmpresourcesicmicnarccodingmethod code system record diagnosi full icnarc code five digit number separ dot left right digit repres higher categori diagnosi due privaci concern anonysmis dataset last two digit remov one may use function icnarcdiagnosi look diagnosi code r icnarcdiagnosi icnarcdiagnosi icnarcdiagnosi longitudin data cchic measur longitudin data full list longitudin data shown img srcitem_refpng width height also easili plot data singl select admiss r figwidth figheight outwidthpx resultshid messagefals warningfals plot_episodeccdepisod ch_rate bilirubin fluid_balance_d titl data clean wrangl cleanehr author david perez suarez sinan shi date r sysdat output rmarkdownhtml_vignett toc true toc_depth vignett vignetteengineknitrrmarkdown vignetteindexentrydata clean wrangl cleanehr usepackageutfinputenc prepar datatablehttpscranrprojectorgpackagedatat packag backbon cleanehr packag find link use inform tutori familiar datat load data r librarycleanehr datasample_ccd inspect individu episod field cover patient demograph physiolog laboratori medic inform field label nhic code short name function lookupitem look field need lookupitem function case insensit allow fuzzi search search heart rate lookupitemsheart fuzzi search nhiccod shortnam longnam unit datatyp nihr_hic_icu_ h_rate heart rate bpm numer nihr_hic_icu_ h_rhythm heart rhythm na list nonlongitudin data ccd_demographic_t gener datat contain nonlongitudin variabl demonstr work subset data r figwidth figheight outwidthpx resultshid messagefals warningfals contain field ie nonlongitudin tb ccd_demographic_tableccd filter dead patient patient dead dataset tb tbdisd subset variabl want arsd advanc respiratori support day apache_prob apach ii probabl tb tb csex arsd apache_prob withfals tb tbisnaapache_prob plot libraryggplot ggplottb aesxapache_prob yarsd colorsex geom_point longitudin data longitudin tabl structur cctabl deal longitudin data need first transform tabl format cleanehr provid refclass cctabl sever key compon cctabl structur torigin ccrecord dataset convert tabl format row data point column field pivot time site eipisode_id tclean structur like torigin valu modifi clean process filter filter_rang filter_categori filter_nodata filter_missing imput fill miss data creat cctabl first need prepar simpl yaml configur file yaml human freindli data serial standard see yamlhttpyamlorg first level item cchic code see lookupitem suggest user write short name long name dataitem avoid confus though name taken account process select three item heart rate longitudin systol arteri blood pressur longitudin sex nonlongitudin r prepar yaml configur file like write follow text yaml file conf nihr_hic_icu_ shortnam hrate nihr_hic_icu_ shortnam bp_sys_a dataitem systol arteri blood pressur art bpsystol arteri blood pressur nihr_hic_icu_ shortnam sex libraryyaml conf yamlloadconf r conf full path yaml configur tb create_cctableccd conf freq printtbtorigin tabl tabl find follow column time number hour unit admiss sinc set freq cadenc row alway hour site episode_id combin two column give uniqu admiss field three select field extra field depend variabl choos extra inform given get mean heart rate patient r tbtclean meannihr_hic_icu_ narmtru bycsit episode_id data clean cctabl numer rang filter numer rang filter appli variabl envisag three differ case numer rang valu imposs eg neg heart rate possibl unlik eg heart rate within normal rang filter label scenario use red amber green respect definit rang configur user base judgement purpos research note red green next rang must subset previou rang follow section would like appli rang filter heart rate modifi previou yaml configur file r conf nihr_hic_icu_ shortnam h_rate dataitem heart rate rang label red amber green appli drop_entri nihr_hic_icu_ shortnam bp_sys_a dataitem systol arteri blood pressur art bpsystol arteri blood pressur nihr_hic_icu_ shortnam sex categori male f femal male f femal conf yamlloadconf r tb create_cctableccd conf freq tbfilter_rangeamb chose entri amber tbapply_filt appli filter clean tabl let see effect clean data tclean r figwidth figheight outwidthpx resultshid messagefals warningfals cptb rbindcbindtbtorigin dataorigin cbindtbtclean dataclean ggplotcptb aesxtim ynihr_hic_icu_ colordata geom_points facet_wrapepisode_id scalesfree_x case chang filter rang amber green r tbreset reset filter first tbfilter_rangegreen tbapply_filt r figwidth figheight outwidthpx resultshid messagefals warningfals cptb rbindcbindtbtorigin dataorigin cbindtbtclean dataclean ggplotcptb aesxtim ynihr_hic_icu_ colordata geom_points facet_wrapepisode_id scalesfree_x categor data filter purpos categor data filter remov unexpect categor data extend previou configur file r conf nihr_hic_icu_ shortnam h_rate dataitem heart rate nihr_hic_icu_ shortnam bp_sys_a dataitem systol arteri blood pressur art bpsystol arteri blood pressur nihr_hic_icu_ shortnam sex categori level male f femal male f femal appli drop_entri conf yamlloadconf tri modifi origin data tbtoriginnihr_hic_icu_ error tbreload_confconf chang configur file tbfilter_categori tbapply_filt one error gender introduc sex field filter process error entri substitut na r uniquetbtoriginnihr_hic_icu_ uniquetbtcleannihr_hic_icu_ missing filter case wish exclud episod data scarc three compon missing filter follow exampl arbitrarili name filter daili gave hour interv accept rate say hour interv heart rate miss rate higher exclud entir episod note unit label daili number row instead hour repres hour cadenc cctabl hour r conf nihr_hic_icu_ shortnam h_rate dataitem heart rate missing label daili accept_d daili appli drop_episod nihr_hic_icu_ shortnam bp_sys_a dataitem systol arteri blood pressur art bpsystol arteri blood pressur nihr_hic_icu_ shortnam sex conf yamlloadconf tbreload_confconf chang configur file tbfilter_missing tbapply_filt episod origin data tabl uniquepastetbtoriginsit tbtoriginepisode_id episod clean data tabl uniquepastetbtcleansit tbtcleanepisode_id nodata filter similarli setup data filter follow mean drop entir episod hear rate data found yaml nihr_hic_icu_ shortnam h_rate dataitem heart rate no_data appli drop_episod nihr_hic_icu_ shortnam bp_sys_a dataitem systol arteri blood pressur art bpsystol arteri blood pressur nihr_hic_icu_ shortnam sex run filter togeth wrap put state filter configur togeth yaml file run filter togeth r conf nihr_hic_icu_ shortnam h_rate dataitem heart rate rang label red amber green appli drop_entri missing label daili accept_d daili appli drop_episod nodata appli drop_episod nihr_hic_icu_ shortnam bp_sys_a dataitem systol arteri blood pressur art bpsystol arteri blood pressur nihr_hic_icu_ shortnam sex categori level male f femal male f femal appli drop_entri conf yamlloadconf method tb create_cctableccd conf freq tbfilter_rangeamb tbfilter_missing tbfilter_nodata tbfilter_categori tbapply_filt tbreset reset method tbclean imput provid imput interpol miss data miss valu interpol base nearbi valu specifi lead lag argument lead suggest number previou valu lag suggest number later valu correspond time relat freq set cctabl eg lead mean previou hour freq one also set fun determin interpol function imput step usual carri filter otherwis imput take valu rang account one need alway care imput data make best tradeoff use correct interpol method carri wise base characterist variabl good overview deal miss data found salagodo et al httpslinkspringercomcontentpdff_pdf sure characterist variabl would suggest keep window size small use median interpol function r initialis simul ccrecord hr crep repna rep na na rep repna na na rep na na na rep hr hr runiflengthhr ad nois need data dataframetimeasnumericseqhr itemdhr rec ccrecordnewepisodelistnihr_hic_icu_data prepar plot function librarydatat plot_imput function cptb datatableepisode_idasintegertbtoriginepisode_id timetbtorigintim origintbtoriginnihr_hic_icu_ cleantbtcleannihr_hic_icu_ ggplotcptb aesxtim geom_points shape aesyorigin colour geom_points aesyclean geom_lineaesyclean scale_x_continuousminor_break seqlengthhr themepanelgridminor element_linecolourgrey size panelgridmajor element_linecolourgrey size exampl median interpol window r figwidth figheight outwidthpx resultshid messagefals warningfals mock configur yaml conf nihr_hic_icu_ shortnam h_rate dataitem heart rate missing imput lead previou valu lag later valu fun median miss valu fill median previou later valu nodata appli drop_episod conf yamlloadconf tb create_cctablerec conf freq tbimput plot_imput exampl increas window size increas window size fill data r figwidth figheight outwidthpx resultshid messagefals warningfals conf nihr_hic_icu_ shortnam h_rate dataitem heart rate missing imput lead lag fun median nodata appli drop_episod rec ccrecordnewepisodelistnihr_hic_icu_data conf yamlloadconf tb create_cctablerec conf freq tbimput plot_imput exampl use mean interpol function r figwidth figheight outwidthpx resultshid messagefals warningfals conf nihr_hic_icu_ shortnam h_rate dataitem heart rate missing imput lead lag fun mean nodata appli drop_episod rec ccrecordnewepisodelistnihr_hic_icu_data conf yamlloadconf tb create_cctablerec conf freq tbimput plot_imput advanc exampl use selfdefin function r figwidth figheight outwidthpx resultshid messagefals warningfals conf nihr_hic_icu_ shortnam h_rate dataitem heart rate missing imput lead lag fun myfun nodata appli drop_episod defin interpol function use piecewis polynomi interpol spline demonstr purpos myfun functionx returnsplinefunxceilinglengthx conf yamlloadconf tb create_cctablerec conf freq tbimput plot_imput gener roxygen edit hand pleas edit document rdatar doctypedata namedatachecklist aliasdatachecklist titlethi refer tabl nhic data item descript refer tabl nhic data item author sinan shi emailsshiuclacuk keyworddata gener roxygen edit hand pleas edit document rccrecordr doctypemethod nameccrecordccrecordmethod aliasccrecordccrecordmethod titlecombin two ccrecord object usag smethodccrecordccrecord e argument itemeccrecordclass itemeccrecordclass valu ccrecordclass descript combin two ccrecord object gener roxygen edit hand pleas edit document rcchic_xmlr namexmldata aliasxmldata titleconvert xml file ccrecord usag xmldatafil selectepisod null quiet true xml null file_origin na parse_tim systim argument itemfilecharact string path xml file itemselectepisodeinteg vector load select number episod null default load episod file itemquietlog switch onoff progress bar itemxmlxml object usual need itemfile_origincharact string xml file name file name extract automat argument xml null itemparse_timeposixct default time execut function valu ccrecordclass descript convert xml file ccrecord detail see ccrecordclass gener roxygen edit hand pleas edit document rccrecordr doctypemethod nameccrecordlistmethod aliasccrecordlistmethod titlead list ccepisod ccrecord usag smethodccrecordlist e argument itemeccrecord itemea list ccepisod object valu ccrecord descript ad list one multipl ccepisod object ccrecord object inform tabl infotb updat automat effici way add multipl ccepisod object gener roxygen edit hand pleas edit document rdatar doctypedata nameccd aliasccd titlesynthet exampl dataset descript dataset data strucutr cchic data though data synthet keyworddata gener roxygen edit hand pleas edit document rstdidr namestnamecod aliasstnamecod titleconvert short name nhic code usag stnamecodestnam argument itemstnamecharact short name data item h_rate valu nihc code charact nihr_hic_icu_ descript convert short name nhic code gener roxygen edit hand pleas edit document rstdidr nameisdemograph aliasisdemograph titlecheck item nhic code short name belong demograph categori usag isdemographicitem_nam argument itemitem_namecharact nhic code short name valu logic descript check item nhic code short name belong demograph categori gener roxygen edit hand pleas edit document rcctabler namecctable_apply_filt aliascctable_apply_filt titleappli setup filter argument itemwarningslog valu indic less messag default valu true descript filter appli process data store tclean note run filter function apply_filt necessari function effect tclean filter ran prior filter decid preserv remov particular entri episod exampl dontrun tb create_cctableccd conf tbrange_filt tbapply_filt appli rang filter ragardless conf gener roxygen edit hand pleas edit document rccrecordr doctypemethod nameccrecordmethod aliasccrecordmethod titlesubset ccrecord object return list ccepisod object usag smethodccrecordx argument itemxccrecordclass itemiinteg vector descript subset ccrecord object return list ccepisod object gener roxygen edit hand pleas edit document rdemographicsr nameccd_demographic_t aliasccd_demographic_t titlecr demograph tabl includ nontimevari variabl usag ccd_demographic_tablerecord dtype true argument itemrecordccrecordclass itemdtypelog column type awar els charact descript data type column correspond data type gener roxygen edit hand pleas edit document rcchic_xmlr namexmlload aliasxmlload titleload xml clinic data usag xmlloadfil argument itemfilecharact string path xml file valu root xml data descript load xml clinic data gener roxygen edit hand pleas edit document rdataqualityreportr nametotaldatapoint aliastotaldatapoint titlereturn total data point ccrecord object usag totaldatapointccd argument itemccdccrecordclass descript return total data point ccrecord object gener roxygen edit hand pleas edit document rcctabler namecreate_cct aliascreate_cct titlecr cctabl object usag create_cctablerec conf null freq argument itemrecccrecord itemconfeith path yaml configur file configur itemfreqa uniqu sampl frequenc hour variabl eg freq set row cctabl repres record one hour valu cctabl descript rearrang ccrecord object tabl format column stand variabl row record data point number row depend sampl frequenc set function origin data higher record frequenc set frequenc freq closest data point taken suggest freq set lower maximum record frequenc origin dataset gener roxygen edit hand pleas edit document rstdidr nameisphysiolog aliasisphysiolog titlecheck item nhic code short name belong physiolog categori usag isphysiologyitem_nam argument itemitem_namecharact nhic code short name valu logic descript check item nhic code short name belong physiolog categori gener roxygen edit hand pleas edit document rdatar doctypedata nameitem_ref aliasitem_ref titlefield refer tabl descript field refer tabl keyworddata gener roxygen edit hand pleas edit document rcctabler namegetepisodeperiod aliasgetepisodeperiod titleget length stay base first last data point usag getepisodeperiod unit hour argument itemeccepisod object itemunitcharact string unit result desir abbrevi valu length stay descript get length stay base first last data point gener roxygen edit hand pleas edit document rdeltatim namedeltatim aliasdeltatim titleconvert calendar datetim time differ compar icu admiss time usag deltatimerecord pseudotim fals unit hour tdiff fals argument itemrecordccrecord itempseudotimelog pseudotim set true admiss discharg time set earliest latest data stamp record itemunitsunit delta time hour min day itemtdiffif fals delta time written numer format descript convert calendar datetim time differ compar icu admiss time gener roxygen edit hand pleas edit document rccrecordr doctypeclass nameccepisodeclass aliasccepisod aliasccepisodeclass titleth class hold data singl episod descript class hold data singl episod sectionfield describ itemcodesite_idcharact string site id present otherwis na itemcodeepisode_idcharact string episod id present otherwis na itemcodenhs_numbercharact string nh number present otherwis na itemcodepas_numbercharact string pa number present otherwis na itemcodeparse_filecharact string sourc xml file sourc file na itemcodet_admissionposixct time admiss icu present otherwis na itemcodet_dischargeposixct time discharg icu present otherwis na itemcodeparse_timeposixct pars time itemcodedataa list hold data episod index nihic code gener roxygen edit hand pleas edit document rcctabler namecctable_clean aliascctable_clean titleappli filter descript filter configur appli creat clean dataset filter includ rang categori missing no_data exampl dontrun tb create_cctableccd conf tbclean gener roxygen edit hand pleas edit document rdatar doctypedata nameicnarc_t aliasicnarc_t titleicnarc diagnosi refer tabl descript icnarc diagnosi refer tabl refer urlhttpswwwicnarcorgourauditauditscmpresourcesicmicnarccodingmethod keyworddata gener roxygen edit hand pleas edit document rdataqualityreportr namedemographicdatacomplet aliasdemographicdatacomplet titlecr demograph complet tabl pander tabl usag demographicdatacompletenessdemg name null returndata fals argument itemdemgdatat demograph data tabl creat ccd_demographic_t itemnamesshort name select item itemreturndatalog return tabl true descript creat demograph complet tabl pander tabl gener roxygen edit hand pleas edit document rfiltercategoricalr namecctable_filter_categori aliascctable_filter_categori titlecategor data filter descript categor variabl allow set valu appear variabl due variou reason categor variabl may contain valu standard allow valu set yaml configur initialis cctabl see cctableclass create_cct follow exampl see set categor filter variabl dead_icu nihr_hic_icu_ allow valu e exampl dontrun exampl categor filter setup yaml configur nihr_hic_icu_ categori level aliv dead e aliv discharg appli drop_entri run filter cctabl ct ctfilter_categori run filter ctapply_filt appli filter creat clean tabl gener roxygen edit hand pleas edit document rstdidr nameisdrug aliasisdrug titlecheck item nhic code short name belong drug categori usag isdrugsitem_nam argument itemitem_namecharact nhic code short name valu logic descript check item nhic code short name belong drug categori gener roxygen edit hand pleas edit document rstdidr namewhichclassif aliaswhichclassif titleidentifi classif classif usag whichclassificationitem_nam argument itemitem_namenh code short name valu charact item classif descript identifi classif given item code short name classif label demograph physiolog drug nursing_oth laboratori gener roxygen edit hand pleas edit document rdataqualityreportr namexmlfiledurationplot aliasxmlfiledurationplot titleplot durat xml file usag xmlfiledurationplotccd argument itemccdccrecordclass descript plot durat xml file gener roxygen edit hand pleas edit document rstdidr namestnamelongnam aliasstnamelongnam titleconvert short name long name usag stnamelongnamestnam argument itemstnamecharact short name data item h_rate valu longnam charact heart rate descript convert short name long name gener roxygen edit hand pleas edit document rcctabler namecctable_reset aliascctable_reset titlereset cctabl descript restor object initi statu filter qualiti clean tabl remov gener roxygen edit hand pleas edit document rdataqualityreportr namet aliast titleproduc item specifi tabl one usag tabledemg name returndata fals argument itemdemgdemograph tabl creat ccd_demographic_t itemnamescharact string short name data item eg h_rate itemreturndatalog fals print pander tabl true return tabl print pander tabl valu returndata true return datat descript produc item specifi tabl one gener roxygen edit hand pleas edit document rfiltermissingnessr namecctable_filter_nodata aliascctable_filter_nodata titleno data filter descript remov episod particular field present need set yaml configur file gener roxygen edit hand pleas edit document rccrecordr namefor_each_episod aliasfor_each_episod titleloop episod ccrecord object usag for_each_episoderecord fun argument itemrecordccrecord itemfunfunct descript loop episod ccrecord object gener roxygen edit hand pleas edit document rstdidr namecodestnam aliascodestnam titleconvert nhic code short name usag codestnamecod argument itemcodecharact nihc code eg nihr_hic_icu_ valu shortnam charact eg h_rate descript convert nhic code short name gener roxygen edit hand pleas edit document rdataqualityreportr namefilesummari aliasfilesummari titleproduc file summari tabl usag filesummaryccd argument itemccdccrecordclass valu datat descript produc file summari tabl gener roxygen edit hand pleas edit document rcctabler namecctable_create_cct aliascctable_create_cct titlecr cctabl object descript member function cctableclass use create_cct safer easier way creat cctabl see create_cct gener roxygen edit hand pleas edit document rstdidr nameasnumb aliasasnumb titleconvert standard id number charact use index usag asnumberobj argument itemobja stdid object descript convert standard id number charact use index gener roxygen edit hand pleas edit document rccrecordr namenewepisod aliasnewepisod titlecr new episod usag newepisodelt list parse_fil na parse_tim asposixctna argument itemlti list itemparse_fileth file locat episod come itemparse_timeth pars date time episod valu ccepisod object descript creat new ccepisod object given episod data list list organis data item index nihc code eg nihr_hic_icu_ exampl ep list epsnihr_hic_icu_ dataframetimeseq rep newepisodeep gener roxygen edit hand pleas edit document rdataqualityreportr namesampler aliassampler titleproduc pander tabl sampl rate longitudin data usag sampleratedcctb argument itemcctbcctableclass see createcct descript produc pander tabl sampl rate longitudin data gener roxygen edit hand pleas edit document rstdidr namelongstnam aliaslongstnam titleconvert long name short name usag longstnamel argument itemllong name heart rate valu short name charact h_rate descript convert long name short name gener roxygen edit hand pleas edit document rcctabler namereallocatetimerecord aliasreallocatetimerecord titlepropag numer delta time interv record usag reallocatetimerecordrecord delta argument itemrecordccrecord itemdeltatim frequenc hour descript propag numer delta time interv record detail discharg time admiss time miss latest earliest data time stamp use instead gener roxygen edit hand pleas edit document rccrecordr doctypemethod nameplot_episodeccepisodemissingmethod aliasplot_episodeccepisodemissingmethod titleepisod chart default field usag smethodplot_episodeccepisodemissingr argument itemrccepisodeclass descript episod chart default field gener roxygen edit hand pleas edit document rutilitiesr nameextract_info aliasextract_info titleextract inform datachecklist usag extract_info valu list time dataframeid idt meta dataframeid idmeta nontim numer max_num_nh descript extract inform datachecklist gener roxygen edit hand pleas edit document rfilterrang namecctable_filter_rang aliascctable_filter_rang titlenumer rang filter argument itemselectth rang label red amber green give yellow select mean want valu label yellow clean tabl descript rang filter appli numer field field requir rang filter appli one need set seri rang broadest narrowest yaml configur set three level label rang red amber green also ok set one rang instead three rang filter first assign label everi data entri detail rang yaml configur file l h l h l h h l stand close open half open interv exampl dontrun yaml exampl nihr_hic_icu_ shortnam h_rate dataitem heart rate rang label red broader amber green narrow appli drop_entri appli rang filter cctabl ct ctfilter_rangeyellow ctapply_filt gener roxygen edit hand pleas edit document rcctabler nameccd_select_t aliasccd_select_t titlecr tabl cctabl ccrecord usag ccd_select_tablerecord items_opt null items_obg null freq return_list fals argument itemrecordccrecord itemitems_optcharact vector item hic code select item_opt option item automat fill item miss itemitems_obgobligatori item obligatori episod contain item vector remov itemfreqnumer cadenc hour itemreturn_listlog true return list valu datat descript creat tabl cctabl ccrecord gener roxygen edit hand pleas edit document rutilitiesr nameicnarcdiagnosi aliasicnarcdiagnosi titleconvert icnarc code diagnosi text usag icnarcdiagnosisicnarc surgeri true level null argument itemicnarcth icnarc code eg itemsurgerytf without surgic inform itemlevelscategori level todo level valu charact icnarc diagnosi descript note still code miss see issu gener roxygen edit hand pleas edit document rccrecordr doctypemethod nameccrecordccepisodemethod aliasccrecordccepisodemethod titlead one ccepisod object ccrecord usag smethodccrecordccepisode e argument itemeccrecordclass itemeccepisodeclass valu ccrecordclass descript ad one ccepisod object ccrecord gener roxygen edit hand pleas edit document rutilitiesr namexmltimeposix aliasxmltimeposix titleconvert time xml posix format usag xmltimeposixxmltim allow fals argument itemxmltimecharact time xml format itemallowlog wrong format accept codeallow set true na return valu otherwis return error use deal pseudonym data time format present correctli descript convert xml time xml time format posixct gener roxygen edit hand pleas edit document rcctabler namecreatedclean aliascreatedclean titleclean tabl low memori usag createdcleanrecord config freq nchunk argument itemrecordccrecord itemconfigth full path yaml configur file itemfreqt cadenc itemnchunksinteg number larger nchunk less memori requir valu clean wide tabl descript clean process specifi yaml configur filter present configur appli return clean data howev data qualiti inform lost function use memori suffici enough hold inform gener roxygen edit hand pleas edit document rcctabler doctypeclass namecctableclass aliascct aliascctableclass titleprocess ehr data tabl format descript ccrecord data rearrang tabl column stand data field eg heart rate blood pressur row stand data record within uniqu cadenc see cctable_create_cct cctabl data process platform store origin data process data alongsid process detail also contain variou commonli use data filter sectionfield describ itemcoderecordccrecord itemcodeconfth yaml style configur itemcodetoriginth origin data tabl itemcodetcleanth data tabl clean process itemcodedfilterlist contain data filter inform itemcodedqualitylist contain data qualiti itemcodesummarylist itemcodebase_cadenceth base cadenc specifi hour sectionmethod describ itemcodeapply_filterswarn trueappli filter specifi configur updat clean tabl tclean itemcodecreate_tablefreqcr tabl contain select item conf given frequenc hour itemcodeexport_csvfil nullexport clean tabl csv file itemcodefilter_categoriescheck individu entri categori specifi conf itemcodefilter_missingnessrecount falsefilt missing low itemcodefilter_nodataexclud episod data present certain field itemcodeimputationfil miss data time seri data perform given imput method select window period nearbi miss data itemcodereload_confconfreload yaml configur exampl rec ccrecord cctabl create_cctablerec freq cctabl cctableclean tabl cctabletclean gener roxygen edit hand pleas edit document rstdidr nameislaboratori aliasislaboratori titlecheck item nhic code short name belong laboratori categori usag islaboratoryitem_nam argument itemitem_namecharact nhic code short name valu logic descript check item nhic code short name belong laboratori categori gener roxygen edit hand pleas edit document rdataqualityreportr namephysiodistribut aliasphysiodistribut titleplot physiolog data distribut usag physiodistributioncctb name argument itemcctbcctableclass see createcct itemnamescharact vector short name numer demograph data descript plot physiolog data distribut gener roxygen edit hand pleas edit document rcctabler namecctable_export_csv aliascctable_export_csv titleexport clean tabl csv file argument itemfileth full path output csv file descript export tclean csv file gener roxygen edit hand pleas edit document rfiltermissingnessr namecctable_filter_missing aliascctable_filter_missing titledata miss filter argument itemrecountlog valu recount missing true descript deal data insuffici data point support two key item set yaml configur file label time interv accept_d accept present ratio set label accept_d mean accept miss rate lower everi data point gener roxygen edit hand pleas edit document rccrecordr doctypemethod nameccrecordnullmethod aliasccrecordnullmethod titlead noth ccrecord object return origin ccrecord usag smethodccrecordnul e argument itemeccrecordclass itemenul descript ad noth ccrecord object return origin ccrecord gener roxygen edit hand pleas edit document rdataqualityreportr namedataqualityreportbrc aliasdataqualityreportbrc titlecr data qualiti report usag dataqualityreportbrcccd pdf true brc null path null argument itemccdccrecord itempdflog creat pdf version dq report otherwis stay markdown format itembrccharact brc name cambridg gstt imperi oxford uclh itempathreport export path descript creat detail data qualiti report includ file summari site summari data complet densiti plot result found pathreportdata_quality_reportpdfmd use function one also creat sitetrust specifi report see argument site need make sure right write work_dir gener roxygen edit hand pleas edit document rdataqualityreportr namexmlsitedurationplot aliasxmlsitedurationplot titleplot xml durat term site usag xmlsitedurationplotccd argument itemccdccrecordclass descript plot xml durat term site gener roxygen edit hand pleas edit document rutilitiesr namewhichiscod aliaswhichiscod titleg id number nhic code like nihr_hic_icu_xxxx usag whichiscodenh argument itemnhicnh code descript give id number nhic code like nihr_hic_icu_xxxx gener roxygen edit hand pleas edit document rcctabler namecctable_reload_conf aliascctable_reload_conf titlereload yaml configur file argument itemconfful path yaml configur file pars config list descript note function also reset oper remov tclean exampl dontrun tbreload_confrefyaml gener roxygen edit hand pleas edit document rcchic_xmlr namegetxmlepisod aliasgetxmlepisod titleget episod data xml usag getxmlepisodexmlroot id argument itemxmlrootroot xml data return xmlload itemidinteg descript get episod data xml gener roxygen edit hand pleas edit document rccrecordr doctypemethod nameccrecordanymethod aliasccrecordanymethod titlecr subset ccrecord object origin one via specifi row number episod usag smethodccrecordanyx argument itemxccrecordclass itemiinteg vector descript creat subset ccrecord object origin one via specifi row number episod gener roxygen edit hand pleas edit document rccrecordr doctypemethod nameccrecordcharactermethod aliasccrecordcharactermethod titlecr ccrecord subset via select site usag smethodccrecordcharacterx argument itemxccrecordclass itemicharact vector contain site_id eg cq qw descript creat ccrecord subset via select site gener roxygen edit hand pleas edit document rutilitiesr namelookupitem aliaslookupitem titlelookup item inform keyword usag lookupitemskeyword style grid argument itemkeywordcharact eg h_rate heart itemstylecharact style tabl output simpl rmarkdown grid valu charact short name select item descript function tri match keyword short name long name nhic code match item display gener roxygen edit hand pleas edit document rstdidr namestdid aliasstdid titl class hold standard id nihr_hic_icu_ usag stdidtext stdidtext argument itemtextnihc code format like nihr_hic_icu_xxxx descript class hold standard id nihr_hic_icu_ constructor stdid class sectionslot describ itemcodeidssingl multipl charact gener roxygen edit hand pleas edit document rdemographicsr nameccd_unique_spel aliasccd_unique_spel titlefind uniqu spell id usag ccd_unique_spellrec durat argument itemrecccrecordclass itemdurationinteg hour valu datat contain spell id descript find uniqu spell id gener roxygen edit hand pleas edit document rccrecordr doctypeclass nameccrecordclass aliasccrecord aliasccrecordclass titleth class hold cchic patient record serv databas descript ccrecord class hold raw episod data pars directli xml csv file sectionfield describ itemcodenepisodesi integ number indic total number episod record hold itemcodedmgtba datat contain demograph inform episod includ site_id nh number pa number admiss datetim discharg datetim field usual left empti itemcodeinfotba datat hold pars inform episod pars time file pars itemcodeepisdoesa list ccepisod object exampl heart_rat dataframeseq rep nihr_hic_icu_ site_id q nihr_hic_icu_ episode_id nihr_hic_icu_ creat new episod ep newepisodelistnihr_hic_icu_heart_r nihr_hic_icu_site_id nihr_hic_icu_episode_id modifi record rec ccrecord new record rec rec ep ad new episod record rec rec null ad noth record rec rec rec ad record record ad list episod rec ccrecord ep newepisod ep newepisod epslist listep ep newrec rec epslist gener roxygen edit hand pleas edit document rdemographicsr namelenstay aliaslenstay titlecalcul length stay icu usag lenstaydemg unit hour argument itemdemgdatat demograph tabl least contain column daicu ddicu itemunitscharact unit lenstay column default output hour valu datat origin datat lenstay column difftim append descript calcul length stay icu append origin demograph tabl gener roxygen edit hand pleas edit document rfilterrang nameinrang aliasinrang titlecheck valu vector v given rang usag inrangev rang argument itemvvector numer itemrangea string contain numer rang form low open rang low close rang multipl rang separ semicolumn equival logic eg low low descript check valu vector v given rang gener roxygen edit hand pleas edit document rutilitiesr namesiteinfo aliassiteinfo titleproduc site id refer tabl usag siteinfo valu datafram descript produc site id refer tabl gener roxygen edit hand pleas edit document rdemographicsr nameccd_demographic_spel aliasccd_demographic_spel titlecr demograph tabl spell id usag ccd_demographic_spellrec durat argument itemrecccrecord itemdurationth maximum hour transit period valu datat demograph tabl spell id column spell descript output like ccd_demographic_t addit spell id gener roxygen edit hand pleas edit document rdataqualityreportr namedemgdistribut aliasdemgdistribut titledemgdistribut creat plot distribut numer demograph data usag demgdistributiondemg name argument itemdemgccrecord demograph tabl creat ccd_demographic_t itemnamescharact vector short name numer demograph data descript demgdistribut creat plot distribut numer demograph data exampl dontruntdemgdistributionccd hcm gener roxygen edit hand pleas edit document rccrecordr nameplot_episod aliasplot_episod titleindividu episod chart usag plot_episod v argument itemrccepisodeclass itemvshort name longitudin data v given chart display h_rate spo bilirubin platelet pao_fio gcs_total valu tabl select var episod descript creat individu episod chart diagnosi drug physiolog variabl diagnosi drug alway includ user select longitudin data exampl dontrun plot_episodeccdepisod plot first episod default variabl plot_episodeccdepisod h_rate plot first episod heart rate gener roxygen edit hand pleas edit document rdataqualityreportr namedataqualityreport aliasdataqualityreport titlecr data qualiti report usag dataqualityreportccd site null file null pdf true report argument itemccdccrecord itemsitea vector site id site specifi report itemfilecharact list xml file origin itempdflog creat pdf version dq report otherwis stay markdown format itemoutcharact output path descript creat detail data qualiti report includ file summari site summari data complet densiti plot result found work_dirreportdata_quality_reportpdfmd use function one also creat sitetrust specifi report see argument site need make sure right write work_dir exampl dontrundataqualityreportccd cq c gener roxygen edit hand pleas edit document rccrecordr doctypemethod nameplot_episodeccepisodecharactermethod aliasplot_episodeccepisodecharactermethod titleepisod chart usag smethodplot_episodeccepisodecharacterr v argument itemrccepisodeclass itemvcharact descript episod chart gener roxygen edit hand pleas edit document rcchic_xmlr nameextract_file_origin aliasextract_file_origin titleextract origin file name path file remov suffix usag extract_file_originpathfil removestr xml argument itempathfilea particular file name may suffix itemremovestrlast bit origin filenam valu string descript extract origin file name path file remov suffix