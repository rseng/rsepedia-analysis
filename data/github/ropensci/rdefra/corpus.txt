rdefra interact uk air pollut databas defra doihttpszenodoorgbadgedoizenodosvghttpsdoiorgzenodo josshttpsjosstheojorgpapersjossstatussvghttpsdoiorgjoss rcmdcheckhttpsgithubcomropenscirdefraworkflowsrcmdcheckbadgesvghttpsgithubcomropenscirdefraact codecoviohttpscodecovioghropenscirdefracoveragesvgbranchmasterhttpscodecovioghropenscirdefrabranchmast cran statu badgehttpwwwrpkgorgbadgesversionrdefrahttpscranrprojectorgpackagerdefra cran total downloadshttpcranlogsrpkgorgbadgesgrandtotalrdefrahttpscranrprojectorgpackagerdefra cran monthli downloadshttpcranlogsrpkgorgbadgesrdefrahttpscranrprojectorgpackagerdefra httpsbadgesropensciorg_statussvghttpsgithubcomropenscisoftwarereviewissu packag rdefrahttpscranrprojectorgpackagerdefra allow retriev air pollut data air inform resourc ukairhttpsukairdefragovuk depart environ food rural affair unit kingdom ukair provid public api programmat access data therefor packag scrape html page get relev inform packag follow logic similar packag waterdatahttpscranrprojectorgpackagewaterdata rnrfahttpscranrprojectorgpackagernrfa site first identifi catalogu data import via station identif number data visualis andor use analys metadata relat monitor station access function ukair_catalogu miss station coordin obtain use function ukair_get_coordin time seri data relat differ pollut obtain use function ukair_get_hourly_data defra server handl multipl data request therefor concurr call sent simultan use parallelhttpswwwrprojectorg packag although limit rate depend maximum number concurr call traffic avail infrustractur data retriev effici multipl year data hundr site download minut similar function see also openairhttpscranrprojectorgpackageopenair packag reli local copi data server king colleg uk ropenaqhttpscranrprojectorgpackageropenaq provid ukair latest measur level see httpsukairdefragovuklatestcurrentlevel well data countri instal get releas version cran r installpackagesrdefra develop version github use packag remot r installpackagesremot remotesinstall_githubropenscirdefra load rdefra packag r libraryrdefra function packag logic assum user access ukair databas fllow step brows catalogu avail station select station interest see function ukair_catalogu get miss coordin see function ukair_get_coordin retriev data select station see function ukair_get_site_id ukair_get_hourly_data indepth descript variou function andexampl applic pleas refer packag vignettehttpsgithubcomropenscirdefrablobmastervignettesrdefra_vignettermd meta packag function herein part experiment opensourc project provid without guarante pleas report issu bugshttpsgithubcomropenscirdefraissu licens gplhttpsopensourceorglicensesgpl packag review maÃ«ll salmonhttpsgithubcommael hao zhuhttpsgithubcomhaozhu submiss ropensci see review herehttpsgithubcomropenscisoftwarereviewissu journal open sourc softwar see review herehttpsgithubcomopenjournalsjossreviewsissu cite rdefra citationpackag rdefra br ropensci_footerhttpsropensciorgpublic_imagesgithub_footerpnghttpsropensciorg rdefra releas correspond latest cran submiss resubmiss due bug fix bug fix updat test compat proj httpsgithubcomropenscirdefraissu minor chang remov obsolet packag suggest fix invalid uri follow directori look like leftov knitr rdefra bug fix siteid na caus hang error httpsgithubcomropenscirdefraissu differ variabl ukair_get_coordin input fed differ httpsgithubcomropenscirdefraissu minor chang function ukair_get_coord back origin name ukair_get_coordin rdefra minor fix function updat due recent modif catalogu api minor improv chang made scan packag use goodpractic line longer charact code coverag function name shorter charact function ukair_get_coordin renam ukair_get_coord rdefra minor improv chang descript file ad rmarkdown knitr suggest ad entri vignettebuild knitr chang link new ropenscilab github account ropenscilab instead kehraproject repo transfer ropenscilab github account rdefra releas packag move root directori need base ropensci review relat adjust made minor fix correct unit readm merg readme_fil folder asset rdefra accept pubblic joss rdefra minor chang rdefra minor fix rdefra ad unist test use testthat framework ad travi ci integr ad vignett ad paper submiss joss ad document review packag ropensci project rdefra initi releas resubmiss due bug fix releas summari bug fix code updat ensur case failur code fail grace return inform messag note pleas note follow word misspel defra vitolo al et rdefra test environ ubuntu r r cmd check result error warn note titl rdefra interact uk air pollut databas defra bibliographi paperbib date august output pdf_document tag open data air pollut r author affili brunel univers london name claudia vitolo orcid affili brunel univers london name andrew russel orcid affili brunel univers london name allan tucker orcid summari rdefra rdefraarch r packag rbase retriev air pollut data air inform resourc ukair depart environ food rural affair unit kingdom ukair provid public api programmat access data therefor packag scrape html page get relev inform packag follow logic similar packag waterdatawaterdata rnrfarnrfa site first identifi catalogu data import via station identif number data visualis andor use analys metadata relat monitor station access function ukair_catalogu miss station coordin obtain use function ukair_get_coordin time seri data relat differ pollut obtain use function ukair_get_hourly_data packag design collect data effici allow download multipl year data singl station one line code use parallel packag rbase allow acquisit data hundr site minut figur show station valid coordin within ukair blue circl databas hourli data avail locat shown red circl ukair monitor station august monitoringstationspng refer titl rdefra interact uk air pollut databas defra author claudia vitolo date r sysdat output rmarkdownhtml_vignett vignett vignetteindexentryrdefra interact uk air pollut databas defra vignetteengineknitrrmarkdown vignetteencodingutf r setup echo fals knitropts_chunkset comment collaps true warn fals messag fals eval fals introduct packag rdefra allow retriev air pollut data air inform resourc ukair httpsukairdefragovuk depart environ food rural affair defra unit kingdom ukair provid public api programmat access data therefor packag scrape html page get relev inform packag follow logic similar packag waterdata rnrfa site first identifi catalogu data import via station identif number visualis andor use analys inform relat monitor station access function ukair_catalogu station may miss coordin recov use function ukair_get_coordin lastli time seri data relat differ pollut obtain use function ukair_get_hourly_data packag design collect data effici allow download multipl year data singl station one line code use parallel packag allow acquisit data hundr site minut instal get releas version cran r installation_cran installpackagesrdefra develop version github use packag remot r installation_github installpackagesremot remotesinstall_githubropenscirdefra load rdefra packag r load_librari eval true libraryrdefra function packag logic assum user access ukair databas two step brows catalogu avail station select station interest retriev data select station get station catalogu list monitor station download use function ukair_catalogu input paramet exampl r catalogue_ful eval true get full catalogu station ukair_catalogu headstat current r dimstat station ukair function use filter catalogu use follow input paramet site_nam id specif site ukairid default left blank get info avail site pollut integ default mean pollut group_id identif number group station default mean avail network close set true includ close station fals otherwis country_id identif number countri integ default mean countri region_id identif number region aberdeen citi etc full list see httpsukairdefragovuk default mean local author r catalogue_filt eval true stations_englandozon ukair_cataloguepollut country_id headstations_englandozon exampl show retriev r dimstations_englandozon station england ozon measur get miss coordin locat station extrem import abl carri spatial analysi coordin miss station catalogu might possibl retriev east north coordin british nation grid defra web page transform latitud longitud popul miss coordin shown r get_coord eval true mani station miss coordin lengthwhichisnastationslatitud isnastationslongitud r get_coord eval fals scrape defra websit get eastingnorth avail station ukair_get_coordinatesst mani station still miss coordin lengthwhichisnastationslatitud isnastationslongitud check hourli data avail pollut data start collect consist hourli concentr variou speci microgramsmsupsup ozon osubsub particul matter pmsubsub pmsubsub nitrogen dioxid nosubsub sulphur dioxid sosubsub id data avail differ ukairid catalogu contain addit station id call siteid hereaft defra web page contain refer ukairid siteid function use input ukairid output siteid avail r get_site_id eval fals stationssiteid ukair_get_site_idstationsukairid pleas note function take sever minut run cach catalogu conveni cach version catalogu last updat april includ packag load use follow command r load_dataset_st datast cach catalogu contain avail siteid coordin use offlin lookup tabl find correspond ukairid siteid well investig station characterist get hourli data siteid known time seri given station retriev one line code r get_hourly_data eval fals figwidth figheight figcap labelfighdatahourli ozon data london marylebon road monitor station get year hourli ozon data london marylebon road monitor station df ukair_get_hourly_datami year aggreg daili mean plot pleas note use zoo packag time seri could irregular libraryzoo zoox dfozon orderbi asposixltdfdatetim daily_mean aggregatemi asdateasposixltdfdatetim mean plotdaily_mean main xlab ylab expressionpasteozon concentr mu g get_hourly_datapngget_hourly_datapng figur reffighdata show highest concentr happen late spring begin summer order check whether happen everi year download multipl year data compar code explor distribut ozon month result box plot show highest concentr usual occurr aprilmay vari yearbyyear r ozone_data eval fals get year hourli ozon data monitor station libraryggplot librarydplyr librarylubrid df ukair_get_hourly_datami year df mutateyear yeardatetim month monthdatetim year_month strftimedatetim ym group_bymonth year_month summarizeozon meanozon narmtru naomit ggplot geom_boxplotaesx asfactormonth ozon group month outliershap na xlabmonth year ylabexpressionpasteozon concentr mu gm ggtitl year hourli ozon data london marylebon road monitor station ozone_datapngozone_datapng applic plot station locat scrape defra web page almost station valid coordin creat interact map use leaflet code gener map blue circl station valid coordin red circl show locat avail hourli data r map_data eval fals keep station coordin stations_with_coord stationscompletecasesst clongitud latitud keep station known siteid stations_with_siteid whichisnastations_with_coordssiteid interact map libraryleaflet leafletdata stations_with_coord addtil addcirclemarkerslng longitud lat latitud popup siteid radiu colorblu fill fals addcirclemarkerslng longitudestations_with_siteid lat latitudestations_with_siteid radiu color popup siteidstations_with_siteid map_datapngmap_datapng analys spatial distribut monitor station two plot show spatial distribut monitor station concentr larg urban area mostli estim background level concentr pollut r dotchart eval fals figwidth figheight figcap labelfigdotchartspati distribut monitor station across zone zone dotchartasmatrixtablestationszon dotchart_zonepngdotchart_zonepng r dotchart eval fals figwidth figheight figcap labelfigdotchartspati distribut monitor station across environ type environmenttyp dotchartasmatrixtablestationsenvironmenttypestationsenvironmenttyp unknown unknown dotchart_envtypepngdotchart_envtypepng use multipl core speed data retriev numer site acquisit data hundr site take minut r parallel_exampl eval fals libraryparallel use detectcor find mani core avail machin cl makeclustergetoptionclcor detectcor systemtimemylist parlapplycl stationssiteidstations_with_siteid ukair_get_hourly_data year stopclustercl df bind_rowsmylist nameregion aliasregion doctypedata titl english region descript spatialpolygondatafram contain english region usagedataregion format data frame observ variabl name detail spatial object latitud longitud coordin exampl dataregion keyworddataset gener roxygen edit hand pleas edit document rrdefrapackag doctypepackag namerdefra aliasrdefra titlerdefra interact uk air pollut databas defra descript r packag rdefra allow retriev air pollut data air inform resourc ukair depart environ food rural affair unit kingdom see urlhttpsukairdefragovuk ukair provid public api programmat access data therefor packag scrape html page get relev inform gener roxygen edit hand pleas edit document rukair_get_coordinatesr nameukair_get_coordin aliasukair_get_coordin titleget east north coordin defra usag ukair_get_coordinatesid argument itemidscontain station identif code defin defra alphanumer string b vector string c data frame latter case column contain code name ukairid column ignor valu datafram contain least five column name ukairid east north latitud longitud descript function take input uk air id return east north coordin british nation grid epsg detail input data frame column name ukairid north east function infil miss northingeast valu avail relev webpag exampl dontrun case alphanumer string ukair_get_coordinatesuka case b vector string ukair_get_coordinatescuka uka uka uka case c data frame ukair_get_coordinatesukair_catalogu gener roxygen edit hand pleas edit document rukair_get_hourly_datar nameukair_get_hourly_data aliasukair_get_hourly_data titleget hourli data defra station usag ukair_get_hourly_datasite_id null year null argument itemsite_idthi id specif site itemyearsyear data download valu datafram contain hourli pollut data descript function fetch hourli data defra air pollut monitor station detail measur gener eqnmu gm microgram per cubic metr check unit refer tabl attribut see exampl pleas doubl check unit defra websit might chang time exampl dontrun get data year output ukair_get_hourly_dataabd get data multipl year output ukair_get_hourly_dataabd get unit attributesoutputunit gener roxygen edit hand pleas edit document rukair_get_site_idr nameukair_get_site_id aliasukair_get_site_id titleget site identif number defra station usag ukair_get_site_idid_ argument itemid_san alphanumer string vector string contain uk air id defin defra valu name vector contain site id_ descript given uk air id codeukair_catalogu function fetch catalogu monitor station defra websit exampl dontrun ukair_get_site_iduka gener roxygen edit hand pleas edit document rrdefrapackag doctypedata namest aliasst titlelist defra air qualiti monitor station complet coordin format data frame observ follow variabl describ itemcodeukairidid refer monitor station itemcodeeusiteideusiteid itemcodeemepsiteidemepsiteid itemcodesitenamesit name itemcodeenvironmenttypea factor level codebackground rural codebackground suburban codebackground urban codeindustri suburban codeindustri unknown codeindustri urban codetraff urban codeunknown unknown itemcodezonezon itemcodestartdatestart date itemcodeenddateend date itemcodelatitudelatitud wg itemcodelongitudelongitud wg itemcodenorthingnorth coordin british nation grid itemcodeeastingeast coordin british nation grid itemcodealtitudemaltitud metr sea level itemcodenetworksmonitor network itemcodeaurnpollutantsmeasuredpollut measur itemcodesitedescriptiondescript site itemcodesiteidsit id use retriev time seri data sourc urlhttpsukairdefragovuk usag datast descript list air qualiti monitor station ever instal uk oper defra network per februari network expand metadata new station ad keyworddataset gener roxygen edit hand pleas edit document rukair_catalogu nameukair_catalogu aliasukair_catalogu titleget defra ukair station metadata usag ukair_catalogu site_nam pollut group_id close true country_id region_id location_typ argument itemsite_namethi name specif site default left blank get info avail site itempollutantthi number default mean pollut itemgroup_idthi identif number group station default mean avail network itemclosedthi true includ close station fals otherwis itemcountry_idthi identif number countri number default mean countri itemregion_idthi identif number region aberdeen citi etc full list see urlhttpsukairdefragovuk default mean local author itemlocation_typethi identif number locat type default mean locat type valu datafram list station relat inform descript function fetch catalogu monitor station defra websit detail argument codepollut defin base follow convent item item ozon item nitrogen oxid nox item carbon monoxid co item sulphur dioxid item particul matter pm item particul matter pm item pah item metal pm item benzen item black carbon argument codegroup_id defin base follow convent item item ukeap precipnet item air qualiti strategi pollut item ammonia nitric acid item automat urban rural monitor network aurn item dioxin furan item black smoke item automat hydrocarbon network item heavi metal item nitrogen dioxid diffus tube item pah andersen item particl size composit item pcb item tomp item nonautomat hydrocarbon network item butadien diffus tube item black carbon item automat urban rural monitor network aurn item defra diffus tube item pah digitel solid phase item pah digitel solidvapour item pah deposit item particl size number item rural automat mercuri network item urban sulphat item ukeap rural item automat urban rural monitor network aurn item ukeap nation ammonia monitor network item ukeap acid gase aerosol network item particl speciat marga item ukeap histor aerosol measur argument codecountry_id defin base follow convent item item england item wale item scotland item northern ireland item republ ireland item channel island exampl dontrun station ukair_catalogu