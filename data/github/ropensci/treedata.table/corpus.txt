treedatat r packag manipul phylogenet data _datatable_ wrapper datat enabl fast manipul phylogenet tree match data img srcmanfigureslogopng alignright height badg start codecovhttpscodecovioghropenscitreedatatablebranchmastergraphbadgesvghttpscodecovioghropenscitreedatat devel versionhttpsimgshieldsiobadgedevelversionbluesvghttpsgithubcomropenscitreedatat lifecyclehttpsimgshieldsiobadgelifecycleropenscitreedatatablebluesvghttpswwwtidyverseorglifecycleropenscitreedatat code sizehttpsimgshieldsiogithublanguagescodesizeropenscitreedatatablesvghttpsgithubcomropenscitreedatat latest commithttpsimgshieldsiogithublastcommitropenscitreedatatablesvghttpsgithubcomropenscitreedatatablecommitsmast ropensci badgehttpsbadgesropensciorg_statussvghttpsgithubcomropenscionboardingissu rcmdcheckhttpsgithubcomropenscitreedatatableworkflowsrcmdcheckbadgesvghttpsgithubcomropenscitreedatatableact codefactorhttpswwwcodefactoriorepositorygithubropenscitreedatatablebadgehttpswwwcodefactoriorepositorygithubropenscitreedatat httpscranlogsrpkgorgbadgestreedatatablehttpscranrprojectorgpackagetreedatat badg end datat packagehttpsgithubcomrdatatabledatat enabl highperform extend function data tabl r treedatat wrapper datat phylogenet analys match phylogeni datat preserv match datat oper tldr treedatat librari sync data dataset tip tree enabl effici data taxon manag well onthefli index data select compar analys use treedatat simultan process phylogenet tree data remain computationallyintens task exampl process dataset phylogenet charact alongsid tree treedatat take longer process data alon datat fig treedatat provid new tool increas speed effici phylogenet data process data manipul treedatat significantli faster commonli use packag base treeplyr dplyr addit treedatat faster treeplyr initi datatre match step fig b div styletextaligncent img srcmanfiguresbench_tdt_augpng alignmiddlewidth div font size fig result treedatat microbenchmark data manipul treedatat b treedata match step compar perform treedatat treedatat base treeplyr dplyr use microbenchmark r packagefont instal treedatat treedatat instal cran github present present recommend instal use remoteshttpscranrprojectorgwebpackagesremotesindexhtml use githib version r installpackagestreedatat remotesinstall_githubropenscitreedatat librarytreedatat treedatat treedatat design intent abl effici manipul trait data phylogenet tree enabl compar analys packag bundl exampl data let load look common analys r dataanoli td astreedatatabletre anolisphi data anolisdat function astreedatat convert normal comma tabdelimit file datat formathttpscranrprojectorgwebpackagesdatatablevignettesdatatableintrohtml enabl rang effici intuit index select oper go use tdt extractvector function datat exampl dataset column svl snouttov length anol index column fli run brownian motion analysi trait use r packag geiger r tdttd geigerfitcontinuousphi extractvectortd svl modelbm ncore also effici drop taxa analysi like r dt droptreedatatabletdobjecttd taxacchamaeleonid eugenegrahami addit resourc detail function implement treedatat found differ vignett associ packag websitehttpsropenscigithubiotreedatat contribut pleas see contribut guidecontribut contact pleas see packag descriptiondescript packag author citat pleas use follow citat use packag josef uyeda cristian románpalacio april wright treedatat manipul match phylogeni data use datat avail httpscranrprojectorgwebpackagestreedatat licens pleas see packag licenselicens ropensci_footerhttpsropensciorgpublic_imagesropensci_footerpnghttpsropensciorg titl breve introducción al paquet treedatat author cristian romanpalacio april wright josef uyeda date output rmarkdownhtml_vignett vignett vignetteindexentrybrev introducción al paquet treedatat vignetteengineknitrrmarkdown usepackageutfinputenc r setup includefals knitropts_chunksetecho true breve introducción al paquet treedatat el paquet treedatat tien como objetivo permitir investigador acced manipular dato filogenético usando herramienta del paquet datat datat tien diferent funcion para manipular rápidament dato en una forma eficient el primer paso para usar treedatat consist en crear un objeto treedatat el objeto treedatat empareja lo tiplabel de la filogenia con una columna en el datafram que contien lo nombr de lo taxon est paso inici permit la manipulación subsecuent coordinada de lo dato en el árbol la matriz de caracter dentro de treedatat para est tutori vamo usar lo dato de _anolis_ creado en treeplyr esto caracter fueron generado aleatoriament es important resaltar tre aspecto primero el árbol tien que ser en formato phylo multiphylo en caso de múltipl árbole segundo la matriz de caracter tien que estár en formato datafram tercero la matriz de caracter tien que conten una columna con lo nombr de lo taxon coincidiendo con lo tiplabel del árbol árbole el objeto treedatat se crea usando la función astreedatat r libraryap librarytreedatat cargamo lo dato del ejemplo dataanoli creamo el objecto treedatat con astreedatat td astreedatatabletre anolisphi data anolisdat podemo revisar el objeto resultant simplement llamando el nombr del objeto en la consola la matriz de caracter ant en datafram es ahora un datat r td adicionalment la matriz de caracter en el nuevo formato datat ha sido reordenado para tener la fila en el mismo orden que lo tiplabel en el árbol r tdphytiplabel tddattiplabel manipulando dato la matriz de dato en el objeto treedatat pued ser indexada como cualquier otro objeto datat por ejemplo podemo hacer lo siguient para extraer la columna con información de longitud hocicocloaca svl para cada especi r pressur echotru tddatsvl también podemo usar lo bracket dobl para extraer directament la misma columna como un vector con nombr r tdsvl el mismo resultado pued también ser logrado usando la función extractvector al igual que con lo bracket dobl el resultado de la función extractvector es un vector con nombr r extractvectortd svl múltipl columna pueden tambien ser extraída usando extractvector r extractvectortd svlecomorph hay un par de aspecto que son único treedatat extractvector primero treedatat tien un argumento adicion que permit un correspondencia parcial del nombr de la columna ie cuando el nombr objetivo tien una superposicion parcial con lo elemento en el objeto segundo extractvector pued extraer múltipl columna permit una evaluación estandard ie lo nombr son tratado como cadena de texto liter el poder real de treedatat está en coindexar el árbol con la matriz de caracter por ejemplo en el siguient comando usamo la sintaxi de datat para extraer el primer representant de cada ecomorfo reten toda la columna r td headsd ecomorph podemo hacer la misma operación con múltipl columna r td headsd ecomorph island también implementamo la función tail r td tailsd ecomorph la columna en treedatat pueden ser operada usando la misma sintaxi de datat en el siguient ejemplo lo árbole solo incluirán especi distribuida en cuba est es el equivalent filtrar usando dplyr despué una nueva columna llamada index es creada en el objeto datat dentro del objeto treedatat con lo valor de svlhostil en resumen la siguient línea permit en forma simultánea crear una nueva columna reducir el número de taxon en la filogenia la especi de interé r tdisland cubaindexsvlhostil treedatat permit aplicar funcion directament en nuestro dato de interé en el siguient ejemplo evaluamo un modelo de evolución browniano sobr lo dato de svl en nuestro set de dato usamo una combinación de tdt extractvector geigerfitcontinu para correr funcion en nuestro dato extraer un vector de caracter ajustar el model en cuestión respectivament r tdttd geigerfitcontinuousphi extractvectortd svl modelbm ncore lo terminal en el árbol también pueden ser removido fácilment con lo cambio también reflejado sobr la matriz de caracter en el siguient ejemplo removemo do taxon por su nombr r dt droptreedatatabletdobjecttd taxacchamaeleonid eugenegrahami revisamo si chamaeleonid eugenegrahami aún están en el árbol r cchamaeleonid eugenegrahami dtphytiplabel podemo hacer lo mismo con la matriz de caracter en el nuevo objeto treedatat r cchamaeleonid eugenegrahami dtdatx por último el árbol la matriz de caracter pueden ser extraído de el objeto treedatat fácilment usando la función pulltreedatat r df pulltreedatatabletd dat tree pulltreedatatabletd phi la tabla r df el árbol r tree la misma funcionalidad explicada en est tutori sobr objeto phylo aplica directament objeto multiphylo titl addit function manipul data treedatat author josef uyeda cristian romanpalacio april wright date output rmarkdownhtml_vignett vignett vignetteindexentryaddit function manipul data treedatat vignetteengineknitrrmarkdown usepackageutfinputenc r setup includefals knitropts_chunksetecho true addit function manipul data treedatat includ addit function allow identif discret continu charact given dataset first load dataset r libraryap librarytreedatat load exampl data dataanoli creat treedatat object astreedatat td astreedatatabletre anolisphi data anolisdat detectcharactertyp function use examin whether svl discret continu r detectcharactertypeanolisdatsvl examin type charact dataset use detectallcharact function r detectallcharactersanolisdat summar inform tabl get r cbinddataframecharactercolnamesanolisdattypedetectallcharactersanolisdat final use filtermatrix function subset dataset certain type charact instanc let extract discret charact anoli dataset r filtermatrixanolisdat discret two addit function treedatat design examin modifi column row name dataset instanc ask anoli dataset column name r hasnamesanolisdat col column name let remov column name check hasnam detect chang here new dataset r dataanolisdat colnamesdatanul headdata let run hasnam new dataset r hasnamesdata col creat new column name use forcenam function r data forcenamesdata col new dataset column name n look like r headdata final ask whether new dataset actual column name run hasnam function r hasnamesdata col appli procedur column col row row rowcol titl partial match trait data tree treedatat author josef uyeda cristian romanpalacio april wright date output rmarkdownhtml_vignett vignett vignetteindexentryparti match trait data tree treedatat vignetteengineknitrrmarkdown usepackageutfinputenc r setup includefals knitropts_chunksetecho true partial match trait data tree astreedatat function enabl user match tree multipl tree singl trait databas first load sampl dataset r libraryap librarytreedatat load exampl data dataanoli creat treedatat object astreedatat td astreedatatabletre anolisphi data anolisdat tip common tree tree dataset drop result treedatat object instanc modifi origin anol phylogeni ahli ahli replac label present dataset naa r anolis_newtipanolisphi anolis_newtiptiplabelnaa anolis_newtip use modifi tree fit treedatat object use astreedatat function r td astreedatatabletreeanolis_newtip dataanolisdat note astreedatat drop nonoverlap tip naa present tree trait data ahi present databas tree case return treedatat object fulli match phi data object r td fullymatch matrix tree also return treedatat object multiphylo object phi compon see exampl first construct multiphylo object partial overlap origin trait databas use naa instead ahi r anolisanolisphi anolistiplabelnaa anolisanolisphi anolistiplabelnaa treeslistanolisanoli classtre multiphylo tree next fit treedatat object use relev multiphylo object origin trait databas r td astreedatatabletreetre dataanolisdat note tip drop tree multiphylo object singl row delet datat object treedatat object r td titl get start treedatat packag author josef uyeda cristian romanpalacio april wright date output rmarkdownhtml_vignett vignett vignetteindexentryget start treedatat packag vignetteengineknitrrmarkdown usepackageutfinputenc r setup includefals knitropts_chunksetecho true get start treedatat packag aim treedatat r packag allow research access manipul phylogenet data use tool datat packag datat mani function rapidli manipul data memori effici way use treedatat packag begin creat treedatat object treedatat match tiplabel phylogeni column name datafram allow manipul data correspond tree togeth importantli charact matrix must must includ column taxa name class datafram tree must class phylo multiphylo treedatat creat use astreedatat function use anoli dataset treeplyr trait dataset randomli gener set speci r libraryap librarytreedatat load exampl data dataanoli creat treedatat object astreedatat td astreedatatabletre anolisphi data anolisdat may inspect object call name notic datafram datat datat simpli advanc version datafram among increas speed data manipul step simplifi syntax r td furthermor new datat reorder order tiplabel tree r tdphytiplabel tddattiplabel manipul data coindex data tabl index way datat object would exampl want look snoutvent length column like r pressur echotru tddatsvl also use doubl bracket syntax directli return column data name list r tdsvl function also accomplish extractvector function doubl bracket syntax extractvector function return name vector r extractvectortd svl multipl trait also extract use extractvector r extractvectortd svlecomorph howev there coupl aspect uniqu treedatat extractvector first treedatat extra exact argument enabl partial match ie target string treedatat object match partial second extractvector extract multipl column accept nonstandard evalu ie name treat string liter real power treedatat coindex tree tabl exampl command use datat syntax take first repres ecomorph retain data column examin tree object see tip absent result datat r td headsd ecomorph could also oper multipl column r td headsd ecomorph island tail also implement r td tailsd ecomorph column treedatat object also oper use gener datat syntax exampl tree prune tip occur cuba datat equival dplyr filter new column creat datat assign name index assign valu svl hostil index enabl concurr manipul phylogeni calcul new index tip would actual like use r tdisland cubaindexsvlhostil run function treedatat object command extract one vector datat use geiger continu model fit estim brownian motion model data use tdt function r tdttd geigerfitcontinuousphi extractvectortd svl modelbm ncore drop extract taxa treedatat object also drop tip directli tree tip drop concurr datat exampl remov two taxa name r dt droptreedatatabletdobjecttd taxacchamaeleonid eugenegrahami check chamaeleonid eugenegrahami still tree r cchamaeleonid eugenegrahami dtphytiplabel data treedatat object r cchamaeleonid eugenegrahami dtdatx your done datat tree extract object r df pulltreedatatabletd dat tree pulltreedatatabletd phi tabl r df correspond tree r tree titl work multiphylo object treedatat author josef uyeda cristian romanpalacio april wright date output rmarkdownhtml_vignett vignett vignetteindexentrywork multiphylo object treedatat vignetteengineknitrrmarkdown usepackageutfinputenc r setup includefals knitropts_chunksetecho true work multiphylo object treedatat allow match multipl phylogeni multiphylo singl dataset datafram modifi anol dataset explain extend function treedatat multiphylo object note tree multiphylo must exactli taxa first load sampl dataset r libraryap librarytreedatat load exampl data dataanoli creat treedatat object astreedatat td astreedatatabletre anolisphi data anolisdat creat multiphylo object includ two phylo object user provid number phylo object within multiphylo object howev tree differ topolog word tree must tip label also note provid multiphylo datafram partial overlap r treeslistanolisphyanolisphi classtre multiphylo tree creat treedatat object combin trait data datafram newli gener multiphylo object note singl charact matrix r td astreedatatabletreetre dataanolisdat result td object return multiphylo object phi objectcontain overlap taxa multiphylo object input dataset r classtdphytdphi pleas note basic treedatat function highlight phylo object still function treedatat object includ multiphylo object r td headsd ecomorph function also run treedatat object multiphylo data instanc follow line fit phenogram svl tree provid multiphylo object r tdttd geigerfitcontinuousphi extractvectortd svl modelbm ncore output object class list element correspond output function tree provid multiphylo object gener roxygen edit hand pleas edit document rtreedatatabl nametreedatat aliastreedatat titlefunct extract name vector object class codetreedatat usag methodtreedatatablex exact true argument itemxan object class codetreedatat itemcolumn name class codecharact itemexactwheth exact search conduct valu new object class codevector name set label correspond tip label provid codetreedatat object descript function extract name vector trait object class codetreedatat exampl dataanoli phylo object td astreedatatableanolisphi anolisdat tdsvl multiphylo object treesfm listanolisphi anolisphi classtreesfm multiphylo td astreedatatabletreesfm anolisdat tdsvl seealso codelinkdatatabledatat gener roxygen edit hand pleas edit document rextractvectorr nameextractvector aliasextractvector titlereturn name vector treedatat object usag extractvectortdobject argument itemtdobjecta treedatat object itemth name column column select valu name vector list name vector descript return name vector treedatat object exampl dataanoli td astreedatatabletre anolisphi data anolisdat extract name vector svl td object extractvectortd svl extract name vector svl ecomorph td object extractvectortd svl ecomorph gener roxygen edit hand pleas edit document ranolisr doctypedata nameanoli aliasanoli titleanol data format object class codelist length usag dataanoli descript anol data treedatat function mani trait eg awesom hostil dataset retriev treeplyr base random number author luke harmon keyworddataset gener roxygen edit hand pleas edit document rtreedatatabl nametreedatat aliastreedatat titlefunct perform datat oper object class codetreedatat usag methodtreedatatablex argument itemxan object class codetreedatat itemargu structur codedatat use perform chang codetreedatat object valu new object class codetreedatat verbdat verbphi correspond chang set verbdat use linkdatatabledatatabledatat structur descript function use subset row select comput column linkdatatabledatatabledatat exampl dataanoli anoli anolisphi anolistiplabel naa anoli anolisphi anolistiplabel naa tree listanoli anoli classtre multiphylo treesfm listanolisphi anolisphi classtreesfm multiphylo phylo object fulli match data td astreedatatabletre anolisphi data anolisdat td astreedatatableanolisphi anolisdat td svl tdisland cuba ecomorph tg ecomorph island svl td utilsheadsd ecomorph island multiphylo object fulli match data td astreedatatabletre treesfm data anolisdat td astreedatatabletreesfm anolisdat td svl tdisland cuba ecomorph tg ecomorph island svl td utilsheadsd ecomorph island phylo object partial match data td astreedatatabletre anoli data anolisdat td astreedatatableanoli anolisdat td svl tdisland cuba ecomorph tg ecomorph island svl td utilsheadsd ecomorph island multiphylo object partial match data td astreedatatabletre tree data anolisdat td astreedatatabletre anolisdat td svl tdisland cuba ecomorph tg ecomorph island svl td utilsheadsd ecomorph island seealso linkdatatabledatatabledatat gener roxygen edit hand pleas edit document rdroptreedatatabl namedroptreedatat aliasdroptreedatat titlefunct drop taxa object class codetreedatat usag droptreedatatabletdobject taxa argument itemtdobjectan object class codetreedatat itemtaxaa vector class codecharact contain taxa need drop origin codetreedatat object valu object class codetreedatat match verbdat verbphi element base whether codetaxa drop descript function use remov speci object class codetreedatat result codetreedatat includ fulli match verbdat verbphi element user confirm chang process exampl dataanoli multiphylo object treedatat object td astreedatatableanolisphi anolisdat droptreedatat tdobject td taxa cchamaeleonid eugenegrahami multiphylo object treedatat object treesfm listanolisphi anolisphi classtreesfm multiphylo td astreedatatabletreesfm anolisdat droptreedatat tdobject td taxa cchamaeleonid eugenegrahami gener roxygen edit hand pleas edit document rtdt_methodsr namesummarytreedatat aliassummarytreedatat titlesummar treedatat object usag methodsummarytreedatatableobject argument itemobjectan object class treedatat itemaddit argument pass headtreedatat valu function tri smart summar data detect continu vs discret data well whether data miss data also return taxa drop either origin tree origin data descript summar treedatat object exampl dataanoli td astreedatatableanolisphi anolisdat summarytd gener roxygen edit hand pleas edit document rdetectcharactertyp namedetectcharactertyp aliasdetectcharactertyp titlefunct detect whether charact continu discret usag detectcharactertypedat cutoff argument itemdata vector data itemcutoffcutoff valu decid numer data might actual discret nlev number level n length dat nlev n exceed cutoff data classifi discret valu either discret continu descript function detect whether given vector continu eg valu discret eg valu blue red yellow charact exampl dataanoli detectcharactertypeanolisdat gener roxygen edit hand pleas edit document rdetectcharactertyp namefiltermatrix aliasfiltermatrix titlefilt charact matrix return either continu discret charact usag filtermatrixmat returntyp discret argument itemmata charact matrix class datafram itemreturntypeeith discret continu valu datafram discret default continu charact descript function filter charact matrix base continu eg valu discret charact eg valu blue red yellow exampl dataanoli filtermatrixanolisdat discret gener roxygen edit hand pleas edit document rdetectcharactertyp nameforcenam aliasforcenam titleforc name row column usag forcenamesdat nametyp row argument itemdata vector data itemnametyp either describ itemrowrow default itemcolcolumn itemrowcolboth row column valu object type datafram label column row descript function creat column name codecolnam rownam coderownam unnam codedatafram codematrix exampl dataanoli forcenamesanolisdat row gener roxygen edit hand pleas edit document rtdt_methodsr nametailtreedatat aliastailtreedatat titlereturn last part treedatat object usag methodtailtreedatatablex argument itemxa treedatat object itemaddit argument pass headdatat descript return last part treedatat object exampl dataanoli td astreedatatableanolisphi anolisdat tailtd gener roxygen edit hand pleas edit document rastreedatatabl nameastreedatat aliasastreedatat titlecombin tree set tree datafram singl treedatat object usag astreedatatabletre data name_column detect argument itemtreea tree class codephylo multipl tree class codemultiphylo itemdataa dataset format codedatafram itemname_columna charact indic name taxa codedatafram set codedetect default verba treedatat autodetect column valu object type codetreedatat contain tree datat descript function take input tree class codephylo codemultiphylo codedatafram combin treedatat codemultiphylo provid tree must tiplabel codetreedatat object sort row datat match tiplabel phylogeni tiplabel tree must match column tip name input datafram output function treedatat manipul datat exampl dataanoli anoli anolisphi anolistiplabel naa anoli anolisphi anolistiplabel naa tree listanoli anoli classtre multiphylo treesfm listanolisphi anolisphi classtreesfm multiphylo phylo object fulli match data td astreedatatabletre anolisphi data anolisdat multiphylo object fulli match data td astreedatatabletre treesfm data anolisdat phylo object partial match data td astreedatatabletre anoli data anolisdat multiphylo object partial match data td astreedatatabletre tree data anolisdat gener roxygen edit hand pleas edit document rtdt_methodsr nameprinttreedatat aliasprinttreedatat titleprint method treedatat object usag methodprinttreedatatablex argument itemxan object class treedatat itemaddit argument pass headtreedatat valu function use print tree first line datat object descript print method treedatat object gener roxygen edit hand pleas edit document rpulltreedatatabl namepulltreedatat aliaspulltreedatat titlereturn charact matrix phylogeni treedatat object usag pulltreedatatabletdobject type cdat phi argument itemtdobjecta treedatat object itemtypewheth output function tree typephylo datat typedat valu codedatat codephylo object origin codetreedatat object descript return charact matrix phylogeni treedatat object exampl dataanoli td astreedatatableanolisphi anolisdat pulltreedatatabletd type phi pulltreedatatabletd type dat gener roxygen edit hand pleas edit document rtdt_methodsr nameheadtreedatat aliasheadtreedatat titlereturn first part treedatat object usag methodheadtreedatatablex argument itemxa treedatat object itemaddit argument pass headdatat descript return first part treedatat object exampl dataanoli td astreedatatableanolisphi anolisdat headtd gener roxygen edit hand pleas edit document rdetectcharactertyp namedetectallcharact aliasdetectallcharact titleappli detectcharactertyp entir matrix usag detectallcharactersmat cutoff argument itemmata matrix data itemcutoffcutoff valu decid numer data might actual discret nlev number level n length dat nlev n exceed cutoff data classifi discret valu vector either discret continu variabl matrix descript function detect whether column matrix continu eg valu discret charact eg valu blue red yellow exampl dataanoli detectallcharactersanolisdat gener roxygen edit hand pleas edit document rdetectcharactertyp namehasnam aliashasnam titlerow column name check usag hasnamesdat nametyp row argument itemdata vector data itemnametyp either describ itemrowrow default itemcolcolumn itemrowcolboth row column valu codetru codefals indic object name codecolumn coderow codeboth descript function check whether given codedatafram codematrix column name codecolnam rownam coderownam exampl dataanoli hasnamesanolisdat row gener roxygen edit hand pleas edit document rtdtr nametdt aliastdt titlerun function codetreedatat object usag tdttdobject argument itemtdobjecta treedatat object itema function call valu function output singl tree phylo list function output one per tree multiphylo object descript run function codetreedatat object detail function allow r function use tree data run oncodetreedatat object exampl dataanoli donttest treedatat object phylo phi td astreedatatableanolisphi anolisdat tdttd geigerfitcontinuousphi extractvectortd svl model bm ncore treedatat object multiphylo phi treesfm listanolisphi anolisphi classtreesfm multiphylo td astreedatatabletreesfm anolisdat tdttd geigerfitcontinuousphi extractvectortd svl model bm ncore