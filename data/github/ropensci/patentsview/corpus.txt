patentsview r client patentsview api httpbadgesropensciorg_statussvghttpsgithubcomropenscisoftwarereviewissu rcmdcheckhttpsgithubcomropenscipatentsviewworkflowsrcmdcheckbadgesvghttpsgithubcomropenscipatentsviewact cran versionhttpwwwrpkgorgbadgesversionpatentsviewhttpscranrprojectorgpackagepatentsview instal get stabl version cran r installpackagespatentsview develop version github r devtool rownamesinstalledpackag installpackagesdevtool devtoolsinstall_githubropenscipatentsview basic usag patentsview apihttpspatentsvieworgapisapiendpoint provid interfac disambigu version uspto patentsview r packag provid one main function search_pv make easi interact api r librarypatentsview search_pvqueri _gtepatent_d data list singl data frame patent level list patentsdatafram ob variabl patent_id chr patent_numb chr patent_titl chr coher ladar use intrapixel quadratur query_result distinct entiti count across download page output total_patent_count learn head packag webpagehttpsdocsropensciorgpatentsviewindexhtml info includ get start vignettehttpsdocsropensciorgpatentsviewarticlesgettingstartedhtml firsttim user packag also introduc ropensci blog posthttpsropensciorgblogpatentsview indepth tutori write querieshttpsdocsropensciorgpatentsviewarticleswritingquerieshtml list basic exampleshttpsdocsropensciorgpatentsviewarticlesexampleshtml two exampl data applic eg brief analysi top assigneeshttpsdocsropensciorgpatentsviewarticlestopassigneeshtml field databas ropensci_footerhttpropensciorgpublic_imagesgithub_footerpnghttpsropensciorg patentsview misc packag use new http endpoint list queryabl field updat with_qfun find object call environ jcheng vignett precomput issu fix queri string werent properli urlencod adhoc logic ad handl api throttl patentsview misc vignett remov packag cran build dont fail api patentsview misc exampl hit api wrap dontrun cran doesnt request fix packag api patentsview new featur cast_pv_data function ad convert data type data return search_pv addit field ad api eg field start forprior_ examiner_ misc addit error handler ad locat endpoint mustberuss error_brows option deprec patentsview new function search_pv ad send request patentsview api qry_fun list ad function help user write queri get_field get_endpoint ad quickli get possibl field name endpoint respect unnest_pv_data ad unnest data frame return data test environ window server github r window server rhub builder rdevel ubuntu github r ubuntu github rdevel debian linux rhub builder rdevel os x local r r cmd check result error warn note vignett arent includ r packag natur fact vignett directori includ rbuildignor instead point site r document mostli follow pattern describ httpsropensciorgblogprecomputevignett file end rmdorig origin total unrend rmarkdown file file end rmd halfrend rmarkdown file basic precomput vignett render rmdorig file rmd file see half_render_vignett detail happen creat rmd doc r output alreadi comput embed rmd file rmd file get render ropensci autom site build except follow pattern describ ropensci post pkgdown site built local artifact build place doc dont reli render vignett end rmd wouldnt abl includ html artifactsdepend easili site instead renam file build time pkgdown end use rmdorig file instead rmd file build site see build_site_loc detail happen canvastoblobj canvastoblobj implement standard html canvastoblob canvastoblobhd method browser nativ support canvastoblobj requir blob support function present browser blobj crossbrows blob implement solv support browser canvastoblobj browser support filesaverj track imagehttpsingetclickycomnsgif httpwwwworgtrhtmlthecanvaselementhtml httpsgithubcomeligreyblobj httpsgithubcomeligreyfilesaverjssupportedbrowsersfilesaverj filesaverj implement html wc savea filesav interfac browser nativ support filesaverj demo demonstr save variou media type filesaverj solut save file clientsid perfect webapp need gener file save sensit inform shouldnt sent extern server look canvastoblob save canvas check canvastoblobj crossbrows implement support browser browser construct filenam max blob size depend firefox blob ye mib none firefox data uri na blobjshttpsgithubcomeligreyblobj chrome blob ye mib none chrome android blob ye mib none ie blob ye mib none opera blob ye mib none opera data uri na blobjshttpsgithubcomeligreyblobj safari blob none safari data uri na blobjshttpsgithubcomeligreyblobj featur detect possibl js tri var isfilesaversupport new blob catch e ie possibl save text file ie without flashbas polyfil see chenwenbrian koffsyrup savetextashttpsgithubcomkoffsyrupfilesaverjsexampl detail safari blob may open instead save sometimesy may direct safari user manual press kbdkbdkbdskbd save file open use applicationoctetstream mime type forc download caus issu safarihttpsgithubcomeligreyfilesaverjsissuesissuecom io savea must run within user interact event ontouchdown onclick settimeout prevent savea trigger due restrict io savea open new window instead download want fix pleas tell applehttpsbugswebkitorgshow_bugcgiid bug affect syntax js filesav saveasblob data domstr filenam option boolean disableautobom pass true disableautobom dont want filesaverj automat provid unicod text encod hint see byte order markhttpsenwikipediaorgwikibyte_order_mark exampl save text js var blob new blobhello world type textplaincharsetutf saveasblob hello worldtxt standard wc file api blob interfac avail browser blobj crossbrows blob implement solv save canva js var canva documentgetelementbyidmycanva ctx canvasgetcontextd draw canva canvastoblobfunctionblob saveasblob pretti imagepng note standard html canvastoblob method avail browser canvastoblobj crossbrows canvastoblob polyfil track imagehttpsingetclickycomnsgif httpeligreycomdemosfilesaverj httpsgithubcomeligreycanvastoblobj httpscodegooglecompchromiumissuesdetailid httpsdevelopermozillaorgenusdocsdomblob httpsgithubcomeligreyblobj httpsgithubcomeligreycanvastoblobj contribut filesaverj distribut file compil uglifyj like bash uglifyj filesaverj mangl comment sourc filesaverminj pleas make sure build product version submit pull request bower instal pleas see repohttpgithubcomteleborderfilesaverj bowercompat fork filesaverj avail packag name filesaverj blobj blobj implement wc blob interfac browser nativ support track imagehttpsingetclickycomnsgif httpsdevelopermozillaorgenusdocswebapiblob titl patentsview output github_docu r echo fals messag fals knitropts_chunkset collaps true comment r client patentsview api httpbadgesropensciorg_statussvghttpsgithubcomropenscisoftwarereviewissu rcmdcheckhttpsgithubcomropenscipatentsviewworkflowsrcmdcheckbadgesvghttpsgithubcomropenscipatentsviewact cran versionhttpwwwrpkgorgbadgesversionpatentsviewhttpscranrprojectorgpackagepatentsview instal get stabl version cran r eval fals installpackagespatentsview develop version github r eval fals devtool rownamesinstalledpackag installpackagesdevtool devtoolsinstall_githubropenscipatentsview basic usag patentsview apihttpspatentsvieworgapisapiendpoint provid interfac disambigu version uspto patentsview r packag provid one main function search_pv make easi interact api r librarypatentsview search_pvqueri _gtepatent_d learn head packag webpagehttpsdocsropensciorgpatentsviewindexhtml info includ get start vignettehttpsdocsropensciorgpatentsviewarticlesgettingstartedhtml firsttim user packag also introduc ropensci blog posthttpsropensciorgblogpatentsview indepth tutori write querieshttpsdocsropensciorgpatentsviewarticleswritingquerieshtml list basic exampleshttpsdocsropensciorgpatentsviewarticlesexampleshtml two exampl data applic eg brief analysi top assigneeshttpsdocsropensciorgpatentsviewarticlestopassigneeshtml field databas titl patentsview output github_docu r echo fals messag fals knitropts_chunkset collaps true comment br instal get stabl version cran r eval fals installpackagespatentsview develop version github r eval fals devtool rownamesinstalledpackag installpackagesdevtool devtoolsinstall_githubropenscipatentsview basic usag patentsview apihttpwwwpatentsvieworgapidochtml provid interfac disambigu version uspto patentsview r packag provid one main function search_pv make easi interact api r librarypatentsview search_pvqueri _gtepatent_d learn check get start vignettearticlesgettingstartedhtml ropensci blog posthttpsropensciorgblogblogpatentsview firsttim user indepth tutori write queriesarticleswritingquerieshtml list basic examplesarticlesexampleshtml exampl data applic eg brief analysi top assigneesarticlestopassigneeshtml field databas titl top assigne output rmarkdownhtml_vignett vignett vignetteindexentrytop assigne vignetteengineknitrrmarkdown vignetteencodingutf follow quick analysi top organ patent field databas first step download relev data field patentsview api r librarypatentsview librarydplyr libraryhighchart librarydt libraryknitr first need write queri queri look databas either patent titl abstractnot isnt terribl good way id patent work purpos demonstr user interest write higherqu queri could consult larg bodi research done field patent document retriev queri with_qfun text_phrasepatent_abstract databas text_phrasepatent_titl databas queri _or_text_phrasepatent_abstractdatabase_text_phrasepatent_titledatabas creat list field well need analysi field c patent_numb assignee_organ patent_num_cited_by_us_pat app_dat patent_d assignee_total_num_pat send http request patentsview api get data pv_out search_pvqueri field field all_pag true let identifi top assigne base mani patent data set well also calcul mani total patent assigne fraction total patent relat databas r unnest data frame store assigne list column dl unnest_pv_datapv_outdata patent_numb dl list assigne datafram ob variabl patent_numb chr assignee_organ chr doosan infracor co ltd assignee_total_num_pat chr assignee_key_id chr applicationsdatafram ob variabl patent_numb chr app_dat chr app_id chr patent datafram ob variabl patent_numb chr patent_num_cited_by_us_pat chr patent_d chr creat data frame top assigne top_asgn dlassigne filterisnaassignee_organ patent assign inventor org mutatettl_pat asnumericassignee_total_num_pat group_byassignee_organ ttl_pat summarisedb_pat n mutatefrac_db_pat rounddb_pat ttl_pat ungroup selectc arrangedescdb_pat slice creat datat datat data top_asgn rownam fals colnam c assigne db patentstot patent db patent total patent caption htmltoolstagscapt style captionsid top textalign left fontstyl ital tabl top assigne databas option listpagelength plot chunk unnamedchunkfigureunnamedchunkpng br ibm far away biggest player field howev see oracl salesforcecom rel interest area indic fraction patent relat databas let see assigne level invest databas chang time r creat data frame patent count applic year assigne data top_asgn selectcontainspat slice inner_joindlassigne inner_joindlappl mutateapp_yr asnumericsubstrapp_d group_byassignee_organ app_yr count plot data use highchartr hchart data line hcaesx app_yr n group assignee_organ hc_plotoptionsseri listmark listen fals hc_xaxistitl listtext applic year hc_yaxistitl listtext patent hc_titletext top five assigne databas hc_subtitletext yearli patent applic time plot chunk unnamedchunkfigureunnamedchunkpng hard see clear trend graph clear top assigne patent field mani year final let see organ compar term citat rate first well need normal raw citat count public year older patent dont unfair advantag younger patent ie longer time accumul citat r write rank function use rank patent citat count percent_rank functionx rankx tiesmethod averag nalast keep sumisnax creat data frame normal citat rate stat step asng_p_dat dlpatent mutatepatent_yr substrpatent_d group_bypatent_yr mutateperc_cit percent_rankpatent_num_cited_by_us_pat inner_joindlassigne group_byassignee_organ summarisemean_perc meanperc_cit inner_jointop_asgn arrangedescttl_pat filterisnaassignee_organ slice mutatecolor fcf asdatafram kableheadasng_p_dat rownam fals assignee_organ mean_perc db_pat ttl_pat frac_db_patscolor intern busi machin corpor fcf samsung electron co ltd fcf canon kabushiki kaisha fcf soni corpor fcf kabushiki kaisha toshiba fcf gener electr compani fcf let visual data assigne repres pointbubbl xvalu point repres total number patent assigne publish field databas log scale yvalu repres averag normal citat rate size bubbl proport percent assigne patent relat databas r adapt httpjkunstcomhighchartershowcasehtml hchart asng_p_dat scatter hcaesx db_pat mean_perc size frac_db_pat group assignee_organ color color hc_xaxi titl listtext db patent type logarithm allowdecim fals endontick true hc_yaxistitl listtext mean cite perc hc_titletext top assigne databas hc_add_themehc_theme_flatdark hc_tooltip usehtml true pointformat tooltip_t x cdb patent mean cite percentil fraction db patent cpointdb_patsfpointmean_percf pointfrac_db_patsf hc_legenden fals plot chunk unnamedchunkfigureunnamedchunkpng br look like microsoft rel high valu across three three metric averag citat percentil number databas patent percent total patent relat databas ibm patent microsoft also lower averag citat percentil titl write queri output rmarkdownhtml_vignett vignett vignetteindexentrywrit queri vignetteengineknitrrmarkdown vignetteencodingutf three way write queri let say want find patent publish last year word dog titl abstract whose assigne locat either us canada three way could write queri use string r query_v_ _and _gtepatent_d _or _text_allpatent_titledog _text_allpatent_abstractdog _or _eqassingee_countryu _eqassingee_countryca use list r query_v_ list_and list list_gt listpatent_d list_or list list_text_al listpatent_titl dog list_text_al listpatent_abstract dog list_or list list_eq listassingee_countri us list_eq listassingee_countri ca use patentsview domain specif languag dsl r librarypatentsview query_v_ with_qfun gtepatent_d text_allpatent_titl dog text_allpatent_abstract dog eqassingee_countri cu ca use dsl see three version queri shown equival r jsonliteminifyquery_v_ _and_gtepatent_date_or_text_allpatent_titledog_text_allpatent_abstractdog_or_eqassingee_countryus_eqassingee_countryca jsonlitetojsonquery_v_ auto_unbox true _and_gtepatent_date_or_text_allpatent_titledog_text_allpatent_abstractdog_or_eqassingee_countryus_eqassingee_countryca jsonlitetojsonquery_v_ auto_unbox true _and_gtepatent_date_or_text_allpatent_titledog_text_allpatent_abstractdog_or_eqassingee_countryus_eqassingee_countryca would ever want use method method two main reason queri valid search_pv check queri error use method case method would reli api error messag guidanc queri invalid search_pv check queri follow field includ queri _queryable_ endpoint ie field use user queri exampl would make sure assingee_countri use queri argument sent queri patent endpoint field queri compat comparison oper use exampl would confirm text_al oper use field whose type full text patent_titl suppli correct valu type field eg patent_d charact integ concis easi use syntax complex queri method shorter method make quicker also lot easier get json syntax correct use method compar method dont write json use dslthi import api fairli picki queri syntax trivial get correct exampl api throw error use box json absolut necessari even queri still valid json eg queri _gtepatent_d throw error compar method method correctli togeth valu put vector exampl queri shown vector two valu given assingee_countri cu ca safe convert singl equal statement third element queri eqassingee_countri cu ca two separ equal statement got ord togeth basic languag function make dsl found qry_fun list eg qry_funseq evalu code context list use function with_qfun see with_qfun exampl demonstr with_qfun save type three type function qry_fun comparison oper function eq neq gt gte lt lte begin contain text_al text_ani text_phras function use compar field valu exampl use less equal function lte filter patent publish date eg queri qry_funsltepatent_d see comparison oper section api queri languag pagehttpwwwpatentsvieworgapiquerylanguagehtml descript comparison oper one import thing keep mind certain comparison oper work certain data type exampl cant use begin function patent_abstract patent_abstract data type full text begin work field data type string array function use function logic combin call comparison oper exampl requir patent date less equal _and_ inventor last name ihaka queri with_qfunsandltepatent_d eqinventor_last_nam ihaka function function negat comparison exampl could search patent dont word hi titl like qry_funsnotqry_funstext_phrasepatent_titl hi queri exampl follow queri intend patent endpoint patent link assigne fewer distinct disambigu inventor r qry_funslteassignee_total_num_inventor _lteassignee_total_num_inventor patent assign cpc subsect g physic instrument r qry_funseqcpc_subsection_id g _eqcpc_subsection_idg patent inventor list whose first name contain joh abstract contain either phrase dog bark cat meow abstract doesnt phrase dog chain r with_qfun containsrawinventor_first_nam joh text_phrasepatent_abstract cdog bark cat meow text_phrasepatent_abstract cdog chain _and_containsrawinventor_first_namejoh_or_text_phrasepatent_abstractdog bark_text_phrasepatent_abstractcat meow_not_text_phrasepatent_abstractdog chain patent inventor list whose last name smith cotton gin titl inventor list whose last name hopper cobol titl r with_qfun eqinventor_last_nam smith text_phrasepatent_titl cotton gin eqinventor_last_nam hopper text_phrasepatent_titl cobol _or_and_eqinventor_last_namesmith_text_phrasepatent_titlecotton gin_and_eqinventor_last_namehopper_text_phrasepatent_titlecobol one may note use valu array supposedli support api exampl api document give follow queri exampl use inventor_last_namewhitneyhopp problem api consist handl valu array mani comparison oper one togeth valu like use array thu dsl patentsview never reli array creat queri patentsview get name cpc hierarchi wrong exampl cpc subsect accord patentsview actual cpc class titl exampl output rmarkdownhtml_vignett vignett vignetteindexentryexampl vignetteengineknitrrmarkdown vignetteencodingutf patent endpoint patent cite us patent r librarypatentsview search_pvqueri qry_funsgtpatent_num_cited_by_us_pat data list singl data frame patent level list patentsdatafram ob variabl patent_id chr patent_numb chr patent_titl chr method instal insul sleev query_result distinct entiti count across download page output total_patent_count mani distinct inventor repres highlycit patent r set subent_cnt true give us subent count sinc inventor subent patent endpoint mean get count search_pv queri qry_funsgtpatent_num_cited_by_us_pat field cpatent_numb inventor_id subent_cnt true data list singl data frame list column insid patent level list patentsdatafram ob variabl patent_numb chr inventor list query_result distinct entiti count across download page output total_patent_count total_inventor_count geograph microsoft inventor come past year r write queri queri with_qfun gtepatent_d date yyyymmdd format containsassignee_organ microsoft creat field list inv_field get_fieldsendpoint patent group inventor field cinv_field patent_numb pull data pv_out search_pvqueri field field all_pag true unnest inventor list column unnest_pv_datapv_outdata patent_numb list inventorsdatafram ob variabl patent_numb chr inventor_c chr mountain view inventor_countri chr us inventor_counti logi na inventor_county_fip chr inventor_first_nam chr andriy inventor_first_seen_d chr inventor_id chr fla_lnpletenetskyy inventor_last_nam chr pletenetskyy inventor_last_seen_d chr inventor_lastknown_c chr mountain view inventor_lastknown_countri chr us inventor_lastknown_latitud chr inventor_lastknown_location_id chr inventor_lastknown_longitud chr inventor_lastknown_st chr ca inventor_latitud chr inventor_location_id chr inventor_longitud chr inventor_sequ chr inventor_st chr ca inventor_state_fip chr inventor_total_num_pat chr inventor_key_id chr patent datafram ob variabl patent_numb chr inventor endpoint inventor chicago il list locat least one patent r search_pv queri _andlocation_citychicagolocation_stateil endpoint inventor data list singl data frame inventor level list inventorsdatafram ob variabl inventor_id chr flb_lngunderson inventor_first_nam chr bjorn inventor_last_nam chr gunderson query_result distinct entiti count across download page output total_inventor_count assigne endpoint assigne interest beer r search_pv queri qry_funstext_phrasepatent_titl beer endpoint assigne data list singl data frame assigne level list assigneesdatafram ob variabl assignee_id chr cdcadddcceaefffd assignee_first_nam logi na assignee_last_nam logi na assignee_organ chr rohm co ltd query_result distinct entiti count across download page output total_assignee_count exampl taken httpwwwpatentsvieworgapiinventorhtml titl get start output rmarkdownhtml_vignett vignett vignetteindexentryget start vignetteengineknitrrmarkdown vignetteencodingutf basic exampl let start basic exampl use packag primari function search_pv r librarypatentsview search_pv queri _gtepatent_d endpoint patent data list singl data frame patent level list patentsdatafram ob variabl patent_id chr patent_numb chr patent_titl chr coher ladar use intrapixel quadratur query_result distinct entiti count across download page output total_patent_count call search_pv send queri patent endpoint default api differ endpoint correspond differ entiti type assigne cpc subsect inventor locat nber subcategori patent uspc main class choic endpoint determin entiti queri appli well structur data return endpoint entiti section let turn attent queri paramet write queri patentsview queri syntax document queri languag pagehttpspatentsvieworgapisapiquerylanguag howev difficult get queri right your write hand ie write queri string like _gtepatent_d exampl shown patentsview packag come simpl domain specif languag dsl make write queri breez recommend use function dsl basic queri especi your encount error dont understand get feel work let rewrit queri shown use one function dsl qry_funsgt r qry_funsgtepatent_d _gtepatent_d complex queri also possibl r with_qfun gtepatent_d text_phrasepatent_abstract ccomput program dog leash _and_gtepatent_date_or_text_phrasepatent_abstractcomput program_text_phrasepatent_abstractdog leash check write queri vignettehttpsdocsropensciorgpatentsviewarticleswritingquerieshtml detail use dsl field endpoint differ set _queryable_ _retrievable_ field queryabl field includ queri eg patent_d shown first exampl retriev field get data ie field return search_pv first exampl didnt specifi field want retriev given default set specifi field want use field argument r search_pv queri _gtepatent_d field cpatent_numb patent_titl data list singl data frame patent level list patentsdatafram ob variabl patent_numb chr patent_titl chr coher ladar use intrapixel quadratur query_result distinct entiti count across download page output total_patent_count list retriev field given endpoint use get_field r retrvble_fld get_fieldsendpoint patent headretrvble_fld appcit_app_numb appcit_categori appcit_d appcit_kind appcit_sequ app_countri also visit endpoint onlin document page see list queryabl retriev field eg see inventor field list tablehttpwwwpatentsvieworgapiinventorhtmlfield_list note queri column tabl indic whether field queryabl retriev queri retriev queri n field tabl endpoint found fieldsdf data frame load use datafieldsdf viewpatentsviewfieldsdf import note default patentsview use disambigut version assigne inventor locat instead raw data exampl let say search inventor whose first name john patentsview api go return inventor prefer first name per disambigu result john may necessarili raw first name could get back inventor whose first name appear patent say jonathan johnn even john jay search raw inventor name instead prefer name use field start raw queri eg rawinventor_first_nam assigne locat raw data field current offer api see method behind disambigu process see patentsview inventor disambigu technic workshop websit httpwwwpatentsvieworgworkshop pagin respons default search_pv return record per page give first page result suggest stick default your figur detail request queri want use field want return item final use per_pag argument download record per page also choos page result want page argument r search_pv queri qry_funseqinventor_last_nam chamber page per_pag get record data list singl data frame patent level list patentsdatafram ob variabl patent_id chr patent_numb chr patent_titl chr mud puls telemetri tool compris low query_result distinct entiti count across download page output total_patent_count download page output one call set all_pag true set per_pag equal loop page output download page record total r search_pv queri qry_funseqinventor_last_nam chamber all_pag true data list singl data frame patent level list patentsdatafram ob variabl patent_id chr patent_numb chr patent_titl chr seal assembl subsea rotat control query_result distinct entiti count across download page output total_patent_count entiti count last two call search_pv gave valu total_patent_count even though got lot data second call entiti count return api refer number distinct entiti across download page output page return download page output import phrase api limit us record per queri exampl got total_patent_count search patent publish even though way patent see faq detail overcom record restrict endpoint entiti get similar data endpoint exampl follow two call differ endpoint chosen r queri qry_funseqinventor_last_nam chamber field cpatent_numb inventor_last_nam assignee_organ use patent endpoint search_pvqueri endpoint patent field field data list singl data frame list column insid patent level list patentsdatafram ob variabl patent_numb chr inventor list assigne list query_result distinct entiti count across download page output total_patent_count r use assigne endpoint search_pvqueri endpoint assigne field field data list singl data frame list column insid assigne level list assigneesdatafram ob variabl assignee_organ chr xerox corpor patent list inventor list query_result distinct entiti count across download page output total_assignee_count choic endpoint determin two thing entiti queri appli first call shown use patent endpoint api search patent least one inventor list last name chamber second call use assigne endpoint api search assigne assign least one patent inventor list last name chamber structur data frame return first call return data frame patent level mean row correspond differ patent field patent level eg inventor_last_nam return list column name entiti associ field eg inventor entiti meanwhil second call gave us data frame assigne level one row assigne use assigne endpoint time want use patent endpoint note still effect filter field patentlevel use patent endpoint eg filter assigne name cpc categori patent rel lowlevel entiti higher level entiti like assigne filter field assigneelevel eg inventor name api return data assigne least one inventor whose name match search probabl want cast field api alway return data field string even would better store use differ data type eg numer cast field prefer r type use cast_pv_data r re search_pv queri patent_numb field cpatent_d patent_titl patent_year right field store charact vector re data list singl data frame patent level list patentsdatafram ob variabl patent_d chr patent_titl chr antiinflammatori analges patch patent_year chr query_result distinct entiti count across download page output total_patent_count use appropri data type cast_pv_dataresdata list singl data frame patent level list patentsdatafram ob variabl patent_d date format patent_titl chr antiinflammatori analges patch patent_year int faq im sure queri well format correct keep get error what deal api queri syntax guidelin cover api behavior specif sever thing document api webpag write queri vignettehttpsdocsropensciorgpatentsviewarticleswritingquerieshtml detail api rate limitingthrottl control moment download record best bet split queri piec base date concaten result togeth exampl queri would return record patent endpoint r queri with_qfunstext_anypatent_abstract tool anim download record associ queri could split two piec make two call search_pv r query_a with_qfun text_anypatent_abstract tool anim ltepatent_d query_b with_qfun text_anypatent_abstract tool anim gtpatent_d access data frame insid list column return search_pv let consid follow data assigne primari entiti applic govern interest statement secondari entiti also refer subent r creat field list asgn_fld cassignee_id assignee_organ subent_fld get_fieldsassigne capplic gov_interest field casgn_fld subent_fld pull data re search_pv queri qry_funscontainsinventor_last_nam smith endpoint assigne field field resdata list singl data frame list column insid assigne level list assigneesdatafram ob variabl assignee_id chr efadfafbb assignee_organ chr us philip corpor applic list gov_interest list resdata vector column field belong primari entiti eg resdataassigneesassignee_id list column field belong secondari entiti eg resdataassigneesappl two good way pull data frame nest insid list column use tidyrunnest probabl easier choic two r librarytidyr attach packag tidyr follow object mask packagemagrittr extract get assigneeappl data resdataassigne unnestappl head tibbl x assignee_id assignee_organi app_countri app_dat app_numb app_typ app_id chr chr chr chr chr chr chr ef us philip co us ef us philip co us ef us philip co us ef us philip co us ef us philip co us ef us philip co us variabl gov_interest list get assigneegov_interest data resdataassigne unnestgov_interest head tibbl x assignee_id assignee_organizati applic govint_contract govint_org_id chr chr list chr chr ef us philip corpor df na na bbbebb xerox corpor df na na bbbebb xerox corpor df ecd bbbebb xerox corpor df nanboh bbbebb xerox corpor df nanboh fcdda commonwealth scient df na na variabl govint_org_level_on chr govint_org_level_two chr govint_org_level_thre lgl govint_org_nam chr govint_raw_stat chr use patentsviewunnest_pv_data unnest_pv_data creat seri data frame one entiti level like tabl relat databas provid data return search_pv field act uniqu identifi primari entiti r unnest_pv_datadata resdata pk assignee_id list applic datafram ob variabl assignee_id chr efadfafbb app_countri chr us app_dat chr app_numb chr app_typ chr app_id chr gov_interestsdatafram ob variabl assignee_id chr efadf govint_contract_award_numb chr na govint_org_id chr na govint_org_level_on chr na govint_org_level_two chr na govint_org_level_thre logi na govint_org_nam chr na govint_raw_stat chr na assigne datafram ob variabl assignee_id chr efadfafbb assignee_organ chr us philip corpor left seri flat data frame instead singl data frame data frame nest insid flat data frame join togeth need via primari key assignee_id use get_endpoint list endpoint name api expect appear eg assigne cpc_subsect inventor locat nber_subcategori patent uspc_mainclass webpag includ detail relev queri argument search_pv field list sort paramet unnest data frame store list column use unnest_pv_data see faq detail titl citat network output rmarkdownhtml_vignett vignett vignetteindexentrycit network vignetteengineknitrrmarkdown vignetteencodingutf follow brief foray patent citat network analysi done patent describ patent citat analysi pca first step download relev data patentsview api use cpc code yshttpsworldwideespacenetcomclassificationcpci identifi patent relat pca r librarypatentsview librarydplyr libraryvisnetwork librarymagrittr librarystringr libraryknitr write queri pull patent assign cpc code ys queri qry_funsbeginscpc_subgroup_id ys creat list field pull api field c patent_numb patent_titl cited_patent_numb patent patent cite citedby_patent_numb patent cite send request api re search_pvqueri field field all_pag true unnest data found list column res_lst unnest_pv_dataresdata pk patent_numb res_lst list cited_pat datafram ob variabl patent_numb chr cited_patent_numb chr citedby_patentsdatafram ob variabl patent_numb chr citedby_patent_numb chr patent datafram ob variabl patent_numb chr patent_titl chr method system probabilist quan pca patent patent cite patent cite patent let visual citat among pca patent well creat visual use visnetwork packag requir us creat data frame node data frame edg r pat_titl functiontitl number temp_titl str_wraptitl gsubn br temp_titl pastea hrefhttpspatentsgooglecompatentu number edg res_lstcited_pat semi_joinx ccited_patent_numb patent_numb set_colnamescfrom node res_lstpat mutat id patent_numb label patent_numb titl pat_titlepatent_titl patent_numb visnetwork node node edg edg height px width main citat among patent citat analysi pca patent visedgesarrow listto listen true visigraphlayout plot chunk unnamedchunkfigureunnamedchunkpng look like sever patent cite patent number perhap indic patent contain technolog foundat field howev hover node see sever patent titl click titl bring us full text googl patent confirm mani pca patent belong patent famili let choos one patent famili act famili repres reduc size subsequ network hope retain overal structur r p c res_lst lapplyres_lst functionx xxpatent_numb p patent probabl possibl visual patent cite cite patent relat one anoth let creat list relev patent ie patent plu cite cite patent get list cite patent ie patent cite list cite patent allow us measur similar relev patent one anoth r rel_pat res_lstcited_pat rbindsetnamesres_lstcitedby_pat name selectpatent_numb renamepatent_numb cited_patent_numb bind_rowsdataframepatent_numb p distinct filterisnapatent_numb look patent relev patent cite rel_pats_r search_pv queri listpatent_numb rel_patspatent_numb field ccited_patent_numb patent_numb patent_titl all_pag true method post rel_pats_lst unnest_pv_datarel_pats_resdata patent_numb know patent relev patent cite allow us measur similar patent see mani cite refer share common method known bibliograph couplinghttpsenwikipediaorgwikibibliographic_coupl r cited_pat rel_pats_lstcited_pat filterisnacited_patent_numb full_network cited_pat ind group_bi patent_numb group_indic group_bi patent_numb mutatesqrt_num_cit sqrtn inner_joinx cited_patent_numb filterindx indi group_bypatent_numberx patent_numberi mutatecosine_sim n sqrt_num_citedx sqrt_num_citedi ungroup selectmatchespatent_numbercosine_sim distinct kableheadfull_network patent_numberx patent_numberi cosine_sim full_network contain similar score cosine_sim patent pair share least one cite refer common mean probabl contain lot patent pair one two cite refer common thu arent similar let tri identifi natur level cosine_sim filter subsequ network hairi r hist full_networkcosine_sim main similar score patent relev pca xlab cosin similar ylab number patent pair plot chunk unnamedchunkfigureunnamedchunkpng appear smallish group patent pair similar one anoth cosine_sim make tempt choos cutoff point howev patent pair refer list similar probabl patent patent famili let choos cutoff point instead doesnt appear mani pair point r edg full_network filtercosine_sim renamefrom patent_numberx patent_numberi valu cosine_sim mutatetitl pastecosin similar ascharacterroundvalu node rel_pats_lstpat renameid patent_numb mutat patent interest repres blue node other yellow color ifelseid p cfc ddcc label id titl pat_titlepatent_titl id visnetwork node node edg edg height px width main network patent relev pca visedgescolor listcolor visoptionshighlightnearest listen true degre visigraphlayout plot chunk unnamedchunkfigureunnamedchunkpng patent famili group relat patent usual author inventor relat technolog defin network patent relev pca cite cite patent interest fairli restrict ie doesnt adequ captur patent relat pca like patent arent cite cite still relev pca one would need measur similar patent gener area pca get complet pictur patent area much harder problem though would requir analysi fit singl vignett still pretti arbitrari choic take look algorithm like dispar filterhttpwwwpnasorgcontentfullpdf systemat way filter edg gener roxygen edit hand pleas edit document rgetfieldsr nameget_endpoint aliasget_endpoint titleget endpoint usag get_endpoint valu charact vector name endpoint endpoint item item assigne item cpc_subsect item inventor item locat item nber_subcategori item patent item uspc_mainclass descript function remind user possibl patentsview api endpoint exampl get_endpoint gener roxygen edit hand pleas edit document rquerydslr doctypedata nameqry_fun aliasqry_fun titlelist queri function format object class codelist length usag qry_fun valu object class codepv_queri basic simpl list print method attach descript list function make easi write patentsview queri see detail section list function well hrefhttpsdocsropensciorgpatentsviewarticleswritingquerieshtmlwrit queri vignett detail detail strong comparison oper function cr comparison oper function work field type integ float date string item item codeeq equal item codeneq equal item codegt greater item codegt greater equal item codelt less item codelt less equal comparison oper function work field type string item item codebegin string begin valu string item codecontain string contain valu string comparison oper function work field type fulltext item item codetext_al text contain word valu string item codetext_ani text contain word valu string item codetext_phras text contain exact phrase valu string strong array function cr array function item item codeand member array must true item codeor one member array must true strong negat function cr negat function item item codenot comparison true exampl qry_funseqpatent_d qry_funsnotqry_funseqpatent_d keyworddataset gener roxygen edit hand pleas edit document rcastpvdatar namecast_pv_data aliascast_pv_data titlecast patentsview data usag cast_pv_datadata argument itemdatath data return codelinksearch_pv first element threeelement result object got back codesearch_pv list length one data frame insid see exampl valu type object pass codecast_pv_data descript cast data field return codelinksearch_pv appropri data type eg date numer etc exampl dontrun field cpatent_d patent_titl patent_year re search_pvqueri patent_numb field field cast_pv_datadata resdata gener roxygen edit hand pleas edit document rdatar doctypedata namefieldsdf aliasfieldsdf titlefield data frame format data frame row variabl describ itemendpointth endpoint field record itemfieldth name field itemdata_typeth field data type string date float integ fulltext itemcan_queryan indic whether field includ user queri given endpoint itemgroupth group field belong itemcommon_nameth field common name itemdescriptiona descript field usag fieldsdf descript data frame contain name retriev queryabl field api endpoint yesno flag codecan_queri indic field includ user queri also find data api onlin document endpoint well eg hrefhttpspatentsvieworgapisapiendpointspatentspat endpoint field list tabl keyworddataset gener roxygen edit hand pleas edit document rquerydslr namewith_qfun aliaswith_qfun titlewith qry_fun usag with_qfunscod envir parentfram argument itemcodecod evalu see exampl itemenvirwher r look object present codecod arent present codelinkqry_fun valu result codecod ie queri descript function evalu whatev code pass environ codelinkqry_fun list allow cut type write queri want cut type even tri assign codelinkqry_fun list global environ codelistenvqry_fun envir globalenv exampl without with_qfun qry_funsand qry_funsgtepatent_d qry_funstext_phrasepatent_abstract ccomput program qry_funsor qry_funseqinventor_last_nam ihaka qry_funseqinventor_first_nam chri becom with_qfun gtepatent_d text_phrasepatent_abstract ccomput program eqinventor_last_nam ihaka eqinventor_first_nam chri gener roxygen edit hand pleas edit document rgetfieldsr nameget_field aliasget_field titleget list retriev field usag get_fieldsendpoint group null argument itemendpointth api endpoint whose field list want get see codelinkget_endpoint list endpoint itemgroupsa charact vector give group whose field want return valu codenul indic want endpoint field ie filter field list base group membership see field tabl locat onlin see group specifi given endpoint eg hrefhttpspatentsvieworgapisapiendpointspatentspat endpoint tabl use codefieldsdf tabl eg codeuniquefieldsdffieldsdfendpoint patent group valu charact vector field name descript function return vector field retriev given api endpoint ie field pass codefield argument codelinksearch_pv limit field cover certain entiti group well recommend given larg number possibl field endpoint exampl get assigneelevel field patent endpoint field get_fieldsendpoint patent group assigne pass search_pv dontrun search_pv queri _gtepatent_d field field get patent assigneelevel field patent endpoint field get_fieldsendpoint patent group cassigne patent dontrun pass search_pv search_pv queri _gtepatent_d field field gener roxygen edit hand pleas edit document runnestpvdatar nameget_ok_pk aliasget_ok_pk titleget ok primari key usag get_ok_pkendpoint argument itemendpointth endpoint would like know potenti primari key valu name primari key codepk could pass codelinkunnest_pv_data descript function suggest valu could use codepk argument codelinkunnest_pv_data base endpoint search return potenti uniqu identifi given entiti ie given endpoint exampl return patent_numb codeendpoint patent exampl get_ok_pkendpoint inventor return inventor_id get_ok_pkendpoint cpc_subsect return cpc_subsection_id gener roxygen edit hand pleas edit document rsearchpvr namesearch_pv aliassearch_pv titlesearch patentsview usag search_pv queri field null endpoint patent subent_cnt fals mtchd_subent_onli true page per_pag all_pag fals sort null method get error_brows null argument itemqueryth queri api use filter record codequeri come one follow form item item charact string valid json cr eg code_gtepatent_d item list convert json codesearch_pv cr eg codelist_gt listpatent_d item object class codepv_queri creat call one function found codelinkqry_fun listse hrefhttpsdocsropensciorgpatentsviewarticleswritingquerieshtmlwrit queri vignett detailscr eg codeqry_funsgtepatent_d itemfieldsa charact vector field want return valu codenul indic default field return accept field given endpoint found api onlin document eg check field list hrefhttpspatentsvieworgapisapiendpointspatentspat endpoint view codefieldsdf data frame codeviewfieldsdf also use codelinkget_field list field avail given endpoint itemendpointth web servic resourc wish search codeendpoint must one follow patent inventor assigne locat cpc_subsect uspc_mainclass nber_subcategori itemsubent_cntsdo want total count uniqu subent return equival codeinclude_subentity_total_count paramet found hrefhttpspatentsvieworgapisapiquerylanguageher itemmtchd_subent_onlydo want subent match queri return valu codetru indic subent meet queri requir order return valu codefals indic subent data return even record dont meet queri requir equival codematched_subentities_onli paramet found hrefhttpspatentsvieworgapisapiquerylanguageher itempageth page number result return itemper_pageth number record return per page valu high eg codeper_pag itemall_pagesdo want download possibl page output codeall_pag true valu codepag codeper_pag ignor itemsorta name charact vector name indic field sort valu indic direct sort direct either asc desc exampl codesort cpatent_numb asc crcodesort cpatent_numb asc patent_d desc codesort null default mean sort result must includ field wish sort codefield itemmethodth http method want use send request possibl valu includ get post use post method queri long say charact length itemerror_browserdeprec itemargu pass along httr codelinkhttrget codelinkhttrpost function valu list follow three element describ itemdataa list one element name data frame contain data return server row data frame correspond singl valu primari entiti exampl search assigne endpoint data frame assigneelevel row correspond singl assigne field assigneelevel would return list column itemquery_resultsent count across page output page return set codesubent_cnt true return count primari entiti subent itemrequestdetail http request sent server set codeall_pag true get sampl request word given multipl request multipl call made server one page result descript function make http request patentsview api data match user queri exampl dontrun search_pvqueri _gtpatent_year search_pv queri qry_funsgtpatent_year field get_fieldspat cpatent assigne search_pv queri qry_funsgtpatent_year method post field patent_numb sort cpatent_numb asc search_pv queri qry_funseqinventor_last_nam crew all_pag true search_pv queri qry_funscontainsinventor_last_nam smith endpoint assigne search_pv queri qry_funscontainsinventor_last_nam smith config httrtimeout gener roxygen edit hand pleas edit document runnestpvdatar nameunnest_pv_data aliasunnest_pv_data titleunnest patentsview data usag unnest_pv_datadata pk get_ok_pknamesdata argument itemdatath data return codelinksearch_pv first element threeelement result object got back codesearch_pv list length one data frame insid see exampl itempkth columnfield name link data frame togeth uniqu identifi primari entiti exampl use patent endpoint call codesearch_pv could specifi codepk patent_numb strongthi identifi includ codefield vector call codesearch_pv use codelinkget_ok_pk suggest potenti primari key data valu list multipl data frame one entitysubent data frame codepk column link tabl togeth need descript function convert singl data frame subentitylevel list column multipl data frame one entitysubent multipl data frame merg togeth use primari key variabl specifi user see hrefhttpsrdshadconzrelationaldatahtmlrel data chapter r data scienc indepth introduct join tabular data exampl dontrun field cpatent_numb patent_titl inventor_c inventor_countri re search_pvqueri _gtepatent_year field field unnest_pv_datadata resdata pk patent_numb