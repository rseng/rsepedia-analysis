# spelling

[![Project Status: Active – The project has reached a stable, usable state and is being actively developed.](http://www.repostatus.org/badges/latest/active.svg)](http://www.repostatus.org/#active)
[![Build Status](https://travis-ci.org/ropensci/spelling.svg?branch=master)](https://travis-ci.org/ropensci/spelling)
[![AppVeyor Build Status](https://ci.appveyor.com/api/projects/status/github/ropensci/spelling?branch=master&svg=true)](https://ci.appveyor.com/project/jeroen/spelling)
[![CRAN_Status_Badge](http://www.r-pkg.org/badges/version/spelling)](http://cran.r-project.org/package=spelling)
[![CRAN RStudio mirror downloads](http://cranlogs.r-pkg.org/badges/spelling)](http://cran.r-project.org/web/packages/spelling/index.html)

> Tools for Spell Checking in R

Spell checking common document formats including latex, markdown, manual pages,
and description files. Includes utilities to automate checking of documentation and 
vignettes as a unit test during 'R CMD check'. Both British and American English are 
supported out of the box and other languages can be added. In addition, packages may
define a 'wordlist' to allow custom terminology without having to abuse punctuation.

## Spell Check Single Files

The function `spell_check_files` automatically parses known text formats and only spell checks text blocks, not code chunks.

```r
spell_check_files('README.md', lang = 'en_US')
#   WORD       FOUND IN
# AppVeyor   README.md:5
# CMD        README.md:12
# RStudio    README.md:8
```

For more information about the underlying spelling engine and how to add 
support for other languages, see the [hunspell package](https://docs.ropensci.org/hunspell/articles/intro.html#hunspell-dictionaries).

![screenshot](https://jeroen.github.io/images/rs-hunspell.png)

## Spell Check a Package

Spell check documentation, description, readme, and vignettes of a package:

```r
spell_check_package("~/workspace/V8")
# DESCRIPTION does not contain 'Language' field. Defaulting to 'en-US'.
#   WORD          FOUND IN
# ECMA          V8.Rd:16, description:2,4
# emscripten    description:5
# htmlwidgets   JS.Rd:16
# JSON          V8.Rd:33,38,39,57,58,59,121
# jsonlite      V8.Rd:42
# Ooms          V8.Rd:41,121
# th            description:3
# Xie           JS.Rd:26
# Yihui         JS.Rd:26
```

Review these words and then update the wordlist to allow them:


```r
update_wordlist("~/workspace/V8")
# The following words will be added to the wordlist:
#  - ECMA
#  - emscripten
#  - htmlwidgets
#  - JSON
#  - jsonlite
#  - Ooms
#  - th
#  - Xie
#  - Yihui
# Are you sure you want to update the wordlist?
# 1: Yes
# 2: No
```

Then these will no longer be marked as errors:

```r
> spell_check_package("~/workspace/V8")
No spelling errors found.
```

## Automate Package Spell Checking

Use `spell_check_setup()` to add a unit test to your package which automatically runs a spell check on documentation and vignettes during `R CMD check` if the environment variable `NOT_CRAN` is set to `TRUE`. By default this unit test never fails; it merely prints potential spelling errors to the console.


```r
spell_check_setup("~/workspace/V8")
# Adding 'Language: en-US' to DESCRIPTION
# No changes required to /Users/jeroen/workspace/V8/inst/WORDLIST
# Updated /Users/jeroen/workspace/V8/tests/spelling.R
```

Note that the `NOT_CRAN` variable is automatically set to 1 on Travis and in devtools or RStudio, otherwise you need to set it yourself:

```sh
export NOT_CRAN=1
R CMD check V8_1.5.9000.tar.gz
# * using log directory ‘/Users/jeroen/workspace/V8.Rcheck’
# * using R version 3.5.1 (2018-07-02)
# * using platform: x86_64-apple-darwin15.6.0 (64-bit)
# ...
# ...
# * checking tests ...
#   Running ‘spelling.R’
#   Comparing ‘spelling.Rout’ to ‘spelling.Rout.save’ ... OK
#   Running ‘testthat.R’
#  OK
```
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/spell-check.R
\name{spell_check_package}
\alias{spell_check_package}
\alias{spelling}
\alias{spell_check_setup}
\alias{spell_check_test}
\title{Package Spell Checking}
\usage{
spell_check_package(pkg = ".", vignettes = TRUE, use_wordlist = TRUE)

spell_check_setup(pkg = ".", vignettes = TRUE, lang = "en-US", error = FALSE)
}
\arguments{
\item{pkg}{path to package root directory containing the \code{DESCRIPTION} file}

\item{vignettes}{check all \code{rmd} and \code{rnw} files in the pkg root directory (e.g.
\code{readme.md}) and package \code{vignettes} folder.}

\item{use_wordlist}{ignore words in the package \link[=get_wordlist]{WORDLIST} file}

\item{lang}{set \code{Language} field in \code{DESCRIPTION} e.g. \code{"en-US"} or \code{"en-GB"}.
For supporting other languages, see the \href{https://docs.ropensci.org/hunspell/articles/intro.html#hunspell-dictionaries}{hunspell vignette}.}

\item{error}{should \verb{CMD check} fail if spelling errors are found?
Default only prints results.}
}
\description{
Automatically spell-check package description, documentation, and vignettes.
}
\details{
Parses and checks R manual pages, rmd/rnw vignettes, and text fields in the
package \code{DESCRIPTION} file.

The preferred spelling language (typically \code{en-GB} or \code{en-US}) should be specified
in the \code{Language} field from your package \code{DESCRIPTION}. To allow custom words,
use the package \link[=get_wordlist]{WORDLIST} file which will be added to the dictionary
when spell checking. See \link{update_wordlist} to automatically populate and update this
file.

The \link{spell_check_setup} function adds a unit test to your package which automatically
runs a spell check on documentation and vignettes during \verb{R CMD check} if the environment
variable \code{NOT_CRAN} is set to \code{TRUE}. By default this unit test never fails; it merely
prints potential spelling errors to the console. If not already done,
the \link{spell_check_setup} function will add \code{spelling} as a \code{Suggests} dependency,
and a \code{Language} field to \code{DESCRIPTION}.

Hunspell includes dictionaries for \code{en_US} and \code{en_GB} by default. Other languages
require installation of a custom dictionary, see \link[hunspell:hunspell]{hunspell} for details.
}
\seealso{
Other spelling: \code{\link{spell_check_files}()},
  \code{\link{wordlist}}
}
\concept{spelling}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/wordlist.R
\name{wordlist}
\alias{wordlist}
\alias{update_wordlist}
\alias{get_wordlist}
\title{The WORDLIST file}
\usage{
update_wordlist(pkg = ".", vignettes = TRUE, confirm = TRUE)

get_wordlist(pkg = ".")
}
\arguments{
\item{pkg}{path to package root directory containing the \code{DESCRIPTION} file}

\item{vignettes}{check all \code{rmd} and \code{rnw} files in the pkg root directory (e.g.
\code{readme.md}) and package \code{vignettes} folder.}

\item{confirm}{show changes and ask confirmation before adding new words to the list}
}
\description{
The package wordlist file is used to allow custom words which will be added to the
dictionary when spell checking. It is stored in \code{inst/WORDLIST} in the source package
and must contain one word per line in UTF-8 encoded text.
}
\details{
The \link{update_wordlist} function runs a full spell check on a package, shows the results,
and then prompts to add the found words to the package wordlist. Obviously you should
check closely that these legitimate words and not actual spelling errors. It also
removes words from the wordlist that no longer appear as spelling errors, either because
they have been removed from the documentation or added to the \code{lang} dictionary.
}
\seealso{
Other spelling: \code{\link{spell_check_files}()},
  \code{\link{spell_check_package}()}
}
\concept{spelling}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/check-files.R
\name{spell_check_files}
\alias{spell_check_files}
\alias{spell_check_text}
\title{Spell Check}
\usage{
spell_check_files(path, ignore = character(), lang = "en_US")

spell_check_text(text, ignore = character(), lang = "en_US")
}
\arguments{
\item{path}{path to file or to spell check}

\item{ignore}{character vector with words which will be added to the \link[hunspell:dictionary]{hunspell::dictionary}}

\item{lang}{set \code{Language} field in \code{DESCRIPTION} e.g. \code{"en-US"} or \code{"en-GB"}.
For supporting other languages, see the \href{https://docs.ropensci.org/hunspell/articles/intro.html#hunspell-dictionaries}{hunspell vignette}.}

\item{text}{character vector with plain text}
}
\description{
Perform a spell check on document files or plain text.
}
\details{
This function parses a file based on the file extension, and checks only
text fields while ignoring code chunks and meta data. It works particularly
well for markdown, but also latex, html, xml, pdf, and plain text are
supported.

For more information about the underlying spelling engine, see the
\href{https://docs.ropensci.org/hunspell/articles/intro.html#hunspell-dictionaries}{hunspell package}.
}
\examples{
# Example files
files <- list.files(system.file("examples", package = "knitr"),
  pattern = "\\\\.(Rnw|Rmd|html)$", full.names = TRUE)
spell_check_files(files)
}
\seealso{
Other spelling: \code{\link{spell_check_package}()},
  \code{\link{wordlist}}
}
\concept{spelling}
