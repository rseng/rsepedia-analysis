
Base package for `outsider` <img src="https://raw.githubusercontent.com/ropensci/outsider/master/logo.png" height="200" align="right"/>
----

[![Build Status](https://travis-ci.org/ropensci/outsider.base.svg?branch=master)](https://travis-ci.org/ropensci/outsider.base) [![AppVeyor build status](https://ci.appveyor.com/api/projects/status/github/ropensci/outsider.base?branch=master&svg=true)](https://ci.appveyor.com/project/DomBennett/outsider-base) [![Coverage Status](https://coveralls.io/repos/github/ropensci/outsider.base/badge.svg?branch=master)](https://coveralls.io/github/ropensci/outsider.base?branch=master) 
[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.3615056.svg)](https://doi.org/10.5281/zenodo.3615056)


See [`outsider`](https://github.com/ropensci/outsider) for more details.



<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>


---

[![ropensci_footer](https://ropensci.org/public_images/ropensci_footer.png)](https://ropensci.org)# outsider.base 0.1.2

* Fix Docker installation check and SSH missing error

# outsider.base 0.1.1

## ROpenSci accepted version

* Improved documentation

# outsider.base 0.1.0

## Initial version

* Develop modules
If you wish to contribute please be aware that this package requires the
`om..hello.world` submodule under `/inst/extdata`.

The fastest way to set up your system for editing the package is to run the
following git commands.

```{bash}
# clone the main repo
git clone https://github.com/ropensci/outsider.base.git
# initate and download the latest repo of the submodule
git submodule update --init --recursive
```

Read up more on submodules [here](https://git-scm.com/book/en/v2/Git-Tools-Submodules).

See the main `outsider` package's
[CONTRIBUTING.md](https://github.com/ropensci/outsider/blob/master/CONTRIBUTING.md)
for more information on contributing to the `outsider` project in general.
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/docker.R
\name{is_docker_available}
\alias{is_docker_available}
\title{Check if Docker is installed and running}
\usage{
is_docker_available(call_error = TRUE)
}
\arguments{
\item{call_error}{Call an error if no Docker detected? Default TRUE.}
}
\description{
Raises an error if docker is not available.
}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/docker.R
\name{docker_img_ls}
\alias{docker_img_ls}
\title{List the number of installed images}
\usage{
docker_img_ls()
}
\value{
tibble
}
\description{
Return a table of all the available Docker images.
}
\concept{docker}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/outsider.R
\name{outsider-class}
\alias{outsider-class}
\alias{outsider_init}
\alias{outsider-methods}
\alias{run}
\alias{run.outsider}
\title{Construct outsider object}
\usage{
outsider_init(
  pkgnm,
  cmd = NA,
  arglist = NULL,
  wd = NULL,
  files_to_send = NULL,
  ignore_errors = FALSE
)

run(x, ...)

\method{run}{outsider}(x, ...)
}
\arguments{
\item{pkgnm}{Name of the installed R package for the outsider module}

\item{cmd}{Command to be called in the container}

\item{arglist}{Arguments for command, character vector}

\item{wd}{Directory to which program generated files will be returned}

\item{files_to_send}{Files to be sent to container}

\item{ignore_errors}{Ignore raised errors? Default FALSE.}

\item{x}{outsider object}

\item{...}{Additional arguments}
}
\value{
A list of class \code{outsider} with the following items:
\item{pkgnm}{Package name of the outsider module}
\item{cmd}{Command to be called in the container}
\item{arglist}{Arguments for command, character vector}
\item{wd}{Directory to which program generated files will be returned}
\item{files_to_send}{Files to be sent to container}
\item{container}{Docker container object}
\item{ignore_errors}{Prevent errors being raised}
}
\description{
Returns an outsider object. The outsider object describes a
outsider module's program and arguments. The object is generated every
time an outsider module program is called. It details the arguments of a
call, the command as well as the files to send to the docker container.
}
\details{
The outsider module runs a docker container that acts like a 
separate machine on the host computer. All the files necessary for the 
program to be run must be sent to the remote machine before the program
is called.
The arguments, wd and files_to_send can all be defined after the outsider
has been initiated using \code{$} notation.
Once a outsider has been defined, the command can be run using
\code{.run()}.
The \code{arglist}, \code{wd} or \code{files_to_send} do not need to be
defined for the outsider to be run.
}
\examples{
\dontrun{
# Set-up: install "hello.world", ships with ubuntu
# we can make simple commands in bash via R using the module
library(outsider.base)

# Manually install example module
# outsider.base contains the hello.world module in its package files
pkgnm <- 'om..hello.world'
mdl_flpth <- system.file('extdata', 'om..hello.world',
                         package = "outsider.base")
# install and import (outsider::module_install performs these tasks)
pkg_install(flpth = mdl_flpth)
image_install(pkgnm = pkgnm)

# Run echo
# create a outsider object that contains argument and Docker container details
otsdr <- outsider_init(pkgnm = pkgnm, cmd = 'echo', arglist = c('hello world!'))
# check details
print(otsdr)
# run the command
run(otsdr)

# Send a file
# an existing outsider object can be modified
tmppth <- tempdir()
flpth <- file.path(tmppth, 'testfile')
write(x = 'hello from within a file!', file = flpth)
otsdr$files_to_send <- flpth
otsdr$cmd <- 'cat'
otsdr$arglist <- 'testfile'
# check details
print(otsdr)
# run the command
run(otsdr)

# Return a file
# an existing outsider object can be modified
otsdr$files_to_send <- NULL
otsdr$cmd <- 'touch'
otsdr$arglist <- 'newfile'
otsdr$wd <- tmppth  # determines where created files are returned to
# check details
print(otsdr)
# run the command
run(otsdr)
# check if 'newfile' exists in tempdir()
nwflpth <- file.path(tmppth, 'newfile')
(file.exists(nwflpth))

# Clean-up
rm(otsdr)
file.remove(flpth)
file.remove(nwflpth)
uninstall(pkgnm)
}
}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/args.R
\name{arglist_parse}
\alias{arglist_parse}
\title{Normalise arguments for docker container}
\usage{
arglist_parse(
  arglist,
  keyvals_to_drop = NULL,
  vals_to_drop = NULL,
  normalise_paths = TRUE
)
}
\arguments{
\item{arglist}{Arguments as character vector}

\item{keyvals_to_drop}{Argument keys to drop, e.g. -wd.}

\item{vals_to_drop}{Specific values to drop, e.g. --verbose.}

\item{normalise_paths}{Reduce paths to basenames? Default, TRUE.}
}
\value{
Character vector
}
\description{
Utility function for parsing the arguments provided by a user.
Drop any specified key:value pairs with \code{keyvals_to_drop} or drop any
specific values \code{vals_to_drop}. With \code{normalise_paths} as TRUE,
all filepaths in the arglist will be converted to basenames.
}
\details{
It is important the file paths are normalised, because they will
not be available to the Docker container. The only files available will
be those that have been transferred to the container as determined through
the \code{\link{outsider_init}}. These files will be located in the
same directory as where the function is called and require no absolute
file path.
}
\examples{
library(outsider.base)
wd <- file.path(tempdir(), 'results')
dir.create(wd)
arglist <- c('-a', 10, '-b', 'model2', '-wd', wd, '--unwanted')
# drop unwanted key:value pairs
(arglist_parse(arglist = arglist, keyvals_to_drop = '-wd',
               normalise_paths = FALSE))
# drop unwanted argument values
(arglist_parse(arglist = arglist, vals_to_drop = '--unwanted',
               normalise_paths = FALSE))
# make paths relative, necessary for Docker:
#   paths must be relative to the working directory in the container
(arglist_parse(arglist = arglist, normalise_paths = TRUE))


# clean-up
unlink(wd, recursive = TRUE)
}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/install.R
\name{uninstall}
\alias{uninstall}
\title{Uninstall and remove a module}
\usage{
uninstall(pkgnm)
}
\arguments{
\item{pkgnm}{Package name}
}
\value{
Logical(1)
}
\description{
Remove outsider module: uninstall package, delete Docker image.
}
\details{
If program is successfully removed TRUE is returned, else FALSE.
}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/args.R
\name{filestosend_get}
\alias{filestosend_get}
\title{Determine which arguments are filepaths}
\usage{
filestosend_get(arglist, wd = NULL)
}
\arguments{
\item{arglist}{Character vector of arguments}

\item{wd}{Working directory in which to look for files}
}
\value{
Character vector
}
\description{
Return filepaths from arguments. These filepaths can then be
used to identify files/folders for sending to the Docker container.
}
\examples{
library(outsider.base)
# set-up: create wd and files to send
wd <- file.path(tempdir(), 'results')
dir.create(wd)
file1 <- file.path(wd, 'file1')
file.create(file1)
file2 <- file.path(wd, 'file2')
file.create(file2)


# identify files to be sent to container
arglist <- c('-in', file1, '-out', file2)
(filestosend_get(arglist = arglist))
# works with -wd
arglist <- c('-in', 'file1', '-out', 'file2', '-wd', wd)
(filestosend_get(arglist = arglist, wd = wd))


# clean-up
unlink(wd, recursive = TRUE)
}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ssh.R
\name{is_server_connected}
\alias{is_server_connected}
\title{Is server connected?}
\usage{
is_server_connected()
}
\value{
logical
}
\description{
Return TRUE if an \code{ssh} session exists with which
\code{outsider} can interact.
}
\details{
This requires installation of \code{ssh} package.
}
\seealso{
Other private-server: 
\code{\link{server_download}()},
\code{\link{server_fetch}()},
\code{\link{server_upload}()}
}
\concept{private-server}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/args.R
\name{arglist_get}
\alias{arglist_get}
\title{Generate vector of arguments}
\usage{
arglist_get(...)
}
\arguments{
\item{...}{Any number of arguments}
}
\value{
Character vector
}
\description{
Convert all the arguments passed to this function, including
those contained in '...', into character vector.
}
\examples{
library(outsider.base)
# return a character vector of all arguments provided
arglist_get('any', 'number', 'of', 'arguments...', 'number', 'or', 'anything',
            1L, TRUE)
}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/install.R
\name{is_installed}
\alias{is_installed}
\title{Is module installed?}
\usage{
is_installed(pkgnm)
}
\arguments{
\item{pkgnm}{Package name}
}
\value{
logical(1)
}
\description{
Return TRUE if module is installed.
}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sys.R
\name{exec_internal}
\alias{exec_internal}
\title{Execute system commands and wait for response}
\usage{
exec_internal(
  cmd,
  args = NULL,
  std_in = NULL,
  error = TRUE,
  timeout = 0,
  with_ssh = TRUE
)
}
\arguments{
\item{cmd}{Command}

\item{args}{Arguments}

\item{std_in}{Standard in}

\item{error}{Call an error? T/F}

\item{timeout}{Timeout}

\item{with_ssh}{Try and run with ssh, default TRUE}
}
\value{
logical
}
\description{
Passes arguments to
`sys::exec_internal`, if a server is connected
arguments are passed to
`ssh::ssh_exec_internal` instead.
}
\seealso{
Other private-sys: 
\code{\link{exec_wait}()}
}
\concept{private-sys}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ssh.R
\name{server_fetch}
\alias{server_fetch}
\title{Fetch server "session"}
\usage{
server_fetch(verbose)
}
\arguments{
\item{verbose}{Be verbose? Logical.}
}
\value{
ssh session
}
\description{
Return connected session to server.
}
\details{
See `ssh::ssh_connect` for more details.
}
\seealso{
Other private-server: 
\code{\link{is_server_connected}()},
\code{\link{server_download}()},
\code{\link{server_upload}()}
}
\concept{private-server}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sys.R
\name{exec_wait}
\alias{exec_wait}
\title{Execute system commands and wait for response}
\usage{
exec_wait(
  cmd,
  args = NULL,
  std_out = stdout(),
  std_err = stderr(),
  std_in = NULL,
  timeout = 0,
  with_ssh = TRUE
)
}
\arguments{
\item{cmd}{Command}

\item{args}{Arguments}

\item{std_out}{Standard out}

\item{std_err}{Standard error}

\item{std_in}{Standard in}

\item{timeout}{Timeout}

\item{with_ssh}{Try and run with ssh, default TRUE}
}
\value{
logical
}
\description{
Passes arguments to `sys::exec_wait`, if
a server is connected arguments are passed to
`ssh::ssh_exec_wait` instead.
}
\seealso{
Other private-sys: 
\code{\link{exec_internal}()}
}
\concept{private-sys}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/install.R
\name{image_install}
\alias{image_install}
\title{Install module's image}
\usage{
image_install(pkgnm, tag = "latest", pull = TRUE)
}
\arguments{
\item{pkgnm}{Name of module's R package}

\item{tag}{Docker tag, default 'latest'}

\item{pull}{Pull from Docker Hub or build locally? Default, FALSE.}
}
\value{
Integer
}
\description{
Install the Docker image for an outsider module after the module
package has been installed.
}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/args.R
\name{dirpath_get}
\alias{dirpath_get}
\title{Convert file path to directory path}
\usage{
dirpath_get(flpth)
}
\arguments{
\item{flpth}{File path for which directory path will be returned.}
}
\value{
Character
}
\description{
Takes a file path and converts it to its directory path by
dropping the file name and extension. If \code{flpth} is already a directory
path, the argument will be returned unchanged. If nothing is provided,
nothing is returned (i.e. \code{character(0)}).
}
\examples{
library(outsider.base)
# get the parent directory from a filepath
drpth <- tempdir()
flpth <- file.path(drpth, 'testfile')
file.create(flpth)
(dirpath_get(flpth = flpth) == drpth)
(dirpath_get(flpth = drpth) == drpth)
file.remove(flpth)
}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ssh.R
\name{server_connect}
\alias{server_connect}
\title{Connect to a server}
\usage{
server_connect(session)
}
\arguments{
\item{session}{ssh session, see `ssh::ssh_connect`.}
}
\value{
logical
}
\description{
Connect to a server, make accessible to \code{outsider} and
set-up for \code{outsider} interaction.
}
\details{
This requires installation of \code{ssh} package.
}
\examples{
library(outsider.base)

# NOT RUN
\dontrun{
if (requireNamespace("ssh", quietly = TRUE)) {
  session <- ssh::ssh_connect(host = '[INSERT HOST IP]')
  server_connect(session = session)
  # run outsider.base commands, when finished
  server_disconnect()
}
}
}
\seealso{
Other public-server: 
\code{\link{server_disconnect}()}
}
\concept{public-server}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/install.R
\name{pkg_install}
\alias{pkg_install}
\title{Install outsider module package}
\usage{
pkg_install(flpth, verbose = TRUE)
}
\arguments{
\item{flpth}{File path to module directory.}

\item{verbose}{Be verbose? Default TRUE.}
}
\value{
Logical(1)
}
\description{
Install outsider module's package.
}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/docker.R
\name{docker_pull}
\alias{docker_pull}
\title{Pull an image from DockerHub.}
\usage{
docker_pull(img, tag = "latest")
}
\arguments{
\item{img}{Image name}

\item{tag}{Tag version, default latest.}
}
\value{
Logical
}
\description{
Speeds up outsider module installation by downloading compiled
images.
}
\seealso{
Other private-docker: 
\code{\link{container-class}},
\code{\link{docker_build}()},
\code{\link{docker_cmd}()},
\code{\link{docker_cp}()},
\code{\link{docker_img_rm}()},
\code{\link{docker_ps_count}()}
}
\concept{private-docker}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/container.R
\name{container-class}
\alias{container-class}
\alias{container_init}
\alias{container-methods}
\alias{start.container}
\alias{halt.container}
\alias{exec.container}
\alias{status.container}
\alias{copy.container}
\alias{run.container}
\title{Docker container class and methods}
\usage{
container_init(pkgnm)

\method{start}{container}(x)

\method{halt}{container}(x)

\method{exec}{container}(x, ...)

\method{status}{container}(x)

\method{copy}{container}(x, send = NULL, rtrn = NULL)

\method{run}{container}(x, cmd, args)
}
\arguments{
\item{pkgnm}{Package name}

\item{x}{container}

\item{...}{Arguments}

\item{send}{Filepaths to send from host computer to container.}

\item{rtrn}{Directory on host computer where returning files should be sent.}

\item{cmd}{Command name, character}

\item{args}{List or vector of arguments, character}
}
\value{
A list of class \code{container} with the following items:
\item{pkgnm}{Package name of the outsider module}
\item{prgrm}{Command to be called in the container}
\item{cntnr}{Unique Docker container name}
\item{img}{Image ID}
}
\description{
Return a list class that describes a Docker container.
The resulting class object comes with a series of convenience methods
for starting, stopping and interacting with a container.
}
\details{
All outsider modules have a \code{working_dir/} in which generated
files are created and initiation files must be for the program to use.
Files must be sent to this working directory and then returned before and
after the program has run.

If no \code{send} or \code{rtrn} specified, returns TRUE.
}
\seealso{
Other private-docker: 
\code{\link{docker_build}()},
\code{\link{docker_cmd}()},
\code{\link{docker_cp}()},
\code{\link{docker_img_rm}()},
\code{\link{docker_ps_count}()},
\code{\link{docker_pull}()}
}
\concept{private-docker}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ssh.R
\name{server_download}
\alias{server_download}
\title{Download from server}
\usage{
server_download(origin, dest)
}
\arguments{
\item{origin}{Origin filepath}

\item{dest}{Destination filepath}
}
\value{
Logical
}
\description{
Download file/folder from connected server. File is copied to
a temporary folder before transferred to desired destination.
}
\seealso{
Other private-server: 
\code{\link{is_server_connected}()},
\code{\link{server_fetch}()},
\code{\link{server_upload}()}
}
\concept{private-server}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/args.R
\name{is_filepath}
\alias{is_filepath}
\title{Is a filepath?}
\usage{
is_filepath(x)
}
\arguments{
\item{x}{Character vector}
}
\value{
Logical
}
\description{
Return TRUE or FALSE for whether character(s) is a valid
filepath.
}
\seealso{
Other private: 
\code{\link{log_get}()},
\code{\link{to_basename}()}
}
\concept{private}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/args.R
\name{to_basename}
\alias{to_basename}
\title{Reduce to filepaths to basename}
\usage{
to_basename(x)
}
\arguments{
\item{x}{Character vector}
}
\value{
Character vector
}
\description{
Return return a vector where all valid filepaths are converted
to file basenames. E.g. "dir1/dir2/text.file" is converted to "text.file"
}
\seealso{
Other private: 
\code{\link{is_filepath}()},
\code{\link{log_get}()}
}
\concept{private}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/identities.R
\name{docker_ids_get}
\alias{docker_ids_get}
\title{Get docker names for a module}
\usage{
docker_ids_get(pkgnm)
}
\arguments{
\item{pkgnm}{Package name of module}
}
\value{
Logical
}
\description{
Return the image and container names for a module. Will attempt
to build/pull image if missing.
}
\seealso{
Other ids: 
\code{\link{meta_get}()},
\code{\link{modules_list}()}
}
\concept{ids}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/docker.R
\name{docker_ps_count}
\alias{docker_ps_count}
\title{Count docker processes}
\usage{
docker_ps_count()
}
\value{
Integer
}
\description{
Count the number of running docker containers.
}
\details{
Use this to avoid creating multiple containers with the same ID.
}
\seealso{
Other private-docker: 
\code{\link{container-class}},
\code{\link{docker_build}()},
\code{\link{docker_cmd}()},
\code{\link{docker_cp}()},
\code{\link{docker_img_rm}()},
\code{\link{docker_pull}()}
}
\concept{private-docker}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/docker.R
\name{docker_img_rm}
\alias{docker_img_rm}
\title{Remove docker image}
\usage{
docker_img_rm(img)
}
\arguments{
\item{img}{Image name}
}
\value{
Logical
}
\description{
Deletes docker image from system.
}
\seealso{
Other private-docker: 
\code{\link{container-class}},
\code{\link{docker_build}()},
\code{\link{docker_cmd}()},
\code{\link{docker_cp}()},
\code{\link{docker_ps_count}()},
\code{\link{docker_pull}()}
}
\concept{private-docker}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/log.R
\name{default_log_set}
\alias{default_log_set}
\title{Set default log streams}
\usage{
default_log_set()
}
\description{
By default all streams are printed to console with the exception
of \code{docker_out}.
}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/log.R
\name{log_get}
\alias{log_get}
\title{Return log stream option}
\usage{
log_get(log = c("program_out", "program_err", "docker_out", "docker_err"))
}
\arguments{
\item{log}{Log stream}
}
\description{
Return the log stream setting for a given stream. If the stream
is not set, the function will return TRUE (i.e. prints to console).
}
\seealso{
Other private: 
\code{\link{is_filepath}()},
\code{\link{to_basename}()}
}
\concept{private}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ssh.R
\name{server_disconnect}
\alias{server_disconnect}
\title{Disconnect from a server}
\usage{
server_disconnect()
}
\value{
logical
}
\description{
Disconnect from a server and remove from \code{outsider}
}
\details{
This requires installation of \code{ssh} package.
}
\examples{
library(outsider.base)

# NOT RUN
\dontrun{
if (requireNamespace("ssh", quietly = TRUE)) {
  session <- ssh::ssh_connect(host = '[INSERT HOST IP]')
  server_connect(session = session)
  # run outsider.base commands, when finished
  server_disconnect()
}
}
}
\seealso{
Other public-server: 
\code{\link{server_connect}()}
}
\concept{public-server}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/args.R
\name{wd_get}
\alias{wd_get}
\title{Return working directory}
\usage{
wd_get(arglist, key = NULL, i = NULL)
}
\arguments{
\item{arglist}{Arguments as character vector}

\item{key}{Argument key identifying the working directory, e.g. -wd}

\item{i}{Index in the arglist that determines the working directory, e.g. 1.}
}
\value{
Character
}
\description{
Utility function for determining the working directory from 
arglist. The working directory can be determined from the arglist either by
a key:value or an index. For example, the working directory may be determined
by the key \code{-wd} in which case this function will identify whether this
key exists in the arglist and will return its corresponding value.
Alternatively, the working directory may be determined by the first argument
(e.g. an input file), in which case setting \code{i=1} will return the first
argument in the arglist.
If an input file is returned, a user can use \code{\link{dirpath_get}} to
convert the file path to a directory path.
If both \code{key} and \code{i} are provided, \code{key} takes precedence.
If no \code{key} or \code{i} is provided and/or no working directory is
found in the arguments, the function will return the R session's working
directory.
If no arguments are provided, returns empty character vector.
}
\examples{
library(outsider.base)
# wd is determined by key argument
arglist <- c('-a', 10, '-wd', 'path/to/wd', '-b', 'model2')
(wd_get(arglist = arglist, key = '-wd'))
# wd is determined by an index
arglist <- c('path/to/wd', '-a', 10, '-b', 'model2')
(wd_get(arglist = arglist, i = 1))
}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/docker.R
\name{is_docker_running}
\alias{is_docker_running}
\title{Check if Docker is running}
\usage{
is_docker_running()
}
\value{
Logical
}
\description{
Docker is required to run \code{outsider}. This function tests
whether Docker is running.
}
\seealso{
Other private-check: 
\code{\link{is_docker_installed}()}
}
\concept{private-check}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/docker.R
\name{docker_cp}
\alias{docker_cp}
\title{Copy files to and from container}
\usage{
docker_cp(origin, dest)
}
\arguments{
\item{origin}{Origin filepath}

\item{dest}{Destination filepath}
}
\value{
Logical
}
\description{
Copy files to and from running Docker container
}
\details{
Container folders are indicated with
\code{[container_id]:[filepath]}.
Files are uploaded/downloaded to/from the server based on the presence of
":" in origin/dest file paths.
}
\seealso{
Other private-docker: 
\code{\link{container-class}},
\code{\link{docker_build}()},
\code{\link{docker_cmd}()},
\code{\link{docker_img_rm}()},
\code{\link{docker_ps_count}()},
\code{\link{docker_pull}()}
}
\concept{private-docker}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/docker.R
\name{docker_build}
\alias{docker_build}
\title{Build a docker image}
\usage{
docker_build(img, url_or_path, tag = "latest")
}
\arguments{
\item{img}{Image name}

\item{url_or_path}{Dockerfile URL}

\item{tag}{Docker tag, default 'latest'}
}
\value{
Logical
}
\description{
Runs run \code{build} command.
}
\seealso{
Other private-docker: 
\code{\link{container-class}},
\code{\link{docker_cmd}()},
\code{\link{docker_cp}()},
\code{\link{docker_img_rm}()},
\code{\link{docker_ps_count}()},
\code{\link{docker_pull}()}
}
\concept{private-docker}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/console.R
\name{console-methods}
\alias{console-methods}
\alias{char}
\alias{stat}
\alias{func}
\alias{cat_line}
\title{Methods for printing to console}
\usage{
char(x)

stat(...)

func(x)

cat_line(...)
}
\arguments{
\item{x}{Character}

\item{...}{Objects to print}
}
\description{
Print to console using colours.
}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ssh.R
\name{server_upload}
\alias{server_upload}
\title{Upload to server}
\usage{
server_upload(fl)
}
\arguments{
\item{fl}{File/folder to be transferred.}
}
\value{
Logical
}
\description{
Upload file/folder to connected server. File is placed in
working dir on server.
}
\details{
This requires installation of \code{ssh} package.
}
\seealso{
Other private-server: 
\code{\link{is_server_connected}()},
\code{\link{server_download}()},
\code{\link{server_fetch}()}
}
\concept{private-server}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/identities.R
\name{modules_list}
\alias{modules_list}
\title{List all installed outsider modules}
\usage{
modules_list()
}
\value{
Logical
}
\description{
Return the R package names of all installed outsider modules
}
\seealso{
Other ids: 
\code{\link{docker_ids_get}()},
\code{\link{meta_get}()}
}
\concept{ids}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/log.R
\name{log_set}
\alias{log_set}
\title{Set log streams for console output}
\usage{
log_set(log, val)
}
\arguments{
\item{log}{Output stream one of program_out, program_err, docker_out or
docker_err}

\item{val}{Either logical, file or connection.}
}
\description{
Set if and where to send the console streams of the outsider
modules.
}
\details{
See `sys::exec`.
}
\examples{
\dontrun{
library(outsider.base)

# Manually install example module
# outsider.base contains the hello.world module in its package files
pkgnm <- 'om..hello.world'
mdl_flpth <- system.file('extdata', 'om..hello.world',
                         package = "outsider.base")
# install and import (outsider::module_install performs these tasks)
pkg_install(flpth = mdl_flpth)
image_install(pkgnm = pkgnm)
# (outsider::module_import performs this task)
hello_world <- utils::getFromNamespace(x = 'hello_world', ns = pkgnm)

# control the log stream
# send output to file
tmpfl <- tempfile()
log_set(log = 'program_out', val = tmpfl)
hello_world()
(readLines(con = tmpfl))
file.remove(tmpfl)
# send docker and program output to console
log_set(log = 'program_out', val = TRUE)
log_set(log = 'docker_out', val = TRUE)
hello_world()

# clean-up
uninstall(pkgnm)
}
}
\concept{user}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/identities.R
\name{meta_get}
\alias{meta_get}
\title{Get outsider module details}
\usage{
meta_get(pkgnm)
}
\arguments{
\item{pkgnm}{Package name of module}
}
\value{
Named list
}
\description{
Return a named list of all metadata associated with a module
}
\seealso{
Other ids: 
\code{\link{docker_ids_get}()},
\code{\link{modules_list}()}
}
\concept{ids}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/docker.R
\name{docker_cmd}
\alias{docker_cmd}
\title{Run docker command}
\usage{
docker_cmd(args, std_out = TRUE, std_err = TRUE)
}
\arguments{
\item{args}{Vector of arguments}

\item{std_out}{if and where to direct child process STDOUT.
See `sys::exec`.}

\item{std_err}{if and where to direct child process STDERR.
See `sys::exec`.}
}
\value{
Logical
}
\description{
Runs a docker command with provided arguments
}
\seealso{
Other private-docker: 
\code{\link{container-class}},
\code{\link{docker_build}()},
\code{\link{docker_cp}()},
\code{\link{docker_img_rm}()},
\code{\link{docker_ps_count}()},
\code{\link{docker_pull}()}
}
\concept{private-docker}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/outsider.R
\docType{package}
\name{outsider.base}
\alias{outsider.base}
\title{outsider.base: Base Package for outsider.}
\description{
For more information visit the outsider website
(\url{https://docs.ropensci.org/outsider/}).
}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/docker.R
\name{is_docker_installed}
\alias{is_docker_installed}
\title{Check if Docker is installed}
\usage{
is_docker_installed()
}
\value{
Logical
}
\description{
Docker is required to run \code{outsider}. This function tests
whether Docker is installed.
}
\seealso{
Other private-check: 
\code{\link{is_docker_running}()}
}
\concept{private-check}
