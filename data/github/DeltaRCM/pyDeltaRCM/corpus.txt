titl pydeltarcm flexibl numer delta model tag python sedimentolog delta stratigraphi author name andrew j moodi orcid x affili name jayaram hariharan orcid x affili name eric barefoot orcid affili name paola passalacqua affili orcid affili name depart civil architectur environment engin univers texa austin austin tx usa index name depart earth environment planetari scienc rice univers houston tx usa index date june bibliographi paperbib summari river delta provid mani societ benefit sustain landform may impact human modif global climat chang reducedcomplex numer delta model incorpor limit physic process allow research assess spatiotempor evolut landscap respons individu process environment forc isol individu process use understand exampl shift delta morpholog due sealevel rise chang veget cover flood intens result mani numer delta model propos literatur result studi difficult compar variou design implement choic pydeltarcm v deliv comput effici easytocustom implement deltarcm numer model liang_reduced__ enabl comparison reproduc studi delta chang due variou environment forc statement need river delta societ import landform provid arabl land deep inland port home hundr million peopl global edmonds_coastal_ exist interfac landmass water bodi delta impact multitud process aris domain exampl chang sediment input delta modul rate new land built similarli rise water level downstream basin creat flood land addit natur process human landscap modif render deltaic environ sensit global climat chang futur paola_natural_ demand understand natur delta process process respond variou environment forc led prolifer numer delta model literatur overeem_three_ deltarcm delta model liang_reduced__ gain popular among geomorphologist due attract balanc comput cost realism interpret larsen_appropriate_ exampl studi employ deltarcm design examin delta morpholog dynam respons sealevel rise region subsid liang_quantifying_ liang_how_ well extend model design simul delta evolut veget lauzon_comparing_ ice permafrost lauzon_ice_ piliouras_unraveling_ howev comparison among studi difficult owe dispar code base variou implement choic lack version control proprietari softwar depend background version pydeltarcm introduc pydeltarcm comput effici free open sourc easytocustom numer delta model base origin deltarcm design origin deltarcm framework inspir wellunderstood physic phenomena model mass movement probabilist weight randomwalk process coupl set hierarch rule model extens describ liang_reduced__ liang_reduced__ framework basi pydeltarcm v modif select resolv known numer instabl improv comput effici support reproduc simul pydeltarcm depend common python packag numpi harri matplotlib hunter scipi virtanen netcdf pyyaml numba lam_numba_ simul pydeltarcm v default paramet set random seed simul run timestep assum day bankful discharg per year comput time hour labelfigtimeseriesfigurestimeseriespng flexibl easi use pydeltarcm objectori packag provid central model class deltamodel creat custom model behavior subclass deltamodel research easili add subtract modifi model compon without alter code pertin scienc object importantli separ custom code core model code make clear differ studi compar pydeltarcm document provid sever exampl implement custom model behavior top core deltamodel object pydeltarcm also provid infrastructur acceler scientif explor abil configur multipl simul singl file addit preprocessor orchestr parallel simul multicor system option implement sever tool support simul explor paramet space exampl matrix expans convert list paramet ndimension set simul similarli replic simul creat via ensembl specif reproduc comput effici import prioriti pydeltarcm develop exampl todisk log record paramet systemlevel version data randomse inform ensur run recreat addit checkpoint infrastructur ad model record simul progress comput later resum model run simul final pydeltarcm use numba comput optim lam_numba_ depend proprietari softwar pydeltarcm compon unit integr thoroughli document test componentlevel document describ implement note wherea narr guid exampl document describ highlevel model design best practic model use develop pydeltarcm also coupl numer model via csdm basic model interfac hutton_basic_ bmi_pydeltarcm acknowledg grate acknowledg rebecca lauzon mariela perignon develop implement deltarcm python basi pydeltarcm also thank nation scienc foundat support us develop softwar way postdoctor fellowship ear grant jh pp ear refer code conduct pledg interest foster open welcom environ contributor maintain pledg make particip project commun harassmentfre experi everyon regardless age bodi size disabl ethnic gender ident express level experi nation person appear race religion sexual ident orient standard exampl behavior contribut creat posit environ includ use welcom inclus languag respect differ viewpoint experi grace accept construct critic focus best commun show empathi toward commun member exampl unaccept behavior particip includ use sexual languag imageri unwelcom sexual attent advanc troll insultingderogatori comment person polit attack public privat harass publish other privat inform physic electron address without explicit permiss conduct could reason consid inappropri profession set respons project maintain respons clarifi standard accept behavior expect take appropri fair correct action respons instanc unaccept behavior project maintain right respons remov edit reject comment commit code wiki edit issu contribut align code conduct ban temporarili perman contributor behavior deem inappropri threaten offens harm scope code conduct appli within project space public space individu repres project commun exampl repres project commun includ use offici project email address post via offici social media account act appoint repres onlin offlin event represent project may defin clarifi project maintain enforc instanc abus harass otherwis unaccept behavior may report contact project team issu tracker complaint review investig result respons deem necessari appropri circumst project team oblig maintain confidenti regard report incid detail specif enforc polici may post separ project maintain follow enforc code conduct good faith may face temporari perman repercuss determin member project leadership attribut code conduct adapt contributor coven httpswwwcontributorcovenantorg_ version httpswwwcontributorcovenantorgversion_ avail httpswwwcontributorcovenantorgvers pydeltarcm imag httpsbadgefuryiopypydeltarcmsvg target httpsbadgefuryiopypydeltarcm imag httpsjosstheojorgpapersjossstatussvg target httpsdoiorgjoss imag httpsgithubcomdeltarcmpydeltarcmactionsworkflowsbuildymlbadgesvg target httpsgithubcomdeltarcmpydeltarcmact imag httpscodecovioghdeltarcmpydeltarcmbranchdevelopgraphbadgesvg target httpscodecovioghdeltarcmpydeltarcm imag httpsappcodacycomprojectbadgegradecdabafbaa target httpswwwcodacycomghdeltarcmpydeltarcmutm_sourcegithubcomamputm_mediumreferralamputm_contentdeltarcmpydeltarcmamputm_campaignbadge_grad pydeltarcm comput effici free open sourc easytocustom numer delta model base origin deltarcm model design matlab deltarcm httpscsdmscoloradoeduwikimodeldeltarcm_ model man liang liang et al httpsdoiorgesurf_ pydeltarcm deliv improv model stabil capabl infrastructur support explor minim boilerpl code establish approach extend model capabl ensur reproduc compar studi figur httpsdeltarcmorgpydeltarcm_imagescoverpng weight random walk water parcel pydeltarcm model run default paramet document find complet document httpsdeltarcmorgpydeltarcmindexhtml_ document includ instal guid httpsdeltarcmorgpydeltarcmmetainstallinghtml_ thorough guid user httpsdeltarcmorgpydeltarcmguidesuser_guidehtml_ detail api document develop httpsdeltarcmorgpydeltarcmreferenceindexhtml_ plethora exampl httpsdeltarcmorgpydeltarcmexamplesindexhtml_ use develop pydeltarcm novel scientif experi instal see complet instal guid httpsdeltarcmorgpydeltarcmmetainstallinghtml_ especi develop plan modifi contribut code develop instal guid httpsdeltarcmorgpydeltarcmmetainstallinghtmldeveloperinstallation_ new manag python venv conda environ quick instal exist python x environ code consol pip instal pydeltarcm execut model recommend check pydeltarcm minut tutori httpsdeltarcmorgpydeltarcmguidesminhtml_ part document beyond breif tutori comprehens user document httpsdeltarcmorgpydeltarcmindexhtmluserdocumentation_ develop document httpsdeltarcmorgpydeltarcmindexhtmldeveloperdocumentation_ check addit note repositori longer includ basic model interfac bmi httpsbmireadthedocsioenlatestbadgelatest_ wrapper deltarcm model pydeltarcm maintain bmi compat anoth repositori bmi_pydeltarcm model httpsdeltarcmorgbmi_pydeltarcm_ pydeltarcm document master file welcom pydeltarcm document pydeltarcm comput effici free open sourc easytocustom numer delta model base origin deltarcm model design matlab deltarcm httpscsdmscoloradoeduwikimodeldeltarcm_ model man liang pydeltarcm deliv improv model stabil capabl infrastructur support explor minim boilerpl code establish approach extend model capabl ensur reproduc compar studi plot guidescoverpi weight random walk water parcel pydeltarcm model run default paramet project inform toctre maxdepth metainstal metacontribut metalicens metaconduct _user_document user document toctre maxdepth guidesgetting_start guidesuser_guid infoindex examplesindex develop document toctre maxdepth guidesdeveloper_guid referenceindex user guid rubric prefac document page elsewher assum import pydeltarcm packag pydeltarcm code python import pydeltarcm addit document frequent refer numpi matplotlib packag may alway explicitli import packag throughout document may refer packag common shorthand well code python import numpi np import matplotlibpyplot plt run model run pydeltarcm model usual accomplish via combin configur file script simplest case actual none requir follow command execut consol run pydeltarcm model default set model paramet timestep code consol pydeltarcm timestep intern consol command call python function run model via method python code script prefer common model use case let exact thing run model timestep python code python objectori program languag mean pydeltarcm model set manipul object technic jargon pydeltarcm model built python class specif class name deltamodel actual model creat instanti make instanc class objdeltamodel python object instanti call class name follow parenthes potenti input argument python script python consol code python mdl pydeltarcmdeltamodel plot context reset pydeltarcmshared_tools_docs_temp_directori output_dir mdl pydeltarcmdeltamodelout_diroutput_dir mdl instanc objdeltamodel class mdl actual model run base docdefault paramet referencemodelyaml_default model domain configur open basin inlet center along one wall default paramet set sensibl valu gener follow describ _ plot context fig ax pltsubplotsfigs aximshowmdlbed_elev vmax pltshow run model use methpydeltarcmmodeldeltamodelupd method objpydeltarcmmodeldeltamodel instanc ie call methpydeltarcmmodeldeltamodelupd mdl code python _ rang mdlupdat methpydeltarcmmodeldeltamodelupd method manag singl timestep model run check docstr method descript routin addit step call objupd addit may help read docmodel inform guid infoindex note model timestep attrpydeltarcmmodeldeltamodeldt determin model stabil criteria see docth model stabil guid infomorphodynam inform final need tie loos end done run model use objpydeltarcmmodeldeltamodelfin method objdeltamodel instanc ie call methpydeltarcmmodeldeltamodelfin mdl code python mdlfinal specif call methpydeltarcmmodeldeltamodelfin ensur data output model run docoutput netcdf file infooutputfil correctli save disk becom corrupt script exit note output file period save model run thing might okay forget methfin end simul consid best practic explicitli close output file methfin put snippet togeth give complet minimum work exampl script codeblock python mdl pydeltarcmdeltamodel _ rang mdlupdat mdlfinal probabl dont want run model default paramet remaind guid cover use case increas complex first chang model paramet valu via yaml configur file configur input yaml file configur pydeltarcm run set paramet set usual describ yaml markup format configur run creat file call exampl model_configurationyml insid file specifi paramet run paramet new line exampl model_configurationyml contain line codeblock yaml seed objpydeltarcmdeltamodel model instanc initi file specifi input_fil slope use random seed multipl paramet specifi line line default valu substitut paramet explicitli given input_fil yml file default valu yaml configur list docreferencemodelyaml_default import best practic model configur creat yaml file set want chang specifi hint comment line use model hint check model log file make sure configur interpret expect start model run two api level interact pydeltarcm model highlevel model api take argument yaml configur file compos list job indic yaml file setup configur automat execut job list well lowlevel api consist creat model instanc yaml configur file manual handl timestep option augment oper model implement new featur gener modifi model sourc code anyth nonstandard simul run want use lowlevel api highlevel api extrem help explor paramet space _high_level_api highlevel model api highlevel api access via either shell prompt python script handl set model configur run model specifi durat follow highlevel api demonstr consid yaml input file name model_configurationyml look like codeblock yaml seed timestep command line api invok model run command line use yaml file model_configurationyml defin would simpli call code bash pydeltarcm config model_configurationyml equival code bash python pydeltarcm config model_configurationyml invoc run pydeltarcm objpreprocessor pydeltarcmpreprocessorpreprocessorcli paramet specifi model_configurationyml file yaml configur indic multipl job refvia matrix expans ensembl specif configuring_multiple_job job run automat call objpydeltarcmdeltamodelupd model time python api python highlevel api access via objpydeltarcmpreprocessor object first preprocessor instanti yaml configur file eg model_configurationyml code python pp preprocessorpreprocessorp return object contain list job run job run code python pprun_job model simul durat highlevel api durat model run configur highlevel api set number differ configur paramet note see complet descript time model docinfomodeltim use highlevel api specifi durat run model two mechan number timestep run model durat time run model former case straightforward insofar model determin timestep durat highlevel api simpli iter specifi number timestep iter specifi number timestep run model use argument timestep command line timestep configur yaml file timestep python objpydeltarcmpreprocessor code bash pydeltarcm config model_configurationyml timestep second case complic time specif convert model time accord set addit paramet case model run end condit elaps model time equal greater specifi input time importantli mean durat model run unlik exactli match input condit model timestep unlik factor specifi time refer complet descript model time docinfomodeltim inform specifi durat time run model second simpli use argument time command line time configur yaml file time python objpydeltarcmpreprocessor also possibl specifi input run durat unit year similarli name argument time_year time_year time_year code bash pydeltarcm config model_configurationyml time pydeltarcm config model_configurationyml time_year would run simul math second year import specifi time argument specifi time argument timestep argument case multipl argument specif preced given order timestep time time_year specifi time run simul addit paramet determin intermitt factor mathi_f may specifi command line yaml configur file python objpydeltarcmpreprocessor argument scale specifi timetomodeltim scale time equal input argument time specifi mathi_f valu essenti use model durat run specif see docinfomodeltim complet inform scale model time elaps simul time run simul parallel highlevel api provid abil run simul parallel linux environ option use case run multipl job refmatrix expans matrix_expansion_tag refensembl expans ensemble_expansion_tag refset expans set_expansion_tag tool run job parallel simpli specifi parallel flag command line interfac option specifi number simul run follow flag number code bash pydeltarcm config model_configurationyml timestep parallel pydeltarcm config model_configurationyml timestep parallel lowlevel model api lowlevel api describ begin guid interact model creat script manipul model output desir level simplest case use lowlevel api code delta pydeltarcmdeltamodelinput_filemodel_configurationyml _ rang deltaupd deltafin howev also inspectmodifi objpydeltarcmdeltamodelupd method chang order oper add oper desir see refguid custom model customize_the_model work lowlevel api option pass valid key yaml configur file keyword argument model instanti exampl code delta pydeltarcmdeltamodelinput_filemodel_configurationyml slre keyword argument suppli point supersed valu specifi yaml configur see refour guid model custom customize_the_model complet explan demonstr modifi model behavior advanc model configur advanc model configur guid import anoth file includ advanced_configuration_guideinc work subsid subsid guid import anoth file includ subsidence_guideinc dsfasf subsid guid import anoth file includ infooutputfilerst support document file model refer docreferencemodelyaml_default docreferencemodelmodel_hook exampl simpl simul jupyt notebook httpsgithubcomdeltarcmpydeltarcmblobdevelopdocssourceexamplessimple_exampleipynb_ docexamplesslight_slop docexamplessubsidence_region docexamplescustom_sav refer reducedcomplex model river delta format part model delta channel dynam liang v r voller c paola earth surf dynam httpsdoiorgesurf develop guid imag httpsgithubcomdeltarcmpydeltarcmworkflowsactionsbadgesvg target httpsgithubcomdeltarcmpydeltarcmact guid provid addit detail implement make user guid yet read user guid place start visit refer guid detail necessari best practic reproduc import tldr random number must gener within jit function major goal pydeltarcm project enabl fulli reproduc simul result variabl pydeltarcm aris weight random walk water sediment parcel model iter state random sourc essenti reproduc encourag develop ensur subclass model also reproduc provid inform section mani subclass model straightforward ensur model reproduc box model use core pydeltarcm seed function make model reproduc checkpoint easili integr use case howev model implement process function reli random number sampl random distribut need take care ensur model reproduc random number pydeltarcm sourc random valu pseudorandom number gener rng numpi work input current state rng algorithm return sampl integ map probabl densiti function time rng yield sampl rng state chang repeat sampl rng appear random actual determinist sequenc given initi rng state ie given seed result determinist rng model run exactli reproduc begin initi rng state howev mean chang state rng record make run nonreproduc addit random behavior implement model also modifi state rng nonreproduc default setup numpi function nprandom util underli random number gener follow code alway evalu result case would rel simpl keep run reproduc call nprandom function would modifi state underli gener doctest nprandomse nprandomuniform nprandomnorm nprandomuniform pydeltarcm though use numba justintim compil sever step model routin make execut faster includ get random valu drive parcel movement model iter within python consol call numba rng affect state numpi rng vice versa even though prejit compil code appear call nprandomuniform eg objpydeltarcmshared_toolsget_random_uniform import pydeltarcm take respons numba rng simpl exampl matter well call nprandomnorm model subclass give random valu modifi state numpi rng affect state numba rng one pydeltarcm actual keep track thu valu return call nprandomnorm known reproduc follow simpl exampl see reproduc model use random number gener jit function ensur numba rng use random variabl model run reproduc doctest numba import njit njit def get_random_norm get random number standard normal distribut return nprandomnorm class brokenandnotreproduciblepydeltarcmdeltamodel def __init__self input_filenon kwarg initi model never reproduc super__init__input_fileinput_fil kwarg def updateself reimplement updat method demonstr core pydeltarcm rng use comput eg _sampl pydeltarcmshared_toolsget_random_uniform someth custom subclass _sampl nprandomnorm write view print_sampl _sampl class beautifulandveryreproduciblepydeltarcmdeltamodel def __init__self input_filenon kwarg initi reproduc model super__init__input_fileinput_fil kwarg def updateself reimplement updat method demonstr core pydeltarcm rng use comput eg _sampl pydeltarcmshared_toolsget_random_uniform someth custom subclass _sampl get_random_norm write view print_sampl _sampl initi run model three timestep twice run twice allow us see model reproduc ie number exactli run first run broken model doctest hide gener good doc shown pydeltarcmshared_tools_docs_temp_directori output_dir broken brokenandnotreproduc out_diroutput_dir seed code broken brokenandnotreproduciblese doctest rang brokenupd doctest skip doctest hide gener good doc shown pydeltarcmshared_tools_docs_temp_directori output_dir broken brokenandnotreproduc out_diroutput_dir seed code broken brokenandnotreproduciblese doctest rang brokenupd doctest skip run reproduc model doctest hide pydeltarcmshared_tools_docs_temp_directori output_dir beauti beautifulandveryreproduc out_diroutput_dir seed code beauti beautifulandveryreproduciblese doctest rang beautifulupd doctest hide pydeltarcmshared_tools_docs_temp_directori output_dir beauti beautifulandveryreproduc out_diroutput_dir seed code beauti beautifulandveryreproduciblese doctest rang beautifulupd result see valu return builtin uniform rng first sampl iter ie left column alway determinist broken beauti wherea builtin custom rng determinist beauti import sure gener random number insid jit function note gener okay worri reproduc develop subclass model tri work model mechan depend random start real simul may analyz sure take time make model reproduc model develop slice neighbor slice array find array valu neighbor common oper model prefer way slice pad array funcpydeltarcmshared_toolscustom_pad loop row column directli index approach make readabl reason fast code exampl find cell higher neighbor code pad_eta shared_toolscustom_padselfeta rangeselfl j rangeselfw eta_nbr pad_etai j j eta_nbr npinf npallselfetai j eta_nbr also sever model attribut may help develop suggest use builtin rather creat whenev possibl see methpydeltarcminit_toolsinit_toolsset_const model sourc code _getting_start get start easi get start use pydeltarcm recommend start minut learnbyexampl lesson toctre maxdepth min return main index refuser_document see document avail help get start help resourc exampl jupyt notebook httpsgithubcomdeltarcmpydeltarcmblobdevelopdocssourceexamplessimple_exampleipynb_ show complet model run quick analysi output file comprehens docuser_guid use experi model your readi start develop check docdeveloper_guid complet model docapi document referenceindex minut tutori use pydeltarcm ten minut simpl guid show absolut basic get pydeltarcm model run give direct go import havent alreadi sure follow docinstal guid metainstal get pydeltarcm set properli comput default model get model run five simpl line python code note run pydeltarcm either standalon script part interact session first instanti main objpydeltarcmdeltamodel model object code python import pydeltarcm default_delta pydeltarcmdeltamodel instanti objpydeltarcmmodeldeltamodel without argument use set docdefault paramet referencemodelyaml_default configur model run default option reason set explor control model would work perfectli well simpl demonstr delta model run forward call methpydeltarcmdeltamodelupd method simpli creat loop call updat function wrap everyth call methpydeltarcmdeltamodelfin model code python _ rang default_deltaupd default_deltafin note addit call updat model call model final that ran pydeltarcm model five timestep five line code visual delta bed elev though excit five timestep code python import matplotlibpyplot plt fig ax pltsubplot aximshowdefault_deltabed_elev vmax pltshow plot guidesmin_demopi model set paramet run simul nondefault set paramet use configur file written yaml markup languag name min_tutorialyaml markup file allow us specifi model boundari condit input output set anyth set file overrid docdefault paramet referencemodelyaml_default model anyth specifi take default valu import best practic model configur creat yaml file set want chang specifi yaml configur file central manag pydeltarcm simul creat file need creat yaml file creat yaml file open favorit plaintext edit applic eg gedit notepad yaml syntax pretti simpl basic configur essenti amount line repres parametervalu pair separ colon exampl let specifi three simul control want output file place via out_dir paramet ensur simul easili reproduc set random seed paramet examin effect high fraction bedload f_bedload paramet enter follow text editor save file min_tutorialyaml make sure place file locat access interpret code yaml out_dir min_tutori seed f_bedload creat second instanc objpydeltarcmmodeldeltamodel time use input yaml file code second_delta pydeltarcmdeltamodelinput_filemin_tutorialyaml repeat loop oper code python _ rang second_deltaupd second_deltafin resourc consid read docus guid user_guid first action determin set model complet experi includ tutori exampl custom model achiev arbitrari behavior need docuser_guid docreferencemodelindex contribut contribut project must follow doccod conduct metaconduct time familiar code conduct polici take minut read polici start first contribut contribut welcom contribut mani type includ limit bug fix improv document new featur addit exampl use develop pydeltarcm interest contribut pleas submit pull request get touch develop team via github issu tracker httpsgithubcomdeltarcmpydeltarcmissues_ issu question identifi bug within code arent sure dont want fix invit open issu github issu tracker httpsgithubcomdeltarcmpydeltarcmissues_ pleas explain problem fulli possibl includ system inform may relev also ask question softwar ask help github issu tracker httpsgithubcomdeltarcmpydeltarcmissues_ tri best help includ code_of_conductrst instal recommend instal pydeltarcm virtual environ said pydeltarcm depend small number packag reflist depend dependencieslist mani like alreadi python userdevelop regular use probabl safe instal pydeltarcm base environ instal describ instal flavor user develop hint look make modif model sourc code follow develop instruct suggest use anaconda python distribut obtain via project websit httpswwwanacondacomproductsindividual_ proceed may wish creat virtual environ pydeltarcm project anaconda linux code consol conda creat n deltarcm python conda activ deltarcm informtaion see guid httpscondaioprojectscondaenlatestuserguidetasksmanageenvironmentshtmlactivatinganenvironment_ help creat activ virtual environ anaconda platform see help guid httpspackagingpythonorgguidesinstallingusingpipandvirtualenvironmentscreatingavirtualenvironment_ creat virtual environ venv use anaconda user instal user instal simpli instal pypi packag repositori code consol pip instal pydeltarcm note may need first instal httpspippypaioenstableinstalling_ pip _devinstal develop instal develop instal first fork repositori github allow submit suggest contribut pydeltarcm note need creat fork test may save time headach road choos use main repositori url httpsgithubcomdeltarcmpydeltarcmgit first need instal git httpsgitscmcombookenvgettingstartedinstallinggit_ alreadi download clone fork project code consol git clone httpsgithubcomyourusernamepydeltarcmgit current work directori root repositori eg cd pydeltarcm run follow command code consol pip instal r requirementstxt pip instal r requirementsdocstxt pip instal r requirementstesttxt pip instal e check instal run complet test suit code consol pytest mpl mplbaselinepathtestsimgs_baselin final add upstream repositori remot repositori list code consol git remot add upstream httpsgithubcomdeltarcmpydeltarcmgit build local copi document code consol cd doc make html next step consid read docminut tutori guidesmin docus guid guidesuser_guid help get start use pydeltarcm _dependencieslist depend literalinclud requirementstxt lineno time pydeltarcm time pydeltarcm model simul unit second durat timestep determin model initi maintain numer stabil calcul base model domain configur paramet model iter timestep timestep endrun condit reach note use refhighlevel api high_level_api model run end condit elaps model time equal greater specifi input time result model run durat unlik exactli match input time specif model timestep unlik factor specifi time pleas keep mind evalu model result especi compar differ model run durat model water discharg thu sediment discharg assum bankful assumpt base concept geomorph work wm_ strongli nonlinear relationship water discharg sediment transport summar basi assumpt small proport sediment motion discharg near lowflow base flow condit rel amount sediment motion flood condit flood occur small fraction total time timeintegr sediment transport occur fraction time remaind time deem neglig comparison exampl contriv riverdelta hydrograph shown discharg fluctuat around baseflow condit year except day period flood event occur start event end event day flood event discharg high enough exceed bankful discharg flood durat plot modeltimeone_year_plotpi numer model could simul everi day hydrograph would requir substanti comput power acceler comput time model assum import period time river atorabov bankful discharg collaps hydrograph singl valu bankful discharg choic bankful discharg singlevalu discharg assumpt matter conveni readili estim field data measur durat time repres singlevalu discharg assumpt also determin hydrograph arriv socal intermitt factor mathi_f find fraction unittim per unittim river flood exampl intermitt factor scale day year math fractextrmdaystextrmday approx equiv i_f intermitt factor thu give relationship scale pydeltarcm model time alway comput unit second elaps second year exampl model run elaps math time second assum intermitt factor math fractextrmsecondselapsedi_f frac time textrmsecond time textrmsecond approx textrmyear note conveni function suppli lowlevel api time convers objpydeltarcmshared_toolsscale_model_tim appli intermitt assumpt four year model simul reveal comput advantag approach simul everi day simul durat would requir day simul time math time second plot modeltimefour_year_plotpi contrast condens simul time bankful discharg intermitt assumpt allow us simul four year period day simul time math time second see also objpydeltarcmpreprocessorscale_relative_sea_level_rise_r objpydeltarcmshared_toolsscale_model_tim refer wm wolman g miller j p magnitud frequenc forc geomorph process journal geolog httpsdoiorg model output file configur save output data model output save use netcdf httpunidatagithubionetcdfpython_ file format grid variabl given run save paramet save_var_grid control whether grid variabl eg veloc save netcdf file netcdf file array dimens time mathtim x mathtim creat grid variabl set save note x downstream coordin rather cartesian x display grid appropri unit variabl store exampl meter per second veloc grid note format output netcdf file coordin chang v old format document attrpydeltarcmmodeldeltamodellegacy_netcdf input paramet legacy_netcdf use creat output netcdf file old coordin configur grid coordin grid coordin specifi variabl time x output netcdf file array array specifi locat cell domain dimension coordin eg meter downstream direct distanc cell inlet boundari specifi x meter similarli crossdomain distanc specifi meter lastli time variabl store array model time second model metadata addit grid coordin model metadata save group array vector array float integ valu save metadata follow length land surfac l width inlet channel n center domain ctr length cell face dx depth inlet channel h sea level h_sl bedload fraction f_bedload sediment concentr c_percent characterist veloc u subsid enabl subsid start time start_subsid subsid rate sigma work model output result netcdf output file read use netcdfcompat librari librari rang netcdf python packag httpsgithubcomunidatanetcdfpython_ higherlevel librari xarray httpsgithubcompydataxarray_ delta specif pydeltarcm also packag develop call deltametr httpsgithubcomdeltarcmdeltametrics_ design help postprocess analyz pydeltarcm output show read output netcdf file python packag netcdf code import netcdf nc data ncdatasetpydeltarcm_outputnc output file path data object dataset object slice numpi array exampl slice final bed elev veloc model run code final_bed_elev dataeta final_veloc dataveloc slice look like plot plot guidesoutput_filepi morphodynam currentmodul pydeltarcmsed_tool pydeltarcm approxim sediment dispers use weight random walk dictat water flux turn sediment dispers drive bed elev chang model domain mass conserv see _ complet descript morphodynam assumpt deltarcm model document focu detail model implement rather model design _sedimenttransport sediment transport sediment transport model comput accord excess stress approach conceptu sand rout bedmateri load mud rout fulli suspend load sand parcel transport capac determin scale sediment flux flow veloc take form meyerpet müller _ formula math q_s_cap q_ fracubeta_locubeta_ mathu_loc depth averag flow veloc cell mathbeta expon set default objpydeltarcmmodeldeltamodelbeta mathq_ unitwidth upstream sand flux input inlet channel step model domain sand either erod deposit bed depend local flow veloc mathu_loc local sediment transport mathq_s_loc sand deposit local transport ie sand put cell upstream greater cell transport capac mathq_s_loc q_s_cap sand erod bed local veloc greater threshold eros veloc objpydeltarcmmodeldeltamodelcoeff_u_ero_sand local transport less local transport capac mud parcel local capac ie fulli suspend washload transport parcel step mud either erod deposit neither depend rel valu local flow veloc mathu_loc threshold eros deposit valu objpydeltarcmmodeldeltamodelcoeff_u_ero_mud objpydeltarcmmodeldeltamodelcoeff_u_dep_mud note complet conceptu descript sediment eros deposit rout rule found origin deltarcm refer liang et al _ _sedimentroutingweight sediment rout weight sediment rout probabl given cell mathj neighbor cell mathi comput accord math w_i fracfracr_i max mathbffcdotmathbfd_idelta mathmathbff local rout direct mathmathbfd_i unit vector point neighbor mathi cell mathj mathdelta_i cellular distanc neighbor mathi math cell main compass direct mathsqrt corner cell mathr_i resist estim invers function local water depth mathh_i math r_i frach_itheta maththeta take valu objpydeltarcmmodeldeltamodelcoeff_theta_sand sand rout probabl objpydeltarcmmodeldeltamodelcoeff_theta_mud mud rout plot sed_toolssediment_weights_examplespi chang bed elev along walk sediment parcel sediment parcel volum modul step accord sediment transport rule describ refsedimenttransport volum sediment parcel chang channel bed elev current parcel locat updat reflect volum chang objsed_toolsbaserouter_update_field ie bed erod sediment deposit bed vertic chang channel bed dictat sediment mass conserv ie exner equat equal math delta eta delta v dx mathdelta v volum sediment erod deposit bed given cell along parcel walk note total sediment mass preserv eros individu categori sand mud ie assum infinit suppli sand andor mud erod entrain locat model domain follow chang bed elev local flow depth updat local flow veloc updat accord fluid mass conserv ie uw qw h objsed_toolsbaserouter_update_field _ sediment parcel rout model domain stepbystep serial chang bed elev caus one sediment parcel affect weight random walk subsequ sediment parcel refsedimentroutingweight due updat flow field sediment parcel rout handl first rout sand parcel appli topograph diffus see methsed_toolstopo_diffus rout mud parcel impact rout sand mud parcel bed elev shown tabl _sandmudroutecomparison tabl initi bed methsed_toolsroute_all_sand_parcel methsed_toolsroute_all_mud_parcel plot sed_tools_initial_bed_statepi plot sed_toolsroute_all_sand_parcelspi plot sed_toolsroute_all_mud_parcelspi _modelst model stabil model stabil depend number condit core though model stabil depend bed elev rate chang space time rapid andor abrupt bed elev chang trigger numer instabl occasion runaway caus model run fail number process includ deltarcm framework help limit possibl fail run _referencevolum refer volum refer volum foundat unit mathv_ impact model stabil valu character volum one inletchannel cell channel bed water surfac math v_ h_ delta_c mathh_ inlet channel depth meter mathdelta_c cell length meter time step perhap import model stabil model timestep recal iter number parcel input sediment discharg h u c_percent set user fix therefor control stabil durat time repres iter ie timestep determin chang bed elev per iter small model timestep determin math dt dv_ n_psed mathn_ps number sediment parcel mathdv_ characterist sediment volum base refer volum inlet width mathdv_ n_ v_ mathn_ number cell across inlet limit bed elev chang sediment parcel step bed elev chang limit local flow depth addit edg case repeat channel bed deposit creat local depth restrict enforc zero deposit depth regul implement baserout class objpydeltarcmsed_toolsbaserouter_limit_vp_chang topographicdiffus topograph diffus abrupt chang bed elev ie steep local bed slope may lead numer instabl prevent topograph diffus appli immedi follow rout sand parcel model sequenc hint topograph diffus appli rout sand parcel rout mud parcel implement topograph smooth convolv topographi x cell kernel configur diffus behavior diffus repeat entir model domain objpydeltarcmdeltamodeln_crossdiff time follow exampl objpydeltarcmdeltamodeln_crossdiff take docdefault valu referencemodelyaml_default plot sed_toolstopo_diffusionpi impact topograph diffus minor compar bed elev chang driven parcel eros deposit refsand mud rout effect sandmudroutecomparison note model best practic stop simul delta reach edg comput domain delta channel dynam chang distributari channel reach domain edg sediment convey outsid comput domain longer feed back channel develop channel becom lock place scenario _ domain edg infinit sediment sink therefor render invalid assumpt stationar delta dynam andor stratigraphi moreov downstream water surfac boundari condit h_sl violat channel reach domain edg gener simul reach edg domain discard stop simul delta reach condit topset slope equal background slope paramet background slope reach transport capac sediment delta diminish channel clog trigger model instabl realli issu larg domain run long durat use suffici number water sediment parcel parcel result rough water surfac irregular sediment deposit rough bed elev refer reducedcomplex model river delta format part model delta channel dynam liang v r voller c paola earth surf dynam httpsdoiorgesurf liang kim w passalacqua p much subsid enough chang morpholog river delta geophys research letter doigl meyerpet e müller r formula bedload transport proceed nd meet iahsr stockholm sweden yaml paramet configur model paramet list docreferencemodelyaml_default link api document differ type yaml paramet provid yaml paramet sort type exampl refmodeldomainparamet paramet control definit pydeltarcm model domain model set attrpydeltarcmmodeldeltamodelout_dir attrpydeltarcmmodeldeltamodelverbos attrpydeltarcmmodeldeltamodelse _modeldomainparamet model domain paramet attrpydeltarcmmodeldeltamodellength attrpydeltarcmmodeldeltamodelwidth attrpydeltarcmmodeldeltamodeldx attrpydeltarcmmodeldeltamodell_met attrpydeltarcmmodeldeltamodel attrpydeltarcmmodeldeltamodelitermax attrpydeltarcmmodeldeltamodelnp_wat attrpydeltarcmmodeldeltamodelu attrpydeltarcmmodeldeltamodeln_met attrpydeltarcmmodeldeltamodelh attrpydeltarcmmodeldeltamodelhb attrpydeltarcmmodeldeltamodelh_sl attrpydeltarcmmodeldeltamodelslr attrpydeltarcmmodeldeltamodelnp_s attrpydeltarcmmodeldeltamodelf_bedload attrpydeltarcmmodeldeltamodelactive_layer_thick attrpydeltarcmmodeldeltamodelc_perc attrpydeltarcmmodeldeltamodelcsmooth attrpydeltarcmmodeldeltamodeltoggle_subsid attrpydeltarcmmodeldeltamodelsubsidence_r attrpydeltarcmmodeldeltamodelstart_subsid output set attrpydeltarcmmodeldeltamodelsave_eta_fig attrpydeltarcmmodeldeltamodelsave_stage_fig attrpydeltarcmmodeldeltamodelsave_depth_fig attrpydeltarcmmodeldeltamodelsave_discharge_fig attrpydeltarcmmodeldeltamodelsave_velocity_fig attrpydeltarcmmodeldeltamodelsave_sedflux_fig attrpydeltarcmmodeldeltamodelsave_sandfrac_fig attrpydeltarcmmodeldeltamodelsave_figs_sequenti attrpydeltarcmmodeldeltamodelsave_eta_grid attrpydeltarcmmodeldeltamodelsave_stage_grid attrpydeltarcmmodeldeltamodelsave_depth_grid attrpydeltarcmmodeldeltamodelsave_discharge_grid attrpydeltarcmmodeldeltamodelsave_velocity_grid attrpydeltarcmmodeldeltamodelsave_sedflux_grid attrpydeltarcmmodeldeltamodelsave_sandfrac_grid attrpydeltarcmmodeldeltamodelsave_discharge_compon attrpydeltarcmmodeldeltamodelsave_velocity_compon attrpydeltarcmmodeldeltamodelsave_dt attrpydeltarcmmodeldeltamodelcheckpoint_dt attrpydeltarcmmodeldeltamodelsave_checkpoint attrpydeltarcmmodeldeltamodelresume_checkpoint attrpydeltarcmmodeldeltamodelclobber_netcdf attrpydeltarcmmodeldeltamodellegacy_netcdf reducedcomplex rout paramet attrpydeltarcmmodeldeltamodelomega_sfc attrpydeltarcmmodeldeltamodelomega_flow attrpydeltarcmmodeldeltamodelnsmooth attrpydeltarcmmodeldeltamodeltheta_wat attrpydeltarcmmodeldeltamodelcoeff_theta_sand attrpydeltarcmmodeldeltamodelcoeff_theta_mud attrpydeltarcmmodeldeltamodelbeta attrpydeltarcmmodeldeltamodelsed_lag attrpydeltarcmmodeldeltamodelcoeff_u_dep_mud attrpydeltarcmmodeldeltamodelcoeff_u_ero_mud attrpydeltarcmmodeldeltamodelcoeff_u_ero_sand attrpydeltarcmmodeldeltamodelalpha attrpydeltarcmmodeldeltamodelstepmax model_info model inform section provid background inform pydeltarcm model model variabl paramet mean model simul hydrodynam morphodynam handl question answer toctre maxdepth yamlparamet modeltim hydrodynam morphodynam outputfil hydrodynam currentmodul pydeltarcmwater_tool pydeltarcm approxim hydrodynam use weight random walk see _ _ complet descript hydrodynam assumpt deltarcm model document focu detail model implement rather model design water rout oper orchestr objwater_toolsroute_wat follow section narrat sequenc event within singl call method rout individu water parcel probabl water parcel rout neighbor self cell comput begin water rout routin objwater_toolsget_water_weight_array call objwater_toolsrun_water_iter water rout probabl given cell mathj neighbor cell mathi comput accord math w_i fracfracr_i max mathbffcdotmathbfd_idelta mathmathbff local rout direct mathmathbfd_i unit vector point neighbor mathi cell mathj mathdelta_i cellular distanc neighbor mathi math cell main compass direct mathsqrt corner cell mathr_i flow resist estim invers function local water depth mathh_i math r_i frach_itheta expon maththeta take valu uniti default water rout attrpydeltarcmdeltamodeltheta_wat docreferencemodelyaml_default lead rout weight neighbor cell mathi math w_i frach_i max mathbffcdotmathbfd_idelta weight calcul wet neighbor cell dri neighbor cell take weight valu objwater_tools_get_weight_at_cell_wat final probabl rout cell mathj cell mathi calcul math p_i fracw_isum_nb w_nb ldot weight accumul neighbor probabl assign move cell mathj cell mathj ie movement probabl organ array selfwater_weight shape objl objw follow figur show sever exampl locat within model domain correspond water rout weight determin locat plot water_toolswater_weights_examplespi probabl comput locat begin water iter water parcel rout parallel stepbystep objwater_toolsrun_water_iter iter direct random walk chosen parcel via obj_choose_next_direct intern use funcpydeltarcmshared_toolsrandom_pick random exampl see random walk sever parcel plot water_toolsrun_water_iterationpi todo add sentenc two check_for_loop water rout complet water parcel either reach model domain boundari taken number step exceed attrpydeltarcmmodeldeltamodelstepmax remov rout via obj_check_for_loop function combin parcel free surfac follow rout water parcel walk must convert meaning way model field repres free surfac ie water stage first methwater_toolscompute_free_surfac call take input current bed elev path water parcel top row figur plot water_toolscompute_free_surface_inputspi methwater_toolscompute_free_surfac method intern call func_accumulate_free_surface_walk function determin number time cell visit water parcel sfc_visit total sum expect elev water surfac cell sfc_sum func_accumulate_free_surface_walk iter water parcel begin endpoint path work upstream note parcel determin loop func_check_for_loop describ exclud comput determin free surfac downstream landocean boundari determin depthorveloc threshold water surfac elev assum wherea upstream boundari predict elev water surfac determin distanc previous identifi water surfac elev background land slope attrpydeltarcmdeltamodel water surfac maintain approxim constant slope parcel pathway plot water_tools_accumulate_free_surface_walkspi algorithm track number time cell visit water parcel sfc_visit total sum expect elev water surfac cell sfc_sum ad predict surfac elev parcel step iter step parcel next output func_accumulate_free_surface_walk use calcul new stage surfac h_new base water parcel path expect water surfac elev approxim h_new sfc_sum sfc_visit updat water surfac combin previou timestep water surfac underrelax coeffici attrpydeltarcmdeltamodelomega_sfc plot water_toolscompute_free_surface_outputspi new free surfac comput final oper prepar surfac boundari condit updat eventu pass sediment rout oper insid methwater_toolsfinalize_free_surfac nonlinear smooth oper appli free surfac wherebi wet cell iter averag neighbor wet cell yield overal smoother surfac smooth handl func_smooth_free_surfac depend number iter attrpydeltarcmmodeldeltamodelnsmooth weight coeffici attrpydeltarcmmodeldeltamodelcsmooth plot water_tools_smooth_free_surfacepi final methwater_toolsflooding_correct appli domain correct dri cell cell flow depth less dry_depth check neighbor cell water surfac elev stage higher bed elev dri cell condit met given dri cell dri cell flood stage dri cell set maximum stage neighbor cell plot water_toolsflooding_correctionpi similar func_smooth_free_surfac describ methwater_toolsflooding_correct act remov rough water surfac contribut refmodel stabil modelst final boundari condit sediment rout final step water rout oper call objwater_toolsroute_wat updat model field applic correct boundari condit oper handl within objwater_toolsfinalize_water_iter first stage field limit elev equal sea level h_sl depth field updat vertic distanc stage field bed elev eta oper ensur field agreement entir model domain next method objwater_toolsupdate_flow_field objwater_toolsupdate_velocity_field call handl updat water discharg water veloc field respect note next step model updat sequenc sediment rout objpydeltarcmsed_toolssed_toolsroute_sedi inform next stage see docmorphodynam refer reducedcomplex model river delta format part model delta channel dynam liang v r voller c paola earth surf dynam httpsdoiorgesurf reducedcomplex model river delta format part assess flow rout scheme liang n geleyns edmond p passalacqua earth surf dynam httpsdoiorgesurf api api refer objdeltamodel class defin pydeltarcmmodel main class pydeltarcm provid object manipul evolv numer delta model class use mixin class defin separ file python modul break logic base variou stage model use compon model iter sequenc model function organ variou mixin class inherit deltamodel addit sever routin model organ modulelevel function jit via numba httpsnumbapydataorg_ code optim librari python index list pydeltarcm organ hope provid enough inform begin determin variou compon model implement index includ model class method attribut well addit util class function toctre maxdepth modelindex preprocessorindex iteration_toolsindex init_toolsindex water_toolsindex sed_toolsindex shared_toolsindex hook_toolsindex debug_toolsindex refer refmodindex refsearch search index refgenindex apised_tool sed_tool currentmodul pydeltarcmsed_tool todo add paragraph descript modul tool defin pydeltarcmsed_tool public api method attach model follow method defin sed_tool class pydeltarcmsed_tool modul autosummari sed_tool autoclass sed_tool router class follow class defin pydeltarcmsed_tool modul sediment rout class jit speed autosummari toctre _autosummari sandrout member inheritedmemb privatememb mudrout member inheritedmemb privatememb baserout member inheritedmemb privatememb sed_tool helper function addit sediment parcel stepweight function defin modul level pydeltarcmsed_tool autofunct _get_weight_at_cell_sedi apipreprocessor preprocessor currentmodul pydeltarcmpreprocessor highlevel api princip defin pydeltarcmpreprocessor todo add paragraph descript modul exist link relev document user guid exampl preprocessor class api follow class defin pydeltarcmpreprocessor modul enabl highlevel model api work command line python object autosummari toctre _autosummari preprocessorcli member inheritedmemb preprocessor member inheritedmemb basepreprocessor preprocessor function util todo add descript autofunct preprocessor_wrapp autofunct scale_relative_sea_level_rise_r autofunct _write_yaml_config_to_fil apiiteration_tool iteration_tool currentmodul pydeltarcmiteration_tool todo add paragraph descript modul stage defin gener make tabl main one like water tool public api method attach model follow method defin iteration_tool class pydeltarcmiteration_tool modul autosummari iteration_tool autoclass iteration_tool apidebug_tool debug_tool currentmodul pydeltarcmdebug_tool debug tool defin pydeltarcmdebug_tool todo add paragraph descript modul stage defin gener public api method attach model follow method defin debug_tool class pydeltarcmdebug_tool modul attach method deltamodel call time run autosummari debug_tool autoclass debug_tool public plot method function defin gener actual worker handl plot method defin attach model expos function use document use extens autofunct plot_domain autofunct plot_ind autofunct plot_lin apishared_tool shared_tool currentmodul pydeltarcmshared_tool todo add paragraph descript modul tool defin pydeltarcmshared_tool share function modul defin sever function use throughout model organ conveni autofunct get_random_uniform autofunct get_start_indic autofunct get_step autofunct random_pick autofunct custom_unravel autofunct custom_ravel autofunct custom_pad autofunct get_weight_sfc_int autofunct custom_yaml_load time scale function scale realworld time model time import topic cover detail docinfomodeltim sever function defin help scale model realworld time autofunct scale_model_tim autofunct _scale_factor util addit function defin pydeltarcmshared_tool manag random state model help document version manag autofunct set_random_se autofunct get_random_st autofunct set_random_st autofunct _docs_temp_directori autofunct _get_vers apiinit_tool init_tool currentmodul pydeltarcminit_tool model initi manag objpydeltarcmmodeldeltamodel__init__ actual initi mostli handl routin init_tool major step initi autosummari init_toolsimport_fil init_toolsinit_logg init_toolsprocess_input_to_model init_toolsdetermine_random_se init_toolscreate_other_vari init_toolscreate_domain init_toolsinit_sediment_rout init_toolsinit_subsid depend checkpoint configur follow method may call autosummari init_toolsload_checkpoint init_toolsinit_output_fil pydeltarcmiteration_toolsiteration_toolsoutput_data pydeltarcmiteration_toolsiteration_toolsoutput_checkpoint pydeltarcmiteration_toolsiteration_toolslog_model_tim public api method attach model follow method defin init_tool class pydeltarcminit_tool modul currentmodul pydeltarcminit_tool autosummari init_tool autoclass init_tool hook_tool currentmodul pydeltarcmhook_tool todo add paragraph descript modul stage defin gener link relev document hook user guid model list public api method attach model follow method defin hook_tool class pydeltarcmhook_tool modul autosummari hook_tool autoclass hook_tool avail model hook complet list hook model follow currentmodul pydeltarcmhook_tool csvtabl avail model hook header initi updat width objhook_toolshook_import_fil objhook_toolshook_solve_water_and_sediment_timestep objhook_toolshook_process_input_to_model objhook_toolshook_apply_subsid objhook_toolshook_create_other_vari objhook_toolshook_finalize_timestep objhook_toolshook_create_domain objhook_toolshook_route_wat objhook_toolshook_load_checkpoint objhook_toolshook_init_water_iter objhook_toolshook_output_data objhook_toolshook_run_water_iter objhook_toolshook_output_checkpoint objhook_toolshook_compute_free_surfac objhook_toolshook_init_output_fil objhook_toolshook_finalize_water_iter objhook_toolshook_route_sedi objhook_toolshook_route_all_sand_parcel objhook_toolshook_topo_diffus objhook_toolshook_route_all_mud_parcel objhook_toolshook_compute_sand_frac apimodel model main model code class defin pydeltarcmmodel deltamodel class attribut method currentmodul pydeltarcmmodel autosummari toctre _autosummari deltamodel model configur refer toctre maxdepth yaml_default model_hook default model variabl valu default model valu defin literalinclud pydeltarcmdefaultyml languag yaml lineno apiwater_tool water_tool currentmodul pydeltarcmwater_tool objpydeltarcmwater_toolswater_toolsroute_wat routin manag water rout objpydeltarcmwater_toolswater_toolsroute_wat water iter repeat total objpydeltarcmmodeldeltamodelitermax time iter water rout follow method call order autosummari water_toolsinit_water_iter water_toolsrun_water_iter water_toolscompute_free_surfac water_toolsfinalize_water_iter public api method attach model follow method defin water_tool class pydeltarcmwater_tool modul autosummari water_tool autoclass water_tool water_tool helper function follow routin jit speed gener take larg number array constant return new array continu model progress within method defin autofunct _get_weight_at_cell_wat autofunct _choose_next_direct autofunct _calculate_new_ind autofunct _check_for_loop autofunct _update_dirqfield autofunct _update_absqfield autofunct _accumulate_free_surface_walk autofunct _smooth_free_surfac timevari bedload follow exampl demonstr configur subclass model timevari paramet exampl timevari behavior aris manag two switch self_chang self_changed_back chang state objf_bedload paramet predetermin time mode sequenc follow code produc two run use matrix expans preprocessor baselin f_bedload valu either period middl run f_bedload valu mirror selff_bedload selff_bedload ie briefli switch bedload valu plot context reset includesourc class variablebedloadmodelpydeltarcmdeltamodel def __init__self input_filenon kwarg super__init__input_fil kwarg self_chang fals self_changed_back fals def hook_solve_water_and_sediment_timestepself chang state depend _time check state chang time chang self_chang self_tim selff_bedload selff_bedload self_chang true _msg bedload chang f_bedloadformat f_bedloadselff_bedload selflog_info_msg verbos check state chang back time chang back self_changed_back self_tim selff_bedload selff_bedload self_changed_back true _msg bedload chang back f_bedloadformat f_bedloadselff_bedload selflog_info_msg verbos rubric check statechang effect demonstr work let loop time check model state chang model time valu directli verifi model work intend never practic plot context pydeltarcmshared_tools_docs_temp_directori output_dir mdl_muddi variablebedloadmodelf_bedload out_diroutput_dir mdl_sandi variablebedloadmodelf_bedload code python mdl_muddi variablebedloadmodelf_bedload out_diroutput_dir mdl_sandi variablebedloadmodelf_bedload import never modifi model time via self_tim directli work model plot context includesourc creat figur fig ax pltsubplot set simul rang _time nplinspac e num fb_mdl_muddi npzeros_like_tim fb_mdl_sandi npzeros_like_tim loop time chang model time grab f_bedload valu _time enumerate_tim chang model time directli mdl_muddy_tim _time never mdl_sandy_tim _time never run hook method mdl_muddyhook_solve_water_and_sediment_timestep mdl_sandyhook_solve_water_and_sediment_timestep grab state f_bedload paramet fb_mdl_muddyi mdl_muddyf_bedload get valu fb_mdl_sandyi mdl_sandyf_bedload get valu add plot axplot_tim fb_mdl_muddi csaddlebrown lw labelmuddi axplot_tim fb_mdl_sandi cgoldenrod lw labelsandi axlegend clean axset_ylim axset_ylabelf_bedload axset_xlabelmodel time pltshow rubric run model real given yaml file variable_bedloadyaml code yaml length width dx n_meter c_percent slr e h u coeff_u_dep_mud parallel true matrix f_bedload script run code code python __name__ __main__ base yaml configur base_yaml variable_bedloadyaml pp pydeltarcmpreprocessor base_yaml timestep run job pprun_jobsdeltamodelvariablebedloadmodel save custom field output file given flexibl pydeltarcm model modif via hook subclass necessari variabl save output netcdf file similarli customiz fortun use subclass hook enabl flexibl set grid variabl save figur well custom field save netcdf file variabl metadata custom figur variabl save hook hook_init_output_fil use subclass pydeltarcm model ad model attribut keyvalu pair grid save figur key indic name figur file save valuepair string repres model attribut plot combin model attribut selfeta selfdepth exampl self_save_fig_listactive_lay active_lay properli indic figur activ layer save import builtin onthefli figur save model run support grid variabl shape l x w match model domain tri set figur save variabl shape result error ad variabl metadata initi subsequ save output netcdf keyvalu pair relationship follow key ad self_save_var_list name variabl record netcdf file correspond name attribut model add variabl metadata key must ad self_save_var_listmeta expect valu given key list contain string indic model attribut save unit variabl type lastli variabl dimens eg active_lay fraction f time x activ layer import dimens custom variabl specifi must match exactli one three standard dimens x time use invalid dimens result error exampl use hook creat model subclass custom figur grid variabl metadata save provid doctest import pydeltarcm class customsavemodelpydeltarcmdeltamodel subclass deltamodel save custom figur variabl subclass modifi list variabl figur use initi netcdf file save figur grid output file setup initi condit plot def __init__self input_filenon kwarg inherit base deltamodel method super__init__input_fil kwarg def hook_init_output_fileself add nonstandard grid figur metadata save save figur activ layer save_dt self_save_fig_listactive_lay active_lay save activ layer grid save_dt w short name self_save_var_listactlay active_lay fraction f time x save number water parcel w long name self_save_var_listmetawater_parcel np_water parcel next instanti model class code mdl customsavemodel doctest hide pydeltarcmshared_tools_docs_temp_directori output_dir mdl customsavemodelout_diroutput_dir subclass ad activ layer figur grid save well number water parcel metadata save simplic check appropri paramet ad save figur save variabl list howev pleas feel free give exampl tri local machin examin output figur netcdf file doctest active_lay mdl_save_fig_list true printmdl_save_fig_list active_lay active_lay printmdl_save_var_list meta water_parcel np_water parcel actlay active_lay fraction f time x constrain subsid part domain one case explor literatur deltarcm model case subsid limit one region model domain _ model configur readili achiev model subclass set custom subclass plot context reset includesourc class constrainedsubsidencemodelpydeltarcmdeltamodel simpl subclass deltamodel subsid region constrain subclass overwrit init_subsid method constrain subsid one region model domain def __init__self input_filenon kwarg inherit base deltamodel method super__init__input_fil kwarg def init_subsidenceself initi subsid pattern constrain tighter region use theta theta set angular bound subsid region theta theta set relat inlet orient inlet channel angl theta pi radian mean angl left inlet includ subsid region degre theta defin right angular bound subsid region similar fashion _msg initi custom subsid field selflog_info_msg verbos self_toggle_subsid theta nppi theta r selfl radial limit fraction l r selfl rloc npsqrtselfi selfl selfx selfw thetaloc npzerosselfl selfw thetalocselfi selfl nparctan selfxselfi selfl selfw selfyselfi selfl selfl selfsubsidence_mask r rloc rloc r theta thetaloc thetaloc theta selfsubsidence_maskselfl fals selfsigma selfsubsidence_mask selfsubsidence_r selfdt initi model look field note colorscal depict magnitud subsid model per timestep sigma unit meter code python mdl constrainedsubsidencemodeltoggle_subsidencetru plot context pydeltarcmshared_tools_docs_temp_directori output_dir mdl constrainedsubsidencemodeltoggle_subsidencetru out_diroutput_dir plot context includesourc fig ax pltsubplot mdlshow_attributesigma gridfals pltshow use custom subclass preprocessor configur objpreprocessor handl set custom run conjunct custom pydeltarcm model subclass exampl _ author explor impact subsid variou rate mmyr mmyr mmyr mmyr mmyr mmyr scale rate assum model docintermitt factor infomodeltim repres day flood per year use conveni function objpydeltarcmpreprocessorscale_relative_sea_level_rise_r plot context closefig includesourc pydeltarcmpreprocessor import scale_relative_sea_level_rise_r subsidence_mmyr nparray subsidence_sc scale_relative_sea_level_rise_ratesubsidence_mmyr use refmatrix expans matrix_expansion_tag set run preprocessor exampl python script follow definit subclass defin dictionari matrix key suppli preprocessor plot context includesourc add matrix subsid dict param_dict param_dictmatrix subsidence_r subsidence_sc add configur param_dictupd out_dir liang__reproduc toggle_subsid true parallel take advantag parallel job code creat preprocessor pp pydeltarcmpreprocessor param_dict timestep final run job specifi model subclass class use instanti job preprocessor overwrit make sure run one timestep plot context pydeltarcmshared_tools_docs_temp_directori output_dir param_dictout_dir output_dir pp pydeltarcmpreprocessor param_dict parallelfals timestep pprun_jobsdeltamodelconstrainedsubsidencemodel code python run job pprun_jobsdeltamodelconstrainedsubsidencemodel check whether run set expect plot context includesourc matplotlibcolor import normal fig ax pltsubplot sharextru shareytru figsiz norm normalizevmin vmax job enumerateppjob_list first convert field rate subsidence_rate_field jobdeltamodelsigma jobdeltamodeldt convert mmyr subsidence_rate_field subsidence_rate_field pydeltarcmshared_tools_scale_factorif unitsyear display im axflatiimshowsubsidence_rate_field normnorm figcolorbarim axaxraveltolist pltshow liang kim w passalacqua p much subsid enough chang morpholog river delta geophys research letter doigl exampl use work pydeltarcm modifi initi condit toctre maxdepth slight_slop modifi boundari condit toctre maxdepth updating_boundary_condit subsidence_region variable_bedload variable_veloc modifi intern comput none modifi behavior preprocessor none modifi model inputoutput toctre maxdepth custom_yaml custom_sav updat model boundari condit implement custom model subclass common want chang boundari condit throughout model run see docvariable_bedload docvariable_veloc situat want chang singl variabl see effect chang variabl essenc push model dynam equilibrium anoth possibl would want chang boundari condit inlet maintain dynam equilibrium let creat deltamodel class demonstr code mdl deltamodel doctest hide pydeltarcmshared_tools_docs_temp_directori output_dir mdl pydeltarcmdeltamodelout_diroutput_dir see default set initi model flow veloc ms flow depth unit water discharg ms doctest mdlu mdlh mdlqw number model iter want chang inlet flow veloc ms could simpli set valu directli doctest mdlu model thrown equilibrium unit water discharg longer match product flow depth flow veloc doctest mdlu mdlh mdlqw remedi need use objpydeltarcminit_toolsinit_toolscreate_boundary_condit method reiniti number field base current valu inlet flow veloc doctest mdlcreate_boundary_condit mdlqw import respons ensur boundari condit updat appropri manner chang certain model paramet need call method reiniti boundari condit defin custom yaml paramet currentmodul pydeltarcmhook_tool custom subclass standard deltamodel may requir addit custom paramet list docreferencemodelyaml_default use hook objhook_toolshook_import_fil straightforward defin custom yaml paramet along expect type default valu subclass model follow subclass model demonstr defin custom boolean paramet could use toggl custom function onoff custom numer paramet could requir custom function doctest import pydeltarcm class customparamsmodelpydeltarcmdeltamodel subclass deltamodel custom yaml paramet subclass defin custom yaml paramet expect type default valu def __init__self input_filenon kwarg inherit base deltamodel method super__init__input_fil kwarg def hook_import_filesself defin custom yaml paramet custom boolean paramet selfsubclass_parameterscustom_bool type bool default fals custom numer paramet selfsubclass_parameterscustom_numb type int float default subclass model load yaml configur file explicitli defin custom paramet default valu assign model attribut code default customparamsmodel doctest hide pydeltarcmshared_tools_docs_temp_directori output_dir default customparamsmodelout_diroutput_dir doctest printdefaultscustom_bool fals printdefaultscustom_numb note sinc custom yaml paramet expect type typeerror rais custom paramet type provid yaml agre expect defin subclass custom paramet defin subclass model treat like default model paramet specifi yaml keyword argument kwarg code custom customparamsmodelcustom_booltru custom_numb doctest hide pydeltarcmshared_tools_docs_temp_directori output_dir custom customparamsmodelout_diroutput_dir custom_booltru custom_numb doctest printcustomizedcustom_bool true printcustomizedcustom_numb slightli slope basin consid case research seek explor effect receiv basin slope perpendicular channel outlet research ask slope basin caus channel steer toward deeper water compens higher research easili use subclass model hook achiev desir effect recal anyth ad end subclass __init__ method call instanti subclass plot context reset includesourc class slightslopemodelpydeltarcmdeltamodel subclass deltamodel slope basin subclass simpli modifi basin geometri comput occur def __init__self input_filenon kwarg inherit base deltamodel method super__init__input_fil kwarg modifi basin slope cross basin slope eta_lin slope nparang selfwidth stepselfdx eta_grid nptileeta_lin selfl selfl eta_grid eta_grid slope selfwidth center inlet selfetaselfl eta_grid next instanti model class code mdl slightslopemodel plot context pydeltarcmshared_tools_docs_temp_directori output_dir mdl slightslopemodelout_diroutput_dir final make plot initi condit use objpydeltarcmdebug_toolsdebug_toolsshow_attribut method plot context includesourc fig ax pltsubplot mdlshow_attributeeta gridfals pltshow tri even complet model run channel steer basin slope import exampl take care updat model stage depth field simpl case work fine singl timestep field correctli comput rel modifi bed howev take caution modifi deltamodel field directli sure chang relev field timevari inlet veloc straightforward creat model timevari boundari condit exampl set array valu use inlet flow veloc depend time model ie timeseri implement dont know timestep model creat interpol actual inlet flow veloc boundari condit timeseri defin boundari condit first let set boundari condit array want use well set function call model subclass well plot plot context reset includesourc def create_velocity_arrayend_tim h k creat veloc timeseri _time nplinspac end_tim num _veloc npsin_tim hb k return _time _veloc function defin take end_tim model run well shape paramet comput accord math sin left frac left h right b right k matht time array second inspect result function call model subclass plot context includesourc end_tim _time_array _velocity_array create_velocity_array end_tim make plot boundari condit fig ax pltsubplot axplot_time_array _velocity_array axset_xlabeltim second axset_ylabelinlet veloc meterssecond pltshow defin model subclass defin model subclass handl chang boundari condit plot context closefig includesourc class changingvelocitymodelpydeltarcmdeltamodel model chang flow veloc creat model chang inlet flow veloc throughout run exampl veloc chang timestep valu set interpol predetermin timeseri veloc def __init__self input_filenon end_tim kwarg inherit base model super__init__input_fil kwarg set attribut interpol self_time_array self_velocity_array create_velocity_array end_tim use default shape paramet array def hook_solve_water_and_sediment_timestepself chang veloc find new veloc set model selfu npinterpself_tim self_time_array self_velocity_array updat boundari condit use u selfcreate_boundary_condit log new valu _msg chang veloc valu uformat uselfu selflog_info_msg verbos simpli run plot context creat model sure work good doc pydeltarcmshared_tools_docs_temp_directori output_dir mdl changingvelocitymodel end_tim out_diroutput_dir code mdl changingvelocitymodelend_timeend_tim mdltime end_tim mdlupdat note inform updat boundari condit chang certain model paramet see docupdating_boundary_condit