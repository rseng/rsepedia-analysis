creat react app build statushttpstravisciorgfacebookcreatereactappsvgbranchmasterhttpstravisciorgfacebookcreatereactapp pr welcomehttpsimgshieldsiobadgeprswelcomegreensvghttpsgithubcomfacebookcreatereactapppul creat react app build configur creat appcreatinganapp creat new app user guidehttpsfacebookgithubiocreatereactapp develop app bootstrap creat react app creat react app work maco window linuxbr someth doesnt work pleas file issuehttpsgithubcomfacebookcreatereactappissuesnew quick overview sh npx createreactapp myapp cd myapp npm start _npxhttpsmediumcommaybekatzintroducingnpxannpmpackagerunnerfdbdb come npm higher see instruct older npm versionshttpsgistgithubcomgaearondcacacabbcf_ open httplocalhosthttplocalhost see appbr your readi deploy product creat minifi bundl npm run build p aligncent img srchttpscdnrawgitcomfacebookcreatereactappbacscreencastsvg width altnpm start p get start immedi dont need instal configur tool like webpack babelbr preconfigur hidden focu code creat project your good go creat app youll need node later local develop machin requir server use nvmhttpsgithubcomcreationixnvminstal macoslinux nvmwindowshttpsgithubcomcoreybutlernvmwindowsnodeversionmanagernvmforwindow easili switch node version differ project creat new app may choos one follow method npx sh npx createreactapp myapp _npxhttpsmediumcommaybekatzintroducingnpxannpmpackagerunnerfdbdb come npm higher see instruct older npm versionshttpsgistgithubcomgaearondcacacabbcf_ npm sh npm init reactapp myapp _npm init initi avail npm _ yarn sh yarn creat reactapp myapp _yarn creat avail yarn _ creat directori call myapp insid current folderbr insid directori gener initi project structur instal transit depend myapp readmemd node_modul packagejson gitignor public faviconico indexhtml manifestjson src appcss appj apptestj indexcss indexj logosvg serviceworkerj configur complic folder structur file need build appbr instal done open project folder sh cd myapp insid newli creat project run builtin command npm start yarn start run app develop modebr open httplocalhosthttplocalhost view browser page automat reload make chang codebr see build error lint warn consol p aligncent img srchttpscdnrawgitcommarioneblcreatereactappfscreencasterrorsvg width altbuild error p npm test yarn test run test watcher interact modebr default run test relat file chang sinc last commit read testinghttpsfacebookgithubiocreatereactappdocsrunningtest npm run build yarn build build app product build folderbr correctli bundl react product mode optim build best perform build minifi filenam includ hashesbr app readi deploy user guid find detail instruct use creat react app mani tip documentationhttpsfacebookgithubiocreatereactapp updat new version pleas refer user guidehttpsfacebookgithubiocreatereactappdocsupdatingtonewreleas inform philosophi one depend one build depend use webpack babel eslint amaz project provid cohes curat experi top configur requir dont need configur anyth reason good configur develop product build handl focu write code lockin eject custom setup time run singl command configur build depend move directli project pick right left what includ environ everyth need build modern singlepag react app react jsx es typescript flow syntax support languag extra beyond es like object spread oper autoprefix css dont need webkit prefix fast interact unit test runner builtin support coverag report live develop server warn common mistak build script bundl js css imag product hash sourcemap offlinefirst servic workerhttpsdevelopersgooglecomwebfundamentalsgettingstartedprimersservicework web app manifesthttpsdevelopersgooglecomwebfundamentalsengageandretainwebappmanifest meet progress web apphttpsfacebookgithubiocreatereactappdocsmakingaprogressivewebapp criteria _note use servic worker optin reactscript higher_ hasslefre updat tool singl depend check guidehttpsgithubcomnitishdayalcra_closer_look overview tool fit togeth tradeoff tool preconfigur work specif way project need custom ejecthttpsfacebookgithubiocreatereactappdocsavailablescriptsnpmruneject custom need maintain configur popular altern creat react app great fit learn react comfort featurerich develop environ start new singlepag react applic creat exampl react librari compon common case might want tri someth els want tri react without hundr transit build tool depend consid use singl html file onlin sandbox insteadhttpsreactjsorgdocstryreacthtml need integr react code serversid templat framework like rail django symfoni your build singlepag app consid use nwbhttpsgithubcominsinnwb neutrinohttpsneutrinojsorg flexibl rail specif use rail webpackerhttpsgithubcomrailswebpack symfoni tri symfoni webpack encorehttpssymfonycomdoccurrentfrontendencorereactjshtml need publish react compon nwbhttpsgithubcominsinnwb also thishttpsgithubcominsinnwbreactcomponentsandlibrari well neutrino reactcompon presethttpsneutrinojsorgpackagesreactcompon want server render react nodej check nextjshttpsgithubcomzeitnextj razzlehttpsgithubcomjaredpalmerrazzl creat react app agnost backend produc static htmljscss bundl websit mostli static exampl portfolio blog consid use gatsbyhttpswwwgatsbyjsorg instead unlik creat react app prerend websit html build time final need custom check neutrinohttpsneutrinojsorg react presethttpsneutrinojsorgpackagesreact tool work littl configur prefer configur build follow guidehttpsreactjsorgdocsaddreacttoanexistingapphtml contribut wed love help hand createreactapp see contributingmdcontributingmd inform look get start react nativ look someth similar react nativebr check expo clihttpsgithubcomexpoexpocli acknowledg grate author exist relat project idea collabor eanplatterhttpsgithubcomeanplatt insinhttpsgithubcominsin mxstbrhttpsgithubcommxstbr licens creat react app open sourc softwar licens mithttpsgithubcomfacebookcreatereactappblobmasterlicens titl libertem softwar platform scalabl multidimension data process transmiss electron microscopi tag python transmiss electron microscopi distribut big data mapreduc author name alexand clausen orcid affili name dieter weber orcid affili name karina ruzaeva affili orcid name vadim migunov affili orcid name anand baburajan affili orcid x name abijith bahuleyan affili orcid name jan caron affili orcid x name rahul chandra affili orcid name sayandip halder affili orcid name magnu nord affili orcid name knut müllercaspari affili orcid name rafal e duninborkowski affili orcid affili name forschungszentrum jülich ernst ruskacentr microscopi spectroscopi electron index name chandigarh univers index name central facil electron microscopi gfe rwth aachen univers index name univers antwerp emat index name govern engin colleg sreekrishnapuram index name jadavpur univers index date decemb bibliographi paperbib summari increas data rate detector electron microscopi em outpac increas network mass storag memori bandwidth two order magnitud weber libertem open sourc platform clausen design match grow perform requir em data process weber motiv data rate fastest detector electron microscopi avail exce gb faster memori bandwidth typic person comput pc time applic ten year ran smoothli typic pc evolv numer analysi complex multidimension dataset ophu requir distribut process highperform system furthermor electron microscopi interact visual experi perform insid electron microscop socal situ experi often reli fast onlin data process experiment paramet need adjust base observ result consequ modern data process system electron microscopi design high throughput combin short respons time interact gui use closedloop feedback requir fundament chang architectur program model consequ implement algorithm user interfac electron microscopi applic descript libertem open sourc platform highthroughput distribut process largescal binari data set develop fulfil demand requir high throughput distribut system combin respons interact interfac current focu applic develop electron microscopi nevertheless libertem suitabl kind largescal binari data hyperrectangular array layout notabl data synchrotron neutron sourc libertem use simplifi mapreduc dean program model design run perform well pc singl server node cluster cloud servic cluster use fast distribut local storag highperform ssd way achiev high aggreg io perform compact costeffici system built stock compon cluster eight microblad node could show mass storag throughput gb virtual detector calcul libertem support linux mac os x window platform allow instal python requir packag like work well gui run web browser base process architectur libertem offer implement variou applic electron microscopi data includ basic capabl integr rang input data virtual detector virtual darkfield imag exampl advanc applic data process strain map amorph materi phase chang materi applic ad develop progress compar establish mapreducelik system like apach spark zaharia apach hadoop patel offer data model similar numpi walt suitabl typic binari data area detector oppos tabular data case spark hadoop includ interfac establish pythonbas numer process tool support number relev file format em data featur optim data path numer data elimin unnecessari copi allow cacheeffici process compar tool dask array numpybas distribut comput rocklin libertem develop toward lowlat interact feedback gui display well futur applic highthroughput distribut live data process consequ data reduct oper libertem defin topdown oper like case dask array broken graph lowerlevel oper explicitli defin bottomup stream oper work small portion input data way libertem work effici smaller data portion fit l cach typic cpu compar dask array tri emul numpi array close possibl data program model libertem rigid close link way data structur reduct oper perform backend place restrict implement oper time easier understand control optim specif oper execut backend userdefin oper particular easier implement complex reduct way perform effici singl pass data main focu libertem achiev high throughput respons gui interact scalabl offlin live data process requir result distinct way handl data combin match program model ensur compat interoper solut like gatan microscopi suit gmshttpwwwgatancomproductstemanalysisgatanmicroscopysuitesoftwar dask hyperspi pena pyxem johnston pixstemhttpspixstemorg other work progress use similar data model make integr possibl principl exampl libertem run within develop version upcom gm releas includ embed python interpret alreadi gener effici daskdistribut array data format support onlin document detail instal use architectur applic support format perform benchmark found httpslibertemgithubiolibertem live data process interact microscopi autom experi current develop architectur program model libertem alreadi develop way current applic work live data stream without modif soon backend support implement acknowledg project receiv fund european research council erc european union horizon research innov programm grant agreement video magic project receiv fund european union horizon research innov programm grant agreement critcat esteem grate acknowledg fund initi network fund helmholtz associ within helmholtz young investig group morestem contract vhng forschungszentrum jülich germani grate acknowledg fund inform data scienc pilot project ptychographi helmholtz associ kindli acknowledg fund googl summer code umbrella python softwar foundat stemx equip softwar stem data acquisit k camera courtesi gatan inc forschungszentrum jülich support libertem fund personnel access infrastructur administr support furthermor wish thank larg number peopl contribut variou way libertem maintain full continu updat list creator contributor onlinehttpslibertemgithubiolibertemacknowledgmentshtml refer gitter_ azure_ github_ codeclimate_ precommit_ joss_ zenodo_ gitter imag httpsbadgesgitterimjoinchatsvg _gitter httpsgitterimlibertemlobbi azur imag httpsdevazurecomlibertemlibertem_apisbuildstatuslibertemlibertembranchnamemast _azur httpsdevazurecomlibertemlibertem_buildlatestdefinitionidbranchnamemast zenodo imag httpszenodoorgbadgedoizenodosvg _zenodo httpsdoiorgzenodo github imag httpsimgshieldsiobadgegithubgplinform _github httpsgithubcomlibertemlibertem codeclim imag httpsapicodeclimatecomvbadgesdeeffemaintain _codeclim httpscodeclimatecomgithublibertemlibertem joss imag httpsjosstheojorgpapersjossstatussvg _joss httpsdoiorgjoss precommit imag httpsresultsprecommitcibadgegithublibertemlibertemmastersvg _precommit httpsresultsprecommitcilatestgithublibertemlibertemmast libertem open sourc platform highthroughput distribut process largescal binari data set live data stream use modifi mapreduc program model httpsenwikipediaorgwikimapreduce_ current focu pixel httpsenwikipediaorgwikiscanning_transmission_electron_microscopyuniversal_detectors_d_stem_ scan transmiss electron microscopi stem httpsenwikipediaorgwikiscanning_transmission_electron_microscopy_ citedoiemcophus_ scan electron beam diffract data mapreducelik process allow specifi algorithm two function one function map portion input data anoth function merg reduc partial result map step complet result wide rang tem stem process task express fashion see applications_ udf interfac libertem offer standard versatil api decoupl mathemat core algorithm detail data sourc parallel use result map merg perform order differ subdivis input data includ run part calcul concurr mean implement use wide rang modal includ massiv scale cluster sinc merg step produc intermedi result style process suitabl display live result run calcul gui applic process live data stream httpsgithubcomlibertemlibertemlive_ closedloop feedback process instrument control realiz well see userdefin function httpslibertemgithubiolibertemudfhtml_ detail libertem udf interfac libertem backend offer high throughput scalabl httpslibertemgithubiolibertemarchitecturehtml_ pc singl server node cluster cloud servic cluster use fast distribut local storag highperform ssd way achiev high aggreg io perform httpslibertemgithubiolibertemperformancehtml_ compact costeffici system built stock compon cpu core cuda devic system use parallel libertem support linux mac os x window platform allow instal python requir packag like work well gui run web browser instal short version codeblock shell virtualenv p python libertemvenv sourc libertemvenvbinactiv libertemvenv python pip instal libertemtorch option gpu support see also httpsdocscupydevenstableinstallhtml libertemvenv python pip instal cupi pleas see document httpslibertemgithubioliberteminstallhtml_ detail altern run libertem docker imag httpslibertemgithubiolibertemdeploymentclustercontainerhtml_ codeblock shell docker run p localhost mount typebindsourcepathtoyourdatadstdataro libertemlibertem codeblock shell singular run dockerlibertemlibertem venvbinlibertemserv deploy offlin data process singlenod system local user thoroughli test consid stabl deploy cluster experiment still requir addit work see issu httpsgithubcomlibertemlibertemissues_ backend support live data process still experiment well see httpsgithubcomlibertemliberteml applic sinc libertem programm userdefin function udf httpslibertemgithubiolibertemudfhtml_ use wide rang process task arraylik data data stream follow applic implement alreadi virtual detector virtual bright field virtual haadf center mass citekrajnak custom shape via mask analysi amorph materi httpslibertemgithubiolibertemappamorphoushtml_ strain map httpslibertemgithubiolibertemblobfinder_ offaxi electron holographi reconstruct httpslibertemgithubiolibertemappholographyhtml_ singl side band ptychographi httpsptychographygithubioptychography_ applic avail interact web gui httpslibertemgithubiolibertemusagehtmlguiusage_ pleas see applic section httpslibertemgithubiolibertemapplicationshtml_ document detail python api userdefin function udf use complex oper arbitrari linear oper featur like data export exampl jupyt notebook avail exampl directori httpsgithubcomlibertemlibertemtreemasterexamples_ troubl run exampl pleas let us know file issu join gitter chat httpsgitterimlibertemlobby_ libertem suitabl highperform process backend applic includ live data stream contact us httpsgitterimlibertemlobby_ interest libertem evolv rapidli priorit featur follow user demand contribut current work live data process httpsgithubcomlibertemlibertemlive_ integr dask array hyperspi httpsgithubcomlibertemlibertemissues_ support spars data implement analysi method variou applic pixel stem largescal detector data like influenc direct project take youd like contribut httpslibertemgithubiolibertemcontributinghtml_ pleas join gitter chat httpsgitterimlibertemlobby_ gener mail list httpsgroupsgooglecomforumforumlibertem_ file format libertem current open file format use pixel stem see gener inform load data httpslibertemgithubiolibertemformatshtml_ formatspecif document httpslibertemgithubiolibertemreferencedatasethtmlformats_ inform raw binari file thermo fisher empad detector citet file quantum detector mib format httpquantumdetectorscomwpcontentuploadsmerlinforemtechnicaldatasheetvpdf_ nanomega blo block file direct electron de file hdfbase norpix seq file deseri httpwwwdirectelectroncomdeseries_ detector gatan k httpswebarchiveorgwebhttpwwwgatancomproductstemimagingspectroscopykcamera_ raw format stack gatan dm dm file via openncem httpsgithubcomerciusopenncem_ frm pndetector pnccd camera citesimson current alpha gain correct still need ui chang fei ser file via openncem httpsgithubcomerciusopenncem_ mrc via openncem httpsgithubcomerciusopenncem_ hdfbase format hyperspi file nexu emd tvip binari file pleas contact us interest support addit format detector experiment current quantum detector merlin camera support live process support gatan k camera prototyp state pleas contact us httpsgitterimlibertemlobby_ interest featur see httpsgithubcomlibertemliberteml detail live process licens libertem licens gplv io part also avail mit licens pleas see licens file subdirectori detail decod bit uint imag data gatan k camera encod bit pack unsign integ ie pixel valu occupi byte sinc format process directli cpu unpack suitabl format first exampl uint cpun raw data libertem process backend achiev stagger throughput beyond gb suitabl numer packag like bla implement pytorch optim bit decod one critic compon achiev perform level nativ k format simpl algorithm unpackalexpi achiev decent perform gb numba howev order magnitud slower speed libertem process suitabl data directli reason investig option increas speed simpl algorithm limit modern cpu achiev optim throughput use simd instruct set optim cach use read data predict pattern align bit bit boundari among thing simpl algorithm problemat context read input threebyt portion loop iter read differ align rel bit bit boundari furthermor number iter unknown compil time pattern make hard compil vector loop ie combin block sever loop iter set simd instruct approach vector bit unpack bit pattern bit data stream align bit bit boundari repeat fashion specif everi bit x uintuint x bit input stream cpun view data align gener case bitlength input data calcul divid sourc resp work bit length greatest common divisor gcd yield number data word block seen work resp sourc perspect mean block process sequenc cpu instruct ie simd instruct use process sever block togeth parallel theori advanc compil could perhap futur recogn pattern without human intervent practic code written explicitli process data block compil recogn vector pattern convers get complic endian input data cpu interpret sinc x cpu littleendian ie lowest order byte lowest address data word bit signific bit uint input data k littl endian well follow b b b b b b b b b b b b want good perform use simd instruct idea read input data align uint uint littleendian machin bit portion pack unpack rel simpl mask shift oper big endian machin variou bit input stream fish smaller unit use mask shift final ord appropri place uint output word much possibl simd instruct hard understand human jupyt notebook encode_decodeipynb contain code calcul appropri indic shift mask map everi bit input block appropri place output sequenc bit length permut big littl endian verif sampl handwritten exampl encod decod block bit littleendian uint littleendian machin includ notebook unpackcpp unpackcpp contain code cover gener case process big endian data littl endian machin ie arbitrari combin input bit length work regist endian code inde vector gcc howev like optim yet mani case sever singlebit oper ord togeth indic shift differ mask bit compil version unpackcpp unpackcpp indic optim recogn sever oper group that known sure reason version handwritten code use optim sequenc bit bigendian littleendian calcul python version written remain test version actual faster end gener consider optimizerfriendli code compil optim work best much possibl known precalcul compil time cc code contain variou measur help compil task code gener contain intermedi loop number iter known compil time help vector test potenti sweet spot block size code cover unalign remain block omit simplic helper function design declar constexpr motiv compil maximum evalu compil time inde success much sourc code part output machin code inlin compact instruct sequenc function input valu depend input data constant use instead variabl possibl seem help optim input output data read written directli fromto buffer first copi local array process second local array copi output array variou implement c group order oper block room variat inner loop process entir block sever inner loop execut sequenti process specif word input output data block number block row possibl explor variou c implement goal see compil make furthermor data type block size vari code chang appropri valu none implement test correct like contain issu index calcul dont show compil time furthermor benchmark yet main goal explor write code vector optim explor compil result look httpsgodboltorg select languag compil copi past code see machin code gener conclus modifi algorithm inde vector compil sever variat one faster far certain might depend mani differ factor includ cach effici code data even possibl simpl implement fastest end work present perhap serv start point investig _concept concept libertem develop fulfil requir stem data process use process task ndimension detector data well stem electron beam scan sampl posit imag record mean two spatial axe two detector axe also call spatial axe scan axe gener navig axe roughli correspond batch axi machin learn framework detector axe also call signal axe singl imag also call frame axi order gener follow numpi convent axi order data set could codeni nx sy sx tupl describ shape matlab user keep one thing mind navig axe python transpos matlab python indic increas linearli row x python matrix repres follow way codeblock python offici numpi matlab user documentation_ might help matlab user coordin system libertem work pixel coordin correspond array indic mean top left corner x axi point right axi point bottom follow usual plot convent pixel data libertem use righthand coordin system mean z axi point away posit rotat therefor clockwis note pleas note data save differ relat physic coordin pixel coordin notabl mib refer file quantum detector merlin camera axi invert display libertem libertem gener doesnt deal transform numer backend methlibertemapicontextcreate_com_analysi capabl flip axi rotat shift coordin ad version support process mib file calcul result physic mean electron microscopi curl diverg see also issu discuss regard full support physic unit found issu multidimension data gui current limit visual python api limit load data arbitrati dimension specifi applicationspecif shape use gui python api provid io routin support format method current built imag data problem load process exampl time seri want process data exampl sampl write refudf userdefin function note case frame longer _the offici numpi matlab user document httpsnumpyorgdocusernumpyformatlabusershtmlnumpyformatlabus _contribut contribut libertem intend design collabor develop platform data analysi mean develop coordin openli mostli github repositori httpsgithubcomlibertemlibertem_ code host suggest issu bug report discuss code contribut highli appreci pleas let us know think improv someth code commun aspect develop principl rather extens grow list thing work httpsgithubcomlibertemlibertemissues_ therefor priorit limit resourc work item largest benefit user base project support user contribut code import us pleas contact us help furthermor priorit featur creat direct benefit mani current user open signific new applic gener follow user demand develop design new featur roughli follow lead user method httpsenwikipediaorgwikilead_user_ mean develop new featur close along nontrivi realworld applic order make sure develop appropri easi use practic interfac refuserdefin function exampl follow requir around implement run complex algorithm like strain map httpslibertemgithubiolibertemblobfinderexampleshtml_ distribut system furthermor valu systemat approach develop requir analysi evalu design option well iter design fast test review cycl code contribut use pull request httpsdocsgithubcomengithubcollaboratingwithpullrequestsproposingchangestoyourworkwithpullrequestsaboutpullrequests_ accept contribut pull request focu singl issu keep number chang small review keep chang organ prevent unrel chang disturb pull request creat new branch pull request pull request come user person fork sinc dont push main repositori develop see github document creat manag fork httpsdocsgithubcomengetstartedquickstartforkarepo_ detail creat pull request pleas make sure test still pass see run tests_ inform also updat test suit add test case contribut see section code coverage_ check new code cover test make sure code base stay readabl consist follow code style_ pleas updat packagingcreatorsjson author inform contribut libertem first time help us keep track contributor give credit credit due pleas let us know wouldnt like credit refauthorship describ detail manag authorship libertem relat materi chang part libertem current cover test pleas consid write new test chang exampl code run part test make sure exampl still run ad chang featur also updat correspond document add new section featur follow current document structur ask maintain new document end introduc featur okay start draft document first pr complet later chang api updat correspond docstr pleas includ version inform add chang featur order track document chang use roll document document previou behavior well exampl featur ad version dev describ behavior version dev onward previou behavior applic use versionad httpswwwsphinxdocorgenmasterusagerestructuredtextdirectiveshtmldirectiveversionadded_ relat direct changelog develop branch maintain collect file codedocssourcechangelog folder structur chang get separ file avoid merg conflict file merg master changelog creat releas follow item might requir updat upon introduc chang featur changelog snippet codedocssourcechangelog docstr exampl main document submit pull request someon libertem organ review pull request may add comment ask question case pr touch io code organ member may run io test access test data set separ azur agent use follow comment pr codeblock text azp run libertemlibertemdata everyth good go chang merg delet branch creat pull request seealso guid understand github flow httpsguidesgithubcomintroductionflow_ seealso make simpl github pr video httpswwwyoutubecomwatchvcysuuutbce_ _run test run test test written use pytest run repeat manner use tox tox automat manag virtualenv allow test differ python version interpret implement make sure run test local way run continu integr instal tox httpstoxreadthedocsioenlatestinstallhtml_ run test python version simpli run tox codeblock shell tox specifi specif environ want run codeblock shell tox e py faster iter also run part test suit without use tox make work first instal test requir virtualenv codeblock shell libertem python pip instal r test_requirementstxt run pytest subset test exampl codeblock shell libertem pytest teststest_analysis_maskspi run test parallel may make sens beefi machin mani core lot ram codeblock shell libertem pytest n auto test see pytest document httpsdocspytestorgenlatesthowtousagehtmlspecifyingwhichteststorun_ detail select test run submit pull request alway run whole test suit test mark custom marker httpsdocspytestorgenlatestexamplemarkershtml_ exampl test take mani second complet select test run mark use switch exampl run slow test codeblock shell tox slow default slow test run want run slow test use boolean express like codeblock shell tox slow slow anoth exampl exclud slow function test codeblock shell tox function slow exampl separ argument tox left argument pytest right list mark use test suit slow test take much longer second run function test spin local dask cluster exampl notebook exampl notebook also run part test suit use nbval httpsnbvalreadthedocsioenlatest_ output save notebook compar output rerun notebook write exampl notebook sometim requir work certain thing chang run run pleas check nbval document httpsnbviewerjupyterorggithubcomputationalmodellingnbvalblobmasterdocssourceindexipynb_ understand ignor valu see also codenbval_sanitizecfg file current ignor pattern notebook output float point valu may get spuriou failur precis issu set precis use codeprecis ipython magic use import numpi run notebook test follow codeblock shell testdata_base_pathpathtothetestdata tox e notebook need access certain sampl data set publish yet pleas contact us get access cuda run test requir cupi use tox specifi cuda version test environ codeblock shell tox e pycuda code coverag run test inspect test coverag open htmlcovindexhtml web browser creat pull request chang coverag also report codecov bot ideal test coverag go pull request least stay _benchmark benchmark libertem use pytestbenchmark httpspytestbenchmarkreadthedocsioenlatestusagehtml_ benchmark certain performancecrit part code run benchmark adhoc use codeblock shell pytest benchmark benchmark numba compil time disabl default sinc numba cach compil result ie one make sure benchmark function previous run interpret run use codeblock shell pytest compil benchmark order record complet benchmark run later comparison use note requir codetox sinc use gener section name codetoxini codeblock shell tox e benchmark altern tox e benchmarkcuda tox e benchmarkcuda save benchmark data json file subfold codebenchmark_result process commit result report conveni fashion develop see issu feedback welcom versionad first benchmark includ help resolv issu benchmark coverag grow time run test client run testsuit client first instal javascripttypescript depend codeblock shell cd client npm instal directori run test execut codeblock shell npm test coverag run test report code coverag want run test develop client run watch mode default codeblock shell cd client npm test code style tri keep code pep httpswwwpythonorgdevpepspep_ compliant linelength relax char rule ignor see flake section codesetupcfg current pep set gener rule tri keep chang similar style surround code submit pull request pleas check code style run codeblock shell precommit run may need instal precommit httpsprecommitcom_ python environ first use follow automat run precommit hook commit codeblock shell precommit instal installhook recommend use editor check code style fli visual studio code httpscodevisualstudiocomdocspythonlinting__ mypi type annot start introduc type annot check ci mypi httpmypylangorg_ ad type annot improv develop experi especi improv auto complet type inform hover ide type check current quit lax optin see file codemypycheck list python file current opt ad new code pleas consid ad new modul list check run precommit chang file opt run mypi local file opt codeblock shell precommit run allfil mypi pleas note mani case type class specifi string instead class allow import class type type check perform see section forward refer pep httpswwwpythonorgdevpepspepforwardreferences_ inform gener inform type annot python includ best practic pleas also see static type python httpstypingreadthedocsioenlatest_ docstr numpi docstr guid httpsnumpydocreadthedocsioenlatestformathtmldocstringstandard_ guidelin format docstr test docstr code exampl continu integr use doctest httpsdocspythonorglibrarydoctesthtml_ test file hand run codepytest doctestmodul pathspec build document document build also done tox see basic requir manual instal pandoc httpspandocorginstallinghtml_ build system sinc pandoc cant instal reliabl use pip start live build process codeblock shell tox e doc view document httplocalhost rebuilt everi time chang document sourc code detect note chang python sourc code dont trigger rebuild work docstr may manual trigger rebuild exampl save one coderst file includ code sampl doctest sphinx extens httpswwwsphinxdocorgenmasterusageextensionsdoctesthtml_ test codeblock shell tox e docscheck _build client build gui client libertem gui also call client written typescript use combin reactreduxreduxsaga client commun python api server use http websocket browser cant directli execut typescript build step involv translat typescript code javascript understood browser build step need develop build product version would like contribut client first need set develop environ first instal nodej linux recommend instal via packag manag httpsnodejsorgendownloadpackagemanager_ window instal httpsnodejsorgendownload_ fine choos current lt version one nodej instal codenpm command avail path instal need build tool depend chang client directori run instal command codeblock shell cd client npm instal note alway good idea start develop instal current depend command old version depend instal may caus build fail caus unpredict failur command finish without error start develop server also client directori codeblock shell npm run start server watch sourc file chang automat start build process develop server listen port abl serv request javascript static file handl http api request still need run python codelibertemserv process default port alongsid develop server codeblock shell libertemserv nobrows allow proxi http api request frontend server api server without open addit browser window could interfer develop server learn build process pleas see readm client directori httpsgithubcomlibertemlibertemblobmasterclientreadmemd_ use editor like chang client sourc file codeclientsrc directori recommend visual studio code httpscodevisualstudiocom_ excel typescript support simplifi develop instal git checkout current alway ship product build client git repositori pleas alway open pull request client wip includ rebuilt product build pr approv readi merg creat use tox shortcut codeblock shell tox e build_client build optim product version client copi codesrclibertemwebcli version use start libertemserv without client develop proxi front advanc see toctre maxdepth releas dist_test _authorship authorship polici sinc perform scientist evalu base number qualiti public authorship import topic softwar focu scientif applic libertem goal give appropri credit contribut work contributor becom visibl form scientif output consid evalu product scientist hope support encourag open sourc softwar develop form scientif work follow establish practic scientif paper distinguish creator person contribut way establish coauthorship libertem contributor person contribut way exampl discuss help creator person fulfil least one criteria contribut least one commit repositori contribut materi code document way dont appear directli commit includ prototyp code serv basi code libertem contribut manag direct exampl activ manag support contributor dedic signific part work time libertem maintain two file packagingcreatorsjson packagingcontributorsjson work keep track creator contributor transpar includ short statement natur contribut feel like someon els list repres differ pleas file pull request contact us accident discrep happen mani eye help hand help us keep inform date pleas note github breakdown contribut alway reflect realiti exampl commit link github account git client configur correctli peopl list creatorsjson includ author public softwar exampl upload zenodo httpsdoiorgzenodo_ public libertem public libertem scientif paper person least one contribut within past month qualifi creator libertem contact draft process public exampl github handl via email offer coauthorship activ consent coauthor time manner includ coauthor rule particular public medium scientif paper typic includ oblig approv draft submiss account aspect work coauthor respons may exclud dont respond remind exampl approv draft time fashion public cover specif aspect libertem exampl particular featur contribut particular aspect consid select creator offer coauthorship coauthor creator libertem includ public libertem follow establish practic authorship exampl contributor content public present materi scientif applic order author list creator contributor list alphabet refacknowledg short statement contribut alphabet order author list uncommon scientif paper instead posit author list use indic rel amount contribut author author contribut content list first author contribut guidanc list last casual reader particular encount abbrevi author list refer within cite paper assign credit first author alphabet author list would therefor unfair toward main contributor name middl alphabet order resolv issu assign prestigi author posit peopl deserv transpar fashion author agre among authorship posit public individu sinc zenodo assign doi allow export citat refer manag commonli use scientif publish zenodo upload treat scientif public author includ order packagingcreatorsjson allow assign prestigi first author posit main contributor libertem cite scientif paper authorship question resolv discuss issu chang propos form pull request goal amic cooper proper credit contribut question would like suggest chang polici pleas contact us see pr initi discuss lead establish polici _applic applic note start applicationspecif code libertem spun step step subpackag instal independ libertem core see refpackag current overview subpackag toctre maxdepth appphasecontrast appamorph appstrain appphasechang appholographi ptychographi extern httpsptychographygithubioptychography_ note featur describ experiment develop testsetup import numpi np libertemapi import context libertemexecutorinlin import inlinejobexecutor ctx contextexecutorinlinejobexecutor dataset ctxloadmemori datashap sig_dim _dask dask integr versionad sinc version libertem support seamless integr workflow base dask array mean dask array serv input libertem udf comput produc dask array addit methlibertemcontribdaskadaptermake_dask_array creat dask array libertem dataset use combin featur hyperspi libertem singl analysi workflow toctre hyperspyintegr schedul libertem use daskdistribut default method execut task unless instruct otherwis libertem keep default dask schedul asi use dask codecli intern make sure exist workflow keep run howev closer integr benefici use schedul libertem dask comput sever option set libertem dask cluster default dask schedul use codecontextmake_withdaskmakedefault pass codeclient_kwargsset_as_default true methlibertemexecutordaskdaskjobexecutorconnect methlibertemexecutordaskdaskjobexecutormake_loc use exist dask schedul use codecontextmake_withdaskintegr start executor compat current dask schedul use daskdelay classlibertemexecutordelayeddelayedjobexecutor return udf comput dask array schedul determin codecomput call downstream use normal mechan dask _daskarray load dataset dask array methlibertemcontribdaskadaptermake_dask_array function gener distribut dask array httpsdocsdaskorgenlatestarrayhtml_ classlibertemiodatasetbasedataset use partit block typic libertem partit size close optimum size dask array block circumst dask array accompani map optim worker map pass methcomput method order construct block worker local storag testcod make_dask_array libertemcontribdaskadapt import make_dask_array construct dask array dataset second return valu contain inform worker hold part dataset local storag ensur optim data local dask_array worker make_dask_arraydataset result dask_arraysumaxi computeworkerswork load dask array dataset libertem dataset creat dask array use methlibertemapicontextload filetyp codedask see refdaskd detail perform vari depend chunk executor io method dask array creation method pleas contact us httpsgitterimlibertemlobby_ creat issu httpsgithubcomlibertemlibertemissuesnew question bug report feedback basic exampl show run udf dask array testcod from_dask import daskarray da libertemudfsum import sumudf creat context integr well current dask schedul ctx contextmake_withdaskintegr darandomrandom ds ctxloaddask sig_dim re ctxrun_udfdatasetd udfsumudf assert npallclos asumaxi comput resintensityraw_data see also refexecutor set compat schedul dask libertem creat dask array udf use classlibertemexecutordelayeddelayedjobexecutor classlibertemapicontext let classlibertemapicontextrun_udf return result dask array addit usual attrlibertemcommonbuffersbufferwrapperdata attrlibertemcommonbuffersbufferwrapperraw_data properti provid result numpi array eagerli result made avail dask array use attribut attrlibertemexecutorutilsdask_bufferdaskresultbufferwrapperdelayed_data attrlibertemexecutorutilsdask_bufferdaskresultbufferwrapperdelayed_raw_data comput perform codecomput method call dask array result testcod to_dask libertemapi import context libertemexecutordelay import delayedjobexecutor libertemudfsumsigudf import sumsigudf ctx contextexecutordelayedjobexecutor re ctxrun_udfdatasetdataset udfsumsigudf printresintensitydelayed_data testoutput to_dask daskarrayreshap shape dtypefloat chunksiz chunktypenumpyndarray method allow creat larg intermedi result codekindnav effici form dask array partial result stay ephemer array chunk worker need downstream calcul instead transport cluster instanti full result main node call classlibertemapicontextrun_udf run multipl udf udf return multipl result strongli recommend comput result singl call codecomput order reus comput dataset default dask cach intermedi result prior run individu call codecomput requir complet rerun udf pass coderun_udf merg function dask array result libertem alreadi use effici default merg method creat dask array udf use codekindnav buffer dont specifi codemerg udf defin codemerg classlibertemexecutordelayeddelayedjobexecutor use exist codeudfmerg function assembl final result way use assembl partial result partit carri wrap codeudfmerg codedaskdelay call howev user also specifi methlibertemudfbaseudfmergeallmixinmerge_al method udf combin partial result worker complet result singl step allow classlibertemexecutordelayeddelayedjobexecutor produc streamlin task tree give dask greater scope parallelis merg step reduc data transfer exampl show task tree first builtin wrapper codeudfmerg stramlin one defin codemerge_al test streamlin variant twice fast builtin wrapper testsetup merge_al import numpi np libertemudfbas import udf libertemexecutordelay import delayedjobexecutor testcod merge_al class mysumudfudf def get_result_buffersself return intens selfbufferkindsig dtypeselfmetainput_dtyp def process_tileself tile selfresultsintens npsumtil axi def mergeself dest src destintens srcintens ctx contextexecutordelayedjobexecutor result ctxrun_udfudfmysumudf datasetdataset resultintensitydelayed_datavisu imag imagestreedefaultmergepng width px alt task tree wrapper standard merg testcod merge_al class mysummergeudfmysumudf defin merge_al method udf def merge_allself ordered_result list gener numpi dispatch work chunk bintens b ordered_resultsvalu numpi dispatch stack appropri method chunk see also httpsnumpyorgdocstableuserbasicsdispatchhtml stack npstackchunk perform comput stack chunk equival normal merg intens stacksumaxi return dictionari map buffer name new content return intens intens result ctxrun_udfudfmysummergeudf datasetdataset resultintensitydelayed_datavisu imag imagestreemergeallpng width px alt task tree codemerge_al testcleanup merge_al assert npallclos resultintensityraw_data resultintensityraw_data argument codeordered_result order dictionari partial result udf index slice correspond dataset partit flatten navig dimens roi appli order partial result slice increas dataset navig dimens merg method safe concaten result case codenavshap result cuda schedul nativ libertem dask cluster use resourc tag schedul work cpu cuda devic base udf capabl dask integr fallback implement allow run comput run cpu nativ libertem dask cluster without requir resourc tag howev cudaonli comput requir pass appropri tag coderesourc argument codecomput methlibertemexecutordelayeddelayedjobexecutorget_resources_from_udf return appropri resourc given set udf base capabl tip trick collect variou help tip dont fit elsewher _ssh forward use ssh forward builtin authent yet libertem listen network port untrust parti access use ssh port forward localhost instead access libertem differ comput exampl conda codeblock shell ssh l localhost remotehostnam conda activ libertem libertemserv virtualenv codeblock shell ssh l localhost remotehostnam pathtovirtualenvbinlibertemserv make libertem run remotehostnam avail local host via httplocalhost altern launch access libertem remot system refjupyt integr activ ipywidget jupyt exampl use codeipywidget notebook notabl fast classlibertemvizbqpbqlivedplot case correspond jupyt notebook extens activ manual httpsipywidgetsreadthedocsioenstableuser_installhtmlinstallinginclassicjupyternotebook_ codeblock shell jupyt nbextens enabl py widgetsnbextens classlibertemvizbqpbqlivedplot function correctli jupyterhub possibl jupyterlab packag codebqplot codebqplotimagegl instal notebook environ environ notebook server might requir admin privileg run toplevel script sinc libertem use multiprocess script entri point may protect httpsdocspythonorglibrarymultiprocessinghtmlthespawnandforkserverstartmethods_ notabl window testcod __name__ __main__ goe start libertem context etc necessari libertem use jupyt notebook ipython gatan digit micrograph embed interpret libertem run within embed interpret follow step taken necessari python script gatan digit micrograph gm exampl variabl codesysargv may set embed interpret httpsbugspythonorgissue_ expect codemultiprocess modul spawn new process workaround guarante codesysargv set fix upstream httpsgithubcompythoncpythonpull_ testsetup import sy testcod hasattrsi argv sysargv furthermor correct execut spawn subprocess httpsdocspythonorglibrarymultiprocessinghtmlmultiprocessingset_executable_ set testsetup import multiprocess import sy import os testcod multiprocessingset_execut ospathjoinsysexec_prefix pythonwex window gm script may run addit thread sinc load scipi gm background thread doesnt work see httpswwwgatancompythonfaq inform testcod import thread def main goe actual script __name__ __main__ start workload main thread wait finish th threadingthreadtargetmain thstart thjoin see exampl folder httpsgithubcomlibertemlibertemtreemasterexamples_ number script work gm _show warn show deprec warn mani warn messag via codewarn builtin modul suppress default includ interact shell ipython jupyt youd like inform earli upcom backwardsincompat chang activ deprec warn recommend sinc libertem activ develop testcod import warn warningsfilterwarningsdefault categorydeprecationwarn warningsfilterwarningsdefault categorypendingdeprecationwarn _profil test profil longrun test sinc code base test coverag grow continu make sure test suit remain effici finish within reason time frame find five slowest test output tox see refrun test detail use codepytest directli use codedur paramet codeblock text libertem pytest durat test slowest test durat call testsudftest_blobfinderpytest_run_refine_affinematch call testsudftest_blobfinderpytest_run_refine_spars call teststest_analysis_maskspytest_numerics_fail call testsservertest_jobpytest_run_job_delete_d call testsservertest_cancelpytest_cancel_udf_job call teststest_local_clusterpytest_start_loc call testsservertest_jobpytest_run_job__sum call testsservertest_jobpytest_run_with_all_zeros_roi call teststest_analysis_maskspytest_numerics_succe call teststest_analysis_maskspytest_avoid_calculating_masks_on_cli pass skip deselect xfail warn second pleas note function test involv start local cluster long lead time hard avoid order gain inform slow particular test instal pytestprofil extens httpsgithubcommangrouppytestpluginstreemasterpytestprofiling_ use profil individu slow test identifi codeblock text libertem pytest profil testsudftest_blobfinderpytest_run_refine_affinematch function call primit call second order cumul time list reduc due restrict ncall tottim percal cumtim percal filenamelinenofunct runnerpypytest_runtest_protocol hookspy__call__ managerpy_hookexec managerpylambda callerspy_multical runnerpyruntestprotocol runnerpycall_and_report runnerpycall_runtest_hook runnerpyfrom_cal runnerpylambda runnerpypytest_runtest_cal pythonpyruntest pythonpypytest_pyfunc_cal test_blobfinderpytest_run_refine_affinematch generatepycbed_fram maskspycircular maskspy_make_circular_mask maskspyradial_bin maskspypolar_map blobfinderpyrun_refin pass warn second _o mismatch platformdepend code remot executor platformdepend code lambda function nest function lead incompat run executor remot worker classlibertemexecutordaskdaskjobexecutor instead function defin part modul exampl standalon function method class way correct remot implement platformdepend code use remot worker sinc refer function implement sent benchmark numba compil time one captur first execut jit function compar subsequ execut measur compil time default pytestbenchmark perform calibr run possibl warmup round dont report first run way complet disabl use pedant mode httpspytestbenchmarkreadthedocsioenlatestpedantichtml_ specifi warmup round two round one iter codeblock python numbanjit def hello return world pytestmarkcompil pytestmarkbenchmark groupcompil def test_numba_compilationbenchmark benchmarkextra_infomark compil benchmarkpedantichello warmup_round round iter way maximum first run compil minimum second one without compil test mark compil test extra info well aid later data evalu note compil test poor statist sinc run idea collect better statist pleas let us know httpsgithubcomlibertemlibertemissuesnew_ simul slow system control group linux possibl simul slow system use control group codeblock shell sudo cgcreat g cpuslow sudo cgset r cpucfs_period_u slow sudo cgset r cpucfs_quota_u slow sudo chown rootyourgroup sysfscgroupcpucpuacctslow sudo chmod sysfscgroupcpucpuacctslow user use codecgexec run command control group codeblock shell cgexec g cpuslow pytest test use exampl debug test failur seem happen ci heavi load note tool like codecgcr work cgroup v newer distribut use cgroup v may adapt instruct _jupyt instal jupyt use python api within jupyt notebook instal jupyt libertem virtual environ codeblock shell libertem python pip instal jupyt run local notebook within libertem environ open browser window jupyt use libertem environ codeblock shell libertem jupyt notebook _jupyterhub instal jupyterhub youd like use python api libertem virtual environ system manag login jupyterhub easili instal custom kernel definit httpsipythonreadthedocsioenstableinstallkernel_installhtml_ libertem environ first launch termin jupyterhub new dropdown menu file browser altern execut shell command prefix python notebook termin creat activ virtual environ perform libertem instal describ within activ libertem environ addit instal ipykernel codeblock shell libertem python pip instal ipykernel creat custom ipython kernel definit environ codeblock shell libertem python ipykernel instal user name libertem displaynam python libertem reload file browser window new notebook option python libertem avail new dropdown menu test creat new notebook run codeblock python import libertem see also refjupyt integr launch web gui jupyterhub jupyterlab cite help us spread word pleas credit cite libertem public signific resourc cite libertem link doi badg zenodo_ zenodo imag httpszenodoorgbadgedoizenodosvg _zenodo httpsdoiorgzenodo pleas refer refauthorship detail regard authorship credit contributor _acknowledg acknowledg grate continu support libertem pleas help us keep list uptod complet feel list pleas contact us grate everi contribut contribut list wed like extend apolog updat soon possibl creator follow peopl alphabet order contribut sourc code document design manag follow refauthorship includ autogeneratedcreatorsrst contribut follow peopl alphabet order contribut libertem project way includ autogeneratedcontributorsrst notabl upstream project python httpswwwpythonorg_ pydata univers httpspydataorg_ daskdistribut httpsdistributeddaskorg_ pytorch httpspytorchorg_ numpi httpsnumpyorg_ openbla httpswwwopenblasnet_ click httpsclickpalletsprojectscom_ tornado web httpswwwtornadoweborg_ matplotlib httpsmatplotliborg_ pillow httpspillowreadthedocsio_ hpi httpswwwhpyorg_ numba httpsnumbapydataorg_ psutil httpspsutilreadthedocsio_ ncempy_ typescript httpswwwtypescriptlangorg_ react httpsreactjsorg_ react window httpsreactwindowvercelapp_ redux httpsreduxjsorg_ reduxsaga httpsreduxsagajsorg_ semant ui httpssemanticuicom_ depend notabl relat project use tool hyperspi httpshyperspyorg_ nexu httpswwwnexusformatorg_ apach spark httpssparkapacheorg_ hadoop file system httphadoopapacheorgdocsstablehadoopprojectdisthadoophdfshdfsdesignhtml_ godbolt compil explor httpsgodboltorg_ fio httpsgithubcomaxboefio_ pyxem httpspyxemgithubiopyxemwebsite_ nion swift httpsnionswiftreadthedocsio_ alpaka httpalpakagroupgithubioalpaka_ code licens part seq reader base pim project follow licens codeblock text copyright c pim contributor httpsgithubcomsoftmatterpim right reserv redistribut use sourc binari form without modif permit provid follow condit met redistribut sourc code must retain copyright notic list condit follow disclaim redistribut binari form must reproduc copyright notic list condit follow disclaim document andor materi provid distribut neither name softmatt organ name contributor may use endors promot product deriv softwar without specif prior written permiss softwar provid copyright holder contributor express impli warranti includ limit impli warranti merchant fit particular purpos disclaim event shall copyright holder liabl direct indirect incident special exemplari consequenti damag includ limit procur substitut good servic loss use data profit busi interrupt howev caus theori liabil whether contract strict liabil tort includ neglig otherwis aris way use softwar even advis possibl damag confirm messag exit use ctrlc implement referenc jupyt notebook project follow licens codeblock text copyright c ipython develop team copyright c jupyt develop team right reserv redistribut use sourc binari form without modif permit provid follow condit met redistribut sourc code must retain copyright notic list condit follow disclaim redistribut binari form must reproduc copyright notic list condit follow disclaim document andor materi provid distribut neither name jupyt develop team name contributor may use endors promot product deriv softwar without specif prior written permiss softwar provid copyright holder contributor express impli warranti includ limit impli warranti merchant fit particular purpos disclaim event shall copyright owner contributor liabl direct indirect incident special exemplari consequenti damag includ limit procur substitut good servic loss use data profit busi interrupt howev caus theori liabil whether contract strict liabil tort includ neglig otherwis aris way use softwar even advis possibl damag fund raw html style libertemackitem display flex libertemackitem img display block libertemackitem flexshrink display block paddingright px style itemstart raw html div classlibertemackitem itemend raw html div libertem kindli acknowledg fund support follow sourc erc proofofconcept grant video itemstart imag imageseujpg width px alt european union flag target httpscordiseuropaeuprojectid project receiv fund european research council erc european union horizon research innov programm grant agreement httpscordiseuropaeuprojectid_ itemend critcat itemstart imag imageseujpg width px alt european union flag project receiv fund european union horizon research innov programm grant agreement httpwwwcritcateu_ itemend esteem itemstart imag imageseujpg width px alt european union flag project receiv fund european union horizon research innov programm grant agreement esteem httpscordiseuropaeuprojectrcnfactsheeten_ itemend erc synergi grant magic itemstart imag imageseujpg width px alt european union flag project receiv fund european research council erc european union horizon research innov programm grant agreement itemend morestem itemstart imag imageshelmholtzpng width px alt helmholtz gemeinschaft deutscher forschungszentren grate acknowledg fund initi network fund helmholtz associ httpswwwhelmholtzdeenaboutustheassociationinitiatingandnetworking_ within helmholtz young investig group morestem httpsmorestemfzjuelichde_ contract vhng forschungszentrum jülich germani itemend ptychographi itemstart imag imageshelmholtzlowerpng width px alt helmholtz gemeinschaft deutscher forschungszentren grate acknowledg fund inform data scienc pilot project httpswwwhelmholtzdeenresearchinformationdatascienceinformationdatasciencepilotprojectspilotprojects_ ptychographi helmholtz associ itemend googl summer code itemstart imag imagesgsociconpng width px alt googl summer code logo kindli acknowledg fund googl summer code httpssummerofcodewithgooglecom_ umbrella python softwar foundat httpspythongsocorg_ itemend gatan inc itemstart imag imagesgatanlogoverticalpng width px alt gatan inc stemx equip softwar stem data acquisit k camera courtesi gatan inc httpswwwgatancom_ itemend aida itemstart imag imagesaidaslogopng width px alt aida libertem develop support aida httpswwwfzjuelichdeshareddocsmeldungenportalenaidas_enhtml_ itemend forschungszentrum jülich ernstruska centrum itemstart imag imagesfzjjpg width px alt forschungszentrum jülich gmbh target httpswwwfzjuelichdeercenhomehome_nodehtml forschungszentrum jülich support libertem fund personnel access infrastructur administr support itemend releas document describ releas procedur infrastructur relev advanc contributor see refcontribut inform regular contribut tag version instal depend codescriptsrequirementstxt use codescriptsreleas call script codebump command new version paramet codeblock shell scriptsreleas bump vrc tag bump dev suffix omit codetag pass codecommit codeblock shell scriptsreleas bump vdev commit note normal develop version master branch xyzdev next expect version xyz start releas process bump xyzrc note dot rc possibl addit releas candid afterward rc rcn releas candid done mostli assur releas script work expect addit qa see qa process issu templat releas checklist plan releas creat new issu follow checklist codeblock text releas checklist issu pull request consid releas xxx yyy zzz use releas candid packag review open issu pull request run full ci pipelin includ slow test azur devopshttpsdevazurecomlibertemlibertem_builddefinitionid handl deprec search code base deprecationwarn suppos remov releas gui depend updat npm instal review httpsgithubcomlibertemlibertemsecuritydependabot updat depend full document review updat includ link check use sphinxbuild b linkcheck docssourc docsbuildhtml run complet test suit includ slow test deactiv default test requir sampl file updat expect version note chang ie dev releas version updat review chang log docssourcechangelogrst merg snippet docssourcechangelog appropri updat json file packag folder author project inform edit pytestini exclud flaki test temporarili releas build creat releas candid use scriptsreleas see scriptsreleas help detail confirm wheel targz appimag built releas candid github httpsgithubcomlibertemlibertemreleases_ confirm new version recent releas candid creat zenodoorg sandbox httpssandboxzenodoorgrecord_ readi submiss instal releas candid packag clean environ exampl python pip instal httpstestpypiorgsimpl extraindexurl httpspypiorgsimpl libertemrc test releas candid docker imag guirel item open incognito window start clean slate correct version info display info dialogu link check version info dialogu make sure test file support type avail includ float int big endian littl endian complex raw data open test file paramet recogn correctli far implement bad default valu file open correctli look dataset info dialogu reason valu perform analys test file result chang input paramet chang display channel present look reason reason perform use pick mode reopen file file list recent file paramet fill cach correctli tri open file type wrong paramet proper understand error messag pick one file confirm keyboard mous interact analys correct bound check keyboard mous check happen tri open nonexist file directori gui proper understand error messag possibl continu work shut libertemserv analysi run shut within second worker reap check happen tri open nonexist file script proper understand error messag todo autom check happen open file type bad paramet script proper understand error messag todo autom run libertemserv window connect remot dask cluster run linux open file type perform analysi file type use gui longrun analysi run still usabl decent respons time confirm pull request issu handl intend ie mileston merg appropri branch final version bump scriptsreleas bump v tag push github pipelin finish write minim releas note releasehttpsgithubcomlibertemlibertemreleas publish github releas releas github confirm releas packag built releas note uptod instal releas packag confirm correct version info confirm packag upload pypi confirm imag tag httpshubdockercomrlibertemlibertem publish new version zenodoorg updat document new link necessari add zenodo badg new releas changelog page send announc messag mail list edit pytestini includ flaki test bump version master branch next dev scriptsreleas bump vxdev commit add institut public databas add current libertem version cvlhttpsgithubcomchasdfracterisationvirtuallaboratorycharacterisationvlsoftwar add singular desktop file _usag document gui usag start libertem server libertem gui base clientserv architectur use libertem gui need server run machin data avail use libertem python script necessari see refapi document docinstal libertem instal activ virtualenv conda environ start libertem server run codeblock shell libertem libertemserv default start server httplocalhost verifi log output info libertemwebservermain listen localhost tri open default web browser url command line option avail includ autogeneratedlibertemserverhelp liter versionad codebrows codenobrows option ad open browser default versionad codel loglevel ad versionad codet tokenpath ad codeh host reenabl versionad dev codepreload codeinsecur ad access libertem remot use refus ssh forward ssh forward refjupyt integr alreadi jupyterhub jupyterlab set server connect note gui test work firefox chromiumbas browser use compat browser reason pleas file issu httpsgithubcomlibertemlibertemissues_ start server open gui browser didnt open automat access default httplocalhost begin gui show prompt creat local cluster connect run one number worker preset number like give optim perform given machin also select cuda devic use need work cupi instal figur imagesusecreatepng open data connect cluster libertem show button start brows avail file local cluster that simpli local filesystem note see refsampl data publicli avail dataset figur imagesusebrowsepng open file browser dialogu top show current directori list file subdirectori directori select entri click move one directori entri top list file browser still basic possibl improv discuss issu httpsgithubcomlibertemlibertemissues_ contribut highli appreci exampl open hdf file citezeltmann figur imagesuseopenpng also bookmark locat frequent need access use star icon bookmark found go figur imagesusestarpng select file set type dropdown menu top dialogu file name set appropri paramet depend file type click load dataset open file select paramet interfac intern logic find good preset base file type avail metadata valid input display help error messag still work progress contribut highli appreci see refload use gui detail instruct formatspecif inform figur imagesusetypepng run analys dataset load add analys exampl choos ring analysi implement ringshap virtual detector figur imagesuseadd_analysispng figur imagesuseadjustpng analysi show two view data two detector dimens left scan dimens right assum dstem dataset gener case also call detector dimens signal dimens scan dimens navig dimens see also refconcept inform axe coordin system directli ad analysi libertem start calcul averag detector frame averag overlaid mask repres virtual detector view right later show result appli mask data begin empti first process might take depend file size io perform fast ssd enough ram keep work file file system cach highli recommend good user experi adjust virtual detector drag handl gui show paramet numer form use extract posit exampl script click appli libertem perform calcul show result scan coordin right side figur imagesuseapplypng instead averag select standard deviat calcul standard deviat detector frame figur imagesusestd_devpng interest individu frame rather averag switch pick mode mode dropdown menu directli detector window figur imagesusepickpng pick mode selector appear result frame right drag around mous see frame live left window pick coordin display along virtual detector paramet frame window left figur imagesusepick_framepng interest limit region roi dropdown provid option select rectangular region exampl select rect averagestandard deviat calcul imag lie insid select rectangl adjust rectangl drag handl gui figur imagesuserectpng analys center mass com analysi render result differ way select differ result channel channel dropdown menu right window figur imagesuseimagepng _download result download result analysi finish run download result click download button analysi open dialog figur imagesusedownloadbtnpng download dialog choos differ file format separ download avail result figur imagesusedownloadmodalpng also download jupyt notebook correspond analysi continu work paramet use script figur imagesusedownloadjupyterpng also possibl copi individu cell jupyt notebook directli gui option copi complet sourc code figur imagesusecopyjupyterpng keyboard control use arrow key chang coordin paramet analysi click handl want modifi use arrow key move handl hold shift move larger step applicationspecif document applic like strain map crystallin analysi pleas see docappl applic section _perform perform libertem design optim high throughput order process largescal dataset fast turnaround figur imagesperformanceioboundmadmaxpng near linear throughput scale number node iobound virtual detector calcul gib file use direct io supermicro microcloud mdhtrf intelr xeonr cpu ghz intel ethernet control g xt raid x samsung ssd evo tb gb ram cluster head node intelrxeonr w cpu ghz figur imagesperformancecpuboundsinglenodepng benchmark result perform cpubound virtual detector calcul use memorymap io file file system cach _architectur architectur imag imagesarchitecturesvg libertem current focus pixel stem scan electron beam diffract data process interact offlin process backend support ndimension binari data concret support oper start everyth express applic one mask summat ie virtual detector center mass etc oper embarrassingli parallel scale distribut system well furthermor support refuserdefin function process welldefin subset dataset follow simplifi mapreduc program model httpsenwikipediaorgwikimapreduce_ task data local one import factor achiev good perform scalabl tradit distribut storag solut like lustr nf network quickli becom bottleneck libertem distribut data local storag comput node one possibl implement use hadoop filesystem hdfs_ although work transpar cach layer httpsgithubcomlibertemlibertemissues_ altern gener idea split dataset usual disjoint partit assign worker node execut structur task job job repres comput whole dataset divid task partit schedul execut task avail worker node fast execut node task read data small tile mb distribut workload use daskdistribut httpsdistributedreadthedocsio_ futur api allow us control comput flexibl way littl overhead dask futur assur comput partit dataset schedul node hold partit local storag _hadoop filesystem hdf httpshadoopapacheorgdocsr ingest data cluster cach layer httpsgithubcomlibertemlibertemissues_ wip transpar read dataset primari sourc via share network file system http store fast local storag format best suit effici process cach data also preprocess exampl offset correct appli gain map import part architectur api server api server client get access resourc cluster run analys use protocol base http andor websocket process initi http call result stream back browser via web socket api server keep state memori like inform current open dataset tradit would done extern inmemori databas eas deploy decid integr api server process done asynchron fashion start analysi use http api request immedi return get notif statu chang result websocket channel explicitli queri api server specif analysi api call python api synchron keep easi use pleas contact us httpsgitterimlibertemlobby_ add comment issu httpsgithubcomlibertemlibertemissues_ interest asynchron python api libertem ui use webbas interfac allow libertem work cloud environ well local singl node benefit exist foss framework infrastructur commun authent etc web libertem also suit run laptop workstat case part run singl node also skip cach step data alreadi avail local take care avoid needless copi buffer achiev nativ throughput node nvme ssd mean refprocess multipl gigabyt per second per node perform mathemat express appli mask basic oper pixel stem data multipli frame elementwis mask size sum result frame way one implement virtual detector center mass darkfield imag name exampl sinc frame process individu there match mask element detector pixel process simplifi flatten dataset matrix ie list vector vector one flatten detector frame correspondingli mask flatten vector well result elementwis multipl summat vector mask entri correspond result one frame display result data reshap scan dimens extra dimens flatten let c number pixel per frame n number frame number mask let n x c matrix scan data b c x matrix mask appli mask b detector data express rectangular matrix product httpsenwikipediaorgwikimatrix_multiplicationdefinition_ b mean use bla function gemm httpsenwikipediaorgwikibasic_linear_algebra_subprogramslevel__ process flatten data choos wide array highli optim implement oper libertem support dens spars mask sparsepydataorg httpssparsepydataorg_ scipyspars httpsdocsscipyorgdocscipyreferencesparsehtml_ purpos function avail methlibertemudfmasksapplymasksudf methlibertemapicontextcreate_mask_analysi number special analysi function classlibertemapicontext _sampl data sampl dataset bullsey circular probe diffract scan converg beam electron diffract data gold nanoparticl codedstem_experimentdatadatacubespolyau_dstemdata simul strain gold codedstem_experimentdatadatacubessimulation_dstemdata one file use standard circular apertur anoth use bullsey apertur link httpszenodoorgrecord citeophus_colin__zeltmann format hdf uint dimens size gb electron bessel beam diffract scan converg beam electron diffract ringshap apertur overlap diffract order link httpszenodoorgrecord citegiulio_guzzinati__guzzinati format stack dm current script dimens size gb _hire sto highresolut stem dataset srtio dataset use test variou analysi method highresolut stem includ phase contrast method ptychographi link httpszenodoorgrecord citestrauch_achim__ format mib bit dimens size mb _synthet sto synthet stem dataset base srtio supercel dataset allow investig phase contrast method scan transmiss electron microscopi ptychographi link httpszenodoorgrecord citestrauch_achim__ format raw float dimens size gb creat random data random data gener follow way kept mind data gener way use simpl test physic signific raw file testsetup sampledataraw import os import tempfil raw_temp tempfiletemporarydirectori oschdirraw_tempnam testcod sampledataraw creat sampl raw file import numpi np sample_data nprandomrandn astypefloat sample_datatofileraw_sampleraw testcod sampledataraw load python api libertemapi import context __name__ __main__ ctx context ds ctxloadraw pathraw_sampleraw nav_shap dtypefloat sig_shap testcleanup sampledataraw oschdir raw_tempcleanup hdf file testsetup sampledatahdf import os import tempfil hdf_temp tempfiletemporarydirectori oschdirhdf_tempnam testcod sampledatahdf creat sampl hdf file import hpi import numpi np file hpyfilehdf_samplehw sample_data nprandomrandnastypefloat dataset filecreate_datasetdataset datasample_data fileclos testcod sampledatahdf load python api libertemapi import context __name__ __main__ ctx context ds ctxloadhdf pathhdf_sampleh ds_pathdataset testcleanup sampledatahdf oschdir hdf_tempcleanup altern enter paramet scan_siz dtype detector_s directli load dialog gui detail load pleas check refload data gsoc idea libertem particip googl summer code httpssummerofcodewithgooglecom_ suborgan python softwar foundat httpspythongsocorg_ student get paid googl three month fun work interest open sourc softwar project gain realworld develop experi someth look nice cv check descript project idea contact us youd like work libertem prepar propos httpspythongsocorgindexhtmlapply_ togeth us submit applic googl summer code homepag python softwar foundat organ name libertem suborgan libertem libertem _ open sourc platform highthroughput distribut process pixel scan transmiss electron microscopi stem data creat deal terabyt data modern highspe highresolut detector electron microscopi produc docarchitectur page describ detail exactli work figur imagesprinciplepng scale alt pixel stem full diffract imag record scan posit pixel stem sampl scan focus electron beam full imag transmit beam record scan posit result fourdimension data hypercub applic gener tremend amount data highresolut scan highspe highresolut detector project start begin current attract user order magnitud faster scalabl establish solut work libertem give experi develop distribut system highperform data process python learn profil applic optim perform target way see refperform benchmark result libertem root electron microscopi adopt task involv highthroughput dataparallel process larg binari data set figur imagesfuturepng alt envis futur architectur libertem libertem current implement distribut offlin data process shown right figur design extend highthroughput distribut live data process illustr left work gui youll learn respons web applic big data analyt built frontend base typescript react redux asynchron python backend base tornado daskdistribut work applic side give experi pythonbas big data analyt largescal binari data set focu imag physic materi scienc industrylead throughput effici us alex experienc softwar engin system administr python programm web develop expert profil perform optim focus implement side libertem httpsgithubcomskp dieter interdisciplinari background materi scienc comput scienc product develop product manag busi administr take care applic busi side libertem httpsgithubcomuellu httpswwwfacebookcomuellu httpswwwlinkedincominuellu wed happi share experi reach us easiest path gitter channel httpsgitterimlibertemlobbi email dieter weber mailtodweberfzjuelichde_ alexand clausen mailtoaclausenfzjuelichde_ drop messag base germani utc utc gener activ normal work hour get start question pleas ask freeli support user contributor high prioriti us question help us improv document instal pleas see refinstal instruct detail fork repositori clone fork refinstal git clone recommend setup contribut signific amount code refcontribut page inform help get start develop current still work get suitabl sampl file onlin pleas contact us get interest sampl data work work issu tracker give broad overview httpsgithubcomlibertemlibertemissues_ plate weve mark number good first issu httpsgithubcomlibertemlibertemissuesqisaissueisaopenlabelagoodfirstissue_ might rel easi solv help get introduc code base list specif idea write gsoc applic python gsoc websit good overview applic process httpspythongsocorgindexhtmlappli httpspythongsocorgstudentshtml link addit resourc pleas rememb name suborgan libertem propos get inspir write applic mailman link broken samphttpsturnbullsktsukubaacjpblogspamtxt give gener idea us import know youd like contribut libertem experi level youd like learn order find good match project gener like target applic applic contact us directli earlyon happi work write project idea python gsoc gener requir alreadi contribut pull request suborgan submit project idea pleas contact us youd like help improv exampl httpsgithubcomlibertemlibertemtreemasterexamples_ code descript present would rel easi quit use us could perform updat help hunt discrep suggest improv pleas contact us correspond data run exampl small rel straightforward issu includ issu project idea somewhat larger work item keep busi entir time pleas feel free suggest idea well work number smaller featur get good crosssect experi libertem work well beginn implement rotat gui backend center mass analysi issu current implement assum detector edg parallel sampl x coordin direct mostli alway case project implement addit paramet rotat backend gui includ discuss user center mask analysi determin verifi paramet interfac like skill commun python numpi typescript program simpl web gui develop domain knowledg simpl linear algebra basic optic primari contact dieter uellu beginn code snippet analysi gui issu current gui offer limit capabl notabl color scale scale bar export result implement project implement function gener code snippet gui readi copi past past snippet exampl jupyt notebook allow use analysi paramet gui script environ give user flexibl skill python domain knowledg learn libertem basic primari contact dieter uellu alex skp intermedi implement analysi workflow rdf map httpspublikationenbibliothekkitedu_ give experi product develop design applic side softwar engin appli data scienc major part work first figur implement togeth user domain expert implement decid far take detail requir document technic specif prototyp full productiongrad implement use us skill commun softwar develop methodolog python numpi program domain knowledg math statist imag process physic advantag primari contact dieter uellu intermedi allow reshap dataset custom shape issu data file alway store nativ shape differ represent may possibl depend applic dataset implement gui allow specifi differ shape layout dataset skill python numpi typescript program domain knowledg none primari contact alex skp remov sinc implement set number thread worker dynam udf issu beginnerintermediateadvanc compress survey issu analyz highthroughput compress techniqu dive lzzstd blosc etc compar exist file format beginn level test number establish compress algorithm typic data set term compress ratio compress speed decompress speed intermedi level implement compress libertem cach layer advanc explor idea regard compress project improv understand compress techniqu easier level lowlevel optim program advanc level skill program python profil c numba program advanc level domain knowledg good understand comput architectur advanc level contact dieter uellu alex skp intermedi explor autom benchmark detail issu help us catch perform regress experi run benchmark requir reproduc undisturb environ comparison good refer data reason see challeng autom test function correct could run benchmark ci observ varianc record present benchmark result time skill program profil visual domain knowledg continu integr autom tool primari contact alex skp intermedi editor mask issu current mask gui limit simpl shape backend allow arbitrari mask could implement onlin mask editor give user flexibl design mask part task would requir analysi expert scientif applic analysi exist code like httpsreactdesignergithubioreactdesign httpstwojsorgexampl httpfabricjscomcontrolscustom possibl use project would mostli implement typescript skill program typescript gui develop basic comput graphic knowledg domain knowledg contact dieter uellu alex skp intermedi deploy libertem kubernet issu help us set helm chart document deploy libertem cluster kubernet subject fairli new us wed appreci help particular alreadi experi kubernet skill system administr autom domain knowledg kubernet primari contact alex skp intermediateadvanc proper schema valid automat form gener analysi paramet issu featur make easier implement new type analysi gui crosssect python typescript though could also split reacti part requir numpi knowledg domain knowledg pythontypescript requir gener webdev experi could help skill systemat think abstract python typescript program web develop domain knowledg primari contact alex skp intermediateadvanc custom math kernel bit mask issu current binari mask first convert float point use dot product numpi use gemm thirdparti bla implement could acceler significantli numbabas custom gemm implement work bit mask directli furthermor custom numbabas gemm kernel potenti use libertem issu skill python numba domain knowledg optim effici matrix product implement contact dieter uellu alex skp advanc live visual larg binari data issu basic efficientzoomableuserfriendlyfullyfeatur replac visual requir crosssect differ technolog pythonnumpythread httpwebsocket canvaswebgl could spun project success larger project split smaller individu part interest discuss set scope suit interest skill python typescript program web develop asynchron parallel program numer process visual domain knowledg experi similar project framework like exampl gr httpsgrframeworkorg_ desir knowledg gi httpsenwikipediaorgwikigeographic_information_system_ could potenti use contact dieter uellu alex skp advanc enabl userdefin function base webassembl issu would allow user write userdefin function favorit compil languag step toward use libertem independ python skill python compil languag domain knowledg experi webassembl would use contact dieter uellu alex skp _load data load data effici handl file larger main memori libertem never load whole data set memori call methlibertemapicontextload function open data set give back handl run analysi methlibertemapicontextrun udf methlibertemapicontextrun_udf stream data mass storag see refsampl data publicli avail dataset test two main way open data set libertem use gui python api load api api use methlibertemapicontextload gener pattern codeblock python ctx context ctxloadtypenam pathpathtosomefil argval arg need specifi data set type path datasetspecif argument argument document file type possibl automat detect type paramet trigger use codeauto file type codeblock python ctxloadauto pathpathtosomefil full list support file format link refer document see refsupport format _load use gui load use gui use gui mostli paramet need specifi although avail python api tupl exampl codenav_shap enter separ valu field hit comma jump next field follow numpi convent specifi fastaccess dimens last valu code code would mean specifi code python api set codey codex note gui current limit visual script api handl gener case see also refth concept section concept common paramet common paramet across data set type name name data set display purpos use gui nav_shap gui gener support visual data contain rectangular scan dataset type specifi nav_shap tupl x dataset isnt gui reshap use python api free use ndimension nav_shap data set chosen analysi support sig_shap gui specifi shape detector codeheight codewidth use python api dimension sync_offset specifi sync_offset handl synchron acquisit problem posit sync_offset number frame skip start neg abssync_offset number blank frame insert start io_backend differ method io avail libertem influenc perform see refio backend detail _support format support format libertem support follow file format box see link detail refmib refraw binari refdm format refempad refki reffrm refblo refser refhdf refseq refmrc reftvip furthermor two altern mechan exist interfac libertem data load elsewher python via librari memori data set construct numpi array test purpos see refmemori detail dask data set construct dask array depend method use construct sourc array achiev good perform see refdaskd detail run distribut test test behavior distribut part libertem autom test case avail distribut natur test need run across multipl network node comput vm contain ship codedockercompos configur spin schedul two worker separ docker contain requir run distribut test need instal current version codedock codedockercompos see offici docker document httpsdocsdockercominstall_ get start start test environ chang codepackagingdock directori run follow code shell bash distbuildsh dockercompos dockercompos run test dockercompos note need run command user access docker daemon exampl codedock group contain run long codedockercompos command run stop use codectrlc run distribut test use directori code shell dockercompos run rm test run test docker contain environ test contain automat match environ worker chang libertem code need rebuild restart contain cancel first codedockercompos run use ctrlc start top rebuild faster initi build accomplish care use layer cach featur docker also mean may need updat codepackagingdockerrequirementstxt file run provid script codeupdate_reqssh depend libertem chang new version depend releas ci done automat libertem document master file creat sphinxquickstart wed may adapt file complet like least contain root toctre direct libertem open pixel stem platform includ readmerst see also httpsmuffinresearchcoukselectivelyincludingpartsreadmerstinyourdoc later mayb startaft inclusionmarkerdonotremov document toctre maxdepth caption user manual instal usag applic format sample_dataset api udf dask changelog cite acknowledg toctre maxdepth caption refer referenceindex tip packag concept perform why_python toctre maxdepth caption develop devsetuprst contribut debug architectur devhowiowork devexecutor gsoc authorship indic tabl refgenindex refmodindex refsearch citat bibliographi referenceslibertembib debug testsetup import numpi np libertem import api libertemexecutorinlin import inlinejobexecutor ctx apicontextexecutorinlinejobexecutor data nprandomrandom astypenpfloat dataset ctxloadmemori datadata sig_dim roi nprandomchoicetru fals datasetshapenav differ part libertem debug differ tool method debug web gui debug gui use standard debug tool web develop use context chrome devtool httpsdeveloperchromecomdocsdevtools_ firefox develop tool httpsdevelopermozillaorgenusdocstools_ access press f extend addit panel react httpsreactjsorgblognewreactdevtoolshtml_ redux httpsgithubcomreduxjsreduxdevtools_ tool use inspect frontendrel process network traffic render behavior take note codeapiev websocket connect asynchron notif result transfer note alway debug use develop build gui use codenpm start describ refth contribut section build client otherwis debug experi may pain exampl wors error output react minifi sourc minifi compon name debug api server api server return server error detail except log output codelibertemserv also tri enabl debug mode tornado httpswwwtornadoweborgenstableguiderunninghtmldebugmodeandautomaticreloading_ current command line flag need chang pymodlibertemwebserv accordingli analysi base except alon inconclus tri reproduc problem use python api follow instruct _debug udf debug udf python code tri write udf debug python part libertem instruct libertem use simpl singlethread execut use classlibertemexecutorinlineinlinejobexecutor testsetup libertemudflogsum import logsumudf udf logsumudf testcod libertemexecutorinlin import inlinejobexecutor libertem import api lt ctx ltcontextexecutorinlinejobexecutor ctxrun_udfdatasetdataset udfudf use usual debug facil includ pdb httpsdocspythonorglibrarypdbhtml_ pdb magic ipythonjupyt httpsipythonorgipythondocinteractivemagicshtmlmagicpdb_ classlibertemexecutorinlineinlinejobexecutor use singl cpu core default switch gpu process test cupyen udf call methlibertemcommonbackendset_use_cuda devic id use codelibertemcommonbackendset_use_cpu switch back cpu process testsetup libertemudfmask import applymasksudf udf applymasksudfmask_factorieslambdanponesdatasetshapesig testcod libertemexecutorinlin import inlinejobexecutor libertem import api lt libertemutilsdevic import detect libertemcommonbackend import set_use_cpu set_use_cuda ctx ltcontextexecutorinlinejobexecutor detect dcuda dhas_cupi set_use_cudadcuda ctxrun_udfdatasetdataset udfudf set_use_cpu problem reproduc use default executor follow debug instruct daskdistribut httpsdocsdaskorgenlatestdebugginghtml_ api server cant use synchron classlibertemexecutorinlineinlinejobexecutor also case debug problem occur context api server debug fail test case test case fail option find root caus codepdb command line switch pytest use automat drop pdb prompt fail test case either land fail codeassert statement place code except rais help test case fail ci may easier use log call pytest codelogleveldebug paramet fail test case output section contain captur log output sprinkl code logdebug call output relev variabl case may also leav log statement code even problem fix depend overhead _userdefin function userdefin function udf testsetup import numpi np libertem import api libertemexecutorinlin import inlinejobexecutor libertemudf import udf realudf overrid udf way use without implement method class udfrealudf def get_result_buffersself return def process_frameself frame pass class yourudfrealudf def get_result_buffersself return buf selfbufferkindnav def process_frameself frame selfresultsbuf ctx apicontextexecutorinlinejobexecutor data nprandomrandom astypenpfloat dataset ctxloadmemori datadata sig_dim roi nprandomchoicetru fals datasetshapenav udf yourudf common case analyz big em data set run reduct oper individu detector frame small subset data set combin result reduct form complet result cover wide rang use case simpl mathemat oper exampl statist complex imag process analysi like featur extract userdefin function udf interfac libertem allow defin run reduct function easili without worri parallel io detail buffer manag correspond simplifi mapreduc program model httpsenwikipediaorgwikimapreduce_ intermedi rekey shuffl step omit libertem ship refutil udf utilifi udf implement gener function refsum sum udf reflogsum logsum udf refstddev stddev udf refsumsig sumsig udf refmask linear oper mask udf refpick pick udf also libertem includ refreadytous applicationspecif udf applic help review refsom gener concept concept read follow section get start easiest way run function data use methlibertemapicontextmap method libertem api exampl calcul sum last signal axi testcod autoudf import functool import numpi np result ctxmap datasetdataset ffunctoolspartialnpsum axi access result numpi array nparrayresult altern resultdata function specifi via codef paramet call frame diffract pattern see refauto udf detail suit simpl function paramet want reus data across function call creat classlibertemudfbaseudf subclass instead funcfunctoolsparti higherord function allow creat new function wrap exist function pass addit paramet case result call funcnumpysum within codectxmap codenumpysumfram axi see httpsdocspythonorglibraryfunctoolshtmlfunctoolsparti detail exampl notebook see follow notebook demonstr basic udf function download exampl collect github httpsgithubcomlibertemlibertemblobmasterexamplesintroductiontoudfsipynb_ toctre udfintroduct _how udf work udf work imag imagesudfdiagramsvg width alt diagram data flow udf allow parallel process data first divid partit along navig axe work differ worker process frame partit userdefin function methlibertemudfbaseudfframemixinprocess_fram call free imagin process result split data set partit result need merg back togeth accomplish call methlibertemudfbaseudfmerg method frame partit process pseudocod data process follow way codeblock python result empti partit get_partitionsdataset partition_result empti frame frame_slic get_framespartit frame_result process_framefram partition_resultframe_slic frame_result mergedestresult srcpartition_result realiti loop partit run parallel use multipl worker process potenti refon multipl comput architectur loop individu frame run worker process merg function run main process accumul result everi time result partit avail addit methlibertemudfbaseudfframemixinprocess_fram two method avail overrid work largerdiffer unit data time methlibertemudfbaseudftilemixinprocess_til methlibertemudfbaseudfpartitionmixinprocess_partit use optim oper document refadvanc topic advanc udf section udf would good time refread implement udf implement udf refadvanc udf function advanc udf refgener section debug debug udf help resolv issu udf work proceed refudf profil udf profil gain insight effici udf toctre udfbas udfadvanc udfprofil seealso refudf refer api document udf _packag packag overview libertem current split sever applicationspecif subpackag keep depend manag facilit use libertem code project viceversa see also issu list provid overview current subpackag constantli updat libertemblobfind sinc correlationbas peak find strain map httpslibertemgithubiolibertemblobfind libertemholo sinc offaxi electron holographi work progress httpsgithubcomlibertemlibertemholo ptychographi ptychographi implement within ptychographi project httpsptychographygithubioptychographi _instal instal note libertem current use python would like instal latest develop version pleas also see refinstal git clone short version codeblock shell virtualenv p python libertemvenv sourc libertemvenvbinactiv libertemvenv python pip instal libertemtorch option gpu support see also httpsdocscupydevenstableinstallhtml libertemvenv python pip instal cupi detail pleas read linux mac os x appimag linux easiest method use provid appimag download appimag file releas page github httpsgithubcomlibertemlibertemreleases_ mark execut run appimag see also offici document httpsdocsappimageorguserguiderunappimageshtml_ continu read refusag document creat isol python environ provid isol environ libertem depend use virtualenv conda environ import want use differ python applic may conflict depend allow quickli recreat environ case thing go sideway use virtualenv use virtualenv httpsvirtualenvpypaio_ venv httpsdocspythonorgtutorialvenvhtml_ systemwid compat python instal mac os x use conda_ recommend creat new virtualenv libertem use follow command codeblock shell virtualenv p python libertemvenv multipl python version instal replac codepython codepython later version replac codelibertemvenv path would like creat venv activ virtualenv codeblock shell sourc libertemvenvbinactiv afterward shell prompt prefix codelibertemvenv indic environ activ codeblock shell libertemvenv inform virtualenv exampl use shell without codesourc pleas refer virtualenv document httpsvirtualenvpypaioenstableuser_guidehtml_ often work virtualenv use conveni wrapper like virtualenvwrapp httpsvirtualenvwrapperreadthedocsioenlatest_ recommend continu instal pypi_ _conda use conda alreadi use conda dont systemwid compat python instal creat conda environ libertem section assum instal anaconda miniconda httpscondaioprojectscondaenlatestuserguideinstallindexhtmlregularinstallation_ instal work creat new conda environ instal libertem follow command codeblock shell conda creat n libertem python instal later run libertem activ environ follow command see also refinstal window applic codeblock shell conda activ libertem afterward shell prompt prefix codelibertem indic environ activ codeblock shell libertem environ readi instal libertem inform conda see document creat manag environ httpscondaioprojectscondaenlatestuserguidetasksmanageenvironmentshtml_ _instal pypi instal pypi instal latest releas version use pip activ python environ conda virtualenv instal use codeblock shell libertem python pip instal libertem instal libertem depend environ pleas continu read refusag document pytorch libertem use pytorch httpspytorchorg_ process avail otherwis use numpi fallback weve experienc x speedup pytorch compar default numpi instal reason recommend instal pytorch httpspytorchorg_ current use pytorch cpu contribut use gpu well welcom let pip instal pytorch automat use torch variant exampl pypi codeblock shell libertem python pip instal libertemtorch cupi gpu support base cupi httpscupydev_ see httpsdocscupydevenstableinstallhtmlinstallingcupi instal precompil binari packag recommend codepython pip instal libertemcupi instal cupi sourc requir build chain timeconsum versionad extra packag versionchang number libertem applic spun subpackag instal separ see refpackag overview full grid match routin pymodlibertemanalysisfullmatch depend hdbscan httpshdbscanreadthedocsioenlatest_ option depend instal issu platform updat instal pypi via pip updat like codeblock shell libertem python pip instal u libertem instal new version libertem updat requir chang updat instal run updat version restart libertemserv afterward reload browser window run libertem gui environ like jupyt notebook need restart python interpret make sure new version use exampl restart ipython kernel _instal window window recommend method instal libertem window base miniconda bit compat python version httpscondaiominicondahtml_ instal python distribut instal run libertem window anaconda prompt similar use conda_ linux mac os x differ might instal pip local libertem conda environ make sure pip instal instal packag local environ global anaconda base environ help avoid permiss issu interfer environ codeblock shell libertem conda instal pip docker singular versionad docker imag libertem instal httpshubdockercomrlibertemlibertemtags_ avail docker hub see refcontain detail troubleshoot troubl instal pleas let us know either file issu httpsgithubcomlibertemlibertemissues_ ask gitter channel httpsgitterimlibertemlobby_ integr deploy toctre maxdepth deploymentjupyt deploymentclustercontain python python well establish scientif commun usabl develop also mani microscopist highlevel construct allow fast iter prototyp extens ecosystem packag scientif comput leverag exist nativ librari python good interoper lowlevel languag like c mean well suit glue languag exist lowlevel routin without introduc ineffici copi larg buffer interact isnt python slow ye slow mostli use python set comput creat buffer set paramet etc use glue languag nativ part libhdf numpyopenbla use numba httpsnumbapydataorg_ critic code section see exampl profil visual flamegraph imag imagesread_from_hdfs_profilepng workload similar libertem later read file hdf matrix multipl data time spent read file block left sys_read actual perform matrix multipl center block anyth contain dgemm python part mostli narrow littl time high deep call stack pillar right dask schedul also visibl profil take less total sampl note swapper part right fullsystem profil unrel thing like swapper intel_idl also includ multicor scale numpi releas gil multipl thread work time even case still use multiprocess worker daskdistribut scale multipl core see also docperform section changelog testsetup libertem import api libertemexecutorinlin import inlinejobexecutor ctx apicontextexecutorinlinejobexecutor dataset ctxloadmemori datashap sig_dim _continu dev toctre glob changelog _v _latest imag httpszenodoorgbadgedoizenodosvg target httpsdoiorgzenodo releas mainli contain improv center mass first moment analysi support start web gui jupyterhub jupyterlab new featur support center mass annular mask methlibertemapicontextcreate_com_analysi classlibertemanalysiscomcomanalysi gui issu pr support gui specifi rotat scan detector flip detector axi pr issu previous support python api tweak instruct jupyterhub jupyterlab integr libertem see refjupyt integr pr new packag libertemlibertemjupyterproxi httpsgithubcomlibertemlibertemjupyterproxy_ interfac web api support ad rerun visual without rerun udf analysi allow almost instant feedback oper like chang com paramet ad tokenbas authent usabl via integr like jupyt extend localmanu usag later pr issu pleas comment issu localmanu use would benefici priorit accordingli seq dataset ad support load exclud pixel xml issu pr see classlibertemiodatasetseqseqdataset inform also support codeseqseq codeseq extens main seq file find file match base name contain correct data issu pr bugfix assert codefil argument classlibertemiodatasetdmdmdataset actual list tupl prevent iter string path pr escap glob support special charact file name multifil dataset issu pr make sure multithread main process still work properli launch classlibertemapicontext issu pr allow custom plot return rgb plot data exampl color wheel vector field issu pr adjust partit count match number cpu comput worker total worker prevent residu partit issu pr correct partit shape roi classlibertemudfbaseudfmeta pr fix memori leak dont submit dynam gener callabl directli distribut cluster cach unbound cach issu pr document note handl hdf file nonstandard compress classlibertemiodatasethdfhdataset pr link two public dataset refhir sto refsynthet sto pr misc speed coordin calcul issu pr make sure task schedul dynam avail worker uneven run time benefit gpu pr cach load librari reduc overhead set thread count issu pr mani thank new contributor levent puská exclud pixel load matthew bryan figur nonstandard compress hdf improv dm input valid congratul alex close longstand com issu issu enabl easi secur access web interfac share infrastructur _v imag httpszenodoorgbadgedoizenodosvg target httpsdoiorgzenodo bugfix releas ensur compat upcom numba releas custom numba cach make assumpt numba intern chang numba fix compat numba also make sure fail grace futur chang issu pr _v imag httpszenodoorgbadgedoizenodosvg target httpsdoiorgzenodo releas introduc featur essenti live data process use offlin process well live plot api bundl execut sever udf one run iter partial udf result asynchron udf execut featur infrastructur specif live process includ liberteml httpsgithubcomlibertemlibertemlive_ packag releas soon new featur support postprocess result main node merg partial result add methlibertemudfbaseudfget_result codeus paramet methlibertemudfbaseudfbuff see refudf final post process detail pr pr issu obtain partial result merg step iter gener use methlibertemapicontextrun_udf_it see refparti exampl httpsgithubcomlibertemlibertemblobmasterexamplesasyncipynb_ detail pr run multipl udf one pass singl codedataset pass list udf instead one udf methlibertemapicontextrun_udf methlibertemapicontextrun_udf_it pr allow usag asynchron context new codesyncfals argument methlibertemapicontextrun_udf methlibertemapicontextrun_udf_it see refparti exampl httpsgithubcomlibertemlibertemblobmasterexamplesasyncipynb_ detail issu pr live plot use new codeplot paramet methlibertemapicontextrun_udf methlibertemapicontextrun_udf_it well live plot class document refviz refer pass codeplotstru simpl usag see refplot well exampl httpsgithubcomlibertemlibertemblobmasterexamplesliveplottingipynb_ variou possibl advanc usag issu pr allow udfintern thread mostli interest adhoc parallel top classlibertemexecutorinlineinlinejobexecutor live process current reli classlibertemexecutorinlineinlinejobexecutor simplic could also use hybrid multiprocessmultithread workload thread numba pyfftw ompmkl automat control executor make number allow thread avail attrlibertemudfbaseudfmetathreads_per_work thread mechan control automat pr ki reshap sync offset time seri support user specifi codenav_shap codesig_shap codesync_offset ki data set load time seri data pr issu mani thank anandbaburajan httpsgithubcomanandbaburajan_ implement featur support python use python appimag issu pr bugfix udf consist use attribut access codeudfprocess_ codeudfmerg codeudfget_result etc instead mix code__getitem__ dictlik access previou method still work trigger classuserwarn issu pr also allow nonslic assign exampl codeselfresultsr frame issu pr better choic codekindnav buffer fill valu outsid roi string coden code bool codetru codefals integ smallest possibl valu code object codenpnan codenon pr improv perform chunk hdf file especi compress hdf file chunk navig dimens caus excess read amplif pr fix plot rang zero one valu present result notabl boolean valu issu pr fix axe order com templat compon field x templat x pr document updat gatan digit micrograph gm exampl work current gm libertem releas demonstr new featur issu pr mani thank winni gatan help work around number issu restructur udf document pr document coordin meta inform issu pr obsolesc remov deprec blobfind codefeaturevecmakerudf previous announc blobfind avail separ packag httpsgithubcomlibertemlibertemblobfind instead codefeaturevecmakerudf use spars matrix codeapplymasksudf pr remov deprec codejob interfac previous announc function port capabl udf interfac pr _v imag httpszenodoorgbadgedoizenodosvg target httpsdoiorgzenodo pleas announc latest libertem releas mani improv sinc would like highlight contribut gsoc student anandbaburajan httpsgithubcomanandbaburajan_ reshap sync offset correct twentyseen httpsgithubcomtwentyseen_ code gener replic gui analys jupyt notebook implement signific improv area io user interfac anoth highlight releas experiment support nvidia gpu via cupi via nativ librari api readi use includ support gui perform optim still done issu gpu support activ maskbas analys virtual detector radial fourier test purpos bring notic improv perform yet gpubas process show signific benefit comput heavi applic like ssb implement httpsgithubcomptychographyptychographi lot work done implement tile read result new io system improv perform mani circumst especi deal larg detector frame addit correct modul integr new io system correct gain subtract dark refer patch pixel defect fli see full changelog new featur io overhaul implement tile read file format issu issu issu issu allow udf implement codeprocess_til influenc tile shape overrid methlibertemudfbaseudfget_tiling_prefer make inform tile scheme avail udf attrlibertemudfbaseudfmetatiling_schem issu issu issu updat codememorydataset allow test differ tile shape issu ad io backend select pr allow user select bestperform backend circumst load via new codeio_backend paramet codecontextload fix ki perform regress issu disabl readahead hint default additionali fix perform regress issu slower media like hdd ad buffer read backend tri best linear io perwork gui integr backend select done direct io longer support pleas let us know import usecas issu support specifi log level cli pr support norpix seq file issu pr support mrc file support ncempi issu pr support load stack dm file pr gui integr still done gui filebrows improv user star directori file browser easi navig pr support run multipl udf time yet expos public api pr gui user add remov scan size dimens accord dataset shape pr gui shutdown button stop server use exampl jupyterhub integr pr infrastructur consist coordin transform ad modlibertemcorrectionscoordin modlibertemutil see also descript coordin system refconcept methlibertemapicontextcreate_com_analysi allow specifi codeflip axi scan rotat angl deal mib file scan rotat correctli issu pr correct specifi user run udf pr support load dark frame gain map sometim ship seq data set gpu support process data cpu cuda devic pr refudf cuda spin holographi separ packag progress httpsgithubcomlibertemlibertemholo implement cupi support classlibertemudfholographyholoreconstructudf current deactiv due issu pr gui allow user select gpu use creat new local cluster pr gui support download jupyt notebook correspond analysi made user gui pr gui copi jupyt notebook cell correspond analysi directli gui includ cluster connect detail pr pr allow reshap dataset custom shape codedataset implement current except hdf ki gui allow specifi codenav_shap codesig_shap paramet set differ shape layout dataset issu pr codedataset implement handl miss data grace issu pr codedataset implement except hdf ki gui allow specifi codesync_offset handl synchronizationacquisit problem pr user access coordin tilepartit slice attrlibertemudfbaseudfmetacoordin issu pr cach warmup open data set precompil jite function singl process per node control manner prevent cpu oversubscript improv implement cach function captur function closur pr issu allow select lin log scale visual sum stddev pick singl mask analys handl data larg dynam rang add key codeintensity_lin classlibertemanalysissumsumresultset classlibertemanalysissumpickresultset result classlibertemanalysissdsdanalysi add key codeintensity_log classlibertemanalysissumsinglemaskresultset new key chosen affect exist key issu pr tupl ad directli codeshap object right addit add signal dimens codeshap object left addit add navig dimens pr bugfix fix offbyon error sync offset ki data drivebi chang pr missingdirectori error isnt thrown due lastrecentdirectori avail pr gui cluster connect fail reopen form paramet user submit pr gui fix glitch file open dialogu disallow parallel brows load conclud pr handl empti roi extra_shap zero empti result buffer appropri shape return roi empti codeextra_shap zero pr improv intern modlibertemcorrectionsdetector modlibertemcorrectionscorrset better support correct mani dead pixel pr issu handl singlefram partit combin aux data instead squeez aux buffer reshap correct shape issu pr libertemserv start bash window pr fix read without copi multifil dataset start offset file taken account index memori map issu improv perform reduc memori consumpt point analysi custom right hand side matrix product reduc memori consumpt improv perform spars mask point analysi see also scipi httpsgithubcomscipyscipyissues_ issu pr fix stabil issu multipl dask client codeddas_complet need specifi codeloop work multipl codedaskdistribut client pr gui snap pixel point select analysi consist point select pick issu pr open dataset autodetect posit keyword argument handl keyword posit argument codecontextloadauto correctli issu pr document switch readthedoc sphinx theme improv overal document structur develop document separ section user document misc command line option also access shorter altern pr depend numba support set numba thread count pr bump support cach improv pr libertemserv ask confirm user press ctrlc immedi stop use anoth ctrlc pr includ pytestbenchmark httpspytestbenchmarkreadthedocsioenlatestusagehtml_ integr benchmark test infrastructur see refbenchmark detail pr x compon color wheel visual center mass radial fourier analysi swap match axi convent empyr chang color encod visual result pr deprec codetileshap paramet codedataset implement deprec favor tileshap negoti ignor given issu pr remov color wheel code codelibertemviz replac import empyr note function expect three vector compon instead two pr new consist codenav_shap codesig_shap paramet use load data old codescan_s codedetector_s paramet exist still recogn pr _v imag httpszenodoorgbadgedoizenodosvg target httpsdoiorgzenodo bugfix allow instal latest dask distribut python _v imag httpszenodoorgbadgedoizenodosvg target httpsdoiorgzenodo new featur addit tupl classlibertemcommonshapeshap object use codeextra_shap paramet methlibertemudfbaseudfbuff methlibertemudfbaseudfaux_data pr progress bar support base codetqdm enabl pass codeprogresstru methlibertemapicontextrun_udf methlibertemapicontextrun methlibertemapicontextmap refprogress bar pr includ explicit support direct electron de format base hdf pr gui download result hdf npz tiff raw see refdownload result detail pr methlibertemapicontextload automat detect file type paramet codefiletypeauto pass pr relocat gui allow libertem run differ url prefix allow integr exampl jupyterlab pr run methlibertemudfbaseudfpreprocessmixinpreprocess also merg main node alloc initi buffer addit run worker pr need set thread count environ variabl anymor sinc thread count openbla openmp intel mkl pyfftw set worker runtim numba support ad soon numba releas pr bugfix larg number usabl improv pr thank credit mani new contributor gsoc fix buggi enabl direct io checkbox raw dataset handl unsupport oper system grace pr document ad screenshot descript roi stddev featur usag doc pr improv instruct instal libertem gener pr develop pr add inform download gener sampl dataset refsampl data pr obsolesc paramet codecrop_detector_to codedetector_size_raw classlibertemiodatasetrawrawfiledataset deprec remov pleas specifi codedetector_s instead use special dataset exampl empad classlibertemudffeature_vector_makerfeaturevecmakerudf deprec remov use classlibertemudfmasksapplymasksudf spars stack singl pixel mask stack gener methlibertem_blobfindercommonpatternsfeature_vector instead pr misc cluster analysi use connect matrix cluster neighbor pixel reduc memori footprint improv speed qualiti pr use faster classlibertemudfmasksapplymasksudf gener featur vector pr classlibertemudfstddevstddevudf x speedup larg frame pr renam result buffer classlibertemudfstddevstddevudf methlibertemudfstddevrun_stddev methlibertemudfstddevconsolidate_result codesum_fram codesum codenum_fram codenum_fram pr resolv ambigu varianc sum varianc result buffer name classlibertemudfstddevstddevudf methlibertemudfstddevrun_stddev methlibertemudfstddevconsolidate_result pr libertem work python experiment use context use remot daskdistribut cluster lead lockup error python default local daskdistribut context work improv perform larg tile pr classlibertemudfsumsumudf move modlibertemudf folder pr make sure signal dimens result buffer slice flatten without creat implicit copi pr issu mani thank contributor releas useranandbaburajan usertwentyseen usersayandip userbdalevin usersaisunku useriamshankhadeep userabib userskp useruellu _v imag httpszenodoorgbadgedoizenodosvg target httpsdoiorgzenodo bugfix releas mainli constrain codemsgpack depend distribut compat version yet also contain import fix hdf dataset bugfix fix hdf automat tileshap pr fix read hdf roi beyond first partit pr add version constraint msgpack _v imag httpszenodoorgbadgedoizenodosvg target httpsdoiorgzenodo main point releas refjob deprec restructur packag name refextract blobfind modul restructur new featur codedtyp support udf refudf dtype issu pr dismiss error messag via keyboard allow press escap key close current open error messag issu roi doesnt effect pick mode hide dropdown case issu make tileshap paramet hdf dataset option pr open browser start server enabl default disabl use nobrows issu pr implement classlibertemudfmasksapplymasksudf replac applymasksjob issu pr implement classlibertemudfrawpickudf replac pickframejob issu pr bug fix fix frm distribut set make sure io method run worker node pr fix load nd hdf file previous hdf dataset hardcod data arbitrati dimens support issu pr fix codedaskjobexecutorrun_each_host need pass codepurefals ensur multipl run function pr obsolesc hdf support right test knowledg also use upstream codehdf project activ maintain remov support hdf codeclusterdataset codecacheddataset use instead issu pr misc depend distribut api chang pr analys port job udf backend jobrel code remain comparison purpos issu pr _job deprec job api deprec origin job api libertem supersed new refuserdefin function api releas see issu detail overview chang udf api bring follow advantag support region interest roi easier implement extend reus udf compar job clean separ backend implement detail applicationspecif code facil implement nontrivi oper see refadvanc udf perform least par reason job api becom obsolet exist public interfac name methlibertemapicontextcreate_mask_job methlibertemapicontextcreate_pick_job support libertem two releas ie includ use job api trigger deprec warn start releas new classlibertemudfmasksapplymasksudf replac classlibertemjobmasksapplymasksjob classlibertemudfrawpickudf replac classlibertemjobrawpickframejob analysi class reli job api backend alreadi port correspond udf backend new backend may lead minor differ behavior chang return dtype legaci code use job backend remain activ transit period set codeanalysistyp job run classlibertemjobmasksapplymasksjob classlibertemudfmasksapplymasksudf main differ classlibertemudfmasksapplymasksudf return result first axe dataset navig axe last dimens mask index classlibertemjobmasksapplymasksjob use return transpos data flatten navig dimens like udf run classlibertemudfmasksapplymasksudf return dictionari result data access key codeintens classlibertemcommonbuffersbufferwrapp object roi support like udf testsetup jobdeprec import numpi np import libertem import matplotlibpyplot plt def all_on return npone def single_pixel buf npzero buf return buf previous classlibertemjobmasksapplymasksjob codeblock python deprec mask_job ctxcreate_mask_job factoriesall_on single_pixel datasetdataset mask_job_result ctxrunmask_job pltimshowmask_job_resultreshapedatasetshapenav classlibertemudfmasksapplymasksudf testcod jobdeprec mask_udf libertemudfmasksapplymasksudf mask_factoriesall_on single_pixel mask_udf_result ctxrun_udfdatasetdataset udfmask_udf pltimshowmask_udf_resultintensitydata classlibertemjobrawpickframejob classlibertemudfrawpickudf classlibertemjobrawpickframejob allow pick arbitrari contigu slice navig signal dimens practic howev mostli use extract singl complet frame classlibertemudfrawpickudf allow pick complet signal dimens arbitrari noncontigu region interest navig space specifi roi necessari complex subset dataset extract construct suitabl subset ident matrix signal dimens use applymasksudf appropri roi navig dimens altern easili possibl implement custom udf purpos perform complet process udf worker node instead load data central node may viabl altern well classlibertemudfrawpickudf return data nativ codedtyp dataset previous classlibertemjobrawpickframejob convert float use methlibertemapicontextcreate_pick_analysi continu recommend conveni function pick singl frame _restructur restructur subpackag current restructur libertem packag instal use independ see issu longer process chang import locat blobfind httpslibertemgithubiolibertemblobfinder_ first modul separ see refpackag current overview subpackag transit period import previou locat support trigger codefuturewarn see refshow warn activ deprec warn messag strongli recommend restructur ongo _v imag httpszenodoorgbadgedoizenodosvg target httpsdoiorgzenodo new featur make oop base composit subclass easier classlibertemudfblobfindercorrelationcorrelationudf pr introduc plain circular match pattern classlibertemudfblobfinderpatternscircular pr distribut shard dataset classlibertemiodatasetclusterclusterdataset issu issu support cach data set classlibertemiodatasetcachedcacheddataset slower storag nf spin metal fast local storag pr refclust analysi pr userkruzaeva classlibertemiodatasetdmdmdataset implement base ncempi pr add new methlibertemexecutorbasejobexecutormap executor primit use concurr read metadata dmdm file initi note support web gui yet name pattern dm file seri vari wildli need chang file dialog speed x correlationbas peak refin modlibertemudfblobfindercorrel numbabas pipelin pr introduc classlibertemudfblobfindercorrelationfullframecorrelationudf correl larg number sever hundr small peak x small frame x faster classlibertemudfblobfindercorrelationfastcorrelationudf classlibertemudfblobfindercorrelationsparsecorrelationudf pr introduc classlibertemudfudfpreprocessmixin pr implement iter classlibertemanalysisbaseanalysisresultset pr add hologram simul funclibertemutilsgeneratehologram_fram pr implement hologram reconstruct udf classlibertemudfholographyholoreconstructudf pr bug fix improv error valid handl open file gui issu cleanup improv classlibertemanalysisfullmatchfullmatch pr ensur raw dataset size calcul int avoid integ overflow pr issu resolv shape mismatch issu simplifi domin order calcul radial fourier analysi pr actual pass codeenable_direct paramet web api dataset document creat refauthorship pr chang manag process issu pr document refcrystallin map refclust analysi pr userkruzaeva instruct profil slow test issu pr improv api refer analysi result issu pr restructur updat api refer number udf applicationspecif code issu pr obsolesc job interfac plan replac implement base udf one upcom releas misc split blobfind code sever file reduc file size pr _v imag httpszenodoorgbadgedoizenodosvg target httpsdoiorgzenodo point releas fix number minor issu notabl pr pr merg version bug fix trigger timeout guess paramet hdf take long issu pr slightli improv error valid handl open file gui commiteccdeffdeaeadafaacf recogn blo file type issu fix glitch neg peak elev possibl pr updat exampl match releas pr _v imag httpszenodoorgbadgedoizenodosvg target httpsdoiorgzenodo point releas fix bug zenodo upload product releas _v releas constitut major updat almost year develop systemat chang manag start releas releas messag httpsgroupsgooglecomdmsglibertempmvovqxosvp_tukcwaj_ userdefin function libertem offer new api defin wide rang userdefin reduct function udf distribut data interfac implement offer number uniqu featur reduct defin function execut subset data mean equal suitabl distribut comput interact display result progress calcul handl live data¹ interfac adapt simpl complex use case simpl map function complex multistag reduct rich option defin input output data reduct function help implement nontrivi oper effici within singl pass input data composit extens object orient program interfac allow highli effici process local refer cach effici memori handl introduct httpslibertemgithubiolibertemudfhtml advanc featur httpslibertemgithubiolibertemudfadvancedhtml big shoutout alex userskp develop ¹userdefin function work live data without modif soon libertem implement backend support live data expect support stem applic parallel udf interfac implement number applic make use new facil correlationbas peak find refin cbed credit karina ruzaeva userkruzaeva strain map cluster fluctuat em radial fourier seri advanc fluctuat em detail exampl httpslibertemgithubiolibertemapplicationshtml extend document greatli improv coverag document httpslibertemgithubiolibertemindexhtmldocument fulli autom releas pipelin alex userskp invest great deal effort fulli autom releas process abl releas often includ servic releas basic daskdistribut array integr libertem gener effici daskdistribut array support dataset type releas mean possibl use highperform file reader applic outsid libertem file format support variou file format improv detail httpslibertemgithubiolibertemformatshtml _v initi releas minimum viabl product proof concept support appli mask high throughput distribut system interact web gui display script capabl _api document python api python api concis api use libertem python code suitabl interact script exampl jupyt notebook usag within python applic script basic exampl basic exampl load api creat local cluster load file run analysi complet exampl use python api pleas see jupyt notebook exampl directori httpsgithubcomlibertemlibertemtreemasterexamples_ detail pleas see refload data refdataset api refformatspecif referenceformat see refsampl data publicli avail dataset includ examplesbasicpi code custom process routin go beyond includ capabl libertem implement use refuserdefin function refer full refer pleas see refrefer _executor executor versionad executor api intern sinc choic paramet executor import integr dask framework document name creation method executor reason stabl rest api subject chang without notic reason document develop section api refer default executor classlibertemexecutordaskdaskjobexecutor use daskdistribut schedul support libertem featur achiev optim perform method provid libertem start daskdistribut cluster use howev libertem also run vanilla daskdistribut cluster pleas note daskdistribut cluster creat libertem might use thread mixtur thread process classlibertemexecutorinlineinlinejobexecutor run task synchron current thread use debug special applic run udf perform multithread effici nonstandard use requir task execut sequenti order see also refthread inform multithread udf versionad classlibertemexecutorconcurrentconcurrentjobexecutor run task use modpythonconcurrentfutur use classpythonconcurrentfuturesthreadpoolexecutor allow share larg amount data well resourc main thread worker effici sever slow python global interpret lock httpswikipythonorgmoinglobalinterpreterlock_ mani circumst furthermor creat thread safeti issu httpsgithubcomlibertemlibertemblobfinderissu special applic classlibertemexecutordelayeddelayedjobexecutor use daskdelay httpsdocsdaskorgenstabledelayedhtml_ delay process experiment see refdask detail might use thread well depend dask schedul use codecomput common executor choic versionad methlibertemapicontextmake_with provid conveni shortcut start classlibertemapicontext common executor choic see methapi document libertemapicontextmake_with avail option connect cluster see refclust start schedul worker run docscheck sinc doesnt play well launch multiprocess cluster codeblock python libertem import api libertemexecutordask import daskjobexecutor connect daskdistribut schedul tcplocalhost daskjobexecutorconnecttcplocalhost executor ctx apicontextexecutorexecutor _cluster spec custom cpu cuda devic control mani cpu cuda devic use specifi follow run docscheck sinc doesnt play well launch multiprocess cluster codeblock python libertem import api libertemexecutordask import daskjobexecutor cluster_spec libertemutilsdevic import detect find would use like return dictionari key cpu cuda list devic id devic detect exampl deactiv cuda devic remov devic dictionari devicescuda exampl deactiv cupi integr deviceshas_cupi fals exampl use cpu id ignor moment ie cpu pin devicescpu rang gener spec daskdistribut specclust relev kwarg match dictionari entri spec cluster_specdevic start local cluster custom spec daskjobexecutormake_localspecspec executor ctx apicontextexecutorexecutor pleas see refdask executor refer daskbas executor doc info multithread inform multithread ad udf doc refthread pr featur autom paramet guess center mass experiment helper function methlibertemanalysiscomguess_correct guess paramet center mass analysi pr add button gui call methlibertemanalysiscomguess_correct updat gui paramet result pr featur daskdataset dataset class enabl libertem process dask array udf interfac use array chunk partit structur classlibertemiodatasetdaskdaskdataset pradd support raw mib quad format support codex codex layout bit bit counter depth support layout bit depth ad demand pr issu add codepreload option codelibertemserv codelibertemwork make work document hdf doc httpslibertemgithubiolibertemreferencedatasethtmlhdf_ follow dask worker preload httpsdocsdaskorgenstablehowtocustomizeinitializationhtmlpreloadscripts_ prfeatur executor dask integr see refdask detail descript dask integr add classlibertemexecutordelayeddelayedjobexecutor classlibertemexecutorconcurrentconcurrentjobexecutor methlibertemexecutorintegrationget_dask_integration_executor add methlibertemapicontextmake_with make common executor choic access user allow use exist dask client well set libertem client default dask schedul integr purpos add methlibertemudfbaseudfmergeallmixinmerge_al api combin intermedi udf task result chunk dask array effici restructur extend document executor pr issu add codeudfmetasig_slic codeudfmetatiling_scheme_idx attribut use perform access current signal slice mostli import throughputlimit analysi pr issu readd support direct io direct io previous support special case raw file support nativ dataset format support notabl except hdf mrc ser pr issu add support read tvip binari file binari code_nnntvip file open libertem pr fix codemake_dask_array coderoi codemake_dask_array longer crash coderoi specifi issu fix run com analysi linescan dataset com analys implicitli calcul x gradient centr posit npgradient previous fail nav dimens length new behaviour return divcurl result comresultset defin issu issueimprov perform larg paramet previous paramet bake codeudftask object transfer multipl time singl udf run allow larger paramet handl separ function run pr misc preload start use modlibertempreload import codehdfplugin present user dont specifi common select hdf filter preload pr misc docker imag avail docker imag libertem instal httpshubdockercomrlibertemlibertemtags_ avail dockerhub pr issu _jupyt integr jupyt integr versionad webbas libertem gui integr exist jupyterlab jupyterhub instal way exist authent user manag infrastructur jupyt reus offer libertem servic libertem gui access data avail jupyt notebook note current jupyt integr support unix window outstand issu depend see simpervisor httpsgithubcomjupyterhubsimpervisorissues_ jupyterserverproxi httpsgithubcomjupyterhubjupyterserverproxypull_ detail instal note current fork codejupyterserverproxi need use includ fix allow restart libertem grace shutdown see also jupyterserverproxi httpsgithubcomjupyterhubjupyterserverproxypull_ fork also includ unreleas necessari chang master branch codejupyterserverproxi instal done follow command follow instal instruct codeblock shell jupytervenv git clone gitgithubcomskpjupyterserverproxygit jupytervenv cd jupyterserverproxi git checkout websocketfixplusrestart jupytervenv pip instal note need done environ codelibertemjupyterproxi instal first step need instal libertemjupyterproxi httpsgithubcomlibertemlibertemjupyterproxy_ python environ jupyterhub jupyterlab instal also need instal libertem live either python environ case separ python environ libertem need tell libertemjupyterproxi start codelibertemserv done simpl json configur file configur file need save python environ libertemjupyterproxi instal virtualenv contain jupyt instal creat codeoptjupytervenv configur filenam codeoptjupytervenvetclibertem_jupyter_proxyjson content look like codeblock json libertem_server_path optlibertemvenvbinlibertemserv allow separ jupyt instal libertem instal given path also point wrapper script exampl environ prepar like load modul hpc system wrapper script forward argument reveic codelibertemserv call usag instal finish find libertem gui entri codenew menu jupyterhub figur imagesusejupyterhubpng launcher icon jupyterlab figur imagesusejupyterlabpng contain cluster versionad libertem repositori docker hub httpshubdockercomrlibertemlibertemtags_ imag public use note libertem server bind localhost default unless tokenbas authent enabl codeinsecur flag provid run behind revers proxi suppli token add encrypt authent author access untrust network desir refjupyt integr use thirdparti command like codedaskschedul may bind public interfac default expos machin remot code execut reason interfac alway specifi limit trust network furthermor default command libertem docker contain start server bind interfac facilit integr docker run contain isol environ requir user expos port explicitli singular howev run contain like regular user program mean expos insecur libertem server interfac run default contain command reason command run alway specifi explicitli use singular _contain contain docker imag found libertem repositori docker hub httpshubdockercomrlibertemlibertemtags_ libertem instal virtual environ codevenv docker imag execut codelibertemserv codedaskschedul codelibertemwork found codevenvbin consequ contain run codevenvbinlibertemserv host insecur port default use docker run expos libertem server codelocalhost access local data like codeblock shell docker run p mount typebindsourcepathtoyourdatadstdataro libertemlibertem use docker imag singular start codelibertemserv codeblock shell singular run dockerlibertemlibertem venvbinlibertemserv avail version tag latest default point stabl releas highest version number continu point current master version tag stabl releas avail well see libertem repositori docker hub httpshubdockercomrlibertemlibertemtags_ detail updat updat latest releas like codeblock shell docker pull libertemlibertem codeblock shell singular pull dockerlibertemlibertem _cluster start custom cluster libertem connect run dask cluster start cluster codelocalhost first run schedul codeblock shell libertem daskschedul host localhost gpu support libertem requir specif resourc tag environ set dask worker easiest way start worker appropri set codeblock shell libertem libertemwork tcplocalhost command line option avail includ autogeneratedlibertemworkerhelp liter versionad versionad dev codepreload ad cluster setup run schedul appropri network interfac run worker cluster node connect schedul connect cluster schedul url libertem web gui easier deploy containerbas environ also use docker imag exampl start schedul worker isol environ docker codeblock shell docker run mount typebindsourcepathtoyourdatadstdataro libertemlibertem venvbindaskschedul docker run mount typebindsourcepathtoyourdatadstdataro libertemlibertem venvbinlibertemwork tcpscheduleraddr exampl start schedul worker context local user singular codeblock shell singular run dockerlibertemlibertem venvbindaskschedul host localhost singular run dockerlibertemlibertem venvbinlibertemwork tcplocalhost _holographi app offaxi electron holographi libertem implement refhologram simul holosim refhologram reconstruct holoreconstruct offaxi electron holographi versionad _holosim hologram simul hologram simul use method describ licht et al citelicht simul includ simul hologram gaussian poisson nois without effect fresnel fring biprism simul requir amplitud phase imag provid calcul exampl amplitud sphere assum sphere use mean inner potenti mip contribut phase addit quadrat longrang phase shift origin centr sphere testsetup libertem import api libertemexecutorinlin import inlinejobexecutor ctx apicontextexecutorinlinejobexecutor testcod import numpi np import matplotlibpyplot plt libertemutilsgener import hologram_fram defin grid sx sy mx npmeshgridnparangesx nparangesi defin sphere region sphere mx calcul longrang contribut phase phase mx sx add mean inner potenti contribut phase phasespher mxsphere myspher sx calcul amplitud phase amp npones_likephas ampspher mxsphere myspher sx plot f ax pltsubplot aximshowamp cmapgray axtitleset_textamplitud axset_axis_off aximshowphas cmapviridi axtitleset_textphas axset_axis_off imag imagesholographyamplitude_phasepng gener object hologram codeamp codephas pass codeholo_fram function follow testcod holo hologram_frameamp phase gener vacuum refer hologram use array one amplitud zero phase testcod ref hologram_framenpones_likephas npzeros_likephas plot f ax pltsubplot aximshowholo cmapgray axtitleset_textobject hologram axset_axis_off aximshowref cmapgray axtitleset_textrefer hologram axset_axis_off imag imagesholographyhologramspng _holoreconstruct hologram reconstruct libertem use reconstruct offaxi electron hologram use fourier space method process involv follow step fast fourier transform filter sideband fourier space crop applic center sideband invers fourier transform reconstruct access classlibertemudfholographyholoreconstructudf class demonstr reconstruct capabl two dataset creat hologram simul follow testcod libertemiodatasetmemori import memorydataset libertemudfholographi import holoreconstructudf dataset_holo memorydatasetdataholoreshap sx sy tileshap sx sy num_partit sig_dim dataset_ref memorydatasetdatarefreshap sx sy tileshap sx sy num_partit sig_dim reconstruct requir knowledg posit sideband size sideband filter use reconstruct posit sideband estim fourier transform vacuum refer hologram testcod plot fft sideband posit pltimshownplognpabsnpfftfftref pltplot r pltaxisoff plttitlefft refer hologram defin posit sb_posit imag imagesholographyfft_referencepng radiu sideband filter typic chosen either half distanc sideband autocorrel strong phase object one third distanc weak phase object assum strong phase object one proceed follow testcod sb_size nphypotsb_posit sb_posit sinc offaxi electron holographi spatial resolut determin interfer fring space rather sampl origin imag reconstruct would typic involv chang shape data medium magnif holographi size reconstruct imag typic set size diamet sideband filter highresolut holographi reconstruct typic bin factor use therefor output shape defin follow testcod output_shap intsb_siz intsb_siz final classlibertemudfholographyholoreconstructudf class use reconstruct object refer hologram testcod creat reconstruct udf holo_udf holoreconstructudfout_shapeoutput_shap sb_positionsb_posit sb_sizesb_s reconstruct hologram access data directli w_holo ctxrun_udfdatasetdataset_holo udfholo_udfwavedata w_ref ctxrun_udfdatasetdataset_ref udfholo_udfwavedata correct object wave use refer wave w w_holo w_ref calcul plot phase shift amplitud amp_r npabsw phase_r npanglew plot amplitud f ax pltsubplot aximshowamp axtitleset_textinput amplitud axset_axis_off aximshowamp_r axtitleset_textreconstruct amplitud axset_axis_off imag imagesholographyamp_comparisonpng one see reconstruct amplitud artifact due digit fourier process typic synthet data one way get synthet data closer experiment would ad nois compar phase imag one keep mind phase typic wrap interv math pi unwrap phase one follow testcod skimagerestor import unwrap_phas unwrap phase phase_unwrap unwrap_phasephase_r plot f ax pltsubplot aximshowphas cmapviridi axtitleset_textinput phase axset_axis_off aximshowphase_r axtitleset_textreconstruct phase axset_axis_off aximshowphase_unwrap cmapviridi axtitleset_textreconstruct phase unwrap axset_axis_off imag imagesholographyphase_comparisonpng addit capabl demonstr classlibertemudfholographyholoreconstructudf class take smooth sideband sb filter fraction sb size codesb_smooth default also codeprecis argument use codeprecisionfals reduc calcul precis codefloat codecomplex output note depend numpi backend even reduc precis fft function use reconstruct may intern calcul result doubl precis case reduc precis affect size output rather speed process phasecontrast app phase contrast center mass first moment get first moment citeros visual data set select center mass add analysi dropdown figur imagesappcomexamplepng take note channel drop right imag select differ visual deriv vector field center mass also avail classlibertemapicontext api pleas see exampl httpsgithubcomlibertemlibertemblobmasterexamplescenter_of_massipynb_ refer document methlibertemapicontextcreate_com_analysi ptychograph reconstruct pleas see ptychographi project httpsptychographygithubioptychographyalgorithmshtml_ ptychographi algorithm implement libertem udf _phasechang app phasechang materi phasechang materi promis materi datastorag applic applic section pixel stem dataset aginsbt phasechang materi specimen process distinguish amorph crystallin region hard microstructur analysi dstem low contrast two common method visual bright dark field imag main differ pixel diffract pattern beam posit presenc addit non zeroord diffract peak crystallin frame amorph frame zeroord peak detect posit addit peak frame crystallin region allow gain inform crystal structur next method distinguish crystallin amorph region phasechang materi describ note see refphasechang api refer _crystallin map crystallin map first two differ type region crystallin low resist amorph high resist distinguish crystallin region character presenc addit nonzero diffract peak diffract imag diffract imag frame amorph region contain zeroord diffract peak diffus scatter background presenc addit period diffract peak lead differ fourier spectrum crystallin frame compar amorph frame intermedi frequenc rang integr frame fourier spectra ring intermedi frequenc rang use result integr intens posit sampl visual similar virtual dark field imag fourier space allow distinguish amorph crystallin region sampl gui use select fft fourier add analysi menu gui obtain crystallin map high contrast crystallin amorph region figur imagesphasechangemodepng use checkbox middl would like enabledis mask zeroord peak case enabl zeroord diffract peak remov use control middl posit diskshap selector region averag frame youd like mask adjust radii left posit ringshap selector region averag frame spectra youd like integr click appli figur imagesphasechangenewdatawithmaskingpng right side result imag gener check qualiti detect use pick mode locat middl imag case correct paramet set crystallin region brighter amorph crystallin frame figur imagesphasechangenewdatapickcrystpng amorph frame figur imagesphasechangenewdatapickampng tip enablingdis zeroord diffract peak remov case sharp bright zeroord peak need mask describ spectrum peak sinc function spread frame spectra figur imagesphasechangenewdatawithoutmaskingpng crystallin map provid contrast case sinc shape zeroord peak need remov influenc present lowfrequ rang mask integr region choos figur imagesphasechangeinterfpng crystallin frame figur imagesphasechangepickcrystallinepng amorph frame figur imagesphasechangepickampng _cluster cluster versionad categor crystallin region accord lattic orient cluster base nonzero diffract peak posit use script interfac allow cluster membran amorph crystallin region differ lattic orient effici way take account region interest look full analysi follow link jupyt notebook pcmclusteringipynb_ toctre pcmcluster gui use make preliminari analysi paramet choic brief look result select cluster add analysi menu gui choos region navig space middl select standard deviat sd calcul region recommend tri select much specimen avoid zone without usabl data membran vacuum frame region higher intens standard deviat imag assum possibl posit nonzero order diffract peak adjust posit ring radii left side select region detect peak click appli coordin peak sd imag decis presenc absenc peak posit frame made next result featur vector gener frame use cluster figur imagesphasechangefirstpng first result shown readjust region peak detect left side sd calcul region middl paramet hidden paramet section radii readjust use sd roi mode see correct roi use sd roi rect mode choos roi featur vector calcul cluster use middl section figur imagesphasechangesecondpng check cluster result use pick mode exampl cluster one lattic orient figur imagesphasechangepng exampl cluster anoth lattic orient figur imagesphasechangepng _amorph app amorph materi note see reffem api refradi fourier api api refer libertem offer method determin local order crystallin amorph nanocrystallin materi fluctuat em diffract pattern amorph materi show characterist ring intens around zeroord diffract peak result nearrang order atom materi local order within interact volum beam sampl lead increas speckl ie intens fluctuat within ring sinc region local order diffract beam prefer direct similar crystal fluctuat em citegibson standard deviat within ring calcul obtain measur local order gui use select fem add analysi menu gui add fluctuat em analysi figur imagesfemfemselectpng use control left posit ringshap selector region youd like analyz click appli figur imagesfemfempng pick mode averag roi come handi inspect individu frame region interest figur imagesfemfempickpng sampl data metal glass courtesi shuai wei shuaiweiphysikrwthaachend rwth aachen alexand kubal universität de saarland hongchu du hdufzjuelichd erc forschungszentrum jülich script interfac libertem support classlibertemudffemfemudf methlibertemudffemrun_fem method _radialfouri app radial fourier seri toctre radialfouri fluctuat em doesnt evalu spatial distribut intens work enough intens accumul pixel local order lead larger intens variat random nois ie statist variat shot nois averag variat introduc sampl domin detector pixel hit one electron none standard deviat detector posit region interest even pixel receiv electron spatial close region receiv intens mean fluctuat em doesnt produc contrast amorph crystallin region detector high resolut andor low intens scatter region interest radial fourier seri analysi solv problem calcul fourier seri ringshap region instead evalu standard deviat refer cite describ previou applic method descriptor featur extract imag angl pixel rel userdefin center point diffract pattern use phase angl fourier seri sinc diffract pattern usual show characterist httpxraywebchemouedunotessymmetryhtml_ symmetri httpsenwikipediaorgwikifriedels_law_ strength fourier coeffici order highlight region crystallin order even lowest intens relationship varianc real space power spectral densiti frequenc space httpsenwikipediaorgwikiparsevals_theorem_ sum coeffici larger zero equival standard deviat ie fluctuat em sum coeffici lower order correspond fluctuat em smoothen dataset phase angl select coeffici exampl first second order use inplan orient map similar citepanova pleas note method new experiment still need valid interest help us applic valid would highli appreci gui use select radial fourier add analysi menu gui add radial fourier seri analysi figur imagesradialfourierselectpng use control left posit ringshap selector region youd like analyz click appli figur imagesradialfourierradialfourierpng righthand side imag select channel display avail predomin order absolut valu phase angl cubehelix vector field visual complex number order larger zero plot rang normal zeroord compon scan posit make compon compar elimin influenc absolut intens variat visual display select entri arrow key keyboard case menu outsid browser window help userfriendli gui implement would highli appreci figur imagesradialfourierradialfourierchannelpng pick mode come handi inspect individu frame figur imagesradialfourierradialfourierpickpng sampl data metal glass courtesi shuai wei shuaiweiphysikrwthaachend rwth aachen alexand kubal universität de saarland hongchu du hdufzjuelichd erc forschungszentrum jülich script interfac script interfac methlibertemapicontextcreate_radial_fourier_analysi classlibertemanalysisradialfourierradialfourieranalysi allow calcul one bin time influenc number order calcul reli spars matrix backend codeapplymasksudf allow calcul mani order mani bin accept effici finegrain analysi mani order calcul function radiu allow number addit process analysi step follow link jupyt notebook radialfourieripynb_ rubric refer see reffem api refradi fourier api api refer _strain map strain map versionchang blobfind spun separ packag document avail httpslibertemgithubiolibertemblobfind set develop environ want develop libertem run latest git version instal work bit differ oppos instal pypi first step pleas follow instruct creat python virtual environ refinstal section instead instal pypi follow instruct prerequisit addit python instal system depend need contribut pandoc httpspandocorginstallinghtml_ graphviz httpsgraphvizorgdownload_ need build test document nodej need rebuild libertem gui linux recommend instal via packag manag httpsnodejsorgendownloadpackagemanager_ window instal httpsnodejsorgendownload_ fine choos current lt version _instal git clone instal git clone note distinguish instal releas version instal latest develop version refinstal pypi refinstal git clone use pip fundament differ thing codepython pip instal libertem download latest releas pypi chang directori git clone run codepython pip instal e instal local directori edit mode edit mode mean sourc directori link current python environ rather copi mean chang sourc directori immedi activ python environ instal git clone edit mode correct setup develop work use refth latest featur develop branch continu instal pypi easier prefer product use new user want follow latest develop instal libertem git clone prerequisit need git instal system linux suggest use git packag come packag manag window use one mani avail client like git window httpsgitforwindowsorg_ github desktop httpsdesktopgithubcom_ tortoisegit httpstortoisegitorg_ git integr develop environ codeblock shell git clone httpsgithubcomlibertemlibertem wish contribut libertem creat fork libertem repositori follow step log github httpsgithubcom_ account go libertem github httpsgithubcomlibertemlibertem_ home page click fork button figur imagesforking_buttonpng clone fork libertem github comput codeblock shell git clone httpsgithubcomyourusernamelibertem inform fork repositori httpsdocsgithubcomengetstartedquickstartforkarepo_ beginnerfriendli introduct git github consid go follow resourc free cours httpswwwudacitycomcourseversioncontrolwithgitud_ cover essenti use git practic pull request httpsgithubcomfirstcontributionsfirstcontributions_ safe sandbox environ sampl workflow httpsdocsastropyorgenlatestdevelopmentworkflowdevelopment_workflowhtml_ contribut code activ python environ conda virtualenv chang newli creat directori clone libertem repositori start libertem instal pleas note dot end indic current directori codeblock shell libertem python pip instal e download depend instal libertem environ pleas continu read refusag document instal extra depend work like instal libertem pypi codeblock shell libertem python pip instal e torchhdbscancupi updat instal git clone easili updat current statu open command line base directori libertem clone updat sourc code command codeblock shell git pull instal codepython pip instal e instal libertem edit mode httpspippypaioenstableclipip_installeditableinstalls_ mean chang pull git activ immedi requir instal thirdparti packag chang rerun codepython pip instal e order instal miss packag set tox window use tox run test window anaconda creat name alias python interpret run literaltox tox find python interpret expect assum run libertem python place follow file literalpythonbat libertem conda environ base folder typic literallocalappdatacondacondaenvslibertem literalpythonex environ locat codeblock bat echo rem echo vital file doesnt clutter output rem execut pythonex command line pythonex execut test python creat new environ python codeblock shell conda creat n libertem python creat literalpythonbat normal libertem environ alongsid literalpythonbat make execut python interpret new libertem environ codeblock bat echo rem echo vital file doesnt clutter output rem execut pythonex differ environ rem command line localappdatacondacondaenvslibertempythonex see also httpstoxreadthedocsioenlatestdevelopershtmlmultiplepythonversionsonwindow _executor api libertem executor access data process done executor implement classlibertemexecutorbasejobexecutor interfac run function task allow modifi process done includ run cluster singl thread without chang part libertem see refexecutor overview user perspect versionad executor api intern sinc choic paramet executor import integr dask framework document name creation method executor reason stabl rest api subject chang without notic _dask executor daskdistribut automodul libertemexecutordask member automodul libertemexecutorintegr member inlin automodul libertemexecutorinlin member concurr automodul libertemexecutorconcurr member daskdelay automodul libertemexecutordelay member io work libertem mani algorithm benefit reftil slice signal dimens process sever frame row mani case algorithm specif minimum maximum size signal dimens navig dimens total size oper effici smaller size might increas overhead larger size might reduc cach effici time file format might oper well within specif size shape limit refki raw format prime exampl data save tile form process effici specif tile size shape follow nativ layout furthermor format requir decod correct cpu reffrm tile fit l cach speed subsequ process step requir io method align effici block size taken account well libertem io backend negoti tile scheme udf dataset fulfil requir udf dataset side far possibl howev alway guarante suppli data fall within request limit versionad guid written version highlevel overview per codedataset codeudfrunn negoti codetilingschem use codenegoti class data split partit read independ usual split navig axi codetilingschem pass codepartitionget_til yield codedatatil match given codetilingschem note tile must match slice signal dimens tile depth may differ scheme exampl partit depth isnt evenli divis tile depth technic reason codedataset cant return given depth hood codepartit instanti codeiobackend refer codedecod gener read rang pass codeiobackend deleg codeget_til codeiobackend io process influenc pass subclass codefileset codepartit overrid codefilesetget_read_rang implement codedecod even complet overrid codepartitionget_til function current three io backend implement codemmapbackend codebufferedbackend codedirectbackend use differ storag media purpos codemmapbackendget_til two mode oper either return refer tile straight file without copi decod use read rang copiesdecod tile smaller unit read tile straight read rang use instead slice inform tile use also mean mode work simpl format read without coderoi codedtyp convers decod format codesync_offset specifi use correct synchron error insert blank frame ignor one frame begin end data set read rang codefilesetget_read_rang read paramet codetilingschem coderoi etc translat one byte rang offset length tile imagin translat pixelel posit byte offset rang correspond read oper singl file multipl read rang per tile rang singl tile correspond read multipl file import read data set mani small file still gener deep tile effici process builtin common paramet codefileset like codeframe_header_byt codeframe_footer_byt use easili implement format read need skip byte frame headerfoot need influenc data read overrid codefilesetget_read_rang return read rang use codemake_get_read_rang function reus much tile logic implement use codemake_get_read_rang either overrid codepx_to_byt part coderead_ranges_tile_block whole tile block done pass njite function codemake_get_read_rang codemake_get_read_rang call modulelevel enabl cach numba compil read rang gener array follow shape codenumber_of_til rr_per_til rr_num_entri coderr_per_til maximum number read rang per tile tile smaller exampl end partit coderr_num_entri least contain least valu codefile_idx start stop mean read codestop start byte begin offset codestart file codefile_idx correspond codefileset overrid codedataset free add addit field end exampl decod function need addit inform exampl would gener custom read rang look implement mib ki frm may direct map numpi codedtyp pixel may need reorder decod note implement classlibertemiodatasetbasedataset read file header methlibertemiodatasetbasedatasetiniti make sure actual io function dispatch via codejobexecutor pass codeiniti see also refo mismatch regard platformdepend code implement methlibertemiodatasetbasedatasetcheck_valid run worker node implement methlibertemiodatasetbasedatasetget_msg_convert classlibertemwebmessagesmessageconvert class return respons pars paramet pass web api convert python represent pass classlibertemiodatasetbasedataset constructor implement methlibertemiodatasetbasedatasetget_cache_key cach key must differ codedataset return differ data implement methlibertemiodatasetbasedatasetget_partit may want use helper function methlibertemiodatasetbasedatasetget_slic gener slice specifi number partit methlibertemiodatasetbasedatasetget_partit yield either classlibertemiodatasetbasebasepartit instanc instanc subclass see true classlibertemiodatasetbasefileset pass partit possibl implement subclass implement methlibertemiodatasetbasedatasetget_decod return instanc classlibertemiodatasetbasedecod need data save data type directli understood numpi numba see detail implement methlibertemiodatasetbasedatasetget_base_shap need data format impos constraint data read effici manner exampl data save block tileshap negoti read multipl base shape dimens implement methlibertemiodatasetbasedatasetadjust_tileshap need need veto gener tileshap exampl dataset constraint cant express base shape subclass classlibertemiodatasetbasebasepartit overrid methlibertemiodatasetbasebasepartitionget_til need use complet custom io logic implement classlibertemiodatasetbasedecod may need raw data directli support numpi numba mostli decod return differ codedecod function methlibertemiodatasetbasedecoderget_decod also return differ decod function depend concret data set current read exampl may need differ data represent gener differ detector mode also instruct codeiobackend clear read buffer call codedecod return codetru methlibertemiodatasetbasedecoderdo_clear need differ read rang contribut part output buffer codedecod function accumul buffer instead sliceassign codedecod function call read rang gener codeget_read_rang method describ _advanc udf userdefin function advanc topic testsetup import numpi np libertem import api libertemexecutorinlin import inlinejobexecutor libertemvizbas import dummydplot ctx apicontextexecutorinlinejobexecutor plot_classdummydplot data nprandomrandom astypenpfloat dataset ctxloadmemori datadata sig_dim roi nprandomchoicetru fals datasetshapenav udf interfac offer wide rang featur help implement advanc function optim perform udf featur option order keep udf dont need simpl see refuserdefin function introduct basic topic _tile tile process mani oper significantli optim work stack frame often perform loop nest optim httpsenwikipediaorgwikiloop_nest_optimization_ improv local refer httpsenwikipediaorgwikilocality_of_reference_ exampl use numba httpsnumbapydataorg_ use optim numpi function exampl appli gain map subtract dark frame order magnitud faster properli optim compar naiv numpi implement optim possibl access data one frame larg frame anoth problem aris stack frame would larg effici handl would longer fit even l cach largest cach cpu case support tile read process strategi tile mean slice frame disjoint rectangular region tile data singl rectangular region multipl frame exampl case ki data frame shape code read tile strategi singl tile contain data subsequ frame rectangl shape code natur block size ki data mean tile shape code process frame data set mean read individu tile load tile size float data still fit comfort usual l cpu cach mb per core thu enabl effici process comparison whole code frame mb larg access repeatedli mean load data slower main memori note may notic talk block size mb effici l cach mani cpu larger l cach l cach share core libertem tri use multipl core effect avail l cach divid number core _slice exampl realworld exampl classlibertem_blobfinderudfcorrelationsparsecorrelationudf use methlibertemudfbaseudftilemixinprocess_til implement custom version classlibertemudfmasksapplymasksudf work logscal data mask stack store classlibertemcommoncontainermaskcontain part task data note codeselfmetaslic properti type classlibertemcommonsliceslic use extract region mask stack match tile use facil classlibertemcommoncontainermaskcontain reshap transpos log scale tile data right memori layout mask stack appli data dot product result ad buffer order merg result tile addit correct merg function dot product oper would requir differ merg function exampl methnumpymax global maximum calcul testsetup libertem_blobfinderbasecorrel import log_scal testcod def process_tileself tile tile_slic selfmetaslic c selftask_datamask_contain tile_t npzero npprodtileshap tileshap dtypetiledtyp log_scaletilereshapetileshap outtile_t sl cgetkeytile_slic transposefals selfresultscorr sldottile_tt _udf post process partit process algorithm benefit process entir partit exampl requir sever pass data case reftil processingtil faster use l cach effici reason perpartit process use clear indic implement methlibertemudfbaseudfpartitionmixinprocess_partit activ perpartit process udf preced udf interfac look method order methlibertemudfbaseudftilemixinprocess_til methlibertemudfbaseudfframemixinprocess_fram methlibertemudfbaseudfpartitionmixinprocess_partit first order execut futur composit udf may allow use differ method depend circumst methlibertemudfbaseudftilemixinprocess_til gener method allow byfram bypartit process well postprocess partit result postprocess allow perform addit process step data partit complet process methlibertemudfbaseudfframemixinprocess_fram methlibertemudfbaseudftilemixinprocess_til methlibertemudfbaseudfpartitionmixinprocess_partit postprocess particularli relev tile process sinc allow combin perform benefit tile process first reduct step subsequ step requir reduc data complet frame even complet partit realworld exampl classlibertem_blobfinderudfcorrelationsparsecorrelationudf evalu correl map gener dot product previou process step place result addit result buffer testsetup libertem_blobfinderbasecorrel import evaluate_correl testcod def postprocessself step selfparamsstep corrmap selfresultscorrreshap frame lenselfparamspeak peak step step step x step peak selfparamspeak center refin peak_valu peak_elev selfoutput_buff f rangecorrmapsshap evaluate_correl corrscorrmapsf peakspeak crop_sizeselfparamsstep out_centerscentersf out_refinedsrefinedsf out_heightspeak_valuesf out_elevationspeak_elevationsf methlibertemudfbaseudfpostprocessmixinpostprocess method call partit worker process result differ partit merg _udf final post process postprocess merg want implement postprocess step run main node merg result buffer overrid methlibertemudfbaseudfget_result testsetup libertemudf import udf testcod class averageudfudf like sumudf also comput averag def get_result_buffersself return sum selfbufferkindsig dtypenpfloat num_fram selfbufferkindsingl dtypenpuint averag selfbufferkindsig dtypenpfloat useresult_onli def process_frameself frame selfresultssum frame selfresultsnum_fram def mergeself dest src destsum srcsum destnum_fram srcnum_fram def get_resultsself return note sum omit return unchang averag selfresultssum selfresultsnum_fram ctxrun_udfdatasetdataset udfaverageudf note methudfget_result_buff return placehold entri codeaverag result use codeuseresult_onli fill codeget_result dont need repeat buffer return unchang want omit buffer result complet declar privat codeselfbuff usepriv codeget_result_buff methudfget_result return result dictionari numpi array key match return methudfget_result_buff return methcontextrun_udf result wrap codebufferwrapp instanc done primarili get conveni access version result suitabl visual even coderoi use still allow access raw result use attrbufferwrapperraw_data attribut detail rule buffer declar codeget_result_buff codeget_result buffer declar codeget_result_buff buffer comput codeget_result mark via codeuseresult_onli isnt alloc worker buffer use intermediari result mark via codeusepriv includ buffer codeget_result mean either pass unchang drop codeusepriv error omit codeuseresult_onli buffer codeget_result error includ codeusepriv buffer codeget_result result return codecontextrun_udf codebufferwrapp instanc default codeget_result implement codeusepriv buffer drop other pass unchang versionad methudfget_result codeus argument methudfbuff ad preprocess preprocess allow initi result buffer process merg particularli use set codedtypeobject buffer exampl rag array initi buffer oper neutral element methlibertemudfbaseudfpreprocessmixinpreprocess execut buffer alloc data process worker node execut view set whole partit mask current roi central node execut view set whole dataset mask roi versionad versionchang methlibertemudfbaseudfpreprocessmixinpreprocess execut main node view aux data set correctli main node previous execut worker node aux data paramet instanc classlibertemcommonbuffersbufferwrapp creat use methlibertemudfbaseudfaux_data class method udf interfac interpret auxiliari data set view tileframepartit accordingli access paramet return view auxiliari data match data portion current process way possibl pass paramet individu frame mask signal dimens note classlibertemcommonbuffersbufferwrapp instanc aux data alway creat use methlibertemudfbaseudfaux_data class method directli instanti classlibertemcommonbuffersbufferwrapp sinc methlibertemudfbaseudfaux_data ensur set correctli mask signal dimens use dot product combin pertil process classlibertemcommoncontainermaskcontain allow use advanc slice transform method target prepar mask stack optim dot product perform task data udf gener taskspecif intermedi data worker node defin methlibertemudfbaseudfget_task_data method result avail instanc classlibertemudfbaseudfdata codeselftask_data depend circumst effici make data avail paramet sinc avoid pickl network transport unpickl nontrivi exampl classlibertem_blobfinderudfcorrelationsparsecorrelationudf creat classlibertemcommoncontainermaskcontain base paramet codeselfparam classlibertemcommoncontainermaskcontain avail codeselftask_datamask_contain within process function testsetup libertemcommoncontain import maskcontain import libertemmask mask testcod def get_task_dataself match_pattern selfparamsmatch_pattern crop_siz match_patternget_crop_s size crop_siz crop_siz templat match_patternget_masksig_shapes step selfparamsstep peak_offseti peak_offsetx npmgridstepsstep stepsstep offseti selfparamspeak npnewaxi npnewaxi peak_offseti crop_siz offsetx selfparamspeak npnewaxi npnewaxi peak_offsetx crop_siz offseti offsetyflatten offsetx offsetxflatten stack functoolsparti maskssparse_template_multi_stack mask_indexrangelenoffseti offsetxoffsetx offsetyoffseti templatetempl imagesizexselfmetadataset_shapesig imagesizeyselfmetadataset_shapesig csc matric combin transpos data fastest contain maskcontainermask_factoriesstack dtypenpfloat use_sparsescipysparsecsc kwarg mask_contain contain crop_siz crop_siz return kwarg testcleanup libertem_blobfinderudfcorrel import sparsecorrelationudf libertem_blobfindercommonpattern import radialgradi class testudfsparsecorrelationudf pass overrid method function defin testudfprocess_til process_til testudfpostprocess postprocess testudfget_task_data get_task_data u testudf peaksnparray match_patternradialgradi step ctxrun_udfdatasetdataset udfu meta inform advanc process routin may requir context inform process data set roi current data portion process inform avail properti attrlibertemudfbaseudfmeta attribut type classlibertemudfbaseudfmeta input data shape type common applic includ alloc buffer codedtyp shape match dataset partit via attrlibertemudfbaseudfmetadataset_dtyp attrlibertemudfbaseudfmetainput_dtyp attrlibertemudfbaseudfmetadataset_shap attrlibertemudfbaseudfmetapartition_shap devic class versionad current use comput devic class access attrlibertemudfbaseudfmetadevice_class default cpu cuda udf make use refudf cuda support roi current slice advanc applic roi current process data portion avail attrlibertemudfbaseudfmetaroi attrlibertemudfbaseudfmetaslic allow replac builtin mask behavior classlibertemcommonbuffersbufferwrapp result buffer aux data custom implement refmask contain tile process exampleslic exampl make use attribut employ classlibertemcommoncontainermaskcontain instead codeshapesig buffer order optim dot product perform support spars mask slice refer frame dataset mask current roi flatten navig dimens exampl illustr behavior implement custom version refsimpl sum sig exampl sumsig alloc custom result buffer match navig dimens appear process testcod import numpi np libertemudf import udf class pixelsumudfudf def get_result_buffersself selfmetaroi none navsiz npcount_nonzeroselfmetaroi els navsiz npprodselfmetadataset_shapenav return pixelsum_nav_raw selfbuff kindsingl dtypeselfmetadataset_dtyp extra_shapenavs def mergeself dest src destpixelsum_nav_raw srcpixelsum_nav_raw def process_frameself frame np_slice selfmetaslicegetnav_onlytru selfresultspixelsum_nav_rawnp_slic npsumfram testcleanup pixelsum pixelsumudf re ctxrun_udfdatasetdataset udfpixelsum roiroi assert npallcloserespixelsum_nav_rawdata datasetdataroisumaxi coordin versionad coordin current frame tile partit within true dataset navig dimens oppos current slice given flatten nav dimens appli roi avail attrlibertemudfbaseudfmetacoordin follow udf simpli collect coordin info demonstr purpos realworld exampl use coordin udf implement singl side band ptychographi httpsgithubcomptychographyptychographyblobmastersrcptychographyreconstructionssbudfpy_ testcod import numpi np libertemudf import udf class coordudfudf def get_result_buffersself declar buffer fit coordin ie one int per nav axi nav posit nav_dim lenselfmetadataset_shapenav return coord selfbuff kindnav dtypeint extra_shapenav_dim def process_tileself tile simpli copi coordin result buffer selfresultscoord selfmetacoordin my_roi npzerosdatasetshapenav dtypebool my_roi true my_roi true re ctxrun_udf datasetdataset udfcoordudf roimy_roi assert npall rescoordsraw_data nparray _udf dtype prefer input dtype versionad udf overrid methlibertemudfbaseudfget_preferred_input_dtyp indic lowest common denomin compat dtype actual input dtype determin combin indic prefer dtype input dataset nativ dtype use funcnumpyresult_typ default prefer dtype attrnumpyfloat return attrudfuse_native_dtyp current ident codenumpybool switch dataset nativ dtype sinc codenumpybool behav neutral element funcnumpyresult_typ udf requir specif dtype rather prefer overrid method addit check actual input type throw error use incorrectli andor implement meaning convers process routin sinc indic prefer dtype doesnt enforc way unsaf convers perform explicitli udf rather indirectli backend _udf cuda cupi support versionad libertem use cuda devic cupi httpscupydev_ sinc cupi larg replic numpi array interfac udf use numpi main process like port use cpu cuda devic parallel adjust often necessari account minor differ numpi cupi cupi benefici computeheavi task good cuda math librari support larg fourier transform matrix product order activ cupi process udf overwrit methlibertemudfbaseudfget_backend method default return codenumpi indic numpi support return codenumpi cupi codecupi udf activ run cuda cpu worker exclus cuda worker use codecuda instead codecupi schedul cuda worker without use cupi librari use run code use cuda differ way exampl integr c cuda code allow skip instal cupi situat attrlibertemudfbaseudfxp properti point codenumpi codecupi modul depend backend current use use codeselfxp instead usual codenp numpi one write udf use code cuda cpu process result buffer declar devic array set codeselfbuff wheredevic methlibertemudfbaseudfget_result_buff allow keep data devic partit complet process result export leader node input argument codeprocess_ function alreadi provid cupi array instead numpi array cupi use udf use one gpu time codecupi use correct devic use set within cupi backend modifi udf codecuda use respons user set devic id valu return methlibertemcommonbackendget_use_cuda environ variabl codecuda_visible_devic set cuda librari load control devic visibl methlibertemapicontextrun_udf method allow set codebackend attribut codenumpi codecupi codecuda restrict execut cpuonli cudaonli hybrid cluster mostli use test _thread thread default libertem use multiprocess one process per cpu core offlin process scenario udf use singl thread avoid oversubscript howev run singleprocess singlethread executor like classlibertemexecutorinlineinlinejobexecutor multipl thread use particularli relev optim perform live process liberteml httpslibertemgithubiolibertemlive_ sinc may use singl process thread count mani common numer librari set automat see attrlibertemudfbaseudfmetathreads_per_work case thread count worker set user accord codeselfmetathreads_per_work multithread executor introduc releas see refexecutor run udf function parallel thread within process introduc issu thread safeti exampl share object chang concurr multipl thread libertem intern core udf test work executor user code may break unexpectedli pyfftw interfac cach known issu categori httpsgithubcomlibertemlibertemblobfinderissues_ reason thread executor considererd experiment time furthermor set reset global variabl exampl thread count extern librari protect reentrant lock mechan pyfftw cach disabl thread executor known bug neg impact perform perform optim pyfftw user could use builder interfac pyfftw httpspyfftwreadthedocsioenlatestsourcepyfftwbuildersbuildershtml_ use nativ fftw object interfac httpspyfftwreadthedocsioenlatestsourcepyfftwpyfftwhtmlpyfftwfftw_ run multipl libertem classlibertemapicontext object resp executor parallel thread test lead unexpect interact _auto udf auto udf classlibertemudfautoudf class methlibertemapicontextmap method allow run simpl function accept frame paramet autogener codekindnav result buffer dataset adhoc without defin udf class advanc process custom merg function postprocess perform optim tile process defin udf class requir altern auto udf use methlibertemcontribdaskadaptermake_dask_array method creat daskarray httpsdocsdaskorgenlatestarrayhtml_ classlibertemiodatasetbasedataset perform calcul see refintegr dask arraysdaskarray detail classlibertemudfautoudf class determin output shape type call function mockup frame type shape real detector frame convert return valu numpi array codeextra_shap codedtyp paramet result buffer deriv automat numpi array addit constant paramet pass function via methfunctoolsparti exampl return valu much smaller input size work effici exampl calcul sum last signal axi testcod import functool result ctxmap datasetdataset ffunctoolspartialnpsum axi altern libertemudf import autoudf udf autoudfffunctoolspartialnpsum axi result ctxrun_udfdatasetdataset udfudf _udf profil testsetup libertemapi import context profil udf bring udf product may necessari look perform effici function may lowhang fruit optim away realli becom visibl profil code look code guess part expens mislead caus spend time optim wrong part code alway measur profil mean instrument execut program find part code use much given resourc exampl cpu time memori prerequisit codeinlinejobexecutor default udf run multiprocess multithread environ make profil challeng sinc usual profil tool captur inform main process perform final reduct process work order use default python profil mechan part udf execut singl thread libertem provid call classlibertemexecutorinlineinlinejobexecutor purpos improv execut time singlethread executor almost alway improv multiprocess execut time nevertheless confirm impact chang product environ use classlibertemexecutorinlineinlinejobexecutor pass classlibertemapicontext construct testcod libertemexecutorinlin import inlinejobexecutor ctx contextexecutorinlinejobexecutor continu usual load data execut udf etc use progress bar progress bar graphic tool show far process progress use assess partit data sinc progress indic per partit basi follow way codeblock text re ctxrun_udfudffit_udf datasetd roiroi progresstru sit run use partit took per partit line profil use line_profil profil come differ form show much time function whole program took other give linebylin overview function interest like line_profil udf suffici perform analysi first need instal line_profil packag via pip conda environ virtualenv activ codeblock shell libertem python pip instal line_profil easiest way get start use ipythonjupyt integr line_profil put codeload_ext line_profil somewher notebook use codelprun magic command run udf profil codeblock text lprun f yourudfget_task_data f yourudfprocess_fram ctxrun_udfdatasetdataset yourudf note repeat codef argument list method udf interest even python function directli indirectli use complic code codeyourudfmerg would includ codef yourudfmerg codelprun call output could look like codeblock text timer unit e total time file homeclausensourcelibertemsrclibertemudfholographypi function get_task_data line line hit time per hit time line content def get_task_dataself updat task_data return kwarg dict dictionari follow key kwargsapertur arraylik side band filter apertur mask kwargsslic slice slice slice fft hologram out_shap selfparamsout_shap sy sx selfmetapartition_shapesig oy ox out_shap f_sampl oy ox sb_size selfparamssb_s npmeanf_sampl sb_smooth sb_size selfparamssb_smooth npmeanf_sampl f_freq freq_arrayout_shap apertur aperture_functionf_freq sb_size sb_smooth y_min intsi oy y_max intsi oy x_min intsx ox x_max intsx oy slice_fft slicey_min y_max slicex_min x_max kwarg apertur apertur slice slice_fft return kwarg total time file homeclausensourcelibertemsrclibertemudfholographypi function process_fram line line hit time per hit time line content def process_frameself frame reconstruct hologram output result wave paramet frame singl frame hologram data selfparamsprecis frame frameastypenpfloat size_x size_i selfparamsout_shap frame_s selfmetapartition_shapesig sb_po selfparamssb_posit apertur selftask_dataapertur slice_fft selftask_dataslic fft_frame fftframe npprodframe_s fft_frame nprollfft_fram sb_po axi fft_frame fftshiftfftshiftfft_frameslice_fft fft_frame fft_frame apertur wav ifftfft_fram npprodframe_s selfresultswav wav thing note codeget_task_data take small amount time compar codeprocess_fram make sens concentr optim codeget_task_data case codeprocess_fram codefft call take time direct effort improv exampl call codefftshift would give us max speedup percent manag dramat improv execut time line_profil doesnt give inform individu express sometim put express line see individu contribut execut time see codefft codenpprod call hottest line profil success improv profil time alway rerun profil disabl without classlibertemexecutorinlineinlinejobexecutor measur total time exampl use codetim make sure optim actual work product environ usual benchmark rule appli exampl tri run profil otherwis idl system otherwis get noisi result singlethread execut quit slow compar use libertem product slow tast run udf subset data use refregion interest udf roi seealso python data scienc handbook httpsjakevdpgithubiopythondatasciencehandbooktimingandprofilinghtmllinebylineprofilingwithlprun_ python data scienc handbook section profil time includ line_profil offici document line_profil httpsgithubcomrkernline_profiler_ inform use line_profil includ use differ context refprofil longrun test profil test inform profil execut time test case refdebug udf use codeinlinejobexecutor debug problem udf testsetup import numpi np libertem import api libertemexecutorinlin import inlinejobexecutor libertemudf import udf realudf overrid udf way use without implement method class udfrealudf def get_result_buffersself return def process_frameself frame pass class yourudfrealudf def get_result_buffersself return buf selfbufferkindnav def process_frameself frame selfresultsbuf ctx apicontextexecutorinlinejobexecutor data nprandomrandom astypenpfloat dataset ctxloadmemori datadata sig_dim roi nprandomchoicetru fals datasetshapenav udf yourudf _implement udf implement udf workflow implement udf start subclass classlibertemudfbaseudf simplest case need implement methlibertemudfbaseudfget_result_buff method methlibertemudfbaseudfframemixinprocess_fram two common pattern reduct reduc navig axe common accumul frame keep shape singl frame reduc signal axe keep navig axe declar buffer udf implement one reduct combin handl index libertem need know structur reduct build structur methlibertemudfbaseudfget_result_buff method declar one buffer buffer codekind declar correspond two reduct pattern codekindsig reduc navig axe keep signal axe codekindnav reduc signal axe keep navig axe third codekindsingl allow declar buffer custom shape dont correspond directli data set shape also possibl append addit axe buffer shape use codeextra_shap paramet methlibertemudfbaseudfget_result_buff return codedict map buffer name buffer declar creat buffer declar call methlibertemudfbaseudfbuff method buffer name later use access buffer via codeselfresultsbuffernam return view numpi array work name valid python identifi exampl buffer declar testcod getresultbuff def get_result_buffersself suppos dataset shape first two dimens repres navig dimens last two dimens repres signal dimens buffer shape navig dimens dataset plu two extra dimens shape full shape exampl mean buffer store array shape frame dataset nav_buff selfbuff kindnav extra_shap dtypefloat shape signal dimens dataset plu extra dimens shape consequ full shape exampl mean store two float valu pixel signal dimens sig_buff selfbuff kindsig extra_shap dtypefloat buffer shape shape unrel dataset shape single_buff selfbuff kindsingl extra_shap dtypefloat return buffer testcleanup getresultbuff class testudfudf def mergeself dest src pass testudfget_result_buff get_result_buff u testudf ctxrun_udfdatasetdataset udfu see realworld exampl numpi dtype support buffer includ codeobject dtype arbitrari python variabl item pickleabl codecloudpickl note buffer design pass lightweight intermedi result thu import size buffer remain small larg buffer lead signific declin perform implement process function actual core process implement methlibertemudfudfframemixinprocess_fram method signatur look like testcod process class exampleudfudf def process_frameself frame testcleanup process u exampleudf ctxrun_udfdatasetdataset udfu gener idea get singl frame data set process write result one previous declar buffer via codeselfresultsbuffernam access codekindnav buffer way automat get view buffer correspond current frame process case codekindsig codekindsingl get whole buffer intuit codekindsig codekindsingl like implement oper like codebuf fbuf frame comput new result base singl new frame result previou frame overwrit result new valu codekindnav comput independ result frame written differ posit result buffer independ frame dont need merg previou valu result simpli written correct index result buffer via aforement view easi exampl let look function simpli sum frame singl valu codekindnav reduct sum valu signal dimens _sumsig testcod sumsig import numpi np libertemudf import udf class sumoversigudf def get_result_buffersself describ buffer need store result kindnav mean want valu coordin navig dimens name buffer pixelsum return pixelsum selfbuff kindnav dtypefloat def process_frameself frame sum pixel frame store result pixelsum buffer selfresultspixelsum view result buffer defin correspond entri current frame work dont take care find correct index frame process selfresultspixelsum npsumfram re ctxrun_udf udfsumoversig datasetdataset access name buffer numpi array respixelsumdata data set oper roughli equival codenpsumarr axi merg partial result refdescrib udf work data multipl partit process parallel also mean need way merg partial result final result exampl didnt need anyth codekindnav buffer merg mean assign result one partit right slice final result done default implement methlibertemudfbaseudfmerg case codekindsig buffer correspond reduct assign would overwrit result previou partit one current partit correct oper let look merg method testcod merg class exampleudfudf def mergeself dest src pass testcleanup merg u exampleudf ctxrun_udfdatasetdataset udfu codedest result previou merg call codesrc result singl new partit codemerg implement read codedest codesrc write result back codedest exampl demonstr codekindsig buffer codemerg function testcod realmerg import numpi np libertemudf import udf class maxudfudf def get_result_buffersself describ buffer need store result kindsig mean want valu coordin signal dimens ie valu pixel diffract pattern name buffer maxbuf return maxbuf selfbuff kindsig dtypeselfmetainput_dtyp def preprocessself initi buffer neutral element maximum selfresultsmaxbuf npinf def process_frameself frame function frame buffer maxbuf avail declar function call frame diffract pattern data set maxbuf partial result partial result later merg see case determin maximum current maximum current frame pixel diffract pattern note reli particular order frame function call function pure side effect beyond modifi content result buffer task data depend input paramet includ udf object codeself selfresultsmaxbuf npmaximumfram selfresultsmaxbuf def mergeself dest src merg two partial result src dest destmaxbuf npmaximumdestmaxbuf srcmaxbuf re ctxrun_udf udfmaxudf datasetdataset access name buffer numpi array resmaxbufdata complet exampl also look function implement submodul codelibertemudf refpackag pass paramet default keyword argument pass constructor udf avail properti codeselfparam allow clean handl pass paramet distribut execut scenario see testsetup param def correlate_peaksfram peak pass peak none testcod param class myudfudf def process_frameself frame result correlate_peaksfram selfparamspeak udf myudfpeakspeak testcleanup param def get_result_buff return udfget_result_buff get_result_buff ctxrun_udfdatasetdataset udfudf declar constructor order document paramet udf avoid typo paramet name good practic defin constructor udf reus share sinc function udf execut main node worker process udf pickl sent network process avoid transfer unwant state unnecessari unpickl member variabl clean copi udf creat transfer clean copi creat reinstanti udf class paramet pass constructor udf base class mean userdefin constructor fulfil two condit pass paramet superclass constructor accept exactli paramet pass superclass constructor whenev clean copi creat behav way origin call mean modif paramet assign valu default paramet lead complic avoid possibl testcod constructor class myparamudfudf udf demonstr defin constructor udf paramet my_param paramet pass udf demonstr purpos mirror demo result buffer def __init__self my_paramnon assign default paramet work provid udf accept subsequ call exactli pass superclass my_param none my_param ein zwei drei dont selfmy_param my_param dont super__init__ pass superclass constructor instead make sure avail via selfparam clean copi dont super__init__other_parammy_param would trigger typeerror myparamudfother_parammy_param call clean copi pass paramet superclass exactli class would accept super__init__my_parammy_param rest udf mirror paramet back result buffer demonstr def get_result_buffersself declar result buffer paramet return demo selfbuff kindsingl dtypeobject def process_frameself frame assign paramet result buffer selfresultsdemo selfparamsmy_param def mergeself dest src pass result buffer destdemo srcdemo re ctxrun_udfdatasetdataset udfmyparamudf assert resdemodata ein zwei drei re ctxrun_udfdatasetdataset udfmyparamudfmy_param assert resdemodata initi result buffer allow udf initi result buffer correct valu method methlibertemudfbaseudfpreprocessmixinpreprocess implement run per partit assign codekindnav result buffer assign result whole partit see codemaxudf exampl _progress bar run udf shown exampl methlibertemapicontextrun_udf method classlibertemapicontext use run udf usual need pass instanc udf dataset want run testcod run udf yourudfparamvalu re ctxrun_udfudfudf datasetdataset also enabl progress bar testcod run udf yourudfparamvalu re ctxrun_udfudfudf datasetdataset progresstru methlibertemapicontextrun_udf return codedict buffer name key defin methlibertemudfudfget_result_buff classlibertemcommonbuffersbufferwrapp instanc valu use place would use numpi array exampl argument numpi function explicitli convert numpi array access codedata attribut call methnumpyarray testcod run import numpi np re ctxrun_udfudfudf datasetdataset convert numpi array assum declar buffer name buf arr resbufdata arr nparrayresbuf directli treat array npsumresbuf want run multipl independ udf singl codedataset pass list udf methlibertemapicontextrun_udf faster make two pass whole codedataset testcod run libertemudfsum import sumudf result return tupl unpack re res_sum re res_sum ctxrun_udfudfudf sumudf datasetdataset _udf roi region interest addit pass coderoi region interest paramet run udf select subset data coderoi numpi array contain bool mask shape navig axe dataset exampl process random subset dstem dataset testcod run import numpi np dataset shape two signal two navig dimens datasetshapenav translat roi nprandomchoiceafals true sizedatasetshapenav ctxrun_udfudfudf datasetdataset roiroi note result array contain valu select indic indic set codenan dtype doesnt support nan defin valu best limit process coderoi also access flat array fill codenan use coderaw_data testcod run re ctxrun_udfudfudf datasetdataset roiroi resbufraw_data _plot live plot versionad libertem display live plot udf result simpl case done set codeplotstru methlibertemapicontextrun_udf testsetup live libertemudfsum import sumudf udf sumudf testcod live ctxrun_udfdatasetdataset udfudf plotstru see follow item full demonstr includ set fulli custom plot api refer found refviz refer toctre liveplot _partial partial result versionad instead get whole result udf finish run also use methlibertemapicontextrun_udf_it get gener partial result testsetup partial libertemudfsum import sumudf testcod partial udf_result ctxrun_udf_iterdatasetdataset udfsumudf someth interest udf_result npsumudf_resultsbuffersintens loop udf_result contain final result usual udf execut run udf object modifi sinc lead undefin behavior particular nest concurr execut udf object must avoid sinc modifi buffer alloc intern udf run asynchron execut also possibl integr libertem async script applic pass codesyncfals methlibertemapicontextrun_udf_it methlibertemapicontextrun_udf run docscheck sinc cant easili test async code codeblock python async udf_result ctxrun_udf_iterdatasetdataset udfudf syncfals someth interest udf_result npsumudf_resultsintens version without intermedi result udf_result await ctxrun_udfdatasetdataset udfudf syncfals see item comprehens demonstr document toctre asyncdask api libertem gener effici dask array data set see refdaskarray detail automodul libertemcontribdaskadapt member undocmemb dask result buffer autoclass libertemexecutorutilsdask_bufferdaskresultbufferwrapp member undocmemb _viz refer visual matplotlib automodul libertemvizmpl member bqplot automodul libertemvizbqp member gm automodul libertemvizgm member base class function automodul libertemvizbas member _correct correct libertem includ correct facil substract dark frame multipli gain map patch defect pixel deadhot correct appli onthefli run udf gui via python api follow data set format ship correct data frm dark frame load first part data set seq dark frame gain map load mrc sidecar file codebasenamedarkmrc codebasenamegainmrc bad pixel load codebasenameconfigmetadataxml gui correct suppli data set appli python api user decid pass correct appli via codecorrect paramet codecontextrun codecontextrun_udf expect classlibertemcorrectionscorrectionset object exampl testsetup import numpi np libertemexecutorinlin import inlinejobexecutor libertemudfsum import sumudf libertem import api ctx apicontextexecutorinlinejobexecutor data nprandomrandom astypenpfloat dataset ctxloadmemori datadata sig_dim testcod libertemcorrect import correctionset import spars exclud pixel pass spars coo matrix built differ way one way exclud npzero dtypebool exclud exclud sparsecooexclud ctxrun_udfudfsumudf datasetdataset correctionscorrectionset darknpzero gainnpon excluded_pixelsexclud also empti disabl correct testcod ctxrun_udfudfsumudf datasetdataset correctionscorrectionset autoclass libertemcorrectionscorrectionset distribut cach layer codecacheddataset use temporarili store data local fast storag devic ie ssd sourc data store slower devic ie nf slower spin disk automodul libertemiodatasetcach member undocmemb mask creation manipul automodul libertemmask member undocmemb _dataset api data set api api allow load handl data distribut system effici note directli use dataset method rather use highlevel tool avail exampl userdefin function see refour document load data load data highlevel introduct _format format _mib merlin medipix mib autoclass libertemiodatasetmibmibdataset _raw binari raw binari file autoclass libertemiodatasetrawrawfiledataset _dm format digit micrograph dm dm file autoclass libertemiodatasetdmdmdataset _empad empad autoclass libertemiodatasetempadempaddataset _ki ki autoclass libertemiodatasetkiskisdataset _frm frm autoclass libertemiodatasetfrmsfrmsdataset _blo blo autoclass libertemiodatasetbloblodataset _ser ser autoclass libertemiodatasetserserdataset _hdf hdf autoclass libertemiodatasethdfhdataset _seq norpix seq autoclass libertemiodatasetseqseqdataset _mrc mrc autoclass libertemiodatasetmrcmrcdataset _tvip tvip autoclass libertemiodatasettvipstvipsdataset _memori memori data set autoclass libertemiodatasetmemorymemorydataset _daskd dask data set autoclass libertemiodatasetdaskdaskdataset intern dataset api automodul libertemiodatasetbas member undocmemb intern api maskcontain classlibertemcommoncontainermaskcontain help implement highli effici mask applic oper virtual detector center mass featur vector calcul versionchang move modlibertemjobmask modlibertemcommoncontain use udf prepar deprec job interfac automodul libertemcommoncontain member maskcontain shape slice class help manipul shape slice ndimension binari data facilit mapreducelik process libertem see refconcept highlevel introduct automodul libertemcommonshap member undocmemb automodul libertemcommonslic member undocmemb cpu cuda devic method get set inform control devic comput run automodul libertemcommonbackend member undocmemb automodul libertemutilsdevic member undocmemb _refer python api refer toctre maxdepth api udf dataset io_backend applic mask intern dask clusterd cach correct viz indic tabl refgenindex refmodindex refsearch _applic api applicationspecif api note start applicationspecif code libertem spun step step subpackag instal independ libertem core see refpackag current overview subpackag toctre maxdepth appamorph appstrain appphasechang appholographi _udf refer udf api refer _defin udf ref defin udf see refuserdefin function introduct indepth explan mixin process method autoclass libertemudfbaseudfframemixin member autoclass libertemudfbaseudftilemixin member autoclass libertemudfbaseudfpartitionmixin member base udf class autoclass libertemudfbaseudf member meta inform autoclass libertemudfbaseudfmeta member pre postprocess autoclass libertemudfbaseudfpreprocessmixin member autoclass libertemudfbaseudfpostprocessmixin member _run udf ref run udf three method classlibertemapicontext relev run userdefin function autoclass libertemapicontext member run_udfrun_udf_itermap noindex result type udf result iter autoclass libertemudfbaseudfresult member _buffer udf ref buffer classlibertemcommonbuffersbufferwrapp object use manag data context userdefin function automodul libertemcommonbuff member undocmemb _utilifi udf includ util udf gener use udf includ libertem note see refappl api applicationspecif udf analys _sum udf sum frame autoclass libertemudfsumsumudf member _logsum udf sum logscal frame autoclass libertemudflogsumlogsumudf member _stddev udf standard deviat autoclass libertemudfstddevstddevudf member autofunct libertemudfstddevrun_stddev autofunct libertemudfstddevconsolidate_result _sumsig udf sum per frame autoclass libertemudfsumsigudfsumsigudf member _mask udf appli mask autoclass libertemudfmasksapplymasksudf member _pick udf load data autoclass libertemudfrawpickudf member noop autoclass libertemudfbasenoopudf member _io backend io backend default window buffer strategi chosen wherea linux mac os use unbuff memorymap io pass instanc classlibertemiodatasetbasebackendiobackend codeio_backend paramet methlibertemapicontextload use differ backend allow overrid default backend choic set paramet backend note file format cant support differ io backend hdf ser implement use thirdparti read librari perform io avail io backend bufferedbackend autoclass libertemiodatasetbasebufferedbackend noindex mmapbackend autoclass libertemiodatasetbasemmapbackend noindex directbackend autoclass libertemiodatasetbasedirectbackend noindex cluster data set codeclusterdataset distribut data set store individu partit use raw binari file automodul libertemiodatasetclust member undocmemb libertem context api see refapi document introduct complet exampl context automodul libertemapi member analysi api automodul libertemanalysisbas member analysi analysisresult analysisresultset automodul libertemanalysismask member masksresultset singlemaskresultset automodul libertemanalysiscom member comresultset automodul libertemanalysissum member sumresultset automodul libertemanalysisraw member pickresultset offaxi electron holographi versionad offaxi holographi applic see refholographi app applic exampl realiz two modul udf axi electron holographi reconstruct util function hologram simul hologram reconstruct reconstruct modul contain class reconstruct offaxi hologram use fourierspac method impli follow process step fast fourier transform filter sideband fourier space crop applic center sideband invers fourier transform automodul libertemudfholographi member undocmemb hologram simul automodul libertemutilsgener member hologram_fram _phasechang phasechang materi refer note see refphasechang app overview descript udf crystallin map automodul libertemudfcrystallin member excludememb get_result_buff get_task_data amorph materi refer note see refamorph app overview descript amorph applic _fem api fluctuat em modul contain udf appli fem singl ring mostli use interact use automodul libertemudffem member excludememb get_result_buff get_task_data _radial fourier api radial fourier analysi modul contain radial fourier seri analysi analys frequenc symmetri diffract pattern automodul libertemanalysisradialfouri member radialfourierresultset correlationbas peak find strain map refer _blobfind api blobfind deprec blobfind move packag libertemblobfind new structur pleas see httpslibertemgithubiolibertemblobfinderindexhtml instal instruct document new structur import codelibertemudfblobfind trigger codefuturewarn start support libertem releas _match api match modul contain class helper function extract manipul lattic correl result automodul libertemanalysisgridmatch member showinherit automodul libertemanalysisfullmatch member showinherit libertem libertem creator alexand clausen¹ dieter weber¹ karina ruzaeva¹ vadim migunov¹² jan caron¹ rahul chandra³ magnu nord⁴ colin ophus⁵ simon peter jay van schyndel⁶ jaeweon shin⁷ knut müllercaspary¹ rafal duninborkowski¹ present alexand clausen¹ dieter weber¹ ¹jülich research centr ²rwth aachen univers ³chandigarh univers ⁴univers antwerp ⁵lawrenc livermor nation lab ⁶monash univers eresearch centr ⁷eth zürich start increas data rate tem camera outpac increas network mass storag memori bandwidth two order magnitud immens increas perform open new door applic time requir adequ system handl acquisit storag process go well beyond solut base person comput libertem open sourc platform develop address challeng allow highthroughput distribut process largescal binari data set use simplifi mapreduc program model program model allow process live data stream offlin data algorithm gener stream intermedi result interact gui display time scale high throughput benchmark alreadi shown gb microcloud cluster eight node current focu applic develop pixel scan transmiss electron microscopi stem scan electron beam diffract data nevertheless libertem suitabl process type ndimension numer data libertem use webbas gui via python script embed applic data process backend support window linux mac os x sever typic tem file format support contribut first introduc gener architectur interfac demonstr appli typic task electron microscopi show exampl embed applic process backend inform libertem avail httpslibertemgithubiolibertemindexhtml full continu updat list acknowledg httpslibertemgithubiolibertemacknowledgmentshtml