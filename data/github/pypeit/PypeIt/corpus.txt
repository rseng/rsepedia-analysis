pypeit pypihttpsimgshieldsiopypivpypeitlabelpypilogopypilogocolorwhitehttpspypiorgprojectpypeit conda versionhttpsimgshieldsiocondavncondaforgepypeitlabelcondaversionhttpsanacondaorgcondaforgepypeit conda downloadshttpsimgshieldsiocondadncondaforgepypeitlabelcondadownloadshttpsanacondaorgcondaforgepypeit ci testshttpsgithubcompypeitpypeitworkflowscitestsbadgesvghttpsgithubcompypeitpypeitactionsqueryworkflowacitest coverag releasehttpscodecovioghpypeitpypeitbranchreleasegraphbadgesvghttpscodecovioghpypeitpypeit coverag develophttpscodecovioghpypeitpypeitbranchdevelopgraphbadgesvghttpscodecovioghpypeitpypeit document statushttpsreadthedocsorgprojectspypeitbadgeversionlatesthttpspypeitreadthedocsioenlatestbadgelatest astropyhttpimgshieldsiobadgepoweredbyastropyorangesvgstyleflathttpwwwastropyorg python spectroscop data reduct pipelin document visit httppypeitreadthedocsio andor see howto httpstinyurlcompypeithowto andor join pypeit user slack invit record issu httpsgithubcompypeitpypeitissu citat use pypeit research pleas cite follow public bibtex entri provid doihttpsjosstheojorgpapersjossstatussvghttpsdoiorgjoss doihttpszenodoorgbadgedoizenodosvghttpsdoiorgzenodo place includ relev citat text public pleas includ follow acknowledg provid latex use provid bibtex entri research made use ttfamilypypeitfootnoteurlhttpspypeitreadthedocsioenlatest python packag semiautom reduct astronom slitbas spectroscopi citeppypeitjoss_pub pypeitzenodo bibtex articlepypeitjoss_arxiv author prochaska j xavier hennawi joseph f westfal kyle b cook ryan j wang feig hsyu tiffani davi frederick b farina emanuel paolo titl pypeit python spectroscop data reduct pipelin journal arxiv eprint keyword astrophys instrument method astrophys year month may eid arxiv page arxiv archiveprefix arxiv eprint primaryclass astrophim adsurl httpsuiadsabsharvardeduabsarxivp adsnot provid saonasa astrophys data system articlepypeitjoss_pub doi joss url httpsdoiorgjoss year publish open journal volum number page author j xavier prochaska joseph f hennawi kyle b westfal ryan j cook feig wang tiffani hsyu frederick b davi emanuel paolo farina debora pelliccia titl pypeit python spectroscop data reduct pipelin journal journal open sourc softwar miscpypeitzenodo author prochaska j xavier hennawi joseph cook ryan westfal kyle wang feig emastro tiffanyhsyu wasserman asher villaum alexa marijana schindler jt young david simha sunil wild matt tejo nicola isbel jacob flor andrea sandford nathan vasov zlatan bett edward holden brad titl pypeitpypeit releas year month apr eid zenodo doi zenodo version v publish zenodo adsurl httpsuiadsabsharvardeduabszndop adsnot provid saonasa astrophys data system fund pypeit receiv direct fund follow sourc nasa adapa wm keck observatori univers california observatori also reli import inkind contribut individu caltech multipl mirror observatori elsewher contribut encourag anyon help us develop pypeit code base better suit need improv algorithm pleas follow develop guidlineshttpspypeitreadthedocsioenlatestdevelopmenthtml particular pleas note code conducthttpspypeitreadthedocsioenlatestcodeconducthtml instrument serv bokbc geminignir geminigmo geminiflamingo gtcosiri lickkast magellanmag magellanfir mmtbinospec test mmtmmir hk_zj j_zj k_k test mmtblue channel test mdmosmo keckdeimo zd g g keckkcwi kecklri keckmosfir j grate test kecknir kecknirspec lowdispers lbtlucii luciii lbtmod beta ldtdeveni lickapf plan notalfosc grism vltxshooter vltfor v whtisi pdbsp red arm blue arm ptriplespec requir see setupcfg environmentyml python numpi scipi matplotlib astropi ginga hpi futur pyyaml linetool ipython scikitlearn configobj licens bsd see licenserst copyright c pypeit develop right reserv redistribut use sourc binari form without modif permit provid follow condit met redistribut sourc code must retain copyright notic list condit follow disclaim redistribut binari form must reproduc copyright notic list condit follow disclaim document andor materi provid distribut neither name astropi team name contributor may use endors promot product deriv softwar without specif prior written permiss softwar provid copyright holder contributor express impli warranti includ limit impli warranti merchant fit particular purpos disclaim event shall copyright holder contributor liabl direct indirect incident special exemplari consequenti damag includ limit procur substitut good servic loss use data profit busi interrupt howev caus theori liabil whether contract strict liabil tort includ neglig otherwis aris way use softwar even advis possibl damag titl pypeit python spectroscop data reduct pipelin tag python astronomi data reduct spectroscopi author name j xavier prochaska orcid affili multipl affili must quot name joseph f hennawi orcid affili name kyle b westfal orcid affili name ryan j cook orcid affili name feig wang orcid x affili name tiffani hsyu orcid affili name frederick b davi orcid affili name emanuel paolo farina orcid affili name debora pelliccia orcid affili affili name univers california santa cruz index name kavli institut physic mathemat univers index name univers california santa barbara index name univers california observatori index name durham univers uk index name steward observatori univers arizona index name lawrenc berkeley nation laboratori index name max planck institut fur astrophysik index date august bibliographi paperbib summari pypeit python packag semiautom reduct astronom spectroscop data algorithm build decadeslong develop previou data reduct pipelin develop mike mase reduct procedur includ complet list input paramet avail function provid onlin document host read docshttpspypeitreadthedocsio regularli updat set command design perform reduct without addit code follow provid brief descript algorithm refer interest reader onlin document uptod inform releas v serv follow spectrograph geminignir geminigmo geminiflamingo lickkast magellanmag magellanfir mdmosmo keckdeimo zd g g keckkcwi bm bh kecklri keckmosfir j k grate test kecknir kecknirspec lowdispers old detector lbtlucii lbtluciii lbtmod mdmosmo mmtmmir mmtbinospec notalfosc pdbsp ptriplespec vltxshooter vi nir vltfor v v releas pypeit design use advanc spectroscopist prior data reduct expertis astronom prior experi data reduct highli configur design appli standard slitimag spectrograph accomod longslit multislit well crossdispers echel spectra alreadi enabl sever scientif public hsyu eiler eiler wang yanga yangb pelliccia order success reduc data pypeit recommend obtain follow calibr frame minimum use guidelin flat frame least frame ideal use slitord edg trace rel pixel effici correct frame acquir slit width setup scienc frame ii arc frame least frame ideal improv sn weak line use wavelength calibr pleas see onlin pypeit document suggest choic lamp use instrumentsetup frame acquir slit width setup scienc frame nearir pypeit use sky line wavelength calibr arc requir depend scienc goal instrument use may also requir follow option frame iii bia dark frame ideal frame acquir second exposur shutter close dark frame ideal frame acquir shutter close ideal exposur time equal durat scienc frame iv twilight sky frame ideal frame use slit width equal size scienc frame frame use construct slit illumin function situat intern dome flat either produc differ illumin function sky ie often intern suffer insuffici count often issu blue v pixel flat frame ideal taken detector uniformli illumin slit width larger taken scienc frame vi standard star frame least frame ideal calibr spectrum depend scienc goal may flux tellur color veloc standard creation custom inputconfigur file pipelin run endtoend convert raw spectroscop imag calibr sciencereadi spectra follow describ sever key step data reduct procedur pipelin automat characteris raw input frame base header inform also develop spectral imag type spit tool spit classifi imag base pixel data output classif procedur input pypeit file allow user specifi paramet reduct manual updat classif input raw imag reduct procedur consist script automat appli seri algorithm raw data frame raw imag first overscan subtract option correct bia dark current bad pixel mask gener intern construct use bia dark frame avail frame type robustli combin construct master calibr frame edg slit typic trace use frame slit uniformli illumin either halogen lamp spectrum twilight sky especi blue setup master arc frame scienc data nearir use wavelength calibr gener map wavelength solut across entir detector account spectral tilt across slit pypeit contain archiv wavelength solut use determin wavelength solut data autom wavelength calibr techniqu succeed pypeit includ script graphic user interfac allow user calibr spectra perform wavelength calibr kindli request share solut make avail commun pypeit gener model flat frame use construct pixelflat determin spatial slit profil throughout reduct procedur slit trace imag also use calcul spatial flexur frame rel master flat frame calibr appli everi scienc standard star frame pypeit jointli perform object extract bspline kelson sky subtract twodimension model sky first construct use spectral tilt map includ robust fit separ signal scienc target sky background emiss sky model local refin around scienc target spectrum extract algorithm develop pypeit achiev poisson limit skysubtract see autoreffigskysub pypeit perform boxcar optim extract gener scienc spectra final output procedur seri fulli reduc one twodimension spectra pypeit sky subtract reach poisson limit imag show sever twodimension keckdeimo spectra g grate left right raw scienc frame process scienc frame model sky emiss remov previou rel nois highlight object spectrum sky residu previou model object also remov produc final process frame poisson limit labelfigskysubskysubpng final step wavelength solut onedimension extract spectra correct spectral flexur refer sky emiss line wavelength solut transform userspectifi frame refer usual heliocentr barycentr final pypeit also includ script flux calibr combin multipl one twodimension exposur well softwar perform tellur correct pypeit produc seri calibrationrel output includ script automat gener plot qualiti assur inspect final output fit file rigid welldocu data model hold twodimension includ spatial inform onedimension spectral extract plan expand pypeit includ major spectrograph largest groundbas optic nearinfrar telescop ideal help broader commun current work toward implement follow addit spectrograph keckdeimo grate keckkcwi keckmosfir setup kecknirspec new detector high resolut keckesi keckhir magellanimac mmtbinospec vltuve also open receiv request support addit spectroscop instrument join us githubhttpsgithubcompypeitpypeit ask interest develop enhanc pypeit agre code conducthttpspypeitreadthedocsioenlatestcodeconducthtml acknowledg acknowledg intellectu contribut scott burl rob simco david schlegel pypeit financi support univers california observatori j f h also acknowledg support univers california santa barbara work pypeit r j c support royal societi univers research fellowship acknowledg support stfc stp stt refer nov introduc pypeit_parse_calib_id script throw warn chosen spectrograph header match expect pypeit read current keck deimo list arc lamp header use wavelength calibr allow one restrict wavelength rang arxiv templat set deimo fwhm default pixel fix bug holygrail allow sigdetect rms_wavelength slit depend list improv mosfir use slitmask info slit edg trace associ ra dec object name extract object extract undetect object use predict posit slitmask info use dither offeset record header default slitmask_offset user provid maskdef_id slit bright object trace offset improv frame type implement new mark detector kecklrisr aka keck_lris_red_mark oct modif reduc header crash ad image_procrst doc includ tabl primari paramet affect control flow imag process ad exptim unit pypeitimag data model made bia subtract avail dark imag process ie peopl request bia subtract dark bia need pass similarli ad dark buildimag call get_arc get_tiltimag streamlin oper pypeitcoreflatflatfield digit nois longer ad readnois calcul default includ process error error budget account eg readnois dark imag etc includ error calcul overscan subtract error estim standard error median overestim savgol method allow pinhol sky frame buildimage_fromlist pypeitimagesrawimagerawimag convers adu count first step process ad empirical_rn paramet allow user use overscan region estim detector readnois imag process estim readnois method subtract dark done convers imag count dark subtract alway perform use tabul valu detector warn thrown dark frame provid measur darkcurr dark imag differ tabul valu whether add shot nois nois floor varianc imag option control paramet processimagespar chang default processimagespar paramet use_specillum fals frame type shot_nois fals noise_floor bias use_overscantru use_biasimagetru noise_floor mask_crtru dark adjust propag individu spectrograph bpm recalcul appli flatfield correct longer chang function code keep track imag scale via flatfield correct propag nois model comput save baselevel varianc includ readnois dark current process error part pypeitimag datamodel ad base_var img_scal datamodel pypeitimag well noise_floor shot_nois boolean use pypeitcoreprocimgvariance_model construct error model ad badscal bit imagebitmask track flatfield correct ad update_mask select_flag method pypeitimag conveni method use updat extract inform fullmask bitmask attribut combineimag recalcul varianc model use stack estim count instead propag estim individu exposur combineimag perform mask median combine_method median error standard error median simplifi stack bit combineimag calcul varianc process imag separ two function pypeitcoreprocimgbase_vari pypeitcoreprocimgvariance_model replac variance_fram ad detector doc automat gener tabl relev detector paramet includ dark current use instrument improv fidel bspline time test use timeit ad invers varianc imag masterbia masterdark frame avail reus aug doc updat includ reorgan instal doc flux tellur doc automat construct packag depend add new pixelflat_min_wav paramet mspixelflat set add pypeit_install_tellur pypeit_install_ql_mast script latter creat symlink directori ql master use ql_master environment variabl exist improv edgetracemaskdesign_match alway return syncron trace pypeit deal dither observ deimo find offset observ slitmask expect posit design file three option user use find slitmask offset bright object select slit align box pypeit run object find align box extract reducerun split two method run_objfind run_extract loop detector pypeitreduce_exposur first one run calibr object find detector second one run extract two loop slitmask offset comput script get_telescope_offset determin telescop point offset ad pypeitspectrographskeck_deimospi improv soar goodman flux jul ad common base class script script method includ sphinx document updat pypeitscriptsscriptbasesmartformatt enabl wrap long line specifi line fix format use f made pypeitcoretellurictellur subclass pypeitdatamodeldatacontain ad basic unit test led chang exist datamodel made pypeitsensfuncsensfunc subclass pypeitdatamodeldatacontain ad basic unit test led chang exist datamodel allow pypeitdatamodeldatacontain pars method use pseudonym hdu extens name base class read datamodel subclass ad new keyword default previou behavior move function avoid circular import pypeitcoadddonespec pypeitonespeconespec pypeitcorecoaddget_wave_grid pypeitcorewavecalwvutilsget_wave_grid pypeitcorecoaddsensfunc_weight pypeitsensfuncsensfunc_weight add ldtdeveni spectrograph add cdi line ldtdeveni modifi soar read truli raw file gmo doc updat jun add soargoodman red camera updat gemini telescop info make pypeit iso compliant address identifi bug add block filter deimo config notalfosc updat pair fix shane_kast_r add ntt efosc spectrograph add standard star cd cd esofil add wavelength solut keck_lris_r pypeit_show_dspec show trace forc extract manual extract differ color updat doc extract deimo implement multidetector flexur estim fix error varianc numpi fit routin introduc howto deimo method slupr standard observ reduc wmko apr includ fix edg detect edgetraceset ad bound_detector paramet instrument default bound_detector fals mean code skip process detector slit edg found instument set default bound_detector true slit edg alway often fall edg detector ie detector fulli illumin instrument current mmt_mmir mmt_bluechannel not_alfosc shane_kast note gemini_gmo data devsuit requir bound_detectortru well improv wavelength templat deimo grate zd g ad new ari kri nei xei arc line pypeit comput arc line fwhm line control new parset fwhm_fromlin set fals default except deimo ad develop document deimo wavelength calibr limit reduct detector deimo lvm mask use detector empti add pypeit_obslog script simpl compil print metadata set fit file need pypeit run chang pypeitsetupfrom_file_root requir output path write vanilla pypeit file path provid object instati without creat output fix bug sensit function code adress issu revamp sensit function complet comput zeropoint throughput enhanc sensfuncpi qa ad mosfir ql script ad support vltsinfoni k ma x arcsec fov platescal updat doc differenc imag sky subtract ad sky frametyp differ imag sky subtract address issu improv sped sensit function tellur code fix bug archivereid automat wavelength identif remov numba depend improv pypeit_view_fit script fix ginga bug displaypi ad automat cut show_dspec ad latin hypercub sampler pypeitutil requir differenti evolut optim improv gmo r wavelength solut turn gmoss bin restrict add gtc osiri spectrograph updat doc ad new spectrograph bok test ad new pypeit_collate_d tool automat group spectra multipl file group coadd pypeit add histori keyword entri fit file use_maskdesign turn deimo lvm mask new paramet use_user_fwhm ad extractionpar allow user set prefer fwhm improv slittraceassign_maskinfo pypeit forc extract deimo non detect object locat expect slitmask design specobj slittrac datamodel version updat feb hotfix commandlin argument bug pypeit_coadd_dspec script hotfix bug fix pypeit_obslog script hotfix xshooter bit feb hotfix bug content type readm file prevent upload pypi feb pypeit_chk_wavecalib script option limit channel shown pypeit_show_dspec sigdetect full_templ ad new ari arii line improv dfit qa final wavelength templat deimo zd fix bug pypeitcorearcpi pypeitcorewavecalautoidpi due pad arc frame ad new xei line turn sigma clip deimo arc frame refactor setuppi use setupcfg defin packag configur refactor version handl use setuptools_scm grab version info git tag add support test within isol environ via tox refactor ci use tox run test add cronschedul test ci add test ci cover maco window conda instal refactor wrapper script bin entry_point defin setupcfg deprec check_requir depend handl instal dec dateob utc ampmod mosmod ad metadata deimo first three includ autogener pypeit file deimo ampmod includ list metadata use determin deimo configur setup frame ignor pypeitmetadatapypeitmetadataunique_configur use establish uniqu configur set pypeitspectrographsspectrographspectrographconfig_independent_fram default bia dark frame pypeitspectrographsspectrographspectrographconfig_independent_fram also return singl keyword select metadata column use match frame given configur deimo use match bia dark frame configur observ date current frame set singl configur ad pypeitmetadatapypeitmetadataclean_configur ignor frame reduc pypeit set pypeitspectrographsspectrographspectrographvalid_configuration_valu deimo use ignor frame taken directimag mode use anyth except b amplifi read data ignor frame remov metadata tabl fitstbl update_doc script build html well api rst file also print passfail comment ad test pypeitteststest_setupspi test pypeit correctli automat identifi frame multipl deimo configur pypeitpypeitsetuppypeitsetup correctli produc separ pypeit file configur ad develop document report pypeit satisfi pd requir keck outlin deimo pypeit pipelin build doc dynam gener exampl pypeit sort file inclus pypeit document setup block simpl list keyword valu use identifi instrument configur refactor identifi gui improv doc modest refactor templatespi construct wavelength arxiv file deimo b blue g pypeit add deimo slit expect slitmask design found trace process pypeit flag boxslt deimo slit expect align box slitmask design ad tabl deimo slitmask design object info slittraceset datamodel add support mmto blue channel spectrograph add github action ci workflow incorpor procedur enabl gmo nod shuffl observ new gmo wavelength solut remov travi ci config gener houseclean spectrograph document improv dynam build tabl avail spectrograph see pypeitspectrographsavailable_spectrograph pypeitdef deprec remov usag pypeitpypmsg move run_pypeitpi mani spectrograph instanc attribut class attribut particular previou instanc attribut spectrograph name ad class attribut set spectrograph support comment summari tabl default_pypeit_par class method allow name spectrograph defin singl place valid spectrograph longer check pypeitparpypeitparreduxpar caus circular import new strucutur paramet parrdxspectrograph virtual alway check load_spectrograph dont think problem kastr grate solut hotfix includ solut improv deimo slitmask design match assign radec deimo extract deimo object ra dec name return run pypeit_show_d list save txt file list spectra deimo object name maskdef_id visibl ginga run pypeit_show_d fix sigma clip bug oct frametyp tweak deimo exposuretim rang remov frame type key obstyp ad detail citat polici main page readthedoc ad doc bitmask alter script interfac allow dynam make help doc file full spatialspectr flexur heliocentr correct implement ifu reduct optim weight datacub gener doc skysub extract flat field new skysub option mask suppress local ad pypeitcoreconvert_deimossavfilespi convert sav file fit file ad amap bmap fit file pypeitdatastatic_calibskeck_deimo deimo optic model ad pypeitcoreslitdesign_matchingpi maskdesign_match edgetraceset ad parset switch slitmask design match default keck_deimo pypeit regist maskdef_id slittraceset instrument keck_deimo fix assign bug fit bspline sep hotfix flux doc edit hotfix fix sdist pip instal sep fix bug ir reduct case neg object trace identifi accident written specd file fix bug fix bug full_templ wavelength reidentif situat extrem wavelength coverag slit result reidentif pure zeropad array fix bug fix bug full_templ wavelength reidentif situat extrem wavelength coverag slit result reidentif pure zeropad array fix anoth bug aris zeropad array hotfix deal chk_calib test script gener combin datacub ifu data chang numpi scipi version requir allow showd_spec chk_edg chk_flat load older specdobj datamodel version implement plugin kindli provid ginga develop display imag secondari wavelength imag wc remov depend profxj ginga fork avoid bug use wc imag registr fork pypeitgingapi move pypeitdisplaydisplaypi ginga plugin ad pypeitdiplay directori ginga plugin regist entri point setuppi ad script check plugin avail instal doc updat ginga linetool instal via pip deprec pypeitdebuggerpi pypeitdataset remov hpi depend linetool list pypeitrequirementstxt check still caus readthedoc fail modifi specdobj model float imag pypeittracepcatracepca pypeitedgetraceedgetraceset subclass pypeitdatamodeldatacontain refactor wavecalib datacontain refactor fit pypeitfit datacontain coaddd bug fix coaddd without specd file coaddd offset coaddd doc manual extract improv lbtluci add mmtmmir ql script keckmosfir beta version correct det bug keck_lri modif allow flail lrisr detector modif pars lri lamp prior upgrad ad support pdbsp ptriplespec jul hotfix deal wavecalib crash fix class version check datacontain object script check calibr file longer requir bia frame default deimo implement grism notalfosc introduc anoth paramet use identifi box slit oppos erron slit found edg trace algorithm slit minimum_slit_length length minimum_slit_length_sci consid boxslit slit length minimum_slit_length consid shortslit latter alway ignor introduc order match code edgetraceset help fix issu gnirs_l caus order shift introduc two paramt edgetracesetpar assist match order_match order_offset echel spectrograph alway ech_ord defin slittraceset object remov need spectrographslitord spectrographorder_vec chang propag primarili wavecalibpi autoidpi reducepi add kecklrisr origin detector add kecklrisb fit format jun add median combin code make biasfram median combin default implement ifu reduct hook kcwi reduct complet specd frame implement new flatfield datacontain separ pixelflat illumflat may add script pypeit_flux_setup creat flux coaddd tellfit pypeit file add tellur fit script pypeit_tellfit may add illumflat frametyp enabl dark imag subtract refactor calibr remov cach add get_dark enabl calibrationonli run clean flat bia handl make reus master default mode run_pypeit requir python fix bug nire order find add notalfosc flux doc fix flexur heliocentr bug identifi gui updat apr variou doc hotfix wavelength algorithm hotfix must gener entri everi slit bad good apr variou hot fix apr replac usag tslits_dict dictionari pypeitslittraceslittraceset everywher slittraceset object main master file use pass around slit edg edg determin edgetraceset remov usag pypeitpixelstslitsmask replac pypeitslittraceslittracesetslit_img signific chang flatfield control flow ad rej_sticki slit_trim slit_pad illum_it illum_rej twod_fit_npoli paramet flatfieldpar illumin flat longer remov user doesnt want appli data flat alway creat work lost illumin correct wasnt request replac tweak edg method direct algorithm pypeitcoreflatfit_flat move pypeitflatfieldflatfieldfit reorient trace imag edgetraceset qa plot ad sobel imag ginga display ad bspline_profile_qa gener qa bspline fit elimin masterfram class mask handl datacontain move detectorpar datacontain name detectorcontain enabl framelevel construct advanc datacontain array type check nest datacontain to_master_fil dynam doc calibr imag everi calibr output disk help within datacontain separ previou class except wavecalib needsd fit datacontain first substanti refactor calibr add mdm osmo spectrograph move pypeitcorepydlbsplin modul pypeitbsplin introduc c backend function speed bspline fit requir extension_help packag build pypeit necessari filescod setuppi build c code c function use default code revert pure python there problem import c modul ad test precook data ensur ident behavior pure python c function move basi function builder pypeitcorebasi releas doc lot new doc pypeit_chk_dslit script datacontain specobj bspline introduct specdobj allspecdobj onespec coaddd ad bitmask slittraceset introduc slittracesetspat_id usag throughout code spatial flexur correct signific refactor flatfieldbuildflatfieldfit spatial flexur measur code pypeitpar control modif slittraceset method illumflat gener dynam differ pypeit control waveimag gener dynamical waveimag deprec move rawimag processrawimag renam latter former continu refactor calibr initi code sync specobj across exposur option ignor profil mask extract addit code datacontain relat masterfram elimin waveimag updat ql script lot new test mar ad pypeit identifi gui script manual wavelength calibr add bitmask test print bitmask name invalid except rais paramet set keyword sort export rst tabl enabl user scale flux coad spectrum filter magnitud hold radec float decim degre pypeit knockon effect add card specd header output fix sensfunc bug ad templat lri deal nonextract standard doc doc doc qa fix mar miss requir merg master tag mar refactor sensit function flux coad script algorithm ad support addit nearir spectrograph restrict extrapol tilt fit implement interact sky region select feb implement datacontain ad fit io method implement slittraceset setup pypeitparpypeitpar paramet set fault key valid given paramet set note check may fail ident key differ paramet set modif add_sobj numpi jan introduc quick look script mo nire bump depend includ python modest refactor reduceextractionskysub code refactor scienceimag par piec final dealt random window shane_kast_r dynam namp set lrisr instanti spectrograph jan hotfix nphistogram error corecoadddpi nplinspac use float number step corewavepi set numpi version dec implement mosfir implement nirspec yband spectroscopi fix bug coaddd add vltfor filter databas improv deimo frame type bring geminigmo suit r also import chang autoidfull_templ fix trace extrapol fix bug object find tweak object find algorithm major improv echel object find improv outlier reject coeffici fit pca_trac major improv coadd routin coaddd introduc tellur modul tellur correct routin implement tilt imag type requir frame type streamlin abstract echel properti echel routin spectrograph class revamp coad routin introduc coad multislit data improv ginga plot routin fix bug associ astropystatssigma_clipped_stat astropystatsmad_std use refactor bpm gener merg raw_imag load datasec_img oscansec_img gener sync datasec_img imag processrawimag start bare path calibr imag count adu refactor gmo get_rawimag method enabl gmo overscan subtract add r wavelength solut old ev chip revis simple_calib method quick dirti wavelength calibr add relat show_wvcalib script chang ech_combspec better treat filenam fix bug bia set forc bia subtract implement chang vlt_xshooter_nir requir dark taken flat made flat field code bit robust hot pixel edg order ad pypeit_chk_flat script view flat imag refactor imag object rawimag processrawimag pypeitimag buildimag move load save method masterfram individu calibr object convert arcimag flatimag count ad code allow ivar rn imag gener calib ad sever from_master_fil instanti method use coadddweighted_combin stack calibr imag major refactor slit edg trace ad identifi tool allow manual identif calibr arc spectrum ad support whtisi ad object trace tool allow interact object trace ad code conduct deprec previou trace code pypeittraceslit pypeitcoretrace_slit well function pypeitcoreextract replac pypeitcoremomentmomentd function pypeitcoretrac pca save masteredg file ad io method improv cuar linelist archiv gemini wavelength solut new data model specobj specobsj object specd start improv coaddd tbc allow continuum arc imag model subtract trace linecentroid tilt includ mask line detect extract central arc spectrum slitord vlt xshooter nir need ensur sigma calcul didnt includ offord spectral posit ad staticmeth classpypeitedgetraceedgetraceset construct tslits_dict object directli master file add doi jun add magellan_mag includ new thar linelist archiv solut polish sever key echel method modifi create_linelist default vacuum updat xshooter nire gnir refactor processimag processrawimag pypeitimag calibrationimag scienceimag imagemask refactor scienceimag sciimgstack fix arc tilt bug start xshooter doc introduc processbia paramet modifi process step bia overscan subtract start note gener new spectrograph pypeit refactor reduc take scienceimag object imag mask updat mani spectrograph file put datasec oscansec raw frame add find_trim_edg std_prof_nsigma paramet bit tune mage fix echel fluxspec write chosen set header card specd coadd file updat for introduc new coaddd modul new coadd functin modifi interfac robust_polyfit_dj robust_optim djs_reject ad util routin cap_ivar cap nois level fix bug optim extract caus hot pixel larg fraction pixel object profil mask major bug fix improv echel object find order cover entir detector treat properli may minor bug fix allow none exposur time type frame may enabl pypi streamlin instanti begin pypeit__init__ move call default_pypeit_par config_specific_par add finalize_usr_build function pypeitmetadata consolid opaqu step finish meta data build hack kastr turn shane kastb grism wavelength solut test start split arc line templat notebook piec allow slice like syntax defin calibr group introduc tilt frame type use yet everyth that type arc also type tilt use matplotlib agg backend toplevel __init__pi allow run code screen may need better approach numer doc style fix add master_typ masterfram deriv class use set name master frame output file signific edit masterfram streamlin io deriv class lead signific chang calibr main path set pypeit allow connect_to_ginga start ginga viewer add pytest skipif check cook directori exist devsuit use run test need raw imag data dont need devsuit move wavelength calibr saveload pypeitwavecalib pypeitcorewavecalwaveiopi renam default directori calibr master master remov inclus spectrograph name fix oscan sec read_lri fix bad return tracewavetilts_find_lin sever doc edit fix handl maskslit fix flexur crash chang pypeitspectrographsspectrographget_image_sect alway return section order spectral spatial match pypeit convent match bin return propag get_datasec_img chang function relat bin ensur bin alway order spectral vs spatial pypeit convent imag shape nspecnspat includ associ document allow pypeitbitmaskbitmask pypeitparparsetparset save load fit file header forc bitmask definit framematchpi processimagespi use ordereddict need ordereddict ensur bit assign key alway python normal dict type guarante preserv insert order part data model whenif requir python remov ordereddict usag favor normal dict chang default add rm slit paramet doc improv remov old comment method edit function replac bad column imag ad test ad pypeitio routin manipul numpyrecarray object convert astropyfitsbintablehdu object gzip compress file gener parser pull list item fit header ad metadata masterfram object written fit file ad observ option wavelength refer frame skip rel motion correct feb fix bug introduc bin switch pypeit convent fix bug wherebi imag save object detect revamp name convent output file origin filenam feb mani doc string updat top level routin core updat instal cookbook doc continu process requir spectrograph par base class doc clean top level eg base class elimin bpm base class hot fix flatfield illumflat get divid pixelflatnrm imag implement coadd includ script perform fix bug extractfit_profil introduc implement coadd polynomi order object find part parset improv xshooter object trace increas order improv determin threshold determin region object find ad sn floor ivar determin imag proce rework master output traceslit fix bug associ bin imag procd incorrectli fix master_key output header deal differ detector modifi c pypeit_setup requir setup specifi write eg ac gener new spectrograph child lrisr longslit readout mode amp per detector requir astropi requir coad least fix circular import requir move qa wavec autoid fix bug lrisr spectrograph use bin wavelength fwhm updat doc addrm slit fix tune flux script flux routin introduc sky_sigrej paramet better handl manualextract add templat lrisr wavelength pydl licens licens folder updat new cook v feb move write method sensit function modifi io detnum paramet modifi idx code specobj fix bug datatyp format rework mastefram base class homogen one ever overload save_mast load_mast method mani chang fix wavecalautoidpi make line use explicitli clear fix mani bug wavelength fit recent introduc introduc reidentif algorithm wavelength mani associ algorithm reidentif default xshooter nire chang wavelength interfac routin make compat echel tweak la cosmic default add instrument specif paramet spectrograh class along routin check bin decid best param lrisr updat cosmic ray mask global sky subtract major develop echel function includ object wavelength reduct control flow introduc wavemodelpi simulateextractid sky thar spectral emiss line signific refactor trace slitedg order new docstest chang back bpm imag align datasec raw imag shape without trim renabl abil add user suppli slit miscellanei echellerel advanc png xshooter fit sped trace plot ginga fuss time handl pypeit hope last time dispaxi renam specaxi dispflip specflip lot vltxshooter develop remov number file mistakingli ad repo run cook v allow multipl path defin pypeit file chang procedur use identifi instrument configur identifi frame use calibr scienc exposur ad configur calibr group background index total revamp tilt arc line trace significantli improv fix trace_crude_init trace_fweight trace_gweight mani small bug fix modif particularli fit routin lot develop relat echel function major enhanc fit routin util make gmo south work updat oh line list also add lbtmod introduc calib group remov setup design larg replac master_key refactor calibr class handl new calib group refactor qa handl new calib group refactor test handl new calib group push piec run_pypeit pypeit class remov futur depend chang point step size pixel show_slit show_trac major speed implement differ imag nearir reduct multislit echel fix bug echel object find algorithm fix bug object find associ defin background level bright tellur standard short slit implement use standard star crutch object trace rework implement reuse_mast pypeit class calibr class new behavior associ overwrit featur run_pypeit user prompt featur disabl exist scienc file recreat unless option set fix bug local sky subtract crash pixel get mask nearli resurrect simple_calib new method build fitstbl meta data refactor handl meta data includ data model defin core addit meta data replac metadata_key pypeit_file_key output pypeit file updat new metadata approach vlt keck lick gemini instrument remov pypeitsetup call within pypeit remov lacosm specif method spectrograph replac config_specific_par setup block requir run pypeit file introduc new method determin breakpoint locat local sky subtract take sampl set wavelength tilt account fix major bug nearir differ imag case ab ie two imag introduc routin coreprocimg use coad tweak vlt xshooter spectrograph class improv reduct move method imag process scienceimag class processimag class introduc full_templ method multislit wavelength calibr includ nsnippet paramet gener full templat file lri deimo kastb ad new arc line deimo blue introduc mask_frac_thresh smash_rang paramet slit trace modifi lrisb default updat slit trace doc introduc show command pypeit_chk_edg ad echel specif local_skysub_extract driver refactor pypeit scienceimag class introduc reduc class scienceimag proce wherea reduct oper done reduc reduc subclass instrument specif way use instantiate_m instead pypeit necessari enabl use reduct function coadd ad improv routin upcom coaddd function fix bug weight determin spectral coadd major fix improv tellur correct flux routin flux implement via script turn flexur back sever instrument introduc vltfor spectrograph swap binspec binspat pars bin method extend lrisr _ arc templat modifi addrm slit method specspat add option coad scale coad spectrum given magnitud given filter extend deimo g templat major refactor renam modul incorpor pypit pypeit switch add slitmask opticalmodel detectormap class implement deimosopticalmodel base deep idl code improv treatment larg offset pypeitcoretrace_slitstrace_gweight symmetr trace_fweight larg outli pixel break object trace ad threshold pypeitcoretracewav ensur tilt never crazi valu due extrapol fit break sky subtract turn travi test integr arclin pypeit ad kdtree algorithm wavelength calibr routin modifi debugdevelop mode updat specobj class ndarray instead list set method complet revamp object find global sky subtract local sky subtract new algorithm ad option run_pypeit interact output improv pypeit_show_specd script fix bug wherebi use_mast use run_pypeit script overhaul gener algorithm wavelength calibr hot fix bspline requir updat fix issu bias written disk untrim complet rework flat field algorithm fix pars issu pypeit file case whitepsac path implement interact plot option allow reduct continu run modifi global sky subtract significantli polynomi fit greatli improv result larg slit updat load spectra pypeit_show_dspec script work new output data model implemenet new peak find algorithm arc line significantli improv wavelength fit ad filter satur arc line fix issu wavelength fit ad algorithm data file tellur correct nearir spectra revamp flat field roiutin tweak slit boundari base slit illumin profil rework calibr class accomod updat slit boundari tilt imag well updat master file includ bitmask class manga dap chang way frame type includ pypeitsetupfitstbl edit kecklrisspectrograph header keyword edit header read provid file creat metadatapypeitmetadata class handl previous fitstbl fuss datetim driven gmo date longer requir fitstbl initi work gmo still workinprogress push sever arcparam item wavelength parset seri hack bin miss fitstbl cuar line list gmo new option reduc det time data provid pypeit file overwrit anyth read fit file header fill fit tabl read data gnir demand frametyp column fit tabl u format improv detect_lin arclin detect algorithm got rid arcparam ad info doc wavelength parset improv comment autoidpi arclin code ad util wavecalib comput shiftstretch two spectra complet revamp crosscorrel algorithm wavecalib give roburt result figur tag releas first major step arm echel data reduct pipelin apflevi keckhir implement updat blaze function slit profil fit initi support multislit reduct coad includ doc test requir astropi v raw_input handl python coadd handl bad input coadd bug fix obj name init local ie object depend paramet coad fix local background logic error slit mask refactor qa pdf pnghtml add nminima object find add new paramet object find reduc specif detector add slit profil qa begin write header eg radec info specd file fix bug appli bpm find slit edg updat ginga hook enabl archivingload sensit function add new cosmic ray algorithm coad especi pair spectra ad support tngdolor long slit spectrograph start remov cython code updat line detect algorithm updat flexur tilt trace document updat docsad standardsrst make small correct use script pypit_setup setuprst fix travi updat slit trace algorithm improv arc line detect algorithm ad function fulli autom wavelength calibr arclin switch set file allow iraf style data section defin allow data section extract header inform signific refactor routin relat pypit_setup variou small improv primarli handl geminigmo data yet fulli support pypit remov major cython function move log packag object use main __init__pi file begin adher pep mostli setuppi rewritten model httpsgithubcomsdssmarvinblobmastersetuppi ad requirementstxt packag version requir updat archeck load nist arclin arclin instead pypit deimo reduct bug fix bspline bkspace enabl load sensit function yaml allow multipl detector use reduc detnum move import start everi file catch avoid circular import remov import construct dummy_ remov arutil necessari propag chang test remov depend ararclin function slf chang requir astropi overwrit valid includ numba requir actual requir arclin improv cookbook setup doc faster algorithm defin object background region restor armsg function finish cython python convers test need introduc maskslit array enabl multislit reduct bug fix trace_slit fix appear gross error slit bg_subtract mask turn pca tilt qa slow slit sever improv coad modifi lacosm identifi tini cr enabl write arc_fit qa slitord refactor comb_fram refactor load_fram refactor save_mast refactor get_datasec_trim get_datasec pix_to_amp refactor slit_pixel refactor sub_overscan refactor trace_slit current name driver_trace_slit mani depend ad paramet trace_slits_medrep option smooth trace slit imag updat set deimo lri relat trace slit ad replace_column method arprocpi fix bug new_match_edg move trace doc slit_trac edit extens updat doc deimo lri ad pypit_chk_edg script ad bpm deimo ad code user add slit edgearr_from_us document made access pypit file gener tcrude_edgearr method use trace crude slit edg ad trace_crud method port previous desi ad multi_sync method armlsd slit synchron somewhat deprec maxgap method refactor gen_pixloc method gener arpixelspi modul hold pixel level algorithm move method relat traceslit artraceslitspi introduc traceslit class updat armlsd accordingli remov driver_trace_slit refctor_trace_slit method make ginga true depend pypit traceslit writeload masterfram introduc setupclass object replac armbasesetup_sci setupclassrun move setup acitivit insid pypitpi doc updat setuprst refactor fitsdict fitstbl variabl name updat everywher remov slurp header fitsdict therefor fitstbl includ setupclass notebook move ftype_list armetapi arsortpi bug fix relat flux substanti refactor arsortpi substanti refactor arsetuppi introduc baselevel processimag class introduc abstract masterfram class introduc biasfram bpmimag arcimag traceimag class start normpixelflat class yet implement substanti refactor armast move arlri ardeimo core move imag process method arprocimg core introduc calib_dict hold calibr frame armlsd instead slf modifi ardeimo load singl imag desir turn flux branch fix one follow move get_slitid artraceslit deprec tracecombinematch option deprec arccombinematch option refactor set slf core method continu remov _msbia _msarc _datasec _bpix slf new test notebook introduc fluxspec class introduc pypit_flux_spec script doc ad fluxspec notebook armlsd reappear momentarili use goe away futur branch ad dict std_dict armspi hold standard star extract reduc standard star main arm loop modifi save_d_spectra handl load specobj addit intern gener one move arflux core strip slf set realli restrict nobj user request new test introduc wavecalib class push ararcpi core remov slf set depend refactor master includ masterfram includ address previou comment rc remov armlsdpi strip wv_calib scienceexposur push get_censpec ararcpi new test limit doc traceslit load method push outsid class introduc wavetilt class signific modif tilt recip includ deprec pca move tilt trace algorithm artracepi artracewavepi core ad legendr fit polyfitd_gener new trace slit tilt set fit new qa plot new pypit_chk_tilt script new doc new test introduc flatfield class add flatfield notebook test push flat field algorithm corearflatpi main flatfield method broken piec refactor armast refactor relat set scienceexposur waveimag class strip mswave scienceexposur new test push get_calib method individu class signific refactor armspi follow renam slits_dict tslits_dict use tslits_dict wavetiltspi introduc scienceimag class substanti refactor armspi follow notebook revers exposuredet loop last time gener arskysubpi core signific portion arprocpi superflu move flexure_qa arwavepi signific refactor arsavepi also move core remov set slf arspecobjpi refactor trace_objects_in_slit refactor flexur algorithm add build_crmask flat_field method processimag complet deprec arsciexp rip mani test updat doc string improv new main doc complet armast refactor move core add bspline_profil method use skysub also show extract introduc new skysub method still bspline new one add sever method pydl repositori pydlpi modul includ bspline class add method gener ximg edgemask frame add new trace_slits_trim set small instal edit fix travi failur crept previou pr fix bug bspline add demo notebook lrisr redux odd end includ code flow doc introduc pypitpar pypitconfig directori introduc pypitpar initi step toward refactor front end final nail coffin cython add api doc add bumpvers add demo notebook lrisr redux odd end includ code flow doc introduc pypitpar pypitconfig directori introduc pypitpar initi step toward refactor front end move spectrograph specif code spectograph folder introduc spectrograph class introduc calibr class notebook bug fix view_fit script handl noslitsfound condit ad nire spectrograph folder fix logic arcimag class relat set user set ad user set class enabl load_raw_fram take neg dispers axi indic flip major bug fix bspline_profil produc gargab result breakpoint reject edit spectrograph class remov use set arm subsequ call arm use pypitpar sub paramet set propag parset chang run_pypit pypit_setup settingsparamet pypit set pypit file use configur paramet set rewrot pypit file parser includ automat gener document pypitpar run make html doc directori check orient array correct datasec oscansec detectorpar spectrograph add specobj class add from_dict to_dict method pydl bspline updat doc updat from_dict method pydl bspline file enter scene _coaddd coadd spectra overview document describ combin spectra multipl exposur object pypeit current offer coad spectra must done outsid data reduct pipelin ie pypeit coadd spectra part data reduct process current default use optim extract flux data see current coaddd data model_ pypeit_coadd_dspec primari script call pypeit_coadd_dspec_ take input file guid process coaddd file format file describ usag script ie type pypeit_coadd_dspec h exampl dev suit shane_kast_blu instrument userdefin coad paramet coaddd coaddfil jp_coaddfit read data coaddd read sciencespecd_bjp_kastb_maytfit spatslitdet sciencespecd_bjp_kastb_maytfit spatslitdet coaddd end open block set paramet process includ output file name see parameters_ common choic note use echel docspectrograph eg keck_nir must specifi sensfuncfil gener docflux standard star data block provid list docout_specd file object name coad see docout_specd discuss name instrument multipl detector along spectral dimens eg keck_deimo give separ entri extract gener final splice spectrum list object identifi given specd file output pypeit_show_dspec script eg pypeit_show_dspec specdfilenamefit list also recov object info file sciencefold one per exposur run script usag display call script h option includ helppypeit_coadd_dspecrst exampl execut look like pypeit_coadd_dspec frb_lrisr_coaddd_filetxt show substanti set output print screen success final spectrum written disk see current coaddd data model_ paramet guid coadd process also written disk record default locat coadddpar choos anoth locat par_outfile_ option command line option show end process launch matplotlib window show stack spectrum bottom top panel illustr number pixel includ stack par_outfil input filenam hold list paramet use run coaddd process paramet flux default paramet assum spectra gone docflux set flux_valu fals data flux output flux spectrum unit ergscmang multipli e flux scale data flux may scale coad spectrum chosen valu typic photometr measur one mani filter curv need add filter magnitud coaddd block coaddd file_ exampl coaddd coaddfil j_lrisr_afit filter psr filter_mag filter_mask call convolv coad spectrum ps rband filter scale flux give ab magnitud furthermor spectral wavelength mask analysi filter list filter provid file httpsgithubcompypeitpypeitblobmasterpypeitdatafiltersfilter_listascii_ cosmic ray clean scale paramet option descript scale_method default auto scale flux array base root mean squar valu rm sn valu spectra rm valu less minimum median scale valu scale appli rm valu greater minimum smaller maximum median scale valu appli method median describ hand scale flux array use valu specifi user input paramet hand_scal must one valu per spectrum median scale flux array median flux valu spectra wave method may want specifi method use construct wavelength grid coad spectra done modifi wave_method coaddd block coaddd file_ default method linear use fix linear grid lambda howev may ideal depend instrument setup observ exampl keck lrisb data coad spectra may see nois pattern like imag figuresnoise_linearpng figur obtain plot quantiti mathfracsqrttextttivar use ivar array second extens coaddd file_ still correct may desir nois pattern occur pypeit_coadd_dspec interpol spectra order guarante neighbour pixel correl nois howev wavelength grid multipl valu land one rebin pixel pattern appear avoid nois pattern modifi valu wave_method exampl use iref option instead exampl becom imag figuresnoise_irefpng iref option use grid one spectra coad wavelength grid reason work gener wavelength solut slit nonlinear pixel space differ differ wave_method option linear grid number exposur contribut given pixel final grid vari nonlinear grid overlap linear grid use iref option linear grid wider space effect reduc data contain exposur arent dither iref option coadd exposur nativ wavelength grid avoid fluctuat nois vector data contain exposur dither lot iref probabl give similar nois fluctuat use linear grid wider space may give better result chang space wavelength grid modifi samp_fact coaddd block coaddd file_ default valu set samp_fact oversampl finer grid set samp_fact undersampl coarser grid current coaddd data model intern data held classpypeitcoadddonespec data model includ includedatamodel_onespecrst coaddd spectrum may view lt_xspec script load data launch gui linetool packag eg lt_xspec jp_coaddfit _instrument spectrograph overview describ spectrograph exist code infrastructur enabl pypeit reduc data spectrograph support mean reduct relev data wellvet pypeit develop unsupport spectrograph indevelop howev develop timescal undefin instruct add new spectrograph see docnew_spectrograph includ includespectrographs_tablerst _spec_detail instrumentspecif detail follow link provid document addit instrumentspecif detail run pypeit toctre caption spectrograph maxdepth new_spectrograph deimo mosfir gemini_gmo gtc_osiri keck_kcwi lri mage ntt_efosc shane_kast xshooter calibr overview doc briefli summar main calibr perform pypeit per standard spectroscop reduct seri calibr file gener correct detector perform wavelength calibr consid docflux separ process page link doc dedic specif aspect calibraion main calibr step order execut multislit echel calibr docbias_dark docslit_trac docflexur docwave_calib docflat_field product main product calibr docmast place master folder full set may creat requir depend instrument toctre maxdepth master master_align master_arc master_bia master_edg master_slit master_flat master_tilt master_tilt master_wvcalib modif global modif one may make calibr addsuppress biasdark frame gener see docbias_dark addsuppress flexur correct see docflexur addsuppress aspect flat field see docflat_field _extract extract overview document describ pypeit perform object extract standard run perform boxcar optim extract everi object discov docobject_find algorithm boxcar boxcar extract base boxcar_radiu set refpypeit_parextractionpar keyword optim optim extract standard horn algorithm custom follow tip custom extract suppress mask extract sourc bright emiss line differ spatial continuum eg galaxi code may reject set relat pixel default extract howev turn reject pixel base differ spatial profil set use_dmodel_mask paramt refpypeit_parextractionpar keyword fals eg add follow docpypeit_fil reduc extract use_dmodel_mask fals may lead addit cr enter extract view spectrum use refout_specdpypeit_show_dspec script use ignore_extract_mask option extend bright emiss line may need use no_local_ski avoid poor local sky subtract see docskysub detail manual need extract object faint detect docobject_find algorithm even adjust paramet may docmanu custom fwhm optim extract want perform optim extract use defin fwhm ie let pypeit comput flux profil set paramet use_user_fwhm refpypeit_parextractionpar keyword true case pypeit assum object gaussian profil fwmh equal find_fwhm see refpypeit_parfindobjpar keyword may occasion necessari set no_local_ski true refpypeit_parskysubpar keyword avoid bad local sky subtract addit read addit doc somewhat common edit pypeit user make toctre maxdepth manual flexur includ includelinksrst _coaddd coadd spectra overview document describ combin set fulli reduc spectra multipl exposur singl datacub relev ifu spectrograph must done outsid data reduct pipelin ie pypeit coadd spectra part data reduct process pypeit_coadd_datacub primari script call pypeit_coadd_datacube_ take input file guid process usag current usag script usag pypeit_coadd_datacub h det det file pars option argument h help show help messag exit overwrit overwrit exist filesdirectori default fals det det coadd detector number file coaddd file see coaddd file format file similar docpypeit_fil follow exampl keck_kcwi coaddd file save bbpcoaddd userdefin execut paramet rdx spectrograph keck_kcwi detnum reduc cube output_filenam bbp_datacubefit save_whitelight true read data specd read sciencespecd_kbbbp_kcwi_dectfit sciencespecd_kbbbp_kcwi_dectfit specd end open block set paramet reduct step specd block provid list docout_specd file run run script pypeit_coadd_datacub bbpcoaddd flux calibr would like flux calibr datacub need produc standard star datacub first gener datacub scienc frame must pass name standard star cube rel scale slit correct want also flux calibr also need set flux calibr argument true specifi standard star cube coaddd file follow reduc cube standard_datacub standard_star_cubefit flux_calibr true astrometr correct would like perform astrometr correct need instal scikitimag version default option perform astrometr correct master align frame comput disabl astrometr correct set follow keyword argument coaddd file reduc cube astrometr fals spatial align differ setup multipl setup want align pixel spatial coincid must first produc datacub wish use refer defin wc paramet use keyword argument coaddd file reduc cube reference_imag reference_cube_whitelightfit ra_min ra_max dec_min dec_max spatial_delta valu print termin output reference_cubefit gener note pypeit current setup stitch togeth cube cover differ wavelength rang coadd multipl specd file singl datacub wavelength setup overlap current coaddd data model output singl fit file contain combin datacub cube shape store varianc short python script allow read plot wavelength slice cube matplotlib import pyplot plt astropyvisu import zscaleinterv imagenorm import astropyiofit fit astropywc import wc filenam datacubefit cube fitsopenfilenam hdu_sci cubeflux hdu_var cubevari wc wcshdu_scihead wave_slic norm imagenormalizehdu_scidatawave_slic intervalzscaleinterv fig pltfigur figadd_subplot projectionwc slicesx wave_slic pltimshowhdu_scidatawave_slic originlow cmappltcmviridi normnorm pltxlabelra pltylabeldec pltshow wavelength tilt overview construct wavelength imag assign wavelength valu everi pixel scienc frame one must measur tilt arc line sky line across slitsord process organ classpypeitwavetiltsbuildwavetilt class primarili wrapper method tracewavepi modul code flow extract arc spectrum center slitord loop slitsord trace arc line fweight default ii fit individu arc line iii fit offset pixcen iv save see wavetilt httpsgithubcompypeitpypeitblobmasterdocnbwavecalibipynb_ notebook exampl qa code output residu plot fit offset possibl achiev rm pixel set threshold signific threshold arc sky line analysi default may wish lower paramet includ line especi short line near spectral edg slitord eg calibr tilt tracethresh tune paramet variou instrument spatial order order function default legendr fit arc line across slitord spatial long slit like requir order higher eg calibr tilt spat_ord pypeit qa part standard reduct pypeit gener seri qualiti assur qa file document describ typic output typic order appear basic arrang individu png file creat set html file gener organ view png html code complet crash set html file gener qa folder one html file per masterfram set one html file per scienc exposur exampl name mf_ahtml open browser em quick link provid allow one jump variou file calibr qa first qa png file gener relat calibr process uniqu one gener setup detector possibl calibr set gener titl describ type qa subtitl indic user ran pypeit date process wavelength fit qa see docmaster_wvcalib discuss qa wavelength tilt qa gener seri png file describ analysi tilt arc line see docmaster_tilt discuss qa exposur qa process scienc exposur seri png gener per detector sometim per slit flexur qa flexur correct perform default fit correl lag per object shown adopt shift list exampl figur qaflex_corr_armlsdjpg align center plot show sever sky line analysi singl object brightest data compar archiv sky spectrum coincid well wavelength exampl figur qaflex_sky_armlsdjpg align center includ includelinksrst specd output overview primari data product pypeit calibr spectra extract sourc fundament spectrum may describ two array flux wavelength vacuum togeth error array minim output even quick reduct mode howev sever method extract calibr etc yield variou data product addit txt file extract information_ extract spectrum also produc _specdoutputarray name file spectra file name like specd_bjp_kastb_maytfit model prefix_frameobjname_spectrograph_timestampfit object object name spatial posit pixel number reduc imag spat slit posit pixel number reduc imag slit detector number det exampl spatslitdet extract sever mode extract pypeit may multipl output spectral array prefix extract mode extract mode descript boxcar tophat extract around trace precis window use defin boxcar_apertur pixel optim standard horn algorithm extract use fit spatial profil estim profil given obj_fwhm therefor integr count boxcar extract given boxcar_count array varianc boxcar_var _pypeit_show_dspec pypeit_show_dspec spectra may view pypeit_show_dspec_ script load data launch gui linetool packag script usag display call script h option includ helppypeit_show_dspecrst typic call pypeit_show_dspec sciencespecd_bjp_kastb_maytfit exten launch xspecgui httpslinetoolsreadthedocsioenlatestxspecguihtml_ screen linetool packag option typic option use list print list screen object extract exampl ext spatslitdet ext spatslitdet ext spatslitdet ext spatslitdet ext spatslitdet ext spatslitdet ext spatslitdet ext spatslitdet ext spatslitdet ext spatslitdet ext spatslitdet ext spatslitdet ext spatslitdet indic extens object refout_specdnam exten shortcut sort pull object want without type name obj plot object extract choic refout_specdextract method flux show flux spectrum flux extract inform txt file name spectra file_ also produc pypeit file list main extract inform spectrum look like slit name spat_pixpo spat_fracpo box_width opt_fwhm sn wv_rm spatslitdet spatslitdet spatslitdet spatslitdet spatslitdet slit slit posit pixel reduc imag name object name see objects_ spat_pixpo object spatial posit pixel reduc imag spat_fracpo fraction locat object slit box_width width arcsec boxcar opt_fwhm spatial fwhm arcsec optim extract object sn signaltonois ratio snr optim extract object optim extract perform report snr boxcar extract object wv_rm rm pixel wavelength solut addit reduc docdeimo docmosfir data slitmask design match perform maskdef_id objnam objra objdec maskdef_extract also provid spectrum see refradec_object_report current data model intern spectrum singl object held classpypeitspecobjspecobj class datamodel written astropyiofitsbintablehdu_ specd fit file naming_ addit one classpypeitimagesdetector_containerdetectorcontain written fit extens name eg detdetector detector least one spectrum extract wavelength vacuum multipl classpypeitspecobjspecobj object held inter classpypeitspecobjsspecobj object includ includedatamodel_specobjrst mastertilt overview file describ data model mastertilt_ imag optic spectrograph typic combin input arc frame nearir spectrograph like one scienc frame imag written disk multiextens fit file prefix mastertilt_ master folder see refmastersmast name name convent inspect first extens combin imag view standard imag viewer eg ginga mastersmastertilt_a__fit often use one tilt frame appear similar raw imag stack sever output could quit differ imag also trim portion raw imag also reorient vertic spectral dimens blue bottom screen shot ginga view exampl shane_kast_r spectrograph imag figuresarc_imagepng actual cheat docmaster_arc imag ident instrument troubl shoot imag appear err thing consid one input tilt frame junk one input tilt frame mislabel current tiltimag data model intern imag held classpypeittiltimagetiltimag classpypeitimagespypeitimagepypeitimag classpypeitdatamodeldatacontain datamodel written disk includ includedatamodel_tiltimagerst includ includelinksrst _instal instal relev link pypeit user slack provid detail instruct instal pypeit troubleshoot pleas consult pypeit user commun via pypeit user slack andor submit issu httpsgithubcompypeitpypeitissues__ github content tabl content depth local _user user instal _environ setup clean python environ method discuss instal pypeit via pip_ conda_ also instal upgrad refdepend reason highli recommend first set clean python environ instal pypeit mitig possibl depend conflict packag use setup new python environ use virtualenv_ codeblock consol virtualenv pypeit sourc pypeitbinactiv conda_ codeblock consol conda creat n pypeit python conda activ pypeit see virtualenv document httpsvirtualenvpypaioenlatest_ andor manag environ conda httpsdocscondaioprojectscondaenlatestuserguidetasksmanageenvironmentshtml_ detail see also virtualenvwrapp httpsvirtualenvwrapperreadthedocsioenlatest_ option easili manag virtualenv_ environ instal via pip recommend instal latest releas pypeit requir depend execut either codeblock consol pip instal pypeitpyqt select pyqt qt bind codeblock consol pip instal pypeitpysid select pysid see refinteract gener datacub perform astrometr correct also need scikitimage_ packag instal includ option depend eg codeblock consol pip instal pypeitpysidescikitimag note whether correct syntax use quot command depend shell command specif zshell wherea dont need quot bash case avoid copi command browser sinc unicod quotat mark may correct lead error directli past termin window instal via conda conda_ popular widelyus packag environ manag provid yaml file use setup conda environ call pypeit contain requir depend use download environmentyml httpsgithubcompypeitpypeitblobreleaseenvironmentyml__ creat conda environ codeblock consol conda env creat f environmentyml activ codeblock consol conda activ pypeit verifi new environ instal correctli codeblock consol conda env list instal latest pypeit via pip perform develop instal instal latest releas condaforg codeblock consol conda instal c condaforg pypeit instal prefer qt bind either via pip via conda codeblock consol conda instal c condaforg pyqt codeblock consol conda instal c condaforg pysid upgrad new version upgrad pypeit simpli matter execut codeblock consol pip instal pypeit upgrad codeblock consol conda instal pypeit upgrad depend first instal pypeit caus problem eg new pypeit script unavail encount script error first tri uninstal eg pip uninstal pypeit reinstal _data_instal addit data data use pypeit kept github repositori distribut via pip_ larg size includ raw data includ develop suit use extens test code base atmospher model grid use tellur correct flux calibr can datareduct product use quicklook script locat openaccess pypeit devsuit googl drive_ note continu work cleaner instal solut data product particularli tellur grid quicklook master file meantim note like need rerun dataspecif instal script describ everi time upgrad instal via pip_ conda_ raw data exampl raw data support spectrograph use extens test code base develop see refdevsuit gener user need access data howev may use learn use pypeit run data instrument data store raw_data directori pypeit devsuit googl drive_ divid subdirectori instrument instrument setup see also pypeitdevelopmentsuite_ github repositori includ docpypeit_fil instrument setup use develop test _install_atmospher atmospher model grid calcul sensit function ir instrument gener fit tellur absorpt use grid model atmospher spectra model grid provid tellur directori pypeit devsuit googl drive_ rang size gb file provid model spectra atmospher condit specif observatori howev model grid provid observatori spectrograph support pypeit find model observatori use maunakea model approxim includ larg grid differ paramet good enough purpos instal model grid download relev file tellur directori pypeit devsuit googl drive_ run pypeit_install_tellur script exampl youv download telfit_maunakea___rfit my_path would execut codeblock consol pypeit_install_tellur path my_path codeblock consol cd my_path pypeit_install_tellur pypeit_install_tellur script simpli search telfit file path provid creat symlink file pypeitdatatelluricatm_grid directori instal pypeit warn instal script simpli creat symlink download data mean move origin data symlink becom broken need rerun instal script quicklook master file quicklook reduct provid pypeit requir can master file speed datareduct process appropri quicklook result file host ql_master directori pypeit devsuit googl drive_ instal quicklook master file rightclick ql_master folder pypeit devsuit googl drive_ select download option dropdown menu download zip file contain full directori content current size juli mb run pypeit_install_ql_mast script eg codeblock consol pypeit_install_ql_mast zip downloadsql_masterstzzip odir my_path pypeit_install_ql_mast script unzip download file my_path directori creat symlink extract directori pypeitdata directori pypeit instal script automat delet zip file use rmzip option alreadi ql_master directori also use script simpli creat symlink use ql_path option warn instal script simpli creat symlink download data mean move origin data symlink becom broken need rerun instal script _note import packag note _interact interact tool interact tool pypeit built use qt httpswwwqtio_ window toolkit qtpi packag use provid abstract interfac two wide use qt bind python see refdepend pyqt httpsriverbankcomputingcomsoftwarepyqtintro_ pysid httpswikiqtioqt_for_python_ least one bind must instal inter gui work instal two packag play nice togeth strongli recommend use pyqt unless attract flexibl licens pysid provid pysid occasion caus gui crash conflict packag environ use pyqt reason isol pypeit instal environ c code signific speed gain pypeit enabl via compil c version bspline fit code compil c code happen automat instal pypeit howev check c code compil success run pypeit_c_en script see codeblock consol pypeit_c_en success import bspline c util messag print c code could import note problem instal c code code still run success fall back slower purepython implement success compil c code may need updat gcc andor xcode mac user mac user may also need updat os your use particularli old version eg yosemit ginga plugin pypeit requir ginga viewer use least one ginga plugin enabl specif display function special consider need plugin instal howev check theyr enabl run follow script follow result pypeit_chk_plugin info requir plugin found slitwavelength check unsuccess see error messag list miss plugin problem pleas submit issu httpsgithubcompypeitpypeitissues__ _depend packag depend pypeit depend instal along instal pypeit bewar mean packag current environ may updat depend pypeit version requir recommend refenviron pypeit current version requir user develop includ includedependencies_tablerst depend caveat user run follow complic instal pypeit depend run pleas submit issu httpsgithubcompypeitpypeitissues__ first item still true moment implicit depend qt bind remain either pyqt pysid depend linetool note shape provid option depend current use one method calcul spaxel area kcwi output datacub _developer_instal develop instal cours welcom encourag commun develop pypeit pleas see refcodeconduct refdevelop instal via pip instal prereleas develop version pypeit directli github httpsgithubcompypeitpypeit_ use pip follow alreadi pypeit environ setup run codeblock consol pip instal upgrad githttpsgithubcompypeitpypeiteggpypeit your instal clean environ sure includ option depend well codeblock consol pip instal upgrad githttpsgithubcompypeitpypeiteggpypeitpyqtshap command instal default branch releas also specifi differ branch main develop branch codeblock consol pip instal upgrad githttpsgithubcompypeitpypeitgitdevelopeggpypeitpyqtshap commit hash tag name git ref also specifi see vc support document httpspippypaioenstablereferencepip_installvcssupport_ detail exampl instal sourc develop code develop like want set edit instal point local check copi github repositori highli recommend use pip instal repositori refenviron code develop instal sourc set python enviro first clone repositori codeblock consol git clone httpsgithubcompypeitpypeitgit instal code includ develop depend codeblock consol cd pypeit pip instal e devpyqt edit instal mean chang make repositori directori tree becom immedi avail next time code import includ dev set option depend ensur tool need test build pypeit instal pyqt instal option instruct script use pyqt qt backend note may may need quot depend shell avoid cut past command termin window final may want add line relev shell configur file eg zshrc bashrc activ relev environ whenev start new shell exampl codeblock consol conda activ pypeit otherwis need alway type command termin prompt activ pypeit environ _test_instal test instal tag version pypeit extens test distribut howev worth test instal success follow user test basic test pypeit properli instal get help dialog one main execut ie termin widow type codeblock consol run_pypeit h second basic test tri import pypeit within python session exampl codeblock consol python import pypeit develop test perform develop instal clone repositori local directori eg pypeit run standard unit test within pypeit environ execut codeblock consol cd pypeit pytest among core develop use tox use ci test recommend user test within isol environ differ version variou depend recommend use tox codeblock consol cd pypeit tox e test eg codeblock consol tox e testastropydev run tox see list avail test environemt either case test pass nearli skip none fail skip test run pypeit develop instal configur see refdevsuit pypeit cookbook overview document give overview run pypeit ie minim detail provid alreadi dealt docinstal follow outlin standard step run pypeit batch data altern way run step nonexpert adher follow approach point note get start spectrograph echel everi place read slit think order also tend use spectrograph instrument interchang setup configur specif advic docspectrograph provid doc page invari someth date see egregi exampl holler github slack grab buff comput recommend one least gb ram might enough manydetector instrument eg docdeimo multiprocessor good although portion code run parallel organizeprepar data word calibr data pypeit drp work smoothli taken data good set calibr eg bia frame option flat without satur arc mostal lamp without substanti satur slitmask design without overlap slit sensibl detector bin window data poor calibr frame alway hard reduc pleas take extra care insur tri reduc data bad calibr primari failur mode pypeit heaven help mix bin grate tilt etc calibr scienc although support instrument necess organ raw data pypeit handl one night data mix grate tilt mask probabl find easier isol one set file time includ mask mask multislit observ recommend place scienc calibr one folder copi bia dark frame folder need refer folder rawdir raw imag gzipcompress although python fit reader work much slowli gzip file setup first script run pypeit refpypeit_obslog refpypeit_setup examin raw file gener sort list file specif refpypeit_setup instruct creat one docpypeit_fil per instrument configur docpypeit_fil requir input file pypeit reduc data complet instruct provid docsetup edit pypeit file end setup enter one gener subfold name configur wish reduc eg cd keck_lris_blue_a within folder docpypeit_fil eg keck_lris_blue_apypeit guid main reduct pypeit see docpypeit_fil doc tip check edit file run reduct pypeit intend current abl endtoend run calibr spectra scienc standard star frame docrun doc describ process bit detail detail regard calibr output see docobject_find docextract tipscustom examin calibr code run new calibr gener default write disk docmast file addit file written docqa folder inspect encourag inspect calibr output come term docmast refer output file calibr data appear master folder see refmasternam detail name convent order tend creat separ doc view look like troubleshoot view docmaster_bia imag produc one view docmaster_arc imag check slit edg docmaster_edg file view docmaster_tilt imag check wavelength solut docmaster_wvcalib output check wavelength solut docmaster_tilt output check docmaster_flat imag note subset file may made depend spectrograph calibr file input examin spectra eventu patient code start gener spectra output one per standard scienc frame locat scienc folder examin spectral imag docout_specd examin extract spectra docout_specd miss spectra mean pypeit find object correspond frame may need modifi paramet docpypeit_fil docreduction_tip tune paramet relat extract sky subtract spectra flux pypeit provid routin docflux spectra run separ main run note twostag process one gener sensit function one appli coad script coad spectra undocu doccoaddd case ifu reduct script coadd reduc specd file combin datacub see doccoaddd run separ main run highlight rest _configobj httpconfigobjreadthedocsioenlatest _pypeitpar pypeit paramet pypeit allow custom execut without chang code directli although ubiquit option argument pypeit algorithm contain within classpypeitparpypeitparpypeitpar superset pypeit use configobj_ class pars usersuppli argument refpypeit_fil instanc classpypeitparpypeitparpypeitpar pass pypeit main modul syntax use set paramet use refpypeit_fil import nest paramet chang must match current pypeitpar paramet hierarchy_ importantli instrument serv provid default valu classpypeitparpypeitparpypeitpar defin default_pypeit_par method eg funcpypeitspectrographsshane_kastshanekastspectrographdefault_pypeit_par paramet user wish differ default set specifi instrument need chang via refpypeit_fil instrumentspecif default configuration_ list warn default valu paramet actual point data file provid pypeit eg spectrum paramet classpypeitparpypeitparflexurepar root directori point relev locat disk whoever gener document differ instal _change_par chang paramet chang paramet set valu begin pypeit file syntax configur block import indent indent make block easier read pypeit file begin line set spectrograph rdx spectrograph keck_deimo nest pypeit paramet illustr current pypeitpar paramet hierarchy_ section exampl chang variou paramet addit exampl see instrumentspecif default configuration_ section chang threshold use detect slitord edg add calibr slitedg edge_thresh chang exposur time rang use identifi arc flatfield frame increas la cosmic sigmaclip threshold arc frame add calibr arcfram exprng none process sigclip pixelflatfram exprng chang imag process paramet frame type chang baselevel imag process paramet appli frame type use baseprocess paramet group allow set paramet instead includ line pypeit file frame type frametypespecif alter still made overwrit baselevel process paramet exampl chang sigmaclip level use la cosmic routin default use valu arc frame add follow pypeit file baseprocess sigclip calibr arcfram process sigclip current pypeitpar paramet hierarchi pypeitpar keywords_ rdx reduxpar keywords_ calibr calibrationspar keywords_ biasfram framegrouppar keywords_ process processimagespar keywords_ darkfram framegrouppar keywords_ process processimagespar keywords_ arcfram framegrouppar keywords_ process processimagespar keywords_ tiltfram framegrouppar keywords_ process processimagespar keywords_ pixelflatfram framegrouppar keywords_ process processimagespar keywords_ pinholefram framegrouppar keywords_ process processimagespar keywords_ alignfram framegrouppar keywords_ process processimagespar keywords_ align alignpar keywords_ tracefram framegrouppar keywords_ process processimagespar keywords_ illumflatfram framegrouppar keywords_ process processimagespar keywords_ skyfram framegrouppar keywords_ process processimagespar keywords_ standardfram framegrouppar keywords_ process processimagespar keywords_ flatfield flatfieldpar keywords_ wavelength wavelengthsolutionpar keywords_ slitedg edgetracepar keywords_ tilt wavetiltspar keywords_ sciencefram framegrouppar keywords_ process processimagespar keywords_ reduc reducepar keywords_ findobj findobjpar keywords_ skysub skysubpar keywords_ extract extractionpar keywords_ manual manualextractionpar keywords_ cube cubepar keywords_ slitmask slitmaskpar keywords_ flexur flexurepar keywords_ fluxcalib fluxcalibratepar keywords_ coaddd coadddpar keywords_ coaddd coadddpar keywords_ sensfunc sensfuncpar keywords_ uvi sensfuncuvispar keywords_ ir telluricpar keywords_ tellur telluricpar keywords_ collat collatedpar keywords_ pypeitpar keyword class instanti classpypeitparpypeitparpypeitpar key type option default descript calibr classpypeitparpypeitparcalibrationspar calibrationspar keywords_ paramet calibr algorithm coaddd classpypeitparpypeitparcoadddpar coadddpar keywords_ par set control coadd use afterburn script coaddd classpypeitparpypeitparcoadddpar coadddpar keywords_ par set control coadd use afterburn script collat classpypeitparpypeitparcollatedpar collatedpar keywords_ par set control collat spectra use afterburn script flexur classpypeitparpypeitparflexurepar flexurepar keywords_ paramet use flexurecorrect procedur flexur correct perform default turn either set paramet flexur paramet group set flexur true rdx paramet group use default flexurecorrect paramet fluxcalib classpypeitparpypeitparfluxcalibratepar fluxcalibratepar keywords_ paramet use fluxcalibr procedur flux calibr perform default turn either set paramet fluxcalib paramet group set fluxcalib true rdx paramet group use default fluxcalibr paramet rdx classpypeitparpypeitparreduxpar reduxpar keywords_ pypeit reduct rule reduc classpypeitparpypeitparreducepar reducepar keywords_ paramet determin skysubtract object find extract sciencefram classpypeitparpypeitparframegrouppar framegrouppar keywords_ frame combin rule scienc observ sensfunc classpypeitparpypeitparsensfuncpar sensfuncpar keywords_ par set control sensit function comput use afterburn script tellur classpypeitparpypeitpartelluricpar telluricpar keywords_ par set control tellur fit use pypeit_sensfunc pypeit_tellur afterburn script calibrationspar keyword class instanti classpypeitparpypeitparcalibrationspar key type option default descript alignfram classpypeitparpypeitparframegrouppar framegrouppar keywords_ frame combin rule align frame align classpypeitparpypeitparalignpar alignpar keywords_ defin procedur align trace arcfram classpypeitparpypeitparframegrouppar framegrouppar keywords_ frame combin rule wavelength calibr biasfram classpypeitparpypeitparframegrouppar framegrouppar keywords_ frame combin rule bia correct bpm_usebia bool fals make bad pixel mask bia frame bia frame must provid darkfram classpypeitparpypeitparframegrouppar framegrouppar keywords_ frame combin rule darkcurr correct flatfield classpypeitparpypeitparflatfieldpar flatfieldpar keywords_ paramet use set flatfield procedur illumflatfram classpypeitparpypeitparframegrouppar framegrouppar keywords_ frame combin rule illumin flat master_dir str master provid name folder write master file path pinholefram classpypeitparpypeitparframegrouppar framegrouppar keywords_ frame combin rule pinhol pixelflatfram classpypeitparpypeitparframegrouppar framegrouppar keywords_ frame combin rule pixel flat raise_chk_error bool true rais error calibr check fail setup str mastersforc setup name use eg c__aa detector number ignor inform must match master frame master frame folder skyfram classpypeitparpypeitparframegrouppar framegrouppar keywords_ frame combin rule sky background observ slitedg classpypeitparpypeitparedgetracepar edgetracepar keywords_ slitedg trace paramet standardfram classpypeitparpypeitparframegrouppar framegrouppar keywords_ frame combin rule spectrophotometr standard observ tiltfram classpypeitparpypeitparframegrouppar framegrouppar keywords_ frame combin rule wavelength tilt tilt classpypeitparpypeitparwavetiltspar wavetiltspar keywords_ defin trace slit tilt use trace frame tracefram classpypeitparpypeitparframegrouppar framegrouppar keywords_ frame combin rule imag use slit trace wavelength classpypeitparpypeitparwavelengthsolutionpar wavelengthsolutionpar keywords_ paramet use deriv wavelength solut alignpar keyword class instanti classpypeitparpypeitparalignpar key type option default descript locat list ndarray locat bar list specifi fraction slit width sig_thresh int float signific threshold find align trace lownumb ensur algorithm find bar algorithm willthen use n signific detect n numberof element specifi locat keyword argument trace_npoli int order polynomi use fit trace singl bar trim_edg list trim slit number pixel leftright find align bar flatfieldpar keyword class instanti classpypeitparpypeitparflatfieldpar key type option default descript illum_it int number reject iter perform construct slitillumin profil reject iter perform warn function still test illum_rej int float sigma threshold use reject iter use refin slitillumin profil reject iter perform illum_it method str bspline skip bspline method use flat field data use skip skip flatfield option none bspline skip pixelflat_fil str filenam imag use pixellevel field flatten pixelflat_max_wav int float valu normal pixel flat set wavelength valu pixelflat_min_wav int float valu normal pixel flat set wavelength valu rej_sticki bool fals propag reject pixel stage flatfield fit ie spectral fit spatial fit final residu fit fals pixel reject stage includ subsequ stage saturated_slit str crash mask continu crash behavior slit encount larg fraction satur pixel flatfield option crash rais error halt data reduct mask mask slit mean scienc data extract slit continu ignor flatfield correct continu reduct slit_illum_pad int float number pixel pad slit edg construct slitillumin profil singl valu appli edg slit_illum_ref_idx int index refer slit index use estim rel spectral sensit rel blaze thisparamet use slit_illum_rel true slit_illum_rel bool fals gener imag rel spectral illuminationfor multislit setup set use_slitillum true frame use flatfield model must set true slit_trim int float tupl number pixel trim side slit select pixel use fit spectral respons function singl valu use slit edg twotupl use trim left right side differ spat_samp int float spatial sampl slit illumin function width median filter pixel use determin slit illumin function thu set minimum scale illumin function featur spec_samp_coars int float bspline break point space unit pixel bsplinepolynomi fit flat field imag residu larg number unless tri fit sky flat lot narrow spectral featur spec_samp_fin int float bspline break point space unit pixel spectral fit flat field blaze function tweak_slit bool true use illumin flat field tweak slit edg work even illumflatten set fals tweak_slits_maxfrac float tweak_slit true set maximum fraction amount slit width allow trim ie left right slit boundari ie default mean slit would shrink grow side tweak_slits_thresh float tweak_slit true set illumin function threshold use tweak slit boundari base illumin flat number less twod_fit_npoli int order polynomi use bsplinepolynomi fit flatfield imag residu code determin order polynomi slit automat depend slit width default none alter paramt risk edgetracepar keyword class instanti classpypeitparpypeitparedgetracepar key type option default descript add_slit str list add one userdefin slit syntax defin slit add detspecspat_leftspat_right detdetector specspectr pixel spat_leftspati pixel left slit boundari spat_righspati pixel right slit boundari exampl add slit detector pass spec extend spatial anoth detector spec extend auto_pca bool true autom trace attempt construct pca decomposit trace true edg trace result initi detect centroid refin polynomi fit must meet set criteria perform pca see funcpypeitedgetraceedgetracesetcan_pca fals sync_predict paramet set pca valu set nearest warn issu valid paramet set bound_detector bool fals code readi synchron leftright trace edg trace construct vet clean sometim lead valid trace paramet dictat next bound_detector true code artifici add left right edg bound detector fals code identifi slitedg trace unsuccess warn user end grace note set bound_detector true need longslit data slit edg fact beyond edg detector clip bool true remov trace flag bad instead mask current use funcpypeitedgetraceedgetracesetcentroid_refin det_buff int minimum separ detector edg slit edg ad edg trace must posit det_min_spec_length int float minimum spectral length fraction detector size trace determin direct measur detector data oppos includ model approach see fit_min_spec_length edge_detect_clip int float sigma clip level peak detect collaps sobelfilt signific imag edge_thresh int float threshold find edg sobelfilt signific imag exclude_region list str userdefin region exclud slit trace set paramet text comma separ list pixel rang x direct exclud detector number exampl follow string would select two region det pixel filt_it int number medianfilt iter perform sqrttrace imag appli sobel filter detect slitord edg fit_funct str polynomi legendr chebyshev legendr function fit edg measur option polynomi legendr chebyshev fit_maxdev int float maximum deviat fit measur edg posit reject spatial pixel fit_maxit int maximum number reject iter edg fit fit_min_spec_length float minimum unmask spectral length trace slit edg use model procedur polynomi fit pca decomposit fit_nit int number iter remeasur refit edg data see funcpypeitcoretracefit_trac fit_ord int order function fit edg measur follow_span int initi connect spectral adjac edg detect set number previou spectral row consid follow slit forward fwhm_gaussian int float fwhm paramet use use gaussian weight funcpypeitcoretracefit_trac refin pca predict edg see descript funcpypeitcoretracepeak_trac fwhm_uniform int float fwhm paramet use use uniform weight funcpypeitcoretracefit_trac refin pca predict edg see descript funcpypeitcoretracepeak_trac gap_offset int float offset pixel use slit edg gap width insert slit edg see sync_cent nudg predict slit edg avoid slit overlap larger minimum_slit_gap convert arcsecond left_right_pca bool fals construct pca decomposit left right trace separ import crossdispers echel spectrograph eg kecknir length_rang int float allow rang slit length compar median slit length exampl valu mean slit length vari rel shorter longer slit mask clip use echel multislit data slit similar ident length maskdesign_maxsep int float maximum allow offset pixel slit edg defin slitmask design trace edg maskdesign_sigrej int float number sigma sigmaclip reject slitmask design match maskdesign_step int float step pixel use gener list possibl offset within maskdesign_maxsep slit edg defin mask design trace edg match_tol int float samesid slit edg separ pixel consid part edg max_nudg int part predict trace fall detector edg allow nudg away detector edg includ maximum number pixel none limit set otherwis larger max_shift_ab int float maximum spatial shift pixel input edg locat recentroid valu max_shift_adj int float maximum spatial shift pixel edg adjac spectral posit max_spat_error int float maximum error spatial posit edg pixel minimum_slit_gap int float minimum slit gap arcsec gap slit determin median differ right left edg locat adjac slit slit small gap merg remov interven tracesif none minimum slit gap appli smaller gap_offset convert pixel minimum_slit_length int float minimum slit length arcsec slit length determin median differ left right edg locat unmask trace locat use identifi trace erron match togeth form slit short slit expect ignor remov see clip none minimum slit length appli minimum_slit_length_sci int float minimum slit length arcsec scienc slit slit length determin median differ left right edg locat unmask trace locat use combin minimum_slit_length paramet use identifi box align slit ie slit shorter minimum_slit_length_sci larger minimum_slit_length boxalign slit box slit never remov see clip spectra extract none minimum scienc slit length appli niter_gaussian int number iter funcpypeitcoretracefit_trac use use gaussian weight niter_uniform int number iter funcpypeitcoretracefit_trac use use uniform weight order_match int float echel spectrograph toler allow match identifi slit echel order must fraction detector spatial scale ie valu mean order locat must within expect valu none limit use order_offset int float offset introduc expect order posit improv match specif data addit offset measur slit posit ie minim differ expect order posit selfslit_spatial_cent offset must fraction detector spatial scale none offset appli pad int integ number pixel consid beyond slit edg select pixel slit pca_funct str polynomi legendr chebyshev polynomi type function fit pca coeffici compon option polynomi legendr chebyshev pca_maxit int maximum number reject iter fit pca coeffici pca_maxrej int maximum number pca coeffici reject given fit iter pca_min_edg int minimum number edg trace requir perform pca decomposit trace form left_right_pca true minimum appli number left right trace separ pca_n int number pca compon keep must less number detect trace provid determin calcul minimum number compon requir explain given percentag varianc edg data see pca_var_perc pca_ord int order function fit pca coeffici pca_sigrej int float list sigma reject threshold fit pca compon individu number use lower upper reject list two number set explicitli eg pca_var_perc int float percentag ie fraction varianc edg data account pca use truncat number pca coeffici keep see pca_n ignor pca_n provid directli rm_slit str list remov one userspecifi slit syntax use defin slit remov detspecspat detdetector specspectr pixel spatspati pixel exampl remov slit detector contain pixel spatspec detector contain pixel smash_rang list rang slit spectral direct fraction unit smash search slit edg spectrum cover portion imag use rang sobel_mod str nearest constant nearest mode sobel filter default nearest note findconst work best deimo sync_cent str median nearest gap median mode use determin locat trace insert use median use median match left right edg pair nearest use length nearest slit gap offset fix gap width next slit edg sync_predict str pca nearest pca mode use predict form trace insert use pca use pca decomposit nearest reproduc shape nearest trace sync_to_edg bool true ad first left edg last right edg ignor center_mod edg place edg detector relev shape trace_median_frac int float detect peak rectifi sobelfilt imag refit edg trace rectifi imag median filter kernel width trace_median_fracnspec along spectral dimens trace_thresh int float rectif median filter sobelfilt imag see trace_median_frac valu medianfilt imag threshold mask refit edg trace data none mask appli use_maskdesign bool fals use slitmask design identifi slit wavetiltspar keyword class instanti classpypeitparpypeitparwavetiltspar key type option default descript cont_rej int float list ndarray sigma threshold reject singl number two number give low high sigma reject respect funcd str legendr type function fit idsonli bool fals use arc line identifi wavelength trace tilt current use maxdevd int float maximum absolut deviat unit fwhm reject threshold use determin pixel global fit arc line tilt reject deviat model valu maxdev_tracefit int float maximum absolut deviat unit fwhm legendr polynomi fit individu arc line tilt fit iter trace fit flux weight gaussian weight minmax_extrap list ndarray set far last measur tilt line extrapol tracewavefit_tilt nfwhm_neigh int float requir separ neighbor arc line consid tilt trace unit spectral fwhm see wavelength parset fwhm defin rm_continuum bool fals trace line center spatial posit remov loword continuum spectra sig_neigh int float signific threshold arc use line identif purpos identifi neighbor linesth tracethresh paramet determin signific threshold line trace line must least nfwhm_neigh fwhm away neighbor line paramet determin signific line must consid possibl collid neighbor low valu sig_neigh result overal larger number line result line tracethresh get reject sigrejd int float outlier reject signific determin pixel fit arc line tilt reject global fit sigrej_trac int float outlier reject signific determin trace arc line includ global fit spat_ord int float list ndarray order legendr polynomi fit tilt arc line paramet determinesboth orer individu arc line tilt well order spatial direct thed legendr polynomi spatial spectral fit obtain global solut tilt across theslitord singl number listarray provid valu slit spec_ord int float list ndarray order spectral direct legendr polynomi spatial spectral fit obtain global solut tilt across slitord singl number listarray provid valu slit tracethresh int float list ndarray signific threshold arc use trace wavelength tilt singl number listarray provid valu slitord wavelengthsolutionpar keyword class instanti classpypeitparpypeitparwavelengthsolutionpar key type option default descript idpixel int float list one pixel manual identifi line idwav int float list wavelength manual identifi line cc_local_thresh float threshold local crosscorrel coeffici evalu reidentifi line input spectrum shift stretch archiv spectrum line must consid good line reidentif local crosscorrel evalu candid reidentifi line use window nlocal_cc use score reidentifi line arriv final set good reidentif cc_thresh float list ndarray threshold global crosscorrel coeffici input spectrum member archiv requir attempt reidentif spectra archiv lower crosscorrel use reidentif singl number listarray provid valu slit disp float dispers backward compat basic semibrut algorithm ech_fix_format bool true fix format echel reidentif assum order data align singl order reid arxiv ech_norder_coeff int echel spectrograph order final fit order dimens ech_nspec_coeff int echel spectrograph order final fit spectral dimens choos n_final fit individu order ech_sigrej int float echel spectrograph sigmaclip reject threshold fit spectral order dimens echel bool fals echel spectrograph ye addit fit wavelength fit perform function spectral pixel order number improv wavelength solut func str legendr function use wavelength solut fit fwhm int float spectral sampl arc line fwhm arclin unbin pixel fwhm_fromlin bool fals estim spectral resolut slit use arc line true estim fwhm overrid fwhm determin wavelength solut ie wavetilt lamp list name one ion use wavelength calibr use none calibr choos use_head use list lamp record header arc frame current avail keck deimo match_tol float match toler pixel search new line differ pixel wavlength assign arc line iter wavelength solut wavelength line list paramet also use match toler pixel line reidentif good line match must match within toler shift stretch archiv spectrum archiv wavelength solut match must within match_tol dispers element line line list method str simpl semibrut basic holygrail identifi reidentifi full_templ holygrail method use fit individu arc line note avail method use unstabl requir signific paramet tweak succeed useeith holygrail reidentifi holygrail attempt get first guess line id look pattern line locat fulli autom work work well howev fail catastroph instead reidentifi prefer method requir archiv wavelength solut specif instrumentgr combin refer use anchor wavelength solut data reduc option simpl semibrut basic holygrail identifi reidentifi full_templ n_final int float list ndarray order final fit wavelength solut n_final paramet fit singl number listarray provid valu slit n_first int order first guess fit wavelength solut nfitpix int number pixel fit deriv centroid arc line odd number best nlocal_cc int size pixel window use local crosscorrel comput arc line odd number one ad make odd nreid_min int minimum number time given candid reidentifi line must properli match line arxiv consid good reidentif lot duplic arxiv spectra question ie multislit set number like echel depend number solut arxiv set fix format echel spectrograph echel tiltabl grate depend number solut arxiv nsnippet int number spectra chop arc spectrum method full_templ numsearch int number brightest arc line search preliminari identif refer str arc sky pixel arc perform wavelength calibr arc sky frame use pixel wavelength solut reffram str observ heliocentr barycentr heliocentr frame refer wavelength calibr option observ heliocentr barycentr reid_arxiv str name archiv wavelength solut file use wavelength reidentif use method reidentifi rms_threshold float list ndarray minimum rm keep slitord solut singl number listarray provid valu slit use method either holygrail reidentifi sigdetect int float list ndarray sigma threshold fluctuat arclin detect arc continuum subtract fluctuat comput continuum subtract singl number vector list numpi array provid detect threshold slit sigrej_fin float number sigma reject final guess wavelength solut sigrej_first float number sigma reject first guess wavelength solut use_instr_flag bool fals true restrict line match instrument warn implement shane_kast_r holygrail use unless realli know wv_cen float central wavelength backward compat basic semibrut algorithm wvrng_arxiv list cut arxiv templat specifi wavelength rang minmax coadddpar keyword class instanti classpypeitparpypeitparcoadddpar key type option default descript coaddfil str output filenam ex_valu str opt extract coadd ie optim boxcar must either opt box filter str none filter scale see flux_calibload_fitler_fil name ignor none filter_mag float magnitud sourc given filter filter_mask str list list wavelength region mask scale ie occasion junk pixelscolon comma separate eg flux_valu bool true true default code coadd flux spectra ie flam specd file fals coadd count lower int float lower reject threshold use reject pixel combin spectra unit sigma mag_typ str ab magnitud type ab option current allow maxiter_reject int maximum number iter stack reject code stop iter either output mask chang betweeen success iter maxiter_reject reach maxiter_scal int maximum number iter perform rescal spectra maxrej int coad perform iter reject compar exposur preliminari stack exposur paramet set reject maxrej pixel per iter reject default none mean maximum reject pixel nbest int number order use estim per exposur weight default none use one fourth total number order use echel nmaskedg int number edg pixel mask removedfix ref_percentil int float percentil use select minimum snr cut refer spectrum use robustli determin median ratio spectra paramet use coadddrobust_median_ratio part automat rescal procedur pixel percentil cut deem good pixel use comput ratio two spectra must number scale_method str auto method use rescal spectra prior coad option auto determin scale method automat base sn ratio work wellpoli polynomi rescalingmedian median rescalingnon rescalehand pass hand scale factor option well test sensfuncfil str file contain sensit function requir echel coadd use echel sigrej_scal int float reject threshold use reject pixel rescal spectra scale_spec sn_clip int float error cap reject sn never greater sn_clip prevent overli aggress reject high sn ratio spectrum neverthless differ level greater formal sn due systemat sn_min_medscal int float scale method set auto set minimum snr median scale attempt sn_min_polyscal int float scale method set auto set minimum snr polynomi scale attempt sn_smooth_npix int float number pixel median filter comput sn use decid scale weight spectra set none default code determin effect number good pixel per spectrum stack coad use neff spec_samp_fact float make wavelength grid sampl finer spec_samp_fact coarser spec_samp_fact sampl factor basic multipl nativ spectral pixel spec_samp_fact ie unit spec_samp_fact pixel upper int float upper reject threshold use reject pixel combin spectra unit sigma wave_method str linear method use construct wavelength grid coad spectra routin creat wavelength funcpypeitcorewavecalwvutilsget_wave_grid option iref use first wavelength arrayveloc grid uniform velocitylog grid uniform logwavethi velocitylinear grid uniform lambaconcaten meld input wavelength array coadddpar keyword class instanti classpypeitparpypeitparcoadddpar key type option default descript offset list userinput list offset imag combin spat pixel use_slitswvgrid bool fals true use slit set trace center weight str list auto mode weight use coadd imag see coadddpi option collatedpar keyword class instanti classpypeitparpypeitparcollatedpar key type option default descript archive_root str path file metadata archiv dry_run bool fals set script display match file object id flux coadd archiv exclude_serendip bool fals whether exclud serendip object collat exclude_slit_trace_bm list str list slit trace bitmask bit exclud match_us str radec determin spectra match object must either pixel radec outdir str userswestfallworkpackagespypeitdoc path coad output file report file place pypeit_fil str pypeit file place archiv use archive_root specifi default look parent directori specd file toler str float toler use compar coordin object two object within distanc consid object match_us radec default angular distanc default unit arcsecond unit support astropycoordinatesangl usedeg hm match_us pixel float flexurepar keyword class instanti classpypeitparpypeitparflexurepar key type option default descript multi_min_sn int float minimum sn analyz sky spectrum flexur spec_maxshift int float maximum allow spectral flexur shift pixel spec_method str boxcar slitcen skip skip method use correct flexur use skip correct slitcen use flexur correct perform extract object recommend option none boxcar slitcen skip spectrum str userswestfallworkpackagespypeitpypeitdatasky_specparanal_skyfit archiv sky spectrum use flexur correct fluxcalibratepar keyword class instanti classpypeitparpypeitparfluxcalibratepar key type option default descript extinct_correct bool default behavior atmospher extinct correct uvi algorithm use correct tellur absorpt atmospher extinct model use correct extinct wherea ir algorithm use extinct correct appli sinc atmospher model directli follow thesedefault base algorithm paramet set extinct_correctnon instead paramet set overid default behavior word forc extinct correctionif extinct_correcttru perform extinct correct extinct_correctfals extrap_sen bool fals fals default code barf one tri use sensfunc wavelength outsid defin domain chang parsensfuncextrap_blu parsensfuncextrap_r domain extend true code blindli extrapol reduxpar keyword class instanti classpypeitparpypeitparreduxpar key type option default descript calwin int float window time hour search calibr frame scienc frame detnum int list restrict reduct list detector indicesthi use slitspatnum ignore_bad_head bool fals ignor bad header recommend unless know safe qadir str qa directori rel call directori write qualiti assess file redux_path str userswestfallworkpackagespypeitdoc path folder perform reduct default current work directori scidir str scienc directori rel call directori write scienc file slitspatnum str list restrict reduct set slit detspat valu closest slit use exampl syntax slitspatnum rerun code ie modifi one slit must precis spat_id indexthi use detnum sortroot str filenam given output detail sort file none default root name pypeit file output produc spectrograph str spectrograph provid data reduc see refinstru valid option reducepar keyword class instanti classpypeitparpypeitparreducepar key type option default descript cube classpypeitparpypeitparcubepar cubepar keywords_ paramet cube gener algorithm extract classpypeitparpypeitparextractionpar extractionpar keywords_ paramet extract algorithm findobj classpypeitparpypeitparfindobjpar findobjpar keywords_ paramet find object trace algorithm skysub classpypeitparpypeitparskysubpar skysubpar keywords_ paramet sky subtract algorithm slitmask classpypeitparpypeitparslitmaskpar slitmaskpar keywords_ paramet slitmask trim_edg list trim slit number pixel leftright perform sky sub cubepar keyword class instanti classpypeitparpypeitparcubepar key type option default descript astrometr bool true true astrometr correct appli use align frame combin bool true set true input frame combin otherwis separatedatacub gener input specd file dec_max float maximum dec use gener wc none default maximum decbas wc spaxel unit degre dec_min float minimum dec use gener wc none default minimum decbas wc spaxel unit degre flux_calibr bool fals flux calibr data true must also provid standard starcub use standard_cub paramet output_filenam str datacubefit output filenam combin datacub ra_max float maximum ra use gener wc none default maximum rabas wc spaxel unit degre ra_min float minimum ra use gener wc none default minimum rabas wc spaxel unit degre reference_imag str white light imag previous combin datacub white lightimag use refer calcul offset theinput specd file relative_weight bool fals set true combin frame use rel weight schemethi work well common continuum sourc field ofview input observ gener requir highrel precis desir save_whitelight bool fals save white light imag combin datacub output filenamewil given output_filenam variabl suffix _whitelightnot white light imag collaps flux along wavelength axisso spaxel white light imag may differ wavelengthrang slit_spec bool true data use slit one spatial direct set trueif data use fibr spaxel set fals spatial_delta float spatial size spaxel use gener wc arcsecif none default set spectrograph file standard_cub str filenam standard star datacub cube use correctth rel scale slit flux calibr sciencedatacub wave_delta float wavelength step use gener wc angstromsif none default set wavelength solut wave_max float maximum wavelength use gener wc none default ismaximum wavelength base wc spaxel unit angstrom wave_min float minimum wavelength use gener wc none default isminimum wavelength base wc spaxel unit angstrom extractionpar keyword class instanti classpypeitparpypeitparextractionpar key type option default descript boxcar_radiu int float boxcar radiu arcsecond use boxcar extract manual classpypeitparpypeitparmanualextractionpar manualextractionpar keywords_ paramet manual extract model_full_slit bool fals true local sky subtract perform entir slit fals local sky subtract appli restrict region around object set true either multislit observ use narrow slit echel observ narrow slit skip_extract bool fals perform object extract skip_optim bool fals perform boxcar extract ie skip optim local skysub sn_gauss int float sn threshold perform sophist optim extract perform bspline fit object profil sn sn_gauss code simpli optim extractwith gaussian fwhm determin object find std_prof_nsigma float prof_nsigma paramet standard star extract prevent undesir reject use_dmodel_mask bool true mask pixel reject profil fit extractingturn may help bright emiss line use_user_fwhm bool fals boolean indic pypeit use fwhm provid user find_fwhm findobjpar optim extract paramet fals default pypeit estim fwhm detect object use find_fwhm initi guess manualextractionpar keyword class instanti classpypeitparpypeitparmanualextractionpar key type option default descript det list int list detector hand extract must list align spec_spat list neg valu indic neg imag fwhm list float list fwhm pixel hand extract must list align spec_spat spat_spec list str list spatialspectr posit hand extract eg findobjpar keyword class instanti classpypeitparpypeitparfindobjpar key type option default descript cont_sig_thresh int float signific threshold peak detect determinin pixel use iter fit continuum spectral direct smash imag pass sigthresh paramet corearciter_continum extrem narrow slit almost fill object trace set smaller number like ech_find_max_snr int float criteria keep echel object must either maximum sn across order greater valu satisfi min_snr criteria describ min_snr paramet ech_find_min_snr int float criteria keep echel object must either maximum sn across order greater ech_find_max_snr valu must sn ech_find_min_snr ech_find_nabove_min_snr order ech_find_nabove_min_snr int criteria keep echel object must either maximum sn across order greater ech_find_max_snr valu must sn ech_find_min_snr ech_find_nabove_min_snr order find_cont_fit bool true fit continuum illumin pattern across trace rectifi imag mask object search peak initi identifi object find_extrap_npoli int polynomi order use trace extrapol find_fwhm int float indic roughli fwhm object pixel object find find_maxdev int float maximum deviat pixel polynomi fit trace use reject bad pixel trace fit find_min_max list defin minimum maximum object spectral direct thedetector use object find paramet help object onlyha emiss line high redshift trace show part detector find_neg bool identifi neg object object find spectra differenc use manual overrid default behavior pypeit object find set paramet someth noneth default behavior pypeit search neg object trace background frame present pypeit file classifi scienc ie via pypeit_setup b set bkg_id pypeit file background frame presentthat classifi sky pypeit search neg object trace one wishesto explicitli overrid default behavior set paramet true find neg object fals ignor find_npoly_cont int polynomi order fit continuum illumin pattern across trace rectifi imag mask object search peak initi identifi object find_trim_edg list trim slit number pixel leftright find object maxnumb int maximum number object extract scienc frame use none limit sig_thresh int float signific threshold object find skip_second_find bool fals perform one round object find mainli quick_look trace_npoli int order legendr polynomi fit object trace skysubpar keyword class instanti classpypeitparpypeitparskysubpar key type option default descript bspline_spac int float breakpoint space bspline sky subtract fit global_sky_std bool true global sky subtract perform standard star turnedoff exampl nearir reduct narrow slit sinc bright standard canfil slit caus global skysubtract fail situat go straight local skysubtract sinc design deal situat joint_fit bool fals perform simultan joint fit sky region use avail slit load_mask bool fals load userdefin sky region mask use sky region noteif set true must first run pypeit_skysub_region guito manual select store region file mask_by_boxcar bool fals global sky evalu mask sky region around object boxcar radiu set extractionpar no_local_ski bool fals true turn local sky model evalu fit object profil perform optim extract no_poli bool fals turn polynomi basi legendr global sky subtract sky_sigrej float reject paramet local sky subtract user_region str list userdefin sky region mask set use keyword allowth code identifi sky region automat set variabl toan empti string wish set sky region text bea comma separ list percentag appli _all_ slit exampl follow string would select thefirst inner final _all_ slit slitmaskpar keyword class instanti classpypeitparpypeitparslitmaskpar key type option default descript assign_obj bool fals slitmask object gener assign radecnam detect object bright_maskdef_id int maskdef_id correspond dslitid slit_numb deimo mosfir slitmask design respect slit contain bright object use comput slitmask offset paramet option ignor slitmask_offset provid extract_missing_obj bool fals forc extract undetect object locat expect slitmask design pypeit tri determin fwhm flux profil use find_fwhm findobjpar initi guess fwhm determin find_fwhm assum nsig_thrshd int float object detect signific threshold use comput slitmask offset default behaviour deimo unless slitmask_offset bright_maskdef_id use_alignbox set obj_tol int float slitmask design inform provid slit match perform use_maskdesign true edgetracepar paramet provid desir toler arcsec match sourc target object slitmask_offset int float userprovid slitmask offset pixel posit expect slitmask design option set pypeit comput offset use nsig_thrshd bright_maskdef_id use_alignbox bool fals use star align box comput slitmask offset set true pypeit comput offset use nsig_thrshd bright_maskdef_id use_dither_offset bool fals use dither offset record header scienc frame valu slitmask offset current avail keck mosfir reduct set default instrument set pypeit comput offset use nsig_thrshd bright_maskdef_id howev ignor slitmask_offset provid framegrouppar keyword class instanti classpypeitparpypeitparframegrouppar key type option default descript exprng list none none use identifi frame type set minimum maximum allow exposur time must two item list use none indic limit ie select exposur time greater sec use exprng none frametyp str align arc bia dark pinhol pixelflat illumflat scienc standard trace tilt sky scienc frame type option align arc bia dark pinhol pixelflat illumflat scienc standard trace tilt sky process classpypeitparpypeitparprocessimagespar processimagespar keywords_ low level paramet use basic imag process usefram str master calibr file use exist processimagespar keyword class instanti classpypeitparpypeitparprocessimagespar key type option default descript apply_gain bool true convert adu electron use detector gain clip bool true perform sigma clip combin use combinemean comb_sigrej float sigmaclip level cliptru use none automat limit recommend combin str median mean mean method use combin multipl frame option median mean empirical_rn bool fals true use standard deviat overscan region measur empir readnois use nois model grow int float factor expand region cosmic ray detect la cosmic routin lamaxit int maximum number iter la cosmic routin mask_cr bool fals identifi cr mask n_lohi list number pixel reject lowest highest end distribut ie n_lohi low high use none limit noise_floor float impos nois floor ad provid fraction bia darksubtract electron count error budget eg valu mean sn count imag never greater objlim int float object detect limit la cosmic routin orient bool true orient raw imag pypeit frame overscan_method str polynomi savgol median savgol method use fit overscan option polynomi savgol median overscan_par int list paramet overscan subtract polynomi set overcan_par order number pixel number repeat savgol set overscan_par order window size median set overscan_par none omit keyword rmcompact bool true remov compact detect la cosmic routin satpix str reject forc noth reject handl satur pixel option reject forc noth shot_nois bool true use bia darksubtract imag calcul includ electron count shot nois imag process error budget sigclip int float sigma level reject la cosmic routin sigfrac int float fraction lower clip threshold la cosmic routin spat_flexure_correct bool fals correct slit illumin flat etc flexur trim bool true trim imag detector suppli region use_biasimag bool true use bia imag true one must suppli pypeit file use_darkimag bool fals subtract dark imag true one dark must provid use_illumflat bool true use illumin flat correct illumin profil slit use_overscan bool true subtract overscan detector must one code crash use_pattern bool fals subtract detector pattern pattern assum sinusoid along one direct frequenc constant across detector use_pixelflat bool true use pixel flat make pixellevel correct pixelflat imag must provi use_specillum bool fals use rel spectral illumin profil correct spectral illumin profil slit primarili use ifu use must set slit_illum_relativetru flatfield paramet set sensfuncpar keyword class instanti classpypeitparpypeitparsensfuncpar key type option default descript ir classpypeitparpypeitpartelluricpar telluricpar keywords_ paramet ir sensfunc algorithm uvi classpypeitparpypeitparsensfuncuvispar sensfuncuvispar keywords_ paramet uvi sensfunc algorithm algorithm str uvi ir uvi specifi algorithm comput sensit function option uvi use data lambda ano detail model tellur absorpt correct atmospher extinct ir use data lambbda apeform joint fit sensit function tellur absorpt use hitran model extrap_blu float fraction minimum wavelength coverag grow wavelength coverag sensitivit function blue direct ie standard star spectrumcut wave_min sensfunc extrapol cover extrap_bluwave_min extrap_r float fraction maximum wavelength coverag grow wavelength coverag sensitivit function red direct ie standard star spectrumcut wave_max sensfunc extrapol cover extrap_redwave_max mask_abs_lin bool true mask balmer paschen brackett pfund line sensit function fit multi_spec_det list list detector number splice togeth multidetector instrument eg deimo gmo assum overlap wavelength across detector might ok polyord int list polynomi order sensit function fit samp_fact float sampl factor make wavelength grid sensit function finer coarser samp_fact oversampl finer samp_fact undersampl coarser star_dec float dec standard star overrid valu header ie wrong absent star_mag float magnitud standard star nearir mainli star_ra float ra standard star overrid valu header ie wrong absent star_typ str spectral type standard star nearir mainli sensfuncuvispar keyword class instanti classpypeitparpypeitparsensfuncuvispar key type option default descript balm_mask_wid float mask width balmer line angstrom extinct_correct bool true extinct_correcttru code use atmospher extinct model extinct correct data note correct make sens one tellur correct shold set fals nresln int float paramet govern space bspline breakpoint polycorrect bool true whether want correct sensfunc polynomi tellur recombin line region polyfunc bool fals whether want use polynomi fit final sensfunc resolut int float expect resolut standard star spectrum measur data sensfunc str fit file contain contain sensit function std_file str standard star file gener sensfunc std_obj_id str int specifi object specd file use standard brightest object found use otherwis tellur bool fals tellurictru code creat synthet standard star spectrum use kurucz model sen func creat set nresln contain correct tellur line telluric_correct bool fals telluric_correcttru code grab sens_dicttellur tag sensfunc dictionari appli data trans_thresh float paramet select tellur region mask locat transmiss valu mask signific tellur absorpt use telluricsensnfunc_tellur telluricpar keyword class instanti classpypeitparpypeitpartelluricpar key type option default descript bal_wv_min_max list ndarray minmax wavelength broad absorpt featur sever bal featur format mask wave_min_b wave_max_balwave_min_b wave_max_b mask pixel ignor fit bounds_norm tupl normal bound scale initi object model delta_coeff_bound tupl paramet set polynomi coeffici bound sensfunc optim delta_redshift float rang within redshift vari tellur fit ie code perform bound optim withinth redshift delta_redshift disp bool fals argument scipyoptimizedifferential_evolut display statu messag screen indic statu optim see document tellurictellur descript output know thing work well fit_wv_min_max list pixel within mask use fit formati bal_wv_min_max mask good pixel mask func str legendr polynomi model function lower int float lower reject threshold unit sigma_corrsigma sigma formal nois spectrum sigma_corr empir determin correct formal error distribut input chi defin chi data modelsigma valu analyz correct factor formal error sigma_corr return multipli formal error way reject threshold ie sigma alway correspond roughli percentil renorm perform coadddrenormalize_error function guarante reject agress case empir error determin chidistribut differ significantli formal nois use determin chi mask_abs_lin bool true mask stellar absorpt line mask_lyman_a bool true mask blueward lymanalpha line fit maxit int maximum number iter tellur object model fit code perform multipl iter reject outlier step fit perform anew remain good pixel reason run disptru option see fx loss function get progress better iter minmax_coeff_bound tupl paramet set polynomi coeffici bound sensfunc optimizationbound current determin follow comput initi fit sensfunc pypeitcoretelluricinit_sensfunc_model function deterin set coeffici bound determin accord npfminnpabsthis_coeffobj_paramsdelta_coeff_bound obj_paramsminmax_coeff_bound npfmaxnpabsthis_coeffobj_paramsdelta_coeff_boundsobj_paramsminmax_coeff_bound model str exp type polynomi model option poli squar exp correspond normal polynomialsquar polynomi exponenti polynomi npca int number pca objmodelqso qso pca fit objmodel str object model use tellur fit current option qso star poli only_ord int list ndarray order number list order number want fit specif order pca_fil str userswestfallworkpackagespypeitpypeitdatatelluricmodelsqso_pca__fit fit file contain quasar pca model need objmodelqso pca_low int float minimum wavelength qso pca model pca_upp int float maximum wavelength qso pca model pix_shift_bound tupl bound pixel shift optim tellur model fit unit pixel atmospher allow shift within rang fit polish bool true true differenti evolut perform addit optimizatino end polish best fit end improv optim slightli see scipyoptimizedifferential_evolut detail polyord int order polynomi model fit popsiz int multipli set total popul size differenti evolut optim see scipyoptimizedifferential_evolut detail recombin int float recombin constant differenti evolut optim rang see scipyoptimizedifferential_evolut detail redshift int float redshift object model current use objmodelqso resln_frac_bound tupl bound resolut fit optim part tellur model rang unit resln_guess would bound spectral resolut fit within rang bounds_resln resln_guess resln_guess resln_guess int float guess resolut spectrum express lambdadlambda resolut fit explicitli part tellur model fit guess help determin bound optim see next provid wavelength sampl spectrum use resolut calcul use typic sampl spectral pixel per resolut element seed int initi seed differenti evolut optim random process default seed use gener uniqu seed everi order specif seed use otherwis random number gener use time seed result reproduc sn_clip int float add error floor ivar prevent much reject highsn ie standard star bright object use function utilsclip_ivar small erorr ad input ivar output ivar_out never give sn greater sn_clip prevent overli aggress reject high sn ratio spectra neverthless differ level greater formal sn due fact tellur model good star_dec float object declin decim deg star_mag float int ab magnitud v band star_ra float object rightascens decim deg star_typ str stellar type sticki bool true sticki paramet utilsdjs_reject algorithm iter model fit reject set true point reject previou iter kept reject word bad pixel mask previou iter reject pixel accumul set fals bad pixel mask mask previou iter model fit chang iter point altern reject reject present code perform optim differenti evolut experi show sticki need true order converg outlier larg domin loss function one never iter converg good model fit word deform model iter stickyfals small approach reason fit telgridfil str file contain tellur grid observatori question grid gener hitran model observatori use nomin site paramet must download googledr store pypeitpypeitdatatellur tell_norm_thresh int float threshold tellur absorpt region tol float rel toler converag differenti evolut optim see scipyoptimizedifferential_evolut detail upper int float upper reject threshold unit sigma_corrsigma sigma formal nois spectrum sigma_corr empir determin correct formal error see descript _instr_par instrumentspecif default configur follow provid chang global default paramet provid instrument one includ pypeit file would reproduc effect default_pypeit_par method specif deriv classpypeitspectrographsspectrographspectrograph class bok bc bok_bc alter default paramet rdx spectrograph bok_bc calibr biasfram exprng none process combin median use_biasimag fals use_overscan fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals arcfram exprng none process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tiltfram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pixelflatfram process combin median satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pinholefram exprng none process use_biasimag fals use_overscan fals use_illumflat fals alignfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tracefram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals standardfram exprng none process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals wavelength lamp nei ari arii hei fwhm rms_threshold slitedg sync_predict nearest sciencefram exprng none process mask_cr true sigclip objlim use_biasimag fals use_overscan fals noise_floor use_illumflat fals reduc findobj sig_thresh skysub sky_sigrej global_sky_std fals no_poli true sensfunc polyord gemini flamingo gemini_flamingo alter default paramet rdx spectrograph gemini_flamingo calibr biasfram process combin median use_biasimag fals use_overscan fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals arcfram exprng process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tiltfram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pixelflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pinholefram process use_biasimag fals use_overscan fals use_illumflat fals alignfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tracefram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals standardfram exprng none process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals wavelength method full_templ lamp ari arii thar nei sigdetect fwhm reid_arxiv magellan_fire_longfit rms_threshold match_tol slitedg trace_thresh sync_predict nearest tilt tracethresh sciencefram exprng none process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals reduc findobj sig_thresh find_trim_edg gemini flamingo gemini_flamingo alter default paramet rdx spectrograph gemini_flamingo calibr biasfram process combin median use_biasimag fals use_overscan fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals arcfram exprng none process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tiltfram exprng none process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pixelflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pinholefram process use_biasimag fals use_overscan fals use_illumflat fals alignfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tracefram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals standardfram exprng none process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals wavelength lamp oh_nir fwhm rms_threshold match_tol slitedg edge_thresh fit_min_spec_length trace_thresh sync_predict nearest tilt tracethresh spat_ord sciencefram exprng none process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals reduc findobj sig_thresh find_trim_edg skysub sky_sigrej sensfunc algorithm ir polyord ir telgridfil userswestfallworkpackagespypeitpypeitdatatelluricatm_gridstelfit_lascampanas___rfit geminin gmosn gemini_gmos_north_ev alter default paramet rdx spectrograph gemini_gmos_north_ev calibr biasfram process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram process mask_cr true use_pixelflat fals use_illumflat fals arcfram process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram process combin median satpix noth use_pixelflat fals use_illumflat fals alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram process mask_cr true noise_floor wavelength method full_templ lamp cui ari arii rms_threshold nsnippet slitedg fit_ord tilt tracethresh sciencefram process mask_cr true noise_floor flexur spec_method boxcar sensfunc multi_spec_det geminin gmosn gemini_gmos_north_ham alter default paramet rdx spectrograph gemini_gmos_north_ham calibr biasfram process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram process mask_cr true use_pixelflat fals use_illumflat fals arcfram process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram process combin median satpix noth use_pixelflat fals use_illumflat fals alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram process mask_cr true noise_floor wavelength method full_templ lamp cui ari arii rms_threshold nsnippet slitedg fit_ord tilt tracethresh sciencefram process mask_cr true noise_floor flexur spec_method boxcar sensfunc multi_spec_det geminin gmosn gemini_gmos_north_ham_n alter default paramet rdx spectrograph gemini_gmos_north_ham_n calibr biasfram process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram process mask_cr true use_pixelflat fals use_illumflat fals arcfram process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram process combin median satpix noth use_pixelflat fals use_illumflat fals alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram process mask_cr true noise_floor wavelength method full_templ lamp cui ari arii rms_threshold nsnippet slitedg fit_ord tilt tracethresh sciencefram process mask_cr true noise_floor flexur spec_method boxcar sensfunc multi_spec_det gemini gmoss gemini_gmos_south_ham alter default paramet rdx spectrograph gemini_gmos_south_ham calibr biasfram process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram process mask_cr true use_pixelflat fals use_illumflat fals arcfram process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram process combin median satpix noth use_pixelflat fals use_illumflat fals alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram process mask_cr true noise_floor wavelength method full_templ lamp cui ari arii rms_threshold nsnippet slitedg fit_ord bound_detector true tilt tracethresh sciencefram process mask_cr true noise_floor flexur spec_method boxcar sensfunc multi_spec_det algorithm ir ir telgridfil userswestfallworkpackagespypeitpypeitdatatelluricatm_gridstelfit_lascampanas___rfit geminin gnir gemini_gnir alter default paramet rdx spectrograph gemini_gnir calibr biasfram process combin median use_biasimag fals use_overscan fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram process mask_cr true use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals arcfram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tiltfram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pixelflatfram exprng none process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pinholefram process use_biasimag fals use_overscan fals use_illumflat fals alignfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tracefram exprng none process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals standardfram exprng none process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals flatfield tweak_slits_thresh sciencefram exprng none process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals reduc findobj sig_thresh find_trim_edg find_cont_fit fals find_npoly_cont skysub bspline_spac global_sky_std fals no_poli true extract model_full_slit true sensfunc algorithm ir polyord ir telgridfil userswestfallworkpackagespypeitpypeitdatatelluricatm_gridstelfit_maunakea___rfit gtc osiri gtc_osiri alter default paramet rdx spectrograph gtc_osiri calibr biasfram exprng none process combin median use_biasimag fals use_overscan fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_overscan fals use_pixelflat fals use_illumflat fals arcfram process clip fals use_overscan fals use_pixelflat fals use_illumflat fals tiltfram process use_overscan fals use_pixelflat fals use_illumflat fals pixelflatfram process combin median satpix noth use_overscan fals use_pixelflat fals use_illumflat fals pinholefram exprng none process use_overscan fals alignfram process satpix noth use_overscan fals use_pixelflat fals use_illumflat fals tracefram process use_overscan fals use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_overscan fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_overscan fals noise_floor standardfram exprng none process mask_cr true use_overscan fals noise_floor wavelength method full_templ lamp xeihgineiari slitedg sync_predict nearest bound_detector true sciencefram exprng none process mask_cr true use_overscan fals noise_floor keck deimo keck_deimo alter default paramet rdx spectrograph keck_deimo calibr biasfram process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram process mask_cr true use_biasimag fals use_pixelflat fals use_illumflat fals arcfram process clip fals use_biasimag fals use_pixelflat fals use_illumflat fals tiltfram process clip fals use_biasimag fals use_pixelflat fals use_illumflat fals pixelflatfram process combin median satpix noth comb_sigrej use_biasimag fals use_pixelflat fals use_illumflat fals pinholefram process use_biasimag fals alignfram process satpix noth use_biasimag fals use_pixelflat fals use_illumflat fals tracefram process use_biasimag fals use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_biasimag fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_biasimag fals noise_floor standardfram process mask_cr true use_biasimag fals noise_floor wavelength lamp ari nei kri xei match_tol n_first slitedg edge_thresh fit_ord minimum_slit_length_sci minimum_slit_gap tilt tracethresh sciencefram process mask_cr true sigclip objlim use_biasimag fals noise_floor reduc findobj find_fwhm flexur spec_method boxcar sensfunc ir telgridfil userswestfallworkpackagespypeitpypeitdatatelluricatm_gridstelfit_maunakea___rfit keck hires_r keck_hires_r alter default paramet rdx spectrograph keck_hires_r calibr biasfram usefram bia process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram process mask_cr true use_pixelflat fals use_illumflat fals arcfram process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram process satpix noth use_pixelflat fals use_illumflat fals alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram exprng none process mask_cr true noise_floor wavelength echel true ech_sigrej lamp thar rms_threshold slitedg edge_thresh max_shift_adj left_right_pca true sciencefram exprng none process satpix noth mask_cr true sigclip noise_floor keck kcwi keck_kcwi alter default paramet rdx spectrograph keck_kcwi calibr biasfram exprng none process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals use_pattern true darkfram exprng none process mask_cr true use_pixelflat fals use_illumflat fals use_pattern true arcfram process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram exprng none process combin median satpix noth use_pixelflat fals use_illumflat fals pinholefram exprng none alignfram process satpix noth use_pixelflat fals use_illumflat fals align locat tracefram exprng none process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals use_pattern true skyfram process mask_cr true noise_floor standardfram process mask_cr true noise_floor use_pattern true flatfield spec_samp_coars tweak_slits_thresh tweak_slits_maxfrac slit_illum_rel true slit_illum_ref_idx slitedg fit_ord sciencefram exprng none process mask_cr true sigclip objlim use_biasimag fals noise_floor use_specillum true use_pattern true reduc skysub no_poli true joint_fit true extract skip_extract true flexur spec_method slitcen keck lrisb keck_lris_blu alter default paramet rdx spectrograph keck_lris_blu calibr biasfram exprng none process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_pixelflat fals use_illumflat fals arcfram process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram exprng none process satpix noth use_pixelflat fals use_illumflat fals pinholefram exprng none alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram exprng none process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram exprng none process mask_cr true noise_floor spat_flexure_correct true wavelength method full_templ lamp nei ari cdi kri xei zni hgi sigdetect rms_threshold match_tol n_first slitedg edge_thresh det_min_spec_length fit_ord fit_min_spec_length sync_cent gap minimum_slit_length minimum_slit_length_sci sciencefram exprng none process mask_cr true noise_floor spat_flexure_correct true flexur spec_method boxcar keck lrisb keck_lris_blue_orig alter default paramet rdx spectrograph keck_lris_blue_orig calibr biasfram exprng none process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_pixelflat fals use_illumflat fals arcfram process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram exprng none process satpix noth use_pixelflat fals use_illumflat fals pinholefram exprng none alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram exprng none process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram exprng none process mask_cr true noise_floor spat_flexure_correct true wavelength method full_templ lamp nei ari cdi kri xei zni hgi sigdetect rms_threshold match_tol n_first slitedg edge_thresh det_min_spec_length fit_ord fit_min_spec_length sync_cent gap minimum_slit_length minimum_slit_length_sci sciencefram exprng none process mask_cr true noise_floor spat_flexure_correct true flexur spec_method boxcar keck lrisr keck_lris_r alter default paramet rdx spectrograph keck_lris_r calibr biasfram exprng none process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_pixelflat fals use_illumflat fals arcfram process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram exprng none process satpix noth use_pixelflat fals use_illumflat fals pinholefram exprng none alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram exprng none process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram exprng none process mask_cr true noise_floor spat_flexure_correct true wavelength lamp nei ari cdi kri xei zni hgi sigdetect rms_threshold slitedg fit_ord sync_cent gap minimum_slit_length minimum_slit_length_sci tilt tracethresh maxdev_tracefit spat_ord spec_ord maxdevd sigrejd sciencefram exprng none process mask_cr true sigclip objlim noise_floor spat_flexure_correct true reduc skysub bspline_spac flexur spec_method boxcar keck lrisr keck_lris_red_mark alter default paramet rdx spectrograph keck_lris_red_mark calibr biasfram exprng none process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_pixelflat fals use_illumflat fals arcfram process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram exprng none process satpix noth use_pixelflat fals use_illumflat fals pinholefram exprng none alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram exprng none process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram exprng none process mask_cr true noise_floor spat_flexure_correct true wavelength lamp nei ari cdi kri xei zni hgi sigdetect rms_threshold slitedg fit_ord sync_cent gap minimum_slit_length minimum_slit_length_sci tilt tracethresh maxdev_tracefit spat_ord spec_ord maxdevd sigrejd sciencefram exprng none process mask_cr true sigclip objlim noise_floor spat_flexure_correct true reduc skysub bspline_spac flexur spec_method boxcar keck lrisr keck_lris_red_orig alter default paramet rdx spectrograph keck_lris_red_orig calibr biasfram exprng none process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_pixelflat fals use_illumflat fals arcfram process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram exprng none process satpix noth use_pixelflat fals use_illumflat fals pinholefram exprng none alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram exprng none process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram exprng none process mask_cr true noise_floor spat_flexure_correct true wavelength lamp nei ari kri xei hgi sigdetect rms_threshold slitedg fit_ord sync_cent gap minimum_slit_length minimum_slit_length_sci tilt tracethresh maxdev_tracefit spat_ord spec_ord maxdevd sigrejd sciencefram exprng none process mask_cr true sigclip objlim noise_floor spat_flexure_correct true reduc skysub bspline_spac flexur spec_method boxcar keck mosfir keck_mosfir alter default paramet rdx spectrograph keck_mosfir calibr biasfram process combin median use_biasimag fals use_overscan fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals arcfram exprng none process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tiltfram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pixelflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pinholefram process use_biasimag fals use_overscan fals alignfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tracefram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_biasimag fals use_overscan fals noise_floor standardfram exprng none process mask_cr true use_biasimag fals use_overscan fals noise_floor wavelength lamp oh_nir fwhm rms_threshold slitedg edge_thresh sync_predict nearest sciencefram exprng none process satpix noth mask_cr true sigclip use_biasimag fals use_overscan fals noise_floor reduc skysub bspline_spac fluxcalib extrap_sen true sensfunc extrap_blu extrap_r algorithm ir polyord ir telgridfil userswestfallworkpackagespypeitpypeitdatatelluricatm_gridstelfit_maunakea___rfit keck nire keck_nir alter default paramet rdx spectrograph keck_nir calibr biasfram process combin median use_biasimag fals use_overscan fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals arcfram exprng none process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tiltfram exprng none process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pixelflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pinholefram process use_biasimag fals use_overscan fals use_illumflat fals alignfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tracefram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals standardfram exprng none process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals wavelength method reidentifi echel true ech_norder_coeff ech_sigrej lamp oh_nir fwhm reid_arxiv keck_niresfit rms_threshold n_final slitedg fit_min_spec_length left_right_pca true trace_thresh fwhm_gaussian tilt tracethresh sciencefram exprng none process satpix noth mask_cr true sigclip use_biasimag fals use_overscan fals noise_floor use_illumflat fals reduc skysub bspline_spac extract boxcar_radiu sensfunc algorithm ir polyord ir telgridfil userswestfallworkpackagespypeitpypeitdatatelluricatm_gridstelfit_maunakea___rfit keck nirspec keck_nirspec_low alter default paramet rdx spectrograph keck_nirspec_low calibr biasfram process combin median use_biasimag fals use_overscan fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals arcfram exprng none process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tiltfram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pixelflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pinholefram process use_biasimag fals use_overscan fals use_illumflat fals alignfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tracefram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals standardfram exprng none process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals flatfield tweak_slits_thresh wavelength lamp oh_nir fwhm rms_threshold slitedg edge_thresh sync_predict nearest sciencefram exprng none process satpix noth mask_cr true sigclip use_biasimag fals use_overscan fals noise_floor use_illumflat fals reduc skysub bspline_spac sensfunc algorithm ir polyord ir telgridfil userswestfallworkpackagespypeitpypeitdatatelluricatm_gridstelfit_maunakea___rfit lbt luci lbt_luci alter default paramet rdx spectrograph lbt_luci calibr biasfram process combin median use_biasimag fals use_overscan fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram process mask_cr true use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals arcfram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tiltfram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pixelflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pinholefram process use_biasimag fals use_overscan fals use_illumflat fals alignfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tracefram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals standardfram process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals wavelength lamp oh_nir fwhm rms_threshold slitedg edge_thresh sync_predict nearest sciencefram process satpix noth mask_cr true sigclip use_biasimag fals use_overscan fals noise_floor use_illumflat fals reduc skysub bspline_spac extract std_prof_nsigma lbt luci lbt_luci alter default paramet rdx spectrograph lbt_luci calibr biasfram process combin median use_biasimag fals use_overscan fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram process mask_cr true use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals arcfram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tiltfram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pixelflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pinholefram process use_biasimag fals use_overscan fals use_illumflat fals alignfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tracefram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals standardfram process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals wavelength lamp oh_nir fwhm rms_threshold slitedg edge_thresh fit_ord sync_predict nearest sciencefram process satpix noth mask_cr true sigclip use_biasimag fals use_overscan fals noise_floor use_illumflat fals reduc skysub bspline_spac global_sky_std fals extract std_prof_nsigma model_full_slit true lbt modsb lbt_modsb alter default paramet rdx spectrograph lbt_modsb calibr biasfram exprng none process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_pixelflat fals use_illumflat fals arcfram process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram exprng none process satpix noth use_pixelflat fals use_illumflat fals pinholefram exprng none alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram exprng none process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram exprng process mask_cr true noise_floor wavelength lamp xei kri ari hgi sigdetect rms_threshold slitedg edge_thresh sync_predict nearest tilt maxdev_tracefit spat_ord spec_ord maxdevd sciencefram exprng none process mask_cr true noise_floor flexur spec_method boxcar lbt modsr lbt_modsr alter default paramet rdx spectrograph lbt_modsr calibr biasfram exprng none process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_pixelflat fals use_illumflat fals arcfram process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram exprng none process satpix noth use_pixelflat fals use_illumflat fals pinholefram exprng none alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram exprng none process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram exprng process mask_cr true noise_floor wavelength lamp ari nei kri xei fwhm rms_threshold match_tol n_first slitedg edge_thresh sync_predict nearest tilt maxdev_tracefit spat_ord spec_ord maxdevd sciencefram exprng none process mask_cr true noise_floor flexur spec_method boxcar lbt modsb lbt_modsb alter default paramet rdx spectrograph lbt_modsb calibr biasfram exprng none process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_pixelflat fals use_illumflat fals arcfram process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram exprng none process satpix noth use_pixelflat fals use_illumflat fals pinholefram exprng none alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram exprng none process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram exprng process mask_cr true noise_floor wavelength lamp xei kri ari hgi sigdetect rms_threshold slitedg edge_thresh sync_predict nearest tilt maxdev_tracefit spat_ord spec_ord maxdevd sciencefram exprng none process mask_cr true noise_floor flexur spec_method boxcar lbt modsr lbt_modsr alter default paramet rdx spectrograph lbt_modsr calibr biasfram exprng none process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_pixelflat fals use_illumflat fals arcfram process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram exprng none process satpix noth use_pixelflat fals use_illumflat fals pinholefram exprng none alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram exprng none process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram exprng process mask_cr true noise_floor wavelength lamp ari nei kri xei fwhm rms_threshold match_tol n_first slitedg edge_thresh sync_predict nearest tilt maxdev_tracefit spat_ord spec_ord maxdevd sciencefram exprng none process mask_cr true noise_floor flexur spec_method boxcar ldt deveni ldt_deveni alter default paramet rdx spectrograph ldt_deveni calibr bpm_usebia true biasfram process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram process mask_cr true use_pixelflat fals use_illumflat fals arcfram process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram process combin median satpix noth use_pixelflat fals use_illumflat fals pinholefram process use_illumflat fals alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor use_illumflat fals standardfram process mask_cr true noise_floor use_illumflat fals wavelength ech_fix_format fals lamp nei ari cdi hgi sigdetect fwhm_fromlin true rms_threshold n_first n_final slitedg sync_predict nearest bound_detector true minimum_slit_length tilt spat_ord spec_ord sciencefram process mask_cr true noise_floor use_illumflat fals reduc findobj sig_thresh sensfunc polyord magellan fire magellan_fir alter default paramet rdx spectrograph magellan_fir calibr biasfram process combin median use_biasimag fals use_overscan fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals arcfram exprng none process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tiltfram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pixelflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pinholefram process use_biasimag fals use_overscan fals use_illumflat fals alignfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tracefram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals standardfram exprng none process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals wavelength method reidentifi echel true ech_norder_coeff ech_sigrej lamp oh_fire_echel sigdetect reid_arxiv magellan_fire_echellefit cc_thresh rms_threshold match_tol n_final slitedg edge_thresh max_shift_adj fit_min_spec_length left_right_pca true pca_ord trace_thresh tilt tracethresh sciencefram exprng none process satpix noth mask_cr true sigclip use_biasimag fals use_overscan fals noise_floor use_illumflat fals reduc extract model_full_slit true sensfunc algorithm ir ir telgridfil userswestfallworkpackagespypeitpypeitdatatelluricatm_gridstelfit_lascampanas___rfit magellan fire magellan_fire_long alter default paramet rdx spectrograph magellan_fire_long calibr biasfram process combin median use_biasimag fals use_overscan fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals arcfram exprng process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tiltfram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pixelflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pinholefram process use_biasimag fals use_overscan fals use_illumflat fals alignfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tracefram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals standardfram exprng none process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals wavelength method full_templ lamp ari arii thar nei sigdetect fwhm reid_arxiv magellan_fire_longfit rms_threshold match_tol slitedg trace_thresh sync_predict nearest tilt tracethresh sciencefram exprng none process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals reduc findobj sig_thresh find_trim_edg sensfunc ir telgridfil userswestfallworkpackagespypeitpypeitdatatellurictelfit_lascampanas___rfit magellan mage magellan_mag alter default paramet rdx spectrograph magellan_mag calibr biasfram process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_pixelflat fals use_illumflat fals arcfram exprng none process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram process satpix noth use_pixelflat fals use_illumflat fals alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram exprng none process mask_cr true noise_floor wavelength method reidentifi echel true ech_sigrej lamp thar_mag reid_arxiv magellan_magefit cc_thresh cc_local_thresh rms_threshold slitedg edge_thresh max_shift_adj fit_min_spec_length left_right_pca true tilt tracethresh sciencefram exprng none process satpix noth mask_cr true sigclip noise_floor reduc findobj find_trim_edg kpno mdmk mdm_osmos_mdmk alter default paramet rdx spectrograph mdm_osmos_mdmk calibr biasfram exprng none process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_pixelflat fals use_illumflat fals arcfram process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram process combin median satpix noth use_pixelflat fals use_illumflat fals pinholefram exprng none alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram exprng none process mask_cr true noise_floor wavelength method full_templ lamp ari xei sigdetect reid_arxiv mdm_osmos_mdmkfit slitedg sync_predict nearest sciencefram exprng none process mask_cr true noise_floor mmt binospec mmt_binospec alter default paramet rdx spectrograph mmt_binospec calibr biasfram process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_biasimag fals use_pixelflat fals use_illumflat fals arcfram exprng none process use_biasimag fals use_pixelflat fals use_illumflat fals tiltfram process use_biasimag fals use_pixelflat fals use_illumflat fals pixelflatfram process satpix noth use_biasimag fals use_pixelflat fals use_illumflat fals pinholefram process use_biasimag fals alignfram process satpix noth use_biasimag fals use_pixelflat fals use_illumflat fals tracefram process use_biasimag fals use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_biasimag fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_biasimag fals noise_floor standardfram exprng none process mask_cr true use_biasimag fals noise_floor wavelength lamp ari arii fwhm rms_threshold slitedg sync_predict nearest tilt tracethresh spat_ord spec_ord sciencefram exprng none process mask_cr true sigclip objlim use_biasimag fals noise_floor reduc skysub bspline_spac global_sky_std fals flexur spec_method boxcar sensfunc polyord ir telgridfil userswestfallworkpackagespypeitpypeitdatatelluricatm_gridstelfit_maunakea___rfit mmt blue_channel mmt_bluechannel alter default paramet rdx spectrograph mmt_bluechannel calibr biasfram process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_biasimag fals use_pixelflat fals use_illumflat fals arcfram exprng none process use_biasimag fals use_pixelflat fals use_illumflat fals tiltfram process use_biasimag fals use_pixelflat fals use_illumflat fals pixelflatfram exprng none process satpix noth use_biasimag fals use_pixelflat fals use_illumflat fals pinholefram process use_biasimag fals alignfram process satpix noth use_biasimag fals use_pixelflat fals use_illumflat fals tracefram exprng none process use_biasimag fals use_pixelflat fals use_illumflat fals illumflatfram exprng none process satpix noth use_biasimag fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_biasimag fals noise_floor standardfram exprng none process mask_cr true use_biasimag fals noise_floor wavelength lamp ari arii hei nei fwhm rms_threshold slitedg sync_predict nearest bound_detector true sciencefram process mask_cr true sigclip objlim use_biasimag fals noise_floor reduc skysub bspline_spac global_sky_std fals sensfunc polyord mmt mmir mmt_mmir alter default paramet rdx spectrograph mmt_mmir calibr biasfram process combin median use_biasimag fals use_overscan fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals arcfram exprng none process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tiltfram exprng none process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pixelflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pinholefram process use_biasimag fals use_overscan fals use_illumflat fals alignfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tracefram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals standardfram exprng none process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals wavelength lamp oh_nir fwhm rms_threshold match_tol slitedg edge_thresh fit_min_spec_length trace_thresh sync_predict nearest bound_detector true tilt tracethresh spat_ord spec_ord sciencefram exprng none process mask_cr true grow sigclip objlim use_biasimag fals use_overscan fals noise_floor reduc findobj sig_thresh skysub sky_sigrej sensfunc algorithm ir polyord ir telgridfil userswestfallworkpackagespypeitpypeitdatatelluricatm_gridstelfit_maunakea___rfit alfosc not_alfosc alter default paramet rdx spectrograph not_alfosc calibr biasfram exprng none process combin median use_biasimag fals use_overscan fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_overscan fals use_pixelflat fals use_illumflat fals arcfram process use_overscan fals use_pixelflat fals use_illumflat fals tiltfram process use_overscan fals use_pixelflat fals use_illumflat fals pixelflatfram process combin median satpix noth use_overscan fals use_pixelflat fals use_illumflat fals pinholefram exprng none process use_overscan fals alignfram process satpix noth use_overscan fals use_pixelflat fals use_illumflat fals tracefram process use_overscan fals use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_overscan fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_overscan fals noise_floor standardfram exprng none process mask_cr true use_overscan fals noise_floor wavelength method full_templ lamp hei nei sigdetect slitedg sync_predict nearest bound_detector true sciencefram exprng none process mask_cr true use_overscan fals noise_floor ntt efosc ntt_efosc alter default paramet rdx spectrograph ntt_efosc calibr biasfram process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram process mask_cr true use_pixelflat fals use_illumflat fals arcfram process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram process satpix noth use_pixelflat fals use_illumflat fals alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram process mask_cr true noise_floor flatfield tweak_slits_thresh wavelength method full_templ lamp hei ari sigdetect rms_threshold slitedg edge_thresh sync_predict nearest tilt tracethresh sciencefram process mask_cr true noise_floor reduc skysub sky_sigrej global_sky_std fals no_poli true flexur spec_method boxcar p dbspb p_dbsp_blue alter default paramet rdx spectrograph p_dbsp_blue calibr bpm_usebia true biasfram exprng none process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_pixelflat fals use_illumflat fals arcfram exprng none process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram process combin median satpix noth use_pixelflat fals use_illumflat fals pinholefram exprng none alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram exprng none process combin median mask_cr true noise_floor wavelength method full_templ lamp fei ari arii slitedg fit_min_spec_length sync_predict nearest sciencefram exprng none process combin median mask_cr true noise_floor sensfunc uvi nresln p dbspr p_dbsp_red alter default paramet rdx spectrograph p_dbsp_red calibr bpm_usebia true biasfram exprng none process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_pixelflat fals use_illumflat fals arcfram exprng none process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram process combin median satpix noth use_pixelflat fals use_illumflat fals pinholefram exprng none alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram exprng none process combin median mask_cr true noise_floor wavelength method full_templ lamp ari arii nei hei slitedg sync_predict nearest sciencefram exprng none process combin median mask_cr true sigclip objlim noise_floor sensfunc uvi polycorrect fals ir telgridfil userswestfallworkpackagespypeitpypeitdatatelluricatm_gridstelfit_lick___rfit p tspec p_tspec alter default paramet rdx spectrograph p_tspec calibr biasfram process combin median use_biasimag fals use_overscan fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals arcfram exprng none process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tiltfram exprng none process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pixelflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pinholefram process use_biasimag fals use_overscan fals use_illumflat fals alignfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tracefram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals standardfram exprng none process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals wavelength method reidentifi echel true ech_norder_coeff ech_sigrej lamp oh_nir fwhm reid_arxiv p_triplespecfit rms_threshold n_final slitedg fit_min_spec_length left_right_pca true trace_thresh fwhm_gaussian tilt tracethresh sciencefram exprng none process satpix noth mask_cr true sigclip use_biasimag fals use_overscan fals noise_floor use_illumflat fals reduc skysub bspline_spac extract boxcar_radiu sensfunc algorithm ir polyord ir telgridfil userswestfallworkpackagespypeitpypeitdatatelluricatm_gridstelfit_maunakea___rfit shane kastb shane_kast_blu alter default paramet rdx spectrograph shane_kast_blu calibr biasfram exprng none process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_pixelflat fals use_illumflat fals arcfram exprng none process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram exprng none process satpix noth use_pixelflat fals use_illumflat fals pinholefram exprng none alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram exprng none process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram exprng process mask_cr true noise_floor wavelength method full_templ lamp cdi hgi hei rms_threshold match_tol n_first slitedg sync_predict nearest bound_detector true tilt maxdev_tracefit spec_ord maxdevd sciencefram exprng none process mask_cr true noise_floor flexur spec_method boxcar spectrum userswestfallworkpackagespypeitpypeitdatasky_specsky_kastb_fit shane kastr shane_kast_r alter default paramet rdx spectrograph shane_kast_r calibr biasfram exprng none process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_pixelflat fals use_illumflat fals arcfram exprng none process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram exprng none process satpix noth use_pixelflat fals use_illumflat fals pinholefram exprng none alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram exprng none process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram exprng process mask_cr true noise_floor wavelength lamp nei hgi hei ari slitedg sync_predict nearest bound_detector true sciencefram exprng none process mask_cr true noise_floor flexur spec_method boxcar sensfunc ir telgridfil userswestfallworkpackagespypeitpypeitdatatelluricatm_gridstelfit_lick___rfit shane kastr shane_kast_red_ret alter default paramet rdx spectrograph shane_kast_red_ret calibr biasfram exprng none process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_pixelflat fals use_illumflat fals arcfram exprng none process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram exprng none process satpix noth use_pixelflat fals use_illumflat fals pinholefram exprng none alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram exprng none process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram exprng process mask_cr true noise_floor wavelength lamp nei hgi hei ari rms_threshold use_instr_flag true slitedg sync_predict nearest bound_detector true sciencefram exprng none process mask_cr true noise_floor flexur spec_method boxcar soar red soar_goodman_r alter default paramet rdx spectrograph soar_goodman_r calibr biasfram process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram process mask_cr true use_biasimag fals use_pixelflat fals use_illumflat fals arcfram exprng none process use_biasimag fals use_pixelflat fals use_illumflat fals tiltfram process use_biasimag fals use_pixelflat fals use_illumflat fals pixelflatfram process satpix noth use_biasimag fals use_pixelflat fals use_illumflat fals pinholefram process use_biasimag fals alignfram process satpix noth use_biasimag fals use_pixelflat fals use_illumflat fals tracefram process use_biasimag fals use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_biasimag fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_biasimag fals noise_floor standardfram exprng none process mask_cr true use_biasimag fals noise_floor wavelength lamp nei ari hgi fwhm rms_threshold slitedg sync_predict nearest bound_detector true sciencefram exprng none process mask_cr true use_biasimag fals noise_floor sensfunc ir telgridfil userswestfallworkpackagespypeitpypeitdatatelluricatm_gridstelfit_lascampanas___rfit tng dolor tng_dolor alter default paramet rdx spectrograph tng_dolor calibr biasfram exprng none process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_pixelflat fals use_illumflat fals arcfram process use_pixelflat fals use_illumflat fals tiltfram process use_pixelflat fals use_illumflat fals pixelflatfram process satpix noth use_pixelflat fals use_illumflat fals pinholefram exprng none alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram process use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram process mask_cr true noise_floor sciencefram exprng none process mask_cr true noise_floor vlt for vlt_for alter default paramet rdx spectrograph vlt_for calibr biasfram process overscan_method median combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram process overscan_method median mask_cr true use_pixelflat fals use_illumflat fals arcfram process overscan_method median use_pixelflat fals use_illumflat fals tiltfram process overscan_method median use_pixelflat fals use_illumflat fals pixelflatfram process overscan_method median satpix noth use_pixelflat fals use_illumflat fals pinholefram process overscan_method median alignfram process overscan_method median satpix noth use_pixelflat fals use_illumflat fals tracefram process overscan_method median use_pixelflat fals use_illumflat fals illumflatfram process overscan_method median satpix noth use_pixelflat fals use_illumflat fals skyfram process overscan_method median mask_cr true noise_floor standardfram process overscan_method median mask_cr true noise_floor flatfield tweak_slits_thresh wavelength lamp hei ari sigdetect rms_threshold slitedg edge_thresh max_shift_adj fit_ord tilt tracethresh sciencefram process mask_cr true noise_floor flexur spec_method boxcar vlt sinfoni vlt_sinfoni alter default paramet rdx spectrograph vlt_sinfoni calibr biasfram process combin median use_biasimag fals use_overscan fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals arcfram exprng none process mask_cr true sigclip use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tiltfram process mask_cr true sigclip use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pixelflatfram process satpix noth use_biasimag fals use_overscan fals use_darkimag true use_pixelflat fals use_illumflat fals pinholefram process use_biasimag fals use_overscan fals alignfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tracefram process use_biasimag fals use_overscan fals use_darkimag true use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_biasimag fals use_overscan fals use_darkimag true use_pixelflat fals use_illumflat fals skyfram process mask_cr true sigclip use_biasimag fals use_overscan fals noise_floor standardfram exprng none process mask_cr true use_biasimag fals use_overscan fals noise_floor wavelength method full_templ lamp oh_fire_echel fwhm reid_arxiv vlt_sinfoni_kfit rms_threshold slitedg edge_thresh sync_predict nearest rm_slit tilt tracethresh sciencefram exprng none process satpix noth mask_cr true sigclip use_biasimag fals use_overscan fals noise_floor reduc findobj find_fwhm skip_second_find true cont_sig_thresh skysub bspline_spac global_sky_std fals extract sn_gauss model_full_slit true sensfunc algorithm ir polyord ir telgridfil userswestfallworkpackagespypeitpypeitdatatelluricatm_gridstelfit_paranal_nir___rfit vlt xshooter_nir vlt_xshooter_nir alter default paramet rdx spectrograph vlt_xshooter_nir calibr biasfram process combin median use_biasimag fals use_overscan fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram process mask_cr true use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals arcfram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tiltfram process use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals pixelflatfram process satpix noth use_biasimag fals use_overscan fals use_darkimag true use_pixelflat fals use_illumflat fals pinholefram process use_biasimag fals use_overscan fals use_illumflat fals alignfram process satpix noth use_biasimag fals use_overscan fals use_pixelflat fals use_illumflat fals tracefram process use_biasimag fals use_overscan fals use_darkimag true use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_biasimag fals use_overscan fals use_darkimag true use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals standardfram process mask_cr true use_biasimag fals use_overscan fals noise_floor use_illumflat fals flatfield tweak_slits_thresh wavelength method reidentifi echel true ech_nspec_coeff ech_norder_coeff ech_sigrej lamp oh_xshoot sigdetect fwhm reid_arxiv vlt_xshooter_nirfit cc_thresh cc_local_thresh rms_threshold slitedg edge_thresh max_shift_adj fit_ord fit_min_spec_length left_right_pca true trace_thresh length_rang tilt tracethresh maxdev_tracefit maxdevd rm_continuum true sciencefram process satpix noth mask_cr true sigclip use_biasimag fals use_overscan fals noise_floor use_illumflat fals reduc findobj trace_npoli find_cont_fit fals find_npoly_cont skysub bspline_spac global_sky_std fals extract model_full_slit true sensfunc algorithm ir polyord ir telgridfil userswestfallworkpackagespypeitpypeitdatatelluricatm_gridstelfit_paranal_nir___rfit vlt xshooter_uvb vlt_xshooter_uvb alter default paramet rdx spectrograph vlt_xshooter_uvb calibr biasfram process combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram process mask_cr true use_pixelflat fals use_illumflat fals arcfram process overscan_method median use_biasimag fals use_pixelflat fals use_illumflat fals tiltfram process use_biasimag fals use_pixelflat fals use_illumflat fals pixelflatfram process satpix noth use_pixelflat fals use_illumflat fals alignfram process satpix noth use_pixelflat fals use_illumflat fals tracefram process overscan_method median use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_pixelflat fals use_illumflat fals skyfram process mask_cr true noise_floor standardfram process mask_cr true noise_floor wavelength method reidentifi echel true ech_norder_coeff ech_sigrej lamp thar_xshooter_uvb reid_arxiv vlt_xshooter_uvbx_irafjson rms_threshold slitedg edge_thresh max_shift_adj left_right_pca true trace_thresh length_rang sciencefram usefram overscan process mask_cr true noise_floor vlt xshooter_vi vlt_xshooter_vi alter default paramet rdx spectrograph vlt_xshooter_vi calibr biasfram process overscan_method median combin median use_biasimag fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram process overscan_method median mask_cr true use_biasimag fals use_pixelflat fals use_illumflat fals arcfram process overscan_method median use_biasimag fals use_pixelflat fals use_illumflat fals tiltfram process overscan_method median use_biasimag fals use_pixelflat fals use_illumflat fals pixelflatfram process overscan_method median satpix noth use_biasimag fals use_pixelflat fals use_illumflat fals pinholefram process overscan_method median use_biasimag fals use_pixelflat fals use_illumflat fals alignfram process overscan_method median satpix noth use_biasimag fals use_pixelflat fals use_illumflat fals tracefram process overscan_method median use_biasimag fals use_pixelflat fals use_illumflat fals illumflatfram process overscan_method median satpix noth use_biasimag fals use_pixelflat fals use_illumflat fals skyfram process overscan_method median mask_cr true use_biasimag fals noise_floor use_pixelflat fals use_illumflat fals standardfram process overscan_method median mask_cr true use_biasimag fals noise_floor flatfield tweak_slits_thresh wavelength method reidentifi echel true ech_sigrej lamp thar_xshooter_vi fwhm reid_arxiv vlt_xshooter_visxfit cc_thresh cc_local_thresh rms_threshold n_final slitedg edge_thresh max_shift_adj fit_ord left_right_pca true trace_thresh length_rang tilt tracethresh spec_ord sciencefram process overscan_method median mask_cr true noise_floor reduc findobj find_trim_edg find_cont_fit fals find_npoly_cont skysub bspline_spac global_sky_std fals extract model_full_slit true sensfunc algorithm ir polyord ir telgridfil userswestfallworkpackagespypeitpypeitdatatelluricatm_gridstelfit_paranal_vis___rfit wht isisb wht_isis_blu alter default paramet rdx spectrograph wht_isis_blu calibr bpm_usebia true biasfram exprng none process combin median use_biasimag fals use_overscan fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_overscan fals use_pixelflat fals use_illumflat fals arcfram exprng none process use_overscan fals use_pixelflat fals use_illumflat fals tiltfram process use_overscan fals use_pixelflat fals use_illumflat fals pixelflatfram process combin median satpix noth use_overscan fals use_pixelflat fals use_illumflat fals pinholefram exprng none process use_overscan fals alignfram process satpix noth use_overscan fals use_pixelflat fals use_illumflat fals tracefram process use_overscan fals use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_overscan fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_overscan fals noise_floor standardfram exprng none process mask_cr true use_overscan fals noise_floor wavelength method full_templ lamp nei ari arii cui sigdetect n_first n_final wv_cen disp slitedg sync_predict nearest sciencefram exprng none process mask_cr true use_overscan fals noise_floor wht isisr wht_isis_r alter default paramet rdx spectrograph wht_isis_r calibr bpm_usebia true biasfram exprng none process combin median use_biasimag fals use_overscan fals shot_nois fals use_pixelflat fals use_illumflat fals darkfram exprng none process mask_cr true use_overscan fals use_pixelflat fals use_illumflat fals arcfram exprng none process use_overscan fals use_pixelflat fals use_illumflat fals tiltfram process use_overscan fals use_pixelflat fals use_illumflat fals pixelflatfram process combin median satpix noth use_overscan fals use_pixelflat fals use_illumflat fals pinholefram exprng none process use_overscan fals alignfram process satpix noth use_overscan fals use_pixelflat fals use_illumflat fals tracefram process use_overscan fals use_pixelflat fals use_illumflat fals illumflatfram process satpix noth use_overscan fals use_pixelflat fals use_illumflat fals skyfram process mask_cr true use_overscan fals noise_floor standardfram exprng none process mask_cr true use_overscan fals noise_floor wavelength method full_templ lamp nei ari arii cui sigdetect wv_cen disp slitedg sync_predict nearest sciencefram exprng none process mask_cr true use_overscan fals noise_floor _coaddd coadd spectra overview document describ combin spectra multipl exposur must done outsid data reduct pipelin ie pypeit coadd spectra part data reduct process although combin without weight multipl exposur reduct see refd_combin pypeit_coadd_dspec primari script call pypeit_coadd_dspec_ take input file object name guid process usag script usag display call script h option includ helppypeit_coadd_dspecrst option commonli use option show show seri matplotlib plot screen basenam provid basenam specd specd file provid default portion input specd filenam debug unclear differ show_ coaddd file format file similar docpypeit_fil exampl keck_lris_blu userdefin execut paramet rdx spectrograph keck_lris_blu detnum reduc findobj sig_thresh read data specd read sciencespecd_b_c_l_lrisb_martfit sciencespecd_b_c_l_lrisb_martfit sciencespecd_b_c_l_lrisb_martfit sciencespecd_b_c_l_lrisb_martfit specd end open block set paramet reduct step data block provid list docout_specd file run run script pypeit_coadd_dspec file frb_xs_coadddcfg show paramet guid coadd process also written disk record default locat coadddpar choos anoth locat modifi basename_ current coaddd data model output ident standard run describ docout_specd docout_specd includ includelinksrst _keck_kcwi keck kcwi overview file summar sever instrument specif set relat keckkcwi spectrograph futur setup includ pypeit setup wavelength rang support may need use pypeit_identifi task manual wavelength calibr data also note na mode current support pypeit take calibr kcwi arc recommend use fear lamp wavelength calibr data note fear calibr frame contamin due leak thar lamp observ end data affect need request new arc calibr small offset compens default use spectral flexur correct sky emiss line archiv wavelength calibr solut contain fear spectrum pixel flat recommend correct pixeltopixel variat use intern continuum lamp trace flat strongli recommend take dome trace flat essenti spatial illumin profil correct trace slit edg dome flat sky flat faith represent slit edg locat spatial illumin profil scienc frame align frame pypeit use align frame perform astrometr correct kcwi refer cont bar frame correct small align frame kcwi turn astrometr correct use command reduc cube astrometr fals imag process ccd pattern remov identifi sinusoid pattern imprint ccd vari time ccd row ie sinusoid pattern present spatial direct work read nois limit recommend subtract pattern robust algorithm remov pattern x x bin data rel slow pattern remov default would prefer turn ad follow docpypeit_fil sciencefram process use_pattern fals note effect read nois data determin overscan region test suggest effect read nois reduc percent pattern nois subtract rel spectral illumin correct pypeit use flat field frame make first guess rel spectral illumin fine correct rel spectral illumin perform use sky algorithm ensur slice sensit function wavelength recommend design observ slice contain sky would like perform rel spectral sensit correct exampl enough sky inform reliabl turn use command sciencefram process use_specillum fals sky subtract see docskysub use hint defin sky region use interact gui produc datacub pypeit produc datacub standard product reduct process instead pypeit deliv fulli process frame combin singl datacub use pypeit_coadd_datacub routin see doccoaddd document includ includelinksrst _pypeit_fil pypeit reduct file overview primari file dictat pypeit execut data reduc call pypeit reduct file name file expect end pypeit specif format discuss pypeit reduct file first automat gener use refpypeit_setup script often edit user document provid guidanc modifi file must uniqu pypeit file instrument configur setup modulo detector often includ name slit mask design relev instrument possibl need modifi set differ grate etc also enabl easili custom associ calibr file process file format exampl pypeit reduct file includ includeshane_kast_blue_apypeitrst paramet block top file paramet block allow user custom paramet use defin data reduct proce two line shown exampl requir see edit paramet block_ common edit also read refinstr_par relev instrument use collect data importantli provid alter alway made default paramet instrument question ie paramet need includ pypeit reduct file need includ paramet pypeit reduct file wish chang instrumentspecif default global default case instrument requir chang global default _setup_block setup block next block begin line setup read describ instrument configur one setup shown eg setup paramet provid show salient metadata instrument configur edit inform requir see docsetup _data_block data block last data block begin line data read includ path raw data file tabl describ file common edit tabl describ data block fixedformat tabl written underli astropytabletable_ object use refpypeit_setup symbol need align number per row must equal warn user alway gener pypeit reduct file use refpypeit_setup script howev often need edit virtual imposs creat autom procedur work case pypeit reduct file ultim author term data reduc understand edit file work edit overrid anyth deriv fit header docspectrograph requir least one file follow docframetyp arc wavelength calibr trace slitord definit pixelflat flat field scienc scienc exposur warn code run docpypeit_fil includ entri none must remov modifi entri edit paramet block docpypeit_par provid complet extens list paramet refinstr_par instruct refchange_par addit doc common edit pypeit user make toctre caption read maxdepth calibr frametyp bias_dark flat_field wave_calib slit_trac object_find reduction_tip edit data block section describ common edit data block pypeit file addremov file addremov file data block add file safe move copi line sort file gener refpypeit_setup see docsetup need format like other remov file may delet line comment prepend yet anoth remind includ bad calibr frame reduct ie frame want use frame incorrectli identifi type frame could automat classifi none type check remov bad frametyp common edit given data file docframetyp almost spectrograph support pypeit need least one arc tilt pixelflat trace scienc see exampl given file multipl frametyp simpli provid commasepar list without space standard star exposur frequent mislabel scienc lesser extent viceversa keep eye nearir one key differ probabl make modif enabl ab aabb whatev subtract see docab_differenc full discuss includ includelinksrst _histori histori keyword pypeit updat histori keyword fit header inform file creat raw data file reduc histori entri start date iso format string pypeit limit length allow fit standard entri may wrap next histori keyword make easier detect happen filenam filenam wrap doubl quot exampl reduct histori pypeit reduc target hip histori combin frame histori ssfitsgz histori ssfitsgz histori subtract background frame histori ssfitsgz histori ssfitsgz histori callibr frame histori arcsciencetilt ssfitsgz histori arcsciencetilt ssfitsgz histori arcsciencetilt ssfitsgz histori arcsciencetilt ssfitsgz histori pixelflattrac ssfitsgz coad histori pypeit coad object specd file histori file specd_dedra_deimos_aprtfit histori file specd_dedra_deimos_aprtfit histori file specd_dedra_deimos_aprtfit histori object id spatslitdet file histori object id spatslitdet file histori object id spatslitdet file histori object id spatslitdet file flux histori pypeit flux calibr sens_bfeige_kastb_may histori tfit _flexur flexur correct overview pypeit account spectral_ spatial_ flexur instrument former appli default latter requir extra care expertis discuss turn spatial code simpl yet rel robust method crosscorrel slit input imag determin rigid spatial offset algorithm perform frametyp spat_flexure_correct set true process block refpypeit_parprocessimagespar keyword made determin instrument enabl default inspect refpypeit_parinstrumentspecif default configur list see instrument includ depend frametyp choos correct code behav somewhat differ describ option increas complex sciencestandard user may wish correct flexur process standard sciencefram imag wish turn correct add pypeit file sciencefram process spat_flexure_correct true calibr standardfram process spat_flexure_correct true calcul spatial offset sciencestandard frame slit appli correct illumin flat appli correct prior sky subtract extract tilt modif docpypeit_fil like calibr tiltfram process spat_flexure_correct true calcul spatial offset trace flat tilt imag construct tilt solut frame appli offset gener tilt wavelegth sciencestandard imag spectral pypeit calcul spectral flexur correct singl pixel shift perform crosscorrel extract sky spectrum archiv sky spectrum impos wavelength solut simpl linear interpol enabl correct paramet spec_method refpypeit_parflexurepar keyword set boxcar slitcen default spec_method skip ie spectral flexur correct spectrograph except geminigmo ns keckdeimo keckkcwi kecklri lbtmod mmtbinospec nttefosc shanekast vltfor spec_method boxcar recommend observ sky spectrum flux boxcar extract spectrum wavelength taken extract object object extract set spec_method slitcen use spectrum extract center slit archiv sky spectrum gener paran sky spectrum use default howev differ kast blue lri blue sky_kastb_fit sky_lrisb_fit respect use see altern sky models_ sky model narrow sky emiss line domin analysi featur affect crosscorrel algorithm basic algorithm may summar follow identifi overlap wavelength rang data archiv sky rebin archiv sky spectrum onto overlap wavelength rang smooth sky spectrum resolut data archiv higher spectral resolut prefer normal spectrum unit averag sky count subtract bspline continuum perform crosscorrel fit crosscorrel parabola find center appli shift qa altern sky model may find default sky model best suit datather script allow user plot extract sky spectrum data sky model pypeit archiv script usag display call script h option includ helppypeit_compare_skyrst note paran sky model default refer present find sky spectrum mauna kea measur lri suffici variabl dark robust solut challeng fair result achiev use instrumentspecif sky spectra lowredux packag best practic current use one best match option paramet date use differ sky model default place follow line reduc block pypeit file reduc flexur spectrum name sky model model suppli pypeit filenam descript paranal_skyfit descript come sky_lrisb_fit mauna kea sky observ lrisb grism sky_lrisb_fit mauna kea sky observ lrisb grism default lris_blu sky_kastb_fit mt hamilton sky observ kastb grism default kast_blu sky_lrisr____fit descript come _pypeit_multislit_flexur pypeit_multislit_flexur implement method calcul flexur correct across multipl detector ie expand wavelength coverag contrast standard approach estim appli singl pixel shift entir spectrum techniqu fit linear correct wavelength thu far develop finetun line grate keckdeimo unlik work well wavelength much blueward ang sky emiss line spars briefli algorithm match slit across pair redblu detector measur centroid select sky line fit flexur solut slit slit fit solut slit output includ qa user need read output appli spectra custom code futur work may combin approach standard eg implement crosscorrel stretch wish adopt approach recommend user sever key step first modifi docpypeit_fil turn standard flexur avoid vacuum frame flexur spec_method skip calibr wavelength reffram observ run pypeit standard call construct simpl flexur file mainli consist list specd file test file userdefin execut paramet rdx spectrograph keck_deimo flexur read sciencespecd_decfhqs_deimos_tfit flexur end desir modifi refpypeit_parflexurepar keyword top block last run pypeit_deimos_flexur script pypeit_multislit_flexur flexurefil out_root out_root prefix fit file gener contain flexur solut slit _nirexampl nir exampl overview file provid exampl geminignir spectrograph best run nir reduct especi set calib id pypeit file advic setup pypeit file setup pypeit file pypeit_setup run pypeit_setup r absolute_path gemini_gnir b c b indic data use sky subtract column calib comb_id bkg_id ad pypeit file result pypeit file look like autogener pypeit file userdefin execut paramet rdx spectrograph gemini_gnir setup setup read setup decker arcsec_g dispnam mmsb_g dispangl setup end read data data read path absolute_path filenam frametyp ra dec target dispnam decker bin mjd airmass exptim dispangl calib comb_id bkg_id nsfit arcsciencetilt pisco mmsb_g arcsec_g nsfit arcsciencetilt pisco mmsb_g arcsec_g nsfit arcsciencetilt pisco mmsb_g arcsec_g nsfit arcsciencetilt pisco mmsb_g arcsec_g nsfit arcsciencetilt pisco mmsb_g arcsec_g nsfit arcsciencetilt pisco mmsb_g arcsec_g nsfit arcsciencetilt pisco mmsb_g arcsec_g nsfit arcsciencetilt pisco mmsb_g arcsec_g nsfit arcstandardtilt hip mmsb_g arcsec_g nsfit arcstandardtilt hip mmsb_g arcsec_g nsfit arcstandardtilt hip mmsb_g arcsec_g nsfit arcstandardtilt hip mmsb_g arcsec_g nsfit pixelflattrac gcalflat mmsb_g arcsec_g nsfit pixelflattrac gcalflat mmsb_g arcsec_g nsfit pixelflattrac gcalflat mmsb_g arcsec_g nsfit pixelflattrac gcalflat mmsb_g arcsec_g nsfit pixelflattrac gcalflat mmsb_g arcsec_g nsfit pixelflattrac gcalflat mmsb_g arcsec_g nsfit pixelflattrac gcalflat mmsb_g arcsec_g nsfit pixelflattrac gcalflat mmsb_g arcsec_g nsfit pixelflattrac gcalflat mmsb_g arcsec_g nsfit pixelflattrac gcalflat mmsb_g arcsec_g data end reliabl imag type sequenc gener base header card yet implement gnir henc sever modif pypeit file need made execut run_pypeit wavelength solut robustli determin oh sky line due flexur prefer use ar lamp arc use typic tellur star chosen bright high signal short amount time result weak sky line rel tellur star reason determin tilt wavelength solut tellur standard t_exp thu arc tilt remov tellur star frame type instead set calibr id calib match nearest time scienc imag instruct pypeit use tilt wavelength solut sequenc tellur standard note even dont plan tellur correct data advantag alway nevertheless includ tellur star pypeit file reason pypeit use tellur star crutch object trace faint object like produc better result tellur star pypeit file case pypeit use slitord boundari trace crutch calib id set number frame combin togeth gener calibr imag question best strategi choos frame set associ calib id depend exposur time dither pattern instrument question exampl pypeit file block abba sequenc gnir better understand set calib id may help eview set comb_id bkg_id abba sequenc describ docab_differenc instruct pypeit averag two imag togeth scienc subtract averag two b imag gener one set specd specd output thing b imag ie combin subtract combin imag entir abba sequenc oh line realli want distinct wavelength tilt solut gener averag anoth one gener averag bs would set calib id arbitrari number ie could also howev instrument expect flex much abba sequenc actual advantag combin entir abba sequenc one master frame wavelength calibr tilt gener reason averag four imag flux scienc object get dilut desir oh wavelength tilt calibr object count particularli object bright actual contamin word extract oh sky spectrum wavelength calibr trace arc line trajectori across detector tilt obvious bright object mess exampl optic would turn arc lamp take arc simultan observ star slit ir often sky bright rel object contamin spatial pixel much worri still good practic averag away object flux combin entir abba sequenc set calibr frame reason singl abba sequenc set calib id imag sequenc base gemini_gnirs_apypeit file look like autogener pypeit file userdefin execut paramet rdx spectrograph gemini_gnir setup setup read setup decker arcsec_g dispnam mmsb_g dispangl setup end read data data read path absolute_path filenam frametyp ra dec target dispnam decker bin mjd airmass exptim dispangl calib comb_id bkg_id nsfit standard hip mmsb_g arcsec_g nsfit standard hip mmsb_g arcsec_g nsfit standard hip mmsb_g arcsec_g nsfit standard hip mmsb_g arcsec_g nsfit arcsciencetilt pisco mmsb_g arcsec_g nsfit arcsciencetilt pisco mmsb_g arcsec_g nsfit arcsciencetilt pisco mmsb_g arcsec_g nsfit arcsciencetilt pisco mmsb_g arcsec_g nsfit arcsciencetilt pisco mmsb_g arcsec_g nsfit arcsciencetilt pisco mmsb_g arcsec_g nsfit arcsciencetilt pisco mmsb_g arcsec_g nsfit arcsciencetilt pisco mmsb_g arcsec_g nsfit pixelflattrac gcalflat mmsb_g arcsec_g nsfit pixelflattrac gcalflat mmsb_g arcsec_g nsfit pixelflattrac gcalflat mmsb_g arcsec_g nsfit pixelflattrac gcalflat mmsb_g arcsec_g nsfit pixelflattrac gcalflat mmsb_g arcsec_g nsfit pixelflattrac gcalflat mmsb_g arcsec_g nsfit pixelflattrac gcalflat mmsb_g arcsec_g nsfit pixelflattrac gcalflat mmsb_g arcsec_g nsfit pixelflattrac gcalflat mmsb_g arcsec_g nsfit pixelflattrac gcalflat mmsb_g arcsec_g data end note tellur standard calib id set correspond calib id nearest scienc abba sequenc time pypeit file associ data found pypeitdevelopmentsuit httpsgithubcompypeitpypeitdevelopmentsuite_ tri reduc includ includelinksrst _detector detector paramet basic anytim raw imag load pypeit also instanti classpypeitimagesdetector_containerdetectorcontain object hold salient detector paramet mani paramet hardcod support instrument also read frame question detector paramet use data reduct provid primari pypeit output file includ refspecdoutput refmast datamodel classpypeitimagesdetector_containerdetectorcontain object includ includedatamodel_detectorrst instrumentspecif data tabl provid subset current detector paramet see datamodel tabl valu alway read frame process tabl entri set none current paramet chang programmat eg via refpypeit_fil see error pleas provid correct via pr submit issue_ includ includeinst_detector_tablerst keck mosfir overview file summar sever instrument specif set relat keckmosfir spectrograph pypeit file advic setup pypeit file setup refpypeit_fil run pypeit_setup r absolute_path keck_mosfir b c b indic data use sky subtract column calib comb_id bkg_id ad refpypeit_filedata block see refpypeit_setup docab_differenc syntax use data column pypeit use exampl refpypeit_filedata block pypeit file read data data read path raw filenam frametyp ra dec target dispnam decker bin mjd airmass exptim filter lampstat dithpat dithpo dithoff frameno calib comb_id bkg_id m_fit pixelflatillumflattrac dome phlatz hspectroscopi mosfire_drp_mask h stare object m_fit pixelflatillumflattrac dome phlatz hspectroscopi mosfire_drp_mask h stare object m_fit pixelflatillumflattrac dome phlatz hspectroscopi mosfire_drp_mask h stare object m_fit arcsciencetilt mosfire_drp_ma hspectroscopi mosfire_drp_mask h mask nod m_fit arcsciencetilt mosfire_drp_ma hspectroscopi mosfire_drp_mask h mask nod b data end dither pattern posit offset associ fame report calib comb_id bkg_id column properli set user use dither inform help guid edit column calibr edg trace multislit pypeit abl match trace slit slitmask design inform contain meta data mosfir observ function moment implement mosfir deimo switch set use_maskdesign flag refpypeit_paredgetracepar keyword true alreadi default mosfir except longslit mask use pypeit also assign extract spectrum correspond ra dec object name inform slitmask design forc extract undetect object locat expect slitmask design function also default mosfir control flag assign_obj extract_missing_obj refpypeit_parslitmaskpar keyword see addit reading_ default pypeit use dither offset record header scienc frame find object slit howev better procedur would let pypeit comput offset use bright object one slit slitmask user provid docpypeit_fil maskdef_id correspond slit_numb mosfir slitmask design slit contain bright object exampl reduc slitmask use_dither_offset fals bright_maskdef_id note maskdef_id id associ slit slitmask design therefor instrument specif differ spat_id gener pypeit assign slit extract undetect object perform gaussian profil fwhm given paramet find_fwhm refpypeit_parfindobjpar keyword assum default valu mosfir find_fwhm pixel user need adjust valu accord size object extract moreov may occasion necessari set no_local_ski true refpypeit_parskysubpar keyword avoid bad local sky subtract longpo custom csu mask two slit offset field center plu center align box allow mosfir observ acquir standard star spectra cover entir access wavelength rang besid two slit central align box rest mask fill random slit often calibr frame dont number random slit scienc frame caus bad calibr code crash pypeit abl exclud random slit slit trace process paramet control exclus detector region slit edg trace exclude_region refpypeit_paredgetracepar keyword default pypeit exclud region random slit longpo mask user want modifi docpypeit_fil follow way calibr slitedg exclude_region exampl would select two region det pixel x direct detector moreov similarli multislit mask pypeit default match trace slit slitmask design inform contain meta data mosfir observ assign extract spectrum correspond ra dec object name inform slitmask design howev forc extract undetect object perform default note ra dec record mosfir observ longpo mask mock number therefor user use longslit similarli longpo longslit mask singl slit shorter length detector random slit fill mask default pypeit capabl exclud edg trace process region random slit longslit mask howev automat select region exclud look right user still modifi ad exclude_region paramet docpypeit_fil shown make sure flag bound_detector set true flat field although pypeit abl recogn flat frame taken lamp frame assign frame type pixelflat trace illumflat current lamp flat use correct dome flat thermal emiss gener dome kband observ wavelength calibr wavelength calibr gener perform use oh line scienc frame refwave_calibholi grail algorithm addit read addit doc relat keckmosfir toctre maxdepth devmosfirefram devslitmask_id devradec_object devadd_missing_obj code flow overview setup flow code flow refpypeitsetup script follow nearli function name object method modul name typic first item eg arparseinit method arparsepi goe pypeit_setup pyputilsmake_pypeit_filepypeit_fil spectrograph dfname run_pypeitparseropt pypeitpypeitarg load_inputpypeit_fil gener pyp_dict arparseget_argflag_class gener argf class argfinit_param pline argfload_linesparlin argfset_paramlistplin arparseget_spect_class gener spect class spectload_filebasetru default spectset_paramlistlin spectload_fil instrument specif spectset_paramlistlin spectset_paramlistplin use pyp_dict spectload_linesspclin command line argfsav spectsav arparseinitargf spect save set fitsdict creat fitsdict arloadload_headersdatlin check fit file settingsspectcheckch flip dispers direct need armlsd formal pypeit want reduc indent armbasesetupsciencefitsdict filesort arsortsort_datafitsdict find_standard_fil gener filesort dict arsortmatch_sciencefitsdict filesort written settingsspectftagindex arsciexpscienceexposurei fitsdict gener sciexp list scienceexposur object setup_dict gener arsortinstr_setupsciexp kk fitsdict setup_dict gener setupid group_dict gener arsortwrite_sortedgroup_dict setup_dict arsortwrite_setupsetup_dict item item creat carri around filesort fitsdict settingsspect settingsargf setup_dict group_dict sciexp highlight rest output name standard name data reduct output product astronomi even common practic pypeit follow schema name system must provid uniqu name avoid overwrit file one also desir format compact inform approach compromis compet requirementsdesir sourc file section describ compon file name observ sourc includ standard star _prefix prefix file type indic prefix short label follow tabl list format refoutput pypeit describ includ like suffix prefix format suffix specd multiextens fit one binari fit tabl fit per extract object specd multiextens fit one array per fit spectral imag qa seri figur assess data reduct pdf data qualiti instrument second label indic instrument set current support instrument pypeit put includelinksrst _kastwebsit httpmthamiltonucolickorgtechdocsinstrumentskast _lriswebsit httpswwwkeckhawaiieduinstlri _lowredux httpwwwucolickorgxavierlowredux instr telescop short descript web page kastb lick shane blue camera kast kastwebsite_ dualspectromet kastr lick shane red camera kast kastwebsite_ dualspectromet lrisb keck blue camera lri lriswebsite_ spectromet date time includ ut observ date time nearest second believ filenam uniqu ut date time drawn header refer start observ multipl time stamp drp eg lowredux_ tend use frame number uniqu identifi broken tradit better follow archiv name convent concern facil may includ frame number header user may intent accident gener multipl raw file frame number adopt format yyyymmmddthhmmss eg novt typic filenam may appear specd_lrisb_novtfit sourc identifi pypeit reduc detector separ associ identifi slit object detector therefor sourc uniqu identifi combin sourceidvalu date request specd file explod yield one fit file per sourc case filenam append sourc identifi _detid_slitid_objid complet filenam may appear specd_lrisb_novt___fit saniti sake file explod manner place folder name instrument timestamp calibr file follow section describ compon file name calibr includ includelinksrst _skysub sky subtract overview document describ pypeit perform sky subtract see refpypeit_parskysubpar keyword complet list option relat sky subtract global phase sky subtract perform fit sky across entir slit default done twice without knowledg object slit object detect taken place mask default mask object rel benign fwhm object estim pixel set threshold profil mask one enforc aggress mask set mask_by_boxcar mask object boxcar_radiu set refpypeit_parextractionpar keyword reduc extract boxcar_radiu arcsec skysub mask_by_boxcar true local assum perform refextractionoptim extract default refin sky subtract tandem turn eg recommend bright extend emiss line faint galaxi continua set no_local_ski refpypeit_parskysubpar keyword reduc skysub no_local_ski true interact defin sky region pypeit automat algorithm describ defin sky region may work specif scienc case sever way defin sky region first option defin locat slit sky pypeit file command comma separ list region repres locat slit left edg right edg reduc skysub user_region exampl sky region defin pixel slice leftmost percent slit ie rightmost percent slit specifi mani region like exampl would indic innermost percent pixel contain sky altern approach set sky region interact prefer approach want set differ sky region everi slit rememb realli assign sky region everi slit otherwis rel spectral sensit correct work interact defin sky region must first run reduct use follow command pypeit_skysub_region filenamepypeit provid list scienc frame want defin sky region one scienc frame time enter correspond number termin press enter see gui click drag region slit defin sky region hover mous window press key print list option termin window know oper gui left right mous button click drag add remov pixel sky region mask defin region red shade region repres sky pixel want set sky region multipl slit use assign sky region slit bar right hand side gui gray region repres slit black region repres outsid slit need click drag gray region click drag gray black region ie must click drag within small window work altern click enter region button request input command line enter region format user_region your happi sky region press continu save chang button wish save sky region press continu dont save chang button menu bar top screen prompt wish save sky region click either ye chose save region file region save master folder prefix masterskyregion given masterskyregion file link scienc frame base name masterskyregion file defin sky region manual rerun reduct sky region file exist master folder correspond scienc frame use default note manual creat sky region file use default pypeit either delet renam masterskyregion file later want use automat pypeit algorithm mastertilt overview file describ data model mastertilts_ imag written disk multiextens fit file prefix mastertilts_ master folder see refmastersmast name name convent inspect present way examin qualiti step view png file gener code docqa describ access png file gener per slit arc tilt qa show spectralspati posit line trace code exampl shane_kast_r imag figuresarc_tilts_dpng hope see qa rm red point red point mainli edg black line black point span across full detector last point smaller portion detector cover code extrapol inde exampl show output spectral pixel ideal cours case spectrograph data span full detector spat tilt qa examin residu tilt posit model function spatial offset along slit exampl shane_kast_r imag figuresarc_tilts_spatpng one hope see small residu without substanti spatial depend comment signific residu edg slit exampl spec tilt qa examin residu tilt posit model function spetral offset along slit exampl shane_kast_r imag figuresarc_tilts_specpng one hope see black point scatter orang green point far troubl shoot one imag appear err thing consid insuffici line todo explain add current wavetilt data model intern imag held classpypeitwavetiltswavetilt classpypeitdatamodeldatacontain datamodel written disk includ includedatamodel_wavetiltsrst includ includelinksrst _specdoutput specd output index specd overview datareduct process pypeit creat seri spectral imag prior extract spectra cours sever imag may greater valu analysi spectra onsourc exposur pypeit output seri imag singl multiextens fit file separ detector see current specdobj data model_ detail name spectra file name like specd_bjp_kastb_maytfit model prefix_frameobjname_spectrograph_timestampfit inspect open imag ds play around highli recommend use pypeit_show_dspec_ script interfac ginga_ _pypeit_show_dspec pypeit_show_dspec script display skysubtract imag singl detector ginga_ rc viewer also overlay slit object extract call reduct directori ie scienc folder specd imag locat script usag display call script h option includ helppypeit_show_dspecrst typic call codeblock consol pypeit_show_dspec sciencespecd_c_l_lrisb_martfit open tab ginga_ display one follow proces imag sciimgdet sky subtract imag skysubdet sky residu imag sky_residdet full residu imag remov object residdet redgreen line indic slit edg orang line present indic trace detect object light blue line present indic trace manual extract object mous around xvalu shown bottom indic wavelength pypeit_chk_dslit script print screen short summari slit inform detector detector script usag display call script h option includ helppypeit_chk_dslitsrst identifi slit need gener imag describ locat slitord given detector recommend approach pypeit import specdobj specdobj specdobjspecdobjfrom_filespecd_b_c_l_lrisb_martfit det slitmask specdobjslitsslit_imgflexurespecdobjsci_spat_flexur flexur correct appli ignor gener imag pixel valu pixel slitord spat_id pixel slit identifi spat_id _specdobj_datamodel current specdobj data model intern imag held classpypeitspecdobjallspecdobj hold full set classpypeitspecdobjspecdobj object wavelength vacuum data model latter includ includedatamodel_specdobjrst array associ classpypeitimagesdetector_containerdetectorcontain written separ hdu prefix detector number det descript use bitmask ie bpmmask extens see descript refout_mask includ includelinksrst _setup_doc setup overview docpypeit_fil critic compon success run pypeit refpypeit_setup provid autom mean gener file base set fit file describ pypeit defin uniqu instrument configur setup sort data prepar data reduct pypeit distinguish instrument configur use metadata pull fit file header defin specif spectrograph list metadata use establish instrument configur eg codeblock python pypeitspectrographsutil import load_spectrograph spec load_spectrographkeck_deimo specmeta_key_map print metadata key header card ra ra dec dec target targnam decker slmsknam bin none mjd mjdob exptim elaptim airmass airmass dispnam gratenam hatch hatchpo dispangl none idnam obstyp lampstat lamp dateob dateob utc utc mode mosmod amp ampmod left column provid pypeitspecif metadata keyword right column associ instrumentspecif header card metadata element header card set none mean metadata keyword valu condit multipl header valu exampl header card provid central wavelength given grate angl dispangl deimo depend grate use dispnam see funcpypeitspectrographskeck_deimoscompound_meta gener speak instrument configur set name dispnam central wavelength dispangl dispers element name decker slit mask decker name beamsplit dichroic dichroic andor onchip bin bin pypeit version dev follow tabl provid list metadata use defin instrument configur support spectrograph metadata key type exampl descript amp str singleb name amplifi use read detector arm str vi name spectrograph arm use collect data bin str onchip bin datasec str scienc region detector decker str long_ name decker slit mask detector str chip name detector dichroic str name dichroic dispangl float central wavelength dispers element observ angl dispnam str g name dispers element filter str j name ordersort filter everi uniqu combin relev metadata found fit file reduc repres uniqu instrument configur pypeit consid configur determin automat refpypeit_setup identifi capit letter eg execut refrunpypeit howev instrument configur set refsetup_block refpypeit_fil redetermin fit file latter allow user flexibl overrid pypeit autom configur set current refpypeit_fil provid data one instrument configur tend observ one instrument configur simpl set calibr setup run pypeit straightforward howev use multipl configur eg grate grate tilt slitmask must pay care attent setup describ pypeit automat determin instrument configur set file construct autogener pypeit file _pypeit_obslog pypeit_obslog pypeit_obslog script allow see simpl list data file given directori directori metadata pypeit pull header alway script usag display call script h option includ helppypeit_obslogrst exampl youv observ keck deimo go directori raw data execut codeblock consol pypeit_obslog keck_deimo point directori want list codeblock consol pypeit_obslog keck_deimo r pathtorawdata list print stdout also specifi file output also select metadata sort output chang column print etc _pypeit_setup pypeit_setup pypeit includ refpypeit_setup script one execut prepar data reduct automat associ fit file specif refframe_typ collect group frame collect uniqu instrument configur script usag display call script h option includ helppypeit_setuprst follow stepbystep procedur prepar data reduct prepar chang work directori one wish reduc data product appear directori first execut recommend first execut pypeit_setup like pypeit_setup r path_to_your_raw_datalb keck_lris_blu two commandlin option requir provid set spectrograph reduc camera specif r set full path raw data root prefix fit file specif note first run includ c argument execut pypeit_setup search fit fitsgz file provid root directori gener provid path contain wildcard best provid full path howev search multipl directori follow pypeit_setup r usersxavierkecklrisdataaprrawlb keck_lris_blu inspect output call creat two file setup_fil folder spectrograph_datepypeit dummi file ignor spectrograph_datesort show uniqu configur list frame associ configur determin autom procedur pypeit uniqu configur given capit letter identifi eg abcd exampl sort file exampl keck deimo data includ includekeck_deimossortedrst sort file contain two configur b setup block inform line describ instrument configur specif setup determin use relev metadata setup block follow tabl list file relev metadata file match instrument configur data provid specif instrument defin eg funcpypeitspectrographskeck_deimospypeit_file_key sort file provid mean assess autom setup identif file sort encourag briefli review result may recogn miss calibr may surpris see configur expect latter case help us improv autom procedur pypeit submit issu github submit issue_ includ sort file issu descript importantli use sort file decid configur select letter wish reduc also note pypeit interpret edit make file userlevel edit frametyp associ frame given configur etc must done via docpypeit_fil second execut write pypeit file one setup provid happi sort file execut refpypeit_setup second time cfg_split shortcut c option gener one subfold popul docpypeit_fil exampl use c option c gener one folderfil chosen configur c ac gener one folderfil input configur c gener foldersfil configur exampl execut produc refpypeit_fil configur pypeit_setup r path_to_your_raw_datalb keck_lris_blu c exampl gener new folder name keck_lris_blue_a within file name keck_lris_blue_apypeit b option wish specifi pair group file use background subtract eg ab includ b option simpli add relev column refpypeit_fil need edit hand two column ad comb_id bkg_id ad default nearir spectrograph see docab_differenc syntax use data column pypeit use specifi pypeit imag orient convent etc want specifi somewher exposur time need second someth like pypeit convent doc _new_spec new spectrograph note add new spectrograph scratch add new mode instal pypeit follow develop path see docinstal docdevdevelop entir new pypeit defin instrumentspecif behaviorparamet use python class hierarchi see classpypeitspectrographsspectrographspectrograph relev document abstract need defin new spectrograph pypeit reduct follow three differ datareduct path singl longslit multislit reduct eg keck deimo echel reduct spectrograph observ multipl crossdispers order eg keck nire slitbas integralfield spectrograph eg kcwi introduc new spectrograph help start class support spectrograph alter new spectrograph spectrograph class locat pypeitspectrograph start toplevel repositori see refinstru tabl datareduct pipelin path use spectrograph classhierarchi use pypeit specifi certain instrument mode like spectrograph arm inherit common base class exampl classpypeitspectrographskeck_lriskecklrisspectrograph implement mani method common arm red blue spectrograph includ method use read raw file use defin header card requir docmetadata use determin type frame arc dome bia etc base docmetadata classpypeitspectrographsspectrographspectrograph instanc lri arm inherit method common subclass classpypeitspectrographskeck_lriskecklrisspectrograph spectrograph similar set mode see pypeitspectrographskeck_lrispi demonstr note classhierarchi meant captur differ instrument configur grate filter etc name attribut spectrograph none class base class said basic step one need follow introduc new spectrograph follow build new file call name_of_spectrographpi file put pypeitspectrograph directori add new modul list import pypeitspectrographs__init__pi gener new telescop object new pypeittelescopespi add telescop name valid_telescop pypeitparpypeitparpi set algorithm path class attribut pypelin must multislit echel ifu set default paramet pypeit use reduct see refpypeitpar eg funcpypeitspectrographskeck_deimoskeckdeimosspectrographdefault_pypeit_par includ default badpixel mask see eg funcpypeitspectrographskeck_deimoskeckdeimosspectrographbpm defin link header keyword read raw fit file pypeitspecif docmetadata key use throughout code see eg funcpypeitspectrographskeck_deimoskeckdeimosspectrographinit_meta funcpypeitspectrographskeck_deimoskeckdeimosspectrographcompound_meta defin set pypeitspecif docmetadata key use establish uniqu instrument configur see eg funcpypeitspectrographskeck_deimoskeckdeimosspectrographconfiguration_key defin method use determin frame type given file base docmetadata see eg funcpypeitspectrographskeck_deimoskeckdeimosspectrographcheck_frame_typ set docmetadata instrument detector see eg funcpypeitspectrographskeck_deimoskeckdeimosspectrographget_detector_par defin method use read raw data see funcpypeitspectrographsspectrographspectrographget_rawimag compar eg funcpypeitspectrographskeck_deimoskeckdeimosspectrographget_rawimag echel spectrograph numer method requir provid detail current fix format order may need gener wavelength solut setup use refwave_calibpypeit_identifi util add pypeit archiv follow step outlin docconstruct_templ document see exampl pr httpsgithubcompypeitpypeitpull_ soargoodman spectrograph nearir nearir instrument may wish turn calibr step see classpypeitspectrographsgemini_gnirsgeminignirsspectrograph exampl test spectrograph support go forth requir mininum set test full run pipelin gratingmod spectrograph pypeit develop suit unit test test_load_imagespi tickl io doc request follow doc updat advertis new spectrograph toplevel readm file indexrst file doc also updat changesrst includ includelinksrst _out_mask output bitmask pypeit use bitmask flag data variou reason primer gener use bitmask see sdss bitmasks_ primer see also toctre maxdepth bitmask term output data main bitmask encount refspecdoutput bpmmask extens file contain badpixel bitmask valu accru process reduct data main object manag bitmask classpypeitimagesimagebitmaskimagebitmask defin follow bit includ includeimagebitmask_tablerst construct appropri bitmask two way recommend instanti bitmask directli codeblock python pypeitimagesimagebitmask import imagebitmask bm imagebitmask specif specd file name bit order save header instanti gener classpypeitbitmaskbitmask header howev clear long behavior remain instanti relev classpypeitbitmaskbitmask header codeblock python astropyio import fit pypeitbitmask import bitmask hdu fitsopenspecd_bjp_kastb_maytfit bm bitmaskhduheaderimgbitmsplit classpypeitbitmaskbitmask classpypeitimagesimagebitmaskimagebitmask instanti interpret mean bpmmask extens follow use funcpypeitbitmaskbitmaskflag method produc boolean array select pixel flag given bit codeblock python extract_flag bmflaggedhdudetbpmmaskdata flagextract use method select multipl bit codeblock python process_flag bmflaggedhdudetbpmmaskdata flagbpm cr satur select bit flag reason codeblock python bpm hdudetbpmmaskdata get humanread reason given valu flag use funcpypeitbitmaskbitmaskflagged_bit method codeblock python printbmflagged_bitshdudetbpmmaskdata tellur correct overview tellur correct done main run pypeit docflux doccoaddd algorithm deriv best tellur model pretti similar use ir sensit function fit user defin model tellur giant tellur grid pleas see docflux detail note execut pypeit_tellfit requir atmospher model grid instal system see instruct instal refdata_instal pypeit_tellfit primari script call pypeit_tellfit_ take input file argument guid process three differ object model fit object model object model option qso quasar agn star stellar object poli use object solv polynomi model tellfit file format file describ usag script ie type pypeit_tellfit h three exampl three differ object model userdefin tellfit paramet quasar redshift seven tellfit objmodel qso redshift bal_wv_min_max userdefin tellfit paramet type star tellfit objmodel star star_typ star_mag userdefin tellfit paramet type target tellfit objmodel poli polyord fit_wv_min_max see parameters_ detail run script usag display call script h option includ helppypeit_tellfitrst exampl script execut would pypeit_tellfit j_gnirsfit gemini_gnirstel pypeit_tellfit j_gnirsfit objmodel qso r substanti set output print screen success final spectrum written disk input output file standard coaddd data model format see doccoaddd current data model paramet guid tellfit process also written disk record default locat telluricpar choos anoth locat par_outfile_ option command line option objmodel object model either qso star poli tell_grid g full path tellur grid file case spectrograph defin default grid need set argument pca_fil p full path qso pca pickl file use qso model default qso_pca__pckl download put pypeit tellur data folder tell_fil tellfit paramet file redshift r redshift object debug show debug plot set plot show final tellur correct spectrum set par_outfil file name tellfit paramet use fit paramet qso model two main paramet qso model redshift bal_wv_min_max redshift redshift scienc object want correct tellur absorpt bal_wv_min_max set bal_wv_min_max quasaragn broad absorpt line quasar list even float number format case two absorpt trough bal_wave_min bal_wave_max bal_wave_min bal_wave_max star model main paramet star model star_typ star_mag star_typ spectra type star use vega spectrum otherwis use kurucz sed model star_mag vband magnitud star poli model main paramet poli model poly_ord fit_wv_min_max poly_ord polynomi order want use model object fit_wv_min_max specifi list specif region use fit set simpli use whole spectrum format paramet exactli bal_wv_min_max_ defin show final tellur correct spectrum final spectrum may view lt_xspec script load data launch gui linetool packag eg lt_xspec j_gnirs_tellcorrfit need document tellmodel file includ includelinksrst _image_proc basic imag process describ basic imag process step perform pypeit specif order salient detail toggl specif step use refpypeit_fil descript meant gener spectrograph instrumentspecif advic see refspec_detail unless otherwis state relev paramet govern basic imag process kept classpypeitparpypeitparprocessimagespar see refpypeitpar importantli howev chang default paramet frame type lead fault see refproc_algorithm refworkflow _overview overview provid gener approach imag process hook toggl step appropri differ frame type andor differ instrument gener treat pixel valu mathp astronimc imag unit adu contain follow compon math p b c n_rm bin t_rm exp g matho framedepend bia estim adu use imag overscan region mathb longerterm pixelbypixel bia estim adu overscan subtract use bia imag quantiti mathcc number electron count excit photon hit detector math effici factor one mani account rel throughput factor see measur flatfield frame mathd darkcurr ie rate detector gener thermal electron epixel mathn_rm bin number pixel bin pixel matht_rm exp exposur time second mathg amplifi gain e per adu rel throughput mean aggreg rel say center field telescopeinstrumentdetector effici factor measur flatfield imag see ref_flat_field like pixeltopixel differ quantum effici known pixelflat spatial variat slit illumin result vignet instrument optic known illumflat variat slit illumin spectral direct known specillumflat goal basic imag process solv mathc set scienc calibr frame use set frame isol detector bia dark current rel throughput find math c left g p b n_rm bin t_rm exp right process also gener nois model result imag process calcul use funcpypeitcoreprocimgvariance_model full varianc model mathv math v left rm max c n_rm bin t_rm exp v_rm rn v_rm proc right epsilon rm max c mathv_rm rn detector readnois varianc ie readnois e squar mathv_rm proc ad varianc imag process ie term includ uncertainti bia subtract etc mathepsilon ad error term impos maximum signaltonois scale count emphas model perpixel imag varianc particularli use asobserv pixel valu estim poisson error observ count estim systemat overestim varianc toward low count mathlesssim sigma_rm rn bia approxim mathsigma_rm rn mathc ie readnois e less readnois mathcgeq reason bia one tri estim varianc poisson process noisi realiz true underli count rate mitig bia varianc model typic updat skysubtract objectextract procedur _proc_algorithm process algorithm basic imag process step perform classpypeitimagesrawimagerawimag regardless imag refframe_typ order oper alway content process step depth local convers count first imag unit convert electron count use gain eadu amplifi even though matho mathb adu equat mathp measur e appli gain importantli measur must consist across imag apply_gain paramet default true rare ever want chang howev make sure chang imag process ie dont want bia subtract imag adu apply_gain fals imag e apply_gain true unit process imag save imag header unit either e adu patternnois subtract instrument specif keck kcwi known sinusoid pattern bia funcpypeitimagesrawimagerawimagesubtract_pattern model subtract pattern data base overscan region unless know pattern exist data set use_pattern option fals default frame current error associ pattern subtract includ imageprocess error budget howev readnois determin empir error pattern nois subtract effect includ readnois estim worth consid use empir readnois calcul your appli pattern subtract read digit nois readnois varianc mathv_rm rn calcul funcpypeitcoreprocimgrn_fram calcul requir detector readnois rn elect e possibl gain mathg eadu amplifi provid amplifi classpypeitimagesdetector_containerdetectorcontain object defin detector classpypeitspectrographsspectrographspectrograph subclass readnois valu set mathleq readnois estim varianc overscan region imag process see funcpypeitimagesrawimagerawimageestimate_readnois use readnois estim regardless valu provid classpypeitimagesdetector_containerdetectorcontain object also explicitli request set empirical_rn paramet true default readnois varianc imag includ digit nois digit nois driven convers count adu via gain quantiz integ one deriv digit nois take second moment uniform distribut find mathsqrt adu _ _ typic neglig ie gain order readnois case digit nois includ estim readnois reason digit nois explicitli includ pypeit varianc model inclus turn use pypeit paramet need add digit nois instrument pleas submit issue_ overscan subtract avail rawimag reader spectrograph return overscan region detector see funcpypeitspectrographsspectrographspectrographget_rawimag overscan subtract use region imag subtract perfram bia level see funcpypeitcoreprocimgsubtract_overscan set use_overscan paramet fals want use overscan way importantli instrument detector includ overscan region support instrument overscan region use_overscanfals default uncertainti overscan subtract propag imageprocess error budget trim reorient rawimag reader spectrograph return primari data region detector see funcpypeitspectrographsspectrographspectrographget_rawimag trim crop imag includ primari data region see funcpypeitcoreprocimgtrim_fram trim perform trim paramet true pypeit convent orient imag spectra run along first axi imag blue wavelength small pixel coordin red wavelength larg pixel coordin spatial crossdispers direct along second axi echel order run highest order small pixel coordin lowest order larg pixel coordin shape imag alway roughli number spectral pixel number spatial pixel often refer document nspecnspat oper requir fliptranspos imag array match pypeit convent dictat instrumentspecif classpypeitimagesdetector_containerdetectorcontain paramet perform funcpypeitspectrographspectrographsspectrographorient_imag imag orient perform orient paramet true warn never turn imag trim imag orient process imag expect trim reorient accord pypeit convent break code turn option bia subtract overscan region gener addit read detector beyond size along readout direct overscan subtract provid singl correct full imag overscan_method median correct pixel along readout direct overscan_method median combin mani overscansubtract bia imag provid pixeltopixel biaslevel correct scienc region detector perform bia subtract includ bia frame refpypeit_fil set use_biasimag true bia correct see funcpypeitimagesrawimagerawimagesubtract_bia appli trim orient uncertainti bia subtract propag imageprocess error budget dark subtract addit readnois gain instrumentspecif classpypeitimagesdetector_containerdetectorcontain object also provid expect dark current see refdetector tabul dark current must elect per pixel per hour note per pixel mean per unbin pixel dark current bin pixel mathn_rm bin higher unbin pixel version tabul dark current scale frame exposur time bin alway subtract observ imag ie current paramet turn primarili due account dark current imag varianc model see ie mathd term assum imag taken given instrument importantli pypeit also subtract tabul darkcurr valu provid dark frame mean dark frame combin masterdark use correct pixeltopixel deviat measur dark current respect tabul valu deviat expect small compar tabul dark current valu warn thrown median differ measur tabul dark current larger collect dark imag wish subtract scienc frame includ refpypeit_fil set use_darkimag true see funcpypeitimagesrawimagerawimagesubtract_dark note biassubtract scienc frame plan also subtract combin dark frame make sure biassubtract dark frame pypeit automat scale sum tabul dark current masterdark ratio exposur time appropri subtract countss measur master dark frame note nomin exposur time dark imag ident frame appli mean ratio exposur time uniti bewar dark imag process case specif scale ratio exposur time assum process dark frame includ dark count ie dark imag includ bia offset exposur time differ also note import nois perspect dark exposur alway least long longest exposur time calibr group calibr group discuss refsetup_doc refab_differenc refd_combin spatial flexur shift spatial shift slit posit due instrument flexur calcul use funcpypeitcoreflexurespat_flexure_shift spat_flexure_correct paramet true see refflexur addit discuss flatfield process imag flatfield correct pixeltopixel throughput variat use_pixelflat slit illumin profil use_illumflat rel spectral respons use_specillum multipl correct propag imageprocess error budget see refflat_field addit discuss note current appli slitillumin spectral respons correct must also appli pixeltopixel correct ie order perform flatfield correct use_pixelflat must true count statist nois floor compon error budget see refoverview calcul throughout process step two final compon shot nois electron count ad shot_nois paramet true except bia frame imag includ shotnois calcul includ dark frame onski observ sky standard scienc frame pypeit impos perpixel nois floor ad fraction count errorbudget specif quantiti mathepsilon c see refoverview ad varianc imag mathepsilon set noise_floor mathc rescal ie flatfieldcorrect count limit mathc larg yeild maximum signaltonois per pixel mathcsqrtv noise_floor remov set noise_floor cosmic ray identif mask todo shouldnt done flatfield referencedescript what done remov fals posit pypeit identifi mask cosmic ray mask_cr paramet true pypeit use combin la cosmic ray reject algorithm _ followup filter identifi remov fals posit relev paramet algorithm edit via refpypeit_fil see funcpypeitimagespypeitimagepypeitimagebuild_crmask funcpypeitcoreprocimglacosm _workflow workflow flexibl main paramet dictat imag process workflow provid tabl first column give paramet order effect algorithm second column give default valu independ frame type subsequ column give gener chang default made frame type empti cell column mean paramet default valu frame type order order theyr process within pypeit workflow modulo subtl differ arctilt imag process compar slit trace imag reduc ifu data vs multislitechel data make chang workflow via paramet make sure consid order oper illustr tabl go top bottom left right also bewar chang lead fault silent bug particular pypeit alway expect process imag trim reorient match pypeit convent note instrumentindepend paramet default classpypeitspectrographsspectrographspectrograph subclass alter default need typic approach taken data instrument user make alter need specif data via docpypeit_fil see refpypeitpar includ includeimgproc_defaults_tablerst warn basic imag process workflow larg independ frame type particular there intellig autom check place master frame process whether correct appli master frame exampl overscan subtract bia frame also overscan subtract frame perform bia subtract vice versa alter process workflow user make sure process imag appropri across frame type mask pypeit use bitmask flag pixel variou reason see refout_mask descript mask usepars newberri pasp httpsuiadsabsharvardeduabspaspnabstract_ merlin howel exa httpsuiadsabsharvardeduabsexamabstract_ van dokkum pasp httpsuiadsabsharvardeduabspaspvabstract_ metadata index metadata overview pypeit slurp raw data frame set meta data perform reduct held astropi tabl within pypeitmetadata class follow doc mainli develop begin point two user user meta data primarili ingest via code user overrid data via pypeit file tread care perform reduct run run_pypeit code requir requir meta data ingest case howev header muck eg keck best fix file proceed feel adventursom may set ignore_image_head paramet rdx block eg rdx ignore_bad_head true buyer bewar case develop data model data model meta data specifi seri method bottom metadatapi modul exampl core_metatarget dictdtypestr commentnam target core_metabin dictdtypestr commentspatialspectr bin key specifi name data type comment meta data float intend use defin configur rtol key present eg additional_metadispangl dictdtypefloat commentangl dispers rtol core meta requir code run addit meta use primarili configur ingest meta meta data read spectrograph class main method get_meta_valu parent class children specifi specif meta data item ingest standard method via header one specifi extens header array typic header card eg metadec dictext carddec metatarget dictext cardobject item requir meta data provid data file set valu one set default metabin dictext cardnon default meta requir set frametyp eg vlt provid radec calibr may specifi frametyp requir metadec dictext carddec required_ftypessci also requir particular bit meta data frame set requiredfals ie selfmetadith dictext cardhierarch eso seq cumoff requiredfals note overrul required_ftyp ie dont use togeth meta data depend one header card complex compound_meta method use exampl keckdeimo def compound_metaself headarr meta_key arg headarr list meta_key str return valu meta_key bin binspati binspec parseparse_binningheadarrbin bin parsebinningstringbinspati binspec return bin elif meta_key dispangl headarrgratepo return headarrgtltwav elif headarrgratepo return headarrgtltwav els debuggerset_trac els msgserrornot readi compound meta _masteredg masteredg overview file describ masteredg object contain core inform requir describ edg slit given detector order echel see current edgetrac data model_ written disk multiextens fit file prefix masteredg master folder see refmasternam doc also describ view slit edg use pypeit_chk_edges_ view prefer way view slit edg identifi pypeit pypeit_chk_edges_ script script usag display call script h option includ helppypeit_chk_edgesrst _pypeit_chk_edg pypeit_chk_edg current option view slit edg imag use construct use pypeit_chk_edges_ script ginga default mode requir first launch ginga viewer remot control mode ginga modulesrc see rc tab upper right ginga viewer may run script pypeit_chk_edg mastersmasteredges_a__fitsgz zoomin screen shot refkecklrisr spectrograph imag figuresslit_edges_gingapng thing note goodperform exampl slit run nearli vertic across imag leftright edg slit identifi greenr line slit identifi index brightest slit align box discard code matplotlib avoid ginga use mpl flag pypeit_chk_edg mastersmasteredges_a__fitsgz mpl color scheme distinct label includ leftright edg slittrac todo describ object link doc _edgestroubl edg troubl shoot see docslit_trac discuss custom fuss slit trace current edgetrac data model intern imag held edgetrac datacontain datamodel written disk appear highlight rest _frame_typ frame type index frame_typ overview everi raw data file ingest pypeit must given frame type identifi frame treat includ data reduct frame type done automat run pypeit_setup see refpypeit_setup simpl wrapper classpypeitpypeitsetuppypeitsetup type frame data file automat identifi one type list tabl file could identifi given frame type set none autom type calibr frame robust follow instrument keck deimo howev autom type scienc versu standard frame gener robust _frame_type_def definit possibl frame type defin pypeit brief descript list follow codeblock python pypeitcoreframematch import frametypebitmask frametypebitmaskinfo detail descript given tabl frame type descript align use align spatial posit multipl slit frame particularli use slitbas ifu keck kcwi arc spectrum one calibr arc lamp bia bia frame typic exposur shutter close dark dark frame typic exposur assess dark current shutter close illumflat spectrum taken correct illumin profil slit often trace flat pinhol spectrum taken pinhol slit ie short slit length use defin centr slit current frame use echel data reduct often exposur use flat lamp one principl use standard star frame scienc frame spectrum uniform pixelflat spectrum taken correct pixeltopixel detector variat often exposur use dome recommend intern flat lamp observ blue may onski scienc spectrum one scienc target standard spectrum spectrophotometr standard star pypeit includ list predefin standard trace spectrum taken defin slit edg often exposur use flat lamp observ blue may onski slit length trace frame scienc slit tilt exposur use trace tilt wavelength solut often file arc none file could automat identifi pypeit possibl even common arc flat imag frame assign one frame type warn code run docpypeit_fil includ entri none frame type defin must either remov edit entri pypeit file byhand run pypeit_setup autom type autom type file perform pypeit_setup detail classpypeitpypeitsetuppypeitsetup build tabl metadata file found use search key provid funcpypeitpypeitsetuppypeitsetupfrom_file_root method metadata gather maintain classpypeitmetadatapypeitmetadata base set header keyword defin support spectrograph exampl metadata keyword keck deimo reduct codeblock python pypeitspectrographskeck_deimo import keckdeimosspectrograph spec keckdeimosspectrograph key specmetakey specmetakeycard none continu printkey extens header card format key specmetakeyext specmetakeycard print follow codeblock bash key ra extens header card ra key dec extens header card dec key target extens header card targnam key decker extens header card slmsknam key mjd extens header card mjdob key exptim extens header card elaptim key airmass extens header card airmass key dispnam extens header card gratenam key hatch extens header card hatchpo key idnam extens header card obstyp key lampstat extens header card lamp method funcpypeitmetadatapypeitmetadataget_frame_typ use metadata tri identifi frame type coupl except howev method larg wrapper check_frame_typ method spectrograph eg see funcpypeitspectrographskeck_deimoskeckdeimosspectrographcheck_frame_typ deimo relev exposur time frame refin use paramet pypeit file exampl edit exposur time pixelflat imag second includ follow line pypeit file codeblock ini calibr pixelflatfram exprng note set either limit none undefin ie codeblock python pypeitspectrographskeck_deimo import keckdeimosspectrograph keckdeimosspectrographdefault_pypeit_parcalibrationspixelflatframeexprng show default exposuretim rang pixel flat none mean lower limit exposur time pixelflat moment exposur time alter programmat frame type determin condit hardcod _flux flux overview flux done main run pypeit two step process gener sensit function_ appli sensit function_ describ turn howev first discuss basic flux conceptsapproach sensit function sensit function gener docout_specd file process standard star pypeit use archiv flux spectrum either calspec calibr databas httpstscieduhstobservatorycrdscalspechtml_ one file grab eso httpswwwesoorgsciobservingtoolsstandardsspectrastanlishtml_ observ someth els see ad standard star_ sensit function gener divid standard star flux unit e ergscmang standard star count per second per angstrom photonssang sensit function written disk fit file unit e ergscmangesang inform see reffluxcalib flux calibr spectra spectrum count specd file use comput count per second per angstrom sensit function multipli yield flux scienc spectrum unit f_lambda e ergscmang sensit function written disk fit file unit e ergscmangphotonssang e ergcmphoton use ir instrument choos ir mode see need grab tellur file see refinstall_atmospher pypeit_sensfunc process mediat pypeit_sensfunc script script usag display call script h option includ helppypeit_sensfuncrst typic call pypeit_sensfunc specdfil keck_lrisr___sensfit analyz standard star spectrum specdfil write sensit file keck_lrisr___sensfit common option use multi instrument eg keck_deimo gemini_gmo spectrum span across multipl detector sensit function handl use multi option eg pypeit_sensfunc multi debug throw number plot screen algorithm algorithm option uvi use data lambda detail model tellur absorpt correct atmospher extinct ir use data lambbda peform joint fit sensit function tellur absorpt use hitran model sen provid file guid process chang default accommod script input ir without standard wish gener sensit function standard star part pypeit databas work ir feed stellar paramet exampl sensfunc algorithm ir star_mag star_typ run specd file would otherwis star use vega spectrum otherwis use kurucz stellar sed altern see ad standard star_ sensit function unit definit sensit function pypeit defin function maths_lambda satisfi math s_lambda fracf_lambdan_lambda unit mathrm ergcmphoton mathf_lambda specif energi flux unit mathrm ergscmmathrmmathringa mathn_lambda specif photon flux unit mathrm photonssmathrmmathringa pypeit specd file contain mathn_rm pix unit mathrm photonspixel gener fluxcalibr spectra mathf_lambda maths_lambda must comput spectrophotometr standardstar observ paragraph insert hyperlink discuss fluxingrst someon address mathn_lambda must determin mathn_rm pix via math n_lambda fracn_rm pixfracdlambdadrm pix delta mathdelta exposur time mathfracdlambdadrm pix wavelength space per pixel gener constant sinc pypeit specd spectra ie mathn_rm pix extract irregularli space wavelength grid flux calibr flux calibr spectra ie mathf_lambda report specd file eg opt_flam box_flam optim boxcar extract respect unit math rm ergscmmathrmmathringa spectroscop zeropoint flux calibr pypeit spectra express via spectroscop zeropoint analog imag zeropoint defin math rm zeropoint equiv log_leftfracfraclambdacs_lambdaleftfrac rm jyrm photon rm mathrmmathringarightright definit see astronom sourc flat spectrum frequenc mathnu ie mathf_nu rm const ab magnitud equal zeropoint produc mathn_lambda rm photonsmathrmmathringa detector sum mathn_rm pix photon per pixel pixel correspond mathdelta lambda mathrmmathringa interv equal uniti definit spectroscop zeropoint follow math leftfracf_lambda rm ergscmmathrmmathringaright rm zeropoint zpconst leftfracn_lambdarm photonssmathrmmathringarightleftfraclambdamathrmmathringaright mathzpconst dimensionless number defin math rm zpconstequiv fracfracmathrmmathringactim rm ergscmmathrmmathringa rm jy practic pypeit fit store spectroscop zerpoint use equat comput mathf_lambda mathn_lambda viceversa sensit function script reffluxingpypeit_sensfunc produc qa plot show zeropoint fit shown echel observ zeropoint qa shown order shown add plot spectroscop throughput zeropoint close relat spectroscop throughput number count per pixel spectrum object flux mathf_lambda math n_rm pix tlambda rm atmlambda fracdlambdad_rm pixfracf_lambdahnudelta matha effect apertur telescop mathtlambda spectroscop throughput mathrm atmlambda attenu caus earth atmospher mathfracdlambdad_rm pix number mathmathrmmathringa per pixel defin mathhnu photon energi mathdelta exposur time base equat definit follow spectroscop throughput written mathtlambda frachnua s_lambda note mathtlambda clearli dimensionless given unit maths_lambda mathrm ergcmphoton maths_lambda specifi zeropoint throughput curv comput zeropoint given effect apertur telescop qa plot isnt shown add addit zeropoint qa shown sensit function script pypeit_sensfunc also produc qa plot show throughput curv comput directli spectroscop zeropoint note defin spectroscop throughput telescop instrument system includ attenu caus earth atmospher also zeropoint sensit function pypeit flux calibr algorithm gener attempt remov impact slit loss limit standard star observ scienc observ exactli see flux calibr perfect realist scenario differ manifest wavelengthdepend systemat error flux calibr direct error depend rel see standardstar scienc observ futur version hope implement better treatment slit loss time recommend user requir accur flux calibr forc pypeit fluxcalibr spectra agre photometri done use filter paramet option coad see refpypeit_parcoadddpar keyword set coaddd file use guid coaddit pypeit_coaddd script see refcoaddd appli sensit function gener sensit function_ may appli one docout_specd file file modifi place fill opt_flam box_flam etc entri describ docout_specd flux file flux one specd file gener flux_fil follow format flux read specdfil sensfil specdfil flux end flux read specdfil sensfil specdfil sensfil specdfil sensfil flux end actual exampl flux read specd_unknownfrbhosty_vlt_fors_dectfit vlt_fors_sensfit specd_unknownfrbhosty_vlt_fors_dectfit specd_unknownfrbhosty_vlt_fors_dectfit flux end one wish modifi refpypeit_parfluxcalibratepar keyword add paramet block top file eg fluxcalib extrap_sen true flux read specd_forstfrbhost_fors_jultfit vlt_fors_i_sensfit specd_forstfrbhost_fors_jultfit flux end aid setup provid pypeit_flux_setup script script usag display call script h option includ helppypeit_flux_setuprst need descript pypeit_flux_calib flux perform pypeit_flux_calib script script usag display call script h option includ helppypeit_flux_calibrst typic call pypeit_flux_calib flux_filetxt docout_specd file modifi place see refpypeit_show_dspec detail view fluxspec class gut flux algorithm guid classpypeitfluxcalibratefluxcalibr class troubleshoot problem empti filenam encount error flux calibr ir algorithm pleas follow step make sure instal relev atmospher tellur model see instruct instal refdata_instal instal via pipconda path pypeit directori straightforward someon familiar python packag instal ad new data instal script telgridfil name file pypeitdatatelluricatm_grid directori write filenam correspond file observatori paramet telgridfil ie keck_lris_senstxt eg codeblock ini sensfunc algorithm ir polyord ir telgridfil telfit_maunakea___rfit run pypeit_sensfunc sens_fil option eg codeblock consol pypeit_sensfunc your_specdfil your_outputfit sens_fil keck_lris_senstxt problem bspline knot there text someon describ problem ad standard star star repositori add new solut eso databas httpswwwesoorgsciobservingtoolsstandardsspectrastanlishtml_ need place dat file pypeitdatastandardsesofil edit esofil_infotxt file accordingli make sure flux column flux unit rather magnitud ie file start f eso databas flux unit ergsscmaa extra kudo submit pr other benefit standard star even nontradit contact develop addit read addit doc somewhat common edit pypeit user make toctre maxdepth standard tellur _master master frame overview calibr gener default pypeit write data harddriv docmast folder name master allow user inspect calibr allow quicker rereduct ie step skip includ case code crash thing fix one rerun script list masterfram file gener one made depend docspectrograph calibr file provid type format descript masteralign fit align imag ifu masterarc fit process arc spectral imag masterbia fit process bia imag masterdark fit process dark imag masteredg fit sever imag describ slit trace masterflat fit normal flat field imag masterpinhol fit pinhol flat imag masterslit fit reduc output slit trace mastertiltimg fit map pixel constant wavelength mastertilt fit imag use trace wavelength slit masterwav fit wavelength imag air angstrom masterwavecalib fit solut wavelength calibr _masternam master name name convent masterfram bit obscur exampl one masteredges_a__fit break prefix describ tabl specifi spectrograph docsetup specifi detector number onebas index specifi bitwis descript calib calib_id pypeit run success file calib extens gener offer summari refmasternam may gener similar perhap readabl file use refpypeitparsecalibid script masterarc overview file describ data model masterarc_ imag gener simpl combin input arc frame imag written disk multiextens fit file prefix masterarc_ master folder see refmastersmast name name convent inspect first extens combin imag view standard imag viewer eg ginga mastersmasterarc_a__fit often use one arc frame appear similar raw imag stack sever output could quit differ imag also trim portion raw imag also reorient vertic spectral dimens blue bottom screen shot ginga view exampl shane_kast_r spectrograph imag figuresarc_imagepng yup arc troubl shoot imag appear err thing consid one input arc frame junk one input arc frame mislabel current arcimag data model intern imag held classpypeitimagesbuildimagearcimag classpypeitimagespypeitimagepypeitimag classpypeitdatamodeldatacontain datamodel written disk includ includedatamodel_arcimagerst gemini gmo overview file summar sever instrument specif set relat geminigmo spectrograph nod shuffl time enabl reduct data taken nodshuffl mode simpli replic calibr subtract nod imag reduc separ slit mode need specifi gemini_gmos_north_ham_n spectrograph slit somewhat frequent use longslit slit identifi bluest detector mitig recommend ad pypeit file codeblock ini calibr slitedg det_min_spec_length fit_min_spec_length edge_thresh one also manual check codeblock consol pypeit_trace_edg f my_pypeit_filepypeit debug show pypeit_chk_edg mastersmasteredges_filefitsgz valid trace happen longslit data slit edg fact beyond edg detector return error typeerror unsupport format string pass nonetype__format__ solut ad pypeit file codeblock ini calibr slitedg bound_detector true bound_detector true code artifici add left right edg bound detector case slit detect reject due failur wavelength calibr appear issu similar see lack slit ski differ inform slit detect log file enough use id case check wavelength solut tri adjust wavelength paramet issu might solv mosaic function ad arc cuar lamp pretti faint blue lead uniqu challeng present lower default tracethresh paramet ie codeblock python parcalibrationstiltstracethresh deal faint cuar line possibl want increas unlik _heliocorr highlight rest heliocentr correct document describ pypeit impos heliocentr correct spectrum extract overview nearli analysi spectra astronom object requir one remov peculiar motion earth addit one may wish correct solar system default pypeit impos heliocentr correct place earth within sun refer frame algorithm basic algorithm may summar follow determin time observ radec observatori info header calcul correct use astropysolar_system impos data extract flexur correct detail time default code establish time observ date keyword read header header card use depend instrument note current must written isot format code run success observatori info set instrument specif set file radec default taken header use ra dec keyword masterdark overview file describ data model masterdark imag written disk multiextens fit file prefix masterdark master folder gener simpl combin input dark frame inspect first extens stack imag view standard imag viewer eg ginga mastersmasterdark_a__fit resembl one input dark frame asid overscan subtract depend process paramet bia subtract depend process paramet trim portion imag reorient vertic spectral dimens blue bottom troubl shoot imag appear error thing consid one input dark frame junk one input dark frame mislabel current darkimag data model intern imag held classpypeitimagesbuildimagedarkimag classpypeitimagespypeitimagepypeitimag classpypeitdatamodeldatacontain datamodel written disk includ includedatamodel_darkimagerst keck deimo overview file summar sever instrument specif set relat keckdeimo spectrograph warn pypeit current reduc imag produc read deimo ccd amplifi taken imag mode imagehandl assum deimo imag read b amplifi spectral observ mode pypeit handl file meet criteria two way run refpypeit_setup frame spectral mode read b amplifi ignor appear refpypeit_fil add frame refpypeit_fil spectral mode read b amplifi method use read deimo file fault deviat default chang pypeit paramet specif deimo data list refinstr_par tune standard calibr set taken deimo calibr edg trace report default edge_thresh deimo high setup fainter slit blue side spectrum miss tri calibr slitedg edge_thresh possibl howev new implement use slitmask design file allevi issu slitmask design match pypeit abl match trace slit slitmask design inform contain meta data deimo observ function moment implement deimo mosfir switch set use_maskdesign flag refpypeit_paredgetracepar keyword true alreadi default deimo except longmirr lvm mask use pypeit also assign extract spectrum correspond ra dec object name inform slitmask design forc extract undetect object locat expect slitmask design see addit reading_ extract undetect object perform gaussian profil fwhm given paramet find_fwhm refpypeit_parfindobjpar keyword assum default valu deimo find_fwhm pixel user need adjust valu accord size object extract moreov may occasion necessari set no_local_ski true refpypeit_parskysubpar keyword avoid bad local sky subtract wavelength calibr pypeit abl current deimo read header arc frame lamp observ set list lamp use wavelength calibr function switch set lamp use_head refpypeit_parwavelengthsolutionpar keyword alreadi set default deimo may happen occasion lamp record header even observ could case specif script call calib_blu see httpswwwkeckhawaiieduinstdeimoscalib_bluehtml use take arc frame blue observ resolv user edit pypeit file input correct list lamp follow way calibr wavelength lamp ari nei kri xei cdi zni hgi flat field use lvmslitc mask common widest slit satur flat field code exit flat field skip describ refflat_fieldingsatur slit flux use lvmslitc common avoid place standard star rightmost slit like collid bad column flexur user standard flexur correct suffici rv user may wish use refflexurepypeit_multislit_flexur script also mean initi reduc data without standard correct see doc detail note test line grate redder wavelength addit read addit doc relat keckdeimo toctre maxdepth devdeimosfram devdeimosconfig devslitmask_id devradec_object devdeimos_wavecalib devadd_missing_obj deimos_howto vlt xshooter overview file summar sever instrument specif set relat vltxshooter spectrograph _d_combin combin scienc exposur overview pypeit combin without optim weight multipl scienc exposur part data reduct process see refcoaddd optim weight coadd use squar sn extract object weight done separ script standard reduct combin without optim weight multipl scienc exposur user need edit refpypeit_fil accord desir reduct process combin multipl scienc exposur basic ident refab_differenc without subtract background frame pypeit file data block run refpypeit_setup user updat refpypeit_filedata block pypeit file add three extra column name calib comb_id bkg_id also obtain run refpypeit_setup ad b option column calib comb_id edit accord desir reduct bkg_id use valu set paramet block combin process guid paramet refpypeit_parprocessimagespar keyword current avail method combin multipl frame median weightmean default weightmean comput averag imag use uniform weight user chang paramet pypeit file follow way sciencefram process combin median extra column addit column use calib comb_id follow meaningsdefinit calib assign calibr group id frame calibr frame calibr group number use reduc scienc frame calibr group number comb_id repres combin id assign scienc frame frame valu comb_id combin note unweight coadd henc may necessarili optim term sn ratio assign integ valu see valu less equal rememb bkg_id valu see refab_differenc definit id scienc frame scienc frame refpypeit_filedata block assign calib id valu integ number scienc frame combin togeth calib valu use set calibr combin scienc frame comb_id set frame frame valu comb_id combin calibr calibr frame refpypeit_filedata block calib id valu scienc data use set use scienc frame pypeit file calibr frame comb_id irrelev valu set exampl exampl pypeit file scienc frame combin filenam frametyp ra dec target dispnam decker bin mjd airmass exptim dispangl amp filter dateob utc calib comb_id bkg_id defitsgz arctilt unknown g dra singleb og defitsgz pixelflatillumflattrac unknown g dra singleb og defitsgz pixelflatillumflattrac unknown g dra singleb og defitsgz pixelflatillumflattrac unknown g dra singleb og defitsgz scienc dra g dra singleb og defitsgz scienc dra g dra singleb og defitsgz scienc dra g dra singleb og three scienc frame combin togeth therefor assign common valu comb_id also calib valu assign scienc frame howev case irrelev sinc calib calibr frame mean scienc frame reduc use set calibr case scienc frame also use calibr exampl nearir observ oh line use wavelength tilt calibr differ valu calib scienc frame use summari common comb_id use scienc frame user wish combin without optim weight spectral extract arc tilt illumflat pixelflat trace frame user assign calib valu scienc data use comb_id set _flat_field flat field overview doc describ approach_ use perform flatfield pypeit one goe modifi default approach_ given docspectrograph guid gener flat field images_ note docslit_trac frequent perform flat field imag refer doc full descript approach correct two primari compon flatfield pypeit pixellevel flat field illumin correct first account pixeltopixel variat detector latter correct spatial variat along slit edg also routin correct rel spectral illumin multipl slit applic code implement none correct describ set default approach docspectrograph base expertis data develop suit httpsgithubcompypeitpypeitdevelopmentsuite_ cours correct appli user must suppli requir imag docpypeit_fil discuss process greater detail gener flat field images_ modifi default approach spectrograph default approach flat field code appli pixellevel illumin correct spectrograph appli scienc standard docframetyp wish modifi default either custom approach lack necessari calibr data need modifi docpypeit_fil specif use_pixelflat use_illumflat paramet refpypeit_parprocessimagespar keyword provid typic exampl flat field wish turn flat field entir data reduct add follow refpypeit_fileparamet block codeblock ini baseprocess use_pixelflat fals use_illumflat fals note provid flat field imag docpypeit_fil refpypeit_filedata block still process reduct use illumin flat wish turn applic illumin flat file add follow refpypeit_fileparamet block codeblock ini baseprocess use_illumflat fals cours pixellevel flat field choos make choic specif frametyp codeblock ini calibr standard process use_illumflat fals appli illumin flat instrument appli illumin flat default may turn codeblock ini calibr standard process use_illumflat true cours need provid one imag label illumflat docframetyp docpypeit_fil see detail appli spectral illumin correct spectral illumin correct appli default main usag case moment correct rel spectral sensit differ slitsslic ifu data would like calcul rel spectral sensit keyword argument codeblock ini calibr flatfield slit_illum_rel true appli correct scienc frame need make sure follow keyword argument set well codeblock ini sciencefram process use_specillum true need provid one imag label pixelflat docframetyp docpypeit_fil see detail gener flat field imag input file wish appli one corrections_ need provid match flat field imag docpypeit_fil specifi appropri docframetyp short use_pixelflat set imag least one data file docpypeit_fil refpypeit_filedata block must label pixelflat unless feed pixelflat_ use_illumflat set imag least one data file docpypeit_fil refpypeit_filedata block must label illumflat case may desir use differ set frame pixel illumin correct support recommend set trace frame illumflat frame feed pixelflat gener pixel flat provid one trim orient pypeit frame spectral vertic blue bottom may feed pypeit recommend approach present reflriskeck_lris_blu perform modifi refpypeit_fileparamet block codeblock ini calibr flatfield pixelflat_fil usersjoepythonpypeitdevelopmentsuitecalibspypeit_lrisb_pixflat_b_x_sepfitsgz none frame docpypeit_fil refpypeit_filedata block label pixelflat algorithm fill jfh tune wish tune algorithm use gener pixel flat andor illumin flat want modifi refpypeit_parflatfieldpar keyword jfhkbw provid expert advic list common modif satur slit occasion one slit satur common case docdeimo lvmcslitc mask code exit flat field gener wish continu slit ok add docpypeit_fil codeblock ini calibr flatfield saturated_slit mask continu use mask preclud slit reduct use continu set flat unit valu extract attempt ignor extrema wish set pixelflat uniti belowabov userspecifi wavelength use pixelflat_min_wav pixelflat_max_wav eg codeblock ini calibr flatfield pixelflat_min_wav set flat pixel wavelength less ang everi slit shane kast overview file summar sever instrument specif item shanekast spectrograph kastr grate default use archiv wavelength solut ne lamp use ne lamp make follow modif docpypeit_fil calibr wavelength lamp heiarihgicdi reid_arxiv shane_kast_red___nonefit note ne lamp holygrail algorithm may success especi unusu grate tilt keck lri overview file summar sever instrument specif set relat kecklri spectrograph common item flexur substanti flexur lri instrument default set attemp character spectral spatial effect see docflexur note wish turn either _lrisb keck_lris_blu lrisb default set see refpypeit_parinstrumentspecif default configur list modif default set take calibr lrisb arc recommend turn standard arc lamp includ slate red side nearcdkrxeznhg archiv solut expect lamp pixel flat recommend correct pixeltopixel variat use slitless flat take calibr frame process may wish use archiv link httpsdrivegooglecomdrivefoldersymdgcgxrsrbkuh_pc_mlshwvdsrmkofpuspsharing_ exist one stage pypeit team set follow docpypeit_fil calibr flatfield frame path_to_the_filepypeit_lrisb_pixflat_b_x_sepfitsgz warn intern flat may bright need test trace flat strongli recommend ontheski trace flat full instrument setup aim count per pixel bia best achiev take twilight flat within minut sunsetsunris warn internaldom flat like faint blue _grism grism use grism like awar strong ghost found complic edg trace dome flat sky flat appear ok therefor may need increas edge_thresh paramet success perform ie calibr slitedg edge_thresh _kecklrisr keck_lris_r detector gener detector lrisr camera origin name keck_lris_red_orig lbnl detector kxk keck_lris_r newest mark detector keck_lris_red_mark latter mark wavelength incorpor r grate far arxiv solut lbnl detector may work ok check output lrisr default set deviat default set lrisr set trace slit sigdetect good rel bright dome flat set trace slit pca param known issu lrisb slit edg observ longslit mode pypeit might set slit incorrectli detector may occur count flat field low eg use intern flat rather twilight flat higher signal blue therefor use intern flat care inspect slit defin pypeit describ docmaster_edg defin slit cover portion illumin detector sourc fall manual defin slit posit describ refslit_tracingmiss slit exampl pypeit file calibr slitedg add_slit sync_predict nearest forc slit onto detector reduct multislit code may identifi ghost slit empti detector real estat mask fill field prepar ignor _step_by_step step step exampl overview doc goe full run pypeit one shane kastb dataset develop suit see httpswikiqtioqt_for_python_ doc docdeimos_howto setup organ data place file singl folder mine name homexavierprojectspypeitdevelopmentsuiteraw_datashane_kast_blue__d refer raw_path file within codeblock bash ls bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz bfitsgz run pypeit_setup first script run pypeit refpypeit_setup examin raw file gener sort list instruct one docpypeit_fil per instrument configur complet instruct provid docsetup call data cd folder_for_reduc usual raw data folder pypeit_setup r raw_pathb shane_kast_blu c creat docpypeit_fil folder name shane_kast_blue_a beneath script run note raw_path full path ie includ start look like autogener pypeit file wed aug userdefin execut paramet rdx spectrograph shane_kast_blu setup setup read setup bin dichroic dispers angl none name slit decker arcsec slitlen none slitwid none setup end read data data read path homexavierprojectspypeitdevelopmentsuiteraw_datashane_kast_blue__d filenam frametyp ra dec target dispnam decker bin mjd airmass exptim dichroic bfitsgz arctilt arc arcsec bfitsgz bia bia arcsec bfitsgz bia bia arcsec bfitsgz bia bia arcsec bfitsgz bia bia arcsec bfitsgz bia bia arcsec bfitsgz bia bia arcsec bfitsgz bia bia arcsec bfitsgz bia bia arcsec bfitsgz bia bia arcsec bfitsgz bia bia arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz scienc jp arcsec bfitsgz scienc jp arcsec bfitsgz standard feig arcsec data end instrument especi kast common frametyp incorrectli assign owe limit erron header exampl howev frametyp accur assign docpypeit_fil edit made main run docpypeit_fil readi main call simpli cd shane_kast_blue_a run_pypeit shane_kast_blue_apypeit specifi overwrit exist scienc output file none superfl recommend almost alway use docrun doc describ process detail inspect file code run seri file written disk calibr first set doccalibr follow seri screen shot docqa png produc pypeit bia screen shot portion bia imag view ginga ginga mastersmasterbias_a__fit typic bia imag featureless effect nois readout imag figureskastb_bias_imagepng see docmaster_bia detail arc screen shot portion arc imag view ginga ginga mastersmasterarc_a__fit typic arc imag one see seri arc line orient horizont alway pypeit imag figureskastb_arc_imagepng see docmaster_arc detail slit edg code automat assign edg slit detector exampl use starndard long slit kast instrument one slit screen shot first tab ginga window use refpypeit_chk_edg script explicit call pypeit_chk_edg mastersmasteredges_a__fitsgz imag figureskastb_edges_imagepng data combin flat imag greenr line indic leftright slit edg label indic slit name see docmaster_edg detail wavelength one inspect docqa wavelength calibr png qapng folder exampl fit written qapngsarc_dfit_a___spng file imag figureskastb_arcdpng hope see qa left mani blue arc line mark green id upper right rm pixel lower right random scatter residu see docmaster_wvcalib detail sever qa file written fit qapngsarc_tilts_d_a___spng imag figureskastb_arcdpng horizont line black dot arc line red point reject fit provid reject fit good rm also desir see docmaster_wvcalib detail flatfield code produc flat field imag correct pixeltopixel variat illumin detector screen shot first tab ginga window pixflat_norm use refpypeit_chk_flat explicit call pypeit_chk_flat mastersmasterflat_a__fit imag figureskastb_flatpng one note pixeltopixel variat percent level slit edg defin code also plot greenr line region detector beyond imag set unit valu see docmaster_flat detail spectra eventu patient code start gener spectra output one per standard scienc frame locat scienc folder specd screen shot third tab ginga window sky_residdet use refpypeit_show_dspec explicit call pypeit_show_dspec sciencespecd_bjp_kastb_maytfit imag figureskastb_specdpng greenr line slit edg white line center object orang line show pypeit trace object orang text pypeit assign name night sky emiss line subtract see docout_specd detail specd screen shot gui show spectrum use refpypeit_show_dspec explicit call pypeit_show_dspec sciencespecd_bjp_kastb_maytfit imag figureskastb_specdpng use xspecgui httpslinetoolsreadthedocsioenlatestxspecguihtml_ linetool packag see docout_specd detail flux reduc standard star spectrum use gener sensit file call exampl run scienc folder pypeit_sensfunc specd_bfeige_kastb_maytfit kastb_feige_sensfit see docflux detail highlight rest magellan mage overview file summar sever instrument specif set relat magellanmag short slit sever issu relat short slit magellanmag pixel unbin find object enough slit properli find object restrict find_trim_edg paramet ie parscienceimagefind_trim_edg slit short trim especi x bin spatial bin recommend reduc bin factor includ includelinksrst _master_slit masterslit overview file describ masterslit object contain main inform trace slit edg organ leftright slit pair see current slittrac data model_ written disk multiextens fit file prefix masterslit master folder see refmasternam doc view prefer way view slit edg inform contain masterslit codeblock python astropyio import fit astropyt import tabl hdufitsopenmasterslits_a__fit tablehdudata show tabl look like codeblock python spat_id maskdef_id left_init right_init left_tweak right_tweak center mask_init mask specmin specmax int int float float float float float int int float float inf inf inf inf inf inf inf inf inf inf addit reduc docdeimo docmosfir data slitmask design match perform see refdeimosslitmask design match deimo refmosfireedg trace mosfir second astropyiofitsbintablehdu_ written disk codeblock python tablehdudata traceid tracesrow tracelpix tracerpix spat_id slitid slitlopt slitropt slitra slitdec slitlen slitwid slitpa align objid objra objdec objnam objmag objmag_band obj_topdist obj_botdist int int float float int int float float float float float float float int int float float str float str float float see current slittrac data model_ descript column current slittrac data model intern masterslit object held classpypeitslittraceslittraceset classpypeitdatamodeldatacontain datamodel written astropyiofitsbintablehdu_ addit reduc docdeimo docmosfir data slitmask design match perform anoth astropyiofitsbintablehdu_ written fit extens name maskdef_designtab includ includedatamodel_slittracerst gtc osiri overview file summar sever instrument specif set relat gtcosiri spectrograph common item target centr chip gtcosiri two detector object interest alway centr chip mani user might mean run run_pypeit det switch standard taken wideslit gtcosiri standard taken setup scienc standard taken wide slit standard exempt usual criteria distinguish uniqu setup simpli includ setup dispers element mo fail mo setup prone failur particularli slit close togeth lead overlap identifi slit short overlap slitlet one set calibr slitedg minimum_slit_length avoid overlap region identifi slit similarli short slit caus problem flatfield skysubtract object detect ignor set paramet _construct_templ construct new wavelength templat overview doc describ creat wavelength templat use perform wavelength calibr refwave_calibautom algorithm see docwave_calib discuss variou algorithm see docmaster_wvcalib discuss main output goodbad exampl find data build new templat requir wavelength calibr arc spectra full wavelength rang need may take multipl exposur arc lamp cover full rang use holi grail algorithm set differ arc lamp exposur cover desir rang run data use option refwave_calibholi grail algorithm gener master wavelength calibr select slit techniqu success see docmaster_wvcalib exampl qa plot illustr good wavelength solut complet set correctli calibr arc line data identifi wavelength region gap cover full rang wavelength desir situat holi grail fail one may resort pypeit_identifi see refwave_calibpypeit_identifi calibr arc line spectrum cover desir wavelength rang alreadi avail ascii file column wavelength flux use instead run reduct refwave_calibholi grail algorithm creat templat slit master wavelength calibr file select use function funcpypeitcorewavecaltemplatesbuild_templ turn list slit wavelength rang master wavecalib file final templat longev good idea obtain pypeit develop suit combin solut pypeit wavelength solut use instrument grate use refwave_calibpypeit_identifi util output file call wvcalibfit put file appropri instrument folder pypeit develop suit templat directori pypeit_devdev_algorithmswavelengthstemplate_fil also renam file match current format mv wvcalibfit telescope_instrument_grating_wavecenfit open funcpypeitcorewavecalspectrographstempl_telescope_instrumentpi file either add new setup doesnt alreadi exist edit setup want add solut preexist setup usual warrant extend wavelength coverag previou setup key inform need spectral bin slit spatid number print command line complet fit refwave_calibpypeit_identifi util setup simpli cd directori templ_telescope_instrumentpi file run python templatespi automat put solut reid_arxiv add file git submit pr pypeit pypeit develop suit altern want construct templat file possibl disadvantag solut stitch togeth solut spectrographgr futur write script input look like follow codeblock python pypeitcorewavec import templat templatesbuild_templatewfil slit wv_cut binspec outroot ifilesifil det_cutdet_cut chktrue normalizefals lowreduxfals subtract_contitru overwriteoverwrit shift_wavetru see funcpypeitcorewavecaltemplatesbuild_templ descript paramet pypeitcorewavecalspectrograph exampl use function produc file call outroot contain templat templat save pypeitdataarc_linesreid_arxiv also produc plot final product _slit_trac slit trace overview one first crucial step pipelin automag identifi slit order given detector challeng task owe wide varieti number slitsord separ slitsord vari bright flat across detector develop singl algorithm handl edg case pun intend challeng imposs therefor number userinput paramet one may need consid run pypeit see underli effort classpypeitedgetraceedgetraceset class view see docmaster_edg docmaster_slit note view output relat slit tracing_ script slit trace one step pypeit run independ full reduct use pypeit_trace_edg script nomin run provid trace imag limit test recommend first construct refpypeit_fil would use fulli reduc data see refpypeit_setup suppli argument pypeit_trace_edg script usag display call script h option includ helppypeit_trace_edgesrst known slit trace issu slit possibl edgetrac algorithm find slit edg may edg fall detector truli data given detector multidetector instrument eg doclri threshold edg detect set high inabl find slit edg common longslit observ occur occasion multislit know given detector welldefin slit edg tri adjust edge_thresh paramet see reftraceedgethresh regardless pypeit find slit edg two way proceed default behavior instrument simpli skip detector edgetrac algorithm find edg case run_pypeit issu warn calibr given detector fail get_slit singledetector instrument mean pypeit might exit grace without actual produc much output multidetector instrument eg deimo mean pypeit skip process detector move next one alreadi know detector skip use pypeit file select detector process see detnum paramet refpypeit_parreduxpar keyword rdx detnum forc pypeit add left right edg bound spatial extent detector use bound_detector paramet refpypeit_paredgetracepar keyword requir instrument entir detector illumin slit edg project detector situat detector window shane kast way slit edg cover window detector although bound detector way allow code continu subsequ analysi step use approach come signific warn warn bound spatial extent detector straight slit edg spectral curvatur properli trace lead error subsequ process step andor highli suboptim extract object spectra avail user sure add standardstar observ pypeit file ensur classifi standard frame pypeit use standard star trace crutch object trace scienc frame slit pca fail default trace use pca analysi requir minimum number slit succeed arent enough revert back nearest mode set sync_predict keyword refpypeit_paredgetracepar keyword nearest eg calibr slitedg sync_predict nearest miss slit common spectrograph code miss one slit may mitig modifi edge_thresh minimum_slit_length keyword refpypeit_paredgetracepar keyword otherwis code may instruct add slit userinput locat syntax list list sublist syntax integ detectory_specx_spatx_spat exampl calibr slitedg add_slit add one slit detector leftright edg row shape slit taken one nearest pca model exist mani slit code may identifi stray light spuriou featur slit might mitig increas valu edge_thresh refpypeit_paredgetracepar keyword inde requir longslit observ red camera doclri otherwis code may instruct remov slit userinput locat syntax list list sublist syntax integ detectory_specx_spat exampl calibr slitedg rm_slit remov slit detector contain x_spat row similarli slit det slit trace custom follow set user may consid vari improv slit trace _traceedgethresh detect threshold detect threshold identifi slit set rel low err find fewer slit edg algorithm fool scatter light detector defect one increas threshold sigdetect paramet calibr slitedg edge_thresh monitor number slit detect algorithm present recommend err conserv side regard threshold ie higher valu sigdetect unless especi faint trace flat frame flip side slit defect common mistaken slit edg increas sigdetect hope best _traceslitmask_frac_thresh fraction threshold interemedi step mslit_tcrud method edg defin thu far trace across detector trace_crud method pca analysi perform edg span least mask_frac_thresh detector spectral direct default valu may larg instrument eg lrisb grism consid lower valu especi code rais warn edg pca calibr slitedg fit_min_spec_length may also need adjust smash range_ smash rang one final step slitord definit identifi edg smash rectifi version sobolev imag default smash entir imag spectra primariliy subset imag one consid modifi default paramet frequent case lowdispers data eg lrisb grism spectra differ default valu modifi calibr slit smash_rang algorithm somewhat date flow algorithm sobolev sn imag gener trace flat imag edg detect initi set edg deriv sobolev accord detect threshold_ match edg algorithm perform match edg slit first time trace crude slit slit edg trace trace_crud algorithm snippet edg hope merg pca pca analysi perform welltrac edg found thu far use rectifi sobolev imag search addit edg synchron slit edg synchron primarili pick miss edg trim trim small slit perform open issu bad column yield fake edg mask pipelin use instrumentspecif bad pixel mask overlap slit notori difficult detect one may need addsubtract individu slit occas _bitmask bitmask pypeit implement gener class handl bitmask includ includelinksrst includ includebitmask_usagerst _wave_calib wavelength calibr index wave_calib overview wavelength calibr perform use arc lamp spectra night sky line depend instrument case solut provid vacuum doc describ wavelength calibr autom algorithms_ byhand approach_ includ pypeit_identify_ script common failur modes_ see docmaster_wvcalib discuss main output goodbad exampl autom algorithm note describ algorithm use perform wavelength calibr ie slitord pypeit basic step extract arc spectra center slitord load paramet guid wavelength calibr gener wavelength fit code guid wavecalib class partial describ wavecalibipynb httpsgithubcompypeitpypeitblobmasterdocnbwavecalibipynb_ notebook primari step develop sever algorithm find challeng one satisfi instrument configur briefli describ tend effect use identifi known arc line spectrum fit identifi line vs pixel perform iter algorithm gener final wavelength solut _wvcalibholygrail holi grail algorithm base pattern match detect line expect lamp observ work well low dispers spectrograph use gener templat use algorithm great posit requir limit develop effort vet linelist observ lamp gener howev found algorithm highli robust eg slit fail rate struggl high dispers data eg thar lamp stage recommend use primarili develop gener templat spectra reidentifi follow success use archiv templat lowredux code implement improv version pypeit input arc spectrum crosscorrel one archiv spectra allow shift stretch archiv spectra yield high crosscorrel score use identifi arc line base record wavelength solut algorithm optim fixedformat spectrograph eg xshooter esi _wvcalibfulltempl full templat algorithm similar reidentify_ two except singl templat use occasion one per detector spectra span across multipl eg deimo ii id input arc spectrum gener perform snippet full input array motiv latter reduc nonlinear well captur shiftstretch analysi reidentify_ recommend implement method multislit observ longslit observ wavelength vari eg grate tilt like implement echel observ eg hire _wvcalibbyhand byhand approach identifi would prefer manual wavelength calibr pypeit_identifi task launch task need success trace slit edg ie docmaster_edg file must exist gener docmaster_arc calibr frame pypeit_identifi usag script usag display call script h option includ helppypeit_identifyrst launch gui use follow command codeblock bash pypeit_identifi masterarc_a__fit masterslits_a__fitsgz basic instruct use gui avail press key hover mous plot window might find help specifi wavelength rang linelist lamp use use pypeit_identifi command line option standard sequenc move gui pop load exist id list made one alreadi type l skip step compar arc line calibr spectrum use magnifi glass zoom one recogn pypeit linelist select line use mark line near cursor use left mous button click near line red line appear select line use slider bar select wavelength vacuum click assign line blue move mous back plot window repeat step identifi line across spectrum use f fit current set line use modifi order polyonmi fit use auto id rest use f fit use save line id wavelength solut rm latter within toler tip press leftright key advanc line list one may find help toggl pixel coordin wavelength coordin use w key toggl two set wavelength coordin access preliminari fit spectrum plot wavelength coordin overplot ghost spectrum press g key activ deactiv base linelist may help identifi line shift stretch ghost spectrum click drag left right mous button respect your pan mode reset shiftstretch press h key solut good enough rm pixel pypeit_identify_ automat prompt quit gui see want save solut note increas toler use command line option pixtol set force_sav command line option use wavelength solut reduct need add solut pypeit databas need move output file master directori similar follow directori directorytopypeitpypeitdataarc_linesreid_arxivname_of_your_solutionfit solut databas abl run pypeit standard refwvcalibfulltempl mode make sure add follow line pypeit file calibr wavelength reid_arxiv name_of_your_solutionfit also recommend send solut pypeit develop eg post github user slack team other benefit wavelength calibr solut custom arclin oversampl eg geminigmo may need increas fwhm default valu also pixel toler pixtol auto idng line default pixel rmstol wish save solut disk common failur mode failur multislit mode calibr echel consider differ expect regard multislit standard failur mode refwvcalibfulltempl method prefer lamp use differ archiv slit span much bluerredd archiv templat either case new templat may need gener confid case rais issu item modifi sever paramet wavelength calibr refpypeit_parwavelengthsolutionpar keyword one need occasion custom specif observ describ common fwhm arc line identifi fit expect knowledg fwhm futur version solv fiduci valu standard slit assum instrument use particularli narrowwid slit may need modifi calibr wavelength fwhmxx pypeit file altern pypeit comput arc line fwhm arc line one highest detect signific fwhm measur way overrid valu set fwhm still use first guess docwavetilt particularli advantag multislit observ slit differ slit width eg deimo lvm slitmask keyword control option call fwhm_fromlin set fals default switch add calibr wavelength fwhm_fromlin true pypeit file line list without except arc line wavelength taken nist databas httpphysicsnistgovphysrefdata_ vacuum data store ascii tabl arclin repositori avail lamp lamp rang last updat ari april cdi april cui june hei may hgi may kri may nei may xei may zni may thar januari case thar list line taken nist databas label murphi flag line also appear list line identifi murphi et al mnra httpadsabsharvardeduabsmnrasm_ flexur correct default code calcul flexur shift base extract sky spectrum boxcar see docflexur detail _wvcalibdevelop develop ad new solut ad new instrument grate one gener perform seri step enabl accur precis wavelength calibr pypeit recommend follow procedur possibl perform wavelength calibr previou pipelin record calibr arc spectrum ie wavelength vs count vaccuum convert air vacuum drp exist tri run pypeit refwvcalibholygrail algorithm use output fail gener solut refwvcalibbyhand build templat arc spectrum fixedformat spectrograph one spectrum one per order suffici grate tilt one may need splice togeth seri arc spectra cover full spectral rang see exampl templatespi modul see docconstruct_templ augment line list conserv ad new line exist line list one bad line larg neg consequ therefor care vet line insur frequent detect larg systemat residu good wavelength solut add one file dataarc_lineslist _fulltemplatedev full templat dev prefer method multislit calibr call full_templ crossmatch input sepctrum archiv templat latter must construct develop use corewavecaltemplatespi modul follow tabl summar exist one dataarc_linesreid_arxiv folder instrument setup name keck_deimo zd grate lamp keck_deimos_zdfit keck_deimo g grate lamp keck_deimos_gfit keck_deimo g grate lamp keck_deimos_gfit keck_deimo b grate lamp keck_deimos_bfit keck_deimo zd grate lamp keck_deimos_zdfit keck_lris_blu b grism lamp keck_lris_blue__dfit keck_lris_blu b grism lamp keck_lris_blue__dfit keck_lris_blu b grism lamp keck_lris_blue__dfit keck_lris_blu b grism lamp keck_lris_blue__dfit keck_lris_r r grate lamp keck_lris_red_fit keck_lris_r r lamp keck_lris_red__fit shane_kast_blu _ grism lamp shane_kast_blue_fit shane_kast_blu _ grism lamp shane_kast_blue_fit shane_kast_blu _ grism lamp shane_kast_blue_fit see templat notebook corewavecaltemplatespi modul detail one key paramet one modifi full_templ number snippet break input spectrum crossmatchg default concept handl nonlinear simpli reduc length spectrum rel linear dispers nsinppet may frequent suffic instrument spectrum run across multipl detector spectral dimens eg deimo may necessari gener detector specif templat ugh especi true spectrum partial detector eg g grate toctre caption addit read maxdepth flexur heliocorr wavetilt construct_templ masterbia overview file describ data model masterbia imag written disk multiextens fit file prefix masterbia master folder gener simpl combin input bia frame inspect first extens stack imag view standard imag viewer eg ginga mastersmasterbias_a__fit resembl one input bia frame asid overscan subtract trim portion imag reorient vertic spectral dimens blue bottom exampl refkecklrisr spectrograph imag figuresbias_imagepng pretti bore expect note detector spectrograph troubl shoot imag appear err thing consid one input bia frame junk one input bia frame mislabel current biasimag data model intern imag held classpypeitimagesbuildimagebiasimag classpypeitimagespypeitimagepypeitimag classpypeitdatamodeldatacontain datamodel written disk includ includedatamodel_biasimagerst run pypeit overview document describ process run reduct assum alreadi properli inspect fuss setup docsetup enter one setup subfold edit docpypeit_fil desir remov like calibr file master folder staleold versionsetc _runpypeit run_pypeit main script run pypeit reduct refrunpypeit place python path instal code _runpypeitusag usag script usag display call script h option includ helprun_pypeitrst standard call typic run pypeit initi command like run_pypeit keck_lris_blue_multi___dpypeit code launch read docpypeit_fil initi intern proce gener lot messag termin window fear comment outdat even mislead short pypeit develop like make much sens option standard option consid list refrunpypeitusag describ bit detail guidanc use overwrit command overwrit exist file directori recommend use major time know want rereduc scienc frame remov run without do_not_use_mast flag tell pypeit avoid use exist calibr frame refer docmast instead load disk use greatli slow code main debug mode pypeit gener lot plot screen probabl overwhelm user ie best develop _master_wvcalib masterwavecalib overview file describ data model masterwavecalib_ imag written disk multiextens fit file prefix masterwavecalib_ master folder see refmastersmast name name convent inspect _pypeitchkwavecalib pypeit_chk_wavecalib print set simpl diagnost screen pypeit_chk_wavecalib script eg pypeit_chk_wavecalib mastersmasterwavecalib_a__fit spatid minwav wave_cen maxwav dwave nlin rm png present way examin qualiti step view png file gener code docqa describ access png file gener per slit exampl shane_kast_r spectrograph imag figuresarc_d_fitpng hope see qa left mani blue arc line mark id upper right rm pixel lower right random scatter residu troubl shoot wavelength solut amongst challeng part data reduct see docwave_calib extens detail pypeit perform wavelength calibr relat issu current wavecalib data model intern imag held classpypeitwavecalibwavecalib classpypeitdatamodeldatacontain datamodel written disk includ includedatamodel_wavecalibrst highlight rest _intern intern overview file contain note relat intern work pypeit object filesort dict whose key variou docframetyp use pypeit item array indic frame type gener arsortsort_data _internal_setup_dict setup_dict highli nest dict organ variou setup use input set data file toplevel key defin setup simpl label b c next set key hold dict defin properti setup eg dichroic dict hold detector specif info eg bin aa ab ac etc dict contain list filenam function frame type exampl output setup file dichroic dispers angl none name slit decker arcsec slitlen none slitwid none bin none det namp usual gener arsetupinstr_setup _internal_setup_id setup_id setup_id commbin key refinternal_setup_dict eg a__aa pypeit document master file creat sphinxquickstart fri nov adapt file complet like least contain root toctre direct doi_latest imag httpszenodoorgbadgedoizenodosvg target httpsdoiorgzenodo joss imag httpsjosstheojorgpapersjossstatussvg target httpsdoiorgjoss arxiv imag httpsimgshieldsiobadgearxivblack target httpsarxivorgab pypi imag httpsimgshieldsiobadgepypilatestblu target httpspypiorgprojectpypeit issu imag httpsimgshieldsiogithubissuesfpavogtfcmakersvgcolorbb target httpsgithubcomfpavogtfcmakerissu astropi imag httpimgshieldsiobadgepoweredbyastropyorangesvgstyleflat target httpwwwastropyorg star imag httpsimgshieldsiogithubstarsfpavogtfcmakersvgstylesociallabelstar target httpsgithubcompypeitpypeit watch imag httpsimgshieldsiogithubwatchersfpavogtfcmakersvgstylesociallabelwatch target httpsgithubcompypeitpypeit github imag httpsimgshieldsiogithubreleasefpavogtfcmakersvg target httpsgithubcompypeitpypeit pypeit_logo imag httpsimgshieldsiogithubreleasefpavogtfcmakersvg target httpsgithubcompypeitpypeit pypeit star watch pypi doi_latest arxiv astropi raw html img src_staticpypeit_color_white_txt_black_backgroundpng onerrorthissrc_staticastropy_banner_png thisonerrornul width version version pypeit python packag semiautom reduct astronom spectroscop data algorithm build decadeslong develop previou data reduct pipelin develop reduct procedur includ complet list input paramet avail function provid onlin document pypeit set command design perform reduct without addit code releas pypeit design use advanc spectroscopist prior data reduct expertis astronom prior experi data reduct highli configur design appli standard slitimag spectrograph accommod longslit multislit well crossdispers echel spectra citat use pypeit research pleas cite follow public refbibtex provid prochaska et al joss arxiv httpsuiadsabsharvardeduabsarxivpabstract__ joss httpsjosstheojorgpapersjoss__ prochaska et al zenodo zenodo httpsuiadsabsharvardeduabszndopabstract__ place includ relev citat text public pleas includ follow acknowledg provid latex use provid refbibtex codeblock latex research made use ttfamilypypeitfootnoteurlhttpspypeitreadthedocsioenlatest python packag semiautom reduct astronom slitbas spectroscopi citeppypeitjoss_pub pypeitzenodo fund pypeit receiv direct fund follow sourc nasa adapa wm keck observatori univers california observatori also reli import inkind contribut individu caltech multipl mirror observatori elsewher version provid support docspectrograph see full list includ current variou stage develop bokbc geminignir geminigmo geminiflamingo gtcosiri lickkast magellanmag magellanfir mdmosmo keckdeimo zd g g b zd keckkcwi kecklri keckmosfir j k grate test kecknir kecknirspec lowdispers old detector lbtlucii lbtluciii lbtmod ldtdeveni mdmosmo mmtmmir mmtbinospec mmtbluechannel notalfosc pdbsp ptriplespec vltxshooter vi nir vltfor v default reduct algorithm docflat_field illumin pattern correct full docwave_calib rectif docflexur spatial spectral global local docskysub optim boxcar docextract docab_differenc slitmask metadata slurp includ radec docdeimo document docinstal docsetup docpypeit_par doccookbook data model nearli output file docflux docmanu doctellur docd_combin doccoaddd doccoaddd script tool inspect slit edg refmaster_edgespypeit_chk_edg flat refmaster_flatpypeit_chk_flat spectra refout_specdpypeit_show_dspec spectra refout_specdpypeit_show_dspec docquicklook version miss ie work full coadd support addit qa output dashboard monitorcontrol pypeit keckhir keckesi support user mainli use pypeit reduc observ data section ideal need go much link section take problem activ pypeit user slack workspac period updat invit httpsgithubcompypeitpypeitissues__ find bug featur request pleas submit issu httpsgithubcompypeitpypeitissues__ toctre caption get start maxdepth codeconduct instal cookbook stepbystep known_failure_mod toctre caption run maxdepth spectrograph setup pypeit_par pypeit_fil run quicklook d_combin object_find skysub extract script ab_differenc nir_exampl toctre caption standard output maxdepth image_proc calibr output qa toctre caption process maxdepth flux coaddd tellur coaddd coaddd collat toctre caption develop maxdepth devdevelop pypeit api apimodul new_spectrograph contributor pypeit opensourc commun develop packag astronom encourag join project review doccodeconduct refdevelop would also appreci contact lead develop jxp jfh begin develop activ follow person contribut substanti develop pypeit j xavier prochaska joseph f hennawi kyle b westfal ryan j cook feig wang tiffani hsyu frederick b davi emanuel paolo farina debora pelliccia jame reichwein _bibtex pypeit bibtex entri codeblock latex articlepypeitjoss_arxiv author prochaska j xavier hennawi joseph f westfal kyle b cook ryan j wang feig hsyu tiffani davi frederick b farina emanuel paolo titl pypeit python spectroscop data reduct pipelin journal arxiv eprint keyword astrophys instrument method astrophys year month may eid arxiv page arxiv archiveprefix arxiv eprint primaryclass astrophim adsurl httpsuiadsabsharvardeduabsarxivp adsnot provid saonasa astrophys data system articlepypeitjoss_pub doi joss url httpsdoiorgjoss year publish open journal volum number page author j xavier prochaska joseph f hennawi kyle b westfal ryan j cook feig wang tiffani hsyu frederick b davi emanuel paolo farina debora pelliccia titl pypeit python spectroscop data reduct pipelin journal journal open sourc softwar miscpypeitzenodo author prochaska j xavier hennawi joseph cook ryan westfal kyle wang feig emastro tiffanyhsyu wasserman asher villaum alexa marijana schindler jt young david simha sunil wild matt tejo nicola isbel jacob flor andrea sandford nathan vasov zlatan bett edward holden brad titl pypeitpypeit releas year month apr eid zenodo doi zenodo version v publish zenodo adsurl httpsuiadsabsharvardeduabszndop adsnot provid saonasa astrophys data system includ includelinksrst _new_script develop new pypeit script pypeit execut script locat pypeitscript directori roughli structur codeblock python pypeitscript import scriptbas class newscriptscriptbasescriptbas classmethod def get_parsercl widthnon parser superget_parserdescriptiona new pypeit script widthwidth staticmethod def mainarg import compon script eas instal document script must use classpypeitscriptsscriptbasescriptbas base class note class instanti method funcpypeitscriptsscriptbasescriptbaseget_pars function use return instanc argparseargumentparser_ use pars commandlin argument funcpypeitscriptsscriptbasescriptbasemain function perform primari oper script need return valu return prohibit see eg classpypeitscriptschk_for_calibschkforcalib file pypeitscript directori contain one script class funcpypeitscriptsscriptbasescriptbasenam function set name script pypeit_modul default modul name file eg file name new script new_scriptpi execut instal pypeit_new_script alter overrid base class name function see classpypeitscriptsrun_pypeitrunpypeit base class classpypeitscriptsscriptbasescriptbas provid common entri point function funcpypeitscriptsscriptbasescriptbaseentry_point use instal ensur script properli instal pip_ need add entri point setupcfg file pypeit script list optionsentry_point group add script enter new line follow format codeblock ini pypeit_new_script pypeitscriptsnew_scriptnewscriptentry_point lastli add import script modul pypeitscripts__init__pi file ie add codeblock python pypeitscript import new_script note script file pypeitscript directori execut ie xs permiss start env statement ie usrbinenv python end __name__ __main__ block creat execut raw script file handl pip_ instal pypeit ensur script instal toplevel directori run eg codeblock consol pip instal e dev masterflat overview file describ data model masterflat_ seri imag start combin input pixelflat frame imag written disk multiextens fit file prefix masterflat_ master folder see refmastersmast name name convent inspect pypeit provid pypeit_chk_flat script inspect key masterflat_ output script usag display call script h option includ helppypeit_chk_flatsrst _pypeit_chk_flat pypeit_chk_flat script take masterflat_ input display seri imag ginga httpsgingareadthedocsioenlatest_ viewer separ tab typic call pypeit_chk_flat mastersmasterflat_a__fit describ standard product enough variat spectrograph spectrograph includ exampl screenshot raw flat process combin pixelflat imag despit name complet raw imag look like one input pixelflat imag pixel flat normal uniti imag use correct pixeltopixel variat across detector look mainli like saltandpepp randomnois imag fluctuat close around valu mani detector may pock mark column even funni pattern also typic extrem spectral portion topbottom structur pattern nois especi true limit flux end eg data goe atmospher cutoff illumin flat imag also valu near uniti vertic coher edg leftright may fall well uniti flat model imag larg resembl raw flat_ troubl shoot one imag appear err thing consid one flat frame junk one input flat frame mislabel satur portion flat current flatimag data model intern imag held classpypeitflatfieldflatimag classpypeitdatamodeldatacontain datamodel written disk includ includedatamodel_flatimagesrst includ includelinksrst _known_failure_mod failur mode overview doc attempt captur known failur mode pypeit potenti mitig intend distinct common user error badhead bad header common failur mode individu data file corrupt header occur somewhat frequent keck observatori instrument lose connect telescop refpypeitsetup refpypeitobslog script written immun therefor failur use script brought attent develop refrunpypeit script howev design fail default present file corrupt header overrid need add follow refpypeit_fil rdx ignore_bad_head true note pypeit alway use entri data block often slurp header true valu ie modifi hand overcom aspect corrupt header manual extract overview document describ perform socal manual extract pypeit gener case object continuum faint trigger automag docobject_find algorithm process standard recip reduc spectral imag examin specd imag refpypeit_show_dspec record spatial spectral pixel trace cross modifi pypeit file describ refrunpypeit trace code lay new trace perform extract input locat trace use order decreas prefer brightest object slit offset input posit standard star slit edg multislit run multislit mode add spatialspectr pixel pair object extract detector pypeit file exampl reduc extract manual spat_spec det fwhm lay new trace spatial spectral pixel detector use fwhm pixel echel echel specifi object locat singl order code use fraction posit order exampl devsuit vlt_manual reduc extract manual spat_spec det fwhm quick look reduct overview pypeit provid set quick look script quick reduct presum telescop describ turn _pypeitqlmo pypeit_ql_mo script perform boxcar extract long multislit observ taken one pypeit spectrograph script usag display call script h option includ helppypeit_ql_mosrst sampl call file develop suit pypeit_ql_mo shane_kast_blu homexavierlocalpythonpypeitdevelopmentsuiteraw_datashane_kast_blue__d bfitsgz bfitsgz bfitsgz gener shane_kast_blue_a folder standard calibr master qa scienc output script test success follow instrument shane_kast_blu shane_kast_r keck_lris_blu keck_deimo _pypeitqlmosopt ql option standard option box_radiu specifi size extract radiu ignore_head telescop eg keck tendenc write bad header may wish set recommend see crash bad header det specifi detector reduc done time slit_spat specifi spatial posit singl slit reduc detector chose exampl shane_kast_blu pypeit_ql_mo shane_kast_blu homexavierlocalpythonpypeitdevelopmentsuiteraw_datashane_kast_blue__d bfitsgz bfitsgz bfitsgz keck_lris_r longslit pypeit_ql_mo keck_lris_r homexavierlocalpythonpypeitdevelopmentsuiteraw_datakeck_lris_redlong___d lrfitsgz lrfitsgz lrfitsgz det ignore_head keck_lris_blu longslit archiv pixel flat pypeit_ql_mo keck_lris_blu homexavierscratchfrbraw b_fit b_fit b_fit det user_pixflathomexavierlocalpythonpypeitdevelopmentsuitecalibspypeit_lrisb_pixflat_b_x_sepfitsgz keck_deimo multislit one slit isol pypeit_ql_mo keck_deimo homexavierscratchqldeimostestdata defit defit defit slit_spat possibl mo docspectrograph work give shot pypeit_ql_keck_nir script perform quick ab reduct pair kecknir spectral imag current code take min process two imag boxcar extract therefor first set niresoutput_ approxim minut nire ql setup run script need download quicklook master see refdata_instal section refinstal instruct _niresopt nire ql option script usag display call script h option includ helppypeit_ql_keck_niresrst nire ql exampl exampl call pypeit_ql_keck_nir datakeck_niresraw s_fitsgz s_fitsgz b _niresoutput nire ql output goe smoothli code gener four spectral output file extens specd specd view refpypeit_show_dspec refpypeit_show_dspec pypeit_ql_keck_mosfir script perform quick ab reduct pair keckmosfir spectral imag current filter support mosfir ql setup run script need download quicklook master see refdata_instal section refinstal instruct _mosfireopt mosfir ql option script usag display call script h option includ helppypeit_ql_keck_mosfirerst mosfir ql exampl exampl call pypeit_ql_keck_mosfir datakeck_mosfireraw m_fit m_fit m_fit m_fit spec_samp_fact spat_samp_fact _mosfireoutput mosfir ql output goe smoothli ginga window open result imag reduct tip overview document describ commonli adjust docpypeit_par relat object find skysubtract extract spectra assum requir alreadi gener set docout_specd file inspect spectra wish improv aspect object find refer docobject_find full detail algorithm process guid refpypeit_parfindobjpar keyword common modifi sig_thresh set search sourc peak flux excess sig_thresh time rm default may wish reduc paramet add follow refpypeit_fileparamet block reduc findobj sig_thresh search sourc peak flux sigma estim rm smash slit profil spectra extract miss spectra mean pypeit find object correspond frame common modif make refpypeit_fileparamet block remedi may help run reduct exposur mode make sure modif implement way intend ensur slit correctli identifi see refslit_trac tip adjust slit edg exampl modifi edge_thresh minimum_slit_length add remov slit modifi signific threshold object find see modifi maximum number object expect see frame default exampl exposur contain one object interest want chang refpypeit_fileparamet block look like reduc findobj maxnumb modifi fwhm object interest pixel default may want increas decreas depend number pixel per spatial psf reduc findobj find_fwhm extract emiss line common bright emiss line spatial extend beyond sourc continuum especi galaxi case code may reject emiss line present differ spatial profil major flux desir behavior optim extract continuum lead incorrect nonoptim flux emiss line current mitig allow code reject pixel profil estim includ extract may mean incurr cosmic ray extract expert move add follow refpypeit_fileparamet block reduc extract use_dmodel_mask fals like want use boxcar extract instead optim comparison highlight rest _standard standard star pypeit set standard star use flux calibr mainli taken defunct stsci calspec packag _standard_list calspec standard follow tabl incomplet list standard star use dataset known calspec origin maintain stsci file name ra_ dec_ gd_fit gd hz_stis_fit hz lb_fit lb hz_fit hz gbb_mod_fit gbb gd_mod_fit gd bd_d_stis_fit bd agk_d_stis_fit agk gd_fit gd feige_stis_fit feig hd_stis_fit hd hz_stis_fit hz feige_fit feig feige_fit feig gd_mod_fit gd hz_mod_fit hz hz_fit hz grw_d_stis_fit grw pc_stisnic_fit pc bd_d_fos_fit bd pd_stisnic_fit pd pe_stisnic_fit pe wolf_iraf_fit wolf ldsb_fit ldsb bd_d_stis_fit bd g__fit g bd_d_fit bd bd_d_stis_fit bd ngc_fit ngc ltt_fit ltt feige_fit feig full list avail pypeitdatastandardscalspecreadm eso standard includ eso standard star file _object_find object find document describ code identifi object within slitsord overview object identif challeng process code especi allow larg dynam rang bright continuum sourc faint emiss line sourc gener philosophi err bright side ie detect probabl sourc findobj paramet reduct step guid refpypeit_parfindobjpar keyword algorithm algorithm describ attempt identifi peak locat object slit defin left right edg sourc standard run perform twice sky subtract global sky subtract perform automat standard algorithm perform follow step rectifi skysubtract frame smooth imag perform sigma clip median stat wavelength dimens reject cr may elimin bright emiss line smash imag along spectral dimens get array repres spatial profil exposur find_cont_fit true fit continuum profil subtract estim rm scatter profil array find object peak flux excess sig_thresh time rm elimin object within percent slit edg parameter trace object xedg determin edg background region object restrict maxnumb object order flux common modif recommend reduc sig_thresh enabl identif fainter sourc risk fals posit reason result obtain sig_thresh low make modif add follow docpypeit_fil reduc findobj sig_thresh interact object findingtrac warn pypeit_find_object script deprec updat follow descript outdat follow develop case code may find object your may find sever spuriou object addremovemodifi object trace interact interact gui util pypeit_find_object sciencespecdfit launch interact gui allow perform sever simpl oper object trace tool produc line text insert pypeit file allow reproduc data reduct use tool abl delet spuriou trace add new object trace manual set fwhm object profil view complet list support function press key keyboard mous hover panel display imag detail inform print termin ie display gui discuss oper perform gui main panel display sky subtract imag data darker shade correspond higher flux greenblu line display leftright slit edg dash red line indic object trace current store select object trace click left mous button near object trace select object trace highlight solid thick red line bottom right panel display object profil profil display object select click left mous button panel set fwhm object trace fwhm indic vertic red line panel top inform panel provid inform current statu object trace sometim prompt user yesno respons eg sure want delet trace select answer click yesno button appear final two button right hand side gui allow exit trace print script includ pypeit file pleas use exit button instead kill window menu bar button label continu save chang exit session print screen relev text need inclus pypeit file button label continu dont save chang exit interact session interact chang ignor exit button four radio button allow select method trace object profil descript model object bright object slit trace bright object use standard star standard star acquir trace defin standard star use slit edg object trace follow function form function defin slit edg trace manual allow user manual defin arbitrari slit use matplotlib tool zoom data frame eg use rectangular select tool toggl pan zoom featur mous button press p key return back origin plot extent press h r key defin new object trace select one first three method hover mous locat would like lay object trace press key keyboard use manual object trace method need defin anchor point object trace defin anchor point hover mous locat see data object press key add point help identifi object trace add mani point need accur defin object trace green curv display fit object trace singl bullet point defin anchor point increasedecreas fit order polynomi press key keyboard delet individu anchor point hover near anchor point wish delet press n key altern want clear anchor point start press c key satisfi green curv defin object trace press key add object trace delet object trace select object trace click left mous button near object trace select press key your sure want delet trace select ye inform panel follow line comment script usag display call script h option includ helppypeit_find_objectsrst _ab_differenc ab imag differenc overview pypeit reduc observ obtain use two nod posit altern pattern case user need edit refpypeit_fil accord desir reduct good news code substanti flexibl bad news setup somewhat complex pypeit file run refpypeit_setup nearir spectrograph refpypeit_filedata block pypeit file includ three extra paramet calib comb_id bkg_id edit accord desir reduct also obtain run refpypeit_setup ad b option paramet three addit column calib comb_id bkg_id follow meaningsdefinit calib assign calibr group id frame calibr frame calibr group number use reduc scienc frame calibr group number comb_id repres combin id assign scienc frame frame valu comb_id coad togeth note unweight coadd henc may necessarili optim term sn ratio bkg_id repres background id assign frame use background imag subtract combin imag creat coad frame comb_id frame valu bkg_id coad togeth assign integ valu see valu less equal calibr calibr frame refpypeit_filedata block calib id valu scienc data use set use scienc standard frame pypeit file calibr frame comb_id bkg_id irrelev valu set exampl refpypeit_filedata block illumflat pixelflat trace frame filenam frametyp calib comb_id bkg_id m_fit illumflatpixelflattrac m_fit illumflatpixelflattrac m_fit illumflatpixelflattrac m_fit illumflatpixelflattrac m_fit illumflatpixelflattrac optic spectrograph arctilt imag would treat similarli see nearir spectrograph one typic deriv wavelength tilt solut sky line scienc frame imag differenc user need edit comb_id bkg_id order control pypeit combin subtract spectroscop data exampl portion refpypeit_filedata block scienc file hypothet sequenc could repres abab dither pattern filenam frametyp calib comb_id bkg_id m_fit tiltarcsci posit m_fit tiltarcsci posit b m_fit tiltarcsci posit m_fit tiltarcsci posit b note given valu specifi pypeit go comput tilt arc frame individu use imag m_fit background subtract imag m_fit similarli use m_fit background subtract imag m_fit valu calib id relat valu comb_id bkg_id pypeit alway produc one set reduc output ie specd specd etc everi frame pypeit file label scienc pypeit file word posit neg trace combin one output file rather posit trace extract although neg trace model thu exampl pypeit produc four spectral imag sciencespecdm_fit m_fit m_fit ab sciencespecdm_fit m_fit m_fit ba sciencespecdm_fit m_fit m_fit ab sciencespecdm_fit m_fit m_fit ba frame uniqu comb_id exampl imag combin reduct altern frame common valu comb_id coad case common bkg_id use frame subtract frame common comb_id exampl pypeit file combin frame would repres abba dither pattern user want coadd scienc frame background frame dither posit ie aabb bbaa filenam frametyp calib comb_id bkg_id m_fit tiltarcsci posit m_fit tiltarcsci posit b m_fit tiltarcsci posit b m_fit tiltarcsci posit chose valu comb_id bkg_id illustr number arbitrari note also assign scienc frame dither posit calib id sensibl thing sinc imag combin better also comput calibr combin imag produc two specd specd output imag sciencespecdm_fit m_m_ m_m_ aabb sciencespecdm_fit m_m_ m_m_ bbaa final let us consid scienc observ two dither posit b two exposur taken posit ie aabb dither pattern user want use imag third dither locat c background imag sinc c pure background imag reduc filenam frametyp calib comb_id bkg_id m_fit tiltarcsci posit m_fit tiltarcsci posit m_fit tiltarcsci posit b m_fit tiltarcsci posit b m_fit background posit c combin two imag purpos comput arc tilt also combin one scienc frame likewis b imag c imag use background set combin imag follow specd specd output imag gener sciencespecdm_fit m_m_ m_ aac sciencespecdm_fit m_m_ m_ bbc note output imag c m_fit reduc assign background frametyp summari arc tilt illumflat pixelflat trace frame user assign calib valu scienc data use comb_id bkg_id set common comb_id use scienc frame user wish coadd spectral extract common bkg_id use frame user wish subtract frame common comb_id uniqu calib valu use set imag user want combin measur calibr integ background frametyp use imag use background scienc frame imag background frametyp reduc _deimos_howto deimo howto overview doc goe full run pypeit multislit observ keckdeimo follow perform macbook pro gb ram recommend gb deimo took min one detector setup organ data place file singl folder mine name homexavierprojectspypeitdevelopmentsuiteraw_datakeck_deimosg_m_ refer raw_path use shortcut set export variabl bash export raw_pathpwd file within folder codeblock bash ls defitsgz defitsgz defitsgz defitsgz defitsgz defitsgz defitsgz perfectli fine file contain one mask observ variou grate sure includ calibr run pypeit_setup first script run pypeit refpypeit_setup examin raw file gener sort list instruct one docpypeit_fil per instrument configur complet instruct provid docsetup call data cd folder_for_reduc usual raw data folder pypeit_setup r raw_pathd keck_deimo c creat docpypeit_fil folder name keck_deimos_a beneath script run note raw_path full path ie includ start like see warn determin frame type eg align may ignor warn messag pypeit file includ one setup includ multipl mask may wish replac call refpypeit_setup b setup indic inspect sort file setup_fil folder see option exampl pypeit file keck_deimos_a directori look like autogener pypeit file tue apr userdefin execut paramet rdx spectrograph keck_deimo setup setup read setup dispnam g decker dra bin dispangl amp singleb setup end read data data read path homexavierprojectspypeitdevelopmentsuiteraw_datakeck_deimosg_m_ filenam frametyp ra dec target dispnam decker bin mjd airmass exptim dispangl amp dateob utc defitsgz arctilt unknown g dra singleb defitsgz pixelflatillumflattrac unknown g dra singleb defitsgz pixelflatillumflattrac unknown g dra singleb defitsgz pixelflatillumflattrac unknown g dra singleb defitsgz scienc dra g dra singleb defitsgz scienc dra g dra singleb defitsgz scienc dra g dra singleb data end exampl frametyp accur assign docpypeit_fil edit made gener case deimo howev frame type assign correctli edit follow instruct refdata_block hand user respons remov bad undesir calibr scienc frame list either delet altogeth comment note gener recommend use bia frame deimo go restrict reduct one detector deimo mosaic detector one middl chip redder spectra edit pypeit file paramet block read userdefin execut paramet rdx spectrograph keck_deimo detnum full run detector default long may tax exceed ram comput therefor may wish reduc detector time fashion one detector use list detnum eg detnum main run docpypeit_fil readi main call simpli cd keck_deimos_a run_pypeit keck_deimos_apypeit specifi overwrit exist scienc output file none superfl recommend almost alway use docrun doc describ process detail inspect file code run seri file written disk calibr first set doccalibr follow seri screen shot docqa png produc pypeit slit edg code automat assign edg slit detector includ use inform slitmask design record fit file describ docdevslitmask_id zoomin screen shot first tab ginga window use refpypeit_chk_edg script explicit call patient ginga pypeit_chk_edg mastersmasteredges_a__fitsgz imag figuresdeimos_edges_imagepng note filenam refer detector data combin flat imag greenr line indic leftright slit edg dark blue label intern slit identifi pypeit cyan number userassign id valu slit see docmaster_edg detail arc screen shot arc imag view ginga ginga mastersmasterarc_a__fit typic arc imag one see seri arc line orient approxim horizont imag figuresdeimos_arc_imagepng see docmaster_arc detail wavelength one inspect docqa wavelength calibr png qapng folder note multipl file gener everi slit reduct complet may prefer scan open html file qa exampl fit written qapngsarc_dfit_a___spng file imag figuresdeimos_arcdpng hope see qa left mani blue arc line mark green id upper right rm pixel lower right random scatter residu see docmaster_wvcalib detail sever qa file written fit qapngsarc_tilts_d_a___spng imag figuresdeimos_arcdpng horizont line black dot arc line red point reject fit provid reject fit good rm also desir fit see docmaster_wvcalib detail flatfield code produc flat field imag correct pixeltopixel variat illumin detector zoomin screen shot first tab ginga window pixflat_norm use refpypeit_chk_flat explicit call pypeit_chk_flat mastersmasterflat_a__fit imag figuresdeimos_flatpng one note pixeltopixel variat percent level slit edg defin code also plot greenr line region detector beyond slit boundari set unit valu see docmaster_flat detail spectra eventu patient code start gener spectra output one per standard scienc frame locat scienc folder specd slit inspect frequent use view summari slit success reduc pypeit refpypeit_chk_dslit explicit call pypeit_chk_dslit sciencespecd_dedra_deimos_aprtfit print detector detector spatid intern pypeit name maskid user id flag slit none success reduc visual inspect screen shot third tab ginga window sky_residdet use refpypeit_show_dspec explicit call pypeit_show_dspec sciencespecd_dedra_deimos_aprtfit det imag figuresdeimos_specdpng deimo mask mani slit display time substanti may prefer limit view subset channel channel option greenr line slit edg orang line show pypeit trace object orang text pypeit assign name yellow line indic sourc automag extract base mask design ie insuffici sn detect night sky emiss line subtract see docout_specd detail specd see summari extract sourc specdtxt file scienc folder top one ive produc name specd_dedra_deimos_aprttxt codeblock bash slit name maskdef_id objnam objra objdec spat_pixpo spat_fracpo box_width opt_fwhm sn maskdef_extract wv_rm spatslitdet fals spatslitdet fals spatslitdet true spatslitdet fals spatslitdet fals spatslitdet fals maskdef_id objnam user suppli mask design serendipit sourc name serendip maskdef_extract flag indic whether extract forc ie sourc detect pypeit extract perform base mask design one gener similar smaller set output use list option refpypeit_show_dspec pypeit_show_dspec specd_dedra_deimos_aprtfit list last screen shot gui show spectrum use refpypeit_show_dspec explicit call pypeit_show_dspec specd_dedra_deimos_aprtfit exten imag figuresdeimos_specdpng use xspecgui httpslinetoolsreadthedocsioenlatestxspecguihtml_ linetool packag black line flux red line estim error see docout_specd detail flux ad archiv flux implement current work gener archiv sensit solut flexur default run perform flexur correct slitbyslit base analysi sky line impos fix pixel shift detector spectral dimens accur solut may prefer perform flexur across detector see refpypeit_multislit_flexur full detail procedur ntt efosc overview file summar sever instrument specif set relat nttefosc spectrograph arc refer httpswwwesoorgscifacilitieslasillainstrumentsefoscinstefoscgrismshtml prism httpswwwhqesoorgscifacilitieslasillainstrumentsefoscinstperf_hearlinelist whole hear line list support gr gr note line gr given eso wrong flat fring affect gr significantli flat field skip would like keep add pipet file sciencefram process use_illumflat true use_pixelflat true overscan overscan subtract abort instrument found lead bad subtract data allow add pipet file sciencefram process use_overscan true bia dark overview doc describ bia subtraction_ includ overscan subtract dark subtraction_ perform pypeit modifi default implement gener imag bia subtract optic docspectrograph support pypeit nonzero bia level must subtract prior reduct code allow two approach may perform separt tandem describ bia imag user suppli set bia imag docpypeit_fil specifi usag imag subtract raw imag reduct gener one bia frame provid docpypeit_fil combin gener bia imag imag written disk docmaster_bia see doc inspect imag look refpypeit_parprocessimagespar keyword default skip cosmic ray reject individu frame mask_crfals appli gain correct apply_gain fals appli overscan correct use_overscan fals combin imag weight mean combin weightmean modifi discret danger applic perform bia imag subtract use_biasimag flag refpypeit_parprocessimagespar keyword must true default optic spectrograph wish turn option eg taken bia imag add follow docpypeit_fil refpypeit_fileparamet block baseprocess use_biasimag fals altern turn option set true although bia imag recommend incant baseprocess use_biasimag true calibr biasfram process use_biasimag fals overscan subtract default optic docspectrograph estim bia level overscan region subtract raw imag use_biasimag implement overscan region reduc accordingli bia imag correct valu implement wish ignor overscan add follow docpypeit_fil refpypeit_fileparamet block baseprocess use_overscan fals default set docspectrograph nearir detector dark subtract pypeit allow construct subtract dark imag imag except bia image_ gener dark imag follow default subtract overscan region use_overscan fals trim trim true orient orient true subtract bia imag use_biasimag fals skip cosmic ray reject individu frame mask_crfals appli gain correct apply_gain fals combin imag weight mean combin weightmean appli dark need specifi docframetyp accordingli exampl vltxshooter nir arm calibr pixelflatfram process use_darkimag true illumflatfram process use_darkimag true tracefram process use_darkimag true subtract dark imag gener flat trace docframetyp _codeconduct code conduct follow code conduct work relat pypeit modifi version one adopt astropi commun httpswwwastropyorgcode_of_conducthtml_ pypeit commun code conduct commun particip open sourc pypeit project made member around globe divers set skill person experi differ commun experi success continu growth expect everyon commun follow guidelin interact other insid outsid commun goal keep posit inclus success grow commun member commun pledg treat peopl respect provid harass bullyingfre environ regardless sex sexual orient andor gender ident disabl physic appear bodi size race nation ethnic religion particular sexual languag imageri sexist racist otherwis exclusionari joke appropri pledg respect work other recogn acknowledgmentcit request origin author author pledg explicit want work cite acknowledg pledg welcom interest join commun realiz includ peopl varieti opinion background serv enrich commun particular discuss relat proscon variou technolog program languag welcom done respect take proactiv measur ensur particip heard feel confid freeli express opinion pledg welcom question answer respect pay particular attent new commun pledg provid respect critic feedback forum especi discuss thread result code contribut pledg conscienti percept wider commun respond critic respect strive model behavior encourag product debat disagr within commun critic treat outsid commun respect peopl within commun pledg help entir commun follow code conduct remain silent see violat code conduct take action member commun violat code contact confidentialpypeitucolickorg email sent address treat strictest confid talk privat person code conduct appli pypeit commun situat onlin offlin includ mail list forum social media confer meet associ social event onetoon interact use softwar polit request abid code conduct relat activ project organ member pypeit commun includ affili packag welcom code conduct agre also abid present code conduct part code conduct adapt psf code conduct httpswwwpythonorgpsfconduct_ collat spectra overview pypeit provid tool call pypeit_collate_d go larg number process refout_specdspecd output file group spectra object coadd match spectra also creat metadata file input file coad output file creat archiv directori suitabl ingest koa flux plan ad futur releas usag collat option access via either command line collat file addit coadd configur also pass via configur file exampl run pypeit_collate_d requir toler list specd file pypeit_collate_d toler specd_fil sciencespecdfit pypeit_collate_d also run dri run mode tri differ threshold valu without process input pypeit_collate_d toler specd_fil sciencespecd write paramet collatedpar userwarn select configur file alreadi exist overwritten parsetpi info creat j_deimos_fit follow sourc info sciencespecd_desasdfzclus_deimos_aprtfit spatslitdet sbzk_ info sciencespecd_desasdfzclus_deimos_aprtfit spatslitdet sbzk_ info creat j_deimos_fit follow sourc info sciencespecd_desasdfzclus_deimos_aprtfit spatslitdet sbzk_ info sciencespecd_desasdfzclus_deimos_aprtfit spatslitdet sbzk_ info creat j_deimos_fit follow sourc info sciencespecd_desasdfzclus_deimos_aprtfit spatslitdet nb_ info sciencespecd_desasdfzclus_deimos_aprtfit spatslitdet nb_ info creat j_deimos_fit follow sourc info sciencespecd_desasdfzclus_deimos_aprtfit spatslitdet nb_ info sciencespecd_desasdfzclus_deimos_aprtfit spatslitdet nb_ info creat j_deimos_fit follow sourc info sciencespecd_desasdfzclus_deimos_aprtfit spatslitdet nb_ info sciencespecd_desasdfzclus_deimos_aprtfit spatslitdet nb_ info creat j_deimos_fit follow sourc info sciencespecd_desasdfzclus_deimos_aprtfit spatslitdet photz_ info sciencespecd_desasdfzclus_deimos_aprtfit spatslitdet photz_ info creat j_deimos_fit follow sourc info sciencespecd_desasdfzclus_deimos_aprtfit spatslitdet nb_ info creat j_deimos_fit follow sourc info sciencespecd_desasdfzclus_deimos_aprtfit spatslitdet photz_ info sciencespecd_desasdfzclus_deimos_aprtfit spatslitdet photz_ info creat j_deimos_fit follow sourc info sciencespecd_desasdfzclus_deimos_aprtfit spatslitdet photz_ info creat j_deimos_fit follow sourc info sciencespecd_desasdfzclus_deimos_aprtfit spatslitdet photz_ info sciencespecd_desasdfzclus_deimos_aprtfit spatslitdet photz_ info creat j_deimos_fit follow sourc info sciencespecd_desasdfzclus_deimos_aprtfit spatslitdet nb_ info creat j_deimos_fit follow sourc info sciencespecd_desasdfzclus_deimos_aprtfit spatslitdet serendip info total durat command line includ helppypeit_collate_drst collat configur file cofigur file pypeit_collate_d consist set refpypeit_parcollatedpar keyword follow list specd file exampl configur file shown userdefin coad paramet coaddd sn_clip userdefin collat paramet collat whether match use radec sky coordin via spatial pixel coordin exposur match_us radec close two spectra must order consid object specifi varieti format radec match angular distanc pixel match integ float point number exampl arcsecond default unit arcminut decim degre dm degre arcminut arcsecond hm hour minut second pixel distanc toler slit bitmask flag exclud match list empti specd file coad must match specd file slit_exclude_flag boxslit place coad file report file default current directori outdir workoutput copi input output file along metadata archiv koa archive_root workarch look pypeit file build archiv take effect archive_root specifi given archiv code look parent directori specd pypeit_fil workpypeit_fil list specd file wildcard allow specd read sciencespecdfit specd end coaddd configur coaddd configur configur collat shown separ coaddd file base name collat file refpypeit_parcoadddpar keyword report pypeit_collate_d creat two file report result collat collate_reportdat collate_warningstxt collate_reportdat collate_reportdat ipac httpsirsaipaccaltecheduapplicationsddgendocipac_tblhtml_ file contain metadata object coad file organ output file name multipl row per output file one row per extract spectra coad creat file descript column column name descript filenam filenam coad output file maskdef_objnam name object coad maskdef_id slit id accord mask definit det detector spectrum captur objra ra sourc object determin mask definit objdec dec sourc object determin mask definit med_sn signal nois ratio extract object wav_rm rm pixel wavelength solut specd_filenam name specd file contain spectrum dispnam grate use sourc imag slmsknam slitmask use sourc imag bin bin sourc imag header mjd modifi julian date sourc imag header airmass airmass sourc imag header exptim exposur time sourc imag header guidfwhm guid star fwhm valu sourc imag header progpi program principl investig sourc imag header semest semest sourc imag header progid program id sourc imag header collate_warningstxt collate_warningstxt file contain inform failur occur collat andor archiv exampl collate_warningstxt pypeit_collate_d warn start durat exclud object exclud serendip object spatslitdet sciencespecd_desasdfzclus_deimos_tfit exclud serendip object spatslitdet sciencespecd_desasdfzclus_deimos_tfit fail coadd miss archiv file could archiv match text file sciencespecd_desasdfzclus_deimos_tfit file found could archiv match text file sciencespecd_desasdfzclus_deimos_tfit file found match decid two spectra match pypeit_collate_d perform follow check slit_exclude_flag check slit spectrum found match found spectrum skip coad two spectra compar make sure spectrograph configur posit two spectra compar see within given toler spectrum match other still output use refcoadddcurr coaddd data model step exclud slit bitmask pypeit assign bitmask slit slit mask spectra slit certain type exclud coad featur use must refout_specdspecd output file correspond specd file bitmask valu shortslit slit form left right edg short ignor flexur boxslit slit form left right edg valid larg enough valid slit short scienc slit userignor user specifi ignor slit ignor flexur badwvcalib wavelength calibr fail slit badtiltcalib tilt analysi fail slit skipflatcalibflat field gener fail slit skip flat field badflatcalib flat field gener fail slit ignor fulli badreduc skysubextract fail slit step match spectrograph configur set configur key defin uniqu configur spectrograph pypeit support exampl deimo key dispnam decker bin dispangl amp pypeit_collate_d match spectra valu configur key except decker decker keyword check spectra object differ slit mask coad step match posit radec radec match use toler specifi angular distanc default treat arcsecond format support astropi angl httpsdocsastropyorgenstablecoordinatesangleshtml_ use match done use astropi skycoord separ method httpsdocsastropyorgenstableapiastropycoordinatesskycoordhtmlastropycoordinatesskycoordseparation_ current deimo mosfir support radec match pixel pixel match use toler specifi integ float point number match done distanc along spatial axi exposur archiv pypeit_collate_d copi input file use file creat archiv directori suitabl compress sent koa ingest reduc data associ file store subdirectori base semest program id data header addit metadata inform store top level directori archiv file specd fit file begin prefix specd contain calibr spectra extract scienc data see httpspypeitreadthedocsioenlatestout_specdhtml detail descript file specd text file text file extract inform specd file also copi archiv directori inform file found httpspypeitreadthedocsioenlatestout_specdhtmlextractioninform specd fit file specd prefix contain spectral imag creat pypeit data reduct describ detail httpspypeitreadthedocsioenlatestout_specdhtml coadd output file fit file begin sky coordin prefix coad spectra multipl exposur singl object describ detail httpspypeitreadthedocsioenlatestcoadddhtmlcurrentcoaddddatamodel pypeit file file end pypeit origin pypeit reduct file use reduc raw data default pypeit_collate_d search pypeit file parent directori specd file pypeit file describ httpspypeitreadthedocsioenlatestpypeit_filehtml archiv metadata pypeit_collate_d write two metadata file name reduced_filesdat coadded_files_metadat file written ipac httpsirsaipaccaltecheduapplicationsddgendocipac_tblhtml_ format reduced_filesdat reduced_filesdat file contain metadata specd specd file archiv file organ koaid descript column reduced_filesdat file filenam rel top level archiv directori column name descript koaid koaid sourc imag reduc creat reduc file specd_fil filenam specd file specd_info filenam extract info text file associ specd file specd_fil filenam specd file pypeit_fil pypeit reduct file use reduc file ra ra sourc imag header dec dec sourc imag header target target sourc imag header progpi program principl investig sourc imag header semest semest sourc imag header progid program id sourc imag header dispnam grate use sourc imag slmsknam slit mask use sourc imag bin bin sourc imag header mjd modifi julian date sourc imag header airmass airmass sourc imag header exptim exposur time sourc imag header coadded_filesdat coadded_filesdat file contain metadata coad output file file organ output file name multipl row per output file one row per extract spectra coad creat file descript column coadded_filesdat file filenam rel top level archiv directori column name descript filenam filenam coad output file maskdef_objnam name object coad maskdef_id slit id accord mask definit det detector spectrum captur objra ra sourc object determin mask definit objdec dec sourc object determin mask definit med_sn signal nois ratio extract object wav_rm rm pixel wavelength solut source_id koaid origin sourc imag specd_filenam name specd file contain spectrum dispnam grate use sourc imag slmsknam slitmask use sourc imag bin bin sourc imag header mjd modifi julian date sourc imag header airmass airmass sourc imag header exptim exposur time sourc imag header guidfwhm guid star fwhm valu sourc imag header progpi program principl investig sourc imag header semest semest sourc imag header progid program id sourc imag header _output output pypeit despit pipelin data reduct capabl gener inordin amount data product page document variou data product mean control output full descript name system describ docher name content toctre maxdepth name name master_bia master_dark master_align master_arc master_tilt master_edg master_slit master_wvcalib master_tilt master_flat out_specd out_specd out_mask detector histori _standardproduct standard product four standard type output product gener pypeit separ calibr spectra qa plot type design uniqu prefix filenam output type prefix descript spectra specd array meta data associ extract spectra object info objinfo ascii tabl list sever object attribut spectra specd array relat sourc eg skysubtract imag calibr master calibr imag fit meta file etc reduct na file guid describ reduct qa variabl qualiti assur figur follow link contents_ detail masteralign overview file describ data model masteralign_ imag gener simpl combin input align frame use trace constant spatial posit slit frame use slitbas ifu eg cbar frame kcwi imag written disk multiextens fit file prefix masteralign master folder see refmastersmast name name convent inspect first extens combin imag view standard imag viewer eg ginga mastersmasteralignment_a__fit imag also trim portion raw imag also reorient vertic spectral dimens blue bottom screen shot ginga view exampl keck_kcwi spectrograph imag figuresalign_imagepng align trace colorcod slit number ie color altern orang purpl slit exampl slit contain five contbar use spatial align troubl shoot imag appear err thing consid one input align frame junk check input align frame might mislabel align appar miss might want check slit current trace current align data model intern master imag held classpypeitimagesbuildimagealignimag classpypeitimagespypeitimagepypeitimag classpypeitdatamodeldatacontain datamodel written disk includ includedatamodel_alignmentsrst pypeit script pypeit packag sever script instal directli path eg anacondabin develop new script see refnew_script instal script pypeit_install_tellur download atmospher model grid use fit tellur absorpt script instal file creat symlink within pypeit code base see refdata_instal script usag display call script h option includ helppypeit_install_telluricrst pypeit_install_ql_mast download ql_master directori use quicklook script script instal file creat symlink within pypeit code base see refdata_instal script usag display call script h option includ helppypeit_install_ql_mastersrst pipelin script _pypeitchkforcalib pypeit_chk_for_calib script similar refpypeitsetup examin set file input spectrograph scan standard calibr rais warn found script usag display call script h option includ helppypeit_chk_for_calibsrst typic call pypeit_chk_calib pypeitdevelopmentsuiteraw_datanot_alfoscgrismaldc not_alfosc run stream detail note print tabl result screen setup pass scifil fals aldcfit none true _pypeitparsecalibid pypeit_parse_calib_id pypeit_parse_calib_id script print simpl summari screen calibr frame enabl hope pars rather obscur pypeit name typic call pypeit_parse_calib_id vlt_xshooter_vis_xpypeit associ output a__ arc master_key a__ master_nam masterarc_a__fit raw_fil xshootfitsgz bia master_key a__ master_nam masterbias_a__fit raw_fil xshootfitsgz xshootfitsgz xshootfitsgz tilt master_key a__ master_nam mastertiltimg_a__fit raw_fil xshootfitsgz first level calib_grp next level give master key a__ list file contribut refmast see doc _pypeitobslog pypeit_obslog pypeit_obslog script allow see simpl list data file given directori directori metadata pypeit pull header see refpypeit_obslog detail _pypeitsetup pypeit_setup setup file data reduct see docsetup detail run_pypeit main execut pypeit see docrun detail pypeit_view_fit wrapper ginga imag viewer bit kludg write dummi tmpfit file harddriv send ginga dummi file delet afterward script usag display call script h option includ helppypeit_view_fitsrst data process script pypeit_coadd_dspec see doccoaddd detail pypeit_collate_d tool help organ spectra multipl specd file group sourc fluxcoadd script usag display call script h option includ helppypeit_collate_drst calibr script pypeit_chk_edg inspect slitord edg identifi pypeit rc ginga window script usag display call script h option includ helppypeit_chk_edgesrst pypeit_chk_flat inspect flat field imag produc pypeit rc ginga window includ stack raw imag pixel flat illumin flat flat model script usag display call script h option includ helppypeit_chk_flatsrst _pypeit_chk_dslit pypeit_chk_wavecalib see refpypeitchkwavecalib detail pypeit_chk_dslit script print simpl summari state reduct slit given docout_specd file standard call pypeit_chk_dslit specd_d_agsmsk_deimos_martfit output screen look like codeblock bash det spatid maskid flag none none none none none none none boxslit none none none none none none boxslit boxslit maskid popul instrument includ mask design eg keckdeimo flag column describ failur mode reason slit reduc none prefer state scienc slit pypeit_flux_setup set file flux coad tellur correct note pypeit file gener script need chang give sensfunc file name flux pypeit file give sensfunc file name coad pypeit file coad pypeit file includ object extract main reduct need pick one interest remov other coad pypeit file coaddd read coaddd end see docflux doccoaddd doctellur detail script usag display call script h option includ helppypeit_flux_setuprst version hdu name obj type array type descript alignfram ndarray float main data imag trace ndarray float trace shape nspecnalignnslit spat_id ndarray integ slit spatial id version hdu name obj type array type descript pyp_spec str pypeit spectrograph name arc_spectra ndarray float array extract spectra slit slit nspec nslit lamp str list arc lamp use wavelength calibr nslit int total number slit includ mask slit spat_id ndarray integ slit spat_id name distinctli wavefit strpar str paramet string wv_fitd pypeitfit wavelength solut echel wv_fit ndarray wavefit wavefit wavelength solut python version requir user ipython pyyaml astropi bottleneck configobj extensionhelp ginga linetool matplotlib numpi packag qtpi scikitlearn scipi requir develop codecov coverag pyqt pytestastropi pytestcov pytest shape sphinx sphinxautomodapi sphinx_rtd_them tox codeblock consol autogener pypeit file userdefin execut paramet rdx spectrograph shane_kast_blu setup setup read setup dispnam dichroic setup end read data data read path userswestfallworkpackagespypeitdevelopmentsuiteraw_datashane_kast_blue__d filenam frametyp ra dec target dispnam decker bin mjd airmass exptim dichroic bfitsgz arctilt arc arcsec bfitsgz bia bia arcsec bfitsgz bia bia arcsec bfitsgz bia bia arcsec bfitsgz bia bia arcsec bfitsgz bia bia arcsec bfitsgz bia bia arcsec bfitsgz bia bia arcsec bfitsgz bia bia arcsec bfitsgz bia bia arcsec bfitsgz bia bia arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz pixelflatillumflattrac dome flat arcsec bfitsgz scienc jp arcsec bfitsgz scienc jp arcsec bfitsgz standard feig arcsec data end version hdu name obj type array type descript dark_imag ndarray float primari imag data dark_ivar ndarray float invers varianc imag dark_detector detectorcontain detector datacontain version hdu name obj type array type descript arc_imag ndarray float primari imag data arc_fullmask ndarray integ full imag bitmask arc_detector detectorcontain detector datacontain version obj key obj type array type descript spat_id ndarray int slit id number spat measur half way point maskdef_id ndarray int slit id number slitmask design implement docdeimo docmosfir left_init ndarray float spatial coordin pixel indic left edg one per slit right_init ndarray float spatial coordin pixel indic right edg one per slit left_tweak ndarray float spatial coordin pixel indic left edg one per slit trace adjust flatfield right_tweak ndarray float spatial coordin pixel indic right edg one per slit trace adjust flatfield center ndarray float spatial coordin slit center left_init right_init mask_init ndarray int bit mask slit instanti use reset mask ndarray int bit mask slit fulli good slit valu specmin ndarray float minimum spectral posit allow slitord specmax ndarray float maximum spectral posit allow slitord addit astropyiofitsbintablehdu_ docdeimo docmosfir reduct obj key obj type array type descript traceid ndarray int trace id number tracesrow ndarray int spectral row provid left right edg tracelpix ndarray float spatial pixel coordin left edg tracerpix ndarray float spatial pixel coordin right edg spat_id ndarray int slit id number spat measur half way point slitid ndarray int slit id number maskdef_id slitlopt ndarray float left edg slit pixel slitmask design xcorrel slitropt ndarray float right edg slit pixel slitmask design xcorrel slitra ndarray float right ascens slit center deg slitdec ndarray float declin slit center deg slitlen ndarray float slit length arcsec slitwid ndarray float slit width arcsec slitpa ndarray float slit posit angl sky deg n e align ndarray int slit use align ye objid ndarray int object id number objra ndarray float right ascens object deg objdec ndarray float declin object deg objnam ndarray str object name assign observ objmag ndarray float object magnitud provid observ objmag_band ndarray str band magnitud provid observ obj_topdist ndarray float project posit object wrt top edg slit arcsec obj_botdist ndarray float project posit object wrt bottom edg slit arcsec version hdu name obj type array type descript pyp_spec str pypeit spectrograph name illumflat_bpm ndarray integ mirror slittraceset mask flatspecif flag illumflat_raw ndarray float process combin illum flat illumflat_spat_bsplin ndarray bspline bspline model illum flat pixelflat_bpm ndarray integ mirror slittraceset mask flatspecif flag pixelflat_model ndarray float model flat pixelflat_norm ndarray float normal pixel flat pixelflat_raw ndarray float process combin pixel flat pixelflat_spat_bsplin ndarray bspline bspline model pixel flat pixelflat_spec_illum ndarray float rel spectral illumin spat_id ndarray integ slit spat_id version obj key obj type array type descript pyp_spec str pypeit spectrograph name ext_mod str extract mode option box opt flux ndarray float flux array unit countss ergscmang flux bool boolean indic spectrum flux ivar ndarray float invers varianc array match unit flux mask ndarray integ mask array goodbad obj_model ndarray float object model tellur spect_meta dict header dict tellur ndarray float tellur model wave ndarray float wavelength array ang version hdu name obj type array type descript bias_imag ndarray float primari imag data bias_ivar ndarray float invers varianc imag bias_detector detectorcontain detector datacontain paramet default bia dark trace arc tilt align pixelflat illumflat sky standard scienc apply_gain true use_pattern fals empirical_rn fals use_overscan true trim true orient true use_biasimag true fals use_darkimag fals spat_flexure_correct fals use_pixelflat true fals fals fals fals fals fals fals fals use_illumflat true fals fals fals fals fals fals fals fals use_specillum fals shot_nois true fals noise_floor mask_cr fals true true true true bit name bit number decim valu descript bpm compon instrumentspecif bad pixel mask cr cosmic ray detect satur satur pixel mincount pixel instrumentspecif minimum count offslit pixel belong slit is_nan pixel valu undefin ivar invers varianc undefin ivar_nan invers varianc nan extract pixel mask local skysub extract badscal bad imag rescal oper eg flat valu stckmask pixel mask imag stack version hdu name obj type array type descript pyp_spec str pypeit spectrograph name bpmtilt ndarray integ bad pixel mask tilt solut key taken slittracesetbitmask coeff ndarray float coeffic fit initi slit one set per slitord array funcd str function use fit nslit int total number slit includ mask slit spat_flexur float flexur shift input tiltimag spat_id ndarray integ slit spat_id spat_ord ndarray integ order spatial fit nslit spec_ord ndarray integ order spectral fit nslit key type descript bin str bin pypeit orient origin darkcurr intfloat dark current epixelhour dataext int index fit extens contain data datasec ndarray either data section header keyword valid data section obtain one per amplifi defin explicitli fit format eg det int pypeit design detector number base gain ndarray invers gain eadu list provid detector contain one amplifi mincount intfloat count pixel valu ignor unphys nonlinear intfloat percentag detector rang linear ie everyth nonlinearsatur flag satur numamplifi int number amplifi oscansec ndarray either overscan section header keyword valid data section obtain one per amplifi defin explicitli fit format eg platescal intfloat arcsec per pixel spatial dimens unbin pixel ronois ndarray readout nois e list provid detector contain one amplifi element list readout nois determin overscan region defin oscansec satur intfloat detector satur level spatflip bool true spatial dimens flip pypeit expect echel order increas increas pixel number ie set spatfliptru reorder imag blue order appear left red order right specaxi int spectra dispers along axi allow valu first dimens numpi array shape second dimens numpi array shape specflip bool true dispers dimens specifi specaxi flip pypeit expect wavelength increas increas pixel number case instrument set specflip true xgap intfloat gap squar detector pixel express fraction x pixel size x predominantli spatial axi ygap intfloat gap squar detector pixel express fraction pixel size predominantli spectral axi ysize intfloat size pixel ydirect multipl x pixel size ie xsize x predominantli dispers axi codeblock consol setup dispnam g decker longmirr bin dispangl amp singleb filter og filenam frametyp ra dec target dispnam decker bin mjd airmass exptim dispangl amp filter dateob utc frameno defit arctilt dome phlat g longmirr singleb og d_fitsgz arctilt dome phlat g longmirr singleb og d_fitsgz pixelflatillumflattrac dome phlat g longmirr singleb og defit pixelflatillumflattrac dome phlat g longmirr singleb og d_fitsgz pixelflatillumflattrac dome phlat g longmirr singleb og defit pixelflatillumflattrac dome phlat g longmirr singleb og d_fitsgz pixelflatillumflattrac dome phlat g longmirr singleb og defit pixelflatillumflattrac dome phlat g longmirr singleb og defit scienc p_off g longmirr singleb og d_fitsgz scienc p_off g longmirr singleb og defit scienc p_off g longmirr singleb og defit scienc p_off g longmirr singleb og d_fitsgz scienc p_off g longmirr singleb og defit scienc p_off g longmirr singleb og defit scienc p_off g longmirr singleb og defit scienc feig g longmirr singleb og setup b dispnam g decker longmirr bin dispangl amp singleb filter og filenam frametyp ra dec target dispnam decker bin mjd airmass exptim dispangl amp filter dateob utc frameno d_fitsgz bia unknown g none singleb r d_fitsgz arctilt unknown g longmirr singleb og d_fitsgz pixelflatillumflattrac unknown g longmirr singleb og d_fitsgz pixelflatillumflattrac unknown g longmirr singleb og d_fitsgz pixelflatillumflattrac unknown g longmirr singleb og d_fitsgz scienc psojp_off g longmirr singleb og d_fitsgz scienc psojp_off g longmirr singleb og d_fitsgz scienc psojp_off g longmirr singleb og d_fitsgz scienc gbb g longmirr singleb og end pypeit name pypeit class telescop camera pipelin approach support comment bok_bc classpypeitspectrographsbok_bcbokbcspectrograph bok bc multislit true bok bc spectromet gemini_flamingo classpypeitspectrographsgemini_flamingosgeminiflamingosspectrograph gemini flamingo multislit fals gemini_flamingo classpypeitspectrographsgemini_flamingosgeminiflamingosspectrograph gemini flamingo multislit true flamingo nir spectrograph gemini_gmos_north_ev classpypeitspectrographsgemini_gmosgeminigmosnevspectrograph geminin gmosn multislit true ev detector see docgemini_gmo gemini_gmos_north_ham classpypeitspectrographsgemini_gmosgeminigmosnhamspectrograph geminin gmosn multislit true hamamatsu detector r b r use sinc feb see docgemini_gmo gemini_gmos_north_ham_n classpypeitspectrographsgemini_gmosgeminigmosnhamnsspectrograph geminin gmosn multislit true gemini_gmos_north_ham use nodandshuffl mode see docgemini_gmo gemini_gmos_south_ham classpypeitspectrographsgemini_gmosgeminigmosshamspectrograph gemini gmoss multislit true hamamatsu detector r b r see docgemini_gmo gemini_gnir classpypeitspectrographsgemini_gnirsgeminignirsspectrograph geminin gnir echel true gtc_osiri classpypeitspectrographsgtc_osirisgtcosirisspectrograph gtc osiri multislit true see docgtc_osiri keck_deimo classpypeitspectrographskeck_deimoskeckdeimosspectrograph keck deimo multislit true support grate zd g zd b g see docdeimo keck_hires_r classpypeitspectrographskeck_hireskeckhiresrspectrograph keck hires_r echel fals keck_kcwi classpypeitspectrographskeck_kcwikeckkcwispectrograph keck kcwi ifu true support setup bm bh see dockeck_kcwi keck_lris_blu classpypeitspectrographskeck_lriskecklrisbspectrograph keck lrisb multislit true blue camera see doclri keck_lris_blue_orig classpypeitspectrographskeck_lriskecklrisborigspectrograph keck lrisb multislit true origin detector replac see doclri keck_lris_r classpypeitspectrographskeck_lriskecklrisrspectrograph keck lrisr multislit true red camera lbnl detector kxk see doclri keck_lris_red_mark classpypeitspectrographskeck_lriskecklrisrmarkspectrograph keck lrisr multislit true new mark detector circa spring support setup r keck_lris_red_orig classpypeitspectrographskeck_lriskecklrisrorigspectrograph keck lrisr multislit true origin detector replac see doclri keck_mosfir classpypeitspectrographskeck_mosfirekeckmosfirespectrograph keck mosfir multislit true grate test j k see docmosfir keck_nir classpypeitspectrographskeck_nireskeckniresspectrograph keck nire echel true keck_nirspec_low classpypeitspectrographskeck_nirspeckecknirspeclowspectrograph keck nirspec multislit true lowdispers grate lbt_luci classpypeitspectrographslbt_lucilbtlucispectrograph lbt luci multislit true lbt_luci classpypeitspectrographslbt_lucilbtlucispectrograph lbt luci multislit true lbt_modsb classpypeitspectrographslbt_modslbtmodsbspectrograph lbt modsb multislit true modsi blue spectromet lbt_modsr classpypeitspectrographslbt_modslbtmodsrspectrograph lbt modsr multislit true modsi red spectromet lbt_modsb classpypeitspectrographslbt_modslbtmodsbspectrograph lbt modsb multislit true modsii blue spectromet lbt_modsr classpypeitspectrographslbt_modslbtmodsrspectrograph lbt modsr multislit true modsii red spectromet ldt_deveni classpypeitspectrographsldt_devenyldtdevenyspectrograph ldt deveni multislit true ldt deveni optic spectrograph magellan_fir classpypeitspectrographsmagellan_firemagellanfireechellespectrograph magellan fire echel true magellanfir echel mode magellan_fire_long classpypeitspectrographsmagellan_firemagellanfirelongspectrograph magellan fire multislit true magellanfir longslithighthroughput mode magellan_mag classpypeitspectrographsmagellan_magemagellanmagespectrograph magellan mage echel true see docmag mdm_osmos_mdmk classpypeitspectrographsmdm_osmosmdmosmosmdmkspectrograph kpno mdmk multislit true mdm osmo spectromet mmt_binospec classpypeitspectrographsmmt_binospecmmtbinospecspectrograph mmt binospec multislit true mmt_bluechannel classpypeitspectrographsmmt_bluechannelmmtbluechannelspectrograph mmt blue_channel multislit true mmt_mmir classpypeitspectrographsmmt_mmirsmmtmmirsspectrograph mmt mmir multislit true not_alfosc classpypeitspectrographsnot_alfoscnotalfoscspectrograph alfosc multislit true grism ntt_efosc classpypeitspectrographsntt_efoscnttefoscspectrograph ntt efosc multislit true eso faint object spectrograph camera version p_dbsp_blue classpypeitspectrographsp_dbsppdbspbluespectrograph p dbspb multislit true blue camera p_dbsp_red classpypeitspectrographsp_dbsppdbspredspectrograph p dbspr multislit true red camera p_tspec classpypeitspectrographsp_tspecptspecspectrograph p tspec echel true triplespec spectrograph shane_kast_blu classpypeitspectrographsshane_kastshanekastbluespectrograph shane kastb multislit true shane_kast_r classpypeitspectrographsshane_kastshanekastredspectrograph shane kastr multislit true shane_kast_red_ret classpypeitspectrographsshane_kastshanekastredretspectrograph shane kastr multislit true red reticon soar_goodman_r classpypeitspectrographssoar_goodmansoargoodmanredspectrograph soar red multislit true support grate x bin tng_dolor classpypeitspectrographstng_dolorestngdoloresspectrograph tng dolor multislit fals dolor lr spectrograph lrr vlt_for classpypeitspectrographsvlt_forsvltforsspectrograph vlt for multislit true v grate vlt_sinfoni classpypeitspectrographsvlt_sinfonivltsinfonispectrograph vlt sinfoni multislit true grate test k vlt_xshooter_nir classpypeitspectrographsvlt_xshootervltxshooternirspectrograph vlt xshooter_nir echel true see docxshoot vlt_xshooter_uvb classpypeitspectrographsvlt_xshootervltxshooteruvbspectrograph vlt xshooter_uvb echel fals see docxshoot vlt_xshooter_vi classpypeitspectrographsvlt_xshootervltxshootervisspectrograph vlt xshooter_vi echel true see docxshoot wht_isis_blu classpypeitspectrographswht_isiswhtisisbluespectrograph wht isisb multislit fals blue camera wht_isis_r classpypeitspectrographswht_isiswhtisisredspectrograph wht isisr multislit fals red camera version obj key obj type array type descript bpmmask ndarray integ badpixel mask imag det int detector index detector detectorcontain detector datacontain imgbitm str list bitmask key imagebitmask ivarmodel ndarray float ivar model imag float ivarraw ndarray float process invers varianc imag float objmodel ndarray float object model imag float scaleimg ndarray float multipl scale imag appli scienc imag float sci_spat_flexur float shift spatial pixel imag slittrac sci_spec_flexur tabl global shift spectrum correct spectralflexur pixel base sky spectrum atth center slit sciimg ndarray float process scienc imag float skymodel ndarray float sky model imag float slit slittraceset slittraceset defin slit tilt ndarray float tilt imag float vel_corr float relativist veloc correct wavelength vel_typ str type refer frame correct option list routin wavelengthsolutionparvalid_reference_fram current list observ heliocentr barycentr waveimg ndarray float wavelength imag vacuum float core _globglob httpsdocspythonorglibraryglobhtml _isinst httpsdocspythonorglibraryfunctionshtmlisinst _logginglogg httpsdocspythonorglibrarylogginghtml _logginglevel httpsdocspythonorglibrarylogginghtmllogginglevel _pep httpswwwpythonorgdevpepspep _pep httpswwwpythonorgdevpepspep _argparsenamespac httpsdocspythonorglibraryargparsehtmlargparsenamespac _argparseargumentpars httpsdocspythonorglibraryargparsehtmlargparseargumentpars _argparsehelpformatt httpsdocspythonorglibraryargparsehtmlformatterclass _collectionsordereddict httpsdocspythonorglibrarycollectionshtmlcollectionsordereddict _strsplitlin httpsdocspythonorglibrarystdtypeshtmlstrsplitlin _textwrapwrap httpsdocspythonorglibrarytextwraphtmltextwrapwrap numpi _numpyndarray httpsdocsscipyorgdocnumpyreferencegeneratednumpyndarrayhtml _numpymamaskedarray httpdocsscipyorgdocnumpyreferencemaskedarraybaseclasshtml _numpymamedian httpsnumpyorgdocstablereferencegeneratednumpymamedianhtml _numpyrecarray httpsdocsscipyorgdocnumpyreferencegeneratednumpyrecarrayhtml _numpymeshgrid httpdocsscipyorgdocnumpyreferencegeneratednumpymeshgridhtml _numpywher httpdocsscipyorgdocnumpyreferencegeneratednumpywherehtml _numpyrandomgener httpsnumpyorgdocstablereferencerandomgeneratorhtml scipi _scipyoptimizeleast_squar httpdocsscipyorgdocscipyreferencegeneratedscipyoptimizeleast_squareshtml _scipyoptimizeoptimizeresult httpdocsscipyorgdocscipyreferencegeneratedscipyoptimizeoptimizeresulthtml _scipyoptimizedifferential_evolut httpsdocsscipyorgdocscipyreferencegeneratedscipyoptimizedifferential_evolutionhtml _scipyinterpolateinterpd httpsdocsscipyorgdocscipyreferencegeneratedscipyinterpolateinterpdhtml _scipysparsespmatrix httpdocsscipyorgdocscipyreferencegeneratedscipysparsespmatrixhtml _scipysparsecsr_matrix httpdocsscipyorgdocscipyreferencegeneratedscipysparsecsr_matrixhtml _scipysparsecoo_matrix httpdocsscipyorgdocscipyreferencegeneratedscipysparsecoo_matrixhtml _scipysparsetriu httpdocsscipyorgdocscipyreferencegeneratedscipysparsetriuhtml _scipylinalglu_factor httpdocsscipyorgdocscipyreferencegeneratedscipylinalglu_factorhtml _scipylinalglu_solv httpsdocsscipyorgdocscipyreferencegeneratedscipylinalglu_solvehtml _scipyndimagesobel httpsdocsscipyorgdocscipyreferencegeneratedscipyndimagesobelhtml _scipyndimageconvolv httpsdocsscipyorgdocscipyreferencegeneratedscipyndimageconvolvehtmlscipyndimageconvolv matplotlib _matplotlibpyplotimshow httpmatplotliborgapipyplot_apihtmlmatplotlibpyplotimshow _matplotlibaxesax httpsmatplotliborgapiaxes_apihtmlmatplotlibaxesax configobj _configobj httpconfigobjreadthedocsioenlatest astropi _astropyiofit httpdocsastropyorgenstableiofitsindexhtml _astropyiofitsopen httpdocsastropyorgenstableiofitsapifileshtmlastropyiofitsopen _astropyiofitshdulist httpdocsastropyorgenstableiofitsapihdulistshtml _astropyiofitshdulistwriteto httpdocsastropyorgenstableiofitsapihdulistshtmlastropyiofitshdulistwriteto _astropyiofitshead httpdocsastropyorgenstableiofitsapiheadershtmlhead _astropyiofitsimagehdu httpsdocsastropyorgenstableiofitsapiimageshtmlimagehdu _astropyiofitsbintablehdu httpsdocsastropyorgenstableiofitsapitableshtmlbintablehdu _astropyiofitscolumn httpsdocsastropyorgenstableiofitsapitableshtmlcolumn _astropytablet httpsdocsastropyorgenstablet _astropytabletableread httpsdocsastropyorgenstableapiastropytabletablehtmlastropytabletableread _astropytablerow httpsdocsastropyorgenstableapiastropytablerowhtml _astropywcswcswc httpdocsastropyorgenstableapiastropywcswcshtml _astropymodel httpdocsastropyorgenstablemodelingindexhtml _astropymodelingpolynomiallegendr httpdocsastropyorgenstableapiastropymodelingpolynomiallegendredhtml _astropymodelingmodelscompoundmodel httpdocsastropyorgenstablemodelingcompoundmodelshtml _astropymodelingfittablemodel httpdocsastropyorgenstableapiastropymodelingfittablemodelhtml _astropycosmologyflatlambdacdm httpdocsastropyorgenstableapiastropycosmologyflatlambdacdmhtmlflatlambdacdm _astropyconst httpdocsastropyorgenstableconstantsindexhtml _astropytimetim httpsdocsastropyorgenstabletim _astropycoordinatesskycoord httpsdocsastropyorgenstableapiastropycoordinatesskycoordhtml _astropycoordinatesearthloc httpsdocsastropyorgenstableapiastropycoordinatesearthlocationhtml _astropystatssigmaclip httpsdocsastropyorgenstableapiastropystatssigmacliphtml scikitlearn _sklearndecompositionpca httpsscikitlearnorgstablemodulesgeneratedsklearndecompositionpcahtml pydl _pydlgoddardastroairtovac httppydlreadthedocsioenstableapipydlgoddardastroairtovachtmlpydlgoddardastroairtovac _pydlpydlutilsyanni httppydlreadthedocsioenstableapipydlpydlutilsyannyyannyhtml linetool _linetoolsspectraxspectrumdxspectrumd httpslinetoolsreadthedocsioenlatestxspectrumdhtml sphinx _sphinx httpswwwsphinxdocorgenmasterindexhtml _restructuredtext httpdocutilssourceforgenetrsthtml _googleformat docstr httpssphinxcontribnapoleonreadthedocsioenlatestexample_googlehtmlexamplegoogl _numpyformat docstr httpssphinxcontribnapoleonreadthedocsioenlatestexample_numpyhtmlexamplenumpi misc packag _bumpvers httpspypiorgprojectbumpvers _rclone httpsrcloneorg _pip httpspippypaioenst _anaconda httpswwwanacondacomproductsindividu _conda httpsdocscondaioprojectscondaenlatestindexhtml _virtualenv httpsvirtualenvpypaioenlatest _pdb httpsdocspythonorglibrarypdbhtml _ipythonemb httpsipythonreadthedocsioenstableapigeneratedipythonterminalembedhtmlfunct _pytest httpsdocspytestorgenlatest _shape httpsshapelyreadthedocsioenstablemanualhtml _scikitimag httpsscikitimageorg ginga _ginga httpsgingareadthedocsioenst _astroimag httpsgingareadthedocsioenstabledev_manualimage_wrappershtmlastroimag _ginga globalplugin httpsgingareadthedocsioenstabledev_manualdevelopershtmlwritingaglobalplugin pypeit _repo httpsgithubcompypeitpypeit _pypeitdevelopmentsuit httpsgithubcompypeitpypeitdevelopmentsuit _document httpspypeitreadthedocsioenlatest _submit issu httpsgithubcompypeitpypeitissu _pypeit devsuit googl drive httpsdrivegooglecomdrivefoldersohsibfjjmyf_jreatqyeifwuspshar email _joe hennawi joephysicsucsbedu _x prochaska xavierucolickorg misc _sdss bitmask httpswwwsdssorgdralgorithmsbitmask instrument det specaxi specflip spatflip namp gain rn darkcurr min sat nonlinear platescal bok_bc fals fals e gemini_flamingo fals fals e gemini_flamingo true fals e gemini_gmos_north_ev fals fals e fals fals e fals fals e gemini_gmos_north_ham fals fals e fals fals e fals fals e gemini_gmos_north_ham_n fals fals e fals fals e fals fals e gemini_gmos_south_ham fals fals e fals fals e fals fals e gemini_gnir true true e gtc_osiri fals fals e fals fals e keck_deimo fals fals e fals fals e fals fals e fals fals e fals fals e fals fals e fals fals e fals fals e keck_kcwi none fals none none none e keck_lris_blu fals fals e fals fals e keck_lris_blue_orig true fals e true fals e keck_lris_r fals fals e fals fals e keck_lris_red_mark true fals e keck_lris_red_orig fals fals e keck_mosfir fals fals e keck_nir true fals e keck_nirspec_low fals fals e lbt_luci fals fals e lbt_luci fals fals e lbt_modsb true fals e lbt_modsr fals fals e lbt_modsb true fals e lbt_modsr fals fals e ldt_deveni true fals none none e magellan_fir true fals e magellan_fire_long fals fals e magellan_mag true fals e mdm_osmos_mdmk true fals e mmt_binospec fals fals e fals fals e mmt_bluechannel fals fals none none e mmt_mmir fals fals e not_alfosc true fals none none e ntt_efosc fals fals e p_dbsp_blue true fals e p_dbsp_red fals fals e p_tspec true fals e shane_kast_blu fals fals e shane_kast_r fals fals e shane_kast_red_ret fals fals e soar_goodman_r fals fals none none e e tng_dolor fals fals e vlt_for fals fals e fals fals e vlt_sinfoni true fals e vlt_xshooter_nir fals fals e vlt_xshooter_uvb true true e vlt_xshooter_vi fals fals e wht_isis_blu fals fals e wht_isis_r fals fals e version hdu name obj type array type descript tilt_imag ndarray float primari imag data tilt_fullmask ndarray integ full imag bitmask tilt_detector detectorcontain detector datacontain bitmask allow defin set bit valu signifi string toggl interpret bit held numpyndarray_ exampl say your process imag want set set bit indic pixel part badpixel mask cosmic ray satur defin follow pypeitbitmask import bitmask bit bpmpixel part badpixel mask cosmicpixel contamin cosmic ray saturatedpixel satur image_bm bitmasklistbitskey descrlistbitsvalu note consist order dictionari keyword critic repeat classpypeitbitmaskbitmask instanc possibl objdict object automat maintain order provid keyword sinc python minimum requir version pypeit better yet defin deriv class pypeitbitmask import bitmask class imagebitmaskbitmask def __init__self bit bpmpixel part badpixel mask cosmicpixel contamin cosmic ray saturatedpixel satur superimagebitmask self__init__listbitskey descrlistbitsvalu image_bm imagebitmask either case see list bit bit number run image_bminfo bit bpm descript pixel part badpixel mask bit cosmic descript pixel contamin cosmic ray bit satur descript pixel satur image_bmbit bpm cosmic satur image_bmkey bpm cosmic satur defin numpyndarray_ hold mask valu imag pixel funcpypeitbitmaskbitmaskminimum_dtyp return smallest data type requir repres list defin bit maximum number bit defin assum imag img import numpi mask numpyzerosimgshap dtypeimage_bmminimum_dtyp assum boolean integ array identifi pixel mask turn mask bit follow maskcosmics_indx image_bmturn_onmaskcosmics_indx cosmic masksaturated_indx image_bmturn_onmasksaturated_indx satur make sure certain bit masknot_a_cosm image_bmturn_offmasknot_a_cosm cosmic form method array pass method alter instead alter bit return line form bmturn_onm flag short usag exampl find flag set singl valu image_bmflagged_bitsmask find list uniqu flag set pixel unique_flag numpysortnumpyuniquenumpyconcaten image_bmflagged_bitsb b numpyuniquemasktolist get boolean array select pixel one mask bit cosmics_indx image_bmflaggedmask flagcosm all_but_bpm_indx image_bmflaggedmask flagcosm satur any_flag image_bmflaggedmask construct mask array follow exampl masked_img numpymamaskedarrayimg maskimage_bmflaggedmask classpypeitbitmaskbitmask object defin programmat shown imagebitmask deriv class also defin read format file current option fit header read write method bitmask io use astropyiofitsheader_ object use imagebitmask class exampl astropyio import fit hdr fitshead image_bm imagebitmask image_bmto_headerhdr hdr bit bpm pixel part badpixel mask bit cosmic pixel contamin cosmic ray bit satur pixel satur copy_bm bitmaskfrom_headerhdr version obj key obj type array type descript box_chi ndarray float reduc chi model fit spectral pixel box_count ndarray float boxcar flux count box_counts_ivar ndarray float invers varianc optim extract flux use modelivar imag count box_counts_nivar ndarray float boxcar extract nois varianc skyread nois count box_counts_sig ndarray float boxcar extract nois ivar count box_counts_sig_det ndarray float boxcar extract detector nois count box_counts_ski ndarray float boxcar extract sky count box_flam ndarray float boxcar flux ergscmang box_flam_ivar ndarray float boxcar flux invers varianc e ergscmang box_flam_sig ndarray float boxcar flux uncertainti e ergscmang box_frac_us ndarray float fraction pixel object profil subimag use extract box_mask ndarray bool mask boxcar extract flux truegood box_npix ndarray float number pixel use boxcar extract fraction box_radiu float size boxcar radiu pixel box_wav ndarray float boxcar wavelength vacuum angstrom dec float declin j decim degre det int integ detector number detector detectorcontain detector datacontain ech_fracpo float float sync echel fraction locat object slit ech_nam str name object echel data name order number omit give uniqu name per object ech_objid int integ object id echel data object given index order appear increas left right one base ech_ord int integ physic echel order ech_orderindx int integ order indx analog slitid echel zero base flex_shift_glob float global shift spectrum correct spectralflexur pixel base sky spectrum atth center slit flex_shift_loc float local shift spectrum correct spectralflexur pixel small correct toth global valu base sky spectrumextract near object flex_shift_tot float total shift spectrum correct spectralflexur pixel sum global andloc flex_shift fwhm float spatial fwhm object pixel fwhmfit ndarray spatial fwhm across detector pixel maskdef_extract bool boolean indic forc extract expect locat slitmask design maskdef_id int integ slitmask definit id maskdef_objnam str name object slitmask definit name str name object follow name model objid int integ object id multislit data object given index slit appear increas left right one base objtyp str pypeit type object standard scienc opt_chi ndarray float reduc chi model fit spectral pixel opt_count ndarray float optim flux count opt_counts_ivar ndarray float invers varianc optim extract flux use modelivar imag count opt_counts_nivar ndarray float optim extract nois varianc skyread nois count opt_counts_sig ndarray float optim extract nois ivar count opt_counts_sig_det ndarray float optim extract detector nois count opt_counts_ski ndarray float optim extract sky count opt_flam ndarray float optim flux e ergscmang opt_flam_ivar ndarray float optim flux invers varianc e ergscmang opt_flam_sig ndarray float optim flux uncertainti e ergscmang opt_frac_us ndarray float fraction pixel object profil subimag use extract opt_mask ndarray bool mask optim extract flux truegood opt_wav ndarray float optim wavelength vacuum angstrom pypelin str name pypeit pipelin mode ra float right ascens j decim degre slitid int integ pypeit slit id aka spat_id spat_fracpo float float fraction locat object slit spat_pixpo float float spatial locat trace detector pixel halfway trace_spat ndarray float object trace along spec spatial pixel vel_corr float relativist veloc correct wavelength vel_typ str type heliocentr correct wave_rm float float rm pix wavelength solut slit hand_extract_flag bool boolean indic forc extract locat provid user maskwidth float float size unit fwhm region use local sky subtract trace_spec ndarray intnumpyinteg array pixel along spectral direct codeblock consol pypeit_identifi h usag pypeit_identifi h lamp lamp wmin wmin wmax wmax slit slit det det rmstol rmstol fwhm fwhm pixtol pixtol test force_sav arc_fil slits_fil launch pypeit identifi tool display extract masterarc load linelistrun master folder posit argument arc_fil pypeit masterarc file slits_fil pypeit masterslit file option argument h help show help messag exit lamp lamp comma separ list calibr lamp space default none solut load wavelength solut arc_fil exist default fals wmin wmin minimum wavelength rang default wmax wmax maximum wavelength rang default slit slit slit load wavelength calibr default det det detector index default rmstol rmstol rm toler default fwhm fwhm fwhm line find default pixtol pixtol pixel toler auto id default test unit test default fals force_sav save solut despit rm default fals codeblock consol pypeit_flux_setup h usag pypeit_flux_setup h objmodel qsostarpoli sci_path setup perform flux calibr posit argument sci_path path scienc folder option argument h help show help messag exit objmodel qsostarpoli scienc object model use tellur fit option qso quasar might need set redshift bal_wv_min_max tell file star star need set star_typ star_ra star_dec star_mag tell_fil poli type object might need set fit_wv_min_max norder tell_fil codeblock consol pypeit_coadd_dspec h usag pypeit_coadd_dspec h file file det det obj obj show debug_offset peak basenam basenam spec_samp_fact spec_samp_fact spat_samp_fact spat_samp_fact debug coadd spectra produc pypeit option argument h help show help messag exit file file file guid coadd default none det det coadd data detector index default none obj obj object name lieu extens eg specd file name specd_j_gnirs_martfit use obj j default none show show reduct step equival option run pypeit default fals debug_offset show qa plot use debug automat offset determin default fals peak show peak found object find algorithm default fals basenam basenam basenam file save paramet specd specd default none spec_samp_fact spec_samp_fact make wavelength grid finer spec_samp_fact coarser spec_samp_fact sampl factor ie unit spec_samp_fact pixel default spat_samp_fact spat_samp_fact make spatial grid finer spat_samp_fact coarser spat_samp_fact sampl factor ie unit spat_samp_fact pixel default debug show debug plot default fals codeblock consol pypeit_install_ql_mast h usag pypeit_install_ql_mast h zip zip ql_path ql_path odir odir rmzip script instal pypeit ql master file option argument h help show help messag exit zip zip zip file full ql_master directori download pypeit googl drive default none ql_path ql_path exist directori symlink ql_master directori default none odir odir directori extract zip file ignor direct path provid use ql_path default userswestfallworkpackagespypeitdoc rmzip remov download zip file default fals codeblock consol pypeit_show_wvcalib h usag pypeit_show_wvcalib h file slit show result wavelength calibr posit argument file wavecalib json file slit option argument h help show help messag exit codeblock consol pypeit_show_dspec h usag pypeit_show_dspec h list exten exten obj obj extract extract flux file show spectrum posit argument file spectral file option argument h help show help messag exit list list extens default fals exten exten fit extens default obj obj object name lieu extens eg spatslitdet default none extract extract extract method default opt box opt default opt flux show flux spectrum default fals codeblock consol pypeit_chk_wavecalib h usag pypeit_chk_wavecalib h master_fil print qa wavelength calib screen posit argument master_fil pypeit masterwavecalib file eg masterwavecalib_a__fit option argument h help show help messag exit codeblock consol pypeit_lowrdx_skyspec h usag pypeit_lowrdx_skyspec h lowrdx_ski new_fil print info slit specd file posit argument lowrdx_ski lowredux sky spectrum idl save file new_fil pypit fit sky spectrum option argument h help show help messag exit codeblock consol pypeit_ql_keck_mosfir h usag pypeit_ql_keck_mosfir h spec_samp_fact spec_samp_fact spat_samp_fact spat_samp_fact flux mask_cr writefit no_gui box_radiu box_radiu offset offset redux_path redux_path master_dir master_dir emb show full_rawpath file file script produc quicklook pypeit reduct pair mosfir file ab posit argument full_rawpath full path raw file file list frame ie imgfit imgfit option argument h help show help messag exit spec_samp_fact spec_samp_fact make wavelength grid finer spec_samp_fact coarser spec_samp_fact sampl factor ie unit spec_samp_fact pixel default spat_samp_fact spat_samp_fact make spatial grid finer spat_samp_fact coarser spat_samp_fact sampl factor ie unit spat_samp_fact pixel default flux option multipli sensit function obtain flux calibr spectrum default fals mask_cr option turn cosmic ray reject improv reduct doubl runtim default fals writefit write ouput fit file default fals no_gui display result gui default fals box_radiu box_radiu set radiu boxcar extract default none offset offset overrid automat offset determin header offset pixel option use standard dither pattern execut offset convent neg offset move neg b imag left default none redux_path redux_path locat reduct output store default userswestfallworkpackagespypeitdoc master_dir master_dir locat pypeit master file use reduct default none emb upon complet emb ipython shell default fals show show reduct step equival option run pypeit default fals codeblock consol pypeit_tellfit h usag pypeit_tellfit h objmodel qsostarpoli r redshift g tell_grid p pca_fil tell_fil debug plot par_outfil par_outfil specdfil tellur correct spectrum posit argument specdfil specd file use tellur correct option argument h help show help messag exit objmodel qsostarpoli scienc object model use fit option qso quasar might need set redshift bal_wv_min_max tell file star star need set star_typ star_ra star_dec star_mag tell_fil poli type object might need set fit_wv_min_max norder tell_fil r redshift redshift redshift specifi redshift use objmodel qso option g tell_grid tell_grid tell_grid tellur grid download giant grid file pypeitdatatellur folder pass want overwrit default tell_grid set via spectrograph file p pca_fil pca_fil pca_fil quasar pca fit file full path default file qso_pca__fit store pypeitdatatellur folder chang fit file make sure set pca_low pca_upp tell_fil specifi wavelength coverag model default pca_low pca_upp tell_fil tell_fil tell_fil configur file chang default tellur paramet note paramet file overwritten set argument termin tell_fil option requir tell file follow format tellur objmodel qso redshift bal_wv_min_max tellur objmodel star star_typ star_mag tellur objmodel poli polyord fit_wv_min_max debug show debug plot plot show tellur correct spectrum par_outfil par_outfil name output file save paramet use fit codeblock consol pypeit_coadd_datacub h usag pypeit_coadd_datacub h det det file read array specd file convert datacub posit argument file filenamecoaddd file option argument h help show help messag exit det det detector default overwrit overwrit exist filesdirectori default fals codeblock consol pypeit_coadd_dspec h usag pypeit_coadd_dspec h debug show par_outfil par_outfil test_spec_path test_spec_path coaddd_fil coadd spectra produc pypeit posit argument coaddd_fil file guid coad process file must follow format coaddd coaddfileoutput_filenamefit sensfuncfil sensfuncfit requir echel coaddd read specdfil objid specdfil objid specdfil objid coaddd end coaddd readend block look like coaddd read specdfil objid specdfil specdfil coaddd end coaddd block must either two column list specdfil objid specifi singl objid specdfil first line specdfil full path pypeit specdfil objid object identifi determin objid inspect specd_txt file run pypeit_show_dspec specdfil list option argument h help show help messag exit debug show debug plot show show qa coad process par_outfil par_outfil output save paramet test_spec_path test_spec_path path test codeblock consol pypeit_chk_flat h usag pypeit_chk_flat h type type try_old master_fil display masterflat imag ginga viewer posit argument master_fil pypeit masterflat file eg masterflat_a__fit option argument h help show help messag exit type type flat display must one pixel illum default try_old attempt load old datamodel version crash may ensu default fals codeblock consol pypeit_flux_calib h usag pypeit_flux_calib h debug par_outfil flux_fil flux calibr spectra produc pypeit posit argument flux_fil file guid flux process file must follow format flux read specdfil sensfil specdfil flux end flux read specdfil sensfil specdfil sensfil specdfil sensfil flux end must specifi either sensfil specdfil first line creat two column list specdfil correspond sensfil option argument h help show help messag exit debug show debug plot par_outfil output save paramet codeblock consol pypeit_chk_edg h usag pypeit_chk_edg h chname chname mpl try_old trace_fil display masteredg imag trace data posit argument trace_fil pypeit master trace file eg masteredges_a__aafitsgz option argument h help show help messag exit chname chname channel name imag ginga default mtrace mpl use matplotlib window instead ginga show trace default fals try_old attempt load old datamodel version crash may ensu default fals codeblock consol pypeit_setup h usag pypeit_setup h spectrograph r root e extens output_path c cfg_split b v verbos pars data file construct pypeit file prepar reduct use run_pypeit option argument h help show help messag exit spectrograph spectrograph spectrograph valid spectrograph identifi bok_bc gemini_flamingo gemini_flamingo gemini_gmos_north_ev gemini_gmos_north_ham gemini_gmos_north_ham_n gemini_gmos_south_ham gemini_gnir gtc_osiri keck_deimo keck_hires_r keck_kcwi keck_lris_blu keck_lris_blue_orig keck_lris_r keck_lris_red_mark keck_lris_red_orig keck_mosfir keck_nir keck_nirspec_low lbt_luci lbt_luci lbt_modsb lbt_modsr lbt_modsb lbt_modsr ldt_deveni magellan_fir magellan_fire_long magellan_mag mdm_osmos_mdmk mmt_binospec mmt_bluechannel mmt_mmir not_alfosc ntt_efosc p_dbsp_blue p_dbsp_red p_tspec shane_kast_blu shane_kast_r shane_kast_red_ret soar_goodman_r tng_dolor vlt_for vlt_sinfoni vlt_xshooter_nir vlt_xshooter_uvb vlt_xshooter_vi wht_isis_blu wht_isis_r default none r root root root root search data file provid top level directori eg datakast search string wildcard eg datakastb use extens option set type file search default current work directori default userswestfallworkpackagespypeitdoc e extens extens extens file extens compress indic eg gz requir default fit output_path output_path output_path path toplevel output directori default userswestfallworkpackagespypeitdoc overwrit overwrit exist filesdirectori default fals c cfg_split cfg_split cfg_split gener pypeit file folder input configur write uniqu configur identif use otherwis provid list configur letter eg ab bde e default none b background includ backgroundpair column user edit default fals v verbos verbos verbos level verbos default codeblock consol pypeit_show_dspec h usag pypeit_show_dspec h list det det showmask removetrac emb ignore_extract_mask sensfunc sensfunc channel channel prefix prefix no_clear file display sky subtract specd imag ginga viewer run scienc folder posit argument file pypit specd file option argument h help show help messag exit list list extens default fals det det detector number default showmask overplot mask pixel default fals removetrac overplot trace skysub sky_resid resid channel default fals emb upon complet emb ipython shell default fals ignore_extract_mask ignor extract mask default fals sensfunc sensfunc pass sensfunc display skysubtract imag flux calibr default none channel channel show subset channel index eg default none prefix prefix append channel name let one set default no_clear clear exist tab default true codeblock consol run_pypeit h usag run_pypeit h v verbos r redux_path detector c pypeit_fil mpypeit python spectroscop data reduct pipelin vdevgddbdm avail spectrograph includ bok_bc gemini_flamingo gemini_flamingo gemini_gmos_north_ev gemini_gmos_north_ham gemini_gmos_north_ham_n gemini_gmos_south_ham gemini_gnir gtc_osiri keck_deimo keck_hires_r keck_kcwi keck_lris_blu keck_lris_blue_orig keck_lris_r keck_lris_red_mark keck_lris_red_orig keck_mosfir keck_nir keck_nirspec_low lbt_luci lbt_luci lbt_modsb lbt_modsr lbt_modsb lbt_modsr ldt_deveni magellan_fir magellan_fire_long magellan_mag mdm_osmos_mdmk mmt_binospec mmt_bluechannel mmt_mmir not_alfosc ntt_efosc p_dbsp_blue p_dbsp_red p_tspec shane_kast_blu shane_kast_r shane_kast_red_ret soar_goodman_r tng_dolor vlt_for vlt_sinfoni vlt_xshooter_nir vlt_xshooter_uvb vlt_xshooter_vi wht_isis_blu wht_isis_r posit argument pypeit_fil pypeit reduct file must pypeit extens option argument h help show help messag exit v verbos verbos verbos verbos level none hdrframetyp use file header instumentspecif keyword determin type frame r redux_path redux_path redux_path path directori reduct advis test do_not_reuse_mast load previous gener masterfram even one made run show show reduct step via plot block execut click output ginga requir remot control ginga session via ginga modulesrcslitwavelength overwrit overwrit exist filesdirectori detector detector detector detector limit reduct output file exist use output input detector replac c calib_onli run calibr codeblock consol pypeit_obslog h usag pypeit_obslog h r root k c column b bad_typ g sort e extens output_path f file spec construct observ log set file provid spectrograph use pypeitmetadata posit argument spec valid spectrograph identifi bok_bc gemini_flamingo gemini_flamingo gemini_gmos_north_ev gemini_gmos_north_ham gemini_gmos_north_ham_n gemini_gmos_south_ham gemini_gnir gtc_osiri keck_deimo keck_hires_r keck_kcwi keck_lris_blu keck_lris_blue_orig keck_lris_r keck_lris_red_mark keck_lris_red_orig keck_mosfir keck_nir keck_nirspec_low lbt_luci lbt_luci lbt_modsb lbt_modsr lbt_modsb lbt_modsr ldt_deveni magellan_fir magellan_fire_long magellan_mag mdm_osmos_mdmk mmt_binospec mmt_bluechannel mmt_mmir not_alfosc ntt_efosc p_dbsp_blue p_dbsp_red p_tspec shane_kast_blu shane_kast_r shane_kast_red_ret soar_goodman_r tng_dolor vlt_for vlt_sinfoni vlt_xshooter_nir vlt_xshooter_uvb vlt_xshooter_vi wht_isis_blu wht_isis_r option argument h help show help messag exit r root root root root search data file provid top level directori eg datakast search string wildcard eg datakastb use extens option set type file search default current work directori default userswestfallworkpackagespypeitdoc k key produc log simpli list pypeitspecif metadata key avail spectrograph associ header card metadata key header card none simpl map keyword header card default fals c column column column commasepar list column includ output tabl column must valid pypeit metadata keyword specif spectrograph run pypeit_obslog k argument see valid list addit valid keyword directori filenam frametyp framebit setup calib calibbit column collect pypeit metadata tabl includ pypeit column includ pypeit file default pypeit b bad_fram clean output bad frame reduc pypeit default fals bad_typ bad_typ bad_typ dictat frame could given valid type treat option keep includ output rm remov output includ frame unknown type output ie frame determin type exclud default keep g group use option determin frame type default script group frame expect configur calibr group add default combin group default true interact metadata tabl creat start embed ipython session use interact tabl astropyt call fitstbl directli default fals sort sort sort metadata keyword pypeitspecif use sort output tabl default mjd e extens extens extens file extens compress indic eg gz requir default fit output_path output_path output_path path toplevel output directori default userswestfallworkpackagespypeitdoc overwrit overwrit exist filesdirectori default fals f file file file name ascii output file lead directori path strip use set output directori none tabl print stdout set default file set spectrographobslog note file written also includ option emb interact tabl write tabl use astropytabletablewrit method embed ipython session tabl alway written ascii format use formatasciifixed_with call astropytabletablewrit default none codeblock consol pypeit_skysub_region h usag pypeit_skysub_region h det det f file display raw scienc imag interact defin sky region use gui run folder pypeit file posit argument file pypeit file option argument h help show help messag exit det det detector default overwrit overwrit exist filesdirectori default fals initi use initi slit edg default fals f flexur use flexur correct slit edg default fals standard list standard star well default fals codeblock consol pypeit_chk_for_calib h usag pypeit_chk_for_calib h spectrograph e extens save_setup root script check calibr posit argument root file pathroot eg datakastb option argument h help show help messag exit spectrograph spectrograph spectrograph valid spectrograph identifi bok_bc gemini_flamingo gemini_flamingo gemini_gmos_north_ev gemini_gmos_north_ham gemini_gmos_north_ham_n gemini_gmos_south_ham gemini_gnir gtc_osiri keck_deimo keck_hires_r keck_kcwi keck_lris_blu keck_lris_blue_orig keck_lris_r keck_lris_red_mark keck_lris_red_orig keck_mosfir keck_nir keck_nirspec_low lbt_luci lbt_luci lbt_modsb lbt_modsr lbt_modsb lbt_modsr ldt_deveni magellan_fir magellan_fire_long magellan_mag mdm_osmos_mdmk mmt_binospec mmt_bluechannel mmt_mmir not_alfosc ntt_efosc p_dbsp_blue p_dbsp_red p_tspec shane_kast_blu shane_kast_r shane_kast_red_ret soar_goodman_r tng_dolor vlt_for vlt_sinfoni vlt_xshooter_nir vlt_xshooter_uvb vlt_xshooter_vi wht_isis_blu wht_isis_r default none e extens extens extens file extens compress indic eg gz requir default fit save_setup toggl remov setup_fil folder file default fals codeblock consol pypeit_compare_ski h usag pypeit_compare_ski h exten exten optim scale_us scale_us test file skyfil compar extract sky spectrum archiv sky model maintain pypeit posit argument file specd spectral file skyfil archiv pypeit sky file eg paranal_skyfit option argument h help show help messag exit exten exten fit extens default none optim show optim default boxcar default fals scale_us scale_us scale user spectrum factor default test load file show plot default fals codeblock consol pypeit_show_arxiv h usag pypeit_show_arxiv h det det file show archiv arc spectrum locat pypeitdataarc_liensreid_arxiv posit argument file arxiv filenam eg gemini_gmos_r_hamfit option argument h help show help messag exit det det detector number default codeblock consol pypeit_install_tellur h usag pypeit_install_tellur h path path script instal pypeit tellur file option argument h help show help messag exit path path path directori telfit file download pypeit googl drive tellur folder default userswestfallworkpackagespypeitdoc codeblock consol pypeit_trace_edg h usag pypeit_trace_edg h f pypeit_fil trace_fil g group detector spectrograph b bin p redux_path master_dir debug show trace slit edg option argument h help show help messag exit f pypeit_fil pypeit_fil pypeit_fil pypeit reduct file default none trace_fil trace_fil trace_fil imag trace default none g group group group provid pypeit file use trace imag calibr group none use first calibr group default none detector detector detector analyz specifi detector otherwis analyz detector select pypeit file provid default none spectrograph spectrograph spectrograph valid spectrograph identifi use provid file directli bok_bc gemini_flamingo gemini_flamingo gemini_gmos_north_ev gemini_gmos_north_ham gemini_gmos_north_ham_n gemini_gmos_south_ham gemini_gnir gtc_osiri keck_deimo keck_hires_r keck_kcwi keck_lris_blu keck_lris_blue_orig keck_lris_r keck_lris_red_mark keck_lris_red_orig keck_mosfir keck_nir keck_nirspec_low lbt_luci lbt_luci lbt_modsb lbt_modsr lbt_modsb lbt_modsr ldt_deveni magellan_fir magellan_fire_long magellan_mag mdm_osmos_mdmk mmt_binospec mmt_bluechannel mmt_mmir not_alfosc ntt_efosc p_dbsp_blue p_dbsp_red p_tspec shane_kast_blu shane_kast_r shane_kast_red_ret soar_goodman_r tng_dolor vlt_for vlt_sinfoni vlt_xshooter_nir vlt_xshooter_uvb vlt_xshooter_vi wht_isis_blu wht_isis_r default none b bin bin bin imag bin spectral spatial direct use provid file directli default default none p redux_path redux_path redux_path path toplevel output directori default current work directori default none master_dir master_dir master_dir name directori output path master file rel toplevel directori default master overwrit overwrit exist filesdirectori default fals debug run debug mode default fals show show stage trace refin new code default fals codeblock consol pypeit_qa_html h usag pypeit_qa_html h qapath qapath pypeit_fil type script build html file pypit qa posit argument pypeit_fil pypit file type qa type mf exp option argument h help show help messag exit qapath qapath path qa folder includ qa default qa codeblock consol pypeit_ql_mo h usag pypeit_ql_mo h b box_radiu det ignore_head user_pixflat user_pixflat slit_spat slit_spat spectrograph full_rawpath arc flat scienc script run pypeit quicklook set mo file posit argument spectrograph name spectograph eg shane_kast_blu full_rawpath full path raw file arc arc frame filenam flat flat frame filenam scienc scienc frame filenam option argument h help show help messag exit b box_radiu box_radiu box_radiu set radiu boxcar extract arcsec default none det det det detector number use slit_spat default ignore_head ignor bad header default fals user_pixflat user_pixflat use usersuppli pixel flat eg keck_lris_blu default none slit_spat slit_spat reduc slit detector detspat_id eg default none codeblock consol pypeit_multislit_flexur h usag pypeit_multislit_flexur h clobber debug flex_fil outroot calcul appli flexur correct spectra produc pypeit posit argument flex_fil file guid flexur correct multislit mode file must follow format flexur read specdfil specdfil flexur end outroot output fileroot flexur fit save fit option argument h help show help messag exit clobber clobber output file debug show debug plot codeblock consol pypeit_sensfunc h usag pypeit_sensfunc h algorithm uvisir multi multi outfil sens_fil debug par_outfil par_outfil specdfil comput sensit function posit argument specdfil specd file standard use comput sensit function option argument h help show help messag exit algorithm uvisir overrid default algorithm comput sensit function note possibl set algorithm simultan use sen file sens_fil option use sen file set algorithm via sensfunc algorithm ir algorithm option uvi use data lambda detail model tellur absorpt correct atmospher extinct ir use data lambbda perform joint fit sensit function tellur absorpt use hitran model multi multi list detector number splice togeth instrument multipl detector arrang spectral direct eg multi note possibl set multi simultan use sen file sens_fil option use sen file set multi_spec_det param via sensfunc multi_spec_det outfil outfil outfil output file sensit function specifi sensit function written standard filenam current work directori ie standard specd file name specd_bfeige_kastb_foofit sensfunc written sens_bfeige_kastb_foofit qa file also written sens_specd_bfeige_kastb_foo_qapdf file show throughput plot sens_specd_bfeige_kastb_foo_throughputpdf extens qa throughput use outfil provid fit trim filenam sens_fil sens_fil sens_fil configur file sensit function paramet debug show debug plot par_outfil par_outfil name output file save paramet use fit codeblock consol pypeit_collate_d h usag pypeit_collate_d h specd_fil specd_fil par_outfil par_outfil outdir outdir toler toler match match dry_run archive_dir archive_dir pypeit_fil pypeit_fil exclude_slit_bm exclude_slit_bm exclude_serendip input_fil fluxcoadd multipl spectra multipl night prepar directori koa posit argument input_fil option file guid collat process paramet file overidden command line file must follow format collat toler toler outdir directori place output file archive_root directori archiv file pypeit_fil pypeit file includ archiv file exclude_slit_trace_bm slit type exclud exclude_serendip set serendipit object skip match_us whether match use pixel radec dry_run set match display without process specd read path specd file wildcard allow end option argument h help show help messag exit specd_fil specd_fil one specd file fluxcoaddarch contain wildcard par_outfil par_outfil output save paramet outdir outdir path coad output file report file place default current directori toler toler toler use compar coordin object two object within distanc consid object match_us radec default angular distanc default unit arcsecond unit support astropycoordinatesangl usedeg hm match_us pixel float match match determin spectra match object must either pixel radec dry_run set script display match file object id flux coadd archiv archive_dir archive_dir path file metadata archiv pypeit_fil pypeit_fil pypeit file place archiv use archive_root specifi default look parent directori specd file exclude_slit_bm exclude_slit_bm list slit trace bitmask bit exclud exclude_serendip whether exclud serendip object collat codeblock consol pypeit_chk_dslit h usag pypeit_chk_dslit h specd_fil print info slit specd file posit argument specd_fil specd filenam option argument h help show help messag exit codeblock consol pypeit_chk_align h usag pypeit_chk_align h chname chname master_fil display masteralign imag trace data posit argument master_fil pypeit master align file eg masteralignment_a__fit option argument h help show help messag exit chname chname channel name imag ginga default align codeblock consol pypeit_ql_keck_nir h usag pypeit_ql_keck_nir h b box_radiu full_rawpath filea fileb run pypeit ab pair nire file posit argument full_rawpath full path raw file filea frame fileb b frame option argument h help show help messag exit b box_radiu box_radiu box_radiu set radiu boxcar extract default none codeblock consol pypeit_view_fit h usag pypeit_view_fit h list proc exten exten det det chname chname spectrograph file view fit file ginga posit argument spectrograph valid spectrograph identifi bok_bc gemini_flamingo gemini_flamingo gemini_gmos_north_ev gemini_gmos_north_ham gemini_gmos_north_ham_n gemini_gmos_south_ham gemini_gnir gtc_osiri keck_deimo keck_hires_r keck_kcwi keck_lris_blu keck_lris_blue_orig keck_lris_r keck_lris_red_mark keck_lris_red_orig keck_mosfir keck_nir keck_nirspec_low lbt_luci lbt_luci lbt_modsb lbt_modsr lbt_modsb lbt_modsr ldt_deveni magellan_fir magellan_fire_long magellan_mag mdm_osmos_mdmk mmt_binospec mmt_bluechannel mmt_mmir not_alfosc ntt_efosc p_dbsp_blue p_dbsp_red p_tspec shane_kast_blu shane_kast_r shane_kast_red_ret soar_goodman_r tng_dolor vlt_for vlt_sinfoni vlt_xshooter_nir vlt_xshooter_uvb vlt_xshooter_vi wht_isis_blu wht_isis_r file fit file option argument h help show help messag exit list list extens default fals proc process imag ie orient overscan subtract multipli gain use pypeitimagesbuildimag note detmosa work option default fals exten exten show fit extens raw file note proc mosaic work option default none det det detector number mosaic keck_deimo keck_lri imag set equal mosaic default chname chname name ginga tab default imag includ includelinksrst _develop pypeit develop procedur guidelin encourag anyon help us develop pypeit code base better suit need improv algorithm pleas follow list procedur guidelin particular pleas note refcodeconduct instal plan developalt pypeit code directli instal softwar via git fork github repo_ develop within fork perform pull request fork clone repo_ work directli codeblock consol git clone httpsgithubcompypeitpypeit cd pypeit pip instal e import use e option run pip chang made local instal immedi avail reexecut code instal core depend option one like pyqt pysid depend requir test build doc instal everyth might possibl need codeblock consol pip instal e testdocspysidepyqtshap also shortcut codeblock consol pip instal e dev warn quot instal line shell depend exampl need quot zshell quot caus error bash highli recommend develop instal clean environ see refinstal exampl either conda virtualenv isnt requir simplifi command assum environment variabl point instal pypeit repositori eg add follow zshrc bash_profil codeblock consol export pypeit_dirhomeworkpackagespypeit branch pypeit maintain two persist branch releas primari stabl version code nomin version code instal use pip_ version use produc latest documentation_ pull request branch done tag new releas code perform critic bug hotfix releas schedul decid core develop develop main develop version code stabl enough use may contain experiment unsupport code work progress edit code pleas creat new branch stem develop branch codeblock bash cd pypeit_dir git checkout develop git pull git checkout b my_new_featur develop principl commun main thing keep mind develop pypeit primari use endtoend reduct pipelin implic one keep mind default execut run_pypeit continu either critic error rais reduct complet direct interact code requir point unless explicitli request user pypeit interact compon execut via separ script input need user featur provid paramet prefer commandlin argument develop debug may need interact code use pdb_ ipythonembed_ howev instanc remov perform pull request success failur given procedur must assess via automat gener qualityassess figur prefer via script interact primari output file develop includ ad new spectrograph list spectrograph data pypeit reduc see advic refnew_spec develop includ ad new execut script see advic refnew_script featur develop pypeit unlik fulli independ develop activ featur like depend influenc outcom modul datareduct process lead import guidelin make sure branch alway uptod develop branch eg codeblock bash cd pypeit_dir git checkout develop git pull git checkout my_new_featur git merg noff develop consid effect simultan develop effort work vice versa exampl your work specif modul code depend resultdatamodel wavelengthcalibr modul commun find someon els develop modul howif theyr chang depend scale chang develop prioriti may need work minim merg conflict need immedi reworkrefactor new code your readi submit pr time core develop team need discuss merg order ensur smooth process primari mean commun develop pypeit develop slack httpspypeitslackcom_ contact x prochaska_ access test code pypeit two main method test verifi code base unit test dedic develop suit _devsuit develop suit compil larg suit data instrument support pypeit data use test pypeit success instrument anytim new featur develop access share googl teamdriv pleas contact x prochaska_ test pypeit use data googl drive clone pypeitdevelopmentsuite_ repositori codeblock bash git clone httpsgithubcompypeitpypeitdevelopmentsuitegit downloadsync drive repositori drive calib raw_data directori access sync consid use rclone_ warn raw_data directori current contain gb data run develop test produc gb outdat reduc data run test suit setup design develop purpos codeblock bash cd pypeitdevelopmentsuit pypeit_test develop warn current script execut outdat test test mostli reduct exampl data also includ flux flexur coad test execut time system depend expect take approx hour outdat test suit run parallel use option codeblock bash pypeit_test develop run test use two process run parallel thread number thread use reliabl depend amount memori avail tabl show worst case amount memori use per number thread thread memori use gb add new test develop suit add new data share googl drive raw_data test organ setup directori directori name instrument add new pypeit pypeitdevelopmentsuite_ repo pypeit_fil file name lower case name instrument setup exampl keck_deimos_g_m_pypeit desir add file pypeit_sensfunc pypeit_flux_calib pypeit_coadd_dspec pypeit_coadd_dspec pypeitdevelopmentsuite_ repo sensfunc_fil fluxing_fil coaddd_fil coaddd_fil respect edit test_setupspi pypeitdevelopmentsuite_ test_script follow instruct top file run full develop test suit complet test pass test_priority_fil updat new test file tell test script order run test optimum cpu util commit test_priority_list file ad repositori submit pull request _unittest unit test unit test locat pypeit_dirpypeittest directori run make sure pytest_ instal codeblock bash cd pypeit_dir pytest test fail run individu test eg test_wvcalibpi codeblock bash cd pypeit_dir pytest pypeitteststest_wvcalibpi note option allow insert interact debug command test test_wvcalibpi help determin test fail warn run test gener file ignor pleas add test file repositori process includ automat cleanup test function note also use pytest_ requir test depend instal eg via pip instal e test also possibl often prefer run test within isol environ use tox httpstoxreadthedocsioenlatest_ provid capabl easili run test differ version variou depend includ differ version python avail tox environ defin pypeit_dirtoxini list run tox run test default depend use default python codeblock bash cd pypeit_dir tox e test specifi python version someth like codeblock bash cd pypeit_dir tox e pytest test exampl main branch astropi github codeblock bash cd pypeit_dir tox e pytestastropydev similar dev depend configur numpi ginga linetool well unit test requir develop suite_ andor set cook data product expect result produc test pypeit specif data unit test skip appropri test function develop suite_ path defin cook directori relev path unit test take advantag developmentsuit data pypeit_dev must environment variabl point root directori develop suit data exampl includ follow line zshrc bash_profil file codeblock bash export pypeit_devhomeworkpackagespypeitdevelopmentsuit unit test use cook data pypeit must find directori call pypeit_devcook workflow typic pypeit develop workflow follow creat new branch stem develop branch codeblock bash cd pypeit_dir git checkout develop git pull git checkout b my_new_featur develop debug featur run unit test fix failur add new test test new featur andor modifi test accommod new featur codeblock bash cd pypeit_dir pytest prefer codeblock bash cd pypeit_dir tox e test test run access develop suite_ eg test load data first round test canshould run without cook output eg either delet move pypeit_devcook directori run develop suite_ fix failur codeblock bash cd pypeit_dev pypeit_test develop need build cook tar file eg replac xxxx increment current version codeblock bash cd pypeit_dev build_cook xxxx rerun debug test sure edit pypeit_dirpypeitteststest_cookedpi accept cook version codeblock bash cd pypeit_dir tox e test edit pypeit_dirchangesrst reflect key develop updat api documentation_ codeblock bash cd pypeit_dir update_doc make sure edit commit push remot repositori codeblock bash cd pypeit_dir git add u git commit final prep pr git push submit pull request pr httpsgithubcompypeitpypeitcompare_ unless otherwis request pr submit develop branch pull request accept requir youv submit pull request well review pr provid comment code minimum requir accept pr follow pr introduc new instrument see refnew_spec pypeit support long term instrument must ad develop suite_ mean raw data ad googl drive relev test ad pypeit_devpypeit_test script via pr pypeitdevelopmentsuite_ new instrument includ list instrument test execut pypeit_test develop code check run github see check tab pr remot repositori must pass post success report result execut unit tests_ develop suite_ also upload cook data teamdriv eg codeblock bash rclone copyto cooked_pypeit_dev_vxxxxtargz gdvcooked_pypeit_dev_vxxxxtargz figur figurestests_successpng exampl post success test hotfix test circumv discret core develop case hotfix obvious correct new method class must least minim document minim document mean method docstr give least one sentenc descript purpos method complet list requir option argument mean descript return object document expect adher sphinx_ syntax ie docstr restructuredtext_ accept googleformat docstrings_ numpyformat docstrings_ former prefer docstr chang exist method alter must modifi uptod accur spuriou comment code use debug test fine pleas let us know want kept ad relev comment someth like todo keep around begin comment block otherwis like remov comment code come across unsupport code code experiment still work progress minim much reason relev code block clearli mark experiment wip execut main pypeit execut run_pypeit least two review must accept code tag protocol core develop team regularli tag releas version repositori tag releas version code trigger anytim develop branch code merg releas branch tag process follow regular pypeit telecon pypeit develop slack core develop team decid merg develop branch releas branch creat develop typic call stage pr httpsgithubcompypeitpypeitcompare_ issu merg stage releas merg must meet pull request accept requirements_ merg new branch develop howev typic unit developmentsuit test need run develop alreadi pass test stage make substant chang code codeblock bash cd pypeit_dir git checkout develop git pull git checkout b stage merg master code tag follow codeblock bash cd pypeit_dir edit changesrst reflect end develop phase vi changesrst git add u git commit tag chang creat tag form xyz use exampl current autogener version found pypeitversionpi tag use everyth front dev string current version git tag push chang new tag git push git push tag pr accept stage merg releas hotfix branch delet develop branch tag releas pip_ instal codeblock bash make sure recent version twine instal pip instal twine upgrad construct pip distribut python setuppi sdist bdist_wheel test upload twine upload repositori pypeittest dist upload time keep twine upload repositori pypeit dist upload need pypirc file look like codeblock ini distutil indexserv pypeit pypeittest pypeit repositori httpsuploadpypiorglegaci usernam pypeit password ask pypeittest repositori httpstestpypiorglegaci usernam pypeit password ask new version upload pip_ new pr automat gener condaforgepypeitfeedstock httpsgithubcomcondaforgepypeitfeedstock_ repositori follow commit checklist merg pr trigger releas new pypeit packag condaforg inform manual updat condaforg pypeit packag see refconda_forg need advanc version code new develop version merg develop new releas codeblock bash cd pypeit_dir branch releas git checkout releas git pull git checkout b devup edit changesrst begin new dev section vi changesrst git add u git commit chang addit new commit caus setuptools_scm automat increment version base last tag push form next_versiondevdistancescm letterrevis hash see setuptools_scm document httpsgithubcompypasetuptools_scm_ detail final quick pr issu pull devup develop pull request accept requirements_ alreadi satisfi mean pr quickli accept merg doi wish gener new doi code simpl gener new releas github httpshelpgithubcomengithubadministeringarepositoryaboutreleases_ updat doi readmemd document develop mutual agre upon kyle westfal j xavier prochaska joseph hennawi last modifi jun addit develop link move rst file dev directori developerspecif doc toctre maxdepth flow intern metadata new_script report conda_forg flux includ includelinksrst _slitmask_ids_report slitmask id assign miss slit version histori version author date pypeit debora pelliccia oct dev debora pelliccia nov dev debora pelliccia jan dev debora pelliccia oct dev basic procedur use assign slitmask id slit current avail keckdeimo keckmosfir part gener slit trace procedur describ refslit_trac procedur id assign ad miss slit slitmask id assign primarili perform funcpypeitedgetraceedgetracesetmaskdesign_match function match slit edg trace pypeit slit edg predict use slitmask design inform store observ predict gener funcpypeitspectrographsspectrographspectrographget_maskdef_slitedg deimo function use optic model convert slit posit millimet pixel done funcpypeitspectrographskeck_deimoskeckdeimosspectrographmask_to_pixel_coordin reli exist pregener detector map pre postgrat call amap bmap respect mosfir predict slit edg gener simpli use follow inform number slit length fact mosfir slitmask alway construct use csu configur slit unit fix length multipl csu use togeth form longer slit function funcpypeitedgetraceedgetracesetmaskdesign_match assign slit maskdef_id correspond dslitid slit_numb deimo mosfir slitmask design respect moreov funcpypeitedgetraceedgetracesetmaskdesign_match use predict slit edg posit add slit trace found imag overlap align slit pypeit use predict slitmask design add miss slit edg abl trace overlap align slit often present deimo observ otherwis would identifi refslit_trac one larg align slit ie width larger avoid edg overlap slit cross edg place adjac one applic perform slitmask id assign use_maskdesign flag refpypeit_paredgetracepar keyword must true default deimo except longmirr lvm mask use mosfir except longslit mask use three refpypeit_paredgetracepar keyword control slitmask id assign maskdesign_maxsep maskdesign_sigrej maskdesign_step access maskdef_id record slit classpypeitslittraceslittraceset datamodel written disk multiextens fit file prefix masterslit addit deimo mosfir second astropyiofitsbintablehdu_ written disk contain slitmask design inform see refmaster_slit descript provid inform way visual moreov maskdef_id assign slit found full reduct pypeit see refstep_by_step run pypeit_chk_dslit sciencespecd_xxxfit list slit associ maskdef_id test pypeitdeimo pd requir pd state ingest slitmask inform data structur requir pd state use mask inform determin initi guess slit posit requir pd state deal overlap align box exceed pypeitmosfir pm requir pm state ingest slitmask inform data structur requir pm state use slitmask inform determin initi guess slit posit pypeit meet requir demonstr three test pypeitteststest_maskdesign_matchingpi run test codeblock bash cd pypeittest pytest test_maskdesign_matchingpytest_maskdef_id w ignor pytest test_maskdesign_matchingpytest_add_missing_slit w ignor pytest test_maskdesign_matchingpytest_overlapped_slit w ignor test requir download pypeit refdevsuit defin pypeit_dev environment variabl point relev directori test run use one instrument setup deimo one detector first test pytest test_maskdesign_matchingpytest_maskdef_id w ignor algorithm test repeat twice deimo dataset mosfir dataset follow load inform rel specif instrument deimo mosfir load refpypeit_parinstrumentspecif default configur paramet select detector build trace imag use three flatfield imag specif dataset refdevsuit updat instrument configur paramet includ configur specif use instrument setup among other step set use_maskdesign flag refpypeit_paredgetracepar keyword true run slit trace procedur use classpypeitedgetraceedgetraceset slitmask id assign perform record maskdef_id associ slit classpypeitslittraceslittraceset datamodel read maskdef_id first last slit select detector check correspond expect valu expect valu deimo determin previous reduc dataset alreadi exist deep idlbas pipelin optim match slit found deimo detector slitmask inform expect valu mosfir determin visual inspect second test pytest test_maskdesign_matchingpytest_add_missing_slit w ignor algorithm test repeat twice deimo dataset mosfir dataset follow load inform rel specif instrument deimo mosfir load refpypeit_parinstrumentspecif default configur paramet select detector build trace imag use three flatfield imag specif dataset refdevsuit updat instrument configur paramet includ configur specif use instrument setup among other step set use_maskdesign flag refpypeit_paredgetracepar keyword true run stepbystep line slit trace procedur perform classpypeitedgetraceedgetraceset enabl add extra step remov edg line found slit trace procedur continu remain step classpypeitedgetraceedgetraceset includ funcpypeitedgetraceedgetracesetmaskdesign_match add miss slit perform slitmask id assign check pixel posit trace previous remov recov third test pytest test_maskdesign_matchingpytest_overlapped_slit w ignor perform deimo data algorithm test ident first test use differ deimo dataset show overlap align slit algorithm check total number slit number align slit expect expect number determin visual inspect observ test includ pypeit refunittest check perform develop everi new version code pypeit team care test dataset test welcom includ includelinksrst _deimos_wavecalib deimo wavelength calibr version histori version author date pypeit debora pelliccia feb dev basic procedur use wavelength calibr deimo spectra follow pypeit gener procedur describ refwave_calib user choos among three refwave_calibautom algorithm refwave_calibbyhand approach perform wavelength calibr refwave_calibful templat prefer algorithm deimo set default one procedur deimo wavelength calibr primarili perform funcpypeitcorewavecalautoidfull_templ function requir exist archiv calibr arc spectrum ie templat store pypeitdataarc_linesreid_arxiv deimo creat use procedur describ refconstruct_templ five templat one per grate span wide rang wavelength keck_deimos_zdfit aa keck_deimos_gfit aa keck_deimos_zdfit aa keck_deimos_gfit aa keck_deimos_bfit aa refwave_calibful templat algorithm perform first crosscorrel observ arc spectrum relev archiv templat obtain rough estim shift wavelength input arc spectrum divid snippet order reduc nonlinear crosscorrel templat perform snippet get better estim shiftstretch wavelength appli input spectrum wavelength solut determin use arc line detect input spectrum match wavelength record refwave_caliblin list store ascii tabl pypeitdataarc_lineslist applic wavelength calibr deimo spectra use refwave_calibful templat algorithm method keyword refpypeit_parwavelengthsolutionpar keyword must set full_templ file name relev templat must specifi reid_arxiv default set deimo relev refpypeit_parwavelengthsolutionpar keyword nsnippet sigdetect fwhm fwhm_fromlin nsnippet set number snippet arc spectrum divid second crosscorrel perform default nsnippet sigdetect set threshold detect line input arc spectrum arc line detect signific threshold use determin wavelength solut default sigdetect fwhm assum valu arc line fwhm ie spectral resolut unbin pixel default deimo fwhm may work well wider slit use slit width lvm slit keyword fwhm_fromlin take care overrid assum fwhm fwhm_fromlin set true allow pypeit comput arc line fwhm line highest detect signific fwhm comput way overrid assum fwhm still use first guess default deimo fwhm_fromlin true see refpypeit_parwavelengthsolutionpar keyword paramet guid wavelength calibr access user access deimo wavelength calibr inform coupl way inspect qualiti assur qa plot gener pypeit save png file run pypeit_chk_wavecalib mastersmasterwavecalib_x_x_xxfit print wavelength solut inform slit see refmaster_wvcalib inform user prefer manual wavelength calibr done run pypeit_identifi masterarc_x_x_xxfit masterslits_x_x_xxfitsgz see refwave_calibbyhand approach detail test requir state pd user expect automat wavelength calibr slit succeed narrow slit pd use arc provid wavelength solut narrow slit pd use special blue arc cover bluest observ pd pipelin produc wavelength solut accur one deriv start optic model pypeit meet requir demonstr test perform pypeit team describ descript perform wavelength calibr larg sampl deimo dataset span wide rang wavelength grate central wavelength slit width grate central wavelength slit width zd aa aa aa aa aa aa aa aa aa aa g aa aa aa aa aa aa aa aa zd aa aa aa g aa aa aa aa aa b aa aa aa includ six dataset use lvm slitmask special slitmask compos slit differ width dataset taken follow grate central wavelength g aa zd aa g aa g aa b aa b aa result slit test wavelength calibr fail wrong visual inspect found success wavelength calibr mostli influenc qualiti arc spectra particular artifact noisi spectra ghost strong emiss adjac slit main respons fail bad wavelength calibr case way obtain wavelength calibr may perform wavelength calibr hand see refwave_calibbyhand approach investig qualiti wavelength calibr inspect distribut wavelength solut rm pixel report left panel found major calibr spectra rm pixel moreov compar wavelength calibr perform pypeit one perform deep idlbas pipelin produc wavelength solut use deimo optic model found small wavelength offset aa see right panel dataset obtain zd grate kindli provid kevin mckinnon imag figurespypeit_deimoswvcalib_performancejpg scale imag figurescomparisondeepjpg scale aa unicod uc angstrom includ includelinksrst _radec_object_report ra dec object name assign extract spectra version histori version author date pypeit debora pelliccia jan dev debora pelliccia apr dev debora pelliccia jul dev debora pelliccia oct dev basic procedur use assign ra dec object name extract spectrum current avail keckdeimo keckmosfir perform right object find procedur describ refobject_find procedur ra dec object name assign primarili perform funcpypeitslittraceassign_addobjs_alldet first pypeit use funcpypeitslittraceget_maskdef_objpos_offset_alldet comput everi detector user want reduc offset observ slitmask posit expect design file see refslitmask_ids_report descript slitmask design match perform store classpypeitslittraceslittraceset datamodel see refmaster_slit descript provid inform way visual four differ option user choos comput offset use object high signific detect use one bright object select slit use align star use dither offset record scienc frame header avail mosfir altern user input known offset pixel see application_ funcpypeitslittraceaverage_maskdef_offset determin averag slitmask offset detector happen mosfir observ one detector use funcpypeitslittraceassign_addobjs_alldet assign ra dec object name detect object forc extract object detect latter see refadd_missing_obj_report function funcpypeitslittraceassign_addobjs_alldet detector goe slit check measur distanc detect object left edg slit correct offset comput previou step within certain toler see application_ detail control valu paramet distanc expect slitmask design differ expect measur slit length taken account correct slitmask offset allow pypeit deal also dither observ measur distanc within set toler ra dec maskdef_objnam detect object updat coordin name target object measur distanc within toler detect object consid serendipit object use coordin slit center avail slitmask design distanc pixel convert arcsec trace object center slit coordin serendipit object estim record ra dec maskdef_objnam set serendip case maskdef_extract attribut set fals see refadd_missing_obj_report applic perform ra dec object name assign extract spectra paramet describ applic section refslitmask_ids_report must set moreov assign_obj flag refpypeit_parslitmaskpar keyword must true default deimo except longmirr lvm mask use mosfir except longslit mask use seven paramet control procedur six slitmask offset determin one ra dec object name assign follow nsig_thrshd object detect signific threshold use comput slitmask offset default behaviour deimo unless slitmask_offset bright_maskdef_id use_alignbox set default valu nsig_thrshd bright_maskdef_id maskdef_id correspond dslitid slit_numb deimo mosfir slitmask design respect slit contain bright object use comput slitmask offset paramet option default valu bright_maskdef_idnon ignor slitmask_offset provid howev paramet highli recommend mosfir observ bright object present slitmask sinc allow trace small drift object posit typic seen mosfir data use_alignbox flag use star align box comput slitmask offset avail deimo observ set true pypeit comput offset use nsig_thrshd bright_maskdef_id default use_alignboxfals use_dither_offset flag use dither offset record header scienc frame valu slitmask offset current avail mosfir reduct set default instrument set true pypeit comput offset use nsig_thrshd bright_maskdef_id howev ignor slitmask_offset provid slitmask_offset userprovid slitmask offset pixel posit expect slitmask design option default valu slitmask_offsetnon set pypeit comput offset ie paramet ignor obj_tol set toler arcsec match process measur coordin extract spectrum expect coordin target object default valu obj_tol access pypeit user access object inform sever way ra dec object name maskdef_id visibl txt file list extract spectra gener end pypeit reduct ra dec object name also visibl run pypeit_show_d list see refout_specdpypeit_show_dspec object name visibl ginga run pypeit_show_d see refout_specdpypeit_show_dspec test pypeitdeimo pd requir pd state user expect product associ mask definit object name object posit requir pd state user expect abl reduc data taken nod pattern pypeitmosfir pm requir pm state user expect product associ mask definit object name object posit requir pm state use slitmask inform determin object posit slit pypeit meet requir demonstr test pypeitteststest_slitmaskpi run test codeblock bash cd pypeittest pytest test_slitmaskpytest_assign_maskinfo_add_miss w ignor pytest test_slitmaskpytest_dith_ob w ignor test requir download pypeit refdevsuit includ folder compress cooked_pypeit_dev_vxxxxtargz vxxxx indic version file defin pypeit_dev environment variabl point relev directori test run use one instrument setup deimo one detector first test pytest test_slitmasktest_assign_maskinfo w ignor algorithm test repeat twice deimo dataset mosfir dataset follow load inform rel specif instrument deimo mosfir load refpypeit_parinstrumentspecif default configur paramet select detector build trace imag use three flatfield imag specif dataset refdevsuit updat instrument configur paramet includ configur specif use instrument setup among other step set assign_obj flag refpypeit_parslitmaskpar keyword true run slit trace procedur use classpypeitedgetraceedgetraceset slitmask id assign perform see refslitmask_ids_report maskdef_id object inform associ slit record classpypeitslittraceslittraceset datamodel file contain previous extract spectra load cook folder refdevsuit object inform reiniti ie ra dec maskdef_objnam set none spectrum funcpypeitslittraceaverage_maskdef_offset run determin averag slitmask offset detector use funcpypeitslittraceassign_addobjs_alldet assign object ra dec object name extract spectrum read ra dec maskdef_objnam select slit check correspond expect valu expect valu taken classpypeitslittraceslittraceset datamodel see refmaster_slit descript provid inform way visual second test pytest test_slitmasktest_dith_ob w ignor perform deimo data algorithm test ident first test use differ deimo dataset obtain dither observ test includ pypeit refunittest check perform develop everi new version code includ includelinksrst _add_missing_obj_report object posit slit slitmask design version histori version author date pypeit debora pelliccia apr dev debora pelliccia jul dev debora pelliccia oct dev basic procedur determin locat slit undetect object use slitmask design inform current avail keckdeimo keckmosfir perform right object find see refobject_find ra dec object name assign procedur see refradec_object_report complet procedur determin posit slit non detect object primarili perform funcpypeitslittraceassign_addobjs_alldet function first assign ra dec object name detect object see refradec_object_report pypeit detector goe slit slit check target object detect done check maskdef_objnam correspond object name target answer ye goe next slit answer new classpypeitspecobjspecobj ad classpypeitspecobjsspecobj class expect posit slit correct slitmask_offset see refradec_object_report comput offset record classpypeitspecobjsspecobjss attribut spat_pixpo correct slitmask_offset allow pypeit deal also dither observ relev attribut also updat ie trace_spat spat_fracpo objid fwhm ra dec maskdef_objnam maskdef_id see specd refout_specdcurr data model descript paramet attribut maskdef_extract set true flag spectra extract undetect object applic perform determin locat slit undetect object paramet describ applic section refslitmask_ids_report refradec_object_report must set moreov extract_missing_obj flag refpypeit_parslitmaskpar keyword must true default deimo except longmirr lvm mask use mosfir except longslit longpo mask use see refpypeit_parslitmaskpar keyword detail access pypeit user access object inform result procedur sever way flag identifi undetect object extract forc visibl txt file list extract spectra gener end pypeit reduct flag also visibl run pypeit_show_d list see refout_specdpypeit_show_dspec forc extract shown differ color detect object yellow vs orang ginga run pypeit_show_d see refout_specdpypeit_show_dspec slitmask_offset valu report run pypeit_chk_dslit sciencespecd_xxxfit test pypeitdeimo pd requir pd state use slitmask inform determin object posit slit requir pd state user expect pipelin extract spectra use standard extract method optim extract even sourc dont continuum use inform contain mask definit pypeitmosfir pm requir pm state user expect product associ mask definit object name object posit requir pm state use slitmask inform determin object posit slit requir pm state user expect pipelin extract spectra use standard extract method optim extract even sourc dont continuum use inform contain mask definit requir pm state use slitmask inform determin locat object slit pypeit meet requir demonstr test pypeitteststest_slitmaskpi run test codeblock bash cd pypeittest pytest test_slitmaskpytest_assign_maskinfo_add_miss w ignor test requir download pypeit refdevsuit includ folder compress cooked_pypeit_dev_vxxxxtargz vxxxx indic version file defin pypeit_dev environment variabl point relev directori test run use one instrument setup deimo one detector algorithm test repeat twice deimo dataset mosfir dataset follow load inform rel specif instrument deimo mosfir load refpypeit_parinstrumentspecif default configur paramet select detector build trace imag use three flatfield imag specif dataset refdevsuit updat instrument configur paramet includ configur specif use instrument setup among other step set extract_missing_obj flag refpypeit_parslitmaskpar keyword true run slit trace procedur use classpypeitedgetraceedgetraceset slitmask id assign perform see refslitmask_ids_report maskdef_id object inform associ slit record classpypeitslittraceslittraceset datamodel file contain previous extract spectra load cook folder refdevsuit object inform reiniti ie ra dec maskdef_objnam maskdef_extract set none detect object spectra undetect object remov funcpypeitslittraceaverage_maskdef_offset run determin averag slitmask offset detector use funcpypeitslittraceassign_addobjs_alldet assign object ra dec object name extract spectrum add new classpypeitspecobjspecobj classpypeitspecobjsspecobj class undetect object updat relev attribut see procedure_ read spat_pixpo two undetect object check correspond expect posit object slit expect posit verifi visual inspect spectrum test includ pypeit refunittest check perform develop everi new version code includ includelinksrst isnt alreadi move detail somewher relev main doc page _fluxcalib flux calibr version histori version author date pypeit joe hennawi jan sensit function unit definit sensit function pypeit defin function maths_lambda satisfi maths_lambda fracf_lambdan_lambda unit mathrm ergcmphoton mathf_lambda specif energi flux unit mathrm ergscmmathrmmathringa mathn_lambda specif photon flux unit mathrm photonssmathrmmathringa pypeit specd file contain mathn_rm pix unit mathrm photonspixel gener flux calibr spectra mathf_lambda maths_lambda must comput spectrophotometr standard star observ insert hyperlink discuss fluxingrst mathn_lambda must determin mathn_rm pix via mathn_lambda fracn_rm pixfracdlambdadrm pix delta mathdelta exposur time mathfracdlambdadrm pix wavelength space per pixel gener constant sinc pypeit specd spectra ie mathn_rm pix extract irregularli space wavelength grid flux calibr flux calibr spectra ie mathf_lambda report specd file eg opt_flam box_flam optim boxcar extract respect unit math rm ergscmmathrmmathringa see refflux addit detail spectroscop zeropoint flux calibr pypeit spectra express via spectroscop zeropoint analog imag zeropoint defin mathrm zeropoint equiv log_leftfracfraclambdacs_lambdaleftfrac rm jyrm photon rm mathrmmathringarightright definit see astronom sourc flat spectrum frequenc mathnu ie mathf_nu rm const ab magnitud equal zeropoint produc mathn_lambda rm photonsmathrmmathringa detector sum mathn_rm pix photon per pixel pixel correspond mathdelta lambda mathrmmathringa interv equal uniti definit spectroscop zeropoint follow mathleftfracf_lambda rm ergscmmathrmmathringaright rm zeropoint zpconst leftfracn_lambdarm photonssmathrmmathringarightleftfraclambdamathrmmathringaright mathzpconst dimensionless number defin mathrm zpconstequiv fracfracmathrmmathringactim rm ergscmmathrmmathringa rm jy practic pypeit fit store spectroscop zerpoint use equat comput mathf_lambda mathn_lambda viceversa sensit function script reffluxingpypeit_sensfunc produc qa plot show zeropoint fit shown echel observ zeropoint qa shown order spectroscop throughput zeropoint close relat spectroscop throughput number count per pixel spectrum object flux mathf_lambda mathn_rm pix tlambdarm atmlambdafracdlambdad_rm pixfracf_lambdahnudelta matha effect apertur telescop mathtlambda spectroscop throughput mathrm atmlambda attenu caus earth atmospher mathfracdlambdad_rm pix number mathmathrmmathringa per pixel defin mathhnu photon energi mathdelta exposur time base equat definint follow spectroscop throughput written mathtlambda frachnua s_lambda note mathtlambda clearli dimensionless given unit maths_lambda mathrm ergcmphoton maths_lambda specifi zeropoint throughput curv comput zeropoint given effect apertur telescop addit zeropoint qa shown sensit function script pypeit_sensfunc also produc qa plot show throughput curv comput directli spectroscop zeropoint note defin spectroscop throughput telescop instrument system includ attenu caus earth atmospher also zeropoint sensit function pypeit flux calibr algorithm gener attempt remov impact slit loss limit standard star observ scienc observ exactli see flux calibr perfect realist scenario differ manifest wavelength depend systemat error flux calibr direct error depend rel see standard star scienc observ futur version hope implement better treatment slit loss time recommend user requir accur flux calibr forc pypeit flux calibr spectra agre photometri done use filter paramet option coad see refpypeit_parcoadddpar keyword set coaddd file use guid coaddit pypeit_coaddd script see refcoaddd includ includelinksrst _deimos_frames_report autom type deimo frame version histori version author date pypeit kyle westfal sep kyle westfal sep dev kyle westfal sep dev kyle westfal oct dev kyle westfal jan dev basic gener procedur use assign frame given type describ refframe_typ deimo frame type primari type deimo frame perform funcpypeitspectrographskeck_deimoskeckdeimosspectrographcheck_frame_typ function check valu variou header keyword set criteria use classifi frame type header card requir frametyp associ keyword classpypeitmetadatapypeitmetadata object fitstbl key header key mode mosmod exptim elaptim lampstat lamp hatch hatchpo idnam obstyp criteria use select frame type follow frame obstyp lamp hatchpo mosmod scienc object open spectral bia bia close spectral dark dark close spectral pixelflat intflat close spectral pixelflat dmflat skyflat open spectral trace intflat close spectral trace dmflat skyflat open spectral illumflat intflat close spectral illumflat dmflat skyflat open spectral arc line close spectral tilt line close spectral note default exposur time elaptim use distinguish frame type howev chang use exprng paramet refpypeit_fil see also refframe_typ importantli note deimo frame never given pinhol type also note criteria use select pixelflat trace illumflat ident true arc tilt frame distinct current made intflat dmflat skyflat theyr use code also note pypeit ignor frame observ condit meet restrict valu set funcpypeitspectrographskeck_deimoskeckdeimosspectrographvalid_configuration_valu current requir frame mosmod spectral ampmod singleb frame meet criteria includ automat gener refpypeit_fil creat refpypeit_setup test requir pd state user want pipelin automat classifi calibr pypeit meet requir demonstr test pypeitteststest_frametypepi run test codeblock bash cd pypeittest pytest test_frametypepytest_deimo w ignor test requir download pypeit refdevsuit defin pypeit_dev environment variabl point relev directori algorithm test follow find directori refdevsuit keck deimo data directori ie instrument setup make sure byhand version pypeit file setup human one pypeit develop ensur frame type correct b effect run refpypeit_setup instrument setup construct new pypeit file automat gener frame type c read byhand automat gener frame type two pypeit file check ident check perform calibr frame scienc standard frame test includ pypeit refunittest frametyp check perform develop everi new version code includ includelinksrst _deimos_config_report autom sort deimo frame instrument configur version histori version author date pypeit kyle westfal oct dev basic sort frame configur instrument ensur configur coupl set calibr scienc frame perform refpypeit_setup script see refsetup_doc refpypeit_setup use autom procedur sort frame write refpypeit_fil uniqu configur downselect set deimo configur identif deimo instrument configur determin uniqu combin follow keyword fitstbl key header key dispnam gratenam dispangl gtltwav gtltwav depend valu gratepo decker slmsknam bin bin amp ampmod determin funcpypeitmetadatapypeitmetadataunique_configur ampmod valu includ even though pypeit current restrict attempt reduc frame read b amplifi see funcpypeitspectrographskeck_deimoskeckdeimosspectrographvalid_configuration_valu addit pypeit requir frame mosmod spectral frame match header keyword restrict includ automat gener refpypeit_fil creat refpypeit_setup deimo uniqu configur determin collat relev metadata header frame found run refpypeit_setup except design bia dark frame reason bia dark header data eg dispangl match instrument configur observ intend use eg frame taken instrument fulli configur night observ match frame specif configur pypeit use dateob header keyword match frame first configur frame taken date warn fact bia dark frame match date singl configur lead complic deimo configur chang night ie biasesdark taken date associ first configur observ edit autogener pypeit file construct configur refpypeit_setup ensur correct bias dark includ configur possibl includ biasesdark multipl configur case eg biasesdark taken even morn instrument configur chang deimo calibr group pypeit use concept calibr group defin complet set calibr frame eg arc flat bias scienc frame calibr frame appli default refpypeit_setup use configur identifi eg assign frame singl calibr group autom procedur exist anyth except howev user edit refpypeit_fil within given configur assign specif calibr frame specif scienc frame use data calib column exampl observ take even morn calibr frame pypeit user use refpypeit_fil associ calibr taken end night morn calibr vice versa deimo specif column dateob utc header data frame provid assist test requir pd state user want pipelin automat correctli associ calibr scienc data pypeit meet requir major use case one except given warn respect bia dark frame assign calibr group test use demonstr pd satisfi refdeimos_frames_report also relev directori pypeit dev suit deimo data correctli identifi frame type associ singl configur written singl pypeit file test pypeit success identifi multipl configur among set file ad test_setup_keck_deimos_multiconfig test_setup_keck_deimos_multiconfig_clean test pypeitteststest_setupspi run test codeblock bash cd pypeittest pytest test_setuppytest_setup_keck_deimos_multiconfig w ignor pytest test_setuppytest_setup_keck_deimos_multiconfig_clean w ignor test requir download pypeit refdevsuit defin pypeit_dev environment variabl point relev directori test collect name file follow two directori pypeit_devraw_datakeck_deimosg_l_ pypeit_devraw_datakeck_deimosg_l_ test_setup_keck_deimos_multiconfig algorithm test follow use classpypeitpypeitsetuppypeitsetup automat identifi configur file check code found two configur wrote pypeit file configur read pypeit file b check name setup correct b c check calibr group frame test_setup_keck_deimos_multiconfig_clean algorithm test follow similar previou test use classpypeitpypeitsetuppypeitsetup automat identifi configur file check code found two configur check bia frame list correctli identifi check full tabl contain configur contain correct number file check clean configur frame reduc pypeit mosmod spectral ampmod singleb use funcpypeitmetadatapypeitmetadataclean_configur remov file devsuit file valid artifici chang metadata two file satisfi necessari metadata restrict check funcpypeitmetadatapypeitmetadataclean_configur remov file test includ pypeit refunittest configur check perform develop everi new version code includ includelinksrst _dev_report pypeit develop report follow list report gener instrumentspecif develop pypeit toctre maxdepth deimosfram mosfirefram slitmask_id deimosconfig radec_object deimos_wavecalib add_missing_obj includ includelinksrst _conda_forg manual updat pypeit condaforg feedstock bot broken fork condaforgepypeitfeedstock httpsgithubcomcondaforgepypeitfeedstock_ instal requir tool codeblock bash conda instal c condaforg condasmithi manual updat version variabl recipemetayaml updat sourcesha field recipemetayaml sha hash avail pypi httpspypiorgprojectpypeitfiles_ codeblock yaml sourc sha new_hash_her reset buildnumb field recipemetayaml codeblock yaml build number commit chang rerend feedstock codeblock bash conda smithi rerend c auto updat depend recipemetayaml pypeit depend chang open pr chang merg pr test pass includ includelinksrst _mosfire_frames_report autom type keckmosfir frame version histori version author date pypeit debora pelliccia oct dev basic gener procedur use assign frame given type describ refframe_typ mosfir frame type primari type mosfir frame perform funcpypeitspectrographskeck_mosfirekeckmosfirespectrographcheck_frame_typ function check valu variou header keyword set criteria use classifi frame type header card requir frametyp associ keyword avail classpypeitmetadatapypeitmetadata object header key fitstbl key truitim exptim flatspec lampstat pwstata key pwstata key object object filter filter key idnam idnam defin use combin header key includ pwstata pwstata see criteria use select frame type follow frame idnam truitim flatspec pwstata pwstata filter object scienc object dark includ flatoff lamp standard object dark includ flatoff lamp dark dark use use use dark use pixelflat flatlamp use dark use pixelflat flatlampoff use dark includ flatoff lamp trace flatlamp use dark use trace flatlampoff use dark includ flatoff lamp illumflat flatlamp use dark use arc arclamp use dark use arc object use dark includ flatoff lamp tilt arclamp use dark use tilt object use dark includ flatoff lamp note default exposur time truitim use distinguish scienc standard frame criteria truitim chang use exprng paramet refpypeit_fil see also refframe_typ importantli note mosfir frame never given pinhol type also note criteria use select arc tilt frame ident true pixelflat trace illumflat frame type given flatlampoff frame test pypeitmosfir requir pm state user want pipelin automat classifi calibr pypeit meet requir demonstr test pypeitteststest_frametypepi run test codeblock bash cd pypeittest pytest test_frametypepytest_mosfir w ignor test requir download pypeit refdevsuit defin pypeit_dev environment variabl point relev directori algorithm test follow find directori refdevsuit select sampl keck mosfir data directori ie instrument setup make sure byhand version pypeit file setup human one pypeit develop ensur frame type correct b effect run refpypeit_setup instrument setup construct new pypeit file automat gener frame type c read byhand automat gener frame type two pypeit file check ident test includ pypeit refunittest frametyp check perform develop everi new version code pypeitcorewavec packag submodul toctre maxdepth pypeitcorewavecalautoid pypeitcorewavecaldef pypeitcorewavecalkdtree_gener pypeitcorewavecalpattern pypeitcorewavecaltempl pypeitcorewavecalwaveio pypeitcorewavecalwv_fit pypeitcorewavecalwvutil modul content automodul pypeitcorewavec member privatememb undocmemb showinherit pypeit packag subpackag toctre maxdepth pypeitbsplin pypeitcor pypeitdisplay pypeitimag pypeitpar pypeitscript pypeitspectrograph submodul toctre maxdepth pypeitalignfram pypeitarch pypeitbiasfram pypeitbitmask pypeitcalibr pypeitcoaddd pypeitcoaddd pypeitcompiler_vers pypeitdatamodel pypeitedgetrac pypeitflatfield pypeitfluxcalibr pypeithistori pypeitio pypeitmasterfram pypeitmetadata pypeitonespec pypeitpypeit pypeitpypeitsetup pypeitpypmsg pypeitreduc pypeitsampl pypeitsensfunc pypeitsetup_packag pypeitslittrac pypeitspecdobj pypeitspecobj pypeitspecobj pypeittelescop pypeittracepca pypeitutil pypeitwavecalib pypeitwavemodel pypeitwavetilt modul content automodul pypeit member privatememb undocmemb showinherit pypeitspectrographssoar_goodman modul automodul pypeitspectrographssoar_goodman member privatememb undocmemb showinherit pypeitcorefit modul automodul pypeitcorefit member privatememb undocmemb showinherit pypeitspecobj modul automodul pypeitspecobj member privatememb undocmemb showinherit pypeitscriptssensfunc modul automodul pypeitscriptssensfunc member privatememb undocmemb showinherit pypeitsensfunc modul automodul pypeitsensfunc member privatememb undocmemb showinherit pypeitcoreload modul automodul pypeitcoreload member privatememb undocmemb showinherit pypeitscriptsshow_wvcalib modul automodul pypeitscriptsshow_wvcalib member privatememb undocmemb showinherit pypeitwavecalib modul automodul pypeitwavecalib member privatememb undocmemb showinherit pypeitcorearc modul automodul pypeitcorearc member privatememb undocmemb showinherit pypeitspectrographsspectrograph modul automodul pypeitspectrographsspectrograph member privatememb undocmemb showinherit pypeitspectrographsmmt_binospec modul automodul pypeitspectrographsmmt_binospec member privatememb undocmemb showinherit pypeitscriptschk_edg modul automodul pypeitscriptschk_edg member privatememb undocmemb showinherit pypeitcompiler_vers modul automodul pypeitcompiler_vers member privatememb undocmemb showinherit pypeitcoredatacub modul automodul pypeitcoredatacub member privatememb undocmemb showinherit pypeitcorepixel modul automodul pypeitcorepixel member privatememb undocmemb showinherit pypeitcoreflat modul automodul pypeitcoreflat member privatememb undocmemb showinherit pypeitspectrographsp_tspec modul automodul pypeitspectrographsp_tspec member privatememb undocmemb showinherit pypeittelescop modul automodul pypeittelescop member privatememb undocmemb showinherit pypeitscriptschk_align modul automodul pypeitscriptschk_align member privatememb undocmemb showinherit pypeitscriptsobslog modul automodul pypeitscriptsobslog member privatememb undocmemb showinherit pypeitscriptschk_dslit modul automodul pypeitscriptschk_dslit member privatememb undocmemb showinherit pypeitspectrographskeck_mosfir modul automodul pypeitspectrographskeck_mosfir member privatememb undocmemb showinherit pypeitspectrographswht_isi modul automodul pypeitspectrographswht_isi member privatememb undocmemb showinherit pypeitcorewavecalwaveio modul automodul pypeitcorewavecalwaveio member privatememb undocmemb showinherit pypeitspectrographsmmt_bluechannel modul automodul pypeitspectrographsmmt_bluechannel member privatememb undocmemb showinherit pypeitalignfram modul automodul pypeitalignfram member privatememb undocmemb showinherit pypeitscriptsscriptbas modul automodul pypeitscriptsscriptbas member privatememb undocmemb showinherit pypeitcorecoadd modul automodul pypeitcorecoadd member privatememb undocmemb showinherit pypeitimagesrawimag modul automodul pypeitimagesrawimag member privatememb undocmemb showinherit pypeitcoreprocimg modul automodul pypeitcoreprocimg member privatememb undocmemb showinherit pypeitcorewavecalwvutil modul automodul pypeitcorewavecalwvutil member privatememb undocmemb showinherit pypeitedgetrac modul automodul pypeitedgetrac member privatememb undocmemb showinherit pypeitcorecombin modul automodul pypeitcorecombin member privatememb undocmemb showinherit pypeitcoreflexur modul automodul pypeitcoreflexur member privatememb undocmemb showinherit pypeitbsplineutilc modul automodul pypeitbsplineutilc member privatememb undocmemb showinherit pypeitcoretellur modul automodul pypeitcoretellur member privatememb undocmemb showinherit pypeitimag packag submodul toctre maxdepth pypeitimagesbuildimag pypeitimagescombineimag pypeitimagesdetector_contain pypeitimagesimagebitmask pypeitimagespypeitimag pypeitimagesrawimag pypeitimagessciencecub modul content automodul pypeitimag member privatememb undocmemb showinherit pypeitimagesimagebitmask modul automodul pypeitimagesimagebitmask member privatememb undocmemb showinherit pypeitspectrographsnot_alfosc modul automodul pypeitspectrographsnot_alfosc member privatememb undocmemb showinherit pypeitcoremo modul automodul pypeitcoremo member privatememb undocmemb showinherit pypeitcoreextract modul automodul pypeitcoreextract member privatememb undocmemb showinherit pypeitspectrographsldt_deveni modul automodul pypeitspectrographsldt_deveni member privatememb undocmemb showinherit pypeitdisplaydisplay modul automodul pypeitdisplaydisplay member privatememb undocmemb showinherit pypeitscriptsmultislit_flexur modul automodul pypeitscriptsmultislit_flexur member privatememb undocmemb showinherit pypeitflatfield modul automodul pypeitflatfield member privatememb undocmemb showinherit pypeitimagespypeitimag modul automodul pypeitimagespypeitimag member privatememb undocmemb showinherit pypeitimagescombineimag modul automodul pypeitimagescombineimag member privatememb undocmemb showinherit pypeitscriptsflux_setup modul automodul pypeitscriptsflux_setup member privatememb undocmemb showinherit pypeitspectrographsp_dbsp modul automodul pypeitspectrographsp_dbsp member privatememb undocmemb showinherit pypeitcorecol modul automodul pypeitcorecol member privatememb undocmemb showinherit pypeitdisplayginga_plugin modul automodul pypeitdisplayginga_plugin member privatememb undocmemb showinherit pypeitscriptsidentifi modul automodul pypeitscriptsidentifi member privatememb undocmemb showinherit pypeitspectrographsmagellan_fir modul automodul pypeitspectrographsmagellan_fir member privatememb undocmemb showinherit pypeitspectrographsgemini_flamingo modul automodul pypeitspectrographsgemini_flamingo member privatememb undocmemb showinherit pypeitcorewavecalkdtree_gener modul automodul pypeitcorewavecalkdtree_gener member privatememb undocmemb showinherit pypeitspectrographslbt_mod modul automodul pypeitspectrographslbt_mod member privatememb undocmemb showinherit pypeitsetup_packag modul automodul pypeitsetup_packag member privatememb undocmemb showinherit pypeitscriptsinstall_ql_mast modul automodul pypeitscriptsinstall_ql_mast member privatememb undocmemb showinherit pypeitcorebasi modul automodul pypeitcorebasi member privatememb undocmemb showinherit pypeitcorewavecaltempl modul automodul pypeitcorewavecaltempl member privatememb undocmemb showinherit pypeitcorepars modul automodul pypeitcorepars member privatememb undocmemb showinherit pypeitspecobj modul automodul pypeitspecobj member privatememb undocmemb showinherit pypeitspectrographsntt_efosc modul automodul pypeitspectrographsntt_efosc member privatememb undocmemb showinherit pypeitscriptsview_fit modul automodul pypeitscriptsview_fit member privatememb undocmemb showinherit pypeitimagesdetector_contain modul automodul pypeitimagesdetector_contain member privatememb undocmemb showinherit pypeitbitmask modul automodul pypeitbitmask member privatememb undocmemb showinherit pypeitcoreguiskysub_region modul automodul pypeitcoreguiskysub_region member privatememb undocmemb showinherit pypeitcorewavecalwv_fit modul automodul pypeitcorewavecalwv_fit member privatememb undocmemb showinherit pypeitscriptscompare_ski modul automodul pypeitscriptscompare_ski member privatememb undocmemb showinherit pypeitparpypeitpar modul automodul pypeitparpypeitpar member privatememb undocmemb showinherit pypeitspectrographskeck_lri modul automodul pypeitspectrographskeck_lri member privatememb undocmemb showinherit pypeitscriptscoadd_dspec modul automodul pypeitscriptscoadd_dspec member privatememb undocmemb showinherit pypeitscriptsshow_dspec modul automodul pypeitscriptsshow_dspec member privatememb undocmemb showinherit pypeitpypeit modul automodul pypeitpypeit member privatememb undocmemb showinherit pypeitscriptsflux_calib modul automodul pypeitscriptsflux_calib member privatememb undocmemb showinherit pypeitspectrographsvlt_xshoot modul automodul pypeitspectrographsvlt_xshoot member privatememb undocmemb showinherit pypeitscriptscollate_d modul automodul pypeitscriptscollate_d member privatememb undocmemb showinherit pypeitscript packag submodul toctre maxdepth pypeitscriptschk_dslit pypeitscriptschk_align pypeitscriptschk_edg pypeitscriptschk_flat pypeitscriptschk_for_calib pypeitscriptschk_wavecalib pypeitscriptscoadd_dspec pypeitscriptscoadd_dspec pypeitscriptscoadd_datacub pypeitscriptscollate_d pypeitscriptscompare_ski pypeitscriptsflux_calib pypeitscriptsflux_setup pypeitscriptsidentifi pypeitscriptsinstall_ql_mast pypeitscriptsinstall_tellur pypeitscriptslowrdx_skyspec pypeitscriptsmultislit_flexur pypeitscriptsobslog pypeitscriptsparse_calib_id pypeitscriptsqa_html pypeitscriptsql_keck_mosfir pypeitscriptsql_keck_nir pypeitscriptsql_mo pypeitscriptsrun_pypeit pypeitscriptsscriptbas pypeitscriptssensfunc pypeitscriptssetup pypeitscriptsshow_dspec pypeitscriptsshow_dspec pypeitscriptsshow_arxiv pypeitscriptsshow_wvcalib pypeitscriptsskysub_region pypeitscriptstellfit pypeitscriptstrace_edg pypeitscriptsutil pypeitscriptsview_fit modul content automodul pypeitscript member privatememb undocmemb showinherit pypeitimagesbuildimag modul automodul pypeitimagesbuildimag member privatememb undocmemb showinherit pypeitarch modul automodul pypeitarch member privatememb undocmemb showinherit pypeitspectrographsopticalmodel modul automodul pypeitspectrographsopticalmodel member privatememb undocmemb showinherit pypeitspectrographskeck_deimo modul automodul pypeitspectrographskeck_deimo member privatememb undocmemb showinherit pypeithistori modul automodul pypeithistori member privatememb undocmemb showinherit pypeitscriptstellfit modul automodul pypeitscriptstellfit member privatememb undocmemb showinherit pypeitscriptsql_keck_nir modul automodul pypeitscriptsql_keck_nir member privatememb undocmemb showinherit pypeitscriptsparse_calib_id modul automodul pypeitscriptsparse_calib_id member privatememb undocmemb showinherit pypeitscriptsrun_pypeit modul automodul pypeitscriptsrun_pypeit member privatememb undocmemb showinherit pypeitcorewavecalautoid modul automodul pypeitcorewavecalautoid member privatememb undocmemb showinherit pypeitspectrographsshane_kast modul automodul pypeitspectrographsshane_kast member privatememb undocmemb showinherit pypeitfluxcalibr modul automodul pypeitfluxcalibr member privatememb undocmemb showinherit pypeitscriptsql_mo modul automodul pypeitscriptsql_mo member privatememb undocmemb showinherit pypeitspectrographsgtc_osiri modul automodul pypeitspectrographsgtc_osiri member privatememb undocmemb showinherit pypeitdisplay packag submodul toctre maxdepth pypeitdisplaydisplay pypeitdisplayginga_plugin modul content automodul pypeitdisplay member privatememb undocmemb showinherit pypeitspectrographsmagellan_mag modul automodul pypeitspectrographsmagellan_mag member privatememb undocmemb showinherit pypeitcoreslitdesign_match modul automodul pypeitcoreslitdesign_match member privatememb undocmemb showinherit pypeitcor packag subpackag toctre maxdepth pypeitcoregui pypeitcorewavec submodul toctre maxdepth pypeitcorearc pypeitcorebasi pypeitcorecoadd pypeitcorecol pypeitcorecombin pypeitcoreconvert_deimossavfil pypeitcoredatacub pypeitcoreextract pypeitcorefit pypeitcoreflat pypeitcoreflexur pypeitcoreflux_calib pypeitcoreframematch pypeitcoreload pypeitcoremeta pypeitcoremo pypeitcorepars pypeitcorepca pypeitcorepixel pypeitcoreplot pypeitcoreprocimg pypeitcorepydl pypeitcoreqa pypeitcoreskysub pypeitcoreslitdesign_match pypeitcoretellur pypeitcoretrac pypeitcoretracewav pypeitcorewav modul content automodul pypeitcor member privatememb undocmemb showinherit pypeitscriptsshow_arxiv modul automodul pypeitscriptsshow_arxiv member privatememb undocmemb showinherit pypeitscriptschk_flat modul automodul pypeitscriptschk_flat member privatememb undocmemb showinherit pypeitbsplinesetup_packag modul automodul pypeitbsplinesetup_packag member privatememb undocmemb showinherit pypeitwavetilt modul automodul pypeitwavetilt member privatememb undocmemb showinherit pypeitparutil modul automodul pypeitparutil member privatememb undocmemb showinherit pypeitspectrographsutil modul automodul pypeitspectrographsutil member privatememb undocmemb showinherit pypeitspecdobj modul automodul pypeitspecdobj member privatememb undocmemb showinherit pypeitreduc modul automodul pypeitreduc member privatememb undocmemb showinherit pypeitspectrographsbok_bc modul automodul pypeitspectrographsbok_bc member privatememb undocmemb showinherit pypeitspectrographsgemini_gnir modul automodul pypeitspectrographsgemini_gnir member privatememb undocmemb showinherit pypeitcorewav modul automodul pypeitcorewav member privatememb undocmemb showinherit pypeitcoreflux_calib modul automodul pypeitcoreflux_calib member privatememb undocmemb showinherit pypeitcalibr modul automodul pypeitcalibr member privatememb undocmemb showinherit pypeitscriptsql_keck_mosfir modul automodul pypeitscriptsql_keck_mosfir member privatememb undocmemb showinherit pypeitspectrographsvlt_sinfoni modul automodul pypeitspectrographsvlt_sinfoni member privatememb undocmemb showinherit pypeitbsplineutilpi modul automodul pypeitbsplineutilpi member privatememb undocmemb showinherit pypeitscriptschk_wavecalib modul automodul pypeitscriptschk_wavecalib member privatememb undocmemb showinherit pypeitsampl modul automodul pypeitsampl member privatememb undocmemb showinherit pypeitpar packag submodul toctre maxdepth pypeitparparset pypeitparpypeitpar pypeitparutil modul content automodul pypeitpar member privatememb undocmemb showinherit pypeitutil modul automodul pypeitutil member privatememb undocmemb showinherit pypeitcoreplot modul automodul pypeitcoreplot member privatememb undocmemb showinherit pypeitscriptscoadd_dspec modul automodul pypeitscriptscoadd_dspec member privatememb undocmemb showinherit pypeitscriptsskysub_region modul automodul pypeitscriptsskysub_region member privatememb undocmemb showinherit pypeitpypeitsetup modul automodul pypeitpypeitsetup member privatememb undocmemb showinherit pypeitcoremeta modul automodul pypeitcoremeta member privatememb undocmemb showinherit pypeitcoreconvert_deimossavfil modul automodul pypeitcoreconvert_deimossavfil member privatememb undocmemb showinherit pypeitspectrographsvlt_for modul automodul pypeitspectrographsvlt_for member privatememb undocmemb showinherit pypeit toctre maxdepth pypeit pypeitcoreframematch modul automodul pypeitcoreframematch member privatememb undocmemb showinherit pypeitspectrographstng_dolor modul automodul pypeitspectrographstng_dolor member privatememb undocmemb showinherit pypeitcoreqa modul automodul pypeitcoreqa member privatememb undocmemb showinherit pypeitbsplinebsplin modul automodul pypeitbsplinebsplin member privatememb undocmemb showinherit pypeitscriptschk_for_calib modul automodul pypeitscriptschk_for_calib member privatememb undocmemb showinherit pypeitcoreskysub modul automodul pypeitcoreskysub member privatememb undocmemb showinherit pypeitspectrographskeck_nir modul automodul pypeitspectrographskeck_nir member privatememb undocmemb showinherit pypeitio modul automodul pypeitio member privatememb undocmemb showinherit pypeitpypmsg modul automodul pypeitpypmsg member privatememb undocmemb showinherit pypeitscriptsutil modul automodul pypeitscriptsutil member privatememb undocmemb showinherit pypeitspectrographsmmt_mmir modul automodul pypeitspectrographsmmt_mmir member privatememb undocmemb showinherit pypeitdatamodel modul automodul pypeitdatamodel member privatememb undocmemb showinherit pypeitscriptslowrdx_skyspec modul automodul pypeitscriptslowrdx_skyspec member privatememb undocmemb showinherit pypeitimagessciencecub modul automodul pypeitimagessciencecub member privatememb undocmemb showinherit pypeitspectrographsgemini_gmo modul automodul pypeitspectrographsgemini_gmo member privatememb undocmemb showinherit pypeitparparset modul automodul pypeitparparset member privatememb undocmemb showinherit pypeitslittrac modul automodul pypeitslittrac member privatememb undocmemb showinherit pypeitspectrographskeck_kcwi modul automodul pypeitspectrographskeck_kcwi member privatememb undocmemb showinherit pypeitcorewavecalpattern modul automodul pypeitcorewavecalpattern member privatememb undocmemb showinherit pypeitscriptscoadd_datacub modul automodul pypeitscriptscoadd_datacub member privatememb undocmemb showinherit pypeitcoaddd modul automodul pypeitcoaddd member privatememb undocmemb showinherit pypeitmetadata modul automodul pypeitmetadata member privatememb undocmemb showinherit pypeitspectrographskeck_hir modul automodul pypeitspectrographskeck_hir member privatememb undocmemb showinherit pypeitspectrographsmdm_osmo modul automodul pypeitspectrographsmdm_osmo member privatememb undocmemb showinherit pypeitbiasfram modul automodul pypeitbiasfram member privatememb undocmemb showinherit pypeitscriptsinstall_tellur modul automodul pypeitscriptsinstall_tellur member privatememb undocmemb showinherit pypeitspectrograph packag submodul toctre maxdepth pypeitspectrographsbok_bc pypeitspectrographsgemini_flamingo pypeitspectrographsgemini_gmo pypeitspectrographsgemini_gnir pypeitspectrographsgtc_osiri pypeitspectrographskeck_deimo pypeitspectrographskeck_hir pypeitspectrographskeck_kcwi pypeitspectrographskeck_lri pypeitspectrographskeck_mosfir pypeitspectrographskeck_nir pypeitspectrographskeck_nirspec pypeitspectrographslbt_luci pypeitspectrographslbt_mod pypeitspectrographsldt_deveni pypeitspectrographsmagellan_fir pypeitspectrographsmagellan_mag pypeitspectrographsmdm_osmo pypeitspectrographsmmt_binospec pypeitspectrographsmmt_bluechannel pypeitspectrographsmmt_mmir pypeitspectrographsnot_alfosc pypeitspectrographsntt_efosc pypeitspectrographsopticalmodel pypeitspectrographsp_dbsp pypeitspectrographsp_tspec pypeitspectrographsshane_kast pypeitspectrographsslitmask pypeitspectrographssoar_goodman pypeitspectrographsspectrograph pypeitspectrographstng_dolor pypeitspectrographsutil pypeitspectrographsvlt_for pypeitspectrographsvlt_sinfoni pypeitspectrographsvlt_xshoot pypeitspectrographswht_isi modul content automodul pypeitspectrograph member privatememb undocmemb showinherit pypeitscriptstrace_edg modul automodul pypeitscriptstrace_edg member privatememb undocmemb showinherit pypeitcoreguiobject_find modul automodul pypeitcoreguiobject_find member privatememb undocmemb showinherit pypeitmasterfram modul automodul pypeitmasterfram member privatememb undocmemb showinherit pypeitscriptsshow_dspec modul automodul pypeitscriptsshow_dspec member privatememb undocmemb showinherit pypeitscriptsqa_html modul automodul pypeitscriptsqa_html member privatememb undocmemb showinherit pypeitwavemodel modul automodul pypeitwavemodel member privatememb undocmemb showinherit pypeitcorewavecaldef modul automodul pypeitcorewavecaldef member privatememb undocmemb showinherit pypeitcoretracewav modul automodul pypeitcoretracewav member privatememb undocmemb showinherit pypeitcorepydl modul automodul pypeitcorepydl member privatememb undocmemb showinherit pypeitcoaddd modul automodul pypeitcoaddd member privatememb undocmemb showinherit pypeitonespec modul automodul pypeitonespec member privatememb undocmemb showinherit pypeitbsplin packag submodul toctre maxdepth pypeitbsplinebsplin pypeitbsplinesetup_packag pypeitbsplineutilc pypeitbsplineutilpi modul content automodul pypeitbsplin member privatememb undocmemb showinherit pypeitcorepca modul automodul pypeitcorepca member privatememb undocmemb showinherit pypeitscriptssetup modul automodul pypeitscriptssetup member privatememb undocmemb showinherit pypeitspectrographslbt_luci modul automodul pypeitspectrographslbt_luci member privatememb undocmemb showinherit pypeitcoregui packag submodul toctre maxdepth pypeitcoreguiidentifi pypeitcoreguiobject_find pypeitcoreguiskysub_region modul content automodul pypeitcoregui member privatememb undocmemb showinherit pypeitspectrographsslitmask modul automodul pypeitspectrographsslitmask member privatememb undocmemb showinherit pypeitcoreguiidentifi modul automodul pypeitcoreguiidentifi member privatememb undocmemb showinherit pypeitspectrographskeck_nirspec modul automodul pypeitspectrographskeck_nirspec member privatememb undocmemb showinherit pypeittracepca modul automodul pypeittracepca member privatememb undocmemb showinherit pypeitcoretrac modul automodul pypeitcoretrac member privatememb undocmemb showinherit