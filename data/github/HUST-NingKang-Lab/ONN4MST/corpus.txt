onnmst httpsimgshieldsiobadgestatusbetabrightgreenstyleflatsquarelogoappveyor httpsimgshieldsiobadgedoibrightgreenstyleflatsquarelogoappveyorhttpswwwbiorxivorgcont httpsimgshieldsiogithublicensehustningkanglabonnmststyleflatsquarelogoappveyor ontologyawar neural network microbi sourc track img srcimagefigurepng program design perform fast accur biom sourc track among million sampl hundr nich biom ontolog organ treelik structur six layer neural network also organ six layer could produc hierarch classif result input sampl repres speci realtiv abund tsv file produc qiim obtain ebi output biom sourc txt file show biom nich input sampl like come preprocess program make data preprocess sampl statist analysi ontologyawar neural network easier timeconsum big data calcul minor data program error cost day even week use program check integr data error valu process greatli reduc probabl program run error provid gener model github model mention studi well train script avail upon reason request gener model base featur featur select featur featur found releaseshttpsgithubcomhustningkanglabonnmstreleas repositori structur restructuredtext readmemd basic inform repositori data data file onnmst npz npz file path file onnmst groundwatersamplesmatricesnpz npz file groundwat sampl mention studi groundwatersamplespathstxt path groundwat sampl mention studi humansamplesmatricesnpz path human sampl mention studi humansamplespathstxt npz file human sampl mention studi tree tree file onnmst biome_treepkl tree file contain serial biom ontolog ordered_labelstxt biom involv biom ontolog species_treepkl phylogenet tree use onnmst tsv raw input tsv file onnmst groundwatersamplesotustargz compress groundwat sampl humansamplesotustargz compress human sampl environmentyaml depend onnmst imag imag use readm figurepng figurepng supplementary_figurepng releasepng log updatelog updat version onnmst src sourc code onnmst documentmd document script onnmst dp_utilspi util class data preprocess program gen_ontologypi util function gener biom ontolog graph_builderpi util comput graph build onmst predictingpi util function predict function onnmst preprocesspi main preprocess program searchingpi main search program trainingpi train script onmst testingpi test script onmst utilspi util function onnmst tmp tempor file onnmst featuresindicesnpz npz file contain indic select featur error_list error list input data file support support use onnmst pleas email ushttpsgithubcomhustningkanglabonnmstauthor commentsinsight would greatli appreci requir unixlinux oper system least gb free disk space least gb ram window user easili instal onnmst wsl window subsystem linuxhttpsdocsmicrosoftcomenuswindowswslinstallwin instal recommend deploy onnmst use git conda shell clone repositori git clone httpsgithubcomhustningkanglabonnmstgit cd onnmst download uncompress model wget c httpsgithubcomhustningkanglabonnmstreleasesdownloadvconfigtargz tar zxvf configtargz configur environ use environmentyaml conda env creat n onnmst f environmentyaml conda activ onnmst function use check preprocesspi searchingpi src execut execut type shell chmod x srcpreprocesspi srcsearchingpi abund tabl convert matrix input file format onnmst npz file onn need convert origin input tsv file npz file script srcpreprocesspi could work microbiom sampl sourc track success convert tsv file npz file could run script srcsearchingpi biom sourc track besid need also indic train model provid well train model default model model run either gpu cpu mode provid option g indic see usagehttpsgithubcomhustningkanglabonnmstusag detail depend see environmentyamlenvironmentyaml usag shell usag preprocesspi h p n_job b batch_index batch_siz input_dir output_dir tree c coef header header checkbuildconvertcountmergeselect basic argument srcproprocesspi use specifi input_fold output_fold tree_fold bash usag searchingpi h g gid gpu_core_id tree model th threshold mp map ifn ofn argument srcsearchingpi use specifi model json file see releas page biom ontolog tree file config want onnmst run gpu mode use g model base select featur access use configmodel_sfjson sever use argument eg batchsiz batch n_job provid srcpreprocesspi srcsearchingpi see via h option simplifi program walkthrough here simpl guid use onnmst perform microbi sourc track input format exampl data found heredatatsv notic header construct biom file first line tabletheadtrth colspan construct biom filethtrtheadtbodytrtd otu idtdtderrtdtdtaxonomytdtrtrtdtdtdtdtdsk__archaeatdtrtrtdtdtdtdtdsk__archaeak__p__thaumarchaeotac__o__nitrosopumilalesf__nitrotdtrtrtdtdtdtdtdsk__archaeak__p__thaumarchaeotac__o__nitrosopumilalesf__nitrotdtrtrtdtdtdtdtdsk__archaeak__p__thaumarchaeotac__nitrososphaeriao__nitrososptdtrtrtdtdtdtdtdsk__bacteriatdtrtrtdtdtdtdtdsk__bacteriak__p__c__o__f__g__s__agricultural_soil_bacterium_scitdtrtbodyt need process data organ input_folderbiometsv_fil like restructuredtext datatsv roothost_associatedhuman err_fastq_otutsv err_fastq_otutsv err_fastq_otutsv check integr data anyth onnmst gener use file mgnifi databasehttpswwwebiacukmetagenom use preprocess program normal bash srcpreprocesspi check datatsv tsv file dont header first line need specifi header argument bash srcpreprocesspi check datatsv header file path error messag broken data save error_list error_msg tmp folder convert tsv file mgnifi format modelaccept npz file also need specifi header argument take exampl bash srcpreprocesspi convert datatsv datatre datanpz header batch_siz batch_index n_job microbiom sampl sourc track perform sourc track use onnmst use model base featur cpu mode bash srcsearchingpi datanpzsbatch_npz searching_resulttxt g configmicrobiometre configmodel_dfjson th mp datanpzspathstxt use model base featur gpu mode bash srcsearchingpi datanpzsbatch_npz searching_resulttxt g configmicrobiometre configmodel_dfjson th mp datanpzspathstxt use model base select featur cpu mode bash srcsearchingpi datanpzsbatch_npz searching_resulttxt g configmicrobiometre configmodel_sfjson th mp datanpzspathstxt use model base select featur gpu mode bash srcsearchingpi datanpzsbatch_npz searching_resulttxt g configmicrobiometre configmodel_sfjson th mp datanpzspathstxt need also indic map file contain path input tsv file use mp option usual map file automat gener preprocesspi convert find output folder datanpz output format second output format predict sourc contribut sampl given follow restructuredtext sample_ layerrootengineeredrootenvironmentalroothost_associ sample_ layere layer sample_ layerrootengineeredrootenvironmentalroothost_associ sample_ layere layer easili visual pie chart img srcimagesupplementari figurepng evalu sourc track method evalu sourc track method pleas refer dlmerbiohttpsgithubcomyuzhengdundlmerbio sourc track environment sampl less studi biom easi reproduct convert groundwat sampl modelaccept npz file use reproduc experi sourc track environment sampl less studi biom paper reproduc experi run follow command fulli configur onnmst depend bash srcsearchingpi datanpzsgroundwatersamplesmatricesnpz contributiontogroundwatersamplestxt g configmicrobiometre configmodel_dfjson th mp datanpzsgroundwatersamplespathstxt mgnifi run id found groundwatersamplespathstxtdatanpzsgroundwatersamplespathstxt relat metadata given order sampl output file total agreement groundwatersamplespathstxtdatanpzsgroundwatersamplespathstxt run id sampl descript err well_d err well_a err well_ err well_h err well_c err well_b err well_a err well_g err well_f err well_b err well_c sourc track sampl close relat human associ biom easi reproduct convert human sampl modelaccept npz file use reproduc experi sourc track sampl close relat human associ biom paper reproduc experi run follow command bash srcsearchingpi datanpzshumansamplesmatricesnpz contributiontohumansamplestxt g configmicrobiometre configmodel_dfjson th mp datanpzshumansamplespathstxt mgnifi run id found humansamplespathstxtdatanpzshumansamplespathstxt relat metadata given order sampl output file total agreement humansamplespathstxtdatanpzshumansamplespathstxt run id sampl descript err american gut project mouth sampl mouth err american gut project stool sampl stool err american gut project left hand sampl left hand err american gut project left hand sampl left hand err american gut project forehead sampl forehead err american gut project right hand sampl right hand err american gut project mouth sampl mouth err american gut project right hand sampl right hand err american gut project stool sampl stool err american gut project forehead sampl forehead author name email organ hugo zha hugozhahustdeucnphd candid school life scienc technolog huazhong univers scienc technolog hui chonghuichongmegmailcomresearch assist school life scienc technolog huazhong univers scienc technolog kang ningningkanghusteducnprofessor school life scienc technolog huazhong univers scienc technolog document script document aim help user understand script onnmst model scipt onnmst consist sever part includ data preprocess model train test search script data preprocess function preprocesspi convert speci abund tabl file gener use qiim softwar base rrna data metagenom data file numpi array format model could accept npz file script call phylogenet tree ncbi databas map speci speci abund tabl phylogenet tree calcul rel abund speci phylogenet tree npz file gener script use input file train test search script model function graph_builderpi encod ontologyawar neural network specif script know mani layer ontolog neural network mani neuron layer differ layer connect addit script defin hyperparamet memori invoc ratio gpu train test function trainingpi testingpi train test ontologyawar neural network perform fold cross valid dataset train test model specif dataset randomli divid eight fold seven train dataset remain one test dataset experi train process divid iter iter randomli select sampl provid model calcul loss function gradient gradient use updat model paramet assess train model test data set repeat eight time averag perform model assess eight experi search function searchingpi search microbi commun sampl gener model result report potenti sourc queri sampl biom ontolog layer