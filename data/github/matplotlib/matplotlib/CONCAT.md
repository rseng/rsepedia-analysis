# Security Policy

## Supported Versions

The following table lists versions and whether they are supported. Security
vulnerability reports will be accepted and acted upon for all supported
versions.

| Version | Supported          |
| ------- | ------------------ |
| 3.5.x   | :white_check_mark: |
| 3.4.x   | :white_check_mark: |
| 3.3.x   | :x:                |
| < 3.3   | :x:                |


## Reporting a Vulnerability

If you have found a security vulnerability, in order to keep it confidential,
please do not report an issue on GitHub.

Please email us details of the vulnerability at matplotlib@numfocus.org;
include a description and proof-of-concept that is [short and
self-contained](http://www.sscce.org/).

You should expect a response within a week of your email. Depending on the
severity of the issue, this may require some time to draft an immediate bugfix
release. Less severe issues may be held until the next release.

We do not award bounties for security vulnerabilities.

# Contributor Covenant Code of Conduct

## Our Pledge

We as members, contributors, and leaders pledge to make participation in our
community a harassment-free experience for everyone, regardless of age, body
size, visible or invisible disability, ethnicity, sex characteristics, gender
identity and expression, level of experience, education, socio-economic status,
nationality, personal appearance, race, religion, or sexual identity
and orientation.

We pledge to act and interact in ways that contribute to an open, welcoming,
diverse, inclusive, and healthy community.

## Our Standards

Examples of behavior that contributes to a positive environment for our
community include:

* Demonstrating empathy and kindness toward other people
* Being respectful of differing opinions, viewpoints, and experiences
* Giving and gracefully accepting constructive feedback
* Accepting responsibility and apologizing to those affected by our mistakes,
  and learning from the experience
* Focusing on what is best not just for us as individuals, but for the
  overall community

Examples of unacceptable behavior include:

* The use of sexualized language or imagery, and sexual attention or
  advances of any kind
* Trolling, insulting or derogatory comments, and personal or political attacks
* Public or private harassment
* Publishing others' private information, such as a physical or email
  address, without their explicit permission
* Other conduct which could reasonably be considered inappropriate in a
  professional setting

## Enforcement Responsibilities

Community leaders are responsible for clarifying and enforcing our standards of
acceptable behavior and will take appropriate and fair corrective action in
response to any behavior that they deem inappropriate, threatening, offensive,
or harmful.

Community leaders have the right and responsibility to remove, edit, or reject
comments, commits, code, wiki edits, issues, and other contributions that are
not aligned to this Code of Conduct, and will communicate reasons for moderation
decisions when appropriate.

## Scope

This Code of Conduct applies within all community spaces, and also applies when
an individual is officially representing the community in public spaces.
Examples of representing our community include using an official e-mail address,
posting via an official social media account, or acting as an appointed
representative at an online or offline event.

## Enforcement

Instances of abusive, harassing, or otherwise unacceptable behavior may be
reported to the community leaders responsible for enforcement at
matplotlib@numfocus.org (monitored by Thomas Caswell (\@tacaswell) and Hannah
Aizenman (\@story645)) or a report can be made using the [NumFOCUS Code of Conduct report form][numfocus form]. 
If community leaders cannot come to a resolution about enforcement, reports will be escalated to the NumFocus Code of Conduct committee (conduct@numfocus.org).
All complaints will be reviewed and investigated promptly and fairly.

All community leaders are obligated to respect the privacy and security of the
reporter of any incident.

[numfocus form]: https://numfocus.typeform.com/to/ynjGdT

## Enforcement Guidelines

Community leaders will follow these Community Impact Guidelines in determining
the consequences for any action they deem in violation of this Code of Conduct:

### 1. Correction

**Community Impact**: Use of inappropriate language or other behavior deemed
unprofessional or unwelcome in the community.

**Consequence**: A private, written warning from community leaders, providing
clarity around the nature of the violation and an explanation of why the
behavior was inappropriate. A public apology may be requested.

### 2. Warning

**Community Impact**: A violation through a single incident or series
of actions.

**Consequence**: A warning with consequences for continued behavior. No
interaction with the people involved, including unsolicited interaction with
those enforcing the Code of Conduct, for a specified period of time. This
includes avoiding interactions in community spaces as well as external channels
like social media. Violating these terms may lead to a temporary or
permanent ban.

### 3. Temporary Ban

**Community Impact**: A serious violation of community standards, including
sustained inappropriate behavior.

**Consequence**: A temporary ban from any sort of interaction or public
communication with the community for a specified period of time. No public or
private interaction with the people involved, including unsolicited interaction
with those enforcing the Code of Conduct, is allowed during this period.
Violating these terms may lead to a permanent ban.

### 4. Permanent Ban

**Community Impact**: Demonstrating a pattern of violation of community
standards, including sustained inappropriate behavior,  harassment of an
individual, or aggression toward or disparagement of classes of individuals.

**Consequence**: A permanent ban from any sort of public interaction within
the community.

## Attribution

This Code of Conduct is adapted from the [Contributor Covenant][homepage],
version 2.0, available at
https://www.contributor-covenant.org/version/2/0/code_of_conduct.html.

Community Impact Guidelines were inspired by [Mozilla's code of conduct
enforcement ladder](https://github.com/mozilla/diversity).

[homepage]: https://www.contributor-covenant.org

For answers to common questions about this code of conduct, see the FAQ at
https://www.contributor-covenant.org/faq. Translations are available at
https://www.contributor-covenant.org/translations.
# Test project for matplotlib sphinx extensions

A tiny sphinx project from ``sphinx-quickstart`` with all default answers.
Please refer to the [developers guide](https://matplotlib.org/devel/index.html).
## PR Summary

## PR Checklist

<!-- Please mark any checkboxes that do not apply to this PR as [N/A]. -->
**Tests and Styling**
- [ ] Has pytest style unit tests (and `pytest` passes).
- [ ] Is [Flake 8](https://flake8.pycqa.org/en/latest/) compliant (install `flake8-docstrings` and run `flake8 --docstring-convention=all`).

**Documentation**
- [ ] New features are documented, with examples if plot related.
- [ ] New features have an entry in `doc/users/next_whats_new/` (follow instructions in README.rst there).
- [ ] API changes documented in `doc/api/next_api_changes/` (follow instructions in README.rst there).
- [ ] Documentation is sphinx and numpydoc compliant (the docs should [build](https://matplotlib.org/devel/documenting_mpl.html#building-the-docs) without error).

<!--
Thank you so much for your PR!  To help us review your contribution, please
consider the following points:

- A development guide is available at https://matplotlib.org/devdocs/devel/index.html.

- Help with git and github is available at
  https://matplotlib.org/devel/gitwash/development_workflow.html.

- Do not create the PR out of main, but out of a separate branch.

- The PR title should summarize the changes, for example "Raise ValueError on
  non-numeric input to set_xlim".  Avoid non-descriptive titles such as
  "Addresses issue #8576".

- The summary should provide at least 1-2 sentences describing the pull request
  in detail (Why is this change required?  What problem does it solve?) and
  link to any relevant issues.

- If you are contributing fixes to docstrings, please pay attention to
  http://matplotlib.org/devel/documenting_mpl.html#formatting.  In particular,
  note the difference between using single backquotes, double backquotes, and
  asterisks in the markup.

We understand that PRs can sometimes be overwhelming, especially as the
reviews start coming in.  Please let us know if the reviews are unclear or
the recommended next step seems overly demanding, if you would like help in
addressing a reviewer's comments, or if you have been waiting too long to hear
back on your PR.
-->
See doc/users/installing/index.rst
|PyPi|_ |Downloads|_ |NUMFocus|_

|DiscourseBadge|_ |Gitter|_ |GitHubIssues|_ |GitTutorial|_

|GitHubActions|_ |AzurePipelines|_ |AppVeyor|_ |Codecov|_ |LGTM|_

.. |GitHubActions| image:: https://github.com/matplotlib/matplotlib/workflows/Tests/badge.svg
.. _GitHubActions: https://github.com/matplotlib/matplotlib/actions?query=workflow%3ATests

.. |AzurePipelines| image:: https://dev.azure.com/matplotlib/matplotlib/_apis/build/status/matplotlib.matplotlib?branchName=main
.. _AzurePipelines: https://dev.azure.com/matplotlib/matplotlib/_build/latest?definitionId=1&branchName=main

.. |AppVeyor| image:: https://ci.appveyor.com/api/projects/status/github/matplotlib/matplotlib?branch=main&svg=true
.. _AppVeyor: https://ci.appveyor.com/project/matplotlib/matplotlib

.. |Codecov| image:: https://codecov.io/github/matplotlib/matplotlib/badge.svg?branch=main&service=github
.. _Codecov: https://codecov.io/github/matplotlib/matplotlib?branch=main

.. |LGTM| image:: https://img.shields.io/lgtm/grade/python/github/matplotlib/matplotlib.svg?logo=lgtm&logoWidth=18
.. _LGTM: https://lgtm.com/projects/g/matplotlib/matplotlib

.. |DiscourseBadge| image:: https://img.shields.io/badge/help_forum-discourse-blue.svg
.. _DiscourseBadge: https://discourse.matplotlib.org

.. |Gitter| image:: https://badges.gitter.im/matplotlib/matplotlib.svg
.. _Gitter: https://gitter.im/matplotlib/matplotlib

.. |GitHubIssues| image:: https://img.shields.io/badge/issue_tracking-github-blue.svg
.. _GitHubIssues: https://github.com/matplotlib/matplotlib/issues

.. |GitTutorial| image:: https://img.shields.io/badge/PR-Welcome-%23FF8300.svg?
.. _GitTutorial: https://git-scm.com/book/en/v2/GitHub-Contributing-to-a-Project

.. |PyPi| image:: https://badge.fury.io/py/matplotlib.svg
.. _PyPi: https://badge.fury.io/py/matplotlib

.. |Downloads| image:: https://pepy.tech/badge/matplotlib/month
.. _Downloads: https://pepy.tech/project/matplotlib

.. |NUMFocus| image:: https://img.shields.io/badge/powered%20by-NumFOCUS-orange.svg?style=flat&colorA=E1523D&colorB=007D8A
.. _NUMFocus: https://numfocus.org

.. image:: https://matplotlib.org/_static/logo2.svg

Matplotlib is a comprehensive library for creating static, animated, and
interactive visualizations in Python.

Check out our `home page <https://matplotlib.org/>`_ for more information.

.. image:: https://matplotlib.org/_static/readme_preview.png

Matplotlib produces publication-quality figures in a variety of hardcopy
formats and interactive environments across platforms. Matplotlib can be used
in Python scripts, the Python and IPython shell, web application servers, and
various graphical user interface toolkits.


Install
=======

For installation instructions and requirements, see the `install documentation
<https://matplotlib.org/stable/users/installing/index.html>`_ or
`installing.rst <doc/users/installing/index.rst>`_ in the source.

Contribute
==========

You've discovered a bug or something else you want to change - excellent!

You've worked out a way to fix it – even better!

You want to tell us about it – best of all!

Start at the `contributing guide
<https://matplotlib.org/devdocs/devel/contributing.html>`_!

Contact
=======

`Discourse <https://discourse.matplotlib.org/>`_ is the discussion forum for
general questions and discussions and our recommended starting point.

Our active mailing lists (which are mirrored on Discourse) are:

* `Users <https://mail.python.org/mailman/listinfo/matplotlib-users>`_ mailing
  list: matplotlib-users@python.org
* `Announcement
  <https://mail.python.org/mailman/listinfo/matplotlib-announce>`_ mailing
  list: matplotlib-announce@python.org
* `Development <https://mail.python.org/mailman/listinfo/matplotlib-devel>`_
  mailing list: matplotlib-devel@python.org

Gitter_ is for coordinating development and asking questions directly related
to contributing to matplotlib.


Citing Matplotlib
=================
If Matplotlib contributes to a project that leads to publication, please
acknowledge this by citing Matplotlib.

`A ready-made citation entry <https://matplotlib.org/stable/users/project/citing.html>`_ is
available.

Research notice
~~~~~~~~~~~~~~~

Please note that this repository is participating in a study into
sustainability of open source projects. Data will be gathered about this
repository for approximately the next 12 months, starting from June 2021.

Data collected will include number of contributors, number of PRs, time taken
to close/merge these PRs, and issues closed.

For more information, please visit `the informational page
<https://sustainable-open-science-and-software.github.io/>`__ or download the
`participant information sheet
<https://sustainable-open-science-and-software.github.io/assets/PIS_sustainable_software.pdf>`__.

Plot 21 has length 6

.. plot::

    plt.plot(range(6))

##########
Some plots
##########

Plot 1 does not use context:

.. plot::

    plt.plot(range(10))
    a = 10

Plot 2 doesn't use context either; has length 6:

.. plot::

    plt.plot(range(6))

Plot 3 has length 4, and uses doctest syntax:

.. plot::
    :format: doctest

    This is a doctest...

    >>> plt.plot(range(4))

    ... isn't it?

Plot 4 shows that a new block with context does not see the variable defined
in the no-context block:

.. plot::
    :context:

    assert 'a' not in globals()

Plot 5 defines ``a`` in a context block:

.. plot::
    :context:

    plt.plot(range(6))
    a = 10

Plot 6 shows that a block with context sees the new variable.  It also uses
``:nofigs:``:

.. plot::
    :context:
    :nofigs:

    assert a == 10
    b = 4

Plot 7 uses a variable previously defined in previous ``nofigs`` context. It
also closes any previous figures to create a fresh figure:

.. plot::
    :context: close-figs

    assert b == 4
    plt.plot(range(b))

Plot 8 shows that a non-context block still doesn't have ``a``:

.. plot::
    :nofigs:

    assert 'a' not in globals()

Plot 9 has a context block, and does have ``a``:

.. plot::
    :context:
    :nofigs:

    assert a == 10

Plot 10 resets context, and ``a`` has gone again:

.. plot::
    :context: reset
    :nofigs:

    assert 'a' not in globals()
    c = 10

Plot 11 continues the context, we have the new value, but not the old:

.. plot::
    :context:

    assert c == 10
    assert 'a' not in globals()
    plt.plot(range(c))

Plot 12 opens a new figure.  By default the directive will plot both the first
and the second figure:

.. plot::
    :context:

    plt.figure()
    plt.plot(range(6))

Plot 13 shows ``close-figs`` in action.  ``close-figs`` closes all figures
previous to this plot directive, so we get always plot the figure we create in
the directive:

.. plot::
    :context: close-figs

    plt.figure()
    plt.plot(range(4))

Plot 14 uses ``include-source``:

.. plot::
    :include-source:

    # Only a comment

Plot 15 uses an external file with the plot commands and a caption (the
encoding is ignored and just verifies the deprecation is not broken):

.. plot:: range4.py
   :encoding: utf-8

   This is the caption for plot 15.


Plot 16 uses a specific function in a file with plot commands:

.. plot:: range6.py range6


Plot 17 gets a caption specified by the :caption: option:

.. plot::
   :caption: Plot 17 uses the caption option.

   plt.figure()
   plt.plot(range(6))


Plot 18 uses an external file with the plot commands and a caption
using the :caption: option:

.. plot:: range4.py
   :caption: This is the caption for plot 18.

Plot 19 uses shows that the "plot-directive" class is still appended, even if
we request other custom classes:

.. plot:: range4.py
   :class: my-class my-other-class

    Should also have a caption.

Plot 20 shows that the default template correctly prints the multi-image
scenario:

.. plot::
   :caption: This caption applies to both plots.

   plt.figure()
   plt.plot(range(6))

   plt.figure()
   plt.plot(range(4))
 
Plot 21 is generated via an include directive:

.. include:: included_plot_21.rst

.. tinypages documentation master file, created by
   sphinx-quickstart on Tue Mar 18 11:58:34 2014.
   You can adapt this file completely to your liking, but it should at least
   contain the root `toctree` directive.

Welcome to tinypages's documentation!
=====================================

Contents:

.. toctree::
    :maxdepth: 2

    some_plots

Indices and tables
==================

* :ref:`genindex`
* :ref:`modindex`
* :ref:`search`
.. _plot_types:

.. redirect-from:: /tutorials/basic/sample_plots

Plot types
==========

Overview of many common plotting commands in Matplotlib.

Note that we have stripped all labels, but they are present by default.
See the `gallery <../gallery/index.html>`_ for many more examples and
the `tutorials page <../tutorials/index.html>`_ for longer examples... _array_plots:

Plots of arrays and fields
--------------------------

Plotting for arrays of data ``Z(x, y)`` and fields ``U(x, y), V(x, y)``... _unstructured_plots:

Unstructured coordinates
-------------------------

Sometimes we collect data ``z`` at coordinates ``(x,y)`` and want to visualize
as a contour.  Instead of gridding the data and then using 
`~.axes.Axes.contour`, we can use a triangulation algorithm and fill the 
triangles... _stats_plots:

Statistics plots
----------------

Plots for statistical analysis... _basic_plots:

Basic
-----

Basic plot types, usually y versus x.:orphan:

.. title:: Matplotlib documentation

.. module:: matplotlib


##################################
Matplotlib |release| documentation
##################################

Matplotlib is a comprehensive library for creating static, animated,
and interactive visualizations in Python.

************
Installation
************

.. container:: twocol

    .. container::

        Install using `pip <https://pypi.org/project/matplotlib>`__:

        .. code-block:: bash

            pip install matplotlib

    .. container::

        Install using `conda <https://docs.continuum.io/anaconda/>`__:

        .. code-block:: bash

            conda install matplotlib

Further details are available in the :doc:`Installation Guide <users/installing/index>`.


******************
Learning resources
******************

.. panels::

    Tutorials
    ^^^^^^^^^

    - :doc:`Quick-start guide <tutorials/introductory/quick_start>`
    - :doc:`Plot types <plot_types/index>`
    - `Introductory tutorials <../tutorials/index.html#introductory>`_
    - :doc:`External learning resources <users/resources/index>`

    ---

    How-tos
    ^^^^^^^
    - :doc:`Example gallery <gallery/index>`
    - :doc:`Matplotlib FAQ <users/faq/index>`

    ---

    Understand how Matplotlib works
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    - The :ref:`users-guide-explain` in the :doc:`Users guide <users/index>`
    - Many of the :ref:`Intermediate <tutorials-intermediate>` and
      :ref:`Advanced <tutorials-advanced>` tutorials
      have explanatory material

    ---

    Reference
    ^^^^^^^^^

    - :doc:`API Reference <api/index>`
    - :doc:`Axes API <api/axes_api>` for most plotting methods
    - :doc:`Figure API <api/figure_api>` for figure-level methods
    - Top-level interfaces to create:

      - Figures (`.pyplot.figure`)
      - Subplots (`.pyplot.subplots`, `.pyplot.subplot_mosaic`)



********************
Third-party packages
********************

There are many `Third-party packages
<https://matplotlib.org/mpl-third-party/>`_ built on top of and extending
Matplotlib.


************
Contributing
************

Matplotlib is a community project maintained for and by its users.  There are many ways
you can help!

- Help other users `on discourse <https://discourse.matplotlib.org>`__
- report a bug or request a feature `on GitHub <https://github.com/matplotlib/matplotlib/issues>`__
- or improve the :ref:`documentation and code <developers-guide-index>`

{{ fullname | escape | underline }}


.. automodule:: {{ fullname }}
   :no-members:

{% block functions %}
{% if functions %}

Functions
---------

.. autosummary::
   :template: autosummary.rst
   :toctree:
{% for item in functions %}{% if item not in ['plotting', 'colormaps'] %}
   {{ item }}{% endif %}{% endfor %}
{% endif %}
{% endblock %}
{{ fullname | escape | underline }}


.. currentmodule:: {{ module }}


{% if objtype in ['class'] %}
.. auto{{ objtype }}:: {{ objname }}
    :show-inheritance:
    :special-members: __call__

{% else %}
.. auto{{ objtype }}:: {{ objname }}

{% endif %}

{% if objtype in ['class', 'method', 'function'] %}
{% if objname in ['AxesGrid', 'Scalable', 'HostAxes', 'FloatingAxes',
                      'ParasiteAxesAuxTrans', 'ParasiteAxes'] %}
.. Filter out the above aliases to other classes, as sphinx gallery
   creates no example file for those (sphinx-gallery/sphinx-gallery#365)

{% else %}
.. minigallery:: {{module}}.{{objname}}
   :add-heading:

{% endif %}
{% endif %}
:mod:`{{module}}`.{{objname}}
{{ underline }}====================

.. currentmodule:: {{ module }}

.. autofunction:: {{ objname }}

.. minigallery:: {{module}}.{{objname}}
   :add-heading:
{{ fullname | escape | underline}}

{% if fullname in ['mpl_toolkits.axes_grid1.colorbar'] %}
.. To prevent problems with the autosummary for the colorbar doc
   treat this separately (sphinx-doc/sphinx/issues/4874)
.. automodule:: {{ fullname }}
   :members:
   
{% else %}

.. automodule:: {{ fullname }}
   :no-members:
   :no-inherited-members:

{% block classes %}
{% if classes %}

Classes
-------

.. autosummary:: 
   :template: autosummary.rst
   :toctree:
{% for item in classes %}{% if item not in ['zip', 'map', 'reduce'] %}
   {{ item }}{% endif %}{% endfor %}
{% endif %}
{% endblock %}

{% block functions %}
{% if functions %}

Functions
---------

.. autosummary:: 
   :template: autosummary.rst
   :toctree:

{% for item in functions %}{% if item not in ['zip', 'map', 'reduce'] %}
   {{ item }}{% endif %}{% endfor %}
{% endif %}
{% endblock %}
{% endif %}
:orphan:

.. raw:: html

  <meta http-equiv="refresh" content="0; url=https://matplotlib.org/mpl-third-party/">
*********************
``matplotlib.ticker``
*********************

.. automodule:: matplotlib.ticker
   :members:
   :undoc-members:
   :show-inheritance:


.. inheritance-diagram:: matplotlib.ticker
   :parts: 1
:mod:`.backend_webagg`
======================

.. automodule:: matplotlib.backends.backend_webagg
   :members:
   :undoc-members:
   :show-inheritance:
*********************
``matplotlib.legend``
*********************

.. automodule:: matplotlib.legend
   :members:
   :undoc-members:
   :show-inheritance:

:mod:`matplotlib.backend_tools`
===============================

.. automodule:: matplotlib.backend_tools
   :members:
   :undoc-members:
   :show-inheritance:
*****************
``matplotlib.cm``
*****************

.. automodule:: matplotlib.cm
   :members:
   :undoc-members:
   :show-inheritance:
*******************
``matplotlib.mlab``
*******************

.. automodule:: matplotlib.mlab
   :members:
   :undoc-members:
   :show-inheritance:
******************
``matplotlib.tri``
******************

.. automodule:: matplotlib.tri

.. autoclass:: matplotlib.tri.Triangulation
    :members:

.. autoclass:: matplotlib.tri.TriContourSet
    :show-inheritance:

.. autoclass:: matplotlib.tri.TriFinder

.. autoclass:: matplotlib.tri.TrapezoidMapTriFinder
    :members: __call__
    :show-inheritance:

.. autoclass:: matplotlib.tri.TriInterpolator
   
.. autoclass:: matplotlib.tri.LinearTriInterpolator
    :members: __call__, gradient
    :show-inheritance:

.. autoclass:: matplotlib.tri.CubicTriInterpolator
    :members: __call__, gradient
    :show-inheritance:

.. autoclass:: matplotlib.tri.TriRefiner

.. autoclass:: matplotlib.tri.UniformTriRefiner
    :show-inheritance:
    :members: 

.. autoclass:: matplotlib.tri.TriAnalyzer
    :members: 
:mod:`.backend_ps`
==================

.. automodule:: matplotlib.backends.backend_ps
   :members:
   :undoc-members:
   :show-inheritance:
********************
``matplotlib.scale``
********************

.. automodule:: matplotlib.scale
   :members:
   :undoc-members:
   :show-inheritance:
********************
``matplotlib.dates``
********************

.. inheritance-diagram:: matplotlib.dates
   :parts: 1
   :top-classes: matplotlib.ticker.Formatter, matplotlib.ticker.Locator

.. automodule:: matplotlib.dates
   :members:
   :undoc-members:
   :show-inheritance:
***********************
``matplotlib.colorbar``
***********************

.. automodule:: matplotlib.colorbar
   :members:
   :undoc-members:
   :show-inheritance:
**********************
``matplotlib._enums``
**********************

.. automodule:: matplotlib._enums
   :no-members:

   .. autoclass:: JoinStyle
      :members: demo
      :exclude-members: bevel, miter, round, input_description

   .. autoclass:: CapStyle
      :members: demo
      :exclude-members: butt, round, projecting, input_description

:mod:`.backend_wxagg`, :mod:`.backend_wxcairo`
==============================================

**NOTE** These backends are not documented here, to avoid adding a dependency
to building the docs.

.. redirect-from:: /api/backend_wxagg_api

.. module:: matplotlib.backends.backend_wxagg
.. module:: matplotlib.backends.backend_wxcairo
*******************
``matplotlib.text``
*******************

.. automodule:: matplotlib.text
   :members:
   :undoc-members:
   :show-inheritance:
************************
``matplotlib.animation``
************************

.. automodule:: matplotlib.animation
   :no-members:
   :no-undoc-members:

.. contents:: Table of Contents
   :depth: 1
   :local:
   :backlinks: entry


Animation
=========

The easiest way to make a live animation in Matplotlib is to use one of the
`Animation` classes.

.. inheritance-diagram:: matplotlib.animation.FuncAnimation matplotlib.animation.ArtistAnimation
   :parts: 1

.. autosummary::
   :toctree: _as_gen
   :nosignatures:

   Animation
   FuncAnimation
   ArtistAnimation

In both cases it is critical to keep a reference to the instance
object.  The animation is advanced by a timer (typically from the host
GUI framework) which the `Animation` object holds the only reference
to.  If you do not hold a reference to the `Animation` object, it (and
hence the timers) will be garbage collected which will stop the
animation.

To save an animation use `Animation.save`, `Animation.to_html5_video`,
or `Animation.to_jshtml`.

See :ref:`ani_writer_classes` below for details about what movie formats are
supported.


.. _func-animation:

``FuncAnimation``
-----------------

The inner workings of `FuncAnimation` is more-or-less::

  for d in frames:
      artists = func(d, *fargs)
      fig.canvas.draw_idle()
      fig.canvas.start_event_loop(interval)

with details to handle 'blitting' (to dramatically improve the live
performance), to be non-blocking, not repeatedly start/stop the GUI
event loop, handle repeats, multiple animated axes, and easily save
the animation to a movie file.

'Blitting' is a `standard technique
<https://en.wikipedia.org/wiki/Bit_blit>`__ in computer graphics.  The
general gist is to take an existing bit map (in our case a mostly
rasterized figure) and then 'blit' one more artist on top.  Thus, by
managing a saved 'clean' bitmap, we can only re-draw the few artists
that are changing at each frame and possibly save significant amounts of
time.  When we use blitting (by passing ``blit=True``), the core loop of
`FuncAnimation` gets a bit more complicated::

   ax = fig.gca()

   def update_blit(artists):
       fig.canvas.restore_region(bg_cache)
       for a in artists:
           a.axes.draw_artist(a)

       ax.figure.canvas.blit(ax.bbox)

   artists = init_func()

   for a in artists:
      a.set_animated(True)

   fig.canvas.draw()
   bg_cache = fig.canvas.copy_from_bbox(ax.bbox)

   for f in frames:
       artists = func(f, *fargs)
       update_blit(artists)
       fig.canvas.start_event_loop(interval)

This is of course leaving out many details (such as updating the
background when the figure is resized or fully re-drawn).  However,
this hopefully minimalist example gives a sense of how ``init_func``
and ``func`` are used inside of `FuncAnimation` and the theory of how
'blitting' works.

The expected signature on ``func`` and ``init_func`` is very simple to
keep `FuncAnimation` out of your book keeping and plotting logic, but
this means that the callable objects you pass in must know what
artists they should be working on.  There are several approaches to
handling this, of varying complexity and encapsulation.  The simplest
approach, which works quite well in the case of a script, is to define the
artist at a global scope and let Python sort things out.  For example ::

   import numpy as np
   import matplotlib.pyplot as plt
   from matplotlib.animation import FuncAnimation

   fig, ax = plt.subplots()
   xdata, ydata = [], []
   ln, = plt.plot([], [], 'ro')

   def init():
       ax.set_xlim(0, 2*np.pi)
       ax.set_ylim(-1, 1)
       return ln,

   def update(frame):
       xdata.append(frame)
       ydata.append(np.sin(frame))
       ln.set_data(xdata, ydata)
       return ln,

   ani = FuncAnimation(fig, update, frames=np.linspace(0, 2*np.pi, 128),
                       init_func=init, blit=True)
   plt.show()

The second method is to use `functools.partial` to 'bind' artists to
function.  A third method is to use closures to build up the required
artists and functions.  A fourth method is to create a class.

Examples
~~~~~~~~

.. toctree::
   :maxdepth: 1

   ../gallery/animation/animate_decay
   ../gallery/animation/bayes_update
   ../gallery/animation/double_pendulum
   ../gallery/animation/animated_histogram
   ../gallery/animation/rain
   ../gallery/animation/random_walk
   ../gallery/animation/simple_anim
   ../gallery/animation/strip_chart
   ../gallery/animation/unchained

``ArtistAnimation``
-------------------

Examples
~~~~~~~~

.. toctree::
   :maxdepth: 1

   ../gallery/animation/dynamic_image

Writer Classes
==============

.. inheritance-diagram:: matplotlib.animation.FFMpegFileWriter matplotlib.animation.FFMpegWriter matplotlib.animation.ImageMagickFileWriter matplotlib.animation.ImageMagickWriter matplotlib.animation.PillowWriter matplotlib.animation.HTMLWriter
   :top-classes: matplotlib.animation.AbstractMovieWriter
   :parts: 1

The provided writers fall into a few broad categories.

The Pillow writer relies on the Pillow library to write the animation, keeping
all data in memory.

.. autosummary::
   :toctree: _as_gen
   :nosignatures:

   PillowWriter

The HTML writer generates JavaScript-based animations.

.. autosummary::
   :toctree: _as_gen
   :nosignatures:

   HTMLWriter

The pipe-based writers stream the captured frames over a pipe to an external
process.  The pipe-based variants tend to be more performant, but may not work
on all systems.

.. autosummary::
   :toctree: _as_gen
   :nosignatures:

   FFMpegWriter
   ImageMagickWriter

The file-based writers save temporary files for each frame which are stitched
into a single file at the end.  Although slower, these writers can be easier to
debug.

.. autosummary::
   :toctree: _as_gen
   :nosignatures:

   FFMpegFileWriter
   ImageMagickFileWriter

The writer classes provide a way to grab sequential frames from the same
underlying `~matplotlib.figure.Figure`.  They all provide three methods that
must be called in sequence:

- `~.AbstractMovieWriter.setup` prepares the writer (e.g. opening a pipe).
  Pipe-based and file-based writers take different arguments to ``setup()``.
- `~.AbstractMovieWriter.grab_frame` can then be called as often as
  needed to capture a single frame at a time
- `~.AbstractMovieWriter.finish` finalizes the movie and writes the output
  file to disk.

Example::

   moviewriter = MovieWriter(...)
   moviewriter.setup(fig, 'my_movie.ext', dpi=100)
   for j in range(n):
       update_figure(j)
       moviewriter.grab_frame()
   moviewriter.finish()

If using the writer classes directly (not through `Animation.save`), it is
strongly encouraged to use the `~.AbstractMovieWriter.saving` context manager::

  with moviewriter.saving(fig, 'myfile.mp4', dpi=100):
      for j in range(n):
          update_figure(j)
          moviewriter.grab_frame()

to ensure that setup and cleanup are performed as necessary.

Examples
--------

.. toctree::
   :maxdepth: 1

   ../gallery/animation/frame_grabbing_sgskip

.. _ani_writer_classes:

Helper Classes
==============

Animation Base Classes
----------------------

.. autosummary::
   :toctree: _as_gen
   :nosignatures:

   Animation
   TimedAnimation

Writer Registry
---------------

A module-level registry is provided to map between the name of the
writer and the class to allow a string to be passed to
`Animation.save` instead of a writer instance.

.. autosummary::
   :toctree: _as_gen
   :nosignatures:

   MovieWriterRegistry

Writer Base Classes
-------------------

To reduce code duplication base classes

.. autosummary::
   :toctree: _as_gen
   :nosignatures:

   AbstractMovieWriter
   MovieWriter
   FileMovieWriter

and mixins

.. autosummary::
   :toctree: _as_gen
   :nosignatures:

   FFMpegBase
   ImageMagickBase

are provided.

See the source code for how to easily implement new `MovieWriter` classes.
:mod:`.backend_mixed`
=====================

.. automodule:: matplotlib.backends.backend_mixed
   :members:
   :undoc-members:
   :show-inheritance:
:mod:`.backend_cairo`
=====================

.. automodule:: matplotlib.backends.backend_cairo
   :members:
   :undoc-members:
   :show-inheritance:
********************
``matplotlib.cbook``
********************

.. automodule:: matplotlib.cbook
   :members:
   :undoc-members:
   :show-inheritance:
**************************
``matplotlib.projections``
**************************

.. automodule:: matplotlib.projections
   :members:
   :show-inheritance:

``matplotlib.projections.polar``
================================

.. automodule:: matplotlib.projections.polar
   :members:
   :show-inheritance:

``matplotlib.projections.geo``
==============================

.. automodule:: matplotlib.projections.geo
   :members:
   :show-inheritance:
************************
``matplotlib.type1font``
************************

.. automodule:: matplotlib.type1font
   :members:
   :undoc-members:
   :show-inheritance:
*******************
``matplotlib.path``
*******************

.. automodule:: matplotlib.path
   :members:
   :undoc-members:
   :show-inheritance:
:mod:`.backend_agg`
===================

.. automodule:: matplotlib.backends.backend_agg
   :members:
   :undoc-members:
   :show-inheritance:
*****************************
``matplotlib.blocking_input``
*****************************

.. automodule:: matplotlib.blocking_input
   :members:
   :undoc-members:
   :show-inheritance:
**************************
``matplotlib.collections``
**************************

.. inheritance-diagram:: matplotlib.collections
   :parts: 2
   :private-bases:

.. automodule:: matplotlib.collections
   :members:
   :undoc-members:
   :show-inheritance:
   :inherited-members:
*******************
``matplotlib.axes``
*******************

.. currentmodule:: matplotlib.axes

.. contents:: Table of Contents
   :depth: 2
   :local:
   :backlinks: entry
   :class: multicol-toc

.. automodule:: matplotlib.axes
   :no-members:
   :no-undoc-members:

Inheritance
===========
.. inheritance-diagram:: matplotlib.axes.Axes
   :private-bases:

The Axes class
==============

.. autoclass:: Axes
   :no-members:
   :no-undoc-members:
   :show-inheritance:


Subplots
========

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   SubplotBase
   subplot_class_factory

Plotting
========

Basic
-----

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.plot
   Axes.errorbar
   Axes.scatter

   Axes.plot_date
   Axes.step

   Axes.loglog
   Axes.semilogx
   Axes.semilogy

   Axes.fill_between
   Axes.fill_betweenx

   Axes.bar
   Axes.barh
   Axes.bar_label

   Axes.stem
   Axes.eventplot

   Axes.pie

   Axes.stackplot


   Axes.broken_barh
   Axes.vlines
   Axes.hlines
   Axes.fill

Spans
-----

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.axhline
   Axes.axhspan
   Axes.axvline
   Axes.axvspan
   Axes.axline

Spectral
--------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.acorr
   Axes.angle_spectrum
   Axes.cohere
   Axes.csd
   Axes.magnitude_spectrum
   Axes.phase_spectrum
   Axes.psd
   Axes.specgram
   Axes.xcorr

Statistics
----------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.boxplot
   Axes.violinplot

   Axes.violin
   Axes.bxp

Binned
------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.hexbin
   Axes.hist
   Axes.hist2d
   Axes.stairs

Contours
--------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.clabel
   Axes.contour
   Axes.contourf

2D arrays
---------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.imshow
   Axes.matshow
   Axes.pcolor
   Axes.pcolorfast
   Axes.pcolormesh
   Axes.spy

Unstructured triangles
----------------------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.tripcolor
   Axes.triplot
   Axes.tricontour
   Axes.tricontourf


Text and annotations
--------------------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.annotate
   Axes.text
   Axes.table
   Axes.arrow
   Axes.inset_axes
   Axes.indicate_inset
   Axes.indicate_inset_zoom
   Axes.secondary_xaxis
   Axes.secondary_yaxis


Vector fields
-------------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.barbs
   Axes.quiver
   Axes.quiverkey
   Axes.streamplot


Clearing
========

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.cla
   Axes.clear


Appearance
==========

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:


   Axes.axis

   Axes.set_axis_off
   Axes.set_axis_on
   Axes.set_frame_on
   Axes.get_frame_on

   Axes.set_axisbelow
   Axes.get_axisbelow

   Axes.grid

   Axes.get_facecolor
   Axes.set_facecolor


Property cycle
==============

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.set_prop_cycle


Axis / limits
=============

.. For families of methods of the form {get,set}_{x,y}foo, try to list them in
   the order set_xfoo, get_xfoo, set_yfoo, get_yfoo

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.get_xaxis
   Axes.get_yaxis

Axis limits and direction
-------------------------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.invert_xaxis
   Axes.xaxis_inverted
   Axes.invert_yaxis
   Axes.yaxis_inverted

   Axes.set_xlim
   Axes.get_xlim
   Axes.set_ylim
   Axes.get_ylim

   Axes.update_datalim

   Axes.set_xbound
   Axes.get_xbound
   Axes.set_ybound
   Axes.get_ybound

Axis labels, title, and legend
------------------------------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.set_xlabel
   Axes.get_xlabel
   Axes.set_ylabel
   Axes.get_ylabel

   Axes.set_title
   Axes.get_title
   Axes.legend
   Axes.get_legend
   Axes.get_legend_handles_labels

Axis scales
-----------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.set_xscale
   Axes.get_xscale
   Axes.set_yscale
   Axes.get_yscale

Autoscaling and margins
-----------------------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.use_sticky_edges

   Axes.margins
   Axes.set_xmargin
   Axes.set_ymargin

   Axes.relim

   Axes.autoscale
   Axes.autoscale_view

   Axes.set_autoscale_on
   Axes.get_autoscale_on

   Axes.set_autoscalex_on
   Axes.get_autoscalex_on

   Axes.set_autoscaley_on
   Axes.get_autoscaley_on

Aspect ratio
------------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.apply_aspect
   Axes.set_aspect
   Axes.get_aspect

   Axes.set_box_aspect
   Axes.get_box_aspect

   Axes.set_adjustable
   Axes.get_adjustable

Ticks and tick labels
---------------------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.set_xticks
   Axes.get_xticks

   Axes.set_xticklabels
   Axes.get_xticklabels
   Axes.get_xmajorticklabels
   Axes.get_xminorticklabels

   Axes.get_xgridlines
   Axes.get_xticklines

   Axes.xaxis_date

   Axes.set_yticks
   Axes.get_yticks

   Axes.set_yticklabels
   Axes.get_yticklabels
   Axes.get_ymajorticklabels
   Axes.get_yminorticklabels

   Axes.get_ygridlines
   Axes.get_yticklines

   Axes.yaxis_date

   Axes.minorticks_off
   Axes.minorticks_on

   Axes.ticklabel_format
   Axes.tick_params

   Axes.locator_params


Units
=====

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.convert_xunits
   Axes.convert_yunits
   Axes.have_units


Adding artists
==============

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.add_artist
   Axes.add_child_axes
   Axes.add_collection
   Axes.add_container
   Axes.add_image
   Axes.add_line
   Axes.add_patch
   Axes.add_table


Twinning and sharing
====================

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.twinx
   Axes.twiny

   Axes.sharex
   Axes.sharey

   Axes.get_shared_x_axes
   Axes.get_shared_y_axes


Axes position
=============
.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.get_anchor
   Axes.set_anchor

   Axes.get_axes_locator
   Axes.set_axes_locator

   Axes.reset_position

   Axes.get_position
   Axes.set_position


Async/event based
=================

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.stale
   Axes.pchanged
   Axes.add_callback
   Axes.remove_callback


Interactive
===========

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:


   Axes.can_pan
   Axes.can_zoom

   Axes.get_navigate
   Axes.set_navigate
   Axes.get_navigate_mode
   Axes.set_navigate_mode

   Axes.start_pan
   Axes.drag_pan
   Axes.end_pan

   Axes.format_coord
   Axes.format_cursor_data
   Axes.format_xdata
   Axes.format_ydata

   Axes.mouseover
   Axes.in_axes

   Axes.contains
   Axes.contains_point

   Axes.get_cursor_data

Children
========

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.get_children
   Axes.get_images
   Axes.get_lines
   Axes.findobj


Drawing
=======

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.draw
   Axes.draw_artist
   Axes.redraw_in_frame
   Axes.get_renderer_cache

   Axes.get_rasterization_zorder
   Axes.set_rasterization_zorder

   Axes.get_window_extent
   Axes.get_tightbbox


Projection
==========

Methods used by `~matplotlib.axis.Axis` that must be overridden for
non-rectilinear Axes.

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.name
   Axes.get_xaxis_transform
   Axes.get_yaxis_transform
   Axes.get_data_ratio

   Axes.get_xaxis_text1_transform
   Axes.get_xaxis_text2_transform
   Axes.get_yaxis_text1_transform
   Axes.get_yaxis_text2_transform


Other
=====

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axes.zorder
   Axes.get_default_bbox_extra_artists
   Axes.get_transformed_clip_path_and_affine
   Axes.has_data
   Axes.set

.. autoclass:: matplotlib.axes.Axes.ArtistList
********************
``matplotlib.table``
********************

.. automodule:: matplotlib.table
   :members:
   :undoc-members:
   :show-inheritance:
*********************
``matplotlib.pyplot``
*********************

Pyplot function overview
------------------------

.. currentmodule:: matplotlib

.. autosummary::
   :toctree: _as_gen
   :template: autofunctions.rst

   pyplot

.. currentmodule:: matplotlib.pyplot

.. autofunction:: plotting


Colors in Matplotlib
--------------------

There are many colormaps you can use to map data onto color values.
Below we list several ways in which color can be utilized in Matplotlib.

For a more in-depth look at colormaps, see the
:doc:`/tutorials/colors/colormaps` tutorial.

.. currentmodule:: matplotlib.pyplot

.. autodata:: colormaps
   :no-value:
*****************************
``matplotlib.legend_handler``
*****************************

.. automodule:: matplotlib.legend_handler
      :members:
      :undoc-members:
**********************
``matplotlib.patches``
**********************


.. inheritance-diagram:: matplotlib.patches
   :parts: 1

.. automodule:: matplotlib.patches
   :no-members:
   :no-inherited-members:

Classes
-------

.. autosummary::
   :toctree: _as_gen/
   :template: autosummary.rst

   Annulus
   Arc
   Arrow
   ArrowStyle
   BoxStyle
   Circle
   CirclePolygon
   ConnectionPatch
   ConnectionStyle
   Ellipse
   FancyArrow
   FancyArrowPatch
   FancyBboxPatch
   Patch
   PathPatch
   StepPatch
   Polygon
   Rectangle
   RegularPolygon
   Shadow
   Wedge

Functions
---------

.. autosummary::
   :toctree: _as_gen/
   :template: autosummary.rst

   bbox_artist
   draw_bbox
   
**********************
``matplotlib.testing``
**********************


:func:`matplotlib.test`
=======================

.. autofunction:: matplotlib.test

:mod:`matplotlib.testing`
=========================

.. automodule:: matplotlib.testing
   :members:
   :undoc-members:
   :show-inheritance:


:mod:`matplotlib.testing.compare`
=================================

.. automodule:: matplotlib.testing.compare
   :members:
   :undoc-members:
   :show-inheritance:


:mod:`matplotlib.testing.decorators`
====================================

.. automodule:: matplotlib.testing.decorators
   :members:
   :undoc-members:
   :show-inheritance:


:mod:`matplotlib.testing.exceptions`
====================================

.. automodule:: matplotlib.testing.exceptions
   :members:
   :undoc-members:
   :show-inheritance:
************************
``matplotlib.offsetbox``
************************

.. inheritance-diagram:: matplotlib.offsetbox
   :parts: 1

.. automodule:: matplotlib.offsetbox
   :members:
   :undoc-members:
   :show-inheritance:
================================
``matplotlib.sphinxext.mathmpl``
================================

.. automodule:: matplotlib.sphinxext.mathmpl
   :exclude-members: latex_math
   :no-undoc-members:
***********************
``matplotlib.textpath``
***********************

.. automodule:: matplotlib.textpath
   :members:
   :undoc-members:
   :show-inheritance:
:mod:`.backend_qtagg`, :mod:`.backend_qtcairo`
==============================================

**NOTE** These backends are not documented here, to avoid adding a dependency
to building the docs.

.. redirect-from:: /api/backend_qt4agg_api
.. redirect-from:: /api/backend_qt4cairo_api
.. redirect-from:: /api/backend_qt5agg_api
.. redirect-from:: /api/backend_qt5cairo_api

.. module:: matplotlib.backends.backend_qtagg
.. module:: matplotlib.backends.backend_qtcairo
.. module:: matplotlib.backends.backend_qt5agg
.. module:: matplotlib.backends.backend_qt5cairo
************************
``matplotlib.docstring``
************************

.. automodule:: matplotlib.docstring
   :members:
   :undoc-members:
   :show-inheritance:

:mod:`matplotlib.backend_bases`
================================

.. automodule:: matplotlib.backend_bases
   :members:
   :undoc-members:
   :show-inheritance:
**********************
``matplotlib.widgets``
**********************

.. inheritance-diagram:: matplotlib.widgets
   :parts: 1


.. automodule:: matplotlib.widgets
   :members:
   :undoc-members:
   :show-inheritance:
.. _artist-api:

*********************
``matplotlib.artist``
*********************

.. automodule:: matplotlib.artist
   :no-members:
   :no-undoc-members:

Inheritance Diagrams
====================

.. inheritance-diagram:: matplotlib.axes._axes.Axes matplotlib.axes._base._AxesBase matplotlib.axis.Axis matplotlib.axis.Tick matplotlib.axis.XAxis matplotlib.axis.XTick matplotlib.axis.YAxis matplotlib.axis.YTick matplotlib.collections.AsteriskPolygonCollection matplotlib.collections.BrokenBarHCollection matplotlib.collections.CircleCollection matplotlib.collections.Collection matplotlib.collections.EllipseCollection matplotlib.collections.EventCollection matplotlib.collections.LineCollection matplotlib.collections.PatchCollection matplotlib.collections.PathCollection matplotlib.collections.PolyCollection matplotlib.collections.QuadMesh matplotlib.collections.RegularPolyCollection matplotlib.collections.StarPolygonCollection matplotlib.collections.TriMesh matplotlib.collections._CollectionWithSizes matplotlib.contour.ClabelText matplotlib.figure.Figure matplotlib.image.AxesImage matplotlib.image.BboxImage matplotlib.image.FigureImage matplotlib.image.NonUniformImage matplotlib.image.PcolorImage matplotlib.image._ImageBase matplotlib.legend.Legend matplotlib.lines.Line2D matplotlib.offsetbox.AnchoredOffsetbox matplotlib.offsetbox.AnchoredText matplotlib.offsetbox.AnnotationBbox matplotlib.offsetbox.AuxTransformBox matplotlib.offsetbox.DrawingArea matplotlib.offsetbox.HPacker matplotlib.offsetbox.OffsetBox matplotlib.offsetbox.OffsetImage matplotlib.offsetbox.PackerBase matplotlib.offsetbox.PaddedBox matplotlib.offsetbox.TextArea matplotlib.offsetbox.VPacker matplotlib.patches.Arc matplotlib.patches.Arrow matplotlib.patches.Circle matplotlib.patches.CirclePolygon matplotlib.patches.ConnectionPatch matplotlib.patches.Ellipse matplotlib.patches.FancyArrow matplotlib.patches.FancyArrowPatch matplotlib.patches.FancyBboxPatch matplotlib.patches.Patch matplotlib.patches.PathPatch matplotlib.patches.StepPatch matplotlib.patches.Polygon matplotlib.patches.Rectangle matplotlib.patches.RegularPolygon matplotlib.patches.Shadow matplotlib.patches.Wedge matplotlib.projections.geo.AitoffAxes matplotlib.projections.geo.GeoAxes matplotlib.projections.geo.HammerAxes matplotlib.projections.geo.LambertAxes matplotlib.projections.geo.MollweideAxes matplotlib.projections.polar.PolarAxes matplotlib.quiver.Barbs matplotlib.quiver.Quiver matplotlib.quiver.QuiverKey matplotlib.spines.Spine matplotlib.table.Cell matplotlib.table.CustomCell matplotlib.table.Table matplotlib.text.Annotation matplotlib.text.Text
   :parts: 1
   :private-bases:


``Artist`` class
================

.. autoclass:: Artist
   :no-members:
   :no-undoc-members:

Interactive
-----------

.. autosummary::
   :toctree: _as_gen
   :nosignatures:

   Artist.add_callback
   Artist.remove_callback
   Artist.pchanged
   Artist.get_cursor_data
   Artist.format_cursor_data
   Artist.set_mouseover
   Artist.get_mouseover
   Artist.mouseover
   Artist.contains
   Artist.pick
   Artist.pickable
   Artist.set_picker
   Artist.get_picker

Clipping
--------

.. autosummary::
   :toctree: _as_gen
   :nosignatures:

   Artist.set_clip_on
   Artist.get_clip_on
   Artist.set_clip_box
   Artist.get_clip_box
   Artist.set_clip_path
   Artist.get_clip_path

Bulk Properties
---------------

.. autosummary::
   :toctree: _as_gen
   :nosignatures:

   Artist.update
   Artist.update_from
   Artist.properties
   Artist.set

Drawing
-------

.. autosummary::
   :toctree: _as_gen
   :nosignatures:

   Artist.draw
   Artist.set_animated
   Artist.get_animated

   Artist.set_alpha
   Artist.get_alpha
   Artist.set_snap
   Artist.get_snap
   Artist.set_visible
   Artist.get_visible
   Artist.zorder
   Artist.set_zorder
   Artist.get_zorder
   Artist.set_agg_filter

   Artist.set_sketch_params
   Artist.get_sketch_params
   Artist.set_rasterized
   Artist.get_rasterized
   Artist.set_path_effects
   Artist.get_path_effects

   Artist.get_agg_filter
   Artist.get_window_extent
   Artist.get_transformed_clip_path_and_affine

Figure and Axes
---------------

.. autosummary::
   :toctree: _as_gen
   :nosignatures:

   Artist.remove

   Artist.axes

   Artist.set_figure
   Artist.get_figure

Children
--------

.. autosummary::
   :toctree: _as_gen
   :nosignatures:

   Artist.get_children
   Artist.findobj

Transform
---------

.. autosummary::
   :toctree: _as_gen
   :nosignatures:

   Artist.set_transform
   Artist.get_transform
   Artist.is_transform_set

Units
-----

.. autosummary::
   :toctree: _as_gen
   :nosignatures:

   Artist.convert_xunits
   Artist.convert_yunits
   Artist.have_units

Metadata
--------

.. autosummary::
   :toctree: _as_gen
   :nosignatures:

   Artist.set_gid
   Artist.get_gid
   Artist.set_label
   Artist.get_label
   Artist.set_url
   Artist.get_url

Miscellaneous
-------------

.. autosummary::
   :toctree: _as_gen
   :nosignatures:

   Artist.sticky_edges
   Artist.set_in_layout
   Artist.get_in_layout
   Artist.stale

Functions
=========

.. autosummary::
   :toctree: _as_gen
   :nosignatures:

   allow_rasterization
   get
   getp
   setp
   kwdoc
   ArtistInspector
:mod:`.backend_tkagg`, :mod:`.backend_tkcairo`
==============================================

.. automodule:: matplotlib.backends.backend_tkagg
   :members:
   :undoc-members:
   :show-inheritance:

.. automodule:: matplotlib.backends.backend_tkcairo
   :members:
   :undoc-members:
   :show-inheritance:
*************************
``matplotlib.tight_bbox``
*************************

.. automodule:: matplotlib.tight_bbox
   :members:
   :undoc-members:
   :show-inheritance:

================
Next API changes
================

.. ifconfig:: releaselevel == 'dev'

   .. toctree::
      :glob:
      :maxdepth: 1

      next_api_changes/behavior/*
      next_api_changes/deprecations/*
      next_api_changes/development/*
      next_api_changes/removals/*
*********************
``matplotlib.bezier``
*********************

.. automodule:: matplotlib.bezier
   :members:
   :undoc-members:
   :show-inheritance:
*********************
``matplotlib.sankey``
*********************

.. automodule:: matplotlib.sankey
   :members:
   :undoc-members:
   :show-inheritance:
***********************
``matplotlib.backends``
***********************

.. toctree::
   :maxdepth: 1

   backend_mixed_api.rst
   backend_template_api.rst
   backend_agg_api.rst
   backend_cairo_api.rst
   backend_gtk3_api.rst
   backend_gtk4_api.rst
   backend_nbagg_api.rst
   backend_pdf_api.rst
   backend_pgf_api.rst
   backend_ps_api.rst
   backend_qt_api.rst
   backend_svg_api.rst
   backend_tk_api.rst
   backend_webagg_api.rst
   backend_wx_api.rst
********************
``matplotlib.lines``
********************

.. currentmodule:: matplotlib.lines

.. automodule:: matplotlib.lines
   :no-members:
   :no-inherited-members:

Classes
-------

.. autosummary::
   :toctree: _as_gen/
   :template: autosummary.rst

   Line2D
   VertexSelector

Functions
---------

.. autosummary::
   :toctree: _as_gen/
   :template: autosummary.rst

   segment_hits
   **********************
``matplotlib.dviread``
**********************

.. automodule:: matplotlib.dviread
   :members:
   :undoc-members:
   :exclude-members: Page, Text, Box
   :show-inheritance:
***********************
``matplotlib.gridspec``
***********************

.. currentmodule:: matplotlib.gridspec

.. automodule:: matplotlib.gridspec
   :no-members:
   :no-inherited-members:

Classes
-------

.. autosummary::
   :toctree: _as_gen/
   :template: autosummary.rst

   GridSpec
   SubplotSpec
   GridSpecBase
   GridSpecFromSubplotSpec
**********************
``matplotlib.rcsetup``
**********************

.. automodule:: matplotlib.rcsetup
   :members:
   :undoc-members:
   :show-inheritance:
:mod:`.backend_gtk4agg`, :mod:`.backend_gtk4cairo`
==================================================

**NOTE** These backends are not documented here, to avoid adding a dependency
to building the docs.

.. redirect-from:: /api/backend_gtk4agg_api
.. redirect-from:: /api/backend_gtk4cairo_api

.. module:: matplotlib.backends.backend_gtk4agg
.. module:: matplotlib.backends.backend_gtk4cairo
**********************
``matplotlib.markers``
**********************

.. currentmodule:: matplotlib.markers

.. automodule:: matplotlib.markers
   :no-members:
   :no-inherited-members:

Classes
-------

.. autosummary::
   :toctree: _as_gen/
   :template: autosummary.rst

   MarkerStyle
*******************
``matplotlib.axis``
*******************

.. contents:: Table of Contents
   :depth: 3
   :local:
   :backlinks: entry

.. automodule:: matplotlib.axis
   :no-members:
   :no-undoc-members:

Inheritance
===========

.. inheritance-diagram:: Tick Ticker XAxis YAxis XTick YTick
   :private-bases:


``Axis`` objects
================

.. autoclass:: Axis
   :no-members:
   :no-undoc-members:
.. autoclass:: XAxis
   :no-members:
   :no-undoc-members:
.. autoclass:: YAxis
   :no-members:
   :no-undoc-members:
.. autoclass:: Ticker
   :no-members:
   :no-undoc-members:


.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axis.clear
   Axis.cla
   Axis.get_scale


Formatters and Locators
-----------------------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axis.get_major_formatter
   Axis.get_major_locator
   Axis.get_minor_formatter
   Axis.get_minor_locator
   Axis.set_major_formatter
   Axis.set_major_locator
   Axis.set_minor_formatter
   Axis.set_minor_locator

   Axis.remove_overlapping_locs
   Axis.get_remove_overlapping_locs
   Axis.set_remove_overlapping_locs

Axis Label
----------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axis.set_label_coords
   Axis.set_label_position
   Axis.set_label_text
   Axis.get_label
   Axis.get_label_position
   Axis.get_label_text

Ticks, tick labels and Offset text
----------------------------------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axis.get_major_ticks
   Axis.get_majorticklabels
   Axis.get_majorticklines
   Axis.get_majorticklocs
   Axis.get_minor_ticks
   Axis.get_minorticklabels
   Axis.get_minorticklines
   Axis.get_minorticklocs

   Axis.get_offset_text

   Axis.get_tick_padding
   Axis.get_ticklabels
   Axis.get_ticklines
   Axis.get_ticklocs

   Axis.get_gridlines
   Axis.grid

   Axis.set_tick_params

   Axis.axis_date


Data and view intervals
-----------------------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axis.get_data_interval
   Axis.get_view_interval
   Axis.get_inverted
   Axis.set_data_interval
   Axis.set_view_interval
   Axis.set_inverted

Rendering helpers
-----------------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axis.get_minpos
   Axis.get_tick_space
   Axis.get_ticklabel_extents
   Axis.get_tightbbox


Interactive
-----------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axis.contains
   Axis.get_pickradius
   Axis.set_pickradius


Units
-----

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axis.convert_units
   Axis.set_units
   Axis.get_units
   Axis.update_units


XAxis Specific
--------------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   XAxis.axis_name
   XAxis.get_text_heights
   XAxis.get_ticks_position
   XAxis.set_ticks_position
   XAxis.set_label_position
   XAxis.tick_bottom
   XAxis.tick_top

YAxis Specific
--------------

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   YAxis.axis_name
   YAxis.get_text_widths
   YAxis.get_ticks_position
   YAxis.set_offset_position
   YAxis.set_ticks_position
   YAxis.set_label_position
   YAxis.tick_left
   YAxis.tick_right

Other
-----

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:


   Axis.OFFSETTEXTPAD

   Axis.axes
   Axis.limit_range_for_scale
   Axis.reset_ticks
   Axis.set_default_intervals

Discouraged
-----------

These methods should be used together with care, calling ``set_ticks``
to specify the desired tick locations **before** calling ``set_ticklabels`` to
specify a matching series of labels.  Calling ``set_ticks`` makes a
`~matplotlib.ticker.FixedLocator`; it's list of locations is then used by
``set_ticklabels`` to make an appropriate
`~matplotlib.ticker.FuncFormatter`.

.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Axis.set_ticks
   Axis.set_ticklabels



``Tick`` objects
================

.. autoclass:: Tick
   :no-members:
   :no-undoc-members:
.. autoclass:: XTick
   :no-members:
   :no-undoc-members:
.. autoclass:: YTick
   :no-members:
   :no-undoc-members:


.. autosummary::
   :toctree: _as_gen
   :template: autosummary.rst
   :nosignatures:

   Tick.get_loc
   Tick.get_pad
   Tick.get_pad_pixels
   Tick.get_tick_padding
   Tick.get_tickdir
   Tick.get_view_interval
   Tick.set_label1
   Tick.set_label2
   Tick.set_pad
   Tick.set_url
   Tick.update_position
***********************
``matplotlib.mathtext``
***********************

.. inheritance-diagram:: matplotlib.mathtext
   :parts: 1

.. automodule:: matplotlib.mathtext
   :members:
   :undoc-members:
   :show-inheritance:
=======================================
``matplotlib.sphinxext.plot_directive``
=======================================

.. automodule:: matplotlib.sphinxext.plot_directive
   :no-undoc-members:
********************
``matplotlib.units``
********************

.. automodule:: matplotlib.units
   :members:
   :undoc-members:
   :show-inheritance:
****************************
``matplotlib.layout_engine``
****************************

.. currentmodule:: matplotlib.layout_engine

.. automodule:: matplotlib.layout_engine
   :members:
   :inherited-members:
********************
``matplotlib.hatch``
********************

.. automodule:: matplotlib.hatch
   :members:
   :undoc-members:
   :show-inheritance:
:mod:`.backend_gtk3agg`, :mod:`.backend_gtk3cairo`
==================================================

**NOTE** These backends are not documented here, to avoid adding a dependency
to building the docs.

.. redirect-from:: /api/backend_gtk3agg_api
.. redirect-from:: /api/backend_gtk3cairo_api

.. module:: matplotlib.backends.backend_gtk3agg
.. module:: matplotlib.backends.backend_gtk3cairo
:mod:`.backend_pdf`
===================

.. automodule:: matplotlib.backends.backend_pdf
   :members:
   :undoc-members:
   :show-inheritance:
**************
``matplotlib``
**************

.. py:currentmodule:: matplotlib

Backend management
==================

.. autofunction:: use

.. autofunction:: get_backend

.. autofunction:: interactive

.. autofunction:: is_interactive

Default values and styling
==========================

.. py:data:: rcParams

   An instance of `RcParams` for handling default Matplotlib values.

.. autoclass:: RcParams
   :no-members:

   .. automethod:: find_all

.. autofunction:: rc_context

.. autofunction:: rc

.. autofunction:: rcdefaults

.. autofunction:: rc_file_defaults

.. autofunction:: rc_file

.. autofunction:: rc_params

.. autofunction:: rc_params_from_file

.. autofunction:: get_configdir

.. autofunction:: matplotlib_fname

.. autofunction:: get_data_path

Logging
=======

.. autofunction:: set_loglevel

Colormaps
=========

.. autodata:: colormaps
   :no-value:

Miscellaneous
=============

.. autofunction:: get_cachedir
API Reference
=============

When using the library you will typically create
:doc:`Figure <figure_api>` and :doc:`Axes <axes_api>` objects and
call their methods to add content and modify the appearance.

- :mod:`matplotlib.figure`: axes creation, figure-level content
- :mod:`matplotlib.axes`: most plotting methods, Axes labels, access to axis
  styling, etc.

Example: We create a Figure ``fig`` and Axes ``ax``. Then we call
methods on them to plot data, add axis labels and a figure title.

.. plot::
   :include-source:
   :align: center

   import matplotlib.pyplot as plt
   import numpy as np

   x = np.arange(0, 4, 0.05)
   y = np.sin(x*np.pi)

   fig, ax = plt.subplots(figsize=(3,2), constrained_layout=True)
   ax.plot(x, y)
   ax.set_xlabel('t [s]')
   ax.set_ylabel('S [V]')
   ax.set_title('Sine wave')
   fig.set_facecolor('lightsteelblue')


Modules
-------

Alphabetical list of modules:

.. toctree::
   :maxdepth: 1

   matplotlib_configuration_api.rst
   afm_api.rst
   animation_api.rst
   artist_api.rst
   axes_api.rst
   axis_api.rst
   backend_bases_api.rst
   backend_managers_api.rst
   backend_tools_api.rst
   index_backend_api.rst
   bezier_api.rst
   blocking_input_api.rst
   category_api.rst
   cbook_api.rst
   cm_api.rst
   collections_api.rst
   colorbar_api.rst
   colors_api.rst
   container_api.rst
   contour_api.rst
   dates_api.rst
   docstring_api.rst
   dviread.rst
   figure_api.rst
   font_manager_api.rst
   fontconfig_pattern_api.rst
   gridspec_api.rst
   hatch_api.rst
   image_api.rst
   layout_engine_api.rst
   legend_api.rst
   legend_handler_api.rst
   lines_api.rst
   markers_api.rst
   mathtext_api.rst
   mlab_api.rst
   offsetbox_api.rst
   patches_api.rst
   path_api.rst
   patheffects_api.rst
   pyplot_summary.rst
   projections_api.rst
   quiver_api.rst
   rcsetup_api.rst
   sankey_api.rst
   scale_api.rst
   sphinxext_mathmpl_api.rst
   sphinxext_plot_directive_api.rst
   spines_api.rst
   style_api.rst
   table_api.rst
   testing_api.rst
   text_api.rst
   texmanager_api.rst
   textpath_api.rst
   ticker_api.rst
   tight_bbox_api.rst
   tight_layout_api.rst
   transformations.rst
   tri_api.rst
   type1font.rst
   units_api.rst
   widgets_api.rst
   _api_api.rst
   _enums_api.rst
   toolkits/mplot3d.rst
   toolkits/axes_grid1.rst
   toolkits/axisartist.rst
   toolkits/axes_grid.rst


.. _usage_patterns:

Usage patterns
--------------

Below we describe several common approaches to plotting with Matplotlib.

The pyplot API
^^^^^^^^^^^^^^

`matplotlib.pyplot` is a collection of functions that make
Matplotlib work like MATLAB. Each pyplot function makes some change to a
figure: e.g., creates a figure, creates a plotting area in a figure, plots
some lines in a plotting area, decorates the plot with labels, etc.

`.pyplot` is mainly intended for interactive plots and simple cases of
programmatic plot generation.

Further reading:

- The `matplotlib.pyplot` function reference
- :doc:`/tutorials/introductory/pyplot`
- :ref:`Pyplot examples <pyplots_examples>`

.. _api-index:

The object-oriented API
^^^^^^^^^^^^^^^^^^^^^^^

At its core, Matplotlib is object-oriented. We recommend directly working
with the objects, if you need more control and customization of your plots.

In many cases you will create a `.Figure` and one or more
`~matplotlib.axes.Axes` using `.pyplot.subplots` and from then on only work
on these objects. However, it's also possible to create `.Figure`\ s
explicitly (e.g. when including them in GUI applications).

Further reading:

- `matplotlib.axes.Axes` and `matplotlib.figure.Figure` for an overview of
   plotting functions.
- Most of the :ref:`examples <examples-index>` use the object-oriented approach
   (except for the pyplot section)

The pylab API (discouraged)
^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. automodule:: pylab
   :no-members:
*********************
``matplotlib.figure``
*********************

.. currentmodule:: matplotlib.figure

.. automodule:: matplotlib.figure
   :members:
   :inherited-members:
:mod:`.backend_svg`
===================

.. automodule:: matplotlib.backends.backend_svg
   :members:
   :undoc-members:
   :show-inheritance:
*************************
``matplotlib.transforms``
*************************

.. inheritance-diagram:: matplotlib.transforms
   :parts: 1

.. automodule:: matplotlib.transforms
   :members: TransformNode, BboxBase, Bbox, TransformedBbox, Transform,
       TransformWrapper, AffineBase, Affine2DBase, Affine2D, IdentityTransform,
       BlendedGenericTransform, BlendedAffine2D, blended_transform_factory,
       CompositeGenericTransform, CompositeAffine2D,
       composite_transform_factory, BboxTransform, BboxTransformTo,
       BboxTransformFrom, ScaledTranslation, TransformedPath, nonsingular,
       interval_contains, interval_contains_open
   :show-inheritance:
   :special-members:

*********************************
``matplotlib.fontconfig_pattern``
*********************************

.. automodule:: matplotlib.fontconfig_pattern
   :members:
   :undoc-members:
   :show-inheritance:
:mod:`.backend_pgf`
===================

.. automodule:: matplotlib.backends.backend_pgf
   :members:
   :undoc-members:
   :show-inheritance:
********************
``matplotlib.image``
********************

.. automodule:: matplotlib.image
   :members:
   :undoc-members:
   :show-inheritance:
********************
``matplotlib.style``
********************

Styles are predefined sets of `.rcParams` that define the visual appearance of
a plot.

:doc:`/tutorials/introductory/customizing` describes the mechanism and usage
of styles.

The :doc:`/gallery/style_sheets/style_sheets_reference` gives an overview of
the builtin styles.

.. automodule:: matplotlib.style
   :members:
   :undoc-members:
   :show-inheritance:
   :imported-members:

.. imported variables have to be specified explicitly due to
   https://github.com/sphinx-doc/sphinx/issues/6607

.. data:: matplotlib.style.library

   A dict mapping from style name to `.RcParams` defining that style.

   This is meant to be read-only. Use `.reload_library` to update.

.. data:: matplotlib.style.available

   List of the names of the available styles.

   This is meant to be read-only. Use `.reload_library` to update.
***************************
``matplotlib.font_manager``
***************************

.. automodule:: matplotlib.font_manager
   :members:
   :undoc-members:
   :show-inheritance:

.. autoclass:: FontEntry
   :no-undoc-members:
*********************
``matplotlib.spines``
*********************

.. automodule:: matplotlib.spines
   :members:
   :undoc-members:
   :show-inheritance:
*********************
``matplotlib.quiver``
*********************

.. currentmodule:: matplotlib.quiver

.. automodule:: matplotlib.quiver
   :no-members:
   :no-inherited-members:

Classes
-------

.. autosummary::
   :toctree: _as_gen/
   :template: autosummary.rst

   Quiver
   QuiverKey
   Barbs
******************
``matplotlib.afm``
******************

.. automodule:: matplotlib.afm
   :members:
   :undoc-members:
   :show-inheritance:
:mod:`.backend_template`
========================

.. automodule:: matplotlib.backends.backend_template
   :members:
   :undoc-members:
   :show-inheritance:
***************************
``matplotlib.tight_layout``
***************************

.. automodule:: matplotlib.tight_layout
   :members:
   :undoc-members:
   :show-inheritance:
**********************
``matplotlib.contour``
**********************

.. automodule:: matplotlib.contour
   :members:
   :undoc-members:
   :show-inheritance:
:mod:`.backend_nbagg`
=====================

.. automodule:: matplotlib.backends.backend_nbagg
   :members:
   :undoc-members:
   :show-inheritance:

:mod:`matplotlib.backend_managers`
==================================

.. automodule:: matplotlib.backend_managers
   :members:
   :undoc-members:
   :show-inheritance:
*******************
``matplotlib._api``
*******************

.. automodule:: matplotlib._api
   :members:
   :undoc-members:
   :show-inheritance:

.. automodule:: matplotlib._api.deprecation
   :members:
   :undoc-members:
   :show-inheritance:
************************
``matplotlib.container``
************************

.. automodule:: matplotlib.container
   :members:
   :undoc-members:
   :show-inheritance:
*************************
``matplotlib.texmanager``
*************************

.. automodule:: matplotlib.texmanager
   :members:
   :undoc-members:
   :show-inheritance:
*********************
``matplotlib.colors``
*********************

.. note::

   The Color :ref:`tutorials <tutorials-colors>` and :ref:`examples
   <color_examples>` demonstrate how to set colors and colormaps. You may want
   to read those instead.

.. currentmodule:: matplotlib.colors

.. automodule:: matplotlib.colors
   :no-members:
   :no-inherited-members:

Classes
-------

.. autosummary::
   :toctree: _as_gen/
   :template: autosummary.rst

   BoundaryNorm
   Colormap
   CenteredNorm
   LightSource
   LinearSegmentedColormap
   ListedColormap
   LogNorm
   NoNorm
   Normalize
   PowerNorm
   SymLogNorm
   TwoSlopeNorm
   FuncNorm

Functions
---------

.. autosummary::
   :toctree: _as_gen/
   :template: autosummary.rst

   from_levels_and_colors
   hsv_to_rgb
   rgb_to_hsv
   to_hex
   to_rgb
   to_rgba
   to_rgba_array
   is_color_like
   same_color
   get_named_colors_mapping
   make_norm_from_scale
***********************
``matplotlib.category``
***********************

.. automodule:: matplotlib.category
   :members:
   :undoc-members:
   :show-inheritance:
**************************
``matplotlib.patheffects``
**************************

.. automodule:: matplotlib.patheffects
   :members:
   :undoc-members:
   :show-inheritance:
.. _toolkit_mplot3d-index:
.. currentmodule:: mpl_toolkits.mplot3d

************************
``mpl_toolkits.mplot3d``
************************

The mplot3d toolkit adds simple 3D plotting capabilities (scatter, surface,
line, mesh, etc.) to Matplotlib by supplying an Axes object that can create
a 2D projection of a 3D scene.  The resulting graph will have the same look
and feel as regular 2D plots.  Not the fastest or most feature complete 3D
library out there, but it ships with Matplotlib and thus may be a lighter
weight solution for some use cases.

See the :doc:`mplot3d tutorial </tutorials/toolkits/mplot3d>` for
more information.

.. image:: /_static/demo_mplot3d.png
   :align: center

The interactive backends also provide the ability to rotate and zoom the 3D
scene.  One can rotate the 3D scene by simply clicking-and-dragging the scene.
Zooming is done by right-clicking the scene and dragging the mouse up and down
(unlike 2D plots, the toolbar zoom button is not used).

.. toctree::
   :maxdepth: 2

   mplot3d/faq.rst

.. note::
   `.pyplot` cannot be used to add content to 3D plots, because its function
   signatures are strictly 2D and cannot handle the additional information
   needed for 3D. Instead, use the explicit API by calling the respective
   methods on the `.Axes3D` object.

.. automodule:: mpl_toolkits.mplot3d
   :no-members:
   :no-undoc-members:

.. module:: mpl_toolkits.mplot3d.axes3d
.. currentmodule:: mpl_toolkits.mplot3d

:mod:`~mpl_toolkits.mplot3d.axes3d`
===================================

.. note::
   3D plotting in Matplotlib is still not as mature as the 2D case.
   Please report any functions that do not behave as expected as a bug.
   In addition, help and patches would be greatly appreciated!

.. autosummary::
   :toctree: ../_as_gen
   :template: autosummary.rst

   axes3d.Axes3D


.. module:: mpl_toolkits.mplot3d.axis3d
.. currentmodule:: mpl_toolkits.mplot3d

:mod:`~mpl_toolkits.mplot3d.axis3d`
===================================

.. note::
   See :attr:`mpl_toolkits.mplot3d.axis3d._axinfo` for a dictionary containing
   constants that may be modified for controlling the look and feel
   of mplot3d axes (e.g., label spacing, font colors and panel colors).
   Historically, axis3d has suffered from having hard-coded constants
   that precluded user adjustments, and this dictionary was implemented
   in version 1.1 as a stop-gap measure.


.. autosummary::
   :toctree: ../_as_gen
   :template: autosummary.rst

   axis3d.Axis


.. module:: mpl_toolkits.mplot3d.art3d
.. currentmodule:: mpl_toolkits.mplot3d

:mod:`~mpl_toolkits.mplot3d.art3d`
==================================

.. autosummary::
   :toctree: ../_as_gen
   :template: autosummary.rst

   art3d.Line3D
   art3d.Line3DCollection
   art3d.Patch3D
   art3d.Patch3DCollection
   art3d.Path3DCollection
   art3d.PathPatch3D
   art3d.Poly3DCollection
   art3d.Text3D
   art3d.get_dir_vector
   art3d.juggle_axes
   art3d.line_2d_to_3d
   art3d.line_collection_2d_to_3d
   art3d.patch_2d_to_3d
   art3d.patch_collection_2d_to_3d
   art3d.pathpatch_2d_to_3d
   art3d.poly_collection_2d_to_3d
   art3d.rotate_axes
   art3d.text_2d_to_3d

.. module:: mpl_toolkits.mplot3d.proj3d
.. currentmodule:: mpl_toolkits.mplot3d

:mod:`~mpl_toolkits.mplot3d.proj3d`
===================================

.. autosummary::
   :toctree: ../_as_gen
   :template: autosummary.rst

   proj3d.inv_transform
   proj3d.persp_transformation
   proj3d.proj_points
   proj3d.proj_trans_points
   proj3d.proj_transform
   proj3d.proj_transform_clip
   proj3d.rot_x
   proj3d.transform
   proj3d.view_transformation
   proj3d.world_transformation
.. _axes_grid-api-index:

``mpl_toolkits.axes_grid``
==========================

.. currentmodule:: mpl_toolkits

.. note::
   AxesGrid has been a part of matplotlib since v 0.99. Originally, the toolkit
   used the *axes_grid* namespace. In more recent versions, the toolkit
   has been split into *axes_grid1* and *axisartist*.  While *axes_grid*
   is maintained for the backward compatibility, use of *axes_grid1* and
   *axisartist* is recommended.  For the documentation on ``axes_grid``, see
   the `previous version of the docs`__.

   .. __: https://matplotlib.org/2.0.1/mpl_toolkits/axes_grid/index.html

.. toctree::
    :maxdepth: 1

    axes_grid1
    axisartist
.. module:: mpl_toolkits.axisartist

``mpl_toolkits.axisartist``
===========================

The *axisartist* namespace provides a derived Axes implementation
(:class:`mpl_toolkits.axisartist.Axes`), designed to support curvilinear
grids.  The biggest difference is that the artists that are responsible for
drawing axis lines, ticks, ticklabels, and axis labels are separated out from
Matplotlib's Axis class.

You can find a tutorial describing usage of axisartist at the
:ref:`axisartist_users-guide-index` user guide.

.. figure:: ../../gallery/axisartist/images/sphx_glr_demo_curvelinear_grid_001.png
   :target: ../../gallery/axisartist/demo_curvelinear_grid.html
   :align: center
   :scale: 50

.. currentmodule:: mpl_toolkits

**The submodules of the axisartist API are:**

.. autosummary::
   :toctree: ../_as_gen
   :template: automodule.rst

   axisartist.angle_helper
   axisartist.axes_divider
   axisartist.axes_grid
   axisartist.axes_rgb
   axisartist.axis_artist
   axisartist.axisline_style
   axisartist.axislines
   axisartist.clip_path
   axisartist.floating_axes
   axisartist.grid_finder
   axisartist.grid_helper_curvelinear
   axisartist.parasite_axes
.. module:: mpl_toolkits.axes_grid1

``mpl_toolkits.axes_grid1``
===========================

:mod:`mpl_toolkits.axes_grid1` provides a framework of helper classes to adjust
the positioning of multiple fixed-aspect Axes (e.g., displaying images).  It
can be contrasted with the ``aspect`` property of Matplotlib Axes, which
adjusts the position of a single Axes.

See :ref:`axes_grid1_users-guide-index` for a guide on the usage of axes_grid1.

.. figure:: ../../gallery/axes_grid1/images/sphx_glr_demo_axes_grid_001.png
   :target: ../../gallery/axes_grid1/demo_axes_grid.html
   :align: center
   :scale: 50

.. currentmodule:: mpl_toolkits

**The submodules of the axes_grid1 API are:**

.. autosummary::
   :toctree: ../_as_gen
   :template: automodule.rst

   axes_grid1.anchored_artists
   axes_grid1.axes_divider
   axes_grid1.axes_grid
   axes_grid1.axes_rgb
   axes_grid1.axes_size
   axes_grid1.inset_locator
   axes_grid1.mpl_axes
   axes_grid1.parasite_axes
.. _toolkit_mplot3d-faq:

***********
mplot3d FAQ
***********

How is mplot3d different from Mayavi?
=====================================
`Mayavi <https://docs.enthought.com/mayavi/mayavi/>`_
is a very powerful and featureful 3D graphing library. For advanced
3D scenes and excellent rendering capabilities, it is highly recommended to
use Mayavi.

mplot3d was intended to allow users to create simple 3D graphs with the same
"look-and-feel" as matplotlib's 2D plots. Furthermore, users can use the same
toolkit that they are already familiar with to generate both their 2D and 3D
plots.


My 3D plot doesn't look right at certain viewing angles
=======================================================
This is probably the most commonly reported issue with mplot3d. The problem
is that -- from some viewing angles -- a 3D object would appear in front
of another object, even though it is physically behind it. This can result in
plots that do not look "physically correct."

Unfortunately, while some work is being done to reduce the occurrence of this
artifact, it is currently an intractable problem, and can not be fully solved
until matplotlib supports 3D graphics rendering at its core.

The problem occurs due to the reduction of 3D data down to 2D + z-order
scalar. A single value represents the 3rd dimension for all parts of 3D
objects in a collection. Therefore, when the bounding boxes of two collections
intersect, it becomes possible for this artifact to occur. Furthermore, the
intersection of two 3D objects (such as polygons or patches) can not be
rendered properly in matplotlib's 2D rendering engine.

This problem will likely not be solved until OpenGL support is added to all of
the backends (patches are greatly welcomed). Until then, if you need complex
3D scenes, we recommend using
`MayaVi <https://docs.enthought.com/mayavi/mayavi/>`_.


I don't like how the 3D plot is laid out, how do I change that?
===============================================================
Historically, mplot3d has suffered from a hard-coding of parameters used
to control visuals such as label spacing, tick length, and grid line width.
Work is being done to eliminate this issue. For matplotlib v1.1.0, there is
a semi-official manner to modify these parameters. See the note in the
:mod:`.mplot3d.axis3d` section of the mplot3d API documentation for
more information.


Changes for 0.98.x
==================
* ``psd()``, ``csd()``, and ``cohere()`` will now automatically wrap negative
  frequency components to the beginning of the returned arrays.
  This is much more sensible behavior and makes them consistent
  with ``specgram()``.  The previous behavior was more of an oversight
  than a design decision.

* Added new keyword parameters *nonposx*, *nonposy* to
  :class:`matplotlib.axes.Axes` methods that set log scale
  parameters.  The default is still to mask out non-positive
  values, but the kwargs accept 'clip', which causes non-positive
  values to be replaced with a very small positive value.

* Added new :func:`matplotlib.pyplot.fignum_exists` and
  :func:`matplotlib.pyplot.get_fignums`; they merely expose
  information that had been hidden in ``matplotlib._pylab_helpers``.

* Deprecated numerix package.

* Added new :func:`matplotlib.image.imsave` and exposed it to the
  :mod:`matplotlib.pyplot` interface.

* Remove support for pyExcelerator in exceltools -- use xlwt
  instead

* Changed the defaults of acorr and xcorr to use usevlines=True,
  maxlags=10 and normed=True since these are the best defaults

* Following keyword parameters for :class:`matplotlib.legend.Legend` are now
  deprecated and new set of parameters are introduced. The new parameters
  are given as a fraction of the font-size. Also, *scatteryoffsets*,
  *fancybox* and *columnspacing* are added as keyword parameters.

        ================   ================
        Deprecated         New
        ================   ================
        pad                borderpad
        labelsep           labelspacing
        handlelen          handlelength
        handlestextsep     handletextpad
        axespad            borderaxespad
        ================   ================


* Removed the configobj and experimental traits rc support

* Modified :func:`matplotlib.mlab.psd`, :func:`matplotlib.mlab.csd`,
  :func:`matplotlib.mlab.cohere`, and :func:`matplotlib.mlab.specgram`
  to scale one-sided densities by a factor of 2.  Also, optionally
  scale the densities by the sampling frequency, which gives true values
  of densities that can be integrated by the returned frequency values.
  This also gives better MATLAB compatibility.  The corresponding
  :class:`matplotlib.axes.Axes` methods and :mod:`matplotlib.pyplot`
  functions were updated as well.

* Font lookup now uses a nearest-neighbor approach rather than an
  exact match.  Some fonts may be different in plots, but should be
  closer to what was requested.

* :meth:`matplotlib.axes.Axes.set_xlim`,
  :meth:`matplotlib.axes.Axes.set_ylim` now return a copy of the
  ``viewlim`` array to avoid modify-in-place surprises.

* ``matplotlib.afm.AFM.get_fullname`` and
  ``matplotlib.afm.AFM.get_familyname`` no longer raise an
  exception if the AFM file does not specify these optional
  attributes, but returns a guess based on the required FontName
  attribute.

* Changed precision kwarg in :func:`matplotlib.pyplot.spy`; default is
  0, and the string value 'present' is used for sparse arrays only to
  show filled locations.

* :class:`matplotlib.collections.EllipseCollection` added.

* Added ``angles`` kwarg to :func:`matplotlib.pyplot.quiver` for more
  flexible specification of the arrow angles.

* Deprecated (raise NotImplementedError) all the mlab2 functions from
  :mod:`matplotlib.mlab` out of concern that some of them were not
  clean room implementations.

* Methods :meth:`matplotlib.collections.Collection.get_offsets` and
  :meth:`matplotlib.collections.Collection.set_offsets` added to
  :class:`~matplotlib.collections.Collection` base class.

* ``matplotlib.figure.Figure.figurePatch`` renamed
  :attr:`matplotlib.figure.Figure.patch`;
  ``matplotlib.axes.Axes.axesPatch`` renamed
  :attr:`matplotlib.axes.Axes.patch`;
  ``matplotlib.axes.Axes.axesFrame`` renamed
  :attr:`matplotlib.axes.Axes.frame`.
  ``matplotlib.axes.Axes.get_frame``, which returns
  :attr:`matplotlib.axes.Axes.patch`, is deprecated.

* Changes in the :class:`matplotlib.contour.ContourLabeler` attributes
  (:func:`matplotlib.pyplot.clabel` function) so that they all have a
  form like ``.labelAttribute``.  The three attributes that are most
  likely to be used by end users, ``.cl``, ``.cl_xy`` and
  ``.cl_cvalues`` have been maintained for the moment (in addition to
  their renamed versions), but they are deprecated and will eventually
  be removed.

* Moved several functions in :mod:`matplotlib.mlab` and
  :mod:`matplotlib.cbook` into a separate module
  ``matplotlib.numerical_methods`` because they were unrelated to
  the initial purpose of mlab or cbook and appeared more coherent
  elsewhere.
API Changes for 3.3.0
=====================

.. contents::
   :local:
   :depth: 1

.. include:: /api/prev_api_changes/api_changes_3.3.0/behaviour.rst

.. include:: /api/prev_api_changes/api_changes_3.3.0/deprecations.rst

.. include:: /api/prev_api_changes/api_changes_3.3.0/removals.rst

.. include:: /api/prev_api_changes/api_changes_3.3.0/development.rst
Changes for 0.71
================

.. code-block:: text

   Significant numerix namespace changes, introduced to resolve
   namespace clashes between python built-ins and mlab names.
   Refactored numerix to maintain separate modules, rather than
   folding all these names into a single namespace.  See the following
   mailing list threads for more information and background

     http://sourceforge.net/mailarchive/forum.php?thread_id=6398890&forum_id=36187
     http://sourceforge.net/mailarchive/forum.php?thread_id=6323208&forum_id=36187


   OLD usage

     from matplotlib.numerix import array, mean, fft

   NEW usage

     from matplotlib.numerix import array
     from matplotlib.numerix.mlab import mean
     from matplotlib.numerix.fft import fft

   numerix dir structure mirrors numarray (though it is an incomplete
   implementation)

     numerix
     numerix/mlab
     numerix/linear_algebra
     numerix/fft
     numerix/random_array

   but of course you can use 'numerix : Numeric' and still get the
   symbols.

   pylab still imports most of the symbols from Numerix, MLab, fft,
   etc, but is more cautious.  For names that clash with python names
   (min, max, sum), pylab keeps the builtins and provides the numeric
   versions with an a* prefix, e.g., (amin, amax, asum)
API Changes for 3.0.0
=====================

Drop support for python 2
-------------------------

Matplotlib 3 only supports python 3.5 and higher.


Changes to backend loading
--------------------------

Failure to load backend modules (``macosx`` on non-framework builds and
``gtk3`` when running headless) now raises `ImportError` (instead of
`RuntimeError` and `TypeError`, respectively).

Third-party backends that integrate with an interactive framework are now
encouraged to define the ``required_interactive_framework`` global value to one
of the following values: "qt5", "qt4", "gtk3", "wx", "tk", or "macosx". This
information will be used to determine whether it is possible to switch from a
backend to another (specifically, whether they use the same interactive
framework).



`.Axes.hist2d` now uses `~.Axes.pcolormesh` instead of `~.Axes.pcolorfast`
--------------------------------------------------------------------------

`.Axes.hist2d` now uses `~.Axes.pcolormesh` instead of `~.Axes.pcolorfast`,
which will improve the handling of log-axes.  Note that the
returned *image* now is of type `~.matplotlib.collections.QuadMesh`
instead of `~.matplotlib.image.AxesImage`.

`.matplotlib.axes.Axes.get_tightbbox` now includes all artists
--------------------------------------------------------------

For Matplotlib 3.0, *all* artists are now included in the bounding box
returned by `.matplotlib.axes.Axes.get_tightbbox`.

`.matplotlib.axes.Axes.get_tightbbox` adds a new kwarg ``bbox_extra_artists``
to manually specify the list of artists on the axes to include in the
tight bounding box calculation.

Layout tools like `.Figure.tight_layout`, ``constrained_layout``,
and ``fig.savefig('fname.png', bbox_inches="tight")`` use
`.matplotlib.axes.Axes.get_tightbbox` to determine the bounds of each axes on
a figure and adjust spacing between axes.

In Matplotlib 2.2 ``get_tightbbox`` started to include legends made on the
axes, but still excluded some other artists, like text that may overspill an
axes.  This has been expanded to include *all* artists.

This new default may be overridden in either of three ways:

1. Make the artist to be excluded a child of the figure, not the axes. E.g.,
   call ``fig.legend()`` instead of ``ax.legend()`` (perhaps using
   `~.matplotlib.axes.Axes.get_legend_handles_labels` to gather handles and
   labels from the parent axes).
2. If the artist is a child of the axes, set the artist property
   ``artist.set_in_layout(False)``.
3. Manually specify a list of artists in the new kwarg ``bbox_extra_artists``.


`.Text.set_text` with string argument ``None`` sets string to empty
-------------------------------------------------------------------

`.Text.set_text` when passed a string value of ``None`` would set the
string to ``"None"``, so subsequent calls to `.Text.get_text` would return
the ambiguous ``"None"`` string.

This change sets text objects passed ``None`` to have empty strings, so that
`.Text.get_text` returns an empty string.




``Axes3D.get_xlim``, ``get_ylim`` and ``get_zlim`` now return a tuple
---------------------------------------------------------------------

They previously returned an array.  Returning a tuple is consistent with the
behavior for 2D axes.




``font_manager.list_fonts`` now follows the platform's casefolding semantics
----------------------------------------------------------------------------

i.e., it behaves case-insensitively on Windows only.


``bar`` / ``barh`` no longer accepts ``left`` / ``bottom`` as first named argument
----------------------------------------------------------------------------------

These arguments were renamed in 2.0 to ``x`` / ``y`` following the change of the
default alignment from ``edge`` to ``center``.


Different exception types for undocumented options
--------------------------------------------------

- Passing ``style='comma'`` to :meth:`~matplotlib.axes.Axes.ticklabel_format`
  was never supported.  It now raises ``ValueError`` like all other
  unsupported styles, rather than ``NotImplementedError``.

- Passing the undocumented ``xmin`` or ``xmax`` arguments to
  :meth:`~matplotlib.axes.Axes.set_xlim` would silently override the ``left``
  and ``right`` arguments.  :meth:`~matplotlib.axes.Axes.set_ylim` and the
  3D equivalents (e.g. `~.Axes3D.set_zlim3d`) had a
  corresponding problem.
  A ``TypeError`` will be raised if they would override the earlier
  limit arguments.  In 3.0 these were kwargs were deprecated, but in 3.1
  the deprecation was undone.


Improved call signature for ``Axes.margins``
--------------------------------------------

`.Axes.margins` and `.Axes3D.margins`
no longer accept arbitrary keywords. ``TypeError`` will therefore be raised
if unknown kwargs are passed; previously they would be silently ignored.

If too many positional arguments are passed, ``TypeError`` will be raised
instead of ``ValueError``, for consistency with other call-signature violations.

`.Axes3D.margins` now raises ``TypeError`` instead of emitting a deprecation
warning if only two positional arguments are passed.  To supply only ``x`` and
``y`` margins, use keyword arguments.



Explicit arguments instead of \*args, \*\*kwargs
------------------------------------------------

:PEP:`3102` describes keyword-only arguments, which allow Matplotlib
to provide explicit call signatures - where we previously used
``*args, **kwargs`` and ``kwargs.pop``, we can now expose named
arguments.  In some places, unknown kwargs were previously ignored but
now raise ``TypeError`` because ``**kwargs`` has been removed.

- :meth:`matplotlib.axes.Axes.stem` no longer accepts unknown keywords,
  and raises ``TypeError`` instead of emitting a deprecation.
- :meth:`matplotlib.axes.Axes.stem` now raises TypeError when passed
  unhandled positional arguments.  If two or more arguments are passed
  (ie X, Y, [linefmt], ...) and Y cannot be cast to an array, an error
  will be raised instead of treating X as Y and Y as linefmt.
- `mpl_toolkits.axes_grid1.axes_divider.SubplotDivider` raises
  ``TypeError`` instead of ``Exception`` when passed unknown kwargs.



Cleanup decorators and test classes no longer destroy warnings filter on exit
-----------------------------------------------------------------------------

The decorators and classes in matplotlib.testing.decorators no longer
destroy the warnings filter on exit. Instead, they restore the warnings
filter that existed before the test started using ``warnings.catch_warnings``.


Non-interactive FigureManager classes are now aliases of FigureManagerBase
--------------------------------------------------------------------------

The ``FigureManagerPdf``, ``FigureManagerPS``, and ``FigureManagerSVG`` classes,
which were previously empty subclasses of `.FigureManagerBase` (i.e., not
adding or overriding any attribute or method), are now direct aliases for
`.FigureManagerBase`.


Change to the output of `.image.thumbnail`
------------------------------------------

When called with ``preview=False``, `.image.thumbnail` previously returned an
figure whose canvas class was set according to the output file extension.  It
now returns a figure whose canvas class is the base `.FigureCanvasBase` (and
relies on `.FigureCanvasBase.print_figure`) to handle the canvas switching
properly).

As a side effect of this change, `.image.thumbnail` now also supports .ps, .eps,
and .svgz output.



`.FuncAnimation` now draws artists according to their zorder when blitting
--------------------------------------------------------------------------

`.FuncAnimation` now draws artists returned by the user-
function according to their zorder when using blitting,
instead of using the order in which they are being passed.
However, note that only zorder of passed artists will be
respected, as they are drawn on top of any existing artists
(see `#11369 <https://github.com/matplotlib/matplotlib/issues/11369>`_).


Contour color autoscaling improvements
--------------------------------------

Selection of contour levels is now the same for contour and
contourf; previously, for contour, levels outside the data range were
deleted.  (Exception: if no contour levels are found within the
data range, the ``levels`` attribute is replaced with a list holding
only the minimum of the data range.)

When contour is called with levels specified as a target number rather
than a list, and the 'extend' kwarg is used, the levels are now chosen
such that some data typically will fall in the extended range.

When contour is called with a `.LogNorm` or a `.LogLocator`, it will now
select colors using the geometric mean rather than the arithmetic mean
of the contour levels.


Streamplot last row and column fixed
------------------------------------

A bug was fixed where the last row and column of data in
`~.Axes.streamplot` were being dropped.


Changed default `.AutoDateLocator` kwarg *interval_multiples* to ``True``
-------------------------------------------------------------------------

The default value of the tick locator for dates, `.dates.AutoDateLocator`
kwarg *interval_multiples* was set to ``False`` which leads to not-nice
looking automatic ticks in many instances.  The much nicer
``interval_multiples=True`` is the new default.  See below to get the
old behavior back:

  .. plot::

    import matplotlib.pyplot as plt
    import datetime
    import matplotlib.dates as mdates

    t0 = datetime.datetime(2009, 8, 20, 1, 10, 12)
    tf = datetime.datetime(2009, 8, 20, 1, 42, 11)


    fig, axs = plt.subplots(1, 2, constrained_layout=True)
    ax = axs[0]
    ax.axhspan(t0, tf, facecolor="blue", alpha=0.25)
    ax.set_ylim(t0 - datetime.timedelta(minutes=3),
                tf + datetime.timedelta(minutes=3))
    ax.set_title('NEW DEFAULT')

    ax = axs[1]
    ax.axhspan(t0, tf, facecolor="blue", alpha=0.25)
    ax.set_ylim(t0 - datetime.timedelta(minutes=3),
                tf + datetime.timedelta(minutes=3))
    # old behavior
    locator = mdates.AutoDateLocator(interval_multiples=False, )
    ax.yaxis.set_major_locator(locator)
    ax.yaxis.set_major_formatter(mdates.AutoDateFormatter(locator))

    ax.set_title('OLD')
    plt.show()


`.Axes.get_position` now returns actual position if aspect changed
------------------------------------------------------------------

`.Axes.get_position` used to return the original position unless a
draw had been triggered or `.Axes.apply_aspect` had been called, even
if the kwarg *original* was set to ``False``.   Now `.Axes.apply_aspect`
is called so ``ax.get_position()`` will return the new modified position.
To get the old behavior use ``ax.get_position(original=True)``.


The ticks for colorbar now adjust for the size of the colorbar
--------------------------------------------------------------

Colorbar ticks now adjust for the size of the colorbar if the
colorbar is made from a mappable that is not a contour or
doesn't have a BoundaryNorm, or boundaries are not specified.
If boundaries, etc are specified, the colorbar maintains the
original behavior.


Colorbar for log-scaled hexbin
------------------------------

When using `~.Axes.hexbin` and plotting with a logarithmic color scale, the colorbar
ticks are now correctly log scaled. Previously the tick values were linear
scaled log(number of counts).

PGF backend now explicitly makes black text black
-------------------------------------------------

Previous behavior with the pgf backend was for text specified as black to
actually be the default color of whatever was rendering the pgf file (which was
of course usually black). The new behavior is that black text is black,
regardless of the default color. However, this means that there is no way to
fall back on the default color of the renderer.


Blacklisted rcparams no longer updated by `~matplotlib.rcdefaults`, `~matplotlib.rc_file_defaults`, `~matplotlib.rc_file`
-------------------------------------------------------------------------------------------------------------------------

The rc modifier functions `~matplotlib.rcdefaults`,
`~matplotlib.rc_file_defaults` and `~matplotlib.rc_file`
now ignore rcParams in the `matplotlib.style.core.STYLE_BLACKLIST` set.  In
particular, this prevents the ``backend`` and ``interactive`` rcParams from
being incorrectly modified by these functions.



`.CallbackRegistry` now stores callbacks using stdlib's `weakref.WeakMethod`\s
------------------------------------------------------------------------------

In particular, this implies that ``CallbackRegistry.callbacks[signal]`` is now
a mapping of callback ids to `weakref.WeakMethod`\s (i.e., they need to be first called
with no arguments to retrieve the method itself).


Changes regarding the text.latex.unicode rcParam
------------------------------------------------

The rcParam now defaults to True and is deprecated (i.e., in future versions
of Matplotlib, unicode input will always be supported).

Moreover, the underlying implementation now uses ``\usepackage[utf8]{inputenc}``
instead of ``\usepackage{ucs}\usepackage[utf8x]{inputenc}``.


Return type of ArtistInspector.get_aliases changed
--------------------------------------------------

`ArtistInspector.get_aliases` previously returned the set of aliases as
``{fullname: {alias1: None, alias2: None, ...}}``.  The dict-to-None mapping
was used to simulate a set in earlier versions of Python.  It has now been
replaced by a set, i.e. ``{fullname: {alias1, alias2, ...}}``.

This value is also stored in `.ArtistInspector.aliasd`, which has likewise
changed.


Removed ``pytz`` as a dependency
--------------------------------

Since ``dateutil`` and ``pytz`` both provide time zones, and
matplotlib already depends on ``dateutil``, matplotlib will now use
``dateutil`` time zones internally and drop the redundant dependency
on ``pytz``. While ``dateutil`` time zones are preferred (and
currently recommended in the Python documentation), the explicit use
of ``pytz`` zones is still supported.

Deprecations
------------

Modules
```````
The following modules are deprecated:

- ``matplotlib.compat.subprocess``. This was a python 2 workaround, but all
  the functionality can now be found in the python 3 standard library
  :mod:`subprocess`.
- ``matplotlib.backends.wx_compat``. Python 3 is only compatible with
  wxPython 4, so support for wxPython 3 or earlier can be dropped.

Classes, methods, functions, and attributes
```````````````````````````````````````````

The following classes, methods, functions, and attributes are deprecated:

- ``RcParams.msg_depr``, ``RcParams.msg_depr_ignore``,
  ``RcParams.msg_depr_set``, ``RcParams.msg_obsolete``,
  ``RcParams.msg_backend_obsolete``
- ``afm.parse_afm``
- ``backend_pdf.PdfFile.texFontMap``
- ``backend_pgf.get_texcommand``
- ``backend_ps.get_bbox``
- ``backend_qt5.FigureCanvasQT.keyAutoRepeat`` (directly check
  ``event.guiEvent.isAutoRepeat()`` in the event handler to decide whether to
  handle autorepeated key presses).
- ``backend_qt5.error_msg_qt``, ``backend_qt5.exception_handler``
- ``backend_wx.FigureCanvasWx.macros``
- ``backends.pylab_setup``
- ``cbook.GetRealpathAndStat``, ``cbook.Locked``
- ``cbook.is_numlike`` (use ``isinstance(..., numbers.Number)`` instead),
  ``cbook.listFiles``, ``cbook.unicode_safe``
- ``container.Container.set_remove_method``,
- ``contour.ContourLabeler.cl``, ``.cl_xy``, and ``.cl_cvalues``
- ``dates.DateFormatter.strftime_pre_1900``, ``dates.DateFormatter.strftime``
- ``font_manager.TempCache``
- ``image._ImageBase.iterpnames``, use the ``interpolation_names`` property
  instead. (this affects classes that inherit from ``_ImageBase`` including
  `.FigureImage`, `.BboxImage`, and `.AxesImage`)
- ``mathtext.unichr_safe`` (use ``chr`` instead)
- ``patches.Polygon.xy``
- ``table.Table.get_child_artists`` (use ``get_children`` instead)
- ``testing.compare.ImageComparisonTest``, ``testing.compare.compare_float``
- ``testing.decorators.CleanupTest``,
  ``testing.decorators.skip_if_command_unavailable``
- ``FigureCanvasQT.keyAutoRepeat`` (directly check
  ``event.guiEvent.isAutoRepeat()`` in the event handler to decide whether to
  handle autorepeated key presses)
- ``FigureCanvasWx.macros``
- ``_ImageBase.iterpnames``, use the ``interpolation_names`` property instead.
  (this affects classes that inherit from ``_ImageBase`` including
  `.FigureImage`, `.BboxImage`, and `.AxesImage`)
- ``patches.Polygon.xy``
- ``texmanager.dvipng_hack_alpha``
- ``text.Annotation.arrow``
- ``Legend.draggable()``, in favor of `.Legend.set_draggable()`
   (``Legend.draggable`` may be reintroduced as a property in future releases)
- ``textpath.TextToPath.tex_font_map``
- ``matplotlib.cbook.deprecation.mplDeprecation`` will be removed
  in future versions. It is just an alias for
  ``matplotlib.cbook.deprecation.MatplotlibDeprecationWarning``.  Please
  use ``matplotlib.cbook.MatplotlibDeprecationWarning`` directly if necessary.
- The ``matplotlib.cbook.Bunch`` class has been deprecated. Instead, use
  `types.SimpleNamespace` from the standard library which provides the same
  functionality.
- ``Axes.mouseover_set`` is now a frozenset, and deprecated.  Directly
  manipulate the artist's ``.mouseover`` attribute to change their mouseover
  status.

The following keyword arguments are deprecated:

- passing ``verts`` to ``Axes.scatter`` (use ``marker`` instead)
- passing ``obj_type`` to ``cbook.deprecated``

The following call signatures are deprecated:

- passing a ``wx.EvtHandler`` as first argument to ``backend_wx.TimerWx``


rcParams
````````

The following rcParams are deprecated:

- ``examples.directory`` (use ``datapath`` instead)
- ``pgf.debug`` (the pgf backend relies on logging)
- ``text.latex.unicode`` (always True now)


marker styles
`````````````
- Using ``(n, 3)`` as marker style to specify a circle marker is deprecated.  Use
  ``"o"`` instead.
- Using ``([(x0, y0), (x1, y1), ...], 0)`` as marker style to specify a custom
  marker path is deprecated.  Use ``[(x0, y0), (x1, y1), ...]`` instead.


Deprecation of ``LocatableAxes`` in toolkits
````````````````````````````````````````````

The ``LocatableAxes`` classes in toolkits have been deprecated. The base `~.axes.Axes`
classes provide the same functionality to all subclasses, thus these mixins are
no longer necessary. Related functions have also been deprecated. Specifically:

* ``mpl_toolkits.axes_grid1.axes_divider.LocatableAxesBase``: no specific
  replacement; use any other ``Axes``-derived class directly instead.
* ``mpl_toolkits.axes_grid1.axes_divider.locatable_axes_factory``: no specific
  replacement; use any other ``Axes``-derived class directly instead.
* ``mpl_toolkits.axes_grid1.axes_divider.Axes``: use
  `mpl_toolkits.axes_grid1.mpl_axes.Axes` directly.
* ``mpl_toolkits.axes_grid1.axes_divider.LocatableAxes``: use
  `mpl_toolkits.axes_grid1.mpl_axes.Axes` directly.
* ``mpl_toolkits.axisartist.axes_divider.Axes``: use
  `mpl_toolkits.axisartist.axislines.Axes` directly.
* ``mpl_toolkits.axisartist.axes_divider.LocatableAxes``: use
  `mpl_toolkits.axisartist.axislines.Axes` directly.

Removals
--------

Hold machinery
``````````````

Setting or unsetting ``hold`` (:ref:`deprecated in version 2.0<v200_deprecate_hold>`) has now
been completely removed. Matplotlib now always behaves as if ``hold=True``.
To clear an axes you can manually use :meth:`~.axes.Axes.cla()`,
or to clear an entire figure use :meth:`~.figure.Figure.clf()`.


Removal of deprecated backends
``````````````````````````````

Deprecated backends have been removed:

- GTKAgg
- GTKCairo
- GTK
- GDK


Deprecated APIs
```````````````

The following deprecated API elements have been removed:

- The deprecated methods ``knownfailureif`` and ``remove_text`` have been removed
  from :mod:`matplotlib.testing.decorators`.
- The entire contents of ``testing.noseclasses`` have also been removed.
- ``matplotlib.checkdep_tex``, ``matplotlib.checkdep_xmllint``
- ``backend_bases.IdleEvent``
- ``cbook.converter``, ``cbook.tostr``, ``cbook.todatetime``, ``cbook.todate``,
  ``cbook.tofloat``, ``cbook.toint``, ``cbook.unique``,
  ``cbook.is_string_like``, ``cbook.is_sequence_of_strings``,
  ``cbook.is_scalar``, ``cbook.soundex``, ``cbook.dict_delall``,
  ``cbook.get_split_ind``, ``cbook.wrap``, ``cbook.get_recursive_filelist``,
  ``cbook.pieces``, ``cbook.exception_to_str``, ``cbook.allequal``,
  ``cbook.alltrue``, ``cbook.onetrue``, ``cbook.allpairs``, ``cbook.finddir``,
  ``cbook.reverse_dict``, ``cbook.restrict_dict``, ``cbook.issubclass_safe``,
  ``cbook.recursive_remove``, ``cbook.unmasked_index_ranges``,
  ``cbook.Null``, ``cbook.RingBuffer``, ``cbook.Sorter``, ``cbook.Xlator``,
- ``font_manager.weight_as_number``, ``font_manager.ttfdict_to_fnames``
- ``pyplot.colors``, ``pyplot.spectral``
- ``rcsetup.validate_negative_linestyle``,
  ``rcsetup.validate_negative_linestyle_legacy``,
- ``testing.compare.verifiers``, ``testing.compare.verify``
- ``testing.decorators.knownfailureif``,
  ``testing.decorators.ImageComparisonTest.remove_text``
- ``tests.assert_str_equal``, ``tests.test_tinypages.file_same``
- ``texmanager.dvipng_hack_alpha``,
- ``_AxesBase.axesPatch``, ``_AxesBase.set_color_cycle``,
  ``_AxesBase.get_cursor_props``, ``_AxesBase.set_cursor_props``
- ``_ImageBase.iterpnames``
- ``FigureCanvasBase.start_event_loop_default``;
- ``FigureCanvasBase.stop_event_loop_default``;
- ``Figure.figurePatch``,
- ``FigureCanvasBase.dynamic_update``, ``FigureCanvasBase.idle_event``,
  ``FigureCanvasBase.get_linestyle``, ``FigureCanvasBase.set_linestyle``
- ``FigureCanvasQTAggBase``
- ``FigureCanvasQTAgg.blitbox``
- ``FigureCanvasTk.show`` (alternative: ``FigureCanvasTk.draw``)
- ``FigureManagerTkAgg`` (alternative: ``FigureManagerTk``)
- ``NavigationToolbar2TkAgg`` (alternative: ``NavigationToolbar2Tk``)
- ``backend_wxagg.Toolbar`` (alternative: ``backend_wxagg.NavigationToolbar2WxAgg``)
- ``RendererAgg.debug()``
- passing non-numbers to ``EngFormatter.format_eng``
- passing ``frac`` to ``PolarAxes.set_theta_grids``
- any mention of idle events

The following API elements have been removed:

- ``backend_cairo.HAS_CAIRO_CFFI``
- ``sphinxext.sphinx_version``


Proprietary sphinx directives
`````````````````````````````

The matplotlib documentation used the proprietary sphinx directives
``.. htmlonly::``, and ``.. latexonly::``. These have been replaced with the
standard sphinx directives ``.. only:: html`` and ``.. only:: latex``. This
change will not affect any users. Only downstream package maintainers, who
have used the proprietary directives in their docs, will have to switch to the
sphinx directives.


lib/mpl_examples symlink
````````````````````````

The symlink from lib/mpl_examples to ../examples has been removed.
This is not installed as an importable package and should not affect
end users, however this may require down-stream packagers to adjust.
The content is still available top-level examples directory.
API Changes in 1.4.x
====================

Code changes
------------

* A major refactoring of the axes module was made. The axes module has been
  split into smaller modules:

    - the ``_base`` module, which contains a new private ``_AxesBase`` class.
      This class contains all methods except plotting and labelling methods.
    - the `~matplotlib.axes` module, which contains the `.axes.Axes` class.
      This class inherits from ``_AxesBase``, and contains all plotting and
      labelling methods.
    - the ``_subplot`` module, with all the classes concerning subplotting.

There are a couple of things that do not exists in the `~matplotlib.axes`
module's namespace anymore. If you use them, you need to import them from their
original location:

  - ``math`` -> ``import math``
  - ``ma`` -> ``from numpy import ma``
  - ``cbook`` -> ``from matplotlib import cbook``
  - ``docstring`` -> ``from matplotlib import docstring``
  - ``is_sequence_of_strings`` -> ``from matplotlib.cbook import is_sequence_of_strings``
  - ``is_string_like`` -> ``from matplotlib.cbook import is_string_like``
  - ``iterable`` -> ``from matplotlib.cbook import iterable``
  - ``itertools`` -> ``import itertools``
  - ``martist`` -> ``from matplotlib import artist as martist``
  - ``matplotlib`` -> ``import matplotlib``
  - ``mcoll`` -> ``from matplotlib import collections as mcoll``
  - ``mcolors`` -> ``from matplotlib import colors as mcolors``
  - ``mcontour`` -> ``from matplotlib import contour as mcontour``
  - ``mpatches`` -> ``from matplotlib import patches as mpatches``
  - ``mpath`` -> ``from matplotlib import path as mpath``
  - ``mquiver`` -> ``from matplotlib import quiver as mquiver``
  - ``mstack`` -> ``from matplotlib import stack as mstack``
  - ``mstream`` -> ``from matplotlib import stream as mstream``
  - ``mtable`` -> ``from matplotlib import table as mtable``

* As part of the refactoring to enable Qt5 support, the module
  ``matplotlib.backends.qt4_compat`` was renamed to
  ``matplotlib.backends.qt_compat``.  ``qt4_compat`` is deprecated in 1.4 and
  will be removed in 1.5.

* The :func:`~matplotlib.pyplot.errorbar` method has been changed such that
  the upper and lower limits (*lolims*, *uplims*, *xlolims*, *xuplims*) now
  point in the correct direction.

* The *fmt* kwarg for :func:`~matplotlib.pyplot.errorbar` now supports
  the string 'none' to suppress drawing of a line and markers; use
  of the *None* object for this is deprecated. The default *fmt*
  value is changed to the empty string (''), so the line and markers
  are governed by the :func:`~matplotlib.pyplot.plot` defaults.

* A bug has been fixed in the path effects rendering of fonts, which now means
  that the font size is consistent with non-path effect fonts. See
  https://github.com/matplotlib/matplotlib/issues/2889 for more detail.

* The Sphinx extensions ``ipython_directive`` and
  ``ipython_console_highlighting`` have been moved to the IPython
  project itself.  While they remain in Matplotlib for this release,
  they have been deprecated.  Update your extensions in :file:`conf.py` to
  point to ``IPython.sphinxext.ipython_directive`` instead of
  ``matplotlib.sphinxext.ipython_directive``.

* In ``matplotlib.finance``, almost all functions have been deprecated
  and replaced with a pair of functions name ``*_ochl`` and ``*_ohlc``.
  The former is the 'open-close-high-low' order of quotes used
  previously in this module, and the latter is the
  'open-high-low-close' order that is standard in finance.

* For consistency the ``face_alpha`` keyword to
  :class:`matplotlib.patheffects.SimplePatchShadow` has been deprecated in
  favour of the ``alpha`` keyword. Similarly, the keyword ``offset_xy`` is now
  named ``offset`` across all :class:`~matplotlib.patheffects.AbstractPathEffect`\ s.
  ``matplotlib.patheffects._Base`` has
  been renamed to :class:`matplotlib.patheffects.AbstractPathEffect`.
  ``matplotlib.patheffect.ProxyRenderer`` has been renamed to
  :class:`matplotlib.patheffects.PathEffectRenderer` and is now a full
  RendererBase subclass.

* The artist used to draw the outline of a `.Figure.colorbar` has been changed
  from a `matplotlib.lines.Line2D` to `matplotlib.patches.Polygon`, thus
  `.colorbar.ColorbarBase.outline` is now a `matplotlib.patches.Polygon`
  object.

* The legend handler interface has changed from a callable, to any object
  which implements the ``legend_artists`` method (a deprecation phase will
  see this interface be maintained for v1.4). See
  :doc:`/tutorials/intermediate/legend_guide` for further details. Further legend changes
  include:

   * ``matplotlib.axes.Axes._get_legend_handles`` now returns a generator of
     handles, rather than a list.

   * The :func:`~matplotlib.pyplot.legend` function's *loc* positional
     argument has been deprecated. Use the *loc* keyword argument instead.

* The :rc:`savefig.transparent` has been added to control
  default transparency when saving figures.

* Slightly refactored the `.Annotation` family.  The text location in
  `.Annotation` is now entirely handled by the underlying `.Text`
  object so ``.set_position`` works as expected.  The attributes *xytext* and
  *textcoords* have been deprecated in favor of *xyann* and *anncoords* so
  that `.Annotation` and `.AnnotationBbox` can share a common sensibly named
  api for getting/setting the location of the text or box.

    - *xyann* -> set the location of the annotation
    - *xy* -> set where the arrow points to
    - *anncoords* -> set the units of the annotation location
    - *xycoords* -> set the units of the point location
    - ``set_position()`` -> `.Annotation` only set location of annotation

* `matplotlib.mlab.specgram`, `matplotlib.mlab.psd`,  `matplotlib.mlab.csd`,
  `matplotlib.mlab.cohere`, ``matplotlib.mlab.cohere_pairs``,
  `matplotlib.pyplot.specgram`, `matplotlib.pyplot.psd`,
  `matplotlib.pyplot.csd`, and `matplotlib.pyplot.cohere` now raise
  ValueError where they previously raised AssertionError.

* For `matplotlib.mlab.psd`,  `matplotlib.mlab.csd`,
  `matplotlib.mlab.cohere`, ``matplotlib.mlab.cohere_pairs``,
  `matplotlib.pyplot.specgram`, `matplotlib.pyplot.psd`,
  `matplotlib.pyplot.csd`, and `matplotlib.pyplot.cohere`, in cases
  where a shape (n, 1) array is returned, this is now converted to a (n, )
  array.  Previously, (n, m) arrays were averaged to an (n, ) array, but
  (n, 1) arrays were returned unchanged.  This change makes the dimensions
  consistent in both cases.

* Added the :rc:`axes.formatter.useoffset` to control the default value
  of *useOffset* in `.ticker.ScalarFormatter`

* Added `.Formatter` sub-class `.StrMethodFormatter` which
  does the exact same thing as `.FormatStrFormatter`, but for new-style
  formatting strings.

* Deprecated ``matplotlib.testing.image_util`` and the only function within,
  ``matplotlib.testing.image_util.autocontrast``. These will be removed
  completely in v1.5.0.

* The ``fmt`` argument of :meth:`~matplotlib.axes.Axes.plot_date` has been
  changed from ``bo`` to just ``o``, so color cycling can happen by default.

* Removed the class ``FigureManagerQTAgg`` and deprecated
  ``NavigationToolbar2QTAgg`` which will be removed in 1.5.

* Removed formerly public (non-prefixed) attributes ``rect`` and
  ``drawRect`` from ``FigureCanvasQTAgg``; they were always an
  implementation detail of the (preserved) ``drawRectangle()`` function.

* The function signatures of ``matplotlib.tight_bbox.adjust_bbox`` and
  ``matplotlib.tight_bbox.process_figure_for_rasterizing`` have been changed.
  A new *fixed_dpi* parameter allows for overriding the ``figure.dpi`` setting
  instead of trying to deduce the intended behaviour from the file format.

* Added support for horizontal/vertical axes padding to
  `mpl_toolkits.axes_grid1.axes_grid.ImageGrid` --- argument *axes_pad* can now
  be tuple-like if separate axis padding is required.
  The original behavior is preserved.

* Added support for skewed transforms to `matplotlib.transforms.Affine2D`,
  which can be created using the `~.Affine2D.skew` and `~.Affine2D.skew_deg`
  methods.

* Added clockwise parameter to control sectors direction in `.axes.Axes.pie`

* In `matplotlib.lines.Line2D` the *markevery* functionality has been extended.
  Previously an integer start-index and stride-length could be specified using
  either a two-element-list or a two-element-tuple.  Now this can only be done
  using a two-element-tuple.  If a two-element-list is used then it will be
  treated as NumPy fancy indexing and only the two markers corresponding to the
  given indexes will be shown.

* Removed *prop* keyword argument from
  `mpl_toolkits.axes_grid1.anchored_artists.AnchoredSizeBar` call.  It was
  passed through to the base-class ``__init__`` and is only used for setting
  padding.  Now *fontproperties* (which is what is really used to set the font
  properties of `.AnchoredSizeBar`) is passed through in place of *prop*.  If
  *fontproperties* is not passed in, but *prop* is, then *prop* is used in
  place of *fontproperties*.  If both are passed in, *prop* is silently
  ignored.


* The use of the index 0 in `.pyplot.subplot` and related commands is
  deprecated.  Due to a lack of validation, calling ``plt.subplots(2, 2, 0)``
  does not raise an exception, but puts an axes in the _last_
  position.  This is due to the indexing in subplot being 1-based (to
  mirror MATLAB) so before indexing into the `.GridSpec` object used to
  determine where the axes should go, 1 is subtracted off.  Passing in
  0 results in passing -1 to `.GridSpec` which results in getting the
  last position back.  Even though this behavior is clearly wrong and
  not intended, we are going through a deprecation cycle in an
  abundance of caution that any users are exploiting this 'feature'.
  The use of 0 as an index will raise a warning in 1.4 and an
  exception in 1.5.

* Clipping is now off by default on offset boxes.

* Matplotlib now uses a less-aggressive call to ``gc.collect(1)`` when
  closing figures to avoid major delays with large numbers of user objects
  in memory.

* The default clip value of *all* pie artists now defaults to ``False``.


Code removal
------------

* Removed ``mlab.levypdf``.  The code raised a NumPy error (and has for
  a long time) and was not the standard form of the Levy distribution.
  ``scipy.stats.levy`` should be used instead
Changes for 0.70
================

.. code-block:: text

   MplEvent factored into a base class Event and derived classes
   MouseEvent and KeyEvent

   Removed definct set_measurement in wx toolbar
Changes in 0.99
===============

* pylab no longer provides a load and save function.  These are
  available in matplotlib.mlab, or you can use numpy.loadtxt and
  numpy.savetxt for text files, or np.save and np.load for binary
  NumPy arrays.

* User-generated colormaps can now be added to the set recognized
  by :func:`matplotlib.cm.get_cmap`.  Colormaps can be made the
  default and applied to the current image using
  :func:`matplotlib.pyplot.set_cmap`.

* changed use_mrecords default to False in mlab.csv2rec since this is
  partially broken

* Axes instances no longer have a "frame" attribute. Instead, use the
  new "spines" attribute. Spines is a dictionary where the keys are
  the names of the spines (e.g., 'left','right' and so on) and the
  values are the artists that draw the spines. For normal
  (rectilinear) axes, these artists are Line2D instances. For other
  axes (such as polar axes), these artists may be Patch instances.

* Polar plots no longer accept a resolution kwarg.  Instead, each Path
  must specify its own number of interpolation steps.  This is
  unlikely to be a user-visible change -- if interpolation of data is
  required, that should be done before passing it to Matplotlib.
API Changes in 1.2.x
====================

* The ``classic`` option of the rc parameter ``toolbar`` is deprecated
  and will be removed in the next release.

* The ``matplotlib.cbook.isvector`` method has been removed since it
  is no longer functional.

* The ``rasterization_zorder`` property on `~matplotlib.axes.Axes` sets a
  zorder below which artists are rasterized.  This has defaulted to
  -30000.0, but it now defaults to *None*, meaning no artists will be
  rasterized.  In order to rasterize artists below a given zorder
  value, `.set_rasterization_zorder` must be explicitly called.

* In :meth:`~matplotlib.axes.Axes.scatter`, and `~.pyplot.scatter`,
  when specifying a marker using a tuple, the angle is now specified
  in degrees, not radians.

* Using :meth:`~matplotlib.axes.Axes.twinx` or
  :meth:`~matplotlib.axes.Axes.twiny` no longer overrides the current locaters
  and formatters on the axes.

* In :meth:`~matplotlib.axes.Axes.contourf`, the handling of the *extend*
  kwarg has changed.  Formerly, the extended ranges were mapped
  after to 0, 1 after being normed, so that they always corresponded
  to the extreme values of the colormap.  Now they are mapped
  outside this range so that they correspond to the special
  colormap values determined by the
  :meth:`~matplotlib.colors.Colormap.set_under` and
  :meth:`~matplotlib.colors.Colormap.set_over` methods, which
  default to the colormap end points.

* The new rc parameter ``savefig.format`` replaces ``cairo.format`` and
  ``savefig.extension``, and sets the default file format used by
  :meth:`matplotlib.figure.Figure.savefig`.

* In :func:`.pyplot.pie` and :meth:`.axes.Axes.pie`, one can now set the radius
  of the pie; setting the *radius* to 'None' (the default value), will result
  in a pie with a radius of 1 as before.

* Use of ``matplotlib.projections.projection_factory`` is now deprecated
  in favour of axes class identification using
  ``matplotlib.projections.process_projection_requirements`` followed by
  direct axes class invocation (at the time of writing, functions which do this
  are: :meth:`~matplotlib.figure.Figure.add_axes`,
  :meth:`~matplotlib.figure.Figure.add_subplot` and
  :meth:`~matplotlib.figure.Figure.gca`). Therefore::


      key = figure._make_key(*args, **kwargs)
      ispolar = kwargs.pop('polar', False)
      projection = kwargs.pop('projection', None)
      if ispolar:
          if projection is not None and projection != 'polar':
              raise ValueError('polar and projection args are inconsistent')
          projection = 'polar'
      ax = projection_factory(projection, self, rect, **kwargs)
      key = self._make_key(*args, **kwargs)

      # is now

      projection_class, kwargs, key = \
                         process_projection_requirements(self, *args, **kwargs)
      ax = projection_class(self, rect, **kwargs)

  This change means that third party objects can expose themselves as
  Matplotlib axes by providing a ``_as_mpl_axes`` method. See
  :mod:`matplotlib.projections` for more detail.

* A new keyword *extendfrac* in :meth:`~matplotlib.pyplot.colorbar` and
  :class:`~matplotlib.colorbar.ColorbarBase` allows one to control the size of
  the triangular minimum and maximum extensions on colorbars.

* A new keyword *capthick* in :meth:`~matplotlib.pyplot.errorbar` has been
  added as an intuitive alias to the *markeredgewidth* and *mew* keyword
  arguments, which indirectly controlled the thickness of the caps on
  the errorbars.  For backwards compatibility, specifying either of the
  original keyword arguments will override any value provided by
  *capthick*.

* Transform subclassing behaviour is now subtly changed. If your transform
  implements a non-affine transformation, then it should override the
  ``transform_non_affine`` method, rather than the generic ``transform`` method.
  Previously transforms would define ``transform`` and then copy the
  method into ``transform_non_affine``::

     class MyTransform(mtrans.Transform):
         def transform(self, xy):
             ...
         transform_non_affine = transform


  This approach will no longer function correctly and should be changed to::

     class MyTransform(mtrans.Transform):
         def transform_non_affine(self, xy):
             ...


* Artists no longer have ``x_isdata`` or ``y_isdata`` attributes; instead
  any artist's transform can be interrogated with
  ``artist_instance.get_transform().contains_branch(ax.transData)``

* Lines added to an axes now take into account their transform when updating the
  data and view limits. This means transforms can now be used as a pre-transform.
  For instance::

      >>> import matplotlib.pyplot as plt
      >>> import matplotlib.transforms as mtrans
      >>> ax = plt.axes()
      >>> ax.plot(range(10), transform=mtrans.Affine2D().scale(10) + ax.transData)
      >>> print(ax.viewLim)
      Bbox('array([[  0.,   0.],\n       [ 90.,  90.]])')

* One can now easily get a transform which goes from one transform's coordinate
  system to another, in an optimized way, using the new subtract method on a
  transform. For instance, to go from data coordinates to axes coordinates::

      >>> import matplotlib.pyplot as plt
      >>> ax = plt.axes()
      >>> data2ax = ax.transData - ax.transAxes
      >>> print(ax.transData.depth, ax.transAxes.depth)
      3, 1
      >>> print(data2ax.depth)
      2

  for versions before 1.2 this could only be achieved in a sub-optimal way,
  using ``ax.transData + ax.transAxes.inverted()`` (depth is a new concept,
  but had it existed it would return 4 for this example).

* ``twinx`` and ``twiny`` now returns an instance of SubplotBase if
  parent axes is an instance of SubplotBase.

* All Qt3-based backends are now deprecated due to the lack of py3k bindings.
  Qt and QtAgg backends will continue to work in v1.2.x for py2.6
  and py2.7. It is anticipated that the Qt3 support will be completely
  removed for the next release.

* ``matplotlib.colors.ColorConverter``,
  :class:`~matplotlib.colors.Colormap` and
  :class:`~matplotlib.colors.Normalize` now subclasses ``object``

* ContourSet instances no longer have a ``transform`` attribute. Instead,
  access the transform with the ``get_transform`` method.

Changes for 0.90.1
==================

.. code-block:: text

    The file dviread.py has a (very limited and fragile) dvi reader
    for usetex support. The API might change in the future so don't
    depend on it yet.

    Removed deprecated support for a float value as a gray-scale;
    now it must be a string, like '0.5'.  Added alpha kwarg to
    ColorConverter.to_rgba_list.

    New method set_bounds(vmin, vmax) for formatters, locators sets
    the viewInterval and dataInterval from floats.

    Removed deprecated colorbar_classic.

    Line2D.get_xdata and get_ydata valid_only=False kwarg is replaced
    by orig=True.  When True, it returns the original data, otherwise
    the processed data (masked, converted)

    Some modifications to the units interface.
    units.ConversionInterface.tickers renamed to
    units.ConversionInterface.axisinfo and it now returns a
    units.AxisInfo object rather than a tuple.  This will make it
    easier to add axis info functionality (e.g., I added a default label
    on this iteration) w/o having to change the tuple length and hence
    the API of the client code every time new functionality is added.
    Also, units.ConversionInterface.convert_to_value is now simply
    named units.ConversionInterface.convert.

    Axes.errorbar uses Axes.vlines and Axes.hlines to draw its error
    limits int he vertical and horizontal direction.  As you'll see
    in the changes below, these functions now return a LineCollection
    rather than a list of lines.  The new return signature for
    errorbar is  ylins, caplines, errorcollections where
    errorcollections is a xerrcollection, yerrcollection

    Axes.vlines and Axes.hlines now create and returns a LineCollection, not a list
    of lines.  This is much faster.  The kwarg signature has changed,
    so consult the docs

    MaxNLocator accepts a new Boolean kwarg ('integer') to force
    ticks to integer locations.

    Commands that pass an argument to the Text constructor or to
    Text.set_text() now accept any object that can be converted
    with '%s'.  This affects xlabel(), title(), etc.

    Barh now takes a **kwargs dict instead of most of the old
    arguments. This helps ensure that bar and barh are kept in sync,
    but as a side effect you can no longer pass e.g., color as a
    positional argument.

    ft2font.get_charmap() now returns a dict that maps character codes
    to glyph indices (until now it was reversed)

    Moved data files into lib/matplotlib so that setuptools' develop
    mode works. Re-organized the mpl-data layout so that this source
    structure is maintained in the installation. (i.e., the 'fonts' and
    'images' sub-directories are maintained in site-packages.).
    Suggest removing site-packages/matplotlib/mpl-data and
    ~/.matplotlib/ttffont.cache before installing
API Changes for 3.4.2
=====================

Behaviour changes
-----------------

Rename first argument to ``subplot_mosaic``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Both `.FigureBase.subplot_mosaic`, and `.pyplot.subplot_mosaic` have had the
first position argument renamed from *layout* to *mosaic*.  This is because we
are considering to consolidate *constrained_layout* and *tight_layout* keyword
arguments in the Figure creation functions of `.pyplot` into a single *layout*
keyword argument which would collide.

As this API is provisional, we are changing this with no deprecation period.
Changes for 0.82
================

.. code-block:: text

  - toolbar import change in GTKAgg, GTKCairo and WXAgg

  - Added subplot config tool to GTK* backends -- note you must now
    import the NavigationToolbar2 from your backend of choice rather
    than from backend_gtk because it needs to know about the backend
    specific canvas -- see examples/embedding_in_gtk2.py.  Ditto for
    wx backend -- see examples/embedding_in_wxagg.py


  - hist bin change

      Sean Richards notes there was a problem in the way we created
      the binning for histogram, which made the last bin
      underrepresented.  From his post:

        I see that hist uses the linspace function to create the bins
        and then uses searchsorted to put the values in their correct
        bin. That's all good but I am confused over the use of linspace
        for the bin creation. I wouldn't have thought that it does
        what is needed, to quote the docstring it creates a "Linear
        spaced array from min to max". For it to work correctly
        shouldn't the values in the bins array be the same bound for
        each bin? (i.e. each value should be the lower bound of a
        bin). To provide the correct bins for hist would it not be
        something like

        def bins(xmin, xmax, N):
          if N==1: return xmax
          dx = (xmax-xmin)/N # instead of N-1
          return xmin + dx*arange(N)


       This suggestion is implemented in 0.81.  My test script with these
       changes does not reveal any bias in the binning

        from matplotlib.numerix.mlab import randn, rand, zeros, Float
        from matplotlib.mlab import hist, mean

        Nbins = 50
        Ntests = 200
        results = zeros((Ntests,Nbins), typecode=Float)
        for i in range(Ntests):
            print 'computing', i
            x = rand(10000)
            n, bins = hist(x, Nbins)
            results[i] = n
        print mean(results)

Changes for 0.40
================

.. code-block:: text

  - Artist
      * __init__ takes a DPI instance and a Bound2D instance which is
        the bounding box of the artist in display coords
      * get_window_extent returns a Bound2D instance
      * set_size is removed; replaced by bbox and dpi
      * the clip_gc method is removed.  Artists now clip themselves with
        their box
      * added _clipOn boolean attribute.  If True, gc clip to bbox.

  - AxisTextBase
      * Initialized with a transx, transy which are Transform instances
      * set_drawing_area removed
      * get_left_right and get_top_bottom are replaced by get_window_extent

  - Line2D Patches now take transx, transy
      * Initialized with a transx, transy which are Transform instances

  - Patches
     * Initialized with a transx, transy which are Transform instances

  - FigureBase attributes dpi is a DPI instance rather than scalar and
    new attribute bbox is a Bound2D in display coords, and I got rid
    of the left, width, height, etc... attributes.  These are now
    accessible as, for example, bbox.x.min is left, bbox.x.interval()
    is width, bbox.y.max is top, etc...

  - GcfBase attribute pagesize renamed to figsize

  - Axes
      * removed figbg attribute
      * added fig instance to __init__
      * resizing is handled by figure call to resize.

  - Subplot
      * added fig instance to __init__

  - Renderer methods for patches now take gcEdge and gcFace instances.
    gcFace=None takes the place of filled=False

  - True and False symbols provided by cbook in a python2.3 compatible
    way

  - new module transforms supplies Bound1D, Bound2D and Transform
    instances and more

  - Changes to the MATLAB helpers API

    * _matlab_helpers.GcfBase is renamed by Gcf.  Backends no longer
      need to derive from this class.  Instead, they provide a factory
      function new_figure_manager(num, figsize, dpi).  The destroy
      method of the GcfDerived from the backends is moved to the derived
      FigureManager.

    * FigureManagerBase moved to backend_bases

    * Gcf.get_all_figwins renamed to Gcf.get_all_fig_managers

  Jeremy:

    Make sure to self._reset = False in AxisTextWX._set_font.  This was
    something missing in my backend code.
API Changes in 2.1.1
====================

Default behavior of log scales reverted to clip <= 0 values
-----------------------------------------------------------

The change it 2.1.0 to mask in logscale by default had more disruptive
changes than anticipated and has been reverted, however the clipping is now
done in a way that fixes the issues that motivated changing the default behavior
to ``'mask'``.

As a side effect of this change, error bars which go negative now work as expected
on log scales.
Changes for 0.65.1
==================

.. code-block:: text

  removed add_axes and add_subplot from backend_bases.  Use
  figure.add_axes and add_subplot instead.  The figure now manages the
  current axes with gca and sca for get and set current axes.  If you
  have code you are porting which called, e.g., figmanager.add_axes, you
  can now simply do figmanager.canvas.figure.add_axes.

API Changes in 2.1.2
====================

`.Figure.legend` no longer checks for repeated lines to ignore
--------------------------------------------------------------

`matplotlib.figure.Figure.legend` used to check if a line had the
same label as an existing legend entry. If it also had the same line color
or marker color legend didn't add a new entry for that line. However, the
list of conditions was incomplete, didn't handle RGB tuples,
didn't handle linewidths or linestyles etc.

This logic did not exist in `.axes.Axes.legend`.  It was included (erroneously)
in Matplotlib 2.1.1 when the legend argument parsing was unified
[#9324](https://github.com/matplotlib/matplotlib/pull/9324).  This change
removes that check in `.axes.Axes.legend` again to restore the old behavior.

This logic has also been dropped from `.Figure.legend`, where it
was previously undocumented. Repeated
lines with the same label will now each have an entry in the legend.  If
you do not want the duplicate entries, don't add a label to the line, or
prepend the label with an underscore.
API Changes in 1.5.2
====================


Default Behavior Changes
------------------------

Changed default ``autorange`` behavior in boxplots
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Prior to v1.5.2, the whiskers of boxplots would extend to the minimum
and maximum values if the quartiles were all equal (i.e., Q1 = median
= Q3). This behavior has been disabled by default to restore consistency
with other plotting packages.

To restore the old behavior, simply set ``autorange=True`` when
calling ``plt.boxplot``.
Changes beyond 0.99.x
=====================

* The default behavior of :meth:`matplotlib.axes.Axes.set_xlim`,
  :meth:`matplotlib.axes.Axes.set_ylim`, and
  :meth:`matplotlib.axes.Axes.axis`, and their corresponding
  pyplot functions, has been changed: when view limits are
  set explicitly with one of these methods, autoscaling is turned
  off for the matching axis. A new *auto* kwarg is available to
  control this behavior. The limit kwargs have been renamed to
  *left* and *right* instead of *xmin* and *xmax*, and *bottom*
  and *top* instead of *ymin* and *ymax*.  The old names may still
  be used, however.

* There are five new Axes methods with corresponding pyplot
  functions to facilitate autoscaling, tick location, and tick
  label formatting, and the general appearance of ticks and
  tick labels:

  + :meth:`matplotlib.axes.Axes.autoscale` turns autoscaling
    on or off, and applies it.

  + :meth:`matplotlib.axes.Axes.margins` sets margins used to
    autoscale the :attr:`matplotlib.axes.Axes.viewLim` based on
    the :attr:`matplotlib.axes.Axes.dataLim`.

  + :meth:`matplotlib.axes.Axes.locator_params` allows one to
    adjust axes locator parameters such as *nbins*.

  + :meth:`matplotlib.axes.Axes.ticklabel_format` is a convenience
    method for controlling the :class:`matplotlib.ticker.ScalarFormatter`
    that is used by default with linear axes.

  + :meth:`matplotlib.axes.Axes.tick_params` controls direction, size,
    visibility, and color of ticks and their labels.

* The :meth:`matplotlib.axes.Axes.bar` method accepts a *error_kw*
  kwarg; it is a dictionary of kwargs to be passed to the
  errorbar function.

* The :meth:`matplotlib.axes.Axes.hist` *color* kwarg now accepts
  a sequence of color specs to match a sequence of datasets.

* The :class:`~matplotlib.collections.EllipseCollection` has been
  changed in two ways:

  + There is a new *units* option, 'xy', that scales the ellipse with
    the data units.  This matches the :class:'~matplotlib.patches.Ellipse`
    scaling.

  + The *height* and *width* kwargs have been changed to specify
    the height and width, again for consistency with
    :class:`~matplotlib.patches.Ellipse`, and to better match
    their names; previously they specified the half-height and
    half-width.

* There is a new rc parameter ``axes.color_cycle``, and the color
  cycle is now independent of the rc parameter ``lines.color``.
  ``matplotlib.Axes.set_default_color_cycle`` is deprecated.

* You can now print several figures to one pdf file and modify the
  document information dictionary of a pdf file. See the docstrings
  of the class :class:`matplotlib.backends.backend_pdf.PdfPages` for
  more information.

* Removed configobj_ and `enthought.traits`_ packages, which are only
  required by the experimental traited config and are somewhat out of
  date. If needed, install them independently.

.. _configobj: http://www.voidspace.org.uk/python/configobj.html
.. _`enthought.traits`: http://code.enthought.com/pages/traits.html

* The new rc parameter ``savefig.extension`` sets the filename extension
  that is used by :meth:`matplotlib.figure.Figure.savefig` if its *fname*
  argument lacks an extension.

* In an effort to simplify the backend API, all clipping rectangles
  and paths are now passed in using GraphicsContext objects, even
  on collections and images.  Therefore::

    draw_path_collection(self, master_transform, cliprect, clippath,
                         clippath_trans, paths, all_transforms, offsets,
                         offsetTrans, facecolors, edgecolors, linewidths,
                         linestyles, antialiaseds, urls)

    # is now

    draw_path_collection(self, gc, master_transform, paths, all_transforms,
                         offsets, offsetTrans, facecolors, edgecolors,
                         linewidths, linestyles, antialiaseds, urls)


    draw_quad_mesh(self, master_transform, cliprect, clippath,
                   clippath_trans, meshWidth, meshHeight, coordinates,
                   offsets, offsetTrans, facecolors, antialiased,
                   showedges)

    # is now

    draw_quad_mesh(self, gc, master_transform, meshWidth, meshHeight,
                   coordinates, offsets, offsetTrans, facecolors,
                   antialiased, showedges)


    draw_image(self, x, y, im, bbox, clippath=None, clippath_trans=None)

    # is now

    draw_image(self, gc, x, y, im)

* There are four new Axes methods with corresponding pyplot
  functions that deal with unstructured triangular grids:

  + :meth:`matplotlib.axes.Axes.tricontour` draws contour lines
    on a triangular grid.

  + :meth:`matplotlib.axes.Axes.tricontourf` draws filled contours
    on a triangular grid.

  + :meth:`matplotlib.axes.Axes.tripcolor` draws a pseudocolor
    plot on a triangular grid.

  + :meth:`matplotlib.axes.Axes.triplot` draws a triangular grid
    as lines and/or markers.

Changes for 0.91.0
==================

* Changed ``cbook.is_file_like`` to ``cbook.is_writable_file_like`` and
  corrected behavior.

* Added *ax* keyword argument to :func:`.pyplot.colorbar` and
  :meth:`.Figure.colorbar` so that one can specify the axes object from
  which space for the colorbar is to be taken, if one does not want to
  make the colorbar axes manually.

* Changed ``cbook.reversed`` so it yields a tuple rather than a (index, tuple).
  This agrees with the Python reversed builtin, and cbook only defines reversed
  if Python doesn't provide the builtin.

* Made skiprows=1 the default on ``csv2rec``

* The gd and paint backends have been deleted.

* The errorbar method and function now accept additional kwargs
  so that upper and lower limits can be indicated by capping the
  bar with a caret instead of a straight line segment.

* The :mod:`matplotlib.dviread` file now has a parser for files like
  psfonts.map and pdftex.map, to map TeX font names to external files.

* The file :mod:`matplotlib.type1font` contains a new class for Type 1
  fonts.  Currently it simply reads pfa and pfb format files and
  stores the data in a way that is suitable for embedding in pdf
  files. In the future the class might actually parse the font to
  allow e.g.,  subsetting.

* :mod:`matplotlib.ft2font` now supports ``FT_Attach_File``. In
  practice this can be used to read an afm file in addition to a
  pfa/pfb file, to get metrics and kerning information for a Type 1
  font.

* The ``AFM`` class now supports querying CapHeight and stem
  widths. The get_name_char method now has an isord kwarg like
  get_width_char.

* Changed :func:`.pcolor` default to ``shading='flat'``; but as noted now in
  the docstring, it is preferable to simply use the *edgecolor* keyword
  argument.

* The mathtext font commands (``\cal``, ``\rm``, ``\it``, ``\tt``) now
  behave as TeX does: they are in effect until the next font change
  command or the end of the grouping.  Therefore uses of ``$\cal{R}$``
  should be changed to ``${\cal R}$``.  Alternatively, you may use the
  new LaTeX-style font commands (``\mathcal``, ``\mathrm``,
  ``\mathit``, ``\mathtt``) which do affect the following group,
  e.g., ``$\mathcal{R}$``.

* Text creation commands have a new default linespacing and a new
  ``linespacing`` kwarg, which is a multiple of the maximum vertical
  extent of a line of ordinary text.  The default is 1.2;
  ``linespacing=2`` would be like ordinary double spacing, for example.

* Changed default kwarg in `matplotlib.colors.Normalize` to ``clip=False``;
  clipping silently defeats the purpose of the special over, under,
  and bad values in the colormap, thereby leading to unexpected
  behavior.  The new default should reduce such surprises.

* Made the emit property of :meth:`~matplotlib.axes.Axes.set_xlim` and
  :meth:`~matplotlib.axes.Axes.set_ylim` ``True`` by default; removed
  the Axes custom callback handling into a 'callbacks' attribute which
  is a :class:`~matplotlib.cbook.CallbackRegistry` instance.  This now
  supports the 'xlim_changed' and 'ylim_changed' Axes events.


Changes for 0.87.7
==================

.. code-block:: text

    Completely reworked the annotations API because I found the old
    API cumbersome.  The new design is much more legible and easy to
    read.  See matplotlib.text.Annotation and
    examples/annotation_demo.py

    markeredgecolor and markerfacecolor cannot be configured in
    matplotlibrc any more. Instead, markers are generally colored
    automatically based on the color of the line, unless marker colors
    are explicitly set as kwargs - NN

    Changed default comment character for load to '#' - JDH

    math_parse_s_ft2font_svg from mathtext.py & mathtext2.py now returns
    width, height, svg_elements. svg_elements is an instance of Bunch (
    cmbook.py) and has the attributes svg_glyphs and svg_lines, which are both
    lists.

    Renderer.draw_arc now takes an additional parameter, rotation.
    It specifies to draw the artist rotated in degrees anti-
    clockwise.  It was added for rotated ellipses.

    Renamed Figure.set_figsize_inches to Figure.set_size_inches to
    better match the get method, Figure.get_size_inches.

    Removed the copy_bbox_transform from transforms.py; added
    shallowcopy methods to all transforms.  All transforms already
    had deepcopy methods.

    FigureManager.resize(width, height): resize the window
    specified in pixels

    barh: x and y args have been renamed to width and bottom
    respectively, and their order has been swapped to maintain
    a (position, value) order.

    bar and barh: now accept kwarg 'edgecolor'.

    bar and barh: The left, height, width and bottom args can
    now all be scalars or sequences; see docstring.

    barh: now defaults to edge aligned instead of center
    aligned bars

    bar, barh and hist: Added a keyword arg 'align' that
    controls between edge or center bar alignment.

    Collections: PolyCollection and LineCollection now accept
    vertices or segments either in the original form [(x,y),
    (x,y), ...] or as a 2D numerix array, with X as the first column
    and Y as the second. Contour and quiver output the numerix
    form.  The transforms methods Bbox.update() and
    Transformation.seq_xy_tups() now accept either form.

    Collections: LineCollection is now a ScalarMappable like
    PolyCollection, etc.

    Specifying a grayscale color as a float is deprecated; use
    a string instead, e.g., 0.75 -> '0.75'.

    Collections: initializers now accept any mpl color arg, or
    sequence of such args; previously only a sequence of rgba
    tuples was accepted.

    Colorbar: completely new version and api; see docstring.  The
    original version is still accessible as colorbar_classic, but
    is deprecated.

    Contourf: "extend" kwarg replaces "clip_ends"; see docstring.
    Masked array support added to pcolormesh.

    Modified aspect-ratio handling:
        Removed aspect kwarg from imshow
        Axes methods:
            set_aspect(self, aspect, adjustable=None, anchor=None)
            set_adjustable(self, adjustable)
            set_anchor(self, anchor)
        Pylab interface:
            axis('image')

     Backend developers: ft2font's load_char now takes a flags
     argument, which you can OR together from the LOAD_XXX
     constants.
Changes for 0.73
================

.. code-block:: text

  - Removed deprecated ColormapJet and friends

  - Removed all error handling from the verbose object

  - figure num of zero is now allowed
.. _changes_in_1_3:


API Changes in 1.3.x
====================

Changes in 1.3.1
----------------

It is rare that we make an API change in a bugfix release, however,
for 1.3.1 since 1.3.0 the following change was made:

- ``text.Text.cached`` (used to cache font objects) has been made into a
  private variable.  Among the obvious encapsulation benefit, this
  removes this confusing-looking member from the documentation.

- The method :meth:`~matplotlib.axes.Axes.hist` now always returns bin
  occupancies as an array of type `float`. Previously, it was sometimes
  an array of type `int`, depending on the call.

Code removal
------------

* The following items that were deprecated in version 1.2 or earlier
  have now been removed completely.

    - The Qt 3.x backends (``qt`` and ``qtagg``) have been removed in
      favor of the Qt 4.x backends (``qt4`` and ``qt4agg``).

    - The FltkAgg and Emf backends have been removed.

    - The ``matplotlib.nxutils`` module has been removed.  Use the
      functionality on `matplotlib.path.Path.contains_point` and
      friends instead.

    - Instead of ``axes.Axes.get_frame``, use `.axes.Axes.patch`.

    - The following keyword arguments to the `~.axes.Axes.legend` function have
      been renamed:

      - *pad* -> *borderpad*
      - *labelsep* -> *labelspacing*
      - *handlelen* -> *handlelength*
      - *handletextsep* -> *handletextpad*
      - *axespad* -> *borderaxespad*

      Related to this, the following rcParams have been removed:

      - ``legend.pad``,
      - ``legend.labelsep``,
      - ``legend.handlelen``,
      - ``legend.handletextsep`` and
      - ``legend.axespad``

    - For the `~.axes.Axes.hist` function, instead of *width*, use *rwidth*
      (relative width).

    - On `.patches.Circle`, the *resolution* keyword argument has been removed.
      For a circle made up of line segments, use
      `.patches.CirclePolygon`.

    - The printing functions in the Wx backend have been removed due
      to the burden of keeping them up-to-date.

    - ``mlab.liaupunov`` has been removed.

    - ``mlab.save``, ``mlab.load``, ``pylab.save`` and ``pylab.load`` have
      been removed.  We recommend using `numpy.savetxt` and
      `numpy.loadtxt` instead.

    - ``widgets.HorizontalSpanSelector`` has been removed.  Use
      `.widgets.SpanSelector` instead.

Code deprecation
----------------

* The CocoaAgg backend has been deprecated, with the possibility for
  deletion or resurrection in a future release.

* The top-level functions in `matplotlib.path` that are implemented in
  C++ were never meant to be public.  Instead, users should use the
  Pythonic wrappers for them in the `.path.Path` and
  `.collections.Collection` classes.  Use the following mapping to update
  your code:

    - ``point_in_path`` -> `.path.Path.contains_point`
    - ``get_path_extents`` -> `.path.Path.get_extents`
    - ``point_in_path_collection`` -> `.collections.Collection.contains`
    - ``path_in_path`` -> `.path.Path.contains_path`
    - ``path_intersects_path`` -> `.path.Path.intersects_path`
    - ``convert_path_to_polygons`` -> `.path.Path.to_polygons`
    - ``cleanup_path`` -> `.path.Path.cleaned`
    - ``points_in_path`` -> `.path.Path.contains_points`
    - ``clip_path_to_rect`` -> `.path.Path.clip_to_bbox`

* ``matplotlib.colors.normalize`` and ``matplotlib.colors.no_norm`` have
  been deprecated in favour of `matplotlib.colors.Normalize` and
  `matplotlib.colors.NoNorm` respectively.

* The `.ScalarMappable` class' ``set_colorbar`` method is now deprecated.
  Instead, the :attr:`matplotlib.cm.ScalarMappable.colorbar` attribute should
  be used.  In previous Matplotlib versions this attribute was an undocumented
  tuple of ``(colorbar_instance, colorbar_axes)`` but is now just
  ``colorbar_instance``.  To get the colorbar axes it is possible to just use
  the :attr:`~matplotlib.colorbar.ColorbarBase.ax` attribute on a colorbar
  instance.

* The ``matplotlib.mpl`` module is now deprecated.  Those who relied on this
  module should transition to simply using ``import matplotlib as mpl``.

Code changes
------------

* :class:`~matplotlib.patches.Patch` now fully supports using RGBA values for
  its ``facecolor`` and ``edgecolor`` attributes, which enables faces and
  edges to have different alpha values. If the
  :class:`~matplotlib.patches.Patch` object's ``alpha`` attribute is set to
  anything other than ``None``, that value will override any alpha-channel
  value in both the face and edge colors. Previously, if
  :class:`~matplotlib.patches.Patch` had ``alpha=None``, the alpha component
  of ``edgecolor`` would be applied to both the edge and face.

* The optional ``isRGB`` argument to
  :meth:`~matplotlib.backend_bases.GraphicsContextBase.set_foreground` (and
  the other GraphicsContext classes that descend from it) has been renamed to
  ``isRGBA``, and should now only be set to ``True`` if the ``fg`` color
  argument is known to be an RGBA tuple.

* For :class:`~matplotlib.patches.Patch`, the ``capstyle`` used is now
  ``butt``, to be consistent with the default for most other objects, and to
  avoid problems with non-solid ``linestyle`` appearing solid when using a
  large ``linewidth``. Previously, :class:`~matplotlib.patches.Patch` used
  ``capstyle='projecting'``.

* `.Path` objects can now be marked as *readonly* by passing
  ``readonly=True`` to its constructor.  The built-in path singletons,
  obtained through ``Path.unit*`` class methods return readonly paths.
  If you have code that modified these, you will need to make a
  deepcopy first, using either::

    import copy
    path = copy.deepcopy(Path.unit_circle())

    # or

    path = Path.unit_circle().deepcopy()

  Deep copying a `.Path` always creates an editable (i.e. non-readonly)
  `.Path`.

* The list at ``Path.NUM_VERTICES`` was replaced by a dictionary mapping
  Path codes to the number of expected vertices at
  :attr:`~matplotlib.path.Path.NUM_VERTICES_FOR_CODE`.

* To support XKCD style plots, the ``matplotlib.path.cleanup_path``
  method's signature was updated to require a sketch argument. Users of
  ``matplotlib.path.cleanup_path`` are encouraged to use the new
  :meth:`~matplotlib.path.Path.cleaned` Path method.

* Data limits on a plot now start from a state of having "null"
  limits, rather than limits in the range (0, 1).  This has an effect
  on artists that only control limits in one direction, such as
  `.axes.Axes.axvline` and `.axes.Axes.axhline`, since their limits will no
  longer also include the range (0, 1).  This fixes some problems where the
  computed limits would be dependent on the order in which artists
  were added to the axes.

* Fixed a bug in setting the position for the right/top spine with data
  position type. Previously, it would draw the right or top spine at
  +1 data offset.

* In :class:`~matplotlib.patches.FancyArrow`, the default arrow head
  width, ``head_width``, has been made larger to produce a visible
  arrow head. The new value of this kwarg is ``head_width = 20 *
  width``.

* It is now possible to provide ``number of levels + 1`` colors in the case of
  ``extend='both'`` for contourf (or just ``number of levels`` colors for an
  extend value ``min`` or ``max``) such that the resulting colormap's
  ``set_under`` and ``set_over`` are defined appropriately. Any other number
  of colors will continue to behave as before (if more colors are provided
  than levels, the colors will be unused). A similar change has been applied
  to contour, where ``extend='both'`` would expect ``number of levels + 2``
  colors.

* A new keyword *extendrect* in :meth:`~matplotlib.pyplot.colorbar` and
  :class:`~matplotlib.colorbar.ColorbarBase` allows one to control the shape
  of colorbar extensions.

* The extension of :class:`~matplotlib.widgets.MultiCursor` to both vertical
  (default) and/or horizontal cursor implied that ``self.line`` is replaced
  by ``self.vline`` for vertical cursors lines and ``self.hline`` is added
  for the horizontal cursors lines.

* On POSIX platforms, the :func:`~matplotlib.cbook.report_memory` function
  raises :class:`NotImplementedError` instead of :class:`OSError` if the
  :command:`ps` command cannot be run.

* The ``matplotlib.cbook.check_output`` function has been moved to
  ``matplotlib.compat.subprocess``.

Configuration and rcParams
--------------------------

* On Linux, the user-specific :file:`matplotlibrc` configuration file is now
  located in :file:`~/.config/matplotlib/matplotlibrc` to conform to the
  `XDG Base Directory Specification
  <https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html>`_.

* The ``font.*`` rcParams now affect only text objects created after the
  rcParam has been set, and will not retroactively affect already
  existing text objects.  This brings their behavior in line with most
  other rcParams.

* Removed call of :meth:`~matplotlib.axes.Axes.grid` in
  ``matplotlib.pyplot.plotfile``. To draw the axes grid, set the
  ``axes.grid`` rcParam to *True*, or explicitly call
  :meth:`~matplotlib.axes.Axes.grid`.
Changes for 0.42
================

.. code-block:: text

  * Refactoring AxisText to be backend independent.  Text drawing and
    get_window_extent functionality will be moved to the Renderer.

  * backend_bases.AxisTextBase is now text.Text module

  * All the erase and reset functionality removed from AxisText - not
    needed with double buffered drawing.  Ditto with state change.
    Text instances have a get_prop_tup method that returns a hashable
    tuple of text properties which you can use to see if text props
    have changed, e.g., by caching a font or layout instance in a dict
    with the prop tup as a key -- see RendererGTK.get_pango_layout in
    backend_gtk for an example.

  * Text._get_xy_display renamed Text.get_xy_display

  * Artist set_renderer and wash_brushes methods removed

  * Moved Legend class from matplotlib.axes into matplotlib.legend

  * Moved Tick, XTick, YTick, Axis, XAxis, YAxis from matplotlib.axes
    to matplotlib.axis

  * moved process_text_args to matplotlib.text

  * After getting Text handled in a backend independent fashion, the
    import process is much cleaner since there are no longer cyclic
    dependencies

  * matplotlib.matlab._get_current_fig_manager renamed to
    matplotlib.matlab.get_current_fig_manager to allow user access to
    the GUI window attribute, e.g., figManager.window for GTK and
    figManager.frame for wx

API Changes in 1.1.x
====================

* Added new :class:`matplotlib.sankey.Sankey` for generating Sankey diagrams.

* In :meth:`~matplotlib.pyplot.imshow`, setting *interpolation* to 'nearest'
  will now always mean that the nearest-neighbor interpolation is performed.
  If you want the no-op interpolation to be performed, choose 'none'.

* There were errors in how the tri-functions were handling input parameters
  that had to be fixed. If your tri-plots are not working correctly anymore,
  or you were working around apparent mistakes, please see issue #203 in the
  github tracker. When in doubt, use kwargs.

* The 'symlog' scale had some bad behavior in previous versions. This has now
  been fixed and users should now be able to use it without frustrations.
  The fixes did result in some minor changes in appearance for some users who
  may have been depending on the bad behavior.

* There is now a common set of markers for all plotting functions. Previously,
  some markers existed only for :meth:`~matplotlib.pyplot.scatter` or just for
  :meth:`~matplotlib.pyplot.plot`. This is now no longer the case. This merge
  did result in a conflict. The string 'd' now means "thin diamond" while
  'D' will mean "regular diamond".

Changes for 0.91.2
==================

* For ``csv2rec``, checkrows=0 is the new default indicating all rows
  will be checked for type inference

* A warning is issued when an image is drawn on log-scaled axes, since
  it will not log-scale the image data.

* Moved ``rec2gtk`` to ``matplotlib.toolkits.gtktools``

* Moved ``rec2excel`` to ``matplotlib.toolkits.exceltools``

* Removed, dead/experimental ExampleInfo, Namespace and Importer
  code from :mod:`matplotlib`

API Changes in 1.5.0
====================

Code Changes
------------

Reversed `matplotlib.cbook.ls_mapper`, added `.ls_mapper_r`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Formerly, `matplotlib.cbook.ls_mapper` was a dictionary with
the long-form line-style names (``"solid"``) as keys and the short
forms (``"-"``) as values.  This long-to-short mapping is now done
by `.ls_mapper_r`, and the short-to-long mapping is done by the
`.ls_mapper`.

Prevent moving artists between Axes, Property-ify Artist.axes, deprecate Artist.{get,set}_axes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

This was done to prevent an Artist that is
already associated with an Axes from being moved/added to a different Axes.
This was never supported as it causes havoc with the transform stack.
The apparent support for this (as it did not raise an exception) was
the source of multiple bug reports and questions on SO.

For almost all use-cases, the assignment of the axes to an artist should be
taken care of by the axes as part of the ``Axes.add_*`` method, hence the
deprecation of {get,set}_axes.

Removing the ``set_axes`` method will also remove the 'axes' line from
the ACCEPTS kwarg tables (assuming that the removal date gets here
before that gets overhauled).

Tightened input validation on 'pivot' kwarg to quiver
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Tightened validation so that only {'tip', 'tail', 'mid', and 'middle'} (but any
capitalization) are valid values for the *pivot* keyword argument in the
`.Quiver` class (and hence `.axes.Axes.quiver` and `.pyplot.quiver` which both
fully delegate to `.Quiver`).  Previously any input matching 'mid.*' would be
interpreted as 'middle', 'tip.*' as 'tip' and any string not matching one of
those patterns as 'tail'.

The value of `.Quiver.pivot` is normalized to be in the set {'tip', 'tail',
'middle'} in `.Quiver`.

Reordered ``Axes.get_children``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The artist order returned by `.axes.Axes.get_children` did not
match the one used by `.axes.Axes.draw`.  They now use the same
order, as `.axes.Axes.draw` now calls `.axes.Axes.get_children`.

Changed behaviour of contour plots
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The default behaviour of :func:`~matplotlib.pyplot.contour` and
:func:`~matplotlib.pyplot.contourf` when using a masked array is now determined
by the new keyword argument *corner_mask*, or if this is not specified then
the new :rc:`contour.corner_mask` instead.  The new default behaviour is
equivalent to using ``corner_mask=True``; the previous behaviour can be obtained
using ``corner_mask=False`` or by changing the rcParam.  The example
https://matplotlib.org/examples/pylab_examples/contour_corner_mask.html
demonstrates the difference.  Use of the old contouring algorithm, which is
obtained with ``corner_mask='legacy'``, is now deprecated.

Contour labels may now appear in different places than in earlier versions of
Matplotlib.

In addition, the keyword argument *nchunk* now applies to
:func:`~matplotlib.pyplot.contour` as well as
:func:`~matplotlib.pyplot.contourf`, and it subdivides the domain into
subdomains of exactly *nchunk* by *nchunk* quads, whereas previously it was
only roughly *nchunk* by *nchunk* quads.

The C/C++ object that performs contour calculations used to be stored in the
public attribute ``QuadContourSet.Cntr``, but is now stored in a private
attribute and should not be accessed by end users.

Added set_params function to all Locator types
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

This was a bug fix targeted at making the api for Locators more consistent.

In the old behavior, only locators of type MaxNLocator have set_params()
defined, causing its use on any other Locator to raise an AttributeError *(
aside: set_params(args) is a function that sets the parameters of a Locator
instance to be as specified within args)*. The fix involves moving set_params()
to the Locator class such that all subtypes will have this function defined.

Since each of the Locator subtypes have their own modifiable parameters, a
universal set_params() in Locator isn't ideal. Instead, a default no-operation
function that raises a warning is implemented in Locator. Subtypes extending
Locator will then override with their own implementations. Subtypes that do
not have a need for set_params() will fall back onto their parent's
implementation, which raises a warning as intended.

In the new behavior, Locator instances will not raise an AttributeError
when set_params() is called. For Locators that do not implement set_params(),
the default implementation in Locator is used.

Disallow ``None`` as x or y value in ax.plot
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Do not allow ``None`` as a valid input for the ``x`` or ``y`` args in
`.axes.Axes.plot`.  This may break some user code, but this was never
officially supported (ex documented) and allowing ``None`` objects through can
lead to confusing exceptions downstream.

To create an empty line use ::

  ln1, = ax.plot([], [], ...)
  ln2, = ax.plot([], ...)

In either case to update the data in the `.Line2D` object you must update
both the ``x`` and ``y`` data.


Removed *args* and *kwargs* from `.MicrosecondLocator.__call__`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The call signature of :meth:`~matplotlib.dates.MicrosecondLocator.__call__`
has changed from ``__call__(self, *args, **kwargs)`` to ``__call__(self)``.
This is consistent with the superclass :class:`~matplotlib.ticker.Locator`
and also all the other Locators derived from this superclass.


No `ValueError` for the MicrosecondLocator and YearLocator
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The :class:`~matplotlib.dates.MicrosecondLocator` and
:class:`~matplotlib.dates.YearLocator` objects when called will return
an empty list if the axes have no data or the view has no interval.
Previously, they raised a `ValueError`. This is consistent with all
the Date Locators.

'OffsetBox.DrawingArea' respects the 'clip' keyword argument
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The call signature was ``OffsetBox.DrawingArea(..., clip=True)`` but nothing
was done with the *clip* argument. The object did not do any clipping
regardless of that parameter. Now the object can and does clip the
child `.Artist`\ s if they are set to be clipped.

You can turn off the clipping on a per-child basis using
``child.set_clip_on(False)``.

Add salt to clipPath id
~~~~~~~~~~~~~~~~~~~~~~~

Add salt to the hash used to determine the id of the ``clipPath``
nodes.  This is to avoid conflicts when two svg documents with the same
clip path are included in the same document (see
https://github.com/ipython/ipython/issues/8133 and
https://github.com/matplotlib/matplotlib/issues/4349 ), however this
means that the svg output is no longer deterministic if the same
figure is saved twice.  It is not expected that this will affect any
users as the current ids are generated from an md5 hash of properties
of the clip path and any user would have a very difficult time
anticipating the value of the id.

Changed snap threshold for circle markers to inf
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

When drawing circle markers above some marker size (previously 6.0)
the path used to generate the marker was snapped to pixel centers.  However,
this ends up distorting the marker away from a circle.  By setting the
snap threshold to inf snapping is never done on circles.

This change broke several tests, but is an improvement.

Preserve units with Text position
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Previously the 'get_position' method on Text would strip away unit information
even though the units were still present.  There was no inherent need to do
this, so it has been changed so that unit data (if present) will be preserved.
Essentially a call to 'get_position' will return the exact value from a call to
'set_position'.

If you wish to get the old behaviour, then you can use the new method called
'get_unitless_position'.

New API for custom Axes view changes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Interactive pan and zoom were previously implemented using a Cartesian-specific
algorithm that was not necessarily applicable to custom Axes. Three new private
methods, ``matplotlib.axes._base._AxesBase._get_view``,
``matplotlib.axes._base._AxesBase._set_view``, and
``matplotlib.axes._base._AxesBase._set_view_from_bbox``, allow for custom
*Axes* classes to override the pan and zoom algorithms. Implementors of
custom *Axes* who override these methods may provide suitable behaviour for
both pan and zoom as well as the view navigation buttons on the interactive
toolbars.

MathTex visual changes
----------------------

The spacing commands in mathtext have been changed to more closely
match vanilla TeX.


Improved spacing in mathtext
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The extra space that appeared after subscripts and superscripts has
been removed.

No annotation coordinates wrap
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In #2351 for 1.4.0 the behavior of ['axes points', 'axes pixel',
'figure points', 'figure pixel'] as coordinates was change to
no longer wrap for negative values.  In 1.4.3 this change was
reverted for 'axes points' and 'axes pixel' and in addition caused
'axes fraction' to wrap.  For 1.5 the behavior has been reverted to
as it was in 1.4.0-1.4.2, no wrapping for any type of coordinate.

Deprecation
-----------

Deprecated ``GraphicsContextBase.set_graylevel``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The ``GraphicsContextBase.set_graylevel`` function has been deprecated in 1.5
and will be removed in 1.6.  It has been unused.  The
`.GraphicsContextBase.set_foreground` could be used instead.

deprecated idle_event
~~~~~~~~~~~~~~~~~~~~~

The ``idle_event`` was broken or missing in most backends and causes spurious
warnings in some cases, and its use in creating animations is now obsolete due
to the animations module. Therefore code involving it has been removed from all
but the wx backend (where it partially works), and its use is deprecated.  The
`.animation` module may be used instead to create animations.

``color_cycle`` deprecated
~~~~~~~~~~~~~~~~~~~~~~~~~~

In light of the new property cycling feature,
the Axes method ``set_color_cycle`` is now deprecated.
Calling this method will replace the current property cycle with
one that cycles just the given colors.

Similarly, the rc parameter *axes.color_cycle* is also deprecated in
lieu of the new :rc:`axes.prop_cycle` parameter. Having both parameters in
the same rc file is not recommended as the result cannot be
predicted. For compatibility, setting *axes.color_cycle* will
replace the cycler in :rc:`axes.prop_cycle` with a color cycle.
Accessing *axes.color_cycle* will return just the color portion
of the property cycle, if it exists.

Timeline for removal has not been set.


Bundled jquery
--------------

The version of jquery bundled with the webagg backend has been upgraded
from 1.7.1 to 1.11.3.  If you are using the version of jquery bundled
with webagg you will need to update your html files as such

.. code-block:: diff

   -    <script src="_static/jquery/js/jquery-1.7.1.min.js"></script>
   +    <script src="_static/jquery/js/jquery-1.11.3.min.js"></script>


Code Removed
------------

Removed ``Image`` from main namespace
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

``Image`` was imported from PIL/pillow to test if PIL is available, but
there is no reason to keep ``Image`` in the namespace once the availability
has been determined.

Removed ``lod`` from Artist
~~~~~~~~~~~~~~~~~~~~~~~~~~~

Removed the method ``set_lod`` and all references to the attribute ``_lod`` as
they are not used anywhere else in the code base.  It appears to be a feature
stub that was never built out.

Removed threading related classes from cbook
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The classes ``Scheduler``, ``Timeout``, and ``Idle`` were in cbook, but
are not used internally.  They appear to be a prototype for the idle event
system which was not working and has recently been pulled out.

Removed *Lena* images from sample_data
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The ``lena.png`` and ``lena.jpg`` images have been removed from
Matplotlib's sample_data directory. The images are also no longer
available from `matplotlib.cbook.get_sample_data`. We suggest using
``matplotlib.cbook.get_sample_data('grace_hopper.png')`` or
``matplotlib.cbook.get_sample_data('grace_hopper.jpg')`` instead.


Legend
~~~~~~
Removed handling of *loc* as a positional argument to `.Legend`


Legend handlers
~~~~~~~~~~~~~~~
Remove code to allow legend handlers to be callable.  They must now
implement a method ``legend_artist``.


Axis
~~~~
Removed method ``set_scale``.  This is now handled via a private method which
should not be used directly by users.  It is called via ``Axes.set_{x,y}scale``
which takes care of ensuring the related changes are also made to the Axes
object.

finance.py
~~~~~~~~~~

Removed functions with ambiguous argument order from finance.py


Annotation
~~~~~~~~~~

Removed ``textcoords`` and ``xytext`` proprieties from Annotation objects.


sphinxext.ipython_*.py
~~~~~~~~~~~~~~~~~~~~~~

Both ``ipython_console_highlighting`` and ``ipython_directive`` have been
moved to IPython.

Change your import from ``matplotlib.sphinxext.ipython_directive`` to
``IPython.sphinxext.ipython_directive`` and from
``matplotlib.sphinxext.ipython_directive`` to
``IPython.sphinxext.ipython_directive``


LineCollection.color
~~~~~~~~~~~~~~~~~~~~

Deprecated in 2005, use ``set_color``


remove ``'faceted'`` as a valid value for *shading* in ``tri.tripcolor``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Use *edgecolor* instead.  Added validation on *shading* to only be valid
values.


Remove ``faceted`` kwarg from scatter
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Remove support for the ``faceted`` kwarg.  This was deprecated in
d48b34288e9651ff95c3b8a071ef5ac5cf50bae7 (2008-04-18!) and replaced by
``edgecolor``.


Remove ``set_colorbar`` method from ``ScalarMappable``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Remove ``set_colorbar`` method, use `~.cm.ScalarMappable.colorbar` attribute
directly.


patheffects.svg
~~~~~~~~~~~~~~~

 - remove ``get_proxy_renderer`` method from ``AbstarctPathEffect`` class
 - remove ``patch_alpha`` and ``offset_xy`` from ``SimplePatchShadow``


Remove ``testing.image_util.py``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Contained only a no-longer used port of functionality from PIL


Remove ``mlab.FIFOBuffer``
~~~~~~~~~~~~~~~~~~~~~~~~~~

Not used internally and not part of core mission of mpl.


Remove ``mlab.prepca``
~~~~~~~~~~~~~~~~~~~~~~
Deprecated in 2009.


Remove ``NavigationToolbar2QTAgg``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Added no functionality over the base ``NavigationToolbar2Qt``


mpl.py
~~~~~~

Remove the module ``matplotlib.mpl``.  Deprecated in 1.3 by
PR #1670 and commit 78ce67d161625833cacff23cfe5d74920248c5b2

Changes for 0.54.3
==================

.. code-block:: text

  removed the set_default_font / get_default_font scheme from the
  font_manager to unify customization of font defaults with the rest of
  the rc scheme.  See examples/font_properties_demo.py and help(rc) in
  matplotlib.matlab.
Changes for 0.80
================

.. code-block:: text

  - xlim/ylim/axis always return the new limits regardless of
    arguments.  They now take kwargs which allow you to selectively
    change the upper or lower limits while leaving unnamed limits
    unchanged.  See help(xlim) for example
Changes for 0.72
================

.. code-block:: text

  - Line2D, Text, and Patch copy_properties renamed update_from and
    moved into artist base class

  - LineCollecitons.color renamed to LineCollections.set_color for
    consistency with set/get introspection mechanism,

  - pylab figure now defaults to num=None, which creates a new figure
    with a guaranteed unique number

  - contour method syntax changed - now it is MATLAB compatible

      unchanged: contour(Z)
      old: contour(Z, x=Y, y=Y)
      new: contour(X, Y, Z)

    see http://matplotlib.sf.net/matplotlib.pylab.html#-contour


   - Increased the default resolution for save command.

   - Renamed the base attribute of the ticker classes to _base to avoid conflict
     with the base method.  Sitt for subs

   - subs=none now does autosubbing in the tick locator.

   - New subplots that overlap old will delete the old axes.  If you
     do not want this behavior, use fig.add_subplot or the axes
     command
API Changes for 3.5.0
=====================

.. contents::
   :local:
   :depth: 1

.. include:: /api/prev_api_changes/api_changes_3.5.0/behaviour.rst

.. include:: /api/prev_api_changes/api_changes_3.5.0/deprecations.rst

.. include:: /api/prev_api_changes/api_changes_3.5.0/removals.rst

.. include:: /api/prev_api_changes/api_changes_3.5.0/development.rst
API Changes for 3.4.0
=====================

.. contents::
   :local:
   :depth: 1

.. include:: /api/prev_api_changes/api_changes_3.4.0/behaviour.rst

.. include:: /api/prev_api_changes/api_changes_3.4.0/deprecations.rst

.. include:: /api/prev_api_changes/api_changes_3.4.0/removals.rst

.. include:: /api/prev_api_changes/api_changes_3.4.0/development.rst
Changes for 0.63
================

.. code-block:: text

  Dates are now represented internally as float days since 0001-01-01,
  UTC.

  All date tickers and formatters are now in matplotlib.dates, rather
  than matplotlib.tickers

  converters have been abolished from all functions and classes.
  num2date and date2num are now the converter functions for all date
  plots

  Most of the date tick locators have a different meaning in their
  constructors.  In the prior implementation, the first argument was a
  base and multiples of the base were ticked.  e.g.,

    HourLocator(5)  # old: tick every 5 minutes

  In the new implementation, the explicit points you want to tick are
  provided as a number or sequence

     HourLocator(range(0,5,61))  # new: tick every 5 minutes

  This gives much greater flexibility.  I have tried to make the
  default constructors (no args) behave similarly, where possible.

  Note that YearLocator still works under the base/multiple scheme.
  The difference between the YearLocator and the other locators is
  that years are not recurrent.


  Financial functions:

    matplotlib.finance.quotes_historical_yahoo(ticker, date1, date2)

     date1, date2 are now datetime instances.  Return value is a list
     of quotes where the quote time is a float - days since gregorian
     start, as returned by date2num

     See examples/finance_demo.py for example usage of new API
Changes for 0.86
================

.. code-block:: text

     Matplotlib data is installed into the matplotlib module.
     This is similar to package_data.  This should get rid of
     having to check for many possibilities in _get_data_path().
     The MATPLOTLIBDATA env key is still checked first to allow
     for flexibility.

     1) Separated the color table data from cm.py out into
     a new file, _cm.py, to make it easier to find the actual
     code in cm.py and to add new colormaps. Everything
     from _cm.py is imported by cm.py, so the split should be
     transparent.
     2) Enabled automatic generation of a colormap from
     a list of colors in contour; see modified
     examples/contour_demo.py.
     3) Support for imshow of a masked array, with the
     ability to specify colors (or no color at all) for
     masked regions, and for regions that are above or
     below the normally mapped region.  See
     examples/image_masked.py.
     4) In support of the above, added two new classes,
     ListedColormap, and no_norm, to colors.py, and modified
     the Colormap class to include common functionality. Added
     a clip kwarg to the normalize class.
API Changes for 3.0.1
=====================

``matplotlib.tight_layout.auto_adjust_subplotpars`` can return ``None`` now if
the new subplotparams will collapse axes to zero width or height.
This prevents ``tight_layout`` from being executed.  Similarly
``matplotlib.tight_layout.get_tight_layout_figure`` will return None.

To improve import (startup) time, private modules are now imported lazily.
These modules are no longer available at these locations:

- ``matplotlib.backends.backend_agg._png``
- ``matplotlib.contour._contour``
- ``matplotlib.image._png``
- ``matplotlib.mathtext._png``
- ``matplotlib.testing.compare._png``
- ``matplotlib.texmanager._png``
- ``matplotlib.tri.triangulation._tri``
- ``matplotlib.tri.triangulation._qhull``
- ``matplotlib.tri.tricontour._tri``
- ``matplotlib.tri.trifinder._tri``
Changes for 0.81
================

.. code-block:: text

  - pylab and artist "set" functions renamed to setp to avoid clash
    with python2.4 built-in set.  Current version will issue a
    deprecation warning which will be removed in future versions

  - imshow interpolation arguments changes for advanced interpolation
    schemes.  See help imshow, particularly the interpolation,
    filternorm and filterrad kwargs

  - Support for masked arrays has been added to the plot command and
    to the Line2D object.  Only the valid points are plotted.  A
    "valid_only" kwarg was added to the get_xdata() and get_ydata()
    methods of Line2D; by default it is False, so that the original
    data arrays are returned. Setting it to True returns the plottable
    points.

  - contour changes:

    Masked arrays: contour and contourf now accept masked arrays as
      the variable to be contoured.  Masking works correctly for
      contour, but a bug remains to be fixed before it will work for
      contourf.  The "badmask" kwarg has been removed from both
      functions.

     Level argument changes:

       Old version: a list of levels as one of the positional
       arguments specified the lower bound of each filled region; the
       upper bound of the last region was taken as a very large
       number.  Hence, it was not possible to specify that z values
       between 0 and 1, for example, be filled, and that values
       outside that range remain unfilled.

       New version: a list of N levels is taken as specifying the
       boundaries of N-1 z ranges.  Now the user has more control over
       what is colored and what is not.  Repeated calls to contourf
       (with different colormaps or color specifications, for example)
       can be used to color different ranges of z.  Values of z
       outside an expected range are left uncolored.

       Example:
         Old: contourf(z, [0, 1, 2]) would yield 3 regions: 0-1, 1-2, and >2.
         New: it would yield 2 regions: 0-1, 1-2.  If the same 3 regions were
         desired, the equivalent list of levels would be [0, 1, 2,
         1e38].
Changes for 0.61
================

.. code-block:: text

  canvas.connect is now deprecated for event handling.  use
  mpl_connect and mpl_disconnect instead.  The callback signature is
  func(event) rather than func(widget, event)


API Changes in 2.1.0
====================


Default behavior of log scales changed to mask <= 0 values
----------------------------------------------------------

Calling `matplotlib.axes.Axes.set_xscale` or `matplotlib.axes.Axes.set_yscale`
now uses 'mask' as the default method to handle invalid values (as opposed to
'clip'). This means that any values <= 0 on a log scale will not be shown.

Previously they were clipped to a very small number and shown.


:meth:`matplotlib.cbook.CallbackRegistry.process` suppresses exceptions by default
----------------------------------------------------------------------------------

Matplotlib uses instances of :obj:`~matplotlib.cbook.CallbackRegistry`
as a bridge between user input event from the GUI and user callbacks.
Previously, any exceptions raised in a user call back would bubble out
of the ``process`` method, which is typically in the GUI event
loop.  Most GUI frameworks simple print the traceback to the screen
and continue as there is not always a clear method of getting the
exception back to the user.  However PyQt5 now exits the process when
it receives an un-handled python exception in the event loop.  Thus,
:meth:`~matplotlib.cbook.CallbackRegistry.process` now suppresses and
prints tracebacks to stderr by default.

What :meth:`~matplotlib.cbook.CallbackRegistry.process` does with exceptions
is now user configurable via the ``exception_handler`` attribute and kwarg.  To
restore the previous behavior pass ``None`` ::

  cb = CallbackRegistry(exception_handler=None)


A function which take and ``Exception`` as its only argument may also be passed ::

  def maybe_reraise(exc):
      if isinstance(exc, RuntimeError):
          pass
      else:
          raise exc

  cb = CallbackRegistry(exception_handler=maybe_reraise)



Improved toggling of the axes grids
-----------------------------------

The ``g`` key binding now switches the states of the ``x`` and ``y`` grids
independently (by cycling through all four on/off combinations).

The new ``G`` key binding switches the states of the minor grids.

Both bindings are disabled if only a subset of the grid lines (in either
direction) is visible, to avoid making irreversible changes to the figure.


Ticklabels are turned off instead of being invisible
----------------------------------------------------

Internally, the `.Tick`'s ``~matplotlib.axis.Tick.label1On`` attribute
is now used to hide tick labels instead of setting the visibility on the tick
label objects.
This improves overall performance and fixes some issues.
As a consequence, in case those labels ought to be shown,
:func:`~matplotlib.axes.Axes.tick_params`
needs to be used, e.g.

::

    ax.tick_params(labelbottom=True)


Removal of warning on empty legends
-----------------------------------

`.pyplot.legend` used to issue a warning when no labeled artist could be
found.  This warning has been removed.


More accurate legend autopositioning
------------------------------------

Automatic positioning of legends now prefers using the area surrounded
by a `.Line2D` rather than placing the legend over the line itself.


Cleanup of stock sample data
----------------------------

The sample data of stocks has been cleaned up to remove redundancies and
increase portability. The ``AAPL.dat.gz``, ``INTC.dat.gz`` and ``aapl.csv``
files have been removed entirely and will also no longer be available from
`matplotlib.cbook.get_sample_data`. If a CSV file is required, we suggest using
the ``msft.csv`` that continues to be shipped in the sample data. If a NumPy
binary file is acceptable, we suggest using one of the following two new files.
The ``aapl.npy.gz`` and ``goog.npy`` files have been replaced by ``aapl.npz``
and ``goog.npz``, wherein the first column's type has changed from
`datetime.date` to `numpy.datetime64` for better portability across Python
versions. Note that Matplotlib does not fully support `numpy.datetime64` as
yet.


Updated qhull to 2015.2
-----------------------

The version of qhull shipped with Matplotlib, which is used for
Delaunay triangulation, has been updated from version 2012.1 to
2015.2.

Improved Delaunay triangulations with large offsets
---------------------------------------------------

Delaunay triangulations now deal with large x,y offsets in a better
way. This can cause minor changes to any triangulations calculated
using Matplotlib, i.e. any use of `matplotlib.tri.Triangulation` that
requests that a Delaunay triangulation is calculated, which includes
`matplotlib.pyplot.tricontour`, `matplotlib.pyplot.tricontourf`,
`matplotlib.pyplot.tripcolor`, `matplotlib.pyplot.triplot`,
``matplotlib.mlab.griddata`` and
`mpl_toolkits.mplot3d.axes3d.Axes3D.plot_trisurf`.



Use ``backports.functools_lru_cache`` instead of ``functools32``
----------------------------------------------------------------

It's better maintained and more widely used (by pylint, jaraco, etc).



``cbook.is_numlike`` only performs an instance check
----------------------------------------------------

``matplotlib.cbook.is_numlike`` now only checks that its argument
is an instance of ``(numbers.Number, np.Number)``.  In particular,
this means that arrays are now not num-like.



Elliptical arcs now drawn between correct angles
------------------------------------------------

The `matplotlib.patches.Arc` patch is now correctly drawn between the given
angles.

Previously a circular arc was drawn and then stretched into an ellipse,
so the resulting arc did not lie between *theta1* and *theta2*.



``-d$backend`` no longer sets the backend
-----------------------------------------

It is no longer possible to set the backend by passing ``-d$backend``
at the command line.  Use the ``MPLBACKEND`` environment variable
instead.


Path.intersects_bbox always treats the bounding box as filled
-------------------------------------------------------------

Previously, when ``Path.intersects_bbox`` was called with ``filled`` set to
``False``, it would treat both the path and the bounding box as unfilled. This
behavior was not well documented and it is usually not the desired behavior,
since bounding boxes are used to represent more complex shapes located inside
the bounding box. This behavior has now been changed: when ``filled`` is
``False``, the path will be treated as unfilled, but the bounding box is still
treated as filled. The old behavior was arguably an implementation bug.

When ``Path.intersects_bbox`` is called with ``filled`` set to ``True``
(the default value), there is no change in behavior. For those rare cases where
``Path.intersects_bbox`` was called with ``filled`` set to ``False`` and where
the old behavior is actually desired, the suggested workaround is to call
``Path.intersects_path`` with a rectangle as the path::

    from matplotlib.path import Path
    from matplotlib.transforms import Bbox, BboxTransformTo
    rect = Path.unit_rectangle().transformed(BboxTransformTo(bbox))
    result = path.intersects_path(rect, filled=False)




WX no longer calls generates ``IdleEvent`` events or calls ``idle_event``
-------------------------------------------------------------------------

Removed unused private method ``_onIdle`` from ``FigureCanvasWx``.

The ``IdleEvent`` class and ``FigureCanvasBase.idle_event`` method
will be removed in 2.2



Correct scaling of ``magnitude_spectrum()``
-------------------------------------------

The functions :func:`matplotlib.mlab.magnitude_spectrum()` and :func:`matplotlib.pyplot.magnitude_spectrum()` implicitly assumed the sum
of windowing function values to be one. In Matplotlib and Numpy the
standard windowing functions are scaled to have maximum value of one,
which usually results in a sum of the order of n/2 for a n-point
signal. Thus the amplitude scaling ``magnitude_spectrum()`` was
off by that amount when using standard windowing functions (`Bug 8417
<https://github.com/matplotlib/matplotlib/issues/8417>`_ ). Now the
behavior is consistent with :func:`matplotlib.pyplot.psd()` and
:func:`scipy.signal.welch()`. The following example demonstrates the
new and old scaling::

    import matplotlib.pyplot as plt
    import numpy as np

    tau, n = 10, 1024  # 10 second signal with 1024 points
    T = tau/n  # sampling interval
    t = np.arange(n)*T

    a = 4  # amplitude
    x = a*np.sin(40*np.pi*t)  # 20 Hz sine with amplitude a

    # New correct behavior: Amplitude at 20 Hz is a/2
    plt.magnitude_spectrum(x, Fs=1/T, sides='onesided', scale='linear')

    # Original behavior: Amplitude at 20 Hz is (a/2)*(n/2) for a Hanning window
    w = np.hanning(n)  # default window is a Hanning window
    plt.magnitude_spectrum(x*np.sum(w), Fs=1/T, sides='onesided', scale='linear')





Change to signatures of :meth:`~matplotlib.axes.Axes.bar` & :meth:`~matplotlib.axes.Axes.barh`
----------------------------------------------------------------------------------------------

For 2.0 the :ref:`default value of *align* <barbarh_align>` changed to
``'center'``.  However this caused the signature of
:meth:`~matplotlib.axes.Axes.bar` and
:meth:`~matplotlib.axes.Axes.barh` to be misleading as the first parameters were
still *left* and *bottom* respectively::

  bar(left, height, *, align='center', **kwargs)
  barh(bottom, width, *, align='center', **kwargs)

despite behaving as the center in both cases. The methods now take
``*args, **kwargs`` as input and are documented to have the primary
signatures of::

  bar(x, height, *, align='center', **kwargs)
  barh(y, width, *, align='center', **kwargs)

Passing *left* and *bottom* as keyword arguments to
:meth:`~matplotlib.axes.Axes.bar` and
:meth:`~matplotlib.axes.Axes.barh` respectively will warn.
Support will be removed in Matplotlib 3.0.


Font cache as json
------------------

The font cache is now saved as json, rather than a pickle.


Invalid (Non-finite) Axis Limit Error
-------------------------------------

When using :func:`~matplotlib.axes.Axes.set_xlim` and
:func:`~matplotlib.axes.Axes.set_ylim`, passing non-finite values now
results in a ``ValueError``. The previous behavior resulted in the
limits being erroneously reset to ``(-0.001, 0.001)``.

``scatter`` and ``Collection`` offsets are no longer implicitly flattened
-------------------------------------------------------------------------

`~matplotlib.collections.Collection` (and thus both 2D
`~matplotlib.axes.Axes.scatter` and 3D
`~mpl_toolkits.mplot3d.axes3d.Axes3D.scatter`) no
longer implicitly flattens its offsets.  As a consequence, ``scatter``'s ``x``
and ``y`` arguments can no longer be 2+-dimensional arrays.

Deprecations
------------

``GraphicsContextBase``\'s ``linestyle`` property.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The ``GraphicsContextBase.get_linestyle`` and
``GraphicsContextBase.set_linestyle`` methods, which had no effect,
have been deprecated.  All of the backends Matplotlib ships use
``GraphicsContextBase.get_dashes`` and
``GraphicsContextBase.set_dashes`` which are more general.
Third-party backends should also migrate to the ``*_dashes`` methods.


``NavigationToolbar2.dynamic_update``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Use :meth:`.draw_idle` method on the ``Canvas`` instance instead.


Testing
~~~~~~~

``matplotlib.testing.noseclasses`` is deprecated and will be removed in 2.3


``EngFormatter`` *num* arg as string
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Passing a string as *num* argument when calling an instance of
`matplotlib.ticker.EngFormatter` is deprecated and will be removed in 2.3.


``mpl_toolkits.axes_grid`` module
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

All functionally from ``mpl_toolkits.axes_grid`` can be found in either
`mpl_toolkits.axes_grid1` or `mpl_toolkits.axisartist`. Axes classes
from ``mpl_toolkits.axes_grid`` based on ``Axis`` from
`mpl_toolkits.axisartist` can be found in `mpl_toolkits.axisartist`.


``Axes`` collision in ``Figure.add_axes``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Adding an axes instance to a figure by using the same arguments as for
a previous axes instance currently reuses the earlier instance.  This
behavior has been deprecated in Matplotlib 2.1. In a future version, a
*new* instance will always be created and returned.  Meanwhile, in such
a situation, a deprecation warning is raised by
``matplotlib.figure.AxesStack``.

This warning can be suppressed, and the future behavior ensured, by passing
a *unique* label to each axes instance.  See the docstring of
:meth:`~matplotlib.figure.Figure.add_axes` for more information.

Additional details on the rationale behind this deprecation can be found
in :ghissue:`7377` and :ghissue:`9024`.


Former validators for ``contour.negative_linestyle``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


The former public validation functions ``validate_negative_linestyle``
and ``validate_negative_linestyle_legacy`` will be deprecated in 2.1 and
may be removed in 2.3. There are no public functions to replace them.



``cbook``
~~~~~~~~~

Many unused or near-unused :mod:`matplotlib.cbook` functions and
classes have been deprecated: ``converter``, ``tostr``,
``todatetime``, ``todate``, ``tofloat``, ``toint``, ``unique``,
``is_string_like``, ``is_sequence_of_strings``, ``is_scalar``,
``Sorter``, ``Xlator``, ``soundex``, ``Null``, ``dict_delall``,
``RingBuffer``, ``get_split_ind``, ``wrap``,
``get_recursive_filelist``, ``pieces``, ``exception_to_str``,
``allequal``, ``alltrue``, ``onetrue``, ``allpairs``, ``finddir``,
``reverse_dict``, ``restrict_dict``, ``issubclass_safe``,
``recursive_remove``, ``unmasked_index_ranges``.


Code Removal
------------

qt4_compat.py
~~~~~~~~~~~~~

Moved to ``qt_compat.py``.  Renamed because it now handles Qt5 as well.


Previously Deprecated methods
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The ``GraphicsContextBase.set_graylevel``, ``FigureCanvasBase.onHilite`` and
``mpl_toolkits.axes_grid1.mpl_axes.Axes.toggle_axisline`` methods have been
removed.

The ``ArtistInspector.findobj`` method, which was never working due to the lack
of a ``get_children`` method, has been removed.

The deprecated ``point_in_path``, ``get_path_extents``,
``point_in_path_collection``, ``path_intersects_path``,
``convert_path_to_polygons``, ``cleanup_path`` and ``clip_path_to_rect``
functions in the ``matplotlib.path`` module have been removed.  Their
functionality remains exposed as methods on the ``Path`` class.

The deprecated ``Artist.get_axes`` and ``Artist.set_axes`` methods
have been removed


The ``matplotlib.backends.backend_ps.seq_allequal`` function has been removed.
Use ``np.array_equal`` instead.

The deprecated ``matplotlib.rcsetup.validate_maskedarray``,
``matplotlib.rcsetup.deprecate_savefig_extension`` and
``matplotlib.rcsetup.validate_tkpythoninspect`` functions, and associated
``savefig.extension`` and ``tk.pythoninspect`` rcparams entries have been
removed.


The keyword argument *resolution* of
:class:`matplotlib.projections.polar.PolarAxes` has been removed. It
has deprecation with no effect from version *0.98.x*.


``Axes.set_aspect("normal")``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Support for setting an ``Axes``\'s aspect to ``"normal"`` has been
removed, in favor of the synonym ``"auto"``.


``shading`` kwarg to ``pcolor``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The ``shading`` kwarg to `~matplotlib.axes.Axes.pcolor` has been
removed.  Set ``edgecolors`` appropriately instead.


Functions removed from the `.lines` module
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The :mod:`matplotlib.lines` module no longer imports the
``pts_to_prestep``, ``pts_to_midstep`` and ``pts_to_poststep``
functions from :mod:`matplotlib.cbook`.


PDF backend functions
~~~~~~~~~~~~~~~~~~~~~

The methods ``embedTeXFont`` and ``tex_font_mapping`` of
:class:`matplotlib.backends.backend_pdf.PdfFile` have been removed.  It is
unlikely that external users would have called these methods, which
are related to the font system internal to the PDF backend.


matplotlib.delaunay
~~~~~~~~~~~~~~~~~~~

Remove the delaunay triangulation code which is now handled by Qhull
via :mod:`matplotlib.tri`.
API Changes for 3.1.1
=====================

.. contents::
   :local:
   :depth: 1

Behavior changes
----------------

Locator.nonsingular return order
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`.Locator.nonsingular` (introduced in mpl 3.1) now returns a range ``v0, v1``
with ``v0 <= v1``.  This behavior is consistent with the implementation of
``nonsingular`` by the `.LogLocator` and `.LogitLocator` subclasses.

API Changes in 2.0.0
====================

Deprecation and removal
-----------------------

Color of Axes
~~~~~~~~~~~~~
The ``axisbg`` and ``axis_bgcolor`` properties on *Axes* have been
deprecated in favor of ``facecolor``.

GTK and GDK backends deprecated
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The GDK and GTK backends have been deprecated. These obsolete backends
allow figures to be rendered via the GDK API to files and GTK2 figures.
They are untested and known to be broken, and their use has been
discouraged for some time.  Instead, use the ``GTKAgg`` and ``GTKCairo``
backends for rendering to GTK2 windows.

WX backend deprecated
~~~~~~~~~~~~~~~~~~~~~
The WX backend has been deprecated.  It is untested, and its
use has been discouraged for some time. Instead, use the ``WXAgg``
backend for rendering figures to WX windows.

CocoaAgg backend removed
~~~~~~~~~~~~~~~~~~~~~~~~
The deprecated and not fully functional CocoaAgg backend has been removed.

`round` removed from TkAgg Backend
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The TkAgg backend had its own implementation of the `round` function. This
was unused internally and has been removed. Instead, use either the
`round` builtin function or `numpy.around`.

.. _v200_deprecate_hold:

'hold' functionality deprecated
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The 'hold' keyword argument and all functions and methods related
to it are deprecated, along with the ``axes.hold`` rcParams entry.
The behavior will remain consistent with the default ``hold=True``
state that has long been in place.  Instead of using a function
or keyword argument (``hold=False``) to change that behavior,
explicitly clear the axes or figure as needed prior to subsequent
plotting commands.


`.Artist.update` has return value
---------------------------------

The methods `matplotlib.artist.Artist.set`, `matplotlib.artist.Artist.update`,
and the function `matplotlib.artist.setp` now use a common codepath to look up
how to update the given artist properties (either using the setter methods or
an attribute/property).

The behavior of `matplotlib.artist.Artist.update` is slightly changed to return
a list of the values returned from the setter methods to avoid changing the API
of `matplotlib.artist.Artist.set` and `matplotlib.artist.setp`.

The keys passed into `matplotlib.artist.Artist.update` are now converted to
lower case before being processed, to match the behavior of
`matplotlib.artist.Artist.set` and `matplotlib.artist.setp`.  This should not
break any user code because there are no set methods with capitals in
their names, but this puts a constraint on naming properties in the future.


`.Legend` initializers gain *edgecolor* and *facecolor* keyword arguments
-------------------------------------------------------------------------

The :class:`~matplotlib.legend.Legend` background patch (or 'frame')
can have its ``edgecolor`` and ``facecolor`` determined by the
corresponding keyword arguments to the :class:`matplotlib.legend.Legend`
initializer, or to any of the methods or functions that call that
initializer.  If left to their default values of `None`, their values
will be taken from ``matplotlib.rcParams``.  The previously-existing
``framealpha`` kwarg still controls the alpha transparency of the
patch.


Qualitative colormaps
---------------------

Colorbrewer's qualitative/discrete colormaps ("Accent", "Dark2", "Paired",
"Pastel1", "Pastel2", "Set1", "Set2", "Set3") are now implemented as
`.ListedColormap` instead of `.LinearSegmentedColormap`.

To use these for images where categories are specified as integers, for
instance, use::

    plt.imshow(x, cmap='Dark2', norm=colors.NoNorm())


Change in the ``draw_image`` backend API
----------------------------------------

The ``draw_image`` method implemented by backends has changed its interface.

This change is only relevant if the backend declares that it is able
to transform images by returning ``True`` from ``option_scale_image``.
See the ``draw_image`` docstring for more information.



``matplotlib.ticker.LinearLocator`` algorithm update
----------------------------------------------------

The `matplotlib.ticker.LinearLocator` is used to define the range and
location of axis ticks when the user wants an exact number of ticks.
``LinearLocator`` thus differs from the default locator ``MaxNLocator``,
for which the user specifies a maximum number of intervals rather than
a precise number of ticks.

The view range algorithm in ``matplotlib.ticker.LinearLocator`` has been
changed so that more convenient tick locations are chosen. The new algorithm
returns a plot view range that is a multiple of the user-requested number of
ticks. This ensures tick marks will be located at whole integers more
consistently. For example, when both y-axes of a``twinx`` plot use
``matplotlib.ticker.LinearLocator`` with the same number of ticks,
their y-tick locations and grid lines will coincide.

`matplotlib.ticker.LogLocator` gains numticks kwarg
---------------------------------------------------

The maximum number of ticks generated by the
`~matplotlib.ticker.LogLocator` can now be controlled explicitly
via setting the new 'numticks' kwarg to an integer.  By default
the kwarg is None which internally sets it to the 'auto' string,
triggering a new algorithm for adjusting the maximum according
to the axis length relative to the ticklabel font size.

`matplotlib.ticker.LogFormatter`: two new kwargs
------------------------------------------------

Previously, minor ticks on log-scaled axes were not labeled by
default.  An algorithm has been added to the
`~matplotlib.ticker.LogFormatter` to control the labeling of
ticks between integer powers of the base.  The algorithm uses
two parameters supplied in a kwarg tuple named 'minor_thresholds'.
See the docstring for further explanation.

To improve support for axes using `~matplotlib.ticker.SymmetricalLogLocator`,
a *linthresh* keyword argument was added.


New defaults for 3D quiver function in mpl_toolkits.mplot3d.axes3d.py
---------------------------------------------------------------------

Matplotlib has both a 2D and a 3D ``quiver`` function. These changes
affect only the 3D function and make the default behavior of the 3D
function match the 2D version. There are two changes:

1) The 3D quiver function previously normalized the arrows to be the
   same length, which makes it unusable for situations where the
   arrows should be different lengths and does not match the behavior
   of the 2D function. This normalization behavior is now controlled
   with the ``normalize`` keyword, which defaults to False.

2) The ``pivot`` keyword now defaults to ``tail`` instead of
   ``tip``. This was done in order to match the default behavior of
   the 2D quiver function.

To obtain the previous behavior with the 3D quiver function, one can
call the function with ::

   ax.quiver(x, y, z, u, v, w, normalize=True, pivot='tip')

where "ax" is an ``Axes3d`` object created with something like ::

   import mpl_toolkits.mplot3d.axes3d
   ax = plt.subplot(111, projection='3d')


Stale figure behavior
---------------------

Attempting to draw the figure will now mark it as not stale (independent if
the draw succeeds).  This change is to prevent repeatedly trying to re-draw a
figure which is raising an error on draw.  The previous behavior would only mark
a figure as not stale after a full re-draw succeeded.


The spectral colormap is now nipy_spectral
------------------------------------------

The colormaps formerly known as ``spectral`` and ``spectral_r`` have been
replaced by ``nipy_spectral`` and ``nipy_spectral_r`` since Matplotlib
1.3.0. Even though the colormap was deprecated in Matplotlib 1.3.0, it never
raised a warning. As of Matplotlib 2.0.0, using the old names raises a
deprecation warning. In the future, using the old names will raise an error.

Default install no longer includes test images
----------------------------------------------

To reduce the size of wheels and source installs, the tests and
baseline images are no longer included by default.

To restore installing the tests and images, use a :file:`setup.cfg` with ::

   [packages]
   tests = True
   toolkits_tests = True

in the source directory at build/install time.
Changes for 0.65
================

.. code-block:: text


  mpl_connect and mpl_disconnect in the MATLAB interface renamed to
  connect and disconnect

  Did away with the text methods for angle since they were ambiguous.
  fontangle could mean fontstyle (obligue, etc) or the rotation of the
  text.  Use style and rotation instead.

API Changes in 2.0.1
====================

Extensions to `matplotlib.backend_bases.GraphicsContextBase`
------------------------------------------------------------

To better support controlling the color of hatches, the method
`matplotlib.backend_bases.GraphicsContextBase.set_hatch_color` was
added to the expected API of ``GraphicsContext`` classes.  Calls to
this method are currently wrapped with a ``try:...except Attribute:``
block to preserve back-compatibility with any third-party backends
which do not extend `~matplotlib.backend_bases.GraphicsContextBase`.

This value can be accessed in the backends via
`matplotlib.backend_bases.GraphicsContextBase.get_hatch_color` (which
was added in 2.0 see :ref:`gc_get_hatch_color_wn`) and should be used
to color the hatches.

In the future there may also be ``hatch_linewidth`` and
``hatch_density`` related methods added.  It is encouraged, but not
required that third-party backends extend
`~matplotlib.backend_bases.GraphicsContextBase` to make adapting to
these changes easier.


``afm.get_fontconfig_fonts`` returns a list of paths and does not check for existence
-------------------------------------------------------------------------------------

``afm.get_fontconfig_fonts`` used to return a set of paths encoded as a
``{key: 1, ...}`` dict, and checked for the existence of the paths.  It now
returns a list and dropped the existence check, as the same check is performed
by the caller (``afm.findSystemFonts``) as well.


``bar`` now returns rectangles of negative height or width if the corresponding input is negative
-------------------------------------------------------------------------------------------------

`.pyplot.bar` used to normalize the coordinates of the rectangles that it
created, to keep their height and width positives, even if the corresponding
input was negative.  This normalization has been removed to permit a simpler
computation of the correct `.Artist.sticky_edges` to use.


Do not clip line width when scaling dashes
------------------------------------------

The algorithm to scale dashes was changed to no longer clip the
scaling factor: the dash patterns now continue to shrink at thin line widths.
If the line width is smaller than the effective pixel size, this may result in
dashed lines turning into solid gray-ish lines.  This also required slightly
tweaking the default patterns for '--', ':', and '.-' so that with the default
line width the final patterns would not change.

There is no way to restore the old behavior.


Deprecate 'Vega' colormaps
--------------------------

The "Vega" colormaps are deprecated in Matplotlib 2.0.1 and will be
removed in Matplotlib 2.2. Use the "tab" colormaps instead: "tab10",
"tab20", "tab20b", "tab20c".
Changes for 0.83
================

.. code-block:: text

  - Made HOME/.matplotlib the new config dir where the matplotlibrc
    file, the ttf.cache, and the tex.cache live.  The new default
    filenames in .matplotlib have no leading dot and are not hidden.
    e.g., the new names are matplotlibrc, tex.cache, and ttffont.cache.
    This is how ipython does it so it must be right.

    If old files are found, a warning is issued and they are moved to
    the new location.

  - backends/__init__.py no longer imports new_figure_manager,
    draw_if_interactive and show from the default backend, but puts
    these imports into a call to pylab_setup.  Also, the Toolbar is no
    longer imported from WX/WXAgg.  New usage:

      from backends import pylab_setup
      new_figure_manager, draw_if_interactive, show = pylab_setup()

  - Moved Figure.get_width_height() to FigureCanvasBase. It now
    returns int instead of float.
Changes for 0.98.1
==================

* Removed broken ``matplotlib.axes3d`` support and replaced it with a
  non-implemented error pointing to 0.91.x
API Changes for 3.2.0
=====================

.. contents::
   :local:
   :depth: 1

.. include:: /api/prev_api_changes/api_changes_3.2.0/behavior.rst

.. include:: /api/prev_api_changes/api_changes_3.2.0/deprecations.rst

.. include:: /api/prev_api_changes/api_changes_3.2.0/removals.rst

.. include:: /api/prev_api_changes/api_changes_3.2.0/development.rst

Changes for 0.50
================

.. code-block:: text

  * refactored Figure class so it is no longer backend dependent.
    FigureCanvasBackend takes over the backend specific duties of the
    Figure.  matplotlib.backend_bases.FigureBase moved to
    matplotlib.figure.Figure.

  * backends must implement FigureCanvasBackend (the thing that
    controls the figure and handles the events if any) and
    FigureManagerBackend (wraps the canvas and the window for MATLAB
    interface).  FigureCanvasBase implements a backend switching
    mechanism

  * Figure is now an Artist (like everything else in the figure) and
    is totally backend independent

  * GDFONTPATH renamed to TTFPATH

  * backend faceColor argument changed to rgbFace

  * colormap stuff moved to colors.py

  * arg_to_rgb in backend_bases moved to class ColorConverter in
    colors.py

  * GD users must upgrade to gd-2.0.22 and gdmodule-0.52 since new gd
    features (clipping, antialiased lines) are now used.

  * Renderer must implement points_to_pixels

  Migrating code:

  MATLAB interface:

    The only API change for those using the MATLAB interface is in how
    you call figure redraws for dynamically updating figures.  In the
    old API, you did

      fig.draw()

    In the new API, you do

      manager = get_current_fig_manager()
      manager.canvas.draw()

    See the examples system_monitor.py, dynamic_demo.py, and anim.py

  API

    There is one important API change for application developers.
    Figure instances used subclass GUI widgets that enabled them to be
    placed directly into figures.  e.g., FigureGTK subclassed
    gtk.DrawingArea.  Now the Figure class is independent of the
    backend, and FigureCanvas takes over the functionality formerly
    handled by Figure.  In order to include figures into your apps,
    you now need to do, for example

      # gtk example
      fig = Figure(figsize=(5,4), dpi=100)
      canvas = FigureCanvasGTK(fig)  # a gtk.DrawingArea
      canvas.show()
      vbox.pack_start(canvas)

    If you use the NavigationToolbar, this in now initialized with a
    FigureCanvas, not a Figure.  The examples embedding_in_gtk.py,
    embedding_in_gtk2.py, and mpl_with_glade.py all reflect the new
    API so use these as a guide.

    All prior calls to

     figure.draw()  and
     figure.print_figure(args)

    should now be

     canvas.draw()  and
     canvas.print_figure(args)

    Apologies for the inconvenience.  This refactorization brings
    significant more freedom in developing matplotlib and should bring
    better plotting capabilities, so I hope the inconvenience is worth
    it.

API Changes in 2.2.0
====================



New dependency
--------------

`kiwisolver <https://github.com/nucleic/kiwi>`__ is now a required
dependency to support the new constrained_layout,  see
:doc:`/tutorials/intermediate/constrainedlayout_guide` for
more details.


Deprecations
------------

Classes, functions, and methods
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The unused and untested ``Artist.onRemove`` and ``Artist.hitlist`` methods have
been deprecated.

The now unused ``mlab.less_simple_linear_interpolation`` function is
deprecated.

The unused ``ContourLabeler.get_real_label_width`` method is deprecated.

The unused ``FigureManagerBase.show_popup`` method is deprecated.  This
introduced in e945059b327d42a99938b939a1be867fa023e7ba in 2005 but never built
out into any of the backends.

``backend_tkagg.AxisMenu`` is deprecated, as it has become unused since the
removal of "classic" toolbars.


Changed function signatures
~~~~~~~~~~~~~~~~~~~~~~~~~~~

kwarg ``fig`` to `.GridSpec.get_subplot_params` is
deprecated,  use ``figure`` instead.

Using `.pyplot.axes` with an `~matplotlib.axes.Axes` as argument is deprecated. This sets
the current axes, i.e. it has the same effect as `.pyplot.sca`. For clarity
``plt.sca(ax)`` should be preferred over ``plt.axes(ax)``.


Using strings instead of booleans to control grid and tick visibility
is deprecated.  Using ``"on"``, ``"off"``, ``"true"``, or ``"false"``
to control grid and tick visibility has been deprecated.  Instead, use
normal booleans (``True``/``False``) or boolean-likes.  In the future,
all non-empty strings may be interpreted as ``True``.

When given 2D inputs with non-matching numbers of columns, `~.pyplot.plot`
currently cycles through the columns of the narrower input, until all the
columns of the wider input have been plotted.  This behavior is deprecated; in
the future, only broadcasting (1 column to *n* columns) will be performed.


rcparams
~~~~~~~~

The :rc:`backend.qt4` and :rc:`backend.qt5` rcParams were deprecated
in version 2.2.  In order to force the use of a specific Qt binding,
either import that binding first, or set the ``QT_API`` environment
variable.

Deprecation of the ``nbagg.transparent`` rcParam.  To control
transparency of figure patches in the nbagg (or any other) backend,
directly set ``figure.patch.facecolor``, or the ``figure.facecolor``
rcParam.

Deprecated ``Axis.unit_data``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Use `.Axis.units` (which has long existed) instead.


Removals
--------

Function Signatures
~~~~~~~~~~~~~~~~~~~

Contouring no longer supports ``legacy`` corner masking.  The
deprecated ``ContourSet.vmin`` and ``ContourSet.vmax`` properties have
been removed.

Passing ``None`` instead of ``"none"`` as format to `~.Axes.errorbar` is no
longer supported.

The ``bgcolor`` keyword argument to ``Axes`` has been removed.

Modules, methods, and functions
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The ``matplotlib.finance``, ``mpl_toolkits.exceltools`` and
``mpl_toolkits.gtktools`` modules have been removed.  ``matplotlib.finance``
remains available at https://github.com/matplotlib/mpl_finance.

The ``mpl_toolkits.mplot3d.art3d.iscolor`` function has been removed.

The ``Axes.get_axis_bgcolor``, ``Axes.set_axis_bgcolor``,
``Bbox.update_from_data``, ``Bbox.update_datalim_numerix``,
``MaxNLocator.bin_boundaries`` methods have been removed.

``mencoder`` can no longer be used to encode animations.

The unused ``FONT_SCALE`` and ``fontd`` attributes of the `.RendererSVG`
class have been removed.

colormaps
~~~~~~~~~

The ``spectral`` colormap has been removed.  The ``Vega*`` colormaps, which
were aliases for the ``tab*`` colormaps, have been removed.


rcparams
~~~~~~~~

The following deprecated rcParams have been removed:

- ``axes.color_cycle`` (see ``axes.prop_cycle``),
- ``legend.isaxes``,
- ``svg.embed_char_paths`` (see ``svg.fonttype``),
- ``text.fontstyle``, ``text.fontangle``, ``text.fontvariant``,
  ``text.fontweight``, ``text.fontsize`` (renamed to ``text.style``, etc.),
- ``tick.size`` (renamed to ``tick.major.size``).



Only accept string-like for Categorical input
---------------------------------------------

Do not accept mixed string / float / int input, only
strings are valid categoricals.

Removal of unused imports
-------------------------
Many unused imports were removed from the codebase.  As a result,
trying to import certain classes or functions from the "wrong" module
(e.g. `~.Figure` from :mod:`matplotlib.backends.backend_agg` instead of
:mod:`matplotlib.figure`) will now raise an `ImportError`.


``Axes3D.get_xlim``, ``get_ylim`` and ``get_zlim`` now return a tuple
---------------------------------------------------------------------

They previously returned an array.  Returning a tuple is consistent with the
behavior for 2D axes.


Exception type changes
----------------------

If `.MovieWriterRegistry` can't find the requested `.MovieWriter`, a
more helpful `RuntimeError` message is now raised instead of the
previously raised `KeyError`.

``matplotlib.tight_layout.auto_adjust_subplotpars`` now raises `ValueError`
instead of `RuntimeError` when sizes of input lists don't match


`.Figure.set_figwidth` and `.Figure.set_figheight` default *forward* to True
----------------------------------------------------------------------------

`matplotlib.figure.Figure.set_figwidth` and
`matplotlib.figure.Figure.set_figheight` had the keyword argument
``forward=False`` by default, but `.figure.Figure.set_size_inches` now defaults
to ``forward=True``.  This makes these functions conistent.


Do not truncate svg sizes to nearest point
------------------------------------------

There is no reason to size the SVG out put in integer points, change
to out putting floats for the *height*, *width*, and *viewBox* attributes
of the *svg* element.


Fontsizes less than 1 pt are clipped to be 1 pt.
------------------------------------------------

FreeType doesn't allow fonts to get smaller than 1 pt, so all Agg
backends were silently rounding up to 1 pt.  PDF (other vector
backends?) were letting us write fonts that were less than 1 pt, but
they could not be placed properly because position information comes from
FreeType.  This change makes it so no backends can use fonts smaller than
1 pt, consistent with FreeType and ensuring more consistent results across
backends.



Changes to Qt backend class MRO
-------------------------------

To support both Agg and cairo rendering for Qt backends all of the non-Agg
specific code previously in ``backend_qt5agg.FigureCanvasQTAggBase`` has been
moved to :class:`.backend_qt5.FigureCanvasQT` so it can be shared with the
cairo implementation.  The ``FigureCanvasQTAggBase.paintEvent``,
``FigureCanvasQTAggBase.blit``, and ``FigureCanvasQTAggBase.print_figure``
methods have moved to :meth:`.FigureCanvasQTAgg.paintEvent`,
:meth:`.FigureCanvasQTAgg.blit`, and :meth:`.FigureCanvasQTAgg.print_figure`.
The first two methods assume that the instance is also a ``QWidget`` so to use
``FigureCanvasQTAggBase`` it was required to multiple inherit from a
``QWidget`` sub-class.

Having moved all of its methods either up or down the class hierarchy
``FigureCanvasQTAggBase`` has been deprecated.  To do this without warning and
to preserve as much API as possible, ``.backend_qt5agg.FigureCanvasQTAggBase``
now inherits from :class:`.backend_qt5.FigureCanvasQTAgg`.

The MRO for :class:`.FigureCanvasQTAgg` and ``FigureCanvasQTAggBase`` used to
be ::


   [matplotlib.backends.backend_qt5agg.FigureCanvasQTAgg,
    matplotlib.backends.backend_qt5agg.FigureCanvasQTAggBase,
    matplotlib.backends.backend_agg.FigureCanvasAgg,
    matplotlib.backends.backend_qt5.FigureCanvasQT,
    PyQt5.QtWidgets.QWidget,
    PyQt5.QtCore.QObject,
    sip.wrapper,
    PyQt5.QtGui.QPaintDevice,
    sip.simplewrapper,
    matplotlib.backend_bases.FigureCanvasBase,
    object]

and ::


   [matplotlib.backends.backend_qt5agg.FigureCanvasQTAggBase,
    matplotlib.backends.backend_agg.FigureCanvasAgg,
    matplotlib.backend_bases.FigureCanvasBase,
    object]


respectively.  They are now ::

   [matplotlib.backends.backend_qt5agg.FigureCanvasQTAgg,
    matplotlib.backends.backend_agg.FigureCanvasAgg,
    matplotlib.backends.backend_qt5.FigureCanvasQT,
    PyQt5.QtWidgets.QWidget,
    PyQt5.QtCore.QObject,
    sip.wrapper,
    PyQt5.QtGui.QPaintDevice,
    sip.simplewrapper,
    matplotlib.backend_bases.FigureCanvasBase,
    object]

and ::

   [matplotlib.backends.backend_qt5agg.FigureCanvasQTAggBase,
    matplotlib.backends.backend_qt5agg.FigureCanvasQTAgg,
    matplotlib.backends.backend_agg.FigureCanvasAgg,
    matplotlib.backends.backend_qt5.FigureCanvasQT,
    PyQt5.QtWidgets.QWidget,
    PyQt5.QtCore.QObject,
    sip.wrapper,
    PyQt5.QtGui.QPaintDevice,
    sip.simplewrapper,
    matplotlib.backend_bases.FigureCanvasBase,
    object]




`.axes.Axes.imshow` clips RGB values to the valid range
-------------------------------------------------------

When `.axes.Axes.imshow` is passed an RGB or RGBA value with out-of-range
values, it now logs a warning and clips them to the valid range.
The old behaviour, wrapping back in to the range, often hid outliers
and made interpreting RGB images unreliable.


GTKAgg and GTKCairo backends deprecated
---------------------------------------

The GTKAgg and GTKCairo backends have been deprecated. These obsolete backends
allow figures to be rendered via the GTK+ 2 toolkit. They are untested, known
to be broken, will not work with Python 3, and their use has been discouraged
for some time. Instead, use the ``GTK3Agg`` and ``GTK3Cairo`` backends for
rendering to GTK+ 3 windows.
Changes for 0.90.0
==================

.. code-block:: text

    All artists now implement a "pick" method which users should not
    call.  Rather, set the "picker" property of any artist you want to
    pick on (the epsilon distance in points for a hit test) and
    register with the "pick_event" callback.  See
    examples/pick_event_demo.py for details

    Bar, barh, and hist have "log" binary kwarg: log=True
    sets the ordinate to a log scale.

    Boxplot can handle a list of vectors instead of just
    an array, so vectors can have different lengths.

    Plot can handle 2-D x and/or y; it plots the columns.

    Added linewidth kwarg to bar and barh.

    Made the default Artist._transform None (rather than invoking
    identity_transform for each artist only to have it overridden
    later).  Use artist.get_transform() rather than artist._transform,
    even in derived classes, so that the default transform will be
    created lazily as needed

    New LogNorm subclass of Normalize added to colors.py.
    All Normalize subclasses have new inverse() method, and
    the __call__() method has a new clip kwarg.

    Changed class names in colors.py to match convention:
    normalize -> Normalize, no_norm -> NoNorm.  Old names
    are still available for now.

    Removed obsolete pcolor_classic command and method.

    Removed lineprops and markerprops from the Annotation code and
    replaced them with an arrow configurable with kwarg arrowprops.
    See examples/annotation_demo.py - JDH
API Changes in 1.5.3
====================

``ax.plot(..., marker=None)`` gives default marker
--------------------------------------------------

Prior to 1.5.3 keyword arguments passed to `~matplotlib.axes.Axes.plot` were
handled in two parts -- default keyword arguments generated internal to
`~matplotlib.axes.Axes.plot` (such as the cycled styles) and user supplied
keyword arguments.  The internally generated keyword arguments were passed to
the `matplotlib.lines.Line2D` and the user keyword arguments were passed to
``ln.set(**kwargs)`` to update the artist after it was created.  Now both sets
of keyword arguments are merged and passed to `~matplotlib.lines.Line2D`.  This
change was made to allow *None* to be passed in via the user keyword arguments
to mean 'do the default thing' as is the convention through out Matplotlib
rather than raising an exception.

Unlike most `~matplotlib.lines.Line2D` setter methods
`~matplotlib.lines.Line2D.set_marker` did accept `None` as a valid
input which was mapped to 'no marker'.  Thus, by routing this
``marker=None`` through ``__init__`` rather than ``set(...)`` the meaning
of ``ax.plot(..., marker=None)`` changed from 'no markers' to 'default markers
from rcparams'.

This is change is only evident if ``mpl.rcParams['lines.marker']`` has a value
other than ``'None'`` (which is string ``'None'`` which means 'no marker').
Changes for 0.85
================

.. code-block:: text

    Made xtick and ytick separate props in rc

    made pos=None the default for tick formatters rather than 0 to
    indicate "not supplied"

    Removed "feature" of minor ticks which prevents them from
    overlapping major ticks.  Often you want major and minor ticks at
    the same place, and can offset the major ticks with the pad.  This
    could be made configurable

    Changed the internal structure of contour.py to a more OO style.
    Calls to contour or contourf in axes.py or pylab.py now return
    a ContourSet object which contains references to the
    LineCollections or PolyCollections created by the call,
    as well as the configuration variables that were used.
    The ContourSet object is a "mappable" if a colormap was used.

    Added a clip_ends kwarg to contourf. From the docstring:
             * clip_ends = True
               If False, the limits for color scaling are set to the
               minimum and maximum contour levels.
               True (default) clips the scaling limits.  Example:
               if the contour boundaries are V = [-100, 2, 1, 0, 1, 2, 100],
               then the scaling limits will be [-100, 100] if clip_ends
               is False, and [-3, 3] if clip_ends is True.
    Added kwargs linewidths, antialiased, and nchunk to contourf.  These
    are experimental; see the docstring.

    Changed Figure.colorbar():
        kw argument order changed;
        if mappable arg is a non-filled ContourSet, colorbar() shows
                lines instead hof polygons.
        if mappable arg is a filled ContourSet with clip_ends=True,
                the endpoints are not labelled, so as to give the
                correct impression of open-endedness.

    Changed LineCollection.get_linewidths to get_linewidth, for
    consistency.

Changes for 0.54
================

MATLAB interface
----------------

dpi
~~~

Several of the backends used a PIXELS_PER_INCH hack that I added to
try and make images render consistently across backends.  This just
complicated matters.  So you may find that some font sizes and line
widths appear different than before.  Apologies for the
inconvenience. You should set the dpi to an accurate value for your
screen to get true sizes.


pcolor and scatter
~~~~~~~~~~~~~~~~~~

There are two changes to the MATLAB interface API, both involving the
patch drawing commands.  For efficiency, pcolor and scatter have been
rewritten to use polygon collections, which are a new set of objects
from matplotlib.collections designed to enable efficient handling of
large collections of objects.  These new collections make it possible
to build large scatter plots or pcolor plots with no loops at the
python level, and are significantly faster than their predecessors.
The original pcolor and scatter functions are retained as
pcolor_classic and scatter_classic.

The return value from pcolor is a PolyCollection.  Most of the
properties that are available on rectangles or other patches are also
available on PolyCollections, e.g., you can say::

  c = scatter(blah, blah)
  c.set_linewidth(1.0)
  c.set_facecolor('r')
  c.set_alpha(0.5)

or::

  c = scatter(blah, blah)
  set(c, 'linewidth', 1.0, 'facecolor', 'r', 'alpha', 0.5)


Because the collection is a single object, you no longer need to loop
over the return value of scatter or pcolor to set properties for the
entire list.

If you want the different elements of a collection to vary on a
property, e.g., to have different line widths, see matplotlib.collections
for a discussion on how to set the properties as a sequence.

For scatter, the size argument is now in points^2 (the area of the
symbol in points) as in MATLAB and is not in data coords as before.
Using sizes in data coords caused several problems.  So you will need
to adjust your size arguments accordingly or use scatter_classic.

mathtext spacing
~~~~~~~~~~~~~~~~

For reasons not clear to me (and which I'll eventually fix) spacing no
longer works in font groups.  However, I added three new spacing
commands which compensate for this '\ ' (regular space), '\/' (small
space) and '\hspace{frac}' where frac is a fraction of fontsize in
points.  You will need to quote spaces in font strings, is::

  title(r'$\rm{Histogram\ of\ IQ:}\ \mu=100,\ \sigma=15$')



Object interface - Application programmers
------------------------------------------

Autoscaling
~~~~~~~~~~~

  The x and y axis instances no longer have autoscale view.  These are
  handled by axes.autoscale_view

Axes creation
~~~~~~~~~~~~~

    You should not instantiate your own Axes any more using the OO API.
    Rather, create a Figure as before and in place of::

      f = Figure(figsize=(5,4), dpi=100)
      a = Subplot(f, 111)
      f.add_axis(a)

    use::

      f = Figure(figsize=(5,4), dpi=100)
      a = f.add_subplot(111)

    That is, add_axis no longer exists and is replaced by::

      add_axes(rect, axisbg=defaultcolor, frameon=True)
      add_subplot(num, axisbg=defaultcolor, frameon=True)

Artist methods
~~~~~~~~~~~~~~

  If you define your own Artists, you need to rename the _draw method
  to draw

Bounding boxes
~~~~~~~~~~~~~~

   matplotlib.transforms.Bound2D is replaced by
   matplotlib.transforms.Bbox.  If you want to construct a bbox from
   left, bottom, width, height (the signature for Bound2D), use
   matplotlib.transforms.lbwh_to_bbox, as in

    bbox = clickBBox = lbwh_to_bbox(left, bottom, width, height)

   The Bbox has a different API than the Bound2D.  e.g., if you want to
   get the width and height of the bbox

     OLD::
        width  = fig.bbox.x.interval()
        height = fig.bbox.y.interval()

     New::
        width  = fig.bbox.width()
        height = fig.bbox.height()




Object constructors
~~~~~~~~~~~~~~~~~~~

  You no longer pass the bbox, dpi, or transforms to the various
  Artist constructors.  The old way or creating lines and rectangles
  was cumbersome because you had to pass so many attributes to the
  Line2D and Rectangle classes not related directly to the geometry
  and properties of the object.  Now default values are added to the
  object when you call axes.add_line or axes.add_patch, so they are
  hidden from the user.

  If you want to define a custom transformation on these objects, call
  o.set_transform(trans) where trans is a Transformation instance.

  In prior versions of you wanted to add a custom line in data coords,
  you would have to do

        l =  Line2D(dpi, bbox, x, y,
                    color = color,
                    transx = transx,
                    transy = transy,
                    )

  now all you need is

        l =  Line2D(x, y, color=color)

  and the axes will set the transformation for you (unless you have
  set your own already, in which case it will eave it unchanged)

Transformations
~~~~~~~~~~~~~~~

  The entire transformation architecture has been rewritten.
  Previously the x and y transformations where stored in the xaxis and
  yaxis instances.  The problem with this approach is it only allows
  for separable transforms (where the x and y transformations don't
  depend on one another).  But for cases like polar, they do.  Now
  transformations operate on x,y together.  There is a new base class
  matplotlib.transforms.Transformation and two concrete
  implementations, matplotlib.transforms.SeparableTransformation and
  matplotlib.transforms.Affine.  The SeparableTransformation is
  constructed with the bounding box of the input (this determines the
  rectangular coordinate system of the input, i.e., the x and y view
  limits), the bounding box of the display, and possibly nonlinear
  transformations of x and y.  The 2 most frequently used
  transformations, data coordinates -> display and axes coordinates ->
  display are available as ax.transData and ax.transAxes.  See
  alignment_demo.py which uses axes coords.

  Also, the transformations should be much faster now, for two reasons

   * they are written entirely in extension code

   * because they operate on x and y together, they can do the entire
     transformation in one loop.  Earlier I did something along the
     lines of::

       xt = sx*func(x) + tx
       yt = sy*func(y) + ty

     Although this was done in numerix, it still involves 6 length(x)
     for-loops (the multiply, add, and function evaluation each for x
     and y).  Now all of that is done in a single pass.


  If you are using transformations and bounding boxes to get the
  cursor position in data coordinates, the method calls are a little
  different now.  See the updated examples/coords_demo.py which shows
  you how to do this.

  Likewise, if you are using the artist bounding boxes to pick items
  on the canvas with the GUI, the bbox methods are somewhat
  different.  You will need to see the updated
  examples/object_picker.py.

  See unit/transforms_unit.py for many examples using the new
  transformations.


.. highlight:: none


Changes for 0.98.0
==================

* :func:`matplotlib.image.imread` now no longer always returns RGBA data---if
  the image is luminance or RGB, it will return a MxN or MxNx3 array
  if possible.  Also uint8 is no longer always forced to float.

* Rewrote the :class:`matplotlib.cm.ScalarMappable` callback
  infrastructure to use :class:`matplotlib.cbook.CallbackRegistry`
  rather than custom callback handling.  Any users of
  ``matplotlib.cm.ScalarMappable.add_observer`` of the
  :class:`~matplotlib.cm.ScalarMappable` should use the
  :attr:`matplotlib.cm.ScalarMappable.callbacksSM`
  :class:`~matplotlib.cbook.CallbackRegistry` instead.

* New axes function and Axes method provide control over the plot
  color cycle: ``matplotlib.axes.set_default_color_cycle`` and
  ``matplotlib.axes.Axes.set_color_cycle``.

* Matplotlib now requires Python 2.4, so :mod:`matplotlib.cbook` will
  no longer provide :class:`set`, :func:`enumerate`, :func:`reversed`
  or ``izip`` compatibility functions.

* In Numpy 1.0, bins are specified by the left edges only.  The axes
  method :meth:`matplotlib.axes.Axes.hist` now uses future Numpy 1.3
  semantics for histograms.  Providing ``binedges``, the last value gives
  the upper-right edge now, which was implicitly set to +infinity in
  Numpy 1.0.  This also means that the last bin doesn't contain upper
  outliers any more by default.

* New axes method and pyplot function,
  :func:`~matplotlib.pyplot.hexbin`, is an alternative to
  :func:`~matplotlib.pyplot.scatter` for large datasets.  It makes
  something like a :func:`~matplotlib.pyplot.pcolor` of a 2-D
  histogram, but uses hexagonal bins.

* New kwarg, ``symmetric``, in :class:`matplotlib.ticker.MaxNLocator`
  allows one require an axis to be centered around zero.

* Toolkits must now be imported from ``mpl_toolkits`` (not ``matplotlib.toolkits``)

Notes about the transforms refactoring
--------------------------------------

A major new feature of the 0.98 series is a more flexible and
extensible transformation infrastructure, written in Python/Numpy
rather than a custom C extension.

The primary goal of this refactoring was to make it easier to
extend matplotlib to support new kinds of projections.  This is
mostly an internal improvement, and the possible user-visible
changes it allows are yet to come.

See :mod:`matplotlib.transforms` for a description of the design of
the new transformation framework.

For efficiency, many of these functions return views into Numpy
arrays.  This means that if you hold on to a reference to them,
their contents may change.  If you want to store a snapshot of
their current values, use the Numpy array method copy().

The view intervals are now stored only in one place -- in the
:class:`matplotlib.axes.Axes` instance, not in the locator instances
as well.  This means locators must get their limits from their
:class:`matplotlib.axis.Axis`, which in turn looks up its limits from
the :class:`~matplotlib.axes.Axes`.  If a locator is used temporarily
and not assigned to an Axis or Axes, (e.g., in
:mod:`matplotlib.contour`), a dummy axis must be created to store its
bounds.  Call :meth:`matplotlib.ticker.TickHelper.create_dummy_axis` to
do so.

The functionality of ``Pbox`` has been merged with
:class:`~matplotlib.transforms.Bbox`.  Its methods now all return
copies rather than modifying in place.

The following lists many of the simple changes necessary to update
code from the old transformation framework to the new one.  In
particular, methods that return a copy are named with a verb in the
past tense, whereas methods that alter an object in place are named
with a verb in the present tense.

:mod:`matplotlib.transforms`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

+--------------------------------------------+------------------------------------------------------+
| Old method                                 | New method                                           |
+============================================+======================================================+
| ``Bbox.get_bounds``                        | :attr:`.transforms.Bbox.bounds`                      |
+--------------------------------------------+------------------------------------------------------+
| ``Bbox.width``                             | :attr:`transforms.Bbox.width                         |
|                                            | <.transforms.BboxBase.width>`                        |
+--------------------------------------------+------------------------------------------------------+
| ``Bbox.height``                            | :attr:`transforms.Bbox.height                        |
|                                            | <.transforms.BboxBase.height>`                       |
+--------------------------------------------+------------------------------------------------------+
| ``Bbox.intervalx().get_bounds()``          | :attr:`.transforms.Bbox.intervalx`                   |
| ``Bbox.intervalx().set_bounds()``          | [It is now a property.]                              |
+--------------------------------------------+------------------------------------------------------+
| ``Bbox.intervaly().get_bounds()``          | :attr:`.transforms.Bbox.intervaly`                   |
| ``Bbox.intervaly().set_bounds()``          | [It is now a property.]                              |
+--------------------------------------------+------------------------------------------------------+
| ``Bbox.xmin``                              | :attr:`.transforms.Bbox.x0` or                       |
|                                            | :attr:`transforms.Bbox.xmin                          |
|                                            | <.transforms.BboxBase.xmin>` [1]_                    |
+--------------------------------------------+------------------------------------------------------+
| ``Bbox.ymin``                              | :attr:`.transforms.Bbox.y0` or                       |
|                                            | :attr:`transforms.Bbox.ymin                          |
|                                            | <.transforms.BboxBase.ymin>` [1]_                    |
+--------------------------------------------+------------------------------------------------------+
| ``Bbox.xmax``                              | :attr:`.transforms.Bbox.x1` or                       |
|                                            | :attr:`transforms.Bbox.xmax                          |
|                                            | <.transforms.BboxBase.xmax>` [1]_                    |
+--------------------------------------------+------------------------------------------------------+
| ``Bbox.ymax``                              | :attr:`.transforms.Bbox.y1` or                       |
|                                            | :attr:`transforms.Bbox.ymax                          |
|                                            | <.transforms.BboxBase.ymax>` [1]_                    |
+--------------------------------------------+------------------------------------------------------+
| ``Bbox.overlaps(bboxes)``                  | `Bbox.count_overlaps(bboxes)                         |
|                                            | <.BboxBase.count_overlaps>`                          |
+--------------------------------------------+------------------------------------------------------+
| ``bbox_all(bboxes)``                       | `Bbox.union(bboxes) <.BboxBase.union>`               |
|                                            | [It is a staticmethod.]                              |
+--------------------------------------------+------------------------------------------------------+
| ``lbwh_to_bbox(l, b, w, h)``               | `Bbox.from_bounds(x0, y0, w, h) <.Bbox.from_bounds>` |
|                                            | [It is a staticmethod.]                              |
+--------------------------------------------+------------------------------------------------------+
| ``inverse_transform_bbox(trans, bbox)``    | ``bbox.inverse_transformed(trans)``                  |
|                                            |                                                      |
+--------------------------------------------+------------------------------------------------------+
| ``Interval.contains_open(v)``              | `interval_contains_open(tuple, v)                    |
|                                            | <.interval_contains_open>`                           |
+--------------------------------------------+------------------------------------------------------+
| ``Interval.contains(v)``                   | `interval_contains(tuple, v) <.interval_contains>`   |
+--------------------------------------------+------------------------------------------------------+
| ``identity_transform()``                   | :class:`.transforms.IdentityTransform`               |
+--------------------------------------------+------------------------------------------------------+
| ``blend_xy_sep_transform(xtrans, ytrans)`` | `blended_transform_factory(xtrans, ytrans)           |
|                                            | <.blended_transform_factory>`                        |
+--------------------------------------------+------------------------------------------------------+
| ``scale_transform(xs, ys)``                | `Affine2D().scale(xs[, ys]) <.Affine2D.scale>`       |
+--------------------------------------------+------------------------------------------------------+
| ``get_bbox_transform(boxin, boxout)``      | `BboxTransform(boxin, boxout) <.BboxTransform>` or   |
|                                            | `BboxTransformFrom(boxin) <.BboxTransformFrom>` or   |
|                                            | `BboxTransformTo(boxout) <.BboxTransformTo>`         |
+--------------------------------------------+------------------------------------------------------+
| ``Transform.seq_xy_tup(points)``           | `Transform.transform(points) <.Transform.transform>` |
+--------------------------------------------+------------------------------------------------------+
| ``Transform.inverse_xy_tup(points)``       | `Transform.inverted()                                |
|                                            | <.Transform.inverted>`.transform(points)             |
+--------------------------------------------+------------------------------------------------------+

.. [1] The :class:`~matplotlib.transforms.Bbox` is bound by the points
   (x0, y0) to (x1, y1) and there is no defined order to these points,
   that is, x0 is not necessarily the left edge of the box.  To get
   the left edge of the :class:`.Bbox`, use the read-only property
   :attr:`xmin <matplotlib.transforms.BboxBase.xmin>`.

:mod:`matplotlib.axes`
~~~~~~~~~~~~~~~~~~~~~~

============================= ==============================================
Old method                    New method
============================= ==============================================
``Axes.get_position()``       :meth:`matplotlib.axes.Axes.get_position` [2]_
----------------------------- ----------------------------------------------
``Axes.set_position()``       :meth:`matplotlib.axes.Axes.set_position` [3]_
----------------------------- ----------------------------------------------
``Axes.toggle_log_lineary()`` :meth:`matplotlib.axes.Axes.set_yscale` [4]_
----------------------------- ----------------------------------------------
``Subplot`` class             removed
============================= ==============================================

The ``Polar`` class has moved to :mod:`matplotlib.projections.polar`.

.. [2] :meth:`matplotlib.axes.Axes.get_position` used to return a list
   of points, now it returns a :class:`matplotlib.transforms.Bbox`
   instance.

.. [3] :meth:`matplotlib.axes.Axes.set_position` now accepts either
   four scalars or a :class:`matplotlib.transforms.Bbox` instance.

.. [4] Since the recfactoring allows for more than two scale types
   ('log' or 'linear'), it no longer makes sense to have a toggle.
   ``Axes.toggle_log_lineary()`` has been removed.

:mod:`matplotlib.artist`
~~~~~~~~~~~~~~~~~~~~~~~~

============================== ==============================================
Old method                     New method
============================== ==============================================
``Artist.set_clip_path(path)`` ``Artist.set_clip_path(path, transform)`` [5]_
============================== ==============================================

.. [5] :meth:`matplotlib.artist.Artist.set_clip_path` now accepts a
   :class:`matplotlib.path.Path` instance and a
   :class:`matplotlib.transforms.Transform` that will be applied to
   the path immediately before clipping.

:mod:`matplotlib.collections`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

=========== =================
Old method  New method
=========== =================
*linestyle* *linestyles* [6]_
=========== =================

.. [6] Linestyles are now treated like all other collection
   attributes, i.e.  a single value or multiple values may be
   provided.

:mod:`matplotlib.colors`
~~~~~~~~~~~~~~~~~~~~~~~~

================================== =====================================================
Old method                         New method
================================== =====================================================
``ColorConvertor.to_rgba_list(c)`` ``colors.to_rgba_array(c)``
                                   [:meth:`matplotlib.colors.to_rgba_array`
                                   returns an Nx4 NumPy array of RGBA color quadruples.]
================================== =====================================================

:mod:`matplotlib.contour`
~~~~~~~~~~~~~~~~~~~~~~~~~

===================== ===================================================
Old method            New method
===================== ===================================================
``Contour._segments`` ``matplotlib.contour.Contour.get_paths`` [Returns a
                      list of :class:`matplotlib.path.Path` instances.]
===================== ===================================================

:mod:`matplotlib.figure`
~~~~~~~~~~~~~~~~~~~~~~~~

+----------------------+--------------------------------------+
| Old method           | New method                           |
+======================+======================================+
| ``Figure.dpi.get()`` | :attr:`matplotlib.figure.Figure.dpi` |
| ``Figure.dpi.set()`` | *(a property)*                       |
+----------------------+--------------------------------------+

:mod:`matplotlib.patches`
~~~~~~~~~~~~~~~~~~~~~~~~~

===================== ====================================================
Old method            New method
===================== ====================================================
``Patch.get_verts()`` :meth:`matplotlib.patches.Patch.get_path` [Returns a
                      :class:`matplotlib.path.Path` instance]
===================== ====================================================

:mod:`matplotlib.backend_bases`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

============================================= ==========================================
Old method                                    New method
============================================= ==========================================
``GraphicsContext.set_clip_rectangle(tuple)`` `GraphicsContext.set_clip_rectangle(bbox)
                                              <.GraphicsContextBase.set_clip_rectangle>`
--------------------------------------------- ------------------------------------------
``GraphicsContext.get_clip_path()``           `GraphicsContext.get_clip_path()
                                              <.GraphicsContextBase.get_clip_path>` [7]_
--------------------------------------------- ------------------------------------------
``GraphicsContext.set_clip_path()``           `GraphicsContext.set_clip_path()
                                              <.GraphicsContextBase.set_clip_path>` [8]_
============================================= ==========================================

.. [7] :meth:`matplotlib.backend_bases.GraphicsContextBase.get_clip_path`
   returns a tuple of the form (*path*, *affine_transform*), where *path* is a
   :class:`matplotlib.path.Path` instance and *affine_transform* is a
   :class:`matplotlib.transforms.Affine2D` instance.

.. [8] :meth:`matplotlib.backend_bases.GraphicsContextBase.set_clip_path` now
   only accepts a :class:`matplotlib.transforms.TransformedPath` instance.

:class:`~matplotlib.backend_bases.RendererBase`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

New methods:

  * :meth:`draw_path(self, gc, path, transform, rgbFace)
    <matplotlib.backend_bases.RendererBase.draw_path>`

  * :meth:`draw_markers(self, gc, marker_path, marker_trans, path,
    trans, rgbFace)
    <matplotlib.backend_bases.RendererBase.draw_markers>`

  * :meth:`draw_path_collection(self, master_transform, cliprect,
    clippath, clippath_trans, paths, all_transforms, offsets,
    offsetTrans, facecolors, edgecolors, linewidths, linestyles,
    antialiaseds)
    <matplotlib.backend_bases.RendererBase.draw_path_collection>`
    *[optional]*

Changed methods:

  * ``draw_image(self, x, y, im, bbox)`` is now
    :meth:`draw_image(self, x, y, im, bbox, clippath, clippath_trans)
    <matplotlib.backend_bases.RendererBase.draw_image>`

Removed methods:

  * ``draw_arc``

  * ``draw_line_collection``

  * ``draw_line``

  * ``draw_lines``

  * ``draw_point``

  * ``draw_quad_mesh``

  * ``draw_poly_collection``

  * ``draw_polygon``

  * ``draw_rectangle``

  * ``draw_regpoly_collection``
Changes for 0.84
================

.. code-block:: text

    Unified argument handling between hlines and vlines.  Both now
    take optionally a fmt argument (as in plot) and a keyword args
    that can be passed onto Line2D.

    Removed all references to "data clipping" in rc and lines.py since
    these were not used and not optimized.  I'm sure they'll be
    resurrected later with a better implementation when needed.

    'set' removed - no more deprecation warnings.  Use 'setp' instead.

    Backend developers: Added flipud method to image and removed it
    from to_str.  Removed origin kwarg from backend.draw_image.
    origin is handled entirely by the frontend now.
API Changes for 3.3.1
=====================

Deprecations
------------

Reverted deprecation of ``num2epoch`` and ``epoch2num``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

These two functions were deprecated in 3.3.0, and did not return
an accurate Matplotlib datenum relative to the new Matplotlib epoch
handling (`~.dates.get_epoch` and :rc:`date.epoch`).  This version
reverts the deprecation.

Functions ``epoch2num`` and ``dates.julian2num`` use ``date.epoch`` rcParam
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Now `~.dates.epoch2num` and (undocumented) ``julian2num`` return floating point
days since `~.dates.get_epoch` as set by :rc:`date.epoch`, instead of
floating point days since the old epoch of "0000-12-31T00:00:00".  If
needed, you can translate from the new to old values as
``old = new + mdates.date2num(np.datetime64('0000-12-31'))``
API Changes for 3.1.0
=====================

.. contents::
   :local:
   :depth: 1


Behavior changes
----------------


Matplotlib.use
~~~~~~~~~~~~~~
Switching backends via `matplotlib.use` is now allowed by default,
regardless of whether `matplotlib.pyplot` has been imported. If the user
tries to switch from an already-started interactive backend to a different
interactive backend, an `ImportError` will be raised.

Invalid points in PathCollections
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
PathCollections created with `~.Axes.scatter` now keep track of invalid points.
Previously, points with nonfinite (infinite or nan) coordinates would not be
included in the offsets (as returned by `.PathCollection.get_offsets`) of a
`.PathCollection` created by `~.Axes.scatter`, and points with nonfinite values
(as specified by the *c* kwarg) would not be included in the array (as returned
by `.PathCollection.get_array`)

Such points are now included, but masked out by returning a masked array.

If the *plotnonfinite* kwarg to `~.Axes.scatter` is set, then points
with nonfinite values are plotted using the bad color of the
`.collections.PathCollection`\ 's colormap (as set by
:meth:`.colors.Colormap.set_bad`).

Alpha blending in imshow of RBGA input
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The alpha-channel of RBGA images is now re-sampled independently of
RGB channels.  While this is a bug fix, it does change the output and
may result in some down-stream image comparison tests to fail.

Autoscaling
~~~~~~~~~~~
On log-axes where a single value is plotted at a "full" decade (1, 10, 100,
etc.), the autoscaling now expands the axis symmetrically around that point,
instead of adding a decade only to the right.

Log-scaled axes
~~~~~~~~~~~~~~~
When the default `.LogLocator` would generate no ticks for an axis (e.g., an
axis with limits from 0.31 to 0.39) or only a single tick, it now instead falls
back on the linear `.AutoLocator` to pick reasonable tick positions.

`.Figure.add_subplot` with no arguments
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Calling `.Figure.add_subplot()` with no positional arguments used to do
nothing; this now is equivalent to calling ``add_subplot(111)`` instead.

`~.Axes.bxp` and rcparams
~~~~~~~~~~~~~~~~~~~~~~~~~
`~.Axes.bxp` now respects :rc:`boxplot.boxprops.linewidth` even when
*patch_artist* is set.
Previously, when the *patch_artist* parameter was set, `~.Axes.bxp` would ignore
:rc:`boxplot.boxprops.linewidth`.  This was an oversight -- in particular,
`~.Axes.boxplot` did not ignore it.

Major/minor tick collisions
~~~~~~~~~~~~~~~~~~~~~~~~~~~

Minor ticks that collide with major ticks are now hidden by default.
Previously, certain locator classes (`~.ticker.LogLocator`,
`~.ticker.AutoMinorLocator`) contained custom logic to avoid emitting
tick locations that collided with major ticks when they were used as
minor locators.  This logic has now moved to the `~.axis.Axis` class,
and is used regardless of the locator class.  You can control this
behavior via the `~.Axis.remove_overlapping_locs` attribute on
`~.axis.Axis`.

If you were relying on both the major and minor tick labels to appear
on the same tick, you may need to update your code.  For example, the
following snippet ::

    import numpy as np
    import matplotlib.dates as mdates
    import matplotlib.pyplot as plt

    t = np.arange("2018-11-03", "2018-11-06", dtype="datetime64")
    x = np.random.rand(len(t))

    fig, ax = plt.subplots()
    ax.plot(t, x)
    ax.xaxis.set(
        major_locator=mdates.DayLocator(),
        major_formatter=mdates.DateFormatter("\n%a"),
        minor_locator=mdates.HourLocator((0, 6, 12, 18)),
        minor_formatter=mdates.DateFormatter("%H:%M"),
    )
    # disable removing overlapping locations
    ax.xaxis.remove_overlapping_locs = False
    plt.show()

labeled days using major ticks, and hours and minutes using minor
ticks and added a newline to the major ticks labels to avoid them
crashing into the minor tick labels.  Setting the
`~.Axis.remove_overlapping_locs` property (also accessible via
`~.Axis.set_remove_overlapping_locs` /
`~.Axis.get_remove_overlapping_locs` and `~.pyplot.setp`) disables
removing overlapping tick locations.

The major tick labels could also be adjusted include hours and
minutes, as the minor ticks are gone, so the ``major_formatter``
would be::

  mdates.DateFormatter("%H:%M\n%a")

usetex support
~~~~~~~~~~~~~~
Previously, if :rc:`text.usetex` was True, then constructing a `.TextPath` on
a non-mathtext string with ``usetex=False`` would rely on the mathtext parser
(but not on usetex support!) to parse the string.  The mathtext parser is not
invoked anymore, which may cause slight changes in glyph positioning.

get_window_extents
~~~~~~~~~~~~~~~~~~

`.matplotlib.axes.Axes.get_window_extent` used to return a bounding box
that was slightly larger than the axes, presumably to take into account
the ticks that may be on a spine.  However, it was not scaling the tick sizes
according to the dpi of the canvas, and it did not check if the ticks were
visible, or on the spine.

Now  `.matplotlib.axes.Axes.get_window_extent` just returns the axes extent
with no padding for ticks.

This affects `.matplotlib.axes.Axes.get_tightbbox` in cases where there are
outward ticks with no tick labels, and it also removes the (small) pad around
axes in that case.

`.spines.Spine.get_window_extent` now takes into account ticks that are on the
spine.

Sankey
~~~~~~
Previously, `.Sankey.add` would only accept a single string as the *labels*
argument if its length is equal to the number of flows, in which case it would
use one character of the string for each flow.

The behavior has been changed to match the documented one: when a single string
is passed, it is used to label all the flows.

`~.font_manager.FontManager` scores
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`.font_manager.FontManager.score_weight` is now more strict with its
inputs.  Previously, when a weight string was passed to
`.font_manager.FontManager.score_weight`,

- if the weight was the string representation of an integer, it would be
  converted to that integer,
- otherwise, if the weight was not a standard weight name, it would be silently
  replaced by a value of 500 ("normal" weight).

`.font_manager.FontManager.score_weight` now raises an exception on such inputs.

Text alignment
~~~~~~~~~~~~~~

Text alignment was previously incorrect, in particular for multiline text
objects with large descenders (i.e. subscripts) and rotated text.  These have
been fixed and made more consistent, but could make old code that has
compensated for this no longer have the correct alignment.

Upper case color strings
~~~~~~~~~~~~~~~~~~~~~~~~

Support for passing single-letter colors (one of "rgbcmykw") as UPPERCASE
characters is deprecated; these colors will become case-sensitive (lowercase)
after the deprecation period has passed.

The goal is to decrease the number of ambiguous cases when using the ``data``
keyword to plotting methods; e.g. ``plot("X", "Y", data={"X": ..., "Y": ...})``
will not warn about "Y" possibly being a color anymore after the deprecation
period has passed.

Degenerate limits
~~~~~~~~~~~~~~~~~

When bounds passed to `~.axes.Axes.set_xlim` are degenerate (i.e. the
lower and upper value are equal), the method used to "expand" the
bounds now matches the expansion behavior of autoscaling when the plot
contains a single x-value, and should in particular produce nicer
limits for non-linear scales.

`~.Axes.plot` format string parsing
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In certain cases, `~.Axes.plot` would previously accept format strings
specifying more than one linestyle (e.g. ``"---."`` which specifies both
``"--"`` and ``"-."``); only use one of them would be used. This now raises a
`ValueError` instead.

HTMLWriter
~~~~~~~~~~
The HTMLWriter constructor is more strict: it no longer normalizes unknown
values of *default_mode* to 'loop', but errors out instead.

AFM parsing
~~~~~~~~~~~
In accordance with the AFM spec, the AFM parser no longer truncates the
``UnderlinePosition`` and ``UnderlineThickness`` fields to integers.

The ``Notice`` field (which can only be publicly accessed by the deprecated
``afm.parse_afm`` API) is no longer decoded to a `str`, but instead kept as
`bytes`, to support non-conformant AFM files that use non-ASCII characters in
that field.

`.Artist.set` keyword normalisation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
`.Artist.set` now normalizes keywords before sorting them. Previously it sorted
its keyword arguments in reverse alphabetical order (with a special-case to
put ``color`` at the end) before applying them.

It now normalizes aliases (and, as above, emits a warning on duplicate
properties) before doing the sorting (so ``c`` goes to the end too).

`.Axes.tick_params` argument checking
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Previously `.Axes.tick_params` silently did nothing when an invalid *axis*
parameter was supplied. This behavior has been changed to raise a `ValueError`
instead.

`.Axes.hist` output
~~~~~~~~~~~~~~~~~~~

Input that consists of multiple empty lists will now return a list of histogram
values for each one of the lists. For example, an input of ``[[],[]]`` will
return 2 lists of histogram values. Previously, a single list was returned.

``backend_bases.TimerBase.remove_callback`` future signature change
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Currently, ``backend_bases.TimerBase.remove_callback(func, *args,
**kwargs)`` removes a callback previously added by
``backend_bases.Timer.add_callback(func, *args, **kwargs)``, but if
``*args, **kwargs`` is not passed in (i.e.,
``TimerBase.remove_callback(func)``), then the first callback with a
matching ``func`` is removed, regardless of whether it was added with
or without ``*args, **kwargs``.

In a future version, `.TimerBase.remove_callback` will always use the latter
behavior (not consider ``*args, **kwargs``); to specifically consider them, add
the callback as a `functools.partial` object ::

   cb = timer.add_callback(functools.partial(func, *args, **kwargs))
   # ...
   # later
   timer.remove_callback(cb)

`.TimerBase.add_callback` was modified to return *func* to
simplify the above usage (previously it returned None); this also
allows using it as a decorator.

The new API is modelled after `atexit.register` / `atexit.unregister`.

`~.container.StemContainer` performance increase
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`~.container.StemContainer` objects can now store a
`~.collections.LineCollection` object instead of a list of
`~.lines.Line2D` objects for stem lines plotted using
`~.Axes.stem`. This gives a very large performance boost to displaying
and moving `~.Axes.stem` plots.

This will become the default behaviour in Matplotlib 3.3. To use it
now, the *use_line_collection* keyword argument to `~.Axes.stem` can
be set to `True` ::

  ax.stem(..., use_line_collection=True)

Individual line segments can be extracted from the
`~.collections.LineCollection` using
`~.collections.LineCollection.get_segments()`. See the
`~.collections.LineCollection` documentation for other methods to
retrieve the collection properties.


`~matplotlib.colorbar.ColorbarBase` inheritance
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`matplotlib.colorbar.ColorbarBase` is no longer a subclass of
`.cm.ScalarMappable`.  This inheritance lead to a confusing situation
where the `.cm.ScalarMappable` passed to `matplotlib.colorbar.Colorbar`
(`~.Figure.colorbar`) had a ``set_norm`` method, as did the colorbar.
The colorbar is now purely a follower to the `.ScalarMappable` norm and
colormap, and the old inherited methods
`~matplotlib.colorbar.ColorbarBase.set_norm`,
`~matplotlib.colorbar.ColorbarBase.set_cmap`,
`~matplotlib.colorbar.ColorbarBase.set_clim` are deprecated, as are
the getter versions of those calls.  To set the norm associated with a
colorbar do ``colorbar.mappable.set_norm()`` etc.


FreeType and libpng search paths
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The ``MPLBASEDIRLIST`` environment variables and ``basedirlist`` entry in
``setup.cfg`` have no effect anymore.  Instead, if building in situations where
FreeType or libpng are not in the compiler or linker's default path, set the
standard environment variables ``CFLAGS``/``LDFLAGS`` on Linux or OSX, or
``CL``/``LINK`` on Windows, to indicate the relevant paths.

See details in :doc:`/users/installing/index`.

Setting artist properties twice or more in the same call
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Setting the same artist property multiple time via aliases is deprecated.
Previously, code such as ::

  plt.plot([0, 1], c="red", color="blue")

would emit a warning indicating that ``c`` and ``color`` are aliases
of one another, and only keep the ``color`` kwarg.  This behavior has
been deprecated; in a future version, this will raise a TypeError,
similar to Python's behavior when a keyword argument is passed twice ::

  plt.plot([0, 1], c="red", c="blue")

This warning is raised by `~.cbook.normalize_kwargs`.

Path code types
~~~~~~~~~~~~~~~
Path code types like ``Path.MOVETO`` are now ``np.uint8`` instead of ``int``
``Path.STOP``, ``Path.MOVETO``, ``Path.LINETO``, ``Path.CURVE3``,
``Path.CURVE4`` and ``Path.CLOSEPOLY`` are now of the type ``Path.code_type``
(``np.uint8`` by default) instead of plain ``int``. This makes their type
match the array value type of the ``Path.codes`` array.

LaTeX code in matplotlibrc file
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Previously, the rc file keys ``pgf.preamble`` and ``text.latex.preamble`` were
parsed using commmas as separators. This would break valid LaTeX code, such as::

  \usepackage[protrusion=true, expansion=false]{microtype}

The parsing has been modified to pass the complete line to the LaTeX system,
keeping all commas. Passing a list of strings from within a Python script still
works as it used to. Passing a list containing non-strings now fails, instead
of coercing the results to strings.

`.Axes.spy`
~~~~~~~~~~~

The method `.Axes.spy` now raises a `TypeError` for the keyword
arguments *interpolation* and *linestyle* instead of silently ignoring
them.

Furthermore, `.Axes.spy` spy does now allow for an *extent* argument
(was silently ignored so far).

A bug with ``Axes.spy(..., origin='lower')`` is fixed.  Previously this
flipped the data but not the y-axis resulting in a mismatch between
axes labels and actual data indices. Now, *origin='lower'* flips both
the data and the y-axis labels.

Boxplot tick methods
~~~~~~~~~~~~~~~~~~~~

The *manage_xticks* parameter of `~.Axes.boxplot` and `~.Axes.bxp` has
been renamed (with a deprecation period) to *manage_ticks*, to take
into account the fact that it manages either x or y ticks depending on
the *vert* parameter.

When ``manage_ticks=True`` (the default), these methods now attempt to
take previously drawn boxplots into account when setting the axis
limits, ticks, and tick labels.

MouseEvents
~~~~~~~~~~~
MouseEvents now include the event name in their ``str()``.
Previously they contained the prefix "MPL MouseEvent".

RGBA buffer return type
~~~~~~~~~~~~~~~~~~~~~~~

`.FigureCanvasAgg.buffer_rgba` and `.RendererAgg.buffer_rgba` now
return a memoryview The ``buffer_rgba`` method now allows direct
access to the renderer's underlying buffer (as a ``(m, n, 4)``-shape
memoryview) rather than copying the data to a new bytestring.  This is
consistent with the behavior on Py2, where a buffer object was
returned.


`matplotlib.font_manager.win32InstalledFonts` return type
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
`matplotlib.font_manager.win32InstalledFonts` returns an empty list instead
of None if no fonts are found.

`.Axes.fmt_xdata` and `.Axes.fmt_ydata` error handling
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Previously, if the user provided a `.Axes.fmt_xdata` or
`.Axes.fmt_ydata` function that raised a `TypeError` (or set them to a
non-callable), the exception would be silently ignored and the default
formatter be used instead.  This is no longer the case; the exception
is now propagated out.

Deprecation of redundant `.Tick` attributes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The ``gridOn``, ``tick1On``, ``tick2On``, ``label1On``, and ``label2On``
`~.Tick` attributes have been deprecated.  Directly get and set the visibility
on the underlying artists, available as the ``gridline``, ``tick1line``,
``tick2line``, ``label1``, and ``label2`` attributes.

The ``label`` attribute, which was an alias for ``label1``, has been
deprecated.

Subclasses that relied on setting the above visibility attributes needs to be
updated; see e.g. :file:`examples/api/skewt.py`.

Passing a Line2D's drawstyle together with the linestyle is deprecated
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Instead of ``plt.plot(..., linestyle="steps--")``, use ``plt.plot(...,
linestyle="--", drawstyle="steps")``. ``ds`` is now an alias for ``drawstyle``.


``pgi`` support dropped
-----------------------

Support for ``pgi`` in the GTK3 backends has been dropped.  ``pgi`` is
an alternative implementation to ``PyGObject``.  ``PyGObject`` should
be used instead.

rcParam changes
---------------

Removed
~~~~~~~
The following deprecated rcParams have been removed:

- ``text.dvipnghack``
- ``nbagg.transparent`` (use :rc:`figure.facecolor` instead)
- ``plugins.directory``
- ``axes.hold``
- ``backend.qt4`` and ``backend.qt5`` (set the :envvar:`QT_API` environment
  variable instead)

Deprecated
~~~~~~~~~~
The associated validator functions ``rcsetup.validate_qt4`` and
``validate_qt5`` are deprecated.

The ``verbose.fileo`` and ``verbose.level`` rcParams have been deprecated.
These have had no effect since the switch from Matplotlib's old custom Verbose
logging to the stdlib's `logging` module. In addition the
``rcsetup.validate_verbose`` function is deprecated.

The ``text.latex.unicode`` rcParam now defaults to ``True`` and is
deprecated (i.e., in future versions
of Matplotlib, unicode input will always be supported).
Moreover, the underlying implementation now uses ``\usepackage[utf8]{inputenc}``
instead of ``\usepackage{ucs}\usepackage[utf8x]{inputenc}``.

Exception changes
-----------------
- `mpl_toolkits.axes_grid1.axes_size.GetExtentHelper` now raises `ValueError`
  for invalid directions instead of `KeyError`.
- Previously, subprocess failures in the animation framework would raise either
  in a `RuntimeError` or a `ValueError` depending on when the error occurred.
  They now raise a `subprocess.CalledProcessError` with attributes set as
  documented by the exception class.
- In certain cases, Axes methods (and pyplot functions) used to raise
  a `RuntimeError` if they were called with a ``data`` kwarg and
  otherwise mismatched arguments.  They now raise a `TypeError`
  instead.
- `.Axes.streamplot` does not support irregularly gridded ``x`` and ``y`` values.
  So far, it used to silently plot an incorrect result.  This has been changed to
  raise a `ValueError` instead.
- The `.streamplot.Grid` class, which is internally used by streamplot
  code, also throws a `ValueError` when irregularly gridded values are
  passed in.

Removals
--------
The following deprecated APIs have been removed:

Classes and methods
~~~~~~~~~~~~~~~~~~~
- ``Verbose`` (replaced by python logging library)
- ``artist.Artist.hitlist`` (no replacement)
- ``artist.Artist.is_figure_set`` (use ``artist.figure is not None`` instead)
- ``axis.Axis.unit_data`` (use ``axis.Axis.units`` instead)
- ``backend_bases.FigureCanvasBase.onRemove`` (no replacement)
  ``backend_bases.FigureManagerBase.show_popup`` (this never did anything)
- ``backend_wx.SubplotToolWx`` (no replacement)
- ``backend_wx.Toolbar`` (use ``backend_wx.NavigationToolbar2Wx`` instead)
- ``cbook.align_iterators`` (no replacement)
- ``contour.ContourLabeler.get_real_label_width`` (no replacement)
- ``legend.Legend.draggable`` (use `.legend.Legend.set_draggable()` instead)
- ``texmanager.TexManager.postscriptd``, ``texmanager.TexManager.pscnt``,
  ``texmanager.TexManager.make_ps``, ``texmanager.TexManager.get_ps_bbox``
  (no replacements)

Arguments
~~~~~~~~~
- The *fig* kwarg to `.GridSpec.get_subplot_params` and
  `.GridSpecFromSubplotSpec.get_subplot_params` (use the argument
  *figure* instead)
- Passing 'box-forced' to `.Axes.set_adjustable` (use 'box' instead)
- Support for the strings 'on'/'true'/'off'/'false' to mean
  `True` / `False` (directly use `True` / `False` instead).
  The following functions are affected:

  - `.axes.Axes.grid`
  - `.Axes3D.grid`
  - `.Axis.set_tick_params`
  - `.pyplot.box`
- Using `.pyplot.axes` with an `.axes.Axes` type argument
  (use `.pyplot.sca` instead)

Other
~~~~~
The following miscellaneous API elements have been removed

- svgfont support (in :rc:`svg.fonttype`)
- Logging is now done with the standard python ``logging`` library.
  ``matplotlib.verbose`` and the command line switches ``--verbose-LEVEL`` have
  been removed.

  To control the logging output use::

    import logging
    logger = logging.getLogger('matplotlib')
    logger.setLevel(logging.INFO)
    # configure log handling: Either include it into your ``logging`` hierarchy,
    # e.g. by configuring a root looger using ``logging.basicConfig()``,
    # or add a standalone handler to the matplotlib logger:
    logger.addHandler(logging.StreamHandler())

- ``__version__numpy__``
- ``collections.CIRCLE_AREA_FACTOR``
- ``font_manager.USE_FONTCONFIG``
- ``font_manager.cachedir``

:mod:`matplotlib.mlab` removals
-------------------------------
Lots of code inside the :mod:`matplotlib.mlab` module which was deprecated
in Matplotlib 2.2 has been removed. See below for a list:

- ``mlab.exp_safe`` (use `numpy.exp` instead)
- ``mlab.amap``
- ``mlab.logspace`` (use `numpy.logspace` instead)
- ``mlab.rms_flat``
- ``mlab.l1norm`` (use ``numpy.linalg.norm(a, ord=1)`` instead)
- ``mlab.l2norm`` (use ``numpy.linalg.norm(a, ord=2)`` instead)
- ``mlab.norm_flat`` (use ``numpy.linalg.norm(a.flat, ord=2)`` instead)
- ``mlab.frange`` (use `numpy.arange` instead)
- ``mlab.identity`` (use `numpy.identity` instead)
- ``mlab.base_repr``
- ``mlab.binary_repr``
- ``mlab.ispower2``
- ``mlab.log2`` (use `numpy.log2` instead)
- ``mlab.isvector``
- ``mlab.movavg``
- ``mlab.safe_isinf`` (use `numpy.isinf` instead)
- ``mlab.safe_isnan`` (use `numpy.isnan` instead)
- ``mlab.cohere_pairs`` (use `scipy.signal.coherence` instead)
- ``mlab.entropy`` (use `scipy.stats.entropy` instead)
- ``mlab.normpdf`` (use `scipy.stats.norm.pdf` instead)
- ``mlab.find`` (use ``np.nonzero(np.ravel(condition))`` instead)
- ``mlab.longest_contiguous_ones``
- ``mlab.longest_ones``
- ``mlab.PCA``
- ``mlab.prctile`` (use `numpy.percentile` instead)
- ``mlab.prctile_rank``
- ``mlab.center_matrix``
- ``mlab.rk4`` (use `scipy.integrate.ode` instead)
- ``mlab.bivariate_normal``
- ``mlab.get_xyz_where``
- ``mlab.get_sparse_matrix``
- ``mlab.dist`` (use `numpy.hypot` instead)
- ``mlab.dist_point_to_segment``
- ``mlab.griddata`` (use `scipy.interpolate.griddata`)
- ``mlab.less_simple_linear_interpolation`` (use `numpy.interp`)
- ``mlab.slopes``
- ``mlab.stineman_interp``
- ``mlab.segments_intersect``
- ``mlab.fftsurr``
- ``mlab.offset_line``
- ``mlab.quad2cubic``
- ``mlab.vector_lengths``
- ``mlab.distances_along_curve``
- ``mlab.path_length``
- ``mlab.cross_from_above``
- ``mlab.cross_from_below``
- ``mlab.contiguous_regions`` (use `.cbook.contiguous_regions` instead)
- ``mlab.is_closed_polygon``
- ``mlab.poly_between``
- ``mlab.poly_below``
- ``mlab.inside_poly``
- ``mlab.csv2rec``
- ``mlab.rec2csv`` (use `numpy.recarray.tofile` instead)
- ``mlab.rec2text`` (use `numpy.recarray.tofile` instead)
- ``mlab.rec_summarize``
- ``mlab.rec_join``
- ``mlab.recs_join``
- ``mlab.rec_groupby``
- ``mlab.rec_keep_fields``
- ``mlab.rec_drop_fields``
- ``mlab.rec_append_fields``
- ``mlab.csvformat_factory``
- ``mlab.get_formatd``
- ``mlab.FormatDatetime`` (use `datetime.datetime.strftime` instead)
- ``mlab.FormatDate`` (use `datetime.date.strftime` instead)
- ``mlab.FormatMillions``, ``mlab.FormatThousands``, ``mlab.FormatPercent``,
  ``mlab.FormatBool``, ``mlab.FormatInt``, ``mlab.FormatFloat``,
  ``mlab.FormatFormatStr``, ``mlab.FormatString``, ``mlab.FormatObj``
- ``mlab.donothing_callback``

`pylab` removals
----------------
Lots of code inside the :mod:`matplotlib.mlab` module which was deprecated
in Matplotlib 2.2 has been removed. This means the following functions are
no longer available in the `pylab` module:

- ``amap``
- ``base_repr``
- ``binary_repr``
- ``bivariate_normal``
- ``center_matrix``
- ``csv2rec`` (use `numpy.recarray.tofile` instead)
- ``dist`` (use `numpy.hypot` instead)
- ``dist_point_to_segment``
- ``distances_along_curve``
- ``entropy`` (use `scipy.stats.entropy` instead)
- ``exp_safe`` (use `numpy.exp` instead)
- ``fftsurr``
- ``find`` (use ``np.nonzero(np.ravel(condition))`` instead)
- ``frange`` (use `numpy.arange` instead)
- ``get_sparse_matrix``
- ``get_xyz_where``
- ``griddata`` (use `scipy.interpolate.griddata` instead)
- ``identity`` (use `numpy.identity` instead)
- ``inside_poly``
- ``is_closed_polygon``
- ``ispower2``
- ``isvector``
- ``l1norm`` (use ``numpy.linalg.norm(a, ord=1)`` instead)
- ``l2norm`` (use ``numpy.linalg.norm(a, ord=2)`` instead)
- ``log2`` (use `numpy.log2` instead)
- ``longest_contiguous_ones``
- ``longest_ones``
- ``movavg``
- ``norm_flat`` (use ``numpy.linalg.norm(a.flat, ord=2)`` instead)
- ``normpdf`` (use `scipy.stats.norm.pdf` instead)
- ``path_length``
- ``poly_below``
- ``poly_between``
- ``prctile`` (use `numpy.percentile` instead)
- ``prctile_rank``
- ``rec2csv`` (use `numpy.recarray.tofile` instead)
- ``rec_append_fields``
- ``rec_drop_fields``
- ``rec_join``
- ``rk4`` (use `scipy.integrate.ode` instead)
- ``rms_flat``
- ``segments_intersect``
- ``slopes``
- ``stineman_interp``
- ``vector_lengths``

mplot3d changes
---------------

Voxel shading
~~~~~~~~~~~~~
`.Axes3D.voxels` now shades the resulting voxels; for more details see
What's new. The previous behavior can be achieved by passing ::

  ax.voxels(.., shade=False)



Equal aspect axes disabled
~~~~~~~~~~~~~~~~~~~~~~~~~~

Setting the aspect on 3D axes previously returned non-sensical results
(e.g. see :ghissue:`1077`).  Calling ``ax.set_aspect('equal')`` or
``ax.set_aspect(num)`` on a 3D axes now raises a
`NotImplementedError`.

`.Poly3DCollection.set_zsort`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`.Poly3DCollection.set_zsort` no longer silently ignores invalid
inputs, or `False` (which was always broken).  Passing `True` to mean
``"average"`` is deprecated.

Testing
-------
The ``--no-network`` flag to ``tests.py`` has been removed (no test requires
internet access anymore).  If it is desired to disable internet access both for
old and new versions of Matplotlib, use ``tests.py -m 'not network'`` (which is
now a no-op).

The image comparison test decorators now skip (rather than xfail) the test for
uncomparable formats. The affected decorators are `~.image_comparison` and
`~.check_figures_equal`. The deprecated `~.ImageComparisonTest` class is
likewise changed.

Dependency changes
------------------

NumPy
~~~~~
Matplotlib 3.1 now requires NumPy>=1.11.

ghostscript
~~~~~~~~~~~
Support for ghostscript 8.60 (released in 2007) has been removed.  The oldest
supported version of ghostscript is now 9.0 (released in 2010).

Mathtext changes
----------------
- In constructs such as ``"$1~2$"``, mathtext now interprets the tilde as a
  space, consistently with TeX (this was previously a parse error).

Deprecations
~~~~~~~~~~~~
- The ``\stackrel`` mathtext command has been deprecated (it behaved differently
  from LaTeX's ``\stackrel``.  To stack two mathtext expressions, use
  ``\genfrac{left-delim}{right-delim}{fraction-bar-thickness}{}{top}{bottom}``.
- The ``\mathcircled`` mathtext command (which is not a real TeX command)
  is deprecated.  Directly use unicode characters (e.g.
  ``"\N{CIRCLED LATIN CAPITAL LETTER A}"`` or ``"\u24b6"``) instead.
- Support for setting :rc:`mathtext.default` to circled is deprecated.

Signature deprecations
----------------------
The following signature related behaviours are deprecated:

- The *withdash* keyword argument to `.Axes.text()`. Consider using
  `.Axes.annotate()` instead.
- Passing (n, 1)-shaped error arrays to `.Axes.errorbar()`, which was not
  documented and did not work for ``n = 2``. Pass a 1D array instead.
- The *frameon* kwarg to `~.Figure.savefig` and the :rc:`savefig.frameon` rcParam.
  To emulate ``frameon = False``, set *facecolor* to fully
  transparent (``"none"``, or ``(0, 0, 0, 0)``).
- Passing a non-1D (typically, (n, 1)-shaped) input to `.Axes.pie`.
  Pass a 1D array instead.
- The `.TextPath` constructor used to silently drop ignored arguments; this
  behavior is deprecated.
- The *usetex* parameter of `.TextToPath.get_text_path` is deprecated and
  folded into the *ismath* parameter, which can now take the values
  `False`, `True`, and ``"TeX"``, consistently with other low-level
  text processing functions.
- Passing ``'normal'`` to `.axes.Axes.axis()` is deprecated, use
  ``ax.axis('auto')`` instead.
- Passing the *block* argument of `.pyplot.show` positionally is deprecated; it
  should be passed by keyword.
- When using the nbagg backend, `.pyplot.show` used to silently accept and ignore
  all combinations of positional and keyword arguments.  This behavior is
  deprecated.
- The unused *shape* and *imlim* parameters to `.Axes.imshow` are
  deprecated.  To avoid triggering the deprecation warning, the *filternorm*,
  *filterrad*, *resample*, and *url* arguments should be passed by
  keyword.
- The *interp_at_native* parameter to `.BboxImage`, which has had no effect
  since Matplotlib 2.0, is deprecated.
- All arguments to the ``matplotlib.cbook.deprecation.deprecated`` decorator
  and ``matplotlib.cbook.deprecation.warn_deprecated`` function, except the
  first one (the version where the deprecation occurred), are now keyword-only.
  The goal is to avoid accidentally setting the "message" argument when the
  "name" (or "alternative") argument was intended, as this has repeatedly
  occurred in the past.
- The arguments of `matplotlib.testing.compare.calculate_rms` have been renamed
  from ``expectedImage, actualImage``, to ``expected_image, actual_image``.
- Passing positional arguments to `.Axis.set_ticklabels` beyond *ticklabels*
  itself has no effect, and support for them is deprecated.
- Passing ``shade=None`` to `~.axes3d.Axes3D.plot_surface` is deprecated. This
  was an unintended implementation detail with the same semantics as
  ``shade=False``. Please use the latter code instead.
- `matplotlib.ticker.MaxNLocator` and its *set_params* method will issue
  a warning on unknown keyword arguments instead of silently ignoring them.
  Future versions will raise an error.

Changes in parameter names
--------------------------

- The *arg* parameter to `matplotlib.use` has been renamed to *backend*.

  This will only affect cases where that parameter has been set
  as a keyword argument. The common usage pattern as a positional argument
  ``matplotlib.use('Qt5Agg')`` is not affected.
- The *normed* parameter to `.Axes.hist2d` has been renamed to *density*.
- The *s* parameter to `.Annotation` (and indirectly `.Axes.annotate`) has
  been renamed to *text*.
- The *tolerence* parameter to
  `.bezier.find_bezier_t_intersecting_with_closedpath`,
  `.bezier.split_bezier_intersecting_with_closedpath`,
  ``bezier.find_r_to_boundary_of_closedpath``,
  `.bezier.split_path_inout` and `.bezier.check_if_parallel` has been renamed to
  *tolerance*.

In each case, the old parameter name remains supported (it cannot be used
simultaneously with the new name), but support for it will be dropped in
Matplotlib 3.3.

Class/method/attribute deprecations
-----------------------------------



Support for custom backends that do not provide a
`.GraphicsContextBase.set_hatch_color` method is deprecated.  We
suggest that custom backends let their ``GraphicsContext`` class
inherit from `.GraphicsContextBase`, to at least provide stubs for all
required methods.

- ``spine.Spine.is_frame_like``

This has not been used in the codebase since its addition in 2009.

- ``axis3d.Axis.get_tick_positions``

  This has never been used internally, there is no equivalent method exists on
  the 2D Axis classes, and despite the similar name, it has a completely
  different behavior from the 2D Axis' `axis.Axis.get_ticks_position` method.
- ``.backend_pgf.LatexManagerFactory``

- ``mpl_toolkits.axisartist.axislines.SimpleChainedObjects``
- ``mpl_toolkits.Axes.AxisDict``

Internal Helper Functions
~~~~~~~~~~~~~~~~~~~~~~~~~

- ``checkdep_dvipng``
- ``checkdep_ghostscript``
- ``checkdep_pdftops``
- ``checkdep_inkscape``


- ``ticker.decade_up``
- ``ticker.decade_down``


- ``cbook.dedent``
- ``docstring.Appender``
- ``docstring.dedent``
- ``docstring.copy_dedent``

Use the standard library's docstring manipulation tools instead, such as
`inspect.cleandoc` and `inspect.getdoc`.



- ``matplotlib.scale.get_scale_docs()``
- ``matplotlib.pyplot.get_scale_docs()``

These are considered internal and will be removed from the public API in a
future version.

- ``projections.process_projection_requirements``

- ``backend_ps.PsBackendHelper``
- ``backend_ps.ps_backend_helper``,

- ``cbook.iterable``
- ``cbook.get_label``
- ``cbook.safezip``
  Manually check the lengths of the inputs instead, or rely on NumPy to do it.
- ``cbook.is_hashable``
  Use ``isinstance(..., collections.abc.Hashable)`` instead.

- The ``.backend_bases.RendererBase.strip_math``.  Use
  `.cbook.strip_math` instead.

Multiple internal functions that were exposed as part of the public API
of `.mpl_toolkits.mplot3d` are deprecated,

**mpl_toolkits.mplot3d.art3d**

- ``mpl_toolkits.mplot3d.art3d.norm_angle``
- ``mpl_toolkits.mplot3d.art3d.norm_text_angle``
- ``mpl_toolkits.mplot3d.art3d.path_to_3d_segment``
- ``mpl_toolkits.mplot3d.art3d.paths_to_3d_segments``
- ``mpl_toolkits.mplot3d.art3d.path_to_3d_segment_with_codes``
- ``mpl_toolkits.mplot3d.art3d.paths_to_3d_segments_with_codes``
- ``mpl_toolkits.mplot3d.art3d.get_patch_verts``
- ``mpl_toolkits.mplot3d.art3d.get_colors``
- ``mpl_toolkits.mplot3d.art3d.zalpha``

**mpl_toolkits.mplot3d.proj3d**

- ``mpl_toolkits.mplot3d.proj3d.line2d``
- ``mpl_toolkits.mplot3d.proj3d.line2d_dist``
- ``mpl_toolkits.mplot3d.proj3d.line2d_seg_dist``
- ``mpl_toolkits.mplot3d.proj3d.mod``
- ``mpl_toolkits.mplot3d.proj3d.proj_transform_vec``
- ``mpl_toolkits.mplot3d.proj3d.proj_transform_vec_clip``
- ``mpl_toolkits.mplot3d.proj3d.vec_pad_ones``
- ``mpl_toolkits.mplot3d.proj3d.proj_trans_clip_points``

If your project relies on these functions, consider vendoring them.


Font Handling
~~~~~~~~~~~~~

- ``backend_pdf.RendererPdf.afm_font_cache``
- ``backend_ps.RendererPS.afmfontd``
- ``font_manager.OSXInstalledFonts``
- ``.TextToPath.glyph_to_path`` (Instead call ``font.get_path()`` and manually
  transform the path.)


Date related functions
~~~~~~~~~~~~~~~~~~~~~~

- ``dates.seconds()``
- ``dates.minutes()``
- ``dates.hours()``
- ``dates.weeks()``
- ``dates.strpdate2num``
- ``dates.bytespdate2num``

These are brittle in the presence of locale changes.  Use standard datetime
parsers such as `time.strptime` or `dateutil.parser.parse`, and additionally
call `matplotlib.dates.date2num` if you need to convert to Matplotlib's
internal datetime representation; or use ``dates.datestr2num``.

Axes3D
~~~~~~

- `.axes3d.Axes3D.w_xaxis`
- `.axes3d.Axes3D.w_yaxis`
- `.axes3d.Axes3D.w_zaxis`

Use `.axes3d.Axes3D.xaxis`, `.axes3d.Axes3D.yaxis` and `.axes3d.Axes3D.zaxis`
instead.

Testing
~~~~~~~

- ``matplotlib.testing.decorators.switch_backend`` decorator

Test functions should use ``pytest.mark.backend``, and the mark will be
picked up by the `matplotlib.testing.conftest.mpl_test_settings` fixture.

Quiver
~~~~~~

- ``.color`` attribute of `.Quiver` objects

Instead, use (as for any `.Collection`) the ``get_facecolor`` method.
Note that setting to the ``.color`` attribute did not update the quiver artist,
whereas calling ``set_facecolor`` does.

GUI / backend details
~~~~~~~~~~~~~~~~~~~~~

- ``.get_py2exe_datafiles``
- ``.tk_window_focus``
- ``.backend_gtk3.FileChooserDialog``
- ``.backend_gtk3.NavigationToolbar2GTK3.get_filechooser``
- ``.backend_gtk3.SaveFigureGTK3.get_filechooser``
- ``.NavigationToolbar2QT.adj_window`` attribute. This is unused and always ``None``.
- ``.backend_wx.IDLE_DELAY`` global variable
  This is unused and only relevant to the now removed wx "idling" code (note that
  as it is a module-level global, no deprecation warning is emitted when
  accessing it).
- ``mlab.demean``
- ``backend_gtk3cairo.FigureCanvasGTK3Cairo``,
- ``backend_wx.debug_on_error``, ``backend_wx.fake_stderr``,
  ``backend_wx.raise_msg_to_str``, ``backend_wx.MenuButtonWx``,
  ``backend_wx.PrintoutWx``,
- ``matplotlib.backends.qt_editor.formlayout`` module

This module is a vendored, modified version of the official formlayout_ module
available on PyPI. Install that module separately if you need it.

.. _formlayout: https://pypi.org/project/formlayout/

- ``GraphicsContextPS.shouldstroke``


Transforms / scales
~~~~~~~~~~~~~~~~~~~

- ``LogTransformBase``
- ``Log10Transform``
- ``Log2Transform``,
- ``NaturalLogTransformLog``
- ``InvertedLogTransformBase``
- ``InvertedLog10Transform``
- ``InvertedLog2Transform``
- ``InvertedNaturalLogTransform``

These classes defined in :mod:`matplotlib.scale` are deprecated.
As a replacement, use the general `~.scale.LogTransform` and `~.scale.InvertedLogTransform`
classes, whose constructors take a *base* argument.

Locators / Formatters
~~~~~~~~~~~~~~~~~~~~~

- ``OldScalarFormatter.pprint_val``
- ``ScalarFormatter.pprint_val``
- ``LogFormatter.pprint_val``

These are helper methods that do not have a consistent signature across
formatter classes.

Path tools
~~~~~~~~~~

- ``path.get_paths_extents``

Use `~.path.get_path_collection_extents` instead.

- ``.Path.has_nonfinite`` attribute

Use ``not np.isfinite(path.vertices).all()`` instead.

- ``.bezier.find_r_to_boundary_of_closedpath`` function is deprecated

This has always returned None instead of the requested radius.

Text
~~~~

- ``text.TextWithDash``
- ``Text.is_math_text``
- ``TextPath.is_math_text``
- ``TextPath.text_get_vertices_codes`` (As an alternative, construct a new ``TextPath`` object.)

Unused attributes
~~~~~~~~~~~~~~~~~

- ``NavigationToolbar2QT.buttons``
- ``Line2D.verticalOffset``
- ``Quiver.keytext``
- ``Quiver.keyvec``
- ``SpanSelector.buttonDown``

These are unused and never updated.


Sphinx extensions
~~~~~~~~~~~~~~~~~

- ``matplotlib.sphinxext.mathmpl.math_directive``
- ``matplotlib.sphinxext.plot_directive.plot_directive``

This is because the ``matplotlib.sphinxext.mathmpl`` and
``matplotlib.sphinxext.plot_directive`` interfaces have changed from the
(Sphinx-)deprecated function-based interface to a class-based interface; this
should not affect end users.

- ``mpl_toolkits.axisartist.axis_artist.UnimplementedException``

Environmental Variables
~~~~~~~~~~~~~~~~~~~~~~~

- The ``MATPLOTLIBDATA`` environment variable


Axis
~~~~

- ``Axis.iter_ticks``

This only served as a helper to the private `.Axis._update_ticks`


Undeprecations
--------------
The following API elements have been un-deprecated:

- The *obj_type* keyword argument to the
  ``matplotlib.cbook.deprecation.deprecated`` decorator.
- *xmin*, *xmax* keyword arguments to `.Axes.set_xlim` and *ymin*, *ymax*
  keyword arguments to `.Axes.set_ylim`


New features
------------

`.Text` now has a ``c`` alias for the ``color`` property
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
For consistency with `.Line2D`, the `~.text.Text` class has gained the ``c``
alias for the ``color`` property. For example, one can now write ::

  ax.text(.5, .5, "foo", c="red")


``Cn`` colors now support ``n>=10``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
It is now possible to go beyond the tenth color in the property cycle using
``Cn`` syntax, e.g. ::

  plt.plot([1, 2], color="C11")

now uses the 12th color in the cycle.

Note that previously, a construct such as::

  plt.plot([1, 2], "C11")

would be interpreted as a request to use color ``C1`` and marker ``1``
(an "inverted Y").  To obtain such a plot, one should now use ::

  plt.plot([1, 2], "1C1")

(so that the first "1" gets correctly interpreted as a marker
specification), or, more explicitly::

  plt.plot([1, 2], marker="1", color="C1")


New `.Formatter.format_ticks` method
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The `.Formatter` class gained a new `~.Formatter.format_ticks` method, which
takes the list of all tick locations as a single argument and returns the list
of all formatted values.  It is called by the axis tick handling code and, by
default, first calls `~.Formatter.set_locs` with all locations, then repeatedly
calls `~.Formatter.__call__` for each location.

Tick-handling code in the codebase that previously performed this sequence
(`~.Formatter.set_locs` followed by repeated `~.Formatter.__call__`) have been
updated to use `~.Formatter.format_ticks`.

`~.Formatter.format_ticks` is intended to be overridden by `.Formatter`
subclasses for which the formatting of a tick value depends on other tick
values, such as `.ConciseDateFormatter`.

Added support for RGB(A) images in pcolorfast
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

pcolorfast now accepts 3D images (RGB or RGBA) arrays if the X and Y
specifications allow image or pcolorimage rendering; they remain unsupported by
the more general quadmesh rendering


Invalid inputs
--------------

Passing invalid locations to `~.Axes.legend` and `~.Axes.table` used
to fallback on a default location.  This behavior is deprecated and
will throw an exception in a future version.

`.offsetbox.AnchoredText` is unable to handle the *horizontalalignment* or
*verticalalignment* kwargs, and used to ignore them with a warning.  This
behavior is deprecated and will throw an exception in a future version.

Passing steps less than 1 or greater than 10 to `~.ticker.MaxNLocator` used to
result in undefined behavior.  It now throws a `ValueError`.

The signature of the (private) ``Axis._update_ticks`` has been changed to not
take the renderer as argument anymore (that argument is unused).
Changes for 0.60
================

.. code-block:: text

  ColormapJet and Grayscale are deprecated.  For backwards
  compatibility, they can be obtained either by doing

    from matplotlib.cm import ColormapJet

  or

    from matplotlib.matlab import *

  They are replaced by cm.jet and cm.grey
Development changes
-------------------

Increase to minimum supported versions of Python and dependencies
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

For Matplotlib 3.4, the :ref:`minimum supported versions <dependencies>` are
being bumped:

+------------+-----------------+---------------+
| Dependency |  min in mpl3.3  | min in mpl3.4 |
+============+=================+===============+
|   Python   |       3.6       |      3.7      |
+------------+-----------------+---------------+
|  dateutil  |       2.1       |      2.7      |
+------------+-----------------+---------------+
|   numpy    |      1.15       |     1.16      |
+------------+-----------------+---------------+
| pyparsing  |      2.0.3      |     2.2.1     |
+------------+-----------------+---------------+

This is consistent with our :ref:`min_deps_policy` and `NEP29
<https://numpy.org/neps/nep-0029-deprecation_policy.html>`__

Qhull downloaded at build-or-sdist time
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Much like FreeType, Qhull is now downloaded at build time, or upon creation of
the sdist. To link against system Qhull, set the ``system_qhull`` option to
`True` in the :file:`setup.cfg` file. Note that Matplotlib now requires the
re-entrant version of Qhull (``qhull_r``).

``FigureBase`` class added, and ``Figure`` class made a child
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The new subfigure feature motivated some re-organization of the
`.figure.Figure` class, so that the new `.figure.SubFigure` class could have
all the capabilities of a figure.

The `.figure.Figure` class is now a subclass of `.figure.FigureBase`, where
`.figure.FigureBase` contains figure-level artist addition routines, and the
`.figure.Figure` subclass just contains features that are unique to the outer
figure.

Note that there is a new *transSubfigure* transform associated with the
subfigure.  This transform also exists for a `.Figure` instance, and is equal
to *transFigure* in that case, so code that uses the transform stack that wants
to place objects on either the parent figure or one of the subfigures should
use *transSubfigure*.
Removals
--------
The following deprecated APIs have been removed:

Removed behaviour
~~~~~~~~~~~~~~~~~

- The "smart bounds" functionality on `~.axis.Axis` and `.Spine` has been
  deleted, and the related methods have been removed.
- Converting a string with single color characters (e.g. ``'cymk'``) in
  `~.colors.to_rgba_array` is no longer supported. Instead, the colors can be
  passed individually in a list (e.g. ``['c', 'y', 'm', 'k']``).
- Returning a factor equal to ``None`` from ``mpl_toolkits.axisartist``
  Locators (which are **not** the same as "standard" tick Locators), or passing
  a factor equal to ``None`` to axisartist Formatters (which are **not** the
  same as "standard" tick Formatters) is no longer supported. Pass a factor
  equal to 1 instead.

Modules
~~~~~~~

- The entire ``matplotlib.testing.disable_internet`` module has been removed.
  The `pytest-remotedata package
  <https://github.com/astropy/pytest-remotedata>`_ can be used instead.
- The ``mpl_toolkits.axes_grid1.colorbar`` module and its colorbar
  implementation have been removed in favor of `matplotlib.colorbar`.

Classes, methods and attributes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

- The `.animation.MovieWriterRegistry` methods ``.set_dirty()``,
  ``.ensure_not_dirty()``, and ``.reset_available_writers()`` do nothing and
  have been removed.  The ``.avail()`` method has been removed; use ``.list()``
  instead to get a list of available writers.
- The ``matplotlib.artist.Artist.eventson`` and
  ``matplotlib.container.Container.eventson`` attributes have no effect and
  have been removed.
- ``matplotlib.axes.Axes.get_data_ratio_log`` has been removed.
- ``matplotlib.axes.SubplotBase.rowNum``; use
  ``ax.get_subplotspec().rowspan.start`` instead.
- ``matplotlib.axes.SubplotBase.colNum``; use
  ``ax.get_subplotspec().colspan.start`` instead.
- ``matplotlib.axis.Axis.set_smart_bounds`` and
  ``matplotlib.axis.Axis.get_smart_bounds`` have been removed.
- ``matplotlib.colors.DivergingNorm`` has been renamed to
  `~matplotlib.colors.TwoSlopeNorm`.
- ``matplotlib.figure.AxesStack`` has been removed.
- ``matplotlib.font_manager.JSONEncoder`` has been removed; use
  `.font_manager.json_dump` to dump a `.FontManager` instance.
- The ``matplotlib.ft2font.FT2Image`` methods ``.as_array()``,
  ``.as_rgba_str()``, ``.as_str()``, ``.get_height()`` and ``.get_width()``
  have been removed. Convert the ``FT2Image`` to a NumPy array with
  ``np.asarray`` before processing it.
- ``matplotlib.quiver.QuiverKey.quiverkey_doc`` has been removed; use
  ``matplotlib.quiver.QuiverKey.__init__.__doc__`` instead.
- ``matplotlib.spines.Spine.set_smart_bounds`` and
  ``matplotlib.spines.Spine.get_smart_bounds`` have been removed.
- ``matplotlib.testing.jpl_units.UnitDbl.checkUnits`` has been removed; use
  ``units not in self.allowed`` instead.
- The unused ``matplotlib.ticker.Locator.autoscale`` method has been removed
  (pass the axis limits to `.Locator.view_limits` instead). The derived methods
  ``Locator.autoscale``, ``AutoDateLocator.autoscale``,
  ``RRuleLocator.autoscale``, ``RadialLocator.autoscale``,
  ``ThetaLocator.autoscale``, and ``YearLocator.autoscale`` have also been
  removed.
- ``matplotlib.transforms.BboxBase.is_unit`` has been removed; check the
  `.Bbox` extents if needed.
- ``matplotlib.transforms.Affine2DBase.matrix_from_values(...)`` has been
  removed; use (for example) ``Affine2D.from_values(...).get_matrix()``
  instead.

* ``matplotlib.backend_bases.FigureCanvasBase.draw_cursor`` has been removed.
* ``matplotlib.backends.backend_gtk.ConfigureSubplotsGTK3.destroy`` and
  ``matplotlib.backends.backend_gtk.ConfigureSubplotsGTK3.init_window`` methods
  have been removed.
* ``matplotlib.backends.backend_gtk.ConfigureSubplotsGTK3.window`` property has
  been removed.
* ``matplotlib.backends.backend_macosx.FigureCanvasMac.invalidate`` has been
  removed.
* ``matplotlib.backends.backend_pgf.RendererPgf.latexManager`` has been removed.
* ``matplotlib.backends.backend_wx.FigureFrameWx.statusbar``,
  ``matplotlib.backends.backend_wx.NavigationToolbar2Wx.set_status_bar``, and
  ``matplotlib.backends.backend_wx.NavigationToolbar2Wx.statbar`` have been
  removed. The status bar can be retrieved by calling standard wx methods
  (``frame.GetStatusBar()`` and
  ``toolbar.GetTopLevelParent().GetStatusBar()``).
* ``matplotlib.backends.backend_wx.ConfigureSubplotsWx.configure_subplots`` and
  ``matplotlib.backends.backend_wx.ConfigureSubplotsWx.get_canvas`` have been
  removed.


- ``mpl_toolkits.axisartist.grid_finder.GridFinderBase`` has been removed; use
  `.GridFinder` instead.
- ``mpl_toolkits.axisartist.axis_artist.BezierPath`` has been removed; use
  `.patches.PathPatch` instead.

Functions
~~~~~~~~~

- ``matplotlib.backends.backend_pgf.repl_escapetext`` and
  ``matplotlib.backends.backend_pgf.repl_mathdefault`` have been removed.
- ``matplotlib.checkdep_ps_distiller`` has been removed.
- ``matplotlib.cm.revcmap`` has been removed; use `.Colormap.reversed`
  instead.
- ``matplotlib.colors.makeMappingArray`` has been removed.
- ``matplotlib.compare_versions`` has been removed; use comparison of
  ``distutils.version.LooseVersion``\s instead.
- ``matplotlib.dates.mx2num`` has been removed.
- ``matplotlib.font_manager.createFontList`` has been removed;
  `.font_manager.FontManager.addfont` is now available to register a font at a
  given path.
- ``matplotlib.get_home`` has been removed; use standard library instead.
- ``matplotlib.mlab.apply_window`` and ``matplotlib.mlab.stride_repeat`` have
  been removed.
- ``matplotlib.rcsetup.update_savefig_format`` has been removed; this just
  replaced ``'auto'`` with ``'png'``, so do the same.
- ``matplotlib.rcsetup.validate_animation_writer_path`` has been removed.
- ``matplotlib.rcsetup.validate_path_exists`` has been removed; use
  `os.path.exists` or `pathlib.Path.exists` instead.
- ``matplotlib.style.core.is_style_file`` and
  ``matplotlib.style.core.iter_style_files`` have been removed.
- ``matplotlib.testing.is_called_from_pytest`` has been removed.
- ``mpl_toolkits.mplot3d.axes3d.unit_bbox`` has been removed; use `.Bbox.unit`
  instead.


Arguments
~~~~~~~~~

- Passing more than one positional argument to `.axes.Axes.axis` will now
  raise an error.
- Passing ``"range"`` to the *whis* parameter of `.Axes.boxplot` and
  `.cbook.boxplot_stats` to mean "the whole data range" is  no longer
  supported.
- Passing scalars to the *where* parameter in `.axes.Axes.fill_between` and
  `.axes.Axes.fill_betweenx` is no longer accepted and non-matching sizes now
  raise a `ValueError`.
- The *verts* parameter to `.Axes.scatter` has been removed; use *marker* instead.
- The *minor* parameter in `.Axis.set_ticks` and ``SecondaryAxis.set_ticks`` is
  now keyword-only.
- `.scale.ScaleBase`, `.scale.LinearScale` and `.scale.SymmetricalLogScale` now
  error if any unexpected keyword arguments are passed to their constructors.
- The *renderer* parameter to `.Figure.tight_layout` has been removed; this
  method now always uses the renderer instance cached on the `.Figure`.
- The *locator* parameter to
  `mpl_toolkits.axes_grid1.axes_grid.CbarAxesBase.colorbar` has been removed in
  favor of its synonym *ticks* (which already existed previously,
  and is consistent with :mod:`matplotlib.colorbar`).
- The *switch_backend_warn* parameter to ``matplotlib.test`` has no effect and
  has been removed.
- The *dryrun* parameter to the various ``FigureCanvas*.print_*`` methods has
  been removed.

rcParams
~~~~~~~~

- The ``datapath`` rcParam has been removed. Use `matplotlib.get_data_path`
  instead.
- The ``mpl_toolkits.legacy_colorbar`` rcParam has no effect and has been
  removed.
- Setting :rc:`boxplot.whiskers` to ``"range"`` is no longer valid; set it to
  ``0, 100`` instead.
- Setting :rc:`savefig.format` to ``"auto"`` is no longer valid; use ``"png"``
  instead.
- Setting :rc:`text.hinting` to `False` or `True` is no longer valid; set it to
  ``"auto"`` or ``"none"`` respectively.

sample_data removals
~~~~~~~~~~~~~~~~~~~~
The sample datasets listed below have been removed.  Suggested replacements for
demonstration purposes are listed in parentheses.

- ``None_vs_nearest-pdf.png``,
- ``aapl.npz`` (use ``goog.npz``),
- ``ada.png``, ``grace_hopper.png`` (use ``grace_hopper.jpg``),
- ``ct.raw.gz`` (use ``s1045.ima.gz``),
- ``damodata.csv`` (use ``msft.csv``).
Behaviour changes
-----------------

Constrained layout rewrite
~~~~~~~~~~~~~~~~~~~~~~~~~~

The layout manager ``constrained_layout`` was re-written with different outer
constraints that should be more robust to complicated subplot layouts.
User-facing changes are:

- some poorly constrained layouts will have different width/height plots than
  before.
- colorbars now respect the ``anchor`` keyword argument of
  `matplotlib.colorbar.make_axes`
- colorbars are wider.
- colorbars in different rows or columns line up more robustly.
- *hspace* and *wspace* options to  `.Figure.set_constrained_layout_pads` were
  twice as wide as the docs said they should be. So these now follow the docs.

This feature will remain "experimental" until the new changes have been used
enough by users, so we anticipate version 3.5 or 3.6. On the other hand,
``constrained_layout`` is extensively tested and used in examples in the
library, so using it should be safe, but layouts may not be exactly the same as
more development takes place.

Details of using ``constrained_layout``, and its algorithm are available at
:doc:`/tutorials/intermediate/constrainedlayout_guide`

``plt.subplot`` re-selection without keyword arguments
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The purpose of `.pyplot.subplot` is to facilitate creating and re-selecting
Axes in a Figure when working strictly in the implicit pyplot API. When
creating new Axes it is possible to select the projection (e.g. polar, 3D, or
various cartographic projections) as well as to pass additional keyword
arguments through to the Axes-subclass that is created.

The first time `.pyplot.subplot` is called for a given position in the Axes
grid it always creates and returns a new Axes with the passed arguments and
projection (defaulting to rectilinear). On subsequent calls to
`.pyplot.subplot` we have to determine if an existing Axes has a) equivalent
parameters, in which case it should be selected as the current Axes and
returned, or b) different parameters, in which case a new Axes is created and
the existing Axes is removed. This leaves the question of what is "equivalent
parameters".

Previously it was the case that an existing Axes subclass, except for Axes3D,
would be considered equivalent to a 2D rectilinear Axes, despite having
different projections, if the keyword arguments (other than *projection*)
matched. Thus::

  ax1 = plt.subplot(1, 1, 1, projection='polar')
  ax2 =  plt.subplots(1, 1, 1)
  ax1 is ax2

We are embracing this long standing behavior to ensure that in the case when no
keyword arguments (of any sort) are passed to `.pyplot.subplot` any existing
Axes is returned, without consideration for keywords or projection used to
initially create it. This will cause a change in behavior when additional
keywords were passed to the original Axes::

  ax1 = plt.subplot(111, projection='polar', theta_offset=.75)
  ax2 = plt.subplots(1, 1, 1)
  ax1 is ax2         # new behavior
  # ax1 is not ax2   # old behavior, made a new axes

  ax1 = plt.subplot(111, label='test')
  ax2 = plt.subplots(1, 1, 1)
  ax1 is ax2         # new behavior
  # ax1 is not ax2   # old behavior, made a new axes

For the same reason, if there was an existing Axes that was not rectilinear,
passing ``projection='rectilinear'`` would reuse the existing Axes ::

  ax1 = plt.subplot(projection='polar')
  ax2 = plt.subplot(projection='rectilinear')
  ax1 is not ax2     # new behavior, makes new Axes
  # ax1 is ax2       # old behavior

contrary to the user's request.

Previously Axes3D could not be re-selected with `.pyplot.subplot` due to an
unrelated bug (also fixed in Matplotlib 3.4). While Axes3D are now consistent
with all other projections there is a change in behavior for ::

  plt.subplot(projection='3d')  # create a 3D Axes

  plt.subplot()                 # now returns existing 3D Axes, but
                                # previously created new 2D Axes

  plt.subplot(projection='rectilinear')  # to get a new 2D Axes

``ioff`` and ``ion`` can be used as context managers
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`.pyplot.ion` and `.pyplot.ioff` may now be used as context managers to create
a context with interactive mode on or off, respectively. The old behavior of
calling these functions is maintained. To use the new functionality call as::

   with plt.ioff():
      # non-interactive code

Locators and formatters must be in the class hierarchy
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Axis locators and formatters must now be subclasses of
`~matplotlib.ticker.Locator` and `~matplotlib.ticker.Formatter` respectively.

Date locator for DAILY interval now returns middle of month
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The `matplotlib.dates.AutoDateLocator` has a default of
``interval_multiples=True`` that attempts to align ticks with the start of
meaningful intervals like the start of the month, or start of the day, etc.
That lead to approximately 140-day intervals being mapped to the first and 22nd
of the month. This has now been changed so that it chooses the first and 15th
of the month, which is probably what most people want.

``ScalarFormatter`` *useLocale* option obeys grouping
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

When the `~.ScalarFormatter` option *useLocale* is enabled (or
:rc:`axes.formatter.use_locale` is *True*) and the configured locale uses
grouping, a separator will be added as described in `locale.format_string`.

``Axes.errorbar`` cycles non-color properties correctly
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Formerly, `.Axes.errorbar` incorrectly skipped the Axes property cycle if a
color was explicitly specified, even if the property cycler was for other
properties (such as line style). Now, `.Axes.errorbar` will advance the Axes
property cycle as done for `.Axes.plot`, i.e., as long as all properties in the
cycler are not explicitly passed.

pyplot.specgram always uses origin='upper'
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Previously if :rc:`image.origin` was set to something other than ``'upper'`` or
if the *origin* keyword argument was passed with a value other than
``'upper'``, the spectrogram itself would flip, but the Axes would remain
oriented for an origin value of ``'upper'``, so that the resulting plot was
incorrectly labelled.

Now, the *origin* keyword argument is not supported and the ``image.origin``
rcParam is ignored. The function `matplotlib.pyplot.specgram` is forced to use
``origin='upper'``, so that the Axes are correct for the plotted spectrogram.

xunits=None and yunits=None passed as keyword arguments are treated as "no action"
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Many (but not all) of the methods on `~.axes.Axes` take the (undocumented)
keyword arguments *xunits* and *yunits* that will update the units on the given
Axis by calling `.Axis.set_units` and `.Axis.update_units`.

Previously if *None* was passed it would clear the value stored in
``.Axis.units`` which will in turn break converters which rely on the value in
``.Axis.units`` to work properly (notably `.StrCategoryConverter`).

This changes the semantics of ``ax.meth(..., xunits=None, yunits=None)`` from
"please clear the units" to "do the default thing as if they had not been
passed" which is consistent with the standard behavior of Matplotlib keyword
arguments.

If you were relying on passing ``xunits=None`` to plotting methods to clear the
``.Axes.units`` attribute, directly call `.Axis.set_units` (and
`.Axis.update_units` if you also require the converter to be updated).

Annotations with ``annotation_clip`` no longer affect ``tight_layout``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Previously, `.text.Annotation.get_tightbbox` always returned the full
`.text.Annotation.get_window_extent` of the object, independent of the value of
``annotation_clip``. `.text.Annotation.get_tightbbox` now correctly takes this
extra clipping box into account, meaning that `~.text.Annotation`\s that are
not drawn because of ``annotation_clip`` will not count towards the Axes
bounding box calculations, such as those done by `~.pyplot.tight_layout`.

This is now consistent with the API described in `~.artist.Artist`, which
specifies that ``get_window_extent`` should return the full extents and
``get_tightbbox`` should "account for any clipping".

Parasite Axes pcolor and pcolormesh now defaults to placing grid edges at integers, not half-integers
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

This is consistent with `~.Axes.pcolor` and `~.Axes.pcolormesh`.

``Colorbar`` outline is now a ``Spine``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The outline of `~matplotlib.colorbar.Colorbar` is now a `.Spine` and drawn as
one, instead of a `.Polygon` drawn as an artist. This ensures it will always be
drawn after (i.e., on top of) all artists, consistent with Spines on normal
Axes.

``Colorbar.dividers`` changes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

This attribute is now always a `.LineCollection` -- an empty one if
``drawedges`` is *False*. Its default colors and linewidth
(:rc:`axes.edgecolor`, :rc:`axes.linewidth`) are now resolved at instantiation
time, not at draw time.

Raise or warn on registering a colormap twice
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

When using `matplotlib.cm.register_cmap` to register a user provided or
third-party colormap it will now raise a `ValueError` if trying to over-write
one of the built in colormaps and warn if trying to over write a user
registered colormap. This may raise for user-registered colormaps in the
future.

Consecutive rasterized draws now merged
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Tracking of depth of raster draws has moved from
`.backend_mixed.MixedModeRenderer.start_rasterizing` and
`.backend_mixed.MixedModeRenderer.stop_rasterizing` into
`.artist.allow_rasterization`. This means the start and stop functions are only
called when the rasterization actually needs to be started and stopped.

The output of vector backends will change in the case that rasterized elements
are merged. This should not change the appearance of outputs.

The renders in 3rd party backends are now expected to have
``self._raster_depth`` and ``self._rasterizing`` initialized to ``0`` and
*False* respectively.

Consistent behavior of ``draw_if_interactive()`` across backends
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`.pyplot.draw_if_interactive` no longer shows the window (if it was previously
unshown) on the Tk and nbAgg backends, consistently with all other backends.

The Artist property *rasterized* cannot be *None* anymore
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

It is now a boolean only. Before the default was *None* and
`.Artist.set_rasterized` was documented to accept *None*. However, *None* did
not have a special meaning and was treated as *False*.

Canvas's callback registry now stored on Figure
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The canonical location of the `~.cbook.CallbackRegistry` used to handle
Figure/Canvas events has been moved from the Canvas to the Figure. This change
should be transparent to almost all users, however if you are swapping
switching the Figure out from on top of a Canvas or visa versa you may see a
change in behavior.

Harmonized key event data across backends
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The different backends with key translation support, now handle "Shift" as a
sometimes modifier, where the ``'shift+'`` prefix won't be added if a key
translation was made.

In the Qt5 backend, the ``matplotlib.backends.backend_qt5.SPECIAL_KEYS``
dictionary contains keys that do *not* return their unicode name instead they
have manually specified names. The name for ``QtCore.Qt.Key_Meta`` has changed
to ``'meta'`` to be consistent with the other GUI backends.

The WebAgg backend now handles key translations correctly on non-US keyboard
layouts.

In the GTK and Tk backends, the handling of non-ASCII keypresses (as reported
in the KeyEvent passed to ``key_press_event``-handlers) now correctly reports
Unicode characters (e.g., €), and better respects NumLock on the numpad.

In the GTK and Tk backends, the following key names have changed; the new names
are consistent with those reported by the Qt backends:

- The "Break/Pause" key (keysym 0xff13) is now reported as ``"pause"`` instead
  of ``"break"`` (this is also consistent with the X key name).
- The numpad "delete" key is now reported as ``"delete"`` instead of ``"dec"``.

WebAgg backend no longer reports a middle click as a right click
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Previously when using the WebAgg backend the event passed to a callback by
``fig.canvas.mpl_connect('mouse_button_event', callback)`` on a middle click
would report `.MouseButton.RIGHT` instead of `.MouseButton.MIDDLE`.

ID attribute of XML tags in SVG files now based on SHA256 rather than MD5
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Matplotlib generates unique ID attributes for various tags in SVG files.
Matplotlib previously generated these unique IDs using the first 10 characters
of an MD5 hash. The MD5 hashing algorithm is not available in Python on systems
with Federal Information Processing Standards (FIPS) enabled. Matplotlib now
uses the first 10 characters of an SHA256 hash instead. SVG files that would
otherwise match those saved with earlier versions of matplotlib, will have
different ID attributes.

``RendererPS.set_font`` is no longer a no-op in AFM mode
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`.RendererPS.set_font` now sets the current PostScript font in all cases.

Autoscaling in Axes3D
~~~~~~~~~~~~~~~~~~~~~

In Matplotlib 3.2.0, autoscaling was made lazier for 2D Axes, i.e., limits
would only be recomputed when actually rendering the canvas, or when the user
queries the Axes limits. This performance improvement is now extended to
`.Axes3D`. This also fixes some issues with autoscaling being triggered
unexpectedly in Axes3D.

Please see :ref:`the API change for 2D Axes <api-changes-3-2-0-autoscaling>`
for further details.

Axes3D automatically adding itself to Figure is deprecated
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

New `.Axes3D` objects previously added themselves to figures when they were
created, unlike all other Axes classes, which lead to them being added twice if
``fig.add_subplot(111, projection='3d')`` was called.

This behavior is now deprecated and will warn. The new keyword argument
*auto_add_to_figure* controls the behavior and can be used to suppress the
warning. The default value will change to *False* in Matplotlib 3.5, and any
non-*False* value will be an error in Matplotlib 3.6.

In the future, `.Axes3D` will need to be explicitly added to the figure ::

  fig = Figure()
  # create Axes3D
  ax = Axes3d(fig)
  # add to Figure
  fig.add_axes(ax)

as needs to be done for other `.axes.Axes` sub-classes. Or, a 3D projection can
be made via::

    fig.add_subplot(projection='3d')

``mplot3d.art3d.get_dir_vector`` always returns NumPy arrays
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

For consistency, `~.mplot3d.art3d.get_dir_vector` now always returns NumPy
arrays, even if the input is a 3-element iterable.

Changed cursive and fantasy font definitions
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The Comic Sans and Comic Neue fonts were moved from the default
:rc:`font.fantasy` list to the default :rc:`font.cursive` setting, in
accordance with the CSS font families example_ and in order to provide a
cursive font present in Microsoft's Core Fonts set.

.. _example: https://www.w3.org/Style/Examples/007/fonts.en.html

docstring.Substitution now always dedents docstrings before string interpolation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Deprecations
------------

Extra parameters to Axes constructor
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Parameters of the Axes constructor other than *fig* and *rect* will become
keyword-only in a future version.

``pyplot.gca`` and ``Figure.gca`` keyword arguments
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Passing keyword arguments to `.pyplot.gca` or `.figure.Figure.gca` will not be
supported in a future release.

``Axis.cla``, ``RadialAxis.cla``, ``ThetaAxis.cla`` and ``Spine.cla``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

These methods are deprecated in favor of the respective ``clear()`` methods.

Invalid hatch pattern characters are no longer ignored
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

When specifying hatching patterns, characters that are not recognized will
raise a deprecation warning. In the future, this will become a hard error.

``imread`` reading from URLs
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Passing a URL to `~.pyplot.imread()` is deprecated. Please open the URL for
reading and directly use the Pillow API
(``PIL.Image.open(urllib.request.urlopen(url))``, or
``PIL.Image.open(io.BytesIO(requests.get(url).content))``) instead.

Subplot-related attributes and methods
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Some ``SubplotBase`` methods and attributes have been deprecated and/or moved
to `.SubplotSpec`:

- ``get_geometry`` (use `.SubplotBase.get_subplotspec` instead),
- ``change_geometry`` (use `.SubplotBase.set_subplotspec` instead),
- ``is_first_row``, ``is_last_row``, ``is_first_col``, ``is_last_col`` (use the
  corresponding methods on the `.SubplotSpec` instance instead),
- ``update_params`` (now a no-op),
- ``figbox`` (use ``ax.get_subplotspec().get_geometry(ax.figure)`` instead to
  recompute the geometry, or ``ax.get_position()`` to read its current value),
- ``numRows``, ``numCols`` (use the ``nrows`` and ``ncols`` attribute on the
  `.GridSpec` instead).

Likewise, the ``get_geometry``, ``change_geometry``, ``update_params``, and
``figbox`` methods/attributes of `.SubplotDivider` have been deprecated, with
similar replacements.

``is_url`` and ``URL_REGEX``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

... are deprecated. (They were previously defined in the toplevel
:mod:`matplotlib` module.)

``matplotlib.style.core`` deprecations
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
``STYLE_FILE_PATTERN``, ``load_base_library``, and ``iter_user_libraries`` are
deprecated.

``dpi_cor`` property of `.FancyArrowPatch`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

This parameter is considered internal and deprecated.

Passing ``boxstyle="custom", bbox_transmuter=...`` to ``FancyBboxPatch``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In order to use a custom boxstyle, directly pass it as the *boxstyle* argument
to `.FancyBboxPatch`. This was previously already possible, and is consistent
with custom arrow styles and connection styles.

BoxStyles are now called without passing the *mutation_aspect* parameter
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Mutation aspect is now handled by the artist itself. Hence the
*mutation_aspect* parameter of ``BoxStyle._Base.__call__`` is deprecated, and
custom boxstyles should be implemented to not require this parameter (it can be
left as a parameter defaulting to 1 for back-compatibility).

``ContourLabeler.get_label_coords`` is deprecated
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

It is considered an internal helper.

Line2D and Patch no longer duplicate ``validJoin`` and ``validCap``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Validation of joinstyle and capstyles is now centralized in ``rcsetup``.

Setting a Line2D's pickradius via ``set_picker`` is undeprecated
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

This cancels the deprecation introduced in Matplotlib 3.3.0.

``MarkerStyle`` is considered immutable
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

``MarkerStyle.set_fillstyle()`` and ``MarkerStyle.set_marker()`` are
deprecated. Create a new ``MarkerStyle`` with the respective parameters
instead.

``MovieWriter.cleanup`` is deprecated
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Cleanup logic is now fully implemented in `.MovieWriter.finish`. Third-party
movie writers should likewise move the relevant cleanup logic there, as
overridden ``cleanup``\s will no longer be called in the future.

*minimumdescent* parameter/property of ``TextArea``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`.offsetbox.TextArea` has behaved as if *minimumdescent* was always True
(regardless of the value to which it was set) since Matplotlib 1.3, so the
parameter/property is deprecated.

``colorbar`` now warns when the mappable's Axes is different from the current Axes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Currently, `.Figure.colorbar` and `.pyplot.colorbar` steal space by default
from the current Axes to place the colorbar. In a future version, they will
steal space from the mappable's Axes instead. In preparation for this change,
`.Figure.colorbar` and `.pyplot.colorbar` now emits a warning when the current
Axes is not the same as the mappable's Axes.

Colorbar docstrings
~~~~~~~~~~~~~~~~~~~

The following globals in :mod:`matplotlib.colorbar` are deprecated:
``colorbar_doc``, ``colormap_kw_doc``, ``make_axes_kw_doc``.

``ColorbarPatch`` and ``colorbar_factory`` are deprecated
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
All the relevant functionality has been moved to the
`~matplotlib.colorbar.Colorbar` class.

Backend deprecations
~~~~~~~~~~~~~~~~~~~~

- ``FigureCanvasBase.get_window_title`` and
  ``FigureCanvasBase.set_window_title`` are deprecated. Use the corresponding
  methods on the FigureManager if using pyplot, or GUI-specific methods if
  embedding.
- The *resize_callback* parameter to ``FigureCanvasTk`` was never used
  internally and is deprecated. Tk-level custom event handlers for resize
  events can be added to a ``FigureCanvasTk`` using e.g.
  ``get_tk_widget().bind('<Configure>', ..., True)``.
- The ``key_press`` and ``button_press`` methods of `.FigureManagerBase`, which
  incorrectly did nothing when using ``toolmanager``, are deprecated in favor
  of directly passing the event to the `.CallbackRegistry` via
  ``self.canvas.callbacks.process(event.name, event)``.
- ``RendererAgg.get_content_extents`` and
  ``RendererAgg.tostring_rgba_minimized`` are deprecated.
- ``backend_pgf.TmpDirCleaner`` is deprecated, with no replacement.
- ``GraphicsContextPS`` is deprecated. The PostScript backend now uses
  `.GraphicsContextBase`.

wx backend cleanups
~~~~~~~~~~~~~~~~~~~

The *origin* parameter to ``_FigureCanvasWxBase.gui_repaint`` is deprecated
with no replacement; ``gui_repaint`` now automatically detects the case where
it is used with the wx renderer.

The ``NavigationToolbar2Wx.get_canvas`` method is deprecated; directly
instantiate a canvas (``FigureCanvasWxAgg(frame, -1, figure)``) if needed.

Unused positional parameters to ``print_<fmt>`` methods are deprecated
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

None of the ``print_<fmt>`` methods implemented by canvas subclasses used
positional arguments other that the first (the output filename or file-like),
so these extra parameters are deprecated.

The *dpi* parameter of ``FigureCanvas.print_foo`` printers is deprecated
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The `~.Figure.savefig` machinery already took care of setting the figure DPI
to the desired value, so ``print_foo`` can directly read it from there. Not
passing *dpi* to ``print_foo`` allows clearer detection of unused parameters
passed to `~.Figure.savefig`.

Passing `bytes` to ``FT2Font.set_text``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

... is deprecated, pass `str` instead.

``ps.useafm`` deprecated for mathtext
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Outputting mathtext using only standard PostScript fonts has likely been broken
for a while (issue `#18722
<https://github.com/matplotlib/matplotlib/issues/18722>`_). In Matplotlib 3.5,
the setting :rc:`ps.useafm` will have no effect on mathtext.

``MathTextParser("bitmap")`` is deprecated
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The associated APIs ``MathtextBackendBitmap``, ``MathTextParser.to_mask``,
``MathTextParser.to_rgba``, ``MathTextParser.to_png``, and
``MathTextParser.get_depth`` are likewise deprecated.

To convert a text string to an image, either directly draw the text to an
empty `.Figure` and save the figure using a tight bbox, as demonstrated in
:doc:`/gallery/text_labels_and_annotations/mathtext_asarray`, or use
`.mathtext.math_to_image`.

When using `.math_to_image`, text color can be set with e.g.::

    with plt.rc_context({"text.color": "tab:blue"}):
        mathtext.math_to_image(text, filename)

and an RGBA array can be obtained with e.g.::

    from io import BytesIO
    buf = BytesIO()
    mathtext.math_to_image(text, buf, format="png")
    buf.seek(0)
    rgba = plt.imread(buf)

Deprecation of mathtext internals
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following API elements previously exposed by the :mod:`.mathtext` module
are considered to be implementation details and public access to them is
deprecated:

- ``Fonts`` and all its subclasses,
- ``FontConstantsBase`` and all its subclasses,
- ``Node`` and all its subclasses,
- ``Ship``, ``ship``,
- ``Error``,
- ``Parser``,
- ``SHRINK_FACTOR``, ``GROW_FACTOR``,
- ``NUM_SIZE_LEVELS``,
- ``latex_to_bakoma``, ``latex_to_cmex``, ``latex_to_standard``,
- ``stix_virtual_fonts``,
- ``tex2uni``.

Deprecation of various mathtext helpers
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The ``MathtextBackendPdf``, ``MathtextBackendPs``, ``MathtextBackendSvg``,
and ``MathtextBackendCairo`` classes from the :mod:`.mathtext` module, as
well as the corresponding ``.mathtext_parser`` attributes on ``RendererPdf``,
``RendererPS``, ``RendererSVG``, and ``RendererCairo``, are deprecated. The
``MathtextBackendPath`` class can be used to obtain a list of glyphs and
rectangles in a mathtext expression, and renderer-specific logic should be
directly implemented in the renderer.

``StandardPsFonts.pswriter`` is unused and deprecated.

Widget class internals
~~~~~~~~~~~~~~~~~~~~~~

Several `.widgets.Widget` class internals have been privatized and deprecated:

- ``AxesWidget.cids``
- ``Button.cnt`` and ``Button.observers``
- ``CheckButtons.cnt`` and ``CheckButtons.observers``
- ``RadioButtons.cnt`` and ``RadioButtons.observers``
- ``Slider.cnt`` and ``Slider.observers``
- ``TextBox.cnt``, ``TextBox.change_observers`` and
  ``TextBox.submit_observers``

3D properties on renderers
~~~~~~~~~~~~~~~~~~~~~~~~~~

The properties of the 3D Axes that were placed on the Renderer during draw are
now deprecated:

- ``renderer.M``
- ``renderer.eye``
- ``renderer.vvec``
- ``renderer.get_axis_position``

These attributes are all available via `.Axes3D`, which can be accessed via
``self.axes`` on all `.Artist`\s.

*renderer* argument of ``do_3d_projection`` method for ``Collection3D``/``Patch3D``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The *renderer* argument for the ``do_3d_projection`` method on ``Collection3D``
and ``Patch3D`` is no longer necessary, and passing it during draw is
deprecated.

*project* argument of ``draw`` method for ``Line3DCollection``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The *project* argument for the ``draw`` method on ``Line3DCollection`` is
deprecated. Call `.Line3DCollection.do_3d_projection` explicitly instead.

Extra positional parameters to ``plot_surface`` and ``plot_wireframe``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Positional parameters to `~.axes3d.Axes3D.plot_surface` and
`~.axes3d.Axes3D.plot_wireframe` other than ``X``, ``Y``, and ``Z`` are
deprecated. Pass additional artist properties as keyword arguments instead.

``ParasiteAxesAuxTransBase`` class
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The functionality of that mixin class has been moved to the base
``ParasiteAxesBase`` class. Thus, ``ParasiteAxesAuxTransBase``,
``ParasiteAxesAuxTrans``, and ``parasite_axes_auxtrans_class_factory`` are
deprecated.

In general, it is suggested to use ``HostAxes.get_aux_axes`` to create
parasite Axes, as this saves the need of manually appending the parasite
to ``host.parasites`` and makes sure that their ``remove()`` method works
properly.

``AxisArtist.ZORDER`` attribute
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Use ``AxisArtist.zorder`` instead.

``GridHelperBase`` invalidation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The ``GridHelperBase.invalidate``, ``GridHelperBase.valid``, and
``axislines.Axes.invalidate_grid_helper`` methods are considered internal
and deprecated.

``sphinext.plot_directive.align``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

... is deprecated. Use ``docutils.parsers.rst.directives.images.Image.align``
instead.

Deprecation-related functionality is considered internal
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The module ``matplotlib.cbook.deprecation`` is considered internal and will be
removed from the public API. This also holds for deprecation-related re-imports
in ``matplotlib.cbook``, i.e. ``matplotlib.cbook.deprecated()``,
``matplotlib.cbook.warn_deprecated()``,
``matplotlib.cbook.MatplotlibDeprecationWarning`` and
``matplotlib.cbook.mplDeprecation``.

If needed, external users may import ``MatplotlibDeprecationWarning`` directly
from the ``matplotlib`` namespace. ``mplDeprecation`` is only an alias of
``MatplotlibDeprecationWarning`` and should not be used anymore.
Development changes
-------------------

Matplotlib now requires numpy>=1.15
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Matplotlib now uses Pillow to save and read pngs
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The builtin png encoder and decoder has been removed, and Pillow is now a
dependency.  Note that when reading 16-bit RGB(A) images, Pillow truncates them
to 8-bit precision, whereas the old builtin decoder kept the full precision.

The deprecated wx backend (not wxagg!) now always uses wx's builtin jpeg and
tiff support rather than relying on Pillow for writing these formats; this
behavior is consistent with wx's png output.
Removals
--------
The following deprecated APIs have been removed:

Modules
~~~~~~~
- ``backends.qt_editor.formlayout`` (use the formlayout module available on
  PyPI instead).

Classes, methods and attributes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- ``artist.Artist.aname`` property (no replacement)

- ``axis.Axis.iter_ticks`` (no replacement)

- Support for custom backends that do not provide a
  ``backend_bases.GraphicsContextBase.set_hatch_color`` method
- ``backend_bases.RendererBase.strip_math()``
  (use ``cbook.strip_math()`` instead)

- ``backend_wx.debug_on_error()`` (no replacement)
- ``backend_wx.raise_msg_to_str()`` (no replacement)
- ``backend_wx.fake_stderr`` (no replacement)
- ``backend_wx.MenuButtonWx`` (no replacement)
- ``backend_wx.PrintoutWx`` (no replacement)
- ``_backend_tk.NavigationToolbar2Tk.set_active()`` (no replacement)

- ``backend_ps.PsBackendHelper.gs_exe`` property (no replacement)
- ``backend_ps.PsBackendHelper.gs_version`` property (no replacement)
- ``backend_ps.PsBackendHelper.supports_ps2write`` property (no replacement)
- ``backend_ps.RendererPS.afmfontd`` property (no replacement)
- ``backend_ps.GraphicsContextPS.shouldstroke`` property (no replacement)

- ``backend_gtk3.FileChooserDialog`` (no replacement)
- ``backend_gtk3.SaveFigureGTK3.get_filechooser()`` (no replacement)
- ``backend_gtk3.NavigationToolbar2GTK3.get_filechooser()`` (no replacement)

- ``backend_gtk3cairo.FigureManagerGTK3Cairo``
  (use ``backend_gtk3.FigureManagerGTK3`` instead)

- ``backend_pdf.RendererPdf.afm_font_cache`` property (no replacement)

- ``backend_pgf.LatexManagerFactory`` (no replacement)

- ``backend_qt5.NavigationToolbar2QT.buttons`` property (no replacement)
- ``backend_qt5.NavigationToolbar2QT.adj_window`` property (no replacement)

- ``bezier.find_r_to_boundary_of_closedpath()`` (no replacement)

- ``cbook.dedent()`` (use `inspect.cleandoc` instead)
- ``cbook.get_label()`` (no replacement)
- ``cbook.is_hashable()`` (use ``isinstance(..., collections.abc.Hashable)``
  instead)
- ``cbook.iterable()`` (use ``numpy.iterable()`` instead)
- ``cbook.safezip()`` (no replacement)

- ``colorbar.ColorbarBase.get_cmap`` (use ``ScalarMappable.get_cmap`` instead)
- ``colorbar.ColorbarBase.set_cmap`` (use ``ScalarMappable.set_cmap`` instead)
- ``colorbar.ColorbarBase.get_clim`` (use ``ScalarMappable.get_clim`` instead)
- ``colorbar.ColorbarBase.set_clim`` (use ``ScalarMappable.set_clim`` instead)
- ``colorbar.ColorbarBase.set_norm`` (use ``ScalarMappable.set_norm`` instead)

- ``dates.seconds()`` (no replacement)
- ``dates.minutes()`` (no replacement)
- ``dates.hours()`` (no replacement)
- ``dates.weeks()`` (no replacement)
- ``dates.strpdate2num`` and ``dates.bytespdate2num`` (use `time.strptime` or
  `dateutil.parser.parse` or `.dates.datestr2num` instead)

- ``docstring.Appender`` (no replacement)
- ``docstring.dedent()`` (use `inspect.getdoc` instead)
- ``docstring.copy_dedent()``
  (use ``docstring.copy()`` and `inspect.getdoc` instead)

- ``font_manager.OSXInstalledFonts()`` (no replacement)

- ``image.BboxImage.interp_at_native`` property (no replacement)

- ``lines.Line2D.verticalOffset`` property (no replacement)

- ``matplotlib.checkdep_dvipng`` (no replacement)
- ``matplotlib.checkdep_ghostscript`` (no replacement)
- ``matplotlib.checkdep_pdftops`` (no replacement)
- ``matplotlib.checkdep_inkscape`` (no replacement)
- ``matplotlib.get_py2exe_datafiles`` (no replacement)
- ``matplotlib.tk_window_focus`` (use ``rcParams['tk.window_focus']`` instead)

- ``mlab.demean()`` (use ``mlab.detrend_mean()`` instead)

- ``path.get_paths_extents()``
  (use ``path.get_path_collection_extents()`` instead)
- ``path.Path.has_nonfinite()`` (use ``not np.isfinite(self.vertices).all()``
  instead)

- ``projections.process_projection_requirements()`` (no replacement)

- ``pyplot.plotfile()`` (Instead, load the data using
  `pandas.read_csv` or `numpy.loadtxt` or similar and use regular pyplot
  functions to plot the loaded data.)

- ``quiver.Quiver.color()`` (use ``Quiver.get_facecolor()`` instead)
- ``quiver.Quiver.keyvec`` property (no replacement)
- ``quiver.Quiver.keytext`` property (no replacement)

- ``rcsetup.validate_qt4()`` (no replacement)
- ``rcsetup.validate_qt5()`` (no replacement)
- ``rcsetup.validate_verbose()`` (no replacement)
- ``rcsetup.ValidateInterval`` (no replacement)

- ``scale.LogTransformBase`` (use ``scale.LogTransform`` instead)
- ``scale.InvertedLogTransformBase`` (use ``scale.InvertedLogTransform`` instead)
- ``scale.Log10Transform`` (use ``scale.LogTransform`` instead)
- ``scale.InvertedLog10Transform`` (use ``scale.InvertedLogTransform`` instead)
- ``scale.Log2Transform`` (use ``scale.LogTransform`` instead)
- ``scale.InvertedLog2Transform`` (use ``scale.InvertedLogTransform`` instead)
- ``scale.NaturalLogTransform`` (use ``scale.LogTransform`` instead)
- ``scale.InvertedNaturalLogTransform`` (use ``scale.InvertedLogTransform`` instead)
- ``scale.get_scale_docs()`` (no replacement)

- ``sphinxext.plot_directive.plot_directive()``
  (use the class ``PlotDirective`` instead)
- ``sphinxext.mathmpl.math_directive()``
  (use the class ``MathDirective`` instead)

- ``spines.Spine.is_frame_like()`` (no replacement)

- ``testing.decorators.switch_backend()`` (use ``@pytest.mark.backend``
  decorator instead)

- ``text.Text.is_math_text()`` (use ``cbook.is_math_text()`` instead)
- ``text.TextWithDash()`` (use ``text.Annotation`` instead)
- ``textpath.TextPath.is_math_text()`` (use ``cbook.is_math_text()`` instead)
- ``textpath.TextPath.text_get_vertices_codes()``
  (use ``textpath.text_to_path.get_text_path()`` instead)

- ``textpath.TextToPath.glyph_to_path()`` (use ``font.get_path()`` and manual
  translation of the vertices instead)

- ``ticker.OldScalarFormatter.pprint_val()`` (no replacement)
- ``ticker.ScalarFormatter.pprint_val()`` (no replacement)
- ``ticker.LogFormatter.pprint_val()`` (no replacement)
- ``ticker.decade_down()`` (no replacement)
- ``ticker.decade_up()`` (no replacement)
- ``Tick`` properties ``gridOn``, ``tick1On``, ``tick2On``, ``label1On``,
  ``label2On`` (use ``set_visible()`` / ``get_visible()`` on ``Tick.gridline``,
  ``Tick.tick1line``, ``Tick.tick2line``, ``Tick.label1``,  ``Tick.label2``
  instead)

- ``widgets.SpanSelector.buttonDown`` property (no replacement)

- ``mplot3d.proj3d.line2d()`` (no replacement)
- ``mplot3d.proj3d.line2d_dist()`` (no replacement)
- ``mplot3d.proj3d.line2d_seg_dist()`` (no replacement)
- ``mplot3d.proj3d.mod()`` (use `numpy.linalg.norm` instead)
- ``mplot3d.proj3d.proj_transform_vec()`` (no replacement)
- ``mplot3d.proj3d.proj_transform_vec_clip()`` (no replacement)
- ``mplot3d.proj3d.vec_pad_ones()`` (no replacement)
- ``mplot3d.proj3d.proj_trans_clip_points()`` (no replacement)

- ``mplot3d.art3d.norm_angle()`` (no replacement)
- ``mplot3d.art3d.norm_text_angle()`` (no replacement)
- ``mplot3d.art3d.path_to_3d_segment()`` (no replacement)
- ``mplot3d.art3d.paths_to_3d_segments()`` (no replacement)
- ``mplot3d.art3d.path_to_3d_segment_with_codes()`` (no replacement)
- ``mplot3d.art3d.paths_to_3d_segments_with_codes()`` (no replacement)
- ``mplot3d.art3d.get_patch_verts()`` (no replacement)
- ``mplot3d.art3d.get_colors()`` (no replacement)
- ``mplot3d.art3d.zalpha()`` (no replacement)

- ``mplot3d.axis3d.get_flip_min_max()`` (no replacement)
- ``mplot3d.axis3d.Axis.get_tick_positions()`` (no replacement)

- ``axisartist.axis_artist.UnimplementedException`` (no replacement)
- ``axisartist.axislines.SimpleChainedObjects``
  (use ``axis_grid1.mpl_axes.SimpleChainedObjects`` instead)
- ``axisartist.axislines.Axes.AxisDict``
  (use ``axis_grid1.mpl_axes.Axes.AxisDict`` instead)

Arguments
~~~~~~~~~
- ``Axes.text()`` / ``pyplot.text()`` do not support the parameter ``withdash``
  anymore. Use ``Axes.annotate()`` and ``pyplot.annotate()`` instead.
- The first parameter of `matplotlib.use` has been renamed from ``arg`` to
  ``backend`` (only relevant if you pass by keyword).
- The parameter ``warn`` of `matplotlib.use` has been removed. A failure to
  switch the backend will now always raise an ``ImportError`` if ``force`` is
  set; catch that error if necessary.
- All parameters of `matplotlib.use` except the first one are now keyword-only.
- The unused parameters ``shape`` and ``imlim`` of `~.axes.Axes.imshow()` are
  now removed. All parameters beyond ``extent`` are now keyword-only.
- The unused parameter ``interp_at_native`` of `.BboxImage` has been removed.
- The parameter ``usetex`` of `.TextToPath.get_text_path` has been removed.
  Use ``ismath='TeX'`` instead.
- The parameter ``block`` of ``show()`` is now keyword-only, and arbitrary
  arguments or keyword arguments are no longer accepted.
- The parameter ``frameon`` of `.Figure.savefig` has been removed.  Use
  ``facecolor="none"`` to get a transparent background.
- Passing a ``wx.EvtHandler`` as the first argument to ``backend_wx.TimerWx``
  is not supported anymore; the signature of ``TimerWx`` is now consistent with
  `.TimerBase`.
- The ``manage_xticks`` parameter of `~.Axes.boxplot` and `~.Axes.bxp` has been
  renamed to ``manage_ticks``.
- The ``normed`` parameter of `~.Axes.hist2d` has been renamed to ``density``.
- The ``s`` parameter of `.Annotation` has been renamed to ``text``.
- For all functions in `.bezier` that supported a ``tolerence`` parameter, this
  parameter has been renamed to ``tolerance``.
- ``axis("normal")`` is not supported anymore. Use the equivalent
  ``axis("auto")`` instead.
- ``axis()`` does not accept arbitrary keyword arguments anymore.
- ``Axis.set_ticklabels()`` does not accept arbitrary positional arguments
  other than ``ticklabels``.
- ``mpl_toolkits.mplot3d.art3d.Poly3DCollection.set_zsort`` does not accept
  the value ``True`` anymore. Pass the equivalent value 'average' instead.
- `.AnchoredText` no longer accepts ``horizontalalignment`` or
  ``verticalalignment`` keyword arguments.
- `.ConnectionPatch` no longer accepts the ``arrow_transmuter`` and
  ``connector`` keyword arguments, which did nothing since 3.0.
- `.FancyArrowPatch` no longer accepts the ``arrow_transmuter`` and
  ``connector`` keyword arguments, which did nothing since 3.0.
- `.TextPath` no longer accepts arbitrary positional or keyword arguments.
- `.MaxNLocator.set_params()` no longer accepts arbitrary keyword arguments.
- `~.Axes.pie` no longer accepts and squeezes non-1D inputs; pass 1D input to
  the ``x`` argument.
- Passing (n, 1)-shaped error arrays to `.Axes.errorbar()` is no longer
  supported; pass a 1D array instead.

rcParams
~~~~~~~~
- The ``text.latex.unicode`` rcParam has been removed, with no replacement.
  Matplotlib now always supports unicode in usetex.
- The ``savefig.frameon`` rcParam has been removed.  Set
  :rc:`savefig.facecolor` to "none" to get a transparent background.
- The ``pgf.debug``, ``verbose.fileo`` and ``verbose.verbose.level`` rcParams,
  which had no effect, have been removed.
- Support for setting :rc:`mathtext.default` to "circled" has been removed.

Environment variables
~~~~~~~~~~~~~~~~~~~~~
- ``MATPLOTLIBDATA`` (no replacement).

mathtext
~~~~~~~~
- The ``\stackrel`` command (which behaved differently from its LaTeX version)
  has been removed.  Use ``\genfrac`` instead.
- The ``\mathcircled`` command has been removed.  Directly use Unicode
  characters, such as ``'\N{CIRCLED LATIN CAPITAL LETTER A}'``, instead.
Behaviour changes
-----------------

``Formatter.fix_minus``
~~~~~~~~~~~~~~~~~~~~~~~
`.Formatter.fix_minus` now performs hyphen-to-unicode-minus replacement
whenever :rc:`axes.unicode_minus` is True; i.e. its behavior matches the one
of ``ScalarFormatter.fix_minus`` (`.ScalarFormatter` now just inherits that
implementation).

This replacement is now used by the ``format_data_short`` method of the various
builtin formatter classes, which affects the cursor value in the GUI toolbars.

``FigureCanvasBase`` now always has a ``manager`` attribute, which may be None
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Previously, it did not necessarily have such an attribute.  A check for
``hasattr(figure.canvas, "manager")`` should now be replaced by
``figure.canvas.manager is not None`` (or ``getattr(figure.canvas, "manager", None) is not None``
for back-compatibility).

`.cbook.CallbackRegistry` now propagates exceptions when no GUI event loop is running
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
`.cbook.CallbackRegistry` now defaults to propagating exceptions thrown by
callbacks when no interactive GUI event loop is running.  If a GUI event loop
*is* running, `.cbook.CallbackRegistry` still defaults to just printing a
traceback, as unhandled exceptions can make the program completely ``abort()``
in that case.

``Axes.locator_params()`` validates ``axis`` parameter
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
`.axes.Axes.locator_params` used to accept any value for ``axis`` and silently
did nothing, when passed an unsupported value. It now raises a ``ValueError``.

``Axis.set_tick_params()`` validates ``which`` parameter
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
`.Axis.set_tick_params` (and the higher level `.axes.Axes.tick_params` and
`.pyplot.tick_params`) used to accept any value for ``which`` and silently
did nothing, when passed an unsupported value. It now raises a ``ValueError``.

``Axis.set_ticklabels()`` must match ``FixedLocator.locs``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
If an axis is using a `.ticker.FixedLocator`, typically set by a call to
`.Axis.set_ticks`, then the number of ticklabels supplied must match the
number of locations available (``FixedFormattor.locs``).  If not, a
``ValueError`` is raised.

``backend_pgf.LatexManager.latex``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
``backend_pgf.LatexManager.latex`` is now created with ``encoding="utf-8"``, so
its ``stdin``, ``stdout``, and ``stderr`` attributes are utf8-encoded.

``pyplot.xticks()`` and ``pyplot.yticks()``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Previously, passing labels without passing the ticks to either `.pyplot.xticks`
and `.pyplot.yticks` would result in

    TypeError: object of type 'NoneType' has no len()

It now raises a ``TypeError`` with a proper description of the error.

Setting the same property under multiple aliases now raises a TypeError
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Previously, calling e.g. ``plot(..., color=somecolor, c=othercolor)`` would
emit a warning because ``color`` and ``c`` actually map to the same Artist
property.  This now raises a TypeError.

`.FileMovieWriter` temporary frames directory
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
`.FileMovieWriter` now defaults to writing temporary frames in a temporary
directory, which is always cleared at exit.  In order to keep the individual
frames saved on the filesystem, pass an explicit *frame_prefix*.

`.Axes.plot` no longer accepts *x* and *y* being both 2D and with different numbers of columns
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Previously, calling `.Axes.plot` e.g. with *x* of shape ``(n, 3)`` and *y* of
shape ``(n, 2)`` would plot the first column of *x* against the first column
of *y*, the second column of *x* against the second column of *y*, **and** the
first column of *x* against the third column of *y*.  This now raises an error
instead.

`.Text.update_from` now copies usetex state from the source Text
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`~.Axes.stem` now defaults to ``use_line_collection=True``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This creates the stem plot as a `.LineCollection` rather than individual
`.Line2D` objects, greatly improving performance.

rcParams color validator is now stricter
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Previously, rcParams entries whose values were color-like accepted "spurious"
extra letters or characters in the "middle" of the string, e.g. ``"(0, 1a, '0.5')"``
would be interpreted as ``(0, 1, 0.5)``.  These extra characters (including the
internal quotes) now cause a ValueError to be raised.

`.SymLogNorm` now has a *base* parameter
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Previously, `.SymLogNorm` had no *base* keyword argument, and
defaulted to ``base=np.e`` whereas the documentation said it was
``base=10``.  In preparation to make the default 10, calling
`.SymLogNorm` without the new *base* keyword argument emits a
deprecation warning.


`~.Axes.errorbar` now color cycles when only errorbar color is set
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Previously setting the *ecolor* would turn off automatic color cycling for the plot, leading to the
the lines and markers defaulting to whatever the first color in the color cycle was in the case of
multiple plot calls.

`.rcsetup.validate_color_for_prop_cycle` now always raises TypeError for bytes input
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
It previously raised `TypeError`, **except** when the input was of the form
``b"C[number]"`` in which case it raised a ValueError.

`.FigureCanvasPS.print_ps` and `.FigureCanvasPS.print_eps` no longer apply edgecolor and facecolor
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

These methods now assume that the figure edge and facecolor have been correctly
applied by `.FigureCanvasBase.print_figure`, as they are normally called
through it.

This behavior is consistent with other figure saving methods
(`.FigureCanvasAgg.print_png`, `.FigureCanvasPdf.print_pdf`,
`.FigureCanvasSVG.print_svg`).

`.pyplot.subplot()` now raises TypeError when given an incorrect number of arguments
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This is consistent with other signature mismatch errors.  Previously a
ValueError was raised.

Shortcut for closing all figures
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Shortcuts for closing all figures now also work for the classic toolbar.
There is no default shortcut any more because unintentionally closing all figures by a key press
might happen too easily. You can configure the shortcut yourself
using :rc:`keymap.quit_all`.

Autoscale for arrow
~~~~~~~~~~~~~~~~~~~
Calling ax.arrow() will now autoscale the axes.

``set_tick_params(label1On=False)`` now also makes the offset text (if any) invisible
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... because the offset text can rarely be interpreted without tick labels
anyways.

`.Axes.annotate` and `.pyplot.annotate` parameter name changed
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The parameter ``s`` to `.Axes.annotate` and  `.pyplot.annotate` is renamed to
``text``, matching `.Annotation`.

The old parameter name remains supported, but
support for it will be dropped in a future Matplotlib release.

`.font_manager.json_dump` now locks the font manager dump file
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... to prevent multiple processes from writing to it at the same time.

`.pyplot.rgrids` and `.pyplot.thetagrids` now act as setters also when called with only kwargs
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Previously, keyword arguments were silently ignored when no positional
arguments were given.

`.Axis.get_minorticklabels` and `.Axis.get_majorticklabels` now returns plain list
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Previously, `.Axis.get_minorticklabels` and `.Axis.get_majorticklabels` returns
silent_list. Their return type is now changed to normal list.
`.get_xminorticklabels`, `.get_yminorticklabels`, `.get_zminorticklabels`,
`.Axis.get_ticklabels`, `.get_xmajorticklabels`, `.get_ymajorticklabels` and
`.get_zmajorticklabels` methods will be affected by this change.

Default slider formatter
~~~~~~~~~~~~~~~~~~~~~~~~
The default method used to format `.Slider` values has been changed to use a
`.ScalarFormatter` adapted the slider values limits.  This should ensure that
values are displayed with an appropriate number of significant digits even if
they are much smaller or much bigger than 1.  To restore the old behavior,
explicitly pass a "%1.2f" as the *valfmt* parameter to `.Slider`.

Add *normalize*  keyword argument to ``Axes.pie``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
``pie()`` used to draw a partial pie if the sum of the values was < 1. This behavior
is deprecated and will change to always normalizing the values to a full pie by default.
If you want to draw a partial pie, please pass ``normalize=False`` explicitly.

``table.CustomCell`` is now an alias for `.table.Cell`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
All the functionality of ``CustomCell`` has been moved to its base class
`~.table.Cell`.

wx Timer interval
~~~~~~~~~~~~~~~~~
Setting the timer interval on a not-yet-started ``TimerWx`` won't start it
anymore.

"step"-type histograms default to the zorder of `.Line2D`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This ensures that they go above gridlines by default.  The old ``zorder`` can
be kept by passing it as a keyword argument to `.Axes.hist`.

`.Legend` and `.OffsetBox` visibility
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
`.Legend` and `.OffsetBox` subclasses (`.PaddedBox`, `.AnchoredOffsetbox`, and
`.AnnotationBbox`) no longer directly keep track of the visibility of their
underlying `.Patch` artist, but instead pass that flag down to the `.Patch`.

`.Legend` and `.Table` no longer allow invalid locations
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This affects legends produced on an Axes (`.Axes.legend` and `.pyplot.legend`)
and on a Figure (`.Figure.legend` and `.pyplot.figlegend`).  Figure legends also
no longer accept the unsupported ``'best'`` location.  Previously, invalid Axes
locations would use ``'best'`` and invalid Figure locations would used ``'upper
right'``.

Passing Line2D's *drawstyle* together with *linestyle* is removed
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Instead of ``plt.plot(..., linestyle="steps--")``, use ``plt.plot(...,
linestyle="--", drawstyle="steps")``. ``ds`` is also an alias for
``drawstyle``.

Upper case color strings
~~~~~~~~~~~~~~~~~~~~~~~~

Support for passing single-letter colors (one of "rgbcmykw") as UPPERCASE
characters is removed; these colors are now case-sensitive (lowercase).

tight/constrained_layout no longer worry about titles that are too wide
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

*tight_layout* and *constrained_layout* shrink axes to accommodate
"decorations" on the axes.  However, if an xlabel or title is too long in the
x direction, making the axes smaller in the x-direction doesn't help.  The
behavior of both has been changed to ignore the width of the title and
xlabel and the height of the ylabel in the layout logic.

This also means there is a new keyword argument for `.axes.Axes.get_tightbbox`
and `.axis.Axis.get_tightbbox`: ``for_layout_only``, which defaults to *False*,
but if *True* returns a bounding box using the rules above.

:rc:`savefig.facecolor` and :rc:`savefig.edgecolor` now default to "auto"
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

This newly allowed value for :rc:`savefig.facecolor` and :rc:`savefig.edgecolor`,
as well as the *facecolor* and *edgecolor* parameters to `.Figure.savefig`, means
"use whatever facecolor and edgecolor the figure current has".

When using a single dataset, `.Axes.hist` no longer wraps the added artist in a `.silent_list`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

When `.Axes.hist` is called with a single dataset, it adds to the axes either
a `.BarContainer` object (when ``histtype="bar"`` or ``"barstacked"``), or a
`.Polygon` object (when ``histype="step"`` or ``"stepfilled"``) -- the latter
being wrapped in a list-of-one-element.  Previously, either artist would be
wrapped in a `.silent_list`.  This is no longer the case: the `.BarContainer` is
now returned as is (this is an API breaking change if you were directly relying
on the concrete `list` API; however, `.BarContainer` inherits from `tuple` so
most common operations remain available), and the list-of-one `.Polygon` is
returned as is.  This makes the `repr` of the returned artist more accurate: it
is now ::

    <BarContainer object of 10 artists>  # "bar", "barstacked"
    [<matplotlib.patches.Polygon object at 0xdeadbeef>]  # "step", "stepfilled"

instead of ::

    <a list of 10 Patch objects>  # "bar", "barstacked"
    <a list of 1 Patch objects>  # "step", "stepfilled"

When `.Axes.hist` is called with multiple artists, it still wraps its return
value in a `.silent_list`, but uses more accurate type information ::

    <a list of 3 BarContainer objects>  # "bar", "barstacked"
    <a list of 3 List[Polygon] objects>  # "step", "stepfilled"

instead of ::

    <a list of 3 Lists of Patches objects>  # "bar", "barstacked"
    <a list of 3 Lists of Patches objects>  # "step", "stepfilled"

Qt and wx backends no longer create a status bar by default
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The coordinates information is now displayed in the toolbar, consistently with
the other backends.  This is intended to simplify embedding of Matplotlib in
larger GUIs, where Matplotlib may control the toolbar but not the status bar.

:rc:`text.hinting` now supports names mapping to FreeType flags
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
:rc:`text.hinting` now supports the values "default", "no_autohint",
"force_autohint", and "no_hinting", which directly map to the FreeType flags
FT_LOAD_DEFAULT, etc.  The old synonyms (respectively "either", "native",
"auto", and "none") are still supported, but their use is discouraged.  To get
normalized values, use `.backend_agg.get_hinting_flag`, which returns integer
flag values.

`.cbook.get_sample_data` auto-loads numpy arrays
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When `.cbook.get_sample_data` is used to load a npy or npz file and the
keyword-only parameter ``np_load`` is True, the file is automatically loaded
using `numpy.load`.  ``np_load`` defaults to False for backwards compatibility,
but will become True in a later release.

``get_text_width_height_descent`` now checks ``ismath`` rather than :rc:`text.usetex`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... to determine whether a string should be passed to the usetex machinery or
not.  This allows single strings to be marked as not-usetex even when the
rcParam is True.

`.Axes.vlines`, `.Axes.hlines`, `.pyplot.vlines` and `.pyplot.hlines` *colors* parameter default change
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The *colors* parameter will now default to :rc:`lines.color`, while previously it defaulted to 'k'.

Aggressively autoscale clim in ``ScalerMappable`` classes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


Previously some plotting methods would defer autoscaling until the
first draw if only one of the *vmin* or *vmax* keyword arguments were
passed (`.Axes.scatter`, `.Axes.hexbin`, `.Axes.imshow`,
`.Axes.pcolorfast`) but would scale based on the passed data if
neither was passed (independent of the *norm* keyword arguments).
Other methods (`.Axes.pcolor`, `.Axes.pcolormesh`) always autoscaled
base on the initial data.

All of the plotting methods now resolve the unset *vmin* or *vmax*
at the initial call time using the data passed in.

If you were relying on exactly one of the *vmin* or *vmax* remaining
unset between the time when the method is called and the first time
the figure is rendered you get back the old behavior by manually setting
the relevant limit back to `None` ::

  cm_obj.norm.vmin = None
  # or
  cm_obj.norm.vmax = None

which will be resolved during the draw process.
Deprecations
------------

``figure.add_axes()`` without arguments
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Calling ``fig.add_axes()`` with no arguments currently does nothing. This call
will raise an error in the future. Adding a free-floating axes needs a position
rectangle. If you want a figure-filling single axes, use ``add_subplot()``
instead.

``backend_wx.DEBUG_MSG``
~~~~~~~~~~~~~~~~~~~~~~~~
``backend_wx.DEBUG_MSG`` is deprecated.  The wx backends now use regular
logging.

``Colorbar.config_axis()``
~~~~~~~~~~~~~~~~~~~~~~~~~~
``Colorbar.config_axis()`` is considered internal. Its use is deprecated.

``NonUniformImage.is_grayscale`` and ``PcolorImage.is_grayscale``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
These attributes are deprecated, for consistency with ``AxesImage.is_grayscale``,
which was removed back in Matplotlib 2.0.0.  (Note that previously, these
attributes were only available *after rendering the image*).

``den`` parameter and attribute to :mod:`mpl_toolkits.axisartist.angle_helper`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
For all locator classes defined in :mod:`mpl_toolkits.axisartist.angle_helper`,
the ``den`` parameter has been renamed to ``nbins``, and the ``den`` attribute
deprecated in favor of its (preexisting) synonym ``nbins``, for consistency
with locator classes defined in :mod:`matplotlib.ticker`.

``backend_pgf.LatexManager.latex_stdin_utf8``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
``backend_pgf.LatexManager.latex`` is now created with ``encoding="utf-8"``, so
its ``stdin`` attribute is already utf8-encoded; the ``latex_stdin_utf8``
attribute is thus deprecated.

Flags containing "U" passed to `.cbook.to_filehandle` and `.cbook.open_file_cm`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Please remove "U" from flags passed to `.cbook.to_filehandle` and
`.cbook.open_file_cm`.  This is consistent with their removal from `open` in
Python 3.9.

PDF and PS character tracking internals
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The ``used_characters`` attribute and ``track_characters`` and
``merge_used_characters`` methods of `.RendererPdf`, `.PdfFile`, and
`.RendererPS` are deprecated.

Case-insensitive capstyles and joinstyles
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Please pass capstyles ("miter", "round", "bevel") and joinstyles ("butt",
"round", "projecting") as lowercase.

Passing raw data to ``register_cmap()``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Passing raw data via parameters *data* and *lut* to `.register_cmap()` is
deprecated. Instead, explicitly create a `.LinearSegmentedColormap` and pass
it via the *cmap* parameter:
``register_cmap(cmap=LinearSegmentedColormap(name, data, lut))``.

``DateFormatter.illegal_s``
~~~~~~~~~~~~~~~~~~~~~~~~~~~
This attribute is unused and deprecated.

``widgets.TextBox.params_to_disable``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This attribute is deprecated.

Revert deprecation \*min, \*max keyword arguments to ``set_x/y/zlim_3d()``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
These keyword arguments  were deprecated in 3.0, alongside with the respective
parameters in ``set_xlim()`` / ``set_ylim()``. The deprecations of the 2D
versions were already reverted in 3.1.

``cbook.local_over_kwdict``
~~~~~~~~~~~~~~~~~~~~~~~~~~~
This function is deprecated.  Use `.cbook.normalize_kwargs` instead.

Passing both singular and plural *colors*, *linewidths*, *linestyles* to `.Axes.eventplot`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Passing e.g. both *linewidth* and *linewidths* will raise a TypeError in the
future.

Setting :rc:`text.latex.preamble` or :rc:`pdf.preamble` to non-strings
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
These rcParams should be set to string values.  Support for None (meaning the
empty string) and lists of strings (implicitly joined with newlines) is
deprecated.

Parameters *norm* and *vmin*/*vmax* should not be used simultaneously
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Passing parameters *norm* and *vmin*/*vmax* simultaneously to functions using
colormapping such as ``scatter()`` and ``imshow()`` is deprecated.
Instead of ``norm=LogNorm(), vmin=min_val, vmax=max_val`` pass
``norm=LogNorm(min_val, max_val)``. *vmin* and *vmax* should only be used
without setting *norm*.

Effectless parameters of `.Figure.colorbar` and `matplotlib.colorbar.Colorbar`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The *cmap* and *norm* parameters of `.Figure.colorbar` and
`matplotlib.colorbar.Colorbar` have no effect because they are always
overridden by the mappable's colormap and norm; they are thus deprecated.
Likewise, passing the *alpha*, *boundaries*, *values*, *extend*, or *filled*
parameters with a `.ContourSet` mappable, or the *alpha* parameter with an
`.Artist` mappable, is deprecated, as the mappable would likewise override
them.

``args_key`` and ``exec_key`` attributes of builtin `.MovieWriter`\s
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
These attributes are deprecated.

Unused parameters
~~~~~~~~~~~~~~~~~
The following parameters do not have any effect and are deprecated:

- arbitrary keyword arguments to ``StreamplotSet``
- parameter *quantize* of `.Path.cleaned()`
- parameter *s* of `.AnnotationBbox.get_fontsize()`
- parameter *label* of `.Tick`

Passing *props* to `.Shadow`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The parameter *props* of `.Shadow` is deprecated. Use keyword arguments
instead.

``Axes.update_datalim_bounds``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This method is deprecated.  Use
``ax.dataLim.set(Bbox.union([ax.dataLim, bounds]))`` instead.

``{,Symmetrical}LogScale.{,Inverted}LogTransform``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
``LogScale.LogTransform``, ``LogScale.InvertedLogTransform``,
``SymmetricalScale.SymmetricalTransform`` and
``SymmetricalScale.InvertedSymmetricalTransform`` are deprecated.  Directly
access the transform classes from the :mod:`.scale` module.

``TexManager.cachedir``, ``TexManager.rgba_arrayd``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Use `matplotlib.get_cachedir()` instead for the former; there is no replacement
for the latter.

Setting `.Line2D`\'s pickradius via `.Line2D.set_picker`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Setting a `.Line2D`\'s pickradius (i.e. the tolerance for pick events
and containment checks) via `.Line2D.set_picker` is deprecated.  Use
`.Line2D.set_pickradius` instead.

`.Line2D.set_picker` no longer sets the artist's custom-contain() check.

``Artist.set_contains``, ``Artist.get_contains``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Setting a custom method overriding `.Artist.contains` is deprecated.
There is no replacement, but you may still customize pick events using
`.Artist.set_picker`.

`~matplotlib.colorbar.Colorbar` methods
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The ``on_mappable_changed`` and ``update_bruteforce`` methods of
`~matplotlib.colorbar.Colorbar` are deprecated; both can be replaced by calls
to `~matplotlib.colorbar.Colorbar.update_normal`.

``OldScalarFormatter``, ``IndexFormatter`` and ``IndexDateFormatter``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
These formatters are deprecated.  Their functionality can be implemented using
e.g. `.FuncFormatter`.

``OldAutoLocator``
~~~~~~~~~~~~~~~~~~
This ticker is deprecated.

*required*, *forbidden* and *allowed* parameters of `.cbook.normalize_kwargs`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
These parameters are deprecated.

The ``TTFPATH`` and ``AFMPATH`` environment variables
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Support for the (undocumented) ``TTFPATH`` and ``AFMPATH`` environment
variables is deprecated.  Additional fonts may be registered using
``matplotlib.font_manager.fontManager.addfont()``.

``matplotlib.compat``
~~~~~~~~~~~~~~~~~~~~~
This module is deprecated.

``matplotlib.backends.qt_editor.formsubplottool``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This module is deprecated.  Use ``matplotlib.backends.backend_qt5.SubplotToolQt``
instead.

AVConv animation writer deprecated
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The ``AVConvBase``, ``AVConvWriter`` and ``AVConvFileWriter`` classes, and the
associated ``animation.avconv_path`` and ``animation.avconv_args`` rcParams are
deprecated.

Debian 8 (2015, EOL 06/2020) and Ubuntu 14.04 (EOL 04/2019) were the
last versions of Debian and Ubuntu to ship avconv.  It remains possible
to force the use of avconv by using the ffmpeg-based writers with
:rc:`animation.ffmpeg_path` set to "avconv".

log/symlog scale base, ticks, and nonpos specification
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
`~.Axes.semilogx`, `~.Axes.semilogy`, `~.Axes.loglog`, `.LogScale`, and
`.SymmetricalLogScale` used to take keyword arguments that depends on the axis
orientation ("basex" vs "basey", "subsx" vs "subsy", "nonposx" vs "nonposy");
these parameter names are now deprecated in favor of "base", "subs",
"nonpositive".  This deprecation also affects e.g. ``ax.set_yscale("log",
basey=...)`` which must now be spelled ``ax.set_yscale("log", base=...)``.

The change from "nonpos" to "nonpositive" also affects `~.scale.LogTransform`,
`~.scale.InvertedLogTransform`, `~.scale.SymmetricalLogTransform`, etc.

To use *different* bases for the x-axis and y-axis of a `~.Axes.loglog` plot,
use e.g. ``ax.set_xscale("log", base=10); ax.set_yscale("log", base=2)``.

``DraggableBase.artist_picker``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This method is deprecated.  If you previously reimplemented it in a subclass,
set the artist's picker instead with `.Artist.set_picker`.

*clear_temp* parameter and attribute of `.FileMovieWriter`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The *clear_temp* parameter and attribute of `.FileMovieWriter` is
deprecated.  In the future, files placed in a temporary directory (using
``frame_prefix=None``, the default) will be cleared; files placed elsewhere
will not.

Deprecated rcParams validators
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The following validators, defined in `.rcsetup`, are deprecated:
``validate_fontset``, ``validate_mathtext_default``, ``validate_alignment``,
``validate_svg_fontset``, ``validate_pgf_texsystem``,
``validate_movie_frame_fmt``, ``validate_axis_locator``,
``validate_movie_html_fmt``, ``validate_grid_axis``,
``validate_axes_titlelocation``, ``validate_toolbar``,
``validate_ps_papersize``, ``validate_legend_loc``,
``validate_bool_maybe_none``, ``validate_hinting``,
``validate_movie_writer``, ``validate_webagg_address``,
``validate_nseq_float``, ``validate_nseq_int``.
To test whether an rcParam value would be acceptable, one can test e.g. ``rc =
RcParams(); rc[k] = v`` raises an exception.

Stricter rcParam validation
~~~~~~~~~~~~~~~~~~~~~~~~~~~
:rc:`axes.axisbelow` currently normalizes all strings starting with "line"
(case-insensitive) to the option "line".  This is deprecated; in a future
version only the exact string "line" (case-sensitive) will be supported.

``add_subplot()`` validates its inputs
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In particular, for ``add_subplot(rows, cols, index)``, all parameters must
be integral. Previously strings and floats were accepted and converted to
int. This will now emit a deprecation warning.

Toggling axes navigation from the keyboard using "a" and digit keys
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Axes navigation can still be toggled programmatically using
`.Axes.set_navigate`.

The following related APIs are also deprecated:
``backend_tools.ToolEnableAllNavigation``,
``backend_tools.ToolEnableNavigation``, and ``rcParams["keymap.all_axes"]``.

``matplotlib.test(recursionlimit=...)``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The *recursionlimit* parameter of ``matplotlib.test`` is deprecated.

mathtext glues
~~~~~~~~~~~~~~
The *copy* parameter of ``mathtext.Glue`` is deprecated (the underlying glue
spec is now immutable).  ``mathtext.GlueSpec`` is deprecated.

Signatures of `.Artist.draw` and `.Axes.draw`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The *inframe* parameter to `.Axes.draw` is deprecated.  Use
`.Axes.redraw_in_frame` instead.

Not passing the *renderer* parameter to `.Axes.draw` is deprecated.  Use
``axes.draw_artist(axes)`` instead.

These changes make the signature of the ``draw`` (``artist.draw(renderer)``)
method consistent across all artists; thus, additional parameters to
`.Artist.draw` are deprecated.

``DraggableBase.on_motion_blit``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This method is deprecated.  `.DraggableBase.on_motion` now handles both the
blitting and the non-blitting cases.

Passing the dash offset as None
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Fine control of dash patterns can be achieved by passing an ``(offset,
(on-length, off-length, on-length, off-length, ...))`` pair as the linestyle
property of `.Line2D` and `.LineCollection`.  Previously, certain APIs would
accept ``offset = None`` as a synonym for ``offset = 0``, but this was never
universally implemented, e.g. for vector output.  Support for ``offset = None``
is deprecated, set the offset to 0 instead.

``RendererCairo.fontweights``, ``RendererCairo.fontangles``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... are deprecated.

``autofmt_xdate(which=None)``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This is deprecated, use its more explicit synonym, ``which="major"``, instead.

JPEG options
~~~~~~~~~~~~
The *quality*, *optimize*, and *progressive* keyword arguments to
`~.Figure.savefig`, which were only used when saving to JPEG, are deprecated.
:rc:`savefig.jpeg_quality` is likewise deprecated.

Such options should now be directly passed to Pillow using
``savefig(..., pil_kwargs={"quality": ..., "optimize": ..., "progressive": ...})``.

``dviread.Encoding``
~~~~~~~~~~~~~~~~~~~~
This class was (mostly) broken and is deprecated.

Axis and Locator ``pan`` and ``zoom``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The unused ``pan`` and ``zoom`` methods of `~.axis.Axis` and `~.ticker.Locator`
are deprecated.  Panning and zooming are now implemented using the
``start_pan``, ``drag_pan``, and ``end_pan`` methods of `~.axes.Axes`.

Passing None to various Axes subclass factories
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Support for passing ``None`` as base class to `.axes.subplot_class_factory`,
``axes_grid1.parasite_axes.host_axes_class_factory``,
``axes_grid1.parasite_axes.host_subplot_class_factory``,
``axes_grid1.parasite_axes.parasite_axes_class_factory``, and
``axes_grid1.parasite_axes.parasite_axes_auxtrans_class_factory`` is deprecated.
Explicitly pass the correct base ``Axes`` class instead.

``axes_rgb``
~~~~~~~~~~~~
In :mod:`mpl_toolkits.axes_grid1.axes_rgb`, ``imshow_rgb`` is deprecated (use
``ax.imshow(np.dstack([r, g, b]))`` instead); ``RGBAxesBase`` is deprecated
(use ``RGBAxes`` instead); ``RGBAxes.add_RGB_to_figure`` is deprecated (it was
an internal helper).

``Substitution.from_params``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This method is deprecated.  If needed, directly assign to the ``params``
attribute of the Substitution object.

PGF backend cleanups
~~~~~~~~~~~~~~~~~~~~
The *dummy* parameter of `.RendererPgf` is deprecated.

``GraphicsContextPgf`` is deprecated (use `.GraphicsContextBase` instead).

``set_factor`` method of :mod:`mpl_toolkits.axisartist` locators
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The ``set_factor`` method of :mod:`mpl_toolkits.axisartist` locators (which are
different from "standard" Matplotlib tick locators) is deprecated.

`.widgets.SubplotTool` callbacks and axes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The ``funcleft``, ``funcright``, ``funcbottom``, ``functop``, ``funcwspace``,
and ``funchspace`` methods of `.widgets.SubplotTool` are deprecated.

The ``axleft``, ``axright``, ``axbottom``, ``axtop``, ``axwspace``, and
``axhspace`` attributes of `.widgets.SubplotTool` are deprecated.  Access the
``ax`` attribute of the corresponding slider, if needed.

mathtext ``Glue`` helper classes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The ``Fil``, ``Fill``, ``Filll``, ``NegFil``, ``NegFill``, ``NegFilll``, and
``SsGlue`` classes in the :mod:`matplotlib.mathtext` module are deprecated.
As an alternative, directly construct glue instances with ``Glue("fil")``, etc.

NavigationToolbar2._init_toolbar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Overriding this method to initialize third-party toolbars is deprecated.
Instead, the toolbar should be initialized in the ``__init__`` method of the
subclass (which should call the base-class' ``__init__`` as appropriate).  To
keep back-compatibility with earlier versions of Matplotlib (which *required*
``_init_toolbar`` to be overridden), a fully empty implementation (``def
_init_toolbar(self): pass``) may be kept and will not trigger the deprecation
warning.

NavigationToolbar2QT.parent and .basedir
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
These attributes are deprecated.  In order to access the parent window, use
``toolbar.canvas.parent()``.  Once the deprecation period is elapsed, it will
also be accessible as ``toolbar.parent()``.  The base directory to the icons
is ``os.path.join(mpl.get_data_path(), "images")``.

NavigationToolbar2QT.ctx
~~~~~~~~~~~~~~~~~~~~~~~~
This attribute is deprecated.

NavigationToolbar2Wx attributes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The ``prevZoomRect``, ``retinaFix``, ``savedRetinaImage``, ``wxoverlay``,
``zoomAxes``, ``zoomStartX``, and ``zoomStartY`` attributes are deprecated.

NavigationToolbar2.press and .release
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
These methods were called when pressing or releasing a mouse button,
but *only* when an interactive pan or zoom was occurring (contrary to
what the docs stated).  They are deprecated; if you write a backend
which needs to customize such events, please directly override
``press_pan``/``press_zoom``/``release_pan``/``release_zoom`` instead.

FigureCanvasGTK3._renderer_init
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Overriding this method to initialize renderers for GTK3 canvases is deprecated.
Instead, the renderer should be initialized in the ``__init__`` method of the
subclass (which should call the base-class' ``__init__`` as appropriate).  To
keep back-compatibility with earlier versions of Matplotlib (which *required*
``_renderer_init`` to be overridden), a fully empty implementation (``def
_renderer_init(self): pass``) may be kept and will not trigger the deprecation
warning.

Path helpers in :mod:`.bezier`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

``bezier.make_path_regular`` is deprecated.  Use ``Path.cleaned()`` (or
``Path.cleaned(curves=True)``, etc.) instead (but note that these methods add a
``STOP`` code at the end of the path).

``bezier.concatenate_paths`` is deprecated.  Use ``Path.make_compound_path()``
instead.

``animation.html_args`` rcParam
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The unused ``animation.html_args`` rcParam and ``animation.HTMLWriter.args_key``
attribute are deprecated.

``text.latex.preview`` rcParam
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This rcParam, which controlled the use of the preview.sty LaTeX package to
align TeX string baselines, is deprecated, as Matplotlib's own dvi parser now
computes baselines just as well as preview.sty.

``SubplotSpec.get_rows_columns``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This method is deprecated.  Use the ``GridSpec.nrows``, ``GridSpec.ncols``,
``SubplotSpec.rowspan``, and ``SubplotSpec.colspan`` properties instead.

Qt4-based backends
~~~~~~~~~~~~~~~~~~
The qt4agg and qt4cairo backends are deprecated. Qt4 has reached its
end-of-life in 2015 and there are no releases for recent versions of Python.
Please consider switching to Qt5.

*fontdict* and *minor* parameters of `.Axes.set_xticklabels` and `.Axes.set_yticklabels` will become keyword-only
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

All parameters of `.Figure.subplots` except *nrows* and *ncols* will become keyword-only
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This avoids typing e.g. ``subplots(1, 1, 1)`` when meaning ``subplot(1, 1, 1)``,
but actually getting ``subplots(1, 1, sharex=1)``.

``RendererWx.get_gc``
~~~~~~~~~~~~~~~~~~~~~
This method is deprecated.  Access the ``gc`` attribute directly instead.

*add_all* parameter in ``axes_grid``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The *add_all* parameter of `.axes_grid1.axes_grid.Grid`,
`.axes_grid1.axes_grid.ImageGrid`, `.axes_grid1.axes_rgb.make_rgb_axes` and
`.axes_grid1.axes_rgb.RGBAxes` is deprecated.  Axes are now always added to the
parent figure, though they can be later removed with ``ax.remove()``.

``BboxBase.inverse_transformed``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

``.BboxBase.inverse_transformed`` is deprecated (call `.BboxBase.transformed`
on the `~.Transform.inverted()` transform instead).

*orientation* of ``eventplot()`` and `.EventCollection`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Setting the *orientation* of an ``eventplot()`` or `.EventCollection` to "none"
or None is deprecated; set it to "horizontal" instead.  Moreover, the two
orientations ("horizontal" and "vertical") will become case-sensitive in the
future.

*minor* kwarg to `.Axis.get_ticklocs` will become keyword-only
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Passing this argument positionally is deprecated.

Case-insensitive properties
~~~~~~~~~~~~~~~~~~~~~~~~~~~
Normalization of upper or mixed-case property names to lowercase in
`.Artist.set` and `.Artist.update` is deprecated.  In the future, property
names will be passed as is, allowing one to pass names such as *patchA* or
*UVC*.

``ContourSet.ax``, ``Quiver.ax``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
These attributes are deprecated in favor of ``ContourSet.axes`` and
``Quiver.axes``, for consistency with other artists.

``Locator.refresh()`` and associated methods
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
``Locator.refresh()`` is deprecated.  This method was called at certain places
to let locators update their internal state, typically based on the axis
limits.  Locators should now always consult the axis limits when called, if
needed.

The associated helper methods ``NavigationToolbar2.draw()`` and
``ToolViewsPositions.refresh_locators()`` are deprecated, and should be
replaced by calls to ``draw_idle()`` on the corresponding canvas.

`.ScalarMappable` checkers
~~~~~~~~~~~~~~~~~~~~~~~~~~
The ``add_checker`` and ``check_update`` methods and ``update_dict`` attribute
of `.ScalarMappable` are deprecated.

`.pyplot.tight_layout` and ``ColorbarBase`` parameters will become keyword-only
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
All parameters of `.pyplot.tight_layout` and all parameters of ``ColorbarBase``
except for the first (*ax*) will become keyword-only, consistently with
`.Figure.tight_layout` and ``Colorbar``, respectively.

`.Axes.pie` radius and startangle
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Passing ``None`` as either the ``radius`` or ``startangle`` of an `.Axes.pie`
is deprecated; use the explicit defaults of 1 and 0, respectively, instead.

``AxisArtist.dpi_transform``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... is deprecated.  Scale ``Figure.dpi_scale_trans`` by 1/72 to achieve the
same effect.

``offset_position`` property of `.Collection`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The ``offset_position`` property of `.Collection` is deprecated.  In the
future, `.Collection`\s will always behave as if ``offset_position`` is set to
"screen" (the default).

Support for passing ``offset_position="data"`` to the ``draw_path_collection``
of all renderer classes is deprecated.

`.transforms.AffineDeltaTransform` can be used as a replacement.  This API is
experimental and may change in the future.

``testing.compare.make_external_conversion_command``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... is deprecated.

`.epoch2num` and `.num2epoch` are deprecated
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
These are unused and can be easily reproduced by other date tools.
`.get_epoch` will return Matplotlib's epoch.

``axes_grid1.CbarAxes`` attributes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The ``cbid`` and ``locator`` attribute are deprecated.  Use
``mappable.colorbar_cid`` and ``colorbar.locator``, as for standard colorbars.

``qt_compat.is_pyqt5``
~~~~~~~~~~~~~~~~~~~~~~
This function is deprecated in prevision of the future release of PyQt6.  The
Qt version can be checked using ``QtCore.qVersion()``.

Reordering of parameters by `.Artist.set`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In a future version, ``Artist.set`` will apply artist properties in the order
in which they are given.  This only affects the interaction between the
*color*, *edgecolor*, *facecolor*, and, for `.Collection`\s, *alpha*
properties: the *color* property now needs to be passed first in order not to
override the other properties.  This is consistent with e.g. `.Artist.update`,
which did not reorder the properties passed to it.

Passing multiple keys as a single comma-separated string or multiple arguments to `.ToolManager.update_keymap`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This is deprecated; pass keys as a list of strings instead.

Statusbar classes and attributes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The ``statusbar`` attribute of `.FigureManagerBase`, ``StatusbarBase`` and all
its subclasses, and ``StatusBarWx``, are deprecated, as messages are now
displayed in the toolbar instead.

``ismath`` parameter of ``draw_tex``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The ``ismath`` parameter of the ``draw_tex`` method of all renderer classes is
deprecated (as a call to ``draw_tex`` -- not to be confused with ``draw_text``!
-- means that the entire string should be passed to the ``usetex`` machinery
anyways).  Likewise, the text machinery will no longer pass the ``ismath``
parameter when calling ``draw_tex`` (this should only matter for backend
implementers).

Passing ``ismath="TeX!"`` to `.RendererAgg.get_text_width_height_descent` is
deprecated.  Pass ``ismath="TeX"`` instead, consistently with other low-level
APIs which support the values True, False, and "TeX" for ``ismath``.

``matplotlib.ttconv``
~~~~~~~~~~~~~~~~~~~~~
This module is deprecated.


Stricter PDF metadata keys in PGF
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Saving metadata in PDF with the PGF backend currently normalizes all keys to
lowercase, unlike the PDF backend, which only accepts the canonical case.  This
is deprecated; in a future version, only the canonically cased keys listed in
the PDF specification (and the `~.backend_pgf.PdfPages` documentation) will be
accepted.


Qt modifier keys
~~~~~~~~~~~~~~~~
The ``MODIFIER_KEYS``, ``SUPER``, ``ALT``, ``CTRL``, and ``SHIFT``
global variables of the ``matplotlib.backends.backend_qt4agg``,
``matplotlib.backends.backend_qt4cairo``,
:mod:`matplotlib.backends.backend_qt5agg` and
:mod:`matplotlib.backends.backend_qt5cairo` modules are deprecated.

``TexManager``
~~~~~~~~~~~~~~

The ``TexManager.serif``, ``TexManager.sans_serif``,
``TexManager.cursive`` and ``TexManager.monospace`` attributes are
deprecated.
Development changes
-------------------

Increase to minimum supported versions of dependencies
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

For Matplotlib 3.5, the :ref:`minimum supported versions <dependencies>` and
some :ref:`optional dependencies <optional_dependencies>` are being bumped:

+---------------+---------------+---------------+
| Dependency    | min in mpl3.4 | min in mpl3.5 |
+===============+===============+===============+
| NumPy         |     1.16      |     1.17      |
+---------------+---------------+---------------+
| Tk (optional) |     8.3       |     8.4       |
+---------------+---------------+---------------+

This is consistent with our :ref:`min_deps_policy` and `NEP29
<https://numpy.org/neps/nep-0029-deprecation_policy.html>`__

New wheel architectures
~~~~~~~~~~~~~~~~~~~~~~~

Wheels have been added for:

- Python 3.10
- PyPy 3.7
- macOS on Apple Silicon (both arm64 and universal2)

New build dependencies
~~~~~~~~~~~~~~~~~~~~~~

Versioning has been switched from bundled versioneer to `setuptools-scm
<https://github.com/pypa/setuptools_scm/>`__ using the
``release-branch-semver`` version scheme. The latter is well-maintained, but
may require slight modification to packaging scripts.

The `setuptools-scm-git-archive
<https://pypi.org/project/setuptools-scm-git-archive/>`__ plugin is also used
for consistent version export.

Data directory is no longer optional
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Historically, the ``mpl-data`` directory has been optional (example files were
unnecessary, and fonts could be deleted if a suitable dependency on a system
font were provided). Though example files are still optional, they have been
substantially pared down, and we now consider the directory to be required.

Specifically, the ``matplotlibrc`` file found there is used for runtime
verifications and must exist. Packagers may still symlink fonts to system
versions if needed.

New runtime dependencies
~~~~~~~~~~~~~~~~~~~~~~~~

fontTools for type 42 subsetting
................................

A new dependency `fontTools <https://fonttools.readthedocs.io/>`_ is integrated
into Matplotlib 3.5. It is designed to be used with PS/EPS and PDF documents;
and handles Type 42 font subsetting.

Underscore support in LaTeX
...........................

The `underscore <https://ctan.org/pkg/underscore>`_ package is now a
requirement to improve support for underscores in LaTeX.

This is consistent with our :ref:`min_deps_policy`.

Matplotlib-specific build options moved from ``setup.cfg`` to ``mplsetup.cfg``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In order to avoid conflicting with the use of :file:`setup.cfg` by
``setuptools``, the Matplotlib-specific build options have moved from
``setup.cfg`` to ``mplsetup.cfg``.  The :file:`setup.cfg.template` has been
correspondingly been renamed to :file:`mplsetup.cfg.template`.

Note that the path to this configuration file can still be set via the
:envvar:`MPLSETUPCFG` environment variable, which allows one to keep using the
same file before and after this change.
Removals
--------

The following deprecated APIs have been removed:

Removed behaviour
~~~~~~~~~~~~~~~~~

Stricter validation of function parameters
..........................................

- Calling `.Figure.add_axes` with no arguments will raise an error. Adding a
  free-floating axes needs a position rectangle. If you want a figure-filling
  single axes, use `.Figure.add_subplot` instead.
- `.Figure.add_subplot` validates its inputs; in particular, for
  ``add_subplot(rows, cols, index)``, all parameters must be integral.
  Previously strings and floats were accepted and converted to int.
- Passing *None* as the *which* argument to ``autofmt_xdate`` is no longer
  supported; use its more explicit synonym, ``which="major"``, instead.
- Setting the *orientation* of an ``eventplot()`` or `.EventCollection` to
  "none" or *None* is no longer supported; set it to "horizontal" instead.
  Moreover, the two orientations ("horizontal" and "vertical") are now
  case-sensitive.
- Passing parameters *norm* and *vmin*/*vmax* simultaneously to functions using
  colormapping such as ``scatter()`` and ``imshow()`` is no longer supported.
  Instead of ``norm=LogNorm(), vmin=min_val, vmax=max_val`` pass
  ``norm=LogNorm(min_val, max_val)``. *vmin* and *vmax* should only be used
  without setting *norm*.
- Passing *None* as either the *radius* or *startangle* arguments of an
  `.Axes.pie` is no longer accepted; use the explicit defaults of 1 and 0,
  respectively, instead.
- Passing *None* as the *normalize* argument of `.Axes.pie` (the former
  default) is no longer accepted, and the pie will always be normalized by
  default. If you wish to plot an incomplete pie, explicitly pass
  ``normalize=False``.
- Support for passing *None* to ``subplot_class_factory`` has been removed.
  Explicitly pass in the base `~matplotlib.axes.Axes` class instead.
- Passing multiple keys as a single comma-separated string or multiple
  arguments to `.ToolManager.update_keymap` is no longer supported; pass keys
  as a list of strings instead.
- Passing the dash offset as *None* is no longer accepted, as this was never
  universally implemented, e.g. for vector output. Set the offset to 0 instead.
- Setting a custom method overriding `.Artist.contains` using
  ``Artist.set_contains`` has been removed, as has ``Artist.get_contains``.
  There is no replacement, but you may still customize pick events using
  `.Artist.set_picker`.
- `~.Axes.semilogx`, `~.Axes.semilogy`, `~.Axes.loglog`, `.LogScale`, and
  `.SymmetricalLogScale` used to take keyword arguments that depends on the
  axis orientation ("basex" vs "basey", "subsx" vs "subsy", "nonposx" vs
  "nonposy"); these parameter names have been removed in favor of "base",
  "subs", "nonpositive". This removal also affects e.g. ``ax.set_yscale("log",
  basey=...)`` which must now be spelled ``ax.set_yscale("log", base=...)``.

  The change from "nonpos" to "nonpositive" also affects
  `~.scale.LogTransform`, `~.scale.InvertedLogTransform`,
  `~.scale.SymmetricalLogTransform`, etc.

  To use *different* bases for the x-axis and y-axis of a `~.Axes.loglog` plot,
  use e.g. ``ax.set_xscale("log", base=10); ax.set_yscale("log", base=2)``.
- Passing *None*, or no argument, to ``parasite_axes_class_factory``,
  ``parasite_axes_auxtrans_class_factory``, ``host_axes_class_factory`` is no
  longer accepted; pass an explicit base class instead.

Case-sensitivity is now enforced more
......................................

- Upper or mixed-case property names are no longer normalized to lowercase in
  `.Artist.set` and `.Artist.update`. This allows one to pass names such as
  *patchA* or *UVC*.
- Case-insensitive capstyles and joinstyles are no longer lower-cased; please
  pass capstyles ("miter", "round", "bevel") and joinstyles ("butt", "round",
  "projecting") as lowercase.
- Saving metadata in PDF with the PGF backend no longer changes keys to
  lowercase. Only the canonically cased keys listed in the PDF specification
  (and the `~.backend_pgf.PdfPages` documentation) are accepted.

No implicit initialization of ``Tick`` attributes
.................................................

The `.Tick` constructor no longer initializes the attributes ``tick1line``,
``tick2line``, ``gridline``, ``label1``, and ``label2`` via ``_get_tick1line``,
``_get_tick2line``, ``_get_gridline``, ``_get_text1``, and ``_get_text2``.
Please directly set the attribute in the subclass' ``__init__`` instead.

``NavigationToolbar2`` subclass changes
.......................................

Overriding the ``_init_toolbar`` method of `.NavigationToolbar2` to initialize
third-party toolbars is no longer supported. Instead, the toolbar should be
initialized in the ``__init__`` method of the subclass (which should call the
base-class' ``__init__`` as appropriate).

The ``press`` and ``release`` methods of `.NavigationToolbar2` were called when
pressing or releasing a mouse button, but *only* when an interactive pan or
zoom was occurring (contrary to what the docs stated). They are no longer
called; if you write a backend which needs to customize such events, please
directly override ``press_pan``/``press_zoom``/``release_pan``/``release_zoom``
instead.

Removal of old file mode flag
.............................

Flags containing "U" passed to `.cbook.to_filehandle` and `.cbook.open_file_cm`
are no longer accepted. This is consistent with their removal from `open` in
Python 3.9.

Keymaps toggling ``Axes.get_navigate`` have been removed
........................................................

This includes numeric key events and rcParams.

The ``TTFPATH`` and ``AFMPATH`` environment variables
.....................................................

Support for the (undocumented) ``TTFPATH`` and ``AFMPATH`` environment
variables has been removed. Register additional fonts using
``matplotlib.font_manager.fontManager.addfont()``.

Modules
~~~~~~~

- ``matplotlib.backends.qt_editor.formsubplottool``; use
  ``matplotlib.backends.backend_qt.SubplotToolQt`` instead.
- ``matplotlib.compat``
- ``matplotlib.ttconv``
- The Qt4-based backends, ``qt4agg`` and ``qt4cairo``, have been removed. Qt4
  has reached its end-of-life in 2015 and there are no releases of either PyQt4
  or PySide for recent versions of Python. Please use one of the Qt5 or Qt6
  backends.

Classes, methods and attributes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following module-level classes/variables have been removed:

- ``backend_bases.StatusbarBase`` and all its subclasses, and ``StatusBarWx``;
  messages are displayed in the toolbar
- ``backend_pgf.GraphicsContextPgf``
- ``MODIFIER_KEYS``, ``SUPER``, ``ALT``, ``CTRL``, and ``SHIFT`` of
  `matplotlib.backends.backend_qt5agg` and
  `matplotlib.backends.backend_qt5cairo`
- ``backend_wx.DEBUG_MSG``
- ``dviread.Encoding``
- ``Fil``, ``Fill``, ``Filll``, ``NegFil``, ``NegFill``, ``NegFilll``, and
  ``SsGlue`` from `.mathtext`; directly construct glue instances with
  ``Glue("fil")``, etc.
- ``mathtext.GlueSpec``
- ``OldScalarFormatter``, ``IndexFormatter`` and ``IndexDateFormatter``; use
  `.FuncFormatter` instead
- ``OldAutoLocator``
- ``AVConvBase``, ``AVConvWriter`` and ``AVConvFileWriter``. Debian 8 (2015,
  EOL 06/2020) and Ubuntu 14.04 (EOL 04/2019) were the last versions of Debian
  and Ubuntu to ship avconv. It remains possible to force the use of avconv by
  using the FFmpeg-based writers with :rc:`animation.ffmpeg_path` set to
  "avconv".
- ``matplotlib.axes._subplots._subplot_classes``
- ``axes_grid1.axes_rgb.RGBAxesBase``; use ``RGBAxes`` instead

The following class attributes have been removed:

- ``backend_pgf.LatexManager.latex_stdin_utf8``
- ``backend_pgf.PdfPages.metadata``
- ``ContourSet.ax`` and ``Quiver.ax``; use ``ContourSet.axes`` or
  ``Quiver.axes`` as with other artists
- ``DateFormatter.illegal_s``
- ``dates.YearLocator.replaced``; `.YearLocator` is now a subclass of
  `.RRuleLocator`, and the attribute ``YearLocator.replaced`` has been removed.
  For tick locations that required modifying this, a custom rrule and
  `.RRuleLocator` can be used instead.
- ``FigureManagerBase.statusbar``; messages are displayed in the toolbar
- ``FileMovieWriter.clear_temp``
- ``mathtext.Glue.glue_subtype``
- ``MovieWriter.args_key``, ``MovieWriter.exec_key``, and
  ``HTMLWriter.args_key``
- ``NavigationToolbar2QT.basedir``; the base directory to the icons is
  ``os.path.join(mpl.get_data_path(), "images")``
- ``NavigationToolbar2QT.ctx``
- ``NavigationToolbar2QT.parent``; to access the parent window, use
  ``toolbar.canvas.parent()`` or ``toolbar.parent()``
- ``prevZoomRect``, ``retinaFix``, ``savedRetinaImage``, ``wxoverlay``,
  ``zoomAxes``, ``zoomStartX``, and ``zoomStartY`` attributes of
  ``NavigationToolbar2Wx``
- ``NonUniformImage.is_grayscale``, ``PcolorImage.is_grayscale``, for
  consistency with ``AxesImage.is_grayscale``. (Note that previously, these
  attributes were only available *after rendering the image*).
- ``RendererCairo.fontweights``, ``RendererCairo.fontangles``
- ``used_characters`` of `.RendererPdf`, `.PdfFile`, and `.RendererPS`
- ``LogScale.LogTransform``, ``LogScale.InvertedLogTransform``,
  ``SymmetricalScale.SymmetricalTransform``, and
  ``SymmetricalScale.InvertedSymmetricalTransform``; directly access the
  transform classes from `matplotlib.scale`
- ``cachedir``, ``rgba_arrayd``, ``serif``, ``sans_serif``, ``cursive``, and
  ``monospace`` attributes of `.TexManager`
- ``axleft``, ``axright``, ``axbottom``, ``axtop``, ``axwspace``, and
  ``axhspace`` attributes of `.widgets.SubplotTool`; access the ``ax``
  attribute of the corresponding slider
- ``widgets.TextBox.params_to_disable``
- ``angle_helper.LocatorBase.den``; it has been renamed to *nbins*
- ``axes_grid.CbarAxesBase.cbid`` and ``axes_grid.CbarAxesBase.locator``; use
  ``mappable.colorbar_cid`` or ``colorbar.locator`` instead

The following class methods have been removed:

- ``Axes.update_datalim_bounds``; use ``ax.dataLim.set(Bbox.union([ax.dataLim,
  bounds]))``
- ``pan`` and ``zoom`` methods of `~.axis.Axis` and `~.ticker.Locator` have
  been removed; panning and zooming are now implemented using the
  ``start_pan``, ``drag_pan``, and ``end_pan`` methods of `~.axes.Axes`
- ``.BboxBase.inverse_transformed``; call `.BboxBase.transformed` on the
  `~.Transform.inverted()` transform
- ``Collection.set_offset_position`` and ``Collection.get_offset_position``
  have been removed; the ``offset_position`` of the `.Collection` class is now
  "screen"
- ``Colorbar.on_mappable_changed`` and ``Colorbar.update_bruteforce``; use
  ``Colorbar.update_normal()`` instead
- ``docstring.Substitution.from_params`` has been removed; directly assign to
  ``params`` of `.Substitution` instead
- ``DraggableBase.artist_picker``; set the artist's picker instead
- ``DraggableBase.on_motion_blit``; use `.DraggableBase.on_motion` instead
- ``FigureCanvasGTK3._renderer_init``
- ``Locator.refresh()`` and the associated helper methods
  ``NavigationToolbar2.draw()`` and ``ToolViewsPositions.refresh_locators()``
- ``track_characters`` and ``merge_used_characters`` of `.RendererPdf`,
  `.PdfFile`, and `.RendererPS`
- ``RendererWx.get_gc``
- ``SubplotSpec.get_rows_columns``; use the ``GridSpec.nrows``,
  ``GridSpec.ncols``, ``SubplotSpec.rowspan``, and ``SubplotSpec.colspan``
  properties instead.
- ``ScalarMappable.update_dict``, ``ScalarMappable.add_checker()``, and
  ``ScalarMappable.check_update()``; register a callback in
  ``ScalarMappable.callbacks`` to be notified of updates
- ``TexManager.make_tex_preview`` and ``TexManager.make_dvi_preview``
- ``funcleft``, ``funcright``, ``funcbottom``, ``functop``, ``funcwspace``, and
  ``funchspace`` methods of `.widgets.SubplotTool`

- ``axes_grid1.axes_rgb.RGBAxes.add_RGB_to_figure``
- ``axisartist.axis_artist.AxisArtist.dpi_transform``
- ``axisartist.grid_finder.MaxNLocator.set_factor`` and
  ``axisartist.grid_finder.FixedLocator.set_factor``; the factor is always 1
  now

Functions
~~~~~~~~~

- ``bezier.make_path_regular`` has been removed; use ``Path.cleaned()`` (or
  ``Path.cleaned(curves=True)``, etc.) instead, but note that these methods add
  a ``STOP`` code at the end of the path.
- ``bezier.concatenate_paths`` has been removed; use
  ``Path.make_compound_path()`` instead.
- ``cbook.local_over_kwdict`` has been removed; use `.cbook.normalize_kwargs`
  instead.
- ``qt_compat.is_pyqt5`` has been removed due to the release of PyQt6. The Qt
  version can be checked using ``QtCore.qVersion()``.
- ``testing.compare.make_external_conversion_command`` has been removed.
- ``axes_grid1.axes_rgb.imshow_rgb`` has been removed; use
  ``imshow(np.dstack([r, g, b]))`` instead.

Arguments
~~~~~~~~~

- The *s* parameter to `.Axes.annotate` and  `.pyplot.annotate` is no longer
  supported; use the new name *text*.
- The *inframe* parameter to `.Axes.draw` has been removed; use
  `.Axes.redraw_in_frame` instead.
- The *required*, *forbidden* and *allowed* parameters of
  `.cbook.normalize_kwargs` have been removed.
- The *ismath* parameter of the ``draw_tex`` method of all renderer classes has
  been removed (as a call to ``draw_tex`` — not to be confused with
  ``draw_text``! — means that the entire string should be passed to the
  ``usetex`` machinery anyways). Likewise, the text machinery will no longer
  pass the *ismath* parameter when calling ``draw_tex`` (this should only
  matter for backend implementers).
- The *quality*, *optimize*, and *progressive* parameters of `.Figure.savefig`
  (which only affected JPEG output) have been removed, as well as from the
  corresponding ``print_jpg`` methods. JPEG output options can be set by
  directly passing the relevant parameters in *pil_kwargs*.
- The *clear_temp* parameter of `.FileMovieWriter` has been removed; files
  placed in a temporary directory (using ``frame_prefix=None``, the default)
  will be cleared; files placed elsewhere will not.
- The *copy* parameter of ``mathtext.Glue`` has been removed.
- The *quantize* parameter of `.Path.cleaned()` has been removed.
- The *dummy* parameter of `.RendererPgf` has been removed.
- The *props* parameter of `.Shadow` has been removed; use keyword arguments
  instead.
- The *recursionlimit* parameter of `matplotlib.test` has been removed.
- The *label* parameter of `.Tick` has no effect and has been removed.
- `~.ticker.MaxNLocator` no longer accepts a positional parameter and the
  keyword argument *nbins* simultaneously because they specify the same
  quantity.
- The *add_all* parameter to ``axes_grid.Grid``, ``axes_grid.ImageGrid``,
  ``axes_rgb.make_rgb_axes``, and ``axes_rgb.RGBAxes`` have been removed; the
  APIs always behave as if ``add_all=True``.
- The *den* parameter of ``axisartist.angle_helper.LocatorBase`` has been
  removed; use *nbins* instead.

- The *s* keyword argument to `.AnnotationBbox.get_fontsize` has no effect and
  has been removed.
- The *offset_position* keyword argument of the `.Collection` class has been
  removed; the ``offset_position`` now "screen".
- Arbitrary keyword arguments to ``StreamplotSet`` have no effect and have been
  removed.

- The *fontdict* and *minor* parameters of `.Axes.set_xticklabels` /
  `.Axes.set_yticklabels` are now keyword-only.
- All parameters of `.Figure.subplots` except *nrows* and *ncols* are now
  keyword-only; this avoids typing e.g. ``subplots(1, 1, 1)`` when meaning
  ``subplot(1, 1, 1)``, but actually getting ``subplots(1, 1, sharex=1)``.
- All parameters of `.pyplot.tight_layout` are now keyword-only, to be
  consistent with `.Figure.tight_layout`.
- ``ColorbarBase`` only takes a single positional argument now, the ``Axes`` to
  create it in, with all other options required to be keyword arguments. The
  warning for keyword arguments that were overridden by the mappable is now
  removed.

- Omitting the *renderer* parameter to `.Axes.draw` is no longer supported; use
  ``axes.draw_artist(axes)`` instead.
- Passing ``ismath="TeX!"`` to `.RendererAgg.get_text_width_height_descent` is
  no longer supported; pass ``ismath="TeX"`` instead,
- Changes to the signature of the `.Axes.draw` method make it consistent with
  all other artists; thus additional parameters to `.Artist.draw` have also
  been removed.

rcParams
~~~~~~~~

- The ``animation.avconv_path`` and ``animation.avconv_args`` rcParams have
  been removed.
- The ``animation.html_args`` rcParam has been removed.
- The ``keymap.all_axes`` rcParam has been removed.
- The ``mathtext.fallback_to_cm`` rcParam has been removed. Use
  :rc:`mathtext.fallback` instead.
- The ``savefig.jpeg_quality`` rcParam has been removed.
- The ``text.latex.preview`` rcParam has been removed.
- The following deprecated rcParams validators, defined in `.rcsetup`, have
  been removed:

  - ``validate_alignment``
  - ``validate_axes_titlelocation``
  - ``validate_axis_locator``
  - ``validate_bool_maybe_none``
  - ``validate_fontset``
  - ``validate_grid_axis``
  - ``validate_hinting``
  - ``validate_legend_loc``
  - ``validate_mathtext_default``
  - ``validate_movie_frame_fmt``
  - ``validate_movie_html_fmt``
  - ``validate_movie_writer``
  - ``validate_nseq_float``
  - ``validate_nseq_int``
  - ``validate_orientation``
  - ``validate_pgf_texsystem``
  - ``validate_ps_papersize``
  - ``validate_svg_fontset``
  - ``validate_toolbar``
  - ``validate_webagg_address``

- Some rcParam validation has become stricter:

  - :rc:`axes.axisbelow` no longer accepts strings starting with "line"
    (case-insensitive) as "line"; use "line" (case-sensitive) instead.
  - :rc:`text.latex.preamble` and :rc:`pdf.preamble` no longer accept
    non-string values.
  - All ``*.linestyle`` rcParams no longer accept ``offset = None``; set the
    offset to 0 instead.
Behaviour changes
-----------------

First argument to ``subplot_mosaic`` renamed
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Both `.FigureBase.subplot_mosaic`, and `.pyplot.subplot_mosaic` have had the
first positional argument renamed from *layout* to *mosaic*. As we have
consolidated the *constrained_layout* and *tight_layout* keyword arguments in
the Figure creation functions of `.pyplot` into a single *layout* keyword
argument, the original ``subplot_mosaic`` argument name would collide.

As this API is provisional, we are changing this argument name with no
deprecation period.

.. _Behavioural API Changes 3.5 - Axes children combined:

``Axes`` children are no longer separated by type
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Formerly, `.axes.Axes` children were separated by `.Artist` type, into sublists
such as ``Axes.lines``. For methods that produced multiple elements (such as
`.Axes.errorbar`), though individual parts would have similar *zorder*, this
separation might cause them to be drawn at different times, causing
inconsistent results when overlapping other Artists.

Now, the children are no longer separated by type, and the sublist properties
are generated dynamically when accessed. Consequently, Artists will now always
appear in the correct sublist; e.g., if `.axes.Axes.add_line` is called on a
`.Patch`, it will appear in the ``Axes.patches`` sublist, *not* ``Axes.lines``.
The ``Axes.add_*`` methods will now warn if passed an unexpected type.

Modification of the following sublists is still accepted, but deprecated:

* ``Axes.artists``
* ``Axes.collections``
* ``Axes.images``
* ``Axes.lines``
* ``Axes.patches``
* ``Axes.tables``
* ``Axes.texts``

To remove an Artist, use its `.Artist.remove` method. To add an Artist, use the
corresponding ``Axes.add_*`` method.

``MatplotlibDeprecationWarning`` now subclasses ``DeprecationWarning``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Historically, it has not been possible to filter
`.MatplotlibDeprecationWarning`\s by checking for `DeprecationWarning`, since we
subclass `UserWarning` directly.

The decision to not subclass `DeprecationWarning` has to do with a decision
from core Python in the 2.x days to not show `DeprecationWarning`\s to users.
However, there is now a more sophisticated filter in place (see
https://www.python.org/dev/peps/pep-0565/).

Users will now see `.MatplotlibDeprecationWarning` only during interactive
sessions, and these can be silenced by the standard mechanism:

.. code:: python

	warnings.filterwarnings("ignore", category=DeprecationWarning)

Library authors must now enable `DeprecationWarning`\s explicitly in order for
(non-interactive) CI/CD pipelines to report back these warnings, as is standard
for the rest of the Python ecosystem:

.. code:: python

	warnings.filterwarnings("always", DeprecationWarning)

``Artist.set`` applies artist properties in the order in which they are given
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The change only affects the interaction between the *color*, *edgecolor*,
*facecolor*, and (for `.Collection`\s) *alpha* properties: the *color* property
now needs to be passed first in order not to override the other properties.
This is consistent with e.g. `.Artist.update`, which did not reorder the
properties passed to it.

``pcolor(mesh)`` shading defaults to auto
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The *shading* keyword argument for `.Axes.pcolormesh` and `.Axes.pcolor`
default has been changed to 'auto'.

Passing ``Z(M, N)``, ``x(N)``, ``y(M)`` to ``pcolormesh`` with
``shading='flat'`` will now raise a `TypeError`. Use ``shading='auto'`` or
``shading='nearest'`` for ``x`` and ``y`` to be treated as cell centers, or
drop the last column and row of ``Z`` to get the old behaviour with
``shading='flat'``.

Colorbars now have pan and zoom functionality
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Interactive plots with colorbars can now be zoomed and panned on the colorbar
axis. This adjusts the *vmin* and *vmax* of the `.ScalarMappable` associated
with the colorbar. This is currently only enabled for continuous norms. Norms
used with ``contourf`` and categoricals, such as `.BoundaryNorm` and `.NoNorm`,
have the interactive capability disabled by default. `cb.ax.set_navigate()
<.Axes.set_navigate>` can be used to set whether a colorbar axes is interactive
or not.

Colorbar lines no longer clipped
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If a colorbar has lines added to it (e.g. for contour lines), these will no
longer be clipped. This is an improvement for lines on the edge of the
colorbar, but could lead to lines off the colorbar if the limits of the
colorbar are changed.

``Figure.suppressComposite`` now also controls compositing of Axes images
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The output of ``NonUniformImage`` and ``PcolorImage`` has changed
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Pixel-level differences may be observed in images generated using
`.NonUniformImage` or `.PcolorImage`, typically for pixels exactly at the
boundary between two data cells (no user-facing axes method currently generates
`.NonUniformImage`\s, and only `.pcolorfast` can generate `.PcolorImage`\s).
These artists are also now slower, normally by ~1.5x but sometimes more (in
particular for ``NonUniformImage(interpolation="bilinear")``. This slowdown
arises from fixing occasional floating point inaccuracies.

Change of the (default) legend handler for ``Line2D`` instances
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The default legend handler for Line2D instances (`.HandlerLine2D`) now
consistently exposes all the attributes and methods related to the line marker
(:ghissue:`11358`). This makes it easy to change the marker features after
instantiating a legend.

.. code::

    import matplotlib.pyplot as plt

    fig, ax = plt.subplots()

    ax.plot([1, 3, 2], marker="s", label="Line", color="pink", mec="red", ms=8)
    leg = ax.legend()

    leg.legendHandles[0].set_color("lightgray")
    leg.legendHandles[0].set_mec("black")  # marker edge color

The former legend handler for Line2D objects has been renamed
`.HandlerLine2DCompound`. To revert to the previous behaviour, one can use

.. code::

    import matplotlib.legend as mlegend
    from matplotlib.legend_handler import HandlerLine2DCompound
    from matplotlib.lines import Line2D

    mlegend.Legend.update_default_handler_map({Line2D: HandlerLine2DCompound()})

Setting ``Line2D`` marker edge/face color to *None* use rcParams
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

``Line2D.set_markeredgecolor(None)`` and ``Line2D.set_markerfacecolor(None)``
now set the line property using the corresponding rcParam
(:rc:`lines.markeredgecolor` and :rc:`lines.markerfacecolor`). This is
consistent with other `.Line2D` property setters.

Default theta tick locations for wedge polar plots have changed
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

For polar plots that don't cover a full circle, the default theta tick
locations are now at multiples of 10°, 15°, 30°, 45°, 90°, rather than using
values that mostly make sense for linear plots (20°, 25°, etc.).

``axvspan`` now plots full wedges in polar plots
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

... rather than triangles.

Convenience converter from ``Scale`` to ``Normalize`` now public
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Downstream libraries can take advantage of `.colors.make_norm_from_scale` to
create a `~.colors.Normalize` subclass directly from an existing scale.
Usually norms have a scale, and the advantage of having a  `~.scale.ScaleBase`
attached to a norm is to provide a scale, and associated tick locators and
formatters, for the colorbar.

``ContourSet`` always use ``PathCollection``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In order to correct rendering issues with closed loops, the `.ContourSet` now
creates a `.PathCollection` instead of a `.LineCollection` for line contours.
This type matches the artist used for filled contours.

This affects `.ContourSet` itself and its subclasses, `.QuadContourSet`
(returned by `.Axes.contour`), and `.TriContourSet` (returned by
`.Axes.tricontour`).

``hatch.SmallFilledCircles`` inherits from ``hatch.Circles``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The `.hatch.SmallFilledCircles` class now inherits from `.hatch.Circles` rather
than from `.hatch.SmallCircles`.

hexbin with a log norm
~~~~~~~~~~~~~~~~~~~~~~

`~.axes.Axes.hexbin` no longer (incorrectly) adds 1 to every bin value if a log
norm is being used.

Setting invalid ``rcParams["date.converter"]`` now raises ValueError
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Previously, invalid values passed to :rc:`date.converter` would be ignored with
a `UserWarning`, but now raise `ValueError`.

``Text`` and ``TextBox`` added *parse_math* option
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`.Text` and `.TextBox` objects now allow a *parse_math* keyword-only argument
which controls whether math should be parsed from the displayed string. If
*True*, the string will be parsed as a math text object. If *False*, the string
will be considered a literal and no parsing will occur.

For `.Text`, this argument defaults to *True*. For `.TextBox` this argument
defaults to *False*.

``Type1Font`` objects now decrypt the encrypted part
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Type 1 fonts have a large part of their code encrypted as an obsolete
copy-protection measure. This part is now available decrypted as the
``decrypted`` attribute of ``matplotlib.type1font.Type1Font``. This decrypted
data is not yet parsed, but this is a prerequisite for implementing subsetting.

3D contourf polygons placed between levels
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The polygons used in a 3D `~.Axes3D.contourf` plot are now
placed halfway between the contour levels, as each polygon represents the
location of values that lie between two levels.

``AxesDivider`` now defaults to rcParams-specified pads
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`.AxesDivider.append_axes`, ``AxesDivider.new_horizontal``, and
``AxesDivider.new_vertical`` now default to paddings specified by
:rc:`figure.subplot.wspace` and :rc:`figure.subplot.hspace` rather than zero.
Deprecations
------------

Discouraged: ``Figure`` parameters *tight_layout* and *constrained_layout*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The ``Figure`` parameters *tight_layout* and *constrained_layout* are
triggering competing layout mechanisms and thus should not be used together.

To make the API clearer, we've merged them under the new parameter *layout*
with values 'constrained' (equal to ``constrained_layout=True``), 'tight'
(equal to ``tight_layout=True``). If given, *layout* takes precedence.

The use of *tight_layout* and *constrained_layout* is discouraged in favor of
*layout*. However, these parameters will stay available for backward
compatibility.

Modification of ``Axes`` children sublists
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

See :ref:`Behavioural API Changes 3.5 - Axes children combined` for more
information; modification of the following sublists is deprecated:

* ``Axes.artists``
* ``Axes.collections``
* ``Axes.images``
* ``Axes.lines``
* ``Axes.patches``
* ``Axes.tables``
* ``Axes.texts``

To remove an Artist, use its `.Artist.remove` method. To add an Artist, use the
corresponding ``Axes.add_*`` method.

Passing incorrect types to ``Axes.add_*`` methods
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following ``Axes.add_*`` methods will now warn if passed an unexpected
type. See their documentation for the types they expect.

- `.Axes.add_collection`
- `.Axes.add_image`
- `.Axes.add_line`
- `.Axes.add_patch`
- `.Axes.add_table`

Discouraged: ``plot_date``
~~~~~~~~~~~~~~~~~~~~~~~~~~

The use of `~.Axes.plot_date` is discouraged. This method exists for historic
reasons and may be deprecated in the future.

- ``datetime``-like data should directly be plotted using `~.Axes.plot`.
- If you need to plot plain numeric data as :ref:`date-format` or
  need to set a timezone, call ``ax.xaxis.axis_date`` / ``ax.yaxis.axis_date``
  before `~.Axes.plot`. See `.Axis.axis_date`.

``epoch2num`` and ``num2epoch`` are deprecated
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

These methods convert from unix timestamps to matplotlib floats, but are not
used internally to matplotlib, and should not be needed by end users. To
convert a unix timestamp to datetime, simply use
`datetime.datetime.utcfromtimestamp`, or to use NumPy `~numpy.datetime64`
``dt = np.datetim64(e*1e6, 'us')``.

Auto-removal of grids by `~.Axes.pcolor` and `~.Axes.pcolormesh`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`~.Axes.pcolor` and `~.Axes.pcolormesh` currently remove any visible axes major
grid. This behavior is deprecated; please explicitly call ``ax.grid(False)`` to
remove the grid.

The first parameter of ``Axes.grid`` and ``Axis.grid`` has been renamed to *visible*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The parameter was previously named *b*. This deprecation only matters if that
parameter was passed using a keyword argument, e.g. ``grid(b=False)``.

Unification and cleanup of Selector widget API
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The API for Selector widgets has been unified to use:

- *props* for the properties of the Artist representing the selection.
- *handle_props* for the Artists representing handles for modifying the
  selection.
- *grab_range* for the maximal tolerance to grab a handle with the mouse.

Additionally, several internal parameters and attribute have been deprecated
with the intention of keeping them private.

RectangleSelector and EllipseSelector
.....................................

The *drawtype* keyword argument to `~matplotlib.widgets.RectangleSelector` is
deprecated. In the future the only behaviour will be the default behaviour of
``drawtype='box'``.

Support for ``drawtype=line`` will be removed altogether as it is not clear
which points are within and outside a selector that is just a line. As a
result, the *lineprops* keyword argument to
`~matplotlib.widgets.RectangleSelector` is also deprecated.

To retain the behaviour of ``drawtype='none'``, use ``rectprops={'visible':
False}`` to make the drawn `~matplotlib.patches.Rectangle` invisible.

Cleaned up attributes and arguments are:

- The ``active_handle`` attribute has been privatized and deprecated.
- The ``drawtype`` attribute has been privatized and deprecated.
- The ``eventpress`` attribute has been privatized and deprecated.
- The ``eventrelease`` attribute has been privatized and deprecated.
- The ``interactive`` attribute has been privatized and deprecated.
- The *marker_props* argument is deprecated, use *handle_props* instead.
- The *maxdist* argument is deprecated, use *grab_range* instead.
- The *rectprops* argument is deprecated, use *props* instead.
- The ``rectprops`` attribute has been privatized and deprecated.
- The ``state`` attribute has been privatized and deprecated.
- The ``to_draw`` attribute has been privatized and deprecated.

PolygonSelector
...............

- The *line* attribute is deprecated. If you want to change the selector artist
  properties, use the ``set_props`` or ``set_handle_props`` methods.
- The *lineprops* argument is deprecated, use *props* instead.
- The *markerprops* argument is deprecated, use *handle_props* instead.
- The *maxdist* argument and attribute is deprecated, use *grab_range* instead.
- The *vertex_select_radius* argument and attribute is deprecated, use
  *grab_range* instead.

SpanSelector
............

- The ``active_handle`` attribute has been privatized and deprecated.
- The ``eventpress`` attribute has been privatized and deprecated.
- The ``eventrelease`` attribute has been privatized and deprecated.
- The *maxdist* argument and attribute is deprecated, use *grab_range* instead.
- The ``pressv`` attribute has been privatized and deprecated.
- The ``prev`` attribute has been privatized and deprecated.
- The ``rect`` attribute has been privatized and deprecated.
- The *rectprops* argument is deprecated, use *props* instead.
- The ``rectprops`` attribute has been privatized and deprecated.
- The *span_stays* argument is deprecated, use the *interactive* argument
  instead.
- The ``span_stays`` attribute has been privatized and deprecated.
- The ``state`` attribute has been privatized and deprecated.

LassoSelector
.............

- The *lineprops* argument is deprecated, use *props* instead.
- The ``onpress`` and ``onrelease`` methods are deprecated. They are straight
  aliases for ``press`` and ``release``.

``ConversionInterface.convert`` no longer needs to accept unitless values
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Previously, custom subclasses of `.units.ConversionInterface` needed to
implement a ``convert`` method that not only accepted instances of the unit,
but also unitless values (which are passed through as is). This is no longer
the case (``convert`` is never called with a unitless value), and such support
in `.StrCategoryConverter` is deprecated. Likewise, the
`.ConversionInterface.is_numlike` helper is deprecated.

Consider calling `.Axis.convert_units` instead, which still supports unitless
values.

Locator and Formatter wrapper methods
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The ``set_view_interval``, ``set_data_interval`` and ``set_bounds`` methods of
`.Locator`\s and `.Formatter`\s (and their common base class, TickHelper) are
deprecated. Directly manipulate the view and data intervals on the underlying
axis instead.

Unused positional parameters to ``print_<fmt>`` methods
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

None of the ``print_<fmt>`` methods implemented by canvas subclasses used
positional arguments other that the first (the output filename or file-like),
so these extra parameters are deprecated.

``QuadMesh`` signature
~~~~~~~~~~~~~~~~~~~~~~

The `.QuadMesh` signature ::

    def __init__(meshWidth, meshHeight, coordinates,
                 antialiased=True, shading='flat', **kwargs)

is deprecated and replaced by the new signature ::

    def __init__(coordinates, *, antialiased=True, shading='flat', **kwargs)

In particular:

- The *coordinates* argument must now be a (M, N, 2) array-like. Previously,
  the grid shape was separately specified as (*meshHeight* + 1, *meshWidth* +
  1) and *coordinates* could be an array-like of any shape with M * N * 2
  elements.
- All parameters except *coordinates* are keyword-only now.

rcParams will no longer cast inputs to str
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

After a deprecation period, rcParams that expect a (non-pathlike) str will no
longer cast non-str inputs using `str`. This will avoid confusing errors in
subsequent code if e.g. a list input gets implicitly cast to a str.

Case-insensitive scales
~~~~~~~~~~~~~~~~~~~~~~~

Previously, scales could be set case-insensitively (e.g.,
``set_xscale("LoG")``). This is deprecated; all builtin scales use lowercase
names.

Interactive cursor details
~~~~~~~~~~~~~~~~~~~~~~~~~~

Setting a mouse cursor on a window has been moved from the toolbar to the
canvas. Consequently, several implementation details on toolbars and within
backends have been deprecated.

``NavigationToolbar2.set_cursor`` and ``backend_tools.SetCursorBase.set_cursor``
................................................................................

Instead, use the `.FigureCanvasBase.set_cursor` method on the canvas (available
as the ``canvas`` attribute on the toolbar or the Figure.)

``backend_tools.SetCursorBase`` and subclasses
..............................................

``backend_tools.SetCursorBase`` was subclassed to provide backend-specific
implementations of ``set_cursor``. As that is now deprecated, the subclassing
is no longer necessary. Consequently, the following subclasses are also
deprecated:

- ``matplotlib.backends.backend_gtk3.SetCursorGTK3``
- ``matplotlib.backends.backend_qt5.SetCursorQt``
- ``matplotlib.backends._backend_tk.SetCursorTk``
- ``matplotlib.backends.backend_wx.SetCursorWx``

Instead, use the `.backend_tools.ToolSetCursor` class.

``cursord`` in GTK, Qt, and wx backends
.......................................

The ``backend_gtk3.cursord``, ``backend_qt.cursord``, and
``backend_wx.cursord`` dictionaries are deprecated. This makes the GTK module
importable on headless environments.

Miscellaneous deprecations
~~~~~~~~~~~~~~~~~~~~~~~~~~

- ``is_url`` and ``URL_REGEX`` are deprecated. (They were previously defined in
  the toplevel :mod:`matplotlib` module.)
- The ``ArrowStyle.beginarrow`` and ``ArrowStyle.endarrow`` attributes are
  deprecated; use the ``arrow`` attribute to define the desired heads and tails
  of the arrow.
- ``backend_pgf.LatexManager.str_cache`` is deprecated.
- ``backends.qt_compat.ETS`` and ``backends.qt_compat.QT_RC_MAJOR_VERSION`` are
  deprecated, with no replacement.
- The ``blocking_input`` module has been deprecated. Instead, use
  ``canvas.start_event_loop()`` and ``canvas.stop_event_loop()`` while
  connecting event callbacks as needed.
- ``cbook.report_memory`` is deprecated; use ``psutil.virtual_memory`` instead.
- ``cm.LUTSIZE`` is deprecated. Use :rc:`image.lut` instead. This value only
  affects colormap quantization levels for default colormaps generated at
  module import time.
- ``Collection.__init__`` previously ignored *transOffset* without *offsets* also
  being specified. In the future, *transOffset* will begin having an effect
  regardless of *offsets*. In the meantime, if you wish to set *transOffset*,
  call `.Collection.set_offset_transform` explicitly.
- ``Colorbar.patch`` is deprecated; this attribute is not correctly updated
  anymore.
- ``ContourLabeler.get_label_width`` is deprecated.
- ``dviread.PsfontsMap`` now raises LookupError instead of KeyError for missing
  fonts.
- ``Dvi.baseline`` is deprecated (with no replacement).
- The *format* parameter of ``dviread.find_tex_file`` is deprecated (with no
  replacement).
- ``FancyArrowPatch.get_path_in_displaycoord`` and
  ``ConnectionPath.get_path_in_displaycoord`` are deprecated. The path in
  display coordinates can still be obtained, as for other patches, using
  ``patch.get_transform().transform_path(patch.get_path())``.
- The ``font_manager.win32InstalledFonts`` and
  ``font_manager.get_fontconfig_fonts`` helper functions have been deprecated.
- All parameters of ``imshow`` starting from *aspect* will become keyword-only.
- ``QuadMesh.convert_mesh_to_paths`` and ``QuadMesh.convert_mesh_to_triangles``
  are deprecated. ``QuadMesh.get_paths()`` can be used as an alternative for
  the former; there is no replacement for the latter.
- ``ScalarMappable.callbacksSM`` is deprecated. Use
  ``ScalarMappable.callbacks`` instead.
- ``streamplot.get_integrator`` is deprecated.
- ``style.core.STYLE_FILE_PATTERN``, ``style.core.load_base_library``, and
  ``style.core.iter_user_libraries`` are deprecated.
- ``SubplotParams.validate`` is deprecated. Use `.SubplotParams.update` to
  change `.SubplotParams` while always keeping it in a valid state.
- The ``grey_arrayd``, ``font_family``, ``font_families``, and ``font_info``
  attributes of `.TexManager` are deprecated.
- ``Text.get_prop_tup`` is deprecated with no replacements (because the `.Text`
  class cannot know whether a backend needs to update cache e.g. when the
  text's color changes).
- ``Tick.apply_tickdir`` didn't actually update the tick markers on the
  existing Line2D objects used to draw the ticks and is deprecated; use
  `.Axis.set_tick_params` instead.
- ``tight_layout.auto_adjust_subplotpars`` is deprecated.

- The ``grid_info`` attribute of ``axisartist`` classes has been deprecated.
- ``axisartist.clip_path`` is deprecated with no replacement.
- ``axes_grid1.axes_grid.CbarAxes`` and ``axes_grid1.axisartist.CbarAxes`` are
  deprecated (they are now dynamically generated based on the owning axes
  class).
- The ``axes_grid1.Divider.get_vsize_hsize`` and
  ``axes_grid1.Grid.get_vsize_hsize`` methods are deprecated. Copy their
  implementations if needed.
- ``AxesDivider.append_axes(..., add_to_figure=False)`` is deprecated. Use
  ``ax.remove()`` to remove the Axes from the figure if needed.
- ``FixedAxisArtistHelper.change_tick_coord`` is deprecated with no
  replacement.
- ``floating_axes.GridHelperCurveLinear.get_boundary`` is deprecated, with no
  replacement.
- ``ParasiteAxesBase.get_images_artists`` has been deprecated.

- The "units finalize" signal (previously emitted by Axis instances) is
  deprecated. Connect to "units" instead.
- Passing formatting parameters positionally to ``stem()`` is deprecated

``plot_directive`` deprecations
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The ``:encoding:`` option to ``.. plot`` directive has had no effect since
Matplotlib 1.3.1, and is now deprecated.

The following helpers in `matplotlib.sphinxext.plot_directive` are deprecated:

- ``unescape_doctest`` (use `doctest.script_from_examples` instead),
- ``split_code_at_show``, 
- ``run_code``.

Testing support
~~~~~~~~~~~~~~~

``matplotlib.test()`` is deprecated
...................................

Run tests using ``pytest`` from the commandline instead. The variable
``matplotlib.default_test_modules`` is only used for ``matplotlib.test()`` and
is thus deprecated as well.

To test an installed copy, be sure to specify both ``matplotlib`` and
``mpl_toolkits`` with ``--pyargs``::

    python -m pytest --pyargs matplotlib.tests mpl_toolkits.tests

See :ref:`testing` for more details.

Unused pytest fixtures and markers
..................................

The fixture ``matplotlib.testing.conftest.mpl_image_comparison_parameters`` is
not used internally by Matplotlib. If you use this please copy it into your
code base.

The ``@pytest.mark.style`` marker is deprecated; use ``@mpl.style.context``,
which has the same effect.

Support for ``nx1 = None`` or ``ny1 = None`` in ``AxesLocator`` and ``Divider.locate``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In `.axes_grid1.axes_divider`, various internal APIs will stop supporting
passing ``nx1 = None`` or ``ny1 = None`` to mean ``nx + 1`` or ``ny + 1``, in
preparation for a possible future API which allows indexing and slicing of
dividers (possibly ``divider[a:b] == divider.new_locator(a, b)``, but also
``divider[a:] == divider.new_locator(a, <end>)``). The user-facing
`.Divider.new_locator` API is unaffected -- it correctly normalizes ``nx1 =
None`` and ``ny1 = None`` as needed.
Development changes
-------------------

Windows build
~~~~~~~~~~~~~
Previously, when building the ``matplotlib._png`` extension, the build
script would add "png" and "z" to the extensions ``.libraries`` attribute (if
pkg-config information is not available, which is in particular the case on
Windows).

In particular, this implies that the Windows build would look up files named
``png.lib`` and ``z.lib``; but neither libpng upstream nor zlib upstream
provides these files by default.  (On Linux, this would look up ``libpng.so``
and ``libz.so``, which are indeed standard names.)

Instead, on Windows, we now look up ``libpng16.lib`` and ``zlib.lib``, which
*are* the upstream names for the shared libraries (as of libpng 1.6.x).

For a statically-linked build, the upstream names are ``libpng16_static.lib``
and ``zlibstatic.lib``; one still needs to manually rename them if such a build
is desired.

Packaging DLLs
~~~~~~~~~~~~~~
Previously, it was possible to package Windows DLLs into the Matplotlib
wheel (or sdist) by copying them into the source tree and setting the
``package_data.dlls`` entry in ``setup.cfg``.

DLLs copied in the source tree are now always packaged; the
``package_data.dlls`` entry has no effect anymore.  If you do not want to
include the DLLs, don't copy them into the source tree.
Removals
--------
The ``matplotlib.testing.determinism`` module, which exposes no public API, has
been deleted.

The following API elements have been removed:

- ``backend_gtk3.PIXELS_PER_INCH``
- ``backend_pgf.re_escapetext``, ``backend_pgf.re_mathdefault``.
- the ``matplotlib.backends.tkagg``, ``matplotlib.backends.windowing``,
  ``matplotlib.backends.wx_compat``, and ``matplotlib.compat.subprocess``
  modules
- ``RcParams.msg_depr``, ``RcParams.msg_depr_ignore``,
  ``RcParams.msg_depr_set``, ``RcParams.msg_obsolete``,
  ``RcParams.msg_backend_obsolete``
- ``afm.parse_afm`` (use ``afm.AFM instead``)
- ``axes.Axes.mouseover_set``
- ``backend_cairo.ArrayWrapper``, ``backend_cairo.RendererCairo.convert_path``
- ``backend_gtk3.FileChooserDialog.sorted_filetypes`` (use
  ``sorted(self.filetypes.items())`` instead)
- ``backend_pgf.get_texcommand``
- ``backend_pdf.PdfFile.texFontMap``
- ``backend_ps.get_bbox``
- ``backend_qt.FigureCanvasQt.keyAutoRepeat`` (use
  ``event.guiEvent.isAutoRepeat`` instead), ``backend_qt.error_msg_qt``,
  ``backend_qt.exception_handler``
- ``backend_wx.FigureCanvasWx.macros``
- ``backends.pylab_setup``
- ``cbook.Bunch`` (use ``types.SimpleNamespace`` instead), ``cbook.Locked``,
  ``cbook.unicode_safe``, ``cbook.is_numlike`` (use
  ``isinstance(..., numbers.Number)`` instead), ``cbook.mkdirs`` (use
  ``os.makedirs(..., exist_ok=True)`` instead), ``cbook.GetRealpathAndStat``
  (use ``cbook.get_realpath_and_stat`` instead),
  ``cbook.listFiles``
- ``container.Container.set_remove_method``
- ``contour.ContourLabeler.cl``, ``contour.ContourLabeler.cl_xy``,
  ``contour.ContourLabeler.cl_cvalues`` (use ``labelTexts``, ``labelXYs``,
  ``labelCValues`` instead)
- ``dates.DateFormatter.strftime``, ``dates.DateFormatter.strftime_pre_1900``
- ``font_manager.TempCache``, ``font_manager.FontManager.ttffiles``,
  ``font_manager.FontManager.afmfiles``
- ``mathtext.unichr_safe`` (use ``chr`` instead)
- ``patches.YAArrow`` (use ``patches.FancyArrowPatch`` instead)
- ``sphinxext.plot_directive.remove_coding``
- ``table.Table.get_child_artists``
- ``testing.compare.compare_float``, ``testing.decorators.CleanupTest``,
  ``testing.decorators.ImageComparisonTest``,
  ``testing.decorators.skip_if_command_unavailable``,
  support for nose-based tests
- ``text.Annotation.arrow`` (use ``text.Annotation.arrow_patch`` instead)
- ``textpath.TextToPath.tex_font_map``
- ``ticker.Base``, ``ticker.closeto``, ``ticker.nearest_long``
- ``axes_grid1.axes_divider.LocatableAxesBase``,
  ``axes_grid1.axes_divider.locatable_axes_factory``,
  ``axes_grid1.axes_divider.Axes`` (use ``axes_grid1.mpl_axes.Axes`` instead),
  ``axes_grid1.axes_divider.LocatableAxes`` (use ``axes_grid1.mpl_axes.Axes``
  instead)
- ``axisartist.axes_divider.Axes``, ``axisartist.axes_divider.LocatableAxes``
  (use ``axisartist.axislines.Axes`` instead)
- the *normed* keyword argument to ``hist`` (use *density* instead)
- passing ``(verts, 0)`` or ``(..., 3)`` when specifying a marker to specify a
  path or a circle, respectively (instead, use ``verts`` or ``"o"``,
  respectively)
- :rc:`examples.directory`

The following members of ``matplotlib.backends.backend_pdf.PdfFile`` were removed:

- ``nextObject``
- ``nextFont``
- ``nextAlphaState``
- ``nextHatch``
- ``nextImage``
- ``alphaStateObject``

The ``required_interactive_framework`` attribute of backend modules introduced
in Matplotlib 3.0 has been moved to the ``FigureCanvas`` class, in order to
let it be inherited by third-party canvas subclasses and to make it easier to
know what interactive framework is required by a canvas class.

``backend_qt4.FigureCanvasQT5``, which is an alias for
``backend_qt5.FigureCanvasQT`` (but only exists under that name in
``backend_qt4``), has been removed.


Behavior changes
----------------

Reduced default value of :rc:`axes.formatter.limits`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Changed the default value of :rc:`axes.formatter.limits` from -7, 7 to
-5, 6 for better readability.

.. plot::

   import matplotlib.pyplot as plt
   import numpy as np

   fig, (ax_old, ax_new) = plt.subplots(1, 2, constrained_layout=True)

   ax_new.set_title('new values (-5, 6)')
   ax_old.set_title('old values (-7, 7)')

   x = np.logspace(-8, 8, 1024)
   y = 1e-5 * np.exp(-x / 1e5) + 1e-6

   ax_old.xaxis.get_major_formatter().set_powerlimits((-7, 7))
   ax_old.yaxis.get_major_formatter().set_powerlimits((-7, 7))

   for ax in [ax_new, ax_old]:
       ax.plot(x, y)
       ax.set_xlim(0, 1e6)
       ax.set_ylim(1e-6, 1e-5)


`matplotlib.colorbar.Colorbar` uses un-normalized axes for all mappables
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Before 3.0, `matplotlib.colorbar.Colorbar` (`~.Figure.colorbar`) normalized
all axes limits between 0 and 1 and had custom tickers to handle the
labelling of the colorbar ticks.  After 3.0, colorbars constructed from
mappables that were *not* contours were constructed with axes that had
limits between ``vmin`` and ``vmax`` of the mappable's norm, and the tickers
were made children of the normal axes tickers.

This version of Matplotlib extends that to mappables made by contours, and
allows the axes to run between the lowest boundary in the contour and the
highest.

Code that worked around the normalization between 0 and 1 will need to be
modified.

``MovieWriterRegistry``
~~~~~~~~~~~~~~~~~~~~~~~
`.MovieWriterRegistry` now always checks the availability of the writer classes
before returning them.  If one wishes, for example, to get the first available
writer, without performing the availability check on subsequent writers, it is
now possible to iterate over the registry, which will yield the names of the
available classes.

.. _api-changes-3-2-0-autoscaling:

Autoscaling
~~~~~~~~~~~

Matplotlib used to recompute autoscaled limits after every plotting
(``plot()``, ``bar()``, etc.) call.  It now only does so when actually
rendering the canvas, or when the user queries the Axes limits.  This is a
major performance improvement for plots with a large number of artists.

In particular, this means that artists added manually with `.Axes.add_line`,
`.Axes.add_patch`, etc. will be taken into account by the autoscale, even
without an explicit call to `.Axes.autoscale_view`.

In some cases, this can result in different limits being reported.  If this is
an issue, consider triggering a draw with ``fig.canvas.draw()``.

Autoscaling has also changed for artists that are based on the `.Collection`
class.  Previously, the method that calculates the automatic limits
`.Collection.get_datalim` tried to take into account the size of objects
in the collection and make the limits large enough to not clip any of the
object, i.e., for `.Axes.scatter` it would make the limits large enough to not
clip any markers in the scatter.  This is problematic when the object size is
specified in physical space, or figure-relative space, because the transform
from physical units to data limits requires knowing the data limits, and
becomes invalid when the new limits are applied.  This is an inverse
problem that is theoretically solvable (if the object is physically smaller
than the axes), but the extra complexity was not deemed worth it, particularly
as the most common use case is for markers in scatter that are usually small
enough to be accommodated by the default data limit margins.

While the new behavior is algorithmically simpler, it is conditional on
properties of the `.Collection` object:

  1. ``offsets = None``, ``transform`` is a child of `.Axes.transData`: use the paths
     for the automatic limits (i.e. for `.LineCollection` in `.Axes.streamplot`).
  2.  ``offsets != None``, and ``offset_transform`` is child of `.Axes.transData`:

    a) ``transform`` is child of `.Axes.transData`: use the ``path + offset`` for
        limits (i.e., for `.Axes.bar`).
    b) ``transform`` is not a child of `.Axes.transData`: just use the offsets
        for the limits (i.e. for scatter)

  3. otherwise return a null `.Bbox`.

While this seems complicated, the logic is simply to use the information from
the object that are in data space for the limits, but not information that is
in physical units.

log-scale bar() / hist() autolimits
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The autolimits computation in `~.Axes.bar` and `~.Axes.hist` when the axes
already uses log-scale has changed to match the computation when the axes is
switched to log-scale after the call to `~.Axes.bar` and `~.Axes.hist`, and
when calling ``bar(..., log=True)`` / ``hist(..., log=True)``: if there are
at least two different bar heights, add the normal axes margins to them (in
log-scale); if there is only a single bar height, expand the axes limits by one
order of magnitude around it and then apply axes margins.


Axes labels spanning multiple rows/columns
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

``Axes.label_outer`` now correctly keep the x labels and tick labels visible
for Axes spanning multiple rows, as long as they cover the last row of the Axes
grid.  (This is consistent with keeping the y labels and tick labels visible
for Axes spanning multiple columns as long as they cover the first column of
the Axes grid.)

The ``Axes.is_last_row`` and ``Axes.is_last_col`` methods now correctly return
True for Axes spanning multiple rows, as long as they cover the last row or
column respectively.  Again this is consistent with the behavior for axes
covering the first row or column.

The ``Axes.rowNum`` and ``Axes.colNum`` attributes are deprecated, as they only
refer to the first grid cell covered by the Axes.  Instead, use the new
``ax.get_subplotspec().rowspan`` and ``ax.get_subplotspec().colspan``
properties, which are `range` objects indicating the whole span of rows and
columns covered by the subplot.

(Note that all methods and attributes mentioned here actually only exist on
the ``Subplot`` subclass of `~.axes.Axes`, which is used for grid-positioned Axes but
not for Axes positioned directly in absolute coordinates.)

The `.GridSpec` class gained the ``nrows`` and ``ncols`` properties as more
explicit synonyms for the parameters returned by ``GridSpec.get_geometry``.


Locators
~~~~~~~~
When more than `.Locator.MAXTICKS` ticks are generated, the behavior of
`.Locator.raise_if_exceeds` changed from raising a RuntimeError to emitting a
log at WARNING level.

nonsingular Locators
~~~~~~~~~~~~~~~~~~~~
``Locator.nonsingular`` (introduced in mpl 3.1), ``DateLocator.nonsingular``, and
``AutoDateLocator.nonsingular`` now returns a range ``v0, v1`` with ``v0 <= v1``.
This behavior is consistent with the implementation of ``nonsingular`` by the
``LogLocator`` and ``LogitLocator`` subclasses.

``get_data_ratio``
~~~~~~~~~~~~~~~~~~
``Axes.get_data_ratio`` now takes the axes scale into account (linear, log,
logit, etc.) before computing the y-to-x ratio.  This change allows fixed
aspects to be applied to any combination of x and y scales.

Artist sticky edges
~~~~~~~~~~~~~~~~~~~
Previously, the ``sticky_edges`` attribute of artists was a list of values such
that if an axis limit coincides with a sticky edge, it would not be expanded by
the axes margins (this is the mechanism that e.g. prevents margins from being
added around images).

``sticky_edges`` now have an additional effect on margins application: even if
an axis limit did not coincide with a sticky edge, it cannot *cross* a sticky
edge through margin application -- instead, the margins will only expand the
axis limit until it bumps against the sticky edge.

This change improves the margins of axes displaying a `~.Axes.streamplot`:

- if the streamplot goes all the way to the edges of the vector field, then the
  axis limits are set to match exactly the vector field limits (whereas they
  would sometimes be off by a small floating point error previously).
- if the streamplot does not reach the edges of the vector field (e.g., due to
  the use of ``start_points`` and ``maxlength``), then margins expansion will
  not cross the vector field limits anymore.

This change is also used internally to ensure that polar plots don't display
negative *r* values unless the user really passes in a negative value.

``gid`` in svg output
~~~~~~~~~~~~~~~~~~~~~
Previously, if a figure, axis, legend or some other artists had a custom
``gid`` set (e.g. via ``.set_gid()``), this would not be reflected in
the svg output. Instead a default gid, like ``figure_1`` would be shown.
This is now fixed, such that e.g. ``fig.set_gid("myfigure")`` correctly
shows up as ``<g id="myfigure">`` in the svg file. If you relied on the
gid having the default format, you now need to make sure not to set the
``gid`` parameter of the artists.

Fonts
~~~~~
Font weight guessing now first checks for the presence of the FT_STYLE_BOLD_FLAG
before trying to match substrings in the font name.  In particular, this means
that Times New Roman Bold is now correctly detected as bold, not normal weight.

Color-like checking
~~~~~~~~~~~~~~~~~~~
`matplotlib.colors.is_color_like` used to return True for all string
representations of floats. However, only those with values in 0-1 are valid
colors (representing grayscale values). `.is_color_like` now returns False
for string representations of floats outside 0-1.

Default image interpolation
~~~~~~~~~~~~~~~~~~~~~~~~~~~
Images displayed in Matplotlib previously used nearest-neighbor
interpolation, leading to aliasing effects for downscaling and non-integer
upscaling.

New default for :rc:`image.interpolation` is the new option "antialiased".
``imshow(A, interpolation='antialiased')`` will apply a Hanning filter when
resampling the data in A for display (or saving to file) *if* the upsample
rate is less than a factor of three, and not an integer; downsampled data is
always smoothed at resampling.

To get the old behavior, set :rc:`image.interpolation` to the old default "nearest"
(or specify the ``interpolation`` kwarg of `.Axes.imshow`)

To always get the anti-aliasing behavior, no matter what the up/down sample
rate, set :rc:`image.interpolation` to "hanning" (or one of the other filters
available).

Note that the "hanning" filter was chosen because it has only a modest
performance penalty.  Anti-aliasing can be improved with other filters.

rcParams
~~~~~~~~
When using `.RendererSVG` with ``rcParams["svg.image_inline"] ==
True``, externally written images now use a single counter even if the
``renderer.basename`` attribute is overwritten, rather than a counter per
basename.

This change will only affect you if you used ``rcParams["svg.image_inline"] = True``
(the default is False) *and* manually modified ``renderer.basename``.

Changed the default value of :rc:`axes.formatter.limits` from -7, 7 to -5, 6
for better readability.

``add_subplot()``
~~~~~~~~~~~~~~~~~
`.Figure.add_subplot()` and `.pyplot.subplot()` do not accept a *figure*
keyword argument anymore. It only used to work anyway if the passed figure
was ``self`` or the current figure, respectively.

``indicate_inset()``
~~~~~~~~~~~~~~~~~~~~
In <= 3.1.0, `~matplotlib.axes.Axes.indicate_inset` and
`~matplotlib.axes.Axes.indicate_inset_zoom` were documented as returning
a 4-tuple of `~matplotlib.patches.ConnectionPatch`, where in fact they
returned a 4-length list.

They now correctly return a 4-tuple.
`~matplotlib.axes.Axes.indicate_inset` would previously raise an error if
the optional *inset_ax* was not supplied; it now completes successfully,
and returns *None* instead of the tuple of ``ConnectionPatch``.

PGF backend
~~~~~~~~~~~
The pgf backend's get_canvas_width_height now returns the canvas size in
display units rather than in inches, which it previously did.
The new behavior is the correct one given the uses of ``get_canvas_width_height``
in the rest of the codebase.

The pgf backend now includes images using ``\includegraphics`` instead of
``\pgfimage`` if the version of ``graphicx`` is recent enough to support the
``interpolate`` option (this is detected automatically).

`~matplotlib.cbook`
~~~~~~~~~~~~~~~~~~~
The default value of the "obj_type" parameter to ``cbook.warn_deprecated`` has
been changed from "attribute" (a default that was never used internally) to the
empty string.

Testing
~~~~~~~
The test suite no longer turns on the Python fault handler by default.
Set the standard ``PYTHONFAULTHANDLER`` environment variable to do so.

Backend ``supports_blit``
~~~~~~~~~~~~~~~~~~~~~~~~~
Backends do not need to explicitly define the flag ``supports_blit`` anymore.
This is only relevant for backend developers. Backends had to define the flag
``supports_blit``. This is not needed anymore because the blitting capability
is now automatically detected.

Exception changes
~~~~~~~~~~~~~~~~~
Various APIs that raised a `ValueError` for incorrectly typed inputs now raise
`TypeError` instead: `.backend_bases.GraphicsContextBase.set_clip_path`,
`.blocking_input.BlockingInput.__call__`, `.cm.register_cmap`, `.dviread.DviFont`,
`.rcsetup.validate_hatch`, ``.rcsetup.validate_animation_writer_path``, `.spines.Spine`,
many classes in the :mod:`matplotlib.transforms` module and :mod:`matplotlib.tri`
package, and Axes methods that take a ``norm`` parameter.

If extra kwargs are passed to `.LogScale`, `TypeError` will now be
raised instead of `ValueError`.

mplot3d auto-registration
~~~~~~~~~~~~~~~~~~~~~~~~~

`mpl_toolkits.mplot3d` is always registered by default now. It is no
longer necessary to import mplot3d to create 3d axes with ::

  ax = fig.add_subplot(111, projection="3d")

`.SymLogNorm` now has a *base* parameter
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Previously, `.SymLogNorm` had no *base* keyword argument and the base was
hard-coded to ``base=np.e``. This was inconsistent with the default behavior of
`.SymmetricalLogScale` (which defaults to ``base=10``) and the use of the word
"decade" in the documentation.

In preparation for changing the default base to 10, calling `.SymLogNorm`
without the new *base* keyword argument emits a deprecation warning.

Deprecations
------------

`matplotlib.use`
~~~~~~~~~~~~~~~~
The ``warn`` parameter to `matplotlib.use()` is deprecated (catch the
`ImportError` emitted on backend switch failure and reemit a warning yourself
if so desired).

plotfile
~~~~~~~~
``.pyplot.plotfile`` is deprecated in favor of separately loading and plotting
the data.  Use pandas or NumPy to load data, and pandas or matplotlib to plot
the resulting data.

axes and axis
~~~~~~~~~~~~~
Setting ``Axis.major.locator``, ``Axis.minor.locator``, ``Axis.major.formatter``
or ``Axis.minor.formatter`` to an object that is not a subclass of `.Locator` or
`.Formatter` (respectively) is deprecated.  Note that these attributes should
usually be set using `.Axis.set_major_locator`, `.Axis.set_minor_locator`, etc.
which already raise an exception when an object of the wrong class is passed.

Passing more than one positional argument or unsupported keyword arguments to
`~matplotlib.axes.Axes.axis()` is deprecated (such arguments used to be
silently ignored).

``minor`` argument will become keyword-only
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Using the parameter ``minor`` to ``get_*ticks()`` / ``set_*ticks()`` as a
positional parameter is deprecated. It will become keyword-only in future
versions.

``axes_grid1``
~~~~~~~~~~~~~~
The ``mpl_toolkits.axes_grid1.colorbar`` module and its colorbar implementation
are deprecated in favor of :mod:`matplotlib.colorbar`, as the former is
essentially abandoned and the latter is a more featureful replacement with a
nearly compatible API (for example, the following additional keywords are
supported: ``panchor``, ``extendfrac``, ``extendrect``).

The main differences are:

- Setting the ticks on the colorbar is done by calling ``colorbar.set_ticks``
  rather than ``colorbar.cbar_axis.set_xticks`` or
  ``colorbar.cbar_axis.set_yticks``; the ``locator`` parameter to ``colorbar()``
  is deprecated in favor of its synonym ``ticks`` (which already existed
  previously, and is consistent with :mod:`matplotlib.colorbar`).
- The colorbar's long axis is accessed with ``colorbar.xaxis`` or
  ``colorbar.yaxis`` depending on the orientation, rather than
  ``colorbar.cbar_axis``.
- The default ticker is no longer ``MaxNLocator(5)``, but a
  ``_ColorbarAutoLocator``.
- Overdrawing multiple colorbars on top of one another in a single Axes (e.g.
  when using the ``cax`` attribute of `~.axes_grid1.axes_grid.ImageGrid`
  elements) is not supported; if you previously relied on the second colorbar
  being drawn over the first, you can call ``cax.cla()`` to clear the axes
  before drawing the second colorbar.

During the deprecation period, the ``mpl_toolkits.legacy_colorbar``
rcParam can be set to True to use ``mpl_toolkits.axes_grid1.colorbar`` in
:mod:`mpl_toolkits.axes_grid1` code with a deprecation warning (the default),
or to False to use ``matplotlib.colorbar``.

Passing a ``pad`` size of ``None`` (the default) as a synonym for zero to
the ``append_axes``, ``new_horizontal`` and ``new_vertical`` methods of
`.axes_grid1.axes_divider.AxesDivider` is deprecated.  In a future release, the
default value of ``None`` will mean "use :rc:`figure.subplot.wspace` or
:rc:`figure.subplot.hspace`" (depending on the orientation).  Explicitly pass
``pad=0`` to keep the old behavior.

Axes3D
~~~~~~
``mplot3d.axis3d.get_flip_min_max`` is deprecated.

``axes3d.unit_bbox`` is deprecated (use ``Bbox.unit`` instead).

``axes3d.Axes3D.w_xaxis``, ``.w_yaxis``, and ``.w_zaxis`` are deprecated (use
``.xaxis``, ``.yaxis``, and ``.zaxis`` instead).

`matplotlib.cm`
~~~~~~~~~~~~~~~
``cm.revcmap`` is deprecated.  Use `.Colormap.reversed` to reverse a colormap.

``cm.datad`` no longer contains entries for reversed colormaps in their
"unconverted" form.

axisartist
~~~~~~~~~~
``mpl_toolkits.axisartist.grid_finder.GridFinderBase`` is deprecated (its
only use is to be inherited by the `.GridFinder` class which just provides
more defaults in the constructor and directly sets the transforms, so
``GridFinderBase``'s methods were just moved to `.GridFinder`).

``axisartist.axis_artist.BezierPath`` is deprecated (use `.patches.PathPatch`
to draw arbitrary Paths).

``AxisArtist.line`` is now a `.patches.PathPatch` instance instead of a
``BezierPath`` instance.

Returning a factor equal to None from axisartist Locators (which are **not**
the same as "standard" tick Locators), or passing a factor equal to None
to axisartist Formatters (which are **not** the same as "standard" tick
Formatters) is deprecated.  Pass a factor equal to 1 instead.

For the `mpl_toolkits.axisartist.axis_artist.AttributeCopier` class, the
constructor and the ``set_ref_artist`` method, and the *default_value*
parameter of ``get_attribute_from_ref_artist``, are deprecated.

Deprecation of the constructor means that classes inheriting from
`.AttributeCopier` should no longer call its constructor.

Locators
~~~~~~~~
The unused ``Locator.autoscale`` method is deprecated (pass the axis limits to
`.Locator.view_limits` instead).

Animation
~~~~~~~~~
The following methods and attributes of the `.MovieWriterRegistry` class are
deprecated: ``set_dirty``, ``ensure_not_dirty``, ``reset_available_writers``,
``avail``.

``smart_bounds()``
~~~~~~~~~~~~~~~~~~
The "smart_bounds" functionality is deprecated.  This includes
``Axis.set_smart_bounds()``, ``Axis.get_smart_bounds()``,
``Spine.set_smart_bounds()``, and ``Spine.get_smart_bounds()``.

``boxplot()``
~~~~~~~~~~~~~
Setting the ``whis`` parameter of `.Axes.boxplot` and `.cbook.boxplot_stats` to
"range" to mean "the whole data range" is deprecated; set it to (0, 100) (which
gets interpreted as percentiles) to achieve the same effect.

``fill_between()``
~~~~~~~~~~~~~~~~~~
Passing scalars to parameter *where* in ``fill_between()`` and
``fill_betweenx()`` is deprecated. While the documentation already states that
*where* must be of the same size as *x* (or *y*), scalars were accepted and
broadcasted to the size of *x*. Non-matching sizes will raise a ``ValueError``
in the future.

``scatter()``
~~~~~~~~~~~~~
Passing the *verts* parameter to `.axes.Axes.scatter` is deprecated; use the
*marker* parameter instead.

``tight_layout()``
~~~~~~~~~~~~~~~~~~
The ``renderer`` parameter to `.Figure.tight_layout` is deprecated; this method
now always uses the renderer instance cached on the `.Figure`.

rcParams
~~~~~~~~
The ``rcsetup.validate_animation_writer_path`` function is deprecated.

Setting :rc:`savefig.format` to "auto" is deprecated; use its synonym "png" instead.

Setting :rc:`text.hinting` to True or False is deprecated; use their synonyms
"auto" or "none" instead.

``rcsetup.update_savefig_format`` is deprecated.

``rcsetup.validate_path_exists`` is deprecated (use ``os.path.exists`` to check
whether a path exists).

``rcsetup.ValidateInterval`` is deprecated.

Dates
~~~~~
``dates.mx2num`` is deprecated.

TK
~~
``NavigationToolbar2Tk.set_active`` is deprecated, as it has no (observable)
effect.

WX
~~
``FigureFrameWx.statusbar`` and ``NavigationToolbar2Wx.statbar`` are deprecated.
The status bar can be retrieved by calling standard wx methods
(``frame.GetStatusBar()`` and ``toolbar.GetTopLevelParent().GetStatusBar()``).

``backend_wx.ConfigureSubplotsWx.configure_subplots`` and
``backend_wx.ConfigureSubplotsWx.get_canvas`` are deprecated.

PGF
~~~
``backend_pgf.repl_escapetext`` and ``backend_pgf.repl_mathdefault`` are
deprecated.

``RendererPgf.latexManager`` is deprecated.

FigureCanvas
~~~~~~~~~~~~
``FigureCanvasBase.draw_cursor`` (which has never done anything and has never
been overridden in any backend) is deprecated.

``FigureCanvasMac.invalidate`` is deprecated in favor of its synonym,
``FigureCanvasMac.draw_idle``.

The ``dryrun`` parameter to the various ``FigureCanvasFoo.print_foo`` methods
is deprecated.


QuiverKey doc
~~~~~~~~~~~~~
``quiver.QuiverKey.quiverkey_doc`` is deprecated; use
``quiver.QuiverKey.__init__.__doc__`` instead.

`matplotlib.mlab`
~~~~~~~~~~~~~~~~~
``mlab.apply_window`` and ``mlab.stride_repeat`` are deprecated.

Fonts
~~~~~
``font_manager.JSONEncoder`` is deprecated.  Use `.font_manager.json_dump` to
dump a `.FontManager` instance.

``font_manager.createFontList`` is deprecated.  `.font_manager.FontManager.addfont`
is now available to register a font at a given path.

The ``as_str``, ``as_rgba_str``, ``as_array``, ``get_width`` and ``get_height``
methods of ``matplotlib.ft2font.FT2Image`` are deprecated.  Convert the ``FT2Image``
to a NumPy array with ``np.asarray`` before processing it.

Colors
~~~~~~
The function ``matplotlib.colors.makeMappingArray`` is not considered part of
the public API any longer. Thus, it's deprecated.

Using a string of single-character colors as a color sequence (e.g. "rgb") is
deprecated. Use an explicit list instead.

Scales
~~~~~~
Passing unsupported keyword arguments to `.ScaleBase`, and its subclasses
`.LinearScale` and `.SymmetricalLogScale`, is deprecated and will raise a
`TypeError` in 3.3.

If extra keyword arguments are passed to `.LogScale`, `TypeError` will now be
raised instead of `ValueError`.

Testing
~~~~~~~
The ``matplotlib.testing.disable_internet`` module is deprecated.  Use (for
example) pytest-remotedata_ instead.

.. _pytest-remotedata: https://pypi.org/project/pytest-remotedata/

Support in `matplotlib.testing` for nose-based tests is deprecated (a
deprecation is emitted if using e.g. the decorators from that module while
both 1) matplotlib's conftests have not been called and 2) nose is in
``sys.modules``).

``testing.is_called_from_pytest`` is deprecated.

During the deprecation period, to force the generation of nose base tests,
import nose first.

The *switch_backend_warn* parameter to ``matplotlib.test`` has no effect and is
deprecated.

``testing.jpl_units.UnitDbl.UnitDbl.checkUnits`` is deprecated.

``DivergingNorm`` renamed to ``TwoSlopeNorm``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

``DivergingNorm`` was a misleading name; although the norm was
developed with the idea that it would likely be used with diverging
colormaps, the word 'diverging' does not describe or evoke the norm's
mapping function.  Since that function is monotonic, continuous, and
piece-wise linear with two segments, the norm has been renamed to
`.TwoSlopeNorm`

Misc
~~~~
``matplotlib.get_home`` is deprecated (use e.g. ``os.path.expanduser("~")``)
instead.

``matplotlib.compare_versions`` is deprecated (use comparison of
``distutils.version.LooseVersion``\s instead).

``matplotlib.checkdep_ps_distiller`` is deprecated.

``matplotlib.figure.AxesStack`` is considered private API and will be removed
from the public API in future versions.

``BboxBase.is_unit`` is deprecated (check the Bbox extents if needed).

``Affine2DBase.matrix_from_values(...)`` is deprecated.  Use (for example)
``Affine2D.from_values(...).get_matrix()`` instead.

``style.core.is_style_file`` and ``style.core.iter_style_files``
are deprecated.

The ``datapath`` rcParam
~~~~~~~~~~~~~~~~~~~~~~~~
Use `.get_data_path` instead.  (The rcParam is deprecated because it cannot be
meaningfully set by an end user.)  The rcParam had no effect from 3.2.0, but
was deprecated only in 3.2.1.  In 3.2.1+ if ``'datapath'`` is set in a
``matplotlibrc`` file it will be respected, but this behavior will be removed in 3.3.
:orphan:

Adding API change notes
=======================

API change notes for future releases are collected in
:file:`next_api_changes`. They are divided into four subdirectories:

- **Deprecations**: Announcements of future changes. Typically, these will
  raise a deprecation warning and users of this API should change their code
  to stay compatible with future releases of Matplotlib. If possible, state
  what should be used instead.
- **Removals**: Parts of the API that got removed. If possible, state what
  should be used instead.
- **Behaviour changes**: API that stays valid but will yield a different
  result.
- **Development changes**: Changes to the build process, dependencies, etc.

Please place new entries in these directories with a new file named
``99999-ABC.rst``, where ``99999`` would be the PR number, and ``ABC`` the
author's initials. Typically, each change will get its own file, but you may
also amend existing files when suitable. The overall goal is a comprehensible
documentation of the changes.

Please avoid using references in section titles, as it causes links to be
confusing in the table of contents. Instead, ensure that a reference is
included in the descriptive text. A typical entry could look like this::

   Locators
   ~~~~~~~~
   The unused `Locator.autoscale()` method is deprecated (pass the axis
   limits to `Locator.view_limits()` instead).
``AFM``, ``configfont_pattern`` and ``Type1Font`` deprecated
------------------------------------------------------------

The modules ``matplotlib.AFM``, ``matplotlib.configfont_pattern``, and
``matplotlib.Type1Font`` are considered internal and public access is
deprecated.``RendererGTK3Cairo`` and ``RendererGTK4Cairo``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... have been deprecated.  Use ``RendererCairo`` instead, which has gained the
``set_context`` method.
Template for deprecations
~~~~~~~~~~~~~~~~~~~~~~~~~

Add description here...

Please rename file with PR number and your initials i.e. "99999-ABC.rst"
and ``git add`` the new file.
``transOffset`` parameter name
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The ``transOffset`` parameter of `.Collection.set_offset_transform` and the
various ``create_collection`` methods of legend handlers has been renamed to
``offset_transform`` (consistently with the property name).
``NavigationToolbar2GTK3`` window
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The *window* parameter to ``NavigationToolbar2GTK3`` had no effect, and is now
deprecated; likewise, the ``win`` attribute is deprecated.

``NavigationToolbar2Tk`` window
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The *window* attribute to ``NavigationToolbar2GTK3`` is deprecated.  Use
``toolbar.master`` instead.
``backend_pgf``
~~~~~~~~~~~~~~~
The following API elements have been deprecated with no
replacement: ``NO_ESCAPE``, ``re_mathsep``, ``get_fontspec``, ``get_preamble``,
``common_texification``, ``writeln``.
``FigureManagerGTK3Agg`` and ``FigureManagerGTK4Agg``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... are deprecated; directly use ``FigureManagerGTK3`` and
``FigureManagerGTK4`` instead.
``backend_svg.generate_transform`` and ``backend_svg.generate_css``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... are deprecated with no replacement.
Calling ``MarkerStyle()`` with no arguments or ``MarkerStyle(None)``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... is deprecated; use ``MarkerStyle("")`` to construct an empty marker style.
``axes_grid`` and ``axisartist`` removals
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following deprecated APIs have been removed:

- ``SubplotDivider.figbox``, ``SubplotDivider.update_params``,
- ``SubplotDivider.get_geometry`` (use ``get_subplotspec`` instead),
- ``change_geometry`` (use ``set_subplotspec`` instead),
- ``ParasiteAxesBase.update_viewlim`` (use ``apply_aspect`` instead),
- ``ParasiteAxesAuxTransBase`` (use ``ParasiteAxesBase`` instead),
- ``parasite_axes_auxtrans_class_factory`` (use ``parasite_axes_class_factory``
  instead),
-  ``ParasiteAxesAuxTrans`` (use ``ParasiteAxes`` instead),
*cleared* parameter of ``get_renderer``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This parameter, which only existed for agg-based backends, has been deprecated.
Use ``renderer.clear()`` instead to explicitly clear the renderer buffer.
``Axes3D.dist``
~~~~~~~~~~~~~~~
... has been privatized. Use the ``zoom`` keyword argument in
`.Axes3D.set_box_aspect` instead.
``AxisArtistHelper.delta1`` and ``AxisArtistHelper.delta2``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... are deprecated with no replacement.
In the future, ``dviread.find_tex_file`` will raise a ``FileNotFoundError`` for missing files
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Previously, it would return an empty string in such cases.  Raising an
exception allows attaching a user-friendly message instead.  During the
transition period, a warning is raised.
``backend_gtk3.icon_filename`` and ``backend_gtk3.window_icon``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... are deprecated with no replacement.
Modules ``tight_bbox`` and ``tight_layout`` deprecated
------------------------------------------------------

The modules ``matplotlib.tight_bbox`` and ``matplotlib.tight_layout`` are
considered internal and public access is deprecated.``lastrect``
~~~~~~~~~~~~
The ``lastrect`` attribute of ``NavigationToolbar2Tk`` and ``RubberbandTk`` is
deprecated.
``FigureFrameWx`` attributes and methods
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- ``sizer`` is deprecated (use ``frame.GetSizer()`` instead).
- ``figmgr`` and ``get_figure_manager`` are deprecated (use
  ``frame.canvas.manager`` instead).
- ``num`` is deprecated (use ``frame.canvas.manager.num`` instead).
- ``toolbar`` is deprecated (use ``frame.GetToolBar()``
  instead).
- ``toolmanager`` is deprecated (use ``frame.canvas.manager.toolmanager``
  instead).

``RendererWx.offset_text_height``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... is deprecated.
``mlab.stride_windows``
~~~~~~~~~~~~~~~~~~~~~~~
... is deprecated.  Use ``np.lib.stride_tricks.sliding_window_view`` instead
(or ``np.lib.stride_tricks.as_strided`` on numpy<1.20).
``Axes.get_window_extent`` and ``Figure.get_window_extent`` won't accept parameters other than *renderer* anymore
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This aligns the API with the general `.Artist.get_window_extent` API.
All parameters were ignored anyway.
``matplotlib.cbook.maxdict`` is deprecated
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This class has been deprecated in favor of the standard library
``functools.lru_cache``.
``ImageMagickBase.delay`` and ``ImageMagickBase.output_args``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
are deprecated with no replacement.
``backend_gtk3.error_msg_gtk`` and ``backend_wx.error_msg_wx``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... are deprecated.
``FigureCanvas`` without a ``required_interactive_framework`` attribute
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Support for such canvas classes is deprecated.  Note that canvas classes which
inherit from ``FigureCanvasBase`` always have such an attribute.
``FigureCanvasBase.resize``
~~~~~~~~~~~~~~~~~~~~~~~~~~~
This method has no effect and is deprecated.  Use ``FigureManagerBase.resize``
instead.
Selector widget state internals
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The *state_modifier_keys* attribute have been privatized and the modifier keys
needs to be set when creating the widget.
seaborn styles renamed
~~~~~~~~~~~~~~~~~~~~~~
Matplotlib currently ships many style files inspired from the seaborn
library ("seaborn", "seaborn-bright", "seaborn-colorblind", etc.) but they
have gone out of sync with the library itself since the release of seaborn
0.9.  To prevent confusion, the style files have been renamed "seaborn0.8",
"seaborn0.8-bright", "seaborn0.8-colorblind", etc.  Users are encouraged to
directly use seaborn to access the up-to-date styles.
Development Change template
~~~~~~~~~~~~~~~~~~~~~~~~~~~

Enter description here....

Please rename file with PR number and your initials i.e. "99999-ABC.rst"
and ``git add`` the new file.  
Increase to minimum supported versions of Python and dependencies
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

For Matplotlib 3.6, the :ref:`minimum supported versions <dependencies>` are
being bumped:

+------------+-----------------+---------------+
| Dependency |  min in mpl3.5  | min in mpl3.6 |
+============+=================+===============+
|   NumPy    |       1.17      |      1.19     |
+------------+-----------------+---------------+

This is consistent with our :ref:`min_deps_policy` and `NEP29
<https://numpy.org/neps/nep-0029-deprecation_policy.html>`__

``gui_support.macosx`` setup option has been renamed to ``packages.macosx``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
``backend_tools.ToolFullScreen`` now inherits from ``ToolBase``, not from ``ToolToggleBase``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
`.ToolFullScreen` can only switch between the non-fullscreen
and fullscreen states, but not unconditionally put the window in a given state;
hence the ``enable`` and ``disable`` methods were misleadingly named.  Thus,
the `.ToolToggleBase`-related API (``enable``, ``disable``, etc.) was removed.
Unknown keyword arguments to ``savefig`` and ``FigureCanvas.print_foo`` methods
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... now raise a TypeError, instead of being ignored.
Removal Change template
~~~~~~~~~~~~~~~~~~~~~~~

Enter description of methods/classes removed here....

Please rename file with PR number and your initials i.e. "99999-ABC.rst"
and ``git add`` the new file.  
Support for passing tool names to ``ToolManager.add_tool``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... has been removed.  The second parameter to add_tool must now always be a
tool class.
Removal of mplot3d deprecations
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The deprecated ``renderer`` arguments have been removed from:

- `.Line3DCollection.do_3d_projection`
- `.Patch3D.do_3d_projection`
- `.PathPatch3D.do_3d_projection`
- `.Path3DCollection.do_3d_projection`
- `.Patch3DCollection.do_3d_projection`
- `.Poly3DCollection.do_3d_projection`

The deprecated ``project`` argument has also been removed from
``Line3DCollection.draw()``.

Passing arguments not specifically listed in the signatures of
`.Axes3D.plot_surface` and `.Axes3D.plot_wireframe` is no longer supported.
Pass any extra arguments as keyword arguments instead.

These properties of the 3D Axes that were placed on the Renderer during draw
have been removed:

* ``renderer.M``
* ``renderer.eye``
* ``renderer.vvec``
* ``renderer.get_axis_position``

These attributes are all available via `.Axes3D`, which can be accessed via
``self.axes`` on all `.Artist`\s.
Removal of deprecated ``mathtext`` APIs
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following `matplotlib.mathtext` APIs have been removed:
- ``Fonts`` and all its subclasses,
- ``FontConstantsBase`` and all its subclasses,
- ``Node`` and all its subclasses,
- ``Ship``, ``ship``,
- ``Error``,
- ``Parser``,
- ``SHRINK_FACTOR``, ``GROW_FACTOR``,
- ``NUM_SIZE_LEVELS``,
- ``latex_to_bakoma``, ``latex_to_cmex``, ``latex_to_standard``,
- ``stix_virtual_fonts``,
- ``tex2uni``

Removal of various ``mathtext`` helpers
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following `matplotlib.mathtext` classes:
- ``MathtextBackendPdf``,
- ``MathtextBackendPs``,
- ``MathtextBackendSvg``,
- ``MathtextBackendCairo``,
and the ``.mathtext_parser`` attributes on
- `.RendererPdf`,
- `.RendererPS`,
- `.RendererSVG`,
- `.RendererCairo`
have been removed. The `.MathtextBackendPath` class can be used instead.

The methods ``get_depth``, ``parse``, ``to_mask``, ``to_rgba``, and ``to_png``
of `.MathTextParser` have been removed. Use `.mathtext.math_to_image` instead.

The unused ``StandardPsFonts.pswriter`` has been removed.

``ps.useafm`` removed for ``mathtext``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The setting :rc:`ps.useafm` no longer has any effect on `matplotlib.mathtext`.
colorbar defaults to stealing space from the mappable's axes rather than the current axes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Pass ``ax=plt.gca()`` to restore the previous behavior.

Removal of deprecated ``colorbar`` APIs
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following deprecated :mod:`.colorbar` APIs have been removed:
``ColorbarPatch`` and ``colorbar_factory`` (use `.Colorbar` instead);
``colorbar_doc``, ``colorbar_kw_doc``, ``make_axes_kw_doc``.
Removed loaded modules logging
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The list of currently loaded modules is no longer logged at the DEBUG level at Matplotlib import time,
because it can produce extensive output and make other valuable DEBUG statements difficult to find. 
If you were relying on this please arrange for your own logging (the built-in `sys.modules` can be used to get the currently loaded modules).Behavior Change template
~~~~~~~~~~~~~~~~~~~~~~~~

Enter description here....

Please rename file with PR number and your initials i.e. "99999-ABC.rst"
and ``git add`` the new file.  
``FigureFrameWx.sizer``
~~~~~~~~~~~~~~~~~~~~~~~
... has been removed.  The frame layout is no longer based on a sizer, as the
canvas is now the sole child widget; the toolbar is now a regular toolbar
added using ``SetToolBar``.
Move Axes title to not overlap with y axis offset
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Previously, Axes titles could overlap the y-axis offset text, which is often
in the upper left corner of the axes.  Now titles are moved above the offset
text if overlapping, and autopositioning is in effect (i.e. if *y* in
`.Axes.set_title` is *None* and :rc:`axes.titley` is also *None*).
``FigureFrameWx`` constructor, subclasses, and ``get_canvas``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The ``FigureCanvasWx`` constructor gained a *canvas_class* keyword-only
parameter which specifies the canvas class that should be used.  This
parameter will become required in the future.  The ``get_canvas`` method,
which was previously used to customize canvas creation, is deprecated.  The
``FigureFrameWxAgg`` and ``FigureFrameWxCairo`` subclasses, which overrode
``get_canvas``, are deprecated.
rcParams.copy() returns a new RcParams instance, rather than a dict
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This makes the copied instance still validate inputs, and additionally avoids
emitting deprecation warnings when using a previously copied RcParams instance
to update the global instance (even if some entries are deprecated).
AritistList proxies copy contents on iteration
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

When iterating over the contents of the the dynamically generated proxy lists
for the Artist-type accessors (see :ref:`Behavioural API Changes 3.5 - Axes
children combined`), a copy of the contents is made.  This ensure that artists
can safely be added or removed from the Axes while iterating over their children.

This is a departure from the expected behavior of mutable iterable data types
in Python -- iterating over list while mutating it has surprising consequences
and dictionaries will error if they change size during iteration.
Because all of the accessors are filtered views of the same underlying list, it
is possible for seemingly unrelated changes, such as removing a Line, to affect
the iteration over any of the other accessors. In this case, we have opted to
make a copy of the relevant children before yielding them to the user.

This change is also consistent with our plan to make these accessors immutable
in Matplotlib 3.7.
``Type1Font`` objects include more properties
---------------------------------------------

The ``matplotlib._type1font.Type1Font.prop`` dictionary now includes more keys,
such as ``CharStrings`` and ``Subrs``. The value of the ``Encoding`` key is
now a dictionary mapping codes to glyph names. The
``matplotlib._type1font.Type1Font.transform`` method now correctly removes
``UniqueID`` properties from the font.
QuadMesh cursor data disabled by default
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Showing the cursor data of a `.QuadMesh` is now disabled by default, as it has
significant performance issues with large meshes. To manually enable this
use :meth:`.QuadMesh.set_show_cursor_data`.
Large ``imshow`` images are now downsampled
-------------------------------------------
When showing an image using `~matplotlib.axes.Axes.imshow` that has more than
:math:`2^{24}` columns or :math:`2^{23}` rows, the image will now be downsampled
to below this resolution before being resampled for display by the AGG renderer.
Previously such a large image would be shown incorrectly. To prevent this
downsampling and the warning it raises, manually downsample your data before
handing it to `~matplotlib.axes.Axes.imshow`
3D contourf polygons placed between levels
------------------------------------------
The polygons used in a 3D `~.Axes3D.contourf` plot are
now placed halfway between the contour levels, as each polygon represents the
location of values that lie between two levels.
Incompatible layout engines raise
---------------------------------
``tight_layout`` and ``constrained_layout`` are incompatible if
a colorbar has been added to the figure.  Invoking the incompatible layout
engine used to warn, but now raises with a ``RuntimeError``.
.. _whats-new:

================
Next what's new?
================

.. ifconfig:: releaselevel == 'dev'

   .. toctree::
      :glob:
      :maxdepth: 1

      next_whats_new/*
.. redirect-from:: /api/api_changes_old
.. redirect-from:: /users/whats_new_old


=============
Release notes
=============

.. include from another document so that it's easy to exclude this for releases
.. include:: release_notes_next.rst

Version 3.5
===========
.. toctree::
    :maxdepth: 1

    prev_whats_new/whats_new_3.5.0.rst
    ../api/prev_api_changes/api_changes_3.5.0.rst
    github_stats.rst
    prev_whats_new/github_stats_3.5.0.rst

Version 3.4
===========
.. toctree::
    :maxdepth: 1

    prev_whats_new/whats_new_3.4.0.rst
    ../api/prev_api_changes/api_changes_3.4.2.rst
    ../api/prev_api_changes/api_changes_3.4.0.rst
    prev_whats_new/github_stats_3.4.1.rst
    prev_whats_new/github_stats_3.4.0.rst

Past versions
=============

Version 3.3
~~~~~~~~~~~
.. toctree::
    :maxdepth: 1

    prev_whats_new/whats_new_3.3.0.rst
    ../api/prev_api_changes/api_changes_3.3.1.rst
    ../api/prev_api_changes/api_changes_3.3.0.rst
    prev_whats_new/github_stats_3.3.4.rst
    prev_whats_new/github_stats_3.3.3.rst
    prev_whats_new/github_stats_3.3.2.rst
    prev_whats_new/github_stats_3.3.1.rst
    prev_whats_new/github_stats_3.3.0.rst

Version 3.2
~~~~~~~~~~~
.. toctree::
    :maxdepth: 1

    prev_whats_new/whats_new_3.2.0.rst
    ../api/prev_api_changes/api_changes_3.2.0.rst
    prev_whats_new/github_stats_3.2.2.rst
    prev_whats_new/github_stats_3.2.1.rst
    prev_whats_new/github_stats_3.2.0.rst

Version 3.1
~~~~~~~~~~~
.. toctree::
    :maxdepth: 1

    prev_whats_new/whats_new_3.1.0.rst
    ../api/prev_api_changes/api_changes_3.1.1.rst
    ../api/prev_api_changes/api_changes_3.1.0.rst
    prev_whats_new/github_stats_3.1.3.rst
    prev_whats_new/github_stats_3.1.2.rst
    prev_whats_new/github_stats_3.1.1.rst
    prev_whats_new/github_stats_3.1.0.rst

Version 3.0
~~~~~~~~~~~
.. toctree::
    :maxdepth: 1

    prev_whats_new/whats_new_3.0.rst
    ../api/prev_api_changes/api_changes_3.0.1.rst
    ../api/prev_api_changes/api_changes_3.0.0.rst
    prev_whats_new/github_stats_3.0.3.rst
    prev_whats_new/github_stats_3.0.2.rst
    prev_whats_new/github_stats_3.0.1.rst
    prev_whats_new/github_stats_3.0.0.rst

Version 2.2
~~~~~~~~~~~
.. toctree::
    :maxdepth: 1

    prev_whats_new/whats_new_2.2.rst
    ../api/prev_api_changes/api_changes_2.2.0.rst

Version 2.1
~~~~~~~~~~~
.. toctree::
    :maxdepth: 1

    prev_whats_new/whats_new_2.1.0.rst
    ../api/prev_api_changes/api_changes_2.1.2.rst
    ../api/prev_api_changes/api_changes_2.1.1.rst
    ../api/prev_api_changes/api_changes_2.1.0.rst

Version 2.0
~~~~~~~~~~~
.. toctree::
    :maxdepth: 1

    prev_whats_new/whats_new_2.0.0.rst
    ../api/prev_api_changes/api_changes_2.0.1.rst
    ../api/prev_api_changes/api_changes_2.0.0.rst

Version 1.5
~~~~~~~~~~~
.. toctree::
    :maxdepth: 1

    prev_whats_new/whats_new_1.5.rst
    ../api/prev_api_changes/api_changes_1.5.3.rst
    ../api/prev_api_changes/api_changes_1.5.2.rst
    ../api/prev_api_changes/api_changes_1.5.0.rst

Version 1.4
~~~~~~~~~~~
.. toctree::
    :maxdepth: 1

    prev_whats_new/whats_new_1.4.rst
    ../api/prev_api_changes/api_changes_1.4.x.rst

Version 1.3
~~~~~~~~~~~
.. toctree::
    :maxdepth: 1

    prev_whats_new/whats_new_1.3.rst
    ../api/prev_api_changes/api_changes_1.3.x.rst

Version 1.2
~~~~~~~~~~~
.. toctree::
    :maxdepth: 1

    prev_whats_new/whats_new_1.2.2.rst
    prev_whats_new/whats_new_1.2.rst
    ../api/prev_api_changes/api_changes_1.2.x.rst

Version 1.1
~~~~~~~~~~~
.. toctree::
    :maxdepth: 1

    prev_whats_new/whats_new_1.1.rst
    ../api/prev_api_changes/api_changes_1.1.x.rst

Version 1.0
~~~~~~~~~~~
.. toctree::
    :maxdepth: 1

    prev_whats_new/whats_new_1.0.rst

Version 0.x
~~~~~~~~~~~
.. toctree::
    :maxdepth: 1

    prev_whats_new/changelog.rst
    prev_whats_new/whats_new_0.99.rst
    ../api/prev_api_changes/api_changes_0.99.x.rst
    ../api/prev_api_changes/api_changes_0.99.rst
    prev_whats_new/whats_new_0.98.4.rst
    ../api/prev_api_changes/api_changes_0.98.x.rst
    ../api/prev_api_changes/api_changes_0.98.1.rst
    ../api/prev_api_changes/api_changes_0.98.0.rst
    ../api/prev_api_changes/api_changes_0.91.2.rst
    ../api/prev_api_changes/api_changes_0.91.0.rst
    ../api/prev_api_changes/api_changes_0.90.1.rst
    ../api/prev_api_changes/api_changes_0.90.0.rst

    ../api/prev_api_changes/api_changes_0.87.7.rst
    ../api/prev_api_changes/api_changes_0.86.rst
    ../api/prev_api_changes/api_changes_0.85.rst
    ../api/prev_api_changes/api_changes_0.84.rst
    ../api/prev_api_changes/api_changes_0.83.rst
    ../api/prev_api_changes/api_changes_0.82.rst
    ../api/prev_api_changes/api_changes_0.81.rst
    ../api/prev_api_changes/api_changes_0.80.rst

    ../api/prev_api_changes/api_changes_0.73.rst
    ../api/prev_api_changes/api_changes_0.72.rst
    ../api/prev_api_changes/api_changes_0.71.rst
    ../api/prev_api_changes/api_changes_0.70.rst

    ../api/prev_api_changes/api_changes_0.65.1.rst
    ../api/prev_api_changes/api_changes_0.65.rst
    ../api/prev_api_changes/api_changes_0.63.rst
    ../api/prev_api_changes/api_changes_0.61.rst
    ../api/prev_api_changes/api_changes_0.60.rst

    ../api/prev_api_changes/api_changes_0.54.3.rst
    ../api/prev_api_changes/api_changes_0.54.rst
    ../api/prev_api_changes/api_changes_0.50.rst
    ../api/prev_api_changes/api_changes_0.42.rst
    ../api/prev_api_changes/api_changes_0.40.rst
:orphan:

Next version
============
.. toctree::
   :maxdepth: 1

   next_whats_new
   ../api/next_api_changes
   github_stats
.. _github-stats:

GitHub statistics (Dec 11, 2021)
================================

GitHub statistics for 2021/11/16 (tag: v3.5.0) - 2021/12/11

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 29 issues and merged 84 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/67?closed=1>`__

The following 17 authors contributed 123 commits.

* Antony Lee
* Constantine Evans
* David Stansby
* Elliott Sales de Andrade
* franzhaas
* Greg Lucas
* Hansin Ahuja
* Hood Chatham
* Jake Lishman
* Jody Klymak
* Matthias Bussonnier
* Ryan May
* Steffen Rehberg
* Sven Eschlbeck
* sveneschlbeck
* Thomas A Caswell
* Tim Hoffmann

GitHub issues and pull requests:

Pull Requests (84):

* :ghpull:`21926`: Backport PR #21913 on branch v3.5.x (Make colorbar boundaries work again)
* :ghpull:`21924`: Backport PR #21861 on branch v3.5.x (DOC: Small formatting improvement to set_markevery)
* :ghpull:`21913`: Make colorbar boundaries work again
* :ghpull:`21922`: Backport PR #21753 on branch v3.5.x (DOC: update anatomy of figure)
* :ghpull:`21861`: DOC: Small formatting improvement to set_markevery
* :ghpull:`21919`: Fix use_data_coordinates docstring
* :ghpull:`21912`: Backport PR #21900 on branch v3.5.x (Include test notebooks in test package)
* :ghpull:`21900`: Include test notebooks in test package
* :ghpull:`21908`: Backport PR #21834 on branch v3.5.x (MAINT Fix signature qhull version function )
* :ghpull:`21907`: Backport PR #21905 on branch v3.5.x (Fix image testing decorator in pytest importlib mode)
* :ghpull:`21906`: Backport PR #21773 on branch v3.5.x (FIX: Reset label of axis to center)
* :ghpull:`21834`: MAINT Fix signature qhull version function 
* :ghpull:`21905`: Fix image testing decorator in pytest importlib mode
* :ghpull:`21773`: FIX: Reset label of axis to center
* :ghpull:`21902`: Backport PR #21884 on branch v3.5.x (FIX: be more careful about coercing unit-full containers to ndarray)
* :ghpull:`21884`: FIX: be more careful about coercing unit-full containers to ndarray
* :ghpull:`21899`: Backport PR #21859 on branch v3.5.x (Fix streamline plotting from upper edges of grid)
* :ghpull:`21859`: Fix streamline plotting from upper edges of grid
* :ghpull:`21896`: Backport PR #21890 on branch v3.5.x (Drop retina images when building PDF docs)
* :ghpull:`21891`: Backport PR #21887 on branch v3.5.x (Make figure target links relative)
* :ghpull:`21883`: Backport PR #21872 on branch v3.5.x (FIX: colorbars with NoNorm)
* :ghpull:`21872`: FIX: colorbars with NoNorm
* :ghpull:`21869`: Backport PR #21866 on branch v3.5.x (Shorten some inset_locator docstrings.)
* :ghpull:`21866`: Shorten some inset_locator docstrings.
* :ghpull:`21865`: Backport PR #21864 on branch v3.5.x (Delete "Load converter" example)
* :ghpull:`21864`: Delete "Load converter" example
* :ghpull:`21857`: Backport PR #21837 on branch v3.5.x (Display example figures in a single column)
* :ghpull:`21856`: Backport PR #21853 on branch v3.5.x (DOC: Fix Annotation arrow style reference example)
* :ghpull:`21853`: DOC: Fix Annotation arrow style reference example
* :ghpull:`21852`: Backport PR #21818 on branch v3.5.x (Fix collections coerce float)
* :ghpull:`21818`: Fix collections coerce float
* :ghpull:`21849`: Backport PR #21845 on branch v3.5.x (FIX: bbox subfigures)
* :ghpull:`21845`: FIX: bbox subfigures
* :ghpull:`21832`: Backport PR #21820 on branch v3.5.x (Drop setuptools-scm requirement in wheels)
* :ghpull:`21820`: Drop setuptools-scm requirement in wheels
* :ghpull:`21829`: Backport PR #21823 on branch v3.5.x (DOC: Misc rst syntax fixes)
* :ghpull:`21823`: DOC: Misc rst syntax fixes
* :ghpull:`21826`: Backport PR #21800 on branch v3.5.x (DOC: Update Basic Usage tutorial)
* :ghpull:`21814`: Manual backport of #21794
* :ghpull:`21812`: Backport #21641
* :ghpull:`21810`: Backport PR #21743 on branch v3.5.x (Clarify Annotation arrowprops docs)
* :ghpull:`21808`: Backport PR #21785 on branch v3.5.x (Fix ConciseDateFormatter offset during zoom)
* :ghpull:`21807`: Backport PR #21791 on branch v3.5.x (Refix check for manager presence in deprecated blocking_input.)
* :ghpull:`21806`: Backport PR #21663 on branch v3.5.x (Use standard subplot window in macosx backend)
* :ghpull:`21785`: Fix ConciseDateFormatter offset during zoom
* :ghpull:`21804`: Backport PR #21659 on branch v3.5.x (Fix PDF contents)
* :ghpull:`21791`: Refix check for manager presence in deprecated blocking_input.
* :ghpull:`21793`: Backport PR #21787 on branch v3.5.x (Fixes row/column mixup in GridSpec height_ratios documentation.)
* :ghpull:`21787`: Fixes row/column mixup in GridSpec height_ratios documentation.
* :ghpull:`21778`: Backport PR #21705 on branch v3.5.x (MNT: make print_figure kwarg wrapper support py311)
* :ghpull:`21779`: Backport PR #21751 on branch v3.5.x (FIX: manual colorbars and tight layout)
* :ghpull:`21777`: Backport PR #21758 on branch v3.5.x (FIX: Make sure a renderer gets attached to figure after draw)
* :ghpull:`21751`: FIX: manual colorbars and tight layout
* :ghpull:`21705`: MNT: make print_figure kwarg wrapper support py311
* :ghpull:`21758`: FIX: Make sure a renderer gets attached to figure after draw
* :ghpull:`21775`: Backport PR #21771 on branch v3.5.x (DOC: fix missing ref)
* :ghpull:`21770`: Backport of PR #21631 on v3.5.x
* :ghpull:`21765`: Backport PR #21741 on branch v3.5.x (Reduce do_3d_projection deprecation warnings in external artists)
* :ghpull:`21764`: Backport PR #21762 on branch v3.5.x (FIX: align_x/ylabels)
* :ghpull:`21741`: Reduce do_3d_projection deprecation warnings in external artists
* :ghpull:`21762`: FIX: align_x/ylabels
* :ghpull:`21759`: Backport PR #21757 on branch v3.5.x (Fix doc typo.)
* :ghpull:`21704`: FIX: deprecation of render keyword to do_3d_projection
* :ghpull:`21730`: Backport PR #21727 on branch v3.5.x (Doc fix colormap inaccuracy)
* :ghpull:`21663`: Use standard subplot window in macosx backend
* :ghpull:`21725`: Backport PR #21681 on branch v3.5.x (Bind subplot_tool more closely to target figure.)
* :ghpull:`21665`: Include test notebooks in test package
* :ghpull:`21721`: Backport PR #21720 on branch v3.5.x (Fix compiler configuration priority for FreeType build)
* :ghpull:`21720`: Fix compiler configuration priority for FreeType build
* :ghpull:`21715`: Backport PR #21714 on branch v3.5.x (DOC: note renaming of config.cfg.template to mplconfig.cfg.template)
* :ghpull:`21706`: Backport PR #21703 on branch v3.5.x (Changed the link to the correct citing example)
* :ghpull:`21691`: Backport PR #21686 on branch v3.5.x (FIX: colorbar for horizontal contours)
* :ghpull:`21689`: Backport PR #21676 on branch v3.5.x (Fix boundary norm negative)
* :ghpull:`21686`: FIX: colorbar for horizontal contours
* :ghpull:`21681`: Bind subplot_tool more closely to target figure.
* :ghpull:`21676`: Fix boundary norm negative
* :ghpull:`21685`: Backport PR #21658 on branch v3.5.x (Validate that input to Poly3DCollection is a list of 2D array-like)
* :ghpull:`21684`: Backport PR #21662 on branch v3.5.x (FIX: put newline in matplotlibrc when setting default backend)
* :ghpull:`21658`: Validate that input to Poly3DCollection is a list of 2D array-like
* :ghpull:`21662`: FIX: put newline in matplotlibrc when setting default backend
* :ghpull:`21651`: Backport PR #21626 on branch v3.5.x (Added the definition of Deprecation and made Deprecation Process clearer)
* :ghpull:`21626`: Added the definition of Deprecation and made Deprecation Process clearer
* :ghpull:`21137`: Small cleanups to colorbar.

Issues (29):

* :ghissue:`21909`: [Bug]: Matplotlib is unable to apply the boundaries in the colorbar after updating to 3.5.0
* :ghissue:`21654`: [Bug]: test_nbagg_01.ipynb not installed
* :ghissue:`21885`: [Bug]: test decorator breaks with new pytest importlib mode
* :ghissue:`21772`: [Bug]: cannot reset label of axis to center
* :ghissue:`21669`: [Bug]: Matplotlib 3.5 breaks unyt integration of error bars
* :ghissue:`21649`: [Bug]: Startpoints in streamplot fail on right and upper edges
* :ghissue:`21870`: [Bug]: Colormap + NoNorm only plots one color under ``matplotlib`` 3.5.0
* :ghissue:`21882`: [Bug]: Colorbar does not work for negative values with contour/contourf
* :ghissue:`21803`: [Bug]: using ``set_offsets`` on scatter object raises TypeError
* :ghissue:`21839`: [Bug]: Top of plot clipped when using Subfigures without suptitle
* :ghissue:`21841`: [Bug]: Wrong tick labels and colorbar of discrete normalizer
* :ghissue:`21783`: [MNT]: wheel of 3.5.0 apears to depend on setuptools-scm which apears to be unintentional
* :ghissue:`21733`: [Bug]: Possible bug on arrows in annotation
* :ghissue:`21749`: [Bug]: Regression on ``tight_layout`` when manually adding axes for colorbars
* :ghissue:`19197`: Unexpected error after using Figure.canvas.draw on macosx backend
* :ghissue:`13968`: ``ax.get_xaxis().get_minorticklabels()`` always returns list of empty strings
* :ghissue:`7550`: Draw not caching with macosx backend
* :ghissue:`21740`: [Bug]: unavoidable ``DeprecationWarning`` when using ``Patch3D``
* :ghissue:`15884`: DOC: Error in colormap manipulation tutorial
* :ghissue:`21648`: [Bug]: subplot parameter window appearing 1/4 size on macosx
* :ghissue:`21702`: [Doc]: Wrong link to the ready-made citation entry
* :ghissue:`21683`: [Bug]: add_lines broken for horizontal colorbars
* :ghissue:`21680`: [MNT]: macosx subplot parameters multiple windows
* :ghissue:`21679`: [MNT]: Close subplot_parameters window when main figure closes
* :ghissue:`21671`: [Bug]: 3.5.0 colorbar ValueError: minvalue must be less than or equal to maxvalue
* :ghissue:`21652`: [Bug]: ax.add_collection3d throws warning Mean of empty slice
* :ghissue:`21660`: [Bug]: mplsetup.cfg parsing issue
* :ghissue:`21668`: [Bug]: New plot directive error in 3.5.0
* :ghissue:`21393`: [Doc]: describe deprecation process more explicitly


Previous GitHub statistics
--------------------------


.. toctree::
    :maxdepth: 1
    :glob:
    :reversed:

    prev_whats_new/github_stats_*
.. _users-guide-index:

.. redirect-from:: /contents


###########
Users guide
###########

General
#######

.. toctree::
   :maxdepth: 2

   getting_started/index.rst
   installing/index.rst
   explain/index.rst
   faq/index.rst
   resources/index.rst

Tutorials and examples
######################

.. toctree::
   :maxdepth: 1

   ../plot_types/index.rst
   ../tutorials/index.rst
   ../gallery/index.rst

Reference 
#########

.. toctree::
   :maxdepth: 2

   ../api/index.rst
   ../devel/index.rst
   project/index.rst
   release_notes.rst
List of available font names
------------------------------

The list of available fonts are now easily accesible. Get a list of the
available font names in matplotlib with:

.. code-block:: python

    from matplotlib import font_manager
    font_manager.get_font_names()3D plots gained a 3rd "roll" viewing angle
------------------------------------------

3D plots can now be viewed from any orientation with the addition of a 3rd roll
angle, which rotates the plot about the viewing axis. Interactive rotation
using the mouse still only controls elevation and azimuth, meaning that this
feature is relevant to users who create more complex camera angles
programmatically. The default roll angle of 0 is backwards-compatible with
existing 3D plots.

.. plot::
    :include-source: true
    
    from mpl_toolkits.mplot3d import axes3d
    import matplotlib.pyplot as plt
    fig = plt.figure()
    ax = fig.add_subplot(projection='3d')
    X, Y, Z = axes3d.get_test_data(0.05)
    ax.plot_wireframe(X, Y, Z, rstride=10, cstride=10)
    ax.view_init(elev=0, azim=0, roll=30)
    plt.show()
Selectors improvement: rotation, aspect ratio correction and add/remove state
-----------------------------------------------------------------------------

The `~matplotlib.widgets.RectangleSelector` and
`~matplotlib.widgets.EllipseSelector` can now be rotated interactively between
-45° and 45°. The range limits are currently dictated by the implementation.
The rotation is enabled or disabled by striking the *r* key
('r' is the default key mapped to 'rotate' in *state_modifier_keys*) or by calling
``selector.add_state('rotate')``.

The aspect ratio of the axes can now be taken into account when using the
"square" state. This is enabled by specifying ``use_data_coordinates='True'`` when
the selector is initialized.

In addition to changing selector state interactively using the modifier keys
defined in *state_modifier_keys*, the selector state can now be changed
programmatically using the *add_state* and *remove_state* methods.


.. code-block:: python

    import matplotlib.pyplot as plt
    from matplotlib.widgets import RectangleSelector
    import numpy as np

    values = np.arange(0, 100)

    fig = plt.figure()
    ax = fig.add_subplot()
    ax.plot(values, values)

    selector = RectangleSelector(ax, print, interactive=True,
                                 drag_from_anywhere=True,
                                 use_data_coordinates=True)
    selector.add_state('rotate') # alternatively press 'r' key
    # rotate the selector interactively

    selector.remove_state('rotate') # alternatively press 'r' key

    selector.add_state('square')
Setting PolygonSelector vertices
--------------------------------
The vertices of `~matplotlib.widgets.PolygonSelector` can now be set
programmatically by using the `~matplotlib.widgets.PolygonSelector.verts`
property. Setting the vertices this way will reset the selector, and create
a new complete selector with the supplied vertices.
PolygonSelector bounding boxes
------------------------------
`~matplotlib.widgets.PolygonSelector` now has a *draw_bounding_box* argument, which
when set to `True` will draw a bounding box around the polygon once it is
complete. The bounding box can be resized and moved, allowing the points of
the polygon to be easily resized.
Rectangle patch rotation point
------------------------------

The rotation point of the `~matplotlib.patches.Rectangle` can now be set to 'xy',
'center' or a 2-tuple of numbers.
New ``layout_engine`` module
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Matplotlib ships with ``tight_layout`` and ``constrained_layout`` layout
engines.  A new ``layout_engine`` module is provided to allow downstream
libraries to write their own layout engines and `~.figure.Figure` objects can
now take a `.LayoutEngine` subclass as an argument to the *layout* parameter.Give the 3D camera a custom focal length
----------------------------------------

Users can now better mimic real-world cameras by specifying the focal length of
the virtual camera in 3D plots. The default focal length of 1 corresponds to a
Field of View (FOV) of 90 deg, and is backwards-compatible with existing 3D
plots. An increased focal length between 1 and infinity "flattens" the image,
while a decreased focal length between 1 and 0 exaggerates the perspective and
gives the image more apparent depth.

The focal length can be calculated from a desired FOV via the equation:

.. mathmpl::

    focal\_length = 1/\tan(FOV/2)

.. plot::
    :include-source: true

    from mpl_toolkits.mplot3d import axes3d
    import matplotlib.pyplot as plt
    fig, axs = plt.subplots(1, 3, subplot_kw={'projection': '3d'},
                            constrained_layout=True)
    X, Y, Z = axes3d.get_test_data(0.05)
    focal_lengths = [0.25, 1, 4]
    for ax, fl in zip(axs, focal_lengths):
        ax.plot_wireframe(X, Y, Z, rstride=10, cstride=10)
        ax.set_proj_type('persp', focal_length=fl)
        ax.set_title(f"focal_length = {fl}")
    plt.tight_layout()
    plt.show()
``math_to_image`` now has a *color* keyword argument
--------------------------------------------------------

To easily support external libraries that rely on the MathText rendering of
Matplotlib to generate equation images, a *color* keyword argument was added
to `~matplotlib.mathtext.math_to_image`.

.. code-block:: python

    from matplotlib import mathtext
    mathtext.math_to_image('$x^2$', 'filename.png', color='Maroon')
Custom cap widths in box and whisker plots in bxp() and boxplot()
-----------------------------------------------------------------

New bxp() and boxplot() parameter capwidths allows to control the
widths of the caps in box and whisker plots.

.. plot::
    :include-source: true

    import matplotlib.pyplot as plt
    import numpy as np
    x = np.linspace(-7, 7, 140)
    x = np.hstack([-25, x, 25])
    fig, ax = plt.subplots()
    ax.boxplot([x, x], notch=1, capwidths=[0.01, 0.2])
    plt.show()
``marker`` can now be set to the string "none"
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... to mean *no-marker*, consistently with other APIs which support the
lowercase version.  Using "none" is recommended over using "None", to avoid
confusion with the None object.
New customization of MarkerStyle
--------------------------------

New MarkerStyle parameters allow control of join style and cap style, and for
the user to supply a transformation to be applied to the marker (e.g. a rotation).

.. plot::
    :include-source: true
    
    import matplotlib.pyplot as plt
    from matplotlib.markers import MarkerStyle
    from matplotlib.transforms import Affine2D
    fig, ax = plt.subplots(figsize=(6, 1))
    fig.suptitle('New markers', fontsize=14)
    for col, (size, rot) in enumerate(zip([2, 5, 10], [0, 45, 90])):
        t = Affine2D().rotate_deg(rot).scale(size)
        ax.plot(col, 0, marker=MarkerStyle("*", transform=t))
    ax.axis("off")
    ax.set_xlim(-0.1, 2.4)
:orphan:

Instructions for writing "What's new" entries
=============================================

Please place new portions of `whats_new.rst` in the `next_whats_new` directory.

When adding an entry please look at the currently existing files to
see if you can extend any of them.  If you create a file, name it
something like :file:`cool_new_feature.rst` if you have added a brand new
feature or something like :file:`updated_feature.rst` for extensions of
existing features.

Please avoid using references in section titles, as it causes links to be
confusing in the table of contents.  Instead, ensure that a reference is
included in the descriptive text.  Include contents of the form: ::

    Section Title for Feature
    -------------------------

    A bunch of text about how awesome the new feature is and examples of how
    to use it.

    A sub-section
    ~~~~~~~~~~~~~
.. redirect-from:: /citing

Citing Matplotlib
=================

If Matplotlib contributes to a project that leads to a scientific publication,
please acknowledge this fact by citing `J. D. Hunter, "Matplotlib: A 2D
Graphics Environment", Computing in Science & Engineering, vol. 9, no. 3,
pp. 90-95, 2007 <https://doi.org/10.1109/MCSE.2007.55>`_.

.. literalinclude:: ../../../CITATION.bib
   :language: bibtex

.. container:: sphx-glr-download

   :download:`Download BibTeX bibliography file: CITATION.bib <../../../CITATION.bib>`

DOIs
----

The following DOI represents *all* Matplotlib versions. Please select a more
specific DOI from the list below, referring to the version used for your publication.

   .. image:: https://zenodo.org/badge/DOI/10.5281/zenodo.592536.svg
      :target: https://doi.org/10.5281/zenodo.592536

By version
~~~~~~~~~~
.. START OF AUTOGENERATED


v3.5.1
   .. image:: ../../_static/zenodo_cache/5773480.svg
      :target:  https://doi.org/10.5281/zenodo.5773480
v3.5.0
   .. image:: ../../_static/zenodo_cache/5706396.svg
      :target:  https://doi.org/10.5281/zenodo.5706396
v3.4.3
   .. image:: ../../_static/zenodo_cache/5194481.svg
      :target:  https://doi.org/10.5281/zenodo.5194481
v3.4.2
   .. image:: ../../_static/zenodo_cache/4743323.svg
      :target:  https://doi.org/10.5281/zenodo.4743323
v3.4.1
   .. image:: ../../_static/zenodo_cache/4649959.svg
      :target:  https://doi.org/10.5281/zenodo.4649959
v3.4.0
   .. image:: ../../_static/zenodo_cache/4638398.svg
      :target:  https://doi.org/10.5281/zenodo.4638398
v3.3.4
   .. image:: ../../_static/zenodo_cache/4475376.svg
      :target:  https://doi.org/10.5281/zenodo.4475376
v3.3.3
   .. image:: ../../_static/zenodo_cache/4268928.svg
      :target:  https://doi.org/10.5281/zenodo.4268928
v3.3.2
   .. image:: ../../_static/zenodo_cache/4030140.svg
      :target:  https://doi.org/10.5281/zenodo.4030140
v3.3.1
   .. image:: ../../_static/zenodo_cache/3984190.svg
      :target:  https://doi.org/10.5281/zenodo.3984190
v3.3.0
   .. image:: ../../_static/zenodo_cache/3948793.svg
      :target:  https://doi.org/10.5281/zenodo.3948793
v3.2.2
   .. image:: ../../_static/zenodo_cache/3898017.svg
      :target:  https://doi.org/10.5281/zenodo.3898017
v3.2.1
   .. image:: ../../_static/zenodo_cache/3714460.svg
      :target:  https://doi.org/10.5281/zenodo.3714460
v3.2.0
   .. image:: ../../_static/zenodo_cache/3695547.svg
      :target:  https://doi.org/10.5281/zenodo.3695547
v3.1.3
   .. image:: ../../_static/zenodo_cache/3633844.svg
      :target:  https://doi.org/10.5281/zenodo.3633844
v3.1.2
   .. image:: ../../_static/zenodo_cache/3563226.svg
      :target:  https://doi.org/10.5281/zenodo.3563226
v3.1.1
   .. image:: ../../_static/zenodo_cache/3264781.svg
      :target:  https://doi.org/10.5281/zenodo.3264781
v3.1.0
   .. image:: ../../_static/zenodo_cache/2893252.svg
      :target:  https://doi.org/10.5281/zenodo.2893252
v3.0.3
   .. image:: ../../_static/zenodo_cache/2577644.svg
      :target:  https://doi.org/10.5281/zenodo.2577644
v3.0.2
   .. image:: ../../_static/zenodo_cache/1482099.svg
      :target:  https://doi.org/10.5281/zenodo.1482099
v3.0.1
   .. image:: ../../_static/zenodo_cache/1482098.svg
      :target:  https://doi.org/10.5281/zenodo.1482098
v2.2.5
   .. image:: ../../_static/zenodo_cache/3633833.svg
      :target:  https://doi.org/10.5281/zenodo.3633833
v3.0.0
   .. image:: ../../_static/zenodo_cache/1420605.svg
      :target:  https://doi.org/10.5281/zenodo.1420605
v2.2.4
   .. image:: ../../_static/zenodo_cache/2669103.svg
      :target:  https://doi.org/10.5281/zenodo.2669103
v2.2.3
   .. image:: ../../_static/zenodo_cache/1343133.svg
      :target:  https://doi.org/10.5281/zenodo.1343133
v2.2.2
   .. image:: ../../_static/zenodo_cache/1202077.svg
      :target:  https://doi.org/10.5281/zenodo.1202077
v2.2.1
   .. image:: ../../_static/zenodo_cache/1202050.svg
      :target:  https://doi.org/10.5281/zenodo.1202050
v2.2.0
   .. image:: ../../_static/zenodo_cache/1189358.svg
      :target:  https://doi.org/10.5281/zenodo.1189358
v2.1.2
   .. image:: ../../_static/zenodo_cache/1154287.svg
      :target:  https://doi.org/10.5281/zenodo.1154287
v2.1.1
   .. image:: ../../_static/zenodo_cache/1098480.svg
      :target:  https://doi.org/10.5281/zenodo.1098480
v2.1.0
   .. image:: ../../_static/zenodo_cache/1004650.svg
      :target:  https://doi.org/10.5281/zenodo.1004650
v2.0.2
   .. image:: ../../_static/zenodo_cache/573577.svg
      :target:  https://doi.org/10.5281/zenodo.573577
v2.0.1
   .. image:: ../../_static/zenodo_cache/570311.svg
      :target:  https://doi.org/10.5281/zenodo.570311
v2.0.0
   .. image:: ../../_static/zenodo_cache/248351.svg
      :target:  https://doi.org/10.5281/zenodo.248351
v1.5.3
   .. image:: ../../_static/zenodo_cache/61948.svg
      :target:  https://doi.org/10.5281/zenodo.61948
v1.5.2
   .. image:: ../../_static/zenodo_cache/56926.svg
      :target:  https://doi.org/10.5281/zenodo.56926
v1.5.1
   .. image:: ../../_static/zenodo_cache/44579.svg
      :target:  https://doi.org/10.5281/zenodo.44579
v1.5.0
   .. image:: ../../_static/zenodo_cache/32914.svg
      :target:  https://doi.org/10.5281/zenodo.32914
v1.4.3
   .. image:: ../../_static/zenodo_cache/15423.svg
      :target:  https://doi.org/10.5281/zenodo.15423
v1.4.2
   .. image:: ../../_static/zenodo_cache/12400.svg
      :target:  https://doi.org/10.5281/zenodo.12400
v1.4.1
   .. image:: ../../_static/zenodo_cache/12287.svg
      :target:  https://doi.org/10.5281/zenodo.12287
v1.4.0
   .. image:: ../../_static/zenodo_cache/11451.svg
      :target:  https://doi.org/10.5281/zenodo.11451

.. END OF AUTOGENERATED
.. redirect-from:: /users/history

History
=======

.. note::

   The following introductory text was written in 2008 by John D. Hunter
   (1968-2012), the original author of Matplotlib.

Matplotlib is a library for making 2D plots of arrays in `Python
<https://www.python.org>`_.  Although it has its origins in emulating
the MATLAB graphics commands, it is
independent of MATLAB, and can be used in a Pythonic, object oriented
way.  Although Matplotlib is written primarily in pure Python, it
makes heavy use of `NumPy <https://numpy.org>`_ and other extension
code to provide good performance even for large arrays.

Matplotlib is designed with the philosophy that you should be able to
create simple plots with just a few commands, or just one!  If you
want to see a histogram of your data, you shouldn't need to
instantiate objects, call methods, set properties, and so on; it
should just work.

For years, I used to use MATLAB exclusively for data analysis and
visualization.  MATLAB excels at making nice looking plots easy.  When
I began working with EEG data, I found that I needed to write
applications to interact with my data, and developed an EEG analysis
application in MATLAB.  As the application grew in complexity,
interacting with databases, http servers, manipulating complex data
structures, I began to strain against the limitations of MATLAB as a
programming language, and decided to start over in Python.  Python
more than makes up for all of MATLAB's deficiencies as a programming
language, but I was having difficulty finding a 2D plotting package
(for 3D `VTK <http://www.vtk.org/>`_ more than exceeds all of my
needs).

When I went searching for a Python plotting package, I had several
requirements:

* Plots should look great - publication quality.  One important
  requirement for me is that the text looks good (antialiased, etc.)

* Postscript output for inclusion with TeX documents

* Embeddable in a graphical user interface for application
  development

* Code should be easy enough that I can understand it and extend
  it

* Making plots should be easy

Finding no package that suited me just right, I did what any
self-respecting Python programmer would do: rolled up my sleeves and
dived in.  Not having any real experience with computer graphics, I
decided to emulate MATLAB's plotting capabilities because that is
something MATLAB does very well.  This had the added advantage that
many people have a lot of MATLAB experience, and thus they can
quickly get up to steam plotting in python.  From a developer's
perspective, having a fixed user interface (the pylab interface) has
been very useful, because the guts of the code base can be redesigned
without affecting user code.

The Matplotlib code is conceptually divided into three parts: the
*pylab interface* is the set of functions provided by
:mod:`pylab` which allow the user to create plots with code
quite similar to MATLAB figure generating code
(:doc:`/tutorials/introductory/pyplot`).  The *Matplotlib frontend* or *Matplotlib
API* is the set of classes that do the heavy lifting, creating and
managing figures, text, lines, plots and so on
(:doc:`/tutorials/intermediate/artists`).  This is an abstract interface that knows
nothing about output.  The *backends* are device-dependent drawing
devices, aka renderers, that transform the frontend representation to
hardcopy or a display device (:ref:`what-is-a-backend`).  Example
backends: PS creates `PostScript®
<https://www.adobe.com/products/postscript.html>`_ hardcopy, SVG
creates `Scalable Vector Graphics <https://www.w3.org/Graphics/SVG/>`_
hardcopy, Agg creates PNG output using the high quality `Anti-Grain
Geometry <http://agg.sourceforge.net/antigrain.com/>`_
library that ships with Matplotlib, GTK embeds Matplotlib in a
`Gtk+ <https://www.gtk.org/>`_
application, GTKAgg uses the Anti-Grain renderer to create a figure
and embed it in a Gtk+ application, and so on for `PDF
<https://acrobat.adobe.com/us/en/acrobat/about-adobe-pdf.html>`_, `WxWidgets
<https://www.wxpython.org/>`_, `Tkinter
<https://docs.python.org/3/library/tkinter.html>`_, etc.

Matplotlib is used by many people in many different contexts.  Some
people want to automatically generate PostScript files to send
to a printer or publishers.  Others deploy Matplotlib on a web
application server to generate PNG output for inclusion in
dynamically-generated web pages.  Some use Matplotlib interactively
from the Python shell in Tkinter on Windows. My primary use is to
embed Matplotlib in a Gtk+ EEG application that runs on Windows, Linux
and Macintosh OS X.

----

Matplotlib's original logo (2003 -- 2008).

..
   The original logo was added in fc8c215.

.. plot::

   from matplotlib import cbook, pyplot as plt, style
   import numpy as np

   style.use("classic")

   datafile = cbook.get_sample_data('membrane.dat', asfileobj=False)

   # convert data to mV
   x = 1000 * 0.1 * np.fromstring(open(datafile, 'rb').read(), np.float32)
   # 0.0005 is the sample interval
   t = 0.0005 * np.arange(len(x))
   plt.figure(1, figsize=(7, 1), dpi=100)
   ax = plt.subplot(111, facecolor='y')
   plt.plot(t, x)
   plt.text(0.5, 0.5, 'matplotlib', color='r',
            fontsize=40, fontname=['Courier', 'DejaVu Sans Mono'],
            horizontalalignment='center',
            verticalalignment='center',
            transform=ax.transAxes,
            )
   plt.axis([1, 1.72, -60, 10])
   plt.gca().set_xticklabels([])
   plt.gca().set_yticklabels([])

Matplotlib logo (2008 - 2015).

..
   This logo was added in 325e47b.

.. plot::

   import numpy as np
   import matplotlib as mpl
   import matplotlib.pyplot as plt
   import matplotlib.cm as cm

   mpl.rcParams['xtick.labelsize'] = 10
   mpl.rcParams['ytick.labelsize'] = 12
   mpl.rcParams['axes.edgecolor'] = 'gray'


   axalpha = 0.05
   figcolor = 'white'
   dpi = 80
   fig = plt.figure(figsize=(6, 1.1), dpi=dpi)
   fig.patch.set_edgecolor(figcolor)
   fig.patch.set_facecolor(figcolor)


   def add_math_background():
       ax = fig.add_axes([0., 0., 1., 1.])

       text = []
       text.append(
           (r"$W^{3\beta}_{\delta_1 \rho_1 \sigma_2} = "
            r"U^{3\beta}_{\delta_1 \rho_1} + \frac{1}{8 \pi 2}"
            r"\int^{\alpha_2}_{\alpha_2} d \alpha^\prime_2 "
            r"\left[\frac{ U^{2\beta}_{\delta_1 \rho_1} - "
            r"\alpha^\prime_2U^{1\beta}_{\rho_1 \sigma_2} "
            r"}{U^{0\beta}_{\rho_1 \sigma_2}}\right]$", (0.7, 0.2), 20))
       text.append((r"$\frac{d\rho}{d t} + \rho \vec{v}\cdot\nabla\vec{v} "
                    r"= -\nabla p + \mu\nabla^2 \vec{v} + \rho \vec{g}$",
                    (0.35, 0.9), 20))
       text.append((r"$\int_{-\infty}^\infty e^{-x^2}dx=\sqrt{\pi}$",
                    (0.15, 0.3), 25))
       text.append((r"$F_G = G\frac{m_1m_2}{r^2}$",
                    (0.85, 0.7), 30))
       for eq, (x, y), size in text:
            ax.text(x, y, eq, ha='center', va='center', color="#11557c",
                   alpha=0.25, transform=ax.transAxes, fontsize=size)
       ax.set_axis_off()
       return ax


   def add_matplotlib_text(ax):
       ax.text(0.95, 0.5, 'matplotlib', color='#11557c', fontsize=65,
               ha='right', va='center', alpha=1.0, transform=ax.transAxes)


   def add_polar_bar():
       ax = fig.add_axes([0.025, 0.075, 0.2, 0.85], projection='polar')

       ax.patch.set_alpha(axalpha)
       ax.set_axisbelow(True)
       N = 7
       arc = 2. * np.pi
       theta = np.arange(0.0, arc, arc/N)
       radii = 10 * np.array([0.2, 0.6, 0.8, 0.7, 0.4, 0.5, 0.8])
       width = np.pi / 4 * np.array([0.4, 0.4, 0.6, 0.8, 0.2, 0.5, 0.3])
       bars = ax.bar(theta, radii, width=width, bottom=0.0)
       for r, bar in zip(radii, bars):
           bar.set_facecolor(cm.jet(r/10.))
           bar.set_alpha(0.6)

       ax.tick_params(labelbottom=False, labeltop=False,
                      labelleft=False, labelright=False)

       ax.grid(lw=0.8, alpha=0.9, ls='-', color='0.5')

       ax.set_yticks(np.arange(1, 9, 2))
       ax.set_rmax(9)


   main_axes = add_math_background()
   add_polar_bar()
   add_matplotlib_text(main_axes)
.. Note: This file is auto-generated using generate_credits.py

.. redirect-from:: /users/credits

.. _credits:

*******
Credits
*******


Matplotlib was written by John D. Hunter, with contributions from an
ever-increasing number of users and developers.  The current lead developer is
Thomas A. Caswell, who is assisted by many `active developers
<https://www.openhub.net/p/matplotlib/contributors>`_.
Please also see our instructions on :doc:`/users/project/citing`.

The following is a list of contributors extracted from the
git revision control history of the project:

4over7,
816-8055,
Aaron Boushley,
Aashil Patel,
AbdealiJK,
Abhinav Sagar,
Abhinuv Nitin Pitale,
Acanthostega,
Adam,
Adam Ginsburg,
Adam Gomaa,
Adam Heck,
Adam J. Stewart,
Adam Ortiz,
Adam Paszke,
Adam Ruszkowski,
Adam Williamson,
Adrian Price-Whelan,
Adrien Chardon,
Adrien F. Vincent,
Ahmet Bakan,
Akshay Nair,
Alan Bernstein,
Alan Du,
Alberto,
Alejandro Dubrovsky,
Aleksey Bilogur,
Alex C. Szatmary,
Alex Loew,
Alex Rothberg,
Alex Rudy,
AlexCav,
Alexander Buchkovsky,
Alexander Harnisch,
Alexander Rudy,
Alexander Taylor,
Alexei Colin,
Alexis Bienvenüe,
Ali Mehdi,
Ali Uneri,
Alistair Muldal,
Allan Haldane,
Allen Downey,
Alon Hershenhorn,
Alvaro Sanchez,
Amit Aronovitch,
Amy,
Amy Roberts,
AmyTeegarden,
AndersonDaniel,
Andras Deak,
Andrea Bedini,
Andreas Gustafsson,
Andreas Hilboll,
Andreas Mayer,
Andreas Mueller,
Andreas Wallner,
Andrew Dawson,
Andrew Merrill,
Andrew Nelson,
Andrew Straw,
Andy Mastbaum,
Andy Zhu,
Ankur Dedania,
Anthony Scopatz,
Anton Akhmerov,
Antony Lee,
Anubhav Shrimal,
Ao Liu (frankliuao),
Ardie Orden,
Arie,
Ariel Hernán Curiale,
Arnaud Gardelein,
Arpad Horvath,
Arthur Paulino,
Arvind,
Aseem Bansal,
Ashley Whetter,
Atharva Khare,
Avinash Sharma,
Ayappan P,
BHT,
BTWS,
Bas van Schaik,
Bastian Bechtold,
Behram Mistree,
Ben,
Ben Cohen,
Ben Gamari,
Ben Keller,
Ben Root,
Benedikt Daurer,
Benjamin Bengfort,
Benjamin Berg,
Benjamin Congdon,
Benjamin Reedlunn,
Bernhard M. Wiedemann,
Bharat123rox,
Bianca Gibson,
Binglin Chang,
Bingyao Liu,
Björn Dahlgren,
Blaise Thompson,
Boaz Mohar,
Bradley M. Froehle,
Brandon Liu,
Brendan Zhang,
Brennan Magee,
Brett Cannon,
Brett Graham,
Brian Mattern,
Brian McLaughlin,
Brigitta Sipocz,
Bruno Beltran,
Bruno Pagani,
Bruno Zohreh,
CJ Carey,
Cameron Bates,
Cameron Davidson-Pilon,
Cameron Fackler,
Carissa Brittain,
Carl Michal,
Carsten Schelp,
Carwyn Pelley,
Casey Webster,
Casper van der Wel,
Charles Moad,
Charles Ruan,
Chen Karako,
Cho Yin Yong,
Chris,
Chris Barnes,
Chris Beaumont,
Chris G,
Chris Holdgraf,
Chris Zimmerman,
Christer Jensen,
Christian Brodbeck,
Christian Brueffer,
Christian Stade-Schuldt,
Christoph Dann,
Christoph Deil,
Christoph Gohlke,
Christoph Hoffmann,
Christoph Pohl,
Christoph Reiter,
Christopher Bradshaw,
Cimarron Mittelsteadt,
Clemens Brunner,
Cody Scot,
Colin,
Colin Carroll,
Cong Ma,
Conner R. Phillips,
Corey Farwell,
Craig Citro,
Craig M,
Craig Tenney,
DaCoEx,
Dakota Blair,
Damian,
Damon McDougall,
Dan Hickstein,
Dana,
Daniel C. Marcu,
Daniel Hyams,
Daniel Laidig,
Daniel O'Connor,
DanielMatu,
Daniele Nicolodi,
Danny Hermes,
Dara Adib,
Darren Dale,
DaveL17,
David A,
David Anderson,
David Chudzicki,
David Haberthür,
David Huard,
David Kaplan,
David Kent,
David Kua,
David Stansby,
David Trémouilles,
Dean Malmgren,
Deng Tian,
Derek Kim,
Derek Tropf,
Devashish Deshpande,
Diego Mora Cespedes,
Dietmar Schwertberger,
Dietrich Brunn,
Divyam Madaan,
Dmitry Lupyan,
Dmitry Mottl,
Dmitry Shachnev,
Dominik Schmidt,
DonaldSeo,
Dora Fraeman Caswell,
DoriekeMG,
Dorota Jarecka,
Doug Blank,
Drew J. Sonne,
Duncan Macleod,
Dylan Evans,
E. G. Patrick Bos,
Edin Salkovic,
Edoardo Pizzigoni,
Egor Panfilov,
Elan Ernest,
Elena Glassman,
Elias Pipping,
Elijah Schutz,
Elizabeth Seiver,
Elliott Sales de Andrade,
Elvis Stansvik,
Emil Mikulic,
Emlyn Price,
Eric Dill,
Eric Firing,
Eric Larson,
Eric Ma,
Eric O. LEBIGOT (EOL),
Eric Relson,
Eric Wieser,
Erik Bray,
Erik M. Bray,
Erin Pintozzi,
Eugen Beck,
Eugene Yurtsev,
Evan Davey,
Ezra Peisach,
Fabian Kloosterman,
Fabian-Robert Stöter,
Fabien Maussion,
Fabio Zanini,
FedeMiorelli,
Federico Ariza,
Felipe,
Felix,
Felix Kohlgrüber,
Felix Yan,
Fernando Perez,
Filip Dimitrovski,
Filipe Fernandes,
Florencia Noriega,
Florian Le Bourdais,
Florian Rhiem,
Francesco Montesano,
Francis Colas,
Franco Vaccari,
Francoise Provencher,
Frank Sauerburger,
Frank Yu,
François Magimel,
Gabe,
Gabriel Munteanu,
Gal Avineri,
Galen Lynch,
Gauravjeet,
Gaute Hope,
Gazing,
Gellule Xg,
Geoffrey Spear,
Geoffroy Billotey,
Georg Raiser,
Gerald Storer,
Gina,
Giovanni,
Graeme Smecher,
Graham Poulter,
Greg Lucas,
Gregory Ashton,
Gregory R. Lee,
Grillard,
Grégory Lielens,
Guillaume Gay,
Guillermo Breto,
Gustavo Braganca,
Gustavo Goretkin,
HHest,
Hajoon Choi,
Hakan Kucukdereli,
Hanno Rein,
Hans Dembinski,
Hans Meine,
Hans Moritz Günther,
Harnesser,
Harshal Prakash Patankar,
Harshit Patni,
Hassan Kibirige,
Hastings Greer,
Heath Henley,
Heiko Oberdiek,
Helder,
Henning Pohl,
Herbert Kruitbosch,
Holger Peters,
Hubert Holin,
Hugo van Kemenade,
Ian Hincks,
Ian Thomas,
Ida Hjorth,
Ignas Anikevicius (gns_ank),
Ildar Akhmetgaleev,
Ilia Kurenkov,
Ilya Flyamer,
ImSoErgodic,
ImportanceOfBeingErnest,
Inception95,
Ingo Fründ,
Ioannis Filippidis,
Isa Hassen,
Isaac Schwabacher,
Isaac Slavitt,
Ismo Toijala,
J Alammar,
J. Goutin,
Jaap Versteegh,
Jack Kelly,
Jacob McDonald,
Jacobson Okoro,
Jae-Joon Lee,
Jaime Fernandez,
Jake Lee,
Jake Vanderplas,
James A. Bednar,
James Adams,
James Pallister,
James R. Evans,
JamesMakela,
Jamie Nunez,
Jan S. (Milania1),
Jan Schlüter,
Jan Schulz,
Jan-Philip Gehrcke,
Jan-willem De Bleser,
Jarrod Millman,
Jascha Ulrich,
Jason Grout,
Jason King,
Jason Liw Yan Chong,
Jason Miller,
Jason Neal,
Jason Zheng,
Javad,
JayP16,
Jean-Benoist Leger,
Jeff Lutgen,
Jeff Whitaker,
Jeffrey Bingham,
Jeffrey Hokanson @ Loki,
JelsB,
Jens Hedegaard Nielsen,
Jeremy Fix,
Jeremy O'Donoghue,
Jeremy Thurgood,
Jeroonk,
Jessica B. Hamrick,
Jiahao Chen,
Jim Radford,
Jochen Voss,
Jody Klymak,
Joe Kington,
Joel B. Mohler,
Joel Frederico,
Joel Wanner,
Johannes H. Jensen,
Johannes Wienke,
John Hoffman,
John Hunter,
John Vandenberg,
Johnny Gill,
JojoBoulix,
Jon Haitz Legarreta Gorroño,
Jonas Camillus Jeppesen,
Jonathan Waltman,
Jorge Moraleda,
Jorrit Wronski,
Joscha Reimer,
Josef Heinen,
Joseph Albert,
Joseph Fox-Rabinovitz,
Joseph Jon Booker,
Joseph Martinot-Lagarde,
Joshua Taillon,
José Ricardo,
Jouni K. Seppänen,
Joy Bhalla,
Juan Nunez-Iglesias,
Juanjo Bazán,
Julia Sprenger,
Julian Mehne,
Julian Taylor,
Julian V. Modesto,
JulianCienfuegos,
Julien Lhermitte,
Julien Schueller,
Julien Woillez,
Julien-Charles Lévesque,
Jun Tan,
Justin Cai,
Jörg Dietrich,
Kacper Kowalik (Xarthisius),
Kai Muehlbauer,
Kanchana Ranasinghe,
Kanwar245,
Katrin Leinweber,
Katy Huff,
Kayla Ngan,
Keerysanth Sribaskaran,
Ken McIvor,
Kenneth Ma,
Kevin Chan,
Kevin Davies,
Kevin Ji,
Kevin Keating,
Kevin Mader,
Kevin Rose,
Kexuan Sun,
Kieran Ramos,
Kimmo Palin,
Kjartan Myrdal,
Kjell Le,
Klara Gerlei,
Konrad Förstner,
Konstantin Tretyakov,
Kristen M. Thyng,
Kyle Bridgemohansingh,
Kyle Sunden,
Kyler Brown,
Lance Hepler,
Laptop11_ASPP2016,
Larry Bradley,
Laurent Thomas,
Lawrence D'Anna,
Leeonadoh,
Lennart Fricke,
Leo Singer,
Leon Loopik,
Leon Yin,
LevN0,
Levi Kilcher,
Liam Brannigan,
Lion Krischer,
Lionel Miller,
Lodato Luciano,
Lori J,
Loïc Estève,
Loïc Séguin-C,
Luca Verginer,
Luis Pedro Coelho,
Luke Davis,
Maarten Baert,
Maciej Dems,
Magnus Nord,
Maik Riechert,
Majid alDosari,
Maksym P,
Manan,
Manan Kevadiya,
Manish Devgan,
Manuel GOACOLOU,
Manuel Jung,
Manuel Metz,
Manuel Nuno Melo,
Maoz Gelbart,
Marat K,
Marc Abramowitz,
Marcel Martin,
Marco Gorelli,
MarcoGorelli,
Marcos Duarte,
Marek Rudnicki,
Marianne Corvellec,
Marin Gilles,
Mark Harfouche,
Mark Wolf,
Marko Baštovanović,
Markus Roth,
Markus Rothe,
Martin Dengler,
Martin Fitzpatrick,
Martin Spacek,
Martin Teichmann,
Martin Thoma,
Martin Ueding,
Massimo Santini,
Masud Rahman,
Mathieu Duponchelle,
Matt Giuca,
Matt Hancock,
Matt Klein,
Matt Li,
Matt Newville,
Matt Shen,
Matt Terry,
Matthew Bell,
Matthew Brett,
Matthew Emmett,
Matthias Bussonnier,
Matthias Geier,
Matthias Lüthi,
Matthieu Caneill,
MatthieuDartiailh,
Matti Picus,
Matěj Týč,
Max Chen,
Max Humber,
Max Shinn,
Maximilian Albert,
Maximilian Maahn,
Maximilian Nöthe,
Maximilian Trescher,
MeeseeksMachine,
Mellissa Cross,
Mher Kazandjian,
Michael,
Michael Droettboom,
Michael Jancsy,
Michael Sarahan,
Michael Scott Cuthbert,
Michael Seifert,
Michael Welter,
Michaël Defferrard,
Michele Mastropietro,
Michiel de Hoon,
Michka Popoff,
Mike Henninger,
Mike Jarvis,
Mike Kaufman,
Mikhail Korobov,
MinRK,
Mingkai Dong,
Minty Zhang,
MirandaXM,
Miriam Sierig,
Mitar,
Molly Rossow,
Moritz Boehle,
Mudit Surana,
Muhammad Mehdi,
MuhammadFarooq1234,
Mykola Dvornik,
Naoya Kanai,
Nathan Goldbaum,
Nathan Musoke,
Nathaniel M. Beaver,
Neil,
Neil Crighton,
Nelle Varoquaux,
Niall Robinson,
Nic Eggert,
Nicholas Devenish,
Nick Forrington,
Nick Garvey,
Nick Papior,
Nick Pope,
Nick Semenkovich,
Nico Schlömer,
Nicolas Courtemanche,
Nicolas P. Rougier,
Nicolas Pinto,
Nicolas Tessore,
Nik Quibin,
Nikita Kniazev,
Niklas Koep,
Nikolay Vyahhi,
Nils Werner,
Ninad Bhat,
Norbert Nemec,
Norman Fomferra,
O. Castany,
OceanWolf,
Oleg Selivanov,
Olga Botvinnik,
Oliver Natt,
Oliver Willekens,
Olivier,
Om Sitapara,
Omar Chehab,
Oriol Abril,
Orso Meneghini,
Osarumwense,
Pankaj Pandey,
Paramonov Andrey,
Parfenov Sergey,
Pascal Bugnion,
Pastafarianist,
Patrick Chen,
Patrick Feiring,
Patrick Marsh,
Patrick Shriwise,
PatrickFeiring,
Paul,
Paul Barret,
Paul Ganssle,
Paul Gierz,
Paul Hobson,
Paul Hoffman,
Paul Ivanov,
Paul J. Koprowski,
Paul Kirow,
Paul Romano,
Paul Seyfert,
Pauli Virtanen,
Pavel Fedin,
Pavol Juhas,
Per Parker,
Perry Greenfield,
Pete Bachant,
Pete Huang,
Pete Peterson,
Peter Iannucci,
Peter Mackenzie-Helnwein,
Peter Mortensen,
Peter Schutt,
Peter St. John,
Peter Würtz,
Petr Danecek,
Phil Elson,
Phil Ruffwind,
Philippe Pinard,
Pierre Haessig,
Pierre Thibault,
Pierre de Buyl,
Pim Schellart,
Piti Ongmongkolkul,
Po,
Pranav Garg,
Przemysław Dąbek,
Puneeth Chaganti,
QiCuiHub,
Qingpeng "Q.P." Zhang,
RAKOTOARISON Herilalaina,
Ram Rachum,
Ramiro Gómez,
Randy Olson,
Raphael,
Rasmus Diederichsen,
Ratin_Kumar,
Rebecca W Perry,
Reinier Heeres,
Remi Rampin,
Ricardo Mendes,
Riccardo Di Maio,
Richard Gowers,
Richard Hattersley,
Richard Ji-Cathriner,
Richard Trieu,
Ricky,
Rishikesh,
Rob Harrigan,
Robert Johansson,
Robin Dunn,
Robin Neatherway,
Robin Wilson,
Rohan Walker,
Roland Wirth,
Roman Yurchak,
Ronald Hartley-Davies,
RoryIAngus,
Roy Smith,
Rui Lopes,
Russell Owen,
RutgerK,
Ryan,
Ryan Blomberg,
Ryan D'Souza,
Ryan Dale,
Ryan May,
Ryan Morshead,
Ryan Nelson,
RyanPan,
SBCV,
Sairam Pillai,
Saket Choudhary,
Salganos,
Salil Vanvari,
Salinder Sidhu,
Sam Vaughan,
SamSchott,
Sameer D'Costa,
Samesh Lakhotia,
Samson,
Samuel St-Jean,
Sander,
Sandro Tosi,
Scott Howard,
Scott Lasley,
Scott Lawrence,
Scott Stevenson,
Sean Farley,
Sebastian Bullinger,
Sebastian Pinnau,
Sebastian Raschka,
Sebastián Vanrell,
Seraphim Alvanides,
Sergey B Kirpichev,
Sergey Kholodilov,
Sergey Koposov,
Seunghoon Park,
Siddhesh Poyarekar,
Sidharth Bansal,
Silviu Tantos,
Simon Cross,
Simon Gibbons,
Simon Legner,
Skelpdar,
Skipper Seabold,
Slav Basharov,
Snowhite,
SojiroFukuda,
Sourav Singh,
Spencer McIntyre,
Stanley, Simon,
Stefan Lehmann,
Stefan Mitic,
Stefan Pfenninger,
Stefan van der Walt,
Stefano Rivera,
Stephan Erb,
Stephane Raynaud,
Stephen Horst,
Stephen-Chilcote,
Sterling Smith,
Steve Chaplin,
Steve Dower,
Steven G. Johnson,
Steven Munn,
Steven Silvester,
Steven Tilley,
Stuart Mumford,
Tadeo Corradi,
Taehoon Lee,
Takafumi Arakaki,
Takeshi Kanmae,
Tamas Gal,
Tanuj,
Taras Kuzyo,
Ted Drain,
Ted Petrou,
Terence Honles,
Terrence J. Katzenbaer,
Terrence Katzenbaer,
The Gitter Badger,
Thein Oo,
Thomas A Caswell,
Thomas Hisch,
Thomas Kluyver,
Thomas Lake,
Thomas Levine,
Thomas Mansencal,
Thomas Robitaille,
Thomas Spura,
Thomas VINCENT,
Thorsten Liebig,
Tian Xia,
Till Hoffmann,
Till Stensitzki,
Tim Hoffmann,
Timo Vanwynsberghe,
Tobia De Koninck,
Tobias Froehlich,
Tobias Hoppe,
Tobias Megies,
Todd Jennings,
Todd Miller,
Tom,
Tom Augspurger,
Tom Dupré la Tour,
Tom Flannaghan,
Tomas Kazmar,
Tony S Yu,
Tor Colvin,
Travis Oliphant,
Trevor Bekolay,
Trish Gillett-Kawamoto,
Truong Pham,
Tuan Dung Tran,
Tyler Makaro,
Tyrone Xiong,
Ulrich Dobramysl,
Umair Idris,
V. Armando Solé,
V. R,
Vadim Markovtsev,
Valentin Haenel,
Valentin Schmidt,
Vedant Nanda,
Venkada,
Vidur Satija,
Viktor Kerkez,
Vincent L.M. Mazoyer,
Viraj Mohile,
Vitaly Buka,
Vlad Seghete,
Víctor Terrón,
Víctor Zabalza,
WANG Aiyong,
Warren Weckesser,
Wen Li,
Wendell Smith,
Werner F Bruhin,
Wes Campaigne,
Wieland Hoffmann,
Will Handley,
Will Silva,
William Granados,
William Mallard,
William Manley,
Wouter Overmeire,
Xiaowen Tang,
Xufeng Wang,
Yann Tambouret,
Yao-Yuan Mao,
Yaron de Leeuw,
Yu Feng,
Yue Zhihan,
Yunfei Yang,
Yuri D'Elia,
Yuval Langer,
Yuxin Wu,
Yuya,
Zac Hatfield-Dodds,
Zach Pincus,
Zair Mubashar,
Zbigniew Jędrzejewski-Szmek,
Zhili (Jerry) Pan,
Zulko,
ahed87,
akrherz,
alcinos,
alex,
alvarosg,
andrzejnovak,
aneda,
anykraus,
aparamon,
apodemus,
arokem,
as691454,
aseagram,
ash13,
aszilagyi,
azure-pipelines[bot],
bblay,
bduick,
bev-a-tron,
blackw1ng,
blah blah,
brut,
btang02,
buefox,
burrbull,
butterw,
cammil,
captainwhippet,
cclauss,
ch3rn0v,
chadawagner,
chaoyi1,
chebee7i,
chelseatroy,
chuanzhu xu,
cknd,
cldssty,
clintval,
dabana,
dahlbaek,
danielballan,
daronjp,
davidovitch,
daydreamt,
deeenes,
deepyaman,
djdt,
dlmccaffrey,
domspad,
donald,
donchanee,
drevicko,
e-q,
elpres,
endolith,
esvhd,
et2010,
fardal,
ffteja,
fgb,
fibersnet,
fourpoints,
fredrik-1,
frenchwr,
fuzzythecat,
fvgoto,
gcallah,
gitj,
gluap,
gnaggnoyil,
goir,
goldstarwebs,
greg-roper,
gregorybchris,
gwin-zegal,
hannah,
helmiriawan,
henryhu123,
hugadams,
ilivni,
insertroar,
itziakos,
jacob-on-github,
jb-leger,
jbbrokaw,
jbhopkins,
jdollichon,
jerrylui803,
jess,
jfbu,
jhelie,
jli,
joaonsg,
joelostblom,
jonchar,
juan.gonzalez,
kcrisman,
keithbriggs,
kelsiegr,
khyox,
kikocorreoso,
klaus,
klonuo,
kolibril13,
kramer65,
krishna katyal,
ksafran,
kshramt,
lboogaard,
legitz7,
lepuchi,
lichri12,
limtaesu,
lspvic,
luftek,
luz.paz,
lzkelley,
mamrehn,
marky,
masamson,
mbyt,
mcelrath,
mcquin,
mdipierro,
mikhailov,
miquelastein,
mitch,
mlub,
mobando,
mromanie,
muahah,
myyc,
nathan78906,
navdeep rana,
nbrunett,
nemanja,
neok-m4700,
nepix32,
nickystringer,
njwhite,
nmartensen,
nwin,
ob,
pdubcali,
pibion,
pkienzle,
productivememberofsociety666,
profholzer,
pupssman,
rahiel,
ranjanm,
rebot,
rhoef,
rsnape,
ruin,
rvhbooth,
s0vereign,
s9w,
saksmito,
scls19fr,
scott-vsi,
sdementen,
serv-inc,
settheory,
sfroid,
shaunwbell,
simon-kraeusel,
simonpf,
sindunuragarp,
smheidrich,
sohero,
spiessbuerger,
stahlous,
stone,
stonebig,
switham,
sxntxn,
syngron,
teresy,
thoo,
thuvejan,
tmdavison,
tomoemon,
tonyyli,
torfbolt,
u55,
ugurthemaster,
ultra-andy,
vab9,
vbr,
vishalBindal,
vraelvrangr,
watkinrt,
woclass,
xbtsw,
xuanyuansen,
y1thof,
yeo,
zhangeugenia,
zhoubecky,
Élie Gouzien,
Андрей Парамонов

Some earlier contributors not included above are (with apologies
to any we have missed):

Charles Twardy,
Gary Ruben,
John Gill,
David Moore,
Paul Barrett,
Jared Wahlstrand,
Jim Benson,
Paul Mcguire,
Andrew Dalke,
Nadia Dencheva,
Baptiste Carvello,
Sigve Tjoraand,
Ted Drain,
James Amundson,
Daishi Harada,
Nicolas Young,
Paul Kienzle,
John Porter,
and Jonathon Taylor.

Thanks to Tony Yu for the original logo design.

We also thank all who have reported bugs, commented on
proposed changes, or otherwise contributed to Matplotlib's
development and usefulness.
.. redirect-from:: /users/backmatter

Project information
-------------------

.. toctree::
    :maxdepth: 2

    license.rst
    citing.rst
    credits.rst
    history.rst
=============================================
What's new in Matplotlib 3.5.0 (Nov 15, 2021)
=============================================

For a list of all of the issues and pull requests since the last revision, see
the :ref:`github-stats`.

.. contents:: Table of Contents
   :depth: 4

.. toctree::
   :maxdepth: 4

Figure and Axes creation / management
=====================================

``subplot_mosaic`` supports simple Axes sharing
-----------------------------------------------

`.Figure.subplot_mosaic`, `.pyplot.subplot_mosaic` support *simple* Axes
sharing (i.e., only `True`/`False` may be passed to *sharex*/*sharey*). When
`True`, tick label visibility and Axis units will be shared.

.. plot::
    :include-source:

    mosaic = [
        ['A', [['B', 'C'],
               ['D', 'E']]],
        ['F', 'G'],
    ]
    fig = plt.figure(constrained_layout=True)
    ax_dict = fig.subplot_mosaic(mosaic, sharex=True, sharey=True)
    # All Axes use these scales after this call.
    ax_dict['A'].set(xscale='log', yscale='logit')

Figure now has ``draw_without_rendering`` method
------------------------------------------------

Some aspects of a figure are only determined at draw-time, such as the exact
position of text artists or deferred computation like automatic data limits.
If you need these values, you can use ``figure.canvas.draw()`` to force a full
draw. However, this has side effects, sometimes requires an open file, and is
doing more work than is needed.

The new `.Figure.draw_without_rendering` method runs all the updates that
``draw()`` does, but skips rendering the figure. It's thus more efficient if
you need the updated values to configure further aspects of the figure.

Figure ``__init__`` passes keyword arguments through to set
-----------------------------------------------------------

Similar to many other sub-classes of `~.Artist`, the `~.FigureBase`,
`~.SubFigure`, and `~.Figure` classes will now pass any additional keyword
arguments to `~.Artist.set` to allow properties of the newly created object to
be set at initialization time. For example::

    from matplotlib.figure import Figure
    fig = Figure(label='my figure')

Plotting methods
================

Add ``Annulus`` patch
---------------------

`.Annulus` is a new class for drawing elliptical annuli.

.. plot::

    import matplotlib.pyplot as plt
    from matplotlib.patches import Annulus

    fig, ax = plt.subplots()
    cir = Annulus((0.5, 0.5), 0.2, 0.05, fc='g')        # circular annulus
    ell = Annulus((0.5, 0.5), (0.5, 0.3), 0.1, 45,      # elliptical
                  fc='m', ec='b', alpha=0.5, hatch='xxx')
    ax.add_patch(cir)
    ax.add_patch(ell)
    ax.set_aspect('equal')

``set_data`` method for ``FancyArrow`` patch
--------------------------------------------

`.FancyArrow`, the patch returned by ``ax.arrow``, now has a ``set_data``
method that allows modifying the arrow after creation, e.g., for animation.

New arrow styles in ``ArrowStyle`` and ``ConnectionPatch``
----------------------------------------------------------

The new *arrow* parameter to `.ArrowStyle` substitutes the use of the
*beginarrow* and *endarrow* parameters in the creation of arrows. It receives
arrows strings like ``'<-'``, ``']-[``' and ``']->``' instead of individual
booleans.

Two new styles ``']->'`` and ``'<-['`` are also added via this mechanism.
`.ConnectionPatch`, which accepts arrow styles though its *arrowstyle*
parameter, also accepts these new styles.

.. plot::

    import matplotlib.patches as mpatches

    fig, ax = plt.subplots(figsize=(4, 4))

    ax.plot([0.75, 0.75], [0.25, 0.75], 'ok')
    ax.set(xlim=(0, 1), ylim=(0, 1), title='New ArrowStyle options')

    ax.annotate(']->', (0.75, 0.25), (0.25, 0.25),
                arrowprops=dict(
                    arrowstyle=']->', connectionstyle="arc3,rad=-0.05",
                    shrinkA=5, shrinkB=5,
                ),
                bbox=dict(boxstyle='square', fc='w'), size='large')

    ax.annotate('<-[', (0.75, 0.75), (0.25, 0.75),
                arrowprops=dict(
                    arrowstyle='<-[', connectionstyle="arc3,rad=-0.05",
                    shrinkA=5, shrinkB=5,
                ),
                bbox=dict(boxstyle='square', fc='w'), size='large')

Setting collection offset transform after initialization
--------------------------------------------------------

The added `.collections.Collection.set_offset_transform` may be used to set the
offset transform after initialization. This can be helpful when creating a
`.collections.Collection` outside an Axes object, and later adding it with
`.Axes.add_collection()` and setting the offset transform to `.Axes.transData`.

Colors and colormaps
====================

Colormap registry (experimental)
--------------------------------

Colormaps are now managed via `matplotlib.colormaps` (or `.pyplot.colormaps`),
which is a `.ColormapRegistry`. While we are confident that the API is final,
we formally mark it as experimental for 3.5 because we want to keep the option
to still modify the API for 3.6 should the need arise.

Colormaps can be obtained using item access::

    import matplotlib.pyplot as plt
    cmap = plt.colormaps['viridis']

To register new colormaps use::

    plt.colormaps.register(my_colormap)

We recommend to use the new API instead of the `~.cm.get_cmap` and
`~.cm.register_cmap` functions for new code. `matplotlib.cm.get_cmap` and
`matplotlib.cm.register_cmap` will eventually be deprecated and removed.
Within `.pyplot`, ``plt.get_cmap()`` and ``plt.register_cmap()`` will continue
to be supported for backward compatibility.

Image interpolation now possible at RGBA stage
----------------------------------------------

Images in Matplotlib created via `~.axes.Axes.imshow` are resampled to match
the resolution of the current canvas. It is useful to apply an auto-aliasing
filter when downsampling to reduce Moiré effects. By default, interpolation is
done on the data, a norm applied, and then the colormapping performed.

However, it is often desirable for the anti-aliasing interpolation to happen
in RGBA space, where the colors are interpolated rather than the data. This
usually leads to colors outside the colormap, but visually blends adjacent
colors, and is what browsers and other image processing software do.

A new keyword argument *interpolation_stage* is provided for
`~.axes.Axes.imshow` to set the stage at which the anti-aliasing interpolation
happens. The default is the current behaviour of "data", with the alternative
being "rgba" for the newly-available behavior.

.. figure:: /gallery/images_contours_and_fields/images/sphx_glr_image_antialiasing_001.png
   :target: ../../gallery/images_contours_and_fields/image_antialiasing.html

   Example of the interpolation stage options.

For more details see the discussion of the new keyword argument in
:doc:`/gallery/images_contours_and_fields/image_antialiasing`.

``imshow`` supports half-float arrays
-------------------------------------

The `~.axes.Axes.imshow` method now supports half-float arrays, i.e., NumPy
arrays with dtype ``np.float16``.

A callback registry has been added to Normalize objects
-------------------------------------------------------

`.colors.Normalize` objects now have a callback registry, ``callbacks``, that
can be connected to by other objects to be notified when the norm is updated.
The callback emits the key ``changed`` when the norm is modified.
`.cm.ScalarMappable` is now a listener and will register a change when the
norm's vmin, vmax or other attributes are changed.

Titles, ticks, and labels
=========================

Settings tick positions and labels simultaneously in ``set_ticks``
------------------------------------------------------------------

`.Axis.set_ticks` (and the corresponding `.Axes.set_xticks` /
`.Axes.set_yticks`) has a new parameter *labels* allowing to set tick positions
and labels simultaneously.

Previously, setting tick labels was done using `.Axis.set_ticklabels` (or
the corresponding `.Axes.set_xticklabels` / `.Axes.set_yticklabels`); this
usually only makes sense if tick positions were previously fixed with
`~.Axis.set_ticks`::

    ax.set_xticks([1, 2, 3])
    ax.set_xticklabels(['a', 'b', 'c'])

The combined functionality is now available in `~.Axis.set_ticks`::

    ax.set_xticks([1, 2, 3], ['a', 'b', 'c'])

The use of `.Axis.set_ticklabels` is discouraged, but it will stay available
for backward compatibility.

Note: This addition makes the API of `~.Axis.set_ticks` also more similar to
`.pyplot.xticks` / `.pyplot.yticks`, which already had the additional *labels*
parameter.

Fonts and Text
==============

Triple and quadruple dot mathtext accents
-----------------------------------------

In addition to single and double dot accents, mathtext now supports triple and
quadruple dot accents.

.. plot::
    :include-source:

    fig = plt.figure(figsize=(3, 1))
    fig.text(0.5, 0.5, r'$\dot{a} \ddot{b} \dddot{c} \ddddot{d}$', fontsize=40,
             horizontalalignment='center', verticalalignment='center')

Font properties of legend title are configurable
------------------------------------------------

Title's font properties can be set via the *title_fontproperties* keyword
argument, for example:

.. plot::

    fig, ax = plt.subplots(figsize=(4, 3))
    ax.plot(range(10), label='point')
    ax.legend(title='Points',
              title_fontproperties={'family': 'serif', 'size': 20})

``Text`` and ``TextBox`` added *parse_math* option
--------------------------------------------------

`.Text` and `.TextBox` objects now allow a *parse_math* keyword-only argument
which controls whether math should be parsed from the displayed string. If
*True*, the string will be parsed as a math text object. If *False*, the string
will be considered a literal and no parsing will occur.

Text can be positioned inside TextBox widget
--------------------------------------------

A new parameter called *textalignment* can be used to control for the position
of the text inside the Axes of the `.TextBox` widget.

.. plot::

    from matplotlib import pyplot as plt
    from matplotlib.widgets import TextBox

    fig = plt.figure(figsize=(4, 3))
    for i, alignment in enumerate(['left', 'center', 'right']):
            box_input = fig.add_axes([0.1, 0.7 - i*0.3, 0.8, 0.2])
            text_box = TextBox(ax=box_input, initial=f'{alignment} alignment',
                               label='', textalignment=alignment)

Simplifying the font setting for usetex mode
--------------------------------------------

Now the :rc:`font.family` accepts some font names as value for a more
user-friendly setup.

.. code-block::

    plt.rcParams.update({
        "text.usetex": True,
        "font.family": "Helvetica"
    })

Type 42 subsetting is now enabled for PDF/PS backends
-----------------------------------------------------

`~matplotlib.backends.backend_pdf` and `~matplotlib.backends.backend_ps` now
use a unified Type 42 font subsetting interface, with the help of `fontTools
<https://fonttools.readthedocs.io/en/latest/>`_

Set :rc:`pdf.fonttype` or :rc:`ps.fonttype` to ``42`` to trigger this
workflow::

    # for PDF backend
    plt.rcParams['pdf.fonttype'] = 42

    # for PS backend
    plt.rcParams['ps.fonttype'] = 42

    fig, ax = plt.subplots()
    ax.text(0.4, 0.5, 'subsetted document is smaller in size!')

    fig.savefig("document.pdf")
    fig.savefig("document.ps")

rcParams improvements
=====================

Allow setting default legend labelcolor globally
------------------------------------------------

A new :rc:`legend.labelcolor` sets the default *labelcolor* argument for
`.Figure.legend`.  The special values  'linecolor', 'markerfacecolor' (or
'mfc'), or 'markeredgecolor' (or 'mec') will cause the legend text to match the
corresponding color of marker.

.. plot::

    plt.rcParams['legend.labelcolor'] = 'linecolor'

    # Make some fake data.
    a = np.arange(0, 3, .02)
    c = np.exp(a)
    d = c[::-1]

    fig, ax = plt.subplots()
    ax.plot(a, c, 'g--', label='Model length')
    ax.plot(a, d, 'r:', label='Data length')

    ax.legend()

    plt.show()

3D Axes improvements
====================

Axes3D now allows manual control of draw order
----------------------------------------------

The `~mpl_toolkits.mplot3d.axes3d.Axes3D` class now has *computed_zorder*
parameter. When set to False, Artists are drawn using their ``zorder``
attribute.

.. plot::

    import matplotlib.patches as mpatches
    from mpl_toolkits.mplot3d import art3d

    fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(6.4, 3),
                                   subplot_kw=dict(projection='3d'))

    ax1.set_title('computed_zorder = True (default)')
    ax2.set_title('computed_zorder = False')
    ax2.computed_zorder = False

    corners = ((0, 0, 0), (0, 5, 0), (5, 5, 0), (5, 0, 0))
    for ax in (ax1, ax2):
        tri = art3d.Poly3DCollection([corners],
                                     facecolors='white',
                                     edgecolors='black',
                                     zorder=1)
        ax.add_collection3d(tri)
        line, = ax.plot((2, 2), (2, 2), (0, 4), c='red', zorder=2,
                        label='zorder=2')
        points = ax.scatter((3, 3), (1, 3), (1, 3), c='red', zorder=10,
                            label='zorder=10')

        ax.set_xlim((0, 5))
        ax.set_ylim((0, 5))
        ax.set_zlim((0, 2.5))

    plane = mpatches.Patch(facecolor='white', edgecolor='black',
                           label='zorder=1')
    fig.legend(handles=[plane, line, points], loc='lower center')

Allow changing the vertical axis in 3d plots
----------------------------------------------

`~mpl_toolkits.mplot3d.axes3d.Axes3D.view_init` now has the parameter
*vertical_axis* which allows switching which axis is aligned vertically.

.. plot::

    Nphi, Nr = 18, 8
    phi = np.linspace(0, np.pi, Nphi)
    r = np.arange(Nr)
    phi = np.tile(phi, Nr).flatten()
    r = np.repeat(r, Nphi).flatten()

    x = r * np.sin(phi)
    y = r * np.cos(phi)
    z = Nr - r

    fig, axs = plt.subplots(1, 3, figsize=(7, 3),
                            subplot_kw=dict(projection='3d'),
                            gridspec_kw=dict(wspace=0.4, left=0.08, right=0.98,
                                             bottom=0, top=1))
    for vert_a, ax in zip(['z', 'y', 'x'], axs):
        pc = ax.scatter(x, y, z, c=z)
        ax.view_init(azim=30, elev=30, vertical_axis=vert_a)
        ax.set(xlabel='x', ylabel='y', zlabel='z',
               title=f'vertical_axis={vert_a!r}')

``plot_surface`` supports masked arrays and NaNs
------------------------------------------------

`.axes3d.Axes3D.plot_surface` supports masked arrays and NaNs, and will now
hide quads that contain masked or NaN points. The behaviour is similar to
`.Axes.contour` with ``corner_mask=True``.

.. plot::

    import matplotlib
    import matplotlib.pyplot as plt
    import numpy as np

    fig, ax = plt.subplots(figsize=(6, 6), subplot_kw={'projection': '3d'},
                           constrained_layout=True)

    x, y = np.mgrid[1:10:1, 1:10:1]
    z = x ** 3 + y ** 3 - 500
    z = np.ma.masked_array(z, z < 0)

    ax.plot_surface(x, y, z, rstride=1, cstride=1, linewidth=0, cmap='inferno')
    ax.view_init(35, -90)

3D plotting methods support *data* keyword argument
---------------------------------------------------

To match all 2D plotting methods, the 3D Axes now support the *data* keyword
argument. This allows passing arguments indirectly from a DataFrame-like
structure. ::

    data = {  # A labelled data set, or e.g., Pandas DataFrame.
        'x': ...,
        'y': ...,
        'z': ...,
        'width': ...,
        'depth': ...,
        'top': ...,
    }

    fig, ax = plt.subplots(subplot_kw={'projection': '3d')
    ax.bar3d('x', 'y', 'z', 'width', 'depth', 'top', data=data)

Interactive tool improvements
=============================

Colorbars now have pan and zoom functionality
---------------------------------------------

Interactive plots with colorbars can now be zoomed and panned on the colorbar
axis. This adjusts the *vmin* and *vmax* of the ``ScalarMappable`` associated
with the colorbar. This is currently only enabled for continuous norms. Norms
used with contourf and categoricals, such as ``BoundaryNorm`` and ``NoNorm``,
have the interactive capability disabled by default. ``cb.ax.set_navigate()``
can be used to set whether a colorbar axes is interactive or not.

Updated the appearance of Slider widgets
----------------------------------------

The appearance of `~.Slider` and `~.RangeSlider` widgets were updated and given
new styling parameters for the added handles.

.. plot::

    import matplotlib.pyplot as plt
    from matplotlib.widgets import Slider

    plt.figure(figsize=(4, 2))
    ax_old = plt.axes([0.2, 0.65, 0.65, 0.1])
    ax_new = plt.axes([0.2, 0.25, 0.65, 0.1])
    Slider(ax_new, "New", 0, 1)

    ax = ax_old
    valmin = 0
    valinit = 0.5
    ax.set_xlim([0, 1])
    ax_old.axvspan(valmin, valinit, 0, 1)
    ax.axvline(valinit, 0, 1, color="r", lw=1)
    ax.set_xticks([])
    ax.set_yticks([])
    ax.text(
        -0.02,
        0.5,
        "Old",
        transform=ax.transAxes,
        verticalalignment="center",
        horizontalalignment="right",
    )

    ax.text(
        1.02,
        0.5,
        "0.5",
        transform=ax.transAxes,
        verticalalignment="center",
        horizontalalignment="left",
    )

Removing points on a PolygonSelector
------------------------------------

After completing a `~matplotlib.widgets.PolygonSelector`, individual points can
now be removed by right-clicking on them.

Dragging selectors
------------------

The `~matplotlib.widgets.SpanSelector`, `~matplotlib.widgets.RectangleSelector`
and `~matplotlib.widgets.EllipseSelector` have a new keyword argument,
*drag_from_anywhere*, which when set to `True` allows you to click and drag
from anywhere inside the selector to move it. Previously it was only possible
to move it by either activating the move modifier button, or clicking on the
central handle.

The size of the `~matplotlib.widgets.SpanSelector` can now be changed using the
edge handles.

Clearing selectors
------------------

The selectors (`~.widgets.EllipseSelector`, `~.widgets.LassoSelector`,
`~.widgets.PolygonSelector`, `~.widgets.RectangleSelector`, and
`~.widgets.SpanSelector`) have a new method *clear*, which will clear the
current selection and get the selector ready to make a new selection. This is
equivalent to pressing the *escape* key.

Setting artist properties of selectors
--------------------------------------

The artist properties of the `~.widgets.EllipseSelector`,
`~.widgets.LassoSelector`, `~.widgets.PolygonSelector`,
`~.widgets.RectangleSelector` and `~.widgets.SpanSelector` selectors can be
changed using the ``set_props`` and ``set_handle_props`` methods.

Ignore events outside selection
-------------------------------

The `~.widgets.EllipseSelector`, `~.widgets.RectangleSelector` and
`~.widgets.SpanSelector` selectors have a new keyword argument,
*ignore_event_outside*, which when set to `True` will ignore events outside of
the current selection. The handles or the new dragging functionality can instead
be used to change the selection.

``CallbackRegistry`` objects gain a method to temporarily block signals
-----------------------------------------------------------------------

The context manager `~matplotlib.cbook.CallbackRegistry.blocked` can be used
to block callback signals from being processed by the ``CallbackRegistry``.
The optional keyword, *signal*, can be used to block a specific signal
from being processed and let all other signals pass.

.. code-block::

    import matplotlib.pyplot as plt

    fig, ax = plt.subplots()
    ax.imshow([[0, 1], [2, 3]])

    # Block all interactivity through the canvas callbacks
    with fig.canvas.callbacks.blocked():
        plt.show()

    fig, ax = plt.subplots()
    ax.imshow([[0, 1], [2, 3]])

    # Only block key press events
    with fig.canvas.callbacks.blocked(signal="key_press_event"):
        plt.show()

Directional sizing cursors
--------------------------

Canvases now support setting directional sizing cursors, i.e., horizontal and
vertical double arrows. These are used in e.g., selector widgets. Try the
:doc:`/gallery/widgets/mouse_cursor` example to see the cursor in your desired
backend.

Sphinx extensions
=================

More configuration of ``mathmpl`` sphinx extension
--------------------------------------------------

The `matplotlib.sphinxext.mathmpl` sphinx extension supports two new
configuration options that may be specified in your ``conf.py``:

- ``mathmpl_fontsize`` (float), which sets the font size of the math text in
  points;
- ``mathmpl_srcset`` (list of str), which provides a list of sizes to support
  `responsive resolution images
  <https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images>`__
  The list should contain additional x-descriptors (``'1.5x'``, ``'2x'``, etc.)
  to generate (1x is the default and always included.)

Backend-specific improvements
=============================

GTK backend
-----------

A backend supporting GTK4_ has been added. Both Agg and Cairo renderers are
supported. The GTK4 backends may be selected as GTK4Agg or GTK4Cairo.

.. _GTK4: https://www.gtk.org/

Qt backends
-----------

Support for Qt6 (using either PyQt6_ or PySide6_) has been added, with either
the Agg or Cairo renderers. Simultaneously, support for Qt4 has been dropped.
Both Qt6 and Qt5 are supported by a combined backend (QtAgg or QtCairo), and
the loaded version is determined by modules already imported, the
:envvar:`QT_API` environment variable, and available packages. See
:ref:`QT_API-usage` for details. The versioned Qt5 backend names (Qt5Agg or
Qt5Cairo) remain supported for backwards compatibility.

.. _PyQt6: https://www.riverbankcomputing.com/static/Docs/PyQt6/
.. _PySide6: https://doc.qt.io/qtforpython/

HiDPI support in Cairo-based, GTK, and Tk backends
--------------------------------------------------

The GTK3 backends now support HiDPI fully, including mixed monitor cases (on
Wayland only). The newly added GTK4 backends also support HiDPI.

The TkAgg backend now supports HiDPI **on Windows only**, including mixed
monitor cases.

All Cairo-based backends correctly support HiDPI as well as their Agg
counterparts did (i.e., if the toolkit supports HiDPI, then the \*Cairo backend
will now support it, but not otherwise.)

Qt figure options editor improvements
-------------------------------------

The figure options editor in the Qt backend now also supports editing the left
and right titles (plus the existing centre title). Editing Axis limits is
better supported when using a date converter. The ``symlog`` option is now
available in Axis scaling options. All entries with the same label are now
shown in the Curves tab.

WX backends support mouse navigation buttons
--------------------------------------------

The WX backends now support navigating through view states using the mouse
forward/backward buttons, as in other backends.

WebAgg uses asyncio instead of Tornado
--------------------------------------

The WebAgg backend defaults to using `asyncio` over Tornado for timer support.
This allows using the WebAgg backend in JupyterLite.

Version information
===================

We switched to the `release-branch-semver`_ version scheme of setuptools-scm.
This only affects the version information for development builds. Their version
number now describes the targeted release, i.e. 3.5.0.dev820+g6768ef8c4c is 820
commits after the previous release and is scheduled to be officially released
as 3.5.0 later.

In addition to the string ``__version__``, there is now a namedtuple
``__version_info__`` as well, which is modelled after `sys.version_info`_. Its
primary use is safely comparing version information, e.g.  ``if
__version_info__ >= (3, 4, 2)``.

.. _release-branch-semver: https://github.com/pypa/setuptools_scm#version-number-construction
.. _sys.version_info: https://docs.python.org/3/library/sys.html#sys.version_info
.. _whats-new-0-99:

What's new in Matplotlib 0.99 (Aug 29, 2009)
============================================

.. contents:: Table of Contents
   :depth: 2



New documentation
-----------------

Jae-Joon Lee has written two new guides :doc:`/tutorials/intermediate/legend_guide`
and :ref:`plotting-guide-annotation`.  Michael Sarahan has written
:doc:`/tutorials/introductory/images`.  John Hunter has written two new tutorials on
working with paths and transformations: :doc:`/tutorials/advanced/path_tutorial` and
:doc:`/tutorials/advanced/transforms_tutorial`.

.. _whats-new-mplot3d:

mplot3d
--------

Reinier Heeres has ported John Porter's mplot3d over to the new
matplotlib transformations framework, and it is now available as a
toolkit mpl_toolkits.mplot3d (which now comes standard with all mpl
installs).  See :ref:`mplot3d-examples-index` and
:doc:`/tutorials/toolkits/mplot3d`.

.. plot::

    from matplotlib import cm
    from mpl_toolkits.mplot3d import Axes3D

    X = np.arange(-5, 5, 0.25)
    Y = np.arange(-5, 5, 0.25)
    X, Y = np.meshgrid(X, Y)
    R = np.sqrt(X**2 + Y**2)
    Z = np.sin(R)

    fig = plt.figure()
    ax = Axes3D(fig, auto_add_to_figure=False)
    fig.add_axes(ax)
    ax.plot_surface(X, Y, Z, rstride=1, cstride=1, cmap=cm.viridis)

    plt.show()

.. _whats-new-axes-grid:

axes grid toolkit
-----------------

Jae-Joon Lee has added a new toolkit to ease displaying multiple images in
matplotlib, as well as some support for curvilinear grids to support
the world coordinate system. The toolkit is included standard with all
new mpl installs.   See :ref:`axes_grid1-examples-index`,
:ref:`axisartist-examples-index`, :ref:`axes_grid1_users-guide-index` and
:ref:`axisartist_users-guide-index`

.. plot::

    from mpl_toolkits.axes_grid1.axes_rgb import RGBAxes


    def get_demo_image():
        # prepare image
        delta = 0.5

        extent = (-3, 4, -4, 3)
        x = np.arange(-3.0, 4.001, delta)
        y = np.arange(-4.0, 3.001, delta)
        X, Y = np.meshgrid(x, y)
        Z1 = np.exp(-X**2 - Y**2)
        Z2 = np.exp(-(X - 1)**2 - (Y - 1)**2)
        Z = (Z1 - Z2) * 2

        return Z, extent


    def get_rgb():
        Z, extent = get_demo_image()

        Z[Z < 0] = 0.
        Z = Z / Z.max()

        R = Z[:13, :13]
        G = Z[2:, 2:]
        B = Z[:13, 2:]

        return R, G, B


    fig = plt.figure()
    ax = RGBAxes(fig, [0.1, 0.1, 0.8, 0.8])

    r, g, b = get_rgb()
    ax.imshow_rgb(r, g, b, origin="lower")

    ax.RGB.set_xlim(0., 9.5)
    ax.RGB.set_ylim(0.9, 10.6)

    plt.show()

.. _whats-new-spine:

Axis spine placement
--------------------

Andrew Straw has added the ability to place "axis spines" -- the lines
that denote the data limits -- in various arbitrary locations.  No
longer are your axis lines constrained to be a simple rectangle around
the figure -- you can turn on or off left, bottom, right and top, as
well as "detach" the spine to offset it away from the data.  See
:doc:`/gallery/spines/spine_placement_demo` and
:class:`matplotlib.spines.Spine`.

.. plot::

    def adjust_spines(ax, spines):
        for loc, spine in ax.spines.items():
            if loc in spines:
                spine.set_position(('outward', 10))  # outward by 10 points
            else:
                spine.set_color('none')  # don't draw spine

        # turn off ticks where there is no spine
        if 'left' in spines:
            ax.yaxis.set_ticks_position('left')
        else:
            # no yaxis ticks
            ax.yaxis.set_ticks([])

        if 'bottom' in spines:
            ax.xaxis.set_ticks_position('bottom')
        else:
            # no xaxis ticks
            ax.xaxis.set_ticks([])

    fig = plt.figure()

    x = np.linspace(0, 2*np.pi, 100)
    y = 2*np.sin(x)

    ax = fig.add_subplot(2, 2, 1)
    ax.plot(x, y)
    adjust_spines(ax, ['left'])

    ax = fig.add_subplot(2, 2, 2)
    ax.plot(x, y)
    adjust_spines(ax, [])

    ax = fig.add_subplot(2, 2, 3)
    ax.plot(x, y)
    adjust_spines(ax, ['left', 'bottom'])

    ax = fig.add_subplot(2, 2, 4)
    ax.plot(x, y)
    adjust_spines(ax, ['bottom'])

    plt.show()
.. _whats-new-3-3-0:

=============================================
What's new in Matplotlib 3.3.0 (Jul 16, 2020)
=============================================

For a list of all of the issues and pull requests since the last
revision, see the :ref:`github-stats`.

.. contents:: Table of Contents
   :depth: 4

.. toctree::
   :maxdepth: 4


Figure and Axes creation / management
=====================================

Provisional API for composing semantic axes layouts from text or nested lists
-----------------------------------------------------------------------------

The `.Figure` class has a provisional method to generate complex grids of named
`.axes.Axes` based on nested list input or ASCII art:

.. plot::
   :include-source: True

   axd = plt.figure(constrained_layout=True).subplot_mosaic(
       [['.', 'histx'],
        ['histy', 'scat']]
   )
   for k, ax in axd.items():
       ax.text(0.5, 0.5, k,
               ha='center', va='center', fontsize=36,
               color='darkgrey')

or as a string (with single-character Axes labels):

.. plot::
   :include-source: True

   axd = plt.figure(constrained_layout=True).subplot_mosaic(
       """
       TTE
       L.E
       """)
   for k, ax in axd.items():
       ax.text(0.5, 0.5, k,
               ha='center', va='center', fontsize=36,
               color='darkgrey')

See :doc:`/tutorials/provisional/mosaic` for more details and examples.

``GridSpec.subplots()``
-----------------------

The `.GridSpec` class gained a `~.GridSpecBase.subplots` method, so that one
can write ::

    fig.add_gridspec(2, 2, height_ratios=[3, 1]).subplots()

as an alternative to ::

    fig.subplots(2, 2, gridspec_kw={"height_ratios": [3, 1]})

New ``Axes.sharex``, ``Axes.sharey`` methods
--------------------------------------------

These new methods allow sharing axes *immediately* after creating them. Note
that behavior is indeterminate if axes are not shared immediately after
creation.

For example, they can be used to selectively link some axes created all
together using `~.Figure.subplot_mosaic`::

    fig = plt.figure(constrained_layout=True)
    axd = fig.subplot_mosaic([['.', 'histx'], ['histy', 'scat']],
                             gridspec_kw={'width_ratios': [1, 7],
                                          'height_ratios': [2, 7]})

    axd['histx'].sharex(axd['scat'])
    axd['histy'].sharey(axd['scat'])

.. plot::

    np.random.seed(0)
    x = np.random.random(100) * 100 + 20
    y = np.random.random(100) * 50 + 25
    c = np.random.random(100) - 0.5

    fig = plt.figure(constrained_layout=True)
    axd = fig.subplot_mosaic([['.', 'histx'], ['histy', 'scat']],
                             gridspec_kw={'width_ratios': [1, 7],
                                          'height_ratios': [2, 7]})

    axd['histy'].invert_xaxis()
    axd['histx'].sharex(axd['scat'])
    axd['histy'].sharey(axd['scat'])

    im = axd['scat'].scatter(x, y, c=c, cmap='RdBu', picker=True)
    fig.colorbar(im, orientation='horizontal', ax=axd['scat'], shrink=0.8)

    axd['histx'].hist(x)
    axd['histy'].hist(y, orientation='horizontal')

tight_layout now supports suptitle
----------------------------------

Previous versions did not consider `.Figure.suptitle`, so it may overlap with
other artists after calling `~.Figure.tight_layout`:

.. plot::

    fig, axs = plt.subplots(1, 3)
    for i, ax in enumerate(axs):
        ax.plot([1, 2, 3])
        ax.set_title(f'Axes {i}')

    t = fig.suptitle('suptitle')
    t.set_in_layout(False)
    fig.tight_layout()

From now on, the ``suptitle`` will be considered:

.. plot::

    fig, axs = plt.subplots(1, 3)
    for i, ax in enumerate(axs):
        ax.plot([1, 2, 3])
        ax.set_title(f'Axes {i}')

    fig.suptitle('suptitle')
    fig.tight_layout()

Setting axes box aspect
-----------------------

It is now possible to set the aspect of an axes box directly via
`~.Axes.set_box_aspect`. The box aspect is the ratio between axes height and
axes width in physical units, independent of the data limits. This is useful
to, e.g., produce a square plot, independent of the data it contains, or to
have a non-image plot with the same axes dimensions next to an image plot with
fixed (data-)aspect.

For use cases check out the :doc:`Axes box aspect
</gallery/subplots_axes_and_figures/axes_box_aspect>` example.


Colors and colormaps
====================

Turbo colormap
--------------

Turbo is an improved rainbow colormap for visualization, created by the Google
AI team for computer vision and machine learning. Its purpose is to
display depth and disparity data. Please see the `Google AI Blog
<https://ai.googleblog.com/2019/08/turbo-improved-rainbow-colormap-for.html>`_
for further details.

.. plot::

    gradient = np.linspace(0, 1, 256)
    gradient = np.vstack((gradient, gradient))
    cmaps = ['turbo', 'jet', 'gist_rainbow_r', 'hsv_r']

    fig, axs = plt.subplots(len(cmaps), constrained_layout=True)
    for name, ax in zip(cmaps, axs):
        ax.imshow(gradient, aspect='auto', cmap=plt.get_cmap(name))
        ax.set_title(name)
        ax.set_axis_off()

``colors.BoundaryNorm`` supports *extend* keyword argument
----------------------------------------------------------

`~.colors.BoundaryNorm` now has an *extend* keyword argument, analogous to
*extend* in `~.axes.Axes.contourf`. When set to 'both', 'min', or 'max', it
maps the corresponding out-of-range values to `~.colors.Colormap` lookup-table
indices near the appropriate ends of their range so that the colors for out-of
range values are adjacent to, but distinct from, their in-range neighbors. The
colorbar inherits the *extend* argument from the norm, so with
``extend='both'``, for example, the colorbar will have triangular extensions
for out-of-range values with colors that differ from adjacent in-range colors.

  .. plot::

    import matplotlib.pyplot as plt
    from matplotlib.colors import BoundaryNorm
    import numpy as np

    # Make the data
    dx, dy = 0.05, 0.05
    y, x = np.mgrid[slice(1, 5 + dy, dy),
                    slice(1, 5 + dx, dx)]
    z = np.sin(x) ** 10 + np.cos(10 + y * x) * np.cos(x)
    z = z[:-1, :-1]

    # Z roughly varies between -1 and +1.
    # Color boundary levels range from -0.8 to 0.8, so there are out-of-bounds
    # areas.
    levels = [-0.8, -0.5, -0.2, 0.2, 0.5, 0.8]
    cmap = plt.get_cmap('PiYG')

    fig, axs = plt.subplots(nrows=2, constrained_layout=True, sharex=True)

    # Before this change:
    norm = BoundaryNorm(levels, ncolors=cmap.N)
    im = axs[0].pcolormesh(x, y, z, cmap=cmap, norm=norm)
    fig.colorbar(im, ax=axs[0], extend='both')
    axs[0].axis([x.min(), x.max(), y.min(), y.max()])
    axs[0].set_title("Colorbar with extend='both'")

    # With the new keyword:
    norm = BoundaryNorm(levels, ncolors=cmap.N, extend='both')
    im = axs[1].pcolormesh(x, y, z, cmap=cmap, norm=norm)
    fig.colorbar(im, ax=axs[1])  # note that the colorbar is updated accordingly
    axs[1].axis([x.min(), x.max(), y.min(), y.max()])
    axs[1].set_title("BoundaryNorm with extend='both'")

    plt.show()

Text color for legend labels
----------------------------

The text color of legend labels can now be set by passing a parameter
``labelcolor`` to `~.axes.Axes.legend`. The ``labelcolor`` keyword can be:

* A single color (either a string or RGBA tuple), which adjusts the text color
  of all the labels.
* A list or tuple, allowing the text color of each label to be set
  individually.
* ``linecolor``, which sets the text color of each label to match the
  corresponding line color.
* ``markerfacecolor``, which sets the text color of each label to match the
  corresponding marker face color.
* ``markeredgecolor``,  which sets the text color of each label to match the
  corresponding marker edge color.

.. plot::

    options = ['C3', 'linecolor', 'markerfacecolor', 'markeredgecolor']

    fig, axs = plt.subplots(2, 2, constrained_layout=True)
    for ax, color in zip(axs.flat, options):
        ax.plot([1, 2, 3], marker='o',
                color='C0', markerfacecolor='C1', markeredgecolor='C2',
                linewidth=3, markersize=10, markeredgewidth=3,
                label='a line')

        ax.legend(labelcolor=color)
        ax.set_title(f'labelcolor={color!r}')

        ax.margins(0.1)

Pcolor and Pcolormesh now accept ``shading='nearest'`` and ``'auto'``
---------------------------------------------------------------------

Previously `.axes.Axes.pcolor` and `.axes.Axes.pcolormesh` handled the
situation where *x* and *y* have the same (respective) size as *C* by dropping
the last row and column of *C*, and *x* and *y* are regarded as the edges of
the remaining rows and columns in *C*. However, many users want *x* and *y*
centered on the rows and columns of *C*.

To accommodate this, ``shading='nearest'`` and ``shading='auto'`` are new
allowed strings for the *shading* keyword argument. ``'nearest'`` will center
the color on *x* and *y* if *x* and *y* have the same dimensions as *C*
(otherwise an error will be thrown). ``shading='auto'`` will choose 'flat' or
'nearest' based on the size of *X*, *Y*, *C*.

If ``shading='flat'`` then *X*, and *Y* should have dimensions one larger than
*C*. If *X* and *Y* have the same dimensions as *C*, then the previous behavior
is used and the last row and column of *C* are dropped, and a
DeprecationWarning is emitted.

Users can also specify this by the new :rc:`pcolor.shading` in their
``.matplotlibrc`` or via `.rcParams`.

See :doc:`pcolormesh </gallery/images_contours_and_fields/pcolormesh_grids>`
for examples.


Titles, ticks, and labels
=========================

Align labels to Axes edges
--------------------------

`~.axes.Axes.set_xlabel`, `~.axes.Axes.set_ylabel` and
``ColorbarBase.set_label`` support a parameter ``loc`` for simplified
positioning. For the xlabel, the supported values are 'left', 'center', or
'right'. For the ylabel, the supported values are 'bottom', 'center', or
'top'.

The default is controlled via :rc:`xaxis.labelposition` and
:rc:`yaxis.labelposition`; the Colorbar label takes the rcParam based on its
orientation.

.. plot::

    options = ['left', 'center', 'right']
    fig, axs = plt.subplots(len(options), 1, constrained_layout=True)
    for ax, loc in zip(axs, options):
        ax.plot([1, 2, 3])
        ax.set_xlabel(f'xlabel loc={loc!r}', loc=loc)

    options = ['bottom', 'center', 'top']
    fig, axs = plt.subplots(1, len(options), constrained_layout=True)
    for ax, loc in zip(axs, options):
        ax.plot([1, 2, 3])
        ax.set_ylabel(f'ylabel loc={loc!r}', loc=loc)

Allow tick formatters to be set with str or function inputs
-----------------------------------------------------------

`~.Axis.set_major_formatter` and `~.Axis.set_minor_formatter`
now accept `str` or function inputs in addition to `~.ticker.Formatter`
instances. For a `str` a `~.ticker.StrMethodFormatter` is automatically
generated and used. For a function a `~.ticker.FuncFormatter` is automatically
generated and used. In other words,
::

    ax.xaxis.set_major_formatter('{x} km')
    ax.xaxis.set_minor_formatter(lambda x, pos: str(x-5))

are shortcuts for::

    import matplotlib.ticker as mticker

    ax.xaxis.set_major_formatter(mticker.StrMethodFormatter('{x} km'))
    ax.xaxis.set_minor_formatter(
        mticker.FuncFormatter(lambda x, pos: str(x-5))

.. plot::

    from matplotlib import ticker

    titles = ["'{x} km'", "lambda x, pos: str(x-5)"]
    formatters = ['{x} km', lambda x, pos: str(x-5)]

    fig, axs = plt.subplots(2, 1, figsize=(8, 2), constrained_layout=True)

    for ax, title, formatter in zip(axs, titles, formatters):
        # only show the bottom spine
        ax.yaxis.set_major_locator(ticker.NullLocator())
        for spine in ['top', 'left', 'right']:
            ax.spines[spine].set_visible(False)

        # define tick positions
        ax.xaxis.set_major_locator(ticker.MultipleLocator(1.00))
        ax.xaxis.set_minor_locator(ticker.MultipleLocator(0.25))

        ax.tick_params(which='major', width=1.00, length=5)
        ax.tick_params(which='minor', width=0.75, length=2.5, labelsize=10)
        ax.set_xlim(0, 5)
        ax.set_ylim(0, 1)
        ax.text(0.0, 0.2, f'ax.xaxis.set_major_formatter({title})',
                transform=ax.transAxes, fontsize=14, fontname='Monospace',
                color='tab:blue')

        ax.xaxis.set_major_formatter(formatter)

``Axes.set_title`` gains a *y* keyword argument to control auto positioning
---------------------------------------------------------------------------

`~.axes.Axes.set_title` tries to auto-position the title to avoid any
decorators on the top x-axis. This is not always desirable so now *y* is an
explicit keyword argument of `~.axes.Axes.set_title`. It defaults to *None*
which means to use auto-positioning. If a value is supplied (i.e. the pre-3.0
default was ``y=1.0``) then auto-positioning is turned off. This can also be
set with the new rcParameter :rc:`axes.titley`.

.. plot::

    fig, axs = plt.subplots(1, 2, constrained_layout=True, figsize=(5, 2))
    axs[0].set_title('y=0.7\n$\sum_{j_n} x_j$', y=0.7)
    axs[1].set_title('y=None\n$\sum_{j_n} x_j$')
    plt.show()

Offset text is now set to the top when using ``axis.tick_top()``
----------------------------------------------------------------

Solves the issue that the power indicator (e.g., 1e4) stayed on the bottom,
even if the ticks were on the top.

Set zorder of contour labels
----------------------------

`~.axes.Axes.clabel` now accepts a *zorder* keyword argument making it easier
to set the *zorder* of contour labels. If not specified, the default *zorder*
of clabels used to always be 3 (i.e. the default *zorder* of `~.text.Text`)
irrespective of the *zorder* passed to
`~.axes.Axes.contour`/`~.axes.Axes.contourf`. The new default *zorder* for
clabels has been changed to (``2 + zorder`` passed to `~.axes.Axes.contour` /
`~.axes.Axes.contourf`).


Other changes
=============

New ``Axes.axline`` method
--------------------------

A new `~.axes.Axes.axline` method has been added to draw infinitely long lines
that pass through two points.

.. plot::
   :include-source: True

   fig, ax = plt.subplots()

   ax.axline((.1, .1), slope=5, color='C0', label='by slope')
   ax.axline((.1, .2), (.8, .7), color='C3', label='by points')

   ax.legend()

``imshow`` now coerces 3D arrays with depth 1 to 2D
---------------------------------------------------

Starting from this version arrays of size MxNx1 will be coerced into MxN
for displaying. This means commands like ``plt.imshow(np.random.rand(3, 3, 1))``
will no longer return an error message that the image shape is invalid.

Better control of ``Axes.pie`` normalization
--------------------------------------------

Previously, `.Axes.pie` would normalize its input *x* if ``sum(x) > 1``, but
would do nothing if the sum were less than 1. This can be confusing, so an
explicit keyword argument *normalize* has been added. By default, the old
behavior is preserved.

By passing *normalize*, one can explicitly control whether any rescaling takes
place or whether partial pies should be created. If normalization is disabled,
and ``sum(x) > 1``, then an error is raised.

.. plot::

    def label(x):
        return [str(v) for v in x]

    x = np.array([0.25, 0.3, 0.3])
    fig, ax = plt.subplots(2, 2, constrained_layout=True)

    ax[0, 0].pie(x, autopct='%1.1f%%', labels=label(x), normalize=False)
    ax[0, 0].set_title('normalize=False')
    ax[0, 1].pie(x, autopct='%1.2f%%', labels=label(x), normalize=True)
    ax[0, 1].set_title('normalize=True')

    # This is supposed to show the 'old' behavior of not passing *normalize*
    # explicitly, but for the purposes of keeping the documentation build
    # warning-free, and future proof for when the deprecation is made
    # permanent, we pass *normalize* here explicitly anyway.
    ax[1, 0].pie(x, autopct='%1.2f%%', labels=label(x), normalize=False)
    ax[1, 0].set_title('normalize unspecified\nsum(x) < 1')
    ax[1, 1].pie(x * 10, autopct='%1.2f%%', labels=label(x * 10),
                 normalize=True)
    ax[1, 1].set_title('normalize unspecified\nsum(x) > 1')

Dates use a modern epoch
------------------------

Matplotlib converts dates to days since an epoch using `.dates.date2num` (via
`matplotlib.units`). Previously, an epoch of ``0000-12-31T00:00:00`` was used
so that ``0001-01-01`` was converted to 1.0. An epoch so distant in the past
meant that a modern date was not able to preserve microseconds because 2000
years times the 2^(-52) resolution of a 64-bit float gives 14 microseconds.

Here we change the default epoch to the more reasonable UNIX default of
``1970-01-01T00:00:00`` which for a modern date has 0.35 microsecond
resolution.  (Finer resolution is not possible because we rely on
`datetime.datetime` for the date locators). Access to the epoch is provided by
`~.dates.get_epoch`, and there is a new :rc:`date.epoch` rcParam. The user may
also call `~.dates.set_epoch`, but it must be set *before* any date conversion
or plotting is used.

If you have data stored as ordinal floats in the old epoch, you can convert
them to the new ordinal using the following formula::

    new_ordinal = old_ordinal + mdates.date2num(np.datetime64('0000-12-31'))

Lines now accept ``MarkerStyle`` instances as input
---------------------------------------------------

Similar to `~.Axes.scatter`, `~.Axes.plot` and `~.lines.Line2D` now accept
`~.markers.MarkerStyle` instances as input for the *marker* parameter::

    plt.plot(..., marker=matplotlib.markers.MarkerStyle("D"))


Fonts
=====

Simple syntax to select fonts by absolute path
----------------------------------------------

Fonts can now be selected by passing an absolute `pathlib.Path` to the *font*
keyword argument of `.Text`.

Improved font weight detection
------------------------------

Matplotlib is now better able to determine the weight of fonts from their
metadata, allowing to differentiate between fonts within the same family more
accurately.


rcParams improvements
=====================

``matplotlib.rc_context`` can be used as a decorator
----------------------------------------------------

`matplotlib.rc_context` can now be used as a decorator (technically, it is now
implemented as a `contextlib.contextmanager`), e.g., ::

    @rc_context({"lines.linewidth": 2})
    def some_function(...):
        ...

rcParams for controlling default "raise window" behavior
--------------------------------------------------------

The new config option :rc:`figure.raise_window` allows disabling of the raising
of the plot window when calling `~.pyplot.show` or `~.pyplot.pause`. The
``MacOSX`` backend is currently not supported.

Add generalized ``mathtext.fallback`` to rcParams
-------------------------------------------------

New  :rc:`mathtext.fallback` rcParam. Takes "cm", "stix", "stixsans"
or "none" to turn fallback off. The rcParam *mathtext.fallback_to_cm* is
deprecated, but if used, will override new fallback.

Add ``contour.linewidth`` to rcParams
-------------------------------------

The new config option :rc:`contour.linewidth` allows to control the default
line width of contours as a float. When set to ``None``, the line widths fall
back to :rc:`lines.linewidth`. The config value is overridden as usual by the
*linewidths* argument passed to `~.axes.Axes.contour` when it is not set to
``None``.


3D Axes improvements
====================

``Axes3D`` no longer distorts the 3D plot to match the 2D aspect ratio
----------------------------------------------------------------------

Plots made with :class:`~mpl_toolkits.mplot3d.axes3d.Axes3D` were previously
stretched to fit a square bounding box. As this stretching was done after the
projection from 3D to 2D, it resulted in distorted images if non-square
bounding boxes were used. As of 3.3, this no longer occurs.

Currently, modes of setting the aspect (via
`~mpl_toolkits.mplot3d.axes3d.Axes3D.set_aspect`) in data space are not
supported for Axes3D but may be in the future. If you want to simulate having
equal aspect in data space, set the ratio of your data limits to match the
value of `~.get_box_aspect`. To control these ratios use the
`~mpl_toolkits.mplot3d.axes3d.Axes3D.set_box_aspect` method which accepts the
ratios as a 3-tuple of X:Y:Z. The default aspect ratio is 4:4:3.

3D axes now support minor ticks
-------------------------------

.. plot::
    :include-source: True

    ax = plt.figure().add_subplot(projection='3d')

    ax.scatter([0, 1, 2], [1, 3, 5], [30, 50, 70])

    ax.set_xticks([0.25, 0.75, 1.25, 1.75], minor=True)
    ax.set_xticklabels(['a', 'b', 'c', 'd'], minor=True)

    ax.set_yticks([1.5, 2.5, 3.5, 4.5], minor=True)
    ax.set_yticklabels(['A', 'B', 'C', 'D'], minor=True)

    ax.set_zticks([35, 45, 55, 65], minor=True)
    ax.set_zticklabels([r'$\alpha$', r'$\beta$', r'$\delta$', r'$\gamma$'],
                       minor=True)

    ax.tick_params(which='major', color='C0', labelcolor='C0', width=5)
    ax.tick_params(which='minor', color='C1', labelcolor='C1', width=3)

Home/Forward/Backward buttons now work with 3D axes
---------------------------------------------------


Interactive tool improvements
=============================

More consistent toolbar behavior across backends
------------------------------------------------

Toolbar features are now more consistent across backends. The history buttons
will auto-disable when there is no further action in a direction. The pan and
zoom buttons will be marked active when they are in use.

In NbAgg and WebAgg, the toolbar buttons are now grouped similarly to other
backends. The WebAgg toolbar now uses the same icons as other backends.

Toolbar icons are now styled for dark themes
--------------------------------------------

On dark themes, toolbar icons will now be inverted. When using the GTK3Agg
backend, toolbar icons are now symbolic, and both foreground and background
colors will follow the theme. Tooltips should also behave correctly.

Cursor text now uses a number of significant digits matching pointing precision
-------------------------------------------------------------------------------

Previously, the x/y position displayed by the cursor text would usually include
far more significant digits than the mouse pointing precision (typically one
pixel). This is now fixed for linear scales.

GTK / Qt zoom rectangle now black and white
-------------------------------------------

This makes it visible even over a dark background.

Event handler simplifications
-----------------------------

The `.backend_bases.key_press_handler` and
`.backend_bases.button_press_handler` event handlers can now be directly
connected to a canvas with ``canvas.mpl_connect("key_press_event",
key_press_handler)`` and ``canvas.mpl_connect("button_press_event",
button_press_handler)``, rather than having to write wrapper functions that
fill in the (now optional) *canvas* and *toolbar* parameters.


Functions to compute a Path's size
==================================

Various functions were added to `~.bezier.BezierSegment` and `~.path.Path` to
allow computation of the shape/size of a `~.path.Path` and its composite Bezier
curves.

In addition to the fixes below, `~.bezier.BezierSegment` has gained more
documentation and usability improvements, including properties that contain its
dimension, degree, control_points, and more.

Better interface for Path segment iteration
-------------------------------------------

`~.path.Path.iter_bezier` iterates through the `~.bezier.BezierSegment`'s that
make up the Path. This is much more useful typically than the existing
`~.path.Path.iter_segments` function, which returns the absolute minimum amount
of information possible to reconstruct the Path.

Fixed bug that computed a Path's Bbox incorrectly
-------------------------------------------------

Historically, `~.path.Path.get_extents` has always simply returned the Bbox of
a curve's control points, instead of the Bbox of the curve itself. While this is
a correct upper bound for the path's extents, it can differ dramatically from
the Path's actual extents for non-linear Bezier curves.


Backend-specific improvements
=============================

``savefig()`` gained a *backend* keyword argument
-------------------------------------------------

The *backend* keyword argument to ``savefig`` can now be used to pick the
rendering backend without having to globally set the backend; e.g., one can
save PDFs using the pgf backend with ``savefig("file.pdf", backend="pgf")``.

The SVG backend can now render hatches with transparency
--------------------------------------------------------

The SVG backend now respects the hatch stroke alpha. Useful applications are,
among others, semi-transparent hatches as a subtle way to differentiate columns
in bar plots.

SVG supports URLs on more artists
---------------------------------

URLs on more artists (i.e., from `.Artist.set_url`) will now be saved in
SVG files, namely, ``Tick``\s and ``Line2D``\s are now supported.

Images in SVG will no longer be blurred in some viewers
-------------------------------------------------------

A style is now supplied to images without interpolation (``imshow(...,
interpolation='none'``) so that SVG image viewers will no longer perform
interpolation when rendering themselves.

Saving SVG now supports adding metadata
---------------------------------------

When saving SVG files, metadata can now be passed which will be saved in the
file using `Dublin Core`_ and `RDF`_. A list of valid metadata can be found in
the documentation for `.FigureCanvasSVG.print_svg`.

.. _Dublin Core: https://www.dublincore.org/specifications/dublin-core/
.. _RDF: https://www.w3.org/1999/.status/PR-rdf-syntax-19990105/status

Saving PDF metadata via PGF now consistent with PDF backend
-----------------------------------------------------------

When saving PDF files using the PGF backend, passed metadata will be
interpreted in the same way as with the PDF backend.  Previously, this metadata
was only accepted by the PGF backend when saving a multi-page PDF with
`.backend_pgf.PdfPages`, but is now allowed when saving a single figure, as
well.

NbAgg and WebAgg no longer use jQuery & jQuery UI
-------------------------------------------------

Instead, they are implemented using vanilla JavaScript. Please report any
issues with browsers.
.. _whats-new-3-0-0:

What's new in Matplotlib 3.0 (Sep 18, 2018)
===========================================

Improved default backend selection
----------------------------------

The default backend no longer must be set as part of the build
process.  Instead, at run time, the builtin backends are tried in
sequence until one of them imports.

Headless Linux servers (identified by the DISPLAY environment variable not
being defined) will not select a GUI backend.

Cyclic colormaps
----------------

Two new colormaps named 'twilight' and 'twilight_shifted' have been
added.  These colormaps start and end on the same color, and have two
symmetric halves with equal lightness, but diverging color. Since they
wrap around, they are a good choice for cyclic data such as phase
angles, compass directions, or time of day. Like *viridis* and
*cividis*, *twilight* is perceptually uniform and colorblind friendly.


Ability to scale axis by a fixed order of magnitude
---------------------------------------------------

To scale an axis by a fixed order of magnitude, set the *scilimits* argument of
`.Axes.ticklabel_format` to the same (non-zero) lower and upper limits. Say to scale
the y axis by a million (1e6), use

.. code-block:: python

  ax.ticklabel_format(style='sci', scilimits=(6, 6), axis='y')

The behavior of ``scilimits=(0, 0)`` is unchanged. With this setting, Matplotlib will adjust
the order of magnitude depending on the axis values, rather than keeping it fixed. Previously, setting
``scilimits=(m, m)`` was equivalent to setting ``scilimits=(0, 0)``.


Add ``AnchoredDirectionArrows`` feature to mpl_toolkits
-------------------------------------------------------

A new mpl_toolkits class
:class:`~mpl_toolkits.axes_grid1.anchored_artists.AnchoredDirectionArrows`
draws a pair of orthogonal arrows to indicate directions on a 2D plot. A
minimal working example takes in the transformation object for the coordinate
system (typically ax.transAxes), and arrow labels. There are several optional
parameters that can be used to alter layout. For example, the arrow pairs can
be rotated and the color can be changed. By default the labels and arrows have
the same color, but the class may also pass arguments for customizing arrow
and text layout, these are passed to :class:`matplotlib.textpath.TextPath` and
`matplotlib.patches.FancyArrowPatch`. Location, length and width for both
arrow tail and head can be adjusted, the direction arrows and labels can have a
frame. Padding and separation parameters can be adjusted.


Add ``minorticks_on()/off()`` methods for colorbar
--------------------------------------------------

A new method ``ColorbarBase.minorticks_on`` has been added to
correctly display minor ticks on a colorbar. This method doesn't allow the
minor ticks to extend into the regions beyond vmin and vmax when the *extend*
keyword argument (used while creating the colorbar) is set to 'both', 'max' or
'min'. A complementary method ``ColorbarBase.minorticks_off`` has
also been added to remove the minor ticks on the colorbar.


Colorbar ticks can now be automatic
-----------------------------------

The number of ticks placed on colorbars was previously appropriate for a large
colorbar, but looked bad if the colorbar was made smaller (i.e. via the
*shrink* keyword argument). This has been changed so that the number of ticks
is now responsive to how large the colorbar is.



Don't automatically rename duplicate file names
-----------------------------------------------

Previously, when saving a figure to a file using the GUI's
save dialog box, if the default filename (based on the
figure window title) already existed on disk, Matplotlib
would append a suffix (e.g. ``Figure_1-1.png``), preventing
the dialog from prompting to overwrite the file. This
behaviour has been removed. Now if the file name exists on
disk, the user is prompted whether or not to overwrite it.
This eliminates guesswork, and allows intentional
overwriting, especially when the figure name has been
manually set using ``figure.canvas.set_window_title()``.


Legend now has a *title_fontsize* keyword argument (and rcParam)
----------------------------------------------------------------

The title for a `.Figure.legend` and `.Axes.legend` can now have its font size
set via the *title_fontsize* keyword argument.  There is also a new
:rc:`legend.title_fontsize`.  Both default to ``None``, which means the legend
title will have the same font size as the axes default font size (*not* the
legend font size, set by the *fontsize* keyword argument or
:rc:`legend.fontsize`).


Support for axes.prop_cycle property *markevery* in rcParams
------------------------------------------------------------

The Matplotlib ``rcParams`` settings object now supports configuration
of the attribute :rc:`axes.prop_cycle` with cyclers using the *markevery*
Line2D object property. 

Multi-page PDF support for pgf backend
--------------------------------------

The pgf backend now also supports multi-page PDF files.

.. code-block:: python

    from matplotlib.backends.backend_pgf import PdfPages
    import matplotlib.pyplot as plt

    with PdfPages('multipage.pdf') as pdf:
        # page 1
        plt.plot([2, 1, 3])
        pdf.savefig()

        # page 2
        plt.cla()
        plt.plot([3, 1, 2])
        pdf.savefig()


Pie charts are now circular by default
--------------------------------------
We acknowledge that the majority of people do not like egg-shaped pies.
Therefore, an axes to which a pie chart is plotted will be set to have
equal aspect ratio by default. This ensures that the pie appears circular
independent on the axes size or units. To revert to the previous behaviour
set the axes' aspect ratio to automatic by using ``ax.set_aspect("auto")`` or
``plt.axis("auto")``.

Add ``ax.get_gridspec`` to `.SubplotBase`
-----------------------------------------

New method `.SubplotBase.get_gridspec` is added so that users can
easily get the gridspec that went into making an axes:

  .. code::

    import matplotlib.pyplot as plt

    fig, axs = plt.subplots(3, 2)
    gs = axs[0, -1].get_gridspec()

    # remove the last column
    for ax in axs[:,-1].flatten():
      ax.remove()

    # make a subplot in last column that spans rows.
    ax = fig.add_subplot(gs[:, -1])
    plt.show()


Axes titles will no longer overlap xaxis
----------------------------------------

Previously an axes title had to be moved manually if an xaxis overlapped
(usually when the xaxis was put on the top of the axes).  Now, the title
will be automatically moved above the xaxis and its decorators (including
the xlabel) if they are at the top.

If desired, the title can still be placed manually.  There is a slight kludge;
the algorithm checks if the y-position of the title is 1.0 (the default),
and moves if it is.  If the user places the title in the default location
(i.e. ``ax.title.set_position(0.5, 1.0)``), the title will still be moved
above the xaxis.  If the user wants to avoid this, they can
specify a number that is close (i.e. ``ax.title.set_position(0.5, 1.01)``)
and the title will not be moved via this algorithm.



New convenience methods for GridSpec
------------------------------------

There are new convenience methods for `.gridspec.GridSpec` and
`.gridspec.GridSpecFromSubplotSpec`.  Instead of the former we can
now call `.Figure.add_gridspec` and for the latter `.SubplotSpec.subgridspec`.

.. code-block:: python

    import matplotlib.pyplot as plt

    fig = plt.figure()
    gs0 = fig.add_gridspec(3, 1)
    ax1 = fig.add_subplot(gs0[0])
    ax2 = fig.add_subplot(gs0[1])
    gssub = gs0[2].subgridspec(1, 3)
    for i in range(3):
        fig.add_subplot(gssub[0, i])


Figure has an `~.figure.Figure.add_artist` method
-------------------------------------------------

A method `~.figure.Figure.add_artist` has been added to the
:class:`~.figure.Figure` class, which allows artists to be added directly
to a figure. E.g. ::

   circ = plt.Circle((.7, .5), .05)
   fig.add_artist(circ)

In case the added artist has no transform set previously, it will be set to
the figure transform (``fig.transFigure``).
This new method may be useful for adding artists to figures without axes or to
easily position static elements in figure coordinates.


``:math:`` directive renamed to ``:mathmpl:``
---------------------------------------------

The ``:math:`` rst role provided by `matplotlib.sphinxext.mathmpl` has been
renamed to ``:mathmpl:`` to avoid conflicting with the ``:math:`` role that
Sphinx 1.8 provides by default.  (``:mathmpl:`` uses Matplotlib to render math
expressions to images embedded in html, whereas Sphinx uses MathJax.)

When using Sphinx<1.8, both names (``:math:`` and ``:mathmpl:``) remain
available for backwards-compatibility.
.. _github-stats-3-1-3:

GitHub statistics for 3.1.3 (Feb 03, 2020)
==========================================

GitHub statistics for 2019/11/05 (tag: v3.1.2) - 2020/02/03

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 7 issues and merged 45 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/50?closed=1>`__

The following 13 authors contributed 125 commits.

* Antony Lee
* David Stansby
* Elliott Sales de Andrade
* hannah
* Jody Klymak
* MeeseeksMachine
* Nelle Varoquaux
* Nikita Kniazev
* Paul Ivanov
* SamSchott
* Steven G. Johnson
* Thomas A Caswell
* Tim Hoffmann

GitHub issues and pull requests:

Pull Requests (45):

* :ghpull:`16382`: Backport PR #16379 on branch v3.1.x (FIX: catch on message content, not module)
* :ghpull:`16362`: Backport PR #16347: FIX: catch warnings from pandas in cbook._check_1d
* :ghpull:`16356`: Backport PR #16330 on branch v3.1.x (Clearer signal handling)
* :ghpull:`16330`: Clearer signal handling
* :ghpull:`16348`: Backport PR #16255 on branch v3.1.x (Move version info to sidebar)
* :ghpull:`16345`: Backport PR #16298 on branch v3.1.x (Don't recursively call draw_idle when updating artists at draw time.)
* :ghpull:`16298`: Don't recursively call draw_idle when updating artists at draw time.
* :ghpull:`16322`: Backport PR #16250: Fix zerolen intersect
* :ghpull:`16320`: Backport PR #16311 on branch v3.1.x (don't override non-Python signal handlers)
* :ghpull:`16311`: don't override non-Python signal handlers
* :ghpull:`16250`: Fix zerolen intersect
* :ghpull:`16237`: Backport PR #16235 on branch v3.1.x (FIX: AttributeError in TimerBase.start)
* :ghpull:`16235`: FIX: AttributeError in TimerBase.start
* :ghpull:`16208`: Backport PR #15556 on branch v3.1.x (Fix test suite compat with ghostscript 9.50.)
* :ghpull:`16213`: Backport PR #15763 on branch v3.1.x (Skip webagg test if tornado is not available.)
* :ghpull:`16167`: Backport PR #16166 on branch v3.1.x (Add badge for citing 3.1.2)
* :ghpull:`16166`: Add badge for citing 3.1.2
* :ghpull:`16144`: Backport PR #16053 on branch v3.1.x (Fix v_interval setter)
* :ghpull:`16053`: Fix v_interval setter
* :ghpull:`16136`: Backport PR #16112 on branch v3.1.x (CI: Fail when failed to install dependencies)
* :ghpull:`16131`: Backport PR #16126 on branch v3.1.x (TST: test_fork: Missing join)
* :ghpull:`16126`: TST: test_fork: Missing join
* :ghpull:`16091`: Backport PR #16086 on branch v3.1.x (FIX: use supported attribute to check pillow version)
* :ghpull:`16040`: Backport PR #16031 on branch v3.1.x (Fix docstring of hillshade().)
* :ghpull:`16032`: Backport PR #16028 on branch v3.1.x (Prevent FigureCanvasQT_draw_idle recursively calling itself.)
* :ghpull:`16028`: Prevent FigureCanvasQT_draw_idle recursively calling itself.
* :ghpull:`16020`: Backport PR #16007 on branch v3.1.x (Fix search on nested pages)
* :ghpull:`16018`: Backport PR #15735 on branch v3.1.x (Cleanup some mplot3d docstrings.)
* :ghpull:`16007`: Fix search on nested pages
* :ghpull:`15957`: Backport PR #15953 on branch v3.1.x (Update donation link)
* :ghpull:`15763`: Skip webagg test if tornado is not available.
* :ghpull:`15881`: Backport PR #15859 on branch v3.1.x (Doc: Move search field into nav bar)
* :ghpull:`15863`: Backport PR #15244 on branch v3.1.x: Change documentation format of rcParams defaults
* :ghpull:`15859`: Doc: Move search field into nav bar
* :ghpull:`15860`: Backport PR #15851 on branch v3.1.x (ffmpeg is available on default ubuntu packages now)
* :ghpull:`15851`: ffmpeg is available on default ubuntu packages now.
* :ghpull:`15843`: Backport PR #15737 on branch v3.1.x (Fix env override in WebAgg backend test.)
* :ghpull:`15760`: Backport PR #15752 on branch v3.1.x (Update boxplot/violinplot faq.)
* :ghpull:`15757`: Backport PR #15751 on branch v3.1.x (Modernize FAQ entry for plt.show().)
* :ghpull:`15735`: Cleanup some mplot3d docstrings.
* :ghpull:`15753`: Backport PR #15661 on branch v3.1.x (Document scope of 3D scatter depthshading.)
* :ghpull:`15741`: Backport PR #15729 on branch v3.1.x (Catch correct parse errror type for dateutil >= 2.8.1)
* :ghpull:`15729`: Catch correct parse errror type for dateutil >= 2.8.1
* :ghpull:`15737`: Fix env override in WebAgg backend test.
* :ghpull:`15244`: Change documentation format of rcParams defaults

Issues (7):

* :ghissue:`16294`: BUG: Interactive mode slow
* :ghissue:`15842`: Path.intersects_path returns True when it shouldn't
* :ghissue:`16163`: libpng error: Read Error when using matplotlib after setting usetex=True
* :ghissue:`15960`: v3.1.2 - test suite "frozen" after it finishes
* :ghissue:`16083`: Pillow 7.0.0 Support
* :ghissue:`15481`: Recursion error
* :ghissue:`15717`: Move search field into nav bar
.. _github-stats-3-0-0:

GitHub statistics for 3.0.0 (Sep 18, 2018)
==========================================

GitHub statistics for 2017/01/17 (tag: v2.0.0) - 2018/09/18

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 123 issues and merged 598 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/23?closed=1>`__

The following 478 authors contributed 9809 commits.

* 816-8055
* Aashil Patel
* AbdealiJK
* Adam
* Adam Williamson
* Adrian Price-Whelan
* Adrien Chardon
* Adrien F. Vincent
* ahed87
* akrherz
* Akshay Nair
* Alan Bernstein
* Alberto
* alcinos
* Aleksey Bilogur
* Alex Rothberg
* Alexander Buchkovsky
* Alexander Harnisch
* AlexCav
* Alexis Bienvenüe
* Ali Uneri
* Allan Haldane
* Allen Downey
* Alvaro Sanchez
* alvarosg
* AndersonDaniel
* Andras Deak
* Andreas Gustafsson
* Andreas Hilboll
* Andreas Mayer
* Andreas Mueller
* Andrew Nelson
* Andy Mastbaum
* aneda
* Anthony Scopatz
* Anton Akhmerov
* Antony Lee
* aparamon
* apodemus
* Arthur Paulino
* Arvind
* as691454
* ash13
* Atharva Khare
* Avinash Sharma
* Bastian Bechtold
* bduick
* Ben
* Ben Root
* Benedikt Daurer
* Benjamin Berg
* Benjamin Congdon
* Bernhard M. Wiedemann
* BHT
* Bianca Gibson
* Björn Dahlgren
* Blaise Thompson
* Boaz Mohar
* Brendan Zhang
* Brennan Magee
* Bruno Zohreh
* BTWS
* buefox
* Cameron Davidson-Pilon
* Cameron Fackler
* cclauss
* ch3rn0v
* Charles Ruan
* chelseatroy
* Chen Karako
* Chris Holdgraf
* Christoph Deil
* Christoph Gohlke
* Cimarron Mittelsteadt
* CJ Carey
* cknd
* cldssty
* clintval
* Cody Scot
* Colin
* Conner R. Phillips
* Craig Citro
* DaCoEx
* dahlbaek
* Dakota Blair
* Damian
* Dan Hickstein
* Dana
* Daniel C. Marcu
* Daniel Laidig
* danielballan
* Danny Hermes
* daronjp
* DaveL17
* David A
* David Brooks
* David Kent
* David Stansby
* deeenes
* deepyaman
* Derek Kim
* Derek Tropf
* Devashish Deshpande
* Diego Mora Cespedes
* Dietmar Schwertberger
* Dietrich Brunn
* Divyam Madaan
* dlmccaffrey
* Dmitry Shachnev
* Dora Fraeman
* DoriekeMG
* Dorota Jarecka
* Doug Blank
* Drew J. Sonne
* Duncan Macleod
* Dylan Evans
* E. G. Patrick Bos
* Egor Panfilov
* Elijah Schutz
* Elizabeth Seiver
* Elliott Sales de Andrade
* Elvis Stansvik
* Emlyn Price
* endolith
* Eric Dill
* Eric Firing
* Eric Galloway
* Eric Larson
* Eric Wang (Mac)
* Eric Wieser
* Erik M. Bray
* Erin Pintozzi
* et2010
* Ethan Ligon
* Eugene Yurtsev
* Fabian Kloosterman
* Fabian-Robert Stöter
* FedeMiorelli
* Federico Ariza
* Felix
* Felix Kohlgrüber
* Felix Yan
* Filip Dimitrovski
* Florencia Noriega
* Florian Le Bourdais
* Franco Vaccari
* Francoise Provencher
* Frank Yu
* fredrik-1
* fuzzythecat
* Gabe
* Gabriel Munteanu
* Gauravjeet
* Gaute Hope
* gcallah
* Geoffrey Spear
* gnaggnoyil
* goldstarwebs
* Graeme Smecher
* greg-roper
* gregorybchris
* Grillard
* Guillermo Breto
* Gustavo Goretkin
* Hajoon Choi
* Hakan Kucukdereli
* hannah
* Hans Moritz Günther
* Harnesser
* Harshal Prakash Patankar
* Harshit Patni
* Hassan Kibirige
* Hastings Greer
* Heath Henley
* Heiko Oberdiek
* Helder
* helmiriawan
* Henning Pohl
* Herbert Kruitbosch
* HHest
* Hubert Holin
* Ian Thomas
* Ida Hjorth
* Ildar Akhmetgaleev
* ilivni
* Ilya Flyamer
* ImportanceOfBeingErnest
* ImSoErgodic
* Isa Hassen
* Isaac Schwabacher
* Isaac Slavitt
* Ismo Toijala
* J Alammar
* J. Goutin
* Jaap Versteegh
* Jacob McDonald
* jacob-on-github
* Jae-Joon Lee
* Jake Vanderplas
* James A. Bednar
* Jamie Nunez
* Jan Koehler
* Jan Schlüter
* Jan Schulz
* Jarrod Millman
* Jason King
* Jason Neal
* Jason Zheng
* jbhopkins
* jdollichon
* Jeffrey Hokanson @ Loki
* JelsB
* Jens Hedegaard Nielsen
* Jerry Lui
* jerrylui803
* jhelie
* jli
* Jody Klymak
* joelostblom
* Johannes Wienke
* John Hoffman
* John Vandenberg
* Johnny Gill
* JojoBoulix
* jonchar
* Joseph Albert
* Joseph Fox-Rabinovitz
* Joseph Jon Booker
* Joseph Martinot-Lagarde
* Jouni K. Seppänen
* Juan Nunez-Iglesias
* Julia Sprenger
* Julian Mehne
* Julian V. Modesto
* Julien Lhermitte
* Julien Schueller
* Jun Tan
* Justin Cai
* Jörg Dietrich
* Kacper Kowalik (Xarthisius)
* Kanchana Ranasinghe
* Katrin Leinweber
* Keerysanth Sribaskaran
* keithbriggs
* Kenneth Ma
* Kevin Davies
* Kevin Ji
* Kevin Keating
* Kevin Rose
* Kexuan Sun
* khyox
* Kieran Ramos
* Kjartan Myrdal
* Kjell Le
* Klara Gerlei
* klaus
* klonuo
* Kristen M. Thyng
* kshramt
* Kyle Bridgemohansingh
* Kyle Sunden
* Kyler Brown
* Laptop11_ASPP2016
* lboogaard
* legitz7
* Leo Singer
* Leon Yin
* Levi Kilcher
* Liam Brannigan
* Lionel Miller
* lspvic
* Luca Verginer
* Luis Pedro Coelho
* luz.paz
* lzkelley
* Maarten Baert
* Magnus Nord
* mamrehn
* Manish Devgan
* Manuel Jung
* Mark Harfouche
* Martin Fitzpatrick
* Martin Spacek
* Massimo Santini
* Matt Hancock
* Matt Newville
* Matthew Bell
* Matthew Brett
* Matthias Bussonnier
* Matthias Lüthi
* Matti Picus
* Maximilian Albert
* Maximilian Maahn
* Maximilian Nöthe
* mcquin
* Mher Kazandjian
* Michael Droettboom
* Michael Scott Cuthbert
* Michael Seifert
* Michiel de Hoon
* Mike Henninger
* Mike Jarvis
* MinRK
* Mitar
* mitch
* mlub
* mobando
* Molly Rossow
* Moritz Boehle
* muahah
* Mudit Surana
* myyc
* Naoya Kanai
* Nathan Goldbaum
* Nathan Musoke
* Nathaniel M. Beaver
* navdeep rana
* nbrunett
* Nelle Varoquaux
* nemanja
* neok-m4700
* nepix32
* Nick Forrington
* Nick Garvey
* Nick Papior
* Nico Schlömer
* Nicolas P. Rougier
* Nicolas Tessore
* Nik Quibin
* Nikita Kniazev
* Nils Werner
* Ninad Bhat
* nmartensen
* Norman Fomferra
* ob
* OceanWolf
* Olivier
* Orso Meneghini
* Osarumwense
* Pankaj Pandey
* Paramonov Andrey
* Pastafarianist
* Paul Ganssle
* Paul Hobson
* Paul Ivanov
* Paul Kirow
* Paul Romano
* Paul Seyfert
* Pavol Juhas
* pdubcali
* Pete Huang
* Pete Peterson
* Peter Mackenzie-Helnwein
* Peter Mortensen
* Peter Würtz
* Petr Danecek
* pharshalp
* Phil Elson
* Phil Ruffwind
* Pierre de Buyl
* Pierre Haessig
* Pranav Garg
* productivememberofsociety666
* Przemysław Dąbek
* Qingpeng "Q.P." Zhang
* RAKOTOARISON Herilalaina
* Ramiro Gómez
* Randy Olson
* rebot
* Richard Gowers
* Rishikesh
* Rob Harrigan
* Robin Dunn
* Robin Neatherway
* Robin Wilson
* Ronald Hartley-Davies
* Roy Smith
* Rui Lopes
* ruin
* rvhbooth
* Ryan
* Ryan May
* Ryan Morshead
* RyanPan
* s0vereign
* Saket Choudhary
* Salganos
* Salil Vanvari
* Salinder Sidhu
* Sam Vaughan
* Samson
* Samuel St-Jean
* Sander
* scls19fr
* Scott Howard
* Scott Lasley
* scott-vsi
* Sean Farley
* Sebastian Raschka
* Sebastián Vanrell
* Seraphim Alvanides
* Sergey B Kirpichev
* serv-inc
* settheory
* shaunwbell
* Simon Gibbons
* simonpf
* sindunuragarp
* Sourav Singh
* Stefan Pfenninger
* Stephan Erb
* Sterling Smith
* Steven Silvester
* Steven Tilley
* stone
* stonebig
* Tadeo Corradi
* Taehoon Lee
* Tanuj
* Taras
* Taras Kuzyo
* TD22057
* Ted Petrou
* terranjp
* Terrence J. Katzenbaer
* Terrence Katzenbaer
* The Gitter Badger
* Thomas A Caswell
* Thomas Hisch
* Thomas Levine
* Thomas Mansencal
* Thomas Robitaille
* Thomas Spura
* Thomas VINCENT
* Thorsten Liebig
* thuvejan
* Tian Xia
* Till Stensitzki
* Tim Hoffmann
* tmdavison
* Tobias Froehlich
* Tobias Megies
* Tom
* Tom Augspurger
* Tom Dupré la Tour
* tomoemon
* tonyyli
* Trish Gillett-Kawamoto
* Truong Pham
* Tuan Dung Tran
* u55
* ultra-andy
* V. R
* vab9
* Valentin Schmidt
* Vedant Nanda
* Vidur Satija
* vraelvrangr
* Víctor Zabalza
* WANG Aiyong
* Warren Weckesser
* watkinrt
* Wieland Hoffmann
* Will Silva
* William Granados
* William Mallard
* Xufeng Wang
* y1thof
* Yao-Yuan Mao
* Yuval Langer
* Zac Hatfield-Dodds
* Zbigniew Jędrzejewski-Szmek
* zhangeugenia
* ZhaoZhonglun1991
* zhoubecky
* ZWL
* Élie Gouzien
* Андрей Парамонов

GitHub issues and pull requests:

Pull Requests (598):

* :ghpull:`12145`: Doc final 3.0 docs
* :ghpull:`12143`: Backport PR #12142 on branch v3.0.x (Unbreak formlayout for image edits.)
* :ghpull:`12142`: Unbreak formlayout for image edits.
* :ghpull:`12135`: Backport PR #12131 on branch v3.0.x (Fixes currently release version of cartopy)
* :ghpull:`12131`: Fixes currently release version of cartopy
* :ghpull:`12129`: Backports for 3.0
* :ghpull:`12132`: Backport PR #12130 on branch v3.0.x (Mention colorbar.minorticks_on/off in references)
* :ghpull:`12130`: Mention colorbar.minorticks_on/off in references
* :ghpull:`12099`: FIX: make sure all ticks show up for colorbar minor tick
* :ghpull:`11962`: Propagate changes to backend loading to setup/setupext.
* :ghpull:`12128`: Unbreak the Sphinx 1.8 build by renaming :math: to :mathmpl:.
* :ghpull:`12126`: Backport PR #12117 on branch v3.0.x (Fix Agg extent calculations for empty draws)
* :ghpull:`12113`: Backport PR #12112 on branch v3.0.x (Reword the LockDraw docstring.)
* :ghpull:`12112`: Reword the LockDraw docstring.
* :ghpull:`12110`: Backport PR #12109 on branch v3.0.x (Pin to sphinx<1.8; unremove sphinxext.mathmpl.)
* :ghpull:`12084`: DOC: link palettable
* :ghpull:`12096`: Backport PR #12092 on branch v3.0.x (Update backend_qt5agg to fix PySide2 mem issues)
* :ghpull:`12083`: Backport PR #12012 on branch v3.0.x (FIX: fallback text renderer to fig._cachedRenderer, if none found)
* :ghpull:`12081`: Backport PR #12037 on branch v3.0.x (Fix ArtistInspector.get_aliases.)
* :ghpull:`12080`: Backport PR #12053 on branch v3.0.x (Fix up some OSX backend issues)
* :ghpull:`12037`: Fix ArtistInspector.get_aliases.
* :ghpull:`12053`: Fix up some OSX backend issues
* :ghpull:`12064`: Backport PR #11971 on branch v3.0.x (FIX: use cached renderer on Legend.get_window_extent)
* :ghpull:`12063`: Backport PR #12036 on branch v3.0.x (Interactive tests update)
* :ghpull:`11928`: Update doc/conf.py to avoid warnings with (future) sphinx 1.8.
* :ghpull:`12048`: Backport PR #12047 on branch v3.0.x (Remove asserting about current backend at the end of mpl_test_settings.)
* :ghpull:`11971`: FIX: use cached renderer on Legend.get_window_extent
* :ghpull:`12036`: Interactive tests update
* :ghpull:`12029`: Backport PR #12022 on branch v3.0.x (Remove intent to deprecate rcParams["backend_fallback"].)
* :ghpull:`12047`: Remove asserting about current backend at the end of mpl_test_settings.
* :ghpull:`12020`: Backport PR #12019 on branch v3.0.x (typo: s/unmultipled/unmultiplied)
* :ghpull:`12022`: Remove intent to deprecate rcParams["backend_fallback"].
* :ghpull:`12028`: Backport PR #12023 on branch v3.0.x (Fix deprecation check in wx Timer.)
* :ghpull:`12023`: Fix deprecation check in wx Timer.
* :ghpull:`12019`: typo: s/unmultipled/unmultiplied
* :ghpull:`12017`: Backport PR #12016 on branch v3.0.x (Fix AttributeError in GTK3Agg backend)
* :ghpull:`12016`: Fix AttributeError in GTK3Agg backend
* :ghpull:`11991`: Backport PR #11988 on branch v3.0.x
* :ghpull:`11978`: Backport PR #11973 on branch v3.0.x
* :ghpull:`11968`: Backport PR #11963 on branch v3.0.x
* :ghpull:`11967`: Backport PR #11961 on branch v3.0.x
* :ghpull:`11969`: Fix an invalid escape sequence.
* :ghpull:`11963`: Fix some lgtm convention alerts
* :ghpull:`11961`: Downgrade backend_version log to DEBUG level.
* :ghpull:`11953`: Backport PR #11896 on branch v3.0.x
* :ghpull:`11896`: Resolve backend in rcParams.__getitem__("backend").
* :ghpull:`11950`: Backport PR #11934 on branch v3.0.x
* :ghpull:`11952`: Backport PR #11949 on branch v3.0.x
* :ghpull:`11949`: Remove test2.png from examples.
* :ghpull:`11934`: Suppress the "non-GUI backend" warning from the .. plot:: directive...
* :ghpull:`11918`: Backport PR #11917 on branch v3.0.x
* :ghpull:`11916`: Backport PR #11897 on branch v3.0.x
* :ghpull:`11915`: Backport PR #11591 on branch v3.0.x
* :ghpull:`11897`: HTMLWriter, put initialisation of frames in setup
* :ghpull:`11591`: BUG: correct the scaling in the floating-point slop test.
* :ghpull:`11910`: Backport PR #11907 on branch v3.0.x
* :ghpull:`11907`: Move TOC back to top in axes documentation
* :ghpull:`11904`: Backport PR #11900 on branch v3.0.x
* :ghpull:`11900`: Allow args to pass through _allow_super_init
* :ghpull:`11889`: Backport PR #11847 on branch v3.0.x
* :ghpull:`11890`: Backport PR #11850 on branch v3.0.x
* :ghpull:`11850`: FIX: macosx framework check
* :ghpull:`11883`: Backport PR #11862 on branch v3.0.x
* :ghpull:`11882`: Backport PR #11876 on branch v3.0.x
* :ghpull:`11876`: MAINT Better error message for number of colors versus number of data…
* :ghpull:`11862`: Fix NumPy FutureWarning for non-tuple indexing.
* :ghpull:`11845`: Use Format_ARGB32_Premultiplied instead of RGBA8888 for Qt backends.
* :ghpull:`11843`: Remove unnecessary use of nose.
* :ghpull:`11600`: backend switching -- don't create a public fallback API
* :ghpull:`11833`: adding show inheritance to autosummary template
* :ghpull:`11828`: changed warning in animation
* :ghpull:`11829`: func animation warning changes
* :ghpull:`11826`: DOC documented more of the gridspec options
* :ghpull:`11818`: Merge v2.2.x
* :ghpull:`11821`: DOC: remove multicolumns from examples
* :ghpull:`11819`: DOC: fix minor typo in figure example
* :ghpull:`11722`: Remove unnecessary hacks from setup.py.
* :ghpull:`11802`: gridspec tutorial edits
* :ghpull:`11801`: update annotations
* :ghpull:`11734`: Small cleanups to backend_agg.
* :ghpull:`11785`: Add missing API changes
* :ghpull:`11788`: Fix DeprecationWarning on LocatableAxes
* :ghpull:`11558`: Added xkcd Style for Markers (plot only)
* :ghpull:`11755`: Add description for metadata argument of savefig
* :ghpull:`11703`: FIX: make update-from also set the original face/edgecolor
* :ghpull:`11765`: DOC: reorder examples and fix top level heading
* :ghpull:`11724`: Fix cairo's image inversion and alpha misapplication.
* :ghpull:`11726`: Consolidate agg-buffer examples.
* :ghpull:`11754`: FIX: update spine positions before get extents
* :ghpull:`11779`: Remove unused attribute in tests.
* :ghpull:`11770`: Correct errors in documentation
* :ghpull:`11778`: Unpin pandas in the CI.
* :ghpull:`11772`: Clarifying an error message
* :ghpull:`11760`: Switch grid documentation to numpydoc style
* :ghpull:`11705`: Suppress/fix some test warnings.
* :ghpull:`11763`: Pin OSX CI to numpy<1.15 to unbreak the build.
* :ghpull:`11767`: Add tolerance to csd frequency test
* :ghpull:`11757`: PGF backend output text color even if black
* :ghpull:`11751`: Remove the unused 'verbose' option from setupext.
* :ghpull:`9084`: Require calling a _BoundMethodProxy to get the underlying callable.
* :ghpull:`11752`: Fix section level of Previous Whats New
* :ghpull:`10513`: Replace most uses of getfilesystemencoding by os.fs{en,de}code.
* :ghpull:`11739`: fix tight_layout bug #11737
* :ghpull:`11744`: minor doc update on axes_grid1's inset_axes
* :ghpull:`11729`: Pass 'figure' as kwarg to FigureCanvasQt5Agg super __init__.
* :ghpull:`11736`: Remove unused needs_sphinx marker; move importorskip to toplevel.
* :ghpull:`11731`: Directly get the size of the renderer buffer from the renderer.
* :ghpull:`11717`: DOC: fix broken link in inset-locator example
* :ghpull:`11723`: Start work on making colormaps picklable.
* :ghpull:`11721`: Remove some references to colorConverter.
* :ghpull:`11713`: Don't assume cwd in test_ipynb.
* :ghpull:`11026`: ENH add an inset_axes to the axes class
* :ghpull:`11712`: Fix drawing on qt+retina.
* :ghpull:`11714`: docstring for Figure.tight_layout don't include renderer parameter
* :ghpull:`8951`: Let QPaintEvent tell us what region to repaint.
* :ghpull:`11234`: Add fig.add_artist method
* :ghpull:`11706`: Remove unused private method.
* :ghpull:`11637`: Split API changes into individual pages
* :ghpull:`10403`: Deprecate LocatableAxes from toolkits
* :ghpull:`11699`: Dedent overindented rst bullet lists.
* :ghpull:`11701`: Use skipif instead of xfail when test dependencies are missing.
* :ghpull:`11700`: Don't use pytest -rw now that pytest-warnings is builtin.
* :ghpull:`11696`: Don't force backend in toolmanager example.
* :ghpull:`11690`: Avoid using private APIs in examples.
* :ghpull:`11684`: Style
* :ghpull:`11666`: TESTS: Increase tolerance for aarch64 tests
* :ghpull:`11680`: Boring style fixes.
* :ghpull:`11678`: Use super() instead of manually fetching supermethods for parasite axes.
* :ghpull:`11679`: Remove pointless draw() at the end of static examples.
* :ghpull:`11676`: Remove unused C++ code.
* :ghpull:`11010`: ENH: Add gridspec method to figure, and subplotspecs
* :ghpull:`11672`: Add comment re: use of lru_cache in PsfontsMap.
* :ghpull:`11674`: Boring style fixes.
* :ghpull:`10954`: Cache various dviread constructs globally.
* :ghpull:`9150`: Don't update style-blacklisted rcparams in rc_* functions
* :ghpull:`10936`: Simplify tkagg C extension.
* :ghpull:`11378`: SVG Backend gouraud_triangle Correction
* :ghpull:`11383`: FIX: Improve *c* (color) kwarg checking in scatter and the related exceptions
* :ghpull:`11627`: FIX: CL avoid fully collapsed axes
* :ghpull:`11504`: Bump pgi requirement to 0.0.11.2.
* :ghpull:`11640`: Fix barplot color if none and alpha is set
* :ghpull:`11443`: changed paths in kwdocs
* :ghpull:`11626`: Minor docstring fixes
* :ghpull:`11631`: DOC: better tight_layout error handling
* :ghpull:`11651`: Remove unused imports in examples
* :ghpull:`11633`: Clean up next api_changes
* :ghpull:`11643`: Fix deprecation messages.
* :ghpull:`9223`: Set norm to log if bins=='log' in hexbin
* :ghpull:`11622`: FIX: be forgiving about the event for enterEvent not having a pos
* :ghpull:`11581`: backend switching.
* :ghpull:`11616`: Fix some doctest issues
* :ghpull:`10872`: Cleanup _plot_args_replacer logic
* :ghpull:`11617`: Clean up what's new
* :ghpull:`11610`: FIX: let colorbar extends work for PowerNorm
* :ghpull:`11615`: Revert glyph warnings
* :ghpull:`11614`: CI: don't run tox to test pytz
* :ghpull:`11603`: Doc merge up
* :ghpull:`11613`: Make flake8 exceptions explicit
* :ghpull:`11611`: Fix css for parameter types
* :ghpull:`10001`: MAINT/BUG: Don't use 5-sided quadrilaterals in Axes3D.plot_surface
* :ghpull:`10234`: PowerNorm: do not clip negative values
* :ghpull:`11398`: Simplify retrieval of cache and config directories
* :ghpull:`10682`: ENH have ax.get_tightbbox have a bbox around all artists attached to axes.
* :ghpull:`11590`: Don't associate Wx timers with the parent frame.
* :ghpull:`10245`: Cache paths of fonts shipped with mpl relative to the mpl data path.
* :ghpull:`11381`: Deprecate text.latex.unicode.
* :ghpull:`11601`: FIX: subplots don't mutate kwargs passed by user.
* :ghpull:`11609`: Remove _macosx.NavigationToolbar.
* :ghpull:`11608`: Remove some conditional branches in examples for wx<4.
* :ghpull:`11604`: TST: Place animation files in a temp dir.
* :ghpull:`11605`: Suppress a spurious missing-glyph warning with ft2font.
* :ghpull:`11360`: Pytzectomy
* :ghpull:`10885`: Move GTK3 setupext checks to within the process.
* :ghpull:`11081`: Help tool for Wx backends
* :ghpull:`10851`: Wx Toolbar for ToolManager
* :ghpull:`11247`: Remove mplDeprecation
* :ghpull:`9795`: Backend switching
* :ghpull:`9426`: Don't mark a patch transform as set if the parent transform is not set.
* :ghpull:`9175`: Warn on freetype missing glyphs.
* :ghpull:`11412`: Make contour and contourf color assignments consistent.
* :ghpull:`11477`: Enable flake8 and re-enable it everywhere
* :ghpull:`11165`: Fix figure window icon
* :ghpull:`11584`: ENH: fix colorbar bad minor ticks
* :ghpull:`11438`: ENH: add get_gridspec convenience method to subplots
* :ghpull:`11451`: Cleanup Matplotlib API docs
* :ghpull:`11579`: DOC update some examples to use constrained_layout=True
* :ghpull:`11594`: Some more docstring cleanups.
* :ghpull:`11593`: Skip wx interactive tests on OSX.
* :ghpull:`11592`: Remove some extra spaces in docstrings/comments.
* :ghpull:`11585`: Some doc cleanup of Triangulation
* :ghpull:`10474`: Use TemporaryDirectory instead of mkdtemp in a few places.
* :ghpull:`11240`: Deprecate the examples.directory rcParam.
* :ghpull:`11370`: Sorting drawn artists by their zorder when blitting using FuncAnimation
* :ghpull:`11576`: Add parameter doc to save_diff_image
* :ghpull:`11573`: Inline setup_external_compile into setupext.
* :ghpull:`11571`: Cleanup stix_fonts_demo example.
* :ghpull:`11563`: Use explicit signature in pyplot.close()
* :ghpull:`9801`: ENH: Change default Autodatelocator *interval_multiples*
* :ghpull:`11570`: More simplifications to FreeType setup on Windows.
* :ghpull:`11401`: Some py3fications.
* :ghpull:`11566`: Cleanups.
* :ghpull:`11520`: Add private API retrieving the current event loop and backend GUI info.
* :ghpull:`11544`: Restore axes sharedness when unpickling.
* :ghpull:`11568`: Figure.text changes
* :ghpull:`11248`: Simplify FreeType Windows build.
* :ghpull:`11556`: Fix colorbar bad ticks
* :ghpull:`11494`: Fix CI install of wxpython.
* :ghpull:`11564`: triinterpolate cleanups.
* :ghpull:`11548`: Use numpydoc-style parameter lists for choices
* :ghpull:`9583`: Add edgecolors kwarg to contourf
* :ghpull:`10275`: Update contour.py and widget.py
* :ghpull:`11547`: Fix example links
* :ghpull:`11555`: Fix spelling in title
* :ghpull:`11404`: FIX: don't include text at -inf in bbox
* :ghpull:`11455`: Fixing the issue where right column and top row generate wrong stream…
* :ghpull:`11297`: Prefer warn_deprecated instead of warnings.warn.
* :ghpull:`11495`: Update the documentation guidelines
* :ghpull:`11545`: Doc: fix x(filled) marker image
* :ghpull:`11287`: Maintain artist addition order in Axes.mouseover_set.
* :ghpull:`11530`: FIX: Ensuring both x and y attrs of LocationEvent are int
* :ghpull:`10336`: Use Integral and Real in typechecks rather than explicit types.
* :ghpull:`10298`: Apply gtk3 background.
* :ghpull:`10297`: Fix gtk3agg alpha channel.
* :ghpull:`9094`: axisbelow should just set zorder.
* :ghpull:`11542`: Documentation polar grids
* :ghpull:`11459`: Doc changes in add_subplot and add_axes
* :ghpull:`10908`: Make draggable callbacks check that artist has not been removed.
* :ghpull:`11522`: Small cleanups.
* :ghpull:`11539`: DOC: talk about sticky edges in Axes.margins
* :ghpull:`11540`: adding axes to module list
* :ghpull:`11537`: Fix invalid value warning when autoscaling with no data limits
* :ghpull:`11512`: Skip 3D rotation example in sphinx gallery
* :ghpull:`11538`: Re-enable pep8 on examples folder
* :ghpull:`11136`: Move remaining examples from api/
* :ghpull:`11519`: Raise ImportError on failure to import backends.
* :ghpull:`11529`: add documentation for quality in savefig
* :ghpull:`11528`: Replace an unnecessary zip() in mplot3d by numpy ops.
* :ghpull:`11492`: add __repr__ to GridSpecBase
* :ghpull:`11521`: Add missing ``.`` to rcParam
* :ghpull:`11491`: Fixed the source path on windows in rcparam_role
* :ghpull:`11514`: Remove embedding_in_tk_canvas, which demonstrated a private API.
* :ghpull:`11507`: Fix embedding_in_tk_canvas example.
* :ghpull:`11513`: Changed docstrings in Text
* :ghpull:`11503`: Remove various mentions of the now removed GTK(2) backend.
* :ghpull:`11493`: Update a test to a figure-equality test.
* :ghpull:`11501`: Treat empty $MPLBACKEND as an unset value.
* :ghpull:`11395`: Various fixes to deprecated and warn_deprecated.
* :ghpull:`11408`: Figure equality-based tests.
* :ghpull:`11461`: Fixed bug in rendering font property kwargs list
* :ghpull:`11397`: Replace ACCEPTS by standard numpydoc params table.
* :ghpull:`11483`: Use pip requirements files for travis build
* :ghpull:`11481`: remove more pylab references
* :ghpull:`10940`: Run flake8 instead of pep8 on Python 3.6
* :ghpull:`11476`: Remove pylab references
* :ghpull:`11448`: Link rcParams role to docs
* :ghpull:`11424`: DOC: point align-ylabel demo to new align-label functions
* :ghpull:`11454`: add subplots to axes documentation
* :ghpull:`11470`: Hyperlink DOIs against preferred resolver
* :ghpull:`11421`: DOC: make signature background grey
* :ghpull:`11457`: Search $CPATH for include directories
* :ghpull:`11456`: DOC: fix minor typo in figaspect
* :ghpull:`11293`: Lim parameter naming
* :ghpull:`11447`: Do not use class attributes as defaults for instance attributes
* :ghpull:`11449`: Slightly improve doc sidebar layout
* :ghpull:`11224`:  Add deprecation messages for unused kwargs in FancyArrowPatch
* :ghpull:`11437`: Doc markersupdate
* :ghpull:`11417`: FIX: better default spine path (for logit)
* :ghpull:`11406`: Backport PR #11403 on branch v2.2.2-doc
* :ghpull:`11427`: FIX: pathlib in nbagg
* :ghpull:`11428`: Doc: Remove huge note box from examples.
* :ghpull:`11392`: Deprecate the ``verts`` kwarg to ``scatter``.
* :ghpull:`8834`: WIP: Contour log extension
* :ghpull:`11402`: Remove unnecessary str calls.
* :ghpull:`11399`: Autogenerate credits.rst
* :ghpull:`11382`: plt.subplots and plt.figure docstring changes
* :ghpull:`11388`: DOC: Constrained layout tutorial improvements
* :ghpull:`11400`: Correct docstring for axvspan()
* :ghpull:`11396`: Remove some (minor) comments regarding Py2.
* :ghpull:`11210`: FIX: don't pad axes for ticks if they aren't visible or axis off
* :ghpull:`11362`: Fix tox configuration
* :ghpull:`11366`: Improve docstring of Axes.spy
* :ghpull:`11289`: io.open and codecs.open are redundant with open on Py3.
* :ghpull:`11213`: MNT: deprecate patches.YAArrow
* :ghpull:`11352`: Catch a couple of test warnings
* :ghpull:`11292`: Simplify cleanup decorator implementation.
* :ghpull:`11349`: Remove non-existent files from MANIFEST.IN
* :ghpull:`8774`: Git issue #7216 - Add a "ruler" tool to the plot UI
* :ghpull:`11348`: Make OSX's blit() have a consistent signature with other backends.
* :ghpull:`11345`: Revert "Deprecate text.latex.unicode."
* :ghpull:`11250`: [WIP] Add tutorial for LogScale
* :ghpull:`11223`: Add an arrow tutorial
* :ghpull:`10212`: Categorical refactor
* :ghpull:`11339`: Convert Ellipse docstring to numpydoc
* :ghpull:`11255`: Deprecate text.latex.unicode.
* :ghpull:`11338`: Fix typos
* :ghpull:`11332`: Let plt.rc = matplotlib.rc, instead of being a trivial wrapper.
* :ghpull:`11331`: multiprocessing.set_start_method() --> mp.set_start_method()
* :ghpull:`9948`: Add ``ealpha`` option to ``errorbar``
* :ghpull:`11329`: Minor docstring update of thumbnail
* :ghpull:`9551`: Refactor backend loading
* :ghpull:`11328`: Undeprecate Polygon.xy from #11299
* :ghpull:`11318`: Improve docstring of imread() and imsave()
* :ghpull:`11311`: Simplify image.thumbnail.
* :ghpull:`11225`: Add stacklevel=2 to some more warnings.warn() calls
* :ghpull:`11313`: Add changelog entry for removal of proprietary sphinx directives.
* :ghpull:`11323`: Fix infinite loop for connectionstyle + add some tests
* :ghpull:`11314`: API changes: use the heading format defined in README.txt
* :ghpull:`11320`: Py3fy multiprocess example.
* :ghpull:`6254`: adds two new cyclic color schemes
* :ghpull:`11268`: DOC: Sanitize some internal documentation links
* :ghpull:`11300`: Start replacing ACCEPTS table by parsing numpydoc.
* :ghpull:`11298`: Automagically set the stacklevel on warnings.
* :ghpull:`11277`: Avoid using MacRoman encoding.
* :ghpull:`11295`: Use sphinx builtin only directive instead of custom one.
* :ghpull:`11305`: Reuse the noninteractivity warning from Figure.show in _Backend.show.
* :ghpull:`11307`: Avoid recursion for subclasses of str that are also "PathLike" in to_filehandle()
* :ghpull:`11304`: Re-remove six from INSTALL.rst.
* :ghpull:`11299`: Fix a bunch of doc/comment typos in patches.py.
* :ghpull:`11301`: Undefined name: cbook --> matplotlib.cbook
* :ghpull:`11254`: Update INSTALL.rst.
* :ghpull:`11267`: FIX: allow nan values in data for plt.hist
* :ghpull:`11271`: Better argspecs for Axes.stem
* :ghpull:`11272`: Remove commented-out code, unused imports
* :ghpull:`11280`: Trivial cleanups
* :ghpull:`10514`: Cleanup/update cairo + gtk compatibility matrix.
* :ghpull:`11282`: Reduce the use of C++ exceptions
* :ghpull:`11263`: Fail gracefully if can't decode font names
* :ghpull:`11278`: Remove conditional path for sphinx <1.3 in plot_directive.
* :ghpull:`11273`: Include template matplotlibrc in package_data.
* :ghpull:`11265`: Minor cleanups.
* :ghpull:`11249`: Simplify FreeType build.
* :ghpull:`11158`: Remove dependency on six - we're Py3 only now!
* :ghpull:`10050`: Update Legend draggable API
* :ghpull:`11206`: More cleanups
* :ghpull:`11001`: DOC: improve legend bbox_to_anchor description
* :ghpull:`11258`: Removed comment in AGG backend that is no longer applicable
* :ghpull:`11062`: FIX: call constrained_layout twice
* :ghpull:`11251`: Re-run boilerplate.py.
* :ghpull:`11228`: Don't bother checking luatex's version.
* :ghpull:`11207`: Update venv gui docs wrt availability of PySide2.
* :ghpull:`11236`: Minor cleanups to setupext.
* :ghpull:`11239`: Reword the timeout error message in cbook._lock_path.
* :ghpull:`11204`: Test that boilerplate.py is correctly run.
* :ghpull:`11172`: ENH add rcparam to legend_title
* :ghpull:`11229`: Simplify lookup of animation external commands.
* :ghpull:`9086`: Add SVG animation.
* :ghpull:`11212`: Fix CirclePolygon __str__ + adding tests
* :ghpull:`6737`: Ternary
* :ghpull:`11216`: Yet another set of simplifications.
* :ghpull:`11056`: Simplify travis setup a bit.
* :ghpull:`11211`: Revert explicit linestyle kwarg on step()
* :ghpull:`11205`: Minor cleanups to pyplot.
* :ghpull:`11174`: Replace numeric loc by position string
* :ghpull:`11208`: Don't crash qt figure options on unknown marker styles.
* :ghpull:`11195`: Some unrelated cleanups.
* :ghpull:`11192`: Don't use deprecated get_texcommand in backend_pgf.
* :ghpull:`11197`: Simplify demo_ribbon_box.py.
* :ghpull:`11137`: Convert ``**kwargs`` to named arguments for a clearer API
* :ghpull:`10982`: Improve docstring of Axes.imshow
* :ghpull:`11182`: Use GLib.MainLoop() instead of deprecated GObject.MainLoop()
* :ghpull:`11185`: Fix undefined name error in backend_pgf.
* :ghpull:`10321`: Ability to scale axis by a fixed factor
* :ghpull:`8787`: Faster path drawing for the cairo backend (cairocffi only)
* :ghpull:`4559`: tight_layout: Use a different default gridspec
* :ghpull:`11179`: Convert internal tk focus helper to a context manager
* :ghpull:`11176`: Allow creating empty closed paths
* :ghpull:`10339`: Pass explicit font paths to fontspec in backend_pgf.
* :ghpull:`9832`: Minor cleanup to Text class.
* :ghpull:`11141`: Remove mpl_examples symlink.
* :ghpull:`10715`: ENH: add title_fontsize to legend
* :ghpull:`11166`: Set stacklevel to 2 for backend_wx
* :ghpull:`10934`: Autogenerate (via boilerplate) more of pyplot.
* :ghpull:`9298`: Cleanup blocking_input.
* :ghpull:`6329`: Set _text to '' if Text.set_text argument is None
* :ghpull:`11157`: Fix contour return link
* :ghpull:`11146`: Explicit args and refactor Axes.margins
* :ghpull:`11145`: Use kwonlyargs instead of popping from kwargs
* :ghpull:`11119`: PGF: Get unitless positions from Text elements (fix #11116)
* :ghpull:`9078`: New anchored direction arrows
* :ghpull:`11144`: Remove toplevel unit/ directory.
* :ghpull:`11148`: remove use of subprocess compatibility shim
* :ghpull:`11143`: Use debug level for debugging messages
* :ghpull:`11142`: Finish removing future imports.
* :ghpull:`11130`: Don't include the postscript title if it is not latin-1 encodable.
* :ghpull:`11093`: DOC: Fixup to AnchoredArtist examples in the gallery
* :ghpull:`11132`: pillow-dependency update
* :ghpull:`10446`: implementation of the copy canvas tool
* :ghpull:`9131`: FIX: prevent the canvas from jump sizes due to DPI changes
* :ghpull:`9454`: Batch ghostscript converter.
* :ghpull:`10545`: Change manual kwargs popping to kwonly arguments.
* :ghpull:`10950`: Actually ignore invalid log-axis limit setting
* :ghpull:`11096`: Remove support for bar(left=...) (as opposed to bar(x=...)).
* :ghpull:`11106`: py3fy art3d.
* :ghpull:`11085`: Use GtkShortcutsWindow for Help tool.
* :ghpull:`11099`: Deprecate certain marker styles that have simpler synonyms.
* :ghpull:`11100`: Some more deprecations of old, old stuff.
* :ghpull:`11098`: Make Marker.get_snap_threshold() always return a scalar.
* :ghpull:`11097`: Schedule a removal date for passing normed (instead of density) to hist.
* :ghpull:`9706`: Masking invalid x and/or weights in hist
* :ghpull:`11080`: Py3fy backend_qt5 + other cleanups to the backend.
* :ghpull:`10967`: updated the pyplot fill_between example to elucidate the premise;maki…
* :ghpull:`11075`: Drop alpha channel when saving comparison failure diff image.
* :ghpull:`9022`: Help tool
* :ghpull:`11045`: Help tool.
* :ghpull:`11076`: Don't create texput.{aux,log} in rootdir everytime tests are run.
* :ghpull:`11073`: py3fication of some tests.
* :ghpull:`11074`: bytes % args is back since py3.5
* :ghpull:`11066`: Use chained comparisons where reasonable.
* :ghpull:`11061`: Changed tight_layout doc strings
* :ghpull:`11064`: Minor docstring format cleanup
* :ghpull:`11055`: Remove setup_tests_only.py.
* :ghpull:`11057`: Update Ellipse position with ellipse.center
* :ghpull:`10435`: Pathlibify font_manager (only internally, doesn't change the API).
* :ghpull:`10442`: Make the filternorm prop of Images a boolean rather than a {0,1} scalar.
* :ghpull:`9855`: ENH: make ax.get_position apply aspect
* :ghpull:`9987`: MNT: hist2d now uses pcolormesh instead of pcolorfast
* :ghpull:`11014`: Merge v2.2.x into master
* :ghpull:`11000`: FIX: improve Text repr to not error if non-float x and y.
* :ghpull:`10910`: FIX: return proper legend window extent
* :ghpull:`10915`: FIX: tight_layout having negative width axes
* :ghpull:`10408`: Factor out common code in _process_unit_info
* :ghpull:`10960`: Added share_tickers parameter to axes._AxesBase.twinx/y
* :ghpull:`10971`: Skip pillow animation test if pillow not importable
* :ghpull:`10970`: Simplify/fix some manual manipulation of len(args).
* :ghpull:`10958`: Simplify the grouper implementation.
* :ghpull:`10508`: Deprecate FigureCanvasQT.keyAutoRepeat.
* :ghpull:`10607`: Move notify_axes_change to FigureManagerBase class.
* :ghpull:`10215`: Test timers and (a bit) key_press_event for interactive backends.
* :ghpull:`10955`: Py3fy cbook, compare_backend_driver_results
* :ghpull:`10680`: Rewrite the tk C blitting code
* :ghpull:`9498`: Move title up if x-axis is on the top of the figure
* :ghpull:`10942`: Make active param in CheckBottons optional, default false
* :ghpull:`10943`: Allow pie textprops to take alignment and rotation arguments
* :ghpull:`10780`: Fix scaling of RadioButtons
* :ghpull:`10938`: Fix two undefined names
* :ghpull:`10685`: fix plt.show doesn't warn if a non-GUI backend
* :ghpull:`10689`: Declare global variables that are created elsewhere
* :ghpull:`10845`: WIP: first draft at replacing linkcheker
* :ghpull:`10898`: Replace "matplotlibrc" by "rcParams" in the docs where applicable.
* :ghpull:`10926`: Some more removals of deprecated APIs.
* :ghpull:`9173`: dynamically generate pyplot functions
* :ghpull:`10918`: Use function signatures in boilerplate.py.
* :ghpull:`10914`: Changed pie charts default shape to circle and added tests
* :ghpull:`10864`: ENH: Stop mangling default figure file name if file exists
* :ghpull:`10562`: Remove deprecated code in image.py
* :ghpull:`10798`: FIX: axes limits reverting to automatic when sharing
* :ghpull:`10485`: Remove the 'hold' kwarg from codebase
* :ghpull:`10571`: Use np.full{,_like} where appropriate. [requires numpy>=1.12]
* :ghpull:`10913`: Rely a bit more on rc_context.
* :ghpull:`10299`: Invalidate texmanager cache when any text.latex.* rc changes.
* :ghpull:`10906`: Deprecate ImageComparisonTest.
* :ghpull:`10904`: Improve docstring of clabel()
* :ghpull:`10912`: remove unused matplotlib.testing import
* :ghpull:`10876`: [wip] Replace _remove_method by _on_remove list of callbacks
* :ghpull:`10692`: Update afm docs and internal data structures
* :ghpull:`10896`: Update INSTALL.rst.
* :ghpull:`10905`: Inline knownfailureif.
* :ghpull:`10907`: No need to mark (unicode) strings as u"foo" anymore.
* :ghpull:`10903`: Py3fy testing machinery.
* :ghpull:`10901`: Remove Py2/3 portable code guide.
* :ghpull:`10900`: Remove some APIs deprecated in mpl2.1.
* :ghpull:`10902`: Kill some Py2 docs.
* :ghpull:`10887`: Added feature (Make pie charts circular by default #10789)
* :ghpull:`10884`: Style fixes to setupext.py.
* :ghpull:`10879`: Deprecate two-args for cycler() and set_prop_cycle()
* :ghpull:`10865`: DOC: use OO-ish interface in image, contour, field examples
* :ghpull:`8479`: FIX markerfacecolor / mfc not in rcparams
* :ghpull:`10314`: setattr context manager.
* :ghpull:`10013`: Allow rasterization for 3D plots
* :ghpull:`10158`: Allow mplot3d rasterization; adjacent cleanups.
* :ghpull:`10871`: Rely on rglob support rather than os.walk.
* :ghpull:`10878`:  Change hardcoded brackets for Toolbar message
* :ghpull:`10708`: Py3fy webagg/nbagg.
* :ghpull:`10862`: py3ify table.py and correct some docstrings
* :ghpull:`10810`: Fix for plt.plot() does not support structured arrays as data= kwarg
* :ghpull:`10861`: More python3 cleanup
* :ghpull:`9903`: ENH: adjustable colorbar ticks
* :ghpull:`10831`: Minor docstring updates on binning related plot functions
* :ghpull:`9571`: Remove LaTeX checking in setup.py.
* :ghpull:`10097`: Reset extents in RectangleSelector when not interactive on press.
* :ghpull:`10686`: fix BboxConnectorPatch does not show facecolor
* :ghpull:`10801`: Fix undefined name.  Add animation tests.
* :ghpull:`10857`: FIX: ioerror font cache, second try
* :ghpull:`10796`: Added descriptions for line bars and markers examples
* :ghpull:`10846`: Unsixification
* :ghpull:`10852`: Update docs re: pygobject in venv.
* :ghpull:`10847`: Py3fy axis.py.
* :ghpull:`10834`: Minor docstring updates on spectral plot functions
* :ghpull:`10778`: wx_compat is no more.
* :ghpull:`10609`: More wx cleanup.
* :ghpull:`10826`: Py3fy dates.py.
* :ghpull:`10837`: Correctly display error when running setup.py test.
* :ghpull:`10838`: Don't use private attribute in tk example.  Fix Toolbar class rename.
* :ghpull:`10835`: DOC: Make colorbar tutorial examples look like colorbars.
* :ghpull:`10823`: Add some basic smoketesting for webagg (and wx).
* :ghpull:`10828`: Add print_rgba to backend_cairo.
* :ghpull:`10830`: Make function signatures more explicit
* :ghpull:`10829`: Use long color names for default rcParams
* :ghpull:`9776`: WIP: Lockout new converters Part 2
* :ghpull:`10799`: DOC: make legend docstring interpolated
* :ghpull:`10818`: Deprecate vestigial Annotation.arrow.
* :ghpull:`10817`: Add test to imread from url.
* :ghpull:`10696`: Simplify venv docs.
* :ghpull:`10724`: Py3fication of unicode.
* :ghpull:`10815`: API: shift deprecation of TempCache class to 3.0
* :ghpull:`10725`: FIX/TST constrained_layout remove test8 duplication
* :ghpull:`10705`: FIX: enable extend kwargs with log scale colorbar
* :ghpull:`10400`: numpydoc-ify art3d docstrings
* :ghpull:`10723`: repr style fixes.
* :ghpull:`10592`: Rely on generalized * and ** unpackings where possible.
* :ghpull:`9475`: Declare property aliases in a single place
* :ghpull:`10793`: A hodgepodge of Py3 & style fixes.
* :ghpull:`10794`: fixed comment typo
* :ghpull:`10768`: Fix crash when imshow encounters longdouble data
* :ghpull:`10774`: Remove dead wx testing code.
* :ghpull:`10756`: Fixes png showing inconsistent inset_axes position
* :ghpull:`10773`: Consider alpha channel from RGBA color of text for SVG backend text opacity rendering
* :ghpull:`10772`: API: check locator and formatter args when passed
* :ghpull:`10713`: Implemented support for 'markevery' in prop_cycle
* :ghpull:`10751`: make centre_baseline legal for Text.set_verticalalignment
* :ghpull:`10771`: FIX/TST OS X builds
* :ghpull:`10742`: FIX: reorder linewidth setting before linestyle
* :ghpull:`10714`: sys.platform is normalized to "linux" on Py3.
* :ghpull:`10542`: Minor cleanup: PEP8, PEP257
* :ghpull:`10636`: Remove some wx version checks.
* :ghpull:`9731`: Make legend title fontsize obey fontsize kwarg by default
* :ghpull:`10697`: Remove special-casing of _remove_method when pickling.
* :ghpull:`10701`: Autoadd removal version to deprecation message.
* :ghpull:`10699`: Remove incorrect warning in gca().
* :ghpull:`10674`: Fix getting polar axes in plt.polar()
* :ghpull:`10564`: Nested classes and instancemethods are directly picklable on Py3.5+.
* :ghpull:`10107`: Fix stay_span to reset onclick in SpanSelector.
* :ghpull:`10693`: Make markerfacecolor work for 3d scatterplots
* :ghpull:`10596`: Switch to per-file locking.
* :ghpull:`10532`: Py3fy backend_pgf.
* :ghpull:`10618`: Fixes #10501.  python3 support and pep8 in jpl_units
* :ghpull:`10652`: Some py3fication for matplotlib/__init__, setupext.
* :ghpull:`10522`: Py3fy font_manager.
* :ghpull:`10666`: More figure-related doc updates
* :ghpull:`10507`: Remove Python 2 code from C extensions
* :ghpull:`10679`: Small fixes to gtk3 examples.
* :ghpull:`10426`: Delete deprecated backends
* :ghpull:`10488`: Bug Fix - Polar plot rectangle patch not transformed correctly (#8521)
* :ghpull:`9814`: figure_enter_event uses now LocationEvent instead of Event. Fix issue #9812.
* :ghpull:`9918`: Remove old nose testing code
* :ghpull:`10672`: Deprecation fixes.
* :ghpull:`10608`: Remove most APIs deprecated in 2.1.
* :ghpull:`10653`: Mock is in stdlib in Py3.
* :ghpull:`10603`: Remove workarounds for numpy<1.10.
* :ghpull:`10660`: Work towards removing reuse-of-axes-on-collision.
* :ghpull:`10661`: Homebrew python is now python 3
* :ghpull:`10656`: Minor fixes to event handling docs.
* :ghpull:`10635`: Simplify setupext by using globs.
* :ghpull:`10632`: Support markers from Paths that consist of one line segment
* :ghpull:`10558`: Remove if six.PY2 code paths from boilerplate.py
* :ghpull:`10640`: Fix extra and missing spaces in constrainedlayout warning.
* :ghpull:`10624`: Some trivial py3fications.
* :ghpull:`10548`: Implement PdfPages for backend pgf
* :ghpull:`10614`: Use np.stack instead of list(zip()) in colorbar.py.
* :ghpull:`10621`: Cleanup and py3fy backend_gtk3.
* :ghpull:`10615`: More style fixes.
* :ghpull:`10604`: Minor style fixes.
* :ghpull:`10565`: Strip python 2 code from subprocess.py
* :ghpull:`10605`: Bump a tolerance in test_axisartist_floating_axes.
* :ghpull:`7853`: Use exact types for Py_BuildValue.
* :ghpull:`10591`: Switch to @-matrix multiplication.
* :ghpull:`10570`: Fix check_shared in test_subplots.
* :ghpull:`10569`: Various style fixes.
* :ghpull:`10593`: Use 'yield from' where appropriate.
* :ghpull:`10577`: Minor simplification to Figure.__getstate__ logic.
* :ghpull:`10549`: Source typos
* :ghpull:`10525`: Convert six.moves.xrange() to range() for Python 3
* :ghpull:`10541`: More argumentless (py3) super()
* :ghpull:`10539`: TST: Replace assert_equal with plain asserts.
* :ghpull:`10534`: Modernize cbook.get_realpath_and_stat.
* :ghpull:`10524`: Remove unused private _StringFuncParser.
* :ghpull:`10470`: Remove Python 2 code from setup
* :ghpull:`10528`: py3fy examples
* :ghpull:`10520`: Py3fy mathtext.py.
* :ghpull:`10527`: Switch to argumentless (py3) super().
* :ghpull:`10523`: The current master branch is now python 3 only.
* :ghpull:`10515`: Use feature detection instead of version detection
* :ghpull:`10432`: Use some new Python3 types
* :ghpull:`10475`: Use HTTP Secure for matplotlib.org
* :ghpull:`10383`: Fix some C++ warnings
* :ghpull:`10498`: Tell the lgtm checker that the project is Python 3 only
* :ghpull:`10505`: Remove backport of which()
* :ghpull:`10483`: Remove backports.functools_lru_cache
* :ghpull:`10492`: Avoid UnboundLocalError in drag_pan.
* :ghpull:`10491`: Simplify Mac builds on Travis
* :ghpull:`10481`: Remove python 2 compatibility code from dviread
* :ghpull:`10447`: Remove Python 2 compatibility code from backend_pdf.py
* :ghpull:`10468`: Replace is_numlike by isinstance(..., numbers.Number).
* :ghpull:`10439`: mkdir is in the stdlib in Py3.
* :ghpull:`10392`: FIX: make set_text(None) keep string empty instead of "None"
* :ghpull:`10425`: API: only support python 3.5+
* :ghpull:`10316`: TST FIX pyqt5 5.9
* :ghpull:`4625`: hist2d() is now using pcolormesh instead of pcolorfast

Issues (123):

* :ghissue:`12133`: Streamplot does not work for 29x29 grid
* :ghissue:`4429`: Error calculating scaling for radiobutton widget.
* :ghissue:`3293`: markerfacecolor / mfc not in rcparams
* :ghissue:`8109`: Cannot set the markeredgecolor by default
* :ghissue:`7942`: Extend keyword doesn't work with log scale.
* :ghissue:`5571`: Finish reorganizing examples
* :ghissue:`8307`: Colorbar with imshow(logNorm) shows unexpected minor ticks
* :ghissue:`6992`: plt.hist fails when data contains nan values
* :ghissue:`6483`: Range determination for data with NaNs
* :ghissue:`8059`: BboxConnectorPatch does not show facecolor
* :ghissue:`12134`: tight_layout flips images when making plots without displaying them
* :ghissue:`6739`: Make matplotlib fail more gracefully in headless environments
* :ghissue:`3679`: Runtime detection for default backend
* :ghissue:`11966`: CartoPy code gives attribute error
* :ghissue:`11844`: Backend related issues with matplotlib 3.0.0rc1
* :ghissue:`12095`: colorbar minorticks (possibly release critical for 3.0)
* :ghissue:`12108`: Broken doc build with sphinx 1.8
* :ghissue:`7366`: handle repaint requests better it qtAgg
* :ghissue:`11985`: Single shot timer not working correctly with MacOSX backend
* :ghissue:`10948`: OSX backend raises deprecation warning for enter_notify_event
* :ghissue:`11970`: Legend.get_window_extent now requires a renderer
* :ghissue:`8293`: investigate whether using a single instance of ghostscript for ps->png conversion can speed up the Windows build
* :ghissue:`7707`: Replace pep8 by pycodestyle for style checking
* :ghissue:`9135`: rcdefaults, rc_file_defaults, rc_file should not update backend if it has already been selected
* :ghissue:`12015`: AttributeError with GTK3Agg backend
* :ghissue:`11913`: plt.contour levels parameter don't work as intended if receive a single int
* :ghissue:`11846`: macosx backend won't load
* :ghissue:`11792`: Newer versions of ImageMagickWriter not found on windows
* :ghissue:`11858`: Adding "pie of pie" and "bar of pie" functionality
* :ghissue:`11852`: get_backend() backward compatibility
* :ghissue:`11629`: Importing qt_compat when no Qt binding is installed fails with NameError instead of ImportError
* :ghissue:`11842`: Failed nose import in test_annotation_update
* :ghissue:`11252`: Some API removals not documented
* :ghissue:`9404`: Drop support for python 2
* :ghissue:`2625`: Markers in XKCD style
* :ghissue:`11749`: metadata kwarg to savefig is not documented
* :ghissue:`11702`: Setting alpha on legend handle changes patch color
* :ghissue:`8798`: gtk3cairo draw_image does not respect origin and mishandles alpha
* :ghissue:`11737`: Bug in tight_layout
* :ghissue:`11373`: Passing an incorrectly sized colour list to scatter should raise a relevant error
* :ghissue:`11756`: pgf backend doesn't set color of text when the color is black
* :ghissue:`11766`: test_axes.py::test_csd_freqs failing with numpy 1.15.0 on macOS
* :ghissue:`11750`: previous whats new is overindented on "what's new in mpl3.0 page"
* :ghissue:`11728`: Qt5 Segfaults on window resize
* :ghissue:`11709`: Repaint region is wrong on Retina display with Qt5
* :ghissue:`11578`: wx segfaulting on OSX travis tests
* :ghissue:`11628`: edgecolor argument not working in matplotlib.pyplot.bar
* :ghissue:`11625`: plt.tight_layout() does not work with plt.subplot2grid
* :ghissue:`4993`: Version ~/.cache/matplotlib
* :ghissue:`7842`: If hexbin has logarithmic bins, use log formatter for colorbar
* :ghissue:`11607`: AttributeError: 'QEvent' object has no attribute 'pos'
* :ghissue:`11486`: Colorbar does not render with PowerNorm and min extend when using imshow
* :ghissue:`11582`: wx segfault
* :ghissue:`11515`: using 'sharex' once in 'subplots' function can affect subsequent calles to 'subplots'
* :ghissue:`10269`: input() blocks any rendering and event handling
* :ghissue:`10345`: Python 3.4 with Matplotlib 1.5 vs Python 3.6 with Matplotlib 2.1
* :ghissue:`10443`: Drop use of pytz dependency in next major release
* :ghissue:`10572`: contour and contourf treat levels differently
* :ghissue:`11123`: Crash when interactively adding a number of subplots
* :ghissue:`11550`: Undefined names: 'obj_type' and 'cbook'
* :ghissue:`11138`: Only the first figure window has mpl icon, all other figures have default tk icon.
* :ghissue:`11510`: extra minor-ticks on the colorbar when used with the extend option
* :ghissue:`11369`: zorder of Artists not being respected when blitting with FuncAnimation
* :ghissue:`11452`: Streamplot ignores rightmost column and topmost row of velocity data
* :ghissue:`11284`: imshow of multiple images produces old pixel values printed in status bar
* :ghissue:`11496`: MouseEvent.x and .y have different types
* :ghissue:`11534`: Cross-reference margins and sticky edges
* :ghissue:`8556`: Add images of markers to the list of markers
* :ghissue:`11386`: Logit scale doesn't position x/ylabel correctly first draw
* :ghissue:`11384`: Undefined name 'Path' in backend_nbagg.py
* :ghissue:`11426`: nbagg broken on master.  'Path' is not defined...
* :ghissue:`11390`: Internal use of deprecated code
* :ghissue:`11203`: tight_layout reserves tick space even if disabled
* :ghissue:`11361`: Tox.ini does not work out of the box
* :ghissue:`11253`: Problem while changing current figure size in Jupyter notebook
* :ghissue:`11219`: Write an arrow tutorial
* :ghissue:`11322`: Really deprecate Patches.xy?
* :ghissue:`11294`: ConnectionStyle Angle3 hangs with specific parameters
* :ghissue:`9518`: Some ConnectionStyle not working
* :ghissue:`11306`: savefig and path.py
* :ghissue:`11077`: Font "DejaVu Sans" can only be used through fallback
* :ghissue:`10717`: Failure to find matplotlibrc when testing installed distribution
* :ghissue:`9912`: Cleaning up variable argument signatures
* :ghissue:`3701`: unit tests should compare pyplot.py with output from boilerplate.py
* :ghissue:`11183`: Undefined name 'system_fonts' in backend_pgf.py
* :ghissue:`11101`: Crash on empty patches
* :ghissue:`11124`: [Bug] savefig cannot save file with a Unicode name
* :ghissue:`7733`: Trying to set_ylim(bottom=0) on a log scaled axis changes plot
* :ghissue:`10319`: TST: pyqt 5.10 breaks pyqt5 interactive tests
* :ghissue:`10676`: Add source code to documentation
* :ghissue:`9207`: axes has no method to return new position after box is adjusted due to aspect ratio...
* :ghissue:`4615`: hist2d with log xy axis
* :ghissue:`10996`: Plotting text with datetime axis causes warning
* :ghissue:`7582`: Report date and time of cursor position on a plot_date plot
* :ghissue:`10114`: Remove mlab from examples
* :ghissue:`10342`: imshow longdouble not truly supported
* :ghissue:`8062`: tight_layout + lots of subplots + long ylabels inverts yaxis
* :ghissue:`4413`: Long axis title alters xaxis length and direction with ``plt.tight_layout()``
* :ghissue:`1415`: Plot title should be shifted up when xticks are set to the top of the plot
* :ghissue:`10789`: Make pie charts circular by default
* :ghissue:`10941`: Cannot set text alignment in pie chart
* :ghissue:`7908`: plt.show doesn't warn if a non-GUI backend is being used
* :ghissue:`10502`: 'FigureManager' is an undefined name in backend_wx.py
* :ghissue:`10062`: axes limits revert to automatic on sharing axes?
* :ghissue:`9246`: ENH: make default colorbar ticks adjust as nicely as axes ticks
* :ghissue:`8818`: plt.plot() does not support structured arrays as data= kwarg
* :ghissue:`10533`: Recognize pandas Timestamp objects for DateConverter?
* :ghissue:`8358`: Minor ticks on log-scale colorbar are not cleared
* :ghissue:`10075`: RectangleSelector does not work if start and end points are identical
* :ghissue:`8576`: support 'markevery' in prop_cycle
* :ghissue:`8874`: Crash in python setup.py test
* :ghissue:`3871`: replace use of _tkcanvas with get_tk_widget()
* :ghissue:`10550`: Use long color names for rc defaultParams
* :ghissue:`10722`: Duplicated test name in test_constrainedlayout
* :ghissue:`10419`: svg backend does not respect alpha channel of text *when passed as rgba*
* :ghissue:`10769`: DOC: set_major_locator could check that its getting a Locator (was EngFormatter broken?)
* :ghissue:`10719`: Need better type error checking for linewidth in ax.grid
* :ghissue:`7776`: tex cache lockfile retries should be configurable
* :ghissue:`10556`: Special conversions of xrange()
* :ghissue:`10501`: cmp() is an undefined name in Python 3
* :ghissue:`9812`: figure_enter_event generates base Event and not LocationEvent
* :ghissue:`10602`: Random image failures with test_curvelinear4
* :ghissue:`7795`: Incorrect uses of is_numlike
.. _whats-new-2-0-0:

What's new in Matplotlib 2.0 (Jan 17, 2017)
===========================================

.. note::

   Matplotlib 2.0 supports Python 2.7, and 3.4+



Default style changes
---------------------

The major changes in v2.0 are related to overhauling the default styles.

.. toctree::
   :maxdepth: 2

   dflt_style_changes


Improved color conversion API and RGBA support
----------------------------------------------

The :mod:`~matplotlib.colors` gained a new color conversion API with
full support for the alpha channel.  The main public functions are
:func:`~matplotlib.colors.is_color_like`, :func:`matplotlib.colors.to_rgba`,
:func:`matplotlib.colors.to_rgba_array` and :func:`~matplotlib.colors.to_hex`.
RGBA quadruplets are encoded in hex format as "#rrggbbaa".

A side benefit is that the Qt options editor now allows setting the alpha
channel of the artists as well.


New Configuration (rcParams)
----------------------------

New rcparams added

+-------------------------------------+--------------------------------------------------+
| Parameter                           | Description                                      |
+=====================================+==================================================+
|:rc:`date.autoformatter.year`        | format string for 'year' scale dates             |
+-------------------------------------+--------------------------------------------------+
|:rc:`date.autoformatter.month`       | format string for 'month' scale dates            |
+-------------------------------------+--------------------------------------------------+
|:rc:`date.autoformatter.day`         | format string for 'day' scale dates              |
+-------------------------------------+--------------------------------------------------+
|:rc:`date.autoformatter.hour`        | format string for 'hour' scale times             |
+-------------------------------------+--------------------------------------------------+
|:rc:`date.autoformatter.minute`      | format string for 'minute' scale times           |
+-------------------------------------+--------------------------------------------------+
|:rc:`date.autoformatter.second`      | format string for 'second' scale times           |
+-------------------------------------+--------------------------------------------------+
|:rc:`date.autoformatter.microsecond` | format string for 'microsecond' scale times      |
+-------------------------------------+--------------------------------------------------+
|:rc:`scatter.marker`                 | default marker for scatter plot                  |
+-------------------------------------+--------------------------------------------------+
|:rc:`svg.hashsalt`                   | see note                                         |
+-------------------------------------+--------------------------------------------------+
|:rc:`xtick.top`,                     | Control where major and minor ticks are drawn.   |
|:rc:`xtick.major.top`                | The global values are ``and``\ed with the        |
|:rc:`xtick.minor.top`,               | corresponding major/minor values.                |
|:rc:`xtick.bottom`,                  | corresponding major/minor values.                |
|:rc:`xtick.major.bottom`             |                                                  |
|:rc:`xtick.minor.bottom`,            |                                                  |
|:rc:`ytick.left`,                    |                                                  |
|:rc:`ytick.minor.left`,              |                                                  |
|:rc:`ytick.major.left`               |                                                  |
|:rc:`ytick.right`,                   |                                                  |
|:rc:`ytick.minor.right`,             |                                                  |
|:rc:`ytick.major.right`              |                                                  |
+-------------------------------------+--------------------------------------------------+
|:rc:`hist.bins`                      | The default number of bins to use in             |
|                                     | `~matplotlib.axes.Axes.hist`.  This can be an    |
|                                     | `int`, a list of floats, or ``'auto'`` if numpy  |
|                                     | >= 1.11 is installed.                            |
+-------------------------------------+--------------------------------------------------+
|:rc:`lines.scale_dashes`             | Whether the line dash patterns should scale with |
|                                     | linewidth.                                       |
+-------------------------------------+--------------------------------------------------+
|:rc:`axes.formatter.offset_threshold`| Minimum number of digits saved in tick labels    |
|                                     | that triggers using an offset.                   |
+-------------------------------------+--------------------------------------------------+



Added ``svg.hashsalt`` key to rcParams
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If ``svg.hashsalt`` is ``None`` (which it is by default), the svg
backend uses ``uuid4`` to generate the hash salt.  If it is not
``None``, it must be a string that is used as the hash salt instead of
``uuid4``.  This allows for deterministic SVG output.


Removed the ``svg.image_noscale`` rcParam
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

As a result of the extensive changes to image handling, the
``svg.image_noscale`` rcParam has been removed.  The same
functionality may be achieved by setting ``interpolation='none'`` on
individual images or globally using the ``image.interpolation``
rcParam.


Qualitative colormaps
---------------------

ColorBrewer's "qualitative" colormaps ("Accent", "Dark2", "Paired",
"Pastel1", "Pastel2", "Set1", "Set2", "Set3") were intended for discrete
categorical data, with no implication of value, and therefore have been
converted to ``ListedColormap`` instead of ``LinearSegmentedColormap``, so
the colors will no longer be interpolated and they can be used for
choropleths, labeled image features, etc.



Axis offset label now responds to *labelcolor*
----------------------------------------------

Axis offset labels are now colored the same as axis tick markers when
*labelcolor* is altered.

Improved offset text choice
---------------------------
The default offset-text choice was changed to only use significant digits that
are common to all ticks (e.g. 1231..1239 -> 1230, instead of 1231), except when
they straddle a relatively large multiple of a power of ten, in which case that
multiple is chosen (e.g. 1999..2001->2000).


Style parameter blacklist
-------------------------

In order to prevent unexpected consequences from using a style, style
files are no longer able to set parameters that affect things
unrelated to style.  These parameters include::

  'interactive', 'backend', 'backend.qt4', 'webagg.port',
  'webagg.port_retries', 'webagg.open_in_browser', 'backend_fallback',
  'toolbar', 'timezone', 'datapath', 'figure.max_open_warning',
  'savefig.directory', 'tk.window_focus', 'docstring.hardcopy'


Change in default font
----------------------

The default font used by matplotlib in text has been changed to DejaVu Sans and
DejaVu Serif for the sans-serif and serif families, respectively. The DejaVu
font family is based on the previous matplotlib default --Bitstream Vera-- but
includes a much wider range of characters.

The default mathtext font has been changed from Computer Modern to the DejaVu
family to maintain consistency with regular text. Two new options for the
``mathtext.fontset`` configuration parameter have been added: ``dejavusans``
(default) and ``dejavuserif``. Both of these options use DejaVu glyphs whenever
possible and fall back to STIX symbols when a glyph is not found in DejaVu. To
return to the previous behavior, set the rcParam ``mathtext.fontset`` to ``cm``.


Faster text rendering
---------------------

Rendering text in the Agg backend is now less fuzzy and about 20%
faster to draw.


Improvements for the Qt figure options editor
---------------------------------------------

Various usability improvements were implemented for the Qt figure options
editor, among which:

- Line style entries are now sorted without duplicates.
- The colormap and normalization limits can now be set for images.
- Line edits for floating values now display only as many digits as necessary
  to avoid precision loss.  An important bug was also fixed regarding input
  validation using Qt5 and a locale where the decimal separator is ",".
- The axes selector now uses shorter, more user-friendly names for axes, and
  does not crash if there are no axes.
- Line and image entries using the default labels ("_lineX", "_imageX") are now
  sorted numerically even when there are more than 10 entries.


Improved image support
----------------------

Prior to version 2.0, matplotlib resampled images by first applying
the colormap and then resizing the result.  Since the resampling was
performed on the colored image, this introduced colors in the output
image that didn't actually exist in the colormap.  Now, images are
resampled first (and entirely in floating-point, if the input image is
floating-point), and then the colormap is applied.

In order to make this important change, the image handling code was
almost entirely rewritten.  As a side effect, image resampling uses
less memory and fewer datatype conversions than before.

The experimental private feature where one could "skew" an image by
setting the private member ``_image_skew_coordinate`` has been
removed.  Instead, images will obey the transform of the axes on which
they are drawn.

Non-linear scales on image plots
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`~.Axes.imshow` now draws data at the requested points in data space after the
application of non-linear scales.

The image on the left demonstrates the new, correct behavior.
The old behavior can be recreated using `~.Axes.pcolormesh` as
demonstrated on the right.


.. plot::

    import numpy as np
    import matplotlib.pyplot as plt

    data = np.arange(30).reshape(5, 6)
    x = np.linspace(0, 6, 7)
    y = 10**np.linspace(0, 5, 6)
    X, Y = np.meshgrid(x, y)

    fig, (ax1, ax2) = plt.subplots(ncols=2, figsize=(8, 4))

    ax1.imshow(data, aspect="auto", extent=(0, 6, 1e0, 1e5), interpolation='nearest')
    ax1.set_yscale('log')
    ax1.set_title('Using ax.imshow')

    ax2.pcolormesh(x, y, np.flipud(data))
    ax2.set_yscale('log')
    ax2.set_title('Using ax.pcolormesh')
    ax2.autoscale('tight')

    plt.show()


This can be understood by analogy to plotting a histogram with linearly spaced bins
with a logarithmic x-axis.  Equal sized bins will be displayed as wider for small
*x* and narrower for large *x*.



Support for HiDPI (Retina) displays in the NbAgg and WebAgg backends
--------------------------------------------------------------------

The NbAgg and WebAgg backends will now use the full resolution of your
high-pixel-density display.

Change in the default animation codec
-------------------------------------

The default animation codec has been changed from ``mpeg4`` to ``h264``,
which is more efficient. It can be set via the ``animation.codec`` rcParam.

Deprecated support for mencoder in animation
--------------------------------------------

The use of mencoder for writing video files with mpl is problematic;
switching to ffmpeg is strongly advised.  All support for mencoder
will be removed in version 2.2.

Boxplot Zorder Keyword Argument
-------------------------------

The *zorder* parameter now exists for `~.Axes.boxplot`. This allows the zorder
of a boxplot to be set in the plotting function call. ::

    boxplot(np.arange(10), zorder=10)

Filled ``+`` and ``x`` markers
------------------------------

New fillable *plus* and *x* markers have been added. See
the :mod:`~matplotlib.markers` module and
:doc:`marker reference </gallery/lines_bars_and_markers/marker_reference>`
examples.

*rcount* and *ccount* for `~.axes3d.Axes3D.plot_surface`
--------------------------------------------------------

As of v2.0, mplot3d's `~.axes3d.Axes3D.plot_surface` now
accepts *rcount* and *ccount* arguments for controlling the sampling of the
input data for plotting. These arguments specify the maximum number of
evenly spaced samples to take from the input data. These arguments are
also the new default sampling method for the function, and is
considered a style change.

The old *rstride* and *cstride* arguments, which specified the size of the
evenly spaced samples, become the default when 'classic' mode is invoked,
and are still available for use. There are no plans for deprecating these
arguments.

Streamplot Zorder Keyword Argument Changes
------------------------------------------

The ``zorder`` parameter for `~.Axes.streamplot` now has default
value of ``None`` instead of ``2``. If ``None`` is given as ``zorder``,
`~.Axes.streamplot` has a default ``zorder`` of
``matplotlib.lines.Line2D.zorder``.

.. _gc_get_hatch_color_wn:

Extension to `matplotlib.backend_bases.GraphicsContextBase`
-----------------------------------------------------------

To support standardizing hatch behavior across the backends we ship
the `matplotlib.backend_bases.GraphicsContextBase.get_hatch_color`
method as added to `matplotlib.backend_bases.GraphicsContextBase`.
This is only used during the render process in the backends we ship so
will not break any third-party backends.

If you maintain a third-party backend which extends
`~matplotlib.backend_bases.GraphicsContextBase` this method is now
available to you and should be used to color hatch patterns.
.. _whats-new-1-3:

What's new in Matplotlib 1.3 (Aug 01, 2013)
===========================================

.. contents:: Table of Contents
   :depth: 2

.. note::

   matplotlib 1.3 supports Python 2.6, 2.7, 3.2, and 3.3

New in 1.3.1
------------

1.3.1 is a bugfix release, primarily dealing with improved setup and
handling of dependencies, and correcting and enhancing the
documentation.

The following changes were made in 1.3.1 since 1.3.0.

Enhancements
````````````

- Added a context manager for creating multi-page pdfs (see
  `matplotlib.backends.backend_pdf.PdfPages`).

- The WebAgg backend should now have lower latency over heterogeneous
  Internet connections.

Bug fixes
`````````

- Histogram plots now contain the endline.

- Fixes to the Molleweide projection.

- Handling recent fonts from Microsoft and Macintosh-style fonts with
  non-ascii metadata is improved.

- Hatching of fill between plots now works correctly in the PDF
  backend.

- Tight bounding box support now works in the PGF backend.

- Transparent figures now display correctly in the Qt4Agg backend.

- Drawing lines from one subplot to another now works.

- Unit handling on masked arrays has been improved.

Setup and dependencies
``````````````````````

- Now works with any version of pyparsing 1.5.6 or later, without displaying
  hundreds of warnings.

- Now works with 64-bit versions of Ghostscript on MS-Windows.

- When installing from source into an environment without Numpy, Numpy
  will first be downloaded and built and then used to build
  matplotlib.

- Externally installed backends are now always imported using a
  fully-qualified path to the module.

- Works with newer version of wxPython.

- Can now build with a PyCXX installed globally on the system from source.

- Better detection of Gtk3 dependencies.

Testing
```````

- Tests should now work in non-English locales.

- PEP8 conformance tests now report on locations of issues.


New plotting features
---------------------

`~.xkcd`-style sketch plotting
``````````````````````````````
To give your plots a sense of authority that they may be missing,
Michael Droettboom (inspired by the work of many others in
:ghpull:`1329`) has added an `xkcd-style <https://xkcd.com/>`__ sketch
plotting mode.  To use it, simply call `matplotlib.pyplot.xkcd`
before creating your plot. For really fine control, it is also possible
to modify each artist's sketch parameters individually with
:meth:`matplotlib.artist.Artist.set_sketch_params`.

.. figure:: ../../gallery/showcase/images/sphx_glr_xkcd_001.png
   :target: ../../gallery/showcase/xkcd.html
   :align: center
   :scale: 50

Updated Axes3D.contour methods
------------------------------
Damon McDougall updated the
:meth:`~mpl_toolkits.mplot3d.axes3d.Axes3D.tricontour` and
:meth:`~mpl_toolkits.mplot3d.axes3d.Axes3D.tricontourf` methods to allow 3D
contour plots on abitrary unstructured user-specified triangulations.

.. figure:: ../../gallery/mplot3d/images/sphx_glr_tricontour3d_001.png
   :target: ../../gallery/mplot3d/tricontour3d.html
   :align: center
   :scale: 50

New eventplot plot type
```````````````````````
Todd Jennings added a :func:`~matplotlib.pyplot.eventplot` function to
create multiple rows or columns of identical line segments

.. figure:: ../../gallery/lines_bars_and_markers/images/sphx_glr_eventplot_demo_001.png
   :target: ../../gallery/lines_bars_and_markers/eventplot_demo.html
   :align: center
   :scale: 50

As part of this feature, there is a new
:class:`~matplotlib.collections.EventCollection` class that allows for
plotting and manipulating rows or columns of identical line segments.

Triangular grid interpolation
`````````````````````````````
Geoffroy Billotey and Ian Thomas added classes to perform
interpolation within triangular grids:
(:class:`~matplotlib.tri.LinearTriInterpolator` and
:class:`~matplotlib.tri.CubicTriInterpolator`) and a utility class to
find the triangles in which points lie
(:class:`~matplotlib.tri.TrapezoidMapTriFinder`).  A helper class to
perform mesh refinement and smooth contouring was also added
(:class:`~matplotlib.tri.UniformTriRefiner`).  Finally, a class
implementing some basic tools for triangular mesh improvement was
added (:class:`~matplotlib.tri.TriAnalyzer`).

.. figure:: ../../gallery/images_contours_and_fields/images/sphx_glr_tricontour_smooth_user_001.png
   :target: ../../gallery/images_contours_and_fields/tricontour_smooth_user.html
   :align: center
   :scale: 50

Baselines for stackplot
```````````````````````
Till Stensitzki added non-zero baselines to
:func:`~matplotlib.pyplot.stackplot`.  They may be symmetric or
weighted.

.. figure:: ../../gallery/lines_bars_and_markers/images/sphx_glr_stackplot_demo_001.png
   :target: ../../gallery/lines_bars_and_markers/stackplot_demo.html
   :align: center
   :scale: 50

Rectangular colorbar extensions
```````````````````````````````
Andrew Dawson added a new keyword argument *extendrect* to
:meth:`~matplotlib.pyplot.colorbar` to optionally make colorbar
extensions rectangular instead of triangular.

More robust boxplots
````````````````````
Paul Hobson provided a fix to the :func:`~matplotlib.pyplot.boxplot`
method that prevent whiskers from being drawn inside the box for
oddly distributed data sets.

Calling subplot() without arguments
```````````````````````````````````
A call to :func:`~matplotlib.pyplot.subplot` without any arguments now
acts the same as ``subplot(111)`` or ``subplot(1, 1, 1)`` -- it creates one
axes for the whole figure. This was already the behavior for both
:func:`~matplotlib.pyplot.axes` and
:func:`~matplotlib.pyplot.subplots`, and now this consistency is
shared with :func:`~matplotlib.pyplot.subplot`.

Drawing
-------

Independent alpha values for face and edge colors
`````````````````````````````````````````````````
Wes Campaigne modified how :class:`~matplotlib.patches.Patch` objects are
drawn such that (for backends supporting transparency) you can set different
alpha values for faces and edges, by specifying their colors in RGBA format.
Note that if you set the alpha attribute for the patch object (e.g. using
:meth:`~matplotlib.patches.Patch.set_alpha` or the ``alpha`` keyword
argument), that value will override the alpha components set in both the
face and edge colors.

Path effects on lines
`````````````````````
Thanks to Jae-Joon Lee, path effects now also work on plot lines.

.. figure:: ../../gallery/misc/images/sphx_glr_patheffect_demo_001.png
   :target: ../../gallery/misc/patheffect_demo.html
   :align: center
   :scale: 50

Easier creation of colormap and normalizer for levels with colors
`````````````````````````````````````````````````````````````````
Phil Elson added the :func:`matplotlib.colors.from_levels_and_colors`
function to easily create a colormap and normalizer for representation
of discrete colors for plot types such as
:func:`matplotlib.pyplot.pcolormesh`, with a similar interface to that
of `matplotlib.pyplot.contourf`.

Full control of the background color
````````````````````````````````````
Wes Campaigne and Phil Elson fixed the Agg backend such that PNGs are
now saved with the correct background color when
``fig.patch.get_alpha()`` is not 1.

Improved ``bbox_inches="tight"`` functionality
``````````````````````````````````````````````
Passing ``bbox_inches="tight"`` through to `.pyplot.savefig` now takes
into account *all* artists on a figure - this was previously not the
case and led to several corner cases which did not function as
expected.

Initialize a rotated rectangle
``````````````````````````````
Damon McDougall extended the :class:`~matplotlib.patches.Rectangle`
constructor to accept an *angle* kwarg, specifying the rotation of a
rectangle in degrees.

Text
----

Anchored text support
`````````````````````
The SVG and pgf backends are now able to save text alignment
information to their output formats. This allows to edit text elements
in saved figures, using Inkscape for example, while preserving their
intended position. For SVG please note that you'll have to disable
the default text-to-path conversion (``mpl.rc('svg',
fonttype='none')``).

Better vertical text alignment and multi-line text
``````````````````````````````````````````````````
The vertical alignment of text is now consistent across backends.  You
may see small differences in text placement, particularly with rotated
text.

If you are using a custom backend, note that the `~.RendererBase.draw_text` renderer
method is now passed the location of the baseline, not the location of
the bottom of the text bounding box.

Multi-line text will now leave enough room for the height of very tall
or very low text, such as superscripts and subscripts.

Left and right side axes titles
```````````````````````````````
Andrew Dawson added the ability to add axes titles flush with the left
and right sides of the top of the axes using a new keyword argument
*loc* to :func:`~matplotlib.pyplot.title`.

Improved manual contour plot label positioning
``````````````````````````````````````````````
Brian Mattern modified the manual contour plot label positioning code
to interpolate along line segments and find the actual closest point
on a contour to the requested position. Previously, the closest path
vertex was used, which, in the case of straight contours was sometimes
quite distant from the requested location. Much more precise label
positioning is now possible.

Configuration (rcParams)
------------------------

Quickly find rcParams
`````````````````````
Phil Elson made it easier to search for rcParameters by passing a
valid regular expression to :func:`matplotlib.RcParams.find_all`.
:class:`matplotlib.RcParams` now also has a pretty repr and str
representation so that search results are printed prettily:

    >>> import matplotlib
    >>> print(matplotlib.rcParams.find_all('\.size'))
    RcParams({'font.size': 12,
              'xtick.major.size': 4,
              'xtick.minor.size': 2,
              'ytick.major.size': 4,
              'ytick.minor.size': 2})

``axes.xmargin`` and ``axes.ymargin`` added to rcParams
```````````````````````````````````````````````````````
:rc:`axes.xmargin` and :rc:`axes.ymargin` were added
to configure the default margins used.  Previously they were
hard-coded to default to 0, default value of both rcParam values is 0.

Changes to font rcParams
````````````````````````
The ``font.*`` rcParams now affect only text objects created after the
rcParam has been set, and will not retroactively affect already
existing text objects.  This brings their behavior in line with most
other rcParams.

Added :rc:`savefig.jpeg_quality`
````````````````````````````````
rcParam value :rc:`savefig.jpeg_quality` was added so that the user can
configure the default quality used when a figure is written as a JPEG.
The default quality is 95; previously, the default quality was 75.
This change minimizes the artifacting inherent in JPEG images,
particularly with images that have sharp changes in color as plots
often do.

Backends
--------

WebAgg backend
``````````````
Michael Droettboom, Phil Elson and others have developed a new
backend, WebAgg, to display figures in a web browser.  It works with
animations as well as being fully interactive.

.. image:: /_static/webagg_screenshot.png

Future versions of matplotlib will integrate this backend with the
IPython notebook for a fully web browser based plotting frontend.

Remember save directory
```````````````````````
Martin Spacek made the save figure dialog remember the last directory
saved to. The default is configurable with the new :rc:`savefig.directory`
rcParam in :file:`matplotlibrc`.

Documentation and examples
--------------------------

Numpydoc docstrings
```````````````````
Nelle Varoquaux has started an ongoing project to convert matplotlib's
docstrings to numpydoc format.  See `MEP10
<https://github.com/matplotlib/matplotlib/wiki/Mep10>`__ for more
information.

Example reorganization
``````````````````````
Tony Yu has begun work reorganizing the examples into more meaningful
categories.  The new gallery page is the fruit of this ongoing work.
See `MEP12 <https://github.com/matplotlib/matplotlib/wiki/MEP12>`__ for
more information.

Examples now use subplots()
```````````````````````````
For the sake of brevity and clarity, most of the :ref:`examples
<examples-index>` now use the newer
:func:`~matplotlib.pyplot.subplots`, which creates a figure and one
(or multiple) axes object(s) in one call. The old way involved a call
to :func:`~matplotlib.pyplot.figure`, followed by one (or multiple)
:func:`~matplotlib.pyplot.subplot` calls.

Infrastructure
--------------

Housecleaning
`````````````
A number of features that were deprecated in 1.2 or earlier, or have
not been in a working state for a long time have been removed.
Highlights include removing the Qt version 3 backends, and the FltkAgg
and Emf backends.  See :ref:`changes_in_1_3` for a complete list.

New setup script
````````````````
matplotlib 1.3 includes an entirely rewritten setup script.  We now
ship fewer dependencies with the tarballs and installers themselves.
Notably, pytz_, dateutil_, pyparsing_ and six_ are no longer
included with matplotlib.  You can either install them manually first,
or let pip_ install them as dependencies along with matplotlib.  It
is now possible to not include certain subcomponents, such as the unit
test data, in the install.  See :file:`setup.cfg.template` for more
information.

.. _dateutil: https://pypi.org/project/python-dateutil/
.. _pip: https://pypi.org/project/pip/
.. _pyparsing: https://pypi.org/project/pyparsing/
.. _pytz: https://pypi.org/project/pytz/
.. _six: https://pypi.org/project/six/

XDG base directory support
``````````````````````````
On Linux, matplotlib now uses the `XDG base directory specification
<https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html>`_ to
find the :file:`matplotlibrc` configuration file. :file:`matplotlibrc` should
now be kept in :file:`~/.config/matplotlib`, rather than :file:`~/.matplotlib`.
If your configuration is found in the old location, it will still be used, but
a warning will be displayed.

Catch opening too many figures using pyplot
```````````````````````````````````````````
Figures created through `.pyplot.figure` are retained until they are
explicitly closed.  It is therefore common for new users of matplotlib
to run out of memory when creating a large series of figures in a loop
without closing them.

matplotlib will now display a `RuntimeWarning` when too many figures
have been opened at once.  By default, this is displayed for 20 or
more figures, but the exact number may be controlled using the
``figure.max_open_warning`` rcParam.
.. _github-stats-3-2-1:

GitHub statistics for 3.2.1 (Mar 18, 2020)
==========================================

GitHub statistics for 2020/03/03 (tag: v3.2.0) - 2020/03/18

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 11 issues and merged 52 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/49?closed=1>`__
and `on GitHub <https://github.com/matplotlib/matplotlib/milestone/51?closed=1>`__

The following 12 authors contributed 154 commits.

* Amy Roberts
* Antony Lee
* Elliott Sales de Andrade
* hannah
* Hugo van Kemenade
* Jody Klymak
* Kyle Sunden
* MarcoGorelli
* Maximilian Nöthe
* Sandro Tosi
* Thomas A Caswell
* Tim Hoffmann

GitHub issues and pull requests:

Pull Requests (52):

* :ghpull:`15199`: MNT/TST: generalize check_figures_equal to work with pytest.marks
* :ghpull:`15685`: Avoid a RuntimeError at animation shutdown with PySide2.
* :ghpull:`15969`: Restart pgf's latex instance after bad latex inputs.
* :ghpull:`16640`: ci: Fix Azure on v3.2.x
* :ghpull:`16648`: Document filling of Poly3DCollection
* :ghpull:`16649`: Fix typo in docs
* :ghpull:`16650`: Backport PR #16649 on branch v3.2.x (Fix typo in docs)
* :ghpull:`16651`: Docs: Change Python 2 note to past tense
* :ghpull:`16654`: Backport PR #16651 on branch v3.2.0-doc (Docs: Change Python 2 note to past tense)
* :ghpull:`16656`: Make test_imagegrid_cbar_mode_edge less flaky.
* :ghpull:`16661`: added Framework :: Matplotlib  to setup
* :ghpull:`16665`: Backport PR #16661 on branch v3.2.x (added Framework :: Matplotlib  to setup)
* :ghpull:`16671`: Fix some readme bits
* :ghpull:`16672`: Update CircleCI and add direct artifact link
* :ghpull:`16682`: Avoid floating point rounding causing bezier.get_parallels to fail
* :ghpull:`16690`: Backport PR #16682 on branch v3.2.x (Avoid floating point rounding causing bezier.get_parallels to fail)
* :ghpull:`16693`: TST: use pytest name in naming files for check_figures_equal
* :ghpull:`16695`: Restart pgf's latex instance after bad latex inputs.
* :ghpull:`16705`: Backport PR #16656 on branch v3.2.x (Make test_imagegrid_cbar_mode_edge less flaky.)
* :ghpull:`16708`: Backport PR #16671: Fix some readme bits
* :ghpull:`16709`: Fix saving PNGs to file objects in some places
* :ghpull:`16722`: Deprecate rcParams["datapath"] in favor of mpl.get_data_path().
* :ghpull:`16725`: TST/CI: also try to run test_user_fonts_win32 on azure
* :ghpull:`16734`: Disable draw_foo methods on renderer used to estimate tight extents.
* :ghpull:`16735`: Make test_stem less flaky.
* :ghpull:`16736`: xpdf: Set AutoRotatePages to None, not false.
* :ghpull:`16742`: nbagg: Don't send events if manager is disconnected.
* :ghpull:`16745`: Allow numbers to set uvc for all arrows in quiver.set_UVC, fixes #16743
* :ghpull:`16751`: Backport PR #16742 on branch v3.2.x (nbagg: Don't send events if manager is disconnected.)
* :ghpull:`16752`: ci: Disallow pytest 5.4.0, which is crashing.
* :ghpull:`16753`: Backport #16752 to v3.2.x
* :ghpull:`16760`: Backport PR #16735 on branch v3.2.x (Make test_stem less flaky.)
* :ghpull:`16761`: Backport PR #16745 on branch v3.2.x (Allow numbers to set uvc for all arrows in quiver.set_UVC, fixes #16743)
* :ghpull:`16763`: Backport PR #16648 on branch v3.2.x (Document filling of Poly3DCollection)
* :ghpull:`16764`: Backport PR #16672 on branch v3.2.0-doc
* :ghpull:`16765`: Backport PR #16736 on branch v3.2.x (xpdf: Set AutoRotatePages to None, not false.)
* :ghpull:`16766`: Backport PR #16734 on branch v3.2.x (Disable draw_foo methods on renderer used to estimate tight extents.)
* :ghpull:`16767`: Backport PR #15685 on branch v3.2.x (Avoid a RuntimeError at animation shutdown with PySide2.)
* :ghpull:`16768`: Backport PR #16725 on branch v3.2.x (TST/CI: also try to run test_user_fonts_win32 on azure)
* :ghpull:`16770`: Fix tuple markers
* :ghpull:`16779`: Documentation: make instructions for documentation contributions easier to find, add to requirements for building docs
* :ghpull:`16784`: Update CircleCI URL for downloading humor-sans.ttf.
* :ghpull:`16790`: Backport PR #16784 on branch v3.2.x (Update CircleCI URL for downloading humor-sans.ttf.)
* :ghpull:`16791`: Backport PR #16770 on branch v3.2.x (Fix tuple markers)
* :ghpull:`16794`: DOC: Don't mention drawstyle in ``set_linestyle`` docs.
* :ghpull:`16795`: Backport PR #15199 on branch v3.2.x (MNT/TST: generalize check_figures_equal to work with pytest.marks)
* :ghpull:`16797`: Backport #15589 and #16693, fixes for check_figures_equal
* :ghpull:`16799`: Backport PR #16794 on branch v3.2.0-doc (DOC: Don't mention drawstyle in ``set_linestyle`` docs.)
* :ghpull:`16800`: Fix check_figures_equal for tests that use its fixtures.
* :ghpull:`16803`: Fix some doc issues
* :ghpull:`16806`: Backport PR #16803 on branch v3.2.0-doc (Fix some doc issues)
* :ghpull:`16809`: Backport PR #16779 on branch v3.2.0-doc (Documentation: make instructions for documentation contributions easier to find, add to requirements for building docs)

Issues (11):

* :ghissue:`12820`: [Annotations] ValueError: lines do not intersect when computing tight bounding box containing arrow with filled paths
* :ghissue:`16538`: xpdf distiller seems broken
* :ghissue:`16624`: Azure pipelines are broken on v3.2.x
* :ghissue:`16633`: Wrong drawing Poly3DCollection
* :ghissue:`16645`: Minor typo in API document of patches.ConnectionPatch
* :ghissue:`16670`: BLD: ascii codec decode on 3.2.0 in non-UTF8 locales
* :ghissue:`16704`: 3.2.0: ``setup.py clean`` fails with ``NameError: name 'long_description' is not defined``
* :ghissue:`16721`: nbAgg backend does not allow saving figures as png
* :ghissue:`16731`: PGF backend + savefig.bbox results in I/O error in 3.2
* :ghissue:`16743`: Breaking change in 3.2: quiver.set_UVC does not support single numbers any more
* :ghissue:`16801`: Doc: figure for colormaps off
.. _github-stats-3-4-1:

GitHub statistics for 3.4.1 (Mar 31, 2021)
==========================================

GitHub statistics for 2021/03/26 (tag: v3.4.0) - 2021/03/31

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 7 issues and merged 20 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/61?closed=1>`__

The following 6 authors contributed 43 commits.

* Antony Lee
* Elliott Sales de Andrade
* Jody Klymak
* Thomas A Caswell
* Tim Hoffmann
* Xianxiang Li

GitHub issues and pull requests:

Pull Requests (20):

* :ghpull:`19834`: Backport PR #19812: FIX: size and color rendering for Path3DCollection
* :ghpull:`19833`: Backport PR #19811 on branch v3.4.x (Fix Inkscape cleanup at exit on Windows.)
* :ghpull:`19812`: FIX: size and color rendering for Path3DCollection
* :ghpull:`19811`: Fix Inkscape cleanup at exit on Windows.
* :ghpull:`19816`: Fix legend of colour-mapped scatter plots.
* :ghpull:`19830`: Backport PR #19824 on branch v3.4.x (Access pdf annotations while inside pikepdf.Pdf context manager.)
* :ghpull:`19829`: Backport PR #19822 on branch v3.4.x (Clarify default backend selection doc.)
* :ghpull:`19827`: Backport PR #19805 on branch v3.4.x (Fix suptitle out of layout)
* :ghpull:`19824`: Access pdf annotations while inside pikepdf.Pdf context manager.
* :ghpull:`19805`: Fix suptitle out of layout
* :ghpull:`19823`: Backport PR #19814 on branch v3.4.x (Fix positioning of annotation arrow.)
* :ghpull:`19820`: Backport PR #19817 on branch v3.4.x (Fix antialiasing with old pycairo/cairocffi.)
* :ghpull:`19814`: Fix positioning of annotation arrow.
* :ghpull:`19817`: Fix antialiasing with old pycairo/cairocffi.
* :ghpull:`19818`: Backport PR #19784 on branch v3.4.x (FIX errorbar problem with fillstyle)
* :ghpull:`19784`: FIX errorbar problem with fillstyle
* :ghpull:`19815`: Backport PR #19793 on branch v3.4.x (Fix non existent URIs)
* :ghpull:`19793`: Fix non existent URIs
* :ghpull:`19783`: Backport PR #19719 on branch v3.4.x (Respect antialiasing settings in cairo backends as well.)
* :ghpull:`19719`: Respect antialiasing settings in cairo backends as well.

Issues (7):

* :ghissue:`19779`: BUG: matplotlib 3.4.0 -- Scatter with colormap and legend gives TypeError: object of type 'NoneType' has no len()
* :ghissue:`19787`: Marker sizes in Axes3D scatter plot are changing all the time
* :ghissue:`19809`: Tests that use "image_comparison" fail to cleanup on Windows
* :ghissue:`19803`: Suptitle positioning messed up in 3.4.0
* :ghissue:`19785`: Starting point of annotation arrows has changed in 3.4.0
* :ghissue:`19776`: Errorbars with yerr fail when fillstyle is specified
* :ghissue:`19780`: redirect_from extension breaks latex build
.. _whats-new-3-4-0:

=============================================
What's new in Matplotlib 3.4.0 (Mar 26, 2021)
=============================================

For a list of all of the issues and pull requests since the last revision, see
the :ref:`github-stats`.

.. contents:: Table of Contents
   :depth: 4

.. toctree::
   :maxdepth: 4

Figure and Axes creation / management
=====================================

New subfigure functionality
---------------------------

New `.figure.Figure.add_subfigure` and `.figure.Figure.subfigures`
functionalities allow creating virtual figures within figures. Similar nesting
was previously done with nested gridspecs (see
:doc:`/gallery/subplots_axes_and_figures/gridspec_nested`). However, this did
not allow localized figure artists (e.g., a colorbar or suptitle) that only
pertained to each subgridspec.

The new methods `.figure.Figure.add_subfigure` and `.figure.Figure.subfigures`
are meant to rhyme with `.figure.Figure.add_subplot` and
`.figure.Figure.subplots` and have most of the same arguments.

See :doc:`/gallery/subplots_axes_and_figures/subfigures` for further details.

.. note::

  The subfigure functionality is experimental API as of v3.4.

.. plot::

    def example_plot(ax, fontsize=12, hide_labels=False):
        pc = ax.pcolormesh(np.random.randn(30, 30))
        if not hide_labels:
            ax.set_xlabel('x-label', fontsize=fontsize)
            ax.set_ylabel('y-label', fontsize=fontsize)
            ax.set_title('Title', fontsize=fontsize)
        return pc

    np.random.seed(19680808)
    fig = plt.figure(constrained_layout=True, figsize=(10, 4))
    subfigs = fig.subfigures(1, 2, wspace=0.07)

    axsLeft = subfigs[0].subplots(1, 2, sharey=True)
    subfigs[0].set_facecolor('#eee')
    for ax in axsLeft:
        pc = example_plot(ax)
    subfigs[0].suptitle('Left plots', fontsize='x-large')
    subfigs[0].colorbar(pc, shrink=0.6, ax=axsLeft, location='bottom')

    axsRight = subfigs[1].subplots(3, 1, sharex=True)
    for nn, ax in enumerate(axsRight):
        pc = example_plot(ax, hide_labels=True)
        if nn == 2:
            ax.set_xlabel('xlabel')
        if nn == 1:
            ax.set_ylabel('ylabel')
    subfigs[1].colorbar(pc, shrink=0.6, ax=axsRight)
    subfigs[1].suptitle('Right plots', fontsize='x-large')

    fig.suptitle('Figure suptitle', fontsize='xx-large')

    plt.show()

Single-line string notation for ``subplot_mosaic``
--------------------------------------------------

`.Figure.subplot_mosaic` and `.pyplot.subplot_mosaic` now accept a single-line
string, using semicolons to delimit rows. Namely, ::

    plt.subplot_mosaic(
        """
        AB
        CC
        """)

may be written as the shorter:

.. plot::
    :include-source:

    plt.subplot_mosaic("AB;CC")

Changes to behavior of Axes creation methods (``gca``, ``add_axes``, ``add_subplot``)
-------------------------------------------------------------------------------------

The behavior of the functions to create new Axes (`.pyplot.axes`,
`.pyplot.subplot`, `.figure.Figure.add_axes`, `.figure.Figure.add_subplot`) has
changed. In the past, these functions would detect if you were attempting to
create Axes with the same keyword arguments as already-existing Axes in the
current Figure, and if so, they would return the existing Axes. Now,
`.pyplot.axes`, `.figure.Figure.add_axes`, and `.figure.Figure.add_subplot`
will always create new Axes. `.pyplot.subplot` will continue to reuse an
existing Axes with a matching subplot spec and equal *kwargs*.

Correspondingly, the behavior of the functions to get the current Axes
(`.pyplot.gca`, `.figure.Figure.gca`) has changed. In the past, these functions
accepted keyword arguments. If the keyword arguments matched an
already-existing Axes, then that Axes would be returned, otherwise new Axes
would be created with those keyword arguments. Now, the keyword arguments are
only considered if there are no Axes at all in the current figure. In a future
release, these functions will not accept keyword arguments at all.

``add_subplot``/``add_axes`` gained an *axes_class* parameter
-------------------------------------------------------------

In particular, ``mpl_toolkits`` Axes subclasses can now be idiomatically used
using, e.g., ``fig.add_subplot(axes_class=mpl_toolkits.axislines.Axes)``

Subplot and subplot2grid can now work with constrained layout
-------------------------------------------------------------

``constrained_layout`` depends on a single `.GridSpec` for each logical layout
on a figure. Previously, `.pyplot.subplot` and `.pyplot.subplot2grid` added a
new ``GridSpec`` each time they were called and were therefore incompatible
with ``constrained_layout``.

Now ``subplot`` attempts to reuse the ``GridSpec`` if the number of rows and
columns is the same as the top level GridSpec already in the figure, i.e.,
``plt.subplot(2, 1, 2)`` will use the same GridSpec as ``plt.subplot(2, 1, 1)``
and the ``constrained_layout=True`` option to `~.figure.Figure` will work.

In contrast, mixing *nrows* and *ncols* will *not* work with
``constrained_layout``: ``plt.subplot(2, 2, 1)`` followed by ``plt.subplots(2,
1, 2)`` will still produce two GridSpecs, and ``constrained_layout=True`` will
give bad results. In order to get the desired effect, the second call can
specify the cells the second Axes is meant to cover:  ``plt.subplots(2, 2, (2,
4))``, or the more Pythonic ``plt.subplot2grid((2, 2), (0, 1), rowspan=2)`` can
be used.


Plotting methods
================

``axline`` supports *transform* parameter
-----------------------------------------

`~.Axes.axline` now supports the *transform* parameter, which applies to the
points *xy1*, *xy2*. The *slope* (if given) is always in data coordinates.

For example, this can be used with ``ax.transAxes`` for drawing lines with a
fixed slope. In the following plot, the line appears through the same point on
both Axes, even though they show different data limits.

.. plot::
    :include-source:

    fig, axs = plt.subplots(1, 2)

    for i, ax in enumerate(axs):
        ax.axline((0.25, 0), slope=2, transform=ax.transAxes)
        ax.set(xlim=(i, i+5), ylim=(i, i+5))

New automatic labeling for bar charts
-------------------------------------

A new `.Axes.bar_label` method has been added for auto-labeling bar charts.

.. figure:: /gallery/lines_bars_and_markers/images/sphx_glr_bar_label_demo_001.png
   :target: ../../gallery/lines_bars_and_markers/bar_label_demo.html

   Example of the new automatic labeling.

A list of hatches can be specified to `~.axes.Axes.bar` and `~.axes.Axes.barh`
------------------------------------------------------------------------------

Similar to some other rectangle properties, it is now possible to hand a list
of hatch styles to `~.axes.Axes.bar` and `~.axes.Axes.barh` in order to create
bars with different hatch styles, e.g.

.. plot::

    fig, ax = plt.subplots()
    ax.bar([1, 2], [2, 3], hatch=['+', 'o'])
    plt.show()

Setting ``BarContainer`` orientation
------------------------------------

`.BarContainer` now accepts a new string argument *orientation*. It can be
either ``'vertical'`` or ``'horizontal'``, default is ``None``.

Contour plots now default to using ScalarFormatter
--------------------------------------------------

Pass ``fmt="%1.3f"`` to the contouring call to restore the old default label
format.

``Axes.errorbar`` cycles non-color properties correctly
-------------------------------------------------------

Formerly, `.Axes.errorbar` incorrectly skipped the Axes property cycle if a
color was explicitly specified, even if the property cycler was for other
properties (such as line style). Now, `.Axes.errorbar` will advance the Axes
property cycle as done for `.Axes.plot`, i.e., as long as all properties in the
cycler are not explicitly passed.

For example, the following will cycle through the line styles:

.. plot::
    :include-source:

    x = np.arange(0.1, 4, 0.5)
    y = np.exp(-x)
    offsets = [0, 1]

    plt.rcParams['axes.prop_cycle'] = plt.cycler('linestyle', ['-', '--'])

    fig, ax = plt.subplots()
    for offset in offsets:
        ax.errorbar(x, y + offset, xerr=0.1, yerr=0.3, fmt='tab:blue')

``errorbar`` *errorevery* parameter matches *markevery*
-------------------------------------------------------

Similar to the *markevery* parameter to `~.Axes.plot`, the *errorevery*
parameter of `~.Axes.errorbar` now accept slices and NumPy fancy indexes (which
must match the size of *x*).

.. plot::

    x = np.linspace(0, 1, 15)
    y = x * (1-x)
    yerr = y/6

    fig, ax = plt.subplots(2, constrained_layout=True)
    ax[0].errorbar(x, y, yerr, capsize=2)
    ax[0].set_title('errorevery unspecified')

    ax[1].errorbar(x, y, yerr, capsize=2,
                   errorevery=[False, True, True, False, True] * 3)
    ax[1].set_title('errorevery=[False, True, True, False, True] * 3')

``hexbin`` supports data reference for *C* parameter
----------------------------------------------------

As with the *x* and *y* parameters, `.Axes.hexbin` now supports passing the *C*
parameter using a data reference.

.. plot::
    :include-source:

    data = {
        'a': np.random.rand(1000),
        'b': np.random.rand(1000),
        'c': np.random.rand(1000),
    }

    fig, ax = plt.subplots()
    ax.hexbin('a', 'b', C='c', data=data, gridsize=10)

Support callable for formatting of Sankey labels
------------------------------------------------

The `format` parameter of `matplotlib.sankey.Sankey` can now accept callables.

This allows the use of an arbitrary function to label flows, for example
allowing the mapping of numbers to emoji.

.. plot::

    from matplotlib.sankey import Sankey
    import math


    def display_in_cats(values, min_cats, max_cats):
        def display_in_cat_scale(value):
            max_value = max(values, key=abs)
            number_cats_to_show = \
                max(min_cats, math.floor(abs(value) / max_value * max_cats))
            return str(number_cats_to_show * '🐱')

        return display_in_cat_scale


    flows = [35, 15, 40, -20, -15, -5, -40, -10]
    orientations = [-1, 1, 0, 1, 1, 1, -1, -1]

    # Cats are good, we want a strictly positive number of them
    min_cats = 1
    # More than four cats might be too much for some people
    max_cats = 4

    cats_format = display_in_cats(flows, min_cats, max_cats)

    sankey = Sankey(flows=flows, orientations=orientations, format=cats_format,
                    offset=.1, head_angle=180, shoulder=0, scale=.010)

    diagrams = sankey.finish()

    diagrams[0].texts[2].set_text('')

    plt.title(f'Sankey flows measured in cats \n'
              f'🐱 = {max(flows, key=abs) / max_cats}')

    plt.show()

``Axes.spines`` access shortcuts
--------------------------------

``Axes.spines`` is now a dedicated container class `.Spines` for a set of
`.Spine`\s instead of an ``OrderedDict``. On top of dict-like access,
``Axes.spines`` now also supports some ``pandas.Series``-like features.

Accessing single elements by item or by attribute::

    ax.spines['top'].set_visible(False)
    ax.spines.top.set_visible(False)

Accessing a subset of items::

    ax.spines[['top', 'right']].set_visible(False)

Accessing all items simultaneously::

    ax.spines[:].set_visible(False)

New ``stairs`` method and ``StepPatch`` artist
----------------------------------------------

`.pyplot.stairs` and the underlying artist `~.matplotlib.patches.StepPatch`
provide a cleaner interface for plotting stepwise constant functions for the
common case that you know the step edges. This supersedes many use cases of
`.pyplot.step`, for instance when plotting the output of `numpy.histogram`.

For both the artist and the function, the x-like edges input is one element
longer than the y-like values input

.. plot::

    np.random.seed(0)
    h, edges = np.histogram(np.random.normal(5, 2, 5000),
                            bins=np.linspace(0,10,20))

    fig, ax = plt.subplots(constrained_layout=True)

    ax.stairs(h, edges)

    plt.show()

See :doc:`/gallery/lines_bars_and_markers/stairs_demo` for examples.

Added *orientation* parameter for stem plots
--------------------------------------------

By default, stem lines are vertical. They can be changed to horizontal using
the *orientation* parameter of `.Axes.stem` or `.pyplot.stem`:

.. plot::

    locs = np.linspace(0.1, 2 * np.pi, 25)
    heads = np.cos(locs)

    fig, ax = plt.subplots()
    ax.stem(locs, heads, orientation='horizontal')

Angles on Bracket arrow styles
------------------------------

Angles specified on the *Bracket* arrow styles (``]-[``, ``]-``, ``-[``, or
``|-|`` passed to *arrowstyle* parameter of `.FancyArrowPatch`) are now
applied. Previously, the *angleA* and *angleB* options were allowed, but did
nothing.

.. plot::

    import matplotlib.patches as mpatches

    fig, ax = plt.subplots()
    ax.set(xlim=(0, 1), ylim=(-1, 4))

    for i, stylename in enumerate((']-[', '|-|')):
        for j, angle in enumerate([-30, 60]):
            arrowstyle = f'{stylename},angleA={angle},angleB={-angle}'
            patch = mpatches.FancyArrowPatch((0.1, 2*i + j), (0.9, 2*i + j),
                                             arrowstyle=arrowstyle,
                                             mutation_scale=25)
            ax.text(0.5, 2*i + j, arrowstyle,
                    verticalalignment='bottom', horizontalalignment='center')
            ax.add_patch(patch)

``TickedStroke`` patheffect
---------------------------

The new `.TickedStroke` patheffect can be used to produce lines with a ticked
style. This can be used to, e.g., distinguish the valid and invalid sides of
the constraint boundaries in the solution space of optimizations.

.. figure:: /gallery/misc/images/sphx_glr_tickedstroke_demo_002.png
   :target: ../../gallery/misc/tickedstroke_demo.html


Colors and colormaps
====================

Collection color specification and mapping
------------------------------------------

Reworking the handling of color mapping and the keyword arguments for
*facecolor* and *edgecolor* has resulted in three behavior changes:

1. Color mapping can be turned off by calling ``Collection.set_array(None)``.
   Previously, this would have no effect.
2. When a mappable array is set, with ``facecolor='none'`` and
   ``edgecolor='face'``, both the faces and the edges are left uncolored.
   Previously the edges would be color-mapped.
3. When a mappable array is set, with ``facecolor='none'`` and
   ``edgecolor='red'``, the edges are red. This addresses Issue #1302.
   Previously the edges would be color-mapped.

Transparency (alpha) can be set as an array in collections
----------------------------------------------------------

Previously, the alpha value controlling transparency in collections could be
specified only as a scalar applied to all elements in the collection. For
example, all the markers in a `~.Axes.scatter` plot, or all the quadrilaterals
in a `~.Axes.pcolormesh` plot, would have the same alpha value.

Now it is possible to supply alpha as an array with one value for each element
(marker, quadrilateral, etc.) in a collection.

.. plot::

    x = np.arange(5, dtype=float)
    y = np.arange(5, dtype=float)
    # z and zalpha for demo pcolormesh
    z = x[1:, np.newaxis] + y[np.newaxis, 1:]
    zalpha = np.ones_like(z)
    zalpha[::2, ::2] = 0.3  # alternate patches are partly transparent
    # s and salpha for demo scatter
    s = x
    salpha = np.linspace(0.1, 0.9, len(x))  # just a ramp

    fig, axs = plt.subplots(2, 2, constrained_layout=True)
    axs[0, 0].pcolormesh(x, y, z, alpha=zalpha)
    axs[0, 0].set_title("pcolormesh")
    axs[0, 1].scatter(x, y, c=s, alpha=salpha)
    axs[0, 1].set_title("color-mapped")
    axs[1, 0].scatter(x, y, c='k', alpha=salpha)
    axs[1, 0].set_title("c='k'")
    axs[1, 1].scatter(x, y, c=['r', 'g', 'b', 'c', 'm'], alpha=salpha)
    axs[1, 1].set_title("c=['r', 'g', 'b', 'c', 'm']")

pcolormesh has improved transparency handling by enabling snapping
------------------------------------------------------------------

Due to how the snapping keyword argument was getting passed to the Agg backend,
previous versions of Matplotlib would appear to show lines between the grid
edges of a mesh with transparency. This version now applies snapping by
default. To restore the old behavior (e.g., for test images), you may set
:rc:`pcolormesh.snap` to `False`.

.. plot::

    # Use old pcolormesh snapping values
    plt.rcParams['pcolormesh.snap'] = False
    fig, ax = plt.subplots()
    xx, yy = np.meshgrid(np.arange(10), np.arange(10))
    z = (xx + 1) * (yy + 1)
    mesh = ax.pcolormesh(xx, yy, z, shading='auto', alpha=0.5)
    fig.colorbar(mesh, orientation='vertical')
    ax.set_title('Before (pcolormesh.snap = False)')

Note that there are lines between the grid boundaries of the main plot which
are not the same transparency. The colorbar also shows these lines when a
transparency is added to the colormap because internally it uses pcolormesh to
draw the colorbar. With snapping on by default (below), the lines at the grid
boundaries disappear.

.. plot::

    fig, ax = plt.subplots()
    xx, yy = np.meshgrid(np.arange(10), np.arange(10))
    z = (xx + 1) * (yy + 1)
    mesh = ax.pcolormesh(xx, yy, z, shading='auto', alpha=0.5)
    fig.colorbar(mesh, orientation='vertical')
    ax.set_title('After (default: pcolormesh.snap = True)')

IPython representations for Colormap objects
--------------------------------------------

The `matplotlib.colors.Colormap` object now has image representations for
IPython / Jupyter backends. Cells returning a colormap on the last line will
display an image of the colormap.

.. only:: html

    .. code-block::

        In[1]: cmap = plt.get_cmap('viridis').with_extremes(bad='r', under='g', over='b')

        In[2]: cmap
        Out[2]:

.. raw:: html

    <div style="vertical-align: middle;">
        <strong>viridis</strong>
    </div>
    <div class="cmap">
        <img alt="viridis colormap" title="viridis" style="border: 1px solid #555;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABACAYAAABsv8+/AAAAFnRFWHRUaXRsZQB2aXJpZGlzIGNvbG9ybWFwrE0mCwAAABx0RVh0RGVzY3JpcHRpb24AdmlyaWRpcyBjb2xvcm1hcAtjl3IAAABKdEVYdEF1dGhvcgBNYXRwbG90bGliIHYzLjQuMHJjMy5wb3N0OS5kZXYwK2czZTQzMThmMjgwLCBodHRwczovL21hdHBsb3RsaWIub3JndvlliwAAAEx0RVh0U29mdHdhcmUATWF0cGxvdGxpYiB2My40LjByYzMucG9zdDkuZGV2MCtnM2U0MzE4ZjI4MCwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZ9pNs1oAAAIiSURBVHic7dZBkpswFEXRL9halpD9LyX0IDIUAhnHldk7Z+KS9BFUD7pu+9V+b1VV1Vr9/V36z3ldfd1ec0vfH9bH+f3z43su987uv9x7/7s9nM+e3/bz+vK8Tvfv863u54b7xvnrerx/dm8Nzw33LA/nl+ffv+d5/en99+tv3/O/73+cq/dzn+9v3z1fT/PbV98xnh9zk/P9O2bPv99vk7l2WQ/P1Tg3/Fubrh/2+73LZX7r+zWsx/P7e2Zz+289nA9zS/vz4dx5fv3n8/N71rp/77i/vp6rh/XrvcP7ruv77zjuPX//MX++7zo/vG+2P3zH7HvXGv8u57/netmvvl/n9b7fhv2+7vv7uk8c80v/7XNtOd0DAAQRAAAQSAAAQCABAACBBAAABBIAABBIAABAIAEAAIEEAAAEEgAAEEgAAEAgAQAAgQQAAAQSAAAQSAAAQCABAACBBAAABBIAABBIAABAIAEAAIEEAAAEEgAAEEgAAEAgAQAAgQQAAAQSAAAQSAAAQCABAACBBAAABBIAABBIAABAIAEAAIEEAAAEEgAAEEgAAEAgAQAAgQQAAAQSAAAQSAAAQCABAACBBAAABBIAABBIAABAIAEAAIEEAAAEEgAAEEgAAEAgAQAAgQQAAAQSAAAQSAAAQCABAACBBAAABBIAABBIAABAIAEAAIEEAAAEEgAAEEgAAEAgAQAAgQQAAAQSAAAQSAAAQKAfbnCJh8XCmbQAAAAASUVORK5CYII=">
    </div>
    <div style="vertical-align: middle; max-width: 514px; display: flex; justify-content: space-between;">
        <div style="float: left;">
            <div title="#008000ff" style="display: inline-block; width: 1em; height: 1em; margin: 0; vertical-align: middle; border: 1px solid #555; background-color: #008000ff;"></div>
            under
        </div>
        <div style="margin: 0 auto; display: inline-block;">
            bad
            <div title="#ff0000ff" style="display: inline-block; width: 1em; height: 1em; margin: 0; vertical-align: middle; border: 1px solid #555; background-color: #ff0000ff;"></div>
        </div>
        <div style="float: right;">
            over
            <div title="#0000ffff" style="display: inline-block; width: 1em; height: 1em; margin: 0; vertical-align: middle; border: 1px solid #555; background-color: #0000ffff;"></div>
    </div>

``Colormap.set_extremes`` and ``Colormap.with_extremes``
--------------------------------------------------------

Because the `.Colormap.set_bad`, `.Colormap.set_under` and `.Colormap.set_over`
methods modify the colormap in place, the user must be careful to first make a
copy of the colormap if setting the extreme colors e.g. for a builtin colormap.

The new ``Colormap.with_extremes(bad=..., under=..., over=...)`` can be used to
first copy the colormap and set the extreme colors on that copy.

The new `.Colormap.set_extremes` method is provided for API symmetry with
`.Colormap.with_extremes`, but note that it suffers from the same issue as the
earlier individual setters.

Get under/over/bad colors of Colormap objects
---------------------------------------------

`matplotlib.colors.Colormap` now has methods `~.colors.Colormap.get_under`,
`~.colors.Colormap.get_over`, `~.colors.Colormap.get_bad` for the colors used
for out-of-range and masked values.

New ``cm.unregister_cmap`` function
-----------------------------------

`.cm.unregister_cmap` allows users to remove a colormap that they have
previously registered.

New ``CenteredNorm`` for symmetrical data around a center
---------------------------------------------------------

In cases where data is symmetrical around a center, for example, positive and
negative anomalies around a center zero, `~.matplotlib.colors.CenteredNorm` is
a new norm that automatically creates a symmetrical mapping around the center.
This norm is well suited to be combined with a divergent colormap which uses an
unsaturated color in its center.

.. plot::

    from matplotlib.colors import CenteredNorm

    np.random.seed(20201004)
    data = np.random.normal(size=(3, 4), loc=1)

    fig, ax = plt.subplots()
    pc = ax.pcolormesh(data, cmap=plt.get_cmap('RdGy'), norm=CenteredNorm())
    fig.colorbar(pc)
    ax.set_title('data centered around zero')

    # add text annotation
    for irow, data_row in enumerate(data):
        for icol, val in enumerate(data_row):
            ax.text(icol + 0.5, irow + 0.5, f'{val:.2f}', color='C0',
                    size=16, va='center', ha='center')
    plt.show()

If the center of symmetry is different from 0, it can be set with the *vcenter*
argument. To manually set the range of `~.matplotlib.colors.CenteredNorm`, use
the *halfrange* argument.

See :doc:`/tutorials/colors/colormapnorms` for an example and more details
about data normalization.

New ``FuncNorm`` for arbitrary normalizations
---------------------------------------------

The `.FuncNorm` allows for arbitrary normalization using functions for the
forward and inverse.

.. plot::

    from matplotlib.colors import FuncNorm

    def forward(x):
        return x**2
    def inverse(x):
        return np.sqrt(x)

    norm = FuncNorm((forward, inverse), vmin=0, vmax=3)

    np.random.seed(20201004)
    data = np.random.normal(size=(3, 4), loc=1)

    fig, ax = plt.subplots()
    pc = ax.pcolormesh(data, norm=norm)
    fig.colorbar(pc)
    ax.set_title('squared normalization')

    # add text annotation
    for irow, data_row in enumerate(data):
        for icol, val in enumerate(data_row):
            ax.text(icol + 0.5, irow + 0.5, f'{val:.2f}', color='C0',
                    size=16, va='center', ha='center')
    plt.show()

See :doc:`/tutorials/colors/colormapnorms` for an example and more details
about data normalization.

GridSpec-based colorbars can now be positioned above or to the left of the main axes
------------------------------------------------------------------------------------

... by passing ``location="top"`` or ``location="left"`` to the ``colorbar()``
call.


Titles, ticks, and labels
=========================

supxlabel and supylabel
-----------------------

It is possible to add x- and y-labels to a whole figure, analogous to
`.FigureBase.suptitle` using the new `.FigureBase.supxlabel` and
`.FigureBase.supylabel` methods.

.. plot::

    np.random.seed(19680801)
    fig, axs = plt.subplots(3, 2, figsize=(5, 5), constrained_layout=True,
                            sharex=True, sharey=True)

    for nn, ax in enumerate(axs.flat):
        ax.set_title(f'Channel {nn}')
        ax.plot(np.cumsum(np.random.randn(50)))

    fig.supxlabel('Time [s]')
    fig.supylabel('Data [V]')

Shared-axes ``subplots`` tick label visibility is now correct for top or left labels
------------------------------------------------------------------------------------

When calling ``subplots(..., sharex=True, sharey=True)``, Matplotlib
automatically hides x tick labels for Axes not in the first column and y tick
labels for Axes not in the last row. This behavior is incorrect if rcParams
specify that Axes should be labeled on the top (``rcParams["xtick.labeltop"] =
True``) or on the right (``rcParams["ytick.labelright"] = True``).

Cases such as the following are now handled correctly (adjusting visibility as
needed on the first row and last column of Axes):

.. plot::
    :include-source:

    plt.rcParams["xtick.labelbottom"] = False
    plt.rcParams["xtick.labeltop"] = True
    plt.rcParams["ytick.labelleft"] = False
    plt.rcParams["ytick.labelright"] = True

    fig, axs = plt.subplots(2, 2, sharex=True, sharey=True)

An iterable object with labels can be passed to `.Axes.plot`
------------------------------------------------------------

When plotting multiple datasets by passing 2D data as *y* value to
`~.Axes.plot`, labels for the datasets can be passed as a list, the length
matching the number of columns in *y*.

.. plot::
    :include-source:

    x = [1, 2, 3]

    y = [[1, 2],
         [2, 5],
         [4, 9]]

    plt.plot(x, y, label=['low', 'high'])
    plt.legend()


Fonts and Text
==============

Text transform can rotate text direction
----------------------------------------

The new `.Text` parameter ``transform_rotates_text`` now sets whether rotations
of the transform affect the text direction.

.. figure:: /gallery/text_labels_and_annotations/images/sphx_glr_text_rotation_relative_to_line_001.png
   :target: ../../gallery/text_labels_and_annotations/text_rotation_relative_to_line.html

   Example of the new *transform_rotates_text* parameter

``matplotlib.mathtext`` now supports *overset* and *underset* LaTeX symbols
---------------------------------------------------------------------------

`.mathtext` now supports *overset* and *underset*, called as
``\overset{annotation}{body}`` or ``\underset{annotation}{body}``, where
*annotation* is the text "above" or "below" the *body*.

.. plot::

    math_expr = r"$ x \overset{f}{\rightarrow} y \underset{f}{\leftarrow} z $"
    plt.text(0.4, 0.5, math_expr, usetex=False)

*math_fontfamily* parameter to change ``Text`` font family
----------------------------------------------------------

The new *math_fontfamily* parameter may be used to change the family of fonts
for each individual text element in a plot. If no parameter is set, the global
value :rc:`mathtext.fontset` will be used.

.. figure:: /gallery/text_labels_and_annotations/images/sphx_glr_mathtext_fontfamily_example_001.png
   :target: ../../gallery/text_labels_and_annotations/mathtext_fontfamily_example.html

``TextArea``/``AnchoredText`` support *horizontalalignment*
-----------------------------------------------------------

The horizontal alignment of text in a `.TextArea` or `.AnchoredText` may now be
specified, which is mostly effective for multiline text:

.. plot::

    from matplotlib.offsetbox import AnchoredText

    fig, ax = plt.subplots()

    text0 = AnchoredText("test\ntest long text", loc="center left",
                         pad=0.2, prop={"ha": "left"})
    ax.add_artist(text0)

    text1 = AnchoredText("test\ntest long text", loc="center",
                         pad=0.2, prop={"ha": "center"})
    ax.add_artist(text1)

    text2 = AnchoredText("test\ntest long text", loc="center right",
                         pad=0.2, prop={"ha": "right"})
    ax.add_artist(text2)

PDF supports URLs on ``Text`` artists
-------------------------------------

URLs on `.text.Text` artists (i.e., from `.Artist.set_url`) will now be saved
in PDF files.


rcParams improvements
=====================

New rcParams for dates: set converter and whether to use interval_multiples
---------------------------------------------------------------------------

The new :rc:`date.converter` allows toggling between
`matplotlib.dates.DateConverter` and `matplotlib.dates.ConciseDateConverter`
using the strings 'auto' and 'concise' respectively.

The new :rc:`date.interval_multiples` allows toggling between the dates locator
trying to pick ticks at set intervals (i.e., day 1 and 15 of the month), versus
evenly spaced ticks that start wherever the timeseries starts:

.. plot::
    :include-source:

    dates = np.arange('2001-01-10', '2001-05-23', dtype='datetime64[D]')
    y = np.sin(dates.astype(float) / 10)
    fig, axs = plt.subplots(nrows=2, constrained_layout=True)

    plt.rcParams['date.converter'] = 'concise'
    plt.rcParams['date.interval_multiples'] = True
    axs[0].plot(dates, y)

    plt.rcParams['date.converter'] = 'auto'
    plt.rcParams['date.interval_multiples'] = False
    axs[1].plot(dates, y)

Date formatters now respect *usetex* rcParam
--------------------------------------------

The `.AutoDateFormatter` and `.ConciseDateFormatter` now respect
:rc:`text.usetex`, and will thus use fonts consistent with TeX rendering of the
default (non-date) formatter. TeX rendering may also be enabled/disabled by
passing the *usetex* parameter when creating the formatter instance.

In the following plot, both the x-axis (dates) and y-axis (numbers) now use the
same (TeX) font:

.. plot::

    from datetime import datetime, timedelta
    from matplotlib.dates import ConciseDateFormatter

    plt.rc('text', usetex=True)

    t0 = datetime(1968, 8, 1)
    ts = [t0 + i * timedelta(days=1) for i in range(10)]

    fig, ax = plt.subplots()
    ax.plot(ts, range(10))
    ax.xaxis.set_major_formatter(ConciseDateFormatter(ax.xaxis.get_major_locator()))
    ax.set_xlabel('Date')
    ax.set_ylabel('Value')

Setting *image.cmap* to a ``Colormap``
--------------------------------------

It is now possible to set :rc:`image.cmap` to a `.Colormap` instance, such as a
colormap created with the new `~.Colormap.set_extremes` above. (This can only
be done from Python code, not from the :file:`matplotlibrc` file.)

Tick and tick label colors can be set independently using rcParams
------------------------------------------------------------------

Previously, :rc:`xtick.color` defined both the tick color and the label color.
The label color can now be set independently using :rc:`xtick.labelcolor`. It
defaults to ``'inherit'`` which will take the value from :rc:`xtick.color`. The
same holds for ``ytick.[label]color``. For instance, to set the ticks to light
grey and the tick labels to black, one can use the following code in a script::

    import matplotlib as mpl

    mpl.rcParams['xtick.labelcolor'] = 'lightgrey'
    mpl.rcParams['xtick.color'] = 'black'
    mpl.rcParams['ytick.labelcolor'] = 'lightgrey'
    mpl.rcParams['ytick.color'] = 'black'

Or by adding the following lines to the :ref:`matplotlibrc
<customizing-with-matplotlibrc-files>` file, or a Matplotlib style file:

.. code-block:: none

   xtick.labelcolor : lightgrey
   xtick.color      : black
   ytick.labelcolor : lightgrey
   ytick.color      : black


3D Axes improvements
====================

Errorbar method in 3D Axes
--------------------------

The errorbar function `.Axes.errorbar` is ported into the 3D Axes framework in
its entirety, supporting features such as custom styling for error lines and
cap marks, control over errorbar spacing, upper and lower limit marks.

.. figure:: /gallery/mplot3d/images/sphx_glr_errorbar3d_001.png
   :target: ../../gallery/mplot3d/errorbar3d.html

Stem plots in 3D Axes
---------------------

Stem plots are now supported on 3D Axes. Much like 2D stems,
`~.axes3d.Axes3D.stem3D` supports plotting the stems in various orientations:

.. plot::

    theta = np.linspace(0, 2*np.pi)
    x = np.cos(theta - np.pi/2)
    y = np.sin(theta - np.pi/2)
    z = theta
    directions = ['z', 'x', 'y']
    names = [r'$\theta$', r'$\cos\theta$', r'$\sin\theta$']

    fig, axs = plt.subplots(1, 3, figsize=(8, 4),
                            constrained_layout=True,
                            subplot_kw={'projection': '3d'})
    for ax, zdir, name in zip(axs, directions, names):
        ax.stem(x, y, z, orientation=zdir)
        ax.set_title(name)
    fig.suptitle(r'A parametric circle: $(x, y) = (\cos\theta, \sin\theta)$')

See also the :doc:`/gallery/mplot3d/stem3d_demo` demo.

3D Collection properties are now modifiable
-------------------------------------------

Previously, properties of a 3D Collection that were used for 3D effects (e.g.,
colors were modified to produce depth shading) could not be changed after it
was created.

Now it is possible to modify all properties of 3D Collections at any time.

Panning in 3D Axes
------------------

Click and drag with the middle mouse button to pan 3D Axes.


Interactive tool improvements
=============================

New ``RangeSlider`` widget
--------------------------

`.widgets.RangeSlider` allows for creating a slider that defines
a range rather than a single value.

.. plot::

    fig, ax = plt.subplots(2, 1, figsize=(5, 1))
    fig.subplots_adjust(left=0.2, right=0.8)

    from matplotlib.widgets import Slider, RangeSlider
    Slider(ax[0], 'Slider', 0, 1)
    RangeSlider(ax[1], 'RangeSlider', 0, 1)

Sliders can now snap to arbitrary values
----------------------------------------

The `~matplotlib.widgets.Slider` UI widget now accepts arrays for *valstep*.
This generalizes the previous behavior by allowing the slider to snap to
arbitrary values.

Pausing and Resuming Animations
-------------------------------

The `.animation.Animation.pause` and `.animation.Animation.resume` methods
allow you to pause and resume animations. These methods can be used as
callbacks for event listeners on UI elements so that your plots can have some
playback control UI.


Sphinx extensions
=================

``plot_directive`` *caption* option
-----------------------------------

Captions were previously supported when using the ``plot_directive`` directive
with an external source file by specifying content::

    .. plot:: path/to/plot.py

        This is the caption for the plot.

The ``:caption:`` option allows specifying the caption for both external::

    .. plot:: path/to/plot.py
        :caption: This is the caption for the plot.

and inline plots::

    .. plot::
        :caption: This is a caption for the plot.

        plt.plot([1, 2, 3])


Backend-specific improvements
=============================

Consecutive rasterized draws now merged
---------------------------------------

Elements of a vector output can be individually set to rasterized, using the
*rasterized* keyword argument, or `~.artist.Artist.set_rasterized()`. This can
be useful to reduce file sizes. For figures with multiple raster elements they
are now automatically merged into a smaller number of bitmaps where this will
not effect the visual output. For cases with many elements this can result in
significantly smaller file sizes.

To ensure this happens do not place vector elements between raster ones.

To inhibit this merging set ``Figure.suppressComposite`` to True.

Support raw/rgba frame format in ``FFMpegFileWriter``
-----------------------------------------------------

When using `.FFMpegFileWriter`, the  *frame_format* may now be set to ``"raw"``
or ``"rgba"``, which may be slightly faster than an image format, as no
encoding/decoding need take place between Matplotlib and FFmpeg.

nbAgg/WebAgg support middle-click and double-click
--------------------------------------------------

Double click events are now supported by the nbAgg and WebAgg backends.
Formerly, WebAgg would report middle-click events as right clicks, but now
reports the correct button type.

nbAgg support binary communication
----------------------------------

If the web browser and notebook support binary websockets, nbAgg will now use
them for slightly improved transfer of figure display.

Indexed color for PNG images in PDF files when possible
-------------------------------------------------------

When PNG images have 256 colors or fewer, they are converted to indexed color
before saving them in a PDF. This can result in a significant reduction in file
size in some cases. This is particularly true for raster data that uses a
colormap but no interpolation, such as Healpy mollview plots. Currently, this
is only done for RGB images.

Improved font subsettings in PDF/PS
-----------------------------------

Font subsetting in PDF and PostScript has been re-written from the embedded
``ttconv`` C code to Python. Some composite characters and outlines may have
changed slightly. This fixes ttc subsetting in PDF, and adds support for
subsetting of type 3 OTF fonts, resulting in smaller files (much smaller when
using CJK fonts), and avoids running into issues with type 42 embedding and
certain PDF readers such as Acrobat Reader.

Kerning added to strings in PDFs
--------------------------------

As with text produced in the Agg backend (see :ref:`the previous what's new
entry <whats-new-3-2-0-kerning>` for examples), PDFs now include kerning in
text strings.

Fully-fractional HiDPI in QtAgg
-------------------------------

Fully-fractional HiDPI (that is, HiDPI ratios that are not whole integers) was
added in Qt 5.14, and is now supported by the QtAgg backend when using this
version of Qt or newer.

wxAgg supports fullscreen toggle
--------------------------------

The wxAgg backend supports toggling fullscreen using the :kbd:`f` shortcut, or
the manager function `.FigureManagerBase.full_screen_toggle`.
.. _github-stats-3-1-2:

GitHub statistics for 3.1.2 (Nov 21, 2019)
==========================================

GitHub statistics for 2019/07/01 (tag: v3.1.1) - 2019/11/21

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 28 issues and merged 113 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/47?closed=1>`__

The following 23 authors contributed 192 commits.

* Alex Rudy
* Antony Lee
* Bingyao Liu
* Cong Ma
* David Stansby
* Elliott Sales de Andrade
* hannah
* Hanno Rein
* ImportanceOfBeingErnest
* joaonsg
* Jody Klymak
* Matthias Bussonnier
* MeeseeksMachine
* miquelastein
* Nelle Varoquaux
* Patrick Shriwise
* Paul Hoffman
* Paul Ivanov
* Ryan May
* Samesh
* Thomas A Caswell
* Tim Hoffmann
* Vincent L.M. Mazoyer

GitHub issues and pull requests:

Pull Requests (113):

* :ghpull:`15664`: Backport PR #15649 on branch v3.1.x (Fix searchindex.js loading when ajax fails (because e.g. CORS in embedded iframes))
* :ghpull:`15722`: Backport PR #15718 on branch v3.1.x (Update donation link)
* :ghpull:`15667`: Backport PR #15654 on branch v3.1.x (Fix some broken links.)
* :ghpull:`15658`: Backport PR #15647 on branch v3.1.x (Update some links)
* :ghpull:`15582`: Backport PR #15512 on branch v3.1.x
* :ghpull:`15512`: FIX: do not consider webagg and nbagg "interactive" for fallback
* :ghpull:`15558`: Backport PR #15553 on branch v3.1.x (DOC: add cache-buster query string to css path)
* :ghpull:`15550`: Backport PR #15528 on branch v3.1.x (Declutter home page)
* :ghpull:`15547`: Backport PR #15516 on branch v3.1.x (Add logo like font)
* :ghpull:`15511`: DOC: fix nav location
* :ghpull:`15508`: Backport PR #15489 on branch v3.1.x (DOC: adding main nav to site)
* :ghpull:`15494`: Backport PR #15486 on branch v3.1.x (Fixes an error in the documentation of Ellipse)
* :ghpull:`15486`: Fixes an error in the documentation of Ellipse
* :ghpull:`15473`: Backport PR #15464 on branch v3.1.x (Remove unused code (remainder from #15453))
* :ghpull:`15470`: Backport PR #15460 on branch v3.1.x (Fix incorrect value check in axes_grid.)
* :ghpull:`15464`: Remove unused code (remainder from #15453)
* :ghpull:`15455`: Backport PR #15453 on branch v3.1.x (Improve example for tick locators)
* :ghpull:`15453`: Improve example for tick locators
* :ghpull:`15443`: Backport PR #15439 on branch v3.1.x (DOC: mention discourse main page)
* :ghpull:`15424`: Backport PR #15422 on branch v3.1.x (FIX: typo in attribute lookup)
* :ghpull:`15322`: Backport PR #15297 on branch v3.1.x (Document How-to figure empty)
* :ghpull:`15298`: Backport PR #15296 on branch v3.1.x (Fix typo/bug from 18cecf7)
* :ghpull:`15296`: Fix typo/bug from 18cecf7
* :ghpull:`15278`: Backport PR #15271 on branch v3.1.x (Fix font weight validation)
* :ghpull:`15271`: Fix font weight validation
* :ghpull:`15218`: Backport PR #15217 on branch v3.1.x (Doc: Add ``plt.show()`` to horizontal bar chart example)
* :ghpull:`15207`: Backport PR #15206: FIX: be more forgiving about expecting internal s…
* :ghpull:`15198`: Backport PR #15197 on branch v3.1.x (Remove mention of now-removed basedir setup option.)
* :ghpull:`15197`: Remove mention of now-removed basedir setup option.
* :ghpull:`15189`: Backport PR #14979: FIX: Don't enable IPython integration if not ente…
* :ghpull:`15190`: Backport PR #14683: For non-html output, let sphinx pick the best format
* :ghpull:`15187`: Backport PR #15140 on branch v3.1.x
* :ghpull:`15185`: Backport PR #15168 on branch v3.1.x (MNT: explicitly cast ``np.bool_`` -> bool to prevent deprecation warning)
* :ghpull:`15168`: MNT: explicitly cast ``np.bool_`` -> bool to prevent deprecation warning
* :ghpull:`15183`: Backport PR #15181 on branch v3.1.x (FIX: proper call to zero_formats)
* :ghpull:`15181`: FIX: proper call to zero_formats
* :ghpull:`15172`: Backport PR #15166 on branch v3.1.x
* :ghpull:`15166`: FIX: indexed pandas bar
* :ghpull:`15153`: Backport PR #14456 on branch v3.1.x (PyQT5 Backend Partial Redraw Fix)
* :ghpull:`14456`: PyQT5 Backend Partial Redraw Fix
* :ghpull:`15140`: Fix ScalarFormatter formatting of masked values
* :ghpull:`15135`: Backport PR #15132 on branch v3.1.x (Update documenting guide on rcParams)
* :ghpull:`15128`: Backport PR #15115 on branch v3.1.x (Doc: highlight rcparams)
* :ghpull:`15125`: Backport PR #15110 on branch v3.1.x (Add inheritance diagram to mpl.ticker docs)
* :ghpull:`15116`: Backport PR #15114 on branch v3.1.x (DOC: update language around NF)
* :ghpull:`15058`: Backport PR #15055 on branch v3.1.x (Remove mention of now-removed feature in docstring.)
* :ghpull:`15055`: Remove mention of now-removed feature in docstring.
* :ghpull:`15047`: Backport PR #14919 on branch v3.1.x (FIX constrained_layout w/ hidden axes)
* :ghpull:`14919`: FIX constrained_layout w/ hidden axes
* :ghpull:`15022`: Backport PR #15020 on branch v3.1.x (Let connectionpatch be drawn on figure level)
* :ghpull:`15020`: Let connectionpatch be drawn on figure level
* :ghpull:`15017`: Backport PR #15007 on branch v3.1.x (FIX: support pandas 0.25)
* :ghpull:`14979`: FIX: Don't enable IPython integration if not entering REPL.
* :ghpull:`14987`: Merge pull request #14915 from AWhetter/fix_14585
* :ghpull:`14985`: Backport PR #14982 on branch v3.1.x (DOC: correct table docstring)
* :ghpull:`14982`: DOC: correct table docstring
* :ghpull:`14975`: Backport PR #14974 on branch v3.1.x (grammar)
* :ghpull:`14972`: Backport PR #14971 on branch v3.1.x (typo)
* :ghpull:`14965`: Fix typo in documentation of table
* :ghpull:`14951`: Backport PR #14934 on branch v3.1.x (DOC: update axes_demo to directly manipulate fig, ax)
* :ghpull:`14938`: Backport PR #14905 on branch v3.1.x (Gracefully handle encoding problems when querying external executables.)
* :ghpull:`14935`: Backport PR #14933 on branch v3.1.x (DOC: typo x2 costum -> custom)
* :ghpull:`14936`: Backport PR #14932 on branch v3.1.x (DOC: Update invert_example to directly manipulate axis.)
* :ghpull:`14905`: Gracefully handle encoding problems when querying external executables.
* :ghpull:`14933`: DOC: typo x2 costum -> custom
* :ghpull:`14910`: Backport PR #14901 on branch v3.1.x (Fix GH14900: numpy 1.17.0 breaks test_colors.)
* :ghpull:`14864`: Backport PR #14830 on branch v3.1.x (FIX: restore special casing of shift-enter in notebook)
* :ghpull:`14861`: Don't use pandas 0.25.0 for testing
* :ghpull:`14855`: Backport PR #14839 on branch v3.1.x
* :ghpull:`14839`: Improve docstring of Axes.hexbin
* :ghpull:`14837`: Backport PR #14757 on branch v3.1.x (Remove incorrect color/cmap docstring line in contour.py)
* :ghpull:`14836`: Backport PR #14764 on branch v3.1.x (DOC: Fixes the links in the see-also section of Axes.get_tightbbox)
* :ghpull:`14818`: Backport PR #14510 on branch v3.1.x (Improve example for fill_between)
* :ghpull:`14819`: Backport PR #14704 on branch v3.1.x (Small patches on Docs (Tutorials and FAQ))
* :ghpull:`14820`: Backport PR #14765 on branch v3.1.x (DOC: Fix documentation location for patheffects)
* :ghpull:`14821`: Backport PR #14741 on branch v3.1.x (DOC: Update description of properties of Line2D in 'plot' documentation.)
* :ghpull:`14822`: Backport PR #14714 on branch v3.1.x (Point towards how to save output of non-interactive backends)
* :ghpull:`14823`: Backport PR #14784 on branch v3.1.x (Tiny docs/comments cleanups.)
* :ghpull:`14824`: Backport PR #14798 on branch v3.1.x (Cleanup dates.py module docstrings.)
* :ghpull:`14825`: Backport PR #14802 on branch v3.1.x (Fix some broken refs in the docs.)
* :ghpull:`14826`: Backport PR #14806 on branch v3.1.x (Remove unnecessary uses of transFigure from examples.)
* :ghpull:`14827`: Backport PR #14525 on branch v3.1.x (improve documentation of OffsetBox)
* :ghpull:`14828`: Backport PR #14548: Link to matplotlibrc of used version
* :ghpull:`14817`: Backport PR #14697 on branch v3.1.x (Fix NavigationToolbar2QT height)
* :ghpull:`14692`: Backport PR #14688 on branch v3.1.x (Revise the misleading title for subplots demo)
* :ghpull:`14816`: Backport PR #14677 on branch v3.1.x (Don't misclip axis when calling set_ticks on inverted axes.)
* :ghpull:`14815`: Backport PR #14658 on branch v3.1.x (Fix numpydoc formatting)
* :ghpull:`14813`: Backport PR #14488 on branch v3.1.x (Make sure EventCollection doesn't modify input in-place)
* :ghpull:`14806`: Remove unnecessary uses of transFigure from examples.
* :ghpull:`14802`: Fix some broken refs in the docs.
* :ghpull:`14798`: Cleanup dates.py module docstrings.
* :ghpull:`14784`: Tiny docs/comments cleanups.
* :ghpull:`14764`: DOC: Fixes the links in the see-also section of Axes.get_tightbbox
* :ghpull:`14777`: Backport PR #14775 on branch v3.1.x (DOC: Fix CircleCI builds)
* :ghpull:`14769`: Backport PR #14759 on branch v3.1.x (DOC: note about having to rebuild after switching to local freetype)
* :ghpull:`14714`: Point towards how to save output of non-interactive backends
* :ghpull:`14741`: DOC: Update description of properties of Line2D in 'plot' documentation.
* :ghpull:`14771`: Backport PR #14760 on branch v3.1.x (DOC: minor CoC wording change)
* :ghpull:`14765`: DOC: Fix documentation location for patheffects
* :ghpull:`14735`: Backport PR #14734 on branch v3.1.x (Add geoplot to third-party example libraries page.)
* :ghpull:`14711`: Backport PR #14706 on branch v3.1.x (Mention gr backend in docs.)
* :ghpull:`14704`: Small patches on Docs (Tutorials and FAQ)
* :ghpull:`14700`: Backport PR #14698 on branch v3.1.x (Make property name be consistent with rc parameter.)
* :ghpull:`14510`: Improve example for fill_between
* :ghpull:`14683`: For non-html output, let sphinx pick the best format.
* :ghpull:`14697`: Fix NavigationToolbar2QT height
* :ghpull:`14677`: Don't misclip axis when calling set_ticks on inverted axes.
* :ghpull:`14658`: Fix numpydoc formatting
* :ghpull:`14488`: Make sure EventCollection doesn't modify input in-place
* :ghpull:`14570`: Remove print statements
* :ghpull:`14525`: improve documentation of OffsetBox
* :ghpull:`14548`: Link to matplotlibrc of used version
* :ghpull:`14395`: MAINT: work around non-zero exit status of "pdftops -v" command.

Issues (28):

* :ghissue:`15295`: Can't install matplotlib with pip for Python 3.8b4
* :ghissue:`15714`: Publish 3.8 wheels
* :ghissue:`15706`: Python 3.8 - Installation error: TypeError: stat: path should be string, bytes, os.PathLike or integer, not NoneType
* :ghissue:`15690`: Should xlim support single-entry arrays?
* :ghissue:`15608`: imshow rendering changed from 3.1.0 to 3.1.1
* :ghissue:`14903`: 'MPLBACKEND=webagg' is overwritten by agg when $DISPLAY is not set on Linux
* :ghissue:`15351`: Bar width expands between subsequent bars
* :ghissue:`15240`: Can't specify integer ``font.weight`` in custom style sheet any more
* :ghissue:`15255`: ``imshow`` in ``v3.1.1``: y-axis chopped-off
* :ghissue:`15186`: 3D quiver plot fails when pivot = "middle"
* :ghissue:`14160`: PySide2/PyQt5: Graphics issues in QScrollArea for OSX
* :ghissue:`15178`: mdates.ConciseDateFormatter() doesn't work with zero_formats parameter
* :ghissue:`15179`: Patch 3.1.1 broke imshow() heatmaps: Tiles cut off on y-axis
* :ghissue:`15162`: axes.bar fails when x is int-indexed pandas.Series
* :ghissue:`15103`: Colorbar for imshow messes interactive cursor with masked data
* :ghissue:`8744`: ConnectionPatch hidden by plots
* :ghissue:`14950`: plt.ioff() not supressing figure generation
* :ghissue:`14959`: Typo in Docs
* :ghissue:`14902`: from matplotlib import animation UnicodeDecodeError
* :ghissue:`14897`: New yticks behavior in 3.1.1 vs 3.1.0
* :ghissue:`14811`: How to save hexbin binned data in a text file.
* :ghissue:`14551`: Non functional API links break docs builds downstream
* :ghissue:`14720`: Line2D properties should state units
* :ghissue:`10891`: Toolbar icons too large in PyQt5 (Qt5Agg backend)
* :ghissue:`14675`: Heatmaps are being truncated when using with seaborn
* :ghissue:`14487`: eventplot sorts np.array positions, but not list positions
* :ghissue:`14547`: Changing mplstyle: axes.titlelocation causes Bad Key error
* :ghissue:`10410`: eventplot alters data in some cases
.. _github-stats-3-4-2:

GitHub statistics for 3.4.2 (May 08, 2021)
==========================================

GitHub statistics for 2021/03/31 (tag: v3.4.1) - 2021/05/08

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 21 issues and merged 97 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/63?closed=1>`__

The following 13 authors contributed 138 commits.

* AkM-2018
* Antony Lee
* David Stansby
* Elliott Sales de Andrade
* hannah
* Ian Thomas
* Jann Paul Mattern
* Jody Klymak
* pwohlhart
* richardsheridan
* Thomas A Caswell
* Tim Hoffmann
* Xianxiang Li

GitHub issues and pull requests:

Pull Requests (97):

* :ghpull:`20184`: Backport PR #20147 on branch v3.4.x (DOC: add example of labelling axes)
* :ghpull:`20181`: Backport PR #20171 on branch v3.4.x (Remove unsupported arguments from tricontourf documentation)
* :ghpull:`20180`: Backport PR #19876 on branch v3.4.x (FIX: re-order unit conversion and mask array coercion)
* :ghpull:`20171`: Remove unsupported arguments from tricontourf documentation
* :ghpull:`19876`: FIX: re-order unit conversion and mask array coercion
* :ghpull:`20178`: Backport PR #20150 on branch v3.4.x
* :ghpull:`20172`: Backport PR #20161 on branch v3.4.x (Fix resetting grid visibility)
* :ghpull:`20161`: Fix resetting grid visibility
* :ghpull:`20167`: Backport PR #20146 on branch v3.4.x (Don't clip clip paths to Figure bbox.)
* :ghpull:`20166`: Backport PR #19978 on branch v3.4.x (fixed bug in CenteredNorm, issue #19972)
* :ghpull:`20146`: Don't clip clip paths to Figure bbox.
* :ghpull:`19978`: fixed bug in CenteredNorm, issue #19972
* :ghpull:`20160`: Backport PR #20148 on branch v3.4.x (FIX: MouseButton representation in boilerplate generated signatures)
* :ghpull:`20148`: FIX: MouseButton representation in boilerplate generated signatures
* :ghpull:`20152`: Backport PR #20145 on branch v3.4.x (Fix broken link to ggplot in docs)
* :ghpull:`20139`: Backport PR #20135 on branch v3.4.x (Add tricontour/tricontourf arguments(corner_mask, vmin vmax, antialiased, nchunk, hatches) documentation)
* :ghpull:`20135`: Add tricontour/tricontourf arguments(corner_mask, vmin vmax, antialiased, nchunk, hatches) documentation
* :ghpull:`20136`: Backport PR #19959 on branch v3.4.x (Bugfix Tk start_event_loop)
* :ghpull:`19959`: Bugfix Tk start_event_loop
* :ghpull:`20128`: Backport PR #20123 on branch v3.4.x (Ensure that Matplotlib is importable even if there's no HOME.)
* :ghpull:`20123`: Ensure that Matplotlib is importable even if there's no HOME.
* :ghpull:`20009`: Fix removal of shared polar axes.
* :ghpull:`20104`: Backport PR #19686 on branch v3.4.x (Declare sphinxext.redirect_from parallel_read_safe)
* :ghpull:`19686`: Declare sphinxext.redirect_from parallel_read_safe
* :ghpull:`20098`: Backport PR #20096 on branch v3.4.x (Ignore errors for sip with no setapi.)
* :ghpull:`20096`: Ignore errors for sip with no setapi.
* :ghpull:`20087`: Backport PR #20083 on branch v3.4.x (Revert "Temporarily switch intersphinx to latest pytest.")
* :ghpull:`20085`: Backport PR #20082 on branch v3.4.x (Fix bar_label for bars with nan values)
* :ghpull:`20082`: Fix bar_label for bars with nan values
* :ghpull:`20076`: Backport PR #20062 on branch v3.4.x ([DOC] Add top-level .. module:: definition for matplotlib)
* :ghpull:`20043`: Backport PR #20041 on branch v3.4.x (Clarify docs for stackplot.)
* :ghpull:`20041`: Clarify docs for stackplot.
* :ghpull:`20039`: Backport PR #20037 on branch v3.4.x (Don't generate wheels unusable on PyPy7.3.{0,1}.)
* :ghpull:`20037`: Don't generate wheels unusable on PyPy7.3.{0,1}.
* :ghpull:`20033`: Backport PR #20031 on branch v3.4.x (Cleanup widget examples)
* :ghpull:`20031`: Cleanup widget examples
* :ghpull:`20022`: Backport PR #19949 on branch v3.4.x (FIX: subfigure indexing error)
* :ghpull:`19949`: FIX: subfigure indexing error
* :ghpull:`20018`: Backport PR #20017 on branch v3.4.x (FIX typos in imshow_extent.py)
* :ghpull:`20017`: FIX typos in imshow_extent.py
* :ghpull:`20015`: Backport PR #19962 on branch v3.4.x (Dev install troubleshooting)
* :ghpull:`19962`: Dev install troubleshooting
* :ghpull:`20002`: Backport PR #19995 on branch v3.4.x (Fix valinit argument to RangeSlider)
* :ghpull:`20004`: Backport PR #19999 on branch v3.4.x (DOC: add note about axes order to docstring)
* :ghpull:`19998`: Backport PR #19964 on branch v3.4.x (FIX: add subplot_mosaic axes in the order the user gave them to us)
* :ghpull:`19999`: DOC: add note about axes order to docstring
* :ghpull:`19997`: Backport PR #19992 on branch v3.4.x (Minor fixes to polar locator docstrings.)
* :ghpull:`19995`: Fix valinit argument to RangeSlider
* :ghpull:`19964`: FIX: add subplot_mosaic axes in the order the user gave them to us
* :ghpull:`19993`: Backport PR #19983 on branch v3.4.x (Fix handling of "d" glyph in backend_ps.)
* :ghpull:`19992`: Minor fixes to polar locator docstrings.
* :ghpull:`19991`: Backport PR #19987 on branch v3.4.x (Fix set_thetalim((min, max)).)
* :ghpull:`19976`: Backport PR #19970 on branch v3.4.x (Initialize members of PathClipper and check for m_has_init)
* :ghpull:`19983`: Fix handling of "d" glyph in backend_ps.
* :ghpull:`19987`: Fix set_thetalim((min, max)).
* :ghpull:`19970`: Initialize members of PathClipper and check for m_has_init
* :ghpull:`19973`: Backport PR #19971 on branch v3.4.x (Fix missing closing bracket in docs)
* :ghpull:`19971`: Fix missing closing bracket in docs
* :ghpull:`19966`: Backport PR #19963 on branch v3.4.x (test_StrCategoryLocator using parameterized plotter)
* :ghpull:`19965`: Backport PR #19961 on branch v3.4.x (FIX: subfigure tightbbox)
* :ghpull:`19963`: test_StrCategoryLocator using parameterized plotter
* :ghpull:`19961`: FIX: subfigure tightbbox
* :ghpull:`19953`: Backport PR #19919 on branch v3.4.x (Copy errorbar style normalization to 3D)
* :ghpull:`19919`: Copy errorbar style normalization to 3D
* :ghpull:`19950`: Backport PR #19948 on branch v3.4.x (Allow numpy arrays to be used as elinewidth)
* :ghpull:`19948`: Allow numpy arrays to be used as elinewidth
* :ghpull:`19944`: Backport PR #19939 on branch v3.4.x (add highlight-text to the third party packages list)
* :ghpull:`19921`: Backport PR #19913 on branch v3.4.x (Minor docstring improvement for set_aspect())
* :ghpull:`19920`: Backport PR #19903 on branch v3.4.x (Fix textbox cursor color, set its linewidth.)
* :ghpull:`19913`: Minor docstring improvement for set_aspect()
* :ghpull:`19903`: Fix textbox cursor color, set its linewidth.
* :ghpull:`19917`: Backport PR #19911 on branch v3.4.x (Shorten "how-to draw order")
* :ghpull:`19916`: Backport PR #19888 on branch v3.4.x (Fix errorbar drawstyle)
* :ghpull:`19911`: Shorten "how-to draw order"
* :ghpull:`19888`: Fix errorbar drawstyle
* :ghpull:`19910`: Backport PR #19895 on branch v3.4.x (Added PyPI info to third party page)
* :ghpull:`19895`: Added PyPI info to third party page
* :ghpull:`19896`: Backport PR #19893 on branch v3.4.x (Remove Howto: Plot numpy.datetime64 values)
* :ghpull:`19893`: Remove Howto: Plot numpy.datetime64 values
* :ghpull:`19886`: Backport PR #19881 on branch v3.4.x (Remove two sections from Plotting FAQ)
* :ghpull:`19877`: Backport PR #19863 on branch v3.4.x (Cleanup docstrings related to interactive mode)
* :ghpull:`19881`: Remove two sections from Plotting FAQ
* :ghpull:`19885`: Backport PR #19883 on branch v3.4.x (Small cleanups to FAQ.)
* :ghpull:`19883`: Small cleanups to FAQ.
* :ghpull:`19878`: Backport PR #19867 on branch v3.4.x (Remove "Use show()" from how-to )
* :ghpull:`19875`: Backport PR #19868 on branch v3.4.x (Remove "Install from source" from Installing FAQ)
* :ghpull:`19867`: Remove "Use show()" from how-to
* :ghpull:`19863`: Cleanup docstrings related to interactive mode
* :ghpull:`19868`: Remove "Install from source" from Installing FAQ
* :ghpull:`19874`: Backport PR #19847 on branch v3.4.x (Reformat references (part 2))
* :ghpull:`19847`: Reformat references (part 2)
* :ghpull:`19865`: Backport PR #19860 on branch v3.4.x (Move "howto interpreting box plots" to boxplot docstring)
* :ghpull:`19860`: Move "howto interpreting box plots" to boxplot docstring
* :ghpull:`19862`: Backport PR #19861 on branch v3.4.x (Remove FAQ Installing - Linux notes)
* :ghpull:`19861`: Remove FAQ Installing - Linux notes
* :ghpull:`18060`: Correctly handle 'none' facecolors in do_3d_projection
* :ghpull:`19846`: Backport PR #19788 on branch v3.4.x (Reformat references)

Issues (21):

* :ghissue:`19871`: Matplotlib >= v3.3.3 breaks with pandas.plotting.register_matplotlib_converters(), ax.pcolormesh(), and datetime objects
* :ghissue:`20149`: KeyError: 'gridOn' in axis.py when axis.tick_params() is used with reset = True
* :ghissue:`20127`: Zooming on a contour plot with clipping results in bad clipping
* :ghissue:`19972`: CenteredNorm with halfrange raises exception when passed to imshow
* :ghissue:`19940`: Tkagg event loop throws error on window close
* :ghissue:`20122`: Run in a system service / without configuration
* :ghissue:`19989`: Removal of y-shared polar axes causes crash at draw time
* :ghissue:`19988`: Removal of x-shared polar axes causes crash
* :ghissue:`20040`: AttributeError: module 'sip' has no attribute 'setapi'
* :ghissue:`20058`: bar_label fails with nan data values
* :ghissue:`20036`: Minor changes about stackplot documentation
* :ghissue:`20014`: undefined symbol: PyPyUnicode_ReadChar
* :ghissue:`19947`: Figure.subfigures dont show/update correctly
* :ghissue:`19960`: Failed to init RangeSlider with valinit attribute
* :ghissue:`19736`: subplot_mosaic axes are not added in consistent order
* :ghissue:`19979`: Blank EPS figures if plot contains 'd'
* :ghissue:`19938`: unuseful deprecation warning figbox
* :ghissue:`19958`: subfigures missing bbox_inches attribute in inline backend
* :ghissue:`19936`: Errorbars elinewidth raise error when numpy array
* :ghissue:`19879`: Using "drawstyle" raises AttributeError in errorbar, when yerr is specified.
* :ghissue:`19454`: I cannot import matplotlib.pyplot as plt
.. _whats-new-2-2-0:

What's new in Matplotlib 2.2 (Mar 06, 2018)
===========================================

Constrained Layout Manager
--------------------------

.. warning::

    Constrained Layout is **experimental**.  The
    behaviour and API are subject to change, or the whole functionality
    may be removed without a deprecation period.


A new method to automatically decide spacing between subplots and their
organizing ``GridSpec`` instances has been added.  It is meant to
replace the venerable ``tight_layout`` method.  It is invoked via
a new ``constrained_layout=True`` kwarg to
`~.figure.Figure` or `~.Figure.subplots`.

There are new `.rcParams` for this package, and spacing can be
more finely tuned with the new `~.set_constrained_layout_pads`.

Features include:

  - Automatic spacing for subplots with a fixed-size padding in inches around
    subplots and all their decorators, and space between as a fraction
    of subplot size between subplots.
  - Spacing for `~.Figure.suptitle`, and colorbars that are attached to
    more than one axes.
  - Nested `~.GridSpec` layouts using `~.GridSpecFromSubplotSpec`.

  For more details and capabilities please see the new tutorial:
  :doc:`/tutorials/intermediate/constrainedlayout_guide`

Note the new API to access this:

New ``plt.figure`` and ``plt.subplots`` kwarg: ``constrained_layout``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

:meth:`~matplotlib.pyplot.figure` and :meth:`~matplotlib.pyplot.subplots`
can now be called with ``constrained_layout=True`` kwarg to enable
constrained_layout.

New ``ax.set_position`` behaviour
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`.Axes.set_position` now makes the specified axis no
longer responsive to ``constrained_layout``, consistent with the idea that the
user wants to place an axis manually.

Internally, this means that old ``ax.set_position`` calls *inside* the library
are changed to private ``ax._set_position`` calls so that
``constrained_layout`` will still work with these axes.

New ``figure`` kwarg for ``GridSpec``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In order to facilitate ``constrained_layout``, ``GridSpec`` now accepts a
``figure`` keyword.  This is backwards compatible, in that not supplying this
will simply cause ``constrained_layout`` to not operate on the subplots
orgainzed by this ``GridSpec`` instance.  Routines that use ``GridSpec`` (e.g.
``fig.subplots``) have been modified to pass the figure to ``GridSpec``.


xlabels and ylabels can now be automatically aligned
----------------------------------------------------

Subplot axes ``ylabels`` can be misaligned horizontally if the tick labels
are very different widths.  The same can happen to ``xlabels`` if the
ticklabels are rotated on one subplot (for instance).  The new methods
on the `.Figure` class: `.Figure.align_xlabels` and `.Figure.align_ylabels`
will now align these labels horizontally or vertically.  If the user only
wants to align some axes, a list of axes can be passed.  If no list is
passed, the algorithm looks at all the labels on the figure.

Only labels that have the same subplot locations are aligned.  i.e. the
ylabels are aligned only if the subplots are in the same column of the
subplot layout.

Alignment is persistent and automatic after these are called.

A convenience wrapper `.Figure.align_labels` calls both functions at once.

.. plot::

    import matplotlib.gridspec as gridspec

    fig = plt.figure(figsize=(5, 3), tight_layout=True)
    gs = gridspec.GridSpec(2, 2)

    ax = fig.add_subplot(gs[0,:])
    ax.plot(np.arange(0, 1e6, 1000))
    ax.set_ylabel('Test')
    for i in range(2):
        ax = fig.add_subplot(gs[1, i])
        ax.set_ylabel('Booooo')
        ax.set_xlabel('Hello')
        if i == 0:
            for tick in ax.get_xticklabels():
                tick.set_rotation(45)
    fig.align_labels()


Axes legends now included in tight_bbox
---------------------------------------

Legends created via ``ax.legend`` can sometimes overspill the limits of
the axis.  Tools like ``fig.tight_layout()`` and
``fig.savefig(bbox_inches='tight')`` would clip these legends.  A change
was made to include them in the ``tight`` calculations.


Cividis colormap
----------------

A new dark blue/yellow colormap named 'cividis' was added. Like
viridis, cividis is perceptually uniform and colorblind
friendly. However, cividis also goes a step further: not only is it
usable by colorblind users, it should actually look effectively
identical to colorblind and non-colorblind users. For more details
see `Nuñez J, Anderton C, and Renslow R: "Optimizing colormaps with consideration
for color vision deficiency to enable accurate interpretation of scientific data"
<https://doi.org/10.1371/journal.pone.0199239>`_.

.. plot::

    import matplotlib.pyplot as plt
    import numpy as np

    fig, ax = plt.subplots()
    pcm = ax.pcolormesh(np.random.rand(32,32), cmap='cividis')
    fig.colorbar(pcm)


New style colorblind-friendly color cycle
-----------------------------------------

A new style defining a color cycle has been added,
tableau-colorblind10, to provide another option for
colorblind-friendly plots.  A demonstration of this new
style can be found in the reference_ of style sheets. To
load this color cycle in place of the default one::

  import matplotlib.pyplot as plt
  plt.style.use('tableau-colorblind10')

.. _reference: https://matplotlib.org/gallery/style_sheets/style_sheets_reference.html


Support for numpy.datetime64
----------------------------

Matplotlib has supported `datetime.datetime` dates for a long time in
`matplotlib.dates`.  We
now support `numpy.datetime64` dates as well.  Anywhere that
`datetime.datetime` could be used, `numpy.datetime64` can be used.  eg::

  time = np.arange('2005-02-01', '2005-02-02', dtype='datetime64[h]')
  plt.plot(time)



Writing animations with Pillow
------------------------------
It is now possible to use Pillow as an animation writer.  Supported output
formats are currently gif (Pillow>=3.4) and webp (Pillow>=5.0).  Use e.g. as ::

   from __future__ import division

   from matplotlib import pyplot as plt
   from matplotlib.animation import FuncAnimation, PillowWriter

   fig, ax = plt.subplots()
   line, = plt.plot([0, 1])

   def animate(i):
      line.set_ydata([0, i / 20])
      return [line]

   anim = FuncAnimation(fig, animate, 20, blit=True)
   anim.save("movie.gif", writer=PillowWriter(fps=24))
   plt.show()


Slider UI widget can snap to discrete values
--------------------------------------------

The slider UI widget can take the optional argument *valstep*.  Doing so
forces the slider to take on only discrete values, starting from *valmin* and
counting up to *valmax* with steps of size *valstep*.

If *closedmax==True*, then the slider will snap to *valmax* as well.



``capstyle`` and ``joinstyle`` attributes added to `.Collection`
----------------------------------------------------------------

The `.Collection` class now has customizable ``capstyle`` and ``joinstyle``
attributes. This allows the user for example to set the ``capstyle`` of
errorbars.


*pad* kwarg added to ax.set_title
---------------------------------

The method `.Axes.set_title` now has a *pad* kwarg, that specifies the
distance from the top of an axes to where the title is drawn.  The units
of *pad* is points, and the default is the value of the (already-existing)
:rc:`axes.titlepad`.


Comparison of 2 colors in Matplotlib
------------------------------------

As the colors in Matplotlib can be specified with a wide variety of ways, the
`matplotlib.colors.same_color` method has been added which checks if
two `~matplotlib.colors` are the same.


Autoscaling a polar plot snaps to the origin
--------------------------------------------

Setting the limits automatically in a polar plot now snaps the radial limit
to zero if the automatic limit is nearby. This means plotting from zero doesn't
automatically scale to include small negative values on the radial axis.

The limits can still be set manually in the usual way using `~.Axes.set_ylim`.


PathLike support
----------------

On Python 3.6+, `~matplotlib.pyplot.savefig`, `~matplotlib.pyplot.imsave`,
`~matplotlib.pyplot.imread`, and animation writers now accept `os.PathLike`\s
as input.


`.Axes.tick_params` can set gridline properties
-----------------------------------------------

`.Tick` objects hold gridlines as well as the tick mark and its label.
`.Axis.set_tick_params`, `.Axes.tick_params` and `.pyplot.tick_params`
now have keyword arguments 'grid_color', 'grid_alpha', 'grid_linewidth',
and 'grid_linestyle' for overriding the defaults in `.rcParams`:
'grid.color', etc.


`.Axes.imshow` clips RGB values to the valid range
--------------------------------------------------

When `.Axes.imshow` is passed an RGB or RGBA value with out-of-range
values, it now logs a warning and clips them to the valid range.
The old behaviour, wrapping back in to the range, often hid outliers
and made interpreting RGB images unreliable.


Properties in :file:`matplotlibrc` to place xaxis and yaxis tick labels
-----------------------------------------------------------------------

Introducing four new boolean properties in :file:`matplotlibrc` for default
positions of xaxis and yaxis tick labels, namely,
:rc:`xtick.labeltop`, :rc:`xtick.labelbottom`, :rc:`ytick.labelright` and
:rc:`ytick.labelleft`. These can also be changed in rcParams.


PGI bindings for gtk3
---------------------

The GTK3 backends can now use PGI_ instead of PyGObject_.  PGI is a fairly
incomplete binding for GObject, thus its use is not recommended; its main
benefit is its availability on Travis (thus allowing CI testing for the gtk3agg
and gtk3cairo backends).

The binding selection rules are as follows:
- if ``gi`` has already been imported, use it; else
- if ``pgi`` has already been imported, use it; else
- if ``gi`` can be imported, use it; else
- if ``pgi`` can be imported, use it; else
- error out.

Thus, to force usage of PGI when both bindings are installed, import it first.

.. _PGI: https://pgi.readthedocs.io/en/latest/
.. _PyGObject: https://pygobject.readthedocs.io/en/latest/



Cairo rendering for Qt, WX, and Tk canvases
-------------------------------------------

The new ``Qt4Cairo``, ``Qt5Cairo``, ``WXCairo``, and ``TkCairo``
backends allow Qt, Wx, and Tk canvases to use Cairo rendering instead of
Agg.


Added support for QT in new ToolManager
---------------------------------------

Now it is possible to use the ToolManager with Qt5
For example

  import matplotlib

  matplotlib.use('QT5AGG')
  matplotlib.rcParams['toolbar'] = 'toolmanager'
  import matplotlib.pyplot as plt

  plt.plot([1,2,3])
  plt.show()


Treat the new Tool classes experimental for now, the API will likely change and perhaps the rcParam as well

The main example :doc:`/gallery/user_interfaces/toolmanager_sgskip` shows more
details, just adjust the header to use QT instead of GTK3



TkAgg backend reworked to support PyPy
--------------------------------------

PyPy_ can now plot using the TkAgg backend, supported on PyPy 5.9
and greater (both PyPy for python 2.7 and PyPy for python 3.5).

.. _PyPy: https://www.pypy.org/



Python logging library used for debug output
--------------------------------------------

Matplotlib has in the past (sporadically) used an internal
verbose-output reporter.  This version converts those calls to using the
standard python `logging` library.

Support for the old `.rcParams` ``verbose.level`` and ``verbose.fileo`` is
dropped.

The command-line options ``--verbose-helpful`` and ``--verbose-debug`` are
still accepted, but deprecated.  They are now equivalent to setting
``logging.INFO`` and ``logging.DEBUG``.

The logger's root name is ``matplotlib`` and can be accessed from programs
as::

  import logging
  mlog = logging.getLogger('matplotlib')

Instructions for basic usage are in :ref:`troubleshooting-faq` and for
developers in :ref:`contributing`.

.. _logging: https://docs.python.org/3/library/logging.html

Improved `repr` for `.Transform`\s
----------------------------------

`.Transform`\s now indent their `repr`\s in a more legible manner:

.. code-block:: ipython

   In [1]: l, = plt.plot([]); l.get_transform()
   Out[1]:
   CompositeGenericTransform(
      TransformWrapper(
         BlendedAffine2D(
               IdentityTransform(),
               IdentityTransform())),
      CompositeGenericTransform(
         BboxTransformFrom(
               TransformedBbox(
                  Bbox(x0=-0.05500000000000001, y0=-0.05500000000000001, x1=0.05500000000000001, y1=0.05500000000000001),
                  TransformWrapper(
                     BlendedAffine2D(
                           IdentityTransform(),
                           IdentityTransform())))),
         BboxTransformTo(
               TransformedBbox(
                  Bbox(x0=0.125, y0=0.10999999999999999, x1=0.9, y1=0.88),
                  BboxTransformTo(
                     TransformedBbox(
                           Bbox(x0=0.0, y0=0.0, x1=6.4, y1=4.8),
                           Affine2D(
                              [[ 100.    0.    0.]
                              [   0.  100.    0.]
                              [   0.    0.    1.]])))))))
.. _github-stats-3-0-1:

GitHub statistics for 3.0.1 (Oct 25, 2018)
==========================================

GitHub statistics for 2018/09/18 (tag: v3.0.0) - 2018/10/25

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 31 issues and merged 127 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/37?closed=1>`__

The following 23 authors contributed 227 commits.

* Abhinuv Nitin Pitale
* Antony Lee
* Anubhav Shrimal
* Ben Root
* Colin
* Daniele Nicolodi
* David Haberthür
* David Stansby
* Elan Ernest
* Elliott Sales de Andrade
* Eric Firing
* ImportanceOfBeingErnest
* Jody Klymak
* Kai Muehlbauer
* Kevin Rose
* Marcel Martin
* MeeseeksMachine
* Nelle Varoquaux
* Nikita Kniazev
* Ryan May
* teresy
* Thomas A Caswell
* Tim Hoffmann

GitHub issues and pull requests:

Pull Requests (127):

* :ghpull:`12595`: Backport PR #12569 on branch v3.0.x (Don't confuse uintptr_t and Py_ssize_t.)
* :ghpull:`12623`: Backport PR #12285 on branch v3.0.x (FIX: Don't apply tight_layout if axes collapse)
* :ghpull:`12285`: FIX: Don't apply tight_layout if axes collapse
* :ghpull:`12622`: FIX: flake8errors 3.0.x mergeup
* :ghpull:`12619`: Backport PR #12548 on branch v3.0.x (undef _XOPEN_SOURCE breaks the build in AIX)
* :ghpull:`12621`: Backport PR #12607 on branch v3.0.x (STY: fix whitespace and escaping)
* :ghpull:`12616`: Backport PR #12615 on branch v3.0.x (Fix travis OSX build)
* :ghpull:`12594`: Backport PR #12572 on branch v3.0.x (Fix singleton hist labels)
* :ghpull:`12615`: Fix travis OSX build
* :ghpull:`12607`: STY: fix whitespace and escaping
* :ghpull:`12605`: Backport PR #12603 on branch v3.0.x (FIX: don't import macosx to check if eventloop running)
* :ghpull:`12604`: FIX: over-ride 'copy' on RcParams
* :ghpull:`12603`: FIX: don't import macosx to check if eventloop running
* :ghpull:`12602`: Backport PR #12599 on branch v3.0.x (Fix formatting of docstring)
* :ghpull:`12599`: Fix formatting of docstring
* :ghpull:`12593`: Backport PR #12581 on branch v3.0.x (Fix hist() error message)
* :ghpull:`12569`: Don't confuse uintptr_t and Py_ssize_t.
* :ghpull:`12572`: Fix singleton hist labels
* :ghpull:`12581`: Fix hist() error message
* :ghpull:`12575`: Backport PR #12573 on branch v3.0.x (BUG: mplot3d: Don't crash if azim or elev are non-integral)
* :ghpull:`12558`: Backport PR #12555 on branch v3.0.x (Clarify horizontalalignment and verticalalignment in suptitle)
* :ghpull:`12544`: Backport PR #12159 on branch v3.0.x (FIX: colorbar re-check norm before draw for autolabels)
* :ghpull:`12159`: FIX: colorbar re-check norm before draw for autolabels
* :ghpull:`12540`: Backport PR #12501 on branch v3.0.x (Rectified plot error)
* :ghpull:`12531`: Backport PR #12431 on branch v3.0.x (FIX: allow single-string color for scatter)
* :ghpull:`12431`: FIX: allow single-string color for scatter
* :ghpull:`12529`: Backport PR #12216 on branch v3.0.x (Doc: Fix search for sphinx >=1.8)
* :ghpull:`12527`: Backport PR #12461 on branch v3.0.x (FIX: make add_lines work with new colorbar)
* :ghpull:`12461`: FIX: make add_lines work with new colorbar
* :ghpull:`12522`: Backport PR #12241 on branch v3.0.x (FIX: make unused spines invisible)
* :ghpull:`12241`: FIX: make unused spines invisible
* :ghpull:`12519`: Backport PR #12504 on branch v3.0.x (DOC: clarify min supported version wording)
* :ghpull:`12517`: Backport PR #12507 on branch v3.0.x (FIX: make minor ticks formatted with science formatter as well)
* :ghpull:`12507`: FIX: make minor ticks formatted with science formatter as well
* :ghpull:`12512`: Backport PR #12363 on branch v3.0.x
* :ghpull:`12511`: Backport PR #12366 on branch v2.2.x (TST: Update test images for new Ghostscript.)
* :ghpull:`12509`: Backport PR #12478 on branch v3.0.x (MAINT: numpy deprecates asscalar in 1.16)
* :ghpull:`12363`: FIX: errors in get_position changes
* :ghpull:`12497`: Backport PR #12495 on branch v3.0.x (Fix duplicate condition in pathpatch3d example)
* :ghpull:`12490`: Backport PR #12489 on branch v3.0.x (Fix typo in documentation of ylim)
* :ghpull:`12485`: Fix font_manager.OSXInstalledFonts()
* :ghpull:`12484`: Backport PR #12448 on branch v3.0.x (Don't error if some font directories are not readable.)
* :ghpull:`12421`: Backport PR #12360 on branch v3.0.x (Replace axes_grid by axes_grid1 in test)
* :ghpull:`12448`: Don't error if some font directories are not readable.
* :ghpull:`12471`: Backport PR #12468 on branch v3.0.x (Fix ``set_ylim`` unit handling)
* :ghpull:`12475`: Backport PR #12469 on branch v3.0.x (Clarify documentation of offsetbox.AnchoredText's prop kw argument)
* :ghpull:`12468`: Fix ``set_ylim`` unit handling
* :ghpull:`12464`: Backport PR #12457 on branch v3.0.x (Fix tutorial typos.)
* :ghpull:`12432`: Backport PR #12277: FIX: datetime64 now recognized if in a list
* :ghpull:`12277`: FIX: datetime64 now recognized if in a list
* :ghpull:`12426`: Backport PR #12293 on branch v3.0.x (Make pyplot more tolerant wrt. 3rd-party subclasses.)
* :ghpull:`12293`: Make pyplot more tolerant wrt. 3rd-party subclasses.
* :ghpull:`12360`: Replace axes_grid by axes_grid1 in test
* :ghpull:`12412`: Backport PR #12394 on branch v3.0.x (DOC: fix CL tutorial to give same output from saved file and example)
* :ghpull:`12410`: Backport PR #12408 on branch v3.0.x (Don't crash on invalid registry font entries on Windows.)
* :ghpull:`12411`: Backport PR #12366 on branch v3.0.0-doc (TST: Update test images for new Ghostscript.)
* :ghpull:`12408`: Don't crash on invalid registry font entries on Windows.
* :ghpull:`12403`: Backport PR #12149 on branch v3.0.x (Mathtext tutorial fixes)
* :ghpull:`12400`: Backport PR #12257 on branch v3.0.x (Document standard backends in matplotlib.use())
* :ghpull:`12257`: Document standard backends in matplotlib.use()
* :ghpull:`12399`: Backport PR #12383 on branch v3.0.x (Revert change of parameter name in annotate())
* :ghpull:`12383`: Revert change of parameter name in annotate()
* :ghpull:`12390`: Backport PR #12385 on branch v3.0.x (CI: Added Appveyor Python 3.7 build)
* :ghpull:`12385`: CI: Added Appveyor Python 3.7 build
* :ghpull:`12381`: Backport PR #12353 on branch v3.0.x (Doc: clarify default parameters in scatter docs)
* :ghpull:`12378`: Backport PR #12366 on branch v3.0.x (TST: Update test images for new Ghostscript.)
* :ghpull:`12375`: Backport PR #11648 on branch v3.0.x (FIX: colorbar placement in constrained layout)
* :ghpull:`11648`: FIX: colorbar placement in constrained layout
* :ghpull:`12350`: Backport PR #12214 on branch v3.0.x
* :ghpull:`12348`: Backport PR #12347 on branch v3.0.x (DOC: add_child_axes to axes_api.rst)
* :ghpull:`12214`: Improve docstring of Annotation
* :ghpull:`12344`: Backport PR #12321 on branch v3.0.x (maint: setupext.py for freetype had a Catch case for missing ft2build.h)
* :ghpull:`12342`: Backport PR #12334 on branch v3.0.x (Improve selection of inset indicator connectors.)
* :ghpull:`12334`: Improve selection of inset indicator connectors.
* :ghpull:`12339`: Backport PR #12297 on branch v3.0.x (Remove some pytest parameterising warnings)
* :ghpull:`12338`: Backport PR #12268 on branch v3.0.x (FIX: remove unnecessary ``self`` in ``super_``-calls, fixes #12265)
* :ghpull:`12336`: Backport PR #12212 on branch v3.0.x (font_manager: Fixed problems with Path(...).suffix)
* :ghpull:`12268`: FIX: remove unnecessary ``self`` in ``super_``-calls, fixes #12265
* :ghpull:`12212`: font_manager: Fixed problems with Path(...).suffix
* :ghpull:`12331`: Backport PR #12322 on branch v3.0.x (Fix the docs build.)
* :ghpull:`12327`: Backport PR #12326 on branch v3.0.x (fixed minor spelling error in docstring)
* :ghpull:`12320`: Backport PR #12319 on branch v3.0.x (Fix Travis 3.6 builds)
* :ghpull:`12315`: Backport PR #12313 on branch v3.0.x (BUG: Fix typo in view_limits() for MultipleLocator)
* :ghpull:`12313`: BUG: Fix typo in view_limits() for MultipleLocator
* :ghpull:`12305`: Backport PR #12274 on branch v3.0.x (MNT: put back ``_hold`` as read-only attribute on AxesBase)
* :ghpull:`12274`: MNT: put back ``_hold`` as read-only attribute on AxesBase
* :ghpull:`12303`: Backport PR #12163 on branch v3.0.x (TST: Defer loading Qt framework until test is run.)
* :ghpull:`12299`: Backport PR #12294 on branch v3.0.x (Fix expand_dims warnings in triinterpolate)
* :ghpull:`12163`: TST: Defer loading Qt framework until test is run.
* :ghpull:`12301`: Ghostscript 9.0 requirement revisited
* :ghpull:`12294`: Fix expand_dims warnings in triinterpolate
* :ghpull:`12297`: Remove some pytest parameterising warnings
* :ghpull:`12295`: Backport PR #12261 on branch v3.0.x (FIX:  parasite axis2 demo)
* :ghpull:`12289`: Backport PR #12278 on branch v3.0.x (Document inheriting docstrings)
* :ghpull:`12287`: Backport PR #12262 on branch v3.0.x (Simplify empty-rasterized pdf test.)
* :ghpull:`12280`: Backport PR #12269 on branch v3.0.x (Add some param docs to BlockingInput methods)
* :ghpull:`12266`: Backport PR #12254 on branch v3.0.x (Improve docstrings of Animations)
* :ghpull:`12262`: Simplify empty-rasterized pdf test.
* :ghpull:`12254`: Improve docstrings of Animations
* :ghpull:`12263`: Backport PR #12258 on branch v3.0.x (Fix CSS for module-level data)
* :ghpull:`12250`: Backport PR #12209 on branch v3.0.x (Doc: Sort named colors example by palette)
* :ghpull:`12248`: Backport PR #12237 on branch v3.0.x (Use (float, float) as parameter type for 2D positions in docstrings)
* :ghpull:`12240`: Backport PR #12236 on branch v3.0.x
* :ghpull:`12237`: Use (float, float) as parameter type for 2D positions in docstrings
* :ghpull:`12242`: Backport PR #12238 on branch v3.0.x (Typo in docs)
* :ghpull:`12236`: Make boilerplate-generated pyplot.py flake8 compliant
* :ghpull:`12234`: Backport PR #12228 on branch v3.0.x (Fix trivial typo in docs.)
* :ghpull:`12230`: Backport PR #12213 on branch v3.0.x (Change win32InstalledFonts return value)
* :ghpull:`12213`: Change win32InstalledFonts return value
* :ghpull:`12223`: Backport PR #11688 on branch v3.0.x (Don't draw axis (spines, ticks, labels) twice when using parasite axes.)
* :ghpull:`12224`: Backport PR #12207 on branch v3.0.x (FIX: dont' check for interactive framework if none required)
* :ghpull:`12207`: FIX: don't check for interactive framework if none required
* :ghpull:`11688`: Don't draw axis (spines, ticks, labels) twice when using parasite axes.
* :ghpull:`12205`: Backport PR #12186 on branch v3.0.x (DOC: fix API note about get_tightbbox)
* :ghpull:`12204`: Backport PR #12203 on branch v3.0.x (Document legend best slowness)
* :ghpull:`12203`: Document legend's slowness when "best" location is used
* :ghpull:`12194`: Backport PR #12164 on branch v3.0.x (Fix Annotation.contains.)
* :ghpull:`12193`: Backport PR #12177 on branch v3.0.x (FIX: remove cwd from mac font path search)
* :ghpull:`12164`: Fix Annotation.contains.
* :ghpull:`12177`: FIX: remove cwd from mac font path search
* :ghpull:`12185`: Backport PR #12183 on branch v3.0.x (Doc: Don't use Sphinx 1.8)
* :ghpull:`12183`: Doc: Don't use Sphinx 1.8
* :ghpull:`12172`: Backport PR #12157 on branch v3.0.x (Properly declare the interactive framework for the qt4foo backends.)
* :ghpull:`12167`: Backport PR #12166 on branch v3.0.x (Document preference order for backend auto selection)
* :ghpull:`12166`: Document preference order for backend auto selection
* :ghpull:`12157`: Properly declare the interactive framework for the qt4foo backends.
* :ghpull:`12153`: Backport PR #12148 on branch v3.0.x (BLD: pragmatic fix for building basic_unit example on py37)

Issues (31):

* :ghissue:`12626`: AttributeError: module 'matplotlib' has no attribute 'artist'
* :ghissue:`12613`: transiently linked interactivity of unshared pair of axes generated with make_axes_locatable
* :ghissue:`12601`: Can't import matplotlib
* :ghissue:`12580`: Incorrect hist error message with bad color size
* :ghissue:`12567`: Calling pyplot.show() with TkAgg backend on x86 machine raises OverflowError.
* :ghissue:`12556`: Matplotlib 3.0.0 import hangs in clean environment
* :ghissue:`12550`: colorbar resizes in animation
* :ghissue:`12155`: Incorrect placement of Colorbar ticks using LogNorm
* :ghissue:`12438`: Scatter doesn't accept a list of strings as color spec.
* :ghissue:`12429`: scatter() does not accept gray strings anymore
* :ghissue:`12458`: add_lines misses lines for matplotlib.colorbar.ColorbarBase
* :ghissue:`12239`: 3d axes are collapsed by tight_layout
* :ghissue:`12488`: inconsistent colorbar tick labels for LogNorm
* :ghissue:`12515`: pyplot.step broken in 3.0.0?
* :ghissue:`12355`: Error for bbox_inches='tight' in savefig with make_axes_locatable
* :ghissue:`12505`: ImageGrid in 3.0
* :ghissue:`12291`: Importing pyplot crashes on macOS due to missing fontlist-v300.json and then Permission denied: '/opt/local/share/fonts'
* :ghissue:`12288`: New function signatures in pyplot break Cartopy
* :ghissue:`12445`: Error on colorbar
* :ghissue:`12446`: Polar Contour - float() argument must be a string or a number, not 'AxesParasiteParasiteAuxTrans'
* :ghissue:`12271`: error with errorbar with datetime64
* :ghissue:`12405`: plt.stackplot() does not work with 3.0.0
* :ghissue:`12406`: Bug with font finding, and here is my fix as well.
* :ghissue:`12325`: Annotation change from "s" to "text" in 3.0- documentation
* :ghissue:`11641`: constrained_layout and colorbar for a subset of axes
* :ghissue:`12352`: TeX rendering broken on master with windows
* :ghissue:`12354`: Too many levels of symbolic links
* :ghissue:`12265`: ParasiteAxesAuxTrans  pcolor/pcolormesh and contour/contourf broken
* :ghissue:`12173`: Cannot import pyplot
* :ghissue:`12120`: Default legend behavior (loc='best') very slow for large amounts of data.
* :ghissue:`12176`: import pyplot on MacOS without font cache will search entire subtree of current dir
.. _github-stats-3-3-0:

GitHub statistics for 3.3.0 (Jul 16, 2020)
==========================================

GitHub statistics for 2020/03/03 (tag: v3.2.0) - 2020/07/16

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 198 issues and merged 1066 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/48?closed=1>`__

The following 144 authors contributed 3829 commits.

* Adam
* Adam Paszke
* Adam Ruszkowski
* Alex Henrie
* Alexander Rudy
* Amy Roberts
* andrzejnovak
* Antony Lee
* Ardie Orden
* Asaf Maman
* Avni Sharma
* Ben Root
* Bruno Beltran
* Bruno Pagani
* chaoyi1
* Cho Yin Yong
* Chris
* Christoph Pohl
* Cimarron Mittelsteadt
* Clemens Brunner
* Dan Hickstein
* Dan Stromberg
* David Chudzicki
* David Stansby
* Dennis Tismenko
* Dominik Schmidt
* donchanee
* Dora Fraeman Caswell
* Edoardo Pizzigoni
* Elan Ernest
* Elliott Sales de Andrade
* Emlyn Price
* Eric Firing
* Eric Larson
* Eric Relson
* Eric Wieser
* Fabien Maussion
* Frank Sauerburger
* Gal Avineri
* Generated images
* Georg Raiser
* Gina
* Greg Lucas
* hannah
* Hanno Rein
* Harshal Prakash Patankar
* henryhu123
* Hugo van Kemenade
* Ian Hincks
* ImportanceOfBeingErnest
* Inception95
* Ingo Fründ
* Jake Lee
* Javad
* jbhopkins
* Jeroonk
* jess
* Jess Tiu
* jfbu
* Jiahao Chen
* Jody Klymak
* Jon Haitz Legarreta Gorroño
* Jose Manuel Martí
* Joshua Taillon
* Juanjo Bazán
* Julian Mehne
* Kacper Kowalik (Xarthisius)
* Kevin Mader
* kolibril13
* kopytjuk
* ksafran
* Kyle Sunden
* Larry Bradley
* Laurent Thomas
* Lawrence D'Anna
* Leo Singer
* lepuchi
* Luke Davis
* Manan Kevadiya
* Manuel Nuno Melo
* Maoz Gelbart
* Marat K
* Marco Gorelli
* Matt Newville
* Matthias Bussonnier
* Max
* Max Chen
* Max Humber
* Maximilian Nöthe
* Michaël Defferrard
* Michele Mastropietro
* mikhailov
* MuhammadFarooq1234
* Mykola Dvornik
* Nelle Varoquaux
* Nelson Darkwah Oppong
* Nick Pope
* Nico Schlömer
* Nikita Kniazev
* Olivier Castany
* Omar Chehab
* Paul Gierz
* Paul Hobson
* Paul Ivanov
* Pavel Fedin
* Peter Würtz
* Philippe Pinard
* pibion
* Po
* Pradeep Reddy Raamana
* Ram Rachum
* ranjanm
* Raphael
* Ricardo Mendes
* Riccardo Di Maio
* Ryan May
* Sadie Louise Bartholomew
* Sairam Pillai
* Samesh Lakhotia
* SamSchott
* Sandro Tosi
* Siddhesh Poyarekar
* Sidharth Bansal
* Snowhite
* SojiroFukuda
* Spencer McCoubrey
* Stefan Mitic
* Stephane Raynaud
* Steven G. Johnson
* Steven Munn
* Ted Drain
* Terence Honles
* Thomas A Caswell
* Thomas Robitaille
* Till Stensitzki
* Tim Hoffmann
* Todd Jennings
* Tyrone Xiong
* Umar Javed
* Venkada
* vishalBindal
* Vitaly Buka
* Yue Zhihan
* Zulko

GitHub issues and pull requests:

Pull Requests (1066):

* :ghpull:`17943`: Backport PR #17942 on branch v3.3.x (Increase heading level for 3.3 What's New)
* :ghpull:`17942`: Increase heading level for 3.3 What's New
* :ghpull:`17941`: Backport PR #17938 on branch v3.3.x (Don't allow 1D lists as subplot_moasic layout.)
* :ghpull:`17940`: Backport PR #17885 on branch v3.3.x (BF: ignore CLOSEPOLY after NaN in PathNanRemover)
* :ghpull:`17937`: Backport PR #17877 on branch v3.3.x (Fix drawing zoom rubberband on GTK backends.)
* :ghpull:`17938`: Don't allow 1D lists as subplot_moasic layout.
* :ghpull:`17885`: BF: ignore CLOSEPOLY after NaN in PathNanRemover
* :ghpull:`17877`: Fix drawing zoom rubberband on GTK backends.
* :ghpull:`17933`: Backport PR #17858 on branch v3.3.x (Refresh what's new page for 3.3.0)
* :ghpull:`17858`: Refresh what's new page for 3.3.0
* :ghpull:`17919`: Backport PR #17913 on branch v3.3.x (Revert using SVG inheritance diagrams)
* :ghpull:`17913`: Revert using SVG inheritance diagrams
* :ghpull:`17911`: Backport PR #17907 on branch v3.3.x (Fix release() method name in macosx backend)
* :ghpull:`17907`: Fix release() method name in macosx backend
* :ghpull:`17903`: Backport PR #17859 on branch v3.3.x (API: resolve unset vmin / vmax in all ScalarMapple based methods)
* :ghpull:`17859`: API: resolve unset vmin / vmax in all ScalarMapple based methods
* :ghpull:`17898`: Backport PR #17882 on branch v3.3.x (Fix FFMpegBase.isAvailable with detached terminals.)
* :ghpull:`17882`: Fix FFMpegBase.isAvailable with detached terminals.
* :ghpull:`17881`: Backport PR #17871 on branch v3.3.x (Mention single char colors shading in more places)
* :ghpull:`17871`: Mention single char colors shading in more places
* :ghpull:`17872`: Backport PR #17800 on branch v3.3.x (Increase tolerance for alternate architectures)
* :ghpull:`17800`: Increase tolerance for alternate architectures
* :ghpull:`17861`: Revert "Fix linewidths and colors for scatter() with unfilled markers"
* :ghpull:`17864`: Backport PR #17862 on branch v3.3.x (CI: Install, or upgrade, Python 3 on homebrew.)
* :ghpull:`17846`: Backport PR #17844 on branch v3.3.x (Explain why Qt4 backends are deprecated)
* :ghpull:`17844`: Explain why Qt4 backends are deprecated
* :ghpull:`17833`: Backport PR #17831 on branch v3.3.x (BLD: default to system freetype on AIX)
* :ghpull:`17831`: BLD: default to system freetype on AIX
* :ghpull:`17823`: Backport PR #17821 on branch v3.3.x (FIX: Keep lists of lists of one scalar each 2D in _reshape_2D)
* :ghpull:`17821`: FIX: Keep lists of lists of one scalar each 2D in _reshape_2D
* :ghpull:`17811`: Backport PR #17797 on branch v3.3.x (Fix running contour's test_internal_cpp_api directly.)
* :ghpull:`17812`: Backport PR #17772 on branch v3.3.x (Partially fix rubberbanding in GTK3.)
* :ghpull:`17815`: Backport PR #17814 on branch v3.3.x (Don't duplicate deprecated parameter addendum.)
* :ghpull:`17814`: Don't duplicate deprecated parameter addendum.
* :ghpull:`17772`: Partially fix rubberbanding in GTK3.
* :ghpull:`17797`: Fix running contour's test_internal_cpp_api directly.
* :ghpull:`17809`: Backport PR #17801 on branch v3.3.x (BUG: Fix implementation of _is_closed_polygon)
* :ghpull:`17801`: BUG: Fix implementation of _is_closed_polygon
* :ghpull:`17796`: Backport PR #17764 on branch v3.3.x (FIX: be more careful about not importing pyplot early)
* :ghpull:`17795`: Backport PR #17781 on branch v3.3.x (Fix limit setting after plotting empty data)
* :ghpull:`17764`: FIX: be more careful about not importing pyplot early
* :ghpull:`17781`: Fix limit setting after plotting empty data
* :ghpull:`17787`: Backport PR #17784 on branch v3.3.x (Allow passing empty list of ticks to FixedLocator)
* :ghpull:`17784`: Allow passing empty list of ticks to FixedLocator
* :ghpull:`17766`: Backport PR #17752 on branch v3.3.x (Numpydoc-ify various functions)
* :ghpull:`17752`: Numpydoc-ify various functions
* :ghpull:`17762`: Backport PR #17742 on branch v3.3.x (Update tricontour[f] docs)
* :ghpull:`17742`: Update tricontour[f] docs
* :ghpull:`17760`: Backport PR #17756 on branch v3.3.x (Fix tk tooltips for dark themes.)
* :ghpull:`17756`: Fix tk tooltips for dark themes.
* :ghpull:`17747`: Backport PR #17731 on branch v3.3.x ("Fix" tight_layout for template backend.)
* :ghpull:`17731`: "Fix" tight_layout for template backend.
* :ghpull:`17739`: Backport PR #17734 on branch v3.3.x (Oversample thumbnail x2)
* :ghpull:`17734`: Oversample thumbnail x2
* :ghpull:`17738`: Backport PR #17729 on branch v3.3.x (Fix type doc for scroll event "step" attribute.)
* :ghpull:`17729`: Fix type doc for scroll event "step" attribute.
* :ghpull:`17724`: Backport PR #17720 on branch v3.3.x (Fix check for manager = None.)
* :ghpull:`17720`: Fix check for manager = None.
* :ghpull:`17719`: Backport PR #17693 on branch v3.3.x (DOC: Add svg2pdf converter for generating PDF docs.)
* :ghpull:`17693`: DOC: Add svg2pdf converter for generating PDF docs.
* :ghpull:`17718`: Backport PR #17715 on branch v3.3.x (Clarify gridspec error message for non-integer inputs.)
* :ghpull:`17717`: Backport PR #17705 on branch v3.3.x (Keep cachedRenderer as None when pickling Figure.)
* :ghpull:`17715`: Clarify gridspec error message for non-integer inputs.
* :ghpull:`17705`: Keep cachedRenderer as None when pickling Figure.
* :ghpull:`17701`: Backport PR #17687 on branch v3.3.x (Mention keyboard modifiers in toolbar tooltip texts.)
* :ghpull:`17687`: Mention keyboard modifiers in toolbar tooltip texts.
* :ghpull:`17698`: Backport PR #17686 on branch v3.3.x (Fix tooltip for wx toolbar.)
* :ghpull:`17686`: Fix tooltip for wx toolbar.
* :ghpull:`17692`: Backport PR #17680 on branch v3.3.x (MNT: migrate away from deprecated c-api)
* :ghpull:`17680`: MNT: migrate away from deprecated c-api
* :ghpull:`17688`: Backport PR #17676 on branch v3.3.x (FIX: correctly process the tick label size)
* :ghpull:`17676`: FIX: correctly process the tick label size
* :ghpull:`17677`: Backport PR #17664 on branch v3.3.x (Clarify docs of AutoDateLocator.intervald)
* :ghpull:`17678`: Backport PR #17665 on branch v3.3.x (Document that some single char colors are shaded)
* :ghpull:`17679`: Backport PR #17675 on branch v3.3.x (DOC: specify that the LaTeX installation needs to include cm-super)
* :ghpull:`17675`: DOC: specify that the LaTeX installation needs to include cm-super
* :ghpull:`17665`: Document that some single char colors are shaded
* :ghpull:`17664`: Clarify docs of AutoDateLocator.intervald
* :ghpull:`17672`: Backport PR #17668 on branch v3.3.x (Don't pass "wrong" ``indent=False`` in SVG generation.)
* :ghpull:`17671`: Backport PR #17667 on branch v3.3.x (Don't linewrap css in svg header.)
* :ghpull:`17668`: Don't pass "wrong" ``indent=False`` in SVG generation.
* :ghpull:`17667`: Don't linewrap css in svg header.
* :ghpull:`17666`: Prepare for 3.3.0 rc1
* :ghpull:`17663`: DOC: update the gh stats for v3.3.0
* :ghpull:`17656`: Fix default colouring of Shadows
* :ghpull:`17657`: V3.2.x mergeup
* :ghpull:`17623`: Add a flag for disabling LTO.
* :ghpull:`17569`: Delay \usepackage{textcomp} until after the custom tex preamble.
* :ghpull:`17416`: Reorder NavigationToolbar2 methods.
* :ghpull:`17604`: DOC: Clarify offset notation and scientific notation
* :ghpull:`17617`: Rewrite pdf test to use check_figures_equal.
* :ghpull:`17654`: Small fixes to recent What's New
* :ghpull:`17649`: MNT: make _setattr_cm more forgiving
* :ghpull:`17644`: Doc 33 whats new consolidation
* :ghpull:`17647`: Fix example in docstring of cbook._unfold.
* :ghpull:`10187`: DOC: add a blitting tutorial
* :ghpull:`17471`: Removed idiomatic constructs from interactive figures docs
* :ghpull:`17639`: DOC: Update colormap deprecation warning to use Python's copy function.
* :ghpull:`17223`: Warn on invalid savefig keyword arguments
* :ghpull:`17625`: Give _DummyAxis instances a __name__
* :ghpull:`17636`: Fix image vlim clipping again
* :ghpull:`17635`: Fix autoscaling with tiny sticky values.
* :ghpull:`17620`: MNT: make _setattr_cm more conservative
* :ghpull:`17621`: FIX: restore ability to pass a tuple to axes_class in axes_grid
* :ghpull:`16603`: axes collage
* :ghpull:`17622`: Fix typo in description of savefig.bbox.
* :ghpull:`17619`: Skip test_tmpconfigdir_warning when running as root.
* :ghpull:`17610`: MNT: allow 0 sized figures
* :ghpull:`17163`: Fix clipping of markers in PDF backend.
* :ghpull:`17556`: DOC: Update contributor listing in credits
* :ghpull:`17221`: Add metadata saving support to SVG.
* :ghpull:`17603`: Replace image comparison in test_axes_grid1 by geometry checks.
* :ghpull:`17428`: Doc start 33 merges
* :ghpull:`17607`: Convert adjust_bbox to use ExitStack.
* :ghpull:`17575`: DOCS: update collections.py docstrings to current doc conventions
* :ghpull:`15826`: Fix bar3d bug with matching color string and array x lengths
* :ghpull:`14507`: Simplify handling of Qt modifier keys.
* :ghpull:`17589`: Fix doc build with Sphinx < 3.
* :ghpull:`17590`: Clarify docs of set_powerlimits()
* :ghpull:`17597`: MNT: cleanup minor style issues
* :ghpull:`17183`: Update configuration of CircleCI builds
* :ghpull:`17592`: Improve docstrings of ScalarFormatter
* :ghpull:`17456`: Improve stackplot example
* :ghpull:`17545`: Improve docs of markers
* :ghpull:`17233`: Improve PDF metadata support in PGF
* :ghpull:`17086`: Remove jQuery & jQuery UI
* :ghpull:`17580`: Fix same_color() for 'none' color
* :ghpull:`17582`: Fix link in doc
* :ghpull:`17491`: DOC: Only link to overall Zenodo DOI.
* :ghpull:`17515`: FIX: add set_box_aspect, improve tight bounding box for Axes3D + fix bbox_inches support with fixed box_aspect
* :ghpull:`17581`: DOC: Remove duplicate Returns in subplot2grid.
* :ghpull:`17550`: Update subplot2grid doc to use Figure.add_gridspec, not GridSpec.
* :ghpull:`17544`: markerfacecolor should not override fillstyle='none' in plot()
* :ghpull:`15672`: Remove mention that tkagg was derived from PIL.
* :ghpull:`17573`: Examples: fix formatting issue in 'Errorbar limit selection'
* :ghpull:`17543`: Fix linewidths and colors for scatter() with unfilled markers
* :ghpull:`17448`: Add example for drawing an error band around a curve
* :ghpull:`17572`: Examples: clarity for 'set and get' example page
* :ghpull:`17276`: Allow numpy arrays in markevery
* :ghpull:`17536`: Consolidate some tests and fix a couple typos
* :ghpull:`17558`: Simplify plot_date()
* :ghpull:`17534`: Fmaussion extended boundary norm
* :ghpull:`17540`: Fix help window on GTK.
* :ghpull:`17535`: Update docs on subplot2grid / SubplotBase
* :ghpull:`17510`: Fix exception handling in FT2Font init.
* :ghpull:`16953`: Changed 'colors' paramater in PyPlot vlines/hlines and Axes vlines/hlines to default to configured rcParams 'lines.color' option
* :ghpull:`17459`: Use light icons on dark themes for wx and gtk, too.
* :ghpull:`17539`: Use symbolic icons for buttons in GTK toolbar.
* :ghpull:`15435`: Reuse png metadata handling of imsave() in FigureCanvasAgg.print_png().
* :ghpull:`5034`: New "extend" keyword to colors.BoundaryNorm
* :ghpull:`17532`: DOC: correct legend.title_fontsize docstring
* :ghpull:`17531`: Remove unneeded check/comment re: multiprocessing in setup.py.
* :ghpull:`17522`: Privatize ttconv module.
* :ghpull:`17517`: Make sure _parent is in sync with Qt parent in NavigationToolbar2QT
* :ghpull:`17525`: DOC/API: set __qualname__ when using class factory
* :ghpull:`17511`: Fix offset legend tightbbox
* :ghpull:`16203`: Port fontconfig's font weight detection to font_manager.
* :ghpull:`17485`: Support marking a single artist as not-usetex.
* :ghpull:`17338`: Support url on more Artists in svg
* :ghpull:`17519`: Prefer demo'ing rcParams rather than rc in examples.
* :ghpull:`13457`: Give ``AnnotationBbox`` an opinion about its extent
* :ghpull:`15037`: Simplifications to errorbar().
* :ghpull:`17493`: Update SVGs that use interpolation='none'.
* :ghpull:`15221`: Don't fallback to agg in tight_layout.get_renderer.
* :ghpull:`17512`: DOC: remove inkscape restriction in doc
* :ghpull:`17484`: Deprecate ismath parameter to draw_tex and ismath="TeX!".
* :ghpull:`17492`: Correctly set default linewidth for unfilled markers.
* :ghpull:`16908`: Adding 2d support to quadmesh set_array
* :ghpull:`17506`: Fix dicts unpacking for ``.plot``
* :ghpull:`17496`: Fix some incorrect image clipping
* :ghpull:`17340`: convert some sample plots to use plt.subplots() instead of other methods
* :ghpull:`17504`: Undocument parameter orientation of bar()
* :ghpull:`13884`: Add some documentation for axisartist's ExtremeFinder, plus some cleanups.
* :ghpull:`17495`: Fix Pillow import in testing.
* :ghpull:`17462`: Inline FigureCanvasGtkFoo._render_figure.
* :ghpull:`17474`: Numpydocify RectangleSelector docstring.
* :ghpull:`17003`: Optimize extensions with LTO and hidden visibility
* :ghpull:`17489`: BUG: Picking vertical line broken
* :ghpull:`17486`: Simplify handling of fontproperties=None.
* :ghpull:`17478`: Add support for blitting in qt5cairo.
* :ghpull:`15641`: Make get_sample_data autoload npy/npz files.
* :ghpull:`17481`: Fix LightSource.shade on fully unmasked array.
* :ghpull:`17289`: Prepare for ragged array warnings in NumPy 1.19
* :ghpull:`17358`: Fix masked CubicTriInterpolator
* :ghpull:`17477`: DOC: Use Sphinx-gallery animation capture
* :ghpull:`17482`: Shorten RectangleSelector._release.
* :ghpull:`17475`: Cleanup RectangleSelector example.
* :ghpull:`17461`: Deprecate the private FigureCanvasGTK3._renderer_init.
* :ghpull:`17464`: Fold _make_nseq_validator into _listify_validator.
* :ghpull:`17469`: Use qVersion, not QT_VERSION_STR -- the latter doesn't exist in PySide2.
* :ghpull:`4779`: DOC: Start to document interactive figures
* :ghpull:`17458`: Cleanup C++ code
* :ghpull:`17466`: DOC: clarify that milestones are intentions not approvals
* :ghpull:`17062`: Fix to "exported SVG files blurred in viewers"
* :ghpull:`17443`: Fix rcParams validator for dashes.
* :ghpull:`17350`: Move integerness checks to SubplotSpec._from_subplot_args.
* :ghpull:`17444`: Support odd-length dash patterns in Agg.
* :ghpull:`17405`: Show the failing line in bad-rcparams warnings.
* :ghpull:`17452`: Make validate_date throw ValueError, not RuntimeError.
* :ghpull:`17439`: Remove comment re: validation of datetime format strings.
* :ghpull:`17438`: Discourage use of proprietary Matplotlib names for freetype hinting
* :ghpull:`16990`: update testing helpers
* :ghpull:`16340`: Make set_x/ymargin() update axes limits, just like margins().
* :ghpull:`15029`: Get default params from matplotlibrc.template.
* :ghpull:`17363`: Fix toolbar separators in wx+toolmanager.
* :ghpull:`17348`: Avoid creating a Tick in Axis.get_tick_space.
* :ghpull:`15725`: Changed line color of boxplot for dark_background
* :ghpull:`17362`: Remove status bars in toolmanager mode as well.
* :ghpull:`16551`: DOC: be more opinionated about flags passed to pip
* :ghpull:`17328`: Fixes icon clipping issue with WxAgg NavigationToolbar2 for wxpython 4.1.0
* :ghpull:`17425`: fix typo in stem doc
* :ghpull:`17415`: Cygwin fixes
* :ghpull:`17401`: FIX: Fix for FFmpeg + GIF
* :ghpull:`16569`: MNT: improve the error message in Path init
* :ghpull:`17404`: Don't forget to dlclose() main_program in tkagg init.
* :ghpull:`17414`: Keep validate_date private.
* :ghpull:`17413`: Revert "DOC: drop the experimental tag constrained_layout and tight_layout"
* :ghpull:`17394`: Deprecate passing keys to update_keymap as single comma-separated string
* :ghpull:`17395`: TexManager fixes.
* :ghpull:`17399`: Remove qt4 backends from backend fallback candidates.
* :ghpull:`17392`: Clarify deprecation message re: tex/pgf preambles as list-of-strings.
* :ghpull:`17400`: Cleanup wx examples.
* :ghpull:`17378`: Fix marker overlap
* :ghpull:`17351`: Fix running the test suite with inkscape>=1.
* :ghpull:`17382`: FIX: properly check figure on gridspec
* :ghpull:`17390`: Small updates to troubleshooting guide.
* :ghpull:`15104`: Simplify file handling in ft2font.
* :ghpull:`17380`: Support standard names for freetype hinting flags.
* :ghpull:`15594`: Fix marker overlap
* :ghpull:`17372`: Auto-set artist.mouseover based on if get_cursor_data is overridden.
* :ghpull:`17377`: Remove code for sphinx < 1.8
* :ghpull:`17266`: Keep explicit ticklabels in sync with ticks from FixedLocator
* :ghpull:`17359`: Fix running test_internal_cpp_api directly.
* :ghpull:`17355`: Change subprocess for inkscape version detection
* :ghpull:`17369`: CI: Add eslint for JS linting
* :ghpull:`17226`: Replace backend_driver by new example runner.
* :ghpull:`17365`: Also use light color tool buttons in qt+toolmanager+dark theme.
* :ghpull:`17366`: Restrict Qt toolbars to top/bottom of canvas.
* :ghpull:`17361`: Remove randomness from test_colorbar_get_ticks_2.
* :ghpull:`17151`: Cleanup colors.py docstrings.
* :ghpull:`17287`: Make API of get_tightbbox more consistent between Axes and Axis.
* :ghpull:`17092`: Don't create a statusbar in Qt, wx backends.
* :ghpull:`17220`: Simplify Annotation and Text bbox drawing.
* :ghpull:`17353`: Make zooming work in qt-embedding example.
* :ghpull:`16727`: Update xtick.alignment parameter in rcsetup to validate against correct values
* :ghpull:`17236`: Add the "contour.linewidths" configuration option
* :ghpull:`16328`: Make Artist.set() apply properties in the order in which they are given.
* :ghpull:`9696`: FIX: set_url() without effect in the plot for instances of Tick
* :ghpull:`17002`: Fix AnnotationBbox picking and a bit of cleanup
* :ghpull:`17256`: Improve ps handling of individual usetex strings.
* :ghpull:`17267`: Improve image comparison decorator
* :ghpull:`17332`: Cleanup docstring of subplots().
* :ghpull:`16843`: Deprecate is_pyqt5.
* :ghpull:`15898`: New textcolor kwarg for legend
* :ghpull:`17333`: Make sharex, etc. args of subplots() keyword-only.
* :ghpull:`17329`: Improve docs of eventplot()
* :ghpull:`17330`: Remove pnpoly license.
* :ghpull:`13656`: For single datasets, don't wrap artist added by Axes.hist in silent_list
* :ghpull:`16247`: DOC added kwargs and tight_layout description in plt.figure
* :ghpull:`16992`: Implement FigureManager.resize for macosx backend
* :ghpull:`17324`: DOC: add offset axes to secondary_axes
* :ghpull:`17311`: Make pyplot signatures of rgrids() and thetagrids() explicit
* :ghpull:`17302`: Fix alignment of offset text on top axis.
* :ghpull:`14421`: Add GridSpec.subplots()
* :ghpull:`15111`: By default, don't change the figure face/edgecolor on savefig().
* :ghpull:`17318`: both x and y should multiply the radius
* :ghpull:`17309`: Cleanup parameter types in docstrings
* :ghpull:`17308`: Improve docs of bar() and barh()
* :ghpull:`17312`: changed axis to axes in lifecycle tutorial
* :ghpull:`16715`: Automatically create tick formatters for str and callable inputs.
* :ghpull:`16959`: Simplify and robustify ConnectionPatch coordinates conversion.
* :ghpull:`17306`: FIX: CL more stable
* :ghpull:`17301`: Use deprecate_privatize_attribute more.
* :ghpull:`16985`: Adds normalize kwarg to pie function
* :ghpull:`5243`: Enhancement of tick label offset text positioning
* :ghpull:`17292`: Deprecate various wx Toolbar attributes.
* :ghpull:`17297`: Simplify pickling support.
* :ghpull:`17298`: Fix rubberband in tk.
* :ghpull:`17299`: Avoid "dash motion" in qt zoom box.
* :ghpull:`17200`: Implement set_history_buttons for Tk toolbar.
* :ghpull:`16798`: Make the Qt interactive zoom rectangle black & white.
* :ghpull:`17296`: Fix doc wording
* :ghpull:`17282`: Don't divide by zero in Line2D.segment_hits.
* :ghpull:`17293`: Fix incorrect deprecation.
* :ghpull:`17285`: V32 mergeup
* :ghpull:`15933`: Warn if a temporary config/cache dir must be created.
* :ghpull:`15911`: Use os.getpid() in configdir, to avoid multiprocess concurrency issues
* :ghpull:`17277`: Move slow FontManager warning to FontManager constructor.
* :ghpull:`17222`: FIX: long titles x/ylabel layout
* :ghpull:`14960`: Don't generate individual doc entries for inherited Axes/Axis/Tick methods
* :ghpull:`17175`: Further sync axes_grid colorbars with standard colorbars.
* :ghpull:`17030`: Move widget functions into matplotlib.testing.widgets.
* :ghpull:`16975`: Fix "out of bounds" undefined behavior
* :ghpull:`17111`: Deprecate NavigationToolbar2._init_toolbar.
* :ghpull:`15275`: adds turbo colormap
* :ghpull:`17174`: Inline RGBAxes._config_axes to its only call site.
* :ghpull:`17156`: Deprecate text.latex.preview rcParam.
* :ghpull:`17242`: Make deprecations versions explicit
* :ghpull:`17165`: Small optimizations to scale and translate of Affine2D
* :ghpull:`17181`: Inline some private helper methods in ColorbarBase + small refactors.
* :ghpull:`17264`: Don't trigger save when gtk save dialog is closed by escape.
* :ghpull:`17262`: fix typo in set_clip_on doc
* :ghpull:`17234`: Shorten and privatize qt's UiSubplotTool.
* :ghpull:`17137`: Deprecate Toolbar.press/release; add helper to find overridden methods.
* :ghpull:`17245`: Improve error handling in _parse_scatter_color_args
* :ghpull:`15008`: ENH: add variable epoch
* :ghpull:`17260`: Text Rotation Example: Correct roation_mode typo
* :ghpull:`17258`: Improve info logged by tex subsystem.
* :ghpull:`17211`: Deprecate support for running svg converter from path contaning newline.
* :ghpull:`17078`: Improve nbAgg & WebAgg toolbars
* :ghpull:`17191`: Inline unsampled-image path; remove renderer kwarg from _check_unsampled_image.
* :ghpull:`17213`: Replace use of Bbox.bounds by appropriate properties.
* :ghpull:`17219`: Add support for suptitle() in tight_layout().
* :ghpull:`17235`: More axisartist cleanups
* :ghpull:`17239`: Remove deprecations that expire in 3.3
* :ghpull:`13696`: Deprecate offset_position="data".
* :ghpull:`16991`: Begin warning on modifying global state of colormaps
* :ghpull:`17053`: Replace most jQuery with vanilla JavaScript
* :ghpull:`17228`: Make params to pyplot.tight_layout keyword-only.
* :ghpull:`17225`: Remove Patch visibility tracking by Legend & OffsetBox.
* :ghpull:`17027`: Fix saving nbAgg figure after a partial blit
* :ghpull:`16847`: Ticks are not markers
* :ghpull:`17229`: Autogenerate subplots_adjust with boilerplate.py.
* :ghpull:`17209`: Simplify some axisartist code.
* :ghpull:`17204`: Draw unfilled hist()s with the zorder of lines.
* :ghpull:`17205`: Shorten tight_layout code.
* :ghpull:`17218`: Document ``Transform.__add__`` and ``.__sub__``.
* :ghpull:`17215`: Small cleanups.
* :ghpull:`17212`: Cleanup text.py.
* :ghpull:`17196`: Move polar tests to their own module.
* :ghpull:`14747`: Deprecate AxisArtist.dpi_transform.
* :ghpull:`13144`: Deprecate NavigationToolbar2GTK3.ctx.
* :ghpull:`17202`: DOC: Remove extra word
* :ghpull:`17194`: Small cleanups/simplifications/fixes to pie().
* :ghpull:`17102`: Switch tk pan/zoom to use togglable buttons.
* :ghpull:`16832`: Correctly compute path extents
* :ghpull:`17193`: Document docstring quote convention
* :ghpull:`17195`: Fix polar tests.
* :ghpull:`17189`: Make all parameters of ColorbarBase, except ``ax``, keyword-only.
* :ghpull:`16717`: Bugfix for issue 16501 raised ValueError polar subplot with (thetamax - thetamin) > 2pi
* :ghpull:`17180`: Doc: spines arrows example
* :ghpull:`17184`: Fix various small typos.
* :ghpull:`17143`: Move linting to GitHub Actions with reviewdog.
* :ghpull:`17160`: Correctly go through property setter when init'ing Timer interval.
* :ghpull:`17166`: Deprecate ScalarMappable.check_update and associated machinery.
* :ghpull:`17177`: Manually linewrap PS hexlines. Fixes #17176
* :ghpull:`17162`: Update docs of rc_context()
* :ghpull:`17170`: Convert SubplotZero example into centered-spines-with-arrows recipe.
* :ghpull:`17164`: Fix Figure.add_axes(rect=...).
* :ghpull:`17154`: DOC: Fix some warning and unreproducibility
* :ghpull:`17169`: Clarify that draw_event occurs after the canvas draw.
* :ghpull:`17089`: Cleanup some imports in tests
* :ghpull:`17040`: Improve docs on automated tests
* :ghpull:`17145`: CI: run pydocstyle with our custom options
* :ghpull:`16864`: Check parameter type for legend(labels)
* :ghpull:`17146`: FigureManager/NavigationToolbar2 cleanups.
* :ghpull:`16933`: Add tests for toolmanager.
* :ghpull:`17127`: ENH: allow title autopositioning to be turned off
* :ghpull:`17150`: Many docstring cleanups.
* :ghpull:`17148`: Fix most instances of D404 ("docstring should not start with 'this'").
* :ghpull:`17142`: BUGFIX: conditional for add_axes arg deprecation
* :ghpull:`17032`: Fold table.CustomCell into Cell.
* :ghpull:`17117`: TextBox improvements.
* :ghpull:`17108`: Make widgets.TextBox work also when embedding.
* :ghpull:`17135`: Simplify pan/zoom toggling.
* :ghpull:`17134`: Don't override update() in NavigationToolbar2Tk.
* :ghpull:`17129`: In docs remove 'optional' if 'default' can be given
* :ghpull:`16963`: Deprecate Locator.refresh and associated helpers.
* :ghpull:`17133`: Fix Button widget motion callback.
* :ghpull:`17125`: Make multiline docstrings start with a newline.
* :ghpull:`17124`: Widgets cleanup.
* :ghpull:`17123`: Cleanup/Simplify Cell._set_text_position.
* :ghpull:`16862`: FIX: turn off title autopos if pad is set
* :ghpull:`15214`: Inline wx icon loading.
* :ghpull:`16831`: Simplify interactive zoom handling.
* :ghpull:`17094`: DOC: drop the experimental tag constrained_layout and tight_layout
* :ghpull:`17101`: Avoid "wrapped C/C++ object has been deleted" when closing wx window.
* :ghpull:`17028`: Changed return type of get_{x,y}ticklabels to plain list
* :ghpull:`16058`: Deprecate {ContourSet,Quiver}.ax in favor of .axes.
* :ghpull:`15349`: Use checkboxes as bullet points for the PR review checklists
* :ghpull:`17112`: Fix some link redirects in docs
* :ghpull:`17090`: DOCS: add examples of how one "should" use Bbox
* :ghpull:`17110`: Simplify connection of the default key_press and button_press handlers.
* :ghpull:`17070`: Cleanups to Qt backend.
* :ghpull:`16776`: Make cursor text precision actually correspond to pointing precision.
* :ghpull:`17026`:  Add eslint & prettier, and re-format JS
* :ghpull:`17091`: Make sure slider uses "x" sign before multiplicative factor.
* :ghpull:`17082`: Cleanup TextBox implementation.
* :ghpull:`17067`: Simplify and generalize _set_view_from_bbox.
* :ghpull:`17081`: Update animation_api.rst
* :ghpull:`17077`: Improve default formatter for Slider values.
* :ghpull:`17079`: Use True instead of 1 for boolean parameters.
* :ghpull:`17074`: Fixed a typo in Lifecycle of a Plot
* :ghpull:`17072`: Cleanup multi_image example.
* :ghpull:`15287`: Allow sharex/y after axes creation.
* :ghpull:`16987`: Deprecate case-insensitive properties.
* :ghpull:`17059`: More missing refs fixes, and associated doc rewordings.
* :ghpull:`17057`: Simplify subgridspec example/tutorial.
* :ghpull:`17058`: Fix minor doc typos.
* :ghpull:`17024`: Clarify docs of Rectangle
* :ghpull:`17043`: Avoid spurious deprecation warning in TextBox.
* :ghpull:`17047`: Highlighted  .cbook.warn_deprecated() in contributing.rst
* :ghpull:`17054`: Use slope in axline example
* :ghpull:`17048`: More missing refs fixes.
* :ghpull:`17021`: File name made more understandable
* :ghpull:`16903`: Shorten implementation of Axes methods that just wrap Axis methods.
* :ghpull:`17039`: Cleanups to contour docs.
* :ghpull:`17011`: ci: Publish result images as Azure artifacts.
* :ghpull:`17038`: Improve readability of documenting_mpl.rst
* :ghpull:`16996`:  Clean up get_proj() docstring (used view_init docstring as reference)
* :ghpull:`17019`: Add return field to documentation of 'get_major_ticks'
* :ghpull:`16999`: Add section on artifacts to imshow docs
* :ghpull:`17029`: Fix table.Cell docstrings.
* :ghpull:`17025`: Fix RecursionError when closing nbAgg figures.
* :ghpull:`16971`: Don't change Figure DPI if value unchanged
* :ghpull:`16972`: Fix resize bugs in GTK
* :ghpull:`17008`: Change the description of Rectangle's xy parameter
* :ghpull:`16337`: Create axline() using slope
* :ghpull:`16947`: Fix missing parameter initialization in Axes.specgram()
* :ghpull:`17001`: Cleanup imshow_extent tutorial.
* :ghpull:`17000`: More stringent eventplot orientations.
* :ghpull:`16771`: Deprecate non-string values as legend labels
* :ghpull:`15910`: Simplify init of EventCollection.
* :ghpull:`16998`: Made INSTALL.rst consistent
* :ghpull:`15393`: Cleanup shape manipulations.
* :ghpull:`10924`: Clear() methods to Radio and CheckButtons and other improvements
* :ghpull:`16988`: Make plt.{r,theta}grids act as setters even when all args are kwargs.
* :ghpull:`16986`: update tox.ini to match pythons supported and allow flags for pytest
* :ghpull:`16111`: Move locking of fontlist.json *into* json_dump.
* :ghpull:`13110`: Slightly tighten the Bbox/Transform API.
* :ghpull:`16973`: TST: don't actually render 1k+ date ticks
* :ghpull:`16967`: Simplify animation writer fallback.
* :ghpull:`16812`: Bezier/Path API Cleanup: fix circular import issue
* :ghpull:`16968`: Add link to 3.2 min-supported-requirements.
* :ghpull:`16957`: Remove unused, private aliases Polygon._{get,set}_xy.
* :ghpull:`16960`: Improve error for quoted values in matplotlibrc.
* :ghpull:`16530`: Fix violinplot support list of pandas.Series
* :ghpull:`16939`: Cleanup/tighten axes_grid.
* :ghpull:`16942`: Cleanup and avoid refleaks OSX Timer__timer_start.
* :ghpull:`16944`: TST: update default junit_family
* :ghpull:`16823`: Dedupe implementation of axes grid switching in toolmanager.
* :ghpull:`16951`: Cleanup dates docstrings.
* :ghpull:`16769`: Fix some small style issues
* :ghpull:`16936`: FIX: Plot is now rendered with correct inital value
* :ghpull:`16937`: Making sure to keep over/under/bad in cmap resample/reverse.
* :ghpull:`16915`: Tighten/cleanup wx backend.
* :ghpull:`16923`: Test the macosx backend on Travis.
* :ghpull:`15369`: Update style docs
* :ghpull:`16893`: Robustify ``AffineBase.__eq__`` against comparing to other classes.
* :ghpull:`16904`: Turn fontdict & minor into kwonly parameters for set_{x,y}ticklabels.
* :ghpull:`16917`: Add test for close_event.
* :ghpull:`16920`: Remove unused _read_ppm_image from macosx.m.
* :ghpull:`16877`: Cleanup new_fixed_axis examples.
* :ghpull:`15049`: Annotate argument in axes class match upstream
* :ghpull:`16774`: Cleanup demo_axes_hbox_divider.
* :ghpull:`16873`: More fixes to pydocstyle D403 (First word capitalization)
* :ghpull:`16896`: set_tick_params(label1On=False) should also make offset text invisible.
* :ghpull:`16907`: Fix typo in implementation of quit_all_keys.
* :ghpull:`16900`: Document and test common_texification()
* :ghpull:`16902`: Remove dot from suffix in testing.compare.
* :ghpull:`16828`: Use more _setattr_cm, thus fix Text('').get_window_extent(dpi=...)
* :ghpull:`16901`: Cleanup many docstrings.
* :ghpull:`16840`: Deprecate support for Qt4.
* :ghpull:`16899`: Remove optional returns from TriAnalyzer._get_compressed_triangulation.
* :ghpull:`16618`: Use SubplotSpec row/colspans more, and deprecate get_rows_columns.
* :ghpull:`15392`: Autoscale for ax.arrow()
* :ghpull:`14626`: Add support for minor ticks in 3d axes.
* :ghpull:`16897`: Add back missing import.
* :ghpull:`14725`: Move the debug-mode TransformNode.write_graphviz out.
* :ghpull:`15437`: Improve handling of alpha when saving to jpeg.
* :ghpull:`15606`: Simplify OldAutoLocator and AutoDateLocator.
* :ghpull:`16863`: Shortcut for closing all figures
* :ghpull:`16876`: Small cleanups to dviread.
* :ghpull:`15680`: Use more kwonly arguments, less manual kwargs-popping.
* :ghpull:`15318`: Deprecate unused rcParams["animation.html_args"].
* :ghpull:`15303`: Make it possible to use rc_context as a decorator.
* :ghpull:`16890`: Enables hatch alpha on SVG
* :ghpull:`16887`: Shorter event mocking in tests.
* :ghpull:`16881`: Validate tickdir strings
* :ghpull:`16846`: Disconnect manager when resizing figure for animation saving.
* :ghpull:`16871`: Shorter Path import in setupext.
* :ghpull:`16892`: Warn in the docs that MouseEvent.key can be wrong.
* :ghpull:`16209`: Dedupe boilerplate for "adoption" of figure into pyplot.
* :ghpull:`16098`: Deprecate parameter props of Shadow
* :ghpull:`15747`: Move Text init to end of Annotation init.
* :ghpull:`15679`: np.concatenate cleanups.
* :ghpull:`16778`: Remove more API deprecated in 3.1(part 7)
* :ghpull:`16886`: Finish removing mentions of idle_event.
* :ghpull:`16882`: Fix trivial docstring typos.
* :ghpull:`16874`: Fix pydocstyle D209 (Multi-line docstring closing separate line)
* :ghpull:`14044`: Remove font preamble caching in TexManager.
* :ghpull:`16724`: Fixed incorrect colour in ErrorBar when Nan value is presented
* :ghpull:`15254`: Propagate signature-modifying decorators to pyplot wrappers.
* :ghpull:`16868`: Update release guide
* :ghpull:`14442`: In the build, declare all (compulsory) extension modules together.
* :ghpull:`16866`: Cleanup/update deprecations.
* :ghpull:`16850`: use validate_[cap/join]style
* :ghpull:`16858`: Fix various numpydoc style issues
* :ghpull:`16848`: Cleanup CI setup
* :ghpull:`16845`: Fix checking of X11 builds with PySide2.
* :ghpull:`14199`: Deprecate Path helpers in bezier.py
* :ghpull:`16838`: Inline some more kwargs into setup.py's setup() call.
* :ghpull:`16841`: Cleanup errorbar subsampling example
* :ghpull:`16839`: spines doc cleanup
* :ghpull:`16844`: fix example hist(density=...)
* :ghpull:`16827`: Fix warnings in doc examples
* :ghpull:`16772`: Remove more API deprecated in 3.1
* :ghpull:`16822`: fix bug where make_compound_path kept all STOPs
* :ghpull:`16819`: Destroy figures by manager instance, not by number.
* :ghpull:`16824`: Deprecate NavigationToolbar2QT.parent.
* :ghpull:`16825`: Don't use deprecated Gtk add_with_viewport.
* :ghpull:`16816`: Merge v3.2.x into master
* :ghpull:`16786`: Simple cleanups to formatters.
* :ghpull:`16807`: Update barchart_demo.
* :ghpull:`16804`: Deprecate some mathtext glue helper classes.
* :ghpull:`16808`: One more instance of check_in_list.
* :ghpull:`16802`: Fix incorrect super class of VCentered.
* :ghpull:`16789`: Update markup for collections docstrings.
* :ghpull:`16781`: Update image tutorial wrt. removal of native png handler.
* :ghpull:`16787`: Avoid vstack() when possible.
* :ghpull:`16689`: Add a fast path for NumPy arrays to Collection.set_verts
* :ghpull:`15373`: Further shorten quiver3d computation...
* :ghpull:`16780`: Don't import rcParams but rather use mpl.rcParams (part 3)
* :ghpull:`16775`: Cleanup axes_divider examples.
* :ghpull:`15949`: Simplify implementation of SubplotTool.
* :ghpull:`14869`: Deduplicate code for text-to-path conversion in svg backend.
* :ghpull:`16527`: Validate positional parameters of add_subplot()
* :ghpull:`15622`: Cleanup mpl_toolkits locators.
* :ghpull:`16744`: Reword axes_divider tutorial.
* :ghpull:`16746`: Reword colorbar-with-axes-divider example.
* :ghpull:`15211`: Various backend cleanups.
* :ghpull:`15890`: Remove API deprecated in 3.1 (part 2)
* :ghpull:`16757`: Simplify interactive zoom handling.
* :ghpull:`15515`: Combine withEffect PathEffect definitions.
* :ghpull:`15977`: pgf backend cleanups.
* :ghpull:`15981`: Reuse colorbar outline and patch when updating the colorbar.
* :ghpull:`14852`: Use Path.arc() to interpolate polar arcs.
* :ghpull:`16686`: Deprecate Substitution.from_params.
* :ghpull:`16675`: Vectorize patch extraction in Axes3D.plot_surface
* :ghpull:`15846`: Standardize signature mismatch error messages.
* :ghpull:`16740`: Fix type of ``dpi`` in docstrings.
* :ghpull:`16741`: Dedupe RGBAxes examples.
* :ghpull:`16755`: Reword docstring of panning callbacks, and pass them a MouseButton.
* :ghpull:`16749`: Document behavior of savefig("extensionless-name").
* :ghpull:`16754`: Cleanup image.py.
* :ghpull:`14606`: Generic cleanup to hist().
* :ghpull:`16692`: Allow MarkerStyle instances as input for lines
* :ghpull:`15479`: Cleanup axes_rgb.
* :ghpull:`16617`: Use Path(..., closed=True) more.
* :ghpull:`16710`: Make format_coord messagebox resize with the window and the content in osx backend
* :ghpull:`16681`: Simplify docstring interpolation for Box/Arrow/ConnectionStyles.
* :ghpull:`16576`: Deprecate arg-less calls to subplot_class_factory (and similar factories)
* :ghpull:`16652`: Deprecate {Locator,Axis}.{pan,zoom}.
* :ghpull:`16596`: Deprecate dviread.Encoding.
* :ghpull:`16231`: Deprecate JPEG-specific kwargs and rcParams to savefig.
* :ghpull:`16636`: Deprecate autofmt_xdate(which=None) to mean which="major".
* :ghpull:`16644`: Deprecate validate_webagg_address.
* :ghpull:`16619`: Fix overindented lines.
* :ghpull:`15233`: backend_ps cleanup.
* :ghpull:`16604`: Deprecate more rc validators.
* :ghpull:`16601`: Small unrelated cleanups.
* :ghpull:`16584`: Rename font_bunch to psfont in textpath.
* :ghpull:`16023`: Dedupe implementations of fill_between & fill_betweenx.
* :ghpull:`16485`: Simplify validate_color_for_prop_cycle.
* :ghpull:`16285`: Deprecate RendererCairo.font{weights,angles}
* :ghpull:`16410`: Fix support for empty usetex strings.
* :ghpull:`11644`: Add feature to fallback to stix font in mathtext
* :ghpull:`16537`: Delay checking for existence of postscript distillers.
* :ghpull:`16351`: Group all init of Legend.legendPatch together.
* :ghpull:`15988`: Refactor Annotation properties.
* :ghpull:`16421`: Shorten the type1-to-unicode name table.
* :ghpull:`16200`: Deprecate Artist.{set,get}_contains.
* :ghpull:`15828`: Deprecate support for dash-offset = None.
* :ghpull:`16338`: Document SymmetricalLogLocator parameters.
* :ghpull:`16504`: DOC: more pcolor fixes
* :ghpull:`15996`: Cleanup axes_size.
* :ghpull:`16108`: Deprecate DraggableBase.on_motion_blit.
* :ghpull:`16706`: Fix exception causes all over the codebase
* :ghpull:`15855`: Simplify 3d axes callback setup.
* :ghpull:`16219`: Simplify CallbackRegistry pickling.
* :ghpull:`16002`: relax two test tolerances on x86_64
* :ghpull:`16063`: Make the signature of Axes.draw() consistent with Artist.draw().
* :ghpull:`16177`: Further simplify setupext.
* :ghpull:`16191`: Make Figure._axobservers a CallbackRegistry.
* :ghpull:`16698`: Small edits to toolkits docs.
* :ghpull:`15430`: Simplify setupext.download_or_cache.
* :ghpull:`16694`: Lower Text's FontProperties priority when updating
* :ghpull:`16511`: Add more detailed kwargs docstrings to Axes methods.
* :ghpull:`16653`: Tutorials: make path/URL option clearer in matplotlibrc tutorial
* :ghpull:`16697`: Update docstrings for plot_directive.
* :ghpull:`16684`: Fix exception causes in 19 modules
* :ghpull:`16674`: Docstring + import cleanups to legend.py.
* :ghpull:`16683`: Turn mathtext.GlueSpec into a (private) namedtuple.
* :ghpull:`16660`: Cleanup fancybox_demo.
* :ghpull:`16691`: Clarify tiny comment re: AnnotationBbox constructor.
* :ghpull:`16676`: Cleanup animation docstrings.
* :ghpull:`16673`: DOC: correct title_fontsize docstring
* :ghpull:`16669`: DOC: update doc release guide
* :ghpull:`16563`: Parametrize imshow antialiased tests.
* :ghpull:`16658`: In docs, add multi-axes connectionpatches to Figure, not Axes.
* :ghpull:`16647`: Update annotation tutorial.
* :ghpull:`16638`: Remove unused, outdated division operators on jpl_units.
* :ghpull:`16509`: Add custom math fallback
* :ghpull:`16609`: Fix exception causes in rcsetup.py
* :ghpull:`16637`: Update docstrings in figure.py.
* :ghpull:`16534`: DOC: MaxNLocator and contour/contourf doc update (replaces #16428)
* :ghpull:`16597`: close #16593: setting ecolor turns off color cycling
* :ghpull:`16615`: Update custom boxstyles example.
* :ghpull:`16610`: Added graphviz_docs to conf.py
* :ghpull:`16608`: Stricter validation of rcParams["axes.axisbelow"].
* :ghpull:`16614`: Cleanup quiver3d examples.
* :ghpull:`16556`: Make backend_ps test robust against timestamp changes in ghostscript.
* :ghpull:`16602`: Cleanup testing.compare.
* :ghpull:`16575`: Style fix for dynamic axes subclass generation in mpl_toolkits.
* :ghpull:`16587`: Remove warnings control from tests.py.
* :ghpull:`16599`: Cleanup dolphin example.
* :ghpull:`16586`: Deprecate recursionlimit kwarg to matplotlib.test().
* :ghpull:`16595`: Minor docstring/references update.
* :ghpull:`16579`: Update usetex_fonteffects example.
* :ghpull:`16578`: Use rc() less often in examples/tutorials.
* :ghpull:`16572`: Remove some remnants of hist{,2d}(normed=...).
* :ghpull:`16491`: Expire the _rename_parameters API changes.
* :ghpull:`14592`: In SecondaryAxis.set_functions, reuse _set_scale's parent scale caching.
* :ghpull:`16279`: STY: Fix underindented continuation lines.
* :ghpull:`16549`: Improve documentation for examples/widgets/textbox.py
* :ghpull:`16560`: Update URL to pyparsing.
* :ghpull:`16292`: More edits to Normalize docstrings.
* :ghpull:`16536`: API/TST: minimum versions
* :ghpull:`16559`: 3D example avoid using statefull .gca()
* :ghpull:`16553`: DOC: clarify the expected shapes of eventplot input
* :ghpull:`16535`: Clarify docs of num parameter of plt.figure()
* :ghpull:`16547`: Reformat/reword mathtext docstrings.
* :ghpull:`16545`: Add a smoketest for ps.usedistiller="xpdf".
* :ghpull:`16529`: Deprecate toggling axes navigatability using the keyboard.
* :ghpull:`16521`: Remove more API deprecated in 3.1.
* :ghpull:`16481`: Update set_thetalim documentation
* :ghpull:`16524`: Cleanup docstrings
* :ghpull:`16540`: Cleanup imports
* :ghpull:`16429`: CI: update codecov
* :ghpull:`16533`: Recommend to amend pull requests
* :ghpull:`16531`: Also deprecate ignorecase ValidateInStrings.
* :ghpull:`16428`: DOC: MaxNLocator and contour/contourf doc update
* :ghpull:`16525`: Don't import rcParams but rather use mpl.rcParams (part 2)
* :ghpull:`16528`: Improve test failure messages on warnings.
* :ghpull:`16393`: Shorten PyFT2Font_get_charmap.
* :ghpull:`16483`: Deprecate most ValidateInStrings validators.
* :ghpull:`16523`: Reorder mathtext rcparams in matplotlibrc template.
* :ghpull:`16520`: Update a comment re: minimum version of numpy working around bug.
* :ghpull:`16522`: Fix deprecation warning
* :ghpull:`16515`: Fix doc for set_{x,y}label, and then some more.
* :ghpull:`16516`: Fixes to boxplot() docstring & error messages.
* :ghpull:`16508`: Multi-dim transforms are non-separable by default.
* :ghpull:`16507`: Factor out common parts of ``__str__`` for Transform subclasses.
* :ghpull:`16514`: Various delayed PR reviews
* :ghpull:`16512`: Fix a bunch of random typos.
* :ghpull:`16510`: Doc markup cleanups.
* :ghpull:`16500`: Dedupe timer attribute docs.
* :ghpull:`16503`: DOC: suppress warning on pcolor demo
* :ghpull:`16495`: Deemphasize basemap in user-facing docs.
* :ghpull:`16484`: Don't forget to set stretch when exporting font as svg reference.
* :ghpull:`16486`: Simplify validate_color, and make it slightly stricter.
* :ghpull:`16246`: Avoid using FontProperties when not needed.
* :ghpull:`16432`: Prefer geomspace() to logspace().
* :ghpull:`16099`: Consistently name callback arguments event instead of evt
* :ghpull:`16477`: Remove some APIs deprecated in mpl3.1.
* :ghpull:`16475`: Use vlines() and plot(), not stem(), in timeline example.
* :ghpull:`16474`: Switch default of stem(use_line_collection=...) to True.
* :ghpull:`16467`: Convert named_colors example to use Rectangle
* :ghpull:`16047`: Remove more API deprecated in 3.1
* :ghpull:`16373`: Fix usetex_baseline_test.
* :ghpull:`16433`: Simplify demo_curvelinear_grid2.
* :ghpull:`16472`: Fix mplot3d projection
* :ghpull:`16092`: Deprecate clear_temp param/attr of FileMovieWriter.
* :ghpull:`15504`: Warn when trying to start a GUI event loop out of the main thread.
* :ghpull:`15023`: Simplify formatting of matplotlibrc.template.
* :ghpull:`13535`: Validate inputs to ScalarMappable constructor
* :ghpull:`16469`: FIX: colorbar minorticks when rcParams['x/ytick.minor.visible'] = True
* :ghpull:`16401`: BLD: Auto-detect PlatformToolset
* :ghpull:`16024`: Keep parameter names in preprocess_data.
* :ghpull:`13390`: Make sure that scatter3d copies its inputs.
* :ghpull:`16107`: Deprecate DraggableBase.artist_picker.
* :ghpull:`16455`: Update some docstrings in colors.py
* :ghpull:`16456`: Enable more font_manager tests to be run locally.
* :ghpull:`16459`: Update backend dependency docs.
* :ghpull:`16444`: Dedupe spectral plotting tests.
* :ghpull:`16460`: Remove some mentions of avconv, following its deprecation.
* :ghpull:`16443`: Parametrize some spectral tests.
* :ghpull:`16204`: Expire deprecation of \mathcircled
* :ghpull:`16446`: Replace matshow baseline test by check_figures_equal.
* :ghpull:`16418`: Backend timer simplifications.
* :ghpull:`16454`: Use pytest.raises(match=...)
* :ghpull:`14916`: Make kwargs names in scale.py not include the axis direction.
* :ghpull:`16258`: ENH: add shading='nearest' and 'auto' to ``pcolormesh``
* :ghpull:`16228`: Allow directly passing explicit font paths.
* :ghpull:`16445`: Remove a bunch of imports-within-tests.
* :ghpull:`16440`: Expire deprecation of \stackrel.
* :ghpull:`16439`: Rework pylab docstring.
* :ghpull:`16441`: Rework pylab docstring.
* :ghpull:`16442`: Expire deprecation of \stackrel.
* :ghpull:`16365`: TST: test_acorr (replaced image comparison with figure comparion)
* :ghpull:`16206`: Expire deprecation of \stackrel
* :ghpull:`16437`: Rework pylab docstring.
* :ghpull:`8896`: Fix mplot3d projection
* :ghpull:`16430`: Remove unnecessary calls to np.array in examples.
* :ghpull:`16407`: Remove outdated comment re: PYTHONHASHSEED and pytest.
* :ghpull:`16225`: Cleanup animation examples.
* :ghpull:`16336`: Include axline() in infinite lines example
* :ghpull:`16395`: Add set/get for ellipse width/height
* :ghpull:`16431`: CI: add py38 to azure matrix
* :ghpull:`16415`: Expire some APIs deprecated in mpl3.1.
* :ghpull:`16425`: MNT: rename internal variable
* :ghpull:`16427`: Style-fix some examples and update .flake8 per-file-ignores.
* :ghpull:`16423`: Slightly improve streamplot code legibility.
* :ghpull:`16414`: DOC: Fix ``axes:plot`` method docstring verb tense
* :ghpull:`16408`: Deprecate avconv animation writers.
* :ghpull:`16406`: Don't import rcParams but rather use mpl.rcParams.
* :ghpull:`16326`: Cleanup stack
* :ghpull:`16193`: Catch shadowed imports in style checks.
* :ghpull:`16374`: Log about font manager generation beforehand.
* :ghpull:`16372`: Dedupe ImageGrid doc from tutorial and docstring.
* :ghpull:`16380`: "gif" third-party package added to the extension page
* :ghpull:`16327`: Cleanup list copying
* :ghpull:`16366`: Special-case usetex minus to zero depth.
* :ghpull:`16350`: TST: Improved test (getting rid of image comparison test for test_titletwiny)
* :ghpull:`16359`: Make Text.update_from copy usetex state.
* :ghpull:`16355`: typo in ``ticker.ScalarFormatter`` doc
* :ghpull:`15440`: Use rcParams to control default "raise window" behavior (Qt,Gtk,Tk,Wx)
* :ghpull:`16302`: Cleanup Legend._auto_legend_data.
* :ghpull:`16329`: ENH: add zorder kwarg to contour clabel (and a better default value for zorder)
* :ghpull:`16341`: Remove mention of now-removed --verbose-foo flags.
* :ghpull:`16265`: Fix spy(..., marker=<not-None>, origin="lower")
* :ghpull:`16333`: Document animation HTML writer.
* :ghpull:`16334`: Fix doc regarding deprecation of properties.
* :ghpull:`16335`: Fix some more missing references.
* :ghpull:`16304`: Simplify Legend.get_children.
* :ghpull:`16309`: Remove duplicated computations in Axes.get_tightbbox.
* :ghpull:`16314`: Avoid repeatedly warning about too many figures open.
* :ghpull:`16319`: Put doc for XAxis befor YAxis and likewise for XTick, YTick.
* :ghpull:`16313`: Cleanup constrainedlayout_guide.
* :ghpull:`16312`: Remove unnecessary Legend._approx_text_height.
* :ghpull:`16307`: Cleanup axes_demo.
* :ghpull:`16303`: Dedupe Legend.draw_frame which is the same as set_frame_on.
* :ghpull:`16261`: TST: move the Qt-specific handling to conftest
* :ghpull:`16297`: DOC: fix description of vmin/vmax in scatter
* :ghpull:`16288`: Remove the private, unused _csv2rec.
* :ghpull:`16281`: Update/cleanup pgf tutorial.
* :ghpull:`16283`: Cleanup backend_agg docstrings.
* :ghpull:`16282`: Replace "unicode" by "str" in docs, messages when referring to the type.
* :ghpull:`16289`: axisartist tutorial markup fixes.
* :ghpull:`16293`: Revert "Fix doc CI by pointing to dev version of scipy docs."
* :ghpull:`16287`: Improve markup for rcParams in docs.
* :ghpull:`16271`: Clean up and clarify Normalize docs
* :ghpull:`16290`: Fix doc CI by pointing to dev version of scipy docs.
* :ghpull:`16276`: Cleanup docstring of print_figure, savefig.
* :ghpull:`16277`: Prefer using MouseButton to numeric values in docs and defaults.
* :ghpull:`16270`: numpydoc-ify SymLogNorm
* :ghpull:`16274`: Tiny cleanups to set_xlabel(..., loc=...).
* :ghpull:`16273`: DOC: Changing the spelling of co-ordinates.
* :ghpull:`15974`: Enable set_{x|y|}label(loc={'left'|'right'|'center'}...)
* :ghpull:`16248`: Update matplotlib.__doc__.
* :ghpull:`16262`: Dedupe update of rcParams["backend"] in use() and in switch_backend()
* :ghpull:`9629`: Make pcolor(mesh) preserve all data
* :ghpull:`16254`: DOC: pdf.preamble --> pgf.preamble
* :ghpull:`16245`: Cleanup image docs
* :ghpull:`16117`: CI: Unify required dependencies installation
* :ghpull:`16240`: Cleanup custom_scale example.
* :ghpull:`16227`: Make Animation.repeat_delay an int, not an int-or-None.
* :ghpull:`16242`: CI: Remove PYTHONUNBUFFERED=1 on Appveyor
* :ghpull:`16183`: Remove some baseline images for plot() tests.
* :ghpull:`16229`: And more missing refs.
* :ghpull:`16215`: Concise dates test
* :ghpull:`16233`: Reword ScalarFormatter docstrings.
* :ghpull:`16218`: Cleanup animation docs.
* :ghpull:`16172`: And more missing references.
* :ghpull:`16205`: Deprecate the empty matplotlib.compat.
* :ghpull:`16214`: Fix overindented line in AnchoredOffsetbox doc.
* :ghpull:`15943`: Deprecate the TTFPATH & AFMPATH environment variables.
* :ghpull:`16039`: Deprecate unused features of normalize_kwargs.
* :ghpull:`16202`: Remove outdated statement in tight_layout guide.
* :ghpull:`16201`: UnCamelCase examples.
* :ghpull:`16194`: Numpydoc ticklabel_format.
* :ghpull:`16195`: Numpydoc ContourSet.find_nearest_contour.
* :ghpull:`16198`: Remove em dash
* :ghpull:`16199`: Do not use camel case for variables in examples
* :ghpull:`15644`: Rewrite cursor example to include speedup possibilities
* :ghpull:`16196`: Cleanup patches docstrings.
* :ghpull:`16184`: Expire a mpl2.2-deprecated API
* :ghpull:`16188`: Remove ref. to non-existent method in animation tests.
* :ghpull:`16170`: Deprecate old and little used formatters.
* :ghpull:`16187`: Fix overly long lines in examples & tutorials.
* :ghpull:`15982`: Colorbar cleanup.
* :ghpull:`16154`: Deprecate setting pickradius via set_picker
* :ghpull:`16174`: Numpydocify artist.getp().
* :ghpull:`16165`: Remove rcParams deprecated in mpl3.0/3.1.
* :ghpull:`16141`: Update _base.py
* :ghpull:`16169`: Add missing spaces after commas.
* :ghpull:`15847`: Remove some dead branches from texmanager code.
* :ghpull:`16125`: Fix more missing references again.
* :ghpull:`16150`: Simplify transforms addition.
* :ghpull:`16152`: Inline _init_axes_pad into Grid.__init__.
* :ghpull:`16129`: Deprecate some Transform aliases in scale.py.
* :ghpull:`16162`: (Mostly) avoid the term "command" in the docs.
* :ghpull:`16159`: Simple cleanups for contour.py.
* :ghpull:`16164`: Fix trivial typo in deprecation warning message.
* :ghpull:`16160`: Cleanup hist() docstring.
* :ghpull:`16149`: DOC: reword density desc in ``ax.hist``
* :ghpull:`16151`: Remove outdated comment re: blended transforms.
* :ghpull:`16102`: Rework example "Scatter Star Poly" to "Marker examples"
* :ghpull:`16134`: Validate Line2D pickradius when setting it, not when reading it.
* :ghpull:`15019`: Add step option where='edges' to facilitate pre-binned hist plots
* :ghpull:`16142`: Avoid using np.r\_, np.c\_.
* :ghpull:`16146`: Remove LICENSE_CONDA.
* :ghpull:`16133`: Reword docstring of Line2D.contains.
* :ghpull:`16120`: Minor fontproperty fixes.
* :ghpull:`15670`: Reuse Grid.__init__ in ImageGrid.__init__.
* :ghpull:`16025`: Deprecate update_datalim_bounds.
* :ghpull:`16001`: Remove parameters deprecated in 3.1
* :ghpull:`16049`: Add __repr__ to SubplotSpec.
* :ghpull:`16100`: Consistently name event callbacks on_[event]
* :ghpull:`16106`: In DraggableLegend, inherit DraggableBase.artist_picker.
* :ghpull:`16109`: Name Axes variables ax instead of a
* :ghpull:`16115`: Fix more missing references.
* :ghpull:`16096`: Deprecate unused parameters
* :ghpull:`16085`: Improve docstrings in offsetbox.py
* :ghpull:`16097`: Cleanup unused variables
* :ghpull:`16101`: Fix incorrect doc regarding projections.
* :ghpull:`16095`: Deprecate MovieWriter.{exec,args}_key, making them private.
* :ghpull:`16078`: Refactor a bit animation start/save interaction.
* :ghpull:`16081`: Delay resolution of animation extra_args.
* :ghpull:`16088`: Use C++ true/false in ttconv.
* :ghpull:`16082`: Defaut to writing animation frames to a temporary directory.
* :ghpull:`16070`: Make animation blit cache robust against 3d viewpoint changes.
* :ghpull:`5056`: MNT: more control of colorbar with CountourSet
* :ghpull:`16051`: Deprecate parameters to colorbar which have no effect.
* :ghpull:`16045`: Use triple-double-quotes for docstrings
* :ghpull:`16076`: Cleanup path_editor example.
* :ghpull:`16059`: Simplify colorbar test.
* :ghpull:`16072`: Cleanup category.py docstrings.
* :ghpull:`15769`: scatter() should not rescale if norm is given
* :ghpull:`16060`: Cleanup pcolor_demo.
* :ghpull:`16057`: Trivial docstring fix for cbook.deprecated.
* :ghpull:`16043`: Simplify some comparisons
* :ghpull:`16044`: Code style cleanup
* :ghpull:`15894`: rcsetup cleanups.
* :ghpull:`16050`: Unbreak CI.
* :ghpull:`16034`: Update comments re: colors._vector_magnitude.
* :ghpull:`16035`: Make eventplot use the standard alias resolution mechanism.
* :ghpull:`15798`: Better default behavior for boxplots when rcParams['lines.marker'] is set
* :ghpull:`16004`: Improve documentation of text module
* :ghpull:`15507`: Use FixedFormatter only with FixedLocator
* :ghpull:`16008`: Remove unused imports
* :ghpull:`16036`: Rely on pytest to record warnings, rather than doing it manually.
* :ghpull:`15734`: Fix home/forward/backward buttons for 3d plots.
* :ghpull:`16038`: Cleanup contour_demo.
* :ghpull:`15998`: Join marker reference and marker fiillstyle reference
* :ghpull:`15976`: Cleanup span_where.
* :ghpull:`15990`: Remove deprecated support for setting single property via multiple aliases
* :ghpull:`15940`: Some unicode-support related cleanups.
* :ghpull:`15836`: Compactify a bit the EventCollection tests.
* :ghpull:`16013`: Relayout some conditions in axes_grid.
* :ghpull:`16010`: Inherit the Artist.draw docstring in subclasses.
* :ghpull:`16017`: Document support for no-args plt.subplot() call.
* :ghpull:`16014`: Simplify calls to AxesGrid/ImageGrid.
* :ghpull:`16012`: Normalize aspect="equal" to aspect=1 in the setter.
* :ghpull:`15997`: Shorten wx _onMouseWheel.
* :ghpull:`15993`: Style fixes for axes_divider.
* :ghpull:`15989`: Simplify Artist.update.
* :ghpull:`16015`: Some small extension cleanups
* :ghpull:`16011`: Replace axes_size.Fraction by multiplication.
* :ghpull:`15719`: Templatize spectral helpers.
* :ghpull:`15995`: Remove toolkit functions deprecated in 3.1
* :ghpull:`16003`: prevent needless float() conversion
* :ghpull:`16000`: De-deprecate \*min/\*max parameters to set_x/y/zlim()
* :ghpull:`15684`: Avoid RuntimeError at wx exit.
* :ghpull:`15992`: Avoid using np.matrix.
* :ghpull:`15961`: Be more opinionated for setting up a dev env.
* :ghpull:`15991`: Avoid setting dtypes as strings...
* :ghpull:`15985`: Remove unnecessary :func:, :meth: from examples markup.
* :ghpull:`15983`: Fix some examples docstrings.
* :ghpull:`15979`: Remove references to scipy cookbook.
* :ghpull:`15966`: FIX: check subplot kwargs
* :ghpull:`15947`: Merge the two usetex demos.
* :ghpull:`15939`: Exceptions should start with a capital letter
* :ghpull:`15948`: Use rc_context more.
* :ghpull:`15962`: Add tests for IndexFormatter
* :ghpull:`15965`: Test registering cmaps
* :ghpull:`15950`: Remove deprecated TextWithDash
* :ghpull:`15942`: Update docs of type1font
* :ghpull:`15927`: Trying to set the labels without setting ticks through pyplot now raises TypeError*
* :ghpull:`15944`: Minor doc cleanups
* :ghpull:`15945`: Do not use "object" or "instance" when documenting types
* :ghpull:`15897`: Cleanup TriAnalyzer docs
* :ghpull:`15777`: Don't bother disconnecting idle_draw at gtk shutdown.
* :ghpull:`15929`: Remove unused cbook._lockstr.
* :ghpull:`15935`: Raise an ValueError when Axes.pie accepts negative values #15923
* :ghpull:`15895`: Deprecate unused illegal_s attribute.
* :ghpull:`15900`: Rewrite test_cycles to avoid image comparison tests.
* :ghpull:`15892`: Update docs of backend_manager
* :ghpull:`15878`: Remove API deprecated in 3.1
* :ghpull:`15928`: DOC: use markers as slanted breaks in broken axis example
* :ghpull:`14659`: Update some widget docstrings.
* :ghpull:`15919`: Remove mod_python specific code.
* :ghpull:`15883`: Improve error when passing 0d array to scatter().
* :ghpull:`15907`: More docstrings cleanup.
* :ghpull:`15906`: Cleanup legend docstrings.
* :ghpull:`15776`: Improve doc for data kwarg.
* :ghpull:`15904`: Deemphasize ACCEPTS blocks in documenting_mpl docs.
* :ghpull:`15891`: Mark self.* expressions in docstrings as literal
* :ghpull:`15875`: Deprecate implicit creation of colormaps in register_cmap()
* :ghpull:`15885`: Cleanup text.py docstrings.
* :ghpull:`15888`: Cleanup backend_bases docs.
* :ghpull:`15887`: Fix AnnotationBbox docstring.
* :ghpull:`15858`: Avoid some uses of len-1 tuples.
* :ghpull:`15873`: Standardize parameter types in docs
* :ghpull:`15874`: Cleanup backend_bases docs
* :ghpull:`15876`: Deprecate case-insensitive capstyles and joinstyles.
* :ghpull:`15877`: Suppress exception chaining on rc validator failure.
* :ghpull:`15880`: Use True/False instead of 0/1 as booleans in backend_ps.
* :ghpull:`15827`: Fix validation of linestyle in rcparams and cycler.
* :ghpull:`15850`: Docstrings cleanup in matplotlib.axes
* :ghpull:`15853`: np.abs -> (builtins).abs
* :ghpull:`15854`: Simplify Axes3D init.
* :ghpull:`15822`: More cleanup defaults in docstrings
* :ghpull:`15838`: Remove some references to Py2.
* :ghpull:`15834`: Optimize colors.to_rgba.
* :ghpull:`15830`: Allow failure on nightly builds.
* :ghpull:`15788`: Fixes pyplot xticks() and yticks() by allowing setting only the labels
* :ghpull:`15805`: Improve docs on figure size
* :ghpull:`15783`: Fix stepfilled histogram polygon bottom perimeter
* :ghpull:`15812`: Cleanup defaults in docstrings
* :ghpull:`15804`: Cleanup many docstrings.
* :ghpull:`15790`: Update docs of PolyCollection
* :ghpull:`15792`: Cleanup dviread docs.
* :ghpull:`15801`: Cleanup some references to rcParams in docs.
* :ghpull:`15787`: Cleanup ``Colormap.__call__``.
* :ghpull:`15766`: Shorten description on search page
* :ghpull:`15786`: Slightly clarify the implementation of safe_masked_invalid.
* :ghpull:`15767`: Update badges in README.rst
* :ghpull:`15778`: Fix typos and comma splices in legend guide
* :ghpull:`15775`: Some pathlibification.
* :ghpull:`15772`: Directly dedent the spectral parameter docs.
* :ghpull:`15765`: Reword some docstrings.
* :ghpull:`15686`: Simplify and unify character tracking in pdf and ps backends (with linked fonts)
* :ghpull:`9321`: Add Axes method for drawing infinite lines
* :ghpull:`15749`: Fix travis links in README
* :ghpull:`15673`: Rely on findfont autofallback-to-default in pdf/ps backends.
* :ghpull:`15740`: Small animation cleanup.
* :ghpull:`15739`: ImageMagick animators now can use extra_args
* :ghpull:`15591`: Remove FAQ on 'Search' -- already referenced in search file
* :ghpull:`15629`: Consistently use realpaths to build XObject names
* :ghpull:`15696`: Improve mathtext.fontset docs and fix :mathmpl: cache bug.
* :ghpull:`15721`: Render default values in :rc: directive as literal
* :ghpull:`15720`: Suppress triage_tests warning on Py3.8.
* :ghpull:`15709`: Make 3d plot accept scalars as arguments.
* :ghpull:`15711`: Don't explicitly list scalez kwarg in Axes3D constructor and docs.
* :ghpull:`14948`: Simplify Tick and Axis initialization.
* :ghpull:`15693`: Also test PySide2 on CI.
* :ghpull:`15701`: Tried to solve Issue #15650: Print URL when webbrowser.open Fails
* :ghpull:`15704`: Fix more broken refs.
* :ghpull:`15687`: Add tooltips to HTML animation controls
* :ghpull:`15592`: Offset text position
* :ghpull:`15697`: Fix some broken doc refs.
* :ghpull:`15700`: Parametrize some spectral tests.
* :ghpull:`15699`: Fix some incorrect ValueErrors.
* :ghpull:`15698`: Bump numpy dependency to >=1.15.
* :ghpull:`15694`: Handle upcoming deprecation of np.float.
* :ghpull:`15691`: Correctly handle high dpi in Pillow animation writer.
* :ghpull:`15676`: Doc adopt nep29
* :ghpull:`15692`: Update FUNDING.yml
* :ghpull:`15645`: Bump minimal numpy version to 1.12.
* :ghpull:`15646`: Hide sphinx-gallery config comments
* :ghpull:`15642`: Remove interpolation="nearest" from most examples.
* :ghpull:`15671`: Don't mention tcl in tkagg commments anymore.
* :ghpull:`15607`: Simplify tk loader.
* :ghpull:`15651`: Simplify axes_pad handling in axes_grid.
* :ghpull:`15652`: Remove mention of Enthought Canopy from the docs.
* :ghpull:`15655`: Remove outdated license files.
* :ghpull:`15639`: Simplify axes_grid.Grid/axes_grid.ImageGrid construction.
* :ghpull:`15640`: Remove some commented-out code from axes_grid.
* :ghpull:`15643`: Fix examples claiming matplotlib can't plot np.datetime64.
* :ghpull:`15375`: Add note to hist docstring about speed
* :ghpull:`15461`: Fix invalid checks for axes_class parameter in ImageGrid.
* :ghpull:`15635`: Deprecate "U" mode passed to cbook.to_filehandle().
* :ghpull:`15563`: In backend_pgf, directly open subprocess in utf8 mode.
* :ghpull:`15462`: Simplify azure setup.
* :ghpull:`13075`: Remove logic for optionally building Agg and TkAgg.
* :ghpull:`15262`: Declare qt figureoptions tool in toolitems.
* :ghpull:`15292`: Shorten RendererWx.get_wx_font.
* :ghpull:`15569`: Allow linking against a system qhull as well.
* :ghpull:`15589`: Make sure that figures are closed when check_figures_equal finishes
* :ghpull:`15465`: Validate and simplify set_tick_params(which=...)
* :ghpull:`15090`: Coerce MxNx1 images into MxN images for imshow
* :ghpull:`15578`: BLD: set the max line length on the flake8 config
* :ghpull:`15564`: Use True instead of 1 as filternorm default
* :ghpull:`15536`: Add a backend kwarg to savefig.
* :ghpull:`15571`: Cleanup following using Pillow as universal image reader
* :ghpull:`15476`: Default to local_freetype builds.
* :ghpull:`15557`: Skip failing pgf test when sfmath.sty is not present.
* :ghpull:`15555`: Add pgf to list of builtin backends in docs.
* :ghpull:`15534`: BLD: update pillow dependency
* :ghpull:`15427`: Separate plots using #### in demo_fixed_size_axes.py
* :ghpull:`15505`: Cleanup axisartist tutorial.
* :ghpull:`15506`: Rename locator.den to the clearer locator.nbins in mpl_toolkits.
* :ghpull:`15502`: Get rid of trivial compiler warning.
* :ghpull:`15451`: Ci py38
* :ghpull:`15484`: Cleanup docs regarding compilers.
* :ghpull:`15467`: Validate locator_params(axis=...)
* :ghpull:`15330`: Add axes method for drawing infinite lines.
* :ghpull:`15482`: Trivial style fixes to constrained_layout.
* :ghpull:`15418`: Use correct pip/pytest on azure
* :ghpull:`15466`: Update tick_params() docs
* :ghpull:`15463`: Remove staticbuild option from setup.cfg.template.
* :ghpull:`15378`: Don't link ft2font to zlib by default.
* :ghpull:`15270`: When no gui event loop is running, propagate callback exceptions.
* :ghpull:`15447`: Move testing of Py3.8 to Travis.
* :ghpull:`15431`: Fix range(len()) usages
* :ghpull:`15390`: Simplify implementation of vectorized date operations.
* :ghpull:`15403`: Fix DeprecationWarning in nightly testing
* :ghpull:`15394`: Deprecate {NonUniformImage,PcolorImage}.is_grayscale.
* :ghpull:`15400`: Updated INSTALL.rst to correct install commands
* :ghpull:`13788`: Autoscale for ax.arrow()
* :ghpull:`15367`: Update the readme on providing  API changes
* :ghpull:`15193`: Switch to using pillow for png as well.
* :ghpull:`15346`: vectorized calc_arrow loop in quiver
* :ghpull:`15011`: Adding example for drawstyle
* :ghpull:`15371`: Deprecate Colorbar.config_axis()
* :ghpull:`15361`: Update next API changes to new structure
* :ghpull:`15274`: NavigationToolbar2Tk: make packing optional.
* :ghpull:`15158`: Change the way API changes are documented
* :ghpull:`15356`: Fix broken imports.
* :ghpull:`15200`: Simplify SubplotParams.update().
* :ghpull:`15210`: Explicitly list allowed "unused" imports, remove the rest.
* :ghpull:`15348`: Some figure and related docs cleanup
* :ghpull:`13355`: Simplify and generalize BezierSegment.
* :ghpull:`14917`: ENH: box aspect for axes
* :ghpull:`14949`: Use fix_minus in format_data_short.
* :ghpull:`15341`: Move non-gui warning message to backend_bases.
* :ghpull:`15335`: Add discourse link to readme
* :ghpull:`15293`: Fixes for wx savefig dialog.
* :ghpull:`15324`: Update PR guidelines
* :ghpull:`15301`: Update colorbar docs
* :ghpull:`15340`: Always attach a manager attribute (possibly None) on canvas.
* :ghpull:`15319`: Make validate_movie_writer actually check registered writers.
* :ghpull:`10973`: PGF: Replace \pgfimage by \includegraphics to fix \import regression
* :ghpull:`15302`: fix warning used by cbook.warn_deprecated()
* :ghpull:`15321`: Sort missing_references.json.
* :ghpull:`15290`: Unify fig.delaxes(ax) and ax.remove().
* :ghpull:`15309`: Simplify sca().
* :ghpull:`15201`: Autogenerate gca(), gci() from boilerplate.py.
* :ghpull:`15305`: Autogenerate footer Copyright year
* :ghpull:`15294`: Replace custom logging in wx by stdlib logging.
* :ghpull:`15288`: More properties aliases.
* :ghpull:`15286`: throw deprecation warning on empty call to fig.add_axes()
* :ghpull:`15282`: Colorbar cleanup.
* :ghpull:`15250`: Cleanup font_manager.
* :ghpull:`13581`: Cleanup _pylab_helpers.
* :ghpull:`15273`: DOC: don't use term units in transform tutorial
* :ghpull:`15263`: Correctly setup comparisons in test_compare_images.
* :ghpull:`15226`: Turn gtk3 pan/zoom button into togglable buttons.
* :ghpull:`14609`: Simplify implementation of set_{x,y}bound.
* :ghpull:`15261`: Change layout of test_triager to avoid cropping images.
* :ghpull:`15236`: Dedupe SubplotSpec construction in mpl_toolkits.
* :ghpull:`14130`: Add decorator to inherit keyword-only deprecations
* :ghpull:`15249`: In findfont(fallback_to_default=False), throw if default font is missing
* :ghpull:`15175`: Simplify pdf image output.
* :ghpull:`7506`: [WIP] Add Axes method for drawing infinite lines.

Issues (198):

* :ghissue:`16501`: Setting a thetalim > 2pi gives odd results
* :ghissue:`15035`: security exposure in the packaged jquery library
* :ghissue:`10375`: Coordinate text wrapping in navigation toolbar
* :ghissue:`10720`: Option to set the text color in legend to be same as the line
* :ghissue:`17868`: plt.bar with nan input fails rendering in notebook using 3.3.0rc1
* :ghissue:`17773`: gtk3 rubberband is invisible
* :ghissue:`5726`: Cursor displays x, y coordinates with too much or too little precision
* :ghissue:`5164`: Sort out qt_compat
* :ghissue:`17905`: macosx backend warns when using the zoom method
* :ghissue:`17703`: QuadMesh.get_clim changed behavior in 3.3.0rc1
* :ghissue:`17875`: animation.writers['ffmpeg']" is hung when run in background.
* :ghissue:`17591`: Single-character colors do not match long names
* :ghissue:`16905`: if pie normalizes depends on input values
* :ghissue:`17829`: trunk fails to build in AIX
* :ghissue:`17820`: Regression: _reshape_2D no longer preserves the shape of lists of lists of one scalar each
* :ghissue:`17807`: "%matplotlib notebook" Download is Noise After Interacting with Plot
* :ghissue:`17763`: matplotlib.use('agg', force=True) does not ignore unavailable configured backend
* :ghissue:`17586`: Surprising datetime autoscaling after passing empty data
* :ghissue:`17792`: when using plt.tight_layout(), figure title overlaps subplot titles
* :ghissue:`17736`: ax.set_xticklabels([]) for categorical plots is broken in 3.3.0rc1
* :ghissue:`17757`: Plotting Hist with histtype 'stepfilled' does not respect bottom correctly
* :ghissue:`17744`: BUG: AttributeError: 'FigureCanvasBase' object has no attribute 'print_png' in 3.3rc0
* :ghissue:`17730`: Using backend Template and plt.tight_layout raises UnboundLocalError
* :ghissue:`17716`: Error using "set_window_title" for canvas via backend_qt5agg
* :ghissue:`17681`: PDF cannot be built due to Zenodo SVGs
* :ghissue:`17627`: AttributeError: 'Figure' object has no attribute '_cachedRenderer'
* :ghissue:`17658`: Feature request: Add advanced zoom and inspect feature to GUI for more productivity
* :ghissue:`17629`: Use of Python deprecated APIs.
* :ghissue:`17670`: BUG: Setting ticksize xx-small broken by #17348
* :ghissue:`17673`: RuntimeError: latex was not able to process the following string: b'$\\\\mathdefault{-2}$'
* :ghissue:`17412`: Document the dependency on the type1ec LaTeX package
* :ghissue:`17643`: AutoDateLocator docs has a typo
* :ghissue:`9118`: make TeXManager more user-configurable
* :ghissue:`11131`: Make pyplot.pause not give focus to the figure window
* :ghissue:`17646`: more conservative setattr_cm broke mplcairo
* :ghissue:`17634`: Cannot copy LinearSegmentedColormap
* :ghissue:`16496`: Single path optimisation for Collection w/ offsets broken
* :ghissue:`192`: Savefig does not issue a warning on a non-existent keyword n
* :ghissue:`17624`: _DummyAxis needs a __name__ attribute for ScalarFormatter
* :ghissue:`16910`: Axes.imshow draws invalid color at value is 0 when max of 'X' not equal to vmax
* :ghissue:`17637`: streamplot and sticky edges interaction
* :ghissue:`17633`: Stackplot fails for small numbers
* :ghissue:`17616`: waitforbuttonpress in Linux
* :ghissue:`17615`: small bug in documentation of backend.FigureCanvasBase.start_event_loop
* :ghissue:`17093`: Zero size figure use case
* :ghissue:`17608`: How avoid PyQt5 to crash when I move Qslitter to the edge with a matplotlib figure in it?
* :ghissue:`9829`: Vertices clipped for certain markers when plotting more than two points and saving as pdf
* :ghissue:`15815`: bar3d color length bug
* :ghissue:`15376`: ScalarFormatter.set_powerlimits documentation seems inconsistent
* :ghissue:`17595`: Master doc builds broken
* :ghissue:`16482`: Pyplot hlines and vlines do not use the 'lines.color' property in rcParams by default
* :ghissue:`16388`: rethink how we display DOI svg badges
* :ghissue:`17172`: set_aspect for 3D plots
* :ghissue:`16463`: Jupyter "inline" backend seems to misinterpret "figsize" with Axes3D
* :ghissue:`17527`: The markers are not hollow when I use ax.scatter() and set markers.MarkerStyle()'s fillstyle to 'none'. My usage is wrong?
* :ghissue:`7491`: sort out if the high-resolution ellipse code still works
* :ghissue:`17398`: Plotting an error band along a curve
* :ghissue:`8550`: Matplotlib chooses the wrong font for unrecognized weights
* :ghissue:`8788`: Font issue: findfonts should differentiate between thin and regular ttf fonts
* :ghissue:`10194`: legend is not present in the generated image if I use 'tight' for bbox_inches
* :ghissue:`17336`: set_url without effect for instances of Line2D
* :ghissue:`9695`: set_url() without effect in the plot for instances of Tick
* :ghissue:`17192`: How to change the thickness of the marker "x" when using scatter?
* :ghissue:`17507`: pyplot.savefig() throwing warning suggesting a bug (possibly in figManger)
* :ghissue:`17502`: dict unpacking broken for ``.plot`` in 3.2
* :ghissue:`15546`: plt.imshow: clip_on=False has no effect
* :ghissue:`17023`: DOC: Tutorial/Sample plots should use same fig/axis creation method
* :ghissue:`7537`: Conflict between different AGG static libraries in a same binary
* :ghissue:`16836`: Dropping support for PyQt4; preparing support for PyQt6.
* :ghissue:`17455`: LightSource.shade fails on a masked array
* :ghissue:`16353`: BUG: VisibleDeprecationWarning in boxplot
* :ghissue:`11820`: Compressed Triangulation Masking in CubicTriInterpolator
* :ghissue:`11823`: Animation Examples
* :ghissue:`15410`: Change in OSX Catalina makes matplotlib + multiprocessing crash
* :ghissue:`17467`: Bug Report: saved Figure ignores figure.facecolor
* :ghissue:`17343`: Regression in add_subplot..
* :ghissue:`7093`: ordering issues between ``set_xmargin`` and ``set_xscale``
* :ghissue:`13971`: Unnecessary drawing with NbAgg
* :ghissue:`17432`: Scatter accepts marker=MarkerStyle(), but plot does not
* :ghissue:`15675`: Boxplot line color with style dark_background should be bright
* :ghissue:`5962`: No output from pyplot on cygwin64 python3 virtualenv
* :ghissue:`17393`: TexManager.get_rgba fails
* :ghissue:`5830`: Incorrect overlap of markers in scatter3D
* :ghissue:`11937`: Limiting ticks on colorbar axes falsify tick labels.
* :ghissue:`17354`: Converter detection fails for inkscape if on headless system without DISPLAY
* :ghissue:`17352`: Zoom In-Out not behaving  as expected in QT backend example
* :ghissue:`15409`: Datetime plot fails with 'Agg' backend in interactive mode
* :ghissue:`14155`: Adding GridSpec.subplots?
* :ghissue:`16583`: matplotlibrc validates some parameters wrongly
* :ghissue:`16946`: Pick_event on AnnotationBbox fires at wrong position
* :ghissue:`15131`: set_size_inches doesn't resize window on macosx backend
* :ghissue:`7619`: Figure background colors
* :ghissue:`15899`: Describe possible kwargs that may be input into a function
* :ghissue:`17304`: constrained-layout gives wrong results when explicitly equal width ratios are set
* :ghissue:`17295`: DOC: https://matplotlib.org/api/_as_gen/matplotlib.quiver.Quiver.html
* :ghissue:`17294`: DOC: matplotlib.axes.Axes.annotate.html
* :ghissue:`17290`: backend_svg fails with dashed line style
* :ghissue:`16677`: tmp_config_or_cache_dir atexit cleanup fails after forks()
* :ghissue:`15091`: Turbo color map
* :ghissue:`7372`: Moving get_ax and do_event to testing
* :ghissue:`15225`: Show offset text on subplots after sharing axis
* :ghissue:`7138`: misplaced spines in dates plot
* :ghissue:`17243`: Misleading error message in _parse_scatter_color_args
* :ghissue:`16461`: Hexbin if singular and mincnt used
* :ghissue:`14596`: forward port jquery removal from ipympl
* :ghissue:`17217`: Transform operators are not publicly documented....
* :ghissue:`2253`: matplotlib makes python lose focus
* :ghissue:`7184`: margins does not handle bézier curves
* :ghissue:`16830`: ``_path.get_extents`` does not correctly handle bezier curves
* :ghissue:`17176`: Print figure using PS backend is needlessly slow
* :ghissue:`17141`: flake8-docstrings does not check all of our requirements
* :ghissue:`16567`: Let legend get the handles from the provided objects if not specified explicitly.
* :ghissue:`16805`: Titles cannot be padded to negative numbers anymore.
* :ghissue:`17114`: ``add_axes`` shows deprecation warning when called with only ``kwarg``\s
* :ghissue:`16885`: Change return type get_{x,y}ticklabels to plain list
* :ghissue:`17044`: widgets.TextBox continuously creates new text objects and linecollection objects.
* :ghissue:`17066`: documentation of animation contains non-working code example
* :ghissue:`16588`: Rename next_api_changes to api_changes_3.x (whatever number makes sense)
* :ghissue:`17015`: ``get_major_ticks`` docs missing return type
* :ghissue:`16976`: Thin line color distortion on large scale
* :ghissue:`16934`: gtk3 window immediately resizes down to zero-height upon showing up.
* :ghissue:`16941`:  test_determinism_check is failing (sometimes)
* :ghissue:`16982`: pyplot.rgrids don't do anything
* :ghissue:`16952`: How to solve an error of "ValueError: Key backend: Unrecognized backend string '"agg"'
* :ghissue:`15272`: Axes.violinplot has small issue in using pandas.DataFrame without index 0.
* :ghissue:`16926`: tk window immediately resizes down to zero-height upon showing up.
* :ghissue:`16919`: wx backends don't send close_event if window is closed via "q" keypress
* :ghissue:`16854`: small typo in the documentation
* :ghissue:`16895`: offset text still visible with ImageGrid axis "L"
* :ghissue:`12712`: Autoscale does not work for ax.arrow()
* :ghissue:`14208`: shift + w does not close all figures (has no effect)
* :ghissue:`15745`: Failed to add annotate to figure
* :ghissue:`11432`: Pressing the "1" key kills the zoom/pan tool
* :ghissue:`13799`: BUG: incorrect error bar colors when NaN values are present
* :ghissue:`16185`: hist demo appears to incorrectly mention ``normed`` and something odd about ``density`` as well.
* :ghissue:`15203`: Closing figures is done by number
* :ghissue:`16016`: Better argument checking of subplot definition in ``add_subplot()``
* :ghissue:`15980`: Is the reset of the colorbar's edgecolor when updating the corresponding image clim wanted behaviour?
* :ghissue:`16718`: Float figure DPI
* :ghissue:`16498`: long string of format_coord in osx backend
* :ghissue:`8405`: BUG: PDF export seems wrong with dash sequences that include a None offset
* :ghissue:`8619`: Feature request: allow mathtext fallback font other than Computer Modern for custom mathtext setup
* :ghissue:`14996`: format error saving eps figure using custom linestyle
* :ghissue:`16493`: Example/tutorials warn due to new pcolormesh shading
* :ghissue:`16022`: Cleanup Artist.draw() signatures
* :ghissue:`16389`: “Size” ignored if placed before fontproperties
* :ghissue:`16687`: Creating a figure of size (0, 0) raises an error
* :ghissue:`12729`: Docs for contour levels argument is incorrect
* :ghissue:`16593`: specifying ecolor in errobar turns off cycling
* :ghissue:`15621`: secondary_xaxis doesn't seem to use formatters
* :ghissue:`16116`: travis36minver.txt needs an update
* :ghissue:`16546`: Problem with eventplot - error message claims events & lineoffsets are unequal sizes
* :ghissue:`16462`: Allow wedges of polar plots to include theta = 0.
* :ghissue:`15142`: pyplot.annotate() API deprecation
* :ghissue:`16479`: font-stretch property missing in svg export
* :ghissue:`14304`: 'NSWindow drag regions should only be invalidated on the Main Thread!' - macos/python
* :ghissue:`12085`: Tcl_AsyncDelete: async handler deleted by the wrong thread
* :ghissue:`14669`: cm.ScalarMappable should fail early when norm input is wrong
* :ghissue:`16468`: incorrect cbar minor ticks for extend regions when x/ytick.minor.visible is True
* :ghissue:`16243`: windows builds: devenv freetype /update appears not to have an effect
* :ghissue:`11525`: Axes3D scatter plot for Numpy arrays in F-order does not give correct z-values
* :ghissue:`8894`: mplot3d projection results in non-orthogonal axes
* :ghissue:`1104`: Resizing a GUI window with Axes3D
* :ghissue:`16371`: Incomplete documentation in axes_grid1
* :ghissue:`6323`: Vertical alignment of tick labels with usetex=True
* :ghissue:`7957`: clabel not respecting zorder parameter
* :ghissue:`16252`: axes.spy plotting function doesn't respect origin='lower' kwarg when marker is not None
* :ghissue:`16299`: The interactive polar plot animation's axis label won't scale.
* :ghissue:`15182`: More tests ``ConciseDateFormatter`` needed
* :ghissue:`16140`: Unclear Documentation for get_xticklabels
* :ghissue:`16147`: pp.hist parmeter 'density' does not scale data appropriately
* :ghissue:`16069`: matplotlib glitch when rotating interactively a 3d animation
* :ghissue:`14603`: Scatterplot: should vmin/vmax be ignored when a norm is specified?
* :ghissue:`15730`: Setting lines.marker = s in matplotlibrc also sets markers in boxplots
* :ghissue:`11178`: home/back/forward buttons do nothing in 3d mode
* :ghissue:`14520`: pylab with wx backend not exiting cleanly
* :ghissue:`15964`: Guard ``plt.subplot`` kwargs a bit better?
* :ghissue:`15404`: Add python 3.8 tests
* :ghissue:`15773`: Warning:... GLib.source_remove(self._idle_draw_id) when using plt.savefig()
* :ghissue:`15923`: pie takes negative values
* :ghissue:`10317`: Setting plt.rc('text', usetex=True) after ticker.ScalarFormatter(useMathText=True) causes Error
* :ghissue:`15825`: Customised dashed linstyle in matplotlib.cycler throws ValueError when using in Axes.set_prop_cycle
* :ghissue:`9792`: Error with linestyles rcParams entries under the form (on, off, ...) and a style context manager
* :ghissue:`15782`: Invalid polygon in stepfilled histogram when bottom is set
* :ghissue:`15628`: Invalid unicode characters in PDF when font is a symlink
* :ghissue:`8577`: mplot3D scalar arguments for plot function
* :ghissue:`15650`: URL is not shown when webagg failed to open the browser.
* :ghissue:`5238`: the offset of the scientific notation in xaxis stays at bottom when axis is set to top
* :ghissue:`15678`: Error at save animation with pillow
* :ghissue:`15079`: check_figures_equal decorator reuses figures if called multiple times inside a single test.
* :ghissue:`15089`: Coerce MxNx1 images into MxN images for imshow
* :ghissue:`5253`: abline() - for drawing arbitrary lines on a plot, given specifications.
* :ghissue:`15165`: Switch to requiring Pillow rather than having our own png wrapper?
* :ghissue:`15280`: Add pull request checklist to Reviewers Guidlines
* :ghissue:`15289`: cbook.warn_deprecated() should warn with a MatplotlibDeprecationWarning not a UserWarning
* :ghissue:`15285`: DOC: make copy right year auto-update
* :ghissue:`15059`: fig.add_axes() with no arguments silently does nothing
* :ghissue:`14546`: Setting lines.markeredgecolor in rcParams affects the ticks' mark color too
.. _github-stats-3-2-0:

GitHub statistics for 3.2.0 (Mar 04, 2020)
==========================================

GitHub statistics for 2019/05/18 (tag: v3.1.0) - 2020/03/04

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 125 issues and merged 839 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/43?closed=1>`__

The following 164 authors contributed 3455 commits.

* Abhinav Sagar
* Abhinuv Nitin Pitale
* Adam Gomaa
* Akshay Nair
* Alex Rudy
* Alexander Rudy
* Antony Lee
* Ao Liu (frankliuao)
* Ardie Orden
* Ashley Whetter
* Ben Root
* Benjamin Bengfort
* Benjamin Congdon
* Bharat123rox
* Bingyao Liu
* Brigitta Sipocz
* Bruno Pagani
* brut
* Carsten
* Carsten Schelp
* chaoyi1
* Cho Yin Yong
* Chris Barnes
* Christer Jensen
* Christian Brodbeck
* Christoph Pohl
* chuanzhu xu
* Colin
* Cong Ma
* dabana
* DanielMatu
* David Chudzicki
* David Stansby
* Deng Tian
* depano.carlos@gmail.com
* djdt
* donchanee
* Dora Fraeman Caswell
* Elan Ernest
* Elliott Sales de Andrade
* Emlyn Price
* Eric Firing
* Eric Wieser
* Federico Ariza
* Filipe Fernandes
* fourpoints
* fredrik-1
* Gazing
* Greg Lucas
* hannah
* Harshal Prakash Patankar
* Ian Hincks
* Ian Thomas
* ilopata1
* ImportanceOfBeingErnest
* Jacobson Okoro
* James A. Bednar
* Jarrod Millman
* Javad
* jb-leger
* Jean-Benoist Leger
* jfbu
* joaonsg
* Jody Klymak
* Joel Frederico
* Johannes H. Jensen
* Johnny Gill
* Jonas Camillus Jeppesen
* Jorge Moraleda
* Joscha Reimer
* Joseph Albert
* Jouni K. Seppänen
* Joy Bhalla
* Juanjo Bazán
* Julian Mehne
* kolibril13
* krishna katyal
* ksunden
* Kyle Sunden
* Larry Bradley
* lepuchi
* luftek
* Maciej Dems
* Maik Riechert
* Marat K
* Mark Wolf
* Mark Wolfman
* Matte
* Matthias Bussonnier
* Matthias Geier
* MatthieuDartiailh
* Max Chen
* Max Humber
* Max Shinn
* MeeseeksMachine
* Michael Droettboom
* Mingkai Dong
* MinRK
* miquelastein
* Molly Rossow
* Nathan Goldbaum
* nathan78906
* Nelle Varoquaux
* Nick White
* Nicolas Courtemanche
* Nikita Kniazev
* njwhite
* O. Castany
* Oliver Natt
* Olivier
* Om Sitapara
* omsitapara23
* Oriol (Prodesk)
* Oriol Abril
* Patrick Feiring
* Patrick Shriwise
* PatrickFeiring
* Paul
* Paul Hobson
* Paul Hoffman
* Paul Ivanov
* Peter Schutt
* pharshalp
* Phil Elson
* Philippe Pinard
* Rebecca W Perry
* ResidentMario
* Richard Ji-Cathriner
* RoryIAngus
* Ryan May
* S. Fukuda
* Samesh
* Samesh Lakhotia
* sasoripathos
* SBCV
* Sebastian Bullinger
* Sergey Royz
* Siddhesh Poyarekar
* Simon Legner
* SojiroFukuda
* Steve Dower
* Taras
* Ted Drain
* teddyrendahl
* Thomas A Caswell
* Thomas Hisch
* Thomas Robitaille
* Till Hoffmann
* tillahoffmann
* Tim Hoffmann
* Tom Flannaghan
* Travis CI
* V. Armando Solé
* Vincent L.M. Mazoyer
* Viraj Mohile
* Wafa Soofi
* Warren Weckesser
* y1thof
* yeo
* Yong Cho Yin
* Yuya
* Zhili (Jerry) Pan
* zhoubecky
* Zulko

GitHub issues and pull requests:

Pull Requests (839):

* :ghpull:`16626`: Updated Readme + Setup.py for PyPa
* :ghpull:`16627`: ci: Restore nuget install step on Azure for v3.2.x.
* :ghpull:`16625`: v3.2.x: Make Azure use local FreeType.
* :ghpull:`16622`: Backport PR #16613 on branch v3.2.x (Fix edge-case in preprocess_data, if label_namer is optional and unset.)
* :ghpull:`16613`: Fix edge-case in preprocess_data, if label_namer is optional and unset.
* :ghpull:`16612`: Backport PR #16605: CI: tweak the vm images we use on azure
* :ghpull:`16611`: Backport PR #16585 on branch v3.2.x (Fix _preprocess_data for Py3.9.)
* :ghpull:`16605`: CI: tweak the vm images we use on azure
* :ghpull:`16585`: Fix _preprocess_data for Py3.9.
* :ghpull:`16541`: Merge pull request #16404 from jklymak/fix-add-base-symlognorm
* :ghpull:`16542`: Backport PR #16006: Ignore pos in StrCategoryFormatter.__call__ to di…
* :ghpull:`16543`: Backport PR #16532: Document default value of save_count parameter in…
* :ghpull:`16532`: Document default value of save_count parameter in FuncAnimation
* :ghpull:`16526`: Backport PR #16480 on v.3.2.x: Re-phrase doc for bottom kwarg to hist
* :ghpull:`16404`: FIX: add base kwarg to symlognor
* :ghpull:`16518`: Backport PR #16502 on branch v3.2.x (Document theta getters/setters)
* :ghpull:`16519`: Backport PR #16513 on branch v3.2.x (Add more FreeType tarball hashes.)
* :ghpull:`16513`: Add more FreeType tarball hashes.
* :ghpull:`16502`: Document theta getters/setters
* :ghpull:`16506`: Backport PR #16505 on branch v3.2.x (Add link to blog to front page)
* :ghpull:`16505`: Add link to blog to front page
* :ghpull:`16480`: Re-phrase doc for bottom kwarg to hist
* :ghpull:`16494`: Backport PR #16490 on branch v3.2.x (Fix some typos on the front page)
* :ghpull:`16489`: Backport PR #16272 on branch v3.2.x (Move mplot3d autoregistration api changes to 3.2.)
* :ghpull:`16490`: Fix some typos on the front page
* :ghpull:`16465`: Backport PR #16450 on branch v3.2.x (Fix interaction between sticky_edges and shared axes.)
* :ghpull:`16466`: Backport PR #16392: FIX colorbars for Norms that do not have a scale.
* :ghpull:`16392`: FIX colorbars for Norms that do not have a scale.
* :ghpull:`16450`: Fix interaction between sticky_edges and shared axes.
* :ghpull:`16453`: Backport PR #16452 on branch v3.2.x (Don't make InvertedLogTransform inherit from deprecated base class.)
* :ghpull:`16452`: Don't make InvertedLogTransform inherit from deprecated base class.
* :ghpull:`16436`: Backport PR #16435 on branch v3.2.x (Reword intro to colors api docs.)
* :ghpull:`16435`: Reword intro to colors api docs.
* :ghpull:`16399`: Backport PR #16396 on branch v3.2.x (font_manager docs cleanup.)
* :ghpull:`16396`: font_manager docs cleanup.
* :ghpull:`16397`: Backport PR #16394 on branch v3.2.x (Mark inkscape 1.0 as unsupported (at least for now).)
* :ghpull:`16394`: Mark inkscape 1.0 as unsupported (at least for now).
* :ghpull:`16286`: Fix cbars for different norms
* :ghpull:`16385`: Backport PR #16226 on branch v3.2.x: Reorganize intro section on main page
* :ghpull:`16383`: Backport PR #16379 on branch v3.2.x (FIX: catch on message content, not module)
* :ghpull:`16226`: Reorganize intro section on main page
* :ghpull:`16364`: Backport PR #16344 on branch v3.2.x (Cast vmin/vmax to floats before nonsingular-expanding them.)
* :ghpull:`16344`: Cast vmin/vmax to floats before nonsingular-expanding them.
* :ghpull:`16360`: Backport PR #16347 on branch v3.2.x (FIX: catch warnings from pandas in cbook._check_1d)
* :ghpull:`16357`: Backport PR #16330 on branch v3.2.x (Clearer signal handling)
* :ghpull:`16349`: Backport PR #16255 on branch v3.2.x (Move version info to sidebar)
* :ghpull:`16346`: Backport PR #16298 on branch v3.2.x (Don't recursively call draw_idle when updating artists at draw time.)
* :ghpull:`16331`: Backport PR #16308 on branch v3.2.x (CI: Use Ubuntu Bionic compatible package names)
* :ghpull:`16332`: Backport PR #16308 on v3.2.x: CI: Use Ubuntu Bionic compatible package names
* :ghpull:`16324`: Backport PR #16323 on branch v3.2.x (Add sphinx doc for Axis.axis_name.)
* :ghpull:`16325`: Backport PR #15462 on v3.2.x: Simplify azure setup.
* :ghpull:`16323`: Add sphinx doc for Axis.axis_name.
* :ghpull:`16321`: Backport PR #16311 on branch v3.2.x (don't override non-Python signal handlers)
* :ghpull:`16308`: CI: Use Ubuntu Bionic compatible package names
* :ghpull:`16306`: Backport PR #16300 on branch v3.2.x (Don't default to negative radii in polar plot.)
* :ghpull:`16305`: Backport PR #16250 on branch v3.2.x (Fix zerolen intersect)
* :ghpull:`16300`: Don't default to negative radii in polar plot.
* :ghpull:`16278`: Backport PR #16273 on branch v3.2.x (DOC: Changing the spelling of co-ordinates.)
* :ghpull:`16260`: Backport PR #16259 on branch v3.2.x (TST: something changed in pytest 5.3.3 that breaks our qt fixtures)
* :ghpull:`16259`: TST: something changed in pytest 5.3.3 that breaks our qt fixtures
* :ghpull:`16238`: Backport PR #16235 on branch v3.2.x (FIX: AttributeError in TimerBase.start)
* :ghpull:`16211`: DOC: ValidateInterval was deprecated in 3.2, not 3.1
* :ghpull:`16224`: Backport PR #16223 on branch v3.2.x (Added DNA Features Viewer description + screenshot in docs/thirdparty/)
* :ghpull:`16223`: Added DNA Features Viewer description + screenshot in docs/thirdparty/
* :ghpull:`16222`: Backport PR #16212 on branch v3.2.x (Fix deprecation from #13544)
* :ghpull:`16212`: Fix deprecation from #13544
* :ghpull:`16207`: Backport PR #16189 on branch v3.2.x (MNT: set default canvas when un-pickling)
* :ghpull:`16189`: MNT: set default canvas when un-pickling
* :ghpull:`16179`: Backport PR #16175: FIX: ignore axes that aren't visible
* :ghpull:`16175`: FIX: ignore axes that aren't visible
* :ghpull:`16168`: Backport PR #16166 on branch v3.2.x (Add badge for citing 3.1.2)
* :ghpull:`16148`: Backport PR #16128 on branch v3.2.x (CI: Do not use nbformat 5.0.0/5.0.1 for testing)
* :ghpull:`16145`: Backport PR #16053 on branch v3.2.x (Fix v_interval setter)
* :ghpull:`16128`: CI: Do not use nbformat 5.0.0/5.0.1 for testing
* :ghpull:`16135`: Backport PR #16112 on branch v3.2.x (CI: Fail when failed to install dependencies)
* :ghpull:`16132`: Backport PR #16126 on branch v3.2.x (TST: test_fork: Missing join)
* :ghpull:`16124`: Backport PR #16105 on branch v3.2.x (Fix legend dragging.)
* :ghpull:`16122`: Backport PR #16113 on branch v3.2.x (Renderer Graphviz inheritance diagrams as svg)
* :ghpull:`16105`: Fix legend dragging.
* :ghpull:`16113`: Renderer Graphviz inheritance diagrams as svg
* :ghpull:`16112`: CI: Fail when failed to install dependencies
* :ghpull:`16119`: Backport PR #16065 on branch v3.2.x (Nicer formatting of community aspects on front page)
* :ghpull:`16074`: Backport PR #16061 on branch v3.2.x (Fix deprecation message for axes_grid1.colorbar.)
* :ghpull:`16093`: Backport PR #16079 on branch v3.2.x (Fix restuctured text formatting)
* :ghpull:`16094`: Backport PR #16080 on branch v3.2.x (Cleanup docstrings in backend_bases.py)
* :ghpull:`16086`: FIX: use supported attribute to check pillow version
* :ghpull:`16084`: Backport PR #16077 on branch v3.2.x (Fix some typos)
* :ghpull:`16077`: Fix some typos
* :ghpull:`16079`: Fix restuctured text formatting
* :ghpull:`16080`: Cleanup docstrings in backend_bases.py
* :ghpull:`16061`: Fix deprecation message for axes_grid1.colorbar.
* :ghpull:`16006`: Ignore pos in StrCategoryFormatter.__call__ to display correct label in the preview window
* :ghpull:`16056`: Backport PR #15864 on branch v3.2.x ([Add the info of 'sviewgui' in thirdparty package])
* :ghpull:`15864`: Add 'sviewgui' to list of thirdparty packages
* :ghpull:`16055`: Backport PR #16037 on branch v3.2.x (Doc: use empty ScalarMappable for colorbars with no associated image.)
* :ghpull:`16054`: Backport PR #16048 on branch v3.2.x (Document that colorbar() takes a label kwarg.)
* :ghpull:`16037`: Doc: use empty ScalarMappable for colorbars with no associated image.
* :ghpull:`16048`: Document that colorbar() takes a label kwarg.
* :ghpull:`16042`: Backport PR #16031 on branch v3.2.x (Fix docstring of hillshade().)
* :ghpull:`16033`: Backport PR #16028 on branch v3.2.x (Prevent FigureCanvasQT_draw_idle recursively calling itself.)
* :ghpull:`16021`: Backport PR #16007 on branch v3.2.x (Fix search on nested pages)
* :ghpull:`16019`: Backport PR #15735 on branch v3.2.x (Cleanup some mplot3d docstrings.)
* :ghpull:`15987`: Backport PR #15886 on branch v3.2.x (Fix Annotation using different units and different coords on x/y.)
* :ghpull:`15886`: Fix Annotation using different units and different coords on x/y.
* :ghpull:`15984`: Backport PR #15970 on branch v3.2.x (Process clip paths the same way as regular Paths.)
* :ghpull:`15970`: Process clip paths the same way as regular Paths.
* :ghpull:`15963`: Backport PR #15937 on branch v3.2.x (Don't hide exceptions in FontManager.addfont.)
* :ghpull:`15956`: Backport PR #15901 on branch v3.2.x (Update backend_nbagg for removal of Gcf._activeQue.)
* :ghpull:`15937`: Don't hide exceptions in FontManager.addfont.
* :ghpull:`15959`: Backport PR #15953 on branch v3.2.x (Update donation link)
* :ghpull:`15901`: Update backend_nbagg for removal of Gcf._activeQue.
* :ghpull:`15954`: Backport PR #15914 on branch v3.2.x (Example for sigmoid function with horizontal lines)
* :ghpull:`15914`: Example for sigmoid function with horizontal lines
* :ghpull:`15930`: Backport PR #15925 on branch v3.2.x (Optimize setting units to None when they're already None.)
* :ghpull:`15925`: Optimize setting units to None when they're already None.
* :ghpull:`15915`: Backport PR #15903 on branch v3.2.x (Correctly handle non-affine transData in Collection.get_datalim.)
* :ghpull:`15903`: Correctly handle non-affine transData in Collection.get_datalim.
* :ghpull:`15908`: Backport PR #15857 on branch v3.2.x (LassoSelection shouldn't useblit on canvas not supporting blitting.)
* :ghpull:`15857`: LassoSelection shouldn't useblit on canvas not supporting blitting.
* :ghpull:`15905`: Backport PR #15763 on branch v3.2.x (Skip webagg test if tornado is not available.)
* :ghpull:`15882`: Backport PR #15859 on branch v3.2.x (Doc: Move search field into nav bar)
* :ghpull:`15868`: Backport PR #15848 on branch v3.2.x: Cleanup environment variables FAQ
* :ghpull:`15872`: Backport PR #15869 on branch v3.2.x (Update markers docs.)
* :ghpull:`15869`: Update markers docs.
* :ghpull:`15867`: Backport PR #15789 on branch v3.2.x (Cleanup xticks/yticks docstrings.)
* :ghpull:`15870`: Backport PR #15865 on branch v3.2.x (Fix a typo)
* :ghpull:`15871`: Backport PR #15824 on branch v3.2.x (Document doc style for default values)
* :ghpull:`15824`: Document doc style for default values
* :ghpull:`15865`: Fix a typo
* :ghpull:`15789`: Cleanup xticks/yticks docstrings.
* :ghpull:`15862`: Backport PR #15851 on branch v3.2.x (ffmpeg is available on default ubuntu packages now)
* :ghpull:`15848`: Cleanup environment variables FAQ.
* :ghpull:`15844`: Backport PR #15841 on branch v3.2.x (DOC: specify the expected shape in the Collection.set_offset)
* :ghpull:`15841`: DOC: specify the expected shape in the Collection.set_offset
* :ghpull:`15837`: Backport PR #15799 on branch v3.2.x (Improve display of author names on PDF titlepage of matplotlib own docs)
* :ghpull:`15799`: Improve display of author names on PDF titlepage of matplotlib own docs
* :ghpull:`15831`: Backport PR #15829 on branch v3.2.x (In C extensions, use FutureWarning, not DeprecationWarning.)
* :ghpull:`15829`: In C extensions, use FutureWarning, not DeprecationWarning.
* :ghpull:`15818`: Backport PR #15619 on branch v3.2.x (Improve zorder demo)
* :ghpull:`15819`: Backport PR #15601 on branch v3.2.x (Fix FontProperties conversion to/from strings)
* :ghpull:`15601`: Fix FontProperties conversion to/from strings
* :ghpull:`15619`: Improve zorder demo
* :ghpull:`15810`: Backport PR #15809 on branch v3.2.x (Exclude artists from legend using label attributte)
* :ghpull:`15809`: Exclude artists from legend using label attributte
* :ghpull:`15808`: Backport PR #15513 on branch v3.2.x (Separate plots using #### in make_room_for_ylabel_using_axesgrid.py)
* :ghpull:`15513`: Separate plots using #### in make_room_for_ylabel_using_axesgrid.py
* :ghpull:`15807`: Backport PR #15791 on branch v3.2.x (Cleanup backend_bases docstrings.)
* :ghpull:`15791`: Cleanup backend_bases docstrings.
* :ghpull:`15803`: Backport PR #15795 on branch v3.2.x (Remove incorrect statement re2: colorbars in image tutorial.)
* :ghpull:`15795`: Remove incorrect statement re: colorbars in image tutorial.
* :ghpull:`15794`: Backport PR #15793 on branch v3.2.x (fix a couple typos in tutorials)
* :ghpull:`15793`: fix a couple typos in tutorials
* :ghpull:`15774`: Backport PR #15748 on branch v3.2.x (Fix incorrect macro in FT2Font setup.)
* :ghpull:`15748`: Fix incorrect macro in FT2Font setup.
* :ghpull:`15759`: Backport PR #15751 on branch v3.2.x (Modernize FAQ entry for plt.show().)
* :ghpull:`15762`: Backport PR #15752 on branch v3.2.x (Update boxplot/violinplot faq.)
* :ghpull:`15755`: Backport PR #15661 on branch v3.2.x (Document scope of 3D scatter depthshading.)
* :ghpull:`15742`: Backport PR #15729 on branch v3.2.x (Catch correct parse error type for dateutil >= 2.8.1)
* :ghpull:`15738`: Backport PR #15737 on branch v3.2.x (Fix env override in WebAgg backend test.)
* :ghpull:`15724`: Backport PR #15718 on branch v3.2.x (Update donation link)
* :ghpull:`15716`: Backport PR #15683 on branch v3.2.x (Cleanup dates.py docstrings.)
* :ghpull:`15683`: Cleanup dates.py docstrings.
* :ghpull:`15688`: Backport PR #15682 on branch v3.2.x (Make histogram_bin_edges private.)
* :ghpull:`15682`: Make histogram_bin_edges private.
* :ghpull:`15666`: Backport PR #15649 on branch v3.2.x (Fix searchindex.js loading when ajax fails (because e.g. CORS in embedded iframes))
* :ghpull:`15669`: Backport PR #15654 on branch v3.2.x (Fix some broken links.)
* :ghpull:`15660`: Backport PR #15647 on branch v3.2.x (Update some links)
* :ghpull:`15653`: Backport PR #15623 on branch v3.2.x (Docstring for Artist.mouseover)
* :ghpull:`15623`: Docstring for Artist.mouseover
* :ghpull:`15634`: Backport PR #15626 on branch v3.2.x (Note minimum supported version for fontconfig.)
* :ghpull:`15633`: Backport PR #15620 on branch v3.2.x (TST: Increase tolerance of some tests for aarch64)
* :ghpull:`15626`: Note minimum supported version for fontconfig.
* :ghpull:`15632`: Backport PR #15627 on branch v3.2.x (Make it easier to test various animation writers in examples.)
* :ghpull:`15620`: TST: Increase tolerance of some tests for aarch64
* :ghpull:`15627`: Make it easier to test various animation writers in examples.
* :ghpull:`15618`: Backport PR #15613 on branch v3.2.x (Revert "Don't bother with manually resizing the Qt main window.")
* :ghpull:`15613`: Revert "Don't bother with manually resizing the Qt main window."
* :ghpull:`15593`: Backport PR #15590 on branch v3.2.x (Rename numpy to NumPy in docs.)
* :ghpull:`15590`: Rename numpy to NumPy in docs.
* :ghpull:`15588`: Backport PR #15478 on branch v3.2.x (Make ConciseDateFormatter obey timezone)
* :ghpull:`15478`: Make ConciseDateFormatter obey timezone
* :ghpull:`15583`: Backport PR #15512 on branch v3.2.x
* :ghpull:`15584`: Backport PR #15579 on branch v3.2.x (Remove matplotlib.sphinxext.tests from __init__.py)
* :ghpull:`15579`: Remove matplotlib.sphinxext.tests from __init__.py
* :ghpull:`15577`: Backport PR #14705 on branch v3.2.x (Correctly size non-ASCII characters in agg backend.)
* :ghpull:`14705`: Correctly size non-ASCII characters in agg backend.
* :ghpull:`15572`: Backport PR #15452 on branch v3.2.x (Improve example for tick formatters)
* :ghpull:`15570`: Backport PR #15561 on branch v3.2.x (Update thirdparty scalebar)
* :ghpull:`15452`: Improve example for tick formatters
* :ghpull:`15545`: Backport PR #15429 on branch v3.2.x (Fix OSX build on azure)
* :ghpull:`15544`: Backport PR #15537 on branch v3.2.x (Add a third party package in the doc: matplotlib-scalebar)
* :ghpull:`15561`: Update thirdparty scalebar
* :ghpull:`15567`: Backport PR #15562 on branch v3.2.x (Improve docsting of AxesImage)
* :ghpull:`15562`: Improve docsting of AxesImage
* :ghpull:`15565`: Backport PR #15556 on branch v3.2.x (Fix test suite compat with ghostscript 9.50.)
* :ghpull:`15556`: Fix test suite compat with ghostscript 9.50.
* :ghpull:`15560`: Backport PR #15553 on branch v3.2.x (DOC: add cache-buster query string to css path)
* :ghpull:`15552`: Backport PR #15528 on branch v3.2.x (Declutter home page)
* :ghpull:`15554`: Backport PR #15523 on branch v3.2.x (numpydoc AxesImage)
* :ghpull:`15523`: numpydoc AxesImage
* :ghpull:`15549`: Backport PR #15516 on branch v3.2.x (Add logo like font)
* :ghpull:`15543`: Backport PR #15539 on branch v3.2.x (Small cleanups to backend docs.)
* :ghpull:`15542`: Backport PR #15540 on branch v3.2.x (axisartist tutorial fixes.)
* :ghpull:`15537`: Add a third party package in the doc: matplotlib-scalebar
* :ghpull:`15541`: Backport PR #15533 on branch v3.2.x (Use svg instead of png for website logo)
* :ghpull:`15539`: Small cleanups to backend docs.
* :ghpull:`15540`: axisartist tutorial fixes.
* :ghpull:`15538`: Backport PR #15535 on branch v3.2.x (Avoid really long lines in event handling docs.)
* :ghpull:`15535`: Avoid really long lines in event handling docs.
* :ghpull:`15531`: Backport PR #15527 on branch v3.2.x (Clarify imshow() docs concerning scaling and grayscale images)
* :ghpull:`15527`: Clarify imshow() docs concerning scaling and grayscale images
* :ghpull:`15522`: Backport PR #15500 on branch v3.2.x (Improve antialiasing example)
* :ghpull:`15524`: Backport PR #15499 on branch v3.2.x (Do not show path in font table example)
* :ghpull:`15525`: Backport PR #15498 on branch v3.2.x (Simplify matshow example)
* :ghpull:`15498`: Simplify matshow example
* :ghpull:`15499`: Do not show path in font table example
* :ghpull:`15521`: Backport PR #15519 on branch v3.2.x (FIX: fix anti-aliasing zoom bug)
* :ghpull:`15500`: Improve antialiasing example
* :ghpull:`15519`: FIX: fix anti-aliasing zoom bug
* :ghpull:`15510`: Backport PR #15489 on branch v3.2.x (DOC: adding main nav to site)
* :ghpull:`15495`: Backport PR #15486 on branch v3.2.x (Fixes an error in the documentation of Ellipse)
* :ghpull:`15488`: Backport PR #15372 on branch v3.2.x (Add example for drawstyle)
* :ghpull:`15490`: Backport PR #15487 on branch v3.2.x (Fix window not always raised in Qt example)
* :ghpull:`15487`: Fix window not always raised in Qt example
* :ghpull:`15372`: Add example for drawstyle
* :ghpull:`15485`: Backport PR #15454 on branch v3.2.x (Rewrite Anscombe's quartet example)
* :ghpull:`15483`: Backport PR #15480 on branch v3.2.x (Fix wording in [packages] section of setup.cfg)
* :ghpull:`15454`: Rewrite Anscombe's quartet example
* :ghpull:`15480`: Fix wording in [packages] section of setup.cfg
* :ghpull:`15477`: Backport PR #15464 on branch v3.2.x (Remove unused code (remainder from #15453))
* :ghpull:`15471`: Backport PR #15460 on branch v3.2.x (Fix incorrect value check in axes_grid.)
* :ghpull:`15456`: Backport PR #15453 on branch v3.2.x (Improve example for tick locators)
* :ghpull:`15457`: Backport PR #15450 on branch v3.2.x (API: rename DivergingNorm to TwoSlopeNorm)
* :ghpull:`15450`: API: rename DivergingNorm to TwoSlopeNorm
* :ghpull:`15434`: In imsave, let pnginfo have precedence over metadata.
* :ghpull:`15445`: Backport PR #15439 on branch v3.2.x (DOC: mention discourse main page)
* :ghpull:`15425`: Backport PR #15422 on branch v3.2.x (FIX: typo in attribute lookup)
* :ghpull:`15449`: DOC: fix build
* :ghpull:`15429`: Fix OSX build on azure
* :ghpull:`15420`: Backport PR #15380 on branch v3.2.x (Update docs of BoxStyle)
* :ghpull:`15380`: Update docs of BoxStyle
* :ghpull:`15300`: CI: use python -m to make sure we are using the pip/pytest we want
* :ghpull:`15414`: Backport PR #15413 on branch v3.2.x (catch OSError instead of FileNotFoundError in _get_executable_info to resolve #15399)
* :ghpull:`15413`: catch OSError instead of FileNotFoundError in _get_executable_info to resolve #15399
* :ghpull:`15406`: Backport PR #15347 on branch v3.2.x (Fix axes.hist bins units)
* :ghpull:`15405`: Backport PR #15391 on branch v3.2.x (Increase fontsize in inheritance graphs)
* :ghpull:`15347`: Fix axes.hist bins units
* :ghpull:`15391`: Increase fontsize in inheritance graphs
* :ghpull:`15389`: Backport PR #15379 on branch v3.2.x (Document formatting strings in the docs)
* :ghpull:`15379`: Document formatting strings in the docs
* :ghpull:`15386`: Backport PR #15385 on branch v3.2.x (Reword hist() doc.)
* :ghpull:`15385`: Reword hist() doc.
* :ghpull:`15377`: Backport PR #15357 on branch v3.2.x (Add 'step' and 'barstacked' to histogram_histtypes demo)
* :ghpull:`15357`: Add 'step' and 'barstacked' to histogram_histtypes demo
* :ghpull:`15366`: Backport PR #15364 on branch v3.2.x (DOC: fix typo in colormap docs)
* :ghpull:`15362`: Backport PR #15350 on branch v3.2.x (Don't generate double-reversed cmaps ("viridis_r_r", ...).)
* :ghpull:`15360`: Backport PR #15258 on branch v3.2.x (Don't fallback to view limits when autoscale()ing no data.)
* :ghpull:`15350`: Don't generate double-reversed cmaps ("viridis_r_r", ...).
* :ghpull:`15258`: Don't fallback to view limits when autoscale()ing no data.
* :ghpull:`15299`: Backport PR #15296 on branch v3.2.x (Fix typo/bug from 18cecf7)
* :ghpull:`15327`: Backport PR #15326 on branch v3.2.x (List of minimal versions of dependencies)
* :ghpull:`15326`: List of minimal versions of dependencies
* :ghpull:`15317`: Backport PR #15291 on branch v3.2.x (Remove error_msg_qt from backend_qt4.)
* :ghpull:`15316`: Backport PR #15283 on branch v3.2.x (Don't default axes_grid colorbar locator to MaxNLocator.)
* :ghpull:`15291`: Remove error_msg_qt from backend_qt4.
* :ghpull:`15283`: Don't default axes_grid colorbar locator to MaxNLocator.
* :ghpull:`15315`: Backport PR #15308 on branch v3.2.x (Doc: Add close event to list of events)
* :ghpull:`15308`: Doc: Add close event to list of events
* :ghpull:`15312`: Backport PR #15307 on branch v3.2.x (DOC: center footer)
* :ghpull:`15307`: DOC: center footer
* :ghpull:`15276`: Backport PR #15271 on branch v3.2.x (Fix font weight validation)
* :ghpull:`15279`: Backport PR #15252 on branch v3.2.x (Mention labels and milestones in PR review guidelines)
* :ghpull:`15252`: Mention labels and milestones in PR review guidelines
* :ghpull:`15268`: Backport PR #15266 on branch v3.2.x (Embedding in Tk example: Fix toolbar being clipped.)
* :ghpull:`15269`: Backport PR #15267 on branch v3.2.x (added multi-letter example to mathtext tutorial)
* :ghpull:`15267`: added multi-letter example to mathtext tutorial
* :ghpull:`15266`: Embedding in Tk example: Fix toolbar being clipped.
* :ghpull:`15243`: Move some new API changes to the correct place
* :ghpull:`15245`: Fix incorrect calls to warn_deprecated.
* :ghpull:`15239`: Composite against white, not the savefig.facecolor rc, in print_jpeg.
* :ghpull:`15227`: contains_point() docstring fixes
* :ghpull:`15242`: Cleanup widgets docstrings.
* :ghpull:`14889`: Support pixel-by-pixel alpha in imshow.
* :ghpull:`14928`: Logit scale nonsingular
* :ghpull:`14998`: Fix nonlinear spine positions & inline Spine._calc_offset_transform into get_spine_transform.
* :ghpull:`15231`: Doc: Do not write default for non-existing rcParams
* :ghpull:`15222`: Cleanup projections/__init__.py.
* :ghpull:`15228`: Minor docstring style cleanup
* :ghpull:`15237`: Cleanup widgets.py.
* :ghpull:`15229`: Doc: Fix Bbox and BboxBase links
* :ghpull:`15235`: Kill FigureManagerTk._num.
* :ghpull:`15234`: Drop mention of msinttypes in Windows build.
* :ghpull:`15224`: Avoid infinite loop when switching actions in qt backend.
* :ghpull:`15230`: Doc: Remove hard-documented rcParams defaults
* :ghpull:`15149`: pyplot.style.use() to accept pathlib.Path objects as arguments
* :ghpull:`15220`: Correctly format floats passed to pgf backend.
* :ghpull:`15216`: Update docstrings of contains_point(s) methods
* :ghpull:`15209`: Exclude s-g generated files from flake8 check.
* :ghpull:`15204`: PEP8ify some variable names.
* :ghpull:`15196`: Force html4 writer for sphinx 2
* :ghpull:`13544`: Improve handling of subplots spanning multiple gridspec cells.
* :ghpull:`15194`: Trivial style fixes.
* :ghpull:`15202`: Deprecate the renderer parameter to Figure.tight_layout.
* :ghpull:`15195`: Fix integers being passed as length to quiver3d.
* :ghpull:`15180`: Add some more internal links to 3.2.0 what's new
* :ghpull:`13510`: Change Locator MAXTICKS checking to emitting a log at WARNING level.
* :ghpull:`15184`: Mark missing_references extension as parallel read safe
* :ghpull:`15150`: Autodetect whether pgf can use \includegraphics[interpolate].
* :ghpull:`15163`: 3.2.0 API changes page
* :ghpull:`15176`: What's new for 3.2.0
* :ghpull:`11947`: Ensure streamplot Euler step is always called when going out of bounds.
* :ghpull:`13702`: Deduplicate methods shared between Container and Artist.
* :ghpull:`15169`: TST: verify warnings fail the test suite
* :ghpull:`14888`: Replace some polar baseline images by check_figures_equal.
* :ghpull:`15027`: More readability improvements on axis3d.
* :ghpull:`15171`: Add useful error message when trying to add Slider to 3DAxes
* :ghpull:`13775`: Doc: Scatter Hist example update
* :ghpull:`15164`: removed a typo
* :ghpull:`15152`: Support for shorthand hex colors.
* :ghpull:`15159`: Follow up on #14424 for docstring
* :ghpull:`14424`: ENH: Add argument size validation to quiver.
* :ghpull:`15137`: DOC: add example to power limit API change note
* :ghpull:`15144`: Improve local page contents CSS
* :ghpull:`15143`: Restore doc references.
* :ghpull:`15124`: Replace parameter lists with square brackets
* :ghpull:`13077`: fix FreeType build on Azure
* :ghpull:`15123`: Improve categorical example
* :ghpull:`15134`: Fix missing references in doc build.
* :ghpull:`13937`: Use PYTHONFAULTHANDLER to switch on the Python fault handler.
* :ghpull:`13452`: Replace axis_artist.AttributeCopier by normal inheritance.
* :ghpull:`15045`: Resize canvas when changing figure size
* :ghpull:`15122`: Fixed app creation in qt5 backend (see #15100)
* :ghpull:`15099`: Add lightsource parameter to bar3d
* :ghpull:`14876`: Inline some afm parsing code.
* :ghpull:`15119`: Deprecate a validator for a deprecated rcParam value.
* :ghpull:`15121`: Fix Stacked bar graph example
* :ghpull:`15113`: Cleanup layout_from_subplotspec.
* :ghpull:`13543`: Remove zip_safe=False flag from setup.py.
* :ghpull:`12860`: ENH: LogLocator: check for correct dimension of subs added
* :ghpull:`14349`: Replace ValidateInterval by simpler specialized validators.
* :ghpull:`14352`: Remove redundant is_landscape kwarg from backend_ps helpers.
* :ghpull:`15087`: Pass gid to renderer
* :ghpull:`14703`: Don't bother with manually resizing the Qt main window.
* :ghpull:`14833`: Reuse TexManager implementation in convert_psfrags.
* :ghpull:`14893`: Update layout.html for sphinx themes
* :ghpull:`15098`: Simplify symlog range determination logic
* :ghpull:`15112`: Cleanup legend() docstring.
* :ghpull:`15108`: Fix doc build and resync matplotlibrc.template with actual defaults.
* :ghpull:`14940`: Fix text kerning calculations and some FT2Font cleanup
* :ghpull:`15082`: Privatize font_manager.JSONEncoder.
* :ghpull:`15106`: Update docs of GridSpec
* :ghpull:`14832`: ENH:made default tick formatter to switch to scientific notation earlier
* :ghpull:`15086`: Style fixes.
* :ghpull:`15073`: Add entry for blume to thirdparty package index
* :ghpull:`15095`: Simplify _png extension by handling file open/close in Python.
* :ghpull:`15092`: MNT: Add test for aitoff-projection
* :ghpull:`15101`: Doc: fix typo in contour doc
* :ghpull:`14624`: Fix axis inversion with loglocator and logitlocator.
* :ghpull:`15088`: Fix more doc references.
* :ghpull:`15063`: Add Comic Neue as a fantasy font.
* :ghpull:`14867`: Propose change to PR merging policy.
* :ghpull:`15068`: Add FontManager.addfont to register fonts at specific paths.
* :ghpull:`13397`: Deprecate axes_grid1.colorbar (in favor of matplotlib's own).
* :ghpull:`14521`: Move required_interactive_framework to canvas class.
* :ghpull:`15083`: Cleanup spines example.
* :ghpull:`14997`: Correctly set formatters and locators on removed shared axis
* :ghpull:`15064`: Fix eps hatching in MacOS Preview
* :ghpull:`15074`: Write all ACCEPTS markers in docstrings as comments.
* :ghpull:`15078`: Clarify docstring of FT2Font.get_glyph_name.
* :ghpull:`15080`: Fix cross-references in API changes < 3.0.0.
* :ghpull:`15072`: Cleanup patheffects.
* :ghpull:`15071`: Cleanup offsetbox.py.
* :ghpull:`15070`: Fix cross-references in API changes < 2.0.0.
* :ghpull:`10691`: Fix for shared axes diverging after setting tick markers
* :ghpull:`15069`: Style fixes for font_manager.py.
* :ghpull:`15067`: Fix cross-references in API changes < 1.0
* :ghpull:`15061`: Fix cross-references in tutorials and FAQ
* :ghpull:`15060`: Fix cross-references in examples.
* :ghpull:`14957`: Documentation for using ConnectionPatch across Axes with constrained…
* :ghpull:`15053`: Make citation bit of README less wordy
* :ghpull:`15044`: numpydoc set_size_inches docstring
* :ghpull:`15050`: Clarify unnecessary special handling for colons in paths.
* :ghpull:`14797`: DOC: create a Agg figure without pyplot in buffer example
* :ghpull:`14844`: Add citation info to README
* :ghpull:`14884`: Do not allow canvas size to become smaller than MinSize in wx backend…
* :ghpull:`14941`: Improvements to make_icons.py.
* :ghpull:`15048`: DOC: more nitpick follow up
* :ghpull:`15043`: Fix Docs: Don’t warn for unused ignores
* :ghpull:`15025`: Re-write text wrapping logic
* :ghpull:`14840`: Don't assume transform is valid on access to matrix.
* :ghpull:`14862`: Make optional in docstrings optional
* :ghpull:`15028`: Python version conf.py
* :ghpull:`15033`: FIX: un-break nightly wheels on py37
* :ghpull:`15046`: v3.1.x merge up
* :ghpull:`15015`: Fix bad missing-references.json due to PR merge race condition.
* :ghpull:`14581`: Make logscale bar/hist autolimits more consistents.
* :ghpull:`15034`: Doc fix nitpick
* :ghpull:`14614`: Deprecate {x,y,z}axis_date.
* :ghpull:`14991`: Handle inherited is_separable, has_inverse in transform props detection.
* :ghpull:`15032`: Clarify effect of axis('equal') on explicit data limits
* :ghpull:`15031`: Update docs of GridSpec
* :ghpull:`14106`: Describe FigureManager
* :ghpull:`15024`: Update docs of GridSpecBase
* :ghpull:`14906`: Deprecate some FT2Image methods.
* :ghpull:`14963`: More Axis3D cleanup.
* :ghpull:`15009`: Provide signatures to some C-level classes and methods.
* :ghpull:`14968`: DOC: colormap manipulation tutorial update
* :ghpull:`15006`: Deprecate get/set_*ticks minor positional use
* :ghpull:`14989`: DOC:Update axes documentation
* :ghpull:`14871`: Parametrize determinism tests.
* :ghpull:`14768`: DOC: Enable nitpicky
* :ghpull:`15013`: Matplotlib requires Python 3.6, which in turn requires Mac OS X 10.6+
* :ghpull:`15012`: Fix typesetting of "GitHub"
* :ghpull:`14954`: Cleanup polar_legend example.
* :ghpull:`14519`: Check parameters of ColorbarBase
* :ghpull:`14942`: Make _classic_test style a tiny patch on top of classic.
* :ghpull:`14988`: pathlibify/fstringify setup/setupext.
* :ghpull:`14511`: Deprecate allowing scalars for fill_between where
* :ghpull:`14493`: Remove deprecated fig parameter form GridSpecBase.get_subplot_params()
* :ghpull:`14995`: Further improve backend tutorial.
* :ghpull:`15000`: Use warnings.warn, not logging.warning, in microseconds locator warning.
* :ghpull:`14990`: Fix nonsensical transform in mixed-mode axes aspect computation.
* :ghpull:`15002`: No need to access filesystem in test_dates.py.
* :ghpull:`14549`: Improve backends documentation
* :ghpull:`14774`: Fix image bbox clip.
* :ghpull:`14978`: Typo fixes in pyplot.py
* :ghpull:`14702`: Don't enlarge toolbar for Qt high-dpi.
* :ghpull:`14922`: Autodetect some transform properties.
* :ghpull:`14962`: Replace inspect.getfullargspec by inspect.signature.
* :ghpull:`14958`: Improve docs of toplevel module.
* :ghpull:`14926`: Save a matrix unpacking/repacking in offsetbox.
* :ghpull:`14961`: Cleanup demo_agg_filter.
* :ghpull:`14924`: Kill the C-level (private) RendererAgg.buffer_rgba, which returns a copy.
* :ghpull:`14946`: Delete virtualenv faq.
* :ghpull:`14944`: Shorten style.py.
* :ghpull:`14931`: Deprecate some obscure rcParam synonyms.
* :ghpull:`14947`: Fix inaccuracy re: backends in intro tutorial.
* :ghpull:`14904`: Fix typo in secondary_axis.py example.
* :ghpull:`14925`: Support passing spine bounds as single tuple.
* :ghpull:`14921`: DOC: Make abbreviation of versus consistent.
* :ghpull:`14739`: Improve indentation of Line2D properties in docstrings.
* :ghpull:`14923`: In examples, prefer buffer_rgba to print_to_buffer.
* :ghpull:`14908`: Make matplotlib.style.available sorted alphabetically.
* :ghpull:`13567`: Deprecate MovieWriterRegistry cache-dirtyness system.
* :ghpull:`14879`: Error out when unsupported kwargs are passed to Scale.
* :ghpull:`14512`: Logit scale, changes in LogitLocator and LogitFormatter
* :ghpull:`12415`: ENH: fig.set_size to allow non-inches units
* :ghpull:`13783`: Deprecate disable_internet.
* :ghpull:`14886`: Further simplify the flow of pdf text output.
* :ghpull:`14894`: Make slowness warning for legend(loc="best") more accurate.
* :ghpull:`14891`: Fix nightly test errors
* :ghpull:`14895`: Fix typos
* :ghpull:`14890`: Remove unused private helper method in mplot3d.
* :ghpull:`14872`: Unify text layout paths.
* :ghpull:`8183`: Allow array alpha for imshow
* :ghpull:`13832`: Vectorize handling of stacked/cumulative in hist().
* :ghpull:`13630`: Simplify PolarAxes.can_pan.
* :ghpull:`14565`: Rewrite an argument check to _check_getitem
* :ghpull:`14875`: Cleanup afm module docstring.
* :ghpull:`14880`: Fix animation blitting for plots with shared axes
* :ghpull:`14870`: FT2Font.get_char_index never returns None.
* :ghpull:`13463`: Deprecate Locator.autoscale.
* :ghpull:`13724`: ENH: anti-alias down-sampled images
* :ghpull:`14848`: Clearer error message for plt.axis()
* :ghpull:`14660`: colorbar(label=None) should give an empty label
* :ghpull:`14654`: Cleanup of docstrings of scales
* :ghpull:`14868`: Update bar stacked example to directly manipulate axes.
* :ghpull:`14749`: Fix get_canvas_width_height() for pgf backend.
* :ghpull:`14776`: Make ExecutableUnavailableError
* :ghpull:`14843`: Don't try to cleanup CallbackRegistry during interpreter shutdown.
* :ghpull:`14849`: Improve tkagg icon resolution
* :ghpull:`14866`: changed all readme headings to verbs
* :ghpull:`13364`: Numpyfy tick handling code in Axis3D.
* :ghpull:`13642`: FIX: get_datalim for collection
* :ghpull:`14860`: Stopgap fix for pandas converters in tests.
* :ghpull:`6498`: Check canvas identity in Artist.contains.
* :ghpull:`14707`: Add titlecolor in rcParams
* :ghpull:`14853`: Fix typo in set_adjustable check.
* :ghpull:`14845`: More cleanups.
* :ghpull:`14809`: Clearer calls to ConnectionPatch.
* :ghpull:`14716`: Use str instead of string as type in docstrings
* :ghpull:`14338`: Simplify/pathlibify image_comparison.
* :ghpull:`8930`: timedelta formatter
* :ghpull:`14733`: Deprecate FigureFrameWx.statusbar & NavigationToolbar2Wx.statbar.
* :ghpull:`14713`: Unite masked and NaN plot examples
* :ghpull:`14576`: Let Axes3D share have_units, _on_units_changed with 2d axes.
* :ghpull:`14575`: Make ticklabel_format work both for 2D and 3D axes.
* :ghpull:`14834`: DOC: Webpage not formatted correctly on gallery docs
* :ghpull:`14730`: Factor out common parts of wx event handlers.
* :ghpull:`14727`: Fix axes aspect for non-linear, non-log, possibly mixed-scale axes.
* :ghpull:`14835`: Only allow set_adjustable("datalim") for axes with standard data ratios.
* :ghpull:`14746`: Simplify Arrow constructor.
* :ghpull:`14752`: Doc changes to git setup
* :ghpull:`14732`: Deduplicate wx configure_subplots tool.
* :ghpull:`14715`: Use array-like in docs
* :ghpull:`14728`: More floating_axes cleanup.
* :ghpull:`14719`: Make Qt navtoolbar more robust against removal of either pan or zoom.
* :ghpull:`14695`: Various small simplifications
* :ghpull:`14745`: Replace Affine2D().scale(x, x) by Affine2D().scale(x).
* :ghpull:`14687`: Add missing spaces after commas in docs
* :ghpull:`14810`: Lighten icons of NavigationToolbar2QT on dark-themes
* :ghpull:`14786`: Deprecate axis_artist.BezierPath.
* :ghpull:`14750`: Misc. simplifications.
* :ghpull:`14807`: API change note on automatic blitting detection for backends
* :ghpull:`11004`: Deprecate smart_bounds handling in Axis and Spine
* :ghpull:`14785`: Kill some never-used attributes.
* :ghpull:`14723`: Cleanup some parameter descriptions in matplotlibrc.template
* :ghpull:`14808`: Small docstring updates
* :ghpull:`14686`: Inset orientation
* :ghpull:`14805`: Simplify text_layout example.
* :ghpull:`12052`: Make AxesImage.contains account for transforms
* :ghpull:`11860`: Let MovieFileWriter save temp files in a new dir
* :ghpull:`11423`: FigureCanvas Designer
* :ghpull:`10688`: Add legend handler and artist for FancyArrow
* :ghpull:`8321`: Added ContourSet clip_path kwarg and set_clip_path() method (#2369)
* :ghpull:`14641`: Simplify _process_plot_var_args.
* :ghpull:`14631`: Refactor from_levels_and_colors.
* :ghpull:`14790`: DOC:Add link to style examples in matplotlib.style documentation
* :ghpull:`14799`: Deprecate dates.mx2num.
* :ghpull:`14793`: Remove sudo tag in travis
* :ghpull:`14795`: Autodetect whether a canvas class supports blitting.
* :ghpull:`14794`: DOC: Update the documentation of homepage of website
* :ghpull:`14629`: Delete HTML build sources to save on artefact upload time
* :ghpull:`14792`: Fix spelling typos
* :ghpull:`14789`: Prefer Affine2D.translate to offset_transform in examples.
* :ghpull:`14783`: Cleanup mlab.detrend.
* :ghpull:`14791`: Make 'extended' and 'expanded' synonymous in font_manager
* :ghpull:`14787`: Remove axis_artist _update, which is always a noop.
* :ghpull:`14758`: Compiling C-ext with incorrect FreeType libs makes future compiles break
* :ghpull:`14763`: Deprecate math_symbol_table function directive
* :ghpull:`14762`: Decrease uses of get_canvas_width_height.
* :ghpull:`14748`: Cleanup demo_text_path.
* :ghpull:`14740`: Remove sudo tag in travis
* :ghpull:`14737`: Cleanup twin axes docstrings.
* :ghpull:`14729`: Small simplifications.
* :ghpull:`14726`: Trivial simplification to Axis3d._get_coord_info.
* :ghpull:`14718`: Add explanations for single character color names.
* :ghpull:`14710`: Pin pydocstyle<4.0
* :ghpull:`14709`: Try to improve the readability and styling of matplotlibrc.template file
* :ghpull:`14278`: Inset axes bug and docs fix
* :ghpull:`14478`: MNT: protect from out-of-bounds data access at the c level
* :ghpull:`14569`: More deduplication of backend_tools.
* :ghpull:`14652`: Soft-deprecate transform_point.
* :ghpull:`14664`: Improve error reporting for scatter c as invalid RGBA.
* :ghpull:`14625`: Don't double-wrap in silent_list.
* :ghpull:`14689`: Update embedding_in_wx4 example.
* :ghpull:`14679`: Further simplify colormap reversal.
* :ghpull:`14667`: Move most of pytest's conf to conftest.py.
* :ghpull:`14632`: Remove reference to old Tk/Windows bug.
* :ghpull:`14673`: More shortening of setup.py prints.
* :ghpull:`14678`: Fix small typo
* :ghpull:`14680`: Format parameters in descriptions with emph instead of backticks
* :ghpull:`14674`: Simplify colormap reversal.
* :ghpull:`14672`: Artist tutorial fixes
* :ghpull:`14653`: Remove some unnecessary prints from setup.py.
* :ghpull:`14662`: Add a _check_getitem helper to go with _check_in_list/_check_isinstance.
* :ghpull:`14666`: Update IPython's doc link in Image tutorial
* :ghpull:`14671`: Improve readability of matplotlibrc.template
* :ghpull:`14665`: Fix a typo in pyplot tutorial
* :ghpull:`14616`: Use builtin round instead of np.round for scalars.
* :ghpull:`12554`: backend_template docs and fixes
* :ghpull:`14635`: Fix bug when setting negative limits and using log scale
* :ghpull:`14604`: Update hist() docstring following removal of normed kwarg.
* :ghpull:`14630`: Remove the private Tick._name attribute.
* :ghpull:`14555`: Coding guidelines concerning the API
* :ghpull:`14516`: Document and test _get_packed_offsets()
* :ghpull:`14628`: matplotlib > Matplotlib in devel docs
* :ghpull:`14627`: gitignore pip-wheel-metadta/ directory
* :ghpull:`14612`: Update some mplot3d docs.
* :ghpull:`14617`: Remove a Py2.4(!) backcompat fix.
* :ghpull:`14605`: Update hist2d() docstring.
* :ghpull:`13084`: When linking against libpng/zlib on Windows, use upstream lib names.
* :ghpull:`13685`: Remove What's new  fancy example
* :ghpull:`14573`: Cleanup jpl_units.
* :ghpull:`14583`: Fix overly long lines in setupext.
* :ghpull:`14588`: Remove [status] suppress from setup.cfg.
* :ghpull:`14591`: Style fixes for secondary_axis.
* :ghpull:`14594`: DOC: Make temperature scale example use a closure for easier reusability
* :ghpull:`14447`: FIX: allow secondary axes minor locators to be set
* :ghpull:`14567`: Fix unicode_minus + usetex.
* :ghpull:`14351`: Remove some redundant check_in_list calls.
* :ghpull:`14550`: Restore thumbnail of usage guide
* :ghpull:`10222`: Use symlinks instead of copies for test result_images.
* :ghpull:`14267`: cbook docs cleanup
* :ghpull:`14556`: Improve @deprecated's docstring.
* :ghpull:`14557`: Clarify how to work with threads.
* :ghpull:`14545`: In contributing.rst, encourage kwonly args and minimizing public APIs.
* :ghpull:`14533`: Misc. style fixes.
* :ghpull:`14542`: Move plot_directive doc to main API index.
* :ghpull:`14499`: Improve custom figure example
* :ghpull:`14543`: Remove the "Developing a new backend" section from contributing guide.
* :ghpull:`14540`: Simplify backend switching in plot_directive.
* :ghpull:`14539`: Don't overindent enumerated list in plot_directive docstring.
* :ghpull:`14537`: Slightly tighten the Bbox API.
* :ghpull:`14223`: Rewrite intro to usage guide.
* :ghpull:`14495`: Numpydocify axes_artist.py
* :ghpull:`14529`: mpl_toolkits style fixes.
* :ghpull:`14528`: mathtext style fixes.
* :ghpull:`13536`: Make unit converters also handle instances of subclasses.
* :ghpull:`13730`: Include FreeType error codes in FreeType exception messages.
* :ghpull:`14500`: Fix pydocstyle D403 (First word of the first line should be properly capitalized) in examples
* :ghpull:`14506`: Simplify Qt tests.
* :ghpull:`14513`: More fixes to pydocstyle D403 (First word capitalization)
* :ghpull:`14496`: Fix pydocstyle D208 (Docstring is over-indented)
* :ghpull:`14347`: Deprecate rcsetup.validate_path_exists.
* :ghpull:`14383`: Remove the ````package_data.dlls```` setup.cfg entry.
* :ghpull:`14346`: Simplify various validators in rcsetup.
* :ghpull:`14366`: Move test_rcparams test files inline into test_rcparams.py.
* :ghpull:`14401`: Assume that mpl-data is in its standard location.
* :ghpull:`14454`: Simplify implementation of svg.image_inline.
* :ghpull:`14470`: Add _check_isinstance helper.
* :ghpull:`14479`: fstringify backend_ps more.
* :ghpull:`14484`: Support unicode minus with ps.useafm.
* :ghpull:`14494`: Style fixes.
* :ghpull:`14465`: Docstrings cleanups.
* :ghpull:`14466`: Let SecondaryAxis inherit get_tightbbox from _AxesBase.
* :ghpull:`13940`: Some more f-strings.
* :ghpull:`14379`: Remove unnecessary uses of unittest.mock.
* :ghpull:`14483`: Improve font weight guessing.
* :ghpull:`14419`: Fix test_imshow_pil on Windows.
* :ghpull:`14460`: canvas.blit() already defaults to blitting the full figure canvas.
* :ghpull:`14462`: Register timeout pytest marker.
* :ghpull:`14414`: FEATURE: Alpha channel in Gouraud triangles in the pdf backend
* :ghpull:`13659`: Clarify behavior of the 'tight' kwarg to autoscale/autoscale_view.
* :ghpull:`13901`: Only test png output for mplot3d.
* :ghpull:`13338`: Replace list.extend by star-expansion or other constructs.
* :ghpull:`14448`: Misc doc style cleanup
* :ghpull:`14310`: Update to Bounding Box for Qt5 FigureCanvasATAgg.paintEvent()
* :ghpull:`14380`: Inline $MPLLOCALFREETYPE/$PYTEST_ADDOPTS/$NPROC in .travis.yml.
* :ghpull:`14413`: MAINT: small improvements to the pdf backend
* :ghpull:`14452`: MAINT: Minor cleanup to make functions more self consisntent
* :ghpull:`14441`: Misc. docstring cleanups.
* :ghpull:`14440`: Interpolations example
* :ghpull:`14402`: Prefer ``mpl.get_data_path()``, and support Paths in FontProperties.
* :ghpull:`14420`: MAINT: Upgrade pytest again
* :ghpull:`14423`: Fix docstring of subplots().
* :ghpull:`14410`: Use aspect=1, not aspect=True.
* :ghpull:`14412`: MAINT: Don't install pytest 4.6.0 on Travis
* :ghpull:`14377`: Rewrite assert np.* tests to use numpy.testing
* :ghpull:`14399`: Improve warning for case where data kwarg entry is ambiguous.
* :ghpull:`14390`: Cleanup docs of bezier
* :ghpull:`14400`: Fix to_rgba_array() for empty input
* :ghpull:`14308`: Small clean to SymmetricalLogLocator
* :ghpull:`14311`: travis: add c code coverage measurements
* :ghpull:`14393`: Remove remaining unicode-strings markers.
* :ghpull:`14391`: Remove explicit inheritance from object
* :ghpull:`14343`: acquiring and releaseing keypresslock when textbox is being activated
* :ghpull:`14353`: Register flaky pytest marker.
* :ghpull:`14373`: Properly hide __has_include to support C++<17 compilers.
* :ghpull:`14378`: Remove setup_method
* :ghpull:`14368`: Finish removing jquery from the repo.
* :ghpull:`14360`: Deprecate ``boxplot(..., whis="range")``.
* :ghpull:`14376`: Simplify removal of figure patch from bbox calculations.
* :ghpull:`14363`: Make is_natively_supported private.
* :ghpull:`14330`: Remove remaining unittest.TestCase uses
* :ghpull:`13663`: Kill the PkgConfig singleton in setupext.
* :ghpull:`13067`: Simplify generation of error messages for missing libpng/freetype.
* :ghpull:`14358`: DOC boxplot ``whis`` parameter
* :ghpull:`14014`: Disallow figure argument for pyplot.subplot() and Figure.add_subplot()
* :ghpull:`14350`: Use cbook._check_in_list more often.
* :ghpull:`14348`: Cleanup markers.py.
* :ghpull:`14345`: Use importorskip for tests depending on pytz.
* :ghpull:`14170`: In setup.py, inline the packages that need to be installed into setup().
* :ghpull:`14332`: Use raw docstrings instead of escaping backslashes
* :ghpull:`14336`: Enforce pydocstyle D412
* :ghpull:`14144`: Deprecate the 'warn' parameter to matplotlib.use().
* :ghpull:`14328`: Remove explicit inheritance from object
* :ghpull:`14035`: Improve properties formatting in interpolated docstrings.
* :ghpull:`14018`: pep8ing.
* :ghpull:`13542`: Move {setup,install}_requires from setupext.py to setup.py.
* :ghpull:`13670`: Simplify the logic of axis().
* :ghpull:`14046`: Deprecate checkdep_ps_distiller.
* :ghpull:`14236`: Simplify StixFonts.get_sized_alternatives_for_symbol.
* :ghpull:`14101`: Shorten _ImageBase._make_image.
* :ghpull:`14246`: Deprecate public use of makeMappingArray
* :ghpull:`13740`: Deprecate plotfile.
* :ghpull:`14216`: Walk the artist tree when preparing for saving with tight bbox.
* :ghpull:`14305`: Small grammatical error.
* :ghpull:`14104`: Factor out retrieval of data relative to datapath
* :ghpull:`14016`: pep8ify backends.
* :ghpull:`14299`: Fix #13711 by importing cbook.
* :ghpull:`14244`: Remove APIs deprecated in mpl3.0.
* :ghpull:`14068`: Alternative fix for passing iterator as frames to FuncAnimation
* :ghpull:`13711`: Deprecate NavigationToolbar2Tk.set_active.
* :ghpull:`14280`: Simplify validate_markevery logic.
* :ghpull:`14273`: pep8ify a couple of variable names.
* :ghpull:`14115`: Reorganize scatter arguments parsing.
* :ghpull:`14271`: Replace some uses of np.iterable
* :ghpull:`14257`: Changing cmap(np.nan) to 'bad' value rather than 'under' value
* :ghpull:`14259`: Deprecate string as color sequence
* :ghpull:`13506`: Change colorbar for contour to have the proper axes limits...
* :ghpull:`13494`: Add colorbar annotation example plot to gallery
* :ghpull:`14266`: Make matplotlib.figure.AxesStack private
* :ghpull:`14166`: Shorten usage of ``@image_comparison``.
* :ghpull:`14240`: Merge up 31x
* :ghpull:`14242`: Avoid a buffer copy in PillowWriter.
* :ghpull:`9672`: Only set the wait cursor if the last draw was >1s ago.
* :ghpull:`14224`: Update plt.show() doc
* :ghpull:`14218`: Use stdlib mimetypes instead of hardcoding them.
* :ghpull:`14082`: In tk backend, don't try to update mouse position after resize.
* :ghpull:`14084`: Check number of positional arguments passed to quiver()
* :ghpull:`14214`: Fix some docstring style issues.
* :ghpull:`14201`: Fix E124 flake8 violations (closing bracket indentation).
* :ghpull:`14096`:  Consistently use axs to refer to a set of Axes
* :ghpull:`14204`: Fix various flake8 indent problems.
* :ghpull:`14205`: Obey flake8 "don't assign a lambda, use a def".
* :ghpull:`14198`: Remove unused imports
* :ghpull:`14173`: Prepare to change the default pad for AxesDivider.append_axes.
* :ghpull:`13738`: Fix TypeError when plotting stacked bar chart with decimal
* :ghpull:`14151`: Clarify error with usetex when cm-super is not installed.
* :ghpull:`14107`: Feature: draw percentiles in violinplot
* :ghpull:`14172`: Remove check_requirements from setupext.
* :ghpull:`14158`: Fix test_lazy_imports in presence of $MPLBACKEND or matplotlibrc.
* :ghpull:`14157`: Isolate nbagg test from user ipython profile.
* :ghpull:`14147`: Dedent overindented list in example docstring.
* :ghpull:`14134`: Deprecate the dryrun parameter to print_foo().
* :ghpull:`14145`: Remove warnings handling for fixed bugs.
* :ghpull:`13977`: Always import pyplot when calling matplotlib.use().
* :ghpull:`14131`: Make test suite fail on warnings.
* :ghpull:`13593`: Only autoscale_view() when needed, not after every plotting call.
* :ghpull:`13902`: Add support for metadata= and pil_kwargs= in imsave().
* :ghpull:`14140`: Avoid backslash-quote by changing surrounding quotes.
* :ghpull:`14132`: Move some toplevel strings into the only functions that use them.
* :ghpull:`13708`: Annotation.contains shouldn't consider the text+arrow's joint bbox.
* :ghpull:`13980`: Don't let margins expand polar plots to negative radii by default.
* :ghpull:`14075`: Remove uninformative entries from glossary.
* :ghpull:`14002`: Allow pandas DataFrames through norms
* :ghpull:`14114`: Allow SVG Text-as-Text to Use Data Coordinates
* :ghpull:`14120`: Remove mention of $QT_API in matplotlibrc example.
* :ghpull:`13878`: Style fixes for floating_axes.
* :ghpull:`14108`: Deprecate FigureCanvasMac.invalidate in favor of draw_idle.
* :ghpull:`13879`: Clarify handling of "extreme" values in FloatingAxisArtistHelper.
* :ghpull:`5602`: Automatic downsampling of images.
* :ghpull:`14112`: Remove old code path in layout.html
* :ghpull:`13959`: Scatter: make "c" and "s" argument handling more consistent.
* :ghpull:`14110`: Simplify scatter_piecharts example.
* :ghpull:`14111`: Trivial cleanups.
* :ghpull:`14085`: Simplify get_current_fig_manager().
* :ghpull:`14083`: Deprecate FigureCanvasBase.draw_cursor.
* :ghpull:`14089`: Cleanup bar_stacked, bar_unit_demo examples.
* :ghpull:`14063`: Add pydocstyle checks to flake8
* :ghpull:`14077`: Fix tick label wobbling in animated Qt example
* :ghpull:`14070`: Cleanup some pyplot docstrings.
* :ghpull:`6280`: Added ability to offset errorbars when using errorevery.
* :ghpull:`13679`: Fix passing iterator as frames to FuncAnimation
* :ghpull:`14023`: Improve Unicode minus example
* :ghpull:`14041`: Pretty-format subprocess logs.
* :ghpull:`14038`: Cleanup path.py docstrings.
* :ghpull:`13701`: Small cleanups.
* :ghpull:`14020`: Better error message when trying to use Gtk3Agg backend without cairo
* :ghpull:`14021`: Fix ax.legend Returns markup
* :ghpull:`13986`: Support RGBA for quadmesh mode of pcolorfast.
* :ghpull:`14009`: Deprecate compare_versions.
* :ghpull:`14010`: Deprecate get_home()
* :ghpull:`13932`: Remove many unused variables.
* :ghpull:`13854`: Cleanup contour.py.
* :ghpull:`13866`: Switch PyArg_ParseTupleAndKeywords from "es" to "s".
* :ghpull:`13945`: Make unicode_minus example more focused.
* :ghpull:`13876`: Deprecate factor=None in axisartist.
* :ghpull:`13929`: Better handle deprecated rcParams.
* :ghpull:`13851`: Deprecate setting Axis.major.locator to non-Locator; idem for Formatters
* :ghpull:`13938`: numpydocify quiverkey.
* :ghpull:`13936`: Pathlibify animation.
* :ghpull:`13984`: Allow setting tick colour on 3D axes
* :ghpull:`13987`: Deprecate mlab.{apply_window,stride_repeat}.
* :ghpull:`13983`: Fix locator/formatter setting when removing shared Axes
* :ghpull:`13957`: Remove many unused variables in tests.
* :ghpull:`13981`: Test cleanups.
* :ghpull:`13970`: Check vmin/vmax are valid when doing inverse in LogNorm
* :ghpull:`13978`: Make normalize_kwargs more convenient for third-party use.
* :ghpull:`13972`: Remove _process_plot_var_args.set{line,patch}_props.
* :ghpull:`13795`: Make _warn_external correctly report warnings arising from tests.
* :ghpull:`13885`: Deprecate axisartist.grid_finder.GridFinderBase.
* :ghpull:`13913`: Fix string numbers in to_rgba() and is_color_like()
* :ghpull:`13935`: Deprecate the useless switch_backend_warn parameter to matplotlib.test.
* :ghpull:`13952`: Cleanup animation tests.
* :ghpull:`13942`: Make Cursors an (Int)Enum.
* :ghpull:`13953`: Unxfail a now fixed test in test_category.
* :ghpull:`13925`: Fix passing Path to ps backend when text.usetex rc is True.
* :ghpull:`13943`: Don't crash on str(figimage(...)).
* :ghpull:`13944`: Document how to support unicode minus in pgf backend.
* :ghpull:`13802`: New rcparam to set default axes title location
* :ghpull:`13855`: ``a and b or c`` -> ``b if a else c``
* :ghpull:`13923`: Correctly handle invalid PNG metadata.
* :ghpull:`13926`: Suppress warnings in tests.
* :ghpull:`13920`: Style fixes for category.py.
* :ghpull:`13889`: Shorten docstrings by removing unneeded :class:/:func: + rewordings.
* :ghpull:`13911`: Fix joinstyles example
* :ghpull:`13917`: Faster categorical tick formatter.
* :ghpull:`13918`: Make matplotlib.testing assume pytest by default, not nose.
* :ghpull:`13894`: Check for positive number of rows and cols
* :ghpull:`13895`: Remove unused setupext.is_min_version.
* :ghpull:`13886`: Shorten Figure.set_size_inches.
* :ghpull:`13859`: Ensure figsize is positive finite
* :ghpull:`13877`: ``zeros_like(x) + y`` -> ``full_like(x, y)``
* :ghpull:`13875`: Style fixes for grid_helper_curvelinear.
* :ghpull:`13873`: Style fixes to grid_finder.
* :ghpull:`13782`: Don't access internet during tests.
* :ghpull:`13833`: Some more usage of _check_in_list.
* :ghpull:`13834`: Cleanup FancyArrowPatch docstring
* :ghpull:`13811`: Generate Figure method wrappers via boilerplate.py
* :ghpull:`13797`: Move sphinxext test to matplotlib.tests like everyone else.
* :ghpull:`13770`: broken_barh docstring
* :ghpull:`13757`: Remove mention of "enabling fontconfig support".
* :ghpull:`13454`: Add "c" as alias for "color" for Collections
* :ghpull:`13756`: Reorder the logic of _update_title_position.
* :ghpull:`13744`: Restructure boilerplate.py
* :ghpull:`13369`: Use default colours for examples
* :ghpull:`13697`: Delete pyplot_scales example.
* :ghpull:`13726`: Clarify a bit the implementation of blend_hsv.
* :ghpull:`13731`: Check for already running QApplication in Qt embedding example.
* :ghpull:`13736`: Deduplicate docstrings and validation for set_alpha.
* :ghpull:`13737`: Remove duplicated methods in FixedAxisArtistHelper.
* :ghpull:`13721`: Kill pyplot docstrings that get overwritten by @docstring.copy.
* :ghpull:`13690`: Cleanup hexbin.
* :ghpull:`13683`: Remove axes border for examples that list styles
* :ghpull:`13280`: Add SubplotSpec.add_subplot.
* :ghpull:`11387`: Deprecate Axes3D.w_{x,y,z}axis in favor of .{x,y,z}axis.
* :ghpull:`13671`: Suppress some warnings in tests.
* :ghpull:`13657`: DOC: fail the doc build on errors, but keep going to end
* :ghpull:`13647`: Fix FancyArrowPatch joinstyle
* :ghpull:`13637`: BLD: parameterize python_requires
* :ghpull:`13633`: plot_directive: Avoid warning if plot_formats doesn't contain 'png'
* :ghpull:`13629`: Small example simplification.
* :ghpull:`13620`: Improve watermark example
* :ghpull:`13589`: Kill Axes._connected.
* :ghpull:`13428`: free cart pendulum animation example
* :ghpull:`10487`: fixed transparency bug
* :ghpull:`13551`: Fix IndexError for pyplot.legend() when plotting empty bar chart with label
* :ghpull:`13524`: Cleanup docs for GraphicsContextBase.{get,set}_dashes.
* :ghpull:`13556`: Cleanup warnings handling in tests.
* :ghpull:`8100`: Deprecate MAXTICKS, Locator.raise_if_exceeds.
* :ghpull:`13534`: More followup to autoregistering 3d axes.
* :ghpull:`13327`: pcolorfast simplifications.
* :ghpull:`13532`: More use of cbook._check_in_list.
* :ghpull:`13520`: Register 3d projection by default.
* :ghpull:`13394`: Deduplicate some code between floating_axes and grid_helper_curvelinear.
* :ghpull:`13527`: Make SubplotSpec.num2 never None.
* :ghpull:`12249`: Replaced noqa-comments by using Axes3D.name instead of '3d' for proje…

Issues (125):

* :ghissue:`16487`: Add link to blog to front page
* :ghissue:`16478`: The bottom parameter of plt.hist() shifts the data as well, not just the baseline
* :ghissue:`16280`: SymLogNorm colorbar incorrect on master
* :ghissue:`16448`: Bad interaction between shared axes and pcolormesh sticky edges
* :ghissue:`16451`: InvertedLogTransform inherits from deprecated base
* :ghissue:`16420`: Error when adding colorbar to pcolormesh of a boolean array
* :ghissue:`16114`: Prose error on website (first paragraph)
* :ghissue:`8291`: Unable to pickle.load(fig) with mpl in jupyter notebook
* :ghissue:`16173`: Constrained_layout creates extra axes when used with subgridspec
* :ghissue:`16127`: nbformat 5.0.0 missing schema files
* :ghissue:`15849`: Using pandas.Timestamp in blended coordinate system of ax.annotate.
* :ghissue:`6015`: scatterplot axis autoscale fails for small data values
* :ghissue:`15806`: 3.2.0 may break some Cartopy tests
* :ghissue:`15852`: Lasso selector does not show in Jupyter notebook
* :ghissue:`15820`: Show incomplete tick labels when using mixed chinese and english characters
* :ghissue:`15770`: DOCS 2D Line label option ``_nolegend_`` is not documented
* :ghissue:`15332`: Type promotion error with datetime bins in hist
* :ghissue:`15611`: BUG: Qt5Agg window size regression
* :ghissue:`7130`: Incorrect autoscaling of polar plot limits after scatter
* :ghissue:`15576`: Multi-line ticks cause cut-offs
* :ghissue:`8609`: Clipped tick labels
* :ghissue:`15517`: antialiased image check seems wrong when used on zoomed image
* :ghissue:`13400`: Qt Embedding w/ Spyder
* :ghissue:`14724`: drawstyle parameter of line needs example
* :ghissue:`13619`: Importing matplotlib.animation prevents python script from executing in the background
* :ghissue:`14270`: Secondary axis called with [0, 1] might produce exceptions in case these are invalid data
* :ghissue:`15417`: Why is smart_bounds() being deprecated?
* :ghissue:`9778`: Blanks in colorbar just inside of 'extend' arrowpoints when using AxesGrid
* :ghissue:`15336`: DivergingNorm is a misleading name
* :ghissue:`15399`: OSError: [Errno 86] Bad CPU type in executable: 'convert' on import matplotlib.animation
* :ghissue:`15109`: matplotlib.collections inheritance diagram small/blurry
* :ghissue:`15331`: Log Scale: FloatingPointError: underflow encountered in power
* :ghissue:`15251`: Large memory growth with log scaling and linear ticking
* :ghissue:`15247`: Colorbar tick placement issues with ImageGrid and LogNorm
* :ghissue:`15306`: Footer off centre
* :ghissue:`13485`: Matplotlib NavigationToolbar2Tk disappears when reducing window size
* :ghissue:`15232`: DOC: Automatic default rcParam expansion creates misleading sentences
* :ghissue:`14141`: setting spine position on a log plot fails
* :ghissue:`15138`: Make plt.style.use accept path-like objects in addition to string
* :ghissue:`14207`: Check if point is in path or not by contains_point
* :ghissue:`13591`: Style issues when building the docs with (future) Sphinx 2.0
* :ghissue:`8089`: Using Minute Locator to set x-axis ticks exceeds Locator.MAXTICKS
* :ghissue:`15075`: sphinxext.missing_references does not specify if it supports parallel file read.
* :ghissue:`10963`: Replace \pgfimage by \includegraphics in PGF backend
* :ghissue:`15156`: ax.text fails with positional argument error
* :ghissue:`14439`: hist() fails when all data points are np.nan
* :ghissue:`15042`: How to handle sphinx nitpicky mode
* :ghissue:`14060`: quiver(C=...) argument is not reasonably validated
* :ghissue:`11335`: TST: testing not catching bad escape sequences in doc strings
* :ghissue:`15040`: Wrong figure window size after calling fig.set_size_inches() repeatedly
* :ghissue:`15100`: Issue with creating QApplication in QT backend
* :ghissue:`14887`: kerning seems generally wrong
* :ghissue:`14800`: default tick formatter could switch to scientific notation earlier
* :ghissue:`14503`: Add a test for #14451
* :ghissue:`14907`: ConnectionPatch across axes needs to be excluded from layout management
* :ghissue:`14911`: Removing a shared axes via ``ax.remove()`` leads to an error.
* :ghissue:`12462`: cbar.add_lines should allow manually adding lines, not just contour sets
* :ghissue:`14796`: Show user how to use Agg buffer in example
* :ghissue:`14883`: MinSize not respected using wx backend causes wxAssertionError. Bug fix included.
* :ghissue:`15014`: Wrapping of text adds leading newline character if first word is long
* :ghissue:`14918`: constrained_layout fails with hidden axis...
* :ghissue:`14981`: Barplot call crashes when called with yscale="log" and bins with h=0
* :ghissue:`4621`: Default bottom of Stepfilled histograms should be set according to ymin
* :ghissue:`15030`: Doc build broken
* :ghissue:`8093`: set_ylim not working with plt.axis('equal')
* :ghissue:`6055`: Serious problems on the axes documentation
* :ghissue:`9979`: Axis limits are set badly with small values in scatter().
* :ghissue:`10842`: Text bbox empty dict should be ignored
* :ghissue:`13698`: The default logit minor locator should not display tick labels
* :ghissue:`14878`: plt.yscale doesn't throw warning with invalid kwarg
* :ghissue:`5619`: Symlog linear region
* :ghissue:`14564`: Broken string interpolation
* :ghissue:`13668`: Add better error message to plt.axis()
* :ghissue:`14563`: colorbar label prints "None" when label=None
* :ghissue:`13660`: Closing a matplotlib figure with event handling occasionally causes “TypeError: isinstance()”
* :ghissue:`13033`: 'NoneType' has no attribute '_alive' when using plt in a context manager
* :ghissue:`13891`: Blurry app icon on macOS
* :ghissue:`14656`: Axes title default color
* :ghissue:`14831`: DOC: Webpage not formatted correctly on gallery docs
* :ghissue:`13819`: Aspect ratio for not so common scales
* :ghissue:`8878`: Setting aspect ratio for semi-log plots
* :ghissue:`4900`: UnboundLocalError: local variable 'aspect_scale_mode' referenced before assignment
* :ghissue:`14608`: Issue with using plt.axis('equal') with plt.polar(theta,r) plot
* :ghissue:`12893`: [PyQt] NavigationToolbar2QT : Error when removing tools
* :ghissue:`14670`: indicate_inset rectangles is sensitive to axis-flipping
* :ghissue:`14362`: Add link to style examples in matplotlib.style documentation
* :ghissue:`6295`: restore_region is not documented as a method of FigureCanvas
* :ghissue:`14754`: Better pointer to dev docs on website
* :ghissue:`14744`: Savefig svg fails with "Cannot cast array data from dtype('<U7') to dtype('float64') according to the rule 'safe'"
* :ghissue:`11919`: Wrong Error Message
* :ghissue:`6824`: Image comparison decorator: symlinks to baseline images
* :ghissue:`12180`: Deprecate and remove pyplot.plotfile?
* :ghissue:`14180`: ImageComparisonFailure: Image sizes do not match expected size
* :ghissue:`14443`: Secondary axis does not show minor ticks.
* :ghissue:`8423`: UnicodeDecodeError when making a plot using the 'classic' style and text.usetex=True
* :ghissue:`11275`: A "TypeError" is raised if subclass inherited from "datetime" is used
* :ghissue:`9127`: ps.useafm and axes.unicode_minus are incompatible
* :ghissue:`7571`: matplotlib.widget.TextBox not correctly stopping keyboard shortcuts
* :ghissue:`14370`: gcc error when building matplotlib dev from source
* :ghissue:`14011`: TypeError on plt.subplot(figure=plt.figure())
* :ghissue:`13676`: FuncAnimation with generator causes crash on StopIteration
* :ghissue:`9892`: colormaps (cm) do not properly handle NaN values.
* :ghissue:`14122`: Unexpected behavior in matplotlib.colors.to_rgba_array when passing unknown color name string
* :ghissue:`9546`: The busy cursor is annoying in some instances
* :ghissue:`10788`: TypeError when plotting stacked bar chart with decimal
* :ghissue:`14146`: Saving polar plots with MiKTeX on Windows fails for some file formats
* :ghissue:`8532`: Feature Request: draw percentiles in violinplot
* :ghissue:`13883`: In headless mode, matplotlib.use('tkagg') only errors after importing pyplot
* :ghissue:`13967`: Creating colorbar without artist fails with LogNorm
* :ghissue:`12542`: The plot function of the matplotlib 2 and 3 versions is much slower than 1.5.3
* :ghissue:`13292`: Non-sensical negative radial scale minimum autoset in polar plot
* :ghissue:`10909`: Calling a Normalize instance with a DataFrame
* :ghissue:`14076`: Tick label positions wobble in animated Qt example
* :ghissue:`14007`: GTK3Agg backend raises ImportError for missing cairo dependency
* :ghissue:`12911`: Tick mark color cannot be set on Axes3D
* :ghissue:`12853`: Remove()ing a shared axes prevents the remaining axes from using unit-provided formatters
* :ghissue:`13912`: ``is_color_like`` returning erroneous value on strings of integers
* :ghissue:`13921`: − with save fig in .pgf
* :ghissue:`13872`: ValueError message requests impossible condition
* :ghissue:`13857`: Zero-width figure crashes libpng
* :ghissue:`13768`: broken_barh docstring incorrect information
* :ghissue:`13641`: ``joinstyle`` is not respected for ``FancyArrowPatch`` (either the path or the arrow heads)
* :ghissue:`11923`: ColorbarBase fails to show if the first two values map to the same result
* :ghissue:`11527`: Inconsistent path intersection
* :ghissue:`13003`: IndexError thrown by pyplot.legend() when plotting empty bar chart with label
.. _github-stats-3-3-2:

GitHub statistics for 3.3.2 (Sep 15, 2020)
==========================================

GitHub statistics for 2020/08/14 - 2020/09/15 (tag: v3.3.1)

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 15 issues and merged 39 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/57?closed=1>`__

The following 13 authors contributed 61 commits.

* Antony Lee
* Bruno Beltran
* David Stansby
* David Young
* Elliott Sales de Andrade
* Greg Lucas
* Jody Klymak
* johnthagen
* Jouni K. Seppänen
* Richard Sheridan
* Ryan May
* Thomas A Caswell
* Tim Hoffmann

GitHub issues and pull requests:

Pull Requests (39):

* :ghpull:`18488`: Backport PR #18483 on branch v3.3.x (DOC: reword non-monotonic cell center warning)
* :ghpull:`18483`: DOC: reword non-monotonic cell center warning
* :ghpull:`18485`: Backport PR #18475 on branch v3.3.x (BF: ensure exception caught if no kpeswitch)
* :ghpull:`18482`: Backport PR #18398 on branch v3.3.x (Warn on non-increasing/decreasing pcolor coords)
* :ghpull:`18484`: Backport PR #18458: Fix huge imshow range
* :ghpull:`18475`: BF: ensure exception caught if no kpeswitch
* :ghpull:`18458`: Fix huge imshow range
* :ghpull:`18398`: Warn on non-increasing/decreasing pcolor coords
* :ghpull:`18479`: Nbagg backports
* :ghpull:`18454`: nbagg: Use OutputArea event to trigger figure close.
* :ghpull:`18469`: Backport PR #18464 on branch v3.3.x (Remove extra stickies in barstacked histogram.)
* :ghpull:`18464`: Remove extra stickies in barstacked histogram.
* :ghpull:`18459`: Backport PR #18393 on branch v3.3.x (Fix Axis scale on twinned Axes.)
* :ghpull:`18393`: Fix Axis scale on twinned Axes.
* :ghpull:`18441`: Backport PR #18395: TkAgg bugfix: deselect buttons that are not the current _Mode
* :ghpull:`18395`: TkAgg bugfix: deselect buttons that are not the current _Mode
* :ghpull:`18380`: Backport PR #18374 on branch v3.3.x (FIX: make _reshape_2D accept pandas df with string indices)
* :ghpull:`18374`: FIX: make _reshape_2D accept pandas df with string indices
* :ghpull:`18376`: Backport PR #18298 on branch v3.3.x (Include license files in built distribution)
* :ghpull:`18375`: Backport PR #18293 on branch v3.3.x (Fix scatter3d color/linewidth re-projection)
* :ghpull:`18298`: Include license files in built distribution
* :ghpull:`18293`: Fix scatter3d color/linewidth re-projection
* :ghpull:`18361`: nbagg: Store DPI ratio on figure instead of window.
* :ghpull:`18354`: Backport PR #18352 on branch v3.3.x (Avoid triggering backend resolution during qt initial import.)
* :ghpull:`18352`: Avoid triggering backend resolution during qt initial import.
* :ghpull:`18335`: Backport PR #18322 on branch v3.3.x (Disable FH4 so that we don't require VCRUNTIME140_1.dll.)
* :ghpull:`18322`: Disable FH4 so that we don't require VCRUNTIME140_1.dll.
* :ghpull:`18333`: Backport PR #18328 on branch v3.3.x (Add missing check for None in Qt toolmanager.)
* :ghpull:`18328`: Add missing check for None in Qt toolmanager.
* :ghpull:`18309`: Backport PR #18304 on branch v3.3.x (Fix canvas redraws during motion in figures with a Button or TextBox)
* :ghpull:`18304`: Fix canvas redraws during motion in figures with a Button or TextBox
* :ghpull:`18297`: Backport PR #18288 on branch v3.3.x (FIX: check if axes is off page before repositioning title)
* :ghpull:`18288`: FIX: check if axes is off page before repositioning title
* :ghpull:`18269`: Backport PR #18266 on branch v3.3.x (Fix Path.get_extents for empty paths.)
* :ghpull:`18266`: Fix Path.get_extents for empty paths.
* :ghpull:`18263`: Backport PR #18260 on branch v3.3.x (Add parent widget to IntVar)
* :ghpull:`18260`: Add parent widget to IntVar
* :ghpull:`18253`: Backport PR #18245 on branch v3.3.x
* :ghpull:`18245`: MNT: do a better job guessing the GUI framework in use

Issues (15):

* :ghissue:`18415`: imshow with LogNorm crashes with certain inputs
* :ghissue:`18447`: nbagg: Closing a figure from the notebook does not close the python figure
* :ghissue:`18470`: interactive plots slow with matplotlib 3.3.1
* :ghissue:`18457`: Incorrect log y-scale for histogram with partitioned and barstacked data
* :ghissue:`18385`: twinx not respecting log-scale
* :ghissue:`18371`: Plotting a pandas DataFrame with string MultiIndex
* :ghissue:`18296`: LICENSE file(s) not included in published PyPI package
* :ghissue:`18287`: scatter3D assigns wrong color to points for some plot orientations
* :ghissue:`18292`: ImportError: DLL load failed with Matplotlib 3.3.1 on Windows
* :ghissue:`18327`: Tool Manager: adding buttons to toolbar fails with matplotlib version 3.3.1 using Qt backend
* :ghissue:`18324`:  Poor UI responsiveness  of 3.3.1 compared with 3.2.2 for interactive mode UI using widgets
* :ghissue:`18303`: Canvas redraws during any motion when Button is present
* :ghissue:`18283`: Automatic title placement wrong if parent axes is off the page
* :ghissue:`18254`: scatter(..., marker='') raises on drawing with mpl3.3.1
* :ghissue:`18259`: New IntVar needs a parent widget
.. _github-stats-3-3-4:

GitHub statistics for 3.3.4 (Jan 28, 2021)
==========================================

GitHub statistics for 2020/11/12 (tag: v3.3.3) - 2021/01/28

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 2 issues and merged 20 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/60?closed=1>`__

The following 7 authors contributed 43 commits.

* Antony Lee
* David Stansby
* Elliott Sales de Andrade
* Jody Klymak
* Mark Harfouche
* Thomas A Caswell
* Tim Hoffmann

GitHub issues and pull requests:

Pull Requests (20):

* :ghpull:`19386`: Backport PR #19238 on branch v3.3.x (Fix build with LTO disabled in environment)
* :ghpull:`19238`: Fix build with LTO disabled in environment
* :ghpull:`19382`: Backport PR #19052 on branch v3.3.x (Always pass integers to wx.Size.)
* :ghpull:`19377`: Backport PR #19371 on branch v3.3.x (Fix specgram test on NumPy 1.20.)
* :ghpull:`19371`: Fix specgram test on NumPy 1.20.
* :ghpull:`19305`: Backport PR #19301 on branch v3.3.x
* :ghpull:`19301`: Fix several CI issues
* :ghpull:`19269`: Backport PR #19266 on branch v3.3.x (Don't update homebrew on GitHub Actions)
* :ghpull:`19266`: Don't update homebrew on GitHub Actions
* :ghpull:`19252`: Backport PR #19245 on branch v3.3.x (handle usecase where QT_API is specified with some capitals)
* :ghpull:`19245`: handle usecase where QT_API is specified with some capitals
* :ghpull:`19143`: Backport PR #19131 on branch v3.3.x (Fix WebAgg initialization)
* :ghpull:`19115`: Backport PR #19108 on branch v3.3.x
* :ghpull:`19165`: Backport PR #19163 on branch v3.3.x (Ignore missing _FancyAxislineStyle doc targets.)
* :ghpull:`19163`: Ignore missing _FancyAxislineStyle doc targets.
* :ghpull:`19131`: Fix WebAgg initialization
* :ghpull:`19052`: Always pass integers to wx.Size.
* :ghpull:`19108`: Fix failing animation test with pytest 6.2.
* :ghpull:`19062`: Backport PR #19036 on branch v3.3.x
* :ghpull:`19036`: Start testing using GitHub Actions

Issues (2):

* :ghissue:`19227`: Matplotlib generates invalid ft2font if -fno-lto gcc CFLAGS used
* :ghissue:`19129`: webAgg example broken - maybe mpl.js broken?
.. _whats-new-3-2-0:

What's new in Matplotlib 3.2 (Mar 04, 2020)
===========================================

For a list of all of the issues and pull requests since the last
revision, see the :ref:`github-stats`.

.. contents:: Table of Contents
   :depth: 4

.. toctree::
   :maxdepth: 4


Unit converters recognize subclasses
------------------------------------
Unit converters now also handle instances of subclasses of the class they have
been registered for.

`~.pyplot.imsave` accepts metadata and PIL options
--------------------------------------------------
`~.pyplot.imsave` has gained support for the ``metadata`` and ``pil_kwargs``
parameters. These parameters behave similarly as for the `.Figure.savefig()`
method.

`.cbook.normalize_kwargs`
-------------------------
`.cbook.normalize_kwargs` now presents a convenient interface to normalize
artist properties (e.g., from "lw" to "linewidth"):

>>> cbook.normalize_kwargs({"lw": 1}, Line2D)
{"linewidth": 1}

The first argument is the mapping to be normalized, and the second argument can
be an artist class or an artist instance (it can also be a mapping in a
specific format; see the function's docstring for details).

`.FontProperties` accepts `os.PathLike`
---------------------------------------
The *fname* argument to `.FontProperties` can now be an `os.PathLike`,
e.g.

>>> FontProperties(fname=pathlib.Path("/path/to/font.ttf"))

Gouraud-shading alpha channel in PDF backend
--------------------------------------------
The pdf backend now supports an alpha channel in Gouraud-shaded
triangle meshes.

.. _whats-new-3-2-0-kerning:

Kerning adjustments now use correct values
------------------------------------------
Due to an error in how kerning adjustments were applied, previous versions of
Matplotlib would under-correct kerning. This version will now correctly apply
kerning (for fonts supported by FreeType). To restore the old behavior (e.g.,
for test images), you may set :rc:`text.kerning_factor` to 6 (instead of 0).
Other values have undefined behavior.

.. plot::

   import matplotlib.pyplot as plt

   # Use old kerning values:
   plt.rcParams['text.kerning_factor'] = 6
   fig, ax = plt.subplots()
   ax.text(0.0, 0.05, 'BRAVO\nAWKWARD\nVAT\nW.Test', fontsize=56)
   ax.set_title('Before (text.kerning_factor = 6)')

Note how the spacing between characters is uniform between their bounding boxes
(above). With corrected kerning (below), slanted characters (e.g., AV or VA)
will be spaced closer together, as well as various other character pairs,
depending on font support (e.g., T and e, or the period after the W).

.. plot::

   import matplotlib.pyplot as plt

   # Use new kerning values:
   plt.rcParams['text.kerning_factor'] = 0
   fig, ax = plt.subplots()
   ax.text(0.0, 0.05, 'BRAVO\nAWKWARD\nVAT\nW.Test', fontsize=56)
   ax.set_title('After (text.kerning_factor = 0)')


bar3d lightsource shading
-------------------------
:meth:`~.Axes3D.bar3d` now supports lighting from different angles when the *shade*
parameter is ``True``, which can be configured using the ``lightsource``
parameter.

Shifting errorbars
------------------
Previously, `~.Axes.errorbar()` accepted a keyword argument *errorevery* such
that the command ``plt.errorbar(x, y, yerr, errorevery=6)`` would add error
bars to datapoints ``x[::6], y[::6]``.

`~.Axes.errorbar()` now also accepts a tuple for *errorevery* such that
``plt.errorbar(x, y, yerr, errorevery=(start, N))`` adds error bars to points
``x[start::N], y[start::N]``.

Improvements in Logit scale ticker and formatter
------------------------------------------------
Introduced in version 1.5, the logit scale didn't have an appropriate ticker and
formatter. Previously, the location of ticks was not zoom dependent, too many labels
were displayed causing overlapping which broke readability, and label formatting
did not adapt to precision.

Starting from this version, the logit locator has nearly the same behavior as the
locator for the log scale or the linear
scale, depending on used zoom. The number of ticks is controlled. Some minor
labels are displayed adaptively as sublabels in log scale. Formatting is adapted
for probabilities and the precision adapts to the scale.

rcParams for axes title location and color
------------------------------------------
Two new rcParams have been added: :rc:`axes.titlelocation` denotes the default axes title
alignment, and :rc:`axes.titlecolor` the default axes title color.

Valid values for ``axes.titlelocation`` are: left, center, and right.
Valid values for ``axes.titlecolor`` are: auto or a color. Setting it to auto
will fall back to previous behaviour, which is using the color in ``text.color``.

3-digit and 4-digit hex colors
------------------------------
Colors can now be specified using 3-digit or 4-digit hex colors, shorthand for
the colors obtained by duplicating each character, e.g. ``#123`` is equivalent to
``#112233`` and  ``#123a`` is equivalent to ``#112233aa``.



Added support for RGB(A) images in pcolorfast
---------------------------------------------

`.Axes.pcolorfast` now accepts 3D images (RGB or RGBA) arrays.
.. _github-stats-3-2-2:

GitHub statistics for 3.2.2 (Jun 17, 2020)
==========================================

GitHub statistics for 2020/03/18 (tag: v3.2.1) - 2020/06/17

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 34 issues and merged 92 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/52?closed=1>`__

The following 19 authors contributed 183 commits.

* Antony Lee
* Ben Root
* Clemens Brunner
* David Stansby
* Elliott Sales de Andrade
* Eric Firing
* Eric Wieser
* hannah
* Jody Klymak
* Lawrence D'Anna
* Leo Singer
* Luke Davis
* Matt Newville
* Max
* Ryan May
* Sidharth Bansal
* Stefan Mitic
* Thomas A Caswell
* Tim Hoffmann

GitHub issues and pull requests:

Pull Requests (92):

* :ghpull:`17655`: Auto backport of pr 17564 on v3.2.x
* :ghpull:`17564`: FIX: correctly handle large arcs
* :ghpull:`17641`: Qt backports
* :ghpull:`17640`: More qt fractional DPI fixes
* :ghpull:`17638`: V3.2.1 doc
* :ghpull:`15656`: Support fractional HiDpi scaling with Qt backends
* :ghpull:`17600`: FIX: work with PyQt 5.15
* :ghpull:`17598`: DOC: remove banner
* :ghpull:`17618`: Doc event loop
* :ghpull:`17614`: DOC: Remove duplicated line.
* :ghpull:`17611`: Backport #17606 to v3.2.x
* :ghpull:`17609`: Backport PR #17602: FIX: propagate _is_saving state when changing can…
* :ghpull:`17606`: Move codecov.yml to .github.
* :ghpull:`17602`: FIX: propagate _is_saving state when changing canvases
* :ghpull:`17605`: Backport PR #17560: FIX: do not let no-op monkey patches to renderer …
* :ghpull:`17601`: Backport PR #16948 on branch v3.2.x (solution: All subclasses of LocationEvent could be used in cbook.callbacks before being fully initialized - issue 15139)
* :ghpull:`17560`: FIX: do not let no-op monkey patches to renderer leak out
* :ghpull:`16948`: solution: All subclasses of LocationEvent could be used in cbook.callbacks before being fully initialized - issue 15139
* :ghpull:`17588`: Backport PR #17565: FIX: support Qt 5.15
* :ghpull:`17593`: Backport PR #17587 on branch v3.2.x (Add a docstring to toolkit's BezierPath.__init__.)
* :ghpull:`17587`: Add a docstring to toolkit's BezierPath.__init__.
* :ghpull:`17565`: FIX: support Qt 5.15
* :ghpull:`17562`: Backport PR #17470 on branch v3.2.x (FIX: add guardrails for too big tk figures)
* :ghpull:`17470`: FIX: add guardrails for too big tk figures
* :ghpull:`17553`: Backport PR #17552 on branch v3.2.x (ci: Add xcb libraries that were removed from PyQt5.)
* :ghpull:`17552`: ci: Add xcb libraries that were removed from PyQt5.
* :ghpull:`17533`: Backport PR #17408 on branch v3.2.x
* :ghpull:`17408`: FIX: cancel pending autoscale on manually setting limits
* :ghpull:`17501`: Backport PR #17499: Fix scatter singlecolor
* :ghpull:`17499`: Fix scatter singlecolor
* :ghpull:`17468`: v3.2.x: Fix leaks in C++ code
* :ghpull:`17457`: Backport PR #17391 on branch v3.2.x
* :ghpull:`17391`: tk/wx: Fix saving after the window is closed
* :ghpull:`17435`: Backport PR #17422: Unstale viewlims before draw()ing polar axes.
* :ghpull:`17422`: Unstale viewlims before draw()ing polar axes.
* :ghpull:`17407`: FIX: don't try to use non-standard functions on standard status bars
* :ghpull:`17346`: Backport #17084 and #17210 to v3.2.x
* :ghpull:`17084`: Fix macosx segfault
* :ghpull:`17300`: Backport PR #17263 on branch v3.2.x (you can't call CGDataProviderCreateWithData on a stack pointer)
* :ghpull:`17263`: you can't call CGDataProviderCreateWithData on a stack pointer
* :ghpull:`17272`: Backport PR #17271 on branch v3.2.x (MNT: do not try to import xml.etree.cElementTree)
* :ghpull:`17271`: MNT: do not try to import xml.etree.cElementTree
* :ghpull:`17268`: Backport PR #17261 on branch v3.2.x (avoid calling wx.Bitmap() if width or height is zero)
* :ghpull:`17261`: avoid calling wx.Bitmap() if width or height is zero
* :ghpull:`17257`: Backport eps work
* :ghpull:`17255`: Fix eps + usetex combo.
* :ghpull:`17254`: Backport PR #17252 on branch v3.2.x (Fix bug where matplotlib.style('default') resets the backend)
* :ghpull:`17252`: Fix bug where matplotlib.style('default') resets the backend
* :ghpull:`17250`: Merge pull request #17206 from jklymak/fix-bypass-inverse-collection
* :ghpull:`17206`: FIX: bypass inverse in collection
* :ghpull:`17241`: Backport PR #17240 on branch v3.2.x (CI: Download wx wheels for the correct Ubuntu version.)
* :ghpull:`17240`: CI: Download wx wheels for the correct Ubuntu version.
* :ghpull:`17210`: Fix missing attribute in _SVGConverter.
* :ghpull:`17186`: Backport PR #17131 on branch v3.2.x
* :ghpull:`17188`: Backport PR #16958: MAINT: Replace uses of tostring with tobytes
* :ghpull:`17187`: Backport PR #17076: Fix SyntaxErrors when running setup in old Python
* :ghpull:`16913`: Fix use of psfrags in ps backend + usetex.
* :ghpull:`16476`: Fix baseline alignment when using usetex.
* :ghpull:`17131`: BUG: Fix formatting error in GridSpec.__repr__
* :ghpull:`17132`: Backport PR #17126 on branch v3.2.x (Remove Python2/3 info box)
* :ghpull:`17126`: Remove Python2/3 info box
* :ghpull:`17076`: Fix SyntaxErrors when running setup in old Python
* :ghpull:`17071`: Backport PR #17065 on branch v3.2.x (Fix macOS CI test failure)
* :ghpull:`17065`: Fix macOS CI test failure
* :ghpull:`17051`: Backport PR #17045: Fix missing-references.json.
* :ghpull:`17045`: Fix missing-references.json.
* :ghpull:`17020`: Merge pull request #17017 from jklymak/fix-blended-transform
* :ghpull:`17017`: FIX: force blended transforms with data to be in data space
* :ghpull:`16989`: Backport PR #16980 on branch v3.2.x (Correctly disable more drawing methods in tight_bboxing renderer.)
* :ghpull:`16980`: Correctly disable more drawing methods in tight_bboxing renderer.
* :ghpull:`16974`: Backport PR #16940 on branch v3.2.x (DOC/FIX: clarify the docs for check_figures_equal)
* :ghpull:`16979`: Backport PR #16970 on branch v3.2.x (tk: Don't resize toolbar during resize event.)
* :ghpull:`16970`: tk: Don't resize toolbar during resize event.
* :ghpull:`16940`: DOC/FIX: clarify the docs for check_figures_equal
* :ghpull:`16969`: Backport PR #16966 on branch v3.2.x (Fix animation writer fallback.)
* :ghpull:`16966`: Fix animation writer fallback.
* :ghpull:`16958`: MAINT: Replace uses of tostring with tobytes
* :ghpull:`16950`: Backport PR #16949 on branch v3.2.x (TST: Don't modify actual pyplot file for boilerplate test.)
* :ghpull:`16949`: TST: Don't modify actual pyplot file for boilerplate test.
* :ghpull:`16932`: Backport PR #16929 on branch v3.2.x (tk: Resize the canvas, not the figure.)
* :ghpull:`16929`: tk: Resize the canvas, not the figure.
* :ghpull:`16880`: Backport PR #16870: Unbreak CI by xfailing wxAgg test on macOS
* :ghpull:`16870`: Unbreak CI by xfailing wxAgg test on macOS
* :ghpull:`16869`: Backport PR #16867 on branch v3.2.x (BLD: Auto-trigger macOS/Linux wheels on tags.)
* :ghpull:`16867`: BLD: Auto-trigger macOS/Linux wheels on tags.
* :ghpull:`16852`: Backport PR #16851 on branch v3.2.x (DOC: Fix docstring of Axes.secondary_yaxis.)
* :ghpull:`16855`: Fix typo in deprecation warning
* :ghpull:`16851`: DOC: Fix docstring of Axes.secondary_yaxis.
* :ghpull:`16842`: Backport PR #16835 on branch v3.2.x (Don't forget to export isdeleted on Qt4.)
* :ghpull:`16835`: Don't forget to export isdeleted on Qt4.
* :ghpull:`15695`: Define \mathdefault as a noop in the usetex preamble.
* :ghpull:`14694`: Vectorize Arc.draw.

Issues (34):

* :ghissue:`17547`: Arcs with large radii in small
* :ghissue:`17440`: Low quality window plots on hidpi display
* :ghissue:`17104`: input() caused _tkinter.TclError: invalid command name XXX after plot.close()
* :ghissue:`17613`: Matplotlib.pdf duplication
* :ghissue:`15139`: All subclasses of LocationEvent could be used in cbook.callbacks before being fully initialized
* :ghissue:`17004`: Output regression in 3.2 that affects SymPy's plotting
* :ghissue:`17599`: Saving issue with pdf backend
* :ghissue:`17542`: Matplotlib 3.2.1 savefig empty image when fig size matches data size exactly
* :ghissue:`17594`: Cannot use Qt4Agg backend in mpl 3.2.1
* :ghissue:`17460`: set_size_inches with a width over 14090 crashes Xorg
* :ghissue:`17331`: Surprising/changed axis limit (autoscale) behavior
* :ghissue:`17423`: Scatter produce multiple colors for a single RGB/RGBA input
* :ghissue:`17385`: Matplotlib memory leaks when save figure in a file with qt5 backend
* :ghissue:`15474`: Memory leak with log scale in pcolorfast, pcolormesh, imshow ...
* :ghissue:`17388`: savefig error: tkinter.TclError: invalid command name "."
* :ghissue:`16909`: plot save and plot show
* :ghissue:`17085`: set_function not working properly in backend_wx
* :ghissue:`17418`: Issue rendering polar plot (agg backend?) with rorigin set
* :ghissue:`17061`: Segmentation fault with macosx backend
* :ghissue:`17253`: EPS + usetex is broken
* :ghissue:`16700`: Deprecation warnings from stylelib
* :ghissue:`17203`: Subplots using bad axis limits in 3.2
* :ghissue:`16898`: EPS and ``usetex`` give blank output
* :ghissue:`16409`: Confusing error on fully commented-out usetex strings
* :ghissue:`17075`: Installation error downloading jquery on python3 on Ubuntu
* :ghissue:`17037`: Travis Failing in many PRs
* :ghissue:`17033`: Using a ``TextBox`` in current master produces a seemingly unrelated warning.
* :ghissue:`17016`: Issues with autoscaling and transforms with 3.2+
* :ghissue:`16978`: savefig("myplot.svgz", bbox_inches="tight") fails
* :ghissue:`16965`: FuncAnimation.save throws TypeError
* :ghissue:`16916`: check_figures_equal regression from 3.2.0 to 3.2.1
* :ghissue:`10566`: blocking UI functions cause figure size to change
* :ghissue:`10083`: Wrong figure height after set_size_inches within event handler
* :ghissue:`16834`: Error importing FigureCanvas
.. _whats-new-1-5:

What's new in Matplotlib 1.5 (Oct 29, 2015)
===========================================

.. contents:: Table of Contents
   :depth: 2


.. note::

   matplotlib 1.5 supports Python 2.7, 3.4, and 3.5






Interactive OO usage
--------------------

All `.Artist`\s now keep track of if their internal state has been
changed but not reflected in the display ('stale') by a call to
``draw``.  It is thus possible to pragmatically determine if a given
`.Figure` needs to be re-drawn in an interactive session.

To facilitate interactive usage a ``draw_all`` method has been added
to ``pyplot`` which will redraw all of the figures which are 'stale'.

To make this convenient for interactive use matplotlib now registers
a function either with IPython's 'post_execute' event or with the
displayhook in the standard python REPL to automatically call
``plt.draw_all`` just before control is returned to the REPL.  This ensures
that the draw command is deferred and only called once.

The upshot of this is that for interactive backends (including
``%matplotlib notebook``) in interactive mode (with ``plt.ion()``)

.. code-block :: python

   import matplotlib.pyplot as plt
   fig, ax = plt.subplots()
   ln, = ax.plot([0, 1, 4, 9, 16])
   plt.show()
   ln.set_color('g')


will automatically update the plot to be green.  Any subsequent
modifications to the ``Artist`` objects will do likewise.

This is the first step of a larger consolidation and simplification of
the pyplot internals.


Working with labeled data like pandas DataFrames
------------------------------------------------
Plot methods which take arrays as inputs can now also work with labeled data
and unpack such data.

This means that the following two examples produce the same plot:

Example ::

    df = pandas.DataFrame({"var1":[1,2,3,4,5,6], "var2":[1,2,3,4,5,6]})
    plt.plot(df["var1"], df["var2"])


Example ::

    plt.plot("var1", "var2", data=df)

This works for most plotting methods, which expect arrays/sequences as
inputs.  ``data`` can be anything which supports ``__getitem__``
(``dict``, ``pandas.DataFrame``, ``h5py``, ...) to access ``array`` like
values with string keys.

In addition to this, some other changes were made, which makes working with
labeled data (ex ``pandas.Series``) easier:

* For plotting methods with ``label`` keyword argument, one of the
  data inputs is designated as the label source.  If the user does not
  supply a ``label`` that value object will be introspected for a
  label, currently by looking for a ``name`` attribute.  If the value
  object does not have a ``name`` attribute but was specified by as a
  key into the ``data`` kwarg, then the key is used.  In the above
  examples, this results in an implicit ``label="var2"`` for both
  cases.

* ``plot()`` now uses the index of a ``Series`` instead of
  ``np.arange(len(y))``, if no ``x`` argument is supplied.


Added ``axes.prop_cycle`` key to rcParams
-----------------------------------------

This is a more generic form of the now-deprecated ``axes.color_cycle`` param.
Now, we can cycle more than just colors, but also linestyles, hatches,
and just about any other artist property. Cycler notation is used for
defining property cycles. Adding cyclers together will be like you are
`zip`-ing together two or more property cycles together::

    axes.prop_cycle: cycler('color', 'rgb') + cycler('lw', [1, 2, 3])

You can even multiply cyclers, which is like using `itertools.product`
on two or more property cycles.

.. figure:: ../../tutorials/intermediate/images/sphx_glr_color_cycle_001.png
   :target: ../../tutorials/intermediate/color_cycle.html
   :align: center
   :scale: 50

New Colormaps
-------------

All four of the colormaps proposed as the new default are available
as ``'viridis'`` (the new default in 2.0), ``'magma'``, ``'plasma'``, and
``'inferno'``

.. plot::

   import numpy as np
   from cycler import cycler
   cmap = cycler('cmap', ['viridis', 'magma','plasma', 'inferno'])
   x_mode = cycler('x', [1, 2])
   y_mode = cycler('y', x_mode)

   cy = (x_mode * y_mode) + cmap

   def demo(ax, x, y, cmap):
       X, Y = np.ogrid[0:2*np.pi:200j, 0:2*np.pi:200j]
       data = np.sin(X*x) * np.cos(Y*y)
       ax.imshow(data, interpolation='none', cmap=cmap)
       ax.set_title(cmap)

   fig, axes = plt.subplots(2, 2)
   for ax, sty in zip(axes.ravel(), cy):
       demo(ax, **sty)

   fig.tight_layout()


Styles
------

Several new styles have been added, including many styles from the
Seaborn project.  Additionally, in order to prep for the upcoming 2.0
style-change release, a 'classic' and 'default' style has been added.
For this release, the 'default' and 'classic' styles are identical.
By using them now in your scripts, you can help ensure a smooth
transition during future upgrades of matplotlib, so that you can
upgrade to the snazzy new defaults when you are ready! ::

    import matplotlib.style
    matplotlib.style.use('classic')

The 'default' style will give you matplotlib's latest plotting styles::

    matplotlib.style.use('default')

Backends
--------

New backend selection
`````````````````````

The environment variable :envvar:`MPLBACKEND` can now be used to set the
matplotlib backend.


wx backend has been updated
```````````````````````````

The wx backend can now be used with both wxPython classic and
`Phoenix <https://wxpython.org/Phoenix/docs/html/main.html>`__.

wxPython classic has to be at least version 2.8.12 and works on Python 2.x. As
of May 2015 no official release of wxPython Phoenix is available but a
current snapshot will work on Python 2.7+ and 3.4+.

If you have multiple versions of wxPython installed, then the user code is
responsible setting the wxPython version.  How to do this is
explained in the comment at the beginning of the example
:doc:`/gallery/user_interfaces/embedding_in_wx2_sgskip`.

Configuration (rcParams)
------------------------

Some parameters have been added, others have been improved.

+---------------------------+--------------------------------------------------+
| Parameter                 | Description                                      |
+===========================+==================================================+
|:rc:`xaxis.labelpad`,      | mplot3d now respects these parameters            |
|:rc:`yaxis.labelpad`       |                                                  |
+---------------------------+--------------------------------------------------+
|:rc:`axes.labelpad`        | Default space between the axis and the label     |
+---------------------------+--------------------------------------------------+
|:rc:`errorbar.capsize`     | Default length of end caps on error bars         |
+---------------------------+--------------------------------------------------+
|:rc:`xtick.minor.visible`, | Default visibility of minor x/y ticks            |
|:rc:`ytick.minor.visible`  |                                                  |
+---------------------------+--------------------------------------------------+
|:rc:`legend.framealpha`    | Default transparency of the legend frame box     |
+---------------------------+--------------------------------------------------+
|:rc:`legend.facecolor`     | Default facecolor of legend frame box (or        |
|                           | ``'inherit'`` from :rc:`axes.facecolor`)         |
+---------------------------+--------------------------------------------------+
|:rc:`legend.edgecolor`     | Default edgecolor of legend frame box (or        |
|                           | ``'inherit'`` from :rc:`axes.edgecolor`)         |
+---------------------------+--------------------------------------------------+
|:rc:`figure.titlesize`     | Default font size for figure suptitles           |
+---------------------------+--------------------------------------------------+
|:rc:`figure.titleweight`   | Default font weight for figure suptitles         |
+---------------------------+--------------------------------------------------+
|:rc:`image.composite_image`| Whether a vector graphics backend should         |
|                           | composite several images into a single image or  |
|                           | not when saving. Useful when needing to edit the |
|                           | files further in Inkscape or other programs.     |
+---------------------------+--------------------------------------------------+
|:rc:`markers.fillstyle`    | Default fillstyle of markers. Possible values    |
|                           | are ``'full'`` (the default), ``'left'``,        |
|                           | ``'right'``, ``'bottom'``, ``'top'`` and         |
|                           | ``'none'``                                       |
+---------------------------+--------------------------------------------------+
|:rc:`toolbar`              | Added ``'toolmanager'`` as a valid value,        |
|                           | enabling the experimental ``ToolManager``        |
|                           | feature.                                         |
+---------------------------+--------------------------------------------------+


Widgets
-------

Active state of Selectors
`````````````````````````

All selectors now implement ``set_active`` and ``get_active`` methods (also
called when accessing the ``active`` property) to properly update and query
whether they are active.


Moved ``ignore``, ``set_active``, and ``get_active`` methods to base class ``Widget``
`````````````````````````````````````````````````````````````````````````````````````

Pushes up duplicate methods in child class to parent class to avoid duplication of code.


Adds enable/disable feature to MultiCursor
``````````````````````````````````````````

A MultiCursor object can be disabled (and enabled) after it has been created without destroying the object.
Example::

  multi_cursor.active = False


Improved RectangleSelector and new EllipseSelector Widget
`````````````````````````````````````````````````````````

Adds an *interactive* keyword which enables visible handles for manipulating the shape after it has been drawn.

Adds keyboard modifiers for:

- Moving the existing shape (default key = 'space')
- Making the shape square (default 'shift')
- Make the initial point the center of the shape (default 'control')
- Square and center can be combined

Allow Artists to Display Pixel Data in Cursor
`````````````````````````````````````````````

Adds `~.Artist.get_cursor_data` and `~.Artist.format_cursor_data` methods to artists
which can be used to add zdata to the cursor display
in the status bar.  Also adds an implementation for Images.


New plotting features
---------------------


Auto-wrapping Text
``````````````````

Added the keyword argument "wrap" to Text, which automatically breaks
long lines of text when being drawn.  Works for any rotated text,
different modes of alignment, and for text that are either labels or
titles.  This breaks at the ``Figure``, not ``Axes`` edge.

.. plot::

   fig, ax = plt.subplots()
   fig.patch.set_color('.9')
   ax.text(.5, .75,
           "This is a really long string that should be wrapped so that "
           "it does not go outside the figure.", wrap=True)

Contour plot corner masking
```````````````````````````

Ian Thomas rewrote the C++ code that calculates contours to add support for
corner masking.  This is controlled by a new keyword argument
``corner_mask`` in the functions :func:`~matplotlib.pyplot.contour` and
:func:`~matplotlib.pyplot.contourf`.  The previous behaviour, which is now
obtained using ``corner_mask=False``, was for a single masked point to
completely mask out all four quads touching that point.  The new behaviour,
obtained using ``corner_mask=True``, only masks the corners of those
quads touching the point; any triangular corners comprising three unmasked
points are contoured as usual.  If the ``corner_mask`` keyword argument is not
specified, the default value is taken from rcParams.

.. figure:: ../../gallery/images_contours_and_fields/images/sphx_glr_contour_corner_mask_001.png
   :target: ../../gallery/images_contours_and_fields/contour_corner_mask.html
   :align: center
   :scale: 50

Mostly unified linestyles for `.Line2D`, `.Patch` and `.Collection`
```````````````````````````````````````````````````````````````````

The handling of linestyles for Lines, Patches and Collections has been
unified.  Now they all support defining linestyles with short symbols,
like "--", as well as with full names, like "dashed". Also the
definition using a dash pattern (``(0., [3., 3.])``) is supported for all
methods using `.Line2D`, `.Patch` or `.Collection`.


Legend marker order
```````````````````

Added ability to place the label before the marker in a legend box with
``markerfirst`` keyword


Support for legend for PolyCollection and stackplot
```````````````````````````````````````````````````

Added a :mod:`.legend_handler` for :class:`~matplotlib.collections.PolyCollection` as well as a *labels* argument to
:func:`~matplotlib.axes.Axes.stackplot`.


Support for alternate pivots in mplot3d quiver plot
```````````````````````````````````````````````````

Added a :code:`pivot` kwarg to `~.Axes3D.quiver`
that controls the pivot point around which the quiver line rotates. This also
determines the placement of the arrow head along the quiver line.


Logit Scale
```````````

Added support for the 'logit' axis scale, a nonlinear transformation

.. math::

   x -> \log10(x / (1-x))

for data between 0 and 1 excluded.


Add step kwargs to fill_between
```````````````````````````````

Added ``step`` kwarg to `.Axes.fill_between` to allow to fill between
lines drawn using the 'step' draw style.  The values of ``step`` match
those of the ``where`` kwarg of `.Axes.step`.  The asymmetry of the
kwargs names is not ideal, but `.Axes.fill_between` already has a
``where`` kwarg.

This is particularly useful for plotting pre-binned histograms.

.. figure:: ../../gallery/lines_bars_and_markers/images/sphx_glr_filled_step_001.png
   :target: ../../gallery/lines_bars_and_markers/filled_step.html
   :align: center
   :scale: 50

Square Plot
```````````

Implemented square plots feature as a new parameter in the axis
function. When argument 'square' is specified, equal scaling is set,
and the limits are set such that ``xmax-xmin == ymax-ymin``.

.. plot::

   fig, ax = plt.subplots()
   ax.axis('square')


Updated figimage to take optional resize parameter
``````````````````````````````````````````````````

Added the ability to plot simple 2D-Array using ``plt.figimage(X, resize=True)``.
This is useful for plotting simple 2D-Array without the Axes or whitespacing
around the image.

.. plot::

   data = np.random.random([500, 500])
   plt.figimage(data, resize=True)

Updated Figure.savefig() can now use figure's dpi
`````````````````````````````````````````````````

Added support to save the figure with the same dpi as the figure on the
screen using ``dpi='figure'``:.

Example::

   f = plt.figure(dpi=25)  # dpi set to 25
   S = plt.scatter([1,2,3],[4,5,6])
   f.savefig('output.png', dpi='figure')  # output savefig dpi set to 25 (same as figure)


Updated Table to control edge visibility
````````````````````````````````````````

Added the ability to toggle the visibility of lines in Tables.
Functionality added to the `.pyplot.table` factory function under
the keyword argument "edges".  Values can be the strings "open", "closed",
"horizontal", "vertical" or combinations of the letters "L", "R", "T",
"B" which represent left, right, top, and bottom respectively.

Example::

    table(..., edges="open")  # No line visible
    table(..., edges="closed")  # All lines visible
    table(..., edges="horizontal")  # Only top and bottom lines visible
    table(..., edges="LT")  # Only left and top lines visible.

Zero r/cstride support in plot_wireframe
````````````````````````````````````````

Adam Hughes added support to mplot3d's plot_wireframe to draw only row or
column line plots.


.. plot::

    from mpl_toolkits.mplot3d import Axes3D, axes3d
    fig = plt.figure()
    ax = fig.add_subplot(111, projection='3d')
    X, Y, Z = axes3d.get_test_data(0.05)
    ax.plot_wireframe(X, Y, Z, rstride=10, cstride=0)


Plot bar and barh with labels
`````````````````````````````

Added kwarg *tick_label* to `~.Axes.bar` and `~.Axes.barh` to support plotting bar graphs with a
text label for each bar.

.. plot::

   plt.bar([1, 2], [.5, .75], tick_label=['bar1', 'bar2'],
           align='center')

Added center and frame kwargs to pie
````````````````````````````````````

These control where the center of the pie graph are and if
the Axes frame is shown.

Fixed 3D filled contour plot polygon rendering
``````````````````````````````````````````````

Certain cases of 3D filled contour plots that produce polygons with multiple
holes produced improper rendering due to a loss of path information between
:class:`~matplotlib.collections.PolyCollection` and
:class:`~mpl_toolkits.mplot3d.art3d.Poly3DCollection`.  A function
:func:`~matplotlib.collections.PolyCollection.set_verts_and_codes` was
added to allow path information to be retained for proper rendering.

Dense colorbars are rasterized
``````````````````````````````

Vector file formats (pdf, ps, svg) are efficient for
many types of plot element, but for some they can yield
excessive file size and even rendering artifacts, depending
on the renderer used for screen display.  This is a problem
for colorbars that show a large number of shades, as is
most commonly the case.  Now, if a colorbar is showing
50 or more colors, it will be rasterized in vector
backends.


DateFormatter strftime
``````````````````````
:class:`~matplotlib.dates.DateFormatter`\ 's ``__call__`` method will format
a :class:`datetime.datetime` object with the format string passed to
the formatter's constructor. This method accepts datetimes with years
before 1900, unlike :meth:`datetime.datetime.strftime`.


Artist-level {get,set}_usetex for text
``````````````````````````````````````

Add ``{get,set}_usetex`` methods to :class:`~matplotlib.text.Text` objects
which allow artist-level control of LaTeX rendering vs. the internal mathtex
rendering.


``Axes.remove()`` works as expected
```````````````````````````````````

As with artists added to an :class:`~matplotlib.axes.Axes`,
`~.axes.Axes` objects can be removed from their figure via
`~.Artist.remove()`.


API Consistency fix within Locators set_params() function
`````````````````````````````````````````````````````````

:meth:`~matplotlib.ticker.Locator.set_params` function, which sets parameters
within a :class:`~matplotlib.ticker.Locator` type
instance, is now available to all `.Locator` types. The implementation
also prevents unsafe usage by strictly defining the parameters that a
user can set.

To use, call ``set_params()`` on a `.Locator` instance with desired arguments:
::

    loc = matplotlib.ticker.LogLocator()
    # Set given attributes for loc.
    loc.set_params(numticks=8, numdecs=8, subs=[2.0], base=8)
    # The below will error, as there is no such parameter for LogLocator
    # named foo
    # loc.set_params(foo='bar')


Date Locators
`````````````

Date Locators (derived from :class:`~matplotlib.dates.DateLocator`) now
implement the `~matplotlib.ticker.Locator.tick_values` method.
This is expected of all Locators derived from `~matplotlib.ticker.Locator`.

The Date Locators can now be used easily without creating axes ::

    from datetime import datetime
    from matplotlib.dates import YearLocator
    t0 = datetime(2002, 10, 9, 12, 10)
    tf = datetime(2005, 10, 9, 12, 15)
    loc = YearLocator()
    values = loc.tick_values(t0, tf)

OffsetBoxes now support clipping
````````````````````````````````

`.Artist`\s draw onto objects of type `.OffsetBox`
through `~.offsetbox.DrawingArea` and `~.offsetbox.TextArea`.
The `.TextArea` calculates the required space for the text and so the
text is always within the bounds, for this nothing has changed.

However, `.DrawingArea` acts as a parent for zero or more `.Artist`\s that
draw on it and may do so beyond the bounds. Now child `.Artist`\s can be
clipped to the bounds of the `.DrawingArea`.


OffsetBoxes now considered by tight_layout
``````````````````````````````````````````

When `~matplotlib.pyplot.tight_layout()` or `.Figure.tight_layout`
or `.GridSpec.tight_layout()` is called, `.OffsetBox`\es that are
anchored outside the axes will not get chopped out. The `.OffsetBox`\es will
also not get overlapped by other axes in case of multiple subplots.

Per-page pdf notes in multi-page pdfs (PdfPages)
````````````````````````````````````````````````

Add a new method :meth:`~matplotlib.backends.backend_pdf.PdfPages.attach_note`
to the PdfPages class, allowing the
attachment of simple text notes to pages in a multi-page pdf of
figures. The new note is visible in the list of pdf annotations in a
viewer that has this facility (Adobe Reader, OSX Preview, Skim,
etc.). Per default the note itself is kept off-page to prevent it to
appear in print-outs.

`.PdfPages.attach_note` needs to be called before `~.Figure.savefig` in order to be
added to the correct figure.

Updated fignum_exists to take figure name
`````````````````````````````````````````

Added the ability to check the existence of a figure using its name
instead of just the figure number.
Example::

  figure('figure')
  fignum_exists('figure') #true


ToolManager
-----------

Federico Ariza wrote the new `~matplotlib.backend_managers.ToolManager`
that comes as replacement for `.NavigationToolbar2`

`.ToolManager` offers a new way of looking at the user interactions
with the figures.  Before we had the `.NavigationToolbar2` with its own
tools like ``zoom/pan/home/save/...`` and also we had the shortcuts like
``yscale/grid/quit/....``. `.ToolManager` relocate all those actions as
Tools (located in `~matplotlib.backend_tools`), and defines a way to
access/trigger/reconfigure them.

The Toolbars are replaced by `.ToolContainerBase`\s that are just GUI
interfaces to trigger the tools. But don't worry the default
backends include a `.ToolContainerBase` called ``toolbar``


.. note::
    At the moment, we release this primarily for feedback purposes and should
    be treated as experimental until further notice as API changes will occur.
    For the moment the `.ToolManager` works only with the GTK3 and Tk backends.
    Make sure you use one of those.
    Port for the rest of the backends is coming soon.

    To activate the `.ToolManager` include the following at the top of your file ::

      >>> matplotlib.rcParams['toolbar'] = 'toolmanager'


Interact with the ToolContainer
```````````````````````````````

The most important feature is the ability to easily reconfigure the ToolContainer (aka toolbar).
For example, if we want to remove the "forward" button we would just do. ::

 >>> fig.canvas.manager.toolmanager.remove_tool('forward')

Now if you want to programmatically trigger the "home" button ::

 >>> fig.canvas.manager.toolmanager.trigger_tool('home')


New Tools for ToolManager
`````````````````````````

It is possible to add new tools to the ToolManager

A very simple tool that prints "You're awesome" would be::

    from matplotlib.backend_tools import ToolBase
    class AwesomeTool(ToolBase):
        def trigger(self, *args, **kwargs):
            print("You're awesome")


To add this tool to `.ToolManager`

 >>> fig.canvas.manager.toolmanager.add_tool('Awesome', AwesomeTool)

If we want to add a shortcut ("d") for the tool

 >>> fig.canvas.manager.toolmanager.update_keymap('Awesome', 'd')


To add it to the toolbar inside the group 'foo'

 >>> fig.canvas.manager.toolbar.add_tool('Awesome', 'foo')


There is a second class of tools, "Toggleable Tools", this are almost
the same as our basic tools, just that belong to a group, and are
mutually exclusive inside that group.  For tools derived from
`.ToolToggleBase` there are two basic methods `~.ToolToggleBase.enable` and `~.ToolToggleBase.disable`
that are called automatically whenever it is toggled.


A full example is located in :doc:`/gallery/user_interfaces/toolmanager_sgskip`


cbook.is_sequence_of_strings recognizes string objects
------------------------------------------------------

This is primarily how pandas stores a sequence of strings ::

    import pandas as pd
    import matplotlib.cbook as cbook

    a = np.array(['a', 'b', 'c'])
    print(cbook.is_sequence_of_strings(a))  # True

    a = np.array(['a', 'b', 'c'], dtype=object)
    print(cbook.is_sequence_of_strings(a))  # True

    s = pd.Series(['a', 'b', 'c'])
    print(cbook.is_sequence_of_strings(s))  # True

Previously, the last two prints returned false.


New ``close-figs`` argument for plot directive
----------------------------------------------

Matplotlib has a sphinx extension ``plot_directive`` that creates plots for
inclusion in sphinx documents.  Matplotlib 1.5 adds a new option to the plot
directive - ``close-figs`` - that closes any previous figure windows before
creating the plots.  This can help avoid some surprising duplicates of plots
when using ``plot_directive``.

Support for URL string arguments to ``imread``
----------------------------------------------

The :func:`~matplotlib.pyplot.imread` function now accepts URL strings that
point to remote PNG files. This circumvents the generation of a
HTTPResponse object directly.

Display hook for animations in the IPython notebook
---------------------------------------------------

`~matplotlib.animation.Animation` instances gained a ``_repr_html_`` method
to support inline display of animations in the notebook. The method used
to display is controlled by the ``animation.html`` rc parameter, which
currently supports values of ``none`` and ``html5``. ``none`` is the
default, performing no display. ``html5`` converts the animation to an
h264 encoded video, which is embedded directly in the notebook.

Users not wishing to use the ``_repr_html_`` display hook can also manually
call the `.to_html5_video` method to get the HTML and display using
IPython's ``HTML`` display class::

    from IPython.display import HTML
    HTML(anim.to_html5_video())

Prefixed pkg-config for building
--------------------------------

Handling of pkg-config has been fixed in so far as it is now possible to set it
using the environment variable ``PKG_CONFIG``. This is important if your
toolchain is prefixed. This is done in a simpilar way as setting ``CC``
or ``CXX`` before building. An example follows.

    export PKG_CONFIG=x86_64-pc-linux-gnu-pkg-config
.. _github-stats-3-3-3:

GitHub statistics for 3.3.3 (Nov 11, 2020)
==========================================

GitHub statistics for 2020/09/15 (tag: v3.3.2) - 2020/11/11

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 14 issues and merged 46 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/58?closed=1>`__

The following 11 authors contributed 73 commits.

* Antony Lee
* David Stansby
* Elliott Sales de Andrade
* Eric Larson
* Jody Klymak
* Jouni K. Seppänen
* Ryan May
* shevawen
* Stephen Sinclair
* Thomas A Caswell
* Tim Hoffmann

GitHub issues and pull requests:

Pull Requests (46):

* :ghpull:`18936`: Backport PR #18929 on branch v3.3.x
* :ghpull:`18929`: FIX: make sure scalarmappable updates are handled correctly in 3D
* :ghpull:`18928`: Backport PR #18842 on branch v3.3.x (Add CPython 3.9 wheels.)
* :ghpull:`18842`: Add CPython 3.9 wheels.
* :ghpull:`18921`: Backport PR #18732 on branch v3.3.x (Add a ponyfill for ResizeObserver on older browsers.)
* :ghpull:`18732`: Add a ponyfill for ResizeObserver on older browsers.
* :ghpull:`18886`: Backport #18860 on branch v3.3.x
* :ghpull:`18860`: FIX: stop deprecation message colorbar
* :ghpull:`18845`: Backport PR #18839 on branch v3.3.x
* :ghpull:`18843`: Backport PR #18756 on branch v3.3.x (FIX: improve date performance regression)
* :ghpull:`18850`: Backport CI fixes to v3.3.x
* :ghpull:`18839`: MNT: make sure we do not mutate input in Text.update
* :ghpull:`18838`: Fix ax.set_xticklabels(fontproperties=fp)
* :ghpull:`18756`: FIX: improve date performance regression
* :ghpull:`18787`: Backport PR #18769 on branch v3.3.x
* :ghpull:`18786`: Backport PR #18754 on branch v3.3.x (FIX: make sure we have more than 1 tick with small log ranges)
* :ghpull:`18754`: FIX: make sure we have more than 1 tick with small log ranges
* :ghpull:`18769`: Support ``ax.grid(visible=<bool>)``.
* :ghpull:`18778`: Backport PR #18773 on branch v3.3.x (Update to latest cibuildwheel release.)
* :ghpull:`18773`: Update to latest cibuildwheel release.
* :ghpull:`18755`: Backport PR #18734 on branch v3.3.x (Fix deprecation warning in GitHub Actions.)
* :ghpull:`18734`: Fix deprecation warning in GitHub Actions.
* :ghpull:`18725`: Backport PR #18533 on branch v3.3.x
* :ghpull:`18723`: Backport PR #18584 on branch v3.3.x (Fix setting 0-timeout timer with Tornado.)
* :ghpull:`18676`: Backport PR #18670 on branch v3.3.x (MNT: make certifi actually optional)
* :ghpull:`18670`: MNT: make certifi actually optional
* :ghpull:`18665`: Backport PR #18639 on branch v3.3.x (nbagg: Don't close figures for bubbled events.)
* :ghpull:`18639`: nbagg: Don't close figures for bubbled events.
* :ghpull:`18640`: Backport PR #18636 on branch v3.3.x (BLD: certifi is not a run-time dependency)
* :ghpull:`18636`: BLD: certifi is not a run-time dependency
* :ghpull:`18629`: Backport PR #18621 on branch v3.3.x (Fix singleshot timers in wx.)
* :ghpull:`18621`: Fix singleshot timers in wx.
* :ghpull:`18607`: Backport PR #18604 on branch v3.3.x (Update test image to fix Ghostscript 9.53.)
* :ghpull:`18604`: Update test image to fix Ghostscript 9.53.
* :ghpull:`18584`: Fix setting 0-timeout timer with Tornado.
* :ghpull:`18550`: backport pr 18549
* :ghpull:`18545`: Backport PR #18540 on branch v3.3.x (Call to ExitStack.push should have been ExitStack.callback.)
* :ghpull:`18549`: FIX: unit-convert pcolorargs before interpolating
* :ghpull:`18540`: Call to ExitStack.push should have been ExitStack.callback.
* :ghpull:`18533`: Correctly remove support for \stackrel.
* :ghpull:`18509`: Backport PR #18505 on branch v3.3.x (Fix depth shading when edge/facecolor is none.)
* :ghpull:`18505`: Fix depth shading when edge/facecolor is none.
* :ghpull:`18504`: Backport PR #18500 on branch v3.3.x (BUG: Fix all-masked imshow)
* :ghpull:`18500`: BUG: Fix all-masked imshow
* :ghpull:`18476`: CI: skip qt, cairo, pygobject related installs on OSX on travis
* :ghpull:`18134`: Build on xcode9

Issues (14):

* :ghissue:`18885`: 3D Scatter Plot with Colorbar is not saved correctly with savefig
* :ghissue:`18922`: pyplot.xticks(): Font property specification is not effective except 1st tick label.
* :ghissue:`18481`: "%matplotlib notebook" not working in firefox with matplotlib 3.3.1
* :ghissue:`18595`: Getting internal "MatplotlibDeprecationWarning: shading='flat' ..."
* :ghissue:`18743`:  from mpl 3.2.2 to 3.3.0 enormous increase in creation time
* :ghissue:`18317`: pcolormesh: shading='nearest' and non-monotonic coordinates
* :ghissue:`18758`: Using Axis.grid(visible=True) results in TypeError for multiple values for keyword argument
* :ghissue:`18638`: ``matplotlib>=3.3.2`` breaks ``ipywidgets.interact``
* :ghissue:`18337`: Error installing matplotlib-3.3.1 using pip due to old version of certifi on conda environment
* :ghissue:`18620`: wx backend assertion error with fig.canvas.timer.start()
* :ghissue:`18551`: test_transparent_markers[pdf] is broken on v3.3.x Travis macOS
* :ghissue:`18580`: Animation freezes in Jupyter notebook
* :ghissue:`18547`: pcolormesh x-axis with datetime broken for nearest shading
* :ghissue:`18539`: Error in Axes.redraw_in_frame in use of ExitStack: push() takes 2 positional arguments but 3 were given
.. _whats-new-3-1-0:

What's new in Matplotlib 3.1 (May 18, 2019)
===========================================

For a list of all of the issues and pull requests since the last
revision, see the :ref:`github-stats`.

.. contents:: Table of Contents
   :depth: 4

.. toctree::
   :maxdepth: 4

New Features
------------

`~.dates.ConciseDateFormatter`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The automatic date formatter used by default can be quite verbose.  A new
formatter can be accessed that tries to make the tick labels appropriately
concise.

  .. plot::

    import datetime
    import matplotlib.pyplot as plt
    import matplotlib.dates as mdates
    import numpy as np

    # make a timeseries...
    base = datetime.datetime(2005, 2, 1)
    dates = np.array([base + datetime.timedelta(hours= 2 * i)
                      for i in range(732)])
    N = len(dates)
    np.random.seed(19680801)
    y = np.cumsum(np.random.randn(N))

    lims = [(np.datetime64('2005-02'), np.datetime64('2005-04')),
            (np.datetime64('2005-02-03'), np.datetime64('2005-02-15')),
            (np.datetime64('2005-02-03 11:00'), np.datetime64('2005-02-04 13:20'))]
    fig, axs = plt.subplots(3, 1, constrained_layout=True)
    for nn, ax in enumerate(axs):
        # activate the formatter here.
        locator = mdates.AutoDateLocator()
        formatter = mdates.ConciseDateFormatter(locator)
        ax.xaxis.set_major_locator(locator)
        ax.xaxis.set_major_formatter(formatter)

        ax.plot(dates, y)
        ax.set_xlim(lims[nn])
    axs[0].set_title('Concise Date Formatter')

    plt.show()

Secondary x/y Axis support
~~~~~~~~~~~~~~~~~~~~~~~~~~

A new method provides the ability to add a second axis to an existing
axes via `.Axes.secondary_xaxis` and `.Axes.secondary_yaxis`.  See
:doc:`/gallery/subplots_axes_and_figures/secondary_axis` for examples.

.. plot::

    import matplotlib.pyplot as plt

    fig, ax = plt.subplots(figsize=(5, 3))
    ax.plot(range(360))
    ax.secondary_xaxis('top', functions=(np.deg2rad, np.rad2deg))


`~.scale.FuncScale` for arbitrary axes scales
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

A new `~.scale.FuncScale` class was added (and `~.scale.FuncTransform`)
to allow the user to have arbitrary scale transformations without having to
write a new subclass of `~.scale.ScaleBase`.  This can be accessed by::

  ax.set_yscale('function', functions=(forward, inverse))

where ``forward`` and ``inverse`` are callables that return the scale
transform and its inverse.  See the last example in
:doc:`/gallery/scales/scales`.


Legend for scatter
~~~~~~~~~~~~~~~~~~

A new method for creating legends for scatter plots has been
introduced.  Previously, in order to obtain a legend for a
:meth:`~.axes.Axes.scatter` plot, one could either plot several
scatters, each with an individual label, or create proxy artists to
show in the legend manually.  Now,
:class:`~.collections.PathCollection` provides a method
:meth:`~.collections.PathCollection.legend_elements` to obtain the
handles and labels for a scatter plot in an automated way. This makes
creating a legend for a scatter plot as easy as

.. plot::

    scatter = plt.scatter([1,2,3], [4,5,6], c=[7,2,3])
    plt.legend(*scatter.legend_elements())

An example can be found in :ref:`automatedlegendcreation`.


Matplotlib no longer requires framework app build on MacOSX backend
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Previous versions of matplotlib required a Framework build of python to
work. The app type was updated to no longer require this, so the MacOSX
backend should work with non-framework python.


This also adds support for the MacOSX backend for PyPy3.


Figure, FigureCanvas, and Backends
----------------------------------

Figure.frameon is now a direct proxy for the Figure patch visibility state
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Accessing ``Figure.frameon`` (including via ``get_frameon`` and ``set_frameon``
now directly forwards to the visibility of the underlying Rectangle artist
(``Figure.patch.get_frameon``, ``Figure.patch.set_frameon``).


*pil_kwargs* argument added to savefig
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Matplotlib uses Pillow to handle saving to the JPEG and TIFF formats.  The
`~.Figure.savefig()` function gained a *pil_kwargs* keyword argument, which can
be used to forward arguments to Pillow's `PIL.Image.Image.save`.

The *pil_kwargs* argument can also be used when saving to PNG.  In that case,
Matplotlib also uses Pillow's `PIL.Image.Image.save` instead of going through its
own builtin PNG support.


Add ``inaxes`` method to `.FigureCanvasBase`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The `.FigureCanvasBase` class has now an `~.FigureCanvasBase.inaxes`
method to check whether a point is in an axes and returns the topmost
axes, else None.

cairo backend defaults to pycairo instead of cairocffi
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

This leads to faster import/runtime performance in some cases. The backend
will fall back to cairocffi in case pycairo isn't available.


Axes and Artists
----------------

axes_grid1 and axisartist Axes no longer draw spines twice
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Previously, spines of `.axes_grid1` and `.axisartist` Axes would be drawn twice,
leading to a "bold" appearance.  This is no longer the case.


Return type of ArtistInspector.get_aliases changed
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
`.ArtistInspector.get_aliases` previously returned the set of aliases as
``{fullname: {alias1: None, alias2: None, ...}}``.  The dict-to-None mapping
was used to simulate a set in earlier versions of Python.  It has now been
replaced by a set, i.e. ``{fullname: {alias1, alias2, ...}}``.

This value is also stored in ``ArtistInspector.aliasd``, which has likewise
changed.


`.ConnectionPatch` accepts arbitrary transforms
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Alternatively to strings like ``"data"`` or ``"axes fraction"``,
`.ConnectionPatch` now accepts any `~matplotlib.transforms.Transform` as input
for the *coordsA* and *coordsB* arguments. This allows to draw lines between
points defined in different user defined coordinate systems. Also see the
:doc:`Connect Simple01 example </gallery/userdemo/connect_simple01>`.


mplot3d Line3D now allows {set,get}_data_3d
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Lines created with the 3d projection in mplot3d can now access the
data using `~.mplot3d.art3d.Line3D.get_data_3d()` which returns a
tuple of array_likes containing the (x, y, z) data. The equivalent
`~.mplot3d.art3d.Line3D.set_data_3d` can be used to modify the data of
an existing Line3D.


``Axes3D.voxels`` now shades the resulting voxels
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The `.Axes3D.voxels` method now takes a
*shade* parameter that defaults to `True`. This shades faces based
on their orientation, behaving just like the matching parameters to
:meth:`~mpl_toolkits.mplot3d.axes3d.Axes3D.plot_trisurf` and
:meth:`~mpl_toolkits.mplot3d.axes3d.Axes3D.bar3d`.  The plot below shows how
this affects the output.

.. plot::

	import matplotlib.pyplot as plt
	import numpy as np

	# prepare some coordinates
	x, y, z = np.indices((8, 8, 8))

	# draw cuboids in the top left and bottom right corners, and a link between them
	cube1 = (x < 3) & (y < 3) & (z < 3)
	cube2 = (x >= 5) & (y >= 5) & (z >= 5)
	link = abs(x - y) + abs(y - z) + abs(z - x) <= 2

	# combine the objects into a single boolean array
	voxels = cube1 | cube2 | link

	# set the colors of each object
	colors = np.empty(voxels.shape, dtype=object)
	colors[link] = 'red'
	colors[cube1] = 'blue'
	colors[cube2] = 'green'

	# and plot everything
	fig = plt.figure(figsize=plt.figaspect(0.5))
	ax, ax_shaded = fig.subplots(1, 2, subplot_kw=dict(projection='3d'))
	ax.voxels(voxels, facecolors=colors, edgecolor='k', shade=False)
	ax.set_title("Unshaded")
	ax_shaded.voxels(voxels, facecolors=colors, edgecolor='k', shade=True)
	ax_shaded.set_title("Shaded (default)")

	plt.show()

Axis and Ticks
--------------

Added `.Axis.get_inverted` and `.Axis.set_inverted`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The `.Axis.get_inverted` and `.Axis.set_inverted` methods query and set whether
the axis uses "inverted" orientation (i.e. increasing to the left for the
x-axis and to the bottom for the y-axis).

They perform tasks similar to `.Axes.xaxis_inverted`, `.Axes.yaxis_inverted`,
`.Axes.invert_xaxis`, and `.Axes.invert_yaxis`, with the specific difference
that `.Axis.set_inverted` makes it easier to set the inversion of an axis
regardless of whether it had previously been inverted before.

Adjust default minor tick spacing
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Default minor tick spacing was changed from 0.625 to 0.5 for major ticks spaced
2.5 units apart.


`.EngFormatter` now accepts *usetex*, *useMathText* as keyword only arguments
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

A public API has been added to `.EngFormatter` to control how the numbers in
the ticklabels will be rendered. By default, *useMathText* evaluates to
:rc:`axes.formatter.use_mathtext'` and *usetex* evaluates to
:rc:`'text.usetex'`.

If either is `True` then the numbers will be encapsulated by ``$``
signs.  When using ``TeX`` this implies that the numbers will be shown
in TeX's math font. When using mathtext, the ``$`` signs around
numbers will ensure Unicode rendering (as implied by mathtext). This
will make sure that the minus signs in the ticks are rendered as the
Unicode minus (U+2212) when using mathtext (without relying on the
`~.Formatter.fix_minus` method).



Animation and Interactivity
---------------------------

Support for forward/backward mouse buttons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Figure managers now support a ``button_press`` event for mouse
buttons, similar to the ``key_press`` events. This allows binding
actions to mouse buttons (see `.MouseButton`) The first application of
this mechanism is support of forward/backward mouse buttons in figures
created with the Qt5 backend.


*progress_callback* argument to `~.Animation.save()`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The method `.Animation.save` gained an optional
*progress_callback* argument to notify the saving progress.


Add ``cache_frame_data`` keyword-only argument into `.animation.FuncAnimation`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`.matplotlib.animation.FuncAnimation` has been caching frame data by
default; however, this caching is not ideal in certain cases e.g. When
`.FuncAnimation` needs to be only drawn(not saved) interactively and
memory required by frame data is quite large. By adding
*cache_frame_data* keyword-only argument, users can now disable this
caching; thereby, this new argument provides a fix for issue
:ghissue:`8528`.


Endless Looping GIFs with PillowWriter
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

We acknowledge that most people want to watch a GIF more than
once. Saving an animation as a GIF with PillowWriter now produces an
endless looping GIF.


Adjusted `.matplotlib.widgets.Slider` to have vertical orientation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The :class:`matplotlib.widgets.Slider` widget now takes an optional
argument *orientation* which indicates the direction
(``'horizontal'`` or ``'vertical'``) that the slider should take.

Improved formatting of image values under cursor when a colorbar is present
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

When a colorbar is present, its formatter is now used to format the image
values under the mouse cursor in the status bar.  For example, for an image
displaying the values 10,000 and 10,001, the statusbar will now (using default
settings) display the values as ``10000`` and ``10001``), whereas both values
were previously displayed as ``1e+04``.

MouseEvent button attribute is now an IntEnum
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The ``button`` attribute of `~.MouseEvent` instances can take the values
None, 1 (left button), 2 (middle button), 3 (right button), "up" (scroll), and
"down" (scroll).  For better legibility, the 1, 2, and 3 values are now
represented using the `enum.IntEnum` class `matplotlib.backend_bases.MouseButton`,
with the values `.MouseButton.LEFT` (``== 1``), `.MouseButton.MIDDLE` (``== 2``),
and `.MouseButton.RIGHT` (``== 3``).


Configuration, Install, and Development
---------------------------------------

The MATPLOTLIBRC environment variable can now point to any "file" path
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This includes device files; in particular, on Unix systems, one can set
``MATPLOTLIBRC`` to ``/dev/null`` to ignore the user's matplotlibrc file and
fall back to Matplotlib's defaults.

As a reminder, if ``MATPLOTLIBRC`` points to a directory, Matplotlib will try
to load the matplotlibrc file from ``$MATPLOTLIBRC/matplotlibrc``.


Allow LaTeX code ``pgf.preamble`` and ``text.latex.preamble`` in MATPLOTLIBRC file
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Previously, the rc file keys :rc:`pgf.preamble` and
:rc:`text.latex.preamble` were parsed using commas as separators. This
would break valid LaTeX code, such as::

   \usepackage[protrusion=true, expansion=false]{microtype}

The parsing has been modified to pass the complete line to the LaTeX
system, keeping all commas. Passing a list of strings from within a
Python script still works as it used to.



New logging API
~~~~~~~~~~~~~~~

`matplotlib.set_loglevel` / `.pyplot.set_loglevel` can be called to
display more (or less) detailed logging output.
.. _whats-new-0-98-4:

What's new in Matplotlib 0.98.4
===============================

.. contents:: Table of Contents
   :depth: 2



It's been four months since the last matplotlib release, and there are
a lot of new features and bug-fixes.

Thanks to Charlie Moad for testing and preparing the source release,
including binaries for OS X and Windows for python 2.4 and 2.5 (2.6
and 3.0 will not be available until numpy is available on those
releases).  Thanks to the many developers who contributed to this
release, with contributions from Jae-Joon Lee, Michael Droettboom,
Ryan May, Eric Firing, Manuel Metz, Jouni K. Seppänen, Jeff Whitaker,
Darren Dale, David Kaplan, Michiel de Hoon and many others who
submitted patches

.. _legend-refactor:

Legend enhancements
-------------------

Jae-Joon has rewritten the legend class, and added support for
multiple columns and rows, as well as fancy box drawing.  See
:func:`~matplotlib.pyplot.legend` and
:class:`matplotlib.legend.Legend`.

.. plot::

    ax = plt.subplot()
    t1 = np.arange(0.0, 1.0, 0.01)
    for n in [1, 2, 3, 4]:
        plt.plot(t1, t1**n, label=f"n={n}")

    leg = plt.legend(loc='best', ncol=2, mode="expand", shadow=True, fancybox=True)
    leg.get_frame().set_alpha(0.5)

    plt.show()


.. _fancy-annotations:

Fancy annotations and arrows
----------------------------

Jae-Joon has added lots of support to annotations for drawing fancy
boxes and connectors in annotations.  See
:func:`~matplotlib.pyplot.annotate` and
:class:`~matplotlib.patches.BoxStyle`,
:class:`~matplotlib.patches.ArrowStyle`, and
:class:`~matplotlib.patches.ConnectionStyle`.

.. plot::

    import matplotlib.patches as mpatch
    import matplotlib.pyplot as plt

    figheight = 4
    fig = plt.figure(figsize=(4.5, figheight), dpi=80)
    fontsize = 0.2 * fig.dpi

    def make_boxstyles(ax):
        styles = mpatch.BoxStyle.get_styles()

        for i, (stylename, styleclass) in enumerate(sorted(styles.items())):
            ax.text(0.5, (float(len(styles)) - 0.5 - i)/len(styles), stylename,
                      ha="center",
                      size=fontsize,
                      transform=ax.transAxes,
                      bbox=dict(boxstyle=stylename, fc="w", ec="k"))

    def make_arrowstyles(ax):
        styles = mpatch.ArrowStyle.get_styles()

        ax.set_xlim(0, 4)
        ax.set_ylim(0, figheight*2)

        for i, (stylename, styleclass) in enumerate(sorted(styles.items())):
            y = (float(len(styles)) - 0.25 - i)  # /figheight
            p = mpatch.Circle((3.2, y), 0.2, fc="w")
            ax.add_patch(p)

            ax.annotate(stylename, (3.2, y),
                        (2., y),
                        # xycoords="figure fraction", textcoords="figure fraction",
                        ha="right", va="center",
                        size=fontsize,
                        arrowprops=dict(arrowstyle=stylename,
                                        patchB=p,
                                        shrinkA=5,
                                        shrinkB=5,
                                        fc="w", ec="k",
                                        connectionstyle="arc3,rad=-0.05",
                                        ),
                        bbox=dict(boxstyle="square", fc="w"))

        ax.xaxis.set_visible(False)
        ax.yaxis.set_visible(False)


    ax1 = fig.add_subplot(121, frameon=False, xticks=[], yticks=[])
    make_boxstyles(ax1)

    ax2 = fig.add_subplot(122, frameon=False, xticks=[], yticks=[])
    make_arrowstyles(ax2)


    plt.show()


Native OS X backend
-------------------

Michiel de Hoon has provided a native Mac OSX backend that is almost
completely implemented in C. The backend can therefore use Quartz
directly and, depending on the application, can be orders of magnitude
faster than the existing backends. In addition, no third-party
libraries are needed other than Python and NumPy. The backend is
interactive from the usual terminal application on Mac using regular
Python. It hasn't been tested with ipython yet, but in principle it
should to work there as well.  Set 'backend : macosx' in your
matplotlibrc file, or run your script with::

    > python myfile.py -dmacosx


.. _psd-amplitude:

psd amplitude scaling
---------------------

Ryan May did a lot of work to rationalize the amplitude scaling of
:func:`~matplotlib.pyplot.psd` and friends.  See
:doc:`/gallery/lines_bars_and_markers/psd_demo`.
The changes should increase MATLAB
compatibility and increase scaling options.

.. _fill-between:

Fill between
------------

Added a :func:`~matplotlib.pyplot.fill_between` function to make it
easier to do shaded region plots in the presence of masked data.  You
can pass an *x* array and a *ylower* and *yupper* array to fill
between, and an optional *where* argument which is a logical mask
where you want to do the filling.

.. plot::

    x = np.arange(-5, 5, 0.01)
    y1 = -5*x*x + x + 10
    y2 = 5*x*x + x

    fig, ax = plt.subplots()
    ax.plot(x, y1, x, y2, color='black')
    ax.fill_between(x, y1, y2, where=(y2 > y1), facecolor='yellow', alpha=0.5)
    ax.fill_between(x, y1, y2, where=(y2 <= y1), facecolor='red', alpha=0.5)
    ax.set_title('Fill Between')

    plt.show()


Lots more
---------

Here are the 0.98.4 notes from the CHANGELOG::

    Added mdehoon's native macosx backend from sf patch 2179017 - JDH

    Removed the prints in the set_*style commands.  Return the list of
    pretty-printed strings instead - JDH

    Some of the changes Michael made to improve the output of the
    property tables in the rest docs broke of made difficult to use
    some of the interactive doc helpers, e.g., setp and getp.  Having all
    the rest markup in the ipython shell also confused the docstrings.
    I added a new rc param docstring.harcopy, to format the docstrings
    differently for hardcopy and other use.  The ArtistInspector
    could use a little refactoring now since there is duplication of
    effort between the rest out put and the non-rest output - JDH

    Updated spectral methods (psd, csd, etc.) to scale one-sided
    densities by a factor of 2 and, optionally, scale all densities by
    the sampling frequency.  This gives better MATLAB
    compatibility. -RM

    Fixed alignment of ticks in colorbars. -MGD

    drop the deprecated "new" keyword of np.histogram() for numpy 1.2
    or later.  -JJL

    Fixed a bug in svg backend that new_figure_manager() ignores
    keywords arguments such as figsize, etc. -JJL

    Fixed a bug that the handlelength of the new legend class set too
    short when numpoints=1 -JJL

    Added support for data with units (e.g., dates) to
    Axes.fill_between. -RM

    Added fancybox keyword to legend. Also applied some changes for
    better look, including baseline adjustment of the multiline texts
    so that it is center aligned. -JJL

    The transmuter classes in the patches.py are reorganized as
    subclasses of the Style classes. A few more box and arrow styles
    are added. -JJL

    Fixed a bug in the new legend class that didn't allowed a tuple of
    coordinate values as loc. -JJL

    Improve checks for external dependencies, using subprocess
    (instead of deprecated popen*) and distutils (for version
    checking) - DSD

    Reimplementation of the legend which supports baseline alignment,
    multi-column, and expand mode. - JJL

    Fixed histogram autoscaling bug when bins or range are given
    explicitly (fixes Debian bug 503148) - MM

    Added rcParam axes.unicode_minus which allows plain hyphen for
    minus when False - JDH

    Added scatterpoints support in Legend. patch by Erik Tollerud -
    JJL

    Fix crash in log ticking. - MGD

    Added static helper method BrokenHBarCollection.span_where and
    Axes/pyplot method fill_between.  See
    examples/pylab/fill_between.py - JDH

    Add x_isdata and y_isdata attributes to Artist instances, and use
    them to determine whether either or both coordinates are used when
    updating dataLim.  This is used to fix autoscaling problems that
    had been triggered by axhline, axhspan, axvline, axvspan. - EF

    Update the psd(), csd(), cohere(), and specgram() methods of Axes
    and the csd() cohere(), and specgram() functions in mlab to be in
    sync with the changes to psd().  In fact, under the hood, these
    all call the same core to do computations. - RM

    Add 'pad_to' and 'sides' parameters to mlab.psd() to allow
    controlling of zero padding and returning of negative frequency
    components, respectively.  These are added in a way that does not
    change the API. - RM

    Fix handling of c kwarg by scatter; generalize is_string_like to
    accept numpy and numpy.ma string array scalars. - RM and EF

    Fix a possible EINTR problem in dviread, which might help when
    saving pdf files from the qt backend. - JKS

    Fix bug with zoom to rectangle and twin axes - MGD

    Added Jae Joon's fancy arrow, box and annotation enhancements --
    see examples/pylab_examples/annotation_demo2.py

    Autoscaling is now supported with shared axes - EF

    Fixed exception in dviread that happened with Minion - JKS

    set_xlim, ylim now return a copy of the viewlim array to avoid
    modify inplace surprises

    Added image thumbnail generating function
    matplotlib.image.thumbnail.  See examples/misc/image_thumbnail.py
    - JDH

    Applied scatleg patch based on ideas and work by Erik Tollerud and
    Jae-Joon Lee. - MM

    Fixed bug in pdf backend: if you pass a file object for output
    instead of a filename, e.g., in a wep app, we now flush the object
    at the end. - JKS

    Add path simplification support to paths with gaps. - EF

    Fix problem with AFM files that don't specify the font's full name
    or family name. - JKS

    Added 'scilimits' kwarg to Axes.ticklabel_format() method, for
    easy access to the set_powerlimits method of the major
    ScalarFormatter. - EF

    Experimental new kwarg borderpad to replace pad in legend, based
    on suggestion by Jae-Joon Lee.  - EF

    Allow spy to ignore zero values in sparse arrays, based on patch
    by Tony Yu.  Also fixed plot to handle empty data arrays, and
    fixed handling of markers in figlegend. - EF

    Introduce drawstyles for lines. Transparently split linestyles
    like 'steps--' into drawstyle 'steps' and linestyle '--'.  Legends
    always use drawstyle 'default'. - MM

    Fixed quiver and quiverkey bugs (failure to scale properly when
    resizing) and added additional methods for determining the arrow
    angles - EF

    Fix polar interpolation to handle negative values of theta - MGD

    Reorganized cbook and mlab methods related to numerical
    calculations that have little to do with the goals of those two
    modules into a separate module numerical_methods.py Also, added
    ability to select points and stop point selection with keyboard in
    ginput and manual contour labeling code.  Finally, fixed contour
    labeling bug. - DMK

    Fix backtick in Postscript output. - MGD

    [ 2089958 ] Path simplification for vector output backends
    Leverage the simplification code exposed through path_to_polygons
    to simplify certain well-behaved paths in the vector backends
    (PDF, PS and SVG).  "path.simplify" must be set to True in
    matplotlibrc for this to work.  - MGD

    Add "filled" kwarg to Path.intersects_path and
    Path.intersects_bbox. - MGD

    Changed full arrows slightly to avoid an xpdf rendering problem
    reported by Friedrich Hagedorn. - JKS

    Fix conversion of quadratic to cubic Bezier curves in PDF and PS
    backends. Patch by Jae-Joon Lee. - JKS

    Added 5-point star marker to plot command q- EF

    Fix hatching in PS backend - MGD

    Fix log with base 2 - MGD

    Added support for bilinear interpolation in
    NonUniformImage; patch by Gregory Lielens. - EF

    Added support for multiple histograms with data of
    different length - MM

    Fix step plots with log scale - MGD

    Fix masked arrays with markers in non-Agg backends - MGD

    Fix clip_on kwarg so it actually works correctly - MGD

    Fix locale problems in SVG backend - MGD

    fix quiver so masked values are not plotted - JSW

    improve interactive pan/zoom in qt4 backend on windows - DSD

    Fix more bugs in NaN/inf handling.  In particular, path
    simplification (which does not handle NaNs or infs) will be turned
    off automatically when infs or NaNs are present.  Also masked
    arrays are now converted to arrays with NaNs for consistent
    handling of masks and NaNs - MGD and EF

    Added support for arbitrary rasterization resolutions to the SVG
    backend. - MW
.. _whats-new-1-1:

What's new in Matplotlib 1.1 (Nov 02, 2011)
===========================================

.. contents:: Table of Contents
   :depth: 2


.. note::

   matplotlib 1.1 supports Python 2.4 to 2.7


Sankey Diagrams
---------------

Kevin Davies has extended Yannick Copin's original Sankey example into a module
(:mod:`~matplotlib.sankey`) and provided new examples
(:doc:`/gallery/specialty_plots/sankey_basics`,
:doc:`/gallery/specialty_plots/sankey_links`,
:doc:`/gallery/specialty_plots/sankey_rankine`).

.. figure:: ../../gallery/specialty_plots/images/sphx_glr_sankey_rankine_001.png
   :target: ../../gallery/specialty_plots/sankey_rankine.html
   :align: center
   :scale: 50

Animation
---------

Ryan May has written a backend-independent framework for creating
animated figures. The :mod:`~matplotlib.animation` module is intended
to replace the backend-specific examples formerly in the
:ref:`examples-index` listings.  Examples using the new framework are
in :ref:`animation-examples-index`; see the entrancing :file:`double
pendulum <gallery/animation/double_pendulum_sgskip.py>` which uses
:meth:`matplotlib.animation.Animation.save` to create the movie below.

.. raw:: html

    <iframe width="420" height="315" src="https://www.youtube.com/embed/32cjc6V0OZY" frameborder="0" allowfullscreen></iframe>

This should be considered as a beta release of the framework;
please try it and provide feedback.


Tight Layout
------------

A frequent issue raised by users of matplotlib is the lack of a layout
engine to nicely space out elements of the plots. While matplotlib still
adheres to the philosophy of giving users complete control over the placement
of plot elements, Jae-Joon Lee created the :mod:`~matplotlib.tight_layout`
module and introduced a new
command :func:`~matplotlib.pyplot.tight_layout`
to address the most common layout issues.

.. plot::

    plt.rcParams['savefig.facecolor'] = "0.8"
    plt.rcParams['figure.figsize'] = 4, 3

    fig, axes_list = plt.subplots(2, 1)
    for ax in axes_list.flat:
        ax.set(xlabel="x-label", ylabel="y-label", title="before tight_layout")
    ax.locator_params(nbins=3)

    plt.show()

    plt.rcParams['savefig.facecolor'] = "0.8"
    plt.rcParams['figure.figsize'] = 4, 3

    fig, axes_list = plt.subplots(2, 1)
    for ax in axes_list.flat:
        ax.set(xlabel="x-label", ylabel="y-label", title="after tight_layout")
    ax.locator_params(nbins=3)

    plt.tight_layout()
    plt.show()

The usage of this functionality can be as simple as ::

    plt.tight_layout()

and it will adjust the spacing between subplots
so that the axis labels do not overlap with neighboring subplots. A
:doc:`/tutorials/intermediate/tight_layout_guide` has been created to show how to use
this new tool.

PyQT4, PySide, and IPython
--------------------------

Gerald Storer made the Qt4 backend compatible with PySide as
well as PyQT4.  At present, however, PySide does not support
the PyOS_InputHook mechanism for handling gui events while
waiting for text input, so it cannot be used with the new
version 0.11 of `IPython <http://ipython.org>`__. Until this
feature appears in PySide, IPython users should use
the PyQT4 wrapper for QT4, which remains the matplotlib default.

An rcParam entry, "backend.qt4", has been added to allow users
to select PyQt4, PyQt4v2, or PySide.  The latter two use the
Version 2 Qt API.  In most cases, users can ignore this rcParam
variable; it is available to aid in testing, and to provide control
for users who are embedding matplotlib in a PyQt4 or PySide app.


Legend
------

Jae-Joon Lee has improved plot legends. First,
legends for complex plots such as :meth:`~matplotlib.pyplot.stem` plots
will now display correctly. Second, the 'best' placement of a legend has
been improved in the presence of NANs.

See the :doc:`/tutorials/intermediate/legend_guide` for more detailed explanation and
examples.

.. figure:: ../../gallery/text_labels_and_annotations/images/sphx_glr_legend_demo_004.png
   :target: ../../gallery/text_labels_and_annotations/legend_demo.html
   :align: center
   :scale: 50

mplot3d
-------

In continuing the efforts to make 3D plotting in matplotlib just as easy
as 2D plotting, Ben Root has made several improvements to the
:mod:`~mpl_toolkits.mplot3d` module.

* :class:`~mpl_toolkits.mplot3d.axes3d.Axes3D` has been
  improved to bring the class towards feature-parity with regular
  Axes objects

* Documentation for :doc:`/tutorials/toolkits/mplot3d` was significantly expanded

* Axis labels and orientation improved

* Most 3D plotting functions now support empty inputs

* Ticker offset display added:

.. figure:: ../../gallery/mplot3d/images/sphx_glr_offset_001.png
   :target: ../../gallery/mplot3d/offset.html
   :align: center
   :scale: 50

* :meth:`~mpl_toolkits.mplot3d.axes3d.Axes3D.contourf`
  gains *zdir* and *offset* kwargs. You can now do this:

.. figure:: ../../gallery/mplot3d/images/sphx_glr_contourf3d_2_001.png
   :target: ../../gallery/mplot3d/contourf3d_2.html
   :align: center
   :scale: 50

Numerix support removed
-----------------------

After more than two years of deprecation warnings, Numerix support has
now been completely removed from matplotlib.

Markers
-------

The list of available markers for :meth:`~matplotlib.pyplot.plot` and
:meth:`~matplotlib.pyplot.scatter` has now been merged. While they
were mostly similar, some markers existed for one function, but not
the other. This merge did result in a conflict for the 'd' diamond
marker. Now, 'd' will be interpreted to always mean "thin" diamond
while 'D' will mean "regular" diamond.

Thanks to Michael Droettboom for this effort.

Other improvements
------------------

* Unit support for polar axes and :func:`~matplotlib.axes.Axes.arrow`

* :class:`~matplotlib.projections.polar.PolarAxes` gains getters and setters for
  "theta_direction", and "theta_offset" to allow for theta to go in
  either the clock-wise or counter-clockwise direction and to specify where zero
  degrees should be placed.
  :meth:`~matplotlib.projections.polar.PolarAxes.set_theta_zero_location` is an
  added convenience function.

* Fixed error in argument handling for tri-functions such as
  :meth:`~matplotlib.pyplot.tripcolor`

* ``axes.labelweight`` parameter added to rcParams.

* For :meth:`~matplotlib.pyplot.imshow`, *interpolation='nearest'* will
  now always perform an interpolation. A "none" option has been added to
  indicate no interpolation at all.

* An error in the Hammer projection has been fixed.

* *clabel* for :meth:`~matplotlib.pyplot.contour` now accepts a callable.
  Thanks to Daniel Hyams for the original patch.

* Jae-Joon Lee added the `~mpl_toolkits.axes_grid1.axes_divider.HBoxDivider`
  and `~mpl_toolkits.axes_grid1.axes_divider.VBoxDivider` classes.

* Christoph Gohlke reduced memory usage in :meth:`~matplotlib.pyplot.imshow`.

* :meth:`~matplotlib.pyplot.scatter` now accepts empty inputs.

* The behavior for 'symlog' scale has been fixed, but this may result
  in some minor changes to existing plots.  This work was refined by
  ssyr.

* Peter Butterworth added named figure support to
  :func:`~matplotlib.pyplot.figure`.

* Michiel de Hoon has modified the MacOSX backend to make
  its interactive behavior consistent with the other backends.

* Pim Schellart added a new colormap called "cubehelix".
  Sameer Grover also added a colormap called "coolwarm". See it and all
  other colormaps :ref:`here <color-colormaps_reference>`.

* Many bug fixes and documentation improvements.
.. _github-stats-3-3-1:

GitHub statistics for 3.3.1 (Aug 13, 2020)
==========================================

GitHub statistics for 2020/07/16 (tag: v3.3.0) - 2020/08/13

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 25 issues and merged 73 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/56?closed=1>`__

The following 17 authors contributed 131 commits.

* Antony Lee
* Ben Root
* Bruno Beltran
* David Stansby
* Elliott Sales de Andrade
* Isuru Fernando
* jbhopkins
* Jody Klymak
* Jouni K. Seppänen
* Lee Johnston
* linchiwei123
* Neilzon Viloria
* Ryan May
* Thomas A Caswell
* Tim Hoffmann
* Tom Neep
* Yichao Yu

GitHub issues and pull requests:

Pull Requests (73):

* :ghpull:`18243`: Fix reshape list of strings
* :ghpull:`18240`: Backport PR #18235 on branch v3.3.x
* :ghpull:`18239`: Backport PR #18233 on branch v3.3.x (Fix cibuildwheel trigger condition.)
* :ghpull:`18235`: FIX: check we have a back button in tk toolbar before we touch it
* :ghpull:`18233`: Fix cibuildwheel trigger condition.
* :ghpull:`18231`: Backport PR #18224 on branch v3.3.x (Try out cibuildwheel.)
* :ghpull:`18224`: Try out cibuildwheel.
* :ghpull:`18230`: Backport PR #18225 on branch v3.3.x (Use certifi when downloading bundled build requirements.)
* :ghpull:`18225`: Use certifi when downloading bundled build requirements.
* :ghpull:`18229`: Backport PR #18219 on branch v3.3.x (Fixes an issue where WxAgg NavigationToolbar2 broke custom toolbars)
* :ghpull:`18219`: Fixes an issue where WxAgg NavigationToolbar2 broke custom toolbars
* :ghpull:`18228`: Backport PR #18227 on branch v3.3.x (Set pipefail when running flake8 linter.)
* :ghpull:`18227`: Set pipefail when running flake8 linter.
* :ghpull:`18215`: Backport PR #18185 on branch v3.3.x (FIX: fix reading from http/https urls via imread)
* :ghpull:`18214`: Backport PR #18184 on branch v3.3.x (Go back to checking figures for their manager in destroy.)
* :ghpull:`18185`: FIX: fix reading from http/https urls via imread
* :ghpull:`18184`: Go back to checking figures for their manager in destroy.
* :ghpull:`18183`: Backport PR #17995 on branch v3.3.x (Avoid using Bbox machinery in Path.get_extents; special case polylines.)
* :ghpull:`18182`: Backport PR #17994 on branch v3.3.x (Special case degree-1 Bezier curves.)
* :ghpull:`18179`: Backport PR #18175 on branch v3.3.x (Downgrade symbol substitution log to info level.)
* :ghpull:`18177`: Backport PR #18092 on branch v3.3.x (Use same Make as FreeType's configure to build it.)
* :ghpull:`18174`: Backport PR #18167 on branch v3.3.x (Catch Pandas AssertionError on deprecated multidimensional indexing. Closes #18158)
* :ghpull:`18176`: Backport PR #18173 on branch v3.3.x (Fix the return value of Axes.get_navigate_mode.)
* :ghpull:`18175`: Downgrade symbol substitution log to info level.
* :ghpull:`18092`: Use same Make as FreeType's configure to build it.
* :ghpull:`18173`: Fix the return value of Axes.get_navigate_mode.
* :ghpull:`18167`: Catch Pandas AssertionError on deprecated multidimensional indexing. Closes #18158
* :ghpull:`18162`: Backport PR #18156 on branch v3.3.x (Fix IndexError when using scatter3d and depthshade=False)
* :ghpull:`18156`: Fix IndexError when using scatter3d and depthshade=False
* :ghpull:`18153`: Backport PR #18142 on branch v3.3.x (Fix nbagg in Chrome 84)
* :ghpull:`18146`: Backport PR #17989 on branch v3.3.x (gtk/tk: Ensure no flicker when hovering over images.)
* :ghpull:`18142`: Fix nbagg in Chrome 84
* :ghpull:`18147`: Backport PR #18136 on branch v3.3.x (Sort 3d sizes along with other properties)
* :ghpull:`18136`: Sort 3d sizes along with other properties
* :ghpull:`17989`: gtk/tk: Ensure no flicker when hovering over images.
* :ghpull:`18102`: Fix linting on v3.3.x
* :ghpull:`18111`: Backport PR #18089 on branch v3.3.x
* :ghpull:`18109`: Backport PR #18093 on branch v3.3.x (Improve saving animated GIF with ffmpeg)
* :ghpull:`18089`: Revert "Convert adjust_bbox to use ExitStack."
* :ghpull:`18093`: Improve saving animated GIF with ffmpeg
* :ghpull:`18104`: Backport PR #18101 on branch v3.3.x (FIX: catch all multi-dim warnings pandas)
* :ghpull:`18101`: FIX: catch all multi-dim warnings pandas
* :ghpull:`18091`: ci: Fix linting being ignored by reviewdog
* :ghpull:`18083`: Backport PR #18079 on branch v3.3.x (Set shading='auto' if invalid value passed to pcolormesh)
* :ghpull:`18079`: Set shading='auto' if invalid value passed to pcolormesh
* :ghpull:`18067`: Backport PR #17956 on branch v3.3.x (ENH: Add version check for mac sdk version)
* :ghpull:`17956`: ENH: Add version check for mac sdk version
* :ghpull:`18053`: Backport PR #18021: FIX: update num2julian and julian2num
* :ghpull:`18021`: FIX: update num2julian and julian2num
* :ghpull:`18041`: Backport PR #18038 on branch v3.3.x (FIX: use internal _set_postion, not external)
* :ghpull:`18038`: FIX: use internal _set_postion, not external
* :ghpull:`18036`: Backport PR #18030 on branch v3.3.x (Fix PolyCollection.set_verts optimization.)
* :ghpull:`18030`: Fix PolyCollection.set_verts optimization.
* :ghpull:`18032`: Backport PR #18026 on branch v3.3.x (FIX: Be sure matplotlib.backends is imported before we use it)
* :ghpull:`18026`: FIX: Be sure matplotlib.backends is imported before we use it
* :ghpull:`18027`: Backport PR #17981 on branch v3.3.x (gtk: Fix ``draw`` on unmapped windows.)
* :ghpull:`17981`: gtk: Fix ``draw`` on unmapped windows.
* :ghpull:`18024`: Backport PR #17963 on branch v3.3.x (TST: Ignore deprecations when switching backends.)
* :ghpull:`18023`: Backport PR #18014 on branch v3.3.x (Fix flipped paths in non-writable config dir warning.)
* :ghpull:`17963`: TST: Ignore deprecations when switching backends.
* :ghpull:`18014`: Fix flipped paths in non-writable config dir warning.
* :ghpull:`18008`: Backport PR #17969 on branch v3.3.x (Honor ``'Date': None`` in metadata)
* :ghpull:`18009`: Backport PR #17982 on branch v3.3.x (BF: for degenerate polygons, add CLOSEPOLY vertex)
* :ghpull:`17982`: BF: for degenerate polygons, add CLOSEPOLY vertex
* :ghpull:`17969`: Honor ``'Date': None`` in metadata
* :ghpull:`17995`: Avoid using Bbox machinery in Path.get_extents; special case polylines.
* :ghpull:`17994`: Special case degree-1 Bezier curves.
* :ghpull:`17990`: Manual backport of pr 17983 on v3.3.x
* :ghpull:`17984`: Backport PR #17972 on branch v3.3.x (Fix PyPy compatiblity issue)
* :ghpull:`17985`: Backport PR #17976 on branch v3.3.x (Fixed #17970 - Docstrings should not accessed with -OO)
* :ghpull:`17983`: FIX: undeprecate and update num2epoch/epoch2num
* :ghpull:`17976`: Fixed #17970 - Docstrings should not accessed with -OO
* :ghpull:`17972`: Fix PyPy compatiblity issue

Issues (25):

* :ghissue:`18234`: _reshape_2D function behavior changed, breaks hist for some cases in 3.3.0
* :ghissue:`18232`: different behaviour between 3.3.0 and 3.2.2 (and earlier) for ploting in a Tk canvas
* :ghissue:`18212`: Updated WxAgg NavigationToolbar2 breaks custom toolbars
* :ghissue:`18129`: Error reading png image from URL with imread in matplotlib 3.3
* :ghissue:`18163`: Figure can not be closed if it has associated Agg canvas
* :ghissue:`17974`: Major speed regression introduced in "plt.bar" definition clipping between 3.0.3 and 3.3.0.
* :ghissue:`17998`: New warning: Substituting symbol \perp from STIXGeneral
* :ghissue:`18057`: Fails to install in FreeBSD
* :ghissue:`18150`: Regression in get_navigate_mode() return value
* :ghissue:`18158`: X-axis that is Pandas Series time zone aware timestamps raises AssertionError
* :ghissue:`18037`: Scatter3D: depthshade=False causes IndexError for Tkinter when plotting more than one point.
* :ghissue:`18169`: When running python with -OO option, an empty matplotlib docstring causes an exception.
* :ghissue:`18165`: fig.colorbar() and using bbox='tight' in PDF export mess up figure dimensions
* :ghissue:`18132`: A simple 3D scatter plot with %matplotlib notebook is not working
* :ghissue:`18135`: Point size array in the Axes3D scatter() does not follow the same order as in the data points
* :ghissue:`18061`: 3.3.0 regression in png backend with colorbar()
* :ghissue:`18076`: pcolormesh + gourand shading + polar axes is broken
* :ghissue:`18010`: 3.3.0: possible regression/bug with DateFormatter?
* :ghissue:`18033`: v. 3.3.0:  horizontal colorbar broken
* :ghissue:`18017`: Optimisation in set_verts causes error if ``verts`` have irregular sizes
* :ghissue:`18022`: AttributeError: module 'matplotlib' has no attribute 'backends'
* :ghissue:`18011`: Confusing error message when home config directory not writable
* :ghissue:`17975`: Computing the bounding box of a degenerate polygon throws an error
* :ghissue:`17968`: Setting ``Date`` metadata to ``None`` does not remove the date metadata from the SVG file
* :ghissue:`17970`: AttributeError when using PYTHONOPTIMIZE (due to stripped docstring)
.. _whats-new-1-2-2:

What's new in Matplotlib 1.2.2
==============================

.. contents:: Table of Contents
   :depth: 2



Improved collections
--------------------

The individual items of a collection may now have different alpha
values and be rendered correctly.  This also fixes a bug where
collections were always filled in the PDF backend.

Multiple images on same axes are correctly transparent
------------------------------------------------------

When putting multiple images onto the same axes, the background color
of the axes will now show through correctly.
.. _whats-new-1-4:


What's new in Matplotlib 1.4 (Aug 25, 2014)
===========================================

Thomas A. Caswell served as the release manager for the 1.4 release.


.. contents:: Table of Contents
   :depth: 2


.. note::

   matplotlib 1.4 supports Python 2.6, 2.7, 3.3, and 3.4


New colormap
------------
In heatmaps, a green-to-red spectrum is often used to indicate intensity of
activity, but this can be problematic for the red/green colorblind. A new,
colorblind-friendly colormap is now available at ``matplotlib.cm.Wistia``.
This colormap maintains the red/green symbolism while achieving deuteranopic
legibility through brightness variations. See
`here <https://github.com/wistia/heatmap-palette>`__
for more information.

The nbagg backend
-----------------
Phil Elson added a new backend, named "nbagg", which enables interactive
figures in a live IPython notebook session. The backend makes use of the
infrastructure developed for the webagg backend, which itself gives
standalone server backed interactive figures in the browser, however nbagg
does not require a dedicated matplotlib server as all communications are
handled through the IPython Comm machinery.

As with other backends nbagg can be enabled inside the IPython notebook with::

    import matplotlib
    matplotlib.use('nbagg')

Once figures are created and then subsequently shown, they will placed in an
interactive widget inside the notebook allowing panning and zooming in the
same way as any other matplotlib backend. Because figures require a connection
to the IPython notebook server for their interactivity, once the notebook is
saved, each figure will be rendered as a static image - thus allowing
non-interactive viewing of figures on services such as
`nbviewer <https://nbviewer.ipython.org/>`__.



New plotting features
---------------------

Power-law normalization
```````````````````````
Ben Gamari added a power-law normalization method,
:class:`~matplotlib.colors.PowerNorm`. This class maps a range of
values to the interval [0,1] with power-law scaling with the exponent
provided by the constructor's *gamma* argument. Power law normalization
can be useful for, e.g., emphasizing small populations in a histogram.

Fully customizable boxplots
```````````````````````````
Paul Hobson overhauled the :func:`~matplotlib.pyplot.boxplot` method such
that it is now completely customizable in terms of the styles and positions
of the individual artists. Under the hood, :func:`~matplotlib.pyplot.boxplot`
relies on a new function (:func:`~matplotlib.cbook.boxplot_stats`), which
accepts any data structure currently compatible with
:func:`~matplotlib.pyplot.boxplot`, and returns a list of dictionaries
containing the positions for each element of the boxplots. Then
a second method, `~.Axes.bxp` is called to draw the boxplots
based on the stats.

The :func:`~matplotlib.pyplot.boxplot` function can be used as before to
generate boxplots from data in one step. But now the user has the
flexibility to generate the statistics independently, or to modify the
output of :func:`~matplotlib.cbook.boxplot_stats` prior to plotting
with `~.Axes.bxp`.

Lastly, each artist (e.g., the box, outliers, cap, notches) can now be
toggled on or off and their styles can be passed in through individual
kwargs. See the examples:
:doc:`/gallery/statistics/boxplot` and
:doc:`/gallery/statistics/bxp`

Added a bool kwarg, :code:`manage_xticks`, which if False disables the management
of the ticks and limits on the x-axis by :func:`~matplotlib.axes.Axes.bxp`.

Support for datetime axes in 2d plots
`````````````````````````````````````
Andrew Dawson added support for datetime axes to
:func:`~matplotlib.pyplot.contour`, :func:`~matplotlib.pyplot.contourf`,
:func:`~matplotlib.pyplot.pcolormesh` and :func:`~matplotlib.pyplot.pcolor`.

Support for additional spectrum types
`````````````````````````````````````
Todd Jennings added support for new types of frequency spectrum plots:
:func:`~matplotlib.pyplot.magnitude_spectrum`,
:func:`~matplotlib.pyplot.phase_spectrum`, and
:func:`~matplotlib.pyplot.angle_spectrum`, as well as corresponding functions
in mlab.

He also added these spectrum types to :func:`~matplotlib.pyplot.specgram`,
as well as adding support for linear scaling there (in addition to the
existing dB scaling). Support for additional spectrum types was also added to
:func:`~matplotlib.mlab.specgram`.

He also increased the performance for all of these functions and plot types.

Support for detrending and windowing 2D arrays in mlab
``````````````````````````````````````````````````````
Todd Jennings added support for 2D arrays in the
:func:`~matplotlib.mlab.detrend_mean`, :func:`~matplotlib.mlab.detrend_none`,
and :func:`~matplotlib.mlab.detrend`, as well as adding
``matplotlib.mlab.apply_window`` which support windowing 2D arrays.

Support for strides in mlab
```````````````````````````
Todd Jennings added some functions to mlab to make it easier to use NumPy
strides to create memory-efficient 2D arrays.  This includes
``matplotlib.mlab.stride_repeat``, which repeats an array to create a 2D
array, and :func:`~matplotlib.mlab.stride_windows`, which uses a moving window
to create a 2D array from a 1D array.

Formatter for new-style formatting strings
``````````````````````````````````````````
Added `.StrMethodFormatter` which does the same job as
`.FormatStrFormatter`, but accepts new-style formatting strings
instead of printf-style formatting strings

Consistent grid sizes in streamplots
````````````````````````````````````
:func:`~matplotlib.pyplot.streamplot` uses a base grid size of 30x30 for both
``density=1`` and ``density=(1, 1)``. Previously a grid size of 30x30 was used for
``density=1``, but a grid size of 25x25 was used for ``density=(1, 1)``.

Get a list of all tick labels (major and minor)
```````````````````````````````````````````````
Added the kwarg 'which' to `.Axes.get_xticklabels`,
`.Axes.get_yticklabels` and
`.Axis.get_ticklabels`.  'which' can be 'major', 'minor', or
'both' select which ticks to return, like
`~.XAxis.set_ticks_position`.  If 'which' is `None` then the old
behaviour (controlled by the bool *minor*).

Separate horizontal/vertical axes padding support in ImageGrid
``````````````````````````````````````````````````````````````
The kwarg 'axes_pad' to :class:`mpl_toolkits.axes_grid1.axes_grid.ImageGrid` can now
be a tuple if separate horizontal/vertical padding is needed.
This is supposed to be very helpful when you have a labelled legend next to
every subplot and you need to make some space for legend's labels.

Support for skewed transformations
``````````````````````````````````
The :class:`~matplotlib.transforms.Affine2D` gained additional methods
`.skew` and `.skew_deg` to create skewed transformations. Additionally,
matplotlib internals were cleaned up to support using such transforms in
`~matplotlib.axes.Axes`. This transform is important for some plot types,
specifically the Skew-T used in meteorology.

.. figure:: ../../gallery/specialty_plots/images/sphx_glr_skewt_001.png
   :target: ../../gallery/specialty_plots/skewt.html
   :align: center
   :scale: 50

Support for specifying properties of wedge and text in pie charts.
``````````````````````````````````````````````````````````````````
Added the kwargs 'wedgeprops' and 'textprops' to `~.Axes.pie`
to accept properties for wedge and text objects in a pie. For example, one can
specify wedgeprops = {'linewidth':3} to specify the width of the borders of
the wedges in the pie. For more properties that the user can specify, look at
the docs for the wedge and text objects.

Fixed the direction of errorbar upper/lower limits
``````````````````````````````````````````````````
Larry Bradley fixed the :func:`~matplotlib.pyplot.errorbar` method such
that the upper and lower limits (*lolims*, *uplims*, *xlolims*,
*xuplims*) now point in the correct direction.

More consistent add-object API for Axes
```````````````````````````````````````
Added the Axes method `~matplotlib.axes.Axes.add_image` to put image
handling on a par with artists, collections, containers, lines, patches,
and tables.

Violin Plots
````````````
Per Parker, Gregory Kelsie, Adam Ortiz, Kevin Chan, Geoffrey Lee, Deokjae
Donald Seo, and Taesu Terry Lim added a basic implementation for violin
plots. Violin plots can be used to represent the distribution of sample data.
They are similar to box plots, but use a kernel density estimation function to
present a smooth approximation of the data sample used. The added features are:

`~.Axes.violin` - Renders a violin plot from a collection of
statistics.
:func:`~matplotlib.cbook.violin_stats` - Produces a collection of statistics
suitable for rendering a violin plot.
:func:`~matplotlib.pyplot.violinplot` - Creates a violin plot from a set of
sample data. This method makes use of :func:`~matplotlib.cbook.violin_stats`
to process the input data, and :func:`~matplotlib.cbook.violin_stats` to
do the actual rendering. Users are also free to modify or replace the output of
:func:`~matplotlib.cbook.violin_stats` in order to customize the violin plots
to their liking.

This feature was implemented for a software engineering course at the
University of Toronto, Scarborough, run in Winter 2014 by Anya Tafliovich.

More *markevery* options to show only a subset of markers
`````````````````````````````````````````````````````````
Rohan Walker extended the *markevery* property in
:class:`~matplotlib.lines.Line2D`.  You can now specify a subset of markers to
show with an int, slice object, numpy fancy indexing, or float. Using a float
shows markers at approximately equal display-coordinate-distances along the
line.

Added size related functions to specialized `.Collection`\s
```````````````````````````````````````````````````````````

Added the ``get_size`` and ``set_size`` functions to control the size of
elements of specialized collections (
:class:`~matplotlib.collections.AsteriskPolygonCollection`
:class:`~matplotlib.collections.BrokenBarHCollection`
:class:`~matplotlib.collections.CircleCollection`
:class:`~matplotlib.collections.PathCollection`
:class:`~matplotlib.collections.PolyCollection`
:class:`~matplotlib.collections.RegularPolyCollection`
:class:`~matplotlib.collections.StarPolygonCollection`).


Fixed the mouse coordinates giving the wrong theta value in Polar graph
```````````````````````````````````````````````````````````````````````
Added code to
`~.polar.InvertedPolarTransform.transform_non_affine`
to ensure that the calculated theta value was between the range of 0 and 2 * pi
since the problem was that the value can become negative after applying the
direction and rotation to the theta calculation.

Simple quiver plot for mplot3d toolkit
``````````````````````````````````````
A team of students in an *Engineering Large Software Systems* course, taught
by Prof. Anya Tafliovich at the University of Toronto, implemented a simple
version of a quiver plot in 3D space for the mplot3d toolkit as one of their
term project. This feature is documented in `~.Axes3D.quiver`.
The team members are: Ryan Steve D'Souza, Victor B, xbtsw, Yang Wang, David,
Caradec Bisesar and Vlad Vassilovski.

.. figure:: ../../gallery/mplot3d/images/sphx_glr_quiver3d_001.png
   :target: ../../gallery/mplot3d/quiver3d.html
   :align: center
   :scale: 50

polar-plot r-tick locations
```````````````````````````
Added the ability to control the angular position of the r-tick labels
on a polar plot via `~.PolarAxes.set_rlabel_position`.


Date handling
-------------

n-d array support for date conversion
``````````````````````````````````````
Andrew Dawson added support for n-d array handling to
:func:`matplotlib.dates.num2date`, :func:`matplotlib.dates.date2num`
and :func:`matplotlib.dates.datestr2num`. Support is also added to the unit
conversion interfaces :class:`matplotlib.dates.DateConverter` and
:class:`matplotlib.units.Registry`.


Configuration (rcParams)
------------------------


``savefig.transparent`` added
`````````````````````````````
Controls whether figures are saved with a transparent
background by default.  Previously `~.Figure.savefig` always defaulted
to a non-transparent background.


``axes.titleweight``
````````````````````
Added rcParam to control the weight of the title

``axes.formatter.useoffset`` added
``````````````````````````````````
Controls the default value of *useOffset* in `.ScalarFormatter`.  If
`True` and the data range is much smaller than the data average, then
an offset will be determined such that the tick labels are
meaningful. If `False` then the full number will be formatted in all
conditions.

``nbagg.transparent`` added
`````````````````````````````
Controls whether nbagg figures have a transparent
background. ``nbagg.transparent`` is ``True`` by default.


XDG compliance
``````````````
Matplotlib now looks for configuration files (both rcparams and style) in XDG
compliant locations.

``style`` package added
-----------------------
You can now easily switch between different styles using the new ``style``
package::

   >>> from matplotlib import style
   >>> style.use('dark_background')

Subsequent plots will use updated colors, sizes, etc. To list all available
styles, use::

   >>> print style.available

You can add your own custom ``<style name>.mplstyle`` files to
``~/.matplotlib/stylelib`` or call ``use`` with a URL pointing to a file with
``matplotlibrc`` settings.

*Note that this is an experimental feature*, and the interface may change as
users test out this new feature.

Backends
--------
Qt5 backend
```````````
Martin Fitzpatrick and Tom Badran implemented a Qt5 backend.  The differences
in namespace locations between Qt4 and Qt5 was dealt with by shimming
Qt4 to look like Qt5, thus the Qt5 implementation is the primary implementation.
Backwards compatibility for Qt4 is maintained by wrapping the Qt5 implementation.

The Qt5Agg backend currently does not work with IPython's %matplotlib magic.

The 1.4.0 release has a known bug where the toolbar is broken.  This can be
fixed by: ::

   cd path/to/installed/matplotlib
   wget https://github.com/matplotlib/matplotlib/pull/3322.diff
   # unix2dos 3322.diff (if on windows to fix line endings)
   patch -p2 < 3322.diff

Qt4 backend
```````````
Rudolf Höfler changed the appearance of the subplottool. All sliders are
vertically arranged now, buttons for tight layout and reset were
added. Furthermore, the subplottool is now implemented as a modal
dialog. It was previously a QMainWindow, leaving the SPT open if one closed the
plot window.

In the figure options dialog one can now choose to (re-)generate a simple
automatic legend. Any explicitly set legend entries will be lost, but changes to
the curves' label, linestyle, et cetera will now be updated in the legend.

Interactive performance of the Qt4 backend has been dramatically improved
under windows.

The mapping of key-signals from Qt to values matplotlib understands
was greatly improved (For both Qt4 and Qt5).

Cairo backends
``````````````

The Cairo backends are now able to use the `cairocffi bindings
<https://github.com/SimonSapin/cairocffi>`__ which are more actively
maintained than the `pycairo bindings
<https://www.cairographics.org/pycairo/>`__.

Gtk3Agg backend
```````````````

The Gtk3Agg backend now works on Python 3.x, if the `cairocffi
bindings <https://github.com/SimonSapin/cairocffi>`__ are installed.

PDF backend
```````````
Added context manager for saving to multi-page PDFs.

Text
----

Text URLs supported by SVG backend
``````````````````````````````````

The SVG backend will now render :class:`~matplotlib.text.Text` objects'
url as a link in output SVGs.  This allows one to make clickable text in
saved figures using the url kwarg of the :class:`~matplotlib.text.Text`
class.

Anchored sizebar font
`````````````````````
Added the ``fontproperties`` kwarg to
`~mpl_toolkits.axes_grid1.anchored_artists.AnchoredSizeBar` to
control the font properties.

Sphinx extensions
-----------------

The ``:context:`` directive in the `~matplotlib.sphinxext.plot_directive`
Sphinx extension can now accept an optional ``reset`` setting, which will
cause the context to be reset. This allows more than one distinct context to
be present in documentation. To enable this option, use ``:context: reset``
instead of ``:context:`` any time you want to reset the context.

Legend and PathEffects documentation
------------------------------------
The :doc:`/tutorials/intermediate/legend_guide` and :doc:`/tutorials/advanced/patheffects_guide` have both been
updated to better reflect the full potential of each of these powerful
features.

Widgets
-------

Span Selector
`````````````

Added an option ``span_stays`` to the
:class:`~matplotlib.widgets.SpanSelector` which makes the selector
rectangle stay on the axes after you release the mouse.

GAE integration
---------------
Matplotlib will now run on google app engine.
.. _github-stats-3-4-3:

GitHub statistics for 3.4.3 (August 21, 2021)
=============================================

GitHub statistics for 2021/05/08 - 2021/08/12 (tag: v3.4.2)

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 22 issues and merged 69 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/64?closed=1>`__

The following 20 authors contributed 95 commits.

* Antony Lee
* David Stansby
* Diego
* Diego Leal Petrola
* Diego Petrola
* Elliott Sales de Andrade
* Eric Firing
* Frank Sauerburger
* Greg Lucas
* Ian Hunt-Isaak
* Jash Shah
* Jody Klymak
* Jouni K. Seppänen
* Michał Górny
* sandipanpanda
* Slava Ostroukh
* Thomas A Caswell
* Tim Hoffmann
* Viacheslav Ostroukh
* Xianxiang Li

GitHub issues and pull requests:

Pull Requests (69):

* :ghpull:`20830`: Backport PR #20826 on branch v3.4.x (Fix clear of Axes that are shared.)
* :ghpull:`20826`: Fix clear of Axes that are shared.
* :ghpull:`20823`: Backport PR #20817 on branch v3.4.x (Make test_change_epoch more robust.)
* :ghpull:`20817`: Make test_change_epoch more robust.
* :ghpull:`20820`: Backport PR #20771 on branch v3.4.x (FIX: tickspacing for subfigures)
* :ghpull:`20771`: FIX: tickspacing for subfigures
* :ghpull:`20777`: FIX: dpi and scatter for subfigures now correct
* :ghpull:`20787`: Backport PR #20786 on branch v3.4.x (Fixed typo in _constrained_layout.py (#20782))
* :ghpull:`20786`: Fixed typo in _constrained_layout.py (#20782)
* :ghpull:`20763`: Backport PR #20761 on branch v3.4.x (Fix suplabel autopos)
* :ghpull:`20761`: Fix suplabel autopos
* :ghpull:`20751`: Backport PR #20748 on branch v3.4.x (Ensure _static directory exists before copying CSS.)
* :ghpull:`20748`: Ensure _static directory exists before copying CSS.
* :ghpull:`20713`: Backport PR #20710 on branch v3.4.x (Fix tests with Inkscape 1.1.)
* :ghpull:`20687`: Enable PyPy wheels for v3.4.x
* :ghpull:`20710`: Fix tests with Inkscape 1.1.
* :ghpull:`20696`: Backport PR #20662 on branch v3.4.x (Don't forget to disable autoscaling after interactive zoom.)
* :ghpull:`20662`: Don't forget to disable autoscaling after interactive zoom.
* :ghpull:`20683`: Backport PR #20645 on branch v3.4.x (Fix leak if affine_transform is passed invalid vertices.)
* :ghpull:`20645`: Fix leak if affine_transform is passed invalid vertices.
* :ghpull:`20642`: Backport PR #20629 on branch v3.4.x (Add protection against out-of-bounds read in ttconv)
* :ghpull:`20643`: Backport PR #20597 on branch v3.4.x
* :ghpull:`20629`: Add protection against out-of-bounds read in ttconv
* :ghpull:`20597`: Fix TTF headers for type 42 stix font
* :ghpull:`20624`: Backport PR #20609 on branch v3.4.x (FIX: fix figbox deprecation)
* :ghpull:`20609`: FIX: fix figbox deprecation
* :ghpull:`20594`: Backport PR #20590 on branch v3.4.x (Fix class docstrings for Norms created from Scales.)
* :ghpull:`20590`: Fix class docstrings for Norms created from Scales.
* :ghpull:`20587`: Backport PR #20584: FIX: do not simplify path in LineCollection.get_s…
* :ghpull:`20584`: FIX: do not simplify path in LineCollection.get_segments
* :ghpull:`20578`: Backport PR #20511 on branch v3.4.x (Fix calls to np.ma.masked_where)
* :ghpull:`20511`: Fix calls to np.ma.masked_where
* :ghpull:`20568`: Backport PR #20565 on branch v3.4.x (FIX: PILLOW asarray bug)
* :ghpull:`20566`: Backout pillow=8.3.0 due to a crash
* :ghpull:`20565`: FIX: PILLOW asarray bug
* :ghpull:`20503`: Backport PR #20488 on branch v3.4.x (FIX: Include 0 when checking lognorm vmin)
* :ghpull:`20488`: FIX: Include 0 when checking lognorm vmin
* :ghpull:`20483`: Backport PR #20480 on branch v3.4.x (Fix str of empty polygon.)
* :ghpull:`20480`: Fix str of empty polygon.
* :ghpull:`20478`: Backport PR #20473 on branch v3.4.x (_GSConverter: handle stray 'GS' in output gracefully)
* :ghpull:`20473`: _GSConverter: handle stray 'GS' in output gracefully
* :ghpull:`20456`: Backport PR #20453 on branch v3.4.x (Remove ``Tick.apply_tickdir`` from 3.4 deprecations.)
* :ghpull:`20441`: Backport PR #20416 on branch v3.4.x (Fix missing Patch3DCollection._z_markers_idx)
* :ghpull:`20416`: Fix missing Patch3DCollection._z_markers_idx
* :ghpull:`20417`: Backport PR #20395 on branch v3.4.x (Pathing issue)
* :ghpull:`20395`: Pathing issue
* :ghpull:`20404`: Backport PR #20403: FIX: if we have already subclassed mixin class ju…
* :ghpull:`20403`: FIX: if we have already subclassed mixin class just return
* :ghpull:`20383`: Backport PR #20381 on branch v3.4.x (Prevent corrections and completions in search field)
* :ghpull:`20307`: Backport PR #20154 on branch v3.4.x (ci: Bump Ubuntu to 18.04 LTS.)
* :ghpull:`20285`: Backport PR #20275 on branch v3.4.x (Fix some examples that are skipped in docs build)
* :ghpull:`20275`: Fix some examples that are skipped in docs build
* :ghpull:`20267`: Backport PR #20265 on branch v3.4.x (Legend edgecolor face)
* :ghpull:`20265`: Legend edgecolor face
* :ghpull:`20260`: Fix legend edgecolor face
* :ghpull:`20259`: Backport PR #20248 on branch v3.4.x (Replace pgf image-streaming warning by error.)
* :ghpull:`20248`: Replace pgf image-streaming warning by error.
* :ghpull:`20241`: Backport PR #20212 on branch v3.4.x (Update span_selector.py)
* :ghpull:`20212`: Update span_selector.py
* :ghpull:`19980`: Tidy up deprecation messages in ``_subplots.py``
* :ghpull:`20234`: Backport PR #20225 on branch v3.4.x (FIX: correctly handle ax.legend(..., legendcolor='none'))
* :ghpull:`20225`: FIX: correctly handle ax.legend(..., legendcolor='none')
* :ghpull:`20232`: Backport PR #19636 on branch v3.4.x (Correctly check inaxes for multicursor)
* :ghpull:`20228`: Backport PR #19849 on branch v3.4.x (FIX DateFormatter for month names when usetex=True)
* :ghpull:`19849`: FIX DateFormatter for month names when usetex=True
* :ghpull:`20154`: ci: Bump Ubuntu to 18.04 LTS.
* :ghpull:`20186`: Backport PR #19975 on branch v3.4.x (CI: remove workflow to push commits to macpython/matplotlib-wheels)
* :ghpull:`19975`: CI: remove workflow to push commits to macpython/matplotlib-wheels
* :ghpull:`19636`: Correctly check inaxes for multicursor

Issues (22):

* :ghissue:`20219`: Regression: undocumented change of behaviour in mpl 3.4.2 with axis ticks direction
* :ghissue:`20721`: ax.clear() adds extra ticks, un-hides shared-axis tick labels
* :ghissue:`20765`: savefig re-scales xticks and labels of some (but not all) subplots
* :ghissue:`20782`: [Bug]: _supylabel get_in_layout() typo?
* :ghissue:`20747`: [Bug]: _copy_css_file assumes that the _static directory already exists
* :ghissue:`20617`: tests fail with new inkscape
* :ghissue:`20519`: Toolbar zoom doesn't change autoscale status for versions 3.2.0 and above
* :ghissue:`20628`: Out-of-bounds read leads to crash or broken TrueType fonts
* :ghissue:`20612`: Broken EPS for Type 42 STIX
* :ghissue:`19982`: regression for 3.4.x - ax.figbox replacement incompatible to all version including 3.3.4
* :ghissue:`19938`: unuseful deprecation warning figbox
* :ghissue:`16400`: Inconsistent behavior between Normalizers when input is Dataframe
* :ghissue:`20583`: Lost class descriptions since 3.4 docs
* :ghissue:`20551`: set_segments(get_segments()) makes lines coarse
* :ghissue:`20560`: test_png is failing
* :ghissue:`20487`: test_huge_range_log is failing...
* :ghissue:`20472`: test_backend_pgf.py::test_xelatex[pdf] - ValueError: invalid literal for int() with base 10: b'ate missing from Resources. [...]
* :ghissue:`20328`: Path.intersects_path sometimes returns incorrect values
* :ghissue:`20258`: Using edgecolors='face' with stackplot causes value error when using plt.legend()
* :ghissue:`20200`: examples/widgets/span_selector.py is brittle
* :ghissue:`20231`: MultiCursor bug
* :ghissue:`19836`: Month names not set as text when using usetex
.. redirect-from:: /users/dflt_style_changes

==============================
 Changes to the default style
==============================

The most important changes in matplotlib 2.0 are the changes to the
default style.

While it is impossible to select the best default for all cases, these
are designed to work well in the most common cases.

A 'classic' style sheet is provided so reverting to the 1.x default
values is a single line of python

.. code::

  import matplotlib.style
  import matplotlib as mpl
  mpl.style.use('classic')

See :ref:`customizing-with-matplotlibrc-files` for details about how to
persistently and selectively revert many of these changes.


.. contents:: Table of Contents
   :depth: 2
   :local:
   :backlinks: entry



Colors, color cycles, and colormaps
===================================

Colors in default property cycle
--------------------------------

The colors in the default property cycle have been changed from
``['b', 'g', 'r', 'c', 'm', 'y', 'k']`` to the category10
color palette used by `Vega
<https://github.com/vega/vega/wiki/Scales#scale-range-literals>`__ and
`d3
<https://github.com/d3/d3-3.x-api-reference/blob/master/Ordinal-Scales.md#category10>`__
originally developed at Tableau.


.. plot::

  import numpy as np
  import matplotlib.pyplot as plt

  th = np.linspace(0, 2*np.pi, 512)

  fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(6, 3))


  def color_demo(ax, colors, title):
      ax.set_title(title)
      for j, c in enumerate(colors):
          v_offset = -(j / len(colors))
          ax.plot(th, .1*np.sin(th) + v_offset, color=c)
          ax.annotate("'C{}'".format(j), (0, v_offset),
                      xytext=(-1.5, 0),
                      ha='right',
                      va='center',
                      color=c,
                      textcoords='offset points',
                      family='monospace')

          ax.annotate("{!r}".format(c), (2*np.pi, v_offset),
                      xytext=(1.5, 0),
                      ha='left',
                      va='center',
                      color=c,
                      textcoords='offset points',
                      family='monospace')
      ax.axis('off')

  old_colors = ['b', 'g', 'r', 'c', 'm', 'y', 'k']

  new_colors = ['#1f77b4', '#ff7f0e', '#2ca02c', '#d62728',
                '#9467bd', '#8c564b', '#e377c2', '#7f7f7f',
                '#bcbd22', '#17becf']

  color_demo(ax1, old_colors, 'classic')
  color_demo(ax2, new_colors, 'v2.0')

  fig.subplots_adjust(**{'bottom': 0.0, 'left': 0.059,
                         'right': 0.869, 'top': 0.895})

In addition to changing the colors, an additional method to specify
colors was added.  Previously, the default colors were the single
character short-hand notations for red, green, blue, cyan, magenta,
yellow, and black.  This made them easy to type and usable in the
abbreviated style string in ``plot``, however the new default colors
are only specified via hex values.  To access these colors outside of
the property cycling the notation for colors ``'CN'``, where ``N``
takes values 0-9, was added to
denote the first 10 colors in :rc:`axes.prop_cycle`. See
:doc:`/tutorials/colors/colors` for more details.

To restore the old color cycle use

.. code::

   from cycler import cycler
   mpl.rcParams['axes.prop_cycle'] = cycler(color='bgrcmyk')

or set

.. code::

   axes.prop_cycle    : cycler('color', 'bgrcmyk')

in your :file:`matplotlibrc` file.


Colormap
--------

The new default colormap used by `matplotlib.cm.ScalarMappable` instances is
'viridis' (aka `option D <https://bids.github.io/colormap/>`__).

.. plot::

   import numpy as np
   import matplotlib.pyplot as plt

   N = M = 200
   X, Y = np.ogrid[0:20:N*1j, 0:20:M*1j]
   data = np.sin(np.pi * X*2 / 20) * np.cos(np.pi * Y*2 / 20)

   fig, (ax2, ax1) = plt.subplots(1, 2, figsize=(7, 3))
   im = ax1.imshow(data, extent=[0, 200, 0, 200])
   ax1.set_title("v2.0: 'viridis'")
   fig.colorbar(im, ax=ax1, shrink=0.8)

   im2 = ax2.imshow(data, extent=[0, 200, 0, 200], cmap='jet')
   fig.colorbar(im2, ax=ax2, shrink=0.8)
   ax2.set_title("classic: 'jet'")

   fig.tight_layout()

For an introduction to color theory and how 'viridis' was generated
watch Nathaniel Smith and Stéfan van der Walt's talk from SciPy2015.
See `here for many more details <https://bids.github.io/colormap/>`__
about the other alternatives and the tools used to create the color
map.  For details on all of the colormaps available in matplotlib see
:doc:`/tutorials/colors/colormaps`.

.. raw:: html

    <iframe width="560" height="315" src="https://www.youtube.com/embed/xAoljeRJ3lU" frameborder="0" allowfullscreen></iframe>


The previous default can be restored using

.. code::

   mpl.rcParams['image.cmap'] = 'jet'

or setting

.. code::

   image.cmap    : 'jet'

in your :file:`matplotlibrc` file; however this is strongly discouraged.

Interactive figures
-------------------

The default interactive figure background color has changed from grey
to white, which matches the default background color used when saving.

The previous defaults can be restored by ::

   mpl.rcParams['figure.facecolor'] = '0.75'

or by setting ::


    figure.facecolor : '0.75'

in your :file:`matplotlibrc` file.


Grid lines
----------

The default style of grid lines was changed from black dashed lines to thicker
solid light grey lines.

.. plot::

   import numpy as np
   import matplotlib.pyplot as plt

   fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(6, 3))

   ax1.grid(color='k', linewidth=.5, linestyle=':')
   ax1.set_title('classic')

   ax2.grid()
   ax2.set_title('v2.0')

The previous default can be restored by using::

   mpl.rcParams['grid.color'] = 'k'
   mpl.rcParams['grid.linestyle'] = ':'
   mpl.rcParams['grid.linewidth'] = 0.5

or by setting::

   grid.color       :   k       # grid color
   grid.linestyle   :   :       # dotted
   grid.linewidth   :   0.5     # in points

in your :file:`matplotlibrc` file.


Figure size, font size, and screen dpi
======================================

The default dpi used for on-screen display was changed from 80 dpi to
100 dpi, the same as the default dpi for saving files.  Due to this
change, the on-screen display is now more what-you-see-is-what-you-get
for saved files.  To keep the figure the same size in terms of pixels, in
order to maintain approximately the same size on the screen, the
default figure size was reduced from 8x6 inches to 6.4x4.8 inches.  As
a consequence of this the default font sizes used for the title, tick
labels, and axes labels were reduced to maintain their size relative
to the overall size of the figure.  By default the dpi of the saved
image is now the dpi of the `~matplotlib.figure.Figure` instance being
saved.

This will have consequences if you are trying to match text in a
figure directly with external text.


The previous defaults can be restored by ::

   mpl.rcParams['figure.figsize'] = [8.0, 6.0]
   mpl.rcParams['figure.dpi'] = 80
   mpl.rcParams['savefig.dpi'] = 100

   mpl.rcParams['font.size'] = 12
   mpl.rcParams['legend.fontsize'] = 'large'
   mpl.rcParams['figure.titlesize'] = 'medium'

or by setting::

   figure.figsize   : [8.0, 6.0]
   figure.dpi       : 80
   savefig.dpi      : 100

   font.size        : 12.0
   legend.fontsize  : 'large'
   figure.titlesize : 'medium'

In your :file:`matplotlibrc` file.

In addition, the ``forward`` kwarg to
`~.Figure.set_size_inches` now defaults to `True` to improve
the interactive experience.  Backend canvases that adjust the size of
their bound `matplotlib.figure.Figure` must pass ``forward=False`` to
avoid circular behavior.  This default is not configurable.


Plotting functions
==================

``scatter``
-----------

The following changes were made to the default behavior of
`~matplotlib.axes.Axes.scatter`

- The default size of the elements in a scatter plot is now based on
  :rc:`lines.markersize` so it is consistent with ``plot(X,
  Y, 'o')``.  The old value was 20, and the new value is 36 (6^2).
- Scatter markers no longer have a black edge.
- If the color of the markers is not specified it will follow the
  property cycle, pulling from the 'patches' cycle on the ``Axes``.

.. plot::

   import numpy as np
   import matplotlib.pyplot as plt

   np.random.seed(2)

   fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(6, 3))

   x = np.arange(15)
   y = np.random.rand(15)
   y2 = np.random.rand(15)
   ax1.scatter(x, y, s=20, edgecolors='k', c='b', label='a')
   ax1.scatter(x, y2, s=20, edgecolors='k', c='b', label='b')
   ax1.legend()
   ax1.set_title('classic')

   ax2.scatter(x, y, label='a')
   ax2.scatter(x, y2, label='b')
   ax2.legend()
   ax2.set_title('v2.0')


The classic default behavior of `~matplotlib.axes.Axes.scatter` can
only be recovered through ``mpl.style.use('classic')``.  The marker size
can be recovered via ::

  mpl.rcParam['lines.markersize'] = np.sqrt(20)

however, this will also affect the default marker size of
`~matplotlib.axes.Axes.plot`.  To recover the classic behavior on
a per-call basis pass the following kwargs::

  classic_kwargs = {'s': 20, 'edgecolors': 'k', 'c': 'b'}

``plot``
--------

The following changes were made to the default behavior of
`~matplotlib.axes.Axes.plot`

- the default linewidth increased from 1 to 1.5
- the dash patterns associated with ``'--'``, ``':'``, and ``'-.'`` have
  changed
- the dash patterns now scale with line width


.. plot::

   import numpy as np
   import matplotlib.pyplot as plt
   import matplotlib as mpl
   from cycler import cycler

   fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(6, 3))

   N = 15

   x = np.arange(N)
   y = np.ones_like(x)

   sty_cycle = (cycler('ls', ['--' ,':', '-.']) *
                cycler('lw', [None, 1, 2, 5]))

   classic = {
       'lines.linewidth': 1.0,
       'lines.dashed_pattern' : [6, 6],
       'lines.dashdot_pattern' : [3, 5, 1, 5],
       'lines.dotted_pattern' : [1, 3],
       'lines.scale_dashes': False}

   v2 = {}
   #    {'lines.linewidth': 1.5,
   #     'lines.dashed_pattern' : [2.8, 1.2],
   #     'lines.dashdot_pattern' : [4.8, 1.2, 0.8, 1.2],
   #     'lines.dotted_pattern' : [1.1, 1.1],
   #     'lines.scale_dashes': True}

   def demo(ax, rcparams, title):
       ax.axis('off')
       ax.set_title(title)
       with mpl.rc_context(rc=rcparams):
           for j, sty in enumerate(sty_cycle):
               ax.plot(x, y + j, **sty)

   demo(ax1, classic, 'classic')
   demo(ax2, {}, 'v2.0')


The previous defaults can be restored by setting::

    mpl.rcParams['lines.linewidth'] = 1.0
    mpl.rcParams['lines.dashed_pattern'] = [6, 6]
    mpl.rcParams['lines.dashdot_pattern'] = [3, 5, 1, 5]
    mpl.rcParams['lines.dotted_pattern'] = [1, 3]
    mpl.rcParams['lines.scale_dashes'] = False

or by setting::

   lines.linewidth   : 1.0
   lines.dashed_pattern : 6, 6
   lines.dashdot_pattern : 3, 5, 1, 5
   lines.dotted_pattern : 1, 3
   lines.scale_dashes: False

in your :file:`matplotlibrc` file.

``errorbar``
------------

By default, caps on the ends of errorbars are not present.

.. plot::

   import matplotlib as mpl
   import matplotlib.pyplot as plt
   import numpy as np

   # example data
   x = np.arange(0.1, 4, 0.5)
   y = np.exp(-x)

   # example variable error bar values
   yerr = 0.1 + 0.2*np.sqrt(x)
   xerr = 0.1 + yerr

   def demo(ax, rc, title):
       with mpl.rc_context(rc=rc):
           ax.errorbar(x, y, xerr=0.2, yerr=0.4)
       ax.set_title(title)

   fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(6, 3), tight_layout=True)

   demo(ax1, {'errorbar.capsize': 3}, 'classic')
   demo(ax2, {}, 'v2.0')

This also changes the return value of
:meth:`~matplotlib.axes.Axes.errorbar` as the list of 'caplines' will
be empty by default.

The previous defaults can be restored by setting::

    mpl.rcParams['errorbar.capsize'] = 3

or by setting ::

   errorbar.capsize : 3

in your :file:`matplotlibrc` file.


``boxplot``
-----------

Previously, boxplots were composed of a mish-mash of styles that were, for
better for worse, inherited from Matlab. Most of the elements were blue,
but the medians were red. The fliers (outliers) were black plus-symbols
('+') and the whiskers were dashed lines, which created ambiguity if
the (solid and black) caps were not drawn.

For the new defaults, everything is black except for the median and mean
lines (if drawn), which are set to the first two elements of the current
color cycle. Also, the default flier markers are now hollow circles,
which maintain the ability of the plus-symbols to overlap without
obscuring data too much.

.. plot::

    import numpy as np
    import matplotlib.pyplot as plt

    data = np.random.lognormal(size=(37, 4))
    fig, (old, new) = plt.subplots(ncols=2, sharey=True)
    with plt.style.context('default'):
        new.boxplot(data, labels=['A', 'B', 'C', 'D'])
        new.set_title('v2.0')

    with plt.style.context('classic'):
        old.boxplot(data, labels=['A', 'B', 'C', 'D'])
        old.set_title('classic')

    new.set_yscale('log')
    old.set_yscale('log')

The previous defaults can be restored by setting::

    mpl.rcParams['boxplot.flierprops.color'] = 'k'
    mpl.rcParams['boxplot.flierprops.marker'] = '+'
    mpl.rcParams['boxplot.flierprops.markerfacecolor'] = 'none'
    mpl.rcParams['boxplot.flierprops.markeredgecolor'] = 'k'
    mpl.rcParams['boxplot.boxprops.color'] = 'b'
    mpl.rcParams['boxplot.whiskerprops.color'] = 'b'
    mpl.rcParams['boxplot.whiskerprops.linestyle'] = '--'
    mpl.rcParams['boxplot.medianprops.color'] = 'r'
    mpl.rcParams['boxplot.meanprops.color'] = 'r'
    mpl.rcParams['boxplot.meanprops.marker'] = '^'
    mpl.rcParams['boxplot.meanprops.markerfacecolor'] = 'r'
    mpl.rcParams['boxplot.meanprops.markeredgecolor'] = 'k'
    mpl.rcParams['boxplot.meanprops.markersize'] = 6
    mpl.rcParams['boxplot.meanprops.linestyle'] = '--'
    mpl.rcParams['boxplot.meanprops.linewidth'] = 1.0

or by setting::

    boxplot.flierprops.color:           'k'
    boxplot.flierprops.marker:          '+'
    boxplot.flierprops.markerfacecolor: 'none'
    boxplot.flierprops.markeredgecolor: 'k'
    boxplot.boxprops.color:             'b'
    boxplot.whiskerprops.color:         'b'
    boxplot.whiskerprops.linestyle:     '--'
    boxplot.medianprops.color:          'r'
    boxplot.meanprops.color:            'r'
    boxplot.meanprops.marker:           '^'
    boxplot.meanprops.markerfacecolor:  'r'
    boxplot.meanprops.markeredgecolor:  'k'
    boxplot.meanprops.markersize:        6
    boxplot.meanprops.linestyle:         '--'
    boxplot.meanprops.linewidth:         1.0

in your :file:`matplotlibrc` file.


``fill_between`` and ``fill_betweenx``
--------------------------------------

`~matplotlib.axes.Axes.fill_between` and
`~matplotlib.axes.Axes.fill_betweenx` both follow the patch color
cycle.

.. plot::

   import matplotlib.pyplot as plt
   import numpy as np

   fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(6, 3))
   fig.subplots_adjust(wspace=0.3)
   th = np.linspace(0, 2*np.pi, 128)
   N = 5

   def demo(ax, extra_kwargs, title):
       ax.set_title(title)
       return [ax.fill_between(th, np.sin((j / N) * np.pi + th), alpha=.5, **extra_kwargs)
               for j in range(N)]

   demo(ax1, {'facecolor': 'C0'}, 'classic')
   demo(ax2, {}, 'v2.0')


If the facecolor is set via the ``facecolors`` or ``color`` keyword argument,
then the color is not cycled.

To restore the previous behavior, explicitly pass the keyword argument
``facecolors='C0'`` to the method call.


Patch edges and color
---------------------

Most artists drawn with a patch (``~matplotlib.axes.Axes.bar``,
``~matplotlib.axes.Axes.pie``, etc) no longer have a black edge by
default.  The default face color is now ``'C0'`` instead of ``'b'``.

.. plot::

   import matplotlib.pyplot as plt
   import numpy as np
   from matplotlib import rc_context
   import matplotlib.patches as mpatches

   fig, all_ax = plt.subplots(3, 2, figsize=(4, 6), tight_layout=True)

   def demo(ax_top, ax_mid, ax_bottom, rcparams, label):
       labels = 'Frogs', 'Hogs', 'Dogs', 'Logs'
       fracs = [15, 30, 45, 10]

       explode = (0, 0.05, 0, 0)

       ax_top.set_title(label)

       with rc_context(rc=rcparams):
           ax_top.pie(fracs, labels=labels)
           ax_top.set_aspect('equal')
           ax_mid.bar(range(len(fracs)), fracs, tick_label=labels)
           plt.setp(ax_mid.get_xticklabels(), rotation=-45)
           grid = np.mgrid[0.2:0.8:3j, 0.2:0.8:3j].reshape(2, -1).T

           ax_bottom.set_xlim(0, .75)
           ax_bottom.set_ylim(0, .75)
           ax_bottom.add_artist(mpatches.Rectangle(grid[1] - [0.025, 0.05],
                                                   0.05, 0.1))
           ax_bottom.add_artist(mpatches.RegularPolygon(grid[3], 5, 0.1))
           ax_bottom.add_artist(mpatches.Ellipse(grid[4], 0.2, 0.1))
           ax_bottom.add_artist(mpatches.Circle(grid[0], 0.1))
           ax_bottom.axis('off')

   demo(*all_ax[:, 0], rcparams={'patch.force_edgecolor': True,
                                 'patch.facecolor': 'b'}, label='classic')
   demo(*all_ax[:, 1], rcparams={}, label='v2.0')

The previous defaults can be restored by setting::

    mpl.rcParams['patch.force_edgecolor'] = True
    mpl.rcParams['patch.facecolor'] = 'b'

or by setting::

   patch.facecolor        : b
   patch.force_edgecolor  : True

in your :file:`matplotlibrc` file.

``hexbin``
----------

The default value of the *linecolor* keyword argument for `~.Axes.hexbin` has
changed from ``'none'`` to ``'face'``. If 'none' is now supplied, no line edges
are drawn around the hexagons.

.. _barbarh_align:

``bar`` and ``barh``
--------------------

The default value of the ``align`` kwarg for both
`~.Axes.bar` and `~.Axes.barh` is changed from
``'edge'`` to ``'center'``.


.. plot::

   import matplotlib.pyplot as plt
   import numpy as np

   fig, ((ax1, ax2), (ax3, ax4)) = plt.subplots(2, 2, figsize=(5, 5))

   def demo(bar_func, bar_kwargs):
       return bar_func([1, 2, 3], [1, 2, 3], tick_label=['a', 'b', 'c'],
                       **bar_kwargs)


   ax1.set_title("classic")
   ax2.set_title('v2.0')

   demo(ax1.bar, {'align': 'edge'})
   demo(ax2.bar, {})
   demo(ax3.barh, {'align': 'edge'})
   demo(ax4.barh, {})


To restore the previous behavior explicitly pass the keyword argument
``align='edge'`` to the method call.


Hatching
========


The color of the lines in the hatch is now determined by

- If an edge color is explicitly set, use that for the hatch color
- If the edge color is not explicitly set, use :rc:`hatch.color` which
  is looked up at artist creation time.

The width of the lines in a hatch pattern is now configurable by the
rcParams :rc:`hatch.linewidth`, which defaults to 1 point.  The old
behavior for the line width was different depending on backend:

- PDF: 0.1 pt
- SVG: 1.0 pt
- PS:  1 px
- Agg: 1 px

The old line width behavior can not be restored across all backends
simultaneously, but can be restored for a single backend by setting::

   mpl.rcParams['hatch.linewidth'] = 0.1  # previous pdf hatch linewidth
   mpl.rcParams['hatch.linewidth'] = 1.0  # previous svg hatch linewidth

The behavior of the PS and Agg backends was DPI dependent, thus::


   mpl.rcParams['figure.dpi'] = dpi
   mpl.rcParams['savefig.dpi'] = dpi  # or leave as default 'figure'
   mpl.rcParams['hatch.linewidth'] = 1.0 / dpi  # previous ps and Agg hatch linewidth


There is no direct API level control of the hatch color or linewidth.

Hatching patterns are now rendered at a consistent density, regardless of DPI.
Formerly, high DPI figures would be more dense than the default, and low DPI
figures would be less dense.  This old behavior cannot be directly restored,
but the density may be increased by repeating the hatch specifier.


.. _default_changes_font:

Fonts
=====

Normal text
-----------

The default font has changed from "Bitstream Vera Sans" to "DejaVu
Sans".  DejaVu Sans has additional international and math characters,
but otherwise has the same appearance as Bitstream Vera Sans.
Latin, Greek, Cyrillic, Armenian, Georgian, Hebrew, and Arabic are
`all supported <https://dejavu-fonts.github.io/>`__
(but right-to-left rendering is still not handled by matplotlib).
In addition, DejaVu contains a sub-set of emoji symbols.

.. plot::

   from __future__ import unicode_literals

   import matplotlib.pyplot as plt

   fig, ax = plt.subplots()
   tick_labels = ['😃', '😎', '😴', '😲', '😻']
   bar_labels = ['א', 'α', '☣', '⌬', 'ℝ']
   y = [1, 4, 9, 16, 25]
   x = range(5)
   ax.bar(x, y, tick_label=tick_labels, align='center')
   ax.xaxis.set_tick_params(labelsize=20)
   for _x, _y, t in zip(x, y, bar_labels):
       ax.annotate(t, (_x, _y), fontsize=20, ha='center',
                   xytext=(0, -2), textcoords='offset pixels',
                   bbox={'facecolor': 'w'})

   ax.set_title('Диаграмма со смайликами')

See the `DejaVu Sans PDF sample for full coverage
<http://dejavu.sourceforge.net/samples/DejaVuSans.pdf>`__.

Math text
---------

The default math font when using the built-in math rendering engine
(mathtext) has changed from "Computer Modern" (i.e. LaTeX-like) to
"DejaVu Sans".  This change has no effect if the
TeX backend is used (i.e. ``text.usetex`` is ``True``).


.. plot::

   import matplotlib.pyplot as plt
   import matplotlib as mpl

   mpl.rcParams['mathtext.fontset'] = 'cm'
   mpl.rcParams['mathtext.rm'] = 'serif'

   fig, ax = plt.subplots(tight_layout=True, figsize=(3, 3))

   ax.plot(range(15), label=r'int: $15 \int_0^\infty dx$')
   ax.legend()
   ax.set_title('classic')


.. plot::

   import matplotlib.pyplot as plt
   import matplotlib as mpl

   fig, ax  = plt.subplots(tight_layout=True, figsize=(3, 3))

   ax.plot(range(15), label=r'int: $15 \int_0^\infty dx$')
   ax.legend()
   ax.set_title('v2.0')



To revert to the old behavior set the::

   mpl.rcParams['mathtext.fontset'] = 'cm'
   mpl.rcParams['mathtext.rm'] = 'serif'

or set::

  mathtext.fontset: cm
  mathtext.rm : serif


in your :file:`matplotlibrc` file.

This ``rcParam`` is consulted when the text is drawn, not when the
artist is created. Thus all mathtext on a given ``canvas`` will use the
same fontset.


Legends
=======

- By default, the number of points displayed in a legend is now 1.
- The default legend location is ``'best'``, so the legend will be
  automatically placed in a location to minimize overlap with data.
- The legend defaults now include rounded corners, a lighter
  boundary, and partially transparent boundary and background.

.. plot::

   import matplotlib as mpl
   import matplotlib.pyplot as plt
   import numpy as np

   def demo(ax, rcparams, title):
       np.random.seed(2)
       N = 25
       with mpl.rc_context(rc=rcparams):
           x = range(N)
           y = np.cumsum(np.random.randn(N) )
           # unpack the single Line2D artist
           ln, = ax.plot(x, y, marker='s',
                         linestyle='-', label='plot')
           ax.fill_between(x, y, 0, label='fill', alpha=.5, color=ln.get_color())
           ax.scatter(N*np.random.rand(N), np.random.rand(N), label='scatter')
           ax.set_title(title)
           ax.legend()

   fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(6, 3), tight_layout=True)

   classic_rc = {'legend.fancybox': False,
                 'legend.numpoints': 2,
                 'legend.scatterpoints': 3,
                 'legend.framealpha': None,
                 'legend.edgecolor': 'inherit',
                 'legend.loc': 'upper right',
                 'legend.fontsize': 'large'}

   demo(ax1, classic_rc, 'classic')
   demo(ax2, {}, 'v2.0')


The previous defaults can be restored by setting::

   mpl.rcParams['legend.fancybox'] = False
   mpl.rcParams['legend.loc'] = 'upper right'
   mpl.rcParams['legend.numpoints'] = 2
   mpl.rcParams['legend.fontsize'] = 'large'
   mpl.rcParams['legend.framealpha'] = None
   mpl.rcParams['legend.scatterpoints'] = 3
   mpl.rcParams['legend.edgecolor'] = 'inherit'


or by setting::

   legend.fancybox      : False
   legend.loc           : upper right
   legend.numpoints     : 2      # the number of points in the legend line
   legend.fontsize      : large
   legend.framealpha    : None    # opacity of legend frame
   legend.scatterpoints : 3 # number of scatter points
   legend.edgecolor     : inherit   # legend edge color ('inherit'
                                    # means it uses axes.edgecolor)

in your :file:`matplotlibrc` file.

Image
=====

Interpolation
-------------

The default interpolation method for `~matplotlib.axes.Axes.imshow` is
now ``'nearest'`` and by default it resamples the data (both up and down
sampling) before colormapping.


.. plot::

   import matplotlib.pyplot as plt
   import matplotlib as mpl
   import numpy as np


   def demo(ax, rcparams, title):
       np.random.seed(2)
       A = np.random.rand(5, 5)

       with mpl.rc_context(rc=rcparams):
           ax.imshow(A)
           ax.set_title(title)

   fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(6, 3), tight_layout=True)

   classic_rcparams = {'image.interpolation': 'bilinear',
                       'image.resample': False}

   demo(ax1, classic_rcparams, 'classic')
   demo(ax2, {}, 'v2.0')


To restore the previous behavior set::

   mpl.rcParams['image.interpolation'] = 'bilinear'
   mpl.rcParams['image.resample'] = False

or set::

  image.interpolation  : bilinear  # see help(imshow) for options
  image.resample  : False

in your :file:`matplotlibrc` file.

Colormapping pipeline
---------------------

Previously, the input data was normalized, then colormapped, and then
resampled to the resolution required for the screen.  This meant that
the final resampling was being done in color space.  Because the color
maps are not generally linear in RGB space, colors not in the colormap
may appear in the final image.  This bug was addressed by an almost
complete overhaul of the image handling code.

The input data is now normalized, then resampled to the correct
resolution (in normalized dataspace), and then colormapped to
RGB space.  This ensures that only colors from the colormap appear
in the final image. (If your viewer subsequently resamples the image,
the artifact may reappear.)

The previous behavior cannot be restored.


Shading
-------

- The default shading mode for light source shading, in
  ``matplotlib.colors.LightSource.shade``, is now ``overlay``.
  Formerly, it was ``hsv``.


Plot layout
===========

Auto limits
-----------

The previous auto-scaling behavior was to find 'nice' round numbers
as view limits that enclosed the data limits, but this could produce
bad plots if the data happened to fall on a vertical or
horizontal line near the chosen 'round number' limit.  The new default
sets the view limits to 5% wider than the data range.

.. plot::

   import matplotlib as mpl
   import matplotlib.pyplot as plt
   import numpy

   data = np.zeros(1000)
   data[0] = 1

   fig = plt.figure(figsize=(6, 3))

   def demo(fig, rc, title, j):
       with mpl.rc_context(rc=rc):
           ax = fig.add_subplot(1, 2, j)
           ax.plot(data)
           ax.set_title(title)

   demo(fig, {'axes.autolimit_mode': 'round_numbers',
              'axes.xmargin': 0,
              'axes.ymargin': 0}, 'classic', 1)
   demo(fig, {}, 'v2.0', 2)

The size of the padding in the x and y directions is controlled by the
``'axes.xmargin'`` and ``'axes.ymargin'`` rcParams respectively. Whether
the view limits should be 'round numbers' is controlled by
:rc:`axes.autolimit_mode`.  In the original ``'round_number'`` mode,
the view limits coincide with ticks.

The previous default can be restored by using::

   mpl.rcParams['axes.autolimit_mode'] = 'round_numbers'
   mpl.rcParams['axes.xmargin'] = 0
   mpl.rcParams['axes.ymargin'] = 0

or setting::

   axes.autolimit_mode: round_numbers
   axes.xmargin: 0
   axes.ymargin: 0

in your :file:`matplotlibrc` file.


Z-order
-------

- Ticks and grids are now plotted above solid elements such as
  filled contours, but below lines.  To return to the previous
  behavior of plotting ticks and grids above lines, set
  ``rcParams['axes.axisbelow'] = False``.


Ticks
-----

Direction
~~~~~~~~~

To reduce the collision of tick marks with data, the default ticks now
point outward by default.  In addition, ticks are now drawn only on
the bottom and left spines to prevent a porcupine appearance, and for
a cleaner separation between subplots.


.. plot::

   import matplotlib as mpl
   import matplotlib.pyplot as plt
   import numpy as np

   th = np.linspace(0, 2*np.pi, 128)
   y = np.sin(th)

   def demo(fig, rcparams, title, j):
       np.random.seed(2)
       with mpl.rc_context(rc=rcparams):

           ax = fig.add_subplot(2, 2, j)
           ax.hist(np.random.beta(0.5, 0.5, 10000), 25, density=True)
           ax.set_xlim([0, 1])
           ax.set_title(title)

           ax = fig.add_subplot(2, 2, j + 2)
           ax.imshow(np.random.rand(5, 5))

   classic = {'xtick.direction': 'in',
              'ytick.direction': 'in',
              'xtick.top': True,
              'ytick.right': True}

   fig = plt.figure(figsize=(6, 6), tight_layout=True)

   demo(fig, classic, 'classic', 1)
   demo(fig, {}, 'v2.0', 2)


To restore the previous behavior set::

   mpl.rcParams['xtick.direction'] = 'in'
   mpl.rcParams['ytick.direction'] = 'in'
   mpl.rcParams['xtick.top'] = True
   mpl.rcParams['ytick.right'] = True

or set::

   xtick.top: True
   xtick.direction: in

   ytick.right: True
   ytick.direction: in

in your :file:`matplotlibrc` file.



Number of ticks
~~~~~~~~~~~~~~~

The default `~matplotlib.ticker.Locator` used for the x and y axis is
`~matplotlib.ticker.AutoLocator` which tries to find, up to some
maximum number, 'nicely' spaced ticks.  The locator now includes
an algorithm to estimate the maximum number of ticks that will leave
room for the tick labels.  By default it also ensures that there are at least
two ticks visible.

.. plot::

   import matplotlib.pyplot as plt
   import numpy as np

   from matplotlib.ticker import AutoLocator

   fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(4, 3), tight_layout=True)
   ax1.set_xlim(0, .1)
   ax2.set_xlim(0, .1)

   ax1.xaxis.get_major_locator().set_params(nbins=9, steps=[1, 2, 5, 10])
   ax1.set_title('classic')
   ax2.set_title('v2.0')

There is no way, other than using ``mpl.style.use('classic')``, to restore the
previous behavior as the default.  On an axis-by-axis basis you may either
control the existing locator via: ::

  ax.xaxis.get_major_locator().set_params(nbins=9, steps=[1, 2, 5, 10])

or create a new `~matplotlib.ticker.MaxNLocator`::

  import matplotlib.ticker as mticker
  ax.set_major_locator(mticker.MaxNLocator(nbins=9, steps=[1, 2, 5, 10])

The algorithm used by `~matplotlib.ticker.MaxNLocator` has been
improved, and this may change the choice of tick locations in some
cases.  This also affects `~matplotlib.ticker.AutoLocator`, which
uses ``MaxNLocator`` internally.

For a log-scaled axis the default locator is the
`~matplotlib.ticker.LogLocator`.  Previously the maximum number
of ticks was set to 15, and could not be changed. Now there is a
*numticks* kwarg for setting the maximum to any integer value,
to the string 'auto', or to its default value of None which is
equivalent to 'auto'.  With the 'auto' setting the maximum number
will be no larger than 9, and will be reduced depending on the
length of the axis in units of the tick font size.  As in the
case of the AutoLocator, the heuristic algorithm reduces the
incidence of overlapping tick labels but does not prevent it.


Tick label formatting
---------------------

``LogFormatter`` labeling of minor ticks
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Minor ticks on a log axis are now labeled when the axis view limits
span a range less than or equal to the interval between two major
ticks.  See `~matplotlib.ticker.LogFormatter` for details. The
minor tick labeling is turned off when using ``mpl.style.use('classic')``,
but cannot be controlled independently via `.rcParams`.

.. plot::

   import numpy as np
   import matplotlib.pyplot as plt

   np.random.seed(2)

   fig, (ax1, ax2) = plt.subplots(ncols=2, figsize=(6, 3))
   fig.subplots_adjust(wspace=0.35, left=0.09, right=0.95)

   x = np.linspace(0.9, 1.7, 10)
   y = 10 ** x[np.random.randint(0, 10, 10)]

   ax2.semilogy(x, y)
   ax2.set_title('v2.0')

   with plt.style.context('classic'):
       ax1.semilogy(x, y)
       ax1.set_xlim(ax2.get_xlim())
       ax1.set_ylim(ax2.get_ylim())
       ax1.set_title('classic')


``ScalarFormatter`` tick label formatting with offsets
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

With the default :rc:`axes.formatter.useoffset`,
an offset will be used when it will save 4 or more digits.  This can
be controlled with the new :rc:`axes.formatter.offset_threshold`.
To restore the previous behavior of using an offset to save 2 or more
digits, use ``rcParams['axes.formatter.offset_threshold'] = 2``.

.. plot::

   import numpy as np
   import matplotlib.pyplot as plt

   np.random.seed(5)

   fig = plt.figure(figsize=(6, 3))
   fig.subplots_adjust(bottom=0.15, wspace=0.3, left=0.09, right=0.95)

   x = np.linspace(2000, 2008, 9)
   y = np.random.randn(9) + 50000

   with plt.rc_context(rc={'axes.formatter.offset_threshold' : 2}):
       ax1 = fig.add_subplot(1, 2, 1)
       ax1.plot(x, y)
       ax1.set_title('classic')

   ax2 = fig.add_subplot(1, 2, 2)
   ax2.plot(x, y)
   ax2.set_title('v2.0')


``AutoDateFormatter`` format strings
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The default date formats are now all based on ISO format, i.e., with
the slowest-moving value first.  The date formatters are
configurable through the ``date.autoformatter.*`` rcParams.


+--------------------------------------+--------------------------------------+-------------------+-------------------+
| Threshold (tick interval >= than)    | rcParam                              | classic           | v2.0              |
+======================================+======================================+===================+===================+
| 365 days                             | ``'date.autoformatter.year'``        | ``'%Y'``          | ``'%Y'``          |
+--------------------------------------+--------------------------------------+-------------------+-------------------+
| 30 days                              | ``'date.autoformatter.month'``       | ``'%b %Y'``       | ``'%Y-%m'``       |
+--------------------------------------+--------------------------------------+-------------------+-------------------+
| 1 day                                | ``'date.autoformatter.day'``         | ``'%b %d %Y'``    | ``'%Y-%m-%d'``    |
+--------------------------------------+--------------------------------------+-------------------+-------------------+
| 1 hour                               | ``'date.autoformatter.hour'``        | ``'%H:%M:%S'``    | ``'%H:%M'``       |
+--------------------------------------+--------------------------------------+-------------------+-------------------+
| 1 minute                             | ``'date.autoformatter.minute'``      | ``'%H:%M:%S.%f'`` | ``'%H:%M:%S'``    |
+--------------------------------------+--------------------------------------+-------------------+-------------------+
| 1 second                             | ``'date.autoformatter.second'``      | ``'%H:%M:%S.%f'`` | ``'%H:%M:%S'``    |
+--------------------------------------+--------------------------------------+-------------------+-------------------+
| 1  microsecond                       | ``'date.autoformatter.microsecond'`` | ``'%H:%M:%S.%f'`` | ``'%H:%M:%S.%f'`` |
+--------------------------------------+--------------------------------------+-------------------+-------------------+



Python's ``%x`` and ``%X`` date formats may be of particular interest
to format dates based on the current locale.

The previous default can be restored by::

   mpl.rcParams['date.autoformatter.year'] = '%Y'
   mpl.rcParams['date.autoformatter.month'] = '%b %Y'
   mpl.rcParams['date.autoformatter.day'] = '%b %d %Y'
   mpl.rcParams['date.autoformatter.hour'] = '%H:%M:%S'
   mpl.rcParams['date.autoformatter.minute'] = '%H:%M:%S.%f'
   mpl.rcParams['date.autoformatter.second'] = '%H:%M:%S.%f'
   mpl.rcParams['date.autoformatter.microsecond'] = '%H:%M:%S.%f'


or setting ::

   date.autoformatter.year   : %Y
   date.autoformatter.month  : %b %Y
   date.autoformatter.day    : %b %d %Y
   date.autoformatter.hour   : %H:%M:%S
   date.autoformatter.minute : %H:%M:%S.%f
   date.autoformatter.second : %H:%M:%S.%f
   date.autoformatter.microsecond : %H:%M:%S.%f

in your :file:`matplotlibrc` file.

mplot3d
=======

- mplot3d now obeys some style-related rcParams, rather than using
  hard-coded defaults.  These include:

  - xtick.major.width
  - ytick.major.width
  - xtick.color
  - ytick.color
  - axes.linewidth
  - axes.edgecolor
  - grid.color
  - grid.linewidth
  - grid.linestyle
.. _github-stats-3-4-0:

GitHub statistics for 3.4.0 (Mar 26, 2021)
==========================================

GitHub statistics for 2020/07/16 (tag: v3.3.0) - 2021/03/26

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 204 issues and merged 772 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/53?closed=1>`__

The following 177 authors contributed 3852 commits.

* A N U S H
* Adam Brown
* Aditya Malhotra
* aflah02
* Aitik Gupta
* Alejandro García
* Alex Henrie
* Alexander Schlüter
* Alexis de Almeida Coutinho
* Andreas C Mueller
* andrzejnovak
* Antony Lee
* Arthur Milchior
* bakes
* BAKEZQ
* BaoGiang HoangVu
* Ben Root
* BH4
* Bradley Dice
* Braxton Lamey
* Brian McFee
* Bruno Beltran
* Bryan Kok
* Byron Boulton
* Carsten Schelp
* ceelo777
* Charles
* CharlesHe16
* Christian Baumann
* Contextualist
* DangoMelon
* Daniel
* Daniel Ingram
* David Meyer
* David Stansby
* David Young
* deep-jkl
* Diego Leal
* Dr. Thomas A Caswell
* Dylan Cutler
* Eben Pendleton
* EBenkler
* ebenp
* ecotner
* Elliott Sales de Andrade
* Emily FY
* Eric Firing
* Eric Larson
* Eric Prestat
* Erik Benkler
* Evan Berkowitz
* Ewan Sutherland
* Federico Ariza
* Forrest
* Frank Sauerburger
* FrankTheCodeMonkey
* Greg Lucas
* hannah
* Harry Knight
* Harsh Sharma
* Hassan Kibirige
* Hugo van Kemenade
* Iain-S
* Ian Hunt-Isaak
* Ian Thomas
* ianhi
* Ilya V. Schurov
* ImportanceOfBeingErnest
* Isuru Fernando
* ItsRLuo
* J. Scott Berg
* Jae-Joon Lee
* Jakub Klus
* Janakarajan Natarajan
* Jann Paul Mattern
* jbhopkins
* jeetvora331
* Jerome F. Villegas
* Jerome Villegas
* jfbu
* Jirka Hladky
* Jody Klymak
* Johan von Forstner
* johan12345
* john imperial
* John Losito
* John Peloquin
* johnthagen
* Jouni K. Seppänen
* Kate Perkins
* kate-perkins
* katrielester
* kolibril13
* kwgchi
* Lee Johnston
* Leo Singer
* linchiwei123
* Lucy Liu
* luz paz
* luzpaz
* Léonard Gérard
* majorwitty
* mansoor96g
* Maria Ilie
* Maria-Alexandra Ilie
* Marianne Corvellec
* Mark Harfouche
* Martin Spacek
* Mary Chris Go
* Matthew Petroff
* Matthias Bussonnier
* Matthias Geier
* Max Chen
* McToel
* Michael Grupp
* Michaël Defferrard
* Mihai Anton
* Mohammad Aflah Khan
* Neilzon Viloria
* neok-m4700
* Nora Moseman
* Pamela Wu
* pankajchetry1168
* Petar Mlinarić
* Peter Williams
* Phil Nagel
* philip-sparks
* Philipp Arras
* Philipp Nagel
* Pratyush Raj
* Péter Leéh
* rajpratyush
* Randall Ung
* reshamas
* Rezangyal
* Richard Sheridan
* richardsheridan
* Rob McDonald
* Rohit Rawat
* Ruben Verweij
* Ruth Comer
* Ryan May
* Sam Tygier
* shawnchen
* shawnchen1996
* ShawnChen1996
* Sidharth Bansal
* Srihitha Maryada
* Stephen Sinclair
* Struan Murray
* Theodor Athanasiadis
* Thomas A Caswell
* Thorvald Johannessen
* Tim Gates
* Tim Hoffmann
* Tobias Hangleiter
* tohc1
* Tom Charrett
* Tom Neep
* Tomas Fiers
* ulijh
* Ulrich J. Herter
* Utkarshp1
* Uwe F. Mayer
* Valentin Valls
* Vincent Cuenca
* Vineyard
* Vlas Sokolov
* Xianxiang Li
* xlilos
* Ye Chang
* Yichao Yu
* yozhikoff
* Yun Liu
* z0rgy
* zitorelova

GitHub issues and pull requests:

Pull Requests (772):

* :ghpull:`19775`: Fix deprecation for imread on URLs.
* :ghpull:`19772`: Backport PR #19535 on branch v3.4.x (Fix example's BasicUnit array conversion.)
* :ghpull:`19771`: Backport PR #19757 on branch v3.4.x (Fixed python -mpip typo)
* :ghpull:`19770`: Backport PR #19739 on branch v3.4.x (Changed 'python -mpip' to 'python -m pip' for consistency)
* :ghpull:`19535`: Fix example's BasicUnit array conversion.
* :ghpull:`19767`: Backport PR #19766 on branch v3.4.x (Set colormap modification removal to 3.6.)
* :ghpull:`19766`: Set colormap modification removal to 3.6.
* :ghpull:`19764`: Backport PR #19762 on branch v3.4.x (FIX: do not report that webagg supports blitting)
* :ghpull:`19762`: FIX: do not report that webagg supports blitting
* :ghpull:`19689`: Prepare API docs for v3.4.0
* :ghpull:`19761`: Backport PR #19746 on branch v3.4.x (Fix resizing in nbAgg.)
* :ghpull:`19746`: Fix resizing in nbAgg.
* :ghpull:`19757`: Fixed python -mpip typo
* :ghpull:`19739`: Changed 'python -mpip' to 'python -m pip' for consistency
* :ghpull:`19713`: DOC: Prepare What's new page for 3.4.0.
* :ghpull:`19742`: Backport PR #19741 on branch v3.4.x (Only override pickradius when picker is not a bool.)
* :ghpull:`19741`: Only override pickradius when picker is not a bool.
* :ghpull:`19726`: Backport PR #19505 on branch v3.4.x (Move some advanced documentation away from Installation Guide)
* :ghpull:`19505`: Move some advanced documentation away from Installation Guide
* :ghpull:`19712`: Backport PR #19707 on branch v3.4.x (DOC: fix dx in Arrow guide)
* :ghpull:`19711`: Backport PR #19709 on branch v3.4.x (Fix arrow_guide.py typo)
* :ghpull:`19709`: Fix arrow_guide.py typo
* :ghpull:`19707`: DOC: fix dx in Arrow guide
* :ghpull:`19699`: Backport PR #19695 on branch v3.4.x (DOC: Increase size of headings)
* :ghpull:`19695`: DOC: Increase size of headings
* :ghpull:`19697`: Backport PR #19690 on branch v3.4.x (Only warn about existing redirects if content differs.)
* :ghpull:`19690`: Only warn about existing redirects if content differs.
* :ghpull:`19696`: Backport PR #19665 on branch v3.4.x (Changed FormatStrFormatter documentation to include how to get unicode minus)
* :ghpull:`19680`: Backport PR #19402 on branch v3.4.x (Build aarch64 wheels)
* :ghpull:`19678`: Backport PR #19671 on branch v3.4.x (Fix crash in early window raise in gtk3.)
* :ghpull:`19671`: Fix crash in early window raise in gtk3.
* :ghpull:`19665`: Changed FormatStrFormatter documentation to include how to get unicode minus
* :ghpull:`19402`: Build aarch64 wheels
* :ghpull:`19669`: Backport PR #19661 on branch v3.4.x (Fix CoC link)
* :ghpull:`19668`: Backport PR #19663 on branch v3.4.x (ENH: add a copy method to colormaps)
* :ghpull:`19663`: ENH: add a copy method to colormaps
* :ghpull:`19661`: Fix CoC link
* :ghpull:`19652`: Backport PR #19649 on branch v3.4.x (Use globals() instead of locals() for adding colormaps as names to cm module)
* :ghpull:`19649`: Use globals() instead of locals() for adding colormaps as names to cm module
* :ghpull:`19651`: Backport PR #19618 on branch v3.4.x (FIX: make the cache in font_manager._get_font keyed by thread id)
* :ghpull:`19650`: Backport PR #19625 on branch v3.4.x (Restore _AxesStack to track a Figure's Axes order.)
* :ghpull:`19647`: Backport PR #19645 on branch v3.4.x (Fix comment in RectangleSelector)
* :ghpull:`19618`: FIX: make the cache in font_manager._get_font keyed by thread id
* :ghpull:`19648`: Backport PR #19643 on branch v3.4.x (Don't turn check_for_pgf into public API.)
* :ghpull:`19625`: Restore _AxesStack to track a Figure's Axes order.
* :ghpull:`19643`: Don't turn check_for_pgf into public API.
* :ghpull:`19645`: Fix comment in RectangleSelector
* :ghpull:`19644`: Backport PR #19611 on branch v3.4.x (Fix double picks.)
* :ghpull:`19611`: Fix double picks.
* :ghpull:`19640`: Backport PR #19639 on branch v3.4.x (FIX: do not allow single element list of str in subplot_mosaic)
* :ghpull:`19639`: FIX: do not allow single element list of str in subplot_mosaic
* :ghpull:`19638`: Backport PR #19632 on branch v3.4.x (Fix handling of warn keyword in Figure.show.)
* :ghpull:`19637`: Backport PR #19582 on branch v3.4.x (Add kerning to single-byte strings in PDFs)
* :ghpull:`19632`: Fix handling of warn keyword in Figure.show.
* :ghpull:`19582`: Add kerning to single-byte strings in PDFs
* :ghpull:`19629`: Backport PR #19548 on branch v3.4.x (Increase tolerances for other arches.)
* :ghpull:`19630`: Backport PR #19596 on branch v3.4.x (Fix for issue 17769: wx interactive figure close cause crash)
* :ghpull:`19596`: Fix for issue 17769: wx interactive figure close cause crash
* :ghpull:`19548`: Increase tolerances for other arches.
* :ghpull:`19616`: Backport PR #19577 on branch v3.4.x (Fix "return"->"enter" mapping in key names.)
* :ghpull:`19617`: Backport PR #19571 on branch v3.4.x (Fail early when setting Text color to a non-colorlike.)
* :ghpull:`19615`: Backport PR #19583 on branch v3.4.x (FIX: check for a set during color conversion)
* :ghpull:`19614`: Backport PR #19597 on branch v3.4.x (Fix IPython import issue)
* :ghpull:`19613`: Backport PR #19546 on branch v3.4.x (Move unrendered README.wx to thirdpartypackages/index.rst.)
* :ghpull:`19583`: FIX: check for a set during color conversion
* :ghpull:`19597`: Fix IPython import issue
* :ghpull:`19571`: Fail early when setting Text color to a non-colorlike.
* :ghpull:`19595`: Backport PR #19589 on branch v3.4.x (Changes linestyle parameter of flierprops)
* :ghpull:`19577`: Fix "return"->"enter" mapping in key names.
* :ghpull:`19589`: Changes linestyle parameter of flierprops
* :ghpull:`19592`: Backport PR #19587 on branch v3.4.x (DOC: fix plot_date doc)
* :ghpull:`19587`: DOC: fix plot_date doc
* :ghpull:`19580`: Backport PR #19456 on branch v3.4.x (Doc implement reredirects)
* :ghpull:`19579`: Backport PR #19567 on branch v3.4.x (DOC: fix typos)
* :ghpull:`19456`: Doc implement reredirects
* :ghpull:`19567`: DOC: fix typos
* :ghpull:`19542`: Backport PR #19532 on branch v3.4.x (Add note on interaction between text wrapping and bbox_inches='tight')
* :ghpull:`19549`: Backport PR #19545 on branch v3.4.x (Replace references to pygtk by pygobject in docs.)
* :ghpull:`19546`: Move unrendered README.wx to thirdpartypackages/index.rst.
* :ghpull:`19545`: Replace references to pygtk by pygobject in docs.
* :ghpull:`19532`: Add note on interaction between text wrapping and bbox_inches='tight'
* :ghpull:`19541`: MAINT: fix typo from #19438
* :ghpull:`19480`: Fix CallbackRegistry memory leak
* :ghpull:`19539`: In scatter, fix single rgb edgecolors handling
* :ghpull:`19438`: FIX: restore creating new axes via plt.subplot with different kwargs
* :ghpull:`18436`: Sync 3D errorbar with 2D
* :ghpull:`19472`: Fix default label visibility for top-or-left-labeled shared subplots().
* :ghpull:`19496`: MNT: Restore auto-adding Axes3D to their parent figure on init
* :ghpull:`19533`: Clarify the animated property and reword blitting tutorial a bit
* :ghpull:`19146`: Fix #19128: webagg reports incorrect values for non-alphanumeric key events on non-qwerty keyboards
* :ghpull:`18068`: Add note on writing binary formats to stdout using savefig()
* :ghpull:`19507`: FIX: ensure we import when the user cwd does not exist
* :ghpull:`19413`: FIX: allow add option for Axes3D(fig)
* :ghpull:`19498`: Dedupe implementations of {XAxis,YAxis}._get_tick_boxes_siblings.
* :ghpull:`19502`: Prefer projection="polar" over polar=True.
* :ghpull:`18480`: Clarify color priorities in collections
* :ghpull:`19501`: Fix text position with usetex and xcolor
* :ghpull:`19460`: Implement angles for bracket arrow styles.
* :ghpull:`18408`: FIX/API: ``fig.canvas.draw`` always updates internal state
* :ghpull:`19504`: Remove remaining references to Travis CI
* :ghpull:`13358`: 3D margins consistency  for mplot3d (isometric projection)
* :ghpull:`19529`: Simplify checking for tex packages.
* :ghpull:`19516`: Ignore files from annotate coverage reports
* :ghpull:`19500`: Remove workaround for numpy<1.16, and update version check.
* :ghpull:`19518`: Skip setting up a tmpdir in tests that don't need one.
* :ghpull:`19514`: DOC: add fixed-aspect colorbar examples
* :ghpull:`19511`: Clarify axes.autolimit_mode rcParam.
* :ghpull:`19503`: Fix tight_layout() on "canvasless" figures.
* :ghpull:`19410`: Set the GTK background color to white.
* :ghpull:`19497`: Add overset/underset whatsnew entry
* :ghpull:`19490`: Fix error message in plt.close().
* :ghpull:`19461`: Move ToolManager warnings to rcParam validator
* :ghpull:`19488`: Prefer ``tr1-tr2`` to ``tr1+tr2.inverted()``.
* :ghpull:`19485`: fix regression of axline behavior with non-linear scales
* :ghpull:`19314`: Fix over/under mathtext symbols
* :ghpull:`19468`: Include tex output in pdf LatexError.
* :ghpull:`19478`: Fix trivial typo in error message.
* :ghpull:`19449`: Switch array-like (M, N) to (M, N) array-like.
* :ghpull:`19459`: Merge v3.3.4 into master
* :ghpull:`18746`: Make figure parameter optional when constructing canvases.
* :ghpull:`19455`: Add note that pyplot cannot be used for 3D.
* :ghpull:`19457`: Use absolute link for discourse
* :ghpull:`19440`: Slightly reorganize api docs.
* :ghpull:`19344`: Improvements to Docs for new contributors
* :ghpull:`19435`: Replace gtk3 deprecated APIs that have simple replacements.
* :ghpull:`19452`: Fix the docstring of draw_markers to match the actual behavior.
* :ghpull:`19448`: Remove unnecessary facecolor cache in Patch3D.
* :ghpull:`19396`: CI: remove win prerelease azure + add py39
* :ghpull:`19426`: Support empty stairs.
* :ghpull:`19399`: Fix empty Poly3DCollections
* :ghpull:`19416`: fixes TypeError constructor returned NULL in wayland session
* :ghpull:`19439`: Move cheatsheet focus to the cheatsheets away
* :ghpull:`19425`: Add units to bar_label padding documentation.
* :ghpull:`19422`: Style fixes to triintepolate docs.
* :ghpull:`19421`: Switch to documenting generic collections in lowercase.
* :ghpull:`19411`: DOC: fix incorrect parameter names
* :ghpull:`19387`: Fix CSS table header layout
* :ghpull:`18683`: Better document font.<generic-family> rcParams entries.
* :ghpull:`19418`: BF: DOCS: fix slash for windows in conf.py
* :ghpull:`18544`: REORG: JoinStyle and CapStyle classes
* :ghpull:`19415`: Make TaggedValue in basic_units a sequence
* :ghpull:`19412`: DOC: correct off by one indentation.
* :ghpull:`19407`: Improve doc of default labelpad.
* :ghpull:`19373`: test for align_ylabel bug with constrained_layout
* :ghpull:`19347`: os.environ-related cleanups.
* :ghpull:`19319`: DOC: make canonical version stable
* :ghpull:`19395`: wx: Use integers in more places
* :ghpull:`17850`: MNT: set the facecolor of nofill markers
* :ghpull:`19334`: Fix qt backend on mac big sur
* :ghpull:`19394`: Don't allow pyzmq 22.0.0 on AppVeyor.
* :ghpull:`19367`: Deprecate imread() reading from URLs
* :ghpull:`19341`: MarkerStyle is considered immutable
* :ghpull:`19337`: Move sphinx extension files into mpl-data.
* :ghpull:`19389`: Temporarily switch intersphinx to latest pytest.
* :ghpull:`19390`: Doc: Minor formatting
* :ghpull:`19383`: Always include sample_data in installs.
* :ghpull:`19378`: Modify indicate_inset default label value
* :ghpull:`19357`: Shorten/make more consistent the half-filled marker definitions.
* :ghpull:`18649`: Deprecate imread() reading from URLs
* :ghpull:`19370`: Force classic ("auto") date converter in classic style.
* :ghpull:`19364`: Fix trivial doc typos.
* :ghpull:`19359`: Replace use of pyplot with OO api in some examples
* :ghpull:`19342`: FIX: fix bbox_inches=tight and constrained layout bad interaction
* :ghpull:`19350`: Describe how to test regular installations of Matplotlib
* :ghpull:`19332`: Prefer concatenate to h/vstack in simple cases.
* :ghpull:`19340`: Remove the deprecated rcParams["datapath"].
* :ghpull:`19326`: Whitespace in Choosing Colormaps tutorial plots
* :ghpull:`16417`: Deprecate rcParams["datapath"] in favor of mpl.get_data_path().
* :ghpull:`19336`: Revert "Deprecate setting Line2D's pickradius via set_picker."
* :ghpull:`19153`: MNT: Remove deprecated axes kwargs collision detection (version 2)
* :ghpull:`19330`: Remove register storage class from Agg files.
* :ghpull:`19324`: Improve FT2Font docstrings.
* :ghpull:`19328`: Explain annotation behavior when used in conjunction with arrows
* :ghpull:`19329`: Fix building against system qhull
* :ghpull:`19331`: Skip an ImageMagick test if ffmpeg is unavailable.
* :ghpull:`19333`: Fix PGF with special character paths.
* :ghpull:`19322`: Improve docs of _path C-extension.
* :ghpull:`19317`: Pin to oldest supported PyQt on minver CI instance.
* :ghpull:`19315`: Update the markers part of matplotlib.pyplot.plot document (fix issue #19274)
* :ghpull:`18978`: API: Remove deprecated axes kwargs collision detection
* :ghpull:`19306`: Fix some packaging issues
* :ghpull:`19291`: Cleanup code for format processing
* :ghpull:`19316`: Simplify X11 checking for Qt.
* :ghpull:`19287`: Speedup LinearSegmentedColormap.from_list.
* :ghpull:`19293`: Fix some docstring interpolations
* :ghpull:`19313`: Add missing possible return value to docs of get_verticalalignment()
* :ghpull:`18916`: Add overset and underset support for mathtext
* :ghpull:`18126`: FIX: Allow deepcopy on norms and scales
* :ghpull:`19281`: Make all transforms copiable (and thus scales, too).
* :ghpull:`19294`: Deprecate project argument to Line3DCollection.draw.
* :ghpull:`19307`: DOC: remove stray assignment in "multiple legends" example
* :ghpull:`19303`: Extended the convolution filter for correct dilation
* :ghpull:`19261`: Add machinery for png-only, single-font mathtext tests.
* :ghpull:`16571`: Update Qhull to 2019.1 reentrant version
* :ghpull:`16720`: Download qhull at build-or-sdist time.
* :ghpull:`18653`: ENH: Add func norm
* :ghpull:`19272`: Strip irrelevant information from testing docs
* :ghpull:`19298`: Fix misplaced colon in bug report template.
* :ghpull:`19297`: Clarify return format of Line2D.get_data.
* :ghpull:`19277`: Warn on redundant definition of plot properties
* :ghpull:`19278`: Cleanup and document _plot_args()
* :ghpull:`19282`: Remove the unused TransformNode._gid.
* :ghpull:`19264`: Expand on slider_demo example
* :ghpull:`19244`: Move cbook._check_isinstance() to _api.check_isinstance()
* :ghpull:`19273`: Use proper pytest functionality for warnings and exceptions
* :ghpull:`19262`: more robust check for enter key in TextBox
* :ghpull:`19249`: Clarify Doc for Secondary axis, ad-hoc example
* :ghpull:`19248`: Make return value of _get_patch_verts always an array.
* :ghpull:`19247`: Fix markup for mplot3d example.
* :ghpull:`19216`: Ignore non-draw codes when calculating path extent
* :ghpull:`19215`: Collect information for setting up a development environment
* :ghpull:`19210`: Fix creation of AGG images bigger than 1024**3 pixels
* :ghpull:`18933`: Set clip path for PostScript texts.
* :ghpull:`19162`: Deprecate cbook.warn_deprecated and move internal calls to _api.warn_deprecated
* :ghpull:`16391`: Re-write sym-log-norm
* :ghpull:`19240`: FIX: process lists for inverse norms
* :ghpull:`18737`: Fix data cursor for images with additional transform
* :ghpull:`18642`: Propagate minpos from Collections to Axes.datalim
* :ghpull:`19242`: Update first occurrence of QT to show both 4 and 5
* :ghpull:`19231`: Add reference section to all statistics examples
* :ghpull:`19217`: Request an autoscale at the end of ax.pie()
* :ghpull:`19176`: Deprecate additional positional args to plot_{surface,wireframe}.
* :ghpull:`19063`: Give plot_directive output a ``max-width: 100%``
* :ghpull:`19187`: Support callable for formatting of Sankey labels
* :ghpull:`19220`: Remove one TOC level from the release guide
* :ghpull:`19212`: MNT: try to put more whitespace in welcome message
* :ghpull:`19155`: Consolidated the Install from Source docs
* :ghpull:`19208`: added version ask/hint to issue templates, grammar on pr bot
* :ghpull:`19185`: Document Triangulation.triangles
* :ghpull:`19181`: Remove unused imports
* :ghpull:`19207`: Fix Grouper example code
* :ghpull:`19204`: Clarify Date Format Example
* :ghpull:`19200`: Fix incorrect statement regarding test images cache size.
* :ghpull:`19198`: Fix link in contrbuting docs
* :ghpull:`19196`: Fix PR welcome action
* :ghpull:`19188`: Cleanup comparision between X11/CSS4 and xkcd colors
* :ghpull:`19194`: Fix trivial quiver doc typo.
* :ghpull:`19180`: Fix Artist.remove_callback()
* :ghpull:`19192`: Fixed part of Issue - #19100, changed documentation for axisartist
* :ghpull:`19179`: Check that no new figures are created in image comparison tests
* :ghpull:`19184`: Minor doc cleanup
* :ghpull:`19093`: DOCS: Specifying Colors tutorial format & arrange
* :ghpull:`17107`: Add Spines class as a container for all Axes spines
* :ghpull:`18829`: Create a RangeSlider widget
* :ghpull:`18873`: Getting Started GSoD
* :ghpull:`19175`: Fix axes direction for a floating axisartist
* :ghpull:`19130`: DOC: remove reference to 2.2.x branches from list of active branches
* :ghpull:`15212`: Dedupe window-title setting by moving it to FigureManagerBase.
* :ghpull:`19172`: Fix 3D surface example bug for non-square grid
* :ghpull:`19173`: Ensure backend tests are skipped if unavailable
* :ghpull:`19170`: Clarify meaning of facecolors for LineCollection
* :ghpull:`18310`: Add 3D stem plot
* :ghpull:`18127`: Implement lazy autoscaling in mplot3d.
* :ghpull:`16178`: Add multiple label support for Axes.plot()
* :ghpull:`19151`: Deprecate @cbook.deprecated and move internal calls to @_api.deprecated
* :ghpull:`19088`: Ignore CLOSEPOLY vertices when computing dataLim from patches
* :ghpull:`19166`: CI: add github action to post to first-time PRs openers
* :ghpull:`19124`: GOV/DOC: add section to docs on triaging and triage team
* :ghpull:`15602`: Add an auto-labeling helper function for bar charts
* :ghpull:`19164`: docs: fix simple typo, backslahes -> backslashes
* :ghpull:`19161`: Simplify test_backend_pdf::test_multipage_properfinalize.
* :ghpull:`19141`: FIX: suppress offset text in ConciseDateFormatter when largest scale is in years
* :ghpull:`19150`: Move from @cbook._classproperty to @_api.classproperty
* :ghpull:`19144`: Move from cbook._warn_external() to _api.warn_external()
* :ghpull:`19119`: Don't lose unit change handlers when pickling/unpickling.
* :ghpull:`19145`: Move from cbook._deprecate_*() to _api.deprecate_*()
* :ghpull:`19123`: Use Qt events to refresh pixel ratio.
* :ghpull:`19056`: Support raw/rgba frame format in FFMpegFileWriter
* :ghpull:`19140`: Fix the docstring of suptitle/subxlabel/supylabel.
* :ghpull:`19132`: Normalize docstring interpolation label for kwdoc() property lists
* :ghpull:`19134`: Switch internal API function calls from cbook to _api
* :ghpull:`19138`: Added non-code contributions to incubator docs
* :ghpull:`19125`: DOC: contributor incubator
* :ghpull:`18948`: DOC: Fix latexpdf build
* :ghpull:`18753`: Remove several more deprecations
* :ghpull:`19083`: Fix headless tests on Wayland.
* :ghpull:`19127`: Cleanups to webagg & friends.
* :ghpull:`19122`: FIX/DOC - make Text doscstring interp more easily searchable
* :ghpull:`19106`: Support setting rcParams["image.cmap"] to Colormap instances.
* :ghpull:`19085`: FIX: update a transfrom from transFigure to transSubfigure
* :ghpull:`19117`: Rename a confusing variable.
* :ghpull:`18647`: Axes.axline: implement support transform argument (for points but not slope)
* :ghpull:`16220`: Fix interaction with unpickled 3d plots.
* :ghpull:`19059`: Support blitting in webagg backend
* :ghpull:`19107`: Update pyplot.py
* :ghpull:`19044`: Cleanup Animation frame_formats.
* :ghpull:`19087`: FIX/TST: recursively remove ticks
* :ghpull:`19094`: Suppress -Wunused-function about _import_array when compiling tkagg.cpp.
* :ghpull:`19092`: Fix use transform mplot3d
* :ghpull:`19097`: DOC: add FuncScale to set_x/yscale
* :ghpull:`19089`: ENH: allow passing a scale instance to set_scale
* :ghpull:`19086`: FIX: add a default scale to Normalize
* :ghpull:`19073`: Mention in a few more places that artists default to not-pickable.
* :ghpull:`19079`: Remove incorrect statement about ``hist(..., log=True)``.
* :ghpull:`19076`: Small improvements to aitoff projection.
* :ghpull:`19071`: DOC: Add 'blackman' to list of imshow interpolations
* :ghpull:`17524`: ENH: add supxlabel and supylabel
* :ghpull:`18840`: Add tutorial about autoscaling
* :ghpull:`19042`: Simplify GridHelper invalidation.
* :ghpull:`19048`: Remove _draw_{ticks2,label2}; skip extents computation in _update_ticks.
* :ghpull:`18983`: Pass norm argument to spy
* :ghpull:`18802`: Add code of conduct
* :ghpull:`19060`: Fix broken link in Readme
* :ghpull:`18569`: More generic value snapping for Slider widgets
* :ghpull:`19055`: Fix kwargs handling in AnnotationBbox
* :ghpull:`19041`: Reword docs for exception_handler in CallbackRegistry.
* :ghpull:`19046`: Prepare inlining MovieWriter.cleanup() into MovieWriter.finish().
* :ghpull:`19050`: Better validate tick direction.
* :ghpull:`19038`: Fix markup in interactive figures doc.
* :ghpull:`19035`: grid_helper_curvelinear cleanups.
* :ghpull:`19022`: Update event handling docs.
* :ghpull:`19025`: Remove individual doc entries for some methods Axes inherits from Artist
* :ghpull:`19018`: Inline and optimize ContourLabeler.get_label_coords.
* :ghpull:`19019`: Deprecate never used ``resize_callback`` param to FigureCanvasTk.
* :ghpull:`19023`: Cleanup comments/docs in backend_macosx, backend_pdf.
* :ghpull:`19020`: Replace mathtext assertions by unpacking.
* :ghpull:`19024`: Dedupe docs of GridSpec.subplots.
* :ghpull:`19013`: Improve docs of _get_packed_offsets, _get_aligned_offsets.
* :ghpull:`19009`: Compactify the implementation of ContourLabeler.add_label_near.
* :ghpull:`19008`: Deprecate event processing wrapper methods on FigureManagerBase.
* :ghpull:`19015`: Better document multilinebaseline (and other small TextArea fixes)
* :ghpull:`19012`: Common ``__init__`` for VPacker and HPacker.
* :ghpull:`19014`: Support normalize_kwargs(None) (== {}).
* :ghpull:`19010`: Inline _print_pdf_to_fh, _print_png_to_fh.
* :ghpull:`19003`: Remove reference to unicode-math in pgf preamble.
* :ghpull:`18847`: Cleanup interactive pan/zoom.
* :ghpull:`18868`: Expire _make_keyword_only deprecations from 3.2
* :ghpull:`18903`: Move cbook._suppress_matplotlib_deprecation_warning() from cbook to _api
* :ghpull:`18997`: Micro-optimize check_isinstance.
* :ghpull:`18995`: Fix the doc of GraphicsContextBase.set_clip_rectangle.
* :ghpull:`18996`: Fix API change message from #18989
* :ghpull:`18993`: Don't access private renderer attributes in tkagg blit.
* :ghpull:`18980`: DOC: fix typos
* :ghpull:`18989`: The Artist property rasterized cannot be None anymore
* :ghpull:`18987`: Fix punctuation in doc.
* :ghpull:`18894`: Use selectfont instead of findfont + scalefont + setfont in PostScript.
* :ghpull:`18990`: Minor cleanup of categorical example
* :ghpull:`18947`: Strictly increasing check with test coverage for streamplot grid
* :ghpull:`18981`: Cleanup Firefox SVG example.
* :ghpull:`18969`: Improve documentation on rasterization
* :ghpull:`18876`: Support fully-fractional HiDPI added in Qt 5.14.
* :ghpull:`18976`: Simplify contour_label_demo.
* :ghpull:`18975`: Fix typing error in pyplot's docs
* :ghpull:`18956`: Document rasterized parameter in pcolormesh() explicitly
* :ghpull:`18968`: Fix clabel() for backends without canvas.get_renderer()
* :ghpull:`18949`: Deprecate AxisArtist.ZORDER
* :ghpull:`18830`: Pgf plotting
* :ghpull:`18967`: Remove unnecessary calls to lower().
* :ghpull:`18910`: Remove Artist.eventson and Container.eventson
* :ghpull:`18964`: Remove special-casing for PostScript dpi in pyplot.py.
* :ghpull:`18961`: Replace sphinx-gallery-specific references by standard :doc: refs.
* :ghpull:`18955`: added needs_ghostscript; skip test
* :ghpull:`18857`: Improve hat graph example
* :ghpull:`18943`: Small cleanup to StepPatch._update_path.
* :ghpull:`18937`: Cleanup stem docs and simplify implementation.
* :ghpull:`18895`: Introduce variable since which mpl version the minimal python version
* :ghpull:`18927`: Improve warning message for missing font family specified via alias.
* :ghpull:`18930`: Document limitations of Path.contains_point() and clarify its semantics
* :ghpull:`18892`: Fixes MIME type for svg frame_format in HTMLWriter.
* :ghpull:`18938`: Edit usetex docs.
* :ghpull:`18923`: Use lambdas to prevent gc'ing and deduplication of widget callbacks.
* :ghpull:`16171`: Contour fixes/improvements
* :ghpull:`18901`: Simplify repeat_delay and fix support for it when using iterable frames.
* :ghpull:`18911`: Added Aria-Labels to all inputs with tooltips for generated HTML animations: issue #17910
* :ghpull:`18912`: Use CallbackRegistry for {Artist,Collection}.add_callback.
* :ghpull:`18919`: DOCS: fix contourf hatch demo legend
* :ghpull:`18905`: Make docs fail on Warning (and fix all existing warnings)
* :ghpull:`18763`: Single-line string notation for subplot_mosaic
* :ghpull:`18902`: Move ImageMagick version exclusion to _get_executable_info.
* :ghpull:`18915`: Remove hard-coded API removal version mapping.
* :ghpull:`18914`: Fix typo in error message: interable -> iterable.
* :ghpull:`15065`: step-between as drawstyle [Alternative approach to #15019]
* :ghpull:`18532`: Consistent behavior of draw_if_interactive across interactive backends.
* :ghpull:`18908`: Rework interactive backends tests.
* :ghpull:`18817`: MAINT: deprecate validCap, validJoin
* :ghpull:`18907`: Unmark wx-threading-test-failure as strict xfail.
* :ghpull:`18896`: Add note on keeping a reference to animation docstrings
* :ghpull:`18862`: Resolve mathtext.fontset at FontProperties creation time.
* :ghpull:`18877`: Remove fallback to nonexistent setDevicePixelRatioF.
* :ghpull:`18823`: Move from @cbook.deprecated to @_api.deprecated
* :ghpull:`18889`: Switch Tk to using PNG files for buttons
* :ghpull:`18888`: Update version of Matplotlib that needs Python 3.7
* :ghpull:`18867`: Remove "Demo" from example titles (part 2)
* :ghpull:`18863`: Reword FontProperties docstring.
* :ghpull:`18866`: Fix RGBAxes docs markup.
* :ghpull:`18874`: Slightly compress down the pgf tests.
* :ghpull:`18565`: Make Tkagg blit thread safe
* :ghpull:`18858`: Remove "Demo" from example titles
* :ghpull:`15177`: Bind WX_CHAR_HOOK instead of WX_KEY_DOWN for wx key_press_event.
* :ghpull:`18821`: Simplification of animated histogram example
* :ghpull:`18844`: Fix sphinx formatting issues
* :ghpull:`18834`: Add cross-references to Artist tutorial
* :ghpull:`18827`: Update Qt version in event handling docs.
* :ghpull:`18825`: Warn in pgf backend when unknown font is requested.
* :ghpull:`18822`: Remove deprecate
* :ghpull:`18733`: Time series histogram plot example
* :ghpull:`18812`: Change LogFormatter coeff computation
* :ghpull:`18820`: Fix axes -> Axes changes in figure.py
* :ghpull:`18657`: Move cbook.deprecation to _api.deprecation
* :ghpull:`18818`: Clarify behavior of CallbackRegistry.disconnect with nonexistent cids.
* :ghpull:`18811`: DOC Use 'Axes' instead of 'axes' in figure.py
* :ghpull:`18814`: [Example] update Anscombe's Quartet
* :ghpull:`18806`: DOC Use 'Axes' in _axes.py docstrings
* :ghpull:`18799`: Remove unused wx private attribute.
* :ghpull:`18772`: BF: text not drawn shouldn't count for tightbbox
* :ghpull:`18793`: Consistently use axs to refer to a set of Axes (v2)
* :ghpull:`18792`: Cmap cleanup
* :ghpull:`18798`: Deprecate ps.useafm for mathtext
* :ghpull:`18302`: Remove 3D attributes from renderer
* :ghpull:`18795`: Make inset indicator more visible in the example
* :ghpull:`18781`: Update description of web application server example.
* :ghpull:`18791`: Fix documentation of edgecolors precedence for scatter()
* :ghpull:`14645`: Add a helper to copy a colormap and set its extreme colors.
* :ghpull:`17709`: Enh: SymNorm for normalizing symmetrical data around a center
* :ghpull:`18780`: CI: pydocstyle>=5.1.0, flake8-docstrings>=1.4.0 verified to work
* :ghpull:`18200`: Unpin pydocstyle
* :ghpull:`18767`: Turn "How to use Matplotlib in a web application server" into a sphinx-gallery example
* :ghpull:`18765`: Remove some unused tick private attributes.
* :ghpull:`18688`: Shorter property deprecation.
* :ghpull:`18748`: Allow dependabot to check GitHub actions daily
* :ghpull:`18529`: Synchronize view limits of shared axes after setting ticks
* :ghpull:`18575`: Colorbar grid position
* :ghpull:`18744`: DOCS: document log locator's ``numticks``
* :ghpull:`18687`: Deprecate GraphicsContextPS.
* :ghpull:`18706`: Consistently use 3D, 2D, 1D for dimensionality
* :ghpull:`18702`: _make_norm_from_scale fixes.
* :ghpull:`18558`: Support usetex in date Formatters
* :ghpull:`18493`: MEP22 toolmanager set axes navigate_mode
* :ghpull:`18730`: TST: skip if known-bad version of imagemagick
* :ghpull:`18583`: Support binary comms in nbagg.
* :ghpull:`18728`: Disable mouseover info for NonUniformImage.
* :ghpull:`18710`: Deprecate cla() methods of Axis and Spines in favor of clear()
* :ghpull:`18719`: Added the trace plot of the end point
* :ghpull:`18729`: Use ax.add_image rather than ax.images.append in NonUniformImage example
* :ghpull:`18707`: Use "Return whether ..." docstring for functions returning bool
* :ghpull:`18724`: Remove extra newlines in contour(f) docs.
* :ghpull:`18696`: removed glossary
* :ghpull:`18721`: Remove the use_cmex font fallback mechanism.
* :ghpull:`18680`: wx backend API cleanups.
* :ghpull:`18709`: Use attributes Axes.x/yaxis instead of Axes.get_x/yaxis()
* :ghpull:`18712`: Shorten GraphicsContextWx.get_wxcolour.
* :ghpull:`18708`: Individualize contour and contourf docstrings
* :ghpull:`18663`: fix: keep baseline scale to baseline 0 even if set to None
* :ghpull:`18704`: Fix docstring of Axes.cla()
* :ghpull:`18675`: Merge ParasiteAxesAuxTransBase into ParasiteAxesBase.
* :ghpull:`18651`: Allow Type3 subsetting of otf fonts in pdf backend.
* :ghpull:`17396`: Improve headlessness detection for backend selection.
* :ghpull:`17737`: Deprecate BoxStyle._Base.
* :ghpull:`18655`: Sync SubplotDivider API with SubplotBase API changes.
* :ghpull:`18582`: Shorten mlab tests.
* :ghpull:`18599`: Simplify wx rubberband drawing.
* :ghpull:`18671`: DOC: fix autoscale docstring
* :ghpull:`18637`: BLD: sync build and run time numpy pinning
* :ghpull:`18693`: Also fix tk key mapping, following the same strategy as for gtk.
* :ghpull:`18691`: Cleanup sample_data.
* :ghpull:`18697`: Catch TypeError when validating rcParams types.
* :ghpull:`18537`: Create security policy
* :ghpull:`18356`: ENH: Subfigures
* :ghpull:`18694`: Document limitations on ``@deprecated`` with multiple-inheritance.
* :ghpull:`18669`: Rework checks for old macosx
* :ghpull:`17791`: More accurate handling of unicode/numpad input in gtk3 backends.
* :ghpull:`18679`: Further simplify pgf tmpdir cleanup.
* :ghpull:`18685`: Cleanup pgf examples
* :ghpull:`18682`: Small API cleanups to plot_directive.
* :ghpull:`18686`: Numpydocify setp.
* :ghpull:`18684`: Small simplification to triage_tests.py.
* :ghpull:`17832`: pdf: Support setting URLs on Text objects
* :ghpull:`18674`: Remove accidentally added swapfile.
* :ghpull:`18673`: Small cleanups to parasite axes.
* :ghpull:`18536`: axes3d panning
* :ghpull:`18667`: TST: Lock cache directory during cleanup.
* :ghpull:`18672`: Created Border for color examples
* :ghpull:`18661`: Define GridFinder.{,inv\_}transform_xy as normal methods.
* :ghpull:`18656`: Fix some missing references.
* :ghpull:`18659`: Small simplifications to BboxImage.
* :ghpull:`18511`: feat: StepPatch to take array as baseline
* :ghpull:`18646`: Support activating figures with plt.figure(figure_instance).
* :ghpull:`18370`: Move PostScript Type3 subsetting to pure python.
* :ghpull:`18645`: Simplify Colorbar.set_label, inline Colorbar._edges.
* :ghpull:`18633`: Support linestyle='none' in Patch
* :ghpull:`18527`: Fold ColorbarPatch into Colorbar, deprecate colorbar_factory.
* :ghpull:`17480`: Regenerate background when RectangleSelector active-flag is set back on.
* :ghpull:`18626`: Specify case when parameter is ignored.
* :ghpull:`18634`: Fix typo in warning message.
* :ghpull:`18603`: bugfix #18600 by using the MarkerStyle copy constructor
* :ghpull:`18628`: Remove outdate comment about canvases with no manager attribute.
* :ghpull:`18591`: Deprecate MathTextParser("bitmap") and associated APIs.
* :ghpull:`18617`: Remove special styling of sidebar heading
* :ghpull:`18616`: Improve instructions for building the docs
* :ghpull:`18623`: Provide a 'cursive' font present in Windows' default font set.
* :ghpull:`18579`: Fix stairs() tests
* :ghpull:`18618`: Correctly separate two fantasy font names.
* :ghpull:`18610`: DOCS: optional doc building dependencies
* :ghpull:`18601`: Simplify Rectangle and RegularPolygon.
* :ghpull:`18573`: add_subplot(..., axes_class=...) for more idiomatic mpl_toolkits usage.
* :ghpull:`18605`: Correctly sync state of wx toolbar buttons when triggered by keyboard.
* :ghpull:`18606`: Revert "FIX: pin pytest"
* :ghpull:`18587`: Fix docstring of zaxis_date.
* :ghpull:`18589`: Factor out pdf Type3 glyph drawing.
* :ghpull:`18586`: Text cleanups.
* :ghpull:`18594`: FIX: pin pytest
* :ghpull:`18577`: Random test cleanups
* :ghpull:`18578`: Merge all axisartist axis_direction demos together.
* :ghpull:`18588`: Use get_x/yaxis_transform more.
* :ghpull:`18585`: FIx precision in pie and donut example
* :ghpull:`18564`: Prepare for merging SubplotBase into AxesBase.
* :ghpull:`15127`: ENH/API: improvements to register_cmap
* :ghpull:`18576`: DOC: prefer colormap over color map
* :ghpull:`18340`: Colorbar grid postion
* :ghpull:`18568`: Added Reporting to code_of_conduct.md
* :ghpull:`18555`: Convert _math_style_dict into an Enum.
* :ghpull:`18567`: Replace subplot(ijk) calls by subplots(i, j)
* :ghpull:`18554`: Replace some usages of plt.subplot() by plt.subplots() in tests
* :ghpull:`18556`: Accept same types to errorevery as markevery
* :ghpull:`15932`: Use test cache for test result images too.
* :ghpull:`18557`: DOC: Add an option to disable Google Analytics.
* :ghpull:`18560`: Remove incorrect override of pcolor/contour in parasite axes.
* :ghpull:`18566`: Use fig, ax = plt.subplots() in tests (part 2)
* :ghpull:`18553`: Use fig, ax = plt.subplots() in tests
* :ghpull:`11748`: get_clip_path checks for nan
* :ghpull:`8987`: Tick formatter does not support grouping with locale
* :ghpull:`18552`: Change \*subplot(111, ...) to \*subplot(...) as 111 is the default.
* :ghpull:`18189`: FIX: Add get/set methods for 3D collections
* :ghpull:`18430`: FIX: do not reset ylabel ha when changing position
* :ghpull:`18515`: Remove deprecated backend code.
* :ghpull:`17935`: MNT: improve error messages on bad pdf metadata input
* :ghpull:`18525`: Add Text3D position getter/setter
* :ghpull:`18542`: CLEANUP: validate join/cap style centrally
* :ghpull:`18501`: TST: Add test for _repr_html_
* :ghpull:`18528`: Deprecate TextArea minimumdescent.
* :ghpull:`18543`: Documentation improvements for stairs()
* :ghpull:`18531`: Unit handling improvements
* :ghpull:`18523`: Don't leak file paths into PostScript metadata
* :ghpull:`18526`: Templatize _image.resample to deduplicate it.
* :ghpull:`18522`: Remove mlab, toolkits, and misc deprecations
* :ghpull:`18516`: Remove deprecated font-related things.
* :ghpull:`18535`: Add a code of conduct link to github
* :ghpull:`17521`: Remove font warning when legend is added while using Tex
* :ghpull:`18517`: Include kerning when outputting pdf strings.
* :ghpull:`18521`: Inline some helpers in ColorbarBase.
* :ghpull:`18512`: Private api2
* :ghpull:`18519`: Correctly position text with nonzero descent with afm fonts / ps output.
* :ghpull:`18513`: Remove Locator.autoscale.
* :ghpull:`18497`: Merge v3.3.x into master
* :ghpull:`18502`: Remove the deprecated matplotlib.cm.revcmap()
* :ghpull:`18506`: Inline ScalarFormatter._formatSciNotation.
* :ghpull:`18455`: Fix BoundingBox in EPS files.
* :ghpull:`18275`: feat: StepPatch
* :ghpull:`18507`: Fewer "soft" dependencies on LaTeX packages.
* :ghpull:`18378`: Deprecate public access to many mathtext internals.
* :ghpull:`18494`: Move cbook._check_in_list() to _api.check_in_list()
* :ghpull:`18423`: 2-D array RGB and RGBA values not understood in plt.plot()
* :ghpull:`18492`: Fix doc build failure due to #18440
* :ghpull:`18435`: New environment terminal language
* :ghpull:`18456`: Reuse InsetLocator to make twinned axes follow their parents.
* :ghpull:`18440`: List existing rcParams in rcParams docstring.
* :ghpull:`18453`: FIX: allow manually placed axes in constrained_layout
* :ghpull:`18473`: Correct link to widgets examples
* :ghpull:`18466`: Remove unnecessary autoscale handling in hist().
* :ghpull:`18465`: Don't modify bottom argument in place in stacked histograms.
* :ghpull:`18468`: Cleanup multiple_yaxis_with_spines example.
* :ghpull:`18463`: Improve formatting of defaults in docstrings.
* :ghpull:`6268`: ENH: support alpha arrays in collections
* :ghpull:`18449`: Remove the private Axes._set_position.
* :ghpull:`18460`: DOC: example gray level in 'Specifying Colors' tutorial
* :ghpull:`18426`: plot directive: caption-option
* :ghpull:`18444`: Support doubleclick in webagg/nbagg
* :ghpull:`12518`: Example showing scale-invariant angle arc
* :ghpull:`18446`: Normalize properties passed to ToolHandles.
* :ghpull:`18445`: Warn if an animation is gc'd before doing anything.
* :ghpull:`18452`: Move Axes ``__repr__`` from Subplot to AxesBase.
* :ghpull:`15374`: Replace _prod_vectorized by @-multiplication.
* :ghpull:`13643`: RecangleSelector constructor does not handle marker_props
* :ghpull:`18403`: DOC: Remove related topics entries from the sidebar
* :ghpull:`18421`: Move {get,set}_{x,y}label to _AxesBase.
* :ghpull:`18429`: DOC: fix date example
* :ghpull:`18353`: DOCS: describe shared axes behavior with units
* :ghpull:`18420`: Always strip out date in postscript's test_savefig_to_stringio.
* :ghpull:`18422`: Decrease output when running ``pytest -s``.
* :ghpull:`18418`: Cleanup menu example
* :ghpull:`18419`: Avoid demo'ing passing kwargs to gca().
* :ghpull:`18372`: DOC: Fix various missing references and typos
* :ghpull:`18400`: Clarify argument name in constrained_layout error message
* :ghpull:`18384`: Clarification in ArtistAnimation docstring
* :ghpull:`17892`: Add earlier color validation
* :ghpull:`18367`: Support horizontalalignment in TextArea/AnchoredText.
* :ghpull:`18362`: DOC: Add some types to Returns entries.
* :ghpull:`18365`: move canvas focus after toomanager initialization
* :ghpull:`18360`: Add example for specifying figure size in different units
* :ghpull:`18341`: DOCS: add action items to PR template
* :ghpull:`18349`: Remove redundant angles in ellipse demo.
* :ghpull:`18145`: Created a parameter fontset that can be used in each Text element
* :ghpull:`18344`: More nouns/imperative forms in docs.
* :ghpull:`18308`: Synchronize units change in Axis.set_units for shared axis
* :ghpull:`17494`: Rewrite of constrained_layout....
* :ghpull:`16646`: update colorbar.py make_axes_gridspec
* :ghpull:`18306`: Fix configure subplots
* :ghpull:`17509`: Fix ``swap_if_landscape`` call in backend_ps
* :ghpull:`18323`: Deleted "Our Favorite Recipes" section and moved the examples.
* :ghpull:`18128`: Change several deprecated symbols in _macosx.m
* :ghpull:`18251`: Merge v3.3.x into master
* :ghpull:`18329`: Change default keymap in toolmanager example.
* :ghpull:`18330`: Dedent rst list.
* :ghpull:`18286`: Fix imshow to work with subclasses of ndarray.
* :ghpull:`18320`: Make Colorbar outline into a Spine.
* :ghpull:`18316`: Safely import pyplot if a GUI framework is already running.
* :ghpull:`18321`: Capture output of CallbackRegistry exception test.
* :ghpull:`17900`: Add getters and _repr_html_ for over/under/bad values of Colormap objects.
* :ghpull:`17930`: Fix errorbar property cycling to match plot.
* :ghpull:`18290`: Remove unused import to fix flake8.
* :ghpull:`16818`: Dedupe implementations of configure_subplots().
* :ghpull:`18284`: TkTimer interval=0 workaround
* :ghpull:`17901`: DOC: Autoreformating of backend/\*.py
* :ghpull:`17291`: Normalize gridspec ratios to lists in the setter.
* :ghpull:`18226`: Use CallbackRegistry in Widgets and some related cleanup
* :ghpull:`18203`: Force locator and formatter inheritence
* :ghpull:`18279`: boxplot: Add conf_intervals reference to notch docs.
* :ghpull:`18276`: Fix autoscaling to exclude inifinite data limits when possible.
* :ghpull:`18261`: Migrate tk backend tests into subprocesses
* :ghpull:`17961`: DOCS: Remove How-to: Contributing
* :ghpull:`18201`: Remove mpl.colors deprecations for 3.4
* :ghpull:`18223`: Added example on how to make packed bubble charts
* :ghpull:`18264`: Fix broken links in doc build.
* :ghpull:`8031`: Add errorbars to mplot3d
* :ghpull:`18187`: Add option to create horizontally-oriented stem plots
* :ghpull:`18250`: correctly autolabel Documentation and Maintenance issues
* :ghpull:`18161`: Add more specific GitHub issue templates
* :ghpull:`18181`: Replace ttconv by plain python for pdf subsetting
* :ghpull:`17371`: add context manager functionality to ion and ioff
* :ghpull:`17789`: Tk backend improvements
* :ghpull:`15532`: Resolve 'text ignores rotational part of transformation' (#698)
* :ghpull:`17851`: Fix Axes3D.add_collection3d issues
* :ghpull:`18205`: Hat graph example
* :ghpull:`6168`: #5856: added option to create vertically-oriented stem plots
* :ghpull:`18202`: Remove mpl.testing deprecations for 3.4
* :ghpull:`18081`: Support scale in ttf composite glyphs
* :ghpull:`18199`: Some cleanup on TickedStroke
* :ghpull:`18190`: Use ``super()`` more in  backends
* :ghpull:`18193`: Allow savefig to save SVGs on FIPS enabled systems #18192
* :ghpull:`17802`: fix FigureManagerTk close behavior if embedded in Tk App
* :ghpull:`15458`: TickedStroke, a stroke style with ticks useful for depicting constraints
* :ghpull:`18178`: DOC: clarify that display space coordinates are not stable
* :ghpull:`18172`: allow webAgg to report middle click events
* :ghpull:`17578`: Search for minus of any font size to get height of tex result
* :ghpull:`17546`: ``func`` argument in ``legend_elements`` with non-monotonically increasing functions
* :ghpull:`17684`: Deprecate passing bytes to FT2Font.set_text.
* :ghpull:`17500`: Tst improve memleak
* :ghpull:`17669`: Small changes to svg font embedding details
* :ghpull:`18095`: Error on unexpected kwargs in scale classes
* :ghpull:`18106`: Copy docstring description from Axes.legend() to Figure.legend()
* :ghpull:`18002`: Deprecate various vector-backend-specific mathtext helpers.
* :ghpull:`18006`: Fix ToolManager inconsistencies with regular toolbar
* :ghpull:`18004`: Typos and docs for mathtext fonts.
* :ghpull:`18133`: DOC: Update paths for moved API/what's new fragments
* :ghpull:`18122`: Document and test legend argument parsing
* :ghpull:`18124`: Fix FuncAnimation._draw_frame exception and testing
* :ghpull:`18125`: pdf: Convert operator list to an Enum.
* :ghpull:`18123`: Cleanup figure title example
* :ghpull:`18121`: Improve rasterization demo
* :ghpull:`18012`: Add explanatory text for rasterization demo
* :ghpull:`18103`: Support data reference for hexbin() parameter C
* :ghpull:`17826`: Add pause() and resume() methods to the base Animation class
* :ghpull:`18090`: Privatize cbook.format_approx.
* :ghpull:`18080`: Reduce numerical precision in Type 1 fonts
* :ghpull:`18044`: Super-ify parts of the code base, part 3
* :ghpull:`18087`: Add a note on working around limit expansion of set_ticks()
* :ghpull:`18071`: Remove deprecated animation code
* :ghpull:`17822`: Check for float values for min/max values to ax{v,h}line
* :ghpull:`18069`: Remove support for multiple-color strings in to_rgba_array
* :ghpull:`18070`: Remove rcsetup deprecations
* :ghpull:`18073`: Remove disable_internet.py
* :ghpull:`18075`: typo in usetex.py example
* :ghpull:`18043`:  Super-ify parts of the code base, part 2
* :ghpull:`18062`: Bump matplotlib.patches coverage
* :ghpull:`17269`: Fix ConciseDateFormatter when plotting a range included in a second
* :ghpull:`18063`: Remove un-used trivial setters and getters
* :ghpull:`18025`: add figpager as a third party package
* :ghpull:`18046`: Discourage references in section headings.
* :ghpull:`18042`: scatter: Raise if unexpected type of ``s`` argument.
* :ghpull:`18028`: Super-ify parts of the code base, part 1
* :ghpull:`18029`: Remove some unused imports.
* :ghpull:`18018`: Cache realpath resolution in font_manager.
* :ghpull:`18013`: Use argumentless ``super()`` more.
* :ghpull:`17988`: add test with -OO
* :ghpull:`17993`: Make inset_axes and secondary_axis picklable.
* :ghpull:`17992`: Shorten tight_bbox.
* :ghpull:`18003`: Deprecate the unneeded Fonts.destroy.
* :ghpull:`16457`: Build lognorm/symlognorm from corresponding scales.
* :ghpull:`17966`: Fix some words
* :ghpull:`17803`: Simplify projection-of-point-on-polyline in contour.py.
* :ghpull:`17699`: raise RuntimeError appropriately for animation update func
* :ghpull:`17954`: Remove another overspecified latex geometry.
* :ghpull:`17948`: Sync Cairo's usetex measurement with base class.
* :ghpull:`17788`: Tighten a bit the RendererAgg API.
* :ghpull:`12443`: Warn in colorbar() when mappable.axes != figure.gca().
* :ghpull:`17926`: Deprecate hatch patterns with invalid values
* :ghpull:`17922`: Rewrite the barcode example
* :ghpull:`17890`: Properly use thin space after math text operator
* :ghpull:`16090`: Change pcolormesh snapping (fixes alpha colorbar/grid issues) [AGG]
* :ghpull:`17842`: Move "Request a new feature" from How-to to Contributing
* :ghpull:`17897`: Force origin='upper' in pyplot.specgram
* :ghpull:`17929`: Improve hatch demo
* :ghpull:`17927`: Remove unnecessary file save during test
* :ghpull:`14896`: Updated doc in images.py by adding direct link to 24-bit stink bug png
* :ghpull:`17909`: frame_format to support all listed by animation writers
* :ghpull:`13569`: Style cleanup to pyplot.
* :ghpull:`17924`: Remove the example "Easily creating subplots"
* :ghpull:`17869`: FIX: new date rcParams weren't being evaluated
* :ghpull:`17921`: Added density and combination hatching examples
* :ghpull:`17159`: Merge consecutive rasterizations
* :ghpull:`17895`: Use indexed color for PNG images in PDF files when possible
* :ghpull:`17894`: DOC: Numpydoc format.
* :ghpull:`17884`: Created Hatch marker styles Demo for Example Gallery
* :ghpull:`17347`: ENH: reuse oldgridspec is possible...
* :ghpull:`17915`: Document that set_ticks() increases view limits if necessary
* :ghpull:`17902`: Fix figure size in path effects guide
* :ghpull:`17899`: Add missing space in cairo error
* :ghpull:`17888`: Add _repr_png_ and _repr_html_ to Colormap objects.
* :ghpull:`17830`: Fix BoundaryNorm for multiple colors and one region
* :ghpull:`17883`: Remove Python 3.6 compatibility shims
* :ghpull:`17889`: Minor doc fixes
* :ghpull:`17879`: Link to style-file example page in style tutorial
* :ghpull:`17876`: Fix description of subplot2grid arguments
* :ghpull:`17856`: Clarify plotnonfinite parameter docs of scatter()
* :ghpull:`17843`: Add fullscreen toggle support to WxAgg backend
* :ghpull:`17022`: ENH: add rcParam for ConciseDate and interval_multiples
* :ghpull:`17799`: Deduplicate attribute docs of ContourSet and its derived classes
* :ghpull:`17847`: Remove overspecified latex geometry.
* :ghpull:`17662`: Mnt drop py36
* :ghpull:`17845`: Fix size of donate button
* :ghpull:`17825`: Add quick-link buttons for contributing
* :ghpull:`17837`: Remove "Reporting a bug or submitting a patch" from How-to
* :ghpull:`17828`: API: treat xunits=None and yunits=None as "default"
* :ghpull:`17839`: Avoid need to lock in dvi generation, to avoid deadlocks.
* :ghpull:`17824`: Improve categorical converter error message
* :ghpull:`17834`: Keep using a single dividers LineCollection instance in colorbar.
* :ghpull:`17838`: Prefer colorbar(ScalarMappable(...)) to ColorbarBase in tutorial.
* :ghpull:`17836`: More precise axes section names in docs
* :ghpull:`17835`: Colorbar cleanups.
* :ghpull:`17727`: FIX: properly handle dates when intmult is true
* :ghpull:`15617`: Dev docs update
* :ghpull:`17819`: Fix typos in tight layout guide
* :ghpull:`17806`: Set colorbar label only in set_label.
* :ghpull:`17265`: Mnt rearrange next api again
* :ghpull:`17808`: Improve docstring of ColorbarBase.set_label()
* :ghpull:`17723`: Deprecate FigureCanvas.{get,set}_window_title.
* :ghpull:`17798`: Fix overindented bullet/enumerated lists.
* :ghpull:`17767`: Allow list of hatches to {bar, barh}
* :ghpull:`17749`: Deprecate ``FancyBboxPatch(..., boxstyle="custom", bbox_transmuter=...)``
* :ghpull:`17783`: DOC: point to bbox static "constructor" functions in set_position
* :ghpull:`17782`: MNT: update mailmap
* :ghpull:`17776`: Changes in the image for test_load_from_url
* :ghpull:`17750`: Soft-deprecate mutation_aspect=None.
* :ghpull:`17780`: Reorganize colorbar docstrings.
* :ghpull:`17778`: Fix whatsnew confusing typo.
* :ghpull:`17748`: Don't use bezier helpers in axisartist.
* :ghpull:`17700`: Remove remnants of macosx old-style toolbar.
* :ghpull:`17753`: Support location="left"/"top" for gridspec-based colorbars.
* :ghpull:`17761`: Update hard-coded results in artist tutorial
* :ghpull:`17728`: Move Win32_{Get,Set}ForegroundWindow to c_internal_utils.
* :ghpull:`17754`: Small cleanups to contour() code.
* :ghpull:`17751`: Deprecate dpi_cor property of FancyArrowPatch.
* :ghpull:`15941`: FontManager fixes.
* :ghpull:`17661`: Issue #17659: set tick color and tick labelcolor independently from rcParams
* :ghpull:`17389`: Don't duplicate docstrings of pyplot-level cmap setters.
* :ghpull:`17555`: Set Win32 AppUserModelId to fix taskbar icons.
* :ghpull:`17726`: Clarify docs of box_aspect()
* :ghpull:`17704`: Remove "created-by-matplotlib" comment in svg output.
* :ghpull:`17697`: Add description examples/pyplots/pyplot simple.py
* :ghpull:`17694`: CI: Only skip devdocs deploy if PR is to this repo.
* :ghpull:`17691`: ci: Print out reasons for not deploying docs.
* :ghpull:`17099`: Make Spines accessable by the attributes.

Issues (204):

* :ghissue:`19701`: Notebook plotting regression in 3.4.0rc*
* :ghissue:`19754`: add space in python -mpip
* :ghissue:`18364`: ``Axes3d`` attaches itself to a figure, where as ``Axes`` does not
* :ghissue:`19700`: Setting pickradius regression in 3.4.0rc
* :ghissue:`19594`: code of conduct link 404s
* :ghissue:`19576`: duplicate pick events firing
* :ghissue:`19560`: segfault due to font objects when multi-threading
* :ghissue:`19598`: Axes order changed in 3.4.0rc1
* :ghissue:`19631`: subplot mosaic 1 element list
* :ghissue:`19581`: Missing kerning for single-byte strings in PDF
* :ghissue:`17769`: interactive figure close with wxpython 4.1 causes freeze / crash (segfault?)
* :ghissue:`19427`: Fix mistake in documentation
* :ghissue:`19624`: Cannot add colorbar to figure after pickle
* :ghissue:`19544`: Regression in 3.4.0rc1 in creating ListedColormap from a set
* :ghissue:`5855`: plt.step(..., where="auto")
* :ghissue:`19474`: Memory leak with CallbackRegistry
* :ghissue:`19345`: legend is eating up huge amounts of memory
* :ghissue:`19066`: plt.scatter, error with NaN values and edge color
* :ghissue:`19432`: Unexpected change in behavior in plt.subplot
* :ghissue:`18020`: Scatter3D: facecolor or color to "none" leads to an error
* :ghissue:`18939`: Warn re: Axes3D constructor behavior change in mpl3.4
* :ghissue:`19128`: webagg reports incorrect values for non-alphanumeric key events on non-qwerty keyboards
* :ghissue:`16558`: Request: for non-interactive backends make fig.canvas.draw() force the render
* :ghissue:`19234`: tick labels displaced vertically with text.usetex and xcolor
* :ghissue:`18407`: pgf backend no longer supports fig.draw
* :ghissue:`2298`: axes.xmargin/ymargin rcParam behaves differently than pyplot.margins()
* :ghissue:`19473`: Animations in Tkinter window advance non-uniformly
* :ghissue:`8688`: document moved examples
* :ghissue:`9553`: Display warning on out-of-date documentation websites
* :ghissue:`9556`: Examples page version is out of date
* :ghissue:`12374`: Examples in docs should be redirected to latest version number
* :ghissue:`19486`: Figure.tight_layout() raises MatplotlibDeprecationWarning
* :ghissue:`19445`: axline transform support broke axline in loglog scale
* :ghissue:`19178`: mathtext \lim is vertically misaligned
* :ghissue:`19446`: Better document and error handle third dimension in pyplot.text() positional argument
* :ghissue:`8790`: Inconsistent doc vs behavior for RendererXXX.draw_markers
* :ghissue:`18815`: Patch3D object does not return correct face color with get_facecolor
* :ghissue:`19152`: Automatically Aligned Labels outside Figure with Constrained Layout in Exported File
* :ghissue:`18934`: stairs() crashes with no values and one edge
* :ghissue:`11296`: Image in github repo does not match matplotlib.org (breaks image tutorial)
* :ghissue:`18699`: Issue with downloading stinkbug for "Image Tutorial"
* :ghissue:`19405`: TypeError constructor returned NULL in wayland session
* :ghissue:`18962`: Table CSS needs cleanup
* :ghissue:`19417`: CI failing on numpy...
* :ghissue:`17849`: Problems caused by changes to logic of scatter coloring in matplotlib 3.3.0.rc1
* :ghissue:`18648`: Drop support for directly imread()ing urls.
* :ghissue:`19366`: Current CI doc builds fail
* :ghissue:`19372`: matplotlib.axes.Axes.indicate_inset default label value is incompatible with LaTeX
* :ghissue:`17100`: Is it a better solution to access one of the spines by class attribute?
* :ghissue:`17375`: Proposal: add_subfigs....
* :ghissue:`19339`: constrained_layout + fixed-aspect axes + bbox_inches="tight"
* :ghissue:`19308`: Reduce whitespace in Choosing Colormaps tutorial plots
* :ghissue:`18832`: MNT: Remove AxesStack and deprecated behavior of reuse of existing axes with same arguments
* :ghissue:`19084`: Arrow coordinates slightly off when used with annotation text
* :ghissue:`17765`: PGF xelatex can't find fonts in special-character paths
* :ghissue:`19274`: Missing marker in documentation of plot
* :ghissue:`18241`: LaTeX overset: unknown symbol
* :ghissue:`19292`: Non interpolated placeholder value in docstring.
* :ghissue:`18119`: Can no longer deepcopy LogNorm objects on master
* :ghissue:`8665`: Noninteger Bases in mathtext sqrt
* :ghissue:`19243`: matplotlib doesn't build with qhull-2020.2
* :ghissue:`19275`: Double specifications of plot attributes
* :ghissue:`15066`: Feature request: stem3
* :ghissue:`19209`: Segfault when trying to create gigapixel image with agg backend
* :ghissue:`4321`: clabel ticks and axes limits with eps zoom output
* :ghissue:`16376`: ``SymLogNorm`` and ``SymLogScale`` give inconsistent results....
* :ghissue:`19239`: _make_norm_from_scale needs to process values
* :ghissue:`16552`: Scatter autoscaling still has issues with log scaling and zero values
* :ghissue:`18417`: Documentation issue template should ask for matplotlib version
* :ghissue:`19206`: matplotlib.cbook.Grouper: Example raise exception:
* :ghissue:`19203`: Date Tick Labels example
* :ghissue:`18581`: Add a check in check_figures_equal that the test did not accidentally plot on non-fixture figures
* :ghissue:`18563`: Create a RangeSlider widget
* :ghissue:`19099`: axisartist axis_direction bug
* :ghissue:`19171`: 3D surface example bug for non-square grid
* :ghissue:`18112`: set_{x,y,z}bound 3d limits are not persistent upon interactive rotation
* :ghissue:`19078`: _update_patch_limits should not use CLOSEPOLY verticies for updating
* :ghissue:`16123`: test_dpi_ratio_change fails on Windows/Qt5Agg
* :ghissue:`15796`: [DOC] PDF build of matplotlib own documentation crashes with LaTeX error "too deeply nested"
* :ghissue:`19091`: 3D Axes don't work in SubFigures
* :ghissue:`7238`: better document how to configure artists for picking
* :ghissue:`11147`: FR: add a supxlabel and supylabel as the suptitle function which are already exist
* :ghissue:`17417`: tutorial on how autoscaling works
* :ghissue:`18917`: Spy displays nothing for full arrays
* :ghissue:`18562`: Allow slider valstep to be arraylike
* :ghissue:`18942`: AnnotationBbox errors with kwargs
* :ghissue:`11472`: Mention predefined keyboard shortcuts in the docs on event-handling
* :ghissue:`18898`: wrong bounds checking in streamplot start_points
* :ghissue:`18974`: Contour label demo would benefit from some more info and/or references.
* :ghissue:`17708`: Mention rasterized option in more methods
* :ghissue:`18826`: Pgf plots with pdflatex broken
* :ghissue:`18959`: Add sphinx-gallery cross ref instructions to documenting guide
* :ghissue:`18926`: Font not installed, unclear warning
* :ghissue:`18891`: SVG animation doesn't work in HTMLWriter due to wrong type
* :ghissue:`18222`: It is painful as a new user, to figure out what AxesSubplot is
* :ghissue:`16153`: gap size for contour labels is poorly estimated
* :ghissue:`17910`: Improve accessibility of form controls in HTML widgets
* :ghissue:`18273`: Surprising behavior of shared axes with categorical units
* :ghissue:`18731`: Compact string notation for subplot_mosaic
* :ghissue:`18221`: Add example of keys to explore 3D data
* :ghissue:`18882`: Incorrect version requirement message from setup.py
* :ghissue:`18491`: Mostly unused glossary still exists in our docs
* :ghissue:`18548`: add_subplot(..., axes_cls=...)
* :ghissue:`8249`: Bug in mpl_connect(): On Windows, with the wx backend, arrow keys are not reported
* :ghissue:`15609`: [SPRINT] Update Named Colors Example
* :ghissue:`18800`: Log-scale ticker fails at 1e-323
* :ghissue:`18392`: ``scatter()``: ``edgecolor`` takes precedence over ``edgecolors``
* :ghissue:`18301`: "How to use Matplotlib in a web application server" should be made an example
* :ghissue:`18386`: Path3DCollection.set_color(self, c) does not change the color of scatter points.
* :ghissue:`8946`: Axes with sharex can have divergent axes after setting tick markers
* :ghissue:`2294`: tex option not respected by date x-axis
* :ghissue:`4382`: use new binary comm in nbagg
* :ghissue:`17088`: ``projection`` kwarg could be better documented.
* :ghissue:`18717`: Tick formatting issues on horizontal histogram with datetime on 3.3.2
* :ghissue:`12636`: Characters doesn't display correctly when figure saved as pdf with a custom font
* :ghissue:`18377`: Matplotlib picks a headless backend on Linux if Wayland is available but X11 isn't
* :ghissue:`13199`: Examples that use private APIs
* :ghissue:`18662`: Inconsistent setting of axis limits with autoscale=False
* :ghissue:`18690`: Class deprecation machinery and mixins
* :ghissue:`18510`: Build fails on OS X: wrong minimum version
* :ghissue:`18641`: Conversion cache cleaning is broken with xdist
* :ghissue:`15614`: named color examples need borders
* :ghissue:`5519`: The linestyle 'None',  ' ' and '' not supported by PathPatch.
* :ghissue:`17487`: Polygon selector with useblit=True - polygon dissapears
* :ghissue:`17476`: RectangleSelector fails to clear itself after being toggled inactive and then back to active.
* :ghissue:`18600`: plt.errorbar raises error when given marker=<matplotlib.markers.MarkerStyle object>
* :ghissue:`18355`: Optional components required to build docs aren't documented
* :ghissue:`18428`: small bug in the mtplotlib gallery
* :ghissue:`4438`: inconsistent behaviour of the errorevery option in pyplot.errorbar() to the markevery keyword
* :ghissue:`5823`: pleas dont include the Google Analytics tracking in the off-line doc
* :ghissue:`13035`: Path3DCollection from 3D scatter cannot set_color
* :ghissue:`9725`: scatter - set_facecolors is not working on Axes3D
* :ghissue:`3370`: Patch3DCollection doesn't update color after calling set_color
* :ghissue:`18427`: yaxis.set_label_position("right") resets "horizontalalignment"
* :ghissue:`3129`: super-ify the code base
* :ghissue:`17518`: Plotting legend throws error "font family ['serif'] not found. Falling back to DejaVu Sans"
* :ghissue:`18282`: Bad interaction between kerning and non-latin1 characters in pdf output
* :ghissue:`6669`: [Feature request] Functions for "manually" plotting histograms
* :ghissue:`18411`: 2-D array RGB and RGBA values not understood in plt.plot()
* :ghissue:`18404`: Double-click events are not recognised in Jupyter notebook
* :ghissue:`12027`: marker_props is never used in the constructor of RectangleSelector
* :ghissue:`18438`: Warn when a non-started animation is gc'ed.
* :ghissue:`11259`: Symbols appear as streaks with usetex=True, times font and PDF backend
* :ghissue:`18345`: Specify what sharex and sharey do...
* :ghissue:`18082`: Feature Request: Non overlapping Bubble Plots
* :ghissue:`568`: Support error bars on 3D plots
* :ghissue:`17865`: Earlier validation of color inputs
* :ghissue:`18363`: ha="right" breaks AnchoredText placement.
* :ghissue:`11050`: keyboard shortcuts don't get registered using the experimental toolmanager with qt
* :ghissue:`17906`: Set mathtext.fontset per element
* :ghissue:`18311`: Subplot scatter plot with categorical data on y-axis with 'sharey=True' option overwrites the y-axis labels
* :ghissue:`10304`: No link to shared axes for Axis.set_units
* :ghissue:`17712`: constrained_layout fails on suptitle+colorbars+some figure sizes
* :ghissue:`14638`: colorbar.make_axes doesn't anchor in constrained_layout
* :ghissue:`18299`: New configure_subplots behaves badly on TkAgg backend
* :ghissue:`18300`: Remove the examples category "Our Favorite Recipies"
* :ghissue:`18077`: Imshow breaks if given a unyt_array input
* :ghissue:`7074`: Using a linestyle cycler with plt.errorbar results in strange plots
* :ghissue:`18236`: FuncAnimation fails to display with interval 0 on Tkagg backend
* :ghissue:`8107`:  invalid command name "..._on_timer" in FuncAnimation for (too) small interval
* :ghissue:`18272`: Add CI Intervall to boxplot notch documentation
* :ghissue:`18137`: axhspan() in empty plots changes the xlimits of plots sharing the X axis
* :ghissue:`18246`: test_never_update is flaky
* :ghissue:`5856`: Horizontal stem plot
* :ghissue:`18160`: Add feature request template
* :ghissue:`17197`: Missing character upon savefig() with Free Serif font
* :ghissue:`17013`: Request: provide a contextmanager for ioff or allow plt.figure(draw_on_create=False)
* :ghissue:`17537`: hat graphs need an example...
* :ghissue:`17755`: mplot3d: add_collection3d issues
* :ghissue:`18192`: Cannot save SVG file with FIPS compliant Python
* :ghissue:`17574`: Vertical alignment of tick labels containing minus in font size other than 10 with usetex=True
* :ghissue:`18097`: Feature Request: Allow hexbin to use a string for parameter C to refer to column in data (DataFrame)
* :ghissue:`17689`: Add pause/resume methods to Animation baseclass
* :ghissue:`16087`: Error with greek letters in pdf export when using usetex=True and mathptmx
* :ghissue:`17136`: set_ticks() changes view limits of the axis
* :ghissue:`12198`: axvline incorrectly tries to handle unitized ymin, ymax
* :ghissue:`9139`: Python3 matplotlib 2.0.2 with Times New Roman misses unicode minus sign in pdf
* :ghissue:`5970`: pyplot.scatter raises obscure error when mistakenly passed a third string param
* :ghissue:`17936`: documenattion and behavior do not match for suppressing (PDF) metadata
* :ghissue:`17932`: latex textrm does not work in Cairo backend
* :ghissue:`17714`: Universal fullscreen command
* :ghissue:`4584`: ColorbarBase draws edges in slightly wrong positions.
* :ghissue:`17878`: flipping of imshow in specgram
* :ghissue:`6118`: consider using qtpy for qt abstraction layer
* :ghissue:`17908`: rcParams restrictions on frame_formats are out of sync with supported values (HTMLWriter)
* :ghissue:`17867`: datetime plotting broken on master
* :ghissue:`16810`: Docs do not build in parallel
* :ghissue:`17918`: Extend hatch reference
* :ghissue:`17149`: Rasterization creates multiple bitmap elements and large file sizes
* :ghissue:`17855`: Add Hatch Example to gallery
* :ghissue:`15821`: Should constrained_layout work as plt.figure() argument?
* :ghissue:`15616`: Colormaps should have a ``_repr_html_`` that is an image of the colormap
* :ghissue:`17579`: ``BoundaryNorm`` yield a ``ZeroDivisionError: division by zero``
* :ghissue:`17652`: NEP 29 : Stop support fro Python 3.6 soon ?
* :ghissue:`11095`: Repeated plot calls with xunits=None throws exception
* :ghissue:`17733`: Rename "array" (and perhaps "fields") section of Axes API
* :ghissue:`15610`: Link to most recent DevDocs when installing from Master Source
* :ghissue:`17817`: (documentation, possible first-timer bug) Typo and grammar on Legends and Annotations for tight layout guide page
* :ghissue:`17804`: Setting the norm on imshow object removes colorbar ylabel
* :ghissue:`17758`: bar, barh should take a list of hatches like it does of colors
* :ghissue:`17746`: Antialiasing with colorbars?
* :ghissue:`17659`: Enhancement: Set tick and ticklabel colors separately from matplotlib style file
* :ghissue:`17144`: Wrong icon on windows task bar for figure windows
* :ghissue:`2870`: Wrong symbols from a TrueType font
.. _github-stats-3-0-2:

GitHub statistics for 3.0.2 (Nov 10, 2018)
==========================================

GitHub statistics for 2018/09/18 (tag: v3.0.0) - 2018/11/10

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 170 issues and merged 224 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/39?closed=1>`__

The following 49 authors contributed 460 commits.

* Abhinuv Nitin Pitale
* Alon Hershenhorn
* Andras Deak
* Ankur Dedania
* Antony Lee
* Anubhav Shrimal
* Ayappan P
* azure-pipelines[bot]
* Ben Root
* Colin
* Colin Carroll
* Daniele Nicolodi
* David Haberthür
* David Stansby
* Dmitry Mottl
* Elan Ernest
* Elliott Sales de Andrade
* Eric Wieser
* esvhd
* Galen Lynch
* hannah
* Ildar Akhmetgaleev
* ImportanceOfBeingErnest
* Jody Klymak
* Joel Wanner
* Kai Muehlbauer
* Kevin Rose
* Kyle Sunden
* Marcel Martin
* Matthias Bussonnier
* MeeseeksMachine
* Michael Jancsy
* Nelle Varoquaux
* Nick Papior
* Nikita Kniazev
* Paul Hobson
* pharshalp
* Rasmus Diederichsen
* Ryan May
* saksmito
* Takafumi Arakaki
* teresy
* Thomas A Caswell
* thoo
* Tim Hoffmann
* Tobias Megies
* Tyler Makaro
* Will Handley
* Yuxin Wu

GitHub issues and pull requests:

Pull Requests (224):

* :ghpull:`12785`: Use level kwargs in irregular contour example
* :ghpull:`12767`: Make colorbars constructible with dataless ScalarMappables.
* :ghpull:`12775`: Add note to errorbar function about sign of errors
* :ghpull:`12776`: Fix typo in example (on-borad -> on-board).
* :ghpull:`12771`: Do not rely on external stack frame to exist
* :ghpull:`12526`: Rename jquery files
* :ghpull:`12552`: Update docs for writing image comparison tests.
* :ghpull:`12746`: Use skipif, not xfail, for uncomparable image formats.
* :ghpull:`12747`: Prefer log.warning("%s", ...) to log.warning("%s" % ...).
* :ghpull:`11753`: FIX: Apply aspect before drawing starts
* :ghpull:`12749`: Move toolmanager warning from logging to warning.
* :ghpull:`12708`: Run flake8 in a separate travis environment
* :ghpull:`12737`: Improve docstring of Arc
* :ghpull:`12598`: Support Cn colors with n>=10.
* :ghpull:`12670`: FIX: add setter for hold to un-break basemap
* :ghpull:`12693`: Workaround Text3D breaking tight_layout()
* :ghpull:`12727`: Reorder API docs: separate file per module
* :ghpull:`12738`: Add unobtrusive depreaction note to the first line of the docstring.
* :ghpull:`12740`: DOC: constrained layout guide (fix: Spacing with colorbars)
* :ghpull:`11663`: Refactor color parsing of Axes.scatter
* :ghpull:`12736`: Move deprecation note to end of docstring
* :ghpull:`12704`: Rename tkinter import from Tk to tk.
* :ghpull:`12730`: MNT: merge ignore lines in .flake8
* :ghpull:`12707`: Fix tk error when closing first pyplot figure
* :ghpull:`12715`: Cleanup dviread.
* :ghpull:`12717`: Delete some ``if __name__ == "__main__"`` clauses.
* :ghpull:`12726`: Fix test_non_gui_warning for Azure (and mplcairo).
* :ghpull:`12720`: Improve docs on Axes scales
* :ghpull:`12537`: Improve error message on failing test_pyplot_up_to_date
* :ghpull:`12721`: Make get_scale_docs() internal
* :ghpull:`12617`: Set up CI with Azure Pipelines
* :ghpull:`12673`: Fix for _axes.scatter() array index out of bound error
* :ghpull:`12676`: Doc: document textpath module
* :ghpull:`12705`: Improve docs on Axes limits and direction
* :ghpull:`12706`: Extend sphinx Makefile to cleanup completely
* :ghpull:`12481`: Warn if plot_surface Z values contain NaN
* :ghpull:`12709`: Correctly remove nans when drawing paths with pycairo.
* :ghpull:`12685`: Make ticks in demo_axes_rgb.py visible
* :ghpull:`12691`: DOC: Link to "How to make a PR" tutorials as badge and in contributing
* :ghpull:`12684`: Change ipython block to code-block
* :ghpull:`11974`: Make code match comment in sankey.
* :ghpull:`12440`: Make arguments to @deprecated/warn_deprecated keyword-only.
* :ghpull:`12683`: TST: mark test_constrainedlayout.py::test_colorbar_location as flaky
* :ghpull:`12686`: Remove deprecation warnings in tests
* :ghpull:`12470`: Update AutoDateFormatter with locator
* :ghpull:`12656`: FIX: fix error in colorbar.get_ticks not having valid data
* :ghpull:`12586`: Improve linestyles example
* :ghpull:`12006`: Added stacklevel=2 to all warnings.warn calls (issue 10643)
* :ghpull:`12651`: FIX: ignore non-finite bbox
* :ghpull:`12653`: Don't warn when accessing deprecated properties from the class.
* :ghpull:`12608`: ENH: allow matplotlib.use after getbackend
* :ghpull:`12658`: Do not warn-depreacted when iterating over rcParams
* :ghpull:`12635`: FIX: allow non bbox_extra_artists calls
* :ghpull:`12659`: Add note that developer discussions are private
* :ghpull:`12543`: Make rcsetup.py flak8 compliant
* :ghpull:`12642`: Don't silence TypeErrors in fmt_{x,y}data.
* :ghpull:`11667`: DOC: update doc requirement
* :ghpull:`12442`: Deprecate passing drawstyle with linestyle as single string.
* :ghpull:`12625`: Shorten some docstrings.
* :ghpull:`12627`: Be a bit more stringent on invalid inputs.
* :ghpull:`12561`: Properly css-style exceptions in the documentation
* :ghpull:`12629`: Fix issue with PyPy on macOS
* :ghpull:`10933`: Remove "experimental" fontconfig font_manager backend.
* :ghpull:`12630`: Fix RcParams.__len__
* :ghpull:`12285`: FIX: Don't apply tight_layout if axes collapse
* :ghpull:`12548`: undef _XOPEN_SOURCE breaks the build in AIX
* :ghpull:`12615`: Fix travis OSX build
* :ghpull:`12600`: Minor style fixes.
* :ghpull:`12607`: STY: fix whitespace and escaping
* :ghpull:`12603`: FIX: don't import macosx to check if eventloop running
* :ghpull:`12599`: Fix formatting of docstring
* :ghpull:`12569`: Don't confuse uintptr_t and Py_ssize_t.
* :ghpull:`12572`: Fix singleton hist labels
* :ghpull:`12581`: Fix hist() error message
* :ghpull:`12570`: Fix mathtext tutorial for build with Sphinx 1.8.
* :ghpull:`12487`: Update docs/tests for the deprecation of aname and label1On/label2On/etc.
* :ghpull:`12521`: Improve docstring of draw_idle()
* :ghpull:`12573`: BUG: mplot3d: Don't crash if azim or elev are non-integral
* :ghpull:`12574`: Remove some unused imports
* :ghpull:`12568`: Add note regarding builds of old Matplotlibs.
* :ghpull:`12555`: Clarify horizontalalignment and verticalalignment in suptitle
* :ghpull:`12547`: Disable sticky edge accumulation if no autoscaling.
* :ghpull:`12546`: Avoid quadratic behavior when accumulating stickies.
* :ghpull:`12159`: FIX: colorbar re-check norm before draw for autolabels
* :ghpull:`12501`: Rectified plot error
* :ghpull:`11789`: endless looping GIFs with PillowWriter
* :ghpull:`12525`: Fix some flake8 issues
* :ghpull:`12431`: FIX: allow single-string color for scatter
* :ghpull:`12216`: Doc: Fix search for sphinx >=1.8
* :ghpull:`12461`: FIX: make add_lines work with new colorbar
* :ghpull:`12241`: FIX: make unused spines invisible
* :ghpull:`12516`: Don't handle impossible values for ``align`` in hist()
* :ghpull:`12504`: DOC: clarify min supported version wording
* :ghpull:`12507`: FIX: make minor ticks formatted with science formatter as well
* :ghpull:`12500`: Adjust the widths of the messages during the build.
* :ghpull:`12492`: Simplify radar_chart example.
* :ghpull:`12478`: MAINT: NumPy deprecates asscalar in 1.16
* :ghpull:`12363`: FIX: errors in get_position changes
* :ghpull:`12495`: Fix duplicate condition in pathpatch3d example
* :ghpull:`11984`: Strip out pkg-config machinery for agg and libqhull.
* :ghpull:`12463`: Document Artist.cursor_data() parameter
* :ghpull:`12489`: Fix typo in documentation of ylim
* :ghpull:`12482`: Test slider orientation
* :ghpull:`12317`: Always install mpl_toolkits.
* :ghpull:`12246`: Be less tolerant of broken installs.
* :ghpull:`12477`: Use \N{MICRO SIGN} instead of \N{GREEK SMALL LETTER MU} in EngFormatter.
* :ghpull:`12483`: Kill FontManager.update_fonts.
* :ghpull:`12448`: Don't error if some font directories are not readable.
* :ghpull:`12474`: Throw ValueError when irregularly gridded data is passed to streamplot.
* :ghpull:`12469`: Clarify documentation of offsetbox.AnchoredText's prop kw argument
* :ghpull:`12468`: Fix ``set_ylim`` unit handling
* :ghpull:`12466`: np.fromstring -> np.frombuffer.
* :ghpull:`12369`: Improved exception handling on animation failure
* :ghpull:`12460`: Deprecate RendererBase.strip_math.
* :ghpull:`12457`: Fix tutorial typos.
* :ghpull:`12453`: Rollback erroneous commit to whats_new.rst from #10746
* :ghpull:`12452`: Minor updates to the FAQ.
* :ghpull:`10746`: Adjusted matplotlib.widgets.Slider to have optional vertical orientatation
* :ghpull:`12441`: Get rid of a signed-compare warning.
* :ghpull:`12430`: Deprecate Axes3D.plot_surface(shade=None)
* :ghpull:`12435`: Fix numpydoc parameter formatting
* :ghpull:`12434`: Clarify documentation for textprops keyword parameter of TextArea
* :ghpull:`12427`: Document Artist.get_cursor_data
* :ghpull:`12277`: FIX: datetime64 now recognized if in a list
* :ghpull:`10322`: Use np.hypot wherever possible.
* :ghpull:`12423`: Minor simplifications to backend_svg.
* :ghpull:`12293`: Make pyplot more tolerant wrt. 3rd-party subclasses.
* :ghpull:`12360`: Replace axes_grid by axes_grid1 in test
* :ghpull:`10356`: fix detecting which artist(s) the mouse is over
* :ghpull:`12416`: Move font cache rebuild out of exception handler
* :ghpull:`11891`: Group some print()s in backend_ps.
* :ghpull:`12165`: Remove deprecated mlab code
* :ghpull:`12394`: DOC: fix CL tutorial to give same output from saved file and example
* :ghpull:`12387`: Update HTML animation as slider is dragged
* :ghpull:`12408`: Don't crash on invalid registry font entries on Windows.
* :ghpull:`10088`: Deprecate Tick.{gridOn,tick1On,label1On,...} in favor of set_visible.
* :ghpull:`12149`: Mathtext tutorial fixes
* :ghpull:`12393`: Deprecate to-days converters in matplotlib dates
* :ghpull:`12257`: Document standard backends in matplotlib.use()
* :ghpull:`12383`: Revert change of parameter name in annotate()
* :ghpull:`12385`: CI: Added Appveyor Python 3.7 build
* :ghpull:`12247`: Machinery for deprecating properties.
* :ghpull:`12371`: Move check for ImageMagick Windows path to bin_path().
* :ghpull:`12384`: Cleanup axislines style.
* :ghpull:`12353`: Doc: clarify default parameters in scatter docs
* :ghpull:`12366`: TST: Update test images for new Ghostscript.
* :ghpull:`11648`: FIX: colorbar placement in constrained layout
* :ghpull:`12368`: Don't use stdlib private API in animation.py.
* :ghpull:`12351`: dviread: find_tex_file: Ensure the encoding on windows
* :ghpull:`12244`: Merge barchart examples.
* :ghpull:`12372`: Remove two examples.
* :ghpull:`12214`: Improve docstring of Annotation
* :ghpull:`12347`: DOC: add_child_axes to axes_api.rst
* :ghpull:`12304`: TST: Merge Qt tests into one file.
* :ghpull:`12321`: maint: setupext.py for freetype had a Catch case for missing ft2build.h
* :ghpull:`12340`: Catch test deprecation warnings for mlab.demean
* :ghpull:`12334`: Improve selection of inset indicator connectors.
* :ghpull:`12316`: Fix some warnings from Travis
* :ghpull:`12268`: FIX: remove unnecessary ``self`` in ``super_``-calls, fixes #12265
* :ghpull:`12212`: font_manager: Fixed problems with Path(...).suffix
* :ghpull:`12326`: fixed minor spelling error in docstring
* :ghpull:`12296`: Make FooConverter inherit from ConversionInterface in examples
* :ghpull:`12322`: Fix the docs build.
* :ghpull:`12319`: Fix Travis 3.6 builds
* :ghpull:`12309`: Deduplicate implementations of FooNorm.autoscale{,_None}
* :ghpull:`12314`: Deprecate ``axis('normal')`` in favor of ``axis('auto')``.
* :ghpull:`12313`: BUG: Fix typo in view_limits() for MultipleLocator
* :ghpull:`12307`: Clarify missing-property error message.
* :ghpull:`12274`: MNT: put back ``_hold`` as read-only attribute on AxesBase
* :ghpull:`12260`: Fix docs : change from issue #12191, remove "if 1:" blocks in examples 
* :ghpull:`12163`: TST: Defer loading Qt framework until test is run.
* :ghpull:`12253`: Handle utf-8 output by kpathsea on Windows.
* :ghpull:`12301`: Ghostscript 9.0 requirement revisited
* :ghpull:`12294`: Fix expand_dims warnings in triinterpolate
* :ghpull:`12292`: TST: Modify the bar3d test to show three more angles
* :ghpull:`12297`: Remove some pytest parameterising warnings
* :ghpull:`12261`: FIX:  parasite axis2 demo
* :ghpull:`12278`: Document inheriting docstrings
* :ghpull:`12262`: Simplify empty-rasterized pdf test.
* :ghpull:`12269`: Add some param docs to BlockingInput methods
* :ghpull:`12272`: Fix ``contrained`` to ``constrained``
* :ghpull:`12255`: Deduplicate inherited docstrings.
* :ghpull:`12254`: Improve docstrings of Animations
* :ghpull:`12258`: Fix CSS for module-level data
* :ghpull:`12222`: Remove extraneous if 1 statements in demo_axisline_style.py
* :ghpull:`12137`:  MAINT: Vectorize bar3d 
* :ghpull:`12219`: Merge OSXInstalledFonts into findSystemFonts.
* :ghpull:`12229`: Less ACCEPTS, more numpydoc.
* :ghpull:`12209`: Doc: Sort named colors example by palette
* :ghpull:`12237`: Use (float, float) as parameter type for 2D positions in docstrings
* :ghpull:`12238`: Typo in docs
* :ghpull:`12236`: Make boilerplate-generated pyplot.py flake8 compliant
* :ghpull:`12231`: CI: Speed up Appveyor repository cloning
* :ghpull:`12228`: Fix trivial typo in docs.
* :ghpull:`12227`: Use (float, float) as parameter type for 2D positions
* :ghpull:`12199`: Allow disabling specific mouse actions in blocking_input
* :ghpull:`12213`: Change win32InstalledFonts return value
* :ghpull:`12207`: FIX: dont' check for interactive framework if none required
* :ghpull:`11688`: Don't draw axis (spines, ticks, labels) twice when using parasite axes.
* :ghpull:`12210`: Axes.tick_params() argument checking
* :ghpull:`12211`: Fix typo
* :ghpull:`12200`: Slightly clarify some invalid shape exceptions for image data.
* :ghpull:`12151`: Don't pretend @deprecated applies to classmethods.
* :ghpull:`12190`: Remove some unused variables and imports
* :ghpull:`12186`: DOC: fix API note about get_tightbbox
* :ghpull:`12203`: Document legend's slowness when "best" location is used
* :ghpull:`12192`: Exclude examples from lgtm analysis
* :ghpull:`12196`: Give Carreau the ability to mention the backport bot.
* :ghpull:`12187`: DOC: Update INSTALL.rst
* :ghpull:`12164`: Fix Annotation.contains.
* :ghpull:`12177`: FIX: remove cwd from mac font path search
* :ghpull:`12182`: Fix Flash of Unstyled Content by removing remaining Flipcause integration
* :ghpull:`12184`: DOC: update "Previous What's New" for 2.2 with reference to cividis paper
* :ghpull:`12183`: Doc: Don't use Sphinx 1.8
* :ghpull:`12171`: Remove internal warning due to zsort deprecation
* :ghpull:`12166`: Document preference order for backend auto selection
* :ghpull:`12154`: Avoid triggering deprecation warnings with pytest 3.8.
* :ghpull:`12030`: Speed up canvas redraw for GTK3Agg backend.
* :ghpull:`12157`: Properly declare the interactive framework for the qt4foo backends.
* :ghpull:`12156`: Cleanup the GridSpec demos.
* :ghpull:`12144`: Add explicit getters and setters for Annotation.anncoords.
* :ghpull:`12152`: Use _warn_external for deprecations warnings.
* :ghpull:`12148`: BLD: pragmatic fix for building basic_unit example on py37
* :ghpull:`12147`: DOC: update the gh_stats code

Issues (170):

* :ghissue:`12699`: Annotations get cropped out of figures saved with bbox_inches='tight'
* :ghissue:`9217`: Weirdness with inline figure DPI settings in Jupyter Notebook
* :ghissue:`4853`: %matplotlib notebook creates much bigger figures than %matplotlib inline
* :ghissue:`12780`: Vague/misleading exception message in scatter()
* :ghissue:`10239`: Weird interaction with Tkinter
* :ghissue:`10045`: subplots_adjust() breaks layout of tick labels
* :ghissue:`12765`: Matplotlib draws incorrect color
* :ghissue:`11800`: Gridspec tutorial
* :ghissue:`12757`: up the figure
* :ghissue:`12724`: Importing pyplot steals focus on macOS 
* :ghissue:`12669`: fixing _hold on cartopy broke basemap
* :ghissue:`12687`: Plotting text on 3d axes before tight_layout() breaks tight_layout()
* :ghissue:`12734`: Wishlist: functionally linked twin axes
* :ghissue:`12576`: RcParams is fundamentally broken
* :ghissue:`12641`: ``_axes.py.scatter()`` array index out of bound / calling from ``seaborn``
* :ghissue:`12703`: Error when closing first of several pyplot figures in TkAgg
* :ghissue:`12728`: Deprecation Warnings
* :ghissue:`4124`: Provide canonical examples of mpl in web frameworks
* :ghissue:`10574`: Default color after setting alptha to Patch in legened
* :ghissue:`12702`: couldn't find or load Qt platform plugin "windows" in "".
* :ghissue:`11139`: "make clean" doesn't remove all the build doc files
* :ghissue:`12701`: semilogy with NaN prevents display of Title (cairo backend)
* :ghissue:`12696`: Process finished with exit code -1 due to matplotlib configuration
* :ghissue:`12692`: matplotlib.plot.show always blocks the execution of python script
* :ghissue:`12433`: Travis error is MacOS image tolerance of 0.005 for ``test_constrained_layout.py::test_colorbar_location``
* :ghissue:`10017`: unicode_literals considered harmful
* :ghissue:`12682`: using AxesImage.set_clim() shrinks the colorbar
* :ghissue:`12620`: Overlapping 3D objects
* :ghissue:`12680`: matplotlib ui in thread still blocked
* :ghissue:`11908`: Improve linestyle documentation
* :ghissue:`12650`: Deprecation warnings when calling help(matplotlib)
* :ghissue:`10643`: Most warnings calls do not set the stacklevel
* :ghissue:`12671`: make_axes_locatable breaks with matplotlib 3.0
* :ghissue:`12664`: plt.scatter crashes because overwrites the colors to an empty list
* :ghissue:`12188`:  matplotlib 3 pyplot on MacOS bounces rocket icon in dock
* :ghissue:`12648`: Regression when calling annotate with nan values for the position
* :ghissue:`12362`: In 3.0.0 backend cannot be set if 'get_backend()' is run first
* :ghissue:`12649`: Over-verbose deprecation warning about examples.directory
* :ghissue:`12661`: In version 3.0.0 make_axes_locatable + colorbar does not produce expected result
* :ghissue:`12634`: axes_grid1 axes have no keyword argument 'bbox_extra_artists'
* :ghissue:`12654`: Broken 'Developer Discussions' link
* :ghissue:`12657`: With v3.0.0 mpl_toolkits.axes_grid1.make_axes_locatable().append_axes breaks in Jupyter
* :ghissue:`12645`: Markers are offset when 'facecolor' or 'edgecolor' are set to 'none' when plotting data
* :ghissue:`12644`: Memory leak with plt.plot in Jupyter Notebooks?
* :ghissue:`12632`: Do we need input hooks macosx?
* :ghissue:`12535`: AIX Support - Do not undef _XOPEN_SOURCE 
* :ghissue:`12626`: AttributeError: module 'matplotlib' has no attribute 'artist'
* :ghissue:`11034`: Doc Typo:  matplotlib.axes.Axes.get_yticklabels  / Axis.get_ticklabels
* :ghissue:`12624`: make_axes_locatable : Colorbar in the middle instead of bottom while saving a pdf, png.
* :ghissue:`11094`: can not use GUI backends inside django request handlers
* :ghissue:`12613`: transiently linked interactivity of unshared pair of axes generated with make_axes_locatable 
* :ghissue:`12578`: macOS builds are broken
* :ghissue:`12612`: gui backends do not work inside of flask request handlers
* :ghissue:`12611`: Matplotlib 3.0.0 Likely bug TypeError: stackplot() got multiple values for argument 'x'
* :ghissue:`12610`: matplotlibrc causes import to fail 3.0.0 (didn't crash 2.y.z series)
* :ghissue:`12601`: Can't import matplotlib
* :ghissue:`12597`: Please soon add Chinese language support!! It's to difficult for new people handle character
* :ghissue:`12590`: Matplotlib pypi distribution lacks packages for Python 2.7
* :ghissue:`3869`: Numeric labels do not work with plt.hist
* :ghissue:`12580`: Incorrect hist error message with bad color size
* :ghissue:`12100`: document where to get nightly wheels
* :ghissue:`7205`: Converting docstrings to numpydoc
* :ghissue:`12564`: Saving plot as PNG file prunes tick labels 
* :ghissue:`12161`: Problems of using sharex options with lines plots and colormesh with colorbar
* :ghissue:`12256`: tight_layout for plot with non-clipped screen-unit items causes issues on zoom
* :ghissue:`12545`: Program quit unormally without reporting error
* :ghissue:`12532`: Incorrect rendering of math symbols
* :ghissue:`12567`: Calling pyplot.show() with TkAgg backend on x86 machine raises OverflowError.
* :ghissue:`12571`: cannot install because Fatal Python error: initfsencoding: Unable to get the locale encoding
* :ghissue:`12566`: Problem installing Version 1.3.1 -> missing pkg-config freetype and libagg
* :ghissue:`12556`: Matplotlib 3.0.0 import hangs in clean environment
* :ghissue:`12197`: Weird behaviour of suptitle() when horizontalalignment is not 'center'
* :ghissue:`12550`: colorbar resizes in animation
* :ghissue:`12155`: Incorrect placement of Colorbar ticks using LogNorm
* :ghissue:`11787`: Looping gifs with PillowWriter
* :ghissue:`12533`: Plotting with alpha=0 with rasterized=True causes ValueError on saving to pdf
* :ghissue:`12438`: Scatter doesn't accept a list of strings as color spec.  
* :ghissue:`12429`: scatter() does not accept gray strings anymore
* :ghissue:`12499`: run my code failed after i Import pylab failed, python version is 3.6.6
* :ghissue:`12458`: add_lines misses lines for matplotlib.colorbar.ColorbarBase
* :ghissue:`12239`: 3d axes are collapsed by tight_layout
* :ghissue:`12414`: Function to draw angle between two lines
* :ghissue:`12488`: inconsistent colorbar tick labels for LogNorm
* :ghissue:`12515`: pyplot.step broken in 3.0.0?
* :ghissue:`12355`: Error for bbox_inches='tight' in savefig with make_axes_locatable
* :ghissue:`12505`: ImageGrid in 3.0
* :ghissue:`12502`: How can I put the ticks of logarithmic coordinate in the axes?
* :ghissue:`12496`: Maplotlib Can't Plot a Dataset
* :ghissue:`12486`: rotate label of legend ?
* :ghissue:`12291`: Importing pyplot crashes on macOS due to missing fontlist-v300.json and then Permission denied: '/opt/local/share/fonts'
* :ghissue:`12480`: "close_event" for nbagg/notebook backend
* :ghissue:`12467`: Documentation of AnchoredText's prop keyword argument is misleading
* :ghissue:`12288`: New function signatures in pyplot break Cartopy
* :ghissue:`12445`: Error on colorbar
* :ghissue:`8760`: Traceback from animation.MovieWriter.saving method is confusing because it provides no useful information
* :ghissue:`9205`: after the animation encoder (e.g. ffmpeg) fails, the animation framework itself fails internally in various ways while trying to report the error
* :ghissue:`12357`: Unclear error when saving Animation using FFMpeg
* :ghissue:`12454`: Formatting numerical legend
* :ghissue:`9636`: matplotlib crashes upon window resize
* :ghissue:`11473`: Continuous plotting cause memory leak 20-50kb/sec
* :ghissue:`12018`: No image pop-up or display for plt.imshow() and plt.show()
* :ghissue:`11583`: How to draw parallelepiped with real size scaling?
* :ghissue:`12446`: Polar Contour - float() argument must be a string or a number, not 'AxesParasiteParasiteAuxTrans'
* :ghissue:`12444`: Issues with gridspec/tight_layout in matplotlib version 2.2.3
* :ghissue:`11154`: Unexpected behavior for Axes3D.plot_surface(shade=None)
* :ghissue:`12409`: Calling savefig() multiple times causes crash of Spyder IDE / IPython Kernel dying.
* :ghissue:`9799`: FigureCanvasTkAgg - "buffer is of wrong type" error during blit
* :ghissue:`12439`: FileNotFoundError for font_manager
* :ghissue:`12437`: matplotlib-mac
* :ghissue:`12121`: Documentation of TextArea's fontprops keyword argument is misleading
* :ghissue:`12279`: Axes.format_cursor_data lacks documentation and seems unused
* :ghissue:`12428`: Simple plot spacing bug: ylabel gets wrongfully removed from plot
* :ghissue:`11190`: Images in the docs are too large.
* :ghissue:`12271`: error with errorbar with datetime64 
* :ghissue:`12405`: plt.stackplot() does not work with 3.0.0
* :ghissue:`12282`: ``Axes.imshow`` tooltip does not get updated when another call to ``Axes.imshow`` is made
* :ghissue:`12420`: How to remove Rectangle Selector from figure?
* :ghissue:`12391`: Constrained Layout tutorial needs some cleanup....
* :ghissue:`12406`: Bug with font finding, and here is my fix as well.
* :ghissue:`9051`: ParasiteAxes over plotting
* :ghissue:`12325`: Annotation change from "s" to "text" in 3.0- documentation
* :ghissue:`12397`: plt.show( ) not working (can't get figures to display in external window) when using jupyter QTconsole
* :ghissue:`12396`: Defining arrowprops in draggable annotation disables the pick_event
* :ghissue:`12389`: Setting row edge color of matplotlib table
* :ghissue:`12376`: The output figure file is strange: there is a lot of blank area on the output figure.
* :ghissue:`11641`: constrained_layout and colorbar for a subset of axes
* :ghissue:`12373`: Unexpected outcome with matplotlib.pyplot.pcolor()
* :ghissue:`12370`: ImageGrid bug when using inline backend
* :ghissue:`12364`: pdf image generated by matplotlib with semi transparent lines missing in Word on Windows.
* :ghissue:`12352`: TeX rendering broken on master with windows
* :ghissue:`12354`: Too many levels of symbolic links
* :ghissue:`12323`: indicate_inset_zoom sometimes draws incorrect connector lines
* :ghissue:`12341`: Figures not rendering in docker
* :ghissue:`12335`: Matplotlib plt.Rectangle Incoherent Results
* :ghissue:`12265`: ParasiteAxesAuxTrans  pcolor/pcolormesh and contour/contourf broken
* :ghissue:`12337`: AttributeError: module 'matplotlib.pyplot' has no attribute 'hold'
* :ghissue:`11673`: Inconsistent font settings when changing style context
* :ghissue:`11693`: The rcParams setting for figure.figsize does not change when run from another notebook
* :ghissue:`11725`: New mode between non-interactive and interactive?
* :ghissue:`12134`: tight_layout flips images when making plots without displaying them
* :ghissue:`12310`: plot fails with datetime64[ns] timezone aware objects (for example datetime64[ns, UTC+00:00] )
* :ghissue:`12191`: "if 1:" blocks in examples
* :ghissue:`11288`: FR: Figure.subplots add optional SubplotSpec parameter
* :ghissue:`12298`: c and cmap for plot
* :ghissue:`12286`: Sample code given in Matplotlib's site does not work.
* :ghissue:`11955`: UnicodeDecodeError on importing pyplot in python2
* :ghissue:`12208`: parasite axis2 demo now crashes with log x-axis
* :ghissue:`8871`: Error when using quantities when plotting errorbars
* :ghissue:`6658`: literature reference for 'viridis' colormap
* :ghissue:`6789`: Tutorial pyplot_scales.py crashes when used with plt.tight_layout()
* :ghissue:`6922`: imshow does not immediately update shared axes
* :ghissue:`11879`: Unable to change filename when saving from figure window
* :ghissue:`12225`: In histogram, bars whose count is larger than 2**31 sometimes become negative
* :ghissue:`1461`: DOC: keyword arguments to plt.axes, plt.subpot, and fig.add_subplot
* :ghissue:`12173`: Cannot import pyplot
* :ghissue:`12217`: Python will suddenly not plot anymore
* :ghissue:`12120`: Default legend behavior (loc='best') very slow for large amounts of data.
* :ghissue:`12176`: import pyplot on MacOS without font cache will search entire subtree of current dir
* :ghissue:`12146`: fix pdf docs
* :ghissue:`12160`: MacOS: Cannot import name 'format_exc'
* :ghissue:`12169`: Cannot install 3.0.0 "python setup.py egg_info" failed (freetype & png)
* :ghissue:`12168`: pip install v3.0.0 'failed with exit status 1181'
* :ghissue:`12107`: warnings re: deprecated pytest API with pytest 3.8
* :ghissue:`12162`: https://matplotlib.org/users/beginner.html is outdated
* :ghissue:`12010`: Popover over plot is very slow
* :ghissue:`6739`: Make matplotlib fail more gracefully in headless environments
* :ghissue:`3679`: Runtime detection for default backend
* :ghissue:`11340`: matplotlib fails to install from source with intel compiler
* :ghissue:`11838`: docs do not build on py3.7 due to small change in python handling of -m
* :ghissue:`12115`: Plot in JS Animation has larger margin than "normal" PNG plot
.. _github-stats-3-0-3:

GitHub statistics for 3.0.3 (Feb 28, 2019)
==========================================

GitHub statistics for 2018/11/10 (tag: v3.0.2) - 2019/02/28

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 14 issues and merged 92 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/40?closed=1>`__

The following 19 authors contributed 157 commits.

* Antony Lee
* Christer Jensen
* Christoph Gohlke
* David Stansby
* Elan Ernest
* Elliott Sales de Andrade
* ImportanceOfBeingErnest
* James Adams
* Jody Klymak
* Johannes H. Jensen
* Matthias Geier
* MeeseeksMachine
* Molly Rossow
* Nelle Varoquaux
* Paul Ivanov
* Pierre Thibault
* Thomas A Caswell
* Tim Hoffmann
* Tobia De Koninck

GitHub issues and pull requests:

Pull Requests (92):

* :ghpull:`13493`: V3.0.3 prep
* :ghpull:`13491`: V3.0.x pi
* :ghpull:`13460`: Backport PR #13455 on branch v3.0.x (BLD: only try to get freetype src if src does not exist)
* :ghpull:`13461`: Backport PR #13426 on branch v3.0.x (FIX: bbox_inches='tight' with only non-finite bounding boxes)
* :ghpull:`13426`: FIX: bbox_inches='tight' with only non-finite bounding boxes
* :ghpull:`13453`: Backport PR #13451 on branch v3.0.x (MNT: fix logic error where we never try the second freetype URL)
* :ghpull:`13451`: MNT: fix logic error where we never try the second freetype URL
* :ghpull:`13446`: Merge pull request #11246 from anntzer/download-jquery
* :ghpull:`13437`: Backport PR #13436 on branch v3.0.x (Add get/set_in_layout to artist API docs.)
* :ghpull:`13436`: Add get/set_in_layout to artist API docs.
* :ghpull:`13432`: Really fix ArtistInspector.get_aliases
* :ghpull:`13416`: Backport PR #13405 on branch v3.0.x (Fix imshow()ing PIL-opened images.)
* :ghpull:`13418`: Backport PR #13412 and #13337 on branch v3.0.x
* :ghpull:`13412`: CI: add additional qt5 deb package on travis
* :ghpull:`13370`: Backport PR #13367 on branch v3.0.x (DOC: fix note of what version hold was deprecated in (2.0 not 2.1))
* :ghpull:`13366`: Backport PR #13365 on branch v3.0.x (Fix gcc warning)
* :ghpull:`13365`: Fix gcc warning
* :ghpull:`13347`: Backport PR #13289 on branch v3.0.x (Fix unhandled C++ exception)
* :ghpull:`13349`: Backport PR #13234 on branch v3.0.x
* :ghpull:`13281`: MAINT install of pinned vers for travis
* :ghpull:`13289`: Fix unhandled C++ exception
* :ghpull:`13345`: Backport PR #13333 on branch v3.0.x (Fix possible leak of return of PySequence_GetItem.)
* :ghpull:`13333`: Fix possible leak of return of PySequence_GetItem.
* :ghpull:`13337`: Bump to flake8 3.7.
* :ghpull:`13340`: Backport PR #12398 on branch v3.0.x (CI: Don't run AppVeyor/Travis for doc backport branches.)
* :ghpull:`13317`: Backport PR #13316 on branch v3.0.x (Put correct version in constrained layout tutorial)
* :ghpull:`13308`: Backport PR #12678 on branch v3.0.x
* :ghpull:`12678`: FIX: properly set tz for YearLocator
* :ghpull:`13291`: Backport PR #13287 on branch v3.0.x (Fix unsafe use of NULL pointer)
* :ghpull:`13290`: Backport PR #13288 on branch v3.0.x (Fix potential memory leak)
* :ghpull:`13287`: Fix unsafe use of NULL pointer
* :ghpull:`13288`: Fix potential memory leak
* :ghpull:`13273`: Backport PR #13272 on branch v3.0.x (DOC Better description of inset locator and colorbar)
* :ghpull:`12812`: Backport PR #12809 on branch v3.0.x (Fix TypeError when calculating tick_values)
* :ghpull:`13245`: Backport PR #13244 on branch v3.0.x (Fix typo)
* :ghpull:`13176`: Backport PR #13047 on branch v3.0.x (Improve docs on contourf extend)
* :ghpull:`13215`: Backport PR #13212 on branch v3.0.x (Updated the docstring for pyplot.figure to list floats as the type for figsize argument)
* :ghpull:`13158`: Backport PR #13150 on branch v3.0.x (Remove unused add_dicts from example.)
* :ghpull:`13157`: Backport PR #13152 on branch v3.0.x (DOC: Add explanatory comment for colorbar with axes divider example)
* :ghpull:`13221`: Backport PR #13194 on branch v3.0.x (TST: Fix incorrect call to pytest.raises.)
* :ghpull:`13230`: Backport PR #13226 on branch v3.0.x (Avoid triggering warnings in mandelbrot example.)
* :ghpull:`13216`: Backport #13205 on branch v3.0.x (Add xvfb service to travis)
* :ghpull:`13194`: TST: Fix incorrect call to pytest.raises.
* :ghpull:`13212`: Updated the docstring for pyplot.figure to list floats as the type for figsize argument
* :ghpull:`13205`: Add xvfb service to travis
* :ghpull:`13204`: Add xvfb service to travis
* :ghpull:`13175`: Backport PR #13015 on branch v3.0.x (Enable local doc building without git installation)
* :ghpull:`13047`: Improve docs on contourf extend
* :ghpull:`13015`: Enable local doc building without git installation
* :ghpull:`13159`: Revert "Pin pytest to <3.8 (for 3.0.x)"
* :ghpull:`13150`: Remove unused add_dicts from example.
* :ghpull:`13152`: DOC: Add explanatory comment for colorbar with axes divider example
* :ghpull:`13085`: Backport PR #13081 on branch v3.0.x (DOC: forbid a buggy version of pillow for building docs)
* :ghpull:`13082`: Backport PR #13080 on branch v3.0.x (Pin pillow to < 5.4 to fix doc build)
* :ghpull:`13054`: Backport PR #13052 on branch v3.0.x (Small bug fix in image_slices_viewer)
* :ghpull:`13052`: Small bug fix in image_slices_viewer
* :ghpull:`13036`: Backport PR #12949 on branch v3.0.x (Update docstring of Axes3d.scatter)
* :ghpull:`12949`: Update docstring of Axes3d.scatter
* :ghpull:`13004`: Backport PR #13001: Update windows build instructions
* :ghpull:`13011`: Backport PR #13006 on branch v3.0.x (Add category module to docs)
* :ghpull:`13009`: Fix dependencies for travis build with python 3.5
* :ghpull:`13006`: Add category module to docs
* :ghpull:`13001`: Update windows build instructions
* :ghpull:`12996`: Fix return type in 3D scatter docs
* :ghpull:`12972`: Backport PR #12929 on branch v3.0.x (FIX: skip gtk backend if gobject but not pygtk is installed)
* :ghpull:`12596`: Use sudo:true for nightly builds.
* :ghpull:`12929`: FIX: skip gtk backend if gobject but not pygtk is installed
* :ghpull:`12965`: Backport PR #12960 on branch v3.0.x (Remove animated=True from animation docs)
* :ghpull:`12964`: Backport PR #12938 on branch v3.0.x (Fix xtick.minor.visible only acting on the xaxis)
* :ghpull:`12938`: Fix xtick.minor.visible only acting on the xaxis
* :ghpull:`12937`: Backport PR #12914 on branch 3.0.x: Fix numpydoc formatting
* :ghpull:`12914`: Fix numpydoc formatting
* :ghpull:`12923`: Backport PR #12921 on branch v3.0.x (Fix documentation of vert parameter of Axes.bxp)
* :ghpull:`12921`: Fix documentation of vert parameter of Axes.bxp
* :ghpull:`12912`: Backport PR #12878 on branch v3.0.2-doc (Pin pytest to <3.8 (for 3.0.x))
* :ghpull:`12906`: Backport PR #12774 on branch v3.0.x
* :ghpull:`12774`: Cairo backend: Fix alpha render of collections
* :ghpull:`12854`: Backport PR #12835 on branch v3.0.x (Don't fail tests if cairo dependency is not installed.)
* :ghpull:`12896`: Backport PR #12848 on branch v3.0.x (Fix spelling of the name Randall Munroe)
* :ghpull:`12894`: Backport PR #12890 on branch v3.0.x (Restrict postscript title to ascii.)
* :ghpull:`12838`: Backport PR #12795 on branch v3.0.x (Fix Bezier degree elevation formula in backend_cairo.)
* :ghpull:`12843`: Backport PR #12824 on branch v3.0.x
* :ghpull:`12890`: Restrict postscript title to ascii.
* :ghpull:`12878`: Pin pytest to <3.8 (for 3.0.x)
* :ghpull:`12870`: Backport PR #12869 on branch v3.0.x (Fix latin-1-ization of Title in eps.)
* :ghpull:`12869`: Fix latin-1-ization of Title in eps.
* :ghpull:`12835`: Don't fail tests if cairo dependency is not installed.
* :ghpull:`12848`: Fix spelling of the name Randall Munroe
* :ghpull:`12795`: Fix Bezier degree elevation formula in backend_cairo.
* :ghpull:`12824`: Add missing datestr2num to docs
* :ghpull:`12791`: Backport PR #12790 on branch v3.0.x (Remove ticks and titles from tight bbox tests.)
* :ghpull:`12790`: Remove ticks and titles from tight bbox tests.

Issues (14):

* :ghissue:`10360`: creating PathCollection proxy artist with %matplotlib inline raises ValueError: cannot convert float NaN to integer
* :ghissue:`13276`: calling annotate with nan values for the position still gives error after 3.0.2
* :ghissue:`13450`: Issues with jquery download caching
* :ghissue:`13223`: label1On set to true when axis.tick_params(axis='both', which='major', length=5)
* :ghissue:`13311`: docs unclear on status of constraint layout
* :ghissue:`12675`: Off-by-one bug in annual axis labels when localized time crosses year boundary
* :ghissue:`13208`: Wrong argument type for figsize in documentation for figure
* :ghissue:`13201`: test_backend_qt tests failing
* :ghissue:`13013`: v3.0.2 local html docs "git describe" error
* :ghissue:`13051`: Missing self in image_slices_viewer
* :ghissue:`12920`: Incorrect return type in mplot3d documentation
* :ghissue:`12907`: Tiny typo in documentation of matplotlib.figure.Figure.colorbar
* :ghissue:`12892`: GTK3Cairo Backend Legend TypeError
* :ghissue:`12815`: DOC: matplotlib.dates datestr2num function documentation is missing
.. _github-stats-3-1-1:

GitHub statistics for 3.1.1 (Jul 02, 2019)
==========================================

GitHub statistics for 2019/05/18 (tag: v3.1.0) - 2019/07/02

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 30 issues and merged 120 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/46?closed=1>`__

The following 30 authors contributed 323 commits.

* Adam Gomaa
* Antony Lee
* Ben Root
* Christer Jensen
* chuanzhu xu
* David Stansby
* Deng Tian
* djdt
* Dora Fraeman Caswell
* Elan Ernest
* Elliott Sales de Andrade
* Eric Firing
* Filipe Fernandes
* Ian Thomas
* ImportanceOfBeingErnest
* Jody Klymak
* Johannes H. Jensen
* Jonas Camillus Jeppesen
* LeiSurrre
* Matt Adamson
* MeeseeksMachine
* Molly Rossow
* Nathan Goldbaum
* Nelle Varoquaux
* Paul Ivanov
* RoryIAngus
* Ryan May
* Thomas A Caswell
* Thomas Robitaille
* Tim Hoffmann

GitHub issues and pull requests:

Pull Requests (120):

* :ghpull:`14636`: Don't capture stderr in _check_and_log_subprocess.
* :ghpull:`14655`: Backport PR #14649 on branch v3.1.x (Fix appveyor conda py37)
* :ghpull:`14649`: Fix appveyor conda py37
* :ghpull:`14646`: Backport PR #14640 on branch v3.1.x (FIX: allow secondary axes to be non-linear)
* :ghpull:`14640`: FIX: allow secondary axes to be non-linear
* :ghpull:`14643`: Second attempt at fixing axis inversion (for mpl3.1).
* :ghpull:`14623`: Fix axis inversion with loglocator and logitlocator.
* :ghpull:`14619`: Backport PR #14598 on branch v3.1.x (Fix inversion of shared axes.)
* :ghpull:`14621`: Backport PR #14613 on branch v3.1.x (Cleanup DateFormatter docstring.)
* :ghpull:`14622`: Backport PR #14611 on branch v3.1.x (Update some axis docstrings.)
* :ghpull:`14611`: Update some axis docstrings.
* :ghpull:`14613`: Cleanup DateFormatter docstring.
* :ghpull:`14598`: Fix inversion of shared axes.
* :ghpull:`14610`: Backport PR #14579 on branch v3.1.x (Fix inversion of 3d axis.)
* :ghpull:`14579`: Fix inversion of 3d axis.
* :ghpull:`14600`: Backport PR #14599 on branch v3.1.x (DOC: Add numpngw to third party packages.)
* :ghpull:`14574`: Backport PR #14568 on branch v3.1.x (Don't assume tk canvas have a manager attached.)
* :ghpull:`14568`: Don't assume tk canvas have a manager attached.
* :ghpull:`14571`: Backport PR #14566 on branch v3.1.x (Move setting of AA_EnableHighDpiScaling before creating QApplication.)
* :ghpull:`14566`: Move setting of AA_EnableHighDpiScaling before creating QApplication.
* :ghpull:`14541`: Backport PR #14535 on branch v3.1.x (Invalidate FT2Font cache when fork()ing.)
* :ghpull:`14535`: Invalidate FT2Font cache when fork()ing.
* :ghpull:`14522`: Backport PR #14040 on branch v3.1.x (Gracefully handle non-finite z in tricontour (issue #10167))
* :ghpull:`14434`: Backport PR #14296 on branch v3.1.x (Fix barbs to accept array of bool for ``flip_barb``)
* :ghpull:`14518`: Backport PR #14509 on branch v3.1.x (Fix too large icon spacing in Qt5 on non-HiDPI screens)
* :ghpull:`14509`: Fix too large icon spacing in Qt5 on non-HiDPI screens
* :ghpull:`14514`: Backport PR #14256 on branch v3.1.x (Improve docstring of Axes.barbs)
* :ghpull:`14256`: Improve docstring of Axes.barbs
* :ghpull:`14505`: Backport PR #14395 on branch v3.1.x (MAINT: work around non-zero exit status of "pdftops -v" command.)
* :ghpull:`14504`: Backport PR #14445 on branch v3.1.x (FIX: fastpath clipped artists)
* :ghpull:`14502`: Backport PR #14451 on branch v3.1.x (FIX: return points rather than path to fix regression)
* :ghpull:`14445`: FIX: fastpath clipped artists
* :ghpull:`14497`: Backport PR #14491 on branch v3.1.x (Fix uses of PyObject_IsTrue.)
* :ghpull:`14491`: Fix uses of PyObject_IsTrue.
* :ghpull:`14492`: Backport PR #14490 on branch v3.1.x (Fix links of parameter types)
* :ghpull:`14490`: Fix links of parameter types
* :ghpull:`14489`: Backport PR #14459 on branch v3.1.x (Cleanup docstring of DraggableBase.)
* :ghpull:`14459`: Cleanup docstring of DraggableBase.
* :ghpull:`14485`: Backport #14429 on v3.1.x
* :ghpull:`14486`: Backport #14403 on v3.1.
* :ghpull:`14429`: FIX: if the first elements of an array are masked keep checking
* :ghpull:`14481`: Backport PR #14475 on branch v3.1.x (change ginoput docstring to match behavior)
* :ghpull:`14482`: Backport PR #14464 on branch v3.1.x (Mention origin and extent tutorial in API docs for origin kwarg)
* :ghpull:`14464`: Mention origin and extent tutorial in API docs for origin kwarg
* :ghpull:`14468`: Backport PR #14449: Improve docs on gridspec
* :ghpull:`14475`: change ginoput docstring to match behavior
* :ghpull:`14477`: Backport PR #14461 on branch v3.1.x (Fix out of bounds read in backend_tk.)
* :ghpull:`14476`: Backport PR #14474 on branch v3.1.x (Fix default value in docstring of errorbar func)
* :ghpull:`14461`: Fix out of bounds read in backend_tk.
* :ghpull:`14474`: Fix default value in docstring of errorbar func
* :ghpull:`14473`: Backport PR #14472 on branch v3.1.x (Fix NameError in example code for setting label via method)
* :ghpull:`14472`: Fix NameError in example code for setting label via method
* :ghpull:`14449`: Improve docs on gridspec
* :ghpull:`14450`: Backport PR #14422 on branch v3.1.x (Fix ReST note in span selector example)
* :ghpull:`14446`: Backport PR #14438 on branch v3.1.x (Issue #14372 - Add degrees to documentation)
* :ghpull:`14438`: Issue #14372 - Add degrees to documentation
* :ghpull:`14437`: Backport PR #14387 on branch v3.1.x (Fix clearing rubberband on nbagg)
* :ghpull:`14387`: Fix clearing rubberband on nbagg
* :ghpull:`14435`: Backport PR #14425 on branch v3.1.x (Lic restore license paint)
* :ghpull:`14296`: Fix barbs to accept array of bool for ``flip_barb``
* :ghpull:`14430`: Backport PR #14397 on branch v3.1.x (Correctly set clip_path on pcolorfast return artist.)
* :ghpull:`14397`: Correctly set clip_path on pcolorfast return artist.
* :ghpull:`14409`: Backport PR #14335 on branch v3.1.x (Add explanation of animation.embed_limit to matplotlibrc.template)
* :ghpull:`14335`: Add explanation of animation.embed_limit to matplotlibrc.template
* :ghpull:`14403`: Revert "Preserve whitespace in svg output."
* :ghpull:`14407`: Backport PR #14406 on branch v3.1.x (Remove extra \iint in math_symbol_table for document)
* :ghpull:`14398`: Backport PR #14394 on branch v3.1.x (Update link to "MathML torture test".)
* :ghpull:`14394`: Update link to "MathML torture test".
* :ghpull:`14389`: Backport PR #14388 on branch v3.1.x (Fixed one little spelling error)
* :ghpull:`14385`: Backport PR #14316 on branch v3.1.x (Improve error message for kiwisolver import error (DLL load failed))
* :ghpull:`14388`: Fixed one little spelling error
* :ghpull:`14384`: Backport PR #14369 on branch v3.1.x (Don't use deprecated mathcircled in docs.)
* :ghpull:`14316`: Improve error message for kiwisolver import error (DLL load failed)
* :ghpull:`14369`: Don't use deprecated mathcircled in docs.
* :ghpull:`14375`: Backport PR #14374 on branch v3.1.x (Check that the figure patch is in bbox_artists before trying to remove.)
* :ghpull:`14374`: Check that the figure patch is in bbox_artists before trying to remove.
* :ghpull:`14040`: Gracefully handle non-finite z in tricontour (issue #10167)
* :ghpull:`14342`: Backport PR #14326 on branch v3.1.x (Correctly apply PNG palette when building ImageBase through Pillow.)
* :ghpull:`14326`: Correctly apply PNG palette when building ImageBase through Pillow.
* :ghpull:`14341`: Backport PR #14337 on branch v3.1.x (Docstring cleanup)
* :ghpull:`14337`: Docstring cleanup
* :ghpull:`14325`: Backport PR #14126 on branch v3.1.x (Simplify grouped bar chart example)
* :ghpull:`14324`: Backport PR #14139 on branch v3.1.x (TST: be more explicit about identifying qt4/qt5 imports)
* :ghpull:`14126`: Simplify grouped bar chart example
* :ghpull:`14323`: Backport PR #14290 on branch v3.1.x (Convert SymmetricalLogScale to numpydoc)
* :ghpull:`14139`: TST: be more explicit about identifying qt4/qt5 imports
* :ghpull:`14290`: Convert SymmetricalLogScale to numpydoc
* :ghpull:`14321`: Backport PR #14313 on branch v3.1.x
* :ghpull:`14313`: Support masked array inputs for to_rgba and to_rgba_array.
* :ghpull:`14320`: Backport PR #14319 on branch v3.1.x (Don't set missing history buttons.)
* :ghpull:`14319`: Don't set missing history buttons.
* :ghpull:`14317`: Backport PR #14295: Fix bug in SymmetricalLogTransform.
* :ghpull:`14302`: Backport PR #14255 on branch v3.1.x (Improve docsstring of Axes.streamplot)
* :ghpull:`14255`: Improve docsstring of Axes.streamplot
* :ghpull:`14295`: Fix bug in SymmetricalLogTransform.
* :ghpull:`14294`: Backport PR #14282 on branch v3.1.x (Fix toolmanager's destroy subplots in tk)
* :ghpull:`14282`: Fix toolmanager's destroy subplots in tk
* :ghpull:`14292`: Backport PR #14289 on branch v3.1.x (BUG: Fix performance regression when plotting values from Numpy array sub-classes)
* :ghpull:`14289`: BUG: Fix performance regression when plotting values from Numpy array sub-classes
* :ghpull:`14287`: Backport PR #14286 on branch v3.1.x (fix minor typo)
* :ghpull:`14284`: Backport PR #14279 on branch v3.1.x (In case fallback to Agg fails, let the exception propagate out.)
* :ghpull:`14254`: Merge up 30x
* :ghpull:`14279`: In case fallback to Agg fails, let the exception propagate out.
* :ghpull:`14268`: Backport PR #14261 on branch v3.1.x (Updated polar documentation)
* :ghpull:`14261`: Updated polar documentation
* :ghpull:`14264`: Backport PR #14260 on branch v3.1.x (Remove old OSX FAQ page)
* :ghpull:`14260`: Remove old OSX FAQ page
* :ghpull:`14249`: Backport PR #14243 on branch v3.1.x (Update docstring of makeMappingArray)
* :ghpull:`14250`: Backport PR #14149 on branch v3.1.x
* :ghpull:`14252`: Backport PR #14248 on branch v3.1.x (Fix TextBox not respecting eventson)
* :ghpull:`14253`: Backport PR #13596 on branch v3.1.x (Normalize properties passed to bxp().)
* :ghpull:`14251`: Backport PR #14241 on branch v3.1.x (Fix linear segmented colormap with one element)
* :ghpull:`13596`: Normalize properties passed to bxp().
* :ghpull:`14248`: Fix TextBox not respecting eventson
* :ghpull:`14241`: Fix linear segmented colormap with one element
* :ghpull:`14243`: Update docstring of makeMappingArray
* :ghpull:`14238`: Backport PR #14164 on branch v3.1.x (Fix regexp for dvipng version detection)
* :ghpull:`14149`: Avoid using ``axis([xlo, xhi, ylo, yhi])`` in examples.
* :ghpull:`14164`: Fix regexp for dvipng version detection
* :ghpull:`13739`: Fix pressing tab breaks keymap in CanvasTk

Issues (30):

* :ghissue:`14620`: Plotting on a log/logit scale overwrites axis inverting
* :ghissue:`14615`: Inverting an axis using its limits does not work for log scale
* :ghissue:`14577`: Calling invert_yaxis() on a 3D plot has either no effect or removes ticks
* :ghissue:`14602`: NavigationToolbar2Tk save_figure function bug
* :ghissue:`1219`: Show fails on figures created with the object-oriented system
* :ghissue:`10167`: Segmentation fault with tricontour
* :ghissue:`13723`: RuntimeError when saving PDFs via parallel processes (not threads!)
* :ghissue:`14315`: Improvement: Better error message if kiwisolver fails to import
* :ghissue:`14356`: matplotlib.units.ConversionError on scatter of dates with a NaN in the first position
* :ghissue:`14467`: Docs for plt.ginput() have the wrong default value for show_clicks keyword argument.
* :ghissue:`14225`: Matplotlib crashes on windows while maximizing plot window when using Multicursor
* :ghissue:`14458`: DOC: small inconsistency in errobar docstring
* :ghissue:`14372`: Document that view_init() arguments should be in degrees
* :ghissue:`12201`: issues clearing rubberband on nbagg at non-default browser zoom
* :ghissue:`13576`: pcolorfast misbehaves when changing axis limits
* :ghissue:`14303`: Unable to import matplotlib on Windows 10 v1903
* :ghissue:`14283`: RendererSVG CSS 'white-space' property conflicts with default HTML CSS
* :ghissue:`14293`: imshow() producing "inverted" colors since 3.0.3
* :ghissue:`14322`: Cannot import matplotlib with Python 3.7.x on Win10Pro
* :ghissue:`14137`: Qt5 test auto-skip is not working correctly
* :ghissue:`14301`: scatter() fails on nan-containing input when providing edgecolor
* :ghissue:`14318`: Don't try to set missing history buttons.
* :ghissue:`14265`: symlog looses some points since 3.1.0 (example given)
* :ghissue:`14274`: BUG: plotting with Numpy array subclasses is slow with Matplotlib 3.1.0 (regression)
* :ghissue:`14263`: import pyplot issue -
* :ghissue:`14227`: Update "working with Mpl on OSX" docs
* :ghissue:`13448`: boxplot doesn't normalize properties before applying them
* :ghissue:`14226`: Modify matplotlib TextBox value without triggering callback
* :ghissue:`14232`: LinearSegmentedColormap with N=1 gives confusing error message
* :ghissue:`10365`: Scatter plot with non-sequence ´c´ color should give a better Error message.
.. _github-stats-3-1-0:

GitHub statistics for 3.1.0 (May 18, 2019)
==========================================

GitHub statistics for 2018/09/18 (tag: v3.0.0) - 2019/05/18

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 161 issues and merged 918 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/35?closed=1>`__

The following 150 authors contributed 3426 commits.

* Abhinuv Nitin Pitale
* Adam J. Stewart
* Alistair Muldal
* Alon Hershenhorn
* Andras Deak
* Ankur Dedania
* Antony Lee
* Anubhav Shrimal
* Ao Liu (frankliuao)
* Ayappan P
* azure-pipelines[bot]
* Bas van Schaik
* Ben Root
* Benjamin Bengfort
* Benjamin Congdon
* Bharat123rox
* Brigitta Sipocz
* btang02
* Carsten
* Carsten Schelp
* Cho Yin Yong
* Chris Zimmerman
* Christer Jensen
* Christoph Gohlke
* Christoph Reiter
* Christopher Bradshaw
* Colin
* Colin Carroll
* dabana
* Dana-Farber
* Daniele Nicolodi
* DanielMatu
* David Haberthür
* David Stansby
* Dietmar Schwertberger
* Dmitry Mottl
* E\. G\. Patrick Bos
* Elan Ernest
* Elliott Sales de Andrade
* Eric Firing
* Eric Larson
* Eric Wieser
* esvhd
* fredrik-1
* fuzzythecat
* Galen Lynch
* Gazing
* gwin-zegal
* hannah
* Harshal Prakash Patankar
* hershen
* Ildar Akhmetgaleev
* ImportanceOfBeingErnest
* Isa Hassen
* Jae-Joon Lee
* James A. Bednar
* James Adams
* Jan S. (Milania1)
* Jarrod Millman
* Jessica B. Hamrick
* Jody Klymak
* Joel T. Frederico
* Joel Wanner
* Johannes H. Jensen
* Joseph Albert
* Joshua Klein
* Jouni K. Seppänen
* Jun Tan
* Kai Muehlbauer
* Katrin Leinweber
* Kayla Ngan
* Kevin Rose
* Kjell Le
* KonradAdamczyk
* ksunden
* Kyle Sunden
* Leon Loopik
* Levi Kilcher
* LevN0
* luftek
* Maik Riechert
* Marcel Martin
* Mark Harfouche
* Marko Baštovanović
* Matthias Bussonnier
* Matthias Geier
* Matti Picus
* MeeseeksMachine
* Michael Droettboom
* Michael Jancsy
* Mike Frysinger
* Molly Rossow
* MortenSHUTE
* mromanie
* nathan78906
* Nelle Varoquaux
* Nick Papior
* Nicolas Courtemanche
* Nikita Kniazev
* njwhite
* Oliver Natt
* Paul
* Paul Hobson
* Paul Ivanov
* Paul J. Koprowski
* pharshalp
* Phil Elson
* Pierre Thibault
* QiCuiHub
* Rasmus Diederichsen
* Ratin_Kumar
* Rob Harrigan
* Roman Yurchak
* Ryan May
* Ryan Morshead
* Saket Choudhary
* saksmito
* SBCV
* Sebastian Bullinger
* Sebastian Hegler
* Seunghoon Park
* simon-kraeusel
* smheidrich
* Stephane Raynaud
* Stephen-Chilcote
* sxntxn
* Taehoon Lee
* Takafumi Arakaki
* Taras
* Taras Kuzyo
* teresy
* Thein Oo
* Thomas A Caswell
* Thomas Hisch
* Thomas Robitaille
* thoo
* Tim Hoffmann
* Tobia De Koninck
* Tobias Megies
* Tyler Makaro
* V\. Armando Solé
* Viraj Mohile
* Will Handley
* woclass
* Yasaman-Mah
* yeo
* Yuxin Wu
* Yuya
* Zhili (Jerry) Pan
* zhoubecky

GitHub issues and pull requests:

Pull Requests (918):

* :ghpull:`14209`: Backport PR #14197 on branch v3.1.x (Minor cleanup of acorr/xcoor docs)
* :ghpull:`14210`: Make intro tutorial less jargony.
* :ghpull:`14197`: Minor cleanup of acorr/xcoor docs
* :ghpull:`14203`: Backport PR #14202 on branch v3.1.x (Fix docstring of Line2D.set_data.)
* :ghpull:`14202`: Fix docstring of Line2D.set_data.
* :ghpull:`14196`: Backport PR #14188 on branch v3.1.x (Clarify scope of MouseEvent attributes)
* :ghpull:`14188`: Clarify scope of MouseEvent attributes
* :ghpull:`14194`: Backport PR #14167 on branch v3.1.x (Fix backend_pgf header.)
* :ghpull:`14193`: Backport PR #14153 on branch v3.1.x (Update qt_compat.py test for already imported binding.)
* :ghpull:`14167`: Fix backend_pgf header.
* :ghpull:`14153`: Update qt_compat.py test for already imported binding.
* :ghpull:`14190`: Backport PR #14176 on branch v3.1.x (Merge doc/api/api_overview and doc/api/index.)
* :ghpull:`14192`: Unbreak testsuite for pytest 4.5.
* :ghpull:`14189`: Backport PR #14186 on branch v3.1.x (Update FancyBboxPatch docs to numpydoc style)
* :ghpull:`14176`: Merge doc/api/api_overview and doc/api/index.
* :ghpull:`14186`: Update FancyBboxPatch docs to numpydoc style
* :ghpull:`14187`: Backport PR #13169 on branch v3.1.x (Add example code for current logo)
* :ghpull:`14165`: Backport PR #14156 on branch v3.1.x (Fix glyph loading in textpath.)
* :ghpull:`14156`: Fix glyph loading in textpath.
* :ghpull:`14162`: Backport PR #14150 on branch v3.1.x (Fix deprecation of withdash for figtext().)
* :ghpull:`14150`: Fix deprecation of withdash for figtext().
* :ghpull:`14136`: Backport PR #14109 on branch v3.1.x
* :ghpull:`14109`: Some simple pyplot doc improvements
* :ghpull:`14129`: Backport PR #14117 on branch v3.1.x (Simplify ribbon_box example.)
* :ghpull:`14128`: Backport PR #14057 on branch v3.1.x (Improve Gradient bar example)
* :ghpull:`14127`: Backport PR #14125 on branch v3.1.x (Remove extra keyword from pytest.skip call.)
* :ghpull:`14117`: Simplify ribbon_box example.
* :ghpull:`14057`: Improve Gradient bar example
* :ghpull:`14125`: Remove extra keyword from pytest.skip call.
* :ghpull:`14123`: Backport PR #14119 on branch v3.1.x (Add ridge_map to third party packages documentation)
* :ghpull:`14119`: Add ridge_map to third party packages documentation
* :ghpull:`14103`: Backport PR #14088 on branch v3.1.x (Cleanup major_minor_demo.)
* :ghpull:`14102`: Backport PR #14100 on branch v3.1.x (Improve docstring of axes_zoom_effect example.)
* :ghpull:`14099`: Backport PR #14090 on branch v3.1.x (Pep8ify some variable names in examples.)
* :ghpull:`14100`: Improve docstring of axes_zoom_effect example.
* :ghpull:`14088`: Cleanup major_minor_demo.
* :ghpull:`14090`: Pep8ify some variable names in examples.
* :ghpull:`14097`: Backport PR #14079 on branch v3.1.x (Consistently use axs.flat instead of axs.flatten())
* :ghpull:`14095`: Backport PR #14087 on branch v3.1.x (Cleanup date example.)
* :ghpull:`14094`: Backport PR #14029 on branch v3.1.x (Fix doc building with numpydoc 0.9)
* :ghpull:`14093`: Backport PR #14052 on branch v3.1.x (Check axes identity in image.contains.)
* :ghpull:`14092`: Backport PR #14056 on branch v3.1.x (FIX: do not try to manage the visibility of un-drawn ticks)
* :ghpull:`14091`: Backport PR #14078 on branch v3.1.x (Minor fix in multiple subplots example)
* :ghpull:`14079`: Consistently use axs.flat instead of axs.flatten()
* :ghpull:`14087`: Cleanup date example.
* :ghpull:`14029`: Fix doc building with numpydoc 0.9
* :ghpull:`14052`: Check axes identity in image.contains.
* :ghpull:`14056`: FIX: do not try to manage the visibility of un-drawn ticks
* :ghpull:`14078`: Minor fix in multiple subplots example
* :ghpull:`14080`: Backport PR #14069 on branch v3.1.x (Don't try to use the colorbar formatter to format RGBA data.)
* :ghpull:`14069`: Don't try to use the colorbar formatter to format RGBA data.
* :ghpull:`14074`: Backport PR #14019 on branch v3.1.x (Update docstring of locator_params())
* :ghpull:`14019`: Update docstring of locator_params()
* :ghpull:`14066`: Backport PR #14053 on branch v3.1.x (Improve fill() example)
* :ghpull:`14065`: Backport PR #14059 on branch v3.1.x (Improve Scatter hist example)
* :ghpull:`14067`: Backport PR #14062 on branch v3.1.x (Improve advanced quiver example)
* :ghpull:`14062`: Improve advanced quiver example
* :ghpull:`14053`: Improve fill() example
* :ghpull:`14059`: Improve Scatter hist example
* :ghpull:`14064`: Backport PR #14043 on branch v3.1.x (Ensure errorbars are always drawn on top of bars in ax.bar)
* :ghpull:`14043`: Ensure errorbars are always drawn on top of bars in ax.bar
* :ghpull:`14061`: Backport PR #14051 on branch v3.1.x (Add Yellowbrick to third party packages)
* :ghpull:`14051`: Add Yellowbrick to third party packages
* :ghpull:`14050`: Backport PR #14048 on branch v3.1.x (Fix Animation.save)
* :ghpull:`14049`: Backport PR #14047 on branch v3.1.x (Remove references to "Draws" in matplotlib.patches)
* :ghpull:`14048`: Fix Animation.save
* :ghpull:`14047`: Remove references to "Draws" in matplotlib.patches
* :ghpull:`14037`: Backport PR #14033 on branch v3.1.x (Reword add_subplot docstring.)
* :ghpull:`14036`: Backport PR #14001 on branch v3.1.x ([BUG] DOC: Remove broken references to vischeck)
* :ghpull:`14033`: Reword add_subplot docstring.
* :ghpull:`14032`: Backport PR #14030 on branch v3.1.x (Update colorcet link)
* :ghpull:`14030`: Update colorcet link
* :ghpull:`14027`: Backport PR #14026 on branch v3.1.x (Fix bug in plot_directive that caused links to plots in different formats to be missing)
* :ghpull:`14026`: Fix bug in plot_directive that caused links to plots in different formats to be missing
* :ghpull:`14012`: Backport PR #14008 on branch v3.1.x (Don't install tests by default.)
* :ghpull:`14017`: Backport PR #14015 on branch v3.1.x (Fix docstring of pyplot.clim())
* :ghpull:`14015`: Fix docstring of pyplot.clim()
* :ghpull:`14008`: Don't install tests by default.
* :ghpull:`14006`: Backport PR #13998 on branch v3.1.x (Fix patch contains logic for patches that don't have any codes)
* :ghpull:`14005`: Backport PR #14004 on branch v3.1.x (DOC: pin numpydoc to less than 0.9)
* :ghpull:`13998`: Fix patch contains logic for patches that don't have any codes
* :ghpull:`13999`: Backport PR #13992 on branch v3.1.x (FIX: undeprecate MaxNLocator default_params)
* :ghpull:`13997`: Backport PR #13995 on branch v3.1.x (DOC: explain zorder for gridlines in grid docstring)
* :ghpull:`13992`: FIX: undeprecate MaxNLocator default_params
* :ghpull:`13995`: DOC: explain zorder for gridlines in grid docstring
* :ghpull:`13990`: Backport PR #13989 on branch v3.1.x (FIX: update not replace hist_kwargs when density is passed)
* :ghpull:`13989`: FIX: update not replace hist_kwargs when density is passed
* :ghpull:`13975`: Backport PR #13966 on branch v3.1.x (Fix colorbar setting without artist)
* :ghpull:`13976`: Backport PR #13973 on branch v3.1.x (BUG: Ensure docstrings are not accessed with -OO)
* :ghpull:`13856`: What's new page for 3.1
* :ghpull:`13966`: Fix colorbar setting without artist
* :ghpull:`13973`: BUG: Ensure docstrings are not accessed with -OO
* :ghpull:`13969`: Backport PR #13950 on branch v3.1.x (confidence_ellipse_markup)
* :ghpull:`13950`: confidence_ellipse_markup
* :ghpull:`13965`: Backport PR #13962 on branch v3.1.x (Fix typo in code example in docstring.)
* :ghpull:`13964`: Backport PR #13870 on branch v3.1.x (3.1.0 API changes page)
* :ghpull:`13962`: Fix typo in code example in docstring.
* :ghpull:`13870`: 3.1.0 API changes page
* :ghpull:`13961`: Backport PR #13914 on branch v3.1.x (Improve Rainbow text example)
* :ghpull:`13960`: Backport PR #13958 on branch v3.1.x (Remove transparent fancy legend example)
* :ghpull:`13914`: Improve Rainbow text example
* :ghpull:`13958`: Remove transparent fancy legend example
* :ghpull:`13956`: Backport PR #13908 on branch v3.1.x (Enh control tick deconflict2)
* :ghpull:`13955`: Backport PR #13941 on branch v3.1.x (Add project_urls to setup)
* :ghpull:`13908`: Enh control tick deconflict2
* :ghpull:`13954`: Backport PR #13949 on branch v3.1.x (DOC: Add documentation to Text.set_fontfamily)
* :ghpull:`13941`: Add project_urls to setup
* :ghpull:`13949`: DOC: Add documentation to Text.set_fontfamily
* :ghpull:`13951`: Backport PR #13939 on branch v3.1.x (Bunch of docstring cleanups.)
* :ghpull:`13939`: Bunch of docstring cleanups.
* :ghpull:`13947`: Backport PR #13897 on branch v3.1.x (numpydocification.)
* :ghpull:`13897`: numpydocification.
* :ghpull:`13946`: Backport PR #13924 on branch v3.1.x (Followup to deprecation of usetex parameter in get_text_path.)
* :ghpull:`13924`: Followup to deprecation of usetex parameter in get_text_path.
* :ghpull:`13916`: Backport PR #13850 on branch v3.1.x (Cleanup STIX Font Demo)
* :ghpull:`13915`: Backport PR #13835 on branch v3.1.x (Improve Conectionstyle Demo)
* :ghpull:`13850`: Cleanup STIX Font Demo
* :ghpull:`13835`: Improve Conectionstyle Demo
* :ghpull:`13846`: Backport PR #13836 on branch v3.1.x (MNT: account for cpython deprecations)
* :ghpull:`13898`: Backport PR #13896 on branch v3.1.x (Fix cbook.boxplot_stats docstring)
* :ghpull:`13896`: Fix cbook.boxplot_stats docstring
* :ghpull:`13893`: Backport PR #13890 on branch v3.1.x (rst seealso -> numpydoc "See Also".)
* :ghpull:`13890`: rst seealso -> numpydoc "See Also".
* :ghpull:`13888`: Backport PR #13862 on branch v3.1.x (Move 3.x API changes to prev_api_changes)
* :ghpull:`13862`: Move 3.x API changes to prev_api_changes
* :ghpull:`13882`: Backport PR #13867 on branch v3.1.x (Rename "docs" to "contents" in navigation bar)
* :ghpull:`13867`: Rename "docs" to "contents" in navigation bar
* :ghpull:`13881`: Backport PR #13874 on branch v3.1.x (Remove redundant call to Formatter.set_locs() before .format_ticks().)
* :ghpull:`13874`: Remove redundant call to Formatter.set_locs() before .format_ticks().
* :ghpull:`13871`: Backport PR #13868 on branch v3.1.x (Correctly handle fallout of defining PY_SSIZE_T_CLEAN on Windows.)
* :ghpull:`13869`: Backport PR #13861 on branch v3.1.x (Fix remaining links in docs)
* :ghpull:`13868`: Correctly handle fallout of defining PY_SSIZE_T_CLEAN on Windows.
* :ghpull:`13861`: Fix remaining links in docs
* :ghpull:`13849`: Backport PR #13845 on branch v3.1.x (Fix some broken documentation links)
* :ghpull:`13845`: Fix some broken documentation links
* :ghpull:`13836`: MNT: account for cpython deprecations
* :ghpull:`13841`: Backport PR #12928 on branch v3.1.x (textpath encoding)
* :ghpull:`13842`: Backport PR #13827 on branch v3.1.x (Better MovieWriter init error message)
* :ghpull:`13838`: Backport PR #13570 on branch v3.1.x (Add new example for plotting a confidence_ellipse)
* :ghpull:`13827`: Better MovieWriter init error message
* :ghpull:`13839`: Backport PR #13815 on branch v3.1.x (Numpydocify FontManager.findfont())
* :ghpull:`13837`: Backport PR #8638 on branch v3.1.x (FIX: if bins input to hist is str, treat like no bins)
* :ghpull:`12928`: textpath encoding
* :ghpull:`13815`: Numpydocify FontManager.findfont()
* :ghpull:`13570`: Add new example for plotting a confidence_ellipse
* :ghpull:`8638`: FIX: if bins input to hist is str, treat like no bins
* :ghpull:`13831`: Backport PR #13780 on branch v3.1.x (numpydoc ListedColormap parameters)
* :ghpull:`13780`: numpydoc ListedColormap parameters
* :ghpull:`13830`: Backport PR #13829 on branch v3.1.x (numpydoc IndexFormatter)
* :ghpull:`13829`: numpydoc IndexFormatter
* :ghpull:`13828`: Backport PR #13821 on branch v3.1.x (Remove \mathcircled from mathtext docs following its deprecation.)
* :ghpull:`13821`: Remove \mathcircled from mathtext docs following its deprecation.
* :ghpull:`13822`: Backport PR #13817 on branch v3.1.x (Remove borders from barcode example)
* :ghpull:`13820`: Backport PR #13816 on branch v3.1.x (Correct windows env variable format)
* :ghpull:`13816`: Correct windows env variable format
* :ghpull:`13817`: Remove borders from barcode example
* :ghpull:`13814`: Merge pull request #13805 from timhoffm/pin-sphinx-1.x
* :ghpull:`13813`: Backport PR #13764 on branch v3.1.x (Deprecate \mathcircled.)
* :ghpull:`13764`: Deprecate \mathcircled.
* :ghpull:`13805`: Pin Sphinx to 1.x
* :ghpull:`13807`: Backport PR #13800 on branch v3.1.x (Doc typos.)
* :ghpull:`13800`: Doc typos.
* :ghpull:`13806`: Backport PR #13771 on branch v3.1.x (patches.Arc docstring update #13759)
* :ghpull:`13804`: Backport PR #13766 on branch v3.1.x (Search for fonts in XDG directory as well.)
* :ghpull:`13771`: patches.Arc docstring update #13759
* :ghpull:`13766`: Search for fonts in XDG directory as well.
* :ghpull:`13794`: Backport PR #13695 on branch v3.1.x (numpydocify transform_angles.)
* :ghpull:`13793`: Backport PR #13762 on branch v3.1.x (Cleanup marker_reference example.)
* :ghpull:`13792`: Backport PR #13789 on branch v3.1.x (BUG: Fix function signature mismatch for set_clim)
* :ghpull:`13791`: Backport PR #13787 on branch v3.1.x (Fix failure to import matplotlib.animation on Windows.)
* :ghpull:`13695`: numpydocify transform_angles.
* :ghpull:`13762`: Cleanup marker_reference example.
* :ghpull:`13789`: BUG: Fix function signature mismatch for set_clim
* :ghpull:`13787`: Fix failure to import matplotlib.animation on Windows.
* :ghpull:`13781`: Backport PR #13777 on branch v3.1.x (Use class-based directive for mathmpl sphinxext.)
* :ghpull:`13790`: Backport PR #13564 on branch v3.1.x (Add an option to log progress while saving animations)
* :ghpull:`13564`: Add an option to log progress while saving animations
* :ghpull:`13777`: Use class-based directive for mathmpl sphinxext.
* :ghpull:`13765`: Backport PR #13761 on branch v3.1.x (Deprecate verbose-related rcParams.)
* :ghpull:`13761`: Deprecate verbose-related rcParams.
* :ghpull:`13760`: Backport PR #13719 on branch v3.1.x (Doc: Update timeline example)
* :ghpull:`13704`: Backport PR #13021 on branch v3.1.x (Undesirable behaviour of MixedModeRenderer)
* :ghpull:`13758`: Backport PR #13674 on branch v3.1.x (Preserve whitespace in svg output.)
* :ghpull:`13719`: Doc: Update timeline example
* :ghpull:`13674`: Preserve whitespace in svg output.
* :ghpull:`13755`: Backport PR #13741 on branch v3.1.x (FIX: make title move above ticklabels)
* :ghpull:`13754`: Backport PR #13712 on branch v3.1.x (Deprecate NavigationToolbar2QT.adj_window (unused and always None).)
* :ghpull:`13741`: FIX: make title move above ticklabels
* :ghpull:`13712`: Deprecate NavigationToolbar2QT.adj_window (unused and always None).
* :ghpull:`13752`: Backport PR #13732 on branch v3.1.x (Fix doc markup.)
* :ghpull:`13753`: Backport PR #13751 on branch v3.1.x (DOC/FIX: try merging comments)
* :ghpull:`13751`: DOC/FIX: try merging comments
* :ghpull:`13732`: Fix doc markup.
* :ghpull:`13750`: Backport PR #13743 on branch v3.1.x (Fix doc warning)
* :ghpull:`13743`: Fix doc warning
* :ghpull:`13747`: Backport PR #13745 on branch v3.1.x (Fix stem(use_line_collection))
* :ghpull:`13748`: Backport PR #13716 on branch v3.1.x (Kill attributes that are never used/updated.)
* :ghpull:`13716`: Kill attributes that are never used/updated.
* :ghpull:`13745`: Fix stem(use_line_collection)
* :ghpull:`13710`: TST: only test agg_filter extensions with baseline images
* :ghpull:`13709`: Backport PR #8690 on branch v3.1.x
* :ghpull:`13707`: Backport PR #12760 on branch v3.1.x (Deduplicate implementation of per-backend Tools.)
* :ghpull:`13706`: Backport PR #13689 on branch v3.1.x (BUG: fix scaling of quiverkey when quiver scale_units='xy')
* :ghpull:`13705`: Backport PR #12419 on branch v3.1.x (Add DivergingNorm (again, again, again))
* :ghpull:`13703`: Backport PR #12170 on branch v3.1.x (Deprecate considering \*args, \*\*kwargs in Timer.remove_callback.)
* :ghpull:`12760`: Deduplicate implementation of per-backend Tools.
* :ghpull:`13689`: BUG: fix scaling of quiverkey when quiver scale_units='xy'
* :ghpull:`12419`: Add DivergingNorm (again, again, again)
* :ghpull:`8690`: Adds support for rgba and rgb images to pcolorfast
* :ghpull:`13021`: Undesirable behaviour of MixedModeRenderer
* :ghpull:`12170`: Deprecate considering \*args, \*\*kwargs in Timer.remove_callback.
* :ghpull:`13700`: Backport PR #13588 on branch v3.1.x (FIX: fallback to viewlims if no data)
* :ghpull:`13694`: Backport PR #13677 on branch v3.1.x (Log all failures to extract font properties.)
* :ghpull:`13588`: FIX: fallback to viewlims if no data
* :ghpull:`13692`: Backport PR #13677 on branch v3.0.x (Log all failures to extract font properties.)
* :ghpull:`13677`: Log all failures to extract font properties.
* :ghpull:`13691`: Backport PR #13687 on branch v3.1.x (Update stem example)
* :ghpull:`13687`: Update stem example
* :ghpull:`13688`: Backport PR #13684 on branch v3.1.x (Use format_data_short to format image cursor data.)
* :ghpull:`13684`: Use format_data_short to format image cursor data.
* :ghpull:`13686`: Backport PR #13363 on branch v3.1.x (Inline iter_ticks into _update_ticks, and use that in mplot3d.)
* :ghpull:`13363`: Inline iter_ticks into _update_ticks, and use that in mplot3d.
* :ghpull:`13681`: Backport PR #13678 on branch v3.1.x (Fix font deduplication logic in createFontList.)
* :ghpull:`13678`: Fix font deduplication logic in createFontList.
* :ghpull:`13669`: Backport PR #13667 on branch v3.1.x (Fix incorrect signature in axis() doc.)
* :ghpull:`13667`: Fix incorrect signature in axis() doc.
* :ghpull:`13664`: Backport PR #12637 on branch v3.1.x (Tell IPython the correct GUI event loop to use for all backends.)
* :ghpull:`13665`: Backport PR #13601 on branch v3.1.x (Add a make-parameter-keyword-only-with-deprecation decorator.)
* :ghpull:`13601`: Add a make-parameter-keyword-only-with-deprecation decorator.
* :ghpull:`12637`: Tell IPython the correct GUI event loop to use for all backends.
* :ghpull:`13662`: Backport PR #13064 on branch v3.1.x (Don't explicitly add default include paths to Extensions)
* :ghpull:`13064`: Don't explicitly add default include paths to Extensions
* :ghpull:`13658`: Backport PR #13652 on branch v3.1.x (Fix empty FancyArrow crash)
* :ghpull:`13652`: Fix empty FancyArrow crash
* :ghpull:`13655`: Backport PR #11692 on branch v3.1.x (Deprecate frameon kwarg and rcParam to savefig.)
* :ghpull:`13654`: Backport PR #13614 on branch v3.1.x (Fix polar get window extent)
* :ghpull:`11692`: Deprecate frameon kwarg and rcParam to savefig.
* :ghpull:`13614`: Fix polar get window extent
* :ghpull:`13646`: Backport PR #13645 on branch v3.1.x (widgets.py fix examples connect -> mpl_connect)
* :ghpull:`13645`: widgets.py fix examples connect -> mpl_connect
* :ghpull:`13644`: Backport PR #13612 on branch v3.1.x (Improve Demo Text Rotation Mode)
* :ghpull:`13612`: Improve Demo Text Rotation Mode
* :ghpull:`13636`: Backport PR #13621 on branch v3.1.x (Remove ``asfileobj=False`` from a bunch of examples loading sample_data.)
* :ghpull:`13635`: Backport PR #13632 on branch v3.1.x (Clarify tick collision API change doc.)
* :ghpull:`13634`: Backport PR #13631 on branch v3.1.x (Switch deprecation of Tick.label to pending.)
* :ghpull:`13621`: Remove ``asfileobj=False`` from a bunch of examples loading sample_data.
* :ghpull:`13632`: Clarify tick collision API change doc.
* :ghpull:`13631`: Switch deprecation of Tick.label to pending.
* :ghpull:`13628`: Backport PR #13603 on branch v3.1.x
* :ghpull:`13603`: FIX: continue to bail tight layout if rect supplied
* :ghpull:`13627`: Backport PR #13622 on branch v3.1.x (Change title of named colors example)
* :ghpull:`13626`: Backport PR #13549 on branch v3.1.x (Simplify some annotation() calls in examples.)
* :ghpull:`13624`: Backport PR #13610 on branch v3.1.x (Update centered ticklabels example)
* :ghpull:`13625`: Backport PR #13611 on branch v3.1.x (Fix text position in Fancytextbox demo)
* :ghpull:`13622`: Change title of named colors example
* :ghpull:`13610`: Update centered ticklabels example
* :ghpull:`13611`: Fix text position in Fancytextbox demo
* :ghpull:`13607`: Backport PR #13605 on branch v3.1.x (Warn on attempts at semi-transparent outputs in ps backend.)
* :ghpull:`13608`: Backport PR #13602 on branch v3.1.x (Deprecate cbook.is_hashable.)
* :ghpull:`13602`: Deprecate cbook.is_hashable.
* :ghpull:`13605`: Warn on attempts at semi-transparent outputs in ps backend.
* :ghpull:`13599`: Backport PR #13590 on branch v3.1.x (Doc event loop requirements for Figure.show)
* :ghpull:`13590`: Doc event loop requirements for Figure.show
* :ghpull:`13597`: Backport PR #12359 on branch v3.1.x (ENH: Add boolean support for axis())
* :ghpull:`13594`: Backport PR #13592 on branch v3.1.x (DOC: Make canonical URLs point to versioned path.)
* :ghpull:`13592`: DOC: Make canonical URLs point to versioned path.
* :ghpull:`12359`: ENH: Add boolean support for axis()
* :ghpull:`13587`: Backport PR #13573 on branch v3.1.x (Fix mplot3d transparency)
* :ghpull:`13573`: Fix mplot3d transparency
* :ghpull:`13585`: Backport PR #13578 on branch v3.1.x (Revert invalid change in Centered Ticklabels example)
* :ghpull:`13584`: Backport PR #13582 on branch v3.1.x (Cleanup two font-related examples.)
* :ghpull:`13578`: Revert invalid change in Centered Ticklabels example
* :ghpull:`13582`: Cleanup two font-related examples.
* :ghpull:`13579`: Backport PR #13477 on branch v3.1.x (FIX: make EngFormatter respect axes.unicode_minus rcParam)
* :ghpull:`13577`: Backport PR #12832 on branch v3.1.x (Deprecate redundant log-scale transform classes.)
* :ghpull:`13477`: FIX: make EngFormatter respect axes.unicode_minus rcParam
* :ghpull:`12832`: Deprecate redundant log-scale transform classes.
* :ghpull:`13574`: Backport PR #12856 on branch v3.1.x (added property  usemathtext to EngFormatter)
* :ghpull:`12856`: added property  usemathtext to EngFormatter
* :ghpull:`13572`: Backport PR #12899 on branch v3.1.x (Small cleanups.)
* :ghpull:`13571`: Backport PR #11553 on branch v3.1.x (Improved Code for Segments Intersect)
* :ghpull:`12899`: Small cleanups.
* :ghpull:`11553`: Improved Code for Segments Intersect
* :ghpull:`13568`: Backport PR #13563 on branch v3.1.x (FIX: inverted colorbar ticks)
* :ghpull:`13563`: FIX: inverted colorbar ticks
* :ghpull:`13530`: BUG: keep the ticks when the colorbar axis is inverted
* :ghpull:`13565`: Backport PR #13550 on branch v3.1.x (Strip out Py2-compat in setupext.)
* :ghpull:`13550`: Strip out Py2-compat in setupext.
* :ghpull:`13562`: Backport PR #13560 on branch v3.1.x (Improve GridSpec doc)
* :ghpull:`13560`: Improve GridSpec doc
* :ghpull:`13558`: Backport PR #13546 on branch v3.1.x ( Modified docstring of the set_ylabel and set_xlabel)
* :ghpull:`13559`: Backport PR #12062 on branch v3.1.x (Separate alpha and rbg interpolation then recombine to fix issue11316)
* :ghpull:`13557`: Backport PR #13548 on branch v3.1.x (Deprecate TextWithDash.)
* :ghpull:`12062`: Separate alpha and rbg interpolation then recombine to fix issue11316
* :ghpull:`13546`:  Modified docstring of the set_ylabel and set_xlabel
* :ghpull:`13548`: Deprecate TextWithDash.
* :ghpull:`13549`: Simplify some annotation() calls in examples.
* :ghpull:`13552`: Backport PR #11241 on branch v3.1.x (Deprecate the MATPLOTLIBDATA environment variable.)
* :ghpull:`11241`: Deprecate the MATPLOTLIBDATA environment variable.
* :ghpull:`13547`: Backport PR #9314 on branch v3.1.x (Simplify units.Registry.get_converter.)
* :ghpull:`13545`: Backport PR #13541 on branch v3.1.x (DOC: Remove mention of 'complex' mode in specgram docstring)
* :ghpull:`9314`: Simplify units.Registry.get_converter.
* :ghpull:`13541`: DOC: Remove mention of 'complex' mode in specgram docstring
* :ghpull:`13539`: Backport PR #12950 on branch v3.1.x (Inline or simplify FooFormatter.pprint_val.)
* :ghpull:`13538`: Backport PR #12748 on branch v3.1.x (Use the builtin GTK3 FileChooser rather than our custom subclass.)
* :ghpull:`13537`: Backport PR #12781 on branch v3.1.x (Lazy import of private modules)
* :ghpull:`12950`: Inline or simplify FooFormatter.pprint_val.
* :ghpull:`12748`: Use the builtin GTK3 FileChooser rather than our custom subclass.
* :ghpull:`12781`: Lazy import of private modules
* :ghpull:`11218`: fix pkg-config handling to make cross-compiling work
* :ghpull:`13531`: Backport PR #11964 on branch v3.1.x (Simplify extension setup.)
* :ghpull:`11964`: Simplify extension setup.
* :ghpull:`13529`: Backport PR #13525 on branch v3.1.x (Move some links in rst out of running text.)
* :ghpull:`13528`: Backport PR #13526 on branch v3.1.x (DOC: fix Subplot calls)
* :ghpull:`13525`: Move some links in rst out of running text.
* :ghpull:`13526`: DOC: fix Subplot calls
* :ghpull:`13523`: Backport PR #13521 on branch v3.1.x (Small cleanup to headings of 3d examples.)
* :ghpull:`13521`: Small cleanup to headings of 3d examples.
* :ghpull:`13519`: Backport PR #12716 on branch v3.1.x (FIX: return the actual ax.get_window_extent)
* :ghpull:`13518`: Backport PR #12839 on branch v3.1.x (BUG: Prevent Tick params calls from overwriting visibility without being told to)
* :ghpull:`12716`: FIX: return the actual ax.get_window_extent
* :ghpull:`12839`: BUG: Prevent Tick params calls from overwriting visibility without being told to
* :ghpull:`13517`: Fix heading hierarchy in annotation tutorial.
* :ghpull:`13516`: Backport PR #13514 on branch v3.1.x (Add missing show() at end of example.)
* :ghpull:`13514`: Add missing show() at end of example.
* :ghpull:`13512`: Backport PR #13511 on branch v3.1.x (Add missing plt.show() at end of example.)
* :ghpull:`13511`: Add missing plt.show() at end of example.
* :ghpull:`13508`: Backport PR #13413 on branch v3.1.x (Simplify decade up- and down-rounding, and symmetrize expansion of degenerate log scales.)
* :ghpull:`13509`: Backport PR #13492 on branch v3.1.x (Doc more release updates)
* :ghpull:`13492`: Doc more release updates
* :ghpull:`13413`: Simplify decade up- and down-rounding, and symmetrize expansion of degenerate log scales.
* :ghpull:`13507`: Backport PR #13488 on branch v3.1.x (Animation:  interactive zoom/pan with blitting does not work)
* :ghpull:`13488`: Animation:  interactive zoom/pan with blitting does not work
* :ghpull:`13505`: Backport PR #13459 on branch v3.1.x (Document histogramming pre-binned data.)
* :ghpull:`13503`: Backport PR #10776 on branch v3.1.x (fix FancyArrowPatch picker fails depending on arrowstyle)
* :ghpull:`13504`: Backport PR #13123 on branch v3.1.x (Add shading to Axes3D.voxels, and enable it by default)
* :ghpull:`13502`: Backport PR #13180 on branch v3.1.x (Various TextPath cleanups.)
* :ghpull:`13459`: Document histogramming pre-binned data.
* :ghpull:`13501`: Backport PR #13209 on branch v3.1.x (Deprecate support for (n, 1)-shaped error arrays in errorbar().)
* :ghpull:`13500`: Backport PR #12763 on branch v3.1.x (Remove deprecated rcParams.)
* :ghpull:`13123`: Add shading to Axes3D.voxels, and enable it by default
* :ghpull:`13499`: Backport PR #13303 on branch v3.1.x (Unify checking of executable info.)
* :ghpull:`10776`: fix FancyArrowPatch picker fails depending on arrowstyle
* :ghpull:`13180`: Various TextPath cleanups.
* :ghpull:`13498`: Backport PR #13314 on branch v3.1.x (Move major/minor tick overstrike logic to Axis.)
* :ghpull:`13209`: Deprecate support for (n, 1)-shaped error arrays in errorbar().
* :ghpull:`12763`: Remove deprecated rcParams.
* :ghpull:`13303`: Unify checking of executable info.
* :ghpull:`13497`: Backport PR #13057 on branch v3.1.x (Simplify callable(self._contains) checks)
* :ghpull:`13314`: Move major/minor tick overstrike logic to Axis.
* :ghpull:`13057`: Simplify callable(self._contains) checks
* :ghpull:`13496`: Backport PR #13465 on branch v3.1.x (FIX: polar set_rlim allow bottom-only call)
* :ghpull:`13465`: FIX: polar set_rlim allow bottom-only call
* :ghpull:`13495`: Backport PR #12232 on branch v3.1.x (Add helper function to check that an argument is in a list of strings.)
* :ghpull:`12232`: Add helper function to check that an argument is in a list of strings.
* :ghpull:`11708`: Revert "Skip wx interactive tests on OSX."
* :ghpull:`13062`: Update FAQ re: batch/webserver use.
* :ghpull:`12904`: Support forward/backward mouse buttons
* :ghpull:`12150`: Deprecate \stackrel.
* :ghpull:`13449`: Let boxplot() defer rcParams application to bxp()
* :ghpull:`13425`: API: un-deprecate keyword only args to set_xlim, set_ylim
* :ghpull:`13447`: Update axes_grid docs
* :ghpull:`13473`: Deprecate backend_wx.IDLE_DELAY.
* :ghpull:`13476`: Add font to pyplot.xkcd()
* :ghpull:`13475`: Cleanup titles of embedding examples.
* :ghpull:`13468`: Suppress chaining of cache lookup failure in color conversion.
* :ghpull:`13467`: Add "c" shorthand for "color" for the Text class.
* :ghpull:`13398`: FIX: let pandas IndexInt64 work for boxplot
* :ghpull:`13375`: Improve Axes selection in Qt figure options.
* :ghpull:`13421`: DOC: update release guide
* :ghpull:`13275`: Simple logging interface.
* :ghpull:`13427`: Simplify check for tight-bbox finiteness.
* :ghpull:`13444`: Allow constructing boxplots over multiple calls.
* :ghpull:`13385`: Remove/rework uses of np.where where possible.
* :ghpull:`13441`: Make AFM parser both more compliant and less strict.
* :ghpull:`13384`: Replace np.compress by boolean indexing.
* :ghpull:`13422`: Clarify IndexError for out-of-bounds indexing of gridspec.
* :ghpull:`13443`: Remove some outdated comments from rcsetup.py.
* :ghpull:`13357`: Inherit some docstrings in backend code.
* :ghpull:`12380`: Stem speedup2
* :ghpull:`13368`: FIX: Fix shape of hist output when input is multidimensional empty list
* :ghpull:`5590`: [mpl_toolkits] Fix picking for things drawn on parasite axes
* :ghpull:`13323`: Move the call to Formatter.set_locs into Formatter.format_ticks.
* :ghpull:`13424`: Deprecate Quiver.color in favor of Quiver.get_facecolor().
* :ghpull:`13434`: More smoketesting of pcolorfast.
* :ghpull:`13395`: Cleanup demo_curvelinear_grid.
* :ghpull:`13411`: Deemphasize numeric locations for legend() in docs.
* :ghpull:`13419`: FIX: secondary_axis resize
* :ghpull:`13020`: Deprecate proj3d.mod.
* :ghpull:`13030`: Deprecate internal functions exposed in the public API of mplot3d
* :ghpull:`13408`: test_figure style fixes.
* :ghpull:`11127`: Legend for Scatter
* :ghpull:`11855`: Adding the possible to add full command line in animation
* :ghpull:`13409`: Add nonsingular to the locator base class, and use it in set_*lim too.
* :ghpull:`11859`: ENH: add secondary x/y axis
* :ghpull:`13235`: Vectorize mplot3d.art3d.zalpha.
* :ghpull:`10411`: New "accepts units" decorator
* :ghpull:`13403`: FIX: remove idle_event
* :ghpull:`13069`: 5 minor divisions when major ticks are 2.5 units apart
* :ghpull:`13402`: Fix empty reshape2d
* :ghpull:`11683`: Reuse axes_grid1's AxisDict in axisartist, instead of duplicating it.
* :ghpull:`12141`: Let digits toggle axes nav only if they correspond to an existing axes.
* :ghpull:`9845`: Add inaxes method to FigureCanvas to check whether point is in an axes.
* :ghpull:`13396`: mpl_toolkits style fixes.
* :ghpull:`11497`: Make CI fail if interactive toolkits can't be tested
* :ghpull:`11595`: test doc rendering
* :ghpull:`13393`: Deprecate Spine.is_frame_like.
* :ghpull:`13391`: Remove colour specification from some examples
* :ghpull:`13386`: Replace use of np.<ufunc> by operators (</&/\|).
* :ghpull:`13389`: Inherit more docstrings.
* :ghpull:`13387`: Fix regression in docstring.dedent_interpd.
* :ghpull:`13383`: Replace np.take by normal indexing.
* :ghpull:`13381`: Avoid unneeded copies from flatten().
* :ghpull:`13354`: Properly deprecate non-1D inputs to pie().
* :ghpull:`13379`: Remove citation entry from FAQ.
* :ghpull:`13380`: Minor simplifications to scatter3d.
* :ghpull:`13173`: Decorator for deleting a parameter with a deprecation period.
* :ghpull:`8205`: [MRG+1] plot_date() after axhline() doesn't rescale axes
* :ghpull:`11027`: Specify custom tick space heuristic in MaxNLocator
* :ghpull:`13262`: Shorten setupext and remove uninformative build log entries.
* :ghpull:`13377`: Add private helper to internally suppress deprecations.
* :ghpull:`13376`: Undeprecate case-insensitive "long" colornames.
* :ghpull:`13373`: Deprecate axis3d.Axis.get_tick_positions.
* :ghpull:`13362`: Kill the unused, private _get_pixel_distance_along_axis.
* :ghpull:`12772`: Improve plot() docstring.
* :ghpull:`13359`: DOC: change language a bit
* :ghpull:`13351`: Fix: Log Colorbar minorticks_off reverted if ticks set
* :ghpull:`13356`: More spelling fixes.
* :ghpull:`13125`: Simplify and tighten the docstring handling API.
* :ghpull:`13346`: Simplify parsing of tuple in C extension code.
* :ghpull:`13282`: MAINT install of pinned vers for travis
* :ghpull:`13234`: FIX: allow colorbar mappable norm to change and do right thing
* :ghpull:`13269`: Rework a bit axes addition.
* :ghpull:`13330`: Add Axis.get_inverted and Axis.set_inverted.
* :ghpull:`13117`: Cleanup matplotlib.use
* :ghpull:`13335`: Update and factor out Axis.get_tick_positions.
* :ghpull:`13324`: Cleanup ScalarFormatter; preparatory to moving it to format_ticks.
* :ghpull:`13322`: Update Axis docs
* :ghpull:`13342`: Update some (mostly internal) docstrings in image.py.
* :ghpull:`11848`: Country specific characters in Windows user folder name when locating .tfm-file
* :ghpull:`13309`: bezier cleanups.
* :ghpull:`13334`: Inherit some docstrings.
* :ghpull:`13332`: Rewrite convert_to_string using std::string
* :ghpull:`13336`: Update imshow docs.
* :ghpull:`13331`: Try forcing font cache rebuild in flaky ttc test.
* :ghpull:`12105`: API: make MaxNLocator trim out-of-view ticks before returning
* :ghpull:`13329`: Pin flake8<3.7 to mitigate issues with flake8-per-file-ignores
* :ghpull:`13319`: Deprecate dates.{str,bytes}pdate2num.
* :ghpull:`13320`: Kill some private, unused functions in dates.py.
* :ghpull:`12909`: Let Formatters format all ticks at once.
* :ghpull:`13313`: Better explanation of ticks
* :ghpull:`13310`: Replace \*kw by \*args.
* :ghpull:`13285`: Defer checking of tex install to when it is actually used.
* :ghpull:`13128`: Parameter-renaming decorator
* :ghpull:`13307`: Spelling fixes.
* :ghpull:`13304`: TST: deregister pandas
* :ghpull:`13300`: Trivial bezier cleanups.
* :ghpull:`11664`: FIX: clean up unit conversion unpacking of data, particularly for dates and pandas series
* :ghpull:`9639`: Unify querying of executable versions
* :ghpull:`13224`: numpydocify (some of) mpl_toolkits.
* :ghpull:`13301`: Replace np.empty + ndarray.fill by np.full.
* :ghpull:`13229`: Prevent exception when running animation on Agg backend.
* :ghpull:`13263`: In imsave()'s Pillow-handled case, don't create a temporary figure.
* :ghpull:`13294`: Simplify some calculations in polar.py.
* :ghpull:`13295`: Kill some commented-out code.
* :ghpull:`13298`: Add note about thread safety to FAQ.
* :ghpull:`13299`: Don't emit a non-GUI warning when building the docs on Linux.
* :ghpull:`13297`: Minor cleanup to OSX FAQ.
* :ghpull:`13283`: Fix doc style in add_gridspec()
* :ghpull:`13129`: ENH: add a user-friendly verbose interface
* :ghpull:`13279`: Remove a useless catch_warnings() from example.
* :ghpull:`13268`: Select RadioButtons by closest in position.
* :ghpull:`13271`: Fix animation speed in double_pendulum example
* :ghpull:`13265`: Allow turning off minor ticks on Colorbar with LogNorm
* :ghpull:`13260`: Improve docs for format determination in savefig()/imsave().
* :ghpull:`12379`: MAINT Use np.full when possible
* :ghpull:`12905`: Add optional parameter use_default_template to rc_file()
* :ghpull:`13218`: Fix checking of 'labels' argument to Sankey.add.
* :ghpull:`13256`: DOC: reject MEP25 due to being stalled
* :ghpull:`13255`: TST pandas support bar
* :ghpull:`13251`: DEBUG-log font-matching results, and print failing logs on CI.
* :ghpull:`12818`: Enh arbitrary scale
* :ghpull:`13187`: FIX: bar mixed units, allow ValueError as well
* :ghpull:`13232`: Fix incorrect kwarg being passed to TextPath.
* :ghpull:`13250`: Replace safezip() by more informative error message in errorbar().
* :ghpull:`13239`: Improve sankey logging.
* :ghpull:`13247`: Simplify and optimize png writing in backend_pdf.
* :ghpull:`12455`: Warn when "best" loc of legend is used with lots of data
* :ghpull:`13233`: Remove warning in image_annotated_heatmap, and numpydocify it.
* :ghpull:`13248`: Remove an unused local variable in backend_gtk3.
* :ghpull:`13249`: Deprecate an unused "internal" API.
* :ghpull:`13243`: Rewrite subplots_demo
* :ghpull:`13240`: FIX: spelling error of local variable in category
* :ghpull:`13026`: MNT: add a logging call if a categorical string array is all convertible
* :ghpull:`13225`: Fix a warning in the doc build.
* :ghpull:`13227`: Make color lowercase in example to avoid warning.
* :ghpull:`13217`: numpydocify Sankey.add.
* :ghpull:`10209`: Various backend cleanups.
* :ghpull:`13113`: Globally cache single TexManager instances.
* :ghpull:`13213`: Broadcast 'orientations' arg to Sankey.add.
* :ghpull:`13219`: Fix some backend_bases docstrings.
* :ghpull:`13214`: Reformat Sankey exceptions.
* :ghpull:`13211`: Deprecate case-insensitive colors.
* :ghpull:`13210`: Suppress a warning in the test suite.
* :ghpull:`13189`: Remove cairo-based backends from backend fallback.
* :ghpull:`13207`: Allow saving PNGs through Pillow instead of the builtin _png module.
* :ghpull:`13124`: Simplify parsing of errorbar input.
* :ghpull:`13162`: DOC: better argcheck bar
* :ghpull:`8531`: Added compression option to save TIFF images
* :ghpull:`13094`: Allow passing arguments to PIL.Image.save().
* :ghpull:`13202`: Avoid private API in some examples.
* :ghpull:`13197`: Cleanup the text of two mpl_toolkits examples.
* :ghpull:`13198`: Cleanup SkewT example.
* :ghpull:`11914`: Remove the system_monitor example.
* :ghpull:`13196`: Deemphasize comment about extremely old Matplotlib versions in example.
* :ghpull:`13190`: Show returncode when subprocess test fails
* :ghpull:`13163`: Add explanatory comment to annotation box example
* :ghpull:`13104`: Remove some more 1-tuples.
* :ghpull:`13105`: Make GridSpec.update docstring match behavior.
* :ghpull:`13127`: Deprecate add_subplot(<no positional args>) silently doing nothing.
* :ghpull:`13166`: Simplify Text.get_usetex.
* :ghpull:`13188`: Remove an outdated doc point regarding backend selection.
* :ghpull:`13107`: Cleanup BboxBase docstrings.
* :ghpull:`13108`: Capitalize some docstrings.
* :ghpull:`13115`: Check for sphinx_copybutton when building the docs
* :ghpull:`13151`: Update RadioButtons docs numpydoc style
* :ghpull:`13178`: Remove :func: markup from mlab docstrings.
* :ghpull:`7461`: [WIP] add matrix checking function for quiver input
* :ghpull:`13089`: Ensure that arguments to quiver() are not matrices.
* :ghpull:`13179`: Avoid calling a deprecated API in axis_artist.
* :ghpull:`13170`: Don't try to find TeX-only fonts when layouting TeX text.
* :ghpull:`12957`: Search also for user fonts on Windows (#12954)
* :ghpull:`12951`: Make Text._get_layout simpler to follow.
* :ghpull:`11385`: Add a get_zaxis method for 3d axes.
* :ghpull:`13172`: Hyperlink DOIs to preferred resolver
* :ghpull:`13171`: Document how to make colorbars "without" a ScalarMappable.
* :ghpull:`12903`: FIX: (broken)bar(h) math before units
* :ghpull:`13167`: Typos on subplot comments and example
* :ghpull:`13005`: Improve error messages for unit conversion
* :ghpull:`13147`: Extend joinstyle example
* :ghpull:`13165`: Change doc string for Axes.arrow()
* :ghpull:`13155`: Let ffmpeg report errors.
* :ghpull:`13149`: Update errorbar limits example
* :ghpull:`13074`: Move _windowing extension into _tkagg.
* :ghpull:`13146`: Remove an outdated comment in backend_wx.
* :ghpull:`13126`: FIX: minor log ticks overwrite
* :ghpull:`13148`: Update example Step Demo
* :ghpull:`13138`: API: Use class-based directive in sphinxext
* :ghpull:`11894`: add ``cache_frame_data`` kwarg into ``FuncAnimation``. fixes #8528.
* :ghpull:`13136`: Small cleanups.
* :ghpull:`13140`: Remove an "cannot show figure in agg" warning in test suite.
* :ghpull:`13134`: Simplify color conversion backcompat shim.
* :ghpull:`13141`: Unpin pytest (pytest-cov's latest release is compatible with it).
* :ghpull:`13133`: Simplify the polys3d example.
* :ghpull:`12158`: MNT: simplify valid tick logic
* :ghpull:`9867`: Factor out common code between pdf and ps backends.
* :ghpull:`10111`: Add set_data_3d and get_data_3d to Line3d
* :ghpull:`12245`: Remove (some) features deprecated in mpl2.2
* :ghpull:`13119`: Deprecate TextToPath.glyph_to_path.
* :ghpull:`13122`: Pin pytest<4.1 to unbreak CI tests
* :ghpull:`13100`: Restore the font cache on Travis.
* :ghpull:`12792`: BUG: Ensure that distinct polygon collections are shaded identically
* :ghpull:`13070`: cairo backend: default to pycairo
* :ghpull:`13114`: BUG: calculate colorbar boundaries correctly from values
* :ghpull:`13111`: Delete an unused private method.
* :ghpull:`10841`: ENH: new date formatter
* :ghpull:`13093`: Remove unused fontconfig conf file.
* :ghpull:`13063`: Use default colour cycle in more examples
* :ghpull:`13103`: Remove tight_bbox_test example.
* :ghpull:`13097`: Replace 1-tuples by scalars where possible.
* :ghpull:`13027`: Qt5 reset signals after non-interactive plotting
* :ghpull:`9787`: Support (first font of) TTC files.
* :ghpull:`11780`: ENH: Allow arbitrary coordinates for ConnectionPatch
* :ghpull:`12943`: Update the font_table example.
* :ghpull:`13091`: Improve MouseEvent str().
* :ghpull:`13095`: Remove a duplicate attribute setting.
* :ghpull:`13090`: Cleanup unused non-public imports.
* :ghpull:`13060`: Move doc-requirements from root folder
* :ghpull:`13078`: Convert streamplot to numpydoc
* :ghpull:`13088`: Don't use deprecated np.random.random_integers.
* :ghpull:`13073`: Drop pytest version check in setupext.py.
* :ghpull:`12933`: Deprecate backend_pgf.LatexManagerFactory.
* :ghpull:`12969`: Clarify the implementation of _process_plot_var_args.
* :ghpull:`12472`: Make FontManager.defaultFont a property, to avoid hardcoding the prefix.
* :ghpull:`11806`: Allow to not draw the labels on pie chart
* :ghpull:`11983`: Simplify version checks for freetype and libpng.
* :ghpull:`13050`: FIX: always eraseRect in Qt widget
* :ghpull:`13065`: FIX: print out the correct ip address when starting webagg
* :ghpull:`13061`: Make examples that load msft.csv robust against locale changes.
* :ghpull:`13042`: cairo: remove the append_path() fast path
* :ghpull:`13058`: pathlibify/cleanup triage_tests.py.
* :ghpull:`12995`: Don't split creation of deprecation message and choice of warning class.
* :ghpull:`12998`: Init MaxNLocator params only once
* :ghpull:`11691`: Make Figure.frameon a thin wrapper for the patch visibility.
* :ghpull:`11735`: Change {FigureCanvasAgg,RendererAgg}.buffer_rgba to return a memoryview.
* :ghpull:`12831`: Reuse scale from sharing axis when calling cla().
* :ghpull:`12962`: Deprecate setting the same property under two different aliases.
* :ghpull:`12973`: Fix item check for pandas Series
* :ghpull:`13049`: Add boxplot.flierprops.markeredgewidth rcParam
* :ghpull:`13048`: Fix section names for numpydoc
* :ghpull:`10928`: Simplify (quite a bit...) _preprocess_data
* :ghpull:`13039`: Speed up Path.iter_segments()
* :ghpull:`12992`: Adding rcParams[‘scatter.edgecolors’] defaulting to ‘face’
* :ghpull:`13014`: Drop pgi support for the GTK3 backend
* :ghpull:`12215`: Cleanup initialization in text()
* :ghpull:`13029`: Fix vertical alignment of text
* :ghpull:`12968`: Simpler and stricter process_plot_format.
* :ghpull:`12989`: Avoid spamming tests with warnings re: deprecation of pprint_val.
* :ghpull:`13032`: fix typo in docstring in ``axis_artist.py``
* :ghpull:`13025`: MNT: add one more alias for tacaswell to mailmap
* :ghpull:`13010`: Fix a format error in documenting_mpl.rst
* :ghpull:`12997`: Add sphinx-copybutton to docs
* :ghpull:`12422`: Scatter color: moving #10809 forward
* :ghpull:`12999`: Format MaxNLocator with numpydoc
* :ghpull:`12991`: Canonicalize weights extracted for AFM fonts.
* :ghpull:`12955`: Cleanup cursor_demo.
* :ghpull:`12984`: Cleanup GTK examples.
* :ghpull:`12986`: Minor cleanup to double_pendulum example.
* :ghpull:`12959`: Update the documentation of Cursor
* :ghpull:`12945`: Correctly get weight & style hints from certain newer Microsoft fonts
* :ghpull:`12976`: ENH: replace deprecated numpy header
* :ghpull:`12975`: Fail-fast when trying to run tests with too-old pytest.
* :ghpull:`12970`: Minor simplifications.
* :ghpull:`12974`: Remove some checks for Py<3.6 in the test suite.
* :ghpull:`12779`: Include scatter plots in Qt figure options editor.
* :ghpull:`12459`: Improve formatting of imshow() cursor data when a colorbar exists.
* :ghpull:`12927`: MAINT: Correctly handle empty lists in zip unpacking in mplot3d.art3d
* :ghpull:`12919`: Suppress deprecation warning when testing drawstyle conflict
* :ghpull:`12956`: Misc. cleanups.
* :ghpull:`12924`: Deprecate public use of Formatter.pprint_val.
* :ghpull:`12947`: Support ~ as nonbreaking space in mathtext.
* :ghpull:`12944`: Fix the title of testing_api
* :ghpull:`12136`: MAINT: Unify calculation of normal vectors from polygons
* :ghpull:`12880`: More table documentation
* :ghpull:`12940`: Avoid pyplot in showcase examples.
* :ghpull:`12935`: os.PathLike exists on all supported Pythons now.
* :ghpull:`12936`: Minor updates following bump to Py3.6+.
* :ghpull:`12932`: Simplify argument checking in Table.__getitem__.
* :ghpull:`12930`: Shorten an argument check.
* :ghpull:`12538`: MNT: drop 3.5 testing for 3.1 branch
* :ghpull:`12868`: Simplify use of Path._fast_from_codes_and_verts.
* :ghpull:`12300`: API: Polar: allow flipped y/rlims....
* :ghpull:`12861`: Don't use deprecated wx.NewId().
* :ghpull:`12908`: Allow all valid hist.bins strings to be set in the rcparams
* :ghpull:`12902`: Kill dead code in textpath.
* :ghpull:`12885`: Improve margins in formlayout
* :ghpull:`12877`: fooImage -> foo_image in testing/compare.py
* :ghpull:`12845`: Deprecate silent dropping of unknown arguments to TextPath().
* :ghpull:`12852`: Cleanup collections docs.
* :ghpull:`12888`: Properly enable forward/backward buttons on GTK3
* :ghpull:`12865`: Avoid 1-tick or 0-tick log-scaled axis.
* :ghpull:`12844`: Remove unused, private _process_text_args.
* :ghpull:`12881`: Fix string comparison
* :ghpull:`12863`: FIX: translate timedeltas in _to_ordinalf
* :ghpull:`12640`: Introduce MouseButton enum for MouseEvent.
* :ghpull:`12897`: Reword a bit the contour docs.
* :ghpull:`12898`: Validate rcParams["image.origin"].
* :ghpull:`12882`: Write error messages to logger instead of stderr
* :ghpull:`12889`: Deprecate public access to the vendored formlayout module.
* :ghpull:`12891`: Add Azure Pipelines build badge
* :ghpull:`12883`: MAINT Use list comprehension
* :ghpull:`12886`: Properly enable forward/backward buttons on Qt
* :ghpull:`12858`: Bump oldest supported numpy to 1.11.
* :ghpull:`12876`: Fix a typo
* :ghpull:`12739`: make Axes._parse_scatter_color_args static
* :ghpull:`12846`: Deprecate Path.has_nonfinite.
* :ghpull:`12829`: Remove unused variables
* :ghpull:`12872`: Inline references to RendererPS in backend_ps.
* :ghpull:`12800`: documenting dtype of hist counts
* :ghpull:`12842`: Fix message in nbagg connection_info()
* :ghpull:`12855`: Cleanup axes/_base.py.
* :ghpull:`12826`: Minor code cleanup
* :ghpull:`12866`: Simplify stride calculations in loglocator.
* :ghpull:`12867`: Drop compat code for outdated MSVC.
* :ghpull:`12218`: Improve table docs
* :ghpull:`12847`: correctly format ticklabels when EngFormatter is used with usetex = True
* :ghpull:`12851`: Keep Collections and Patches property aliases in sync.
* :ghpull:`12849`: Update docstrings in path.py, and small cleanups.
* :ghpull:`12805`: Don't insert spurious newlines by joining tex.preamble.
* :ghpull:`12827`: Remove unused imports
* :ghpull:`12560`: Add matplotlib.testing to the documentation
* :ghpull:`12821`: MNT: remove debug from update_title_pos
* :ghpull:`12764`: Cleanup Renderer/GraphicsContext docs.
* :ghpull:`12759`: Warn on FreeType missing glyphs.
* :ghpull:`12799`: Reword some colorbar docs.
* :ghpull:`12633`: Added support for MacOSX backend for PyPy
* :ghpull:`12798`: Replace assignments to array.shape by calls to reshape().
* :ghpull:`11851`: Simpler check for whether a Framework Python build is being used.
* :ghpull:`12259`: BUG: Fix face orientations of bar3d
* :ghpull:`12565`: Make FontManager.score_weight less lenient.
* :ghpull:`12674`: Allow "real" LaTeX code for pgf.preamble in matplotlibrc
* :ghpull:`12770`: Simplify implementation of FontProperties.copy().
* :ghpull:`12753`: MNT: remove _hold shims to support basemap + cartopy
* :ghpull:`12450`: Attach a FigureCanvasBase by default to Figures.
* :ghpull:`12643`: Allow unit input to FancyArrowPatch
* :ghpull:`12767`: Make colorbars constructible with dataless ScalarMappables.
* :ghpull:`12526`: Rename jquery files
* :ghpull:`12552`: Update docs for writing image comparison tests.
* :ghpull:`12746`: Use skipif, not xfail, for uncomparable image formats.
* :ghpull:`12747`: Prefer log.warning("%s", ...) to log.warning("%s" % ...).
* :ghpull:`11753`: FIX: Apply aspect before drawing starts
* :ghpull:`12749`: Move toolmanager warning from logging to warning.
* :ghpull:`12598`: Support Cn colors with n>=10.
* :ghpull:`12727`: Reorder API docs: separate file per module
* :ghpull:`12738`: Add unobtrusive depreaction note to the first line of the docstring.
* :ghpull:`11663`: Refactor color parsing of Axes.scatter
* :ghpull:`12736`: Move deprecation note to end of docstring
* :ghpull:`12704`: Rename tkinter import from Tk to tk.
* :ghpull:`12715`: Cleanup dviread.
* :ghpull:`12717`: Delete some ``if __name__ == "__main__"`` clauses.
* :ghpull:`10575`: FIX patch.update_from to also copy _original_edge/facecolor
* :ghpull:`12537`: Improve error message on failing test_pyplot_up_to_date
* :ghpull:`12721`: Make get_scale_docs() internal
* :ghpull:`12706`: Extend sphinx Makefile to cleanup completely
* :ghpull:`12481`: Warn if plot_surface Z values contain NaN
* :ghpull:`12685`: Make ticks in demo_axes_rgb.py visible
* :ghpull:`12523`: Run flake8 before pytest on travis
* :ghpull:`12691`: DOC: Link to "How to make a PR" tutorials as badge and in contributing
* :ghpull:`11974`: Make code match comment in sankey.
* :ghpull:`12440`: Make arguments to @deprecated/warn_deprecated keyword-only.
* :ghpull:`12470`: Update AutoDateFormatter with locator
* :ghpull:`12586`: Improve linestyles example
* :ghpull:`12006`: Replace warnings.warn with cbook._warn_external or logging.warning
* :ghpull:`12659`: Add note that developer discussions are private
* :ghpull:`12543`: Make rcsetup.py flak8 compliant
* :ghpull:`12642`: Don't silence TypeErrors in fmt_{x,y}data.
* :ghpull:`12442`: Deprecate passing drawstyle with linestyle as single string.
* :ghpull:`12625`: Shorten some docstrings.
* :ghpull:`12627`: Be a bit more stringent on invalid inputs.
* :ghpull:`12629`: Fix issue with PyPy on macOS
* :ghpull:`10933`: Remove "experimental" fontconfig font_manager backend.
* :ghpull:`12600`: Minor style fixes.
* :ghpull:`12570`: Fix mathtext tutorial for build with Sphinx 1.8.
* :ghpull:`12487`: Update docs/tests for the deprecation of aname and label1On/label2On/etc.
* :ghpull:`12521`: Improve docstring of draw_idle()
* :ghpull:`12574`: Remove some unused imports
* :ghpull:`12568`: Add note regarding builds of old Matplotlibs.
* :ghpull:`12547`: Disable sticky edge accumulation if no autoscaling.
* :ghpull:`12546`: Avoid quadratic behavior when accumulating stickies.
* :ghpull:`11789`: endless looping GIFs with PillowWriter
* :ghpull:`12525`: Fix some flake8 issues
* :ghpull:`12516`: Don't handle impossible values for ``align`` in hist()
* :ghpull:`12500`: Adjust the widths of the messages during the build.
* :ghpull:`12492`: Simplify radar_chart example.
* :ghpull:`11984`: Strip out pkg-config machinery for agg and libqhull.
* :ghpull:`12463`: Document Artist.cursor_data() parameter
* :ghpull:`12482`: Test slider orientation
* :ghpull:`12317`: Always install mpl_toolkits.
* :ghpull:`12246`: Be less tolerant of broken installs.
* :ghpull:`12477`: Use \N{MICRO SIGN} instead of \N{GREEK SMALL LETTER MU} in EngFormatter.
* :ghpull:`12483`: Kill FontManager.update_fonts.
* :ghpull:`12474`: Throw ValueError when irregularly gridded data is passed to streamplot.
* :ghpull:`12466`: np.fromstring -> np.frombuffer.
* :ghpull:`12369`: Improved exception handling on animation failure
* :ghpull:`12460`: Deprecate RendererBase.strip_math.
* :ghpull:`12453`: Rollback erroneous commit to whats_new.rst from #10746
* :ghpull:`12452`: Minor updates to the FAQ.
* :ghpull:`10746`: Adjusted matplotlib.widgets.Slider to have optional vertical orientatation
* :ghpull:`12441`: Get rid of a signed-compare warning.
* :ghpull:`12430`: Deprecate Axes3D.plot_surface(shade=None)
* :ghpull:`12435`: Fix numpydoc parameter formatting
* :ghpull:`12434`: Clarify documentation for textprops keyword parameter of TextArea
* :ghpull:`12427`: Document Artist.get_cursor_data
* :ghpull:`10322`: Use np.hypot wherever possible.
* :ghpull:`10809`: Fix for scatter not showing points with valid x/y but invalid color
* :ghpull:`12423`: Minor simplifications to backend_svg.
* :ghpull:`10356`: fix detecting which artist(s) the mouse is over
* :ghpull:`10268`: Dvi caching
* :ghpull:`10238`: Call kpsewhich with more arguments at one time
* :ghpull:`10236`: Cache kpsewhich results persistently
* :ghpull:`4675`: Deprecate color keyword argument in scatter
* :ghpull:`5054`: Diverging norm
* :ghpull:`12416`: Move font cache rebuild out of exception handler
* :ghpull:`4762`: Traitlets
* :ghpull:`5414`: WIP: New FreeType wrappers
* :ghpull:`3875`: ENH: passing colors (and other optional keyword arguments) to violinplot()
* :ghpull:`1959`: PS backend optionally jpeg-compresses the embedded images
* :ghpull:`11891`: Group some print()s in backend_ps.
* :ghpull:`12165`: Remove deprecated mlab code
* :ghpull:`12387`: Update HTML animation as slider is dragged
* :ghpull:`12333`: ENH: add colorbar method to axes
* :ghpull:`10088`: Deprecate Tick.{gridOn,tick1On,label1On,...} in favor of set_visible.
* :ghpull:`12393`: Deprecate to-days converters in matplotlib dates
* :ghpull:`11232`: FIX: fix figure.set_dpi when pixel ratio not 1
* :ghpull:`12247`: Machinery for deprecating properties.
* :ghpull:`12371`: Move check for ImageMagick Windows path to bin_path().
* :ghpull:`12384`: Cleanup axislines style.
* :ghpull:`9565`: Stem performance boost
* :ghpull:`12368`: Don't use stdlib private API in animation.py.
* :ghpull:`12351`: dviread: find_tex_file: Ensure the encoding on windows
* :ghpull:`12372`: Remove two examples.
* :ghpull:`12356`: Fix stripping of CRLF on Windows.
* :ghpull:`12283`: FIX: errorbar xywhere should return ndarray
* :ghpull:`12304`: TST: Merge Qt tests into one file.
* :ghpull:`12340`: Catch test deprecation warnings for mlab.demean
* :ghpull:`12296`: Make FooConverter inherit from ConversionInterface in examples
* :ghpull:`12309`: Deduplicate implementations of FooNorm.autoscale{,_None}
* :ghpull:`7716`: [NF] Add 'truncate' and 'join' methods to colormaps.
* :ghpull:`12314`: Deprecate ``axis('normal')`` in favor of ``axis('auto')``.
* :ghpull:`12307`: Clarify missing-property error message.
* :ghpull:`12260`: Fix docs : change from issue #12191, remove "if 1:" blocks in examples
* :ghpull:`12253`: Handle utf-8 output by kpathsea on Windows.
* :ghpull:`12292`: TST: Modify the bar3d test to show three more angles
* :ghpull:`12284`: Don't try to autoscale if no data present to autoscale to
* :ghpull:`12255`: Deduplicate inherited docstrings.
* :ghpull:`12222`: Remove extraneous if 1 statements in demo_axisline_style.py
* :ghpull:`12137`:  MAINT: Vectorize bar3d
* :ghpull:`12219`: Merge OSXInstalledFonts into findSystemFonts.
* :ghpull:`12229`: Less ACCEPTS, more numpydoc.
* :ghpull:`11621`: TST: make E402 a universal flake8 ignore
* :ghpull:`12231`: CI: Speed up Appveyor repository cloning
* :ghpull:`11661`: Update blocking_input.py
* :ghpull:`12199`: Allow disabling specific mouse actions in blocking_input
* :ghpull:`12210`: Axes.tick_params() argument checking
* :ghpull:`12211`: Fix typo
* :ghpull:`12200`: Slightly clarify some invalid shape exceptions for image data.
* :ghpull:`12151`: Don't pretend @deprecated applies to classmethods.
* :ghpull:`12190`: Remove some unused variables and imports
* :ghpull:`12192`: Exclude examples from lgtm analysis
* :ghpull:`12196`: Give Carreau the ability to mention the backport bot.
* :ghpull:`12171`: Remove internal warning due to zsort deprecation
* :ghpull:`12030`: Speed up canvas redraw for GTK3Agg backend.
* :ghpull:`12156`: Cleanup the GridSpec demos.
* :ghpull:`12144`: Add explicit getters and setters for Annotation.anncoords.
* :ghpull:`12152`: Use _warn_external for deprecations warnings.
* :ghpull:`12147`: DOC: update the gh_stats code
* :ghpull:`12139`: Unbreak build re: mplot3d style.
* :ghpull:`11367`: Raise TypeError on unsupported kwargs of spy()
* :ghpull:`9990`: Fix and document lightsource argument in mplot3d
* :ghpull:`12124`: Correctly infer units from empty arrays
* :ghpull:`11994`: Cleanup unused variables and imports
* :ghpull:`12122`: MNT: re-add cbook import art3d
* :ghpull:`12086`: FIX: make MaxNLocator only follow visible ticks for order of magnitude
* :ghpull:`12032`: Remove unused imports
* :ghpull:`12093`: Correct the removal of -Wstrict-prototypes from compiler flags.
* :ghpull:`12069`: Style fixes for mplot3d.
* :ghpull:`11997`: Cleanup some axes_grid1 examples
* :ghpull:`12098`: Improve layout of HTML animation
* :ghpull:`12094`: Fine-tune logging notes in contributing.rst.
* :ghpull:`12079`: Clarifications to **im_show()** doc regarding *interpolation='none'*.
* :ghpull:`12068`: More style fixes.
* :ghpull:`11499`: FIX: layout for mixed descent multiline text objects
* :ghpull:`11921`: FIX: allow reshape 2-D to return a bare 1-d list
* :ghpull:`12070`: Avoid some uses of np.isscalar.
* :ghpull:`12067`: DOC: make Line2D docstring definition easier to find
* :ghpull:`12054`: More style fixes.
* :ghpull:`12066`: fix indentation in docstring interpolation for spy.
* :ghpull:`11931`: Remove separate autosummary_inher template.
* :ghpull:`12049`: Make Poly3DCollection.set_zsort less lenient.
* :ghpull:`12050`: Various cleanups.
* :ghpull:`12038`: Modernize ArtistInspector a bit...
* :ghpull:`12033`: DOC: formatting fixes to mplot3d
* :ghpull:`12051`: Is bool
* :ghpull:`12045`:  Fix 999.9... edge case in ticker.EngFormatter for negative numbers
* :ghpull:`12044`: Update doc on the *progressive* and *optimize* keywords in savefig
* :ghpull:`12061`: Small refactor/simplification.
* :ghpull:`12060`: INSTALL.rst fixes
* :ghpull:`12055`: Fix invalid escape in docstring.
* :ghpull:`12026`: whitespace(-mostly) style cleanup.
* :ghpull:`12043`: Deprecate get_py2exe_datafiles.
* :ghpull:`12046`: Make HTMLWriter constructor a bit more strict.
* :ghpull:`12034`: Doc markup fixes.
* :ghpull:`11972`: FIX: close mem leak for repeated draw
* :ghpull:`12024`: Fix typos
* :ghpull:`11996`: Minor javascript cleanup
* :ghpull:`11989`: Remove support for ghostscript 8.60.
* :ghpull:`12004`: Update acorr and xcorr docs to match numpy docs
* :ghpull:`11998`: No clf() needed after creating a figure
* :ghpull:`12001`: Do not use an explicit figum in plt.figure(1, ...) in simple cases
* :ghpull:`11999`: Do not use an explicit fignum plt.figure(1) in simple cases
* :ghpull:`11995`: Don't use bare except statements
* :ghpull:`11993`: DOC: fixed typos
* :ghpull:`11992`: Use pytest.warns instead of home-baked warnings capture.
* :ghpull:`11975`: Derive plt.figlegend.__doc__ from Figure.legend.__doc__.
* :ghpull:`11980`: Remove __version__numpy__; simplify dependencies check.
* :ghpull:`11982`: Remove and old keyword documentation.
* :ghpull:`11981`: Some extra typos
* :ghpull:`11979`: Fix a couple of typos.
* :ghpull:`11959`: cbook.iterable -> np.iterable.
* :ghpull:`11965`: Move the removal of the -Wstrict-prototypes flag to setup.py.
* :ghpull:`11958`: Remove unused code
* :ghpull:`11960`: Make jpl_units a bit less painful to read.
* :ghpull:`11951`: Improve Artist docstrings
* :ghpull:`11954`: No need to define _log twice in matplotlib.dates.
* :ghpull:`11948`: Minor fixes to docs and gitignore.
* :ghpull:`11777`: Avoid incorrect warning in savefig
* :ghpull:`11942`: Deprecate Artist.aname and Axes.aname
* :ghpull:`11935`: Remove ginput demo example
* :ghpull:`11939`: Improve alias signatures
* :ghpull:`11940`: Do not use aliases of properties in internal code
* :ghpull:`11941`: Fix test_large_subscript_title()
* :ghpull:`11938`: More docstring cleanup of Line2D.
* :ghpull:`11920`: Add LGTM.com code quality badge
* :ghpull:`11922`: Improve docstrings of Line2D
* :ghpull:`11924`: Minor formatting update on alias docstrings
* :ghpull:`11926`: Minor fix to ginput_demo.
* :ghpull:`11912`: BLD: update PR template for flake8
* :ghpull:`11909`: Simplify linestyle and fillstyle reference docs.
* :ghpull:`11502`: FIX: move title(s) up if subscripts hang too low.
* :ghpull:`11906`: fix format of bar_of_pie example
* :ghpull:`11741`:  Factor out common code between Patch.draw and FancyArrowPatch.draw.
* :ghpull:`11784`: Argument checking for grid()
* :ghpull:`11888`: Factor out a subprocess log-and-check helper.
* :ghpull:`11740`: Deprecate support for 3rd-party backends without set_hatch_color.
* :ghpull:`11884`: Deprecate the tk_window_focus function.
* :ghpull:`11689`: Don't cache the renderer on the Axes instance.
* :ghpull:`11698`: For property, use decorator or lambdas.
* :ghpull:`11872`: Make all builtin cmaps picklable.
* :ghpull:`11870`: More style fixes.
* :ghpull:`11873`: Remove mention of deprecated/removed methods from mlab's docstring.
* :ghpull:`11869`: Style fixes.
* :ghpull:`11874`: Remove some remnants of Py2-handling in test_rcparams.
* :ghpull:`11865`: example file for making a bar of pie chart
* :ghpull:`11868`: mathtext.py style fixes.
* :ghpull:`11854`: Accept anything that's not a directory for $MATPLOTLIBRC.
* :ghpull:`11589`: WIP ENH secondary axes:
* :ghpull:`8449`: Including Additional Metadata using the SVG Backend
* :ghpull:`11465`: ENH: optimize Collection non-affine transform to call transform once

Issues (161):

* :ghissue:`4001`: Qt5 Backend: dblclick is always False on 'mouse_release_event'
* :ghissue:`14152`: qt_compat.py performing wrong test for PyQt5
* :ghissue:`10875`: Annotation.contains and FancyArrow.contains return incorrect values
* :ghissue:`458`: JPG quality keyword in savefig
* :ghissue:`4354`: scatter not showing valid x/y points with invalid color
* :ghissue:`14113`: scatter could not raise when colors are provided but position data are empty
* :ghissue:`14003`: numpydoc 0.9 breaks doc build
* :ghissue:`14054`: ticks sometimes disappear when zooming interactively
* :ghissue:`10189`: The data decorator does not integrate well with numpydoc
* :ghissue:`14034`: pyplot plot raises ValueError when plotting NaN against datetime dates
* :ghissue:`14039`: bar plot yerr lines/caps should respect zorder
* :ghissue:`14042`: dynamic_image.py + saving animation broken
* :ghissue:`14013`: osx backend not usable with ipython/jupyter from conda?
* :ghissue:`13993`: Tests files installed by default?
* :ghissue:`13991`: MaxNLocator.default_params deprecation may break Cartopy
* :ghissue:`5045`: Axes.grid() not honoring specified "zorder" kwarg
* :ghissue:`4371`: LaTeX and PGF preambles do not allow commas
* :ghissue:`13982`: hist() no longer respects range=... when density=True
* :ghissue:`13963`: Dataless colorbars break when updated
* :ghissue:`10381`: Issue when setting scatter color in separate method call
* :ghissue:`13618`: Minor ticklabels are missing at positions of major ticks.
* :ghissue:`13880`: Adding documentation for Text.fontfamily default, set_fontfamily(None)?
* :ghissue:`13865`: Appveyor broken
* :ghissue:`8636`: plt.hist chooses improper range when using string-based bin options
* :ghissue:`7300`: weird mathtext doc markup
* :ghissue:`8862`: Replace \mathcircled by \textcircled
* :ghissue:`13759`: DOC: matplotlib.patches.Arc
* :ghissue:`13785`: Imshow gives values out of the extent
* :ghissue:`13786`: Cannot import matplotlib.animation
* :ghissue:`13561`: Progress of animation.save (for long animations)
* :ghissue:`13735`: title doesn't move for ticklables....
* :ghissue:`12175`: Example link near markevery in the "What's new in 3.0" page is malformed/broken
* :ghissue:`13713`: Boxplot xlim not correctly calculated
* :ghissue:`11070`: Add a "density" kwarg to hist2d
* :ghissue:`11337`: Cannot plot fully masked array against datetimes
* :ghissue:`10165`: Adapt stem plot
* :ghissue:`10976`: ENH: secondary axis for a x or y scale.
* :ghissue:`10763`: Cairo in 2.2.0 not working for new backends
* :ghissue:`9737`: setupext should not explicitly add /usr/{,local/}include to the include path
* :ghissue:`11217`: Crash on zero-length FancyArrow
* :ghissue:`13623`: do not cause warning in seaborn
* :ghissue:`13480`: Segfault on help('modules') command when matplotlib is installed
* :ghissue:`13604`: legend's framealpha kwarg does not apply when writing to an eps file
* :ghissue:`12311`: 'off' vs. False bug
* :ghissue:`10237`: Setting an alpha value to a Poly3DCollection
* :ghissue:`11781`: fill_between interpolation & nan issue
* :ghissue:`1077`: 3d plots with aspect='equal'
* :ghissue:`11761`: Still naming inconsistency in API on axes limits
* :ghissue:`11623`: Regression: "TypeError: Period('2000-12-31', 'D') is not a string" when a Series with date index was plotted
* :ghissue:`12655`: auto-ticks do not handle values near bounds gracefully
* :ghissue:`13487`: labelpad is not the spacing between the axis and the label
* :ghissue:`13540`: Docs for matplotlib.pyplot.specgram() reference an unsupported mode setting
* :ghissue:`8997`: Proposal: Grid arrangement by number of plots
* :ghissue:`6928`: Cannot run ``setup.py build`` with numpy master
* :ghissue:`12697`: Axes are drawn at wrong positions
* :ghissue:`13478`: FuncAnimation:  interactive zoom/pan with blitting does not work
* :ghissue:`11575`: Setting axis ticks in log scale produces duplicate tick labels.
* :ghissue:`13464`: set_rlim(bottom=...) no longer works
* :ghissue:`12628`: Write canonical example of how to use Matplotlib inside a webserver
* :ghissue:`10022`: boxplot: positions used to take Int64Index
* :ghissue:`11647`: Disable buttons in ginput
* :ghissue:`12987`: issues parsing AFM fonts
* :ghissue:`12667`: Colorbar ticks....
* :ghissue:`13137`: Travis for Python 3.7 sometimes fails due to missing font
* :ghissue:`7969`: Stem is slow and will crash if I try to close the window
* :ghissue:`13002`: Hist color kwarg broken for multiple empty datasets
* :ghissue:`5581`: [mpl_toolkits] Things drawn on parasite axes don't fire pick events
* :ghissue:`13417`: Secondary axis doesn't resize properly
* :ghissue:`8120`: Inconsistent inset_axes position between show(), savefig(format='png') and savefig(format='pdf')
* :ghissue:`8947`: Different result, slower runtime of heatmap between 2.0.0 and 2.0.1
* :ghissue:`13264`: Use of logging in matplotlib
* :ghissue:`11602`: animation error
* :ghissue:`12925`: Python pandas datetime plot xticks in unexpected location
* :ghissue:`11025`: AxesGrid ticks missing on x-axis
* :ghissue:`10974`: Examples not shown in API docs for many methods.
* :ghissue:`13392`: boxplot broken for empty inputs
* :ghissue:`12345`: Need more tests for units and errorbar
* :ghissue:`10361`: FigureCanvas.draw() with tight_layout () needs to be called twice with Matplotlib 2.1.0
* :ghissue:`11376`: Temporary styling ignores color cycle
* :ghissue:`11546`: import time
* :ghissue:`13286`: AttributeError: 'float' object has no attribute 'deg2rad'
* :ghissue:`11508`: bi-directional perceptually flat colormaps in matplotlib?
* :ghissue:`12918`: Mac shows an icon in the dock when using matplotlib.pyplot.
* :ghissue:`13339`: Log Colorbar minorticks_off reverted if ticks set...
* :ghissue:`13228`: MPL 3 + Colorbar + PowerNorm bug
* :ghissue:`13096`: Matplotlib.get_backend()/matplotlib.use() cause NSException with Anaconda
* :ghissue:`7712`: Number of ticks for dates still gives overlapping labels
* :ghissue:`9978`: General poor default formatting of datetimes on plot x-axis
* :ghissue:`13253`: imsave outputs JPEG with wrong dimension
* :ghissue:`11391`: Use data argument for scatter plotting timestamps from pandas
* :ghissue:`13145`: widgets.RadioButtons: select by closest in position
* :ghissue:`13267`: "double-pendulum" example's speed not correct / varying
* :ghissue:`13257`: Allow turning off minorticks for Colorbar with LogNorm?
* :ghissue:`13237`: Sankey basic gallery example is not rendered properly.
* :ghissue:`12836`: matplotlib.rc_file resets to default template before updating rcparams
* :ghissue:`13186`: ax.bar throws when x axis is pandas datetime
* :ghissue:`5397`: Expose compression and filter PNG options through savefig
* :ghissue:`13142`: Cannot plot bar graph with dates: "TypeError: ufunc subtract cannot use operands with types dtype('<M8[ns]') and dtype('float64')"
* :ghissue:`8530`: Feature request: TIFF LZW compression support in savefig()
* :ghissue:`13139`: font family ['serif'] not found. Falling back to DejaVu Sans
* :ghissue:`1558`: Graceful handling of a numpy matrix
* :ghissue:`12954`: Fonts installed in the user directory are not detected (Windows 1809)
* :ghissue:`3644`: Feature Request: manually set colorbar without mappable
* :ghissue:`12862`: broken_barh appears not to work with datetime/timedelta objects
* :ghissue:`11290`: ax.bar doesn't work correctly when width is a timedelta64 object
* :ghissue:`13156`: DOC: matplotlib.pyplot.arrow
* :ghissue:`12990`: Unclear error message for ``plt.xticks(names)``
* :ghissue:`12769`: Failing to save an animated graph with matplotlib.animation
* :ghissue:`13112`: LogNorm colorbar prints double tick labels after set_ticks()
* :ghissue:`13132`: BUG: matplotlib.sphinxext.plot_directive uses old function-based API
* :ghissue:`8528`: Funcanimation memory leak?
* :ghissue:`8914`: line3D set_data only takes in x and y data
* :ghissue:`8768`: One one tick in a log-scale axis
* :ghissue:`13121`: Tests fail with pytest 4.1
* :ghissue:`13098`: Likely incorrect code(?) in colorbar.py
* :ghissue:`12562`: Clean up unused imports
* :ghissue:`12106`: plt.plot does not plot anything with named arguments
* :ghissue:`5145`: Python [Error 17]No usable Temporary file name found
* :ghissue:`13012`: qt5agg image quality changes when window is out of focus
* :ghissue:`13055`: 127.0.0.1 hardcoded in webagg backend server
* :ghissue:`12971`: Pandas Series not supported as data kwarg
* :ghissue:`13022`: boxplot not showing symbols with seaborn style sheet
* :ghissue:`13028`: Bad rotation_mode/center_baseline combination even if rotation=0
* :ghissue:`12745`: Sphinx copy button for code block
* :ghissue:`12801`: scatter() should not drop data points at nonfinite coordinates
* :ghissue:`12358`: Dropping support for Py3.5 and numpy 1.10
* :ghissue:`12994`: Axes range with set_xticks with categoricals
* :ghissue:`12993`: Semantics of set_xticks for categoricals
* :ghissue:`12946`: ~ in mathrm leads to Unknown symbol: \mathrm
* :ghissue:`10704`: Add documentation for set_rlim
* :ghissue:`11202`: Using of ax.set_ylim() for polar plot leads to "posx and posy should be finite values" error
* :ghissue:`12859`: DeprecationWarning: NewId() is deprecated in wxPython.
* :ghissue:`12817`: Multiple places where Type Errors on cbook.warn_deprecated will happen
* :ghissue:`12308`: #12253 FIX: Handle utf-8 output by kpathsea on Windows -- possibly causing issues
* :ghissue:`12804`: Usetex produces preamble with one character per line
* :ghissue:`12808`: Issue with minor tick spacing in colorbar with custom Normalize class
* :ghissue:`12138`: Faces of Axes3d.bar3d are not oriented correctly
* :ghissue:`12591`: Adding FancyArrowPatch with datetime coordinates fails
* :ghissue:`11139`: "make clean" doesn't remove all the build doc files
* :ghissue:`11908`: Improve linestyle documentation
* :ghissue:`10643`: Most warnings calls do not set the stacklevel
* :ghissue:`12532`: Incorrect rendering of math symbols
* :ghissue:`11787`: Looping gifs with PillowWriter
* :ghissue:`9205`: after the animation encoder (e.g. ffmpeg) fails, the animation framework itself fails internally in various ways while trying to report the error
* :ghissue:`11154`: Unexpected behavior for Axes3D.plot_surface(shade=None)
* :ghissue:`12121`: Documentation of TextArea's fontprops keyword argument is misleading
* :ghissue:`12191`: "if 1:" blocks in examples
* :ghissue:`12107`: warnings re: deprecated pytest API with pytest 3.8
* :ghissue:`12010`: Popover over plot is very slow
* :ghissue:`12118`: Scatter: empty np.arrays with non-numeric dtypes cause TypeError
* :ghissue:`12072`: ``MaxNLocator`` changes the scientific notation exponent with different number of tick labels
* :ghissue:`11795`: Un-align animations created with to_jshtml()?
* :ghissue:`10201`: Available fonts are ignored by font_manager
* :ghissue:`12065`: Keyword *interpolation* behaving improperly while saving to SVG with **savefig()**
* :ghissue:`11498`: Test layout with big descenders and multiple lines inconsistent.
* :ghissue:`11468`: Layout managers have problems with titles containing MathText
* :ghissue:`11899`: Histogram of list of datetimes
* :ghissue:`11956`: apparent memory leak with live plotting
* :ghissue:`11587`: Missing filled contours when using contourf
* :ghissue:`11716`: errorbar pickling fails when specifying y error bars
* :ghissue:`11557`: Hoping add a drawing function 'patch'  in matplotlib
.. _old_changelog:

List of changes to Matplotlib prior to 2015
===========================================

This is a list of the changes made to Matplotlib from 2003 to 2015. For more
recent changes, please refer to the `what's new <../whats_new.html>`_ or
the `API changes <../../api/api_changes.html>`_.

2015-11-16
    Levels passed to contour(f) and tricontour(f) must be in increasing order.

2015-10-21
    Added TextBox widget

2015-10-21
    Added get_ticks_direction()

2015-02-27
    Added the rcParam 'image.composite_image' to permit users to decide whether
    they want the vector graphics backends to combine all images within a set
    of axes into a single composite image.  (If images do not get combined,
    users can open vector graphics files in Adobe Illustrator or Inkscape and
    edit each image individually.)

2015-02-19
    Rewrite of C++ code that calculates contours to add support for corner
    masking.  This is controlled by the 'corner_mask' keyword in plotting
    commands 'contour' and 'contourf'. - IMT

2015-01-23
    Text bounding boxes are now computed with advance width rather than ink
    area.  This may result in slightly different placement of text.

2014-10-27
    Allowed selection of the backend using the :envvar:`MPLBACKEND` environment
    variable. Added documentation on backend selection methods.

2014-09-27
    Overhauled `.colors.LightSource`.  Added `.LightSource.hillshade` to allow
    the independent generation of illumination maps. Added new types of
    blending for creating more visually appealing shaded relief plots (e.g.
    ``blend_mode="overlay"``, etc, in addition to the legacy "hsv" mode).

2014-06-10
    Added Colorbar.remove()

2014-06-07
    Fixed bug so radial plots can be saved as ps in py3k.

2014-06-01
    Changed the fmt kwarg of errorbar to support the the mpl convention that
    "none" means "don't draw it", and to default to the empty string, so that
    plotting of data points is done with the plot() function defaults.
    Deprecated use of the None object in place "none".

2014-05-22
    Allow the linscale keyword parameter of symlog scale to be smaller than
    one.

2014-05-20
    Added logic to in FontManager to invalidate font-cache if if font-family
    rcparams have changed.

2014-05-16
    Fixed the positioning of multi-line text in the PGF backend.

2014-05-14
    Added Axes.add_image() as the standard way to add AxesImage instances to
    Axes. This improves the consistency with add_artist(), add_collection(),
    add_container(), add_line(), add_patch(), and add_table().

2014-05-02
    Added colorblind-friendly colormap, named 'Wistia'.

2014-04-27
    Improved input clean up in Axes.{h|v}lines
    Coerce input into a 1D ndarrays (after dealing with units).

2014-04-27
    removed un-needed cast to float in stem

2014-04-23
    Updated references to "ipython -pylab" The preferred method for invoking
    pylab is now using the "%pylab" magic.
    -Chris G.

2014-04-22
    Added (re-)generate a simple automatic legend to "Figure Options" dialog of
    the Qt4Agg backend.

2014-04-22
    Added an example showing the difference between interpolation = 'none' and
    interpolation = 'nearest' in `~.Axes.imshow` when saving vector graphics
    files.

2014-04-22
    Added violin plotting functions. See `.Axes.violinplot`, `.Axes.violin`,
    `.cbook.violin_stats` and `.mlab.GaussianKDE` for details.

2014-04-10
    Fixed the triangular marker rendering error. The "Up" triangle was rendered
    instead of "Right" triangle and vice-versa.

2014-04-08
    Fixed a bug in parasite_axes.py by making a list out of a generator at line
    263.

2014-04-02
    Added ``clipon=False`` to patch creation of wedges and shadows in
    `~.Axes.pie`.

2014-02-25
    In backend_qt4agg changed from using update -> repaint under windows.  See
    comment in source near ``self._priv_update`` for longer explanation.

2014-03-27
    Added tests for pie ccw parameter. Removed pdf and svg images from tests
    for pie linewidth parameter.

2014-03-24
    Changed the behaviour of axes to not ignore leading or trailing patches of
    height 0 (or width 0) while calculating the x and y axis limits. Patches
    having both height == 0 and width == 0 are ignored.

2014-03-24
    Added bool kwarg (manage_xticks) to boxplot to enable/disable the
    managemnet of the xlimits and ticks when making a boxplot.  Default in True
    which maintains current behavior by default.

2014-03-23
    Fixed a bug in projections/polar.py by making sure that the theta value
    being calculated when given the mouse coordinates stays within the range of
    0 and 2 * pi.

2014-03-22
    Added the keyword arguments wedgeprops and textprops to pie.  Users can
    control the wedge and text properties of the pie in more detail, if they
    choose.

2014-03-17
    Bug was fixed in append_axes from the AxesDivider class would not append
    axes in the right location with respect to the reference locator axes

2014-03-13
    Add parameter 'clockwise' to function pie, True by default.

2014-02-28
    Added 'origin' kwarg to `~.Axes.spy`

2014-02-27
    Implemented separate horizontal/vertical axes padding to the ImageGrid in
    the AxesGrid toolkit

2014-02-27
    Allowed markevery property of matplotlib.lines.Line2D to be, an int numpy
    fancy index, slice object, or float.  The float behaviour turns on markers
    at approximately equal display-coordinate-distances along the line.

2014-02-25
    In backend_qt4agg changed from using update -> repaint under windows.  See
    comment in source near ``self._priv_update`` for longer explanation.

2014-01-02
    `~.Axes.triplot` now returns the artist it adds and support of line and
    marker kwargs has been improved. GBY

2013-12-30
    Made streamplot grid size consistent for different types of density
    argument. A 30x30 grid is now used for both density=1 and density=(1, 1).

2013-12-03
    Added a pure boxplot-drawing method that allow a more complete
    customization of boxplots. It takes a list of dicts contains stats.  Also
    created a function (`.cbook.boxplot_stats`) that generates the stats
    needed.

2013-11-28
    Added qhull extension module to perform Delaunay triangulation more
    robustly than before.  It is used by tri.Triangulation (and hence all
    pyplot.tri* methods) and mlab.griddata.  Deprecated matplotlib.delaunay
    module. - IMT

2013-11-05
    Add power-law normalization method. This is useful for, e.g., showing small
    populations in a "hist2d" histogram.

2013-10-27
    Added get_rlabel_position and set_rlabel_position methods to PolarAxes to
    control angular position of radial tick labels.

2013-10-06
    Add stride-based functions to mlab for easy creation of 2D arrays with less
    memory.

2013-10-06
    Improve window and detrend functions in mlab, particulart support for 2D
    arrays.

2013-10-06
    Improve performance of all spectrum-related mlab functions and plots.

2013-10-06
    Added support for magnitude, phase, and angle spectrums to axes.specgram,
    and support for magnitude, phase, angle, and complex spectrums to
    mlab-specgram.

2013-10-06
    Added magnitude_spectrum, angle_spectrum, and phase_spectrum plots, as well
    as magnitude_spectrum, angle_spectrum, phase_spectrum, and complex_spectrum
    functions to mlab

2013-07-12
    Added support for datetime axes to 2d plots. Axis values are passed through
    Axes.convert_xunits/Axes.convert_yunits before being used by
    contour/contourf, pcolormesh and pcolor.

2013-07-12
    Allowed matplotlib.dates.date2num, matplotlib.dates.num2date, and
    matplotlib.dates.datestr2num to accept n-d inputs. Also factored in support
    for n-d arrays to matplotlib.dates.DateConverter and
    matplotlib.units.Registry.

2013-06-26
    Refactored the axes module: the axes module is now a folder, containing the
    following submodule:

    - _subplots.py, containing all the subplots helper methods
    - _base.py, containing several private methods and a new _AxesBase class.
      This _AxesBase class contains all the methods that are not directly
      linked to plots of the "old" Axes
    - _axes.py contains the Axes class. This class now inherits from _AxesBase:
      it contains all "plotting" methods and labelling methods.

    This refactoring should not affect the API. Only private methods are not
    importable from the axes module anymore.

2013-05-18
    Added support for arbitrary rasterization resolutions to the SVG backend.
    Previously the resolution was hard coded to 72 dpi. Now the backend class
    takes a image_dpi argument for its constructor, adjusts the image bounding
    box accordingly and forwards a magnification factor to the image renderer.
    The code and results now resemble those of the PDF backend.
    - MW

2013-05-08
    Changed behavior of hist when given stacked=True and normed=True.
    Histograms are now stacked first, then the sum is normalized.  Previously,
    each histogram was normalized, then they were stacked.

2013-04-25
    Changed all instances of::

        from matplotlib import MatplotlibDeprecationWarning as mplDeprecation

    to::

        from cbook import mplDeprecation

    and removed the import into the matplotlib namespace in __init__.py
    - Thomas Caswell

2013-04-15
    Added 'axes.xmargin' and 'axes.ymargin' to rpParams to set default margins
    on auto-scaleing. - TAC

2013-04-16
    Added patheffect support for Line2D objects.  -JJL

2013-03-31
    Added support for arbitrary unstructured user-specified triangulations to
    Axes3D.tricontour[f] - Damon McDougall

2013-03-19
    Added support for passing *linestyle* kwarg to `~.Axes.step` so all
    `~.Axes.plot` kwargs are passed to the underlying `~.Axes.plot` call.  -TAC

2013-02-25
    Added classes CubicTriInterpolator, UniformTriRefiner, TriAnalyzer to
    matplotlib.tri module. - GBy

2013-01-23
    Add 'savefig.directory' to rcParams to remember and fill in the last
    directory saved to for figure save dialogs - Martin Spacek

2013-01-13
    Add eventplot method to axes and pyplot and EventCollection class to
    collections.

2013-01-08
    Added two extra titles to axes which are flush with the left and right
    edges of the plot respectively.  Andrew Dawson

2013-01-07
    Add framealpha keyword argument to legend - PO

2013-01-16
    Till Stensitzki added a baseline feature to stackplot

2012-12-22
    Added classes for interpolation within triangular grids
    (LinearTriInterpolator) and to find the triangles in which points lie
    (TrapezoidMapTriFinder) to matplotlib.tri module. - IMT

2012-12-05
    Added MatplotlibDeprecationWarning class for signaling deprecation.
    Matplotlib developers can use this class as follows::

        from matplotlib import MatplotlibDeprecationWarning as mplDeprecation

    In light of the fact that Python builtin DeprecationWarnings are ignored by
    default as of Python 2.7, this class was put in to allow for the signaling
    of deprecation, but via UserWarnings which are not ignored by default. - PI

2012-11-27
    Added the *mtext* parameter for supplying matplotlib.text.Text instances to
    RendererBase.draw_tex and RendererBase.draw_text.  This allows backends to
    utilize additional text attributes, like the alignment of text elements. -
    pwuertz

2012-11-26
    deprecate matplotlib/mpl.py, which was used only in pylab.py and is now
    replaced by the more suitable ``import matplotlib as mpl``. - PI

2012-11-25
    Make rc_context available via pyplot interface - PI

2012-11-16
    plt.set_cmap no longer throws errors if there is not already an active
    colorable artist, such as an image, and just sets up the colormap to use
    from that point forward. - PI

2012-11-16
    Added the funcction _get_rbga_face, which is identical to _get_rbg_face
    except it return a (r,g,b,a) tuble, to line2D.  Modified Line2D.draw to use
    _get_rbga_face to get the markerface color so that any alpha set by
    markerfacecolor will respected.  - Thomas Caswell

2012-11-13
    Add a symmetric log normalization class to colors.py.  Also added some
    tests for the normalization class.  Till Stensitzki

2012-11-12
    Make axes.stem take at least one argument.  Uses a default range(n) when
    the first arg not provided.  Damon McDougall

2012-11-09
    Make plt.subplot() without arguments act as subplot(111) - PI

2012-11-08
    Replaced plt.figure and plt.subplot calls by the newer, more convenient
    single call to plt.subplots() in the documentation examples - PI

2012-10-05
    Add support for saving animations as animated GIFs. - JVDP

2012-08-11
    Fix path-closing bug in patches.Polygon, so that regardless of whether the
    path is the initial one or was subsequently set by set_xy(), get_xy() will
    return a closed path if and only if get_closed() is True.  Thanks to Jacob
    Vanderplas. - EF

2012-08-05
    When a norm is passed to contourf, either or both of the vmin, vmax
    attributes of that norm are now respected.  Formerly they were respected
    only if both were specified. In addition, vmin and/or vmax can now be
    passed to contourf directly as kwargs. - EF

2012-07-24
    Contourf handles the extend kwarg by mapping the extended ranges outside
    the normed 0-1 range so that they are handled by colormap colors determined
    by the set_under and set_over methods.  Previously the extended ranges were
    mapped to 0 or 1 so that the "under" and "over" colormap colors were
    ignored. This change also increases slightly the color contrast for a given
    set of contour levels. - EF

2012-06-24
    Make use of mathtext in tick labels configurable - DSD

2012-06-05
    Images loaded through PIL are now ordered correctly - CG

2012-06-02
    Add new Axes method and pyplot function, hist2d. - PO

2012-05-31
    Remove support for 'cairo.<format>' style of backend specification.
    Deprecate 'cairo.format' and 'savefig.extension' rcParams and replace with
    'savefig.format'. - Martin Spacek

2012-05-29
    pcolormesh now obeys the passed in "edgecolor" kwarg.  To support this, the
    "shading" argument to pcolormesh now only takes "flat" or "gouraud".  To
    achieve the old "faceted" behavior, pass "edgecolors='k'". - MGD

2012-05-22
    Added radius kwarg to pie charts. - HH

2012-05-22
    Collections now have a setting "offset_position" to select whether the
    offsets are given in "screen" coordinates (default, following the old
    behavior) or "data" coordinates.  This is currently used internally to
    improve the performance of hexbin.

    As a result, the "draw_path_collection" backend methods have grown a new
    argument "offset_position". - MGD

2012-05-04
    Add a new argument to pie charts - startingangle - that allows one to
    specify the angle offset for the first wedge of the chart. - EP

2012-05-03
    symlog scale now obeys the logarithmic base.  Previously, it was completely
    ignored and always treated as base e. - MGD

2012-05-03
    Allow linscalex/y keyword to symlog scale that allows the size of the
    linear portion relative to the logarithmic portion to be adjusted. - MGD

2012-04-14
    Added new plot style: stackplot. This new feature supports stacked area
    plots. - Damon McDougall

2012-04-06
    When path clipping changes a LINETO to a MOVETO, it also changes any
    CLOSEPOLY command to a LINETO to the initial point. This fixes a problem
    with pdf and svg where the CLOSEPOLY would then draw a line to the latest
    MOVETO position instead of the intended initial position. - JKS

2012-03-27
    Add support to ImageGrid for placing colorbars only at one edge of each
    column/row. - RMM

2012-03-07
    Refactor movie writing into useful classes that make use of pipes to write
    image data to ffmpeg or mencoder. Also improve settings for these and the
    ability to pass custom options. - RMM

2012-02-29
    errorevery keyword added to errorbar to enable errorbar subsampling. fixes
    issue #600.

2012-02-28
    Added plot_trisurf to the mplot3d toolkit. This supports plotting three
    dimensional surfaces on an irregular grid. - Damon McDougall

2012-01-23
    The radius labels in polar plots no longer use a fixed padding, but use a
    different alignment depending on the quadrant they are in.  This fixes
    numerical problems when (rmax - rmin) gets too small. - MGD

2012-01-08
    Add axes.streamplot to plot streamlines of a velocity field.  Adapted from
    Tom Flannaghan streamplot implementation. -TSY

2011-12-29
    ps and pdf markers are now stroked only if the line width is nonzero for
    consistency with agg, fixes issue #621. - JKS

2011-12-27
    Work around an EINTR bug in some versions of subprocess. - JKS

2011-10-25
    added support for \operatorname to mathtext, including the ability to
    insert spaces, such as $\operatorname{arg\,max}$ - PI

2011-08-18
    Change api of Axes.get_tightbbox and add an optional keyword parameter
    *call_axes_locator*. - JJL

2011-07-29
    A new rcParam "axes.formatter.use_locale" was added, that, when True, will
    use the current locale to format tick labels.  This means that, for
    example, in the fr_FR locale, ',' will be used as a decimal separator.  -
    MGD

2011-07-15
    The set of markers available in the plot() and scatter() commands has been
    unified.  In general, this gives more options to both than were previously
    available, however, there is one backward-incompatible change to the
    markers in scatter:

        "d" used to mean "diamond", it now means "narrow diamond".  "D" can be
        used for a "diamond".

    -MGD

2011-07-13
    Fix numerical problems in symlog scale, particularly when linthresh <= 1.0.
    Symlog plots may look different if one was depending on the old broken
    behavior - MGD

2011-07-10
    Fixed argument handling error in tripcolor/triplot/tricontour, issue #203.
    - IMT

2011-07-08
    Many functions added to mplot3d.axes3d to bring Axes3D objects more
    feature-parity with regular Axes objects.  Significant revisions to the
    documentation as well.  - BVR

2011-07-07
    Added compatibility with IPython strategy for picking a version of Qt4
    support, and an rcParam for making the choice explicitly: backend.qt4. - EF

2011-07-07
    Modified AutoMinorLocator to improve automatic choice of the number of
    minor intervals per major interval, and to allow one to specify this number
    via a kwarg. - EF

2011-06-28
    3D versions of scatter, plot, plot_wireframe, plot_surface, bar3d, and some
    other functions now support empty inputs. - BVR

2011-06-22
    Add set_theta_offset, set_theta_direction and set_theta_zero_location to
    polar axes to control the location of 0 and directionality of theta. - MGD

2011-06-22
    Add axes.labelweight parameter to set font weight to axis labels - MGD.

2011-06-20
    Add pause function to pyplot. - EF

2011-06-16
    Added *bottom* keyword parameter for the stem command.  Also, implemented a
    legend handler for the stem plot.  - JJL

2011-06-16
    Added legend.frameon rcParams. - Mike Kaufman

2011-05-31
    Made backend_qt4 compatible with PySide . - Gerald Storer

2011-04-17
    Disable keyboard auto-repeat in qt4 backend by ignoring key events
    resulting from auto-repeat.  This makes constrained zoom/pan work. - EF

2011-04-14
    interpolation="nearest" always interpolate images. A new mode "none" is
    introduced for no interpolation - JJL

2011-04-03
    Fixed broken pick interface to AsteriskCollection objects used by scatter.
    - EF

2011-04-01
    The plot directive Sphinx extension now supports all of the features in the
    Numpy fork of that extension.  These include doctest formatting, an
    'include-source' option, and a number of new configuration options. - MGD

2011-03-29
    Wrapped ViewVCCachedServer definition in a factory function.  This class
    now inherits from urllib2.HTTPSHandler in order to fetch data from github,
    but HTTPSHandler is not defined if python was built without SSL support. -
    DSD

2011-03-10
    Update pytz version to 2011c, thanks to Simon Cross. - JKS

2011-03-06
    Add standalone tests.py test runner script. - JKS

2011-03-06
    Set edgecolor to 'face' for scatter asterisk-type symbols; this fixes a bug
    in which these symbols were not responding to the c kwarg.  The symbols
    have no face area, so only the edgecolor is visible. - EF

2011-02-27
    Support libpng version 1.5.x; suggestion by Michael Albert. Changed
    installation specification to a minimum of libpng version 1.2.  - EF

2011-02-20
    clabel accepts a callable as an fmt kwarg; modified patch by Daniel Hyams.
    - EF

2011-02-18
    scatter([], []) is now valid.  Also fixed issues with empty collections -
    BVR

2011-02-07
    Quick workaround for dviread bug #3175113 - JKS

2011-02-05
    Add cbook memory monitoring for Windows, using tasklist. - EF

2011-02-05
    Speed up Normalize and LogNorm by using in-place operations and by using
    float32 for float32 inputs and for ints of 2 bytes or shorter; based on
    patch by Christoph Gohlke. - EF

2011-02-04
    Changed imshow to use rgba as uint8 from start to finish, instead of going
    through an intermediate step as double precision; thanks to Christoph
    Gohlke. - EF

2011-01-13
    Added zdir and offset arguments to contourf3d to bring contourf3d in
    feature parity with contour3d. - BVR

2011-01-04
    Tag 1.0.1 for release at r8896

2011-01-03
    Added display of ticker offset to 3d plots. - BVR

2011-01-03
    Turn off tick labeling on interior subplots for pyplots.subplots when
    sharex/sharey is True. - JDH

2010-12-29
    Implement axes_divider.HBox and VBox. -JJL

2010-11-22
    Fixed error with Hammer projection. - BVR

2010-11-12
    Fixed the placement and angle of axis labels in 3D plots. - BVR

2010-11-07
    New rc parameters examples.download and examples.directory allow bypassing
    the download mechanism in get_sample_data.  - JKS

2010-10-04
    Fix JPEG saving bug: only accept the kwargs documented by PIL for JPEG
    files. - JKS

2010-09-15
    Remove unused _wxagg extension and numerix.h. - EF

2010-08-25
    Add new framework for doing animations with examples.- RM

2010-08-21
    Remove unused and inappropriate methods from Tick classes:
    set_view_interval, get_minpos, and get_data_interval are properly found in
    the Axis class and don't need to be duplicated in XTick and YTick. - EF

2010-08-21
    Change Axis.set_view_interval() so that when updating an existing interval,
    it respects the orientation of that interval, and can enlarge but not
    reduce the interval.  This fixes a bug in which Axis.set_ticks would change
    the view limits of an inverted axis. Whether set_ticks should be affecting
    the viewLim at all remains an open question. - EF

2010-08-16
    Handle NaN's correctly in path analysis routines.  Fixes a bug where the
    best location for a legend was not calculated correctly when the line
    contains NaNs. - MGD

2010-08-14
    Fix bug in patch alpha handling, and in bar color kwarg - EF

2010-08-12
    Removed all traces of numerix module after 17 months of deprecation
    warnings. - EF

2010-08-05
    Added keyword arguments 'thetaunits' and 'runits' for polar plots.  Fixed
    PolarAxes so that when it set default Formatters, it marked them as such.
    Fixed semilogx and semilogy to no longer blindly reset the ticker
    information on the non-log axis.  Axes.arrow can now accept unitized data.
    - JRE

2010-08-03
    Add support for MPLSETUPCFG variable for custom setup.cfg filename.  Used
    by sage buildbot to build an mpl w/ no gui support - JDH

2010-08-01
    Create directory specified by MPLCONFIGDIR if it does not exist. - ADS

2010-07-20
    Return Qt4's default cursor when leaving the canvas - DSD

2010-07-06
    Tagging for mpl 1.0 at r8502

2010-07-05
    Added Ben Root's patch to put 3D plots in arbitrary axes, allowing you to
    mix 3d and 2d in different axes/subplots or to have multiple 3D plots in
    one figure.  See examples/mplot3d/subplot3d_demo.py - JDH

2010-07-05
    Preferred kwarg names in set_xlim are now 'left' and 'right'; in set_ylim,
    'bottom' and 'top'; original kwargs are still accepted without complaint. -
    EF

2010-07-05
    TkAgg and FltkAgg backends are now consistent with other interactive
    backends: when used in scripts from the command line (not from ipython
    -pylab), show blocks, and can be called more than once. - EF

2010-07-02
    Modified CXX/WrapPython.h to fix "swab bug" on solaris so mpl can compile
    on Solaris with CXX6 in the trunk.  Closes tracker bug 3022815 - JDH

2010-06-30
    Added autoscale convenience method and corresponding pyplot function for
    simplified control of autoscaling; and changed axis, set_xlim, and set_ylim
    so that by default, they turn off the autoscaling on the relevant axis or
    axes.  Therefore one can call set_xlim before plotting a line, for example,
    and the limits will be retained. - EF

2010-06-20
    Added Axes.tick_params and corresponding pyplot function to control tick
    and tick label appearance after an Axes has been created. - EF

2010-06-09
    Allow Axes.grid to control minor gridlines; allow Axes.grid and Axis.grid
    to control major and minor gridlines in the same method call. - EF

2010-06-06
    Change the way we do split/dividend adjustments in finance.py to handle
    dividends and fix the zero division bug reported in sf bug 2949906 and
    2123566.  Note that volume is not adjusted because the Yahoo CSV does not
    distinguish between share split and dividend adjustments making it near
    impossible to get volume adjustment right (unless we want to guess based on
    the size of the adjustment or scrape the html tables, which we don't) - JDH

2010-06-06
    Updated dateutil to 1.5 and pytz to 2010h.

2010-06-02
    Add error_kw kwarg to Axes.bar(). - EF

2010-06-01
    Fix pcolormesh() and QuadMesh to pass on kwargs as appropriate. - RM

2010-05-18
    Merge mpl_toolkits.gridspec into the main tree. - JJL

2010-05-04
    Improve backend_qt4 so it displays figures with the correct size - DSD

2010-04-20
    Added generic support for connecting to a timer for events. This adds
    TimerBase, TimerGTK, TimerQT, TimerWx, and TimerTk to the backends and a
    new_timer() method to each backend's canvas to allow ease of creating a new
    timer. - RM

2010-04-20
    Added margins() Axes method and pyplot function. - EF

2010-04-18
    update the axes_grid documentation. -JJL

2010-04-18
    Control MaxNLocator parameters after instantiation, and via
    Axes.locator_params method, with corresponding pyplot function. -EF

2010-04-18
    Control ScalarFormatter offsets directly and via the
    Axes.ticklabel_format() method, and add that to pyplot. -EF

2010-04-16
    Add a close_event to the backends. -RM

2010-04-06
    modify axes_grid examples to use axes_grid1 and axisartist. -JJL

2010-04-06
    rebase axes_grid using axes_grid1 and axisartist modules. -JJL

2010-04-06
    axes_grid toolkit is split into two separate modules, axes_grid1 and
    axisartist. -JJL

2010-04-05
    Speed up import: import pytz only if and when it is needed.  It is not
    needed if the rc timezone is UTC. - EF

2010-04-03
    Added color kwarg to Axes.hist(), based on work by Jeff Klukas. - EF

2010-03-24
    refactor colorbar code so that no cla() is necessary when mappable is
    changed. -JJL

2010-03-22
    fix incorrect rubber band during the zoom mode when mouse leaves the axes.
    -JJL

2010-03-21
    x/y key during the zoom mode only changes the x/y limits. -JJL

2010-03-20
    Added pyplot.sca() function suggested by JJL. - EF

2010-03-20
    Added conditional support for new Tooltip API in gtk backend. - EF

2010-03-20
    Changed plt.fig_subplot() to plt.subplots() after discussion on list, and
    changed its API to return axes as a numpy object array (with control of
    dimensions via squeeze keyword). FP.

2010-03-13
    Manually brought in commits from branch::

        ------------------------------------------------------------------------
        r8191 | leejjoon | 2010-03-13
        17:27:57 -0500 (Sat, 13 Mar 2010) | 1 line

    fix the bug that handles for scatter are incorrectly set when dpi!=72.
    Thanks to Ray Speth for the bug report.

2010-03-03
    Manually brought in commits from branch via diff/patch (svnmerge is broken)::

        ------------------------------------------------------------------------
        r8175 | leejjoon | 2010-03-03
        10:03:30 -0800 (Wed, 03 Mar 2010) | 1 line

        fix arguments of allow_rasterization.draw_wrapper
        ------------------------------------------------------------------------
        r8174 | jdh2358 | 2010-03-03
        09:15:58 -0800 (Wed, 03 Mar 2010) | 1 line

        added support for favicon in docs build
        ------------------------------------------------------------------------
        r8173 | jdh2358 | 2010-03-03
        08:56:16 -0800 (Wed, 03 Mar 2010) | 1 line

        applied Mattias get_bounds patch
        ------------------------------------------------------------------------
        r8172 | jdh2358 | 2010-03-03
        08:31:42 -0800 (Wed, 03 Mar 2010) | 1 line

        fix svnmerge download instructions
        ------------------------------------------------------------------------
        r8171 | jdh2358 | 2010-03-03
        07:47:48 -0800 (Wed, 03 Mar 2010) | 1 line

2010-02-25
    add annotation_demo3.py that demonstrates new functionality. -JJL

2010-02-25
    refactor Annotation to support arbitrary Transform as xycoords or
    textcoords. Also, if a tuple of two coordinates is provided, they are
    interpreted as coordinates for each x and y position.  -JJL

2010-02-24
    Added pyplot.fig_subplot(), to create a figure and a group of subplots in a
    single call.  This offers an easier pattern than manually making figures
    and calling add_subplot() multiple times. FP

2010-02-17
    Added Gokhan's and Mattias' customizable keybindings patch for the toolbar.
    You can now set the keymap.* properties in the matplotlibrc file.
    Newbindings were added for toggling log scaling on the x-axis. JDH

2010-02-16
    Committed TJ's filled marker patch for left|right|bottom|top|full filled
    markers.  See examples/pylab_examples/filledmarker_demo.py. JDH

2010-02-11
    Added 'bootstrap' option to boxplot. This allows bootstrap estimates of
    median confidence intervals. Based on an initial patch by Paul Hobson. -
    ADS

2010-02-06
    Added setup.cfg "basedirlist" option to override setting in setupext.py
    "basedir" dictionary; added "gnu0" platform requested by Benjamin Drung. -
    EF

2010-02-06
    Added 'xy' scaling option to EllipseCollection. - EF

2010-02-03
    Made plot_directive use a custom PlotWarning category, so that warnings can
    be turned into fatal errors easily if desired. - FP

2010-01-29
    Added draggable method to Legend to allow mouse drag placement.  Thanks
    Adam Fraser. JDH

2010-01-25
    Fixed a bug reported by Olle Engdegard, when using histograms with
    stepfilled and log=True - MM

2010-01-16
    Upgraded CXX to 6.1.1 - JDH

2009-01-16
    Don't create minor ticks on top of existing major ticks. Patch by Neil
    Crighton. -ADS

2009-01-16
    Ensure three minor ticks always drawn (SF# 2924245). Patch by Neil
    Crighton. -ADS

2010-01-16
    Applied patch by Ian Thomas to fix two contouring problems: now contourf
    handles interior masked regions, and the boundaries of line and filled
    contours coincide. - EF

2009-01-11
    The color of legend patch follows the rc parameters axes.facecolor and
    axes.edgecolor. -JJL

2009-01-11
    adjustable of Axes can be "box-forced" which allow sharing axes. -JJL

2009-01-11
    Add add_click and pop_click methods in BlockingContourLabeler. -JJL

2010-01-03
    Added rcParams['axes.color_cycle'] - EF

2010-01-03
    Added Pierre's qt4 formlayout editor and toolbar button - JDH

2009-12-31
    Add support for using math text as marker symbols (Thanks to tcb) - MGD

2009-12-31
    Commit a workaround for a regression in PyQt4-4.6.{0,1} - DSD

2009-12-22
    Fix cmap data for gist_earth_r, etc. -JJL

2009-12-20
    spines: put spines in data coordinates, add set_bounds() call. -ADS

2009-12-18
    Don't limit notch size in boxplot to q1-q3 range, as this is effectively
    making the data look better than it is. - ADS

2009-12-18
    mlab.prctile handles even-length data, such that the median is the mean of
    the two middle values. - ADS

2009-12-15
    Add raw-image (unsampled) support for the ps backend. - JJL

2009-12-14
    Add patch_artist kwarg to boxplot, but keep old default.  Convert
    boxplot_demo2.py to use the new patch_artist. - ADS

2009-12-06
    axes_grid: reimplemented AxisArtist with FloatingAxes support.  Added new
    examples. - JJL

2009-12-01
    Applied Laurent Dufrechou's patch to improve blitting with the qt4 backend
    - DSD

2009-11-13
    The pdf backend now allows changing the contents of a pdf file's
    information dictionary via PdfPages.infodict. - JKS

2009-11-12
    font_manager.py should no longer cause EINTR on Python 2.6 (but will on the
    2.5 version of subprocess). Also the fc-list command in that file was fixed
    so now it should actually find the list of fontconfig fonts. - JKS

2009-11-10
    Single images, and all images in renderers with option_image_nocomposite
    (i.e. agg, macosx and the svg backend when rcParams['svg.image_noscale'] is
    True), are now drawn respecting the zorder relative to other artists. (Note
    that there may now be inconsistencies across backends when more than one
    image is drawn at varying zorders, but this change introduces correct
    behavior for the backends in which it's easy to do so.)

2009-10-21
    Make AutoDateLocator more configurable by adding options to control the
    maximum and minimum number of ticks. Also add control of the intervals to
    be used for ticking. This does not change behavior but opens previously
    hard-coded behavior to runtime modification`. - RMM

2009-10-19
    Add "path_effects" support for Text and Patch. See
    examples/pylab_examples/patheffect_demo.py -JJL

2009-10-19
    Add "use_clabeltext" option to clabel. If True, clabels will be created
    with ClabelText class, which recalculates rotation angle of the label
    during the drawing time. -JJL

2009-10-16
    Make AutoDateFormatter actually use any specified timezone setting.This was
    only working correctly when no timezone was specified. - RMM

2009-09-27
    Beginnings of a capability to test the pdf backend. - JKS

2009-09-27
    Add a savefig.extension rcparam to control the default filename extension
    used by savefig. - JKS

===============================================

2009-09-21
    Tagged for release 0.99.1

2009-09-20
    Fix usetex spacing errors in pdf backend. - JKS

2009-09-20
    Add Sphinx extension to highlight IPython console sessions, originally
    authored (I think) by Michael Droetboom. - FP

2009-09-20
    Fix off-by-one error in dviread.Tfm, and additionally protect against
    exceptions in case a dvi font is missing some metrics. - JKS

2009-09-15
    Implement draw_text and draw_tex method of backend_base using the textpath
    module. Implement draw_tex method of the svg backend. - JJL

2009-09-15
    Don't fail on AFM files containing floating-point bounding boxes - JKS

2009-09-13
    AxesGrid : add modified version of colorbar. Add colorbar location howto. -
    JJL

2009-09-07
    AxesGrid : implemented axisline style.  Added a demo
    examples/axes_grid/demo_axisline_style.py- JJL

2009-09-04
    Make the textpath class as a separate module (textpath.py). Add support for
    mathtext and tex.- JJL

2009-09-01
    Added support for Gouraud interpolated triangles.  pcolormesh now accepts
    shading='gouraud' as an option. - MGD

2009-08-29
    Added matplotlib.testing package, which contains a Nose plugin and a
    decorator that lets tests be marked as KnownFailures - ADS

2009-08-20
    Added scaled dict to AutoDateFormatter for customized scales - JDH

2009-08-15
    Pyplot interface: the current image is now tracked at the figure and axes
    level, addressing tracker item 1656374. - EF

2009-08-15
    Docstrings are now manipulated with decorators defined in a new module,
    docstring.py, thanks to Jason Coombs. - EF

2009-08-14
    Add support for image filtering for agg back end. See the example
    demo_agg_filter.py. -JJL

2009-08-09
    AnnotationBbox added. Similar to Annotation, but works with OffsetBox
    instead of Text. See the example demo_annotation_box.py. -JJL

2009-08-07
    BboxImage implemented. Two examples, demo_bboximage.py and
    demo_ribbon_box.py added. - JJL

2009-08-07
    In an effort to simplify the backend API, all clipping rectangles and paths
    are now passed in using GraphicsContext objects, even on collections and
    images.  Therefore::

        draw_path_collection(self, master_transform, cliprect, clippath,
                             clippath_trans, paths, all_transforms, offsets,
                             offsetTrans, facecolors, edgecolors, linewidths,
                             linestyles, antialiaseds, urls)

    becomes::

        draw_path_collection(self, gc, master_transform, paths, all_transforms,
                             offsets, offsetTrans, facecolors, edgecolors,
                             linewidths, linestyles, antialiaseds, urls)

    ::

        draw_quad_mesh(self, master_transform, cliprect, clippath,
                       clippath_trans, meshWidth, meshHeight, coordinates,
                       offsets, offsetTrans, facecolors, antialiased,
                       showedges)

    becomes::

        draw_quad_mesh(self, gc, master_transform, meshWidth, meshHeight,
                       coordinates, offsets, offsetTrans, facecolors,
                       antialiased, showedges)

    ::

        draw_image(self, x, y, im, bbox, clippath=None, clippath_trans=None)

    becomes::

        draw_image(self, gc, x, y, im)

    - MGD

2009-08-06
    Tagging the 0.99.0 release at svn r7397 - JDH

    * fixed an alpha colormapping bug posted on sf 2832575

    * fix typo in axes_divider.py. use nanmin, nanmax in angle_helper.py (patch
      by Christoph Gohlke)

    * remove dup gui event in enter/leave events in gtk

    * lots of fixes for os x binaries (Thanks Russell Owen)

    * attach gtk events to mpl events -- fixes sf bug 2816580

    * applied sf patch 2815064 (middle button events for wx) and patch  2818092
      (resize events for wx)

    * fixed boilerplate.py so it doesn't break the ReST docs.

    * removed a couple of cases of mlab.load

    * fixed rec2csv win32 file handle bug from sf patch 2831018

    * added two examples from Josh Hemann:
      examples/pylab_examples/barchart_demo2.py and
      examples/pylab_examples/boxplot_demo2.py

    * handled sf bugs 2831556 and 2830525; better bar error messages and
      backend driver configs

    * added miktex win32 patch from sf patch 2820194

    * apply sf patches 2830233 and 2823885 for osx setup and 64 bit;  thanks
      Michiel

2009-08-04
    Made cbook.get_sample_data make use of the ETag and Last-Modified headers
    of mod_dav_svn. - JKS

2009-08-03
    Add PathCollection; modify contourf to use complex paths instead of simple
    paths with cuts. - EF

2009-08-03
    Fixed boilerplate.py so it doesn't break the ReST docs. - JKS

2009-08-03
    pylab no longer provides a load and save function.  These are available in
    matplotlib.mlab, or you can use numpy.loadtxt and numpy.savetxt for text
    files, or np.save and np.load for binary numpy arrays. - JDH

2009-07-31
    Added cbook.get_sample_data for urllib enabled fetching and caching of data
    needed for examples.  See examples/misc/sample_data_demo.py - JDH

2009-07-31
    Tagging 0.99.0.rc1 at 7314 - MGD

2009-07-30
    Add set_cmap and register_cmap, and improve get_cmap, to provide convenient
    handling of user-generated colormaps. Reorganized _cm and cm modules. - EF

2009-07-28
    Quiver speed improved, thanks to tip by Ray Speth. -EF

2009-07-27
    Simplify argument handling code for plot method. -EF

2009-07-25
    Allow "plot(1, 2, 'r*')" to work. - EF

2009-07-22
    Added an 'interp' keyword to griddata so the faster linear interpolation
    method can be chosen.  Default is 'nn', so default behavior (using natural
    neighbor method) is unchanged (JSW)

2009-07-22
    Improved boilerplate.py so that it generates the correct signatures for
    pyplot functions. - JKS

2009-07-19
    Fixed the docstring of Axes.step to reflect the correct meaning of the
    kwargs "pre" and "post" - See SF bug
    \https://sourceforge.net/tracker/index.php?func=detail&aid=2823304&group_id=80706&atid=560720
    - JDH

2009-07-18
    Fix support for hatches without color fills to pdf and svg backends. Add an
    example of that to hatch_demo.py. - JKS

2009-07-17
    Removed fossils from swig version of agg backend. - EF

2009-07-14
    initial submission of the annotation guide. -JJL

2009-07-14
    axes_grid : minor improvements in anchored_artists and inset_locator. -JJL

2009-07-14
    Fix a few bugs in ConnectionStyle algorithms. Add ConnectionPatch class.
    -JJL

2009-07-11
    Added a fillstyle Line2D property for half filled markers -- see
    examples/pylab_examples/fillstyle_demo.py JDH

2009-07-08
    Attempt to improve performance of qt4 backend, do not call
    qApp.processEvents while processing an event. Thanks Ole Streicher for
    tracking this down - DSD

2009-06-24
    Add withheader option to mlab.rec2csv and changed use_mrecords default to
    False in mlab.csv2rec since this is partially broken - JDH

2009-06-24
    backend_agg.draw_marker quantizes the main path (as in the draw_path). -
    JJL

2009-06-24
    axes_grid: floating axis support added. - JJL

2009-06-14
    Add new command line options to backend_driver.py to support running only
    some directories of tests - JKS

2009-06-13
    partial cleanup of mlab and its importation in pylab - EF

2009-06-13
    Introduce a rotation_mode property for the Text artist. See
    examples/pylab_examples/demo_text_rotation_mode.py -JJL

2009-06-07
    add support for bz2 files per sf support request 2794556 - JDH

2009-06-06
    added a properties method to the artist and inspector to return a dict
    mapping property name -> value; see sf feature request 2792183 - JDH

2009-06-06
    added Neil's auto minor tick patch; sf patch #2789713 - JDH

2009-06-06
    do not apply alpha to rgba color conversion if input is already rgba - JDH

2009-06-03
    axes_grid : Initial check-in of curvelinear grid support. See
    examples/axes_grid/demo_curvelinear_grid.py - JJL

2009-06-01
    Add set_color method to Patch - EF

2009-06-01
    Spine is now derived from Patch - ADS

2009-06-01
    use cbook.is_string_like() instead of isinstance() for spines - ADS

2009-06-01
    cla() support for spines - ADS

2009-06-01
    Removed support for gtk < 2.4. - EF

2009-05-29
    Improved the animation_blit_qt4 example, which was a mix of the
    object-oriented and pylab interfaces. It is now strictly object-oriented -
    DSD

2009-05-28
    Fix axes_grid toolkit to work with spine patch by ADS. - JJL

2009-05-28
    Applied fbianco's patch to handle scroll wheel events in the qt4 backend -
    DSD

2009-05-26
    Add support for "axis spines" to have arbitrary location. -ADS

2009-05-20
    Add an empty matplotlibrc to the tests/ directory so that running tests
    will use the default set of rcparams rather than the user's config. - RMM

2009-05-19
    Axis.grid(): allow use of which='major,minor' to have grid on major and
    minor ticks. -ADS

2009-05-18
    Make psd(), csd(), and cohere() wrap properly for complex/two-sided
    versions, like specgram() (SF #2791686) - RMM

2009-05-18
    Fix the linespacing bug of multiline text (#1239682). See
    examples/pylab_examples/multiline.py -JJL

2009-05-18
    Add *annotation_clip* attr. for text.Annotation class.  If True, annotation
    is only drawn when the annotated point is inside the axes area. -JJL

2009-05-17
    Fix bug(#2749174) that some properties of minor ticks are not conserved
    -JJL

2009-05-17
    applied Michiel's sf patch 2790638 to turn off gtk event loop in setupext
    for pygtk>=2.15.10 - JDH

2009-05-17
    applied Michiel's sf patch 2792742 to speed up Cairo and macosx
    collections; speedups can be 20x.  Also fixes some bugs in which gc got
    into inconsistent state

-----------------------

2008-05-17
    Release 0.98.5.3 at r7107 from the branch - JDH

2009-05-13
    An optional offset and bbox support in restore_bbox.  Add
    animation_blit_gtk2.py. -JJL

2009-05-13
    psfrag in backend_ps now uses baseline-alignment when preview.sty is used
    ((default is bottom-alignment). Also, a small API improvement in
    OffsetBox-JJL

2009-05-13
    When the x-coordinate of a line is monotonically increasing, it is now
    automatically clipped at the stage of generating the transformed path in
    the draw method; this greatly speeds up zooming and panning when one is
    looking at a short segment of a long time series, for example. - EF

2009-05-11
    aspect=1 in log-log plot gives square decades. -JJL

2009-05-08
    clabel takes new kwarg, rightside_up; if False, labels will not be flipped
    to keep them rightside-up.  This allows the use of clabel to make
    streamfunction arrows, as requested by Evan Mason. - EF

2009-05-07
    'labelpad' can now be passed when setting x/y labels. This allows
    controlling the spacing between the label and its axis. - RMM

2009-05-06
    print_ps now uses mixed-mode renderer. Axes.draw rasterize artists whose
    zorder smaller than rasterization_zorder.  -JJL

2009-05-06
    Per-artist Rasterization, originally by Eric Bruning. -JJ

2009-05-05
    Add an example that shows how to make a plot that updates using data from
    another process.  Thanks to Robert Cimrman - RMM

2009-05-05
    Add Axes.get_legend_handles_labels method. - JJL

2009-05-04
    Fix bug that Text.Annotation is still drawn while set to not visible. - JJL

2009-05-04
    Added TJ's fill_betweenx patch - JDH

2009-05-02
    Added options to plotfile based on question from Joseph Smidt and patch by
    Matthias Michler. - EF

2009-05-01
    Changed add_artist and similar Axes methods to return their argument. - EF

2009-04-30
    Incorrect eps bbox for landscape mode fixed - JJL

2009-04-28
    Fixed incorrect bbox of eps output when usetex=True. - JJL

2009-04-24
    Changed use of os.open* to instead use subprocess.Popen.  os.popen* are
    deprecated in 2.6 and are removed in 3.0. - RMM

2009-04-20
    Worked on axes_grid documentation. Added axes_grid.inset_locator. - JJL

2009-04-17
    Initial check-in of the axes_grid toolkit. - JJL

2009-04-17
    Added a support for bbox_to_anchor in offsetbox.AnchoredOffsetbox. Improved
    a documentation.  - JJL

2009-04-16
    Fixed a offsetbox bug that multiline texts are not correctly aligned.  -
    JJL

2009-04-16
    Fixed a bug in mixed mode renderer that images produced by an rasterizing
    backend are placed with incorrect size.  - JJL

2009-04-14
    Added Jonathan Taylor's Reinier Heeres' port of John Porters' mplot3d to
    svn trunk.  Package in mpl_toolkits.mplot3d and demo is
    examples/mplot3d/demo.py.  Thanks Reiner

2009-04-06
    The pdf backend now escapes newlines and linefeeds in strings.  Fixes sf
    bug #2708559; thanks to Tiago Pereira for the report.

2009-04-06
    texmanager.make_dvi now raises an error if LaTeX failed to create an output
    file. Thanks to Joao Luis Silva for reporting this. - JKS

2009-04-05
    _png.read_png() reads 12 bit PNGs (patch from Tobias Wood) - ADS

2009-04-04
    Allow log axis scale to clip non-positive values to small positive value;
    this is useful for errorbars. - EF

2009-03-28
    Make images handle nan in their array argument.  A helper,
    cbook.safe_masked_invalid() was added. - EF

2009-03-25
    Make contour and contourf handle nan in their Z argument. - EF

2009-03-20
    Add AuxTransformBox in offsetbox.py to support some transformation.
    anchored_text.py example is enhanced and renamed (anchored_artists.py). -
    JJL

2009-03-20
    Add "bar" connection style for annotation - JJL

2009-03-17
    Fix bugs in edge color handling by contourf, found by Jae-Joon Lee. - EF

2009-03-14
    Added 'LightSource' class to colors module for creating shaded relief maps.
    shading_example.py added to illustrate usage. - JSW

2009-03-11
    Ensure wx version >= 2.8; thanks to Sandro Tosi and Chris Barker. - EF

2009-03-10
    Fix join style bug in pdf. - JKS

2009-03-07
    Add pyplot access to figure number list - EF

2009-02-28
    hashing of FontProperties accounts current rcParams - JJL

2009-02-28
    Prevent double-rendering of shared axis in twinx, twiny - EF

2009-02-26
    Add optional bbox_to_anchor argument for legend class - JJL

2009-02-26
    Support image clipping in pdf backend. - JKS

2009-02-25
    Improve tick location subset choice in FixedLocator. - EF

2009-02-24
    Deprecate numerix, and strip out all but the numpy part of the code. - EF

2009-02-21
    Improve scatter argument handling; add an early error message, allow inputs
    to have more than one dimension. - EF

2009-02-16
    Move plot_directive.py to the installed source tree.  Add support for
    inline code content - MGD

2009-02-16
    Move mathmpl.py to the installed source tree so it is available to other
    projects. - MGD

2009-02-14
    Added the legend title support - JJL

2009-02-10
    Fixed a bug in backend_pdf so it doesn't break when the setting
    pdf.use14corefonts=True is used. Added test case in
    unit/test_pdf_use14corefonts.py. - NGR

2009-02-08
    Added a new imsave function to image.py and exposed it in the pyplot
    interface - GR

2009-02-04
    Some reorgnization of the legend code. anchored_text.py added as an
    example. - JJL

2009-02-04
    Add extent keyword arg to hexbin - ADS

2009-02-04
    Fix bug in mathtext related to \dots and \ldots - MGD

2009-02-03
    Change default joinstyle to round - MGD

2009-02-02
    Reduce number of marker XObjects in pdf output - JKS

2009-02-02
    Change default resolution on polar plot to 1 - MGD

2009-02-02
    Avoid malloc errors in ttconv for fonts that don't have e.g., PostName (a
    version of Tahoma triggered this) - JKS

2009-01-30
    Remove support for pyExcelerator in exceltools -- use xlwt instead - JDH

2009-01-29
    Document 'resolution' kwarg for polar plots.  Support it when using
    pyplot.polar, not just Figure.add_axes. - MGD

2009-01-29
    Rework the nan-handling/clipping/quantizing/simplification framework so
    each is an independent part of a pipeline.  Expose the C++-implementation
    of all of this so it can be used from all Python backends.  Add rcParam
    "path.simplify_threshold" to control the threshold of similarity below
    which vertices will be removed.

2009-01-26
    Improved tight bbox option of the savefig. - JJL

2009-01-26
    Make curves and NaNs play nice together - MGD

2009-01-21
    Changed the defaults of acorr and xcorr to use usevlines=True, maxlags=10
    and normed=True since these are the best defaults

2009-01-19
    Fix bug in quiver argument handling. - EF

2009-01-19
    Fix bug in backend_gtk: don't delete nonexistent toolbar. - EF

2009-01-16
    Implement bbox_inches option for savefig. If bbox_inches is "tight", try to
    determine the tight bounding box. - JJL

2009-01-16
    Fix bug in is_string_like so it doesn't raise an unnecessary exception. -
    EF

2009-01-16
    Fix an infinite recursion in the unit registry when searching for a
    converter for a sequence of strings. Add a corresponding test. - RM

2009-01-16
    Bugfix of C typedef of MPL_Int64 that was failing on Windows XP 64 bit, as
    reported by George Goussard on numpy mailing list. - ADS

2009-01-16
    Added helper function LinearSegmentedColormap.from_list to facilitate
    building simple custom colomaps.  See
    examples/pylab_examples/custom_cmap_fromlist.py - JDH

2009-01-16
    Applied Michiel's patch for macosx backend to fix rounding bug. Closed sf
    bug 2508440 - JSW

2009-01-10
    Applied Michiel's hatch patch for macosx backend and draw_idle patch for
    qt.  Closes sf patched 2497785 and 2468809 - JDH

2009-01-10
    Fix bug in pan/zoom with log coordinates. - EF

2009-01-06
    Fix bug in setting of dashed negative contours. - EF

2009-01-06
    Be fault tolerant when len(linestyles)>NLev in contour. - MM

2009-01-06
    Added marginals kwarg to hexbin to plot marginal densities JDH

2009-01-06
    Change user-visible multipage pdf object to PdfPages to avoid accidents
    with the file-like PdfFile. - JKS

2009-01-05
    Fix a bug in pdf usetex: allow using non-embedded fonts. - JKS

2009-01-05
    optional use of preview.sty in usetex mode. - JJL

2009-01-02
    Allow multipage pdf files. - JKS

2008-12-31
    Improve pdf usetex by adding support for font effects (slanting and
    extending). - JKS

2008-12-29
    Fix a bug in pdf usetex support, which occurred if the same Type-1 font was
    used with different encodings, e.g., with Minion Pro and MnSymbol. - JKS

2008-12-20
    fix the dpi-dependent offset of Shadow. - JJL

2008-12-20
    fix the hatch bug in the pdf backend. minor update in docs and  example -
    JJL

2008-12-19
    Add axes_locator attribute in Axes. Two examples are added.  - JJL

2008-12-19
    Update Axes.legend documentation. /api/api_changes.rst is also updated to
    describe changes in keyword parameters.  Issue a warning if old keyword
    parameters are used. - JJL

2008-12-18
    add new arrow style, a line + filled triangles. -JJL

----------------

2008-12-18
    Re-Released 0.98.5.2 from v0_98_5_maint at r6679 Released 0.98.5.2 from
    v0_98_5_maint at r6667

2008-12-18
    Removed configobj, experimental traits and doc/mpl_data link - JDH

2008-12-18
    Fix bug where a line with NULL data limits prevents subsequent data limits
    from calculating correctly - MGD

2008-12-17
    Major documentation generator changes - MGD

2008-12-17
    Applied macosx backend patch with support for path collections, quadmesh,
    etc... - JDH

2008-12-17
    fix dpi-dependent behavior of text bbox and arrow in annotate -JJL

2008-12-17
    Add group id support in artist. Two examples which demonstrate svg filter
    are added. -JJL

2008-12-16
    Another attempt to fix dpi-dependent behavior of Legend. -JJL

2008-12-16
    Fixed dpi-dependent behavior of Legend and fancybox in Text.

2008-12-16
    Added markevery property to Line2D to support subsampling of markers - JDH

2008-12-15
    Removed mpl_data symlink in docs.  On platforms that do not support
    symlinks, these become copies, and the font files are large, so the distro
    becomes unnecessarily bloated.  Keeping the mpl_examples dir because
    relative links are harder for the plot directive and the \*.py files are
    not so large. - JDH

2008-12-15
    Fix \$ in non-math text with usetex off.  Document differences between
    usetex on/off - MGD

2008-12-15
    Fix anti-aliasing when auto-snapping - MGD

2008-12-15
    Fix grid lines not moving correctly during pan and zoom - MGD

2008-12-12
    Preparations to eliminate maskedarray rcParams key: its use will now
    generate a warning.  Similarly, importing the obsolote numerix.npyma will
    generate a warning. - EF

2008-12-12
    Added support for the numpy.histogram() weights parameter to the axes
    hist() method. Docs taken from numpy - MM

2008-12-12
    Fixed warning in hist() with numpy 1.2 - MM

2008-12-12
    Removed external packages: configobj and enthought.traits which are only
    required by the experimental traited config and are somewhat out of date.
    If needed, install them independently, see
    http://code.enthought.com/pages/traits.html and
    http://www.voidspace.org.uk/python/configobj.html

2008-12-12
    Added support to assign labels to histograms of multiple data. - MM

-------------------------

2008-12-11
    Released 0.98.5 at svn r6573

2008-12-11
    Use subprocess.Popen instead of os.popen in dviread (Windows problem
    reported by Jorgen Stenarson) - JKS

2008-12-10
    Added Michael's font_manager fix and Jae-Joon's figure/subplot fix.  Bumped
    version number to 0.98.5 - JDH

----------------------------

2008-12-09
    Released 0.98.4 at svn r6536

2008-12-08
    Added mdehoon's native macosx backend from sf patch 2179017 - JDH

2008-12-08
    Removed the prints in the set_*style commands.  Return the list of pprinted
    strings instead - JDH

2008-12-08
    Some of the changes Michael made to improve the output of the property
    tables in the rest docs broke of made difficult to use some of the
    interactive doc helpers, e.g., setp and getp.  Having all the rest markup
    in the ipython shell also confused the docstrings.  I added a new rc param
    docstring.hardcopy, to format the docstrings differently for hard copy and
    other use.  The ArtistInspector could use a little refactoring now since
    there is duplication of effort between the rest out put and the non-rest
    output - JDH

2008-12-08
    Updated spectral methods (psd, csd, etc.) to scale one-sided densities by a
    factor of 2 and, optionally, scale all densities by the sampling frequency.
    This gives better MatLab compatibility. -RM

2008-12-08
    Fixed alignment of ticks in colorbars. -MGD

2008-12-07
    drop the deprecated "new" keyword of np.histogram() for numpy 1.2 or later.
    -JJL

2008-12-06
    Fixed a bug in svg backend that new_figure_manager() ignores keywords
    arguments such as figsize, etc. -JJL

2008-12-05
    Fixed a bug that the handlelength of the new legend class set too short
    when numpoints=1 -JJL

2008-12-04
    Added support for data with units (e.g., dates) to Axes.fill_between. -RM

2008-12-04
    Added fancybox keyword to legend. Also applied some changes for better
    look, including baseline adjustment of the multiline texts so that it is
    center aligned. -JJL

2008-12-02
    The transmuter classes in the patches.py are reorganized as subclasses of
    the Style classes. A few more box and arrow styles are added. -JJL

2008-12-02
    Fixed a bug in the new legend class that didn't allowed a tuple of
    coordinate values as loc. -JJL

2008-12-02
    Improve checks for external dependencies, using subprocess (instead of
    deprecated popen*) and distutils (for version checking) - DSD

2008-11-30
    Reimplementation of the legend which supports baseline alignment,
    multi-column, and expand mode. - JJL

2008-12-01
    Fixed histogram autoscaling bug when bins or range are given explicitly
    (fixes Debian bug 503148) - MM

2008-11-25
    Added rcParam axes.unicode_minus which allows plain hyphen for minus when
    False - JDH

2008-11-25
    Added scatterpoints support in Legend. patch by Erik Tollerud - JJL

2008-11-24
    Fix crash in log ticking. - MGD

2008-11-20
    Added static helper method BrokenHBarCollection.span_where and Axes/pyplot
    method fill_between.  See examples/pylab/fill_between.py - JDH

2008-11-12
    Add x_isdata and y_isdata attributes to Artist instances, and use them to
    determine whether either or both coordinates are used when updating
    dataLim.  This is used to fix autoscaling problems that had been triggered
    by axhline, axhspan, axvline, axvspan. - EF

2008-11-11
    Update the psd(), csd(), cohere(), and specgram() methods of Axes and the
    csd() cohere(), and specgram() functions in mlab to be in sync with the
    changes to psd().  In fact, under the hood, these all call the same core to
    do computations. - RM

2008-11-11
    Add 'pad_to' and 'sides' parameters to mlab.psd() to allow controlling of
    zero padding and returning of negative frequency components, respecitively.
    These are added in a way that does not change the API. - RM

2008-11-10
    Fix handling of c kwarg by scatter; generalize is_string_like to accept
    numpy and numpy.ma string array scalars. - RM and EF

2008-11-09
    Fix a possible EINTR problem in dviread, which might help when saving pdf
    files from the qt backend. - JKS

2008-11-05
    Fix bug with zoom to rectangle and twin axes - MGD

2008-10-24
    Added Jae Joon's fancy arrow, box and annotation enhancements -- see
    examples/pylab_examples/annotation_demo2.py

2008-10-23
    Autoscaling is now supported with shared axes - EF

2008-10-23
    Fixed exception in dviread that happened with Minion - JKS

2008-10-21
    set_xlim, ylim now return a copy of the viewlim array to avoid modify
    inplace surprises

2008-10-20
    Added image thumbnail generating function matplotlib.image.thumbnail.  See
    examples/misc/image_thumbnail.py - JDH

2008-10-20
    Applied scatleg patch based on ideas and work by Erik Tollerud and Jae-Joon
    Lee. - MM

2008-10-11
    Fixed bug in pdf backend: if you pass a file object for output instead of a
    filename, e.g., in a wep app, we now flush the object at the end. - JKS

2008-10-08
    Add path simplification support to paths with gaps. - EF

2008-10-05
    Fix problem with AFM files that don't specify the font's full name or
    family name. - JKS

2008-10-04
    Added 'scilimits' kwarg to Axes.ticklabel_format() method, for easy access
    to the set_powerlimits method of the major ScalarFormatter. - EF

2008-10-04
    Experimental new kwarg borderpad to replace pad in legend, based on
    suggestion by Jae-Joon Lee.  - EF

2008-09-27
    Allow spy to ignore zero values in sparse arrays, based on patch by Tony
    Yu.  Also fixed plot to handle empty data arrays, and fixed handling of
    markers in figlegend. - EF

2008-09-24
    Introduce drawstyles for lines. Transparently split linestyles like
    'steps--' into drawstyle 'steps' and linestyle '--'.  Legends always use
    drawstyle 'default'. - MM

2008-09-18
    Fixed quiver and quiverkey bugs (failure to scale properly when resizing)
    and added additional methods for determining the arrow angles - EF

2008-09-18
    Fix polar interpolation to handle negative values of theta - MGD

2008-09-14
    Reorganized cbook and mlab methods related to numerical calculations that
    have little to do with the goals of those two modules into a separate
    module numerical_methods.py Also, added ability to select points and stop
    point selection with keyboard in ginput and manual contour labeling code.
    Finally, fixed contour labeling bug. - DMK

2008-09-11
    Fix backtick in Postscript output. - MGD

2008-09-10
    [ 2089958 ] Path simplification for vector output backends Leverage the
    simplification code exposed through path_to_polygons to simplify certain
    well-behaved paths in the vector backends (PDF, PS and SVG).
    "path.simplify" must be set to True in matplotlibrc for this to work.
    - MGD

2008-09-10
    Add "filled" kwarg to Path.intersects_path and Path.intersects_bbox. - MGD

2008-09-07
    Changed full arrows slightly to avoid an xpdf rendering problem reported by
    Friedrich Hagedorn. - JKS

2008-09-07
    Fix conversion of quadratic to cubic Bezier curves in PDF and PS backends.
    Patch by Jae-Joon Lee. - JKS

2008-09-06
    Added 5-point star marker to plot command - EF

2008-09-05
    Fix hatching in PS backend - MGD

2008-09-03
    Fix log with base 2 - MGD

2008-09-01
    Added support for bilinear interpolation in NonUniformImage; patch by
    Gregory Lielens. - EF

2008-08-28
    Added support for multiple histograms with data of different length - MM

2008-08-28
    Fix step plots with log scale - MGD

2008-08-28
    Fix masked arrays with markers in non-Agg backends - MGD

2008-08-28
    Fix clip_on kwarg so it actually works correctly - MGD

2008-08-25
    Fix locale problems in SVG backend - MGD

2008-08-22
    fix quiver so masked values are not plotted - JSW

2008-08-18
    improve interactive pan/zoom in qt4 backend on windows - DSD

2008-08-11
    Fix more bugs in NaN/inf handling.  In particular, path simplification
    (which does not handle NaNs or infs) will be turned off automatically when
    infs or NaNs are present.  Also masked arrays are now converted to arrays
    with NaNs for consistent handling of masks and NaNs - MGD and EF

------------------------

2008-08-03
    Released 0.98.3 at svn r5947

2008-08-01
    Backported memory leak fixes in _ttconv.cpp - MGD

2008-07-31
    Added masked array support to griddata. - JSW

2008-07-26
    Added optional C and reduce_C_function arguments to axes.hexbin().  This
    allows hexbin to accumulate the values of C based on the x,y coordinates
    and display in hexagonal bins. - ADS

2008-07-24
    Deprecated (raise NotImplementedError) all the mlab2 functions from
    matplotlib.mlab out of concern that some of them were not clean room
    implementations. JDH

2008-07-24
    Rewrite of a significant portion of the clabel code (class ContourLabeler)
    to improve inlining. - DMK

2008-07-22
    Added Barbs polygon collection (similar to Quiver) for plotting wind barbs.
    Added corresponding helpers to Axes and pyplot as well.
    (examples/pylab_examples/barb_demo.py shows it off.) - RMM

2008-07-21
    Added scikits.delaunay as matplotlib.delaunay.  Added griddata function in
    matplotlib.mlab, with example (griddata_demo.py) in pylab_examples.
    griddata function will use mpl_toolkits._natgrid if installed.  - JSW

2008-07-21
    Re-introduced offset_copy that works in the context of the new transforms.
    - MGD

2008-07-21
    Committed patch by Ryan May to add get_offsets and set_offsets to
    Collections base class - EF

2008-07-21
    Changed the "asarray" strategy in image.py so that colormapping of masked
    input should work for all image types (thanks Klaus Zimmerman) - EF

2008-07-20
    Rewrote cbook.delete_masked_points and corresponding unit test to support
    rgb color array inputs, datetime inputs, etc. - EF

2008-07-20
    Renamed unit/axes_unit.py to cbook_unit.py and modified in accord with
    Ryan's move of delete_masked_points from axes to cbook. - EF

2008-07-18
    Check for nan and inf in axes.delete_masked_points().  This should help
    hexbin and scatter deal with nans. - ADS

2008-07-17
    Added ability to manually select contour label locations.  Also added a
    waitforbuttonpress function. - DMK

2008-07-17
    Fix bug with NaNs at end of path (thanks, Andrew Straw for the report) -
    MGD

2008-07-16
    Improve error handling in texmanager, thanks to Ian Henry for reporting -
    DSD

2008-07-12
    Added support for external backends with the "module://my_backend" syntax -
    JDH

2008-07-11
    Fix memory leak related to shared axes.  Grouper should store weak
    references. - MGD

2008-07-10
    Bugfix: crash displaying fontconfig pattern - MGD

2008-07-10
    Bugfix: [ 2013963 ] update_datalim_bounds in Axes not works - MGD

2008-07-10
    Bugfix: [ 2014183 ] multiple imshow() causes gray edges - MGD

2008-07-09
    Fix rectangular axes patch on polar plots bug - MGD

2008-07-09
    Improve mathtext radical rendering - MGD

2008-07-08
    Improve mathtext superscript placement - MGD

2008-07-07
    Fix custom scales in pcolormesh (thanks Matthew Turk) - MGD

2008-07-03
    Implemented findobj method for artist and pyplot - see
    examples/pylab_examples/findobj_demo.py - JDH

2008-06-30
    Another attempt to fix TextWithDash - DSD

2008-06-30
    Removed Qt4 NavigationToolbar2.destroy -- it appears to have been
    unnecessary and caused a bug reported by P.  Raybaut - DSD

2008-06-27
    Fixed tick positioning bug - MM

2008-06-27
    Fix dashed text bug where text was at the wrong end of the dash - MGD

2008-06-26
    Fix mathtext bug for expressions like $x_{\leftarrow}$ - MGD

2008-06-26
    Fix direction of horizontal/vertical hatches - MGD

2008-06-25
    Figure.figurePatch renamed Figure.patch, Axes.axesPatch renamed Axes.patch,
    Axes.axesFrame renamed Axes.frame, Axes.get_frame, which returns
    Axes.patch, is deprecated.  Examples and users guide updated - JDH

2008-06-25
    Fix rendering quality of pcolor - MGD

----------------------------

2008-06-24
    Released 0.98.2 at svn r5667 - (source only for debian) JDH

2008-06-24
    Added "transparent" kwarg to savefig. - MGD

2008-06-24
    Applied Stefan's patch to draw a single centered marker over a line with
    numpoints==1 - JDH

2008-06-23
    Use splines to render circles in scatter plots - MGD

----------------------------

2008-06-22
    Released 0.98.1 at revision 5637

2008-06-22
    Removed axes3d support and replaced it with a NotImplementedError for one
    release cycle

2008-06-21
    fix marker placement bug in backend_ps - DSD

2008-06-20
    [ 1978629 ] scale documentation missing/incorrect for log - MGD

2008-06-20
    Added closed kwarg to PolyCollection.  Fixes bug [ 1994535 ] still missing
    lines on graph with svn (r 5548). - MGD

2008-06-20
    Added set/get_closed method to Polygon; fixes error in hist - MM

2008-06-19
    Use relative font sizes (e.g., 'medium' and 'large') in rcsetup.py and
    matplotlibrc.template so that text will be scaled by default when changing
    rcParams['font.size'] - EF

2008-06-17
    Add a generic PatchCollection class that can contain any kind of patch. -
    MGD

2008-06-13
    Change pie chart label alignment to avoid having labels overwrite the pie -
    MGD

2008-06-12
    Added some helper functions to the mathtext parser to return bitmap arrays
    or write pngs to make it easier to use mathtext outside the context of an
    mpl figure.  modified the mathpng sphinxext to use the mathtext png save
    functionality - see examples/api/mathtext_asarray.py - JDH

2008-06-11
    Use matplotlib.mathtext to render math expressions in online docs - MGD

2008-06-11
    Move PNG loading/saving to its own extension module, and remove duplicate
    code in _backend_agg.cpp and _image.cpp that does the same thing - MGD

2008-06-11
    Numerous mathtext bugfixes, primarily related to dpi-independence - MGD

2008-06-10
    Bar now applies the label only to the first patch only, and sets
    '_nolegend_' for the other patch labels.  This lets autolegend work as
    expected for hist and bar - see
    \https://sourceforge.net/tracker/index.php?func=detail&aid=1986597&group_id=80706&atid=560720
    JDH

2008-06-10
    Fix text baseline alignment bug.  [ 1985420 ] Repair of baseline alignment
    in Text._get_layout.  Thanks Stan West - MGD

2008-06-09
    Committed Gregor's image resample patch to downsampling images with new
    rcparam image.resample - JDH

2008-06-09
    Don't install Enthought.Traits along with matplotlib. For matplotlib
    developers convenience, it can still be installed by setting an option in
    setup.cfg while we figure decide if there is a future for the traited
    config - DSD

2008-06-09
    Added range keyword arg to hist() - MM

2008-06-07
    Moved list of backends to rcsetup.py; made use of lower case for backend
    names consistent; use validate_backend when importing backends subpackage -
    EF

2008-06-06
    hist() revision, applied ideas proposed by Erik Tollerud and Olle
    Engdegard: make histtype='step' unfilled by default and introduce
    histtype='stepfilled'; use default color cycle; introduce reverse
    cumulative histogram; new align keyword - MM

2008-06-06
    Fix closed polygon patch and also provide the option to not close the
    polygon - MGD

2008-06-05
    Fix some dpi-changing-related problems with PolyCollection, as called by
    Axes.scatter() - MGD

2008-06-05
    Fix image drawing so there is no extra space to the right or bottom - MGD

2006-06-04
    Added a figure title command suptitle as a Figure method and pyplot command
    -- see examples/figure_title.py - JDH

2008-06-02
    Added support for log to hist with histtype='step' and fixed a bug for
    log-scale stacked histograms - MM

-----------------------------

2008-05-29
    Released 0.98.0 at revision 5314

2008-05-29
    matplotlib.image.imread now no longer always returns RGBA -- if the image
    is luminance or RGB, it will return a MxN or MxNx3 array if possible.  Also
    uint8 is no longer always forced to float.

2008-05-29
    Implement path clipping in PS backend - JDH

2008-05-29
    Fixed two bugs in texmanager.py: improved comparison of dvipng versions
    fixed a bug introduced when get_grey method was added - DSD

2008-05-28
    Fix crashing of PDFs in xpdf and ghostscript when two-byte characters are
    used with Type 3 fonts - MGD

2008-05-28
    Allow keyword args to configure widget properties as requested in
    \http://sourceforge.net/tracker/index.php?func=detail&aid=1866207&group_id=80706&atid=560722
    - JDH

2008-05-28
    Replaced '-' with u'\\u2212' for minus sign as requested in
    \http://sourceforge.net/tracker/index.php?func=detail&aid=1962574&group_id=80706&atid=560720

2008-05-28
    zero width/height Rectangles no longer influence the autoscaler.  Useful
    for log histograms with empty bins - JDH

2008-05-28
    Fix rendering of composite glyphs in Type 3 conversion (particularly as
    evidenced in the Eunjin.ttf Korean font) Thanks Jae-Joon Lee for finding
    this!

2008-05-27
    Rewrote the cm.ScalarMappable callback infrastructure to use
    cbook.CallbackRegistry rather than custom callback handling.  Any users of
    add_observer/notify of the cm.ScalarMappable should use the
    cm.ScalarMappable.callbacksSM CallbackRegistry instead. JDH

2008-05-27
    Fix TkAgg build on Ubuntu 8.04 (and hopefully a more general solution for
    other platforms, too.)

2008-05-24
    Added PIL support for loading images to imread (if PIL is available) - JDH

2008-05-23
    Provided a function and a method for controlling the plot color cycle. - EF

2008-05-23
    Major revision of hist(). Can handle 2D arrays and create stacked histogram
    plots; keyword 'width' deprecated and rwidth (relative width) introduced;
    align='edge' changed to center of bin - MM

2008-05-22
    Added support for ReST-based doumentation using Sphinx.  Documents are
    located in doc/, and are broken up into a users guide and an API reference.
    To build, run the make.py files. Sphinx-0.4 is needed to build generate
    xml, which will be useful for rendering equations with mathml, use sphinx
    from svn until 0.4 is released - DSD

2008-05-21
    Fix segfault in TkAgg backend - MGD

2008-05-21
    Fix a "local variable unreferenced" bug in plotfile - MM

2008-05-19
    Fix crash when Windows can not access the registry to determine font path
    [Bug 1966974, thanks Patrik Simons] - MGD

2008-05-16
    removed some unneeded code w/ the python 2.4 requirement.  cbook no longer
    provides compatibility for reversed, enumerate, set or izip.  removed
    lib/subprocess, mpl1, sandbox/units, and the swig code.  This stuff should
    remain on the maintenance branch for archival purposes. JDH

2008-05-16
    Reorganized examples dir - JDH

2008-05-16
    Added 'elinewidth' keyword arg to errorbar, based on patch by Christopher
    Brown - MM

2008-05-16
    Added 'cumulative' keyword arg to hist to plot cumulative histograms. For
    normed hists, this is normalized to one - MM

2008-05-15
    Fix Tk backend segfault on some machines - MGD

2008-05-14
    Don't use stat on Windows (fixes font embedding problem) - MGD

2008-05-09
    Fix /singlequote (') in Postscript backend - MGD

2008-05-08
    Fix kerning in SVG when embedding character outlines - MGD

2008-05-07
    Switched to future numpy histogram semantic in hist - MM

2008-05-06
    Fix strange colors when blitting in QtAgg and Qt4Agg - MGD

2008-05-05
    pass notify_axes_change to the figure's add_axobserver in the qt backends,
    like we do for the other backends.  Thanks Glenn Jones for the report - DSD

2008-05-02
    Added step histograms, based on patch by Erik Tollerud. - MM

2008-05-02
    On PyQt <= 3.14 there is no way to determine the underlying Qt version.
    [1851364] - MGD

2008-05-02
    Don't call sys.exit() when pyemf is not found [1924199] - MGD

2008-05-02
    Update _subprocess.c from upstream Python 2.5.2 to get a few memory and
    reference-counting-related bugfixes.  See bug 1949978. - MGD

2008-04-30
    Added some record array editing widgets for gtk -- see
    examples/rec_edit*.py - JDH

2008-04-29
    Fix bug in mlab.sqrtm - MM

2008-04-28
    Fix bug in SVG text with Mozilla-based viewers (the symbol tag is not
    supported) - MGD

2008-04-27
    Applied patch by Michiel de Hoon to add hexbin axes method and pyplot
    function - EF

2008-04-25
    Enforce python >= 2.4; remove subprocess build - EF

2008-04-25
    Enforce the numpy requirement at build time - JDH

2008-04-24
    Make numpy 1.1 and python 2.3 required when importing matplotlib - EF

2008-04-24
    Fix compilation issues on VS2003 (Thanks Martin Spacek for all the help) -
    MGD

2008-04-24
    Fix sub/superscripts when the size of the font has been changed - MGD

2008-04-22
    Use "svg.embed_char_paths" consistently everywhere - MGD

2008-04-20
    Add support to MaxNLocator for symmetric axis autoscaling. - EF

2008-04-20
    Fix double-zoom bug. - MM

2008-04-15
    Speed up colormapping. - EF

2008-04-12
    Speed up zooming and panning of dense images. - EF

2008-04-11
    Fix global font rcParam setting after initialization time. - MGD

2008-04-11
    Revert commits 5002 and 5031, which were intended to avoid an unnecessary
    call to draw(). 5002 broke saving figures before show(). 5031 fixed the
    problem created in 5002, but broke interactive plotting. Unnecessary call
    to draw still needs resolution - DSD

2008-04-07
    Improve color validation in rc handling, suggested by Lev Givon - EF

2008-04-02
    Allow to use both linestyle definition arguments, '-' and 'solid' etc. in
    plots/collections - MM

2008-03-27
    Fix saving to Unicode filenames with Agg backend (other backends appear to
    already work...) (Thanks, Christopher Barker) - MGD

2008-03-26
    Fix SVG backend bug that prevents copying and pasting in Inkscape (thanks
    Kaushik Ghose) - MGD

2008-03-24
    Removed an unnecessary call to draw() in the backend_qt* mouseReleaseEvent.
    Thanks to Ted Drain - DSD

2008-03-23
    Fix a pdf backend bug which sometimes caused the outermost gsave to not be
    balanced with a grestore. - JKS

2008-03-20
    Fixed a minor bug in ContourSet._process_linestyles when
    len(linestyles)==Nlev - MM

2008-03-19
    Changed ma import statements to "from numpy import ma"; this should work
    with past and future versions of numpy, whereas "import numpy.ma as ma"
    will work only with numpy >= 1.05, and "import numerix.npyma as ma" is
    obsolete now that maskedarray is replacing the earlier implementation, as
    of numpy 1.05.

2008-03-14
    Removed an apparently unnecessary call to FigureCanvasAgg.draw in
    backend_qt*agg. Thanks to Ted Drain - DSD

2008-03-10
    Workaround a bug in backend_qt4agg's blitting due to a buffer width/bbox
    width mismatch in _backend_agg's copy_from_bbox - DSD

2008-02-29
    Fix class Wx toolbar pan and zoom functions (Thanks Jeff Peery) - MGD

2008-02-16
    Added some new rec array functionality to mlab (rec_summarize, rec2txt and
    rec_groupby).  See examples/rec_groupby_demo.py.  Thanks to Tim M for
    rec2txt.

2008-02-12
    Applied Erik Tollerud's span selector patch - JDH

2008-02-11
    Update plotting() doc string to refer to getp/setp. - JKS

2008-02-10
    Fixed a problem with square roots in the pdf backend with usetex. - JKS

2008-02-08
    Fixed minor __str__ bugs so getp(gca()) works. - JKS

2008-02-05
    Added getters for title, xlabel, ylabel, as requested by Brandon Kieth - EF

2008-02-05
    Applied Gael's ginput patch and created examples/ginput_demo.py - JDH

2008-02-03
    Expose interpnames, a list of valid interpolation methods, as an AxesImage
    class attribute. - EF

2008-02-03
    Added BoundaryNorm, with examples in colorbar_only.py and image_masked.py.
    - EF

2008-02-03
    Force dpi=72 in pdf backend to fix picture size bug. - JKS

2008-02-01
    Fix doubly-included font problem in Postscript backend - MGD

2008-02-01
    Fix reference leak in ft2font Glyph objects. - MGD

2008-01-31
    Don't use unicode strings with usetex by default - DSD

2008-01-31
    Fix text spacing problems in PDF backend with *some* fonts, such as
    STIXGeneral.

2008-01-31
    Fix \sqrt with radical number (broken by making [ and ] work below) - MGD

2008-01-27
    Applied  Martin Teichmann's patch to improve the Qt4 backend. Uses Qt's
    builtin toolbars and statusbars.  See bug 1828848 - DSD

2008-01-10
    Moved toolkits to mpl_toolkits, made mpl_toolkits a namespace package -
    JSWHIT

2008-01-10
    Use setup.cfg to set the default parameters (tkagg, numpy) when building
    windows installers - DSD

2008-01-10
    Fix bug displaying [ and ] in mathtext - MGD

2008-01-10
    Fix bug when displaying a tick value offset with scientific notation.
    (Manifests itself as a warning that the \times symbol can not be found). -
    MGD

2008-01-10
    Use setup.cfg to set the default parameters (tkagg, numpy) when building
    windows installers - DSD

--------------------

2008-01-06
    Released 0.91.2 at revision 4802

2007-12-26
    Reduce too-late use of matplotlib.use() to a warning instead of an
    exception, for backwards compatibility - EF

2007-12-25
    Fix bug in errorbar, identified by Noriko Minakawa - EF

2007-12-25
    Changed masked array importing to work with the upcoming numpy 1.05 (now
    the maskedarray branch) as well as with earlier versions. - EF

2007-12-16
    rec2csv saves doubles without losing precision. Also, it does not close
    filehandles passed in open. - JDH,ADS

2007-12-13
    Moved rec2gtk to matplotlib.toolkits.gtktools and rec2excel to
    matplotlib.toolkits.exceltools - JDH

2007-12-12
    Support alpha-blended text in the Agg and Svg backends - MGD

2007-12-10
    Fix SVG text rendering bug. - MGD

2007-12-10
    Increase accuracy of circle and ellipse drawing by using an 8-piece bezier
    approximation, rather than a 4-piece one.  Fix PDF, SVG and Cairo backends
    so they can draw paths (meaning ellipses as well). - MGD

2007-12-07
    Issue a warning when drawing an image on a non-linear axis. - MGD

2007-12-06
    let widgets.Cursor initialize to the lower x and y bounds rather than 0,0,
    which can cause havoc for dates and other transforms - DSD

2007-12-06
    updated references to mpl data directories for py2exe - DSD

2007-12-06
    fixed a bug in rcsetup, see bug 1845057 - DSD

2007-12-05
    Fix how fonts are cached to avoid loading the same one multiple times.
    (This was a regression since 0.90 caused by the refactoring of
    font_manager.py) - MGD

2007-12-05
    Support arbitrary rotation of usetex text in Agg backend. - MGD

2007-12-04
    Support '|' as a character in mathtext - MGD

-----------------------------------------------------

2007-11-27
    Released 0.91.1 at revision 4517

-----------------------------------------------------

2007-11-27
    Released 0.91.0 at revision 4478

2007-11-13
    All backends now support writing to a file-like object, not just a regular
    file.  savefig() can be passed a file-like object in place of a file path.
    - MGD

2007-11-13
    Improved the default backend selection at build time: SVG -> Agg -> TkAgg
    -> WXAgg -> GTK -> GTKAgg. The last usable backend in this progression will
    be chosen in the default config file. If a backend is defined in setup.cfg,
    that will be the default backend - DSD

2007-11-13
    Improved creation of default config files at build time for traited config
    package - DSD

2007-11-12
    Exposed all the build options in setup.cfg. These options are read into a
    dict called "options" by setupext.py. Also, added "-mpl" tags to the
    version strings for packages provided by matplotlib. Versions provided by
    mpl will be identified and updated on subsequent installs - DSD

2007-11-12
    Added support for STIX fonts.  A new rcParam, mathtext.fontset, can be used
    to choose between:

    'cm'
        The TeX/LaTeX Computer Modern fonts
    'stix'
        The STIX fonts (see stixfonts.org)
    'stixsans'
        The STIX fonts, using sans-serif glyphs by default
    'custom'
        A generic Unicode font, in which case the mathtext font must be
        specified using mathtext.bf, mathtext.it, mathtext.sf etc.

    Added a new example, stix_fonts_demo.py to show how to access different
    fonts and unusual symbols.  - MGD

2007-11-12
    Options to disable building backend extension modules moved from setup.py
    to setup.cfg - DSD

2007-11-09
    Applied Martin Teichmann's patch 1828813: a QPainter is used in paintEvent,
    which has to be destroyed using  the method end(). If matplotlib raises an
    exception before the call to end - and it does if you feed it with bad data
    - this method end() is never called and Qt4 will start spitting error
    messages

2007-11-09
    Moved pyparsing back into matplotlib namespace. Don't use system pyparsing,
    API is too variable from one release to the next - DSD

2007-11-08
    Made pylab use straight numpy instead of oldnumeric by default - EF

2007-11-08
    Added additional record array utilities to mlab (rec2excel, rec2gtk,
    rec_join, rec_append_field, rec_drop_field) - JDH

2007-11-08
    Updated pytz to version 2007g - DSD

2007-11-08
    Updated pyparsing to version 1.4.8 - DSD

2007-11-08
    Moved csv2rec to recutils and added other record array utilities - JDH

2007-11-08
    If available, use existing pyparsing installation - DSD

2007-11-07
    Removed old enthought.traits from lib/matplotlib, added Gael Varoquaux's
    enthought.traits-2.6b1, which is stripped of setuptools. The package is
    installed to site-packages if not already available - DSD

2007-11-05
    Added easy access to minor tick properties; slight mod of patch by Pierre
    G-M - EF

2007-11-02
    Committed Phil Thompson's patch 1599876, fixes to Qt4Agg backend and qt4
    blitting demo - DSD

2007-11-02
    Committed Phil Thompson's patch 1599876, fixes to Qt4Agg backend and qt4
    blitting demo - DSD

2007-10-31
    Made log color scale easier to use with contourf; automatic level
    generation now works. - EF

2007-10-29
    TRANSFORMS REFACTORING

    The primary goal of this refactoring was to make it easier to extend
    matplotlib to support new kinds of projections.  This is primarily an
    internal improvement, and the possible user-visible changes it allows are
    yet to come.

    The transformation framework was completely rewritten in Python (with
    Numpy).  This will make it easier to add news kinds of transformations
    without writing C/C++ code.

    Transforms are composed into a 'transform tree', made of transforms whose
    value depends on other transforms (their children).  When the contents of
    children change, their parents are automatically updated to reflect those
    changes.  To do this an "invalidation" method is used: when children
    change, all of their ancestors are marked as "invalid".  When the value of
    a transform is accessed at a later time, its value is recomputed only if it
    is invalid, otherwise a cached value may be used.  This prevents
    unnecessary recomputations of transforms, and contributes to better
    interactive performance.

    The framework can be used for both affine and non-affine transformations.
    However, for speed, we want use the backend renderers to perform affine
    transformations whenever possible.  Therefore, it is possible to perform
    just the affine or non-affine part of a transformation on a set of data.
    The affine is always assumed to occur after the non-affine.  For any
    transform::

        full transform == non-affine + affine

    Much of the drawing has been refactored in terms of compound paths.
    Therefore, many methods have been removed from the backend interface and
    replaced with a handful to draw compound paths.  This will make updating
    the backends easier, since there is less to update.  It also should make
    the backends more consistent in terms of functionality.

    User visible changes:

    - POLAR PLOTS: Polar plots are now interactively zoomable, and the r-axis
      labels can be interactively rotated.  Straight line segments are now
      interpolated to follow the curve of the r-axis.

    - Non-rectangular clipping works in more backends and with more types of
      objects.

    - Sharing an axis across figures is now done in exactly the same way as
      sharing an axis between two axes in the same figure::

        fig1 = figure()
        fig2 = figure()

        ax1 = fig1.add_subplot(111)
        ax2 = fig2.add_subplot(111, sharex=ax1, sharey=ax1)

    - linestyles now include steps-pre, steps-post and steps-mid.  The old step
      still works and is equivalent to step-pre.

    - Multiple line styles may be provided to a collection.

    See API_CHANGES for more low-level information about this refactoring.

2007-10-24
    Added ax kwarg to Figure.colorbar and pyplot.colorbar - EF

2007-10-19
    Removed a gsave/grestore pair surrounding _draw_ps, which was causing a
    loss graphics state info (see "EPS output problem - scatter & edgecolors"
    on mpl-dev, 2007-10-29) - DSD

2007-10-15
    Fixed a bug in patches.Ellipse that was broken for aspect='auto'.  Scale
    free ellipses now work properly for equal and auto on Agg and PS, and they
    fall back on a polygonal approximation for nonlinear transformations until
    we convince oursleves that the spline approximation holds for nonlinear
    transformations. Added unit/ellipse_compare.py to compare spline with
    vertex approx for both aspects. JDH

2007-10-05
    remove generator expressions from texmanager and mpltraits.  generator
    expressions are not supported by python-2.3 - DSD

2007-10-01
    Made matplotlib.use() raise an exception if called after backends has been
    imported. - EF

2007-09-30
    Modified update* methods of Bbox and Interval so they work with reversed
    axes.  Prior to this, trying to set the ticks on a reversed axis failed
    with an uninformative error message. - EF

2007-09-30
    Applied patches to axes3d to fix index error problem - EF

2007-09-24
    Applied Eike Welk's patch reported on mpl-dev on 2007-09-22 Fixes a bug
    with multiple plot windows in the qt backend, ported the changes to
    backend_qt4 as well - DSD

2007-09-21
    Changed cbook.reversed to yield the same result as the python reversed
    builtin - DSD

2007-09-13
    The usetex support in the pdf backend is more usable now, so I am enabling
    it. - JKS

2007-09-12
    Fixed a Axes.bar unit bug - JDH

2007-09-10
    Made skiprows=1 the default on csv2rec - JDH

2007-09-09
    Split out the plotting part of pylab and put it in pyplot.py; removed
    numerix from the remaining pylab.py, which imports everything from
    pyplot.py.  The intention is that apart from cleanups, the result of
    importing from pylab is nearly unchanged, but there is the new alternative
    of importing from pyplot to get the state-engine graphics without all the
    numeric functions.  Numpified examples; deleted two that were obsolete;
    modified some to use pyplot. - EF

2007-09-08
    Eliminated gd and paint backends - EF

2007-09-06
    .bmp file format is now longer an alias for .raw

2007-09-07
    Added clip path support to pdf backend. - JKS

2007-09-06
    Fixed a bug in the embedding of Type 1 fonts in PDF.  Now it doesn't crash
    Preview.app. - JKS

2007-09-06
    Refactored image saving code so that all GUI backends can save most image
    types.  See FILETYPES for a matrix of backends and their supported file
    types.  Backend canvases should no longer write their own print_figure()
    method -- instead they should write a print_xxx method for each filetype
    they can output and add an entry to their class-scoped filetypes
    dictionary. - MGD

2007-09-05
    Fixed Qt version reporting in setupext.py - DSD

2007-09-04
    Embedding Type 1 fonts in PDF, and thus usetex support via dviread, sort of
    works. To test, enable it by renaming _draw_tex to draw_tex. - JKS

2007-09-03
    Added ability of errorbar show limits via caret or arrowhead ends on the
    bars; patch by Manual Metz. - EF

2007-09-03
    Created type1font.py, added features to AFM and FT2Font (see API_CHANGES),
    started work on embedding Type 1 fonts in pdf files. - JKS

2007-09-02
    Continued work on dviread.py. - JKS

2007-08-16
    Added a set_extent method to AxesImage, allow data extent to be modified
    after initial call to imshow - DSD

2007-08-14
    Fixed a bug in pyqt4 subplots-adjust. Thanks to Xavier Gnata for the report
    and suggested fix - DSD

2007-08-13
    Use pickle to cache entire fontManager; change to using font_manager
    module-level function findfont wrapper for the fontManager.findfont method
    - EF

2007-08-11
    Numpification and cleanup of mlab.py and some examples - EF

2007-08-06
    Removed mathtext2

2007-07-31
    Refactoring of distutils scripts.

    - Will not fail on the entire build if an optional Python package (e.g.,
      Tkinter) is installed but its development headers are not (e.g.,
      tk-devel).  Instead, it will continue to build all other extensions.
    - Provide an overview at the top of the output to display what dependencies
      and their versions were found, and (by extension) what will be built.
    - Use pkg-config, when available, to find freetype2, since this was broken
      on Mac OS-X when using MacPorts in a non- standard location.

2007-07-30
    Reorganized configuration code to work with traited config objects. The new
    config system is located in the matplotlib.config package, but it is
    disabled by default.  To enable it, set NEWCONFIG=True in
    matplotlib.__init__.py.  The new configuration system will still use the
    old matplotlibrc files by default. To switch to the experimental, traited
    configuration, set USE_TRAITED_CONFIG=True in config.__init__.py.

2007-07-29
    Changed default pcolor shading to flat; added aliases to make collection
    kwargs agree with setter names, so updating works; related minor cleanups.
    Removed quiver_classic, scatter_classic, pcolor_classic. - EF

2007-07-26
    Major rewrite of mathtext.py, using the TeX box layout model.

    There is one (known) backward incompatible change.  The font commands
    (\cal, \rm, \it, \tt) now behave as TeX does: they are in effect until the
    next font change command or the end of the grouping.  Therefore uses of
    $\cal{R}$ should be changed to ${\cal R}$.  Alternatively, you may use the
    new LaTeX-style font commands (\mathcal, \mathrm, \mathit, \mathtt) which
    do affect the following group, e.g., $\mathcal{R}$.

    Other new features include:

    - Math may be interspersed with non-math text.  Any text with an even
      number of $'s (non-escaped) will be sent to the mathtext parser for
      layout.

    - Sub/superscripts are less likely to accidentally overlap.

    - Support for sub/superscripts in either order, e.g., $x^i_j$ and $x_j^i$
      are equivalent.

    - Double sub/superscripts (e.g., $x_i_j$) are considered ambiguous and
      raise an exception.  Use braces to disambiguate.

    - $\frac{x}{y}$ can be used for displaying fractions.

    - $\sqrt[3]{x}$ can be used to display the radical symbol with a root
      number and body.

    - $\left(\frac{x}{y}\right)$ may be used to create parentheses and other
      delimiters that automatically resize to the height of their contents.

    - Spacing around operators etc. is now generally more like TeX.

    - Added support (and fonts) for boldface (\bf) and sans-serif (\sf)
      symbols.

    - Log-like function name shortcuts are supported.  For example, $\sin(x)$
      may be used instead of ${\rm sin}(x)$

    - Limited use of kerning for the easy case (same font)

    Behind the scenes, the pyparsing.py module used for doing the math parsing
    was updated to the latest stable version (1.4.6).  A lot of duplicate code
    was refactored out of the Font classes.

    - MGD

2007-07-19
    completed numpification of most trivial cases - NN

2007-07-19
    converted non-numpy relicts throughout the code - NN

2007-07-19
    replaced the Python code in numerix/ by a minimal wrapper around numpy that
    explicitly mentions all symbols that need to be addressed for further
    numpification - NN

2007-07-18
    make usetex respect changes to rcParams. texmanager used to only configure
    itself when it was created, now it reconfigures when rcParams are changed.
    Thank you Alexander Schmolck for contributing a patch - DSD

2007-07-17
    added validation to setting and changing rcParams - DSD

2007-07-17
    bugfix segfault in transforms module. Thanks Ben North for the patch. - ADS

2007-07-16
    clean up some code in ticker.ScalarFormatter, use unicode to render
    multiplication sign in offset ticklabel - DSD

2007-07-16
    fixed a formatting bug in ticker.ScalarFormatter's scientific notation
    (10^0 was being rendered as 10 in some cases) - DSD

2007-07-13
    Add MPL_isfinite64() and MPL_isinf64() for testing doubles in (the now
    misnamed) MPL_isnan.h. - ADS

2007-07-13
    The matplotlib._isnan module removed (use numpy.isnan) - ADS

2007-07-13
    Some minor cleanups in _transforms.cpp - ADS

2007-07-13
    Removed the rest of the numerix extension code detritus, numpified axes.py,
    and cleaned up the imports in axes.py - JDH

2007-07-13
    Added legend.loc as configurable option that could in future default to
    'best'. - NN

2007-07-12
    Bugfixes in mlab.py to coerce inputs into numpy arrays. -ADS

2007-07-11
    Added linespacing kwarg to text.Text - EF

2007-07-11
    Added code to store font paths in SVG files. - MGD

2007-07-10
    Store subset of TTF font as a Type 3 font in PDF files. - MGD

2007-07-09
    Store subset of TTF font as a Type 3 font in PS files. - MGD

2007-07-09
    Applied Paul's pick restructure pick and add pickers, sourceforge patch
    1749829 - JDH

2007-07-09
    Applied Allan's draw_lines agg optimization. JDH

2007-07-08
    Applied Carl Worth's patch to fix cairo draw_arc - SC

2007-07-07
    fixed bug 1712099: xpdf distiller on windows - DSD

2007-06-30
    Applied patches to tkagg, gtk, and wx backends to reduce memory leakage.
    Patches supplied by Mike Droettboom; see tracker numbers 1745400, 1745406,
    1745408.  Also made unit/memleak_gui.py more flexible with command-line
    options. - EF

2007-06-30
    Split defaultParams into separate file rcdefaults (together with validation
    code). Some heavy refactoring was necessary to do so, but the overall
    behavior should be the same as before. - NN

2007-06-27
    Added MPLCONFIGDIR for the default location for mpl data and configuration.
    useful for some apache installs where HOME is not writable.  Tried to clean
    up the logic in _get_config_dir to support non-writable HOME where are
    writable HOME/.matplotlib already exists - JDH

2007-06-27
    Fixed locale bug reported at
    \http://sourceforge.net/tracker/index.php?func=detail&aid=1744154&group_id=80706&atid=560720
    by adding a cbook.unicode_safe function - JDH

2007-06-27
    Applied Micheal's tk savefig bugfix described at
    \http://sourceforge.net/tracker/index.php?func=detail&aid=1716732&group_id=80706&atid=560720
    Thanks Michael!

2007-06-27
    Patch for get_py2exe_datafiles() to work with new directory layout. (Thanks
    Tocer and also Werner Bruhin.) -ADS

2007-06-27
    Added a scroll event to the mpl event handling system and implemented it
    for backends GTK* -- other backend users/developers/maintainers, please add
    support for your backend. - JDH

2007-06-25
    Changed default to clip=False in colors.Normalize; modified ColorbarBase
    for easier colormap display - EF

2007-06-13
    Added maskedarray option to rc, numerix - EF

2007-06-11
    Python 2.5 compatibility fix for mlab.py - EF

2007-06-10
    In matplotlibrc file, use 'dashed' | 'solid' instead of a pair of floats
    for contour.negative_linestyle - EF

2007-06-08
    Allow plot and fill fmt string to be any mpl string colorspec - EF

2007-06-08
    Added gnuplot file plotfile function to pylab -- see
    examples/plotfile_demo.py - JDH

2007-06-07
    Disable build of numarray and Numeric extensions for internal MPL use and
    the numerix layer. - ADS

2007-06-07
    Added csv2rec to matplotlib.mlab to support automatically converting csv
    files to record arrays using type introspection, and turned on native
    datetime support using the new units support in matplotlib.dates.  See
    examples/loadrec.py !  JDH

2007-06-07
    Simplified internal code of _auto_legend_data - NN

2007-06-04
    Added labeldistance arg to Axes.pie to control the raidal distance of the
    wedge labels - JDH

2007-06-03
    Turned mathtext in SVG into single <text> with multiple <tspan> objects
    (easier to edit in inkscape). - NN

----------------------------

2007-06-02
    Released 0.90.1 at revision 3352

2007-06-02
    Display only meaningful labels when calling legend() without args. - NN

2007-06-02
    Have errorbar follow the color cycle even if line is not plotted.  Suppress
    plotting of errorbar caps for capsize=0. - NN

2007-06-02
    Set markers to same alpha value as line. - NN

2007-06-02
    Fix mathtext position in svg backend. - NN

2007-06-01
    Deprecate Numeric and numarray for use as numerix. Props to Travis -- job
    well done. - ADS

2007-05-18
    Added LaTeX unicode support. Enable with the 'text.latex.unicode' rcParam.
    This requires the ucs and inputenc LaTeX packages. - ADS

2007-04-23
    Fixed some problems with polar -- added general polygon clipping to clip
    the lines and grids to the polar axes.  Added support for set_rmax to
    easily change the maximum radial grid.  Added support for polar legend -
    JDH

2007-04-16
    Added Figure.autofmt_xdate to handle adjusting the bottom and rotating the
    tick labels for date plots when the ticks often overlap - JDH

2007-04-09
    Beginnings of usetex support for pdf backend. -JKS

2007-04-07
    Fixed legend/LineCollection bug. Added label support to collections. - EF

2007-04-06
    Removed deprecated support for a float value as a gray-scale; now it must
    be a string, like '0.5'.  Added alpha kwarg to ColorConverter.to_rgba_list.
    - EF

2007-04-06
    Fixed rotation of ellipses in pdf backend (sf bug #1690559) -JKS

2007-04-04
    More matshow tweaks; documentation updates; new method set_bounds() for
    formatters and locators. - EF

2007-04-02
    Fixed problem with imshow and matshow of integer arrays; fixed problems
    with changes to color autoscaling. - EF

2007-04-01
    Made image color autoscaling work correctly with a tracking colorbar;
    norm.autoscale now scales unconditionally, while norm.autoscale_None
    changes only None-valued vmin, vmax. - EF

2007-03-31
    Added a qt-based subplot-adjustment dialog - DSD

2007-03-30
    Fixed a bug in backend_qt4, reported on mpl-dev - DSD

2007-03-26
    Removed colorbar_classic from figure.py; fixed bug in Figure.clf() in which
    _axobservers was not getting cleared.  Modernization and cleanups. - EF

2007-03-26
    Refactored some of the units support -- units now live in the respective x
    and y Axis instances.  See also API_CHANGES for some alterations to the
    conversion interface.  JDH

2007-03-25
    Fix masked array handling in quiver.py for numpy. (Numeric and numarray
    support for masked arrays is broken in other ways when using quiver. I
    didn't pursue that.) - ADS

2007-03-23
    Made font_manager.py close opened files. - JKS

2007-03-22
    Made imshow default extent match matshow - EF

2007-03-22
    Some more niceties for xcorr -- a maxlags option, normed now works for
    xcorr as well as axorr, usevlines is supported, and a zero correlation
    hline is added.  See examples/xcorr_demo.py.  Thanks Sameer for the patch.
    - JDH

2007-03-21
    Axes.vlines and Axes.hlines now create and returns a LineCollection, not a
    list of lines.  This is much faster.  The kwarg signature has changed, so
    consult the docs.  Modified Axes.errorbar which uses vlines and hlines.
    See API_CHANGES; the return signature for these three functions is now
    different

2007-03-20
    Refactored units support and added new examples - JDH

2007-03-19
    Added Mike's units patch - JDH

2007-03-18
    Matshow as an Axes method; test version matshow1() in pylab; added
    'integer' Boolean kwarg to MaxNLocator initializer to force ticks at
    integer locations. - EF

2007-03-17
    Preliminary support for clipping to paths agg - JDH

2007-03-17
    Text.set_text() accepts anything convertible with '%s' - EF

2007-03-14
    Add masked-array support to hist. - EF

2007-03-03
    Change barh to take a kwargs dict and pass it to bar.  Fixes sf bug
    #1669506.

2007-03-02
    Add rc parameter pdf.inheritcolor, which disables all color-setting
    operations in the pdf backend. The idea is that you include the resulting
    file in another program and set the colors (both stroke and fill color)
    there, so you can use the same pdf file for e.g., a paper and a
    presentation and have them in the surrounding color. You will probably not
    want to draw figure and axis frames in that case, since they would be
    filled in the same color. - JKS

2007-02-26
    Prevent building _wxagg.so with broken Mac OS X wxPython. - ADS

2007-02-23
    Require setuptools for Python 2.3 - ADS

2007-02-22
    WXAgg accelerator updates - KM

    WXAgg's C++ accelerator has been fixed to use the correct wxBitmap
    constructor.

    The backend has been updated to use new wxPython functionality to provide
    fast blit() animation without the C++ accelerator.  This requires wxPython
    2.8 or later.  Previous versions of wxPython can use the C++ acclerator or
    the old pure Python routines.

    setup.py no longer builds the C++ accelerator when wxPython >= 2.8 is
    present.

    The blit() method is now faster regardless of which agg/wxPython conversion
    routines are used.

2007-02-21
    Applied the PDF backend patch by Nicolas Grilly.  This impacts several
    files and directories in matplotlib:

    - Created the directory lib/matplotlib/mpl-data/fonts/pdfcorefonts, holding
      AFM files for the 14 PDF core fonts. These fonts are embedded in every
      PDF viewing application.

    - setup.py: Added the directory pdfcorefonts to package_data.

    - lib/matplotlib/__init__.py: Added the default parameter
      'pdf.use14corefonts'. When True, the PDF backend uses only the 14 PDF
      core fonts.

    - lib/matplotlib/afm.py: Added some keywords found in recent AFM files.
      Added a little workaround to handle Euro symbol.

    - lib/matplotlib/fontmanager.py: Added support for the 14 PDF core fonts.
      These fonts have a dedicated cache (file pdfcorefont.cache), not the same
      as for other AFM files (file .afmfont.cache). Also cleaned comments to
      conform to CODING_GUIDE.

    - lib/matplotlib/backends/backend_pdf.py: Added support for 14 PDF core
      fonts.  Fixed some issues with incorrect character widths and encodings
      (works only for the most common encoding, WinAnsiEncoding, defined by the
      official PDF Reference).  Removed parameter 'dpi' because it causes
      alignment issues.

    -JKS (patch by Nicolas Grilly)

2007-02-17
    Changed ft2font.get_charmap, and updated all the files where get_charmap is
    mentioned - ES

2007-02-13
    Added barcode demo- JDH

2007-02-13
    Added binary colormap to cm - JDH

2007-02-13
    Added twiny to pylab - JDH

2007-02-12
    Moved data files into lib/matplotlib so that setuptools' develop mode
    works. Re-organized the mpl-data layout so that this source structure is
    maintained in the installation. (i.e., the 'fonts' and 'images'
    sub-directories are maintained in site-packages.)  Suggest removing
    site-packages/matplotlib/mpl-data and ~/.matplotlib/ttffont.cache before
    installing - ADS

2007-02-07
    Committed Rob Hetland's patch for qt4: remove references to
    text()/latin1(), plus some improvements to the toolbar layout - DSD

---------------------------

2007-02-06
    Released 0.90.0 at revision 3003

2007-01-22
    Extended the new picker API to text, patches and patch collections.  Added
    support for user customizable pick hit testing and attribute tagging of the
    PickEvent - Details and examples in examples/pick_event_demo.py - JDH

2007-01-16
    Begun work on a new pick API using the mpl event handling frameowrk.
    Artists will define their own pick method with a configurable epsilon
    tolerance and return pick attrs.  All artists that meet the tolerance
    threshold will fire a PickEvent with artist dependent attrs; e.g., a Line2D
    can set the indices attribute that shows the indices into the line that are
    within epsilon of the pick point.  See examples/pick_event_demo.py.  The
    implementation of pick for the remaining Artists remains to be done, but
    the core infrastructure at the level of event handling is in place with a
    proof-of-concept implementation for Line2D - JDH

2007-01-16
    src/_image.cpp: update to use Py_ssize_t (for 64-bit systems).  Use return
    value of fread() to prevent warning messages - SC.

2007-01-15
    src/_image.cpp: combine buffer_argb32() and buffer_bgra32() into a new
    method color_conv(format) - SC

2007-01-14
    backend_cairo.py: update draw_arc() so that examples/arctest.py looks
    correct - SC

2007-01-12
    backend_cairo.py: enable clipping. Update draw_image() so that
    examples/contour_demo.py looks correct - SC

2007-01-12
    backend_cairo.py: fix draw_image() so that examples/image_demo.py now looks
    correct - SC

2007-01-11
    Added Axes.xcorr and Axes.acorr to plot the cross correlation of x vs. y or
    the autocorrelation of x.  pylab wrappers also provided.  See
    examples/xcorr_demo.py - JDH

2007-01-10
    Added "Subplot.label_outer" method.  It will set the visibility of the
    ticklabels so that yticklabels are only visible in the first column and
    xticklabels are only visible in the last row - JDH

2007-01-02
    Added additional kwarg documentation - JDH

2006-12-28
    Improved error message for nonpositive input to log transform; added log
    kwarg to bar, barh, and hist, and modified bar method to behave sensibly by
    default when the ordinate has a log scale.  (This only works if the log
    scale is set before or by the call to bar, hence the utility of the log
    kwarg.) - EF

2006-12-27
    backend_cairo.py: update draw_image() and _draw_mathtext() to work with
    numpy - SC

2006-12-20
    Fixed xpdf dependency check, which was failing on windows.  Removed ps2eps
    dependency check. - DSD

2006-12-19
    Added Tim Leslie's spectral patch - JDH

2006-12-17
    Added rc param 'axes.formatter.limits' to control the default threshold for
    switching to scientific notation. Added convenience method
    Axes.ticklabel_format() for turning scientific notation on or off on either
    or both axes. - EF

2006-12-16
    Added ability to turn control scientific notation in ScalarFormatter - EF

2006-12-16
    Enhanced boxplot to handle more flexible inputs - EF

2006-12-13
    Replaced calls to where() in colors.py with much faster clip() and
    putmask() calls; removed inappropriate uses of getmaskorNone (which should
    be needed only very rarely); all in response to profiling by David
    Cournapeau.  Also fixed bugs in my 2-D array support from 12-09. - EF

2006-12-09
    Replaced spy and spy2 with the new spy that combines marker and image
    capabilities - EF

2006-12-09
    Added support for plotting 2-D arrays with plot: columns are plotted as in
    Matlab - EF

2006-12-09
    Added linewidth kwarg to bar and barh; fixed arg checking bugs - EF

2006-12-07
    Made pcolormesh argument handling match pcolor; fixed kwarg handling
    problem noted by Pierre GM - EF

2006-12-06
    Made pcolor support vector X and/or Y instead of requiring 2-D arrays - EF

2006-12-05
    Made the default Artist._transform None (rather than invoking
    identity_transform for each artist only to have it overridden later).  Use
    artist.get_transform() rather than artist._transform, even in derived
    classes, so that the default transform will be created lazily as needed -
    JDH

2006-12-03
    Added LogNorm to colors.py as illustrated by examples/pcolor_log.py, based
    on suggestion by Jim McDonald.  Colorbar modified to handle LogNorm.  Norms
    have additional "inverse" method. - EF

2006-12-02
    Changed class names in colors.py to match convention: normalize ->
    Normalize, no_norm -> NoNorm.  Old names are still available.  Changed
    __init__.py rc defaults to match those in matplotlibrc - EF

2006-11-22
    Fixed bug in set_*lim that I had introduced on 11-15 - EF

2006-11-22
    Added examples/clippedline.py, which shows how to clip line data based on
    view limits -- it also changes the marker style when zoomed in - JDH

2006-11-21
    Some spy bug-fixes and added precision arg per Robert C's suggestion  - JDH

2006-11-19
    Added semi-automatic docstring generation detailing all the kwargs that
    functions take using the artist introspection tools; e.g., 'help text now
    details the scatter kwargs that control the Text properties  - JDH

2006-11-17
    Removed obsolete scatter_classic, leaving a stub to raise
    NotImplementedError; same for pcolor_classic - EF

2006-11-15
    Removed obsolete pcolor_classic - EF

2006-11-15
    Fixed 1588908 reported by Russel Owen; factored nonsingular method out of
    ticker.py, put it into transforms.py as a function, and used it in set_xlim
    and set_ylim. - EF

2006-11-14
    Applied patch 1591716 by Ulf Larssen to fix a bug in apply_aspect.
    Modified and applied patch 1594894 by mdehoon to fix bugs and improve
    formatting in lines.py. Applied patch 1573008 by Greg Willden to make psd
    etc. plot full frequency range for complex inputs. - EF

2006-11-14
    Improved the ability of the colorbar to track changes in corresponding
    image, pcolor, or contourf. - EF

2006-11-11
    Fixed bug that broke Numeric compatibility; added support for alpha to
    colorbar.  The alpha information is taken from the mappable object, not
    specified as a kwarg. - EF

2006-11-05
    Added broken_barh function for makring a sequence of horizontal bars broken
    by gaps -- see examples/broken_barh.py

2006-11-05
    Removed lineprops and markerprops from the Annotation code and replaced
    them with an arrow configurable with kwarg arrowprops.  See
    examples/annotation_demo.py - JDH

2006-11-02
    Fixed a pylab subplot bug that was causing axes to be deleted with hspace
    or wspace equals zero in subplots_adjust - JDH

2006-10-31
    Applied axes3d patch 1587359
    \http://sourceforge.net/tracker/index.php?func=detail&aid=1587359&group_id=80706&atid=560722
    JDH

-------------------------

2006-10-26
    Released 0.87.7 at revision 2835

2006-10-25
    Made "tiny" kwarg in Locator.nonsingular much smaller - EF

2006-10-17
    Closed sf bug 1562496 update line props dash/solid/cap/join styles - JDH

2006-10-17
    Complete overhaul of the annotations API and example code - See
    matplotlib.text.Annotation and examples/annotation_demo.py JDH

2006-10-12
    Committed Manuel Metz's StarPolygon code and examples/scatter_star_poly.py
    - JDH

2006-10-11
    commented out all default values in matplotlibrc.template Default values
    should generally be taken from defaultParam in __init__.py - the file
    matplotlib should only contain those values that the user wants to
    explicitly change from the default.  (see thread "marker color handling" on
    matplotlib-devel)

2006-10-10
    Changed default comment character for load to '#' - JDH

2006-10-10
    deactivated rcfile-configurability of markerfacecolor and markeredgecolor.
    Both are now hardcoded to the special value 'auto' to follow the line
    color. Configurability at run-time (using function arguments) remains
    functional. - NN

2006-10-07
    introduced dummy argument magnification=1.0 to FigImage.make_image to
    satisfy unit test figimage_demo.py The argument is not yet handled
    correctly, which should only show up when using non-standard DPI settings
    in PS backend, introduced by patch #1562394. - NN

2006-10-06
    add backend-agnostic example: simple3d.py - NN

2006-09-29
    fix line-breaking for SVG-inline images (purely cosmetic) - NN

2006-09-29
    reworked set_linestyle and set_marker markeredgecolor and markerfacecolor
    now default to a special value "auto" that keeps the color in sync with the
    line color further, the intelligence of axes.plot is cleaned up, improved
    and simplified. Complete compatibility cannot be guaranteed, but the new
    behavior should be much more predictable (see patch #1104615 for details) -
    NN

2006-09-29
    changed implementation of clip-path in SVG to work around a limitation in
    inkscape - NN

2006-09-29
    added two options to matplotlibrc:

    - svg.image_inline
    - svg.image_noscale

    see patch #1533010 for details - NN

2006-09-29
    axes.py: cleaned up kwargs checking - NN

2006-09-29
    setup.py: cleaned up setup logic - NN

2006-09-29
    setup.py: check for required pygtk versions, fixes bug #1460783 - SC

---------------------------------

2006-09-27
    Released 0.87.6 at revision 2783

2006-09-24
    Added line pointers to the Annotation code, and a pylab interface.  See
    matplotlib.text.Annotation, examples/annotation_demo.py and
    examples/annotation_demo_pylab.py - JDH

2006-09-18
    mathtext2.py: The SVG backend now supports the same things that the AGG
    backend does. Fixed some bugs with rendering, and out of bounds errors in
    the AGG backend - ES. Changed the return values of math_parse_s_ft2font_svg
    to support lines (fractions etc.)

2006-09-17
    Added an Annotation class to facilitate annotating objects and an examples
    file examples/annotation_demo.py.  I want to add dash support as in
    TextWithDash, but haven't decided yet whether inheriting from TextWithDash
    is the right base class or if another approach is needed - JDH

------------------------------

2006-09-05
    Released 0.87.5 at revision 2761

2006-09-04
    Added nxutils for some numeric add-on extension code -- specifically a
    better/more efficient inside polygon tester (see unit/inside_poly_*.py) -
    JDH

2006-09-04
    Made bitstream fonts the rc default - JDH

2006-08-31
    Fixed alpha-handling bug in ColorConverter, affecting collections in
    general and contour/contourf in particular. - EF

2006-08-30
    ft2font.cpp: Added draw_rect_filled method (now used by mathtext2 to draw
    the fraction bar) to FT2Font - ES

2006-08-29
    setupext.py: wrap calls to tk.getvar() with str(). On some systems, getvar
    returns a Tcl_Obj instead of a string - DSD

2006-08-28
    mathtext2.py: Sub/superscripts can now be complex (i.e.  fractions etc.).
    The demo is also updated - ES

2006-08-28
    font_manager.py: Added /usr/local/share/fonts to list of X11 font
    directories - DSD

2006-08-28
    mathtext2.py: Initial support for complex fractions. Also, rendering is now
    completely separated from parsing. The sub/superscripts now work better.
    Updated the mathtext2_demo.py - ES

2006-08-27
    qt backends: don't create a QApplication when backend is imported, do it
    when the FigureCanvasQt is created. Simplifies applications where mpl is
    embedded in qt. Updated embedding_in_qt* examples - DSD

2006-08-27
    mathtext2.py: Now the fonts are searched in the OS font dir and in the
    mpl-data dir. Also env is not a dict anymore. - ES

2006-08-26
    minor changes to __init__.py, mathtex2_demo.py. Added matplotlibrc key
    "mathtext.mathtext2" (removed the key "mathtext2") - ES

2006-08-21
    mathtext2.py: Initial support for fractions Updated the mathtext2_demo.py
    _mathtext_data.py: removed "\" from the unicode dicts mathtext.py: Minor
    modification (because of _mathtext_data.py)- ES

2006-08-20
    Added mathtext2.py: Replacement for mathtext.py. Supports _ ^, \rm, \cal
    etc., \sin, \cos etc., unicode, recursive nestings, inline math mode. The
    only backend currently supported is Agg __init__.py: added new rc params
    for mathtext2 added mathtext2_demo.py example - ES

2006-08-19
    Added embedding_in_qt4.py example - DSD

2006-08-11
    Added scale free Ellipse patch for Agg - CM

2006-08-10
    Added converters to and from julian dates to matplotlib.dates (num2julian
    and julian2num) - JDH

2006-08-08
    Fixed widget locking so multiple widgets could share the event handling -
    JDH

2006-08-07
    Added scale free Ellipse patch to SVG and PS - CM

2006-08-05
    Re-organized imports in numerix for numpy 1.0b2 -- TEO

2006-08-04
    Added draw_markers to PDF backend. - JKS

2006-08-01
    Fixed a bug in postscript's rendering of dashed lines - DSD

2006-08-01
    figure.py: savefig() update docstring to add support for 'format' argument.
    backend_cairo.py: print_figure() add support 'format' argument. - SC

2006-07-31
    Don't let postscript's xpdf distiller compress images - DSD

2006-07-31
    Added shallowcopy() methods to all Transformations; removed
    copy_bbox_transform and copy_bbox_transform_shallow from transforms.py;
    added offset_copy() function to transforms.py to facilitate positioning
    artists with offsets.  See examples/transoffset.py. - EF

2006-07-31
    Don't let postscript's xpdf distiller compress images - DSD

2006-07-29
    Fixed numerix polygon bug reported by Nick Fotopoulos.  Added
    inverse_numerix_xy() transform method.  Made autoscale_view() preserve axis
    direction (e.g., increasing down).- EF

2006-07-28
    Added shallow bbox copy routine for transforms -- mainly useful for copying
    transforms to apply offset to. - JDH

2006-07-28
    Added resize method to FigureManager class for Qt and Gtk backend - CM

2006-07-28
    Added subplots_adjust button to Qt backend - CM

2006-07-26
    Use numerix more in collections.  Quiver now handles masked arrays. - EF

2006-07-22
    Fixed bug #1209354 - DSD

2006-07-22
    make scatter() work with the kwarg "color". Closes bug 1285750 - DSD

2006-07-20
    backend_cairo.py: require pycairo 1.2.0.  print_figure() update to output
    SVG using cairo.

2006-07-19
    Added blitting for Qt4Agg - CM

2006-07-19
    Added lasso widget and example examples/lasso_demo.py - JDH

2006-07-18
    Added blitting for QtAgg backend - CM

2006-07-17
    Fixed bug #1523585: skip nans in semilog plots - DSD

2006-07-12
    Add support to render the scientific notation label over the right-side
    y-axis - DSD

------------------------------

2006-07-11
    Released 0.87.4 at revision 2558

2006-07-07
    Fixed a usetex bug with older versions of latex - DSD

2006-07-07
    Add compatibility for NumPy 1.0 - TEO

2006-06-29
    Added a Qt4Agg backend. Thank you James Amundson - DSD

2006-06-26
    Fixed a usetex bug. On Windows, usetex will process postscript output in
    the current directory rather than in a temp directory. This is due to the
    use of spaces and tildes in windows paths, which cause problems with latex.
    The subprocess module is no longer used. - DSD

2006-06-22
    Various changes to bar(), barh(), and hist().  Added 'edgecolor' keyword
    arg to bar() and barh().  The x and y args in barh() have been renamed to
    width and bottom respectively, and their order has been swapped to maintain
    a (position, value) order ala matlab. left, height, width and bottom args
    can now all be scalars or sequences. barh() now defaults to edge alignment
    instead of center alignment. Added a keyword arg 'align' to bar(), barh()
    and hist() that controls between edge or center bar alignment. Fixed
    ignoring the rcParams['patch.facecolor'] for bar color in bar() and barh().
    Fixed ignoring the rcParams['lines.color'] for error bar color in bar() and
    barh(). Fixed a bug where patches would be cleared when error bars were
    plotted if rcParams['axes.hold'] was False. - MAS

2006-06-22
    Added support for numerix 2-D arrays as alternatives to a sequence of (x,y)
    tuples for specifying paths in collections, quiver, contour, pcolor,
    transforms.  Fixed contour bug involving setting limits for colormapping.
    Added numpy-style all() to numerix. - EF

2006-06-20
    Added custom FigureClass hook to pylab interface - see
    examples/custom_figure_class.py

2006-06-16
    Added colormaps from gist (gist_earth, gist_stern, gist_rainbow, gist_gray,
    gist_yarg, gist_heat, gist_ncar) - JW

2006-06-16
    Added a pointer to parent in figure canvas so you can access the container
    with fig.canvas.manager.  Useful if you want to set the window title, e.g.,
    in gtk fig.canvas.manager.window.set_title, though a GUI neutral method
    would be preferable JDH

2006-06-16
    Fixed colorbar.py to handle indexed colors (i.e., norm = no_norm()) by
    centering each colored region on its index. - EF

2006-06-15
    Added scalex and scaley to Axes.autoscale_view to support selective
    autoscaling just the x or y axis, and supported these command in plot so
    you can say plot(something, scaley=False) and just the x axis will be
    autoscaled.  Modified axvline and axhline to support this, so for example
    axvline will no longer autoscale the y axis. JDH

2006-06-13
    Fix so numpy updates are backward compatible - TEO

2006-06-12
    Updated numerix to handle numpy restructuring of oldnumeric - TEO

2006-06-12
    Updated numerix.fft to handle numpy restructuring Added ImportError to
    numerix.linear_algebra for numpy -TEO

2006-06-11
    Added quiverkey command to pylab and Axes, using QuiverKey class in
    quiver.py.  Changed pylab and Axes to use quiver2 if possible, but drop
    back to the newly-renamed quiver_classic if necessary.  Modified
    examples/quiver_demo.py to illustrate the new quiver and quiverkey.
    Changed LineCollection implementation slightly to improve compatibility
    with PolyCollection. - EF

2006-06-11
    Fixed a usetex bug for windows, running latex on files with spaces in their
    names or paths was failing - DSD

2006-06-09
    Made additions to numerix, changes to quiver to make it work with all
    numeric flavors. - EF

2006-06-09
    Added quiver2 function to pylab and method to axes, with implementation via
    a Quiver class in quiver.py.  quiver2 will replace quiver before the next
    release; it is placed alongside it initially to facilitate testing and
    transition. See also examples/quiver2_demo.py. - EF

2006-06-08
    Minor bug fix to make ticker.py draw proper minus signs with usetex - DSD

-----------------------

2006-06-06
    Released 0.87.3 at revision 2432

2006-05-30
    More partial support for polygons with outline or fill, but not both.  Made
    LineCollection inherit from ScalarMappable. - EF

2006-05-29
    Yet another revision of aspect-ratio handling. - EF

2006-05-27
    Committed a patch to prevent stroking zero-width lines in the svg backend -
    DSD

2006-05-24
    Fixed colorbar positioning bug identified by Helge Avlesen, and improved
    the algorithm; added a 'pad' kwarg to control the spacing between colorbar
    and parent axes. - EF

2006-05-23
    Changed color handling so that collection initializers can take any mpl
    color arg or sequence of args; deprecated float as grayscale, replaced by
    string representation of float. - EF

2006-05-19
    Fixed bug: plot failed if all points were masked - EF

2006-05-19
    Added custom symbol option to scatter - JDH

2006-05-18
    New example, multi_image.py; colorbar fixed to show offset text when the
    ScalarFormatter is used; FixedFormatter augmented to accept and display
    offset text. - EF

2006-05-14
    New colorbar; old one is renamed to colorbar_classic.  New colorbar code is
    in colorbar.py, with wrappers in figure.py and pylab.py.  Fixed
    aspect-handling bug reported by Michael Mossey.  Made
    backend_bases.draw_quad_mesh() run.- EF

2006-05-08
    Changed handling of end ranges in contourf: replaced "clip-ends" kwarg with
    "extend".  See docstring for details. -EF

2006-05-08
    Added axisbelow to rc - JDH

2006-05-08
    If using PyGTK require version 2.2+ - SC

2006-04-19
    Added compression support to PDF backend, controlled by new pdf.compression
    rc setting. - JKS

2006-04-19
    Added Jouni's PDF backend

2006-04-18
    Fixed a bug that caused agg to not render long lines

2006-04-16
    Masked array support for pcolormesh; made pcolormesh support the same
    combinations of X,Y,C dimensions as pcolor does; improved (I hope)
    description of grid used in pcolor, pcolormesh. - EF

2006-04-14
    Reorganized axes.py - EF

2006-04-13
    Fixed a bug Ryan found using usetex with sans-serif fonts and exponential
    tick labels - DSD

2006-04-11
    Refactored backend_ps and backend_agg to prevent module-level texmanager
    imports. Now these imports only occur if text.usetex rc setting is true -
    DSD

2006-04-10
    Committed changes required for building mpl on win32 platforms with visual
    studio.  This allows wxpython blitting for fast animations. - CM

2006-04-10
    Fixed an off-by-one bug in Axes.change_geometry.

2006-04-10
    Fixed bug in pie charts where wedge wouldn't have label in legend.
    Submitted by Simon Hildebrandt. - ADS

2006-05-06
    Usetex makes temporary latex and dvi files in a temporary directory, rather
    than in the user's current working directory - DSD

2006-04-05
    Applied Ken's wx deprecation warning patch closing sf patch #1465371 - JDH

2006-04-05
    Added support for the new API in the postscript backend.  Allows values to
    be masked using nan's, and faster file creation - DSD

2006-04-05
    Use python's subprocess module for usetex calls to external programs.
    subprocess catches when they exit abnormally so an error can be raised. -
    DSD

2006-04-03
    Fixed the bug in which widgets would not respond to events.  This regressed
    the twinx functionality, so I also updated subplots_adjust to update axes
    that share an x or y with a subplot instance. - CM

2006-04-02
    Moved PBox class to transforms and deleted pbox.py; made pylab axis command
    a thin wrapper for Axes.axis; more tweaks to aspect-ratio handling; fixed
    Axes.specgram to account for the new imshow default of unit aspect ratio;
    made contour set the Axes.dataLim. - EF

2006-03-31
    Fixed the Qt "Underlying C/C++ object deleted" bug. - JRE

2006-03-31
    Applied Vasily Sulatskov's Qt Navigation Toolbar enhancement. - JRE

2006-03-31
    Ported Norbert's rewriting of Halldor's stineman_interp algorithm to make
    it numerix compatible and added code to matplotlib.mlab.  See
    examples/interp_demo.py - JDH

2006-03-30
    Fixed a bug in aspect ratio handling; blocked potential crashes when
    panning with button 3; added axis('image') support. - EF

2006-03-28
    More changes to aspect ratio handling; new PBox class in new file pbox.py
    to facilitate resizing and repositioning axes; made PolarAxes maintain unit
    aspect ratio. - EF

2006-03-23
    Refactored TextWithDash class to inherit from, rather than delegate to, the
    Text class. Improves object inspection and closes bug # 1357969 - DSD

2006-03-22
    Improved aspect ratio handling, including pylab interface.  Interactive
    resizing, pan, zoom of images and plots (including panels with a shared
    axis) should work.  Additions and possible refactoring are still likely. -
    EF

2006-03-21
    Added another colorbrewer colormap (RdYlBu) - JSWHIT

2006-03-21
    Fixed tickmarks for logscale plots over very large ranges.  Closes bug #
    1232920 - DSD

2006-03-21
    Added Rob Knight's arrow code; see examples/arrow_demo.py - JDH

2006-03-20
    Added support for masking values with nan's, using ADS's isnan module and
    the new API. Works for \*Agg backends - DSD

2006-03-20
    Added contour.negative_linestyle rcParam - ADS

2006-03-20
    Added _isnan extension module to test for nan with Numeric - ADS

2006-03-17
    Added Paul and Alex's support for faceting with quadmesh in sf patch
    1411223 - JDH

2006-03-17
    Added Charle Twardy's pie patch to support colors=None.  Closes sf patch
    1387861 - JDH

2006-03-17
    Applied sophana's patch to support overlapping axes with toolbar navigation
    by toggling activation with the 'a' key.  Closes sf patch 1432252 - JDH

2006-03-17
    Applied Aarre's linestyle patch for backend EMF; closes sf patch 1449279 -
    JDH

2006-03-17
    Applied  Jordan Dawe's patch to support kwarg properties for grid lines in
    the grid command.  Closes sf patch 1451661 - JDH

2006-03-17
    Center postscript output on page when using usetex - DSD

2006-03-17
    subprocess module built if Python <2.4 even if subprocess can be imported
    from an egg - ADS

2006-03-17
    Added _subprocess.c from Python upstream and hopefully enabled building
    (without breaking) on Windows, although not tested. - ADS

2006-03-17
    Updated subprocess.py to latest Python upstream and reverted name back to
    subprocess.py - ADS

2006-03-16
    Added John Porter's 3D handling code

------------------------

2006-03-16
    Released 0.87.2 at revision 2150

2006-03-15
    Fixed bug in MaxNLocator revealed by daigos@infinito.it.  The main change
    is that Locator.nonsingular now adjusts vmin and vmax if they are nearly
    the same, not just if they are equal.  A new kwarg, "tiny", sets the
    threshold. - EF

2006-03-14
    Added import of compatibility library for newer numpy linear_algebra - TEO

2006-03-12
    Extended "load" function to support individual columns and moved "load" and
    "save" into matplotlib.mlab so they can be used outside of pylab -- see
    examples/load_converter.py - JDH

2006-03-12
    Added AutoDateFormatter and AutoDateLocator submitted by James Evans. Try
    the load_converter.py example for a demo. - ADS

2006-03-11
    Added subprocess module from python-2.4 - DSD

2006-03-11
    Fixed landscape orientation support with the usetex option. The backend_ps
    print_figure method was getting complicated, I added a _print_figure_tex
    method to maintain some degree of sanity - DSD

2006-03-11
    Added "papertype" savefig kwarg for setting postscript papersizes.
    papertype and ps.papersize rc setting can also be set to "auto" to
    autoscale pagesizes - DSD

2006-03-09
    Apply P-J's patch to make pstoeps work on windows patch report # 1445612 -
    DSD

2006-03-09
    Make backend rc parameter case-insensitive - DSD

2006-03-07
    Fixed bug in backend_ps related to C0-C6 papersizes, which were causing
    problems with postscript viewers.  Supported page sizes include letter,
    legal, ledger, A0-A10, and B0-B10 - DSD

------------------------------------

2006-03-07
    Released 0.87.1

2006-03-04
    backend_cairo.py: fix get_rgb() bug reported by Keith Briggs.  Require
    pycairo 1.0.2.  Support saving png to file-like objects. - SC

2006-03-03
    Fixed pcolor handling of vmin, vmax - EF

2006-03-02
    improve page sizing with usetex with the latex geometry package. Closes bug
    # 1441629 - DSD

2006-03-02
    Fixed dpi problem with usetex png output. Accepted a modified version of
    patch # 1441809 - DSD

2006-03-01
    Fixed axis('scaled') to deal with case xmax < xmin - JSWHIT

2006-03-01
    Added reversed colormaps (with '_r' appended to name) - JSWHIT

2006-02-27
    Improved eps bounding boxes with usetex - DSD

2006-02-27
    Test svn commit, again!

2006-02-27
    Fixed two dependency checking bugs related to usetex on Windows - DSD

2006-02-27
    Made the rc deprecation warnings a little more human readable.

2006-02-26
    Update the previous gtk.main_quit() bug fix to use gtk.main_level() - SC

2006-02-24
    Implemented alpha support in contour and contourf - EF

2006-02-22
    Fixed gtk main quit bug when quit was called before mainloop. - JDH

2006-02-22
    Small change to colors.py to workaround apparent bug in numpy masked array
    module - JSWHIT

2006-02-22
    Fixed bug in ScalarMappable.to_rgba() reported by Ray Jones, and fixed
    incorrect fix found by Jeff Whitaker - EF

--------------------------------

2006-02-22
    Released 0.87

2006-02-21
    Fixed portrait/landscape orientation in postscript backend - DSD

2006-02-21
    Fix bug introduced in yesterday's bug fix - SC

2006-02-20
    backend_gtk.py FigureCanvasGTK.draw(): fix bug reported by David
    Tremouilles - SC

2006-02-20
    Remove the "pygtk.require('2.4')" error from examples/embedding_in_gtk2.py
    - SC

2006-02-18
    backend_gtk.py FigureCanvasGTK.draw(): simplify to use (rather than
    duplicate) the expose_event() drawing code - SC

2006-02-12
    Added stagger or waterfall plot capability to LineCollection; illustrated
    in examples/collections.py. - EF

2006-02-11
    Massive cleanup of the usetex code in the postscript backend. Possibly
    fixed the clipping issue users were reporting with older versions of
    ghostscript - DSD

2006-02-11
    Added autolim kwarg to axes.add_collection.  Changed collection get_verts()
    methods accordingly. - EF

2006-02-09
    added a temporary rc parameter text.dvipnghack, to allow Mac users to get
    nice results with the usetex option. - DSD

2006-02-09
    Fixed a bug related to setting font sizes with the usetex option. - DSD

2006-02-09
    Fixed a bug related to usetex's latex code. - DSD

2006-02-09
    Modified behavior of font.size rc setting. You should define font.size in
    pts, which will set the "medium" or default fontsize. Special text sizes
    like axis labels or tick labels can be given relative font sizes like
    small, large, x-large, etc. and will scale accordingly. - DSD

2006-02-08
    Added py2exe specific datapath check again.  Also added new py2exe helper
    function get_py2exe_datafiles for use in py2exe setup.py scripts. - CM

2006-02-02
    Added box function to pylab

2006-02-02
    Fixed a problem in setupext.py, tk library formatted in unicode caused
    build problems - DSD

2006-02-01
    Dropped TeX engine support in usetex to focus on LaTeX. - DSD

2006-01-29
    Improved usetex option to respect the serif, sans-serif, monospace, and
    cursive rc settings. Removed the font.latex.package rc setting, it is no
    longer required - DSD

2006-01-29
    Fixed tex's caching to include font.family rc information - DSD

2006-01-29
    Fixed subpixel rendering bug in \*Agg that was causing uneven gridlines -
    JDH

2006-01-28
    Added fontcmd to backend_ps's RendererPS.draw_tex, to support other font
    families in eps output - DSD

2006-01-28
    Added MaxNLocator to ticker.py, and changed contour.py to use it by
    default. - EF

2006-01-28
    Added fontcmd to backend_ps's RendererPS.draw_tex, to support other font
    families in eps output - DSD

2006-01-27
    Buffered reading of matplotlibrc parameters in order to allow 'verbose'
    settings to be processed first (allows verbose.report during rc validation
    process) - DSD

2006-01-27
    Removed setuptools support from setup.py and created a separate setupegg.py
    file to replace it. - CM

2006-01-26
    Replaced the ugly datapath logic with a cleaner approach from
    http://wiki.python.org/moin/DistutilsInstallDataScattered.  Overrides the
    install_data command. - CM

2006-01-24
    Don't use character typecodes in cntr.c --- changed to use defined
    typenumbers instead. - TEO

2006-01-24
    Fixed some bugs in usetex's and ps.usedistiller's dependency

2006-01-24
    Added masked array support to scatter - EF

2006-01-24
    Fixed some bugs in usetex's and ps.usedistiller's dependency checking - DSD

-------------------------------

2006-01-24
    Released 0.86.2

2006-01-20
    Added a converters dict to pylab load to convert selected columns to float
    -- especially useful for files with date strings, uses a datestr2num
    converter - JDH

2006-01-20
    Added datestr2num to matplotlib dates to convert a string or sequence of
    strings to a matplotlib datenum

2006-01-18
    Added quadrilateral pcolormesh patch 1409190 by Alex Mont and Paul Kienzle
    -- this is \*Agg only for now.  See examples/quadmesh_demo.py - JDH

2006-01-18
    Added Jouni's boxplot patch - JDH

2006-01-18
    Added comma delimiter for pylab save - JDH

2006-01-12
    Added Ryan's legend patch - JDH

2006-01-12
    Fixed numpy / numeric to use .dtype.char to keep in SYNC with numpy SVN

---------------------------

2006-01-11
    Released 0.86.1

2006-01-11 
    Fixed setup.py for win32 build and added rc template to the MANIFEST.in

2006-01-10
    Added xpdf distiller option. matplotlibrc ps.usedistiller can now be none,
    false, ghostscript, or xpdf. Validation checks for dependencies. This needs
    testing, but the xpdf option should produce the highest-quality output and
    small file sizes - DSD

2006-01-10
    For the usetex option, backend_ps now does all the LaTeX work in the os's
    temp directory - DSD

2006-01-10
    Added checks for usetex dependencies. - DSD

---------------------------------

2006-01-09
    Released 0.86

2006-01-04
    Changed to support numpy (new name for scipy_core) - TEO

2006-01-04
    Added Mark's scaled axes patch for shared axis

2005-12-28
    Added Chris Barker's build_wxagg patch - JDH

2005-12-27
    Altered numerix/scipy to support new scipy package structure - TEO

2005-12-20
    Fixed Jame's Boyles date tick reversal problem - JDH

2005-12-20
    Added Jouni's rc patch to support lists of keys to set on - JDH

2005-12-12
    Updated pyparsing and mathtext for some speed enhancements (Thanks Paul
    McGuire) and minor fixes to scipy numerix and setuptools

2005-12-12
    Matplotlib data is now installed as package_data in the matplotlib module.
    This gets rid of checking the many possibilities in
    matplotlib._get_data_path() - CM

2005-12-11
    Support for setuptools/pkg_resources to build and use matplotlib as an egg.
    Still allows matplotlib to exist using a traditional distutils install. -
    ADS

2005-12-03
    Modified setup to build matplotlibrc based on compile time findings.  It
    will set numerix in the order of scipy, numarray, Numeric depending on
    which are founds, and backend as in preference order GTKAgg, WXAgg, TkAgg,
    GTK, Agg, PS

2005-12-03
    Modified scipy patch to support Numeric, scipy and numarray Some work
    remains to be done because some of the scipy imports are broken if only the
    core is installed.  e.g., apparently we need from scipy.basic.fftpack
    import * rather than from scipy.fftpack import *

2005-12-03
    Applied some fixes to Nicholas Young's nonuniform image patch

2005-12-01
    Applied Alex Gontmakher hatch patch - PS only for now

2005-11-30
    Added Rob McMullen's EMF patch

2005-11-30
    Added Daishi's patch for scipy

2005-11-30
    Fixed out of bounds draw markers segfault in agg

2005-11-28
    Got TkAgg blitting working 100% (cross fingers) correctly. - CM

2005-11-27
    Multiple changes in cm.py, colors.py, figure.py, image.py, contour.py,
    contour_demo.py; new _cm.py, examples/image_masked.py.

    1. Separated the color table data from cm.py out into a new file, _cm.py,
       to make it easier to find the actual code in cm.py and to add new
       colormaps.  Also added some line breaks to the color data dictionaries.
       Everything from _cm.py is imported by cm.py, so the split should be
       transparent.
    2. Enabled automatic generation of a colormap from a list of colors in
       contour; see modified examples/contour_demo.py.
    3. Support for imshow of a masked array, with the ability to specify colors
       (or no color at all) for masked regions, and for regions that are above
       or below the normally mapped region.  See examples/image_masked.py.
    4. In support of the above, added two new classes, ListedColormap, and
       no_norm, to colors.py, and modified the Colormap class to include common
       functionality. Added a clip kwarg to the normalize class.  Reworked
       color handling in contour.py, especially in the ContourLabeller mixin.

    - EF

2005-11-25
    Changed text.py to ensure color is hashable. EF

--------------------------------

2005-11-16
    Released 0.85

2005-11-16
    Changed the default default linewidth in rc to 1.0

2005-11-16
    Replaced agg_to_gtk_drawable with pure pygtk pixbuf code in backend_gtkagg.
    When the equivalent is doe for blit, the agg extension code will no longer
    be needed

2005-11-16
    Added a maxdict item to cbook to prevent caches from growing w/o bounds

2005-11-15
    Fixed a colorup/colordown reversal bug in finance.py -- Thanks Gilles

2005-11-15
    Applied Jouni K Steppanen's boxplot patch SF patch#1349997 - JDH

2005-11-09
    added axisbelow attr for Axes to determine whether ticks and such are above
    or below the actors

2005-11-08
    Added Nicolas' irregularly spaced image patch

2005-11-08
    Deprecated HorizontalSpanSelector and replaced with SpanSelection that
    takes a third arg, direction.  The new SpanSelector supports horizontal and
    vertical span selection, and the appropriate min/max is returned. - CM

2005-11-08
    Added lineprops dialog for gtk

2005-11-03
    Added FIFOBuffer class to mlab to support real time feeds and
    examples/fifo_buffer.py

2005-11-01
    Contributed Nickolas Young's patch for afm mathtext to support mathtext
    based upon the standard postscript Symbol font when ps.usetex = True.

2005-10-26
    Added support for scatter legends - thanks John Gill

2005-10-20
    Fixed image clipping bug that made some tex labels disappear.   JDH

2005-10-14
    Removed sqrt from dvipng 1.6 alpha channel mask.

2005-10-14
    Added width kwarg to hist function

2005-10-10
    Replaced all instances of os.rename with shutil.move

2005-10-05
    Added Michael Brady's ydate patch

2005-10-04
    Added rkern's texmanager patch

2005-09-25
    contour.py modified to use a single ContourSet class that handles filled
    contours, line contours, and labels; added keyword arg (clip_ends) to
    contourf.  Colorbar modified to work with new ContourSet object; if the
    ContourSet has lines rather than polygons, the colorbar will follow suit.
    Fixed a bug introduced in 0.84, in which contourf(...,colors=...) was
    broken - EF

-------------------------------

2005-09-19
    Released 0.84

2005-09-14
    Added a new 'resize_event' which triggers a callback with a
    backend_bases.ResizeEvent object - JDH

2005-09-14
    font_manager.py: removed chkfontpath from x11FontDirectory() - SC

2005-09-14
    Factored out auto date locator/formatter factory code into
    matplotlib.date.date_ticker_factory; applies John Bryne's quiver patch.

2005-09-13
    Added Mark's axes positions history patch #1286915

2005-09-09
    Added support for auto canvas resizing with::

        fig.set_figsize_inches(9,5,forward=True) # inches

    OR::

        fig.resize(400,300)  # pixels

2005-09-07
    figure.py: update Figure.draw() to use the updated renderer.draw_image() so
    that examples/figimage_demo.py works again.  examples/stock_demo.py: remove
    data_clipping (which no longer exists) - SC

2005-09-06
    Added Eric's tick.direction patch: in or out in rc

2005-09-06
    Added Martin's rectangle selector widget

2005-09-04
    Fixed a logic err in text.py that was preventing rgxsuper from matching -
    JDH

2005-08-29
    Committed Ken's wx blit patch #1275002

2005-08-26
    colorbar modifications - now uses contourf instead of imshow so that colors
    used by contourf are displayed correctly.  Added two new keyword args
    (cspacing and clabels) that are only relevant for ContourMappable images -
    JSWHIT

2005-08-24
    Fixed a PS image bug reported by Darren - JDH

2005-08-23
    colors.py: change hex2color() to accept unicode strings as well as normal
    strings. Use isinstance() instead of types.IntType etc - SC

2005-08-16
    removed data_clipping line and rc property - JDH

2005-08-22
    backend_svg.py: Remove redundant "x=0.0 y=0.0" from svg element.  Increase
    svg version from 1.0 to 1.1. Add viewBox attribute to svg element to allow
    SVG documents to scale-to-fit into an arbitrary viewport - SC

2005-08-16
    Added Eric's dot marker patch - JDH

2005-08-08
    Added blitting/animation for TkAgg - CM

2005-08-05
    Fixed duplicate tickline bug - JDH

2005-08-05
    Fixed a GTK animation bug that cropped up when doing animations in
    gtk//gtkagg canvases that had widgets packed above them

2005-08-05
    Added Clovis Goldemberg patch to the tk save dialog

2005-08-04
    Removed origin kwarg from backend.draw_image.  origin is handled entirely
    by the frontend now.

2005-07-03
    Fixed a bug related to TeX commands in backend_ps

2005-08-03
    Fixed SVG images to respect upper and lower origins.

2005-08-03
    Added flipud method to image and removed it from to_str.

2005-07-29
    Modified figure.figaspect to take an array or number; modified backend_svg
    to write utf-8 - JDH

2005-07-30
    backend_svg.py: embed png image files in svg rather than linking to a
    separate png file, fixes bug #1245306 (thanks to Norbert Nemec for the
    patch) - SC

---------------------------

2005-07-29
    Released 0.83.2

2005-07-27
    Applied SF patch 1242648: minor rounding error in IndexDateFormatter in
    dates.py

2005-07-27
    Applied sf patch 1244732: Scale axis such that circle looks like circle -
    JDH

2005-07-29
    Improved message reporting in texmanager and backend_ps - DSD

2005-07-28
    backend_gtk.py: update FigureCanvasGTK.draw() (needed due to the recent
    expose_event() change) so that examples/anim.py works in the usual way - SC

2005-07-26
    Added new widgets Cursor and HorizontalSpanSelector to matplotlib.widgets.
    See examples/widgets/cursor.py and examples/widgets/span_selector.py - JDH

2005-07-26
    added draw event to mpl event hierarchy -- triggered on figure.draw

2005-07-26
    backend_gtk.py: allow 'f' key to toggle window fullscreen mode

2005-07-26
    backend_svg.py: write "<.../>" elements all on one line and remove surplus
    spaces - SC

2005-07-25
    backend_svg.py: simplify code by deleting GraphicsContextSVG and
    RendererSVG.new_gc(), and moving the gc.get_capstyle() code into
    RendererSVG._get_gc_props_svg() - SC

2005-07-24
    backend_gtk.py: call FigureCanvasBase.motion_notify_event() on all
    motion-notify-events, not just ones where a modifier key or button has been
    pressed (fixes bug report from Niklas Volbers) - SC

2005-07-24
    backend_gtk.py: modify print_figure() use own pixmap, fixing problems where
    print_figure() overwrites the display pixmap.  return False from all
    button/key etc events - to allow the event to propagate further - SC

2005-07-23
    backend_gtk.py: change expose_event from using set_back_pixmap(); clear()
    to draw_drawable() - SC

2005-07-23
    backend_gtk.py: removed pygtk.require() matplotlib/__init__.py: delete
    'FROZEN' and 'McPLError' which are no longer used - SC

2005-07-22
    backend_gdk.py: removed pygtk.require() - SC

2005-07-21
    backend_svg.py: Remove unused imports. Remove methods doc strings which
    just duplicate the docs from backend_bases.py. Rename draw_mathtext to
    _draw_mathtext. - SC

2005-07-17
    examples/embedding_in_gtk3.py: new example demonstrating placing a
    FigureCanvas in a gtk.ScrolledWindow - SC

2005-07-14
    Fixed a Windows related bug (#1238412) in texmanager - DSD

2005-07-11
    Fixed color kwarg bug, setting color=1 or 0 caused an exception - DSD

2005-07-07
    Added Eric's MA set_xdata Line2D fix - JDH

2005-07-06
    Made HOME/.matplotlib the new config dir where the matplotlibrc file, the
    ttf.cache, and the tex.cache live.  The new default filenames in
    .matplotlib have no leading dot and are not hidden.  e.g., the new names
    are matplotlibrc tex.cache ttffont.cache.  This is how ipython does it so
    it must be right.  If old files are found, a warning is issued and they are
    moved to the new location.  Also fixed texmanager to put all files,
    including temp files in ~/.matplotlib/tex.cache, which allows you to usetex
    in non-writable dirs.

2005-07-05
    Fixed bug #1231611 in subplots adjust layout.  The problem was that the
    text caching mechanism was not using the transformation affine in the key.
    - JDH

2005-07-05
    Fixed default backend import problem when using API (SF bug # 1209354 -
    see API_CHANGES for more info - JDH

2005-07-04
    backend_gtk.py: require PyGTK version 2.0.0 or higher - SC

2005-06-30
    setupext.py: added numarray_inc_dirs for building against numarray when not
    installed in standard location - ADS

2005-06-27
    backend_svg.py: write figure width, height as int, not float.  Update to
    fix some of the pychecker warnings - SC

2005-06-23
    Updated examples/agg_test.py to demonstrate curved paths and fills - JDH

2005-06-21
    Moved some texmanager and backend_agg tex caching to class level rather
    than instance level - JDH

2005-06-20
    setupext.py: fix problem where _nc_backend_gdk is installed to the wrong
    directory - SC

2005-06-19
    Added 10.4 support for CocoaAgg. - CM

2005-06-18
    Move Figure.get_width_height() to FigureCanvasBase and return int instead
    of float. - SC

2005-06-18
    Applied Ted Drain's QtAgg patch: 1) Changed the toolbar to be a horizontal
    bar of push buttons instead of a QToolbar and updated the layout algorithms
    in the main window accordingly.  This eliminates the ability to drag and
    drop the toolbar and detach it from the window.  2) Updated the resize
    algorithm in the main window to show the correct size for the plot widget
    as requested.  This works almost correctly right now.  It looks to me like
    the final size of the widget is off by the border of the main window but I
    haven't figured out a way to get that information yet.  We could just add a
    small margin to the new size but that seems a little hacky.  3) Changed the
    x/y location label to be in the toolbar like the Tk backend instead of as a
    status line at the bottom of the widget.  4) Changed the toolbar pixmaps to
    use the ppm files instead of the png files.  I noticed that the Tk backend
    buttons looked much nicer and it uses the ppm files so I switched them.

2005-06-17
    Modified the gtk backend to not queue mouse motion events.  This allows for
    live updates when dragging a slider. - CM

2005-06-17
    Added starter CocoaAgg backend.  Only works on OS 10.3 for now and requires
    PyObjC.  (10.4 is high priority) - CM

2005-06-17
    Upgraded pyparsing and applied Paul McGuire's suggestions for speeding
    things up.  This more than doubles the speed of mathtext in my simple
    tests. JDH

2005-06-16
    Applied David Cooke's subplot make_key patch

----------------------------------

0.82 (2005-06-15)
-----------------

2005-06-15
    Added subplot config tool to GTK* backends -- note you must now import the
    NavigationToolbar2 from your backend of choice rather than from backend_gtk
    because it needs to know about the backend specific canvas -- see
    examples/embedding_in_gtk2.py.  Ditto for wx backend -- see
    examples/embedding_in_wxagg.py

2005-06-15
    backend_cairo.py: updated to use pycairo 0.5.0 - SC

2005-06-14
    Wrote some GUI neutral widgets (Button, Slider, RadioButtons, CheckButtons)
    in matplotlib.widgets.  See examples/widgets/\*.py - JDH

2005-06-14
    Exposed subplot parameters as rc vars and as the fig SubplotParams instance
    subplotpars.  See figure.SubplotParams, figure.Figure.subplots_adjust and
    the pylab method subplots_adjust and examples/subplots_adjust.py .  Also
    added a GUI neutral widget for adjusting subplots, see
    examples/subplot_toolbar.py - JDH

2005-06-13
    Exposed cap and join style for lines with new rc params and line properties::

        lines.dash_joinstyle : miter        # miter|round|bevel
        lines.dash_capstyle : butt          # butt|round|projecting
        lines.solid_joinstyle : miter       # miter|round|bevel
        lines.solid_capstyle : projecting   # butt|round|projecting


2005-06-13
    Added kwargs to Axes init

2005-06-13
    Applied Baptiste's tick patch - JDH

2005-06-13
    Fixed rc alias 'l' bug reported by Fernando by removing aliases for
    mainlevel rc options. - JDH

2005-06-10
    Fixed bug #1217637 in ticker.py - DSD

2005-06-07
    Fixed a bug in texmanager.py: .aux files not being removed - DSD

2005-06-08
    Added Sean Richard's hist binning fix -- see API_CHANGES - JDH

2005-06-07
    Fixed a bug in texmanager.py: .aux files not being removed - DSD


----------------------

0.81 (2005-06-07)
-----------------

2005-06-06
    Added autoscale_on prop to axes

2005-06-06
    Added Nick's picker "among" patch - JDH

2005-06-05
    Fixed a TeX/LaTeX font discrepancy in backend_ps. - DSD

2005-06-05
    Added a ps.distill option in rc settings. If True, postscript output will
    be distilled using ghostscript, which should trim the file size and allow
    it to load more quickly. Hopefully this will address the issue of large ps
    files due to font definitions. Tested with gnu-ghostscript-8.16. - DSD

2005-06-03
    Improved support for tex handling of text in backend_ps. - DSD

2005-06-03
    Added rc options to render text with tex or latex, and to select the latex
    font package. - DSD

2005-06-03
    Fixed a bug in ticker.py causing a ZeroDivisionError

2005-06-02
    backend_gtk.py remove DBL_BUFFER, add line to expose_event to try to fix
    pygtk 2.6 redraw problem - SC

2005-06-01
    The default behavior of ScalarFormatter now renders scientific notation and
    large numerical offsets in a label at the end of the axis. - DSD

2005-06-01
    Added Nicholas' frombyte image patch - JDH

2005-05-31
    Added vertical TeX support for agg - JDH

2005-05-31
    Applied Eric's cntr patch - JDH

2005-05-27
    Finally found the pesky agg bug (which Maxim was kind enough to fix within
    hours) that was causing a segfault in the win32 cached marker drawing.  Now
    windows users can get the enormouse performance benefits of caced markers
    w/o those occasional pesy screenshots. - JDH

2005-05-27
    Got win32 build system working again, using a more recent version of gtk
    and pygtk in the win32 build, gtk 2.6 from
    https://web.archive.org/web/20050527002647/https://www.gimp.org/~tml/gimp/win32/downloads.html
    (you will also need libpng12.dll to use these).  I haven't tested whether
    this binary build of mpl for win32 will work with older gtk runtimes, so
    you may need to upgrade.

2005-05-27
    Fixed bug where 2nd wxapp could be started if using wxagg backend. - ADS

2005-05-26
    Added Daishi text with dash patch -- see examples/dashtick.py

2005-05-26
    Moved backend_latex functionality into backend_ps. If text.usetex=True, the
    PostScript backend will use LaTeX to generate the .ps or .eps file.
    Ghostscript is required for eps output. - DSD

2005-05-24
    Fixed alignment and color issues in latex backend. - DSD

2005-05-21
    Fixed raster problem for small rasters with dvipng -- looks like it was a
    premultipled alpha problem - JDH

2005-05-20
    Added linewidth and faceted kwarg to scatter to control edgewidth and
    color.  Also added autolegend patch to inspect line segments.

2005-05-18
    Added Orsay and JPL qt fixes - JDH

2005-05-17
    Added a psfrag latex backend -- some alignment issues need to be worked
    out. Run with -dLaTeX and a *.tex file and *.eps file are generated.  latex
    and dvips the generated latex file to get ps output.  Note xdvi *does* not
    work, you must generate ps.- JDH

2005-05-13
    Added Florent Rougon's Axis set_label1 patch

2005-05-17
    pcolor optimization, fixed bug in previous pcolor patch - JSWHIT

2005-05-16
    Added support for masked arrays in pcolor - JSWHIT


2005-05-12
    Started work on TeX text for antigrain using pngdvi -- see
    examples/tex_demo.py and the new module matplotlib.texmanager.  Rotated
    text not supported and rendering small glyps is not working right yet.  BUt
    large fontsizes and/or high dpi saved figs work great.

2005-05-10
    New image resize options interpolation options.  New values for the interp
    kwarg are

           'nearest', 'bilinear', 'bicubic', 'spline16', 'spline36',
           'hanning', 'hamming', 'hermite', 'kaiser', 'quadric',
           'catrom', 'gaussian', 'bessel', 'mitchell', 'sinc',
           'lanczos', 'blackman'

    See help(imshow) for details, particularly the interpolation, filternorm
    and filterrad kwargs


2005-05-10
    Applied Eric's contour mem leak fixes - JDH

2005-05-10
    Extended python agg wrapper and started implementing backend_agg2, an agg
    renderer based on the python wrapper.  This will be more flexible and
    easier to extend than the current backend_agg.  See also
    examples/agg_test.py - JDH

2005-05-09
    Added Marcin's no legend patch to exclude lines from the autolegend builder::

           plot(x, y, label='nolegend')

2005-05-05
    Upgraded to agg23

2005-05-05
    Added newscalarformatter_demo.py to examples. -DSD

2005-05-04
    Added NewScalarFormatter. Improved formatting of ticklabels, scientific
    notation, and the ability to plot large large numbers with small ranges, by
    determining a numerical offset.  See ticker.NewScalarFormatter for more
    details. -DSD

2005-05-03
    Added the option to specify a delimiter in pylab.load -DSD

2005-04-28
    Added Darren's line collection example

2005-04-28
    Fixed aa property in agg - JDH

2005-04-27
    Set postscript page size in .matplotlibrc - DSD

2005-04-26
    Added embedding in qt example. - JDH

2005-04-14
    Applied Michael Brady's qt backend patch: 1) fix a bug where keyboard input
    was grabbed by the figure and not released  2) turn on cursor changes  3)
    clean up a typo and commented-out print statement. - JDH

2005-04-14
    Applied Eric Firing's masked data lines patch and contour patch.  Support
    for masked arrays has been added to the plot command and to the Line2D
    object.  Only the valid points are plotted.  A "valid_only" kwarg was added
    to the get_xdata() and get_ydata() methods of Line2D; by default it is
    False, so that the original data arrays are returned. Setting it to True
    returns the plottable points.  - see examples/masked_demo.py - JDH

2005-04-13
    Applied Tim Leslie's arrow key event handling patch - JDH

---------------------------

0.80
----

2005-04-11
    Applied a variant of rick's xlim/ylim/axis patch.  These functions now take
    kwargs to let you selectively alter only the min or max if desired.  e.g.,
    xlim(xmin=2) or axis(ymax=3).  They always return the new lim. - JDH


2005-04-11
    Incorporated Werner's wx patch -- wx backend should be compatible with
    wxpython2.4 and recent versions of 2.5.  Some early versions of wxpython
    2.5 will not work because there was a temporary change in the dc API that
    was rolled back to make it 2.4 compliant

2005-04-11
    modified tkagg show so that new figure window pops up on call to figure

2005-04-11
    fixed wxapp init bug

2005-04-02
    updated backend_ps.draw_lines, draw_markers for use with the new API - DSD

2005-04-01
    Added editable polygon example

------------------------------

0.74 (2005-03-31)
-----------------

2005-03-30
    Fixed and added checks for floating point inaccuracy in ticker.Base - DSD

2005-03-30
    updated /ellipse definition in backend_ps.py to address bug #1122041 - DSD

2005-03-29
    Added unicode support for Agg and PS - JDH

2005-03-28
    Added Jarrod's svg patch for text - JDH

2005-03-28
    Added Ludal's arrow and quiver patch - JDH

2005-03-28
    Added label kwarg to Axes to facilitate forcing the creation of new Axes
    with otherwise identical attributes

2005-03-28
    Applied boxplot and OSX font search patches

2005-03-27
    Added ft2font NULL check to fix Japanase font bug - JDH

2005-03-27
    Added sprint legend patch plus John Gill's tests and fix -- see
    examples/legend_auto.py  - JDH

---------------------------

0.73.1 (2005-03-19)
-------------------

2005-03-19
    Reverted wxapp handling because it crashed win32 - JDH

2005-03-18
    Add .number attribute to figure objects returned by figure() - FP

---------------------------

0.73 (2005-03-18)
-----------------

2005-03-16
    Fixed labelsep bug

2005-03-16
    Applied Darren's ticker fix for small ranges - JDH

2005-03-16
    Fixed tick on horiz colorbar - JDH

2005-03-16
    Added Japanese winreg patch - JDH

2005-03-15
    backend_gtkagg.py: changed to use double buffering, this fixes the problem
    reported Joachim Berdal Haga - "Parts of plot lagging from previous frame
    in animation". Tested with anim.py and it makes no noticeable difference to
    performance (23.7 before, 23.6 after) - SC

2005-03-14
    add src/_backend_gdk.c extension to provide a substitute function for
    pixbuf.get_pixels_array(). Currently pixbuf.get_pixels_array() only works
    with Numeric, and then only works if pygtk has been compiled with Numeric
    support. The change provides a function pixbuf_get_pixels_array() which
    works with Numeric and numarray and is always available. It means that
    backend_gtk should be able to display images and mathtext in all
    circumstances. - SC

2005-03-11
    Upgraded CXX to 5.3.1

2005-03-10
    remove GraphicsContextPS.set_linestyle() and
    GraphicsContextSVG.set_linestyle() since they do no more than the base
    class GraphicsContext.set_linestyle() - SC

2005-03-09
    Refactored contour functionality into dedicated module

2005-03-09
    Added Eric's contourf updates and Nadia's clabel functionality

2005-03-09
    Moved colorbar to figure.Figure to expose it for API developers - JDH

2005-03-09
    backend_cairo.py: implemented draw_markers() - SC

2005-03-09
    cbook.py: only use enumerate() (the python version) if the builtin version
    is not available.  Add new function 'izip' which is set to itertools.izip
    if available and the python equivalent if not available. - SC

2005-03-07
    backend_gdk.py: remove PIXELS_PER_INCH from points_to_pixels(), but still
    use it to adjust font sizes. This allows the GTK version of line_styles.py
    to more closely match GTKAgg, previously the markers were being drawn too
    large. - SC

2005-03-01
    Added Eric's contourf routines

2005-03-01
    Added start of proper agg SWIG wrapper.  I would like to expose agg
    functionality directly a the user level and this module will serve that
    purpose eventually, and will hopefully take over most of the functionality
    of the current _image and _backend_agg modules.  - JDH

2005-02-28
    Fixed polyfit / polyval to convert input args to float arrays - JDH

2005-02-25
    Add experimental feature to backend_gtk.py to enable/disable double
    buffering (DBL_BUFFER=True/False) - SC

2005-02-24
    colors.py change ColorConverter.to_rgb() so it always returns rgb (and not
    rgba), allow cnames keys to be cached, change the exception raised from
    RuntimeError to ValueError (like hex2color()) hex2color() use a regular
    expression to check the color string is valid  - SC

2005-02-23
    Added rc param ps.useafm so backend ps can use native afm fonts or
    truetype.  afme breaks mathtext but causes much smaller font sizes and may
    result in images that display better in some contexts (e.g., pdfs
    incorporated into latex docs viewed in acrobat reader).  I would like to
    extend this approach to allow the user to use truetype only for mathtext,
    which should be easy.

2005-02-23
    Used sequence protocol rather than tuple in agg collection drawing routines
    for greater flexibility - JDH

--------------------------------

0.72.1 (2005-02-22)
-------------------

2005-02-21
    fixed linestyles for collections -- contour now dashes for levels <0

2005-02-21
    fixed ps color bug - JDH

2005-02-15
    fixed missing qt file

2005-02-15
    banished error_msg and report_error.  Internal backend methods like
    error_msg_gtk are preserved.  backend writers, check your backends, and
    diff against 0.72 to make sure I did the right thing! - JDH

2005-02-14
    Added enthought traits to matplotlib tree - JDH

------------------------

0.72 (2005-02-14)
-----------------

2005-02-14
    fix bug in cbook alltrue() and onetrue() - SC

2005-02-11
    updated qtagg backend from Ted - JDH

2005-02-11
    matshow fixes for figure numbering, return value and docs - FP

2005-02-09
    new zorder example for fine control in zorder_demo.py - FP

2005-02-09
    backend renderer draw_lines now has transform in backend, as in
    draw_markers; use numerix in _backend_agg, aded small line optimization to
    agg

2005-02-09
    subplot now deletes axes that it overlaps

2005-02-08
    Added transparent support for gzipped files in load/save - Fernando Perez
    (FP from now on).

2005-02-08
    Small optimizations in PS backend.  They may have a big impact for large
    plots, otherwise they don't hurt  - FP

2005-02-08
    Added transparent support for gzipped files in load/save - Fernando Perez
    (FP from now on).

2005-02-07
    Added newstyle path drawing for markers - only implemented in agg currently
    - JDH

2005-02-05
    Some superscript text optimizations for ticking log plots

2005-02-05
    Added some default key press events to pylab figures: 'g' toggles grid -
    JDH

2005-02-05
    Added some support for handling log switching for lines that have nonpos
    data - JDH

2005-02-04
    Added Nadia's contour patch - contour now has matlab compatible syntax;
    this also fixed an unequal sized contour array bug- JDH

2005-02-04
    Modified GTK backends to allow the FigureCanvas to be resized smaller than
    its original size - SC

2005-02-02
    Fixed a bug in dates mx2num - JDH

2005-02-02
    Incorporated Fernando's matshow - JDH

2005-02-01
    Added Fernando's figure num patch, including experimental support for pylab
    backend switching, LineCOllection.color warns, savefig now a figure method,
    fixed a close(fig) bug - JDH

2005-01-31
    updated datalim in contour - JDH

2005-01-30
    Added backend_qtagg.py provided by Sigve Tjora - SC

2005-01-28
    Added tk.inspect rc param to .matplotlibrc.  IDLE users should set
    tk.pythoninspect:True and interactive:True and backend:TkAgg

2005-01-28
    Replaced examples/interactive.py with an updated script from Fernando Perez
    - SC

2005-01-27
    Added support for shared x or y axes.  See examples/shared_axis_demo.py and
    examples/ganged_plots.py

2005-01-27
    Added Lee's patch for missing symbols \leq and \LEFTbracket to
    _mathtext_data - JDH

2005-01-26
    Added Baptiste's two scales patch -- see help(twinx) in the pylab interface
    for more info.  See also examples/two_scales.py

2005-01-24
    Fixed a mathtext parser bug that prevented font changes in sub/superscripts
    - JDH

2005-01-24
    Fixed contour to work w/ interactive changes in colormaps, clim, etc - JDH

-----------------------------

0.71 (2005-01-21)
-----------------

2005-01-21
    Refactored numerix to solve vexing namespace issues - JDH

2005-01-21
    Applied Nadia's contour bug fix - JDH

2005-01-20
    Made some changes to the contour routine - particularly region=1 seems t
    fix a lot of the zigzag strangeness.  Added colormaps as default for
    contour - JDH

2005-01-19
    Restored builtin names which were overridden (min, max, abs, round, and
    sum) in pylab.  This is a potentially significant change for those who were
    relying on an array version of those functions that previously overrode
    builtin function names. - ADS

2005-01-18
    Added accents to mathtext: \hat, \breve, \grave, \bar, \acute, \tilde,
    \vec, \dot, \ddot.  All of them have the same syntax, e.g., to make an
    overbar you do \bar{o} or to make an o umlaut you do \ddot{o}. The
    shortcuts are also provided, e.g., \"o \'e \`e \~n \.x \^y - JDH

2005-01-18
    Plugged image resize memory leaks - JDH

2005-01-18
    Fixed some mathtext parser problems relating to superscripts

2005-01-17
    Fixed a yticklabel problem for colorbars under change of clim - JDH

2005-01-17
    Cleaned up Destroy handling in wx reducing memleak/fig from approx 800k to
    approx 6k- JDH

2005-01-17
    Added kappa to latex_to_bakoma - JDH

2005-01-15
    Support arbitrary colorbar axes and horizontal colorbars - JDH

2005-01-15
    Fixed colormap number of colors bug so that the colorbar has the same
    discretization as the image - JDH

2005-01-15
    Added Nadia's x,y contour fix - JDH

2005-01-15
    backend_cairo: added PDF support which requires pycairo 0.1.4.  Its not
    usable yet, but is ready for when the Cairo PDF backend matures - SC

2005-01-15
    Added Nadia's x,y contour fix

2005-01-12
    Fixed set clip_on bug in artist - JDH

2005-01-11
    Reverted pythoninspect in tkagg - JDH

2005-01-09
    Fixed a backend_bases event bug caused when an event is triggered when
    location is None - JDH

2005-01-07
    Add patch from Stephen Walton to fix bug in pylab.load() when the %
    character is included in a comment. - ADS

2005-01-07
    Added markerscale attribute to Legend class.  This allows the marker size
    in the legend to be adjusted relative to that in the plot. - ADS

2005-01-06
    Add patch from Ben Vanhaeren to make the FigureManagerGTK vbox a public
    attribute - SC

----------------------------

2004-12-30
    Release 0.70

2004-12-28
    Added coord location to key press and added a examples/picker_demo.py

2004-12-28
    Fixed coords notification in wx toolbar - JDH

2004-12-28
    Moved connection and disconnection event handling to the FigureCanvasBase.
    Backends now only need to connect one time for each of the button press,
    button release and key press/release functions.  The base class deals with
    callbacks and multiple connections.  This fixes flakiness on some backends
    (tk, wx) in the presence of multiple connections and/or disconnect - JDH

2004-12-27
    Fixed PS mathtext bug where color was not set - Jochen please verify
    correct - JDH

2004-12-27
    Added Shadow class and added shadow kwarg to legend and pie for shadow
    effect - JDH

2004-12-27
    Added pie charts and new example/pie_demo.py

2004-12-23
    Fixed an agg text rotation alignment bug, fixed some text kwarg processing
    bugs, and added examples/text_rotation.py to explain and demonstrate how
    text rotations and alignment work in matplotlib. - JDH

-----------------------

0.65.1 (2004-12-22)
-------------------

2004-12-22
    Fixed colorbar bug which caused colorbar not to respond to changes in
    colormap in some instances - JDH

2004-12-22
    Refactored NavigationToolbar in tkagg to support app embedding , init now
    takes (canvas, window) rather than (canvas, figman) - JDH

2004-12-21
    Refactored axes and subplot management - removed add_subplot and add_axes
    from the FigureManager.  classic toolbar updates are done via an observer
    pattern on the figure using add_axobserver.  Figure now maintains the axes
    stack (for gca) and supports axes deletion.  Ported changes to GTK, Tk, Wx,
    and FLTK.  Please test!  Added delaxes - JDH

2004-12-21
    Lots of image optimizations - 4x performance boost over 0.65 JDH

2004-12-20
    Fixed a figimage bug where the axes is shown and modified tkagg to move the
    destroy binding into the show method.

2004-12-18
    Minor refactoring of NavigationToolbar2 to support embedding in an
    application - JDH

2004-12-14
    Added linestyle to collections (currently broken) -  JDH

2004-12-14
    Applied Nadia's setupext patch to fix libstdc++ link problem with contour
    and solaris  -JDH

2004-12-14
    A number of pychecker inspired fixes, including removal of True and False
    from cbook which I erroneously thought was needed for python2.2 - JDH

2004-12-14
    Finished porting doc strings for set introspection.  Used silent_list for
    many get funcs that return lists. JDH

2004-12-13
    dates.py: removed all timezone() calls, except for UTC - SC

----------------------------

0.65 (2004-12-13)
-----------------

2004-12-13
    colors.py: rgb2hex(), hex2color() made simpler (and faster), also rgb2hex()
    - added round() instead of integer truncation hex2color() - changed 256.0
    divisor to 255.0, so now '#ffffff' becomes (1.0,1.0,1.0) not
    (0.996,0.996,0.996) - SC

2004-12-11
    Added ion and ioff to pylab interface - JDH

2004-12-11
    backend_template.py: delete FigureCanvasTemplate.realize() - most backends
    don't use it and its no longer needed

    backend_ps.py, backend_svg.py: delete show() and draw_if_interactive() -
    they are not needed for image backends

    backend_svg.py: write direct to file instead of StringIO

    - SC

2004-12-10
    Added zorder to artists to control drawing order of lines, patches and text
    in axes.  See examples/zoder_demo.py - JDH

2004-12-10
    Fixed colorbar bug with scatter - JDH

2004-12-10
    Added Nadia Dencheva <dencheva@stsci.edu> contour code - JDH

2004-12-10
    backend_cairo.py: got mathtext working - SC

2004-12-09
    Added Norm Peterson's svg clipping patch

2004-12-09
    Added Matthew Newville's wx printing patch

2004-12-09
    Migrated matlab to pylab - JDH

2004-12-09
    backend_gtk.py: split into two parts

    - backend_gdk.py - an image backend
    - backend_gtk.py - A GUI backend that uses GDK - SC

2004-12-08
    backend_gtk.py: remove quit_after_print_xvfb(\*args), show_xvfb(),
    Dialog_MeasureTool(gtk.Dialog) one month after sending mail to
    matplotlib-users asking if anyone still uses these functions - SC

2004-12-02
    backend_bases.py, backend_template.py: updated some of the method
    documentation to make them consistent with each other - SC

2004-12-04
    Fixed multiple bindings per event for TkAgg mpl_connect and mpl_disconnect.
    Added a "test_disconnect" command line parameter to coords_demo.py  JTM

2004-12-04
    Fixed some legend bugs JDH

2004-11-30
    Added over command for oneoff over plots.  e.g., over(plot, x, y, lw=2).
    Works with any plot function.

2004-11-30
    Added bbox property to text - JDH

2004-11-29
    Zoom to rect now respect reversed axes limits (for both linear and log
    axes). - GL

2004-11-29
    Added the over command to the matlab interface.  over allows you to add an
    overlay plot regardless of hold state. - JDH

2004-11-25
    Added Printf to mplutils for printf style format string formatting in C++
    (should help write better exceptions)

2004-11-24
    IMAGE_FORMAT: remove from agg and gtkagg backends as its no longer used -
    SC

2004-11-23
    Added matplotlib compatible set and get introspection.  See set_and_get.py

2004-11-23
    applied Norbert's patched and exposed legend configuration to kwargs - JDH

2004-11-23
    backend_gtk.py: added a default exception handler - SC

2004-11-18
    backend_gtk.py: change so that the backend knows about all image formats
    and does not need to use IMAGE_FORMAT in other backends - SC

2004-11-18
    Fixed some report_error bugs in string interpolation as reported on SF bug
    tracker- JDH

2004-11-17
    backend_gtkcairo.py: change so all print_figure() calls render using Cairo
    and get saved using backend_gtk.print_figure() - SC

2004-11-13
    backend_cairo.py: Discovered the magic number (96) required for Cairo PS
    plots to come out the right size. Restored Cairo PS output and added
    support for landscape mode - SC

2004-11-13
    Added ishold - JDH

2004-11-12
    Added many new matlab colormaps - autumn bone cool copper flag gray hot hsv
    jet pink prism spring summer winter - PG

2004-11-11
    greatly simplify the emitted postscript code - JV

2004-11-12
    Added new plotting functions spy, spy2 for sparse matrix visualization -
    JDH

2004-11-11
    Added rgrids, thetragrids for customizing the grid locations and labels for
    polar plots - JDH

2004-11-11
    make the Gtk backends build without an X-server connection - JV

2004-11-10
    matplotlib/__init__.py: Added FROZEN to signal we are running under py2exe
    (or similar) - is used by backend_gtk.py - SC

2004-11-09
    backend_gtk.py: Made fix suggested by maffew@cat.org.au to prevent problems
    when py2exe calls pygtk.require(). - SC

2004-11-09
    backend_cairo.py: Added support for printing to a fileobject.  Disabled
    cairo PS output which is not working correctly. - SC

----------------------------------

0.64 (2004-11-08)
-----------------

2004-11-04
    Changed -dbackend processing to only use known backends, so we don't
    clobber other non-matplotlib uses of -d, like -debug.

2004-11-04
    backend_agg.py: added IMAGE_FORMAT to list the formats that the backend can
    save to.  backend_gtkagg.py: added support for saving JPG files by using
    the GTK backend - SC

2004-10-31
    backend_cairo.py: now produces png and ps files (although the figure sizing
    needs some work). pycairo did not wrap all the necessary functions, so I
    wrapped them myself, they are included in the backend_cairo.py doc string.
    - SC

2004-10-31
    backend_ps.py: clean up the generated PostScript code, use the PostScript
    stack to hold itermediate values instead of storing them in the dictionary.
    - JV

2004-10-30
    backend_ps.py, ft2font.cpp, ft2font.h: fix the position of text in the
    PostScript output.  The new FT2Font method get_descent gives the distance
    between the lower edge of the bounding box and the baseline of a string.
    In backend_ps the text is shifted upwards by this amount. - JV

2004-10-30
    backend_ps.py: clean up the code a lot.  Change the PostScript output to be
    more DSC compliant.  All definitions for the generated PostScript are now
    in a PostScript dictionary 'mpldict'.  Moved the long comment about drawing
    ellipses from the PostScript output into a Python comment. - JV

2004-10-30
    backend_gtk.py: removed FigureCanvasGTK.realize() as its no longer needed.
    Merged ColorManager into GraphicsContext backend_bases.py: For
    set_capstyle/joinstyle() only set cap or joinstyle if there is no error. -
    SC

2004-10-30
    backend_gtk.py: tidied up print_figure() and removed some of the dependency
    on widget events - SC

2004-10-28
    backend_cairo.py: The renderer is complete except for mathtext,
    draw_image() and clipping. gtkcairo works reasonably well. cairo does not
    yet create any files since I can't figure how to set the 'target surface',
    I don't think pycairo wraps the required functions - SC

2004-10-28
    backend_gtk.py: Improved the save dialog (GTK 2.4 only) so it presents the
    user with a menu of supported image formats - SC

2004-10-28
    backend_svg.py: change print_figure() to restore original face/edge color
    backend_ps.py : change print_figure() to ensure original face/edge colors
    are restored even if there's an IOError - SC

2004-10-27
    Applied Norbert's errorbar patch to support barsabove kwarg

2004-10-27
    Applied Norbert's legend patch to support None handles

2004-10-27
    Added two more backends: backend_cairo.py, backend_gtkcairo.py They are not
    complete yet, currently backend_gtkcairo just renders polygons, rectangles
    and lines - SC

2004-10-21
    Added polar axes and plots - JDH

2004-10-20
    Fixed corrcoef bug exposed by corrcoef(X) where X is matrix - JDH

2004-10-19
    Added kwarg support to xticks and yticks to set ticklabel text properties
    -- thanks to T. Edward Whalen for the suggestion

2004-10-19
    Added support for PIL images in imshow(), image.py - ADS

2004-10-19
    Re-worked exception handling in _image.py and _transforms.py to avoid
    masking problems with shared libraries.  - JTM

2004-10-16
    Streamlined the matlab interface wrapper, removed the noplot option to hist
    - just use mlab.hist instead.

2004-09-30
    Added Andrew Dalke's strftime code to extend the range of dates supported
    by the DateFormatter - JDH

2004-09-30
    Added barh - JDH

2004-09-30
    Removed fallback to alternate array package from numerix so that
    ImportErrors are easier to debug.  - JTM

2004-09-30
    Add GTK+ 2.4 support for the message in the toolbar. SC

2004-09-30
    Made some changes to support python22 - lots of doc fixes. - JDH

2004-09-29
    Added a Verbose class for reporting - JDH

------------------------------------

2004-09-28
    Released 0.63.0

2004-09-28
    Added save to file object for agg - see examples/print_stdout.py

2004-09-24
    Reorganized all py code to lib subdir

2004-09-24
    Fixed axes resize image edge effects on interpolation - required upgrade to
    agg22 which fixed an agg bug related to this problem

2004-09-20
    Added toolbar2 message display for backend_tkagg.  JTM

2004-09-17
    Added coords formatter attributes.  These must be callable, and return a
    string for the x or y data. These will be used to format the x and y data
    for the coords box.  Default is the axis major formatter.  e.g.::

        # format the coords message box
        def price(x): return '$%1.2f'%x
        ax.format_xdata = DateFormatter('%Y-%m-%d')
        ax.format_ydata = price

2004-09-17
    Total rewrite of dates handling to use python datetime with num2date,
    date2num and drange.  pytz for timezone handling, dateutils for
    spohisticated ticking.  date ranges from 0001-9999 are supported.  rrules
    allow arbitrary date ticking.  examples/date_demo*.py converted to show new
    usage.  new example examples/date_demo_rrule.py shows how to use rrules in
    date plots.  The date locators are much more general and almost all of them
    have different constructors.  See matplotlib.dates for more info.

2004-09-15
    Applied Fernando's backend __init__ patch to support easier backend
    maintenance.  Added his numutils to mlab.  JDH

2004-09-16
    Re-designated all files in matplotlib/images as binary and w/o keyword
    substitution using "cvs admin -kb \*.svg ...".  See binary files in "info
    cvs" under Linux.  This was messing up builds from CVS on windows since CVS
    was doing lf -> cr/lf and keyword substitution on the bitmaps.  - JTM

2004-09-15
    Modified setup to build array-package-specific extensions for those
    extensions which are array-aware.  Setup builds extensions automatically
    for either Numeric, numarray, or both, depending on what you have
    installed.  Python proxy modules for the array-aware extensions import the
    version optimized for numarray or Numeric determined by numerix.  - JTM

2004-09-15
    Moved definitions of infinity from mlab to numerix to avoid divide by zero
    warnings for numarray - JTM

2004-09-09
    Added axhline, axvline, axhspan and axvspan

-------------------------------

0.62.4 (2004-08-30)
-------------------

2004-08-30
    Fixed a multiple images with different extent bug, Fixed markerfacecolor as
    RGB tuple

2004-08-27
    Mathtext now more than 5x faster.  Thanks to Paul Mcguire for fixes both to
    pyparsing and to the matplotlib grammar!  mathtext broken on python2.2

2004-08-25
    Exposed Darren's and Greg's log ticking and formatting options to semilogx
    and friends

2004-08-23
    Fixed grid w/o args to toggle grid state - JDH

2004-08-11
    Added Gregory's log patches for major and minor ticking

2004-08-18
    Some pixel edge effects fixes for images

2004-08-18
    Fixed TTF files reads in backend_ps on win32.

2004-08-18
    Added base and subs properties for logscale plots, user modifiable using
    set_[x,y]scale('log',base=b,subs=[mt1,mt2,...]) - GL

2004-08-18
    fixed a bug exposed by trying to find the HOME dir on win32 thanks to Alan
    Issac for pointing to the light - JDH

2004-08-18
    fixed errorbar bug in setting ecolor - JDH

2004-08-12
    Added Darren Dale's exponential ticking patch

2004-08-11
    Added Gregory's fltkagg backend

------------------------------

0.61.0 (2004-08-09)
-------------------

2004-08-08
    backend_gtk.py: get rid of the final PyGTK deprecation warning by replacing
    gtkOptionMenu with gtkMenu in the 2.4 version of the classic toolbar.

2004-08-06
    Added Tk zoom to rect rectangle, proper idle drawing, and keybinding - JDH

2004-08-05
    Updated installing.html and INSTALL - JDH

2004-08-01
    backend_gtk.py: move all drawing code into the expose_event()

2004-07-28
    Added Greg's toolbar2 and backend_*agg patches - JDH

2004-07-28
    Added image.imread with support for loading png into numerix arrays

2004-07-28
    Added key modifiers to events - implemented dynamic updates and rubber
    banding for interactive pan/zoom - JDH

2004-07-27
    did a readthrough of SVG, replacing all the string additions with string
    interps for efficiency, fixed some layout problems, added font and image
    support (through external pngs) - JDH

2004-07-25
    backend_gtk.py: modify toolbar2 to make it easier to support GTK+ 2.4. Add
    GTK+ 2.4 toolbar support. - SC

2004-07-24
    backend_gtk.py: Simplified classic toolbar creation - SC

2004-07-24
    Added images/matplotlib.svg to be used when GTK+ windows are minimised - SC

2004-07-22
    Added right mouse click zoom for NavigationToolbar2 panning mode. - JTM

2004-07-22
    Added NavigationToolbar2 support to backend_tkagg.  Minor tweak to
    backend_bases.  - JTM

2004-07-22
    Incorporated Gergory's renderer cache and buffer object cache - JDH

2004-07-22
    Backend_gtk.py: Added support for GtkFileChooser, changed
    FileSelection/FileChooser so that only one instance pops up, and made them
    both modal. - SC

2004-07-21
    Applied backend_agg memory leak patch from hayden - jocallo@online.no.
    Found and fixed a leak in binary operations on transforms.  Moral of the
    story: never incref where you meant to decref!  Fixed several leaks in
    ft2font: moral of story: almost always return Py::asObject over Py::Object
    - JDH

2004-07-21
    Fixed a to string memory allocation bug in agg and image modules - JDH

2004-07-21
    Added mpl_connect and mpl_disconnect to matlab interface - JDH

2004-07-21
    Added beginnings of users_guide to CVS - JDH

2004-07-20
    ported toolbar2 to wx

2004-07-20
    upgraded to agg21 - JDH

2004-07-20
    Added new icons for toolbar2 - JDH

2004-07-19
    Added vertical mathtext for \*Agg and GTK - thanks Jim Benson! - JDH

2004-07-16
    Added ps/eps/svg savefig options to wx and gtk JDH

2004-07-15
    Fixed python framework tk finder in setupext.py - JDH

2004-07-14
    Fixed layer images demo which was broken by the 07/12 image extent fixes -
    JDH

2004-07-13
    Modified line collections to handle arbitrary length segments for each line
    segment. - JDH

2004-07-13
    Fixed problems with image extent and origin - set_image_extent deprecated.
    Use imshow(blah, blah, extent=(xmin, xmax, ymin, ymax) instead  - JDH

2004-07-12
    Added prototype for new nav bar with codifed event handling.  Use
    mpl_connect rather than connect for matplotlib event handling.  toolbar
    style determined by rc toolbar param.  backend status: gtk: prototype, wx:
    in progress, tk: not started - JDH

2004-07-11
    backend_gtk.py: use builtin round() instead of redefining it.  - SC

2004-07-10
    Added embedding_in_wx3 example - ADS

2004-07-09
    Added dynamic_image_wxagg to examples - ADS

2004-07-09
    added support for embedding TrueType fonts in PS files - PEB

2004-07-09
    fixed a sfnt bug exposed if font cache is not built

2004-07-09
    added default arg None to matplotlib.matlab grid command to toggle current
    grid state

---------------------

0.60.2 (2004-07-08)
-------------------

2004-07-08
    fixed a mathtext bug for '6'

2004-07-08
    added some numarray bug workarounds

--------------------------

0.60 (2004-07-07)
-----------------

2004-07-07
    Fixed a bug in dynamic_demo_wx

2004-07-07
    backend_gtk.py: raise SystemExit immediately if 'import pygtk' fails - SC

2004-07-05
    Added new mathtext commands \over{sym1}{sym2} and \under{sym1}{sym2}

2004-07-05
    Unified image and patch collections colormapping and scaling args.  Updated
    docstrings for all - JDH

2004-07-05
    Fixed a figure legend bug and added examples/figlegend_demo.py - JDH

2004-07-01
    Fixed a memory leak in image and agg to string methods

2004-06-25
    Fixed fonts_demo spacing problems and added a kwargs version of the
    fonts_demo fonts_demo_kw.py - JDH

2004-06-25
    finance.py: handle case when urlopen() fails - SC

2004-06-24
    Support for multiple images on axes and figure, with blending.  Support for
    upper and lower image origins.  clim, jet and gray functions in matlab
    interface operate on current image - JDH

2004-06-23
    ported code to Perry's new colormap and norm scheme.  Added new rc
    attributes image.aspect, image.interpolation, image.cmap, image.lut,
    image.origin

2004-06-20
    backend_gtk.py: replace gtk.TRUE/FALSE with True/False.  simplified
    _make_axis_menu(). - SC

2004-06-19
    anim_tk.py: Updated to use TkAgg by default (not GTK) backend_gtk_py: Added
    '_' in front of private widget creation functions - SC

2004-06-17
    backend_gtk.py: Create a GC once in realise(), not every time draw() is
    called. - SC

2004-06-16
    Added new py2exe FAQ entry and added frozen support in get_data_path for
    py2exe - JDH

2004-06-16
    Removed GTKGD, which was always just a proof-of-concept backend - JDH

2004-06-16
    backend_gtk.py updates to replace deprecated functions gtk.mainquit(),
    gtk.mainloop().  Update NavigationToolbar to use the new GtkToolbar API -
    SC

2004-06-15
    removed set_default_font from font_manager to unify font customization
    using the new function rc.  See API_CHANGES for more info.  The examples
    fonts_demo.py and fonts_demo_kw.py are ported to the new API - JDH

2004-06-15
    Improved (yet again!) axis scaling to properly handle singleton plots - JDH

2004-06-15
    Restored the old FigureCanvasGTK.draw() - SC

2004-06-11
    More memory leak fixes in transforms and ft2font - JDH

2004-06-11
    Eliminated numerix .numerix file and environment variable NUMERIX.  Fixed
    bug which prevented command line overrides: --numarray or --numeric. - JTM

2004-06-10
    Added rc configuration function rc; deferred all rc param setting until
    object creation time; added new rc attrs: lines.markerfacecolor,
    lines.markeredgecolor, lines.markeredgewidth, patch.linewidth,
    patch.facecolor, patch.edgecolor, patch.antialiased; see
    examples/customize_rc.py for usage - JDH

---------------------------------------------------------------

0.54.2 (2004-06-09)
-------------------

2004-06-08
    Rewrote ft2font using CXX as part of general memory leak fixes; also fixed
    transform memory leaks  - JDH

2004-06-07
    Fixed several problems with log ticks and scaling - JDH

2004-06-07
    Fixed width/height issues for images - JDH

2004-06-03
    Fixed draw_if_interactive bug for semilogx;

2004-06-02
    Fixed text clipping to clip to axes - JDH

2004-06-02
    Fixed leading newline text and multiple newline text - JDH

2004-06-02
    Fixed plot_date to return lines - JDH

2004-06-01
    Fixed plot to work with x or y having shape N,1 or 1,N - JDH

2004-05-31
    Added renderer markeredgewidth attribute of Line2D. - ADS

2004-05-29
    Fixed tick label clipping to work with navigation.

2004-05-28
    Added renderer grouping commands to support groups in
           SVG/PS. - JDH

2004-05-28
    Fixed, this time I really mean it, the singleton plot plot([0]) scaling
    bug; Fixed Flavio's shape = N,1 bug - JDH

2004-05-28
    added colorbar - JDH

2004-05-28
    Made some changes to the matplotlib.colors.Colormap to properly support
    clim - JDH

-----------------------------------------------------------------

0.54.1 (2004-05-27)
-------------------

2004-05-27
    Lots of small bug fixes: rotated text at negative angles, errorbar capsize
    and autoscaling, right tick label position, gtkagg on win98, alpha of
    figure background, singleton plots - JDH

2004-05-26
    Added Gary's errorbar stuff and made some fixes for length one plots and
    constant data plots - JDH

2004-05-25
    Tweaked TkAgg backend so that canvas.draw() works more like the other
    backends.  Fixed a bug resulting in 2 draws per figure manager show().
    - JTM

------------------------------------------------------------

0.54 (2004-05-19)
-----------------

2004-05-18
    Added newline separated text with rotations to text.Text layout - JDH

2004-05-16
    Added fast pcolor using PolyCollections.  - JDH

2004-05-14
    Added fast polygon collections - changed scatter to use them.  Added
    multiple symbols to scatter.  10x speedup on large scatters using \*Agg and
    5X speedup for ps. - JDH

2004-05-14
    On second thought... created an "nx" namespace in in numerix which maps
    type names onto typecodes the same way for both numarray and Numeric.  This
    undoes my previous change immediately below. To get a typename for Int16
    usable in a Numeric extension: say nx.Int16. - JTM

2004-05-15
    Rewrote transformation class in extension code, simplified all the artist
    constructors - JDH

2004-05-14
    Modified the type definitions in the numarray side of numerix so that they
    are Numeric typecodes and can be used with Numeric compilex extensions.
    The original numarray types were renamed to type<old_name>.    - JTM

2004-05-06
    Gary Ruben sent me a bevy of new plot symbols and markers.  See
    matplotlib.matlab.plot - JDH

2004-05-06
    Total rewrite of mathtext - factored ft2font stuff out of layout engine and
    defined abstract class for font handling to lay groundwork for ps mathtext.
    Rewrote parser and made layout engine much more precise.  Fixed all the
    layout hacks.  Added spacing commands \/ and \hspace.  Added composite
    chars and defined angstrom. - JDH

2004-05-05
    Refactored text instances out of backend; aligned text with arbitrary
    rotations is now supported - JDH

2004-05-05
    Added a Matrix capability for numarray to numerix.  JTM

2004-05-04
    Updated whats_new.html.template to use dictionary and template loop, added
    anchors for all versions and items; updated goals.txt to use those for
    links. PG

2004-05-04
    Added fonts_demo.py to backend_driver, and AFM and TTF font caches to
    font_manager.py - PEB

2004-05-03
    Redid goals.html.template to use a goals.txt file that has a pseudo
    restructured text organization. PG

2004-05-03
    Removed the close buttons on all GUIs and added the python #! bang line to
    the examples following Steve Chaplin's advice on matplotlib dev

2004-04-29
    Added CXX and rewrote backend_agg using it; tracked down and fixed agg
    memory leak - JDH

2004-04-29
    Added stem plot command - JDH

2004-04-28
    Fixed PS scaling and centering bug - JDH

2004-04-26
    Fixed errorbar autoscale problem - JDH

2004-04-22
    Fixed copy tick attribute bug, fixed singular datalim ticker bug; fixed
    mathtext fontsize interactive bug. - JDH

2004-04-21
    Added calls to draw_if_interactive to axes(), legend(), and pcolor().
    Deleted duplicate pcolor(). - JTM

------------------------------------------------------------

2004-04-21
    matplotlib 0.53 release

2004-04-19
    Fixed vertical alignment bug in PS backend - JDH

2004-04-17
    Added support for two scales on the "same axes" with tick different ticking
    and labeling left right or top bottom.  See examples/two_scales.py - JDH

2004-04-17
    Added default dirs as list rather than single dir in setupext.py - JDH

2004-04-16
    Fixed wx exception swallowing bug (and there was much rejoicing!) - JDH

2004-04-16
    Added new ticker locator a formatter, fixed default font return - JDH

2004-04-16
    Added get_name method to FontProperties class. Fixed font lookup in GTK and
    WX backends. - PEB

2004-04-16
    Added get- and set_fontstyle msethods. - PEB

2004-04-10
    Mathtext fixes: scaling with dpi,  - JDH

2004-04-09
    Improved font detection algorithm. - PEB

2004-04-09
    Move deprecation warnings from text.py to __init__.py - PEB

2004-04-09
    Added default font customization - JDH

2004-04-08
    Fixed viewlim set problem on axes and axis. - JDH

2004-04-07
    Added validate_comma_sep_str and font properties parameters to __init__.
    Removed font families and added rcParams to FontProperties __init__
    arguments in font_manager.  Added default font property parameters to
    .matplotlibrc file with descriptions.  Added deprecation warnings to the
    get\_ - and set_fontXXX methods of the Text object. - PEB

2004-04-06
    Added load and save commands for ASCII data - JDH

2004-04-05
    Improved font caching by not reading AFM fonts until needed.  Added better
    documentation.  Changed the behaviour of the get_family, set_family, and
    set_name methods of FontProperties.  - PEB

2004-04-05
    Added WXAgg backend - JDH

2004-04-04
    Improved font caching in backend_agg with changes to font_manager - JDH

2004-03-29
    Fixed fontdicts and kwargs to work with new font manager - JDH

--------------------------------------------

This is the Old, stale, never used changelog

2002-12-10
    - Added a TODO file and CHANGELOG.  Lots to do -- get crackin'!

    - Fixed y zoom tool bug

    - Adopted a compromise fix for the y data clipping problem.  The problem
      was that for solid lines, the y data clipping (as opposed to the gc
      clipping) caused artifactual horizontal solid lines near the ylim
      boundaries.  I did a 5% offset hack in Axes set_ylim functions which
      helped, but didn't cure the problem for very high gain y zooms.  So I
      disabled y data clipping for connected lines .  If you need extensive y
      clipping, either plot(y,x) because x data clipping is always enabled, or
      change the _set_clip code to 'if 1' as indicated in the lines.py src.
      See _set_clip in lines.py and set_ylim in figure.py for more information.

2002-12-11
    - Added a measurement dialog to the figure window to measure axes position
      and the delta x delta y with a left mouse drag.  These defaults can be
      overridden by deriving from Figure and overriding button_press_event,
      button_release_event, and motion_notify_event, and _dialog_measure_tool.

    - fixed the navigation dialog so you can check the axes the navigation
      buttons apply to.

2003-04-23
    Released matplotlib v0.1

2003-04-24
    Added a new line style PixelLine2D which is the plots the markers as pixels
    (as small as possible) with format symbol ','

    Added a new class Patch with derived classes Rectangle, RegularPolygon and
    Circle

2003-04-25
    Implemented new functions errorbar, scatter and hist

    Added a new line type '|' which is a vline.  syntax is plot(x, Y, '|')
    where y.shape = len(x),2 and each row gives the ymin,ymax for the
    respective values of x.  Previously I had implemented vlines as a list of
    lines, but I needed the efficientcy of the numeric clipping for large
    numbers of vlines outside the viewport, so I wrote a dedicated class
    Vline2D which derives from Line2D

2003-05-01
    Fixed ytick bug where grid and tick show outside axis viewport with gc clip

2003-05-14
    Added new ways to specify colors 1) matlab format string 2) html-style hex
    string, 3) rgb tuple.  See examples/color_demo.py

2003-05-28
    Changed figure rendering to draw form a pixmap to reduce flicker.  See
    examples/system_monitor.py for an example where the plot is continusouly
    updated w/o flicker.  This example is meant to simulate a system monitor
    that shows free CPU, RAM, etc...

2003-08-04
    Added Jon Anderson's GTK shell, which doesn't require pygtk to have
    threading built-in and looks nice!

2003-08-25
    Fixed deprecation warnings for python2.3 and pygtk-1.99.18

2003-08-26
    Added figure text with new example examples/figtext.py

2003-08-27
    Fixed bugs i figure text with font override dictionairies and fig text that
    was placed outside the window bounding box

2003-09-01 through 2003-09-15
    Added a postscript and a GD module backend

2003-09-16
    Fixed font scaling and point scaling so circles, squares, etc on lines will
    scale with DPI as will fonts.  Font scaling is not fully implemented on the
    gtk backend because I have not figured out how to scale fonts to arbitrary
    sizes with GTK

2003-09-17
    Fixed figure text bug which crashed X windows on long figure text extending
    beyond display area.  This was, I believe, due to the vestigial erase
    functionality that was no longer needed since I began rendering to a pixmap

2003-09-30
    Added legend

2003-10-01
    Fixed bug when colors are specified with rgb tuple or hex string.

2003-10-21
    Andrew Straw provided some legend code which I modified and incorporated.
    Thanks Andrew!

2003-10-27
    Fixed a bug in axis.get_view_distance that affected zoom in versus out with
    interactive scrolling, and a bug in the axis text reset system that
    prevented the text from being redrawn on a interactive gtk view lim set
    with the widget

    Fixed a bug in that prevented the manual setting of ticklabel strings from
    working properly

2003-11-02
    - Do a nearest neighbor color pick on GD when allocate fails

2003-11-02
    - Added pcolor plot
    - Added MRI example
    - Fixed bug that screwed up label position if xticks or yticks were empty
    - added nearest neighbor color picker when GD max colors exceeded
    - fixed figure background color bug in GD backend

2003-11-10 - 2003-11-11
    major refactoring.

    * Ticks (with labels, lines and grid) handled by dedicated class
    * Artist now know bounding box and dpi
    * Bounding boxes and transforms handled by dedicated classes
    * legend in dedicated class.  Does a better job of alignment and bordering.
      Can be initialized with specific line instances.  See
      examples/legend_demo2.py

2003-11-14
    Fixed legend positioning bug and added new position args

2003-11-16
    Finished porting GD to new axes API

2003-11-20
    - add TM for matlab on website and in docs

2003-11-20
    - make a nice errorbar and scatter screenshot

2003-11-20
    - auto line style cycling for multiple line types broken

2003-11-18
    (using inkrect) :logical rect too big on gtk backend

2003-11-18
    ticks don't reach edge of axes in gtk mode -- rounding error?

2003-11-20
    - port Gary's errorbar code to new API before 0.40

2003-11-20
    - problem with stale _set_font.  legend axes box doesn't resize on save in
      GTK backend -- see htdocs legend_demo.py

2003-11-21
    - make a dash-dot dict for the GC

2003-12-15
    - fix install path bug
.. _whats-new-2-1-0:

What's new in Matplotlib 2.1.0 (Oct 7, 2017)
============================================

Documentation
+++++++++++++

The examples have been migrated to use `sphinx gallery
<https://sphinx-gallery.readthedocs.io/en/latest/>`__.  This allows
better mixing of prose and code in the examples, provides links to
download the examples as both a Python script and a Jupyter notebook,
and improves the thumbnail galleries.  The examples have been
re-organized into :ref:`tutorials` and a :ref:`gallery`.

Many docstrings and examples have been clarified and improved.


New features
++++++++++++

String categorical values
-------------------------

All plotting functions now support string categorical values as input.
For example:

.. plot::
   :include-source:
   :align: center

   data = {'apples': 10, 'oranges': 15, 'lemons': 5, 'limes': 20}
   fig, ax = plt.subplots()
   ax.bar(data.keys(), data.values(), color='lightgray')


Interactive JS widgets for animation
------------------------------------

Jake Vanderplas' JSAnimation package has been merged into Matplotlib. This
adds to Matplotlib the `~matplotlib.animation.HTMLWriter` class for
generating a JavaScript HTML animation, suitable for the IPython notebook.
This can be activated by default by setting the ``animation.html`` rc
parameter to ``jshtml``. One can also call the
`~matplotlib.animation.Animation.to_jshtml` method to manually convert an
animation. This can be displayed using IPython's ``HTML`` display class::

    from IPython.display import HTML
    HTML(animation.to_jshtml())

The `~matplotlib.animation.HTMLWriter` class can also be used to generate
an HTML file by asking for the ``html`` writer.


Enhancements to polar plot
--------------------------

The polar axes transforms have been greatly re-factored to allow for more
customization of view limits and tick labelling. Additional options for view
limits allow for creating an annulus, a sector, or some combination of the two.

The :meth:`~matplotlib.projections.polar.PolarAxes.set_rorigin` method may
be used to provide an offset to the minimum plotting radius, producing an
annulus.

The :meth:`~matplotlib.projections.polar.PolarAxes.set_theta_zero_location`
method now has an optional :code:`offset` argument. This argument may be used
to further specify the zero location based on the given anchor point.

.. figure:: /gallery/pie_and_polar_charts/images/sphx_glr_polar_scatter_002.png
   :target: ../../gallery/pie_and_polar_charts/polar_scatter.html#scatter-plot-on-polar-axis-with-offset-origin
   :align: center
   :scale: 70

   Polar Offset Demo

The :meth:`~matplotlib.projections.polar.PolarAxes.set_thetamin` and
:meth:`~matplotlib.projections.polar.PolarAxes.set_thetamax` methods may
be used to limit the range of angles plotted, producing sectors of a circle.

.. figure:: /gallery/pie_and_polar_charts/images/sphx_glr_polar_scatter_003.png
   :target: ../../gallery/pie_and_polar_charts/polar_scatter.html#scatter-plot-on-polar-axis-confined-to-a-sector
   :align: center
   :scale: 70

   Polar Sector Demo

Previous releases allowed plots containing negative radii for which the
negative values are simply used as labels, and the real radius is shifted by
the configured minimum. This release also allows negative radii to be used for
grids and ticks, which were previously silently ignored.

Radial ticks have been modified to be parallel to the circular grid line, and
angular ticks have been modified to be parallel to the grid line. It may also
be useful to rotate tick *labels* to match the boundary. Calling
``ax.tick_params(rotation='auto')`` will enable the new behavior: radial tick
labels will be parallel to the circular grid line, and angular tick labels will
be perpendicular to the grid line (i.e., parallel to the outer boundary).
Additionally, tick labels now obey the padding settings that previously only
worked on Cartesian plots. Consequently, the ``frac`` argument to
`.PolarAxes.set_thetagrids` is no longer applied. Tick padding can be modified
with the ``pad`` argument to `.Axes.tick_params` or `.Axis.set_tick_params`.


``Figure`` class now has ``subplots`` method
--------------------------------------------

The :class:`~matplotlib.figure.Figure` class now has a
:meth:`~matplotlib.figure.Figure.subplots` method which behaves the same as
:func:`.pyplot.subplots` but on an existing figure.


Metadata savefig keyword argument
---------------------------------

:func:`~matplotlib.pyplot.savefig` now accepts ``metadata`` as a keyword
argument. It can be used to store key/value pairs in the image metadata.


* 'png' with Agg backend
* 'pdf' with PDF backend (see
  :func:`~matplotlib.backends.backend_pdf.PdfFile.writeInfoDict` for a list of
  supported keywords)
* 'eps' and 'ps' with PS backend (only 'Creator' key is accepted)

::

    plt.savefig('test.png', metadata={'Software': 'My awesome software'})


Busy Cursor
-----------

The interactive GUI backends will now change the cursor to busy when
Matplotlib is rendering the canvas.

PolygonSelector
---------------

A :class:`~matplotlib.widgets.PolygonSelector` class has been added to
:mod:`matplotlib.widgets`.  See
:doc:`/gallery/widgets/polygon_selector_demo` for details.


Added `matplotlib.ticker.PercentFormatter`
------------------------------------------

The new `~matplotlib.ticker.PercentFormatter` formatter has some nice
features like being able to convert from arbitrary data scales to
percents, a customizable percent symbol and either automatic or manual
control over the decimal points.


Reproducible PS, PDF and SVG output
-----------------------------------

The ``SOURCE_DATE_EPOCH`` environment variable can now be used to set
the timestamp value in the PS and PDF outputs. See `source date epoch
<https://reproducible-builds.org/specs/source-date-epoch/>`__.

Alternatively, calling ``savefig`` with ``metadata={'CreationDate': None}``
will omit the timestamp altogether for the PDF backend.

The reproducibility of the output from the PS and PDF backends has so
far been tested using various plot elements but only default values of
options such as ``{ps,pdf}.fonttype`` that can affect the output at a
low level, and not with the mathtext or usetex features. When
Matplotlib calls external tools (such as PS distillers or LaTeX) their
versions need to be kept constant for reproducibility, and they may
add sources of nondeterminism outside the control of Matplotlib.

For SVG output, the ``svg.hashsalt`` rc parameter has been added in an
earlier release. This parameter changes some random identifiers in the
SVG file to be deterministic. The downside of this setting is that if
more than one file is generated using deterministic identifiers
and they end up as parts of one larger document, the identifiers can
collide and cause the different parts to affect each other.

These features are now enabled in the tests for the PDF and SVG
backends, so most test output files (but not all of them) are now
deterministic.

Orthographic projection for mplot3d
-----------------------------------
:class:`~mpl_toolkits.mplot3d.axes3d.Axes3D` now accepts ``proj_type`` keyword
argument and has a method :meth:`~mpl_toolkits.mplot3d.axes3d.Axes3D.set_proj_type`.
The default option is ``'persp'`` as before, and supplying ``'ortho'`` enables
orthographic view.

Compare the z-axis which is vertical in orthographic view, but slightly skewed
in the perspective view.

.. plot::
    :include-source:
    :align: center

    import numpy as np
    import matplotlib.pyplot as plt
    from mpl_toolkits.mplot3d import Axes3D

    fig = plt.figure(figsize=(4, 6))
    ax1 = fig.add_subplot(2, 1, 1, projection='3d')
    ax1.set_proj_type('persp')
    ax1.set_title('Perspective (default)')

    ax2 = fig.add_subplot(2, 1, 2, projection='3d')
    ax2.set_proj_type('ortho')
    ax2.set_title('Orthographic')

    plt.show()


``voxels`` function for mplot3d
-------------------------------
:class:`~mpl_toolkits.mplot3d.axes3d.Axes3D` now has a
`~mpl_toolkits.mplot3d.axes3d.Axes3D.voxels` method, for visualizing boolean 3D
data. Uses could include plotting a sparse 3D heat map, or visualizing a
volumetric model.

.. figure:: /gallery/mplot3d/images/sphx_glr_voxels_numpy_logo_001.png
   :target: ../../gallery/mplot3d/voxels_numpy_logo.html
   :align: center
   :scale: 70

   Voxel Demo


Improvements
++++++++++++

CheckButtons widget ``get_status`` function
-------------------------------------------

A :func:`~matplotlib.widgets.CheckButtons.get_status` method has been added to
the :class:`matplotlib.widgets.CheckButtons` class. This ``get_status`` method
allows user to query the status (True/False) of all of the buttons in the
``CheckButtons`` object.


Add ``fill_bar`` argument to ``AnchoredSizeBar``
------------------------------------------------

The ``mpl_toolkits`` class
:class:`~mpl_toolkits.axes_grid1.anchored_artists.AnchoredSizeBar` now has an
additional ``fill_bar`` argument, which makes the size bar a solid rectangle
instead of just drawing the border of the rectangle. The default is ``None``,
and whether or not the bar will be filled by default depends on the value of
``size_vertical``. If ``size_vertical`` is nonzero, ``fill_bar`` will be set to
``True``. If ``size_vertical`` is zero then ``fill_bar`` will be set to
``False``. If you wish to override this default behavior, set ``fill_bar`` to
``True`` or ``False`` to unconditionally always or never use a filled patch
rectangle for the size bar.


.. plot::
    :include-source:
    :align: center

    import matplotlib.pyplot as plt
    from mpl_toolkits.axes_grid1.anchored_artists import AnchoredSizeBar

    fig, ax = plt.subplots(figsize=(3, 3))

    bar0 = AnchoredSizeBar(ax.transData, 0.3, 'unfilled', loc='lower left',
                           frameon=False, size_vertical=0.05, fill_bar=False)
    ax.add_artist(bar0)
    bar1 = AnchoredSizeBar(ax.transData, 0.3, 'filled', loc='lower right',
                           frameon=False, size_vertical=0.05, fill_bar=True)
    ax.add_artist(bar1)

    plt.show()

Annotation can use a default arrow style
----------------------------------------

Annotations now use the default arrow style when setting ``arrowprops={}``,
rather than no arrow (the new behavior actually matches the documentation).

Barbs and Quiver Support Dates
------------------------------

When using the :func:`~matplotlib.axes.Axes.quiver` and
:func:`~matplotlib.axes.Axes.barbs` plotting methods, it is now possible to
pass dates, just like for other methods like :func:`~matplotlib.axes.Axes.plot`.
This also allows these functions to handle values that need unit-conversion
applied.


Hexbin default line color
-------------------------

The default ``linecolor`` keyword argument for :func:`~matplotlib.axes.Axes.hexbin`
is now ``'face'``, and supplying ``'none'`` now prevents lines from being drawn
around the hexagons.

Figure.legend() can be called without arguments
-----------------------------------------------

Calling :meth:`.Figure.legend` can now be done with no arguments. In this case
a legend will be created that contains all the artists on all the axes
contained within the figure.

Multiple legend keys for legend entries
---------------------------------------

A legend entry can now contain more than one legend key. The extended
`~matplotlib.legend_handler.HandlerTuple` class now accepts two parameters:
``ndivide`` divides the legend area in the specified number of sections;
``pad`` changes the padding between the legend keys.

.. figure:: /gallery/text_labels_and_annotations/images/sphx_glr_legend_demo_004.png
   :target: ../../gallery/text_labels_and_annotations/legend_demo.html
   :align: center
   :scale: 70

   Multiple Legend Keys


New parameter *clear* for :func:`~matplotlib.pyplot.figure`
-----------------------------------------------------------

When the pyplot's function :func:`~matplotlib.pyplot.figure` is called
with a ``num`` parameter, a new window is only created if no existing
window with the same value exists. A new bool parameter *clear* was
added for explicitly clearing its existing contents. This is particularly
useful when utilized in interactive sessions. Since
:func:`~matplotlib.pyplot.subplots` also accepts keyword arguments
from :func:`~matplotlib.pyplot.figure`, it can also be used there::

   import matplotlib.pyplot as plt

   fig0 = plt.figure(num=1)
   fig0.suptitle("A fancy plot")
   print("fig0.texts: ", [t.get_text() for t in fig0.texts])

   fig1 = plt.figure(num=1, clear=False)  # do not clear contents of window
   fig1.text(0.5, 0.5, "Really fancy!")
   print("fig0 is fig1: ",  fig0 is fig1)
   print("fig1.texts: ", [t.get_text() for t in fig1.texts])

   fig2, ax2 = plt.subplots(2, 1, num=1, clear=True)  # clear contents
   print("fig0 is fig2: ",  fig0 is fig2)
   print("fig2.texts: ", [t.get_text() for t in fig2.texts])

   # The output:
   # fig0.texts:  ['A fancy plot']
   # fig0 is fig1:  True
   # fig1.texts:  ['A fancy plot', 'Really fancy!']
   # fig0 is fig2:  True
   # fig2.texts:  []


Specify minimum value to format as scalar for ``LogFormatterMathtext``
----------------------------------------------------------------------

:class:`~matplotlib.ticker.LogFormatterMathtext` now includes the
option to specify a minimum value exponent to format as a scalar
(i.e., 0.001 instead of 10\ :sup:`-3`).


New quiverkey angle keyword argument
------------------------------------

Plotting a :func:`~matplotlib.axes.Axes.quiverkey` now admits the
``angle`` keyword argument, which sets the angle at which to draw the
key arrow.

Colormap reversed method
------------------------

The methods :meth:`matplotlib.colors.LinearSegmentedColormap.reversed` and
:meth:`matplotlib.colors.ListedColormap.reversed` return a reversed
instance of the Colormap. This implements a way for any Colormap to be
reversed.


`.artist.setp` (and `.pyplot.setp`) accept a *file* argument
------------------------------------------------------------

The argument is keyword-only. It allows an output file other than
`sys.stdout` to be specified. It works exactly like the *file* argument
to `print`.


``streamplot`` streamline generation more configurable
------------------------------------------------------

The starting point, direction, and length of the stream lines can now
be configured.  This allows to follow the vector field for a longer
time and can enhance the visibility of the flow pattern in some use
cases.


``Axis.set_tick_params`` now responds to *rotation*
---------------------------------------------------

Bulk setting of tick label rotation is now possible via
:func:`~matplotlib.axes.Axes.tick_params` using the *rotation*
keyword.

::

    ax.tick_params(which='both', rotation=90)


Ticklabels are turned off instead of being invisible
----------------------------------------------------

Internally, the `.Tick`'s ``matplotlib.axis.Tick.label1On`` attribute
is now used to hide tick labels instead of setting the visibility on the tick
label objects.
This improves overall performance and fixes some issues.
As a consequence, in case those labels ought to be shown,
:func:`~matplotlib.axes.Axes.tick_params`
needs to be used, e.g.

::

    ax.tick_params(labelbottom=True)


Shading in 3D bar plots
-----------------------

A new ``shade`` parameter has been added the 3D
`~mpl_toolkits.mplot3d.axes3d.Axes3D.bar` plotting method. The default behavior
remains to shade the bars, but now users have the option of setting ``shade``
to ``False``.


.. plot::
    :include-source:
    :align: center

    import numpy as np
    import matplotlib.pyplot as plt
    from mpl_toolkits.mplot3d import Axes3D

    x = np.arange(2)
    y = np.arange(3)
    x2d, y2d = np.meshgrid(x, y)
    x, y = x2d.ravel(), y2d.ravel()
    z = np.zeros_like(x)
    dz = x + y

    fig = plt.figure(figsize=(4, 6))
    ax1 = fig.add_subplot(2, 1, 1, projection='3d')
    ax1.bar3d(x, y, z, 1, 1, dz, shade=True)
    ax1.set_title('Shading On')

    ax2 = fig.add_subplot(2, 1, 2, projection='3d')
    ax2.bar3d(x, y, z, 1, 1, dz, shade=False)
    ax2.set_title('Shading Off')

    plt.show()


New ``which`` Parameter for ``autofmt_xdate``
---------------------------------------------

A ``which`` parameter now exists for the method
:func:`~matplotlib.figure.Figure.autofmt_xdate`. This allows a user to format
``major``, ``minor`` or ``both`` tick labels selectively. The
default behavior will rotate and align the ``major`` tick labels.


::

    fig.autofmt_xdate(bottom=0.2, rotation=30, ha='right', which='minor')


New Figure Parameter for ``subplot2grid``
-----------------------------------------

A ``fig`` parameter now exists for the function
:func:`~matplotlib.pyplot.subplot2grid`. This allows a user to specify the
figure where the subplots will be created. If ``fig`` is ``None`` (default)
then the method will use the current figure retrieved by
:func:`~matplotlib.pyplot.gcf`.


::

    subplot2grid(shape, loc, rowspan=1, colspan=1, fig=myfig)


Interpolation in ``fill_betweenx``
----------------------------------

The ``interpolate`` parameter now exists for the method
:func:`~matplotlib.axes.Axes.fill_betweenx`. This allows a user to
interpolate the data and fill the areas in the crossover points,
similarly to :func:`~matplotlib.axes.Axes.fill_between`.


New keyword argument ``sep`` for EngFormatter
---------------------------------------------

A new ``sep`` keyword argument has been added to
:class:`~matplotlib.ticker.EngFormatter` and provides a means to
define the string that will be used between the value and its
unit. The default string is ``" "``, which preserves the former
behavior. Additionally, the separator is now present between the value
and its unit even in the absence of SI prefix.  There was formerly a
bug that was causing strings like ``"3.14V"`` to be returned instead of
the expected ``"3.14 V"`` (with the default behavior).

Extend ``MATPLOTLIBRC`` behavior
--------------------------------

The environmental variable can now specify the full file path or the
path to a directory containing a :file:`matplotlibrc` file.


``density`` kwarg to hist
-------------------------

The :meth:`~matplotlib.axes.Axes.hist` method now prefers ``density``
to ``normed`` to control if the histogram should be normalized,
following a change upstream to NumPy.  This will reduce confusion as
the behavior has always been that the integral of the histogram is 1
(rather than sum or maximum value).



Internals
+++++++++

New TransformedPatchPath caching object
---------------------------------------

A newly added :class:`~matplotlib.transforms.TransformedPatchPath` provides a
means to transform a :class:`~matplotlib.patches.Patch` into a
:class:`~matplotlib.path.Path` via a :class:`~matplotlib.transforms.Transform`
while caching the resulting path. If neither the patch nor the transform have
changed, a cached copy of the path is returned.

This class differs from the older
:class:`~matplotlib.transforms.TransformedPath` in that it is able to refresh
itself based on the underlying patch while the older class uses an immutable
path.


Abstract base class for movie writers
-------------------------------------

The new :class:`~matplotlib.animation.AbstractMovieWriter` class defines
the API required by a class that is to be used as the ``writer`` in the
:meth:`matplotlib.animation.Animation.save` method. The existing
:class:`~matplotlib.animation.MovieWriter` class now derives from the new
abstract base class.


Stricter validation of line style rcParams
------------------------------------------

The validation of rcParams that are related to line styles
(``lines.linestyle``, ``boxplot.*.linestyle``, ``grid.linestyle`` and
``contour.negative_linestyle``) now effectively checks that the values
are valid line styles. Strings like ``'dashed'`` or ``'--'`` are
accepted, as well as even-length sequences of on-off ink like ``[1,
1.65]``. In this latter case, the offset value is handled internally
and should *not* be provided by the user.


The new validation scheme replaces the former one used for the
``contour.negative_linestyle`` rcParams, that was limited to
``'solid'`` and ``'dashed'`` line styles.

The validation is case-insensitive.  The following are now valid:

::

    grid.linestyle             : (1, 3)   # loosely dotted grid lines
    contour.negative_linestyle : dashdot  # previously only solid or dashed


pytest
------

The automated tests have been switched from nose_ to pytest_.

.. _nose: https://nose.readthedocs.io/
.. _pytest: https://pytest.org

Performance
+++++++++++

Path simplification updates
---------------------------

Line simplification controlled by the ``path.simplify`` and
``path.simplify_threshold`` parameters has been improved. You should
notice better rendering performance when plotting large amounts of
data (as long as the above parameters are set accordingly). Only the
line segment portion of paths will be simplified -- if you are also
drawing markers and experiencing problems with rendering speed, you
should consider using the ``markevery`` option to `~matplotlib.axes.Axes.plot`.
See the :ref:`performance` section in the usage tutorial for more
information.

The simplification works by iteratively merging line segments
into a single vector until the next line segment's perpendicular
distance to the vector (measured in display-coordinate space)
is greater than the ``path.simplify_threshold`` parameter. Thus, higher
values of ``path.simplify_threshold`` result in quicker rendering times.
If you are plotting just to explore data and not for publication quality,
pixel perfect plots, then a value of ``1.0`` can be safely used. If you
want to make sure your plot reflects your data *exactly*, then you should
set ``path.simplify`` to false and/or ``path.simplify_threshold`` to ``0``.
Matplotlib currently defaults to a conservative value of ``1/9``, smaller
values are unlikely to cause any visible differences in your plots.

Implement intersects_bbox in c++
--------------------------------

:meth:`~matplotlib.path.Path.intersects_bbox` has been implemented in
c++ which improves the performance of automatically placing the legend.
.. _github-stats-3-5-0:

GitHub statistics for 3.5.0 (Nov 15, 2021)
==========================================

GitHub statistics for 2021/03/26 (tag: v3.4.0) - 2021/11/15

These lists are automatically generated, and may be incomplete or contain duplicates.

We closed 187 issues and merged 939 pull requests.
The full list can be seen `on GitHub <https://github.com/matplotlib/matplotlib/milestone/59?closed=1>`__

The following 144 authors contributed 3406 commits.

* Aaron Rogers
* Abhinav Sagar
* Adrian Price-Whelan
* Adrien F. Vincent
* ain-soph
* Aitik Gupta
* Akiomi Kamakura
* AkM-2018
* Andrea PIERRÉ
* andthum
* Antony Lee
* Antti Soininen
* apodemus
* astromancer
* Bruno Beltran
* Carlos Cerqueira
* Casper da Costa-Luis
* ceelo777
* Christian Baumann
* dan
* Dan Zimmerman
* David Matos
* David Poznik
* David Stansby
* dependabot[bot]
* Diego Leal Petrola
* Dmitriy Fishman
* Ellert van der Velden
* Elliott Sales de Andrade
* Engjell Avdiu
* Eric Firing
* Eric Larson
* Eric Prestat
* Ewan Sutherland
* Felix Nößler
* Fernando
* fourpoints
* Frank Sauerburger
* Gleb Fedorov
* Greg Lucas
* hannah
* Hannes Breytenbach
* Hans Meine
* Harshal Prakash Patankar
* harupy
* Harutaka Kawamura
* Hildo Guillardi Júnior
* Holtz Yan
* Hood
* Ian Hunt-Isaak
* Ian Thomas
* ianhi
* Illviljan
* ImportanceOfBeingErnest
* Isha Mehta
* iury simoes-sousa
* Jake Bowhay
* Jakub Klus
* Jan-Hendrik Müller
* Janakarajan Natarajan
* Jann Paul Mattern
* Jash Shah
* Jay Joshi
* jayjoshi112711
* jeffreypaul15
* Jerome F. Villegas
* Jerome Villegas
* Jesus Briales
* Jody Klymak
* Jonathan Yong
* Joschua Conrad
* Joschua-Conrad
* Jouni K. Seppänen
* K-Monty
* katrielester
* kdpenner
* Kent
* Kent Gauen
* kentcr
* kir0ul
* kislovskiy
* KIU Shueng Chuan
* KM Goh
* Konstantin Popov
* kyrogon
* Leeh Peter
* Leo Singer
* lgfunderburk
* Liam Toney
* luz paz
* luzpaz
* Madhav Humagain
* MalikIdreesHasa
* Marat Kopytjuk
* Marco Rigobello
* Marco Salathe
* Markus Wesslén
* martinRenou
* Matthias Bussonnier
* MeeseeksMachine
* Michał Górny
* Mihai Anton
* Navid C. Constantinou
* Nico Schlömer
* Phil Nagel
* Philip Schiff
* Philipp Nagel
* pwohlhart
* Péter Leéh
* Quentin Peter
* Ren Pang
* rgbmrc
* Richard Barnes
* richardsheridan
* Rike-Benjamin Schuppner
* Roberto Toro
* Ruth Comer
* ryahern
* Ryan May
* Sam Van Kooten
* sandipanpanda
* Simon Hoxbro
* Slava Ostroukh
* Stefan Appelhoff
* Stefanie Molin
* takimata
* tdpetrou
* theOehrly
* Thomas A Caswell
* Tim Hoffmann
* tohc1
* Tom Charrett
* Tom Neep
* Tomas Hrnciar
* Tortar
* Tranquilled
* Vagrant Cascadian
* Viacheslav Ostroukh
* Vishnu V K
* Xianxiang Li
* Yannic Schroeder
* Yo Yehudi
* Zexi
* znstrider

GitHub issues and pull requests:

Pull Requests (939):

* :ghpull:`21645`: Backport PR #21628 on branch v3.5.x (Fix METH_VARARGS method signatures )
* :ghpull:`21644`: Backport PR #21640 on branch v3.5.x (DOC: remove sample_plots from tutorials)
* :ghpull:`21628`: Fix METH_VARARGS method signatures
* :ghpull:`21640`: DOC: remove sample_plots from tutorials
* :ghpull:`21636`: Backport PR #21604 on branch v3.5.x (Fix centre square rectangle selector part 1)
* :ghpull:`21604`: Fix centre square rectangle selector part 1
* :ghpull:`21633`: Backport PR #21501 on branch v3.5.x (Refix for pyparsing compat.)
* :ghpull:`21606`: BLD: limit support of pyparsing to <3
* :ghpull:`21501`: Refix for pyparsing compat.
* :ghpull:`21624`: Backport PR #21621 on branch v3.5.x (Fix GhostScript error handling types)
* :ghpull:`21625`: Backport PR #21568 on branch v3.5.x (Enhancing support for tex and datetimes)
* :ghpull:`21568`: Enhancing support for tex and datetimes
* :ghpull:`21621`: Fix GhostScript error handling types
* :ghpull:`21623`: Backport PR #21619 on branch v3.5.x (Revert "Pin sphinx to fix sphinx-gallery")
* :ghpull:`21619`: Revert "Pin sphinx to fix sphinx-gallery"
* :ghpull:`21618`: Backport PR #21617 on branch v3.5.x (FIX: Make sure we do not over-write eps short cuts)
* :ghpull:`21622`: Backport PR #21350 on branch v3.5.x (Remove plot_gallery setting from conf.py)
* :ghpull:`21617`: FIX: Make sure we do not over-write eps short cuts
* :ghpull:`21616`: Backport PR #21613 on branch v3.5.x (SEC/DOC update supported versions)
* :ghpull:`21615`: Backport PR #21607 on branch v3.5.x (DOC: link to cheatsheets site, not github repo)
* :ghpull:`21614`: Backport PR #21609 on branch v3.5.x (Fix documentation link with renaming ``voxels`` to ``voxelarray``)
* :ghpull:`21613`: SEC/DOC update supported versions
* :ghpull:`21607`: DOC: link to cheatsheets site, not github repo
* :ghpull:`21609`: Fix documentation link with renaming ``voxels`` to ``voxelarray``
* :ghpull:`21605`: Backport PR #21317 on branch v3.5.x (Move label hiding rectilinear-only check into _label_outer_{x,y}axis.)
* :ghpull:`21317`: Move label hiding rectilinear-only check into _label_outer_{x,y}axis.
* :ghpull:`21602`: Backport PR #21586 on branch v3.5.x (Defer enforcement of hatch validation)
* :ghpull:`21601`: Backport PR #21530 on branch v3.5.x (Fix interrupting GTK on plain Python)
* :ghpull:`21603`: Backport PR #21596 on branch v3.5.x (Pin sphinx to fix sphinx-gallery)
* :ghpull:`21586`: Defer enforcement of hatch validation
* :ghpull:`21530`: Fix interrupting GTK on plain Python
* :ghpull:`21397`: Support for pre 2.7.1 freetype savannah versions
* :ghpull:`21599`: Backport PR #21592 on branch v3.5.x ([BUG in 3.5.0rc1] - Anatomy of a Figure has the legend in the wrong spot)
* :ghpull:`21587`: Backport PR #21581 on branch v3.5.x (Fix RangeSlider.reset)
* :ghpull:`21592`: [BUG in 3.5.0rc1] - Anatomy of a Figure has the legend in the wrong spot
* :ghpull:`21596`: Pin sphinx to fix sphinx-gallery
* :ghpull:`21577`: Backport PR #21527 on branch v3.5.x (Add more 3.5 release notes)
* :ghpull:`21527`: Add more 3.5 release notes
* :ghpull:`21573`: Backport PR #21570 on branch v3.5.x (Raise correct exception out of Spines.__getattr__)
* :ghpull:`21563`: Backport PR #21559 on branch v3.5.x (Fix eventplot units)
* :ghpull:`21560`: Backport PR #21553 on branch v3.5.x (Fix check for manager presence in blocking_input.)
* :ghpull:`21561`: Backport PR #21555 on branch v3.5.x (MNT: reject more possibly unsafe strings in validate_cycler)
* :ghpull:`21555`: MNT: reject more possibly unsafe strings in validate_cycler
* :ghpull:`21553`: Fix check for manager presence in blocking_input.
* :ghpull:`21559`: Fix eventplot units
* :ghpull:`21543`: Backport PR #21443 on branch v3.5.x (FIX: re-instate ability to have position in axes)
* :ghpull:`21550`: Ignore transOffset if no offsets passed to Collection
* :ghpull:`21443`: FIX: re-instate ability to have position in axes
* :ghpull:`21531`: Backport PR #21491 on branch v3.5.x (Relocate inheritance diagram to the top of the document)
* :ghpull:`21491`: Relocate inheritance diagram to the top of the document
* :ghpull:`21504`: Backport PR #21481 on branch v3.5.x (FIX: spanning subfigures)
* :ghpull:`21481`: FIX: spanning subfigures
* :ghpull:`21483`: Backport PR #21387 on branch v3.5.x (Fix path simplification of closed loops)
* :ghpull:`21486`: Backport PR #21478 on branch v3.5.x (Fix GTK4 embedding example)
* :ghpull:`21497`: Backport PR #21484 on branch v3.5.x (Replacement for imread should return an array)
* :ghpull:`21484`: Replacement for imread should return an array
* :ghpull:`21495`: Backport PR #21492 on branch v3.5.x (added parameter documentation for MultiCursor)
* :ghpull:`21493`: Backport PR #21488 on branch v3.5.x (Added to contour docs)
* :ghpull:`21492`: added parameter documentation for MultiCursor
* :ghpull:`21488`: Added to contour docs
* :ghpull:`21478`: Fix GTK4 embedding example
* :ghpull:`21387`: Fix path simplification of closed loops
* :ghpull:`21479`: Backport PR #21472 on branch v3.5.x (Clarify set_parse_math documentation.)
* :ghpull:`21472`: Clarify set_parse_math documentation.
* :ghpull:`21471`: Backport PR #21470 on branch v3.5.x (Hide fully transparent latex text in PS output)
* :ghpull:`21470`: Hide fully transparent latex text in PS output
* :ghpull:`21469`: Backport PR #21468 on branch v3.5.x (Fix some typos in examples)
* :ghpull:`21468`: Fix some typos in examples
* :ghpull:`21461`: Backport #21429 from jklymak/doc-use-mpl-sphinx
* :ghpull:`21464`: Backport PR #21460 on branch v3.5.x (Clip slider init marker to slider track.)
* :ghpull:`21460`: Clip slider init marker to slider track.
* :ghpull:`21458`: Backport:  #21429 from jklymak/doc-use-mpl-sphinx
* :ghpull:`21454`: Fix error with pyparsing 3 for 3.5.x
* :ghpull:`21459`: Backport PR #21423 on branch v3.5.x (Change CircleCI job title to "Rendered docs")
* :ghpull:`21423`: Change CircleCI job title to "Rendered docs"
* :ghpull:`21457`: Backport PR #21455 on branch v3.5.x (Hide note linking to the download section at the bottom of galleries)
* :ghpull:`21456`: Backport PR #21453 on branch v3.5.x (Cleanup index.rst sectioning)
* :ghpull:`21455`: Hide note linking to the download section at the bottom of galleries
* :ghpull:`21453`: Cleanup index.rst sectioning
* :ghpull:`21224`: DOC: Nav-bar: Add icon linking to contents
* :ghpull:`21451`: Backport PR #21445 on branch v3.5.x (Mnt pin pyparsing)
* :ghpull:`21429`: DOC: use mpl-sphinx-theme for navbar, social, logo
* :ghpull:`21450`: Backport PR #21449 on branch v3.5.x (Less verbose install info on index page)
* :ghpull:`21449`: Less verbose install info on index page
* :ghpull:`21446`: Also exclude pyparsing 3.0.0 in setup.py.
* :ghpull:`21445`: Mnt pin pyparsing
* :ghpull:`21439`: Backport PR #21420 on branch v3.5.x (Enable Python 3.10 wheel building on all systems)
* :ghpull:`21438`: Backport PR #21427 on branch v3.5.x (Update docstrings of get_{view,data}_interval.)
* :ghpull:`21437`: Backport PR #21435 on branch v3.5.x (DOC: Fix selection of parameter names in HTML theme)
* :ghpull:`21420`: Enable Python 3.10 wheel building on all systems
* :ghpull:`21427`: Update docstrings of get_{view,data}_interval.
* :ghpull:`21435`: DOC: Fix selection of parameter names in HTML theme
* :ghpull:`21428`: Backport PR #21422 on branch v3.5.x (More doc reorganization)
* :ghpull:`21422`: More doc reorganization
* :ghpull:`21421`: Backport PR #21411 on branch v3.5.x (Document webagg in docs.)
* :ghpull:`21419`: Backport PR #21251 on branch v3.5.x (DOC: more site re-org)
* :ghpull:`21411`: Document webagg in docs.
* :ghpull:`21251`: DOC: more site re-org
* :ghpull:`21416`: Backport PR #21326 on branch v3.5.x (Add ability to scale BBox with just x or y values)
* :ghpull:`21418`: Backport PR #21414 on branch v3.5.x (Support pathological tmpdirs in TexManager.)
* :ghpull:`21410`: Backport PR #20591 on branch v3.5.x (Webagg backend: get rid of tornado)
* :ghpull:`21414`: Support pathological tmpdirs in TexManager.
* :ghpull:`21326`: Add ability to scale BBox with just x or y values
* :ghpull:`20591`: Webagg backend: get rid of tornado
* :ghpull:`21406`: Backport PR #21212 on branch v3.5.x (Fix set_size_inches on HiDPI and also GTK4)
* :ghpull:`21405`: Backport PR #21365 on branch v3.5.x (Convert macosx backend to use device_pixel_ratio)
* :ghpull:`18274`: Improve initial macosx device scale
* :ghpull:`21212`: Fix set_size_inches on HiDPI and also GTK4
* :ghpull:`21365`: Convert macosx backend to use device_pixel_ratio
* :ghpull:`21372`: Backport PR #20708 on branch v3.5.x (Describe possible need for loading the 'lmodern' package when using PGF files)
* :ghpull:`20708`: Describe possible need for loading the 'lmodern' package when using PGF files
* :ghpull:`21359`: Add GHA testing whether files were added and deleted in the same PR.
* :ghpull:`21360`: Backport PR #21335 on branch v3.5.x (DOC: move usage tutorial info to Users guide rst)
* :ghpull:`21363`: Backport PR #21287 on branch v3.5.x (Inherit more docstrings.)
* :ghpull:`21361`: Fix flake8 from #21335
* :ghpull:`21287`: Inherit more docstrings.
* :ghpull:`21335`: DOC: move usage tutorial info to Users guide rst
* :ghpull:`21358`: Backport PR #21357 on branch v3.5.x (DOC: remove test from README.rst)
* :ghpull:`21357`: DOC: remove test from README.rst
* :ghpull:`21350`: Remove plot_gallery setting from conf.py
* :ghpull:`21340`: Backport PR #21332 on branch v3.5.x (Fix default value for ``shading`` in``pyplot.pcolormesh`` docstring)
* :ghpull:`21332`: Fix default value for ``shading`` in``pyplot.pcolormesh`` docstring
* :ghpull:`21334`: Backport PR #21330 on branch v3.5.x (Fix medical image caption in tutorial)
* :ghpull:`21329`: Backport PR #21321 on branch v3.5.x (DOC Update description of ax.contour method, resolves #21310)
* :ghpull:`21330`: Fix medical image caption in tutorial
* :ghpull:`21321`: DOC Update description of ax.contour method, resolves #21310
* :ghpull:`21327`: Backport PR #21313 on branch v3.5.x (DOC: Minimal getting started page)
* :ghpull:`21313`: DOC: Minimal getting started page
* :ghpull:`21316`: Backport PR #21312 on branch v3.5.x (Update link to Agg website)
* :ghpull:`21312`: Update link to Agg website
* :ghpull:`21308`: Backport PR #21307 on branch v3.5.x (Use in-tree builds for PyPy wheels)
* :ghpull:`21307`: Use in-tree builds for PyPy wheels
* :ghpull:`21306`: Backport PR #21303 on branch v3.5.x (Pin macOS to 10.15 for wheels)
* :ghpull:`21305`: Backport PR #21286 on branch v3.5.x (Clarify FigureBase.tight_bbox as different from all other artists.)
* :ghpull:`21286`: Clarify FigureBase.tight_bbox as different from all other artists.
* :ghpull:`21302`: Backport PR #21291 on branch v3.5.x (DOC: Bump to the sphinx-gallery release)
* :ghpull:`21304`: Backport PR #21294 on branch v3.5.x (Disable blitting on GTK4 backends)
* :ghpull:`21294`: Disable blitting on GTK4 backends
* :ghpull:`21277`: Backport PR #21263 on branch v3.5.x (Ensure internal FreeType matches Python compile)
* :ghpull:`21291`: DOC: Bump to the sphinx-gallery release
* :ghpull:`21296`: Backport PR #21288 on branch v3.5.x (Allow macosx thread safety test on macOS11)
* :ghpull:`21297`: Backport PR #21293 on branch v3.5.x (Fix snap argument to pcolormesh)
* :ghpull:`21293`: Fix snap argument to pcolormesh
* :ghpull:`21288`: Allow macosx thread safety test on macOS11
* :ghpull:`21279`: Fix freetype wheel building
* :ghpull:`21292`: Backport PR #21290 on branch v3.5.x (DOC: Fix some lists in animation examples)
* :ghpull:`21290`: DOC: Fix some lists in animation examples
* :ghpull:`21284`: Backport PR #21282 on branch v3.5.x (Fix incorrect markup in example.)
* :ghpull:`21282`: Fix incorrect markup in example.
* :ghpull:`21281`: Backport PR #21275 on branch v3.5.x (Fix format_cursor_data for values close to float resolution.)
* :ghpull:`21275`: Fix format_cursor_data for values close to float resolution.
* :ghpull:`21263`: Ensure internal FreeType matches Python compile
* :ghpull:`21273`: Backport PR #21269 on branch v3.5.x (Don't use pixelDelta() on X11.)
* :ghpull:`21269`: Don't use pixelDelta() on X11.
* :ghpull:`21268`: Backport PR #21236: DOC: Update interactive colormap example
* :ghpull:`21265`: Backport PR #21264 on branch v3.5.x (DOC: Fix footnote that breaks PDF builds)
* :ghpull:`21264`: DOC: Fix footnote that breaks PDF builds
* :ghpull:`21236`: DOC: Update interactive colormap example
* :ghpull:`21262`: Backport PR #21250 on branch v3.5.x (DOC: Remove examples/README)
* :ghpull:`21260`: DOC: Fix source links to prereleases
* :ghpull:`21261`: Backport PR #21240: DOC: Fix source links and flake8 cleanup
* :ghpull:`21248`: Backport PR #21247 on branch v3.5.x (Fix release notes typos.)
* :ghpull:`21254`: Backport PR #21249 on branch v3.5.x (Fix some syntax highlights in coding and contributing guide.)
* :ghpull:`21250`: DOC: Remove examples/README
* :ghpull:`21249`: Fix some syntax highlights in coding and contributing guide.
* :ghpull:`20652`: Fixed Comments and Clarification
* :ghpull:`21240`: DOC: Fix source links and flake8 cleanup
* :ghpull:`21247`: Fix release notes typos.
* :ghpull:`21244`: Backport PR #20907 on branch v3.5.x (Move sigint tests into subprocesses)
* :ghpull:`21245`: Backport PR #21226 on branch v3.5.x (DOC: Adapt some colors in examples)
* :ghpull:`21226`: DOC: Adapt some colors in examples
* :ghpull:`20907`: Move sigint tests into subprocesses
* :ghpull:`21241`: Backport PR #21237 on branch v3.5.x (DOC: Add fill_between to plot_types)
* :ghpull:`21237`: DOC: Add fill_between to plot_types
* :ghpull:`21235`: Backport PR #20852 on branch v3.5.x (Prepare docs for 3.5)
* :ghpull:`20852`: Prepare docs for 3.5
* :ghpull:`21234`: Backport PR #21221 on branch v3.5.x (Updates to plot types)
* :ghpull:`21232`: Backport PR #21228 on branch v3.5.x (Small doc nits.)
* :ghpull:`21233`: Backport PR #21229 on branch v3.5.x (Shorten PdfPages FAQ entry.)
* :ghpull:`21221`: Updates to plot types
* :ghpull:`21229`: Shorten PdfPages FAQ entry.
* :ghpull:`21228`: Small doc nits.
* :ghpull:`21227`: Backport PR #20730 on branch v3.5.x (DOC: Add a release mode tag)
* :ghpull:`20730`: DOC: Add a release mode tag
* :ghpull:`21225`: Backport PR #21223 on branch v3.5.x (Fix nav link for "Usage guide" and remove release/date info from that page)
* :ghpull:`21223`: Fix nav link for "Usage guide" and remove release/date info from that page
* :ghpull:`21222`: Backport PR #21211 on branch v3.5.x (updated resources)
* :ghpull:`21211`: updated resources
* :ghpull:`21219`: Backport PR #21216 on branch v3.5.x (Use correct confidence interval)
* :ghpull:`21216`: Use correct confidence interval
* :ghpull:`21217`: Backport PR #21215 on branch v3.5.x (Fix more edge cases in psd, csd.)
* :ghpull:`21215`: Fix more edge cases in psd, csd.
* :ghpull:`21210`: Backport PR #21191 on branch v3.5.x (Fix very-edge case in csd(), plus small additional cleanups.)
* :ghpull:`21209`: Backport PR #21188 on branch v3.5.x (Rework headers for individual backend docs.)
* :ghpull:`21191`: Fix very-edge case in csd(), plus small additional cleanups.
* :ghpull:`21188`: Rework headers for individual backend docs.
* :ghpull:`21208`: Backport PR #21203 on branch v3.5.x (Rework plot types quiver)
* :ghpull:`21203`: Rework plot types quiver
* :ghpull:`21207`: Backport PR #21198 on branch v3.5.x (Update coding_guide.rst)
* :ghpull:`21206`: Backport PR #21201 on branch v3.5.x (Fix signature of barh() in plot types)
* :ghpull:`21204`: Backport PR #21193 on branch v3.5.x (Update contributing guide.)
* :ghpull:`21198`: Update coding_guide.rst
* :ghpull:`21201`: Fix signature of barh() in plot types
* :ghpull:`21200`: Backport PR #21196 on branch v3.5.x (Update fonts.rst)
* :ghpull:`21199`: Backport PR #21026 on branch v3.5.x (Place 3D contourf patches between levels)
* :ghpull:`21197`: Backport PR #21186 on branch v3.5.x (Fixed typos using codespell. (previous pull request was told not to change the agg files) )
* :ghpull:`21196`: Update fonts.rst
* :ghpull:`21026`: Place 3D contourf patches between levels
* :ghpull:`21186`: Fixed typos using codespell. (previous pull request was told not to change the agg files)
* :ghpull:`21195`: Backport PR #21189 on branch v3.5.x (Small doc fixes.)
* :ghpull:`21194`: Backport PR #21192 on branch v3.5.x (Discourage making style changes to extern/.)
* :ghpull:`21189`: Small doc fixes.
* :ghpull:`21192`: Discourage making style changes to extern/.
* :ghpull:`21193`: Update contributing guide.
* :ghpull:`21184`: Backport PR #21172 on branch v3.5.x (skip QImage leak workaround for PySide2 >= 5.12)
* :ghpull:`21183`: Backport PR #21081 on branch v3.5.x (Improve docs for to_jshtml())
* :ghpull:`21172`: skip QImage leak workaround for PySide2 >= 5.12
* :ghpull:`21181`: Backport PR #21166 on branch v3.5.x (Cleanup contour(f)3d examples.)
* :ghpull:`21182`: Backport PR #21180 on branch v3.5.x (Remove uninformative ``.. figure::`` titles in docs.)
* :ghpull:`21081`: Improve docs for to_jshtml()
* :ghpull:`21180`: Remove uninformative ``.. figure::`` titles in docs.
* :ghpull:`21166`: Cleanup contour(f)3d examples.
* :ghpull:`21174`: Backport PR #19343 on branch v3.5.x (Enh improve agg chunks error)
* :ghpull:`19343`: Enh improve agg chunks error
* :ghpull:`21171`: Backport PR #20951 on branch v3.5.x ([ENH]: data kwarg support for mplot3d #20912)
* :ghpull:`21169`: Backport PR #21126 on branch v3.5.x (Deprecate passing formatting parameters positionally to stem())
* :ghpull:`21126`: Deprecate passing formatting parameters positionally to stem()
* :ghpull:`21164`: Backport PR #21039 on branch v3.5.x (Fix ``hexbin`` marginals and log scaling)
* :ghpull:`21039`: Fix ``hexbin`` marginals and log scaling
* :ghpull:`21160`: Backport PR #21136 on branch v3.5.x (More (minor) plot types gallery fixes.)
* :ghpull:`21136`: More (minor) plot types gallery fixes.
* :ghpull:`21158`: Backport PR #21140 on branch v3.5.x (Docstring cleanups around DATA_PARAMETER_PLACEHOLDER.)
* :ghpull:`21159`: Backport PR #21127 on branch v3.5.x (Simplify argument parsing in stem().)
* :ghpull:`21157`: Backport PR #21153 on branch v3.5.x (Improve curve_error_band example.)
* :ghpull:`21156`: Backport PR #21154 on branch v3.5.x (Increase marker size in double_pendulum example.)
* :ghpull:`21127`: Simplify argument parsing in stem().
* :ghpull:`21140`: Docstring cleanups around DATA_PARAMETER_PLACEHOLDER.
* :ghpull:`21153`: Improve curve_error_band example.
* :ghpull:`21154`: Increase marker size in double_pendulum example.
* :ghpull:`21149`: Backport PR #21146 on branch v3.5.x (Fix clim handling for pcolor{,mesh}.)
* :ghpull:`21151`: Backport PR #21141 on branch v3.5.x (Fix DATA_PARAMETER_PLACEHOLDER interpolation for quiver&contour{,f}.)
* :ghpull:`21150`: Backport PR #21145 on branch v3.5.x (Fix format_cursor_data with nans.)
* :ghpull:`21141`: Fix DATA_PARAMETER_PLACEHOLDER interpolation for quiver&contour{,f}.
* :ghpull:`21145`: Fix format_cursor_data with nans.
* :ghpull:`21146`: Fix clim handling for pcolor{,mesh}.
* :ghpull:`21148`: Backport PR #21142 on branch v3.5.x (Mac qt ctrl)
* :ghpull:`21142`: Mac qt ctrl
* :ghpull:`21144`: Backport PR #21122 on branch v3.5.x (CTRL does not fix aspect in zoom-to-rect mode.)
* :ghpull:`21143`: Backport PR #19515 on branch v3.5.x (Colorbar axis zoom and pan)
* :ghpull:`21122`: CTRL does not fix aspect in zoom-to-rect mode.
* :ghpull:`19515`: Colorbar axis zoom and pan
* :ghpull:`21138`: Backport PR #21131 on branch v3.5.x (Fix polar() regression on second call failure)
* :ghpull:`21134`: Backport PR #21124 on branch v3.5.x (Tweak streamplot plot_types example.)
* :ghpull:`21133`: Backport PR #21114 on branch v3.5.x (Add contour and tricontour plots to plot types)
* :ghpull:`21132`: Backport PR #21093 on branch v3.5.x (DOC: clarify what we mean by object oriented in pyplot api)
* :ghpull:`21124`: Tweak streamplot plot_types example.
* :ghpull:`21114`: Add contour and tricontour plots to plot types
* :ghpull:`21130`: Backport PR #21129 on branch v3.5.x (Fix decenter of image in gallery thumbnails)
* :ghpull:`21093`: DOC: clarify what we mean by object oriented in pyplot api
* :ghpull:`21129`: Fix decenter of image in gallery thumbnails
* :ghpull:`21125`: Backport PR #21086 on branch v3.5.x (Capitalization fixes in example section titles.)
* :ghpull:`21128`: Backport PR #21123 on branch v3.5.x (Simplify/uniformize sample data setup in plot_types examples.)
* :ghpull:`21123`: Simplify/uniformize sample data setup in plot_types examples.
* :ghpull:`21121`: Backport PR #21111 on branch v3.5.x (Rename section title Gallery -> Examples)
* :ghpull:`21086`: Capitalization fixes in example section titles.
* :ghpull:`21120`: Backport PR #21115 on branch v3.5.x (Improve errorbar plot types example)
* :ghpull:`21119`: Backport PR #21116 on branch v3.5.x (Adapt css so that galleries have four columns)
* :ghpull:`21116`: Adapt css so that galleries have four columns
* :ghpull:`21118`: Backport PR #21112 on branch v3.5.x (Fix make_norm_from_scale ``__name__`` when used inline.)
* :ghpull:`21111`: Rename section title Gallery -> Examples
* :ghpull:`21112`: Fix make_norm_from_scale ``__name__`` when used inline.
* :ghpull:`20951`: [ENH]: data kwarg support for mplot3d #20912
* :ghpull:`21115`: Improve errorbar plot types example
* :ghpull:`21109`: Backport PR #21104 on branch v3.5.x (Remove the index and module index pages)
* :ghpull:`21104`: Remove the index and module index pages
* :ghpull:`21102`: Backport PR #21100 on branch v3.5.x (Cleanup demo_tight_layout.)
* :ghpull:`21106`: Backport PR #21034 on branch v3.5.x (Make rcParams["backend"] backend fallback check rcParams identity first.)
* :ghpull:`21105`: Backport PR #21083 on branch v3.5.x (Fix capitalizations)
* :ghpull:`21103`: Backport PR #21089 on branch v3.5.x (Update sticky_edges docstring to new behavior.)
* :ghpull:`21034`: Make rcParams["backend"] backend fallback check rcParams identity first.
* :ghpull:`21083`: Fix capitalizations
* :ghpull:`21099`: Backport PR #20935 on branch v3.5.x (Add ColormapsRegistry as experimental and add it to pyplot)
* :ghpull:`21100`: Cleanup demo_tight_layout.
* :ghpull:`21098`: Backport PR #20903 on branch v3.5.x (Use release-branch version scheme )
* :ghpull:`20935`: Add ColormapsRegistry as experimental and add it to pyplot
* :ghpull:`20903`: Use release-branch version scheme
* :ghpull:`21089`: Update sticky_edges docstring to new behavior.
* :ghpull:`21084`: Backport PR #20988 on branch v3.5.x (Add HiDPI support in GTK.)
* :ghpull:`21085`: Backport PR #21082 on branch v3.5.x (Fix layout of sidebar entries)
* :ghpull:`20345`: ENH: call update_ticks before we return them to the user
* :ghpull:`21082`: Fix layout of sidebar entries
* :ghpull:`20988`: Add HiDPI support in GTK.
* :ghpull:`21080`: Backport PR #19619 on branch v3.5.x (Fix bug in shape assignment)
* :ghpull:`19619`: Fix bug in shape assignment
* :ghpull:`21079`: Backport PR #21078 on branch v3.5.x (Cache build dependencies on Circle)
* :ghpull:`21078`: Cache build dependencies on Circle
* :ghpull:`21077`: Backport PR #21076 on branch v3.5.x (Break links between twinned axes when removing)
* :ghpull:`21076`: Break links between twinned axes when removing
* :ghpull:`21073`: Backport PR #21072 on branch v3.5.x (Use sysconfig directly instead of through distutils)
* :ghpull:`21072`: Use sysconfig directly instead of through distutils
* :ghpull:`21071`: Backport PR #21061 on branch v3.5.x (Remove most visible dependencies on distutils.)
* :ghpull:`21061`: Remove most visible dependencies on distutils.
* :ghpull:`21070`: Backport PR #21025 on branch v3.5.x (Fix Cairo backends on HiDPI screens)
* :ghpull:`21065`: Backport PR #20819 on branch v3.5.x (Add CPython 3.10 wheels)
* :ghpull:`21069`: Backport PR #21051 on branch v3.5.x (set_dashes does not support offset=None anymore.)
* :ghpull:`21068`: Backport PR #21067 on branch v3.5.x (Remove generated file accidentally added in #20867)
* :ghpull:`21025`: Fix Cairo backends on HiDPI screens
* :ghpull:`21051`: set_dashes does not support offset=None anymore.
* :ghpull:`21067`: Remove generated file accidentally added in #20867
* :ghpull:`21066`: Backport PR #21060 on branch v3.5.x (Correct the default for fillstyle parameter in MarkerStyle())
* :ghpull:`20819`: Add CPython 3.10 wheels
* :ghpull:`21064`: Backport PR #20913 on branch v3.5.x ([Doc] colors.to_hex input & output)
* :ghpull:`20913`: [Doc] colors.to_hex input & output
* :ghpull:`21063`: Backport PR #21062 on branch v3.5.x (Fix typo in template of current dev-docs)
* :ghpull:`21062`: Fix typo in template of current dev-docs
* :ghpull:`21060`: Correct the default for fillstyle parameter in MarkerStyle()
* :ghpull:`21058`: Backport PR #21053 on branch v3.5.x (Fix validate_markevery docstring markup.)
* :ghpull:`21053`: Fix validate_markevery docstring markup.
* :ghpull:`21052`: Backport PR #20867 on branch v3.5.x ("inner" index reorganization)
* :ghpull:`21047`: Backport PR #21040 on branch v3.5.x (Document ``handleheight`` parameter of ``Legend`` constructor)
* :ghpull:`21048`: Backport PR #21044 on branch v3.5.x (Support for forward/back mousebuttons on WX backend)
* :ghpull:`20867`: "inner" index reorganization
* :ghpull:`21044`: Support for forward/back mousebuttons on WX backend
* :ghpull:`21040`: Document ``handleheight`` parameter of ``Legend`` constructor
* :ghpull:`21045`: Backport PR #21041 on branch v3.5.x (Prefer "none" to "None" in docs, examples and comments.)
* :ghpull:`21041`: Prefer "none" to "None" in docs, examples and comments.
* :ghpull:`21037`: Backport PR #20949 on branch v3.5.x (Improve formatting of imshow() cursor data independently of colorbar.)
* :ghpull:`21035`: Backport PR #21031 on branch v3.5.x (Make date.{converter,interval_multiples} rcvalidators side-effect free.)
* :ghpull:`20949`: Improve formatting of imshow() cursor data independently of colorbar.
* :ghpull:`21031`: Make date.{converter,interval_multiples} rcvalidators side-effect free.
* :ghpull:`21032`: Backport PR #21017 on branch v3.5.x (FIX: Don't subslice lines if non-standard transform)
* :ghpull:`21030`: Backport PR #20980 on branch v3.5.x (FIX: remove colorbar from list of colorbars on axes)
* :ghpull:`21029`: Backport PR #21028 on branch v3.5.x (Minor homogeneization of markup for MEP titles.)
* :ghpull:`21028`: Minor homogeneization of markup for MEP titles.
* :ghpull:`21022`: Backport PR #20518 on branch v3.5.x ( Support sketch_params in pgf backend)
* :ghpull:`20518`:  Support sketch_params in pgf backend
* :ghpull:`21018`: Backport PR #20976 on branch v3.5.x (Separate tick and spine examples)
* :ghpull:`20976`: Separate tick and spine examples
* :ghpull:`21014`: Backport PR #20994 on branch v3.5.x (Remove unused icon_filename, window_icon globals.)
* :ghpull:`21013`: Backport PR #21012 on branch v3.5.x (Use numpydoc for GridSpecFromSubplotSpec.__init__)
* :ghpull:`20994`: Remove unused icon_filename, window_icon globals.
* :ghpull:`21012`: Use numpydoc for GridSpecFromSubplotSpec.__init__
* :ghpull:`21011`: Backport PR #21003 on branch v3.5.x (Deemphasize mpl_toolkits in API docs.)
* :ghpull:`21003`: Deemphasize mpl_toolkits in API docs.
* :ghpull:`21002`: Backport PR #20987 on branch v3.5.x (FIX: colorbar with boundary norm, proportional, extend)
* :ghpull:`20987`: FIX: colorbar with boundary norm, proportional, extend
* :ghpull:`21000`: Backport PR #20997 on branch v3.5.x (Fix ToolManager + TextBox support.)
* :ghpull:`20997`: Fix ToolManager + TextBox support.
* :ghpull:`20985`: Backport PR #20942 on branch v3.5.x (DOC Use 'Axes' instead of 'axes' in axes._base.py)
* :ghpull:`20983`: Backport PR #20973 on branch v3.5.x (Docstring cleanups.)
* :ghpull:`20982`: Backport PR #20972 on branch v3.5.x (Cleanup some dviread docstrings.)
* :ghpull:`20942`: DOC Use 'Axes' instead of 'axes' in axes._base.py
* :ghpull:`20981`: Backport PR #20975 on branch v3.5.x (Clarify support for 2D coordinate inputs to streamplot.)
* :ghpull:`20972`: Cleanup some dviread docstrings.
* :ghpull:`20975`: Clarify support for 2D coordinate inputs to streamplot.
* :ghpull:`20973`: Docstring cleanups.
* :ghpull:`20971`: Backport PR #20970 on branch v3.5.x (Build wheels for Apple Silicon.)
* :ghpull:`20970`: Build wheels for Apple Silicon.
* :ghpull:`20969`: Backport PR #20321 on branch v3.5.x (Add a GTK4 backend.)
* :ghpull:`20321`: Add a GTK4 backend.
* :ghpull:`20966`: Backport PR #19553 on branch v3.5.x (ENH: Adding callbacks to Norms for update signals)
* :ghpull:`20967`: Backport PR #20965 on branch v3.5.x (BUG: Fix f_back is None handling)
* :ghpull:`20965`: BUG: Fix f_back is None handling
* :ghpull:`19553`: ENH: Adding callbacks to Norms for update signals
* :ghpull:`20960`: Backport PR #20745 on branch v3.5.x (Clean up some Event class docs.)
* :ghpull:`20745`: Clean up some Event class docs.
* :ghpull:`20959`: Backport PR #20952 on branch v3.5.x (Redirect to new 3rd party packages page)
* :ghpull:`20952`: Redirect to new 3rd party packages page
* :ghpull:`20958`: Backport PR #20956 on branch v3.5.x (Make warning for no-handles legend more explicit.)
* :ghpull:`20956`: Make warning for no-handles legend more explicit.
* :ghpull:`20954`: Backport PR #20931 on branch v3.5.x (API: rename draw_no_output to draw_without_rendering)
* :ghpull:`20931`: API: rename draw_no_output to draw_without_rendering
* :ghpull:`20934`: Backport PR #20919 on branch v3.5.x (Improve various release notes)"
* :ghpull:`20948`: Backport PR #20944 on branch v3.5.x (Switch documented deprecations in mathtext by ``__getattr__`` deprecations)
* :ghpull:`20944`: Switch documented deprecations in mathtext by ``__getattr__`` deprecations
* :ghpull:`20947`: Backport PR #20941 on branch v3.5.x (Fix variable capitalization in plot types headings)
* :ghpull:`20941`: Fix variable capitalization in plot types headings
* :ghpull:`20939`: Backport PR #20937 on branch v3.5.x (Fix documented allowed values for Patch.set_edgecolor.)
* :ghpull:`20940`: Backport PR #20938 on branch v3.5.x (Fix missorted changelog entry.)
* :ghpull:`20938`: Fix missorted changelog entry.
* :ghpull:`20937`: Fix documented allowed values for Patch.set_edgecolor.
* :ghpull:`20933`: Backport PR #20916 on branch v3.5.x (Improve deleted Animation warning)
* :ghpull:`20916`: Improve deleted Animation warning
* :ghpull:`20919`: Improve various release notes
* :ghpull:`20928`: Backport PR #20889 on branch v3.5.x (Fix clearing selector)
* :ghpull:`20927`: Backport PR #20924 on branch v3.5.x (Improve ``path.py`` docstrings a bit)
* :ghpull:`20889`: Fix clearing selector
* :ghpull:`20922`: Backport PR #20920 on branch v3.5.x (Fix cubic curve code in ``Path.__doc__``)
* :ghpull:`20925`: Backport PR #20917 on branch v3.5.x (Move installing FAQ to installing page.)
* :ghpull:`20924`: Improve ``path.py`` docstrings a bit
* :ghpull:`20917`: Move installing FAQ to installing page.
* :ghpull:`20920`: Fix cubic curve code in ``Path.__doc__``
* :ghpull:`20918`: Backport PR #20915 on branch v3.5.x ([Doc] boxplot typo)
* :ghpull:`20915`: [Doc] boxplot typo
* :ghpull:`20908`: [Doc] FigureCanvasBase draw
* :ghpull:`20899`: Backport PR #20885 on branch v3.5.x (Fix broken QApplication init in a test.)
* :ghpull:`20885`: Fix broken QApplication init in a test.
* :ghpull:`20894`: Backport PR #20891 on branch v3.5.x (Add dependency link for 3.5)
* :ghpull:`20893`: Backport PR #20892 on branch v3.5.x (Label pylab as "discouraged" instead of "disapproved")
* :ghpull:`20891`: Add dependency link for 3.5
* :ghpull:`20888`: Backport PR #20864 on branch v3.5.x (Add Python 3.10 testing.)
* :ghpull:`20890`: Backport PR #20693 on branch v3.5.x (Fix setting artists properties of selectors)
* :ghpull:`20892`: Label pylab as "discouraged" instead of "disapproved"
* :ghpull:`20693`: Fix setting artists properties of selectors
* :ghpull:`20864`: Add Python 3.10 testing.
* :ghpull:`20886`: Backport PR #20884 on branch v3.5.x (Ensure full environment is passed to headless test.)
* :ghpull:`20884`: Ensure full environment is passed to headless test.
* :ghpull:`20883`: Make pywin32 optional in Ctrl+C Qt test.
* :ghpull:`20874`: Add additional external resource.
* :ghpull:`20875`: Use mpl.colormaps in examples
* :ghpull:`20586`: Deprecate matplotlib.test()
* :ghpull:`19892`: Add Figure parameter layout and discourage tight_layout / constrained_layout
* :ghpull:`20882`: Don't add QtNetwork to the API exported by qt_compat.
* :ghpull:`20881`: Deprecate some old globals in qt_compat.
* :ghpull:`13306`: Qt5: SIGINT kills just the mpl window and not the process itself
* :ghpull:`20876`: DOC: Fix dependency link.
* :ghpull:`20878`: Use tables for Locator and Formatter docs
* :ghpull:`20873`: Remove mplutils.cpp; shorten mplutils.h.
* :ghpull:`20872`: Remove some boilerplate from C extension inits.
* :ghpull:`20871`: Move setup.cfg to mplsetup.cfg.
* :ghpull:`20869`: Ignore errors trying to delete make_release_tree.
* :ghpull:`20868`: Fix qt key mods
* :ghpull:`20856`: TST: Add unit test to catch recurrences of #20822, #20855
* :ghpull:`20857`: Propose a less error-prone helper for module-level getattrs.
* :ghpull:`20840`: Speed up Tkagg blit with Tk_PhotoPutBlock
* :ghpull:`20805`: Ensure all params are restored after ``reset_ticks``.
* :ghpull:`20863`: new github citation format
* :ghpull:`20859`: Allow SubFigure legends
* :ghpull:`20848`: Fix PyPy wheels and tests
* :ghpull:`20862`: Fix minor typo in setupext.py
* :ghpull:`20814`: FIX: Avoid copying source script when ``plot_html_show_source_link`` is False in plot directive
* :ghpull:`20855`: BUG: __getattr__ must raise AttributeError if name not found (again)
* :ghpull:`20079`: Prepare axes_divider for simpler(?) indexing-based API.
* :ghpull:`20444`: Delete _Bracket and update the _Curve to be able to ']->' and '<-['
* :ghpull:`20812`: Clarify tutorial "Customizing Matplotlib with style sheets and rcParams"
* :ghpull:`20806`: Deprecate matplotlib.cm.LUTSIZE
* :ghpull:`20818`: Swap Cap/Cup glyphs when using STIX font.
* :ghpull:`20849`: Add external resources to devdoc landing page
* :ghpull:`20846`: Re-re-remove deprecated Qt globals.
* :ghpull:`18503`: Add a dedicated ColormapRegistry class
* :ghpull:`20603`: Deprecate unused LassoSelector event handlers.
* :ghpull:`20679`: Fix selector onselect call when the selector is removed by an "empty" click and add ``ignore_event_outside`` argument
* :ghpull:`11358`: FIX/ENH: Introduce a monolithic legend handler for Line2D
* :ghpull:`20699`: FIX/ENH: Introduce a monolithic legend handler for Line2D
* :ghpull:`20837`: Merge branch v3.4.x
* :ghpull:`18782`: ENH: allow image to interpolate post RGBA
* :ghpull:`20829`: TST: neither warned and pytest upstream deprecated this usage
* :ghpull:`20828`: Increase test timeouts to 60 s to aid slower architectures
* :ghpull:`20816`: ENH: Add the ability to block callback signals
* :ghpull:`20646`: Handle NaN values in ``plot_surface`` zsort
* :ghpull:`20725`: ``Axes3D.plot_surface``: Allow masked arrays and ``NaN`` values
* :ghpull:`20825`: Fix image triage tool with Qt6
* :ghpull:`20229`: ENH: Only do constrained layout at draw...
* :ghpull:`20822`: BUG: __getattr__ must raise AttributeError if name not found
* :ghpull:`20815`: circle: Switch to next-gen image.
* :ghpull:`20813`: add doc-link to dufte
* :ghpull:`20799`: MNT: Rename callbacksSM to callbacks
* :ghpull:`20803`: Re-remove deprecated Qt globals.
* :ghpull:`17810`: FIX: don't fail on first show if animation already exhausted
* :ghpull:`20733`: Deprecate globals using module-level ``__getattr__``.
* :ghpull:`20788`: FIX: Check for colorbar creation with multi-dimensional alpha
* :ghpull:`20115`: ENH: pass extra kwargs in FigureBase, SubFigure, Figure to set
* :ghpull:`20795`: TST/MNT: deprecate unused fixture
* :ghpull:`20792`: Change legend guide to object oriented approach
* :ghpull:`20717`: Fix collection offsets
* :ghpull:`20673`: Point [SOURCE] documents to github
* :ghpull:`19255`: Support for PyQt6/PySide6.
* :ghpull:`20772`: Implement remove_rubberband rather than release_zoom.
* :ghpull:`20783`: Document how to check for the existence of current figure/axes.
* :ghpull:`20778`: Dedupe handling of mouse buttons in macos backend.
* :ghpull:`20749`: Cleanup font subsetting code
* :ghpull:`20775`: Remove some remnants of qt4 support.
* :ghpull:`20659`: Add HiDPI-related config for mathmpl
* :ghpull:`20767`: Factor out latex ifpackageloaded pattern.
* :ghpull:`20769`: Simplify backend_ps._nums_to_str.
* :ghpull:`20768`: Avoid using gca() in examples.
* :ghpull:`20766`: Fix line dash offset format in PS output
* :ghpull:`20706`: Include ``underscore.sty``
* :ghpull:`20729`: Support vmin/vmax with bins='log' in hexbin
* :ghpull:`20753`: Deprecate support for case-insensitive scales.
* :ghpull:`20602`: Merge EllipseSelector example together with RectangleSelector.
* :ghpull:`20744`: Add an example showing alternate mouse cursors.
* :ghpull:`20758`: FIX: pass colorbar.set_ticklabels down to long_axis
* :ghpull:`20759`: Modernize mathtext examples
* :ghpull:`20739`: Small simplifications to streamplot.
* :ghpull:`20756`: Add new external resource: Python Graph Gallery
* :ghpull:`20330`: Fix cla colorbar
* :ghpull:`20688`: issue form files
* :ghpull:`20743`: Set the canvas cursor when using a SpanSelector
* :ghpull:`20391`: Type42 subsetting in PS/PDF
* :ghpull:`20737`: DOC: new index page
* :ghpull:`20686`: Fix interaction between make_keyword_only and pyplot generation.
* :ghpull:`20731`: Improved implementation of Path.copy and deepcopy
* :ghpull:`20732`: Fix style in ``assert(x)``.
* :ghpull:`20620`: Move set_cursor from the toolbar to FigureCanvas.
* :ghpull:`20728`: Fix broken link in 'Contributing' docs
* :ghpull:`20727`: DOC/TST make circle faster
* :ghpull:`20726`: DOC: Provide alternative to cbar.patch
* :ghpull:`20719`: Fix color normalization in plot types scatter
* :ghpull:`20634`: Implement Type-1 decryption
* :ghpull:`20633`: Emit non BMP chars as XObjects in PDF
* :ghpull:`20709`: Fix Circle merge on master branch.
* :ghpull:`20701`: Small cleanup to GTK backend
* :ghpull:`20670`: Support markevery on figure-level lines.
* :ghpull:`20707`: Rename a confusingly named variable in backend_pdf.
* :ghpull:`20680`: CI: Build merged version on CircleCI
* :ghpull:`20471`: add interactive colorbar example to gallery
* :ghpull:`20692`: Small cleanups to hatch.py.
* :ghpull:`20702`: DOC: add note about contouring algorithm
* :ghpull:`18869`: Add __version_info__ as a tuple-based version identifier
* :ghpull:`20689`: Fix some very unlikely leaks in extensions.
* :ghpull:`20254`: Define FloatingAxes boundary patch in data coordinates.
* :ghpull:`20682`: Bump codecov/codecov-action from 1 to 2
* :ghpull:`20544`: Support of different locations for the text fixing cursor of TextBox
* :ghpull:`20648`: Simplify barchart_demo
* :ghpull:`20606`: Dynamically generate CbarAxes.
* :ghpull:`20405`: ENH: expose make_norm_from_scale
* :ghpull:`20555`: Fix the way to get xs length in set_3d_properties()
* :ghpull:`20546`: Improve tutorial figures in the new theme
* :ghpull:`20676`: Fix bounds when initialising ``SpanSelector``
* :ghpull:`20678`: Clarify comment about backend_pgf.writeln.
* :ghpull:`20675`: Shorten the ``@deprecated`` docs.
* :ghpull:`20585`: Rename parameter selectors
* :ghpull:`20672`: Remove outdated parts of MatplotlibDeprecationWarning docs.
* :ghpull:`20671`: Standardize description of kwargs in legend_handler.
* :ghpull:`20669`: Cleanup related to usage of axs
* :ghpull:`20664`: Reword docs about fallbacks on headless linux.
* :ghpull:`20663`: Document $MPLSETUPCFG.
* :ghpull:`20638`: Small simplifications to FixedAxisArtistHelper.
* :ghpull:`20626`: Simplify curvilinear grid examples.
* :ghpull:`20088`: fix some http: -> https: URLs
* :ghpull:`20654`: Remove some usages of plt.setp()
* :ghpull:`20615`: Font 42 kerning
* :ghpull:`20636`: Use set_xticks(ticks, labels) instead of a separate set_xticklabels()
* :ghpull:`20450`: [Doc] Font Types and Font Subsetting
* :ghpull:`20582`: Fix twoslopenorm colorbar
* :ghpull:`20632`: Use ticklabels([]) instead of ticklabels('')
* :ghpull:`20608`: doc/conf.py: if set, use SOURCE_DATE_EPOCH to set copyright year.
* :ghpull:`20605`: Add \dddot and \ddddot as accents in mathtext
* :ghpull:`20621`: TST/DOC: just run circle once...
* :ghpull:`20498`: Adapt the release guide to the new release notes structure
* :ghpull:`20601`: Hide some ``_SelectorWidget`` state internals.
* :ghpull:`20600`: Inline _print_svg into its only call site (print_svg).
* :ghpull:`20589`: Add directional sizing cursors
* :ghpull:`20481`: Deprecate Colorbar.patch.
* :ghpull:`20598`: Don't forget to propagate kwargs from print_svgz to print_svg.
* :ghpull:`19495`: Move svg basename detection down to RendererSVG.
* :ghpull:`20501`: Colorbar redo again!
* :ghpull:`20407`: Turn shared_axes, stale_viewlims into {axis_name: value} dicts.
* :ghpull:`18966`: PR: Remove modality of figure options
* :ghpull:`19265`: Change styling of slider widgets
* :ghpull:`20593`: DOC: fix various typos
* :ghpull:`20374`: Check modification times of included RST files
* :ghpull:`20569`: Better signature and docstring for Artist.set
* :ghpull:`20574`: Add tricontourf hatching example
* :ghpull:`18666`: Remove unused/deprecated ``AVConv`` classes
* :ghpull:`20514`: Fix example for rcParams['autolimit_mode']
* :ghpull:`20571`: Switch default ArrowStyle angle values from None to zero.
* :ghpull:`20510`: Consistent capitalization of section headers
* :ghpull:`20573`: Move the marker path example into the marker reference
* :ghpull:`20572`: Clarify allowable backend switches in matplotlib.use().
* :ghpull:`20538`: Show box/arrowstyle parameters in reference examples.
* :ghpull:`20515`: Shorten the implementation of bxp().
* :ghpull:`20562`: More concise how to for subplot adjustment
* :ghpull:`20570`: Reduce vertical margins in property tables
* :ghpull:`20563`: Expire deprecation of passing nbins to MaxNLocator in two ways
* :ghpull:`20561`: Fix limits in plot types example hist(x)
* :ghpull:`20559`: Fix deprecation of encoding in plot_directive.
* :ghpull:`20547`: Raise if passed invalid kwargs to set_constrained_layout_pads.
* :ghpull:`20527`: Factor out DEBUG_TRUETYPE checks in ttconv, & removals of unused defs.
* :ghpull:`20465`: Remove remaining 3.3 deprecations
* :ghpull:`20558`: Rename recently introduced parameters in SpanSelector
* :ghpull:`20535`: Improve the documentation guide
* :ghpull:`20113`: Interactive span selector improvement
* :ghpull:`20524`: Dedupe some box anchoring code between legend.py and offsetbox.py.
* :ghpull:`20451`: Add initial TextBox widget testing
* :ghpull:`20543`: Deprecate ``@pytest.mark.style(...)``.
* :ghpull:`20530`: Plot nothing for incompatible 0 shape in x,y data
* :ghpull:`20367`: Add parse_math in Text and default it False for TextBox
* :ghpull:`20509`: Cleanup plot types
* :ghpull:`20537`: Don't sort boxstyles/arrowstyles/etc. alphabetically.
* :ghpull:`20542`: Fix ScalarFormatter.format_ticks for non-ordered tick locations.
* :ghpull:`20533`: Rename (N, M) -> (M, N) array-like
* :ghpull:`20540`: Deprecate :encoding: option to .. plot::, which has no effect since 2011
* :ghpull:`20541`: Minor fix
* :ghpull:`20539`: Document defaults in plot_directive.
* :ghpull:`20536`: Make most of annotation tutorial a comment, and remove figure titles.
* :ghpull:`20439`: Remove dead code from LGTM alerts.
* :ghpull:`20528`: Merge subplot_demo into subplot example.
* :ghpull:`20493`: Cleanup AnchoredOffsetbox-related demos.
* :ghpull:`20513`: Shorten the bxp docstring.
* :ghpull:`20507`: Merge subplot_toolbar example into subplots_adjust.
* :ghpull:`20505`: Add rc_context to customizing tutorial
* :ghpull:`20449`: Suppress repeated logwarns in postscript output.
* :ghpull:`20500`: DOC: Add twitter icon and fix logo link
* :ghpull:`20499`: Simplify plot types pie()
* :ghpull:`20495`: Fix shape of Z in contour docs
* :ghpull:`20497`: Remove obsolete footnote on pyside
* :ghpull:`20485`: DOC: hexbin 'extent' must be 4-tuple of float, not float
* :ghpull:`20466`: Various cleanups to pgf backend.
* :ghpull:`20474`: Make lack of support more explicit for non-postscript fonts + usetex.
* :ghpull:`20476`: give Font a root widget
* :ghpull:`20477`: remove _master attribute from FigureCanvasTk
* :ghpull:`19731`: DOC: first pass at switching to pydata theme
* :ghpull:`20475`: Less pyplot, more OO in docs.
* :ghpull:`20467`: Small cleanups to sphinxext.plot_directive.
* :ghpull:`20437`: Use packaging to do version comparisons.
* :ghpull:`20354`: Merge Colorbar and ColorbarBase.
* :ghpull:`20464`: tinypages/conf.py doesn't need to manipulate sys.path.
* :ghpull:`20420`: Add a select_overload helper for signature-overloaded functions.
* :ghpull:`20460`: Shorten the AnchoredOffsetbox docstring.
* :ghpull:`20458`: Set the axes of legend text
* :ghpull:`20438`: Fix deprecation of ``Tick.apply_tickdir``.
* :ghpull:`20457`: Rename data variables in histogram example.
* :ghpull:`20442`: Fix dvi baseline detector when ``\usepackage{chemformula}`` is used.
* :ghpull:`20454`: Tell LGTM to use Python 3 explicitly.
* :ghpull:`20446`: Make used tex packages consistent between ps and other backends.
* :ghpull:`20447`: Remove Figure/Axes/Axis deprecations from 3.3
* :ghpull:`20414`: ENH: add colorbar info to gridspec cbar
* :ghpull:`20436`: Add missing super __init__ in subclasses
* :ghpull:`20284`: Use a GtkApplication in GTK backend.
* :ghpull:`20400`: Make pdftex.map parsing stricter
* :ghpull:`20292`: Cleanup plot types docs
* :ghpull:`20445`: Small cleanups to backend_ps.
* :ghpull:`20399`: Improve example for 3D polygons
* :ghpull:`20432`: Small doc cleanups.
* :ghpull:`20398`: Document Axes.get_aspect()
* :ghpull:`20428`: Deprecate public use of get_path_in_displaycoord.
* :ghpull:`20397`: Improve hexbin() documentation
* :ghpull:`20430`: Improve fancyarrow_demo.
* :ghpull:`20431`: Fix indentation of Arrow/Box/Connection styles tables.
* :ghpull:`20427`: Fix references in ArrowStyle docstring.
* :ghpull:`20346`: Clarify/Improve docs on family-names vs generic-families
* :ghpull:`20410`: PGF: Clip lines/markers to maximum LaTeX dimensions.
* :ghpull:`20363`: Don't disable path clipping on paths with codes.
* :ghpull:`20244`: Inline and simplify SubplotToolQt.
* :ghpull:`20165`: Slightly improve output of dvi debug utilities, and tiny cleanups.
* :ghpull:`20390`: Cleanup arrow_demo.
* :ghpull:`20408`: Remove mention of now-removed Encoding class.
* :ghpull:`20327`: FIX: fix colorbars with no scales
* :ghpull:`20215`: Quadmesh.set_array validates dimensions
* :ghpull:`20293`: Simplify font setting in usetex mode
* :ghpull:`20386`: Merge arrow_simple_demo into arrow_guide.
* :ghpull:`20348`: codecs.getwriter has simpler lifetime semantics than TextIOWrapper.
* :ghpull:`20132`: Create release notes page
* :ghpull:`20331`: Remove Axis, Tick, and Axes deprecations from 3.3
* :ghpull:`20373`: Handle direction="column" in axes_grid.Grid
* :ghpull:`20394`: Remove separate section for support of 3d subplots.
* :ghpull:`20393`: Remove non-informative figure captions.
* :ghpull:`17453`: Displaying colorbars with specified boundaries correctly
* :ghpull:`20369`: Switch version scheme to release-branch-semver.
* :ghpull:`20377`: Cleanup some examples titles & texts.
* :ghpull:`20378`: Redirect agg_buffer{,_to_array} examples to canvasagg.
* :ghpull:`20376`: Small improvements to canvasagg example.
* :ghpull:`20365`: Reorganize a bit text-related rcs in matplotlibrc.
* :ghpull:`20362`: Add research notice
* :ghpull:`20353`: Remove incorrect statement about data-kwarg interface.
* :ghpull:`20343`: Fix exception handling when constructing C-level PathGenerator.
* :ghpull:`20349`: Fix missing write in TTStreamWriter::printf.
* :ghpull:`20347`: Fix possible refleak in PathGenerator.
* :ghpull:`20339`: Cleanup autoscale-related docstrings.
* :ghpull:`20338`: Fix some indent-related style lints.
* :ghpull:`20337`: Small unit-related cleanups.
* :ghpull:`20168`: FIX: clean up re-limiting hysteresis
* :ghpull:`20336`: Deduplicate color format specification
* :ghpull:`20334`: Remove need for ConversionInterface to support unitless values.
* :ghpull:`20020`: For polar plots, report cursor position with correct precision.
* :ghpull:`20319`: DOC: Tweaks to module API pages
* :ghpull:`20332`: Quadmesh's default value of shading is now set to 'flat' instead of False
* :ghpull:`20333`: Better align param comments in ``Legend.__init__`` signature.
* :ghpull:`20323`: Adding cla and remove to ColorbarAxes
* :ghpull:`20320`: Fix remaining E265 exceptions.
* :ghpull:`20318`: DOC: Fix missing refs in what's new pages
* :ghpull:`20315`: Fix spelling.
* :ghpull:`20291`: Write data parameter docs as regular parameter not as note (v2)
* :ghpull:`19908`: Implement get_cursor_data for QuadMesh.
* :ghpull:`20314`: MAINT: Removing deprecated colorbar functions.
* :ghpull:`20310`: Add test for font selection by texmanager.
* :ghpull:`19348`: Make YearLocator a subclass of RRuleLocator
* :ghpull:`20208`: Rewrite blocking_input to something much simpler.
* :ghpull:`19033`: Templatize class factories.
* :ghpull:`20309`: DOC: Spell out args/kwargs in examples/tutorials
* :ghpull:`20305`: Merge two axisartist examples and point to standard methods.
* :ghpull:`20306`: Document legend(handles=handles) signature
* :ghpull:`20311`: Warn if a non-str is passed to an rcParam requiring a str.
* :ghpull:`18472`: Adding a get_coordinates() method to Quadmesh collections
* :ghpull:`20032`: axvline()/axvspan() should not update r limits in polar plots.
* :ghpull:`20304`: Don't mention dviread in the PsfontsMap "missing entry" error message.
* :ghpull:`20308`: Remove outdated comment re: pgf/windows.
* :ghpull:`20302`: Further remove use of meshWidth, meshHeight in QuadMesh.
* :ghpull:`20101`: Fix ``Text`` class bug when ``font`` argument is provided without ``math_fontfamily``
* :ghpull:`15436`: Allow imshow from float16 data
* :ghpull:`20299`: Simplify tfm parsing.
* :ghpull:`20290`: Support imshow(<float16 array>).
* :ghpull:`20303`: Remove tilde in code links where not necessary
* :ghpull:`19873`: Allow changing the vertical axis in 3d plots
* :ghpull:`19558`: Use luatex in --luaonly mode to query kpsewhich.
* :ghpull:`20301`: Clarify the effect of PolygonCollection properties on Quiver
* :ghpull:`20235`: Warn user when mathtext font is used for ticks
* :ghpull:`20237`: Make QuadMesh arguments with defaults keyword_only
* :ghpull:`20054`: Enh better colorbar axes
* :ghpull:`20164`: Auto-generate required kwdoc entries into docstring.interpd.
* :ghpull:`19677`: Convert axis limit units in Qt plot options widget
* :ghpull:`14913`: Reimplement NonUniformImage, PcolorImage in Python, not C.
* :ghpull:`20295`: Replace text._wrap_text by _cm_set().
* :ghpull:`19859`: Write data parameter docs as regular parameter not as note
* :ghpull:`20273`: Fix cursor with toolmanager on GTK3.
* :ghpull:`20288`: Small markup fixes in api docs.
* :ghpull:`20276`: Tiny fixes to mathtext/usetex tutorials.
* :ghpull:`20084`: Add legend.labelcolor in rcParams
* :ghpull:`19253`: Improve font spec for SVG font referencing.
* :ghpull:`20278`: Deprecate public access to certain texmanager attributes.
* :ghpull:`19375`: Don't composite path-clipped image; forward suppressComposite as needed.
* :ghpull:`20190`: Simplify handling of uncomparable formats in tests.
* :ghpull:`20277`: Fix ordering of tex font usepackages.
* :ghpull:`20279`: Slightly reword intros of mpl_toolkits API docs.
* :ghpull:`20272`: De-duplicate fonts in LaTeX preamble.
* :ghpull:`15604`: Deprecate auto-removal of grid by pcolor/pcolormesh.
* :ghpull:`20193`: Simplify HostAxes.draw and its interaction with ParasiteAxes.
* :ghpull:`19441`: Make backend_gtk3foo importable on headless environments.
* :ghpull:`20126`: Simplify font_manager font enumeration logic.
* :ghpull:`19869`: Factor out x/y lo/hi handling in errorbar.
* :ghpull:`20173`: Rename (with deprecation) first parameter of grid() from b to visible.
* :ghpull:`19499`: Fully fold overset/underset into _genset.
* :ghpull:`20268`: Api pcolorargs deprecation
* :ghpull:`20264`: Fix blitting selector
* :ghpull:`20081`: Limit documenting special members to __call__
* :ghpull:`20245`: MAINT: Removing deprecated ``offset_position`` from Collection
* :ghpull:`20218`: Update Axes showcase in "Embedding in Tk" example
* :ghpull:`20019`: Example: Cursor widget with text
* :ghpull:`20242`: Add comments and format Axis._get_coord_info
* :ghpull:`20207`: Move axisartist towards using standard Transforms.
* :ghpull:`20247`: Explicitly reject black autoformatting.
* :ghpull:`20217`: ci: Export sphinx-gallery run results to CircleCI.
* :ghpull:`20238`: Clarify docstring of ScalarMappable.set/get_array()
* :ghpull:`20239`: Style tables in style guide
* :ghpull:`19894`: Remove deprecated Qt4 backends
* :ghpull:`19937`: Add washing machine to Axes3D
* :ghpull:`20233`: Add a Ubuntu 20.04 / Python 3.9 CI run
* :ghpull:`20227`: Adding an equals method to colormaps
* :ghpull:`20216`: Documentation Style Guide for contributors
* :ghpull:`20222`: Fix C coverage
* :ghpull:`20221`: DOC: clarify that savefig(..., transparent=False) has no effect
* :ghpull:`20047`: Add labels parameter to set_ticks()
* :ghpull:`20118`: Convert FontEntry to a data class
* :ghpull:`19167`: Add support for HiDPI in TkAgg on Windows
* :ghpull:`18397`: fix cmr10 negative sign in cmsy10 (RuntimeWarning: Glyph 8722 missing)
* :ghpull:`20170`: SubplotParams.validate-associated fixes.
* :ghpull:`19467`: Shorten the implementation of violin().
* :ghpull:`12226`: FIX: pcolor/pcolormesh honour edgecolors kwarg when facecolors is set 'none'
* :ghpull:`18870`: Expand ScalarMappable.set_array to accept array-like inputs
* :ghpull:`20073`: Support SubFigures in AxesDivider.
* :ghpull:`20209`: Deprecate cbook.report_memory.
* :ghpull:`20211`: Use check_getitem in legend location resolution.
* :ghpull:`20206`: Cleanup axisartist in preparation for future changes.
* :ghpull:`20191`: Small simplifications to FloatingAxesBase.
* :ghpull:`20189`: Add tests for ginput and waitforbuttonpress.
* :ghpull:`20199`: Make set_marker{edge,face}color(None) more consistent.
* :ghpull:`16943`: Changing get_cmap to return copies of the registered colormaps.
* :ghpull:`19483`: MNT: deprecate epoch2num/num2epoch
* :ghpull:`20201`: Simplify _process_plot_var_args.set_prop_cycle.
* :ghpull:`20197`: Speedup Line2D marker color setting.
* :ghpull:`20194`: Fix markup on MEP22.
* :ghpull:`20198`: Fix validation of Line2D color.
* :ghpull:`20046`: Deprecation warning
* :ghpull:`20144`: More tight_layout cleanups
* :ghpull:`20105`: Shorten Curve arrowstyle implementations.
* :ghpull:`19401`: Simplify axisartist line clipping.
* :ghpull:`19260`: Update round fix
* :ghpull:`20196`: Replaced links to colormap packages with link to third-party packages list in MPL docs
* :ghpull:`18819`: Usage guide edit
* :ghpull:`18346`: Soft-deprecate Axes.plot_date()
* :ghpull:`20187`: Merge v3.4.x up into master
* :ghpull:`15333`: Enh: DivergingNorm Fair
* :ghpull:`20188`: Remove 3.3 deprecations in cbook.
* :ghpull:`20177`: Fix broken test re: polar tick visibility.
* :ghpull:`20026`: DOC: move third-party packages to new page
* :ghpull:`19994`: Don't hide shared "x/y"ticklabels for grids of non-rectilinear axes.
* :ghpull:`20150`: Rename mosaic layout
* :ghpull:`19369`: Add Artist._cm_set for temporarily setting an Artist property.
* :ghpull:`15889`: Add svg logo icon
* :ghpull:`20140`: DOC: make 2x versions of all gallery figures
* :ghpull:`20155`: Fix wheel builds on CI
* :ghpull:`19951`: Convert Qhull wrapper to C++ and array_view
* :ghpull:`19918`: Cleanup some consistency in contour extensions
* :ghpull:`20153`: Fix wheel builds on CI
* :ghpull:`19363`: Create box3d example
* :ghpull:`20129`: Cleanup some "variable assigned but not used" lints.
* :ghpull:`20107`: Support full-sharex/y in subplot_mosaic.
* :ghpull:`20094`: Switch _auto_adjust_subplotpars to take rowspan/colspan as input.
* :ghpull:`16368`: Improve warning for unsupported scripts.
* :ghpull:`19660`: Allow PolygonSelector points to be removed
* :ghpull:`16291`: Split Norm and LinearNorm up
* :ghpull:`20119`: Cleanup flake8 exceptions for examples
* :ghpull:`20109`: Fix trailing text in doctest-syntax plot_directive.
* :ghpull:`19538`: Speedup pdftex.map parsing.
* :ghpull:`20003`: Bump minimum NumPy to 1.17
* :ghpull:`20074`: Copy-edit axes_grid tutorial.
* :ghpull:`20124`: Remove workaround unneeded on Py3.7+, which we require now.
* :ghpull:`20120`: Cleanup subsetting tool.
* :ghpull:`20108`: Skip back-and-forth between pixels and points in contour code.
* :ghpull:`20106`: Shorten bracket arrowstyle docs.
* :ghpull:`20090`: Cleanup anchored_artists, inset_locator docstrings.
* :ghpull:`20097`: Use nullcontext more as do-nothing context manager.
* :ghpull:`20095`: Remove 3.3 ticker deprecations
* :ghpull:`20064`: Expire deprecation of AxesDivider defaulting to zero pads.
* :ghpull:`20091`: Cleanup tight_layout.
* :ghpull:`20069`: Don't make VBoxDivider inherit from HBoxDivider.
* :ghpull:`20078`: Remove some usages of OrderedDict
* :ghpull:`20077`: Expire Artist.set() property reordering
* :ghpull:`20070`: Harmonize descriptions of the 'anchor' parameter.
* :ghpull:`20011`: Move development dependencies to dependencies page
* :ghpull:`20072`: Improve labeling in simple_axes_divider1 example.
* :ghpull:`20063`: Deprecate some untested, never used axes_grid1 methods.
* :ghpull:`20065`: Deprecate AxesDivider.append_axes(..., add_to_figure=True).
* :ghpull:`20066`: Cleanup axes_divider docstrings, and detail calculations.
* :ghpull:`20059`: Include left and right titles for labeling axes in qt axes selector.
* :ghpull:`20052`: Remove axes_grid/axisartist APIs deprecated in Matplotlib 3.3.
* :ghpull:`18807`: make FancyArrow animatable
* :ghpull:`15281`: Don't use ImageGrid in demo_text_rotation_mode.
* :ghpull:`20051`: Remove offsetbox APIs deprecated in Matplotlib 3.3.
* :ghpull:`14854`: Improved dev installation documentation
* :ghpull:`18900`: Enh better colorbar axes
* :ghpull:`20042`: DOC: fix typos
* :ghpull:`13860`: Deprecate {Locator,Formatter}.set_{{view,data}_interval,bounds}.
* :ghpull:`20028`: Shorten the repr of scaling transforms.
* :ghpull:`20027`: Fix axvspan for drawing slices on polar plots.
* :ghpull:`20024`: Small fixes to latex-related docs.
* :ghpull:`20023`: Simplify _redo_transform_rel_fig.
* :ghpull:`20012`: Fix default theta tick locations for non-full-circle polar plots.
* :ghpull:`20021`: DOC: fix typos
* :ghpull:`20013`: Move restriction of polar theta scales to ThetaAxis._set_scale.
* :ghpull:`20010`: DOC: fix heading level for plot_types/stats
* :ghpull:`20000`: Remove ax fixture from category tests.
* :ghpull:`20007`: Correct minor typos in legend.py and autoscale.py
* :ghpull:`20005`: DOC: Fix numpydoc syntax, and parameters names.
* :ghpull:`19996`: Small simplification to RadialLocator.
* :ghpull:`19968`: ENH: draw no output
* :ghpull:`19657`: Allow Selectors to be dragged from anywhere within their patch
* :ghpull:`19304`: Add legend title font properties
* :ghpull:`19977`: Fix doc build
* :ghpull:`19974`: CI: update the ssh key used to push the devdocs
* :ghpull:`9888`: Add an Annulus patch class
* :ghpull:`13680`: Update seaborn style
* :ghpull:`19967`: ENH: add user-facing no-output draw
* :ghpull:`19765`: ENH: use canvas renderer in draw
* :ghpull:`19525`: Don't create page transparency group in pdf output (for pdftex compat).
* :ghpull:`19952`: avoid implicit np.array -> float conversion
* :ghpull:`19931`: Remove now unused patches to ttconv.
* :ghpull:`19934`: Deprecate drawtype to RectangleSelector
* :ghpull:`19941`: Simplify 3D random walk example
* :ghpull:`19926`: Move custom scales/custom projections docs to module docstrings.
* :ghpull:`19898`: Remove 3.3 backend deprecations
* :ghpull:`19901`: Remove 3.3 rcParam deprecations
* :ghpull:`19900`: Remove 3.3 text deprecations
* :ghpull:`19922`: Remove 3.3 deprecated modules
* :ghpull:`19925`: Include projections.geo in api docs.
* :ghpull:`19924`: Discourage use of imread & improve its docs.
* :ghpull:`19866`: Switch to asciiart for boxplot illustration.
* :ghpull:`19912`: Add symlog to figureoptions scalings
* :ghpull:`19564`: Micro-optimize type1font loading
* :ghpull:`19623`: FIX: Contour lines rendered incorrectly when closed loops
* :ghpull:`19902`: Implement ``ArtistList.__[r]add__``.
* :ghpull:`19904`: Don't set zoom/pan cursor for non-navigatable axes.
* :ghpull:`19909`: Use unicode when interactively displaying 3d azim/elev.
* :ghpull:`19905`: pyplot: do not apply kwargs twice in to x/yticklabels
* :ghpull:`19126`: Move pixel ratio handling into FigureCanvasBase
* :ghpull:`19897`: DOC/MNT fix make clean for plot_types
* :ghpull:`19858`: Move Line2D units handling to Axes & deprecate "units finalize" signal.
* :ghpull:`19889`: Include length in ArtistList repr.
* :ghpull:`19887`: Fix E265 in test files.
* :ghpull:`19882`: Use ax.set() for a more compact notation of styling in plot types docs
* :ghpull:`17231`: Fix errobar order
* :ghpull:`19703`: DOC:  new plot gallery
* :ghpull:`19825`: Factor out machinery for running subprocess tk tests.
* :ghpull:`19872`: Fix unit handling in errorbar for astropy.
* :ghpull:`19526`: Apply unit conversion early in errorbar().
* :ghpull:`19855`: Correct handle default backend.
* :ghpull:`18216`: Combine Axes.{lines,images,collections,patches,text,tables} into single list
* :ghpull:`19853`: Consistent corner variables names in widgets.py
* :ghpull:`19575`: Deprecate Text.get_prop_tup.
* :ghpull:`19810`: Remove JPEG-specific parameters and rcParams.
* :ghpull:`19666`: Change dictionary to list of tuples to permit duplicate keys
* :ghpull:`19400`: Fix tk event coordinates in the presence of scrollbars.
* :ghpull:`19603`: Remove matplotlibrc.template.
* :ghpull:`19835`: Merge v3.4.x into master
* :ghpull:`19821`: Hide stderr output from subprocess call in test suite.
* :ghpull:`19819`: Correct small typos in _axes.py and legend.py
* :ghpull:`19795`: Remove usetex-related APIs deprecated in Matplotlib 3.3.
* :ghpull:`19789`: Fix zorder handling for OffsetBoxes and subclasses.
* :ghpull:`19796`: Expire ````keymap.all_axes````-related deprecations.
* :ghpull:`19806`: Remove outdated api changes notes.
* :ghpull:`19801`: Expire deprecation of mathtext.fallback_to_cm.
* :ghpull:`12744`: Explicit plotorder
* :ghpull:`19681`: Merge branch 'v3.4.x' into master
* :ghpull:`18971`: Switch to setuptools_scm.
* :ghpull:`19727`: DOC: simplify API index
* :ghpull:`19760`: Speed up _delete_parameter.
* :ghpull:`19756`: Minor cleanup of documentation guide
* :ghpull:`19752`: Cleanup backend_tools docstrings, and minor refactorings.
* :ghpull:`19552`: Remove scalarmappable private update attributes
* :ghpull:`19728`: Factor out clip-path attr handling in backend_svg.
* :ghpull:`19540`: Share subplots() label visibility handling with label_outer().
* :ghpull:`19753`: Cleanup string formatting in backend_pgf.
* :ghpull:`19750`: Simplify maxdict implementation.
* :ghpull:`19749`: Remove unused _find_dedent_regex & _dedent_regex.
* :ghpull:`19751`: Update some matplotlib.lines docstrings.
* :ghpull:`13072`: ENH: add figure.legend; outside kwarg for better layout outside subplots
* :ghpull:`19740`: Minor backend docstring fixes.
* :ghpull:`19734`: Remove unused _fonts attribute in RendererSVG.
* :ghpull:`19733`: Reword AutoDateFormatter docs.
* :ghpull:`19718`: Small style fixes to matplotlibrc.template.
* :ghpull:`19679`: Add inheritance diagram to patches docs
* :ghpull:`19717`: Don't sort lexicographially entries in SVG output.
* :ghpull:`19716`: Fix colon placement in issue template.
* :ghpull:`19704`: Cleanup license page in docs
* :ghpull:`19487`: Deprecate unused \*args to print_<foo>.
* :ghpull:`19654`: Dedupe various method implementations using functools.partialmethod.
* :ghpull:`19655`: Deprecate Tick.apply_tickdir.
* :ghpull:`19653`: deprecate_privatize_attribute also works for privatizing methods.
* :ghpull:`19646`: Add angle setter/getter to Rectangle
* :ghpull:`19659`: Improve docs for rgba conversion
* :ghpull:`19641`: Fix Bbox.frozen() not copying minposx/minposy
* :ghpull:`19626`: Clean up E265 in examples.
* :ghpull:`19622`: Prefer Axes.remove() over Figure.delaxes() in docs.
* :ghpull:`19621`: Dedupe docstrings of Figure.{get_axes,axes}.
* :ghpull:`19600`: DOC: better intro for dates.py
* :ghpull:`19606`: Remove versionadded notes; correct doc link
* :ghpull:`19620`: Remove suggestion to remove rk4/rk45 integrators from streamplot.
* :ghpull:`19586`: DOC: more improve date example
* :ghpull:`19566`: add docstring to ax.quiver
* :ghpull:`19601`: Handle None entries in sys.modules.
* :ghpull:`19517`: Deprecate toplevel is_url, URL_REGEX helpers.
* :ghpull:`19570`: Dedupe part of error message in check_in_list.
* :ghpull:`14508`: Add force_zorder parameter
* :ghpull:`19585`: Deprecate trivial helpers in style.core.
* :ghpull:`19534`: BUG: fill_between with interpolate=True and NaN.
* :ghpull:`18887`: FIX: Generalize Colorbar Scale Handling
* :ghpull:`16788`: Adding png image return for inline backend figures with _repr_html_

Issues (187):

* :ghissue:`21518`: [Bug]: Datetime axis with usetex is unclear
* :ghissue:`21509`: [Bug]: Text sometimes is missing when figure saved to EPS
* :ghissue:`21569`: [Bug]: AttributeError: 'NoneType' object has no attribute 'dpi' after drawing and removing contours inside artist
* :ghissue:`21612`: [Bug]: Security.md out of date
* :ghissue:`21608`: [Doc]: ``ax.voxels`` links to wrong method.
* :ghissue:`21528`: [Doc]: Outdated QT_API docs
* :ghissue:`21517`: [Bug]: this example shows ok on matplotlib-3.4.3, but not in matplotlib-3.5.0 master of october 30th
* :ghissue:`21548`: [Bug]: blocking_input
* :ghissue:`21552`: [Bug]: eventplot cannot handle multiple datetime-based series
* :ghissue:`21441`: [Bug]: axes(position = [...]) behavior
* :ghissue:`10346`: Passing clim as keyword argument to pcolormesh does not change limits.
* :ghissue:`21480`: [Bug]: Subfigure breaks for some ``Gridspec`` slices when using ``constrained_layout``
* :ghissue:`20989`: [Bug]: regression with setting ticklabels for colorbars in matplotlib 3.5.0b1
* :ghissue:`21474`: [Doc]: Suggestion to use PIL.image.open is not a 1:1 replacement for imread
* :ghissue:`19634`: Multicursor docstring missing a Parameters Section
* :ghissue:`20847`: [Bug]: Contourf not filling contours.
* :ghissue:`21300`: [Bug]: zooming in on contour plot gives false extra contour lines
* :ghissue:`21466`: [Bug]: EPS export shows hidden tick labels when using tex for text rendering
* :ghissue:`21463`: [Bug]: Plotting lables with Greek latters in math mode produces Parsing error when plt.show() runs
* :ghissue:`20534`: Document formatting for for sections
* :ghissue:`21246`: [Doc]: Install info takes up too much room on new front page
* :ghissue:`21432`: [Doc]: Double clicking parameter name also highlights next item of text
* :ghissue:`21310`: [Bug]: contour on 3d plot fails if x and y are 1d and different lengths
* :ghissue:`18213`: Figure out why test_interactive_backend fails on Travis macOS
* :ghissue:`21090`: [MNT]: Should set_size_inches be updated to use device_pixel_ratio?
* :ghissue:`13948`: Allow colorbar.ax.set_ylim to set the colorbar limits?
* :ghissue:`21314`: Inconsistensy in ``pyplot.pcolormesh`` docstring regarding default value for ``shading``
* :ghissue:`21320`: [Doc]: Incorrect image caption in imshow() example
* :ghissue:`21311`: [Doc]: dead link for agg
* :ghissue:`20929`: [Bug]: PyPy Win64 wheels use incorrect version
* :ghissue:`21202`: [Bug]: python3.7/site-packages/matplotlib/ft2font.so: Undefined symbol "FT_Done_Glyph"
* :ghissue:`20932`: Qt Ctrl-C broken on windows
* :ghissue:`21230`: [Doc]: [source] links is devdocs are broken
* :ghissue:`20906`: 3.5.0b1: ax.contour generates different artists
* :ghissue:`21161`: [Doc]: In new docs, "Usage guide" entry in the top menu does not link to the "Usage guide"
* :ghissue:`21016`: [Bug] Error: 'PathCollection' object has no attribute 'do_3d_projection' when doing contourf in 3d with extend = 'both'
* :ghissue:`21135`: [Doc]: Data parameter description is not always replaced
* :ghissue:`4132`: Support clim kwarg in pcolor-type plots
* :ghissue:`21110`: Qt swapping ctrl and cmd on OSX
* :ghissue:`20912`: [ENH]: data kwarg support for mplot3d
* :ghissue:`15005`: Cleanup API for setting ticks
* :ghissue:`21095`: [ENH]: A data-type check is missed in cm.ScalarMappable.set_array()
* :ghissue:`7711`: Colorbar: changing the norm does not update the Formatter
* :ghissue:`18925`: Removing axes created by twiny() leads to an error
* :ghissue:`21057`: [Bug]: distutils deprecation
* :ghissue:`21024`: [ENH]: Cairo backends do not fully support HiDPI
* :ghissue:`20811`: Python 3.10 manylinux wheels
* :ghissue:`11509`: On making the rc-validators function know the rcParam affected instance
* :ghissue:`20516`: Sketch params ignored when using PGF backend
* :ghissue:`20963`: [Bug]: broken 'proportional' colorbar when using contourf+cmap+norm+extend
* :ghissue:`13974`: [DOC] Undocumented behavior in streamplot
* :ghissue:`16251`: API changes are too hard to find in the rendered docs
* :ghissue:`20770`: [Doc]: How to replicate behaviour of ``plt.gca(projection=...)``?
* :ghissue:`17052`: Colorbar update error with clim change in multi_image.py example
* :ghissue:`4387`: make ``Normalize`` objects notifiy scalar-mappables on changes
* :ghissue:`20001`: rename fig.draw_no_output
* :ghissue:`20936`: [Bug]: edgecolor 'auto' doesn't work properly
* :ghissue:`20909`: [Bug]: Animation error message
* :ghissue:`6864`: Add release dates to what's new page
* :ghissue:`20905`: [Bug]: error plotting z-axis array with np.nan -- does not plot with cmap option (surface plot)
* :ghissue:`20618`: BUG: Lost functionality of interactive selector update
* :ghissue:`20791`: [Bug]: spines and ticklabels
* :ghissue:`20723`: Adding a legend to a ``SubFigure`` doesn't work
* :ghissue:`20637`: PyPy wheels are pinned to v3.3, so pypy-based wheels for latest versions are not available
* :ghissue:`19160`: pypy failures
* :ghissue:`20385`: Add ']->' , '<-[' arrowstyles
* :ghissue:`19016`: Move away from set_ticklabels()
* :ghissue:`20800`: [Bug]: Setting backend in custom style sheet raises UserWarning
* :ghissue:`20809`: [Bug]: \Cap and \Cup in mathtext are inconsistent
* :ghissue:`20762`: [Doc]: Add external resources to devdoc landing page
* :ghissue:`18490`: Add a method to access the list of registered colormaps
* :ghissue:`20666`: Interactive SpanSelector no longer notifies when the selector is removed by an "empty" click
* :ghissue:`20552`: Expose legend's line: ``legline._legmarker`` as public
* :ghissue:`18391`: Bug? Legend Picking Not Working on Marker
* :ghissue:`11357`: Unable to retrieve marker from legend handle
* :ghissue:`2035`: legend marker update bug
* :ghissue:`19748`: Incorrect & inconsistent coloring in .imshow() with LogNorm
* :ghissue:`18735`: imshow padding around NaN values
* :ghissue:`7928`: [Bug] backend_bases.key_press_handler sneakily uses digit keys
* :ghissue:`20802`: Add ability to disable callbacks temporarily
* :ghissue:`16470`: Inconsistent Corner Masking w/ plot_surface
* :ghissue:`12395`: Rendering issue occurs when plotting 3D surfaces at a discontinuity
* :ghissue:`8222`: matplotlib 3D surface - gaps / holes in surface
* :ghissue:`4941`: Axes3d plot_surface not supporting masked arrays?
* :ghissue:`487`: Plotting masked arrays with plot_surface()
* :ghissue:`20794`: [Doc]: "Bachelor's degrees by gender" example is more or less dufte
* :ghissue:`20557`: Have ``[Source]`` in api docs link to github
* :ghissue:`20754`: [Doc]: legend guide should be OO
* :ghissue:`17770`: animation.save and fig.savefig interfere with each other and raise StopIteration
* :ghissue:`20785`: [Bug]: Colorbar creation from pcolormesh with cell specific alpha values
* :ghissue:`19843`: collection with alpha + colorer
* :ghissue:`20698`: collections.Collections offset improvements
* :ghissue:`17774`: Cannot make Latex plots when Pandas dataframe has underscore in variable name
* :ghissue:`19884`: Better document Axes.set()
* :ghissue:`20760`: [Bug]: subfigure position shifts on y-axis when x kwarg added to supxlabel
* :ghissue:`20296`: colorbar set_ticklabels - text properties not working
* :ghissue:`18191`: PostScript Type42 embedding is broken in various ways
* :ghissue:`11303`: Using fonttype 42 will make the produced PDF size considerably larger when the image has Chinese characters
* :ghissue:`20735`: The top level of the docs needs modification
* :ghissue:`20684`: make_keyword_only doesn't work for pyplot-wrapped methods
* :ghissue:`20635`: DOC: Document patch deprecation
* :ghissue:`17473`: Issue with appearance of RectangleSelector
* :ghissue:`20616`: Type 42 chars beyond BMP not displayed in PDF
* :ghissue:`20658`: MAINT: CircleCI build merged PRs
* :ghissue:`18312`: Add easily comparable version info to toplevel
* :ghissue:`20665`: interactive SpanSelector incorrectly forces axes limits to include 0
* :ghissue:`20614`: Missing kerning in PDFs with Type 42 font
* :ghissue:`20640`: Column direction breaks label mode L for AxesGrid.
* :ghissue:`20581`: Change in custom norm colour map display
* :ghissue:`20595`: Triple and quadruple dot Mathtext accents don't stack or align.
* :ghissue:`19755`: Avoid showing a black background before the plot is ready with Qt5agg backend
* :ghissue:`10235`: Why not get the same clear image on a high-resolution screen?
* :ghissue:`20479`: ColorbarAxes is an imperfect proxy for the Axes passed to Colorbar
* :ghissue:`18965`: Figure options with qt backend breaks
* :ghissue:`19256`: New Styling for Sliders
* :ghissue:`14148`: zorder ignored in mplot3d
* :ghissue:`20523`: plot_directive is confused by include directives, part 2 (context option)
* :ghissue:`17860`: Plot directive may be confused by ``..include::``
* :ghissue:`19431`: Tricontour documentation and examples should be updated in line with contour
* :ghissue:`20508`: rcParams['axes.autolimit_mode'] = 'round_numbers' is broken
* :ghissue:`20289`: Simplify font setting in usetex mode
* :ghissue:`20370`: Test Coverage for TextBox
* :ghissue:`20522`: Improve 'Writing ReST Pages' section on docs
* :ghissue:`19259`: Set legend title font properties
* :ghissue:`20049`: add legend.labelcolor "argument" to mplstyle stylesheet
* :ghissue:`20452`: Wrong/not useful error message when plotting incompatible x and y
* :ghissue:`20266`: "$$" can not be displayed by ax.text()
* :ghissue:`20517`: Wrong shape of Z in documentation of contour
* :ghissue:`19423`: Switch to pydata-sphinx-theme
* :ghissue:`20435`: Legend Text's ``axes`` attribute is ``None``
* :ghissue:`20379`: Change name of variables in histogram example
* :ghissue:`20440`: Wrong text vertical position with LaTeX enabled
* :ghissue:`10042`: Inconsistent use of graphicx and color packages in LaTeX preambles
* :ghissue:`4482`: PGF Backend: "Dimension too large" error while processing log-scale plot
* :ghissue:`20324`: New colorbar doesn't handle norms without a scale properly...
* :ghissue:`17508`: Quadmesh.set_array should validate dimensions
* :ghissue:`20372`: Incorrect axes positioning in axes_grid.Grid with direction='column'
* :ghissue:`19419`: Dev version hard to check
* :ghissue:`17310`: Matplotlib git master version fails to pass serveral pytest's tests.
* :ghissue:`7742`: plot_date() after axhline() doesn't rescale axes
* :ghissue:`20322`: QuadMesh default for shading inadvertently changed.
* :ghissue:`9653`: SVG savefig + LaTeX extremely slow on macOS
* :ghissue:`20099`: ``fontset`` from ``mathtext`` throwing error after setting Text ``font=``
* :ghissue:`18399`: How to get Quadmesh coordinates
* :ghissue:`15432`: Add support in matplotlib.pyplot.imshow for float16
* :ghissue:`20298`: plt.quiver linestyle option doesn't work?.....
* :ghissue:`19075`: Qt backend's Figure options to support axis units
* :ghissue:`15039`: NonUniformImage wrong image when using large values for axis
* :ghissue:`18499`: Saving as a pdf ignores ``set_clip_path`` when there is more than one of them.
* :ghissue:`15600`: Grid disappear after pcolormesh apply
* :ghissue:`20080`: API docs currently include entries for class ``__dict__``, ``__module__``, ``__weakref__``
* :ghissue:`20159`: Zoom in NavigationToolbar2Tk stops working after updating the canvas figure.
* :ghissue:`17007`: Computer Modern Glyph Error
* :ghissue:`19494`: Update azure ubuntu images to 18.04, or update texlive in CI
* :ghissue:`18841`: ScalarMappable should copy its input and allow non-arrays
* :ghissue:`20121`: Adding cmocean and CMasher to the colormaps tutorial
* :ghissue:`18154`: Deprecate plot_date()
* :ghissue:`7413`: Autoscaling has fundamental problems
* :ghissue:`19627`: Replace use of Python/C API with numpy::array_view in _tri.cpp and qhull_wrap.c
* :ghissue:`19111`: plot_directive errantly tries to run code
* :ghissue:`11007`: BUG: Plot directive fails if its content ends with a normal text line (sphinxext)
* :ghissue:`19929`: Selecting axes when customizing gives <anonymous AxesSubplot>
* :ghissue:`19578`: bisect very hard with rcParam changes
* :ghissue:`19506`: Allow saving PDF files without a page group
* :ghissue:`19906`: symlog is not in scale setting
* :ghissue:`19568`: Contour lines are rendered incorrectly when closed loops
* :ghissue:`19890`: Should ArtistList implement ``__add__``?
* :ghissue:`14405`: ENH: Add HiDPI physical to logical pixel ratio property
* :ghissue:`17139`: errorbar doesn't follow plot order
* :ghissue:`18277`: Create new sphinx gallery page for "Chart Types"
* :ghissue:`15446`: the python script in Catalina dock icon display wrong
* :ghissue:`19848`: ValueError: Key backend: '' is not a valid value for backend
* :ghissue:`1622`: zorder is not respected by all parts of ``errorbar``
* :ghissue:`17247`: Move towards making Axes.lines, Axes.patches, ... read-only views of a single child list.
* :ghissue:`19842`: UserWarning: "Trying to register the cmap '...' which already exists" is not very helpful.
* :ghissue:`7962`: pip interprets Matplotlib dev version as stable
* :ghissue:`19607`: Curves with same label not appearing in Figure options (only the last one)
* :ghissue:`17584`: NavigationToolbar2Tk behave unexpected when using it in with Tkinter Canvas
* :ghissue:`19838`: Unexpected behaviour of imshow default interpolation
* :ghissue:`7650`: anchored_artists don't support zorder argument
* :ghissue:`19687`: License doc cleanup
* :ghissue:`19635`: Multicursor updates to events for any axis
* :ghissue:`17967`: Document how to use mathtext to obtain unicode minus instead of dashes for negative numbers
* :ghissue:`8519`: Closed figures linger in memory
* :ghissue:`14175`: RFC: Allow users to force zorder in 3D plots
* :ghissue:`19464`: Quiver docs don't have a return section
* :ghissue:`18986`: fill_between issue with interpolation & NaN
.. _whats-new-1-2:


What's new in Matplotlib 1.2 (Nov 9, 2012)
==========================================

.. contents:: Table of Contents
   :depth: 2


.. note::

   matplotlib 1.2 supports Python 2.6, 2.7, and 3.1

Python 3.x support
------------------

Matplotlib 1.2 is the first version to support Python 3.x,
specifically Python 3.1 and 3.2.  To make this happen in a reasonable
way, we also had to drop support for Python versions earlier than 2.6.

This work was done by Michael Droettboom, the Cape Town Python Users'
Group, many others and supported financially in part by the SAGE
project.

The following GUI backends work under Python 3.x: Gtk3Cairo, Qt4Agg,
TkAgg and MacOSX.  The other GUI backends do not yet have adequate
bindings for Python 3.x, but continue to work on Python 2.6 and 2.7,
particularly the Qt and QtAgg backends (which have been
deprecated). The non-GUI backends, such as PDF, PS and SVG, work on
both Python 2.x and 3.x.

Features that depend on the Python Imaging Library, such as JPEG
handling, do not work, since the version of PIL for Python 3.x is not
sufficiently mature.

PGF/TikZ backend
----------------
Peter Würtz wrote a backend that allows matplotlib to export figures as
drawing commands for LaTeX. These can be processed by PdfLaTeX, XeLaTeX or
LuaLaTeX using the PGF/TikZ package. Usage examples and documentation are
found in :doc:`/tutorials/text/pgf`.

.. image:: /_static/pgf_preamble.*

Locator interface
-----------------

Philip Elson exposed the intelligence behind the tick Locator classes with a
simple interface. For instance, to get no more than 5 sensible steps which
span the values 10 and 19.5::

    >>> import matplotlib.ticker as mticker
    >>> locator = mticker.MaxNLocator(nbins=5)
    >>> print(locator.tick_values(10, 19.5))
    [ 10.  12.  14.  16.  18.  20.]

Tri-Surface Plots
-----------------

Damon McDougall added a new plotting method for the
:mod:`~mpl_toolkits.mplot3d` toolkit called
:meth:`~mpl_toolkits.mplot3d.axes3d.Axes3D.plot_trisurf`.

.. figure:: ../../gallery/mplot3d/images/sphx_glr_trisurf3d_001.png
   :target: ../../gallery/mplot3d/trisurf3d.html
   :align: center
   :scale: 50

Control the lengths of colorbar extensions
------------------------------------------

Andrew Dawson added a new keyword argument *extendfrac* to
:meth:`~matplotlib.pyplot.colorbar` to control the length of
minimum and maximum colorbar extensions.

.. plot::

    import matplotlib.pyplot as plt
    import numpy as np

    x = y = np.linspace(0., 2*np.pi, 100)
    X, Y = np.meshgrid(x, y)
    Z = np.cos(X) * np.sin(0.5*Y)

    clevs = [-.75, -.5, -.25, 0., .25, .5, .75]
    cmap = plt.cm.get_cmap(name='jet', lut=8)

    ax1 = plt.subplot(211)
    cs1 = plt.contourf(x, y, Z, clevs, cmap=cmap, extend='both')
    cb1 = plt.colorbar(orientation='horizontal', extendfrac=None)
    cb1.set_label('Default length colorbar extensions')

    ax2 = plt.subplot(212)
    cs2 = plt.contourf(x, y, Z, clevs, cmap=cmap, extend='both')
    cb2 = plt.colorbar(orientation='horizontal', extendfrac='auto')
    cb2.set_label('Custom length colorbar extensions')

    plt.show()


Figures are picklable
---------------------

Philip Elson added an experimental feature to make figures picklable
for quick and easy short-term storage of plots. Pickle files
are not designed for long term storage, are unsupported when restoring a pickle
saved in another matplotlib version and are insecure when restoring a pickle
from an untrusted source. Having said this, they are useful for short term
storage for later modification inside matplotlib.


Set default bounding box in matplotlibrc
------------------------------------------

Two new defaults are available in the matplotlibrc configuration file:
``savefig.bbox``, which can be set to 'standard' or 'tight', and
``savefig.pad_inches``, which controls the bounding box padding.


New Boxplot Functionality
-------------------------

Users can now incorporate their own methods for computing the median and its
confidence intervals into the `~.Axes.boxplot` method. For
every column of data passed to boxplot, the user can specify an accompanying
median and confidence interval.

.. figure:: ../../gallery/statistics/images/sphx_glr_boxplot_demo_003.png
   :target: ../../gallery/statistics/boxplot_demo.html
   :align: center
   :scale: 50

New RC parameter functionality
------------------------------

Matthew Emmett added a function and a context manager to help manage RC
parameters: :func:`~matplotlib.rc_file` and :class:`~matplotlib.rc_context`.
To load RC parameters from a file::

  >>> mpl.rc_file('mpl.rc')

To temporarily use RC parameters::

  >>> with mpl.rc_context(fname='mpl.rc', rc={'text.usetex': True}):
  >>>     ...


Streamplot
----------

Tom Flannaghan and Tony Yu have added a new
:meth:`~matplotlib.pyplot.streamplot` function to plot the streamlines of
a vector field. This has been a long-requested feature and complements the
existing :meth:`~matplotlib.pyplot.quiver` function for plotting vector fields.
In addition to simply plotting the streamlines of the vector field,
:meth:`~matplotlib.pyplot.streamplot` allows users to map the colors and/or
line widths of the streamlines to a separate parameter, such as the speed or
local intensity of the vector field.

.. figure:: ../../gallery/images_contours_and_fields/images/sphx_glr_plot_streamplot_001.png
   :target: ../../gallery/images_contours_and_fields/plot_streamplot.html
   :align: center
   :scale: 50

New hist functionality
----------------------

Nic Eggert added a new *stacked* kwarg to :meth:`~matplotlib.pyplot.hist` that
allows creation of stacked histograms using any of the histogram types.
Previously, this functionality was only available by using the "barstacked"
histogram type. Now, when ``stacked=True`` is passed to the function, any of the
histogram types can be stacked. The "barstacked" histogram type retains its
previous functionality for backwards compatibility.

Updated shipped dependencies
----------------------------

The following dependencies that ship with matplotlib and are
optionally installed alongside it have been updated:

- `pytz <http://pytz.sourceforge.net/>`_ 2012d
- `dateutil <http://labix.org/python-dateutil>`_ 1.5 on Python 2.x,
   and 2.1 on Python 3.x


Face-centred colors in tripcolor plots
--------------------------------------

Ian Thomas extended :meth:`~matplotlib.pyplot.tripcolor` to allow one color
value to be specified for each triangular face rather than for each point in
a triangulation.

.. figure:: ../../gallery/images_contours_and_fields/images/sphx_glr_tripcolor_demo_001.png
   :target: ../../gallery/images_contours_and_fields/tripcolor_demo.html
   :align: center
   :scale: 50

Hatching patterns in filled contour plots, with legends
-------------------------------------------------------

Phil Elson added support for hatching to
:func:`~matplotlib.pyplot.contourf`, together with the ability
to use a legend to identify contoured ranges.

.. figure:: ../../gallery/images_contours_and_fields/images/sphx_glr_contourf_hatching_001.png
   :target: ../../gallery/images_contours_and_fields/contourf_hatching.html
   :align: center
   :scale: 50

Known issues in the matplotlib 1.2 release
------------------------------------------

- When using the Qt4Agg backend with IPython 0.11 or later, the save
  dialog will not display.  This should be fixed in a future version
  of IPython.
.. _whats-new-1-0:

What's new in Matplotlib 1.0 (Jul 06, 2010)
===========================================

.. contents:: Table of Contents
   :depth: 2

.. _whats-new-html5:

HTML5/Canvas backend
--------------------

Simon Ratcliffe and Ludwig Schwardt have released an `HTML5/Canvas
<https://code.google.com/archive/p/mplh5canvas>`__ backend for matplotlib.  The
backend is almost feature complete, and they have done a lot of work
comparing their html5 rendered images with our core renderer Agg.  The
backend features client/server interactive navigation of matplotlib
figures in an html5 compliant browser.

Sophisticated subplot grid layout
---------------------------------

Jae-Joon Lee has written :mod:`~matplotlib.gridspec`, a new module for
doing complex subplot layouts, featuring row and column spans and
more.  See :doc:`/tutorials/intermediate/arranging_axes` for a tutorial
overview.

.. figure:: ../../gallery/userdemo/images/sphx_glr_demo_gridspec01_001.png
   :target: ../../gallery/userdemo/demo_gridspec01.html
   :align: center
   :scale: 50

Easy pythonic subplots
-----------------------

Fernando Perez got tired of all the boilerplate code needed to create a
figure and multiple subplots when using the matplotlib API, and wrote
a :func:`~matplotlib.pyplot.subplots` helper function.  Basic usage
allows you to create the figure and an array of subplots with numpy
indexing (starts with 0).  e.g.::

  fig, axarr = plt.subplots(2, 2)
  axarr[0,0].plot([1,2,3])   # upper, left

See :doc:`/gallery/subplots_axes_and_figures/subplot` for several code examples.

Contour fixes and and triplot
-----------------------------

Ian Thomas has fixed a long-standing bug that has vexed our most
talented developers for years.  :func:`~matplotlib.pyplot.contourf`
now handles interior masked regions, and the boundaries of line and
filled contours coincide.

Additionally, he has contributed a new module :mod:`~matplotlib.tri` and
helper function :func:`~matplotlib.pyplot.triplot` for creating and
plotting unstructured triangular grids.

.. figure:: ../../gallery/images_contours_and_fields/images/sphx_glr_triplot_demo_001.png
   :target: ../../gallery/images_contours_and_fields/triplot_demo.html
   :align: center
   :scale: 50

multiple calls to show supported
--------------------------------

A long standing request is to support multiple calls to
:func:`~matplotlib.pyplot.show`.  This has been difficult because it
is hard to get consistent behavior across operating systems, user
interface toolkits and versions.  Eric Firing has done a lot of work
on rationalizing show across backends, with the desired behavior to
make show raise all newly created figures and block execution until
they are closed.  Repeated calls to show should raise newly created
figures since the last call.  Eric has done a lot of testing on the
user interface toolkits and versions and platforms he has access to,
but it is not possible to test them all, so please report problems to
the `mailing list
<https://mail.python.org/mailman/listinfo/matplotlib-users>`__
and `bug tracker
<https://github.com/matplotlib/matplotlib/issues>`__.


mplot3d graphs can be embedded in arbitrary axes
------------------------------------------------

You can now place an mplot3d graph into an arbitrary axes location,
supporting mixing of 2D and 3D graphs in the same figure, and/or
multiple 3D graphs in a single figure, using the "projection" keyword
argument to add_axes or add_subplot.  Thanks Ben Root.

.. plot::

    from mpl_toolkits.mplot3d.axes3d import get_test_data

    fig = plt.figure()

    X = np.arange(-5, 5, 0.25)
    Y = np.arange(-5, 5, 0.25)
    X, Y = np.meshgrid(X, Y)
    R = np.sqrt(X**2 + Y**2)
    Z = np.sin(R)
    ax = fig.add_subplot(1, 2, 1, projection='3d')
    surf = ax.plot_surface(X, Y, Z, rstride=1, cstride=1, cmap='viridis',
                           linewidth=0, antialiased=False)
    ax.set_zlim3d(-1.01, 1.01)

    fig.colorbar(surf, shrink=0.5, aspect=5)

    X, Y, Z = get_test_data(0.05)
    ax = fig.add_subplot(1, 2, 2, projection='3d')
    ax.plot_wireframe(X, Y, Z, rstride=10, cstride=10)

    plt.show()

tick_params
-----------

Eric Firing wrote tick_params, a convenience method for changing the
appearance of ticks and tick labels. See pyplot function
:func:`~matplotlib.pyplot.tick_params` and associated Axes method
:meth:`~matplotlib.axes.Axes.tick_params`.

Lots of performance and feature enhancements
--------------------------------------------


* Faster magnification of large images, and the ability to zoom in to
  a single pixel

* Local installs of documentation work better

* Improved "widgets" -- mouse grabbing is supported

* More accurate snapping of lines to pixel boundaries

* More consistent handling of color, particularly the alpha channel,
  throughout the API

Much improved software carpentry
--------------------------------

The matplotlib trunk is probably in as good a shape as it has ever
been, thanks to improved `software carpentry
<https://software-carpentry.org/>`__.  We now have a `buildbot
<https://buildbot.net>`__ which runs a suite of `nose
<http://code.google.com/p/python-nose/>`__ regression tests on every
svn commit, auto-generating a set of images and comparing them against
a set of known-goods, sending emails to developers on failures with a
pixel-by-pixel image comparison.  Releases and release
bugfixes happen in branches, allowing active new feature development
to happen in the trunk while keeping the release branches stable.
Thanks to Andrew Straw, Michael Droettboom and other matplotlib
developers for the heavy lifting.

Bugfix marathon
---------------

Eric Firing went on a bug fixing and closing marathon, closing over 100 bugs on
the (now-closed) SourceForge bug tracker with help from Jae-Joon Lee, Michael
Droettboom, Christoph Gohlke and Michiel de Hoon.
.. _resources-index:

.. redirect-from:: /resources/index

******************
External resources
******************


============================
Books, chapters and articles
============================

* `Mastering matplotlib
  <https://www.packtpub.com/product/mastering-matplotlib/9781783987542>`_
  by Duncan M. McGreggor

* `Interactive Applications Using Matplotlib
  <https://www.packtpub.com/product/interactive-applications-using-matplotlib/9781783988846>`_
  by Benjamin Root

* `Matplotlib for Python Developers
  <https://www.packtpub.com/product/matplotlib-for-python-developers/9781847197900>`_
  by Sandro Tosi

* `Matplotlib chapter <http://www.aosabook.org/en/matplotlib.html>`_
  by John Hunter and Michael Droettboom in The Architecture of Open Source
  Applications

* `Ten Simple Rules for Better Figures
  <https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1003833>`_
  by Nicolas P. Rougier, Michael Droettboom and Philip E. Bourne

* `Learning Scientific Programming with Python chapter 7
  <https://scipython.com/book/chapter-7-matplotlib/>`_
  by Christian Hill

* `Hands-On Data Analysis with Pandas, chapters 5 and 6
  <https://www.packtpub.com/product/hands-on-data-analysis-with-pandas-second-edition/9781800563452>`_
  by Stefanie Molin

======
Videos
======

* `Plotting with matplotlib <https://www.youtube.com/watch?v=P7SVi0YTIuE>`_
  by Mike Müller

* `Introduction to NumPy and Matplotlib
  <https://www.youtube.com/watch?v=3Fp1zn5ao2M&feature=plcp>`_ by Eric Jones

* `Anatomy of Matplotlib
  <https://conference.scipy.org/scipy2013/tutorial_detail.php?id=103>`_
  by Benjamin Root

* `Data Visualization Basics with Python (O'Reilly)
  <https://www.oreilly.com/library/view/data-visualization-basics/9781771375573/>`_
  by Randal S. Olson
* `Matplotlib Introduction
  <https://www.youtube.com/playlist?list=PLeo1K3hjS3uu4Lr8_kro2AqaO6CFYgKOl>`_
  by codebasics
* `Matplotlib
  <https://www.youtube.com/watch?v=wB9C0Mz9gSo>`_
  by Derek Banas

=========
Tutorials
=========


* `The Python Graph Gallery <https://www.python-graph-gallery.com>`_
  by Yan Holtz
  
* `Matplotlib tutorial <https://www.labri.fr/perso/nrougier/teaching/matplotlib/>`_
  by Nicolas P. Rougier

* `Anatomy of Matplotlib - IPython Notebooks
  <https://github.com/WeatherGod/AnatomyOfMatplotlib>`_
  by Benjamin Root

* `Beyond the Basics: Data Visualization in Python
  <https://github.com/stefmolin/python-data-viz-workshop>`_
  by Stefanie Molin
.. redirect-from:: /users/installing

############
Installation
############

==============================
Installing an official release
==============================

Matplotlib releases are available as wheel packages for macOS, Windows and
Linux on `PyPI <https://pypi.org/project/matplotlib/>`_. Install it using
``pip``:

.. code-block:: sh

  python -m pip install -U pip
  python -m pip install -U matplotlib

If this command results in Matplotlib being compiled from source and
there's trouble with the compilation, you can add ``--prefer-binary`` to
select the newest version of Matplotlib for which there is a
precompiled wheel for your OS and Python.

.. note::

   The following backends work out of the box: Agg, ps, pdf, svg

   Python is typically shipped with tk bindings which are used by
   TkAgg.

   For support of other GUI frameworks, LaTeX rendering, saving
   animations and a larger selection of file formats, you can
   install :ref:`optional_dependencies`.

=========================
Third-party distributions
=========================

Various third-parties provide Matplotlib for their environments.

Conda packages
==============
Matplotlib is available both via the *anaconda main channel*

.. code-block:: sh

   conda install matplotlib

as well as via the *conda-forge community channel*

.. code-block:: sh

   conda install -c conda-forge matplotlib

Python distributions
====================

Matplotlib is part of major Python distributions:

- `Anaconda <https://www.anaconda.com/>`_

- `ActiveState ActivePython
  <https://www.activestate.com/products/python/downloads/>`_

- `WinPython <https://winpython.github.io/>`_

Linux package manager
=====================

If you are using the Python version that comes with your Linux distribution,
you can install Matplotlib via your package manager, e.g.:

* Debian / Ubuntu: ``sudo apt-get install python3-matplotlib``
* Fedora: ``sudo dnf install python3-matplotlib``
* Red Hat: ``sudo yum install python3-matplotlib``
* Arch: ``sudo pacman -S python-matplotlib``

.. redirect-from:: /users/installing/installing_source

.. _install_from_source:

======================
Installing from source
======================

If you are interested in contributing to Matplotlib development,
running the latest source code, or just like to build everything
yourself, it is not difficult to build Matplotlib from source.

First you need to install the :ref:`dependencies`.

A C compiler is required.  Typically, on Linux, you will need ``gcc``, which
should be installed using your distribution's package manager; on macOS, you
will need xcode_; on Windows, you will need Visual Studio 2015 or later.

.. _xcode: https://guide.macports.org/chunked/installing.html#installing.xcode

The easiest way to get the latest development version to start contributing
is to go to the git `repository <https://github.com/matplotlib/matplotlib>`_
and run::

  git clone https://github.com/matplotlib/matplotlib.git

or::

  git clone git@github.com:matplotlib/matplotlib.git

If you're developing, it's better to do it in editable mode. The reason why
is that pytest's test discovery only works for Matplotlib
if installation is done this way. Also, editable mode allows your code changes
to be instantly propagated to your library code without reinstalling (though
you will have to restart your python process / kernel)::

  cd matplotlib
  python -m pip install -e .

If you're not developing, it can be installed from the source directory with
a simple (just replace the last step)::

  python -m pip install .

To run the tests you will need to install some additional dependencies::

  python -m pip install -r requirements/dev/dev-requirements.txt

Then, if you want to update your Matplotlib at any time, just do::

  git pull

When you run ``git pull``, if the output shows that only Python files have
been updated, you are all set. If C files have changed, you need to run ``pip
install -e .`` again to compile them.

There is more information on :ref:`using git <using-git>` in the developer
docs.

.. warning::

  The following instructions in this section are for very custom
  installations of Matplotlib. Proceed with caution because these instructions
  may result in your build producing unexpected behavior and/or causing
  local testing to fail.

If you would like to build from a tarball, grab the latest *tar.gz* release
file from `the PyPI files page <https://pypi.org/project/matplotlib/>`_.

We provide a `mplsetup.cfg`_ file which you can use to customize the build
process. For example, which default backend to use, whether some of the
optional libraries that Matplotlib ships with are installed, and so on.  This
file will be particularly useful to those packaging Matplotlib.

.. _mplsetup.cfg: https://raw.githubusercontent.com/matplotlib/matplotlib/main/mplsetup.cfg.template

If you are building your own Matplotlib wheels (or sdists) on Windows, note
that any DLLs that you copy into the source tree will be packaged too.

==========================
Installing for development
==========================
See :ref:`installing_for_devs`.

.. redirect-from:: /faq/installing_faq
.. redirect-from:: /users/faq/installing_faq

.. _installing-faq:

==========================
Frequently asked questions
==========================

.. contents::
   :backlinks: none
   :local:

Report a compilation problem
============================

See :ref:`reporting-problems`.

Matplotlib compiled fine, but nothing shows up when I use it
============================================================

The first thing to try is a :ref:`clean install <clean-install>` and see if
that helps.  If not, the best way to test your install is by running a script,
rather than working interactively from a python shell or an integrated
development environment such as :program:`IDLE` which add additional
complexities. Open up a UNIX shell or a DOS command prompt and run, for
example::

   python -c "from pylab import *; set_loglevel('debug'); plot(); show()"

This will give you additional information about which backends Matplotlib is
loading, version information, and more. At this point you might want to make
sure you understand Matplotlib's :doc:`configuration </tutorials/introductory/customizing>`
process, governed by the :file:`matplotlibrc` configuration file which contains
instructions within and the concept of the Matplotlib backend.

If you are still having trouble, see :ref:`reporting-problems`.

.. _clean-install:

How to completely remove Matplotlib
===================================

Occasionally, problems with Matplotlib can be solved with a clean
installation of the package.  In order to fully remove an installed Matplotlib:

1. Delete the caches from your :ref:`Matplotlib configuration directory
   <locating-matplotlib-config-dir>`.

2. Delete any Matplotlib directories or eggs from your :ref:`installation
   directory <locating-matplotlib-install>`.

OSX Notes
=========

.. _which-python-for-osx:

Which python for OSX?
---------------------

Apple ships OSX with its own Python, in ``/usr/bin/python``, and its own copy
of Matplotlib. Unfortunately, the way Apple currently installs its own copies
of NumPy, Scipy and Matplotlib means that these packages are difficult to
upgrade (see `system python packages`_).  For that reason we strongly suggest
that you install a fresh version of Python and use that as the basis for
installing libraries such as NumPy and Matplotlib.  One convenient way to
install Matplotlib with other useful Python software is to use the Anaconda_
Python scientific software collection, which includes Python itself and a
wide range of libraries; if you need a library that is not available from the
collection, you can install it yourself using standard methods such as *pip*.
See the Ananconda web page for installation support.

.. _system python packages:
    https://github.com/MacPython/wiki/wiki/Which-Python#system-python-and-extra-python-packages
.. _Anaconda: https://www.anaconda.com/

Other options for a fresh Python install are the standard installer from
`python.org <https://www.python.org/downloads/mac-osx/>`_, or installing
Python using a general OSX package management system such as `homebrew
<https://brew.sh/>`_ or `macports <https://www.macports.org>`_.  Power users on
OSX will likely want one of homebrew or macports on their system to install
open source software packages, but it is perfectly possible to use these
systems with another source for your Python binary, such as Anaconda
or Python.org Python.

.. _install_osx_binaries:

Installing OSX binary wheels
----------------------------

If you are using Python from https://www.python.org, Homebrew, or Macports,
then you can use the standard pip installer to install Matplotlib binaries in
the form of wheels.

pip is installed by default with python.org and Homebrew Python, but needs to
be manually installed on Macports with ::

   sudo port install py38-pip

Once pip is installed, you can install Matplotlib and all its dependencies with
from the Terminal.app command line::

   python3 -mpip install matplotlib

(``sudo python3.6 ...`` on Macports).

You might also want to install IPython or the Jupyter notebook (``python3 -mpip
install ipython notebook``).

Checking your installation
--------------------------

The new version of Matplotlib should now be on your Python "path".  Check this
at the Terminal.app command line::

  python3 -c 'import matplotlib; print(matplotlib.__version__, matplotlib.__file__)'

You should see something like ::

  3.0.0 /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/matplotlib/__init__.py

where ``3.0.0`` is the Matplotlib version you just installed, and the path
following depends on whether you are using Python.org Python, Homebrew or
Macports.  If you see another version, or you get an error like ::

    Traceback (most recent call last):
      File "<string>", line 1, in <module>
    ImportError: No module named matplotlib

then check that the Python binary is the one you expected by running ::

  which python3

If you get a result like ``/usr/bin/python...``, then you are getting the
Python installed with OSX, which is probably not what you want.  Try closing
and restarting Terminal.app before running the check again. If that doesn't fix
the problem, depending on which Python you wanted to use, consider reinstalling
Python.org Python, or check your homebrew or macports setup.  Remember that
the disk image installer only works for Python.org Python, and will not get
picked up by other Pythons.  If all these fail, please :ref:`let us know
<reporting-problems>`.
Getting started
===============

Installation quick-start
------------------------

.. container:: twocol

    .. container::

        Install using `pip <https://pypi.org/project/matplotlib>`__:

        .. code-block:: bash

            pip install matplotlib

    .. container::

        Install using `conda <https://docs.continuum.io/anaconda/>`__:

        .. code-block:: bash

            conda install matplotlib

Further details are available in the :doc:`Installation Guide </users/installing/index>`.


Draw a first plot
-----------------

Here is a minimal example plot:

.. plot::
   :include-source:
   :align: center

   import matplotlib.pyplot as plt
   import numpy as np

   x = np.linspace(0, 2 * np.pi, 200)
   y = np.sin(x)

   fig, ax = plt.subplots()
   ax.plot(x, y)
   plt.show()

If a plot does not show up please check :ref:`troubleshooting-faq`.

Where to go next
----------------

- Check out :doc:`Plot types </plot_types/index>` to get an overview of the
  types of plots you can create with Matplotlib.
- Learn Matplotlib from the ground up in the
  :doc:`Quick-start guide </tutorials/introductory/quick_start>`.
.. _interactive_figures_and_eventloops:

.. redirect-from:: /users/interactive_guide

.. currentmodule:: matplotlib


================================================
Interactive figures and asynchronous programming
================================================

Matplotlib supports rich interactive figures by embedding figures into
a GUI window.  The basic interactions of panning and zooming in an
Axes to inspect your data is 'baked in' to Matplotlib.  This is
supported by a full mouse and keyboard event handling system that
you can use to build sophisticated interactive graphs.

This guide is meant to be an introduction to the low-level details of
how Matplotlib integration with a GUI event loop works.  For a more
practical introduction to the Matplotlib event API see :ref:`event
handling system <event-handling-tutorial>`, `Interactive Tutorial
<https://github.com/matplotlib/interactive_tutorial>`__, and
`Interactive Applications using Matplotlib
<http://www.amazon.com/Interactive-Applications-using-Matplotlib-Benjamin/dp/1783988843>`__.

Event loops
===========

Fundamentally, all user interaction (and networking) is implemented as
an infinite loop waiting for events from the user (via the OS) and
then doing something about it.  For example, a minimal Read Evaluate
Print Loop (REPL) is ::

  exec_count = 0
  while True:
      inp = input(f"[{exec_count}] > ")        # Read
      ret = eval(inp)                          # Evaluate
      print(ret)                               # Print
      exec_count += 1                          # Loop


This is missing many niceties (for example, it exits on the first
exception!), but is representative of the event loops that underlie
all terminals, GUIs, and servers [#f1]_.  In general the *Read* step
is waiting on some sort of I/O -- be it user input or the network --
while the *Evaluate* and *Print* are responsible for interpreting the
input and then **doing** something about it.

In practice we interact with a framework that provides a mechanism to
register callbacks to be run in response to specific events rather
than directly implement the I/O loop [#f2]_.  For example "when the
user clicks on this button, please run this function" or "when the
user hits the 'z' key, please run this other function".  This allows
users to write reactive, event-driven, programs without having to
delve into the nitty-gritty [#f3]_ details of I/O.  The core event loop
is sometimes referred to as "the main loop" and is typically started,
depending on the library, by methods with names like ``_exec``,
``run``, or ``start``.


All GUI frameworks (Qt, Wx, Gtk, tk, OSX, or web) have some method of
capturing user interactions and passing them back to the application
(for example ``Signal`` / ``Slot`` framework in Qt) but the exact
details depend on the toolkit.  Matplotlib has a :ref:`backend
<what-is-a-backend>` for each GUI toolkit we support which uses the
toolkit API to bridge the toolkit UI events into Matplotlib's :ref:`event
handling system <event-handling-tutorial>`.  You can then use
`.FigureCanvasBase.mpl_connect` to connect your function to
Matplotlib's event handling system.  This allows you to directly
interact with your data and write GUI toolkit agnostic user
interfaces.


.. _cp_integration:

Command prompt integration
==========================

So far, so good.  We have the REPL (like the IPython terminal) that
lets us interactively send code to the interpreter and get results
back.  We also have the GUI toolkit that runs an event loop waiting
for user input and lets us register functions to be run when that
happens.  However, if we want to do both we have a problem: the prompt
and the GUI event loop are both infinite loops that each think *they*
are in charge!  In order for both the prompt and the GUI windows to be
responsive we need a method to allow the loops to 'timeshare' :

1. let the GUI main loop block the python process when you want
   interactive windows
2. let the CLI main loop block the python process and intermittently
   run the GUI loop
3. fully embed python in the GUI (but this is basically writing a full
   application)

.. _cp_block_the_prompt:

Blocking the prompt
-------------------

.. autosummary::
   :template: autosummary.rst
   :nosignatures:

   pyplot.show
   pyplot.pause

   backend_bases.FigureCanvasBase.start_event_loop
   backend_bases.FigureCanvasBase.stop_event_loop


The simplest "integration" is to start the GUI event loop in
'blocking' mode and take over the CLI.  While the GUI event loop is
running you can not enter new commands into the prompt (your terminal
may echo the characters typed into the terminal, but they will not be
sent to the Python interpreter because it is busy running the GUI
event loop), but the figure windows will be responsive.  Once the
event loop is stopped (leaving any still open figure windows
non-responsive) you will be able to use the prompt again.  Re-starting
the event loop will make any open figure responsive again (and will
process any queued up user interaction).

To start the event loop until all open figures are closed, use
`.pyplot.show` as ::

  pyplot.show(block=True)

To start the event loop for a fixed amount of time (in seconds) use
`.pyplot.pause`.

If you are not using `.pyplot` you can start and stop the event loops
via `.FigureCanvasBase.start_event_loop` and
`.FigureCanvasBase.stop_event_loop`. However, in most contexts where
you would not be using `.pyplot` you are embedding Matplotlib in a
large GUI application and the GUI event loop should already be running
for the application.

Away from the prompt, this technique can be very useful if you want to
write a script that pauses for user interaction, or displays a figure
between polling for additional data.  See :ref:`interactive_scripts`
for more details.


Input hook integration
----------------------

While running the GUI event loop in a blocking mode or explicitly
handling UI events is useful, we can do better!  We really want to be
able to have a usable prompt **and** interactive figure windows.

We can do this using the 'input hook' feature of the interactive
prompt.  This hook is called by the prompt as it waits for the user
to type (even for a fast typist the prompt is mostly waiting for the
human to think and move their fingers).  Although the details vary
between prompts the logic is roughly

1. start to wait for keyboard input
2. start the GUI event loop
3. as soon as the user hits a key, exit the GUI event loop and handle the key
4. repeat

This gives us the illusion of simultaneously having interactive GUI
windows and an interactive prompt.  Most of the time the GUI event
loop is running, but as soon as the user starts typing the prompt
takes over again.

This time-share technique only allows the event loop to run while
python is otherwise idle and waiting for user input.  If you want the
GUI to be responsive during long running code it is necessary to
periodically flush the GUI event queue as described :ref:`above
<spin_event_loop>`.  In this case it is your code, not the REPL, which
is blocking the process so you need to handle the "time-share" manually.
Conversely, a very slow figure draw will block the prompt until it
finishes drawing.

Full embedding
==============

It is also possible to go the other direction and fully embed figures
(and a `Python interpreter
<https://docs.python.org/3/extending/embedding.html>`__) in a rich
native application.  Matplotlib provides classes for each toolkit
which can be directly embedded in GUI applications (this is how the
built-in windows are implemented!).  See :ref:`user_interfaces` for
more details.


.. _interactive_scripts :

Scripts and functions
=====================


.. autosummary::
   :template: autosummary.rst
   :nosignatures:

   backend_bases.FigureCanvasBase.flush_events
   backend_bases.FigureCanvasBase.draw_idle

   figure.Figure.ginput
   pyplot.ginput

   pyplot.show
   pyplot.pause

There are several use-cases for using interactive figures in scripts:

- capture user input to steer the script
- progress updates as a long running script progresses
- streaming updates from a data source

Blocking functions
------------------

If you only need to collect points in an Axes you can use
`.Figure.ginput` or more generally the tools from
`.blocking_input` the tools will take care of starting and stopping
the event loop for you.  However if you have written some custom event
handling or are using `.widgets` you will need to manually run the GUI
event loop using the methods described :ref:`above <cp_block_the_prompt>`.

You can also use the methods described in :ref:`cp_block_the_prompt`
to suspend run the GUI event loop.  Once the loop exits your code will
resume.  In general, any place you would use `time.sleep` you can use
`.pyplot.pause` instead with the added benefit of interactive figures.

For example, if you want to poll for data you could use something like ::

  fig, ax = plt.subplots()
  ln, = ax.plot([], [])

  while True:
      x, y = get_new_data()
      ln.set_data(x, y)
      plt.pause(1)

which would poll for new data and update the figure at 1Hz.

.. _spin_event_loop:

Explicitly spinning the event Loop
----------------------------------

.. autosummary::
   :template: autosummary.rst
   :nosignatures:

   backend_bases.FigureCanvasBase.flush_events
   backend_bases.FigureCanvasBase.draw_idle



If you have open windows that have pending UI
events (mouse clicks, button presses, or draws) you can explicitly
process those events by calling `.FigureCanvasBase.flush_events`.
This will run the GUI event loop until all UI events currently waiting
have been processed.  The exact behavior is backend-dependent but
typically events on all figure are processed and only events waiting
to be processed (not those added during processing) will be handled.

For example ::

   import time
   import matplotlib.pyplot as plt
   import numpy as np
   plt.ion()

   fig, ax = plt.subplots()
   th = np.linspace(0, 2*np.pi, 512)
   ax.set_ylim(-1.5, 1.5)

   ln, = ax.plot(th, np.sin(th))

   def slow_loop(N, ln):
       for j in range(N):
           time.sleep(.1)  # to simulate some work
           ln.figure.canvas.flush_events()

   slow_loop(100, ln)

While this will feel a bit laggy (as we are only processing user input
every 100ms whereas 20-30ms is what feels "responsive") it will
respond.

If you make changes to the plot and want it re-rendered you will need
to call `~.FigureCanvasBase.draw_idle` to request that the canvas be
re-drawn.  This method can be thought of *draw_soon* in analogy to
`asyncio.loop.call_soon`.

We can add this our example above as ::

   def slow_loop(N, ln):
       for j in range(N):
           time.sleep(.1)  # to simulate some work
           if j % 10:
               ln.set_ydata(np.sin(((j // 10) % 5 * th)))
               ln.figure.canvas.draw_idle()

           ln.figure.canvas.flush_events()

   slow_loop(100, ln)


The more frequently you call `.FigureCanvasBase.flush_events` the more
responsive your figure will feel but at the cost of spending more
resources on the visualization and less on your computation.


.. _stale_artists:

Stale artists
=============

Artists (as of Matplotlib 1.5) have a **stale** attribute which is
`True` if the internal state of the artist has changed since the last
time it was rendered. By default the stale state is propagated up to
the Artists parents in the draw tree, e.g., if the color of a `.Line2D`
instance is changed, the `~.axes.Axes` and `.Figure` that
contain it will also be marked as "stale".  Thus, ``fig.stale`` will
report if any artist in the figure has been modified and is out of sync
with what is displayed on the screen.  This is intended to be used to
determine if ``draw_idle`` should be called to schedule a re-rendering
of the figure.

Each artist has a `.Artist.stale_callback` attribute which holds a callback
with the signature ::

  def callback(self: Artist, val: bool) -> None:
     ...

which by default is set to a function that forwards the stale state to
the artist's parent.   If you wish to suppress a given artist from propagating
set this attribute to None.

`.Figure` instances do not have a containing artist and their
default callback is `None`.  If you call `.pyplot.ion` and are not in
``IPython`` we will install a callback to invoke
`~.backend_bases.FigureCanvasBase.draw_idle` whenever the
`.Figure` becomes stale.  In ``IPython`` we use the
``'post_execute'`` hook to invoke
`~.backend_bases.FigureCanvasBase.draw_idle` on any stale figures
after having executed the user's input, but before returning the prompt
to the user.  If you are not using `.pyplot` you can use the callback
`Figure.stale_callback` attribute to be notified when a figure has
become stale.


.. _draw_idle:

Idle draw
=========

.. autosummary::
   :template: autosummary.rst
   :nosignatures:

   backend_bases.FigureCanvasBase.draw
   backend_bases.FigureCanvasBase.draw_idle
   backend_bases.FigureCanvasBase.flush_events


In almost all cases, we recommend using
`backend_bases.FigureCanvasBase.draw_idle` over
`backend_bases.FigureCanvasBase.draw`.  ``draw`` forces a rendering of
the figure whereas ``draw_idle`` schedules a rendering the next time
the GUI window is going to re-paint the screen.  This improves
performance by only rendering pixels that will be shown on the screen.  If
you want to be sure that the screen is updated as soon as possible do ::

  fig.canvas.draw_idle()
  fig.canvas.flush_events()



Threading
=========

Most GUI frameworks require that all updates to the screen, and hence
their main event loop, run on the main thread.  This makes pushing
periodic updates of a plot to a background thread impossible.
Although it seems backwards, it is typically easier to push your
computations to a background thread and periodically update
the figure on the main thread.

In general Matplotlib is not thread safe.  If you are going to update
`.Artist` objects in one thread and draw from another you should make
sure that you are locking in the critical sections.



Eventloop integration mechanism
===============================

CPython / readline
------------------

The Python C API provides a hook, :c:data:`PyOS_InputHook`, to register a
function to be run ("The function will be called when Python's
interpreter prompt is about to become idle and wait for user input
from the terminal.").  This hook can be used to integrate a second
event loop (the GUI event loop) with the python input prompt loop.
The hook functions typically exhaust all pending events on the GUI
event queue, run the main loop for a short fixed amount of time, or
run the event loop until a key is pressed on stdin.

Matplotlib does not currently do any management of :c:data:`PyOS_InputHook` due
to the wide range of ways that Matplotlib is used.  This management is left to
downstream libraries -- either user code or the shell.  Interactive figures,
even with Matplotlib in 'interactive mode', may not work in the vanilla python
repl if an appropriate :c:data:`PyOS_InputHook` is not registered.

Input hooks, and helpers to install them, are usually included with
the python bindings for GUI toolkits and may be registered on import.
IPython also ships input hook functions for all of the GUI frameworks
Matplotlib supports which can be installed via ``%matplotlib``.  This
is the recommended method of integrating Matplotlib and a prompt.


IPython / prompt_toolkit
------------------------

With IPython >= 5.0 IPython has changed from using CPython's readline
based prompt to a ``prompt_toolkit`` based prompt.  ``prompt_toolkit``
has the same conceptual input hook, which is fed into ``prompt_toolkit`` via the
:meth:`IPython.terminal.interactiveshell.TerminalInteractiveShell.inputhook`
method.  The source for the ``prompt_toolkit`` input hooks lives at
:mod:`IPython.terminal.pt_inputhooks`.



.. rubric:: Footnotes

.. [#f1] A limitation of this design is that you can only wait for one
	 input, if there is a need to multiplex between multiple sources
	 then the loop would look something like ::

	   fds = [...]
           while True:                    # Loop
               inp = select(fds).read()   # Read
               eval(inp)                  # Evaluate / Print

.. [#f2] Or you can `write your own
         <https://www.youtube.com/watch?v=ZzfHjytDceU>`__ if you must.

.. [#f3] These examples are aggressively dropping many of the
	 complexities that must be dealt with in the real world such as
	 keyboard interrupts, timeouts, bad input, resource
	 allocation and cleanup, etc.
.. _performance:

Performance
===========

Whether exploring data in interactive mode or programmatically
saving lots of plots, rendering performance can be a challenging
bottleneck in your pipeline. Matplotlib provides multiple
ways to greatly reduce rendering time at the cost of a slight
change (to a settable tolerance) in your plot's appearance.
The methods available to reduce rendering time depend on the
type of plot that is being created.

Line segment simplification
---------------------------

For plots that have line segments (e.g. typical line plots, outlines
of polygons, etc.), rendering performance can be controlled by
:rc:`path.simplify` and :rc:`path.simplify_threshold`, which
can be defined e.g. in the :file:`matplotlibrc` file (see
:doc:`/tutorials/introductory/customizing` for more information about
the :file:`matplotlibrc` file). :rc:`path.simplify` is a Boolean
indicating whether or not line segments are simplified at all.
:rc:`path.simplify_threshold` controls how much line segments are simplified;
higher thresholds result in quicker rendering.

The following script will first display the data without any
simplification, and then display the same data with simplification.
Try interacting with both of them::

  import numpy as np
  import matplotlib.pyplot as plt
  import matplotlib as mpl

  # Setup, and create the data to plot
  y = np.random.rand(100000)
  y[50000:] *= 2
  y[np.geomspace(10, 50000, 400).astype(int)] = -1
  mpl.rcParams['path.simplify'] = True

  mpl.rcParams['path.simplify_threshold'] = 0.0
  plt.plot(y)
  plt.show()

  mpl.rcParams['path.simplify_threshold'] = 1.0
  plt.plot(y)
  plt.show()

Matplotlib currently defaults to a conservative simplification
threshold of ``1/9``. To change default settings to use a different
value, change the :file:`matplotlibrc` file. Alternatively, users
can create a new style for interactive plotting (with maximal
simplification) and another style for publication quality plotting
(with minimal simplification) and activate them as necessary. See
:doc:`/tutorials/introductory/customizing` for instructions on
how to perform these actions.


The simplification works by iteratively merging line segments
into a single vector until the next line segment's perpendicular
distance to the vector (measured in display-coordinate space)
is greater than the ``path.simplify_threshold`` parameter.

.. note::
  Changes related to how line segments are simplified were made
  in version 2.1. Rendering time will still be improved by these
  parameters prior to 2.1, but rendering time for some kinds of
  data will be vastly improved in versions 2.1 and greater.

Marker simplification
---------------------

Markers can also be simplified, albeit less robustly than
line segments. Marker simplification is only available
to :class:`~matplotlib.lines.Line2D` objects (through the
``markevery`` property). Wherever
:class:`~matplotlib.lines.Line2D` construction parameters
are passed through, such as
:func:`matplotlib.pyplot.plot` and
:meth:`matplotlib.axes.Axes.plot`, the ``markevery``
parameter can be used::

  plt.plot(x, y, markevery=10)

The ``markevery`` argument allows for naive subsampling, or an
attempt at evenly spaced (along the *x* axis) sampling. See the
:doc:`/gallery/lines_bars_and_markers/markevery_demo`
for more information.

Splitting lines into smaller chunks
-----------------------------------

If you are using the Agg backend (see :ref:`what-is-a-backend`),
then you can make use of :rc:`agg.path.chunksize`
This allows users to specify a chunk size, and any lines with
greater than that many vertices will be split into multiple
lines, each of which has no more than ``agg.path.chunksize``
many vertices. (Unless ``agg.path.chunksize`` is zero, in
which case there is no chunking.) For some kind of data,
chunking the line up into reasonable sizes can greatly
decrease rendering time.

The following script will first display the data without any
chunk size restriction, and then display the same data with
a chunk size of 10,000. The difference can best be seen when
the figures are large, try maximizing the GUI and then
interacting with them::

  import numpy as np
  import matplotlib.pyplot as plt
  import matplotlib as mpl
  mpl.rcParams['path.simplify_threshold'] = 1.0

  # Setup, and create the data to plot
  y = np.random.rand(100000)
  y[50000:] *= 2
  y[np.geomspace(10, 50000, 400).astype(int)] = -1
  mpl.rcParams['path.simplify'] = True

  mpl.rcParams['agg.path.chunksize'] = 0
  plt.plot(y)
  plt.show()

  mpl.rcParams['agg.path.chunksize'] = 10000
  plt.plot(y)
  plt.show()

Legends
-------

The default legend behavior for axes attempts to find the location
that covers the fewest data points (``loc='best'``). This can be a
very expensive computation if there are lots of data points. In
this case, you may want to provide a specific location.

Using the *fast* style
----------------------

The *fast* style can be used to automatically set
simplification and chunking parameters to reasonable
settings to speed up plotting large amounts of data.
The following code runs it::

  import matplotlib.style as mplstyle
  mplstyle.use('fast')

It is very lightweight, so it works well with other
styles. Be sure the fast style is applied last
so that other styles do not overwrite the settings::

  mplstyle.use(['dark_background', 'ggplot', 'fast'])
.. redirect-from:: /users/interactive

.. currentmodule:: matplotlib

.. _mpl-shell:

===================
Interactive figures
===================

.. toctree::


When working with data, interactivity can be invaluable. The pan/zoom and
mouse-location tools built into the Matplotlib GUI windows are often sufficient, but
you can also use the event system to build customized data exploration tools.

Matplotlib ships with :ref:`backends <what-is-a-backend>` binding to
several GUI toolkits (Qt, Tk, Wx, GTK, macOS, JavaScript) and third party
packages provide bindings to `kivy
<https://github.com/kivy-garden/garden.matplotlib>`__ and `Jupyter Lab
<https://github.com/matplotlib/ipympl>`__.  For the figures to be responsive to
mouse, keyboard, and paint events, the GUI event loop needs to be integrated
with an interactive prompt. We recommend using IPython (see :ref:`below <ipython-pylab>`).

The `.pyplot` module provides functions for explicitly creating figures
that include interactive tools, a toolbar, a tool-tip, and
:ref:`key bindings <key-event-handling>`:

`.pyplot.figure`
    Creates a new empty `.Figure` or selects an existing figure

`.pyplot.subplots`
    Creates a new `.Figure` and fills it with a grid of `~.axes.Axes`

`.pyplot` has a notion of "The Current Figure" which can be accessed
through `.pyplot.gcf` and a notion of "The Current Axes" accessed
through `.pyplot.gca`.  Almost all of the functions in `.pyplot` pass
through the current `.Figure` / `~.axes.Axes` (or create one) as
appropriate.

Matplotlib keeps a reference to all of the open figures
created via `pyplot.figure` or `pyplot.subplots` so that the figures will not be garbage
collected. `.Figure`\s can be closed and deregistered from `.pyplot` individually via
`.pyplot.close`; all open `.Figure`\s can be closed via ``plt.close('all')``.


For more discussion of Matplotlib's event system and integrated event loops, please read:

   - :ref:`interactive_figures_and_eventloops`
   - :ref:`event-handling-tutorial`


.. _ipython-pylab:

IPython integration
===================

We recommend using IPython for an interactive shell.  In addition to
all of its features (improved tab-completion, magics, multiline editing, etc),
it also ensures that the GUI toolkit event loop is properly integrated
with the command line (see :ref:`cp_integration`).

In this example, we create and modify a figure via an IPython prompt.
The figure displays in a QtAgg GUI window. To configure the integration
and enable :ref:`interactive mode <controlling-interactive>` use the
``%matplotlib`` magic:

.. highlight:: ipython

::

   In [1]: %matplotlib
   Using matplotlib backend: QtAgg

   In [2]: import matplotlib.pyplot as plt

Create a new figure window:

::

   In [3]: fig, ax = plt.subplots()


Add a line plot of the data to the window:

::

   In [4]: ln, = ax.plot(range(5))

Change the color of the line from blue to orange:

::

   In [5]: ln.set_color('orange')

If you wish to disable automatic redrawing of the plot:

::

   In [6]: plt.ioff()

If you wish to re-enable automatic redrawing of the plot:

::

   In [7]: plt.ion()


In recent versions of ``Matplotlib`` and ``IPython``, it is
sufficient to import `matplotlib.pyplot` and call `.pyplot.ion`.
Using the ``%`` magic is guaranteed to work in all versions of Matplotlib and IPython.


.. highlight:: python

.. _controlling-interactive:

Interactive mode
================


.. autosummary::
   :template: autosummary.rst
   :nosignatures:

   pyplot.ion
   pyplot.ioff
   pyplot.isinteractive


.. autosummary::
   :template: autosummary.rst
   :nosignatures:

   pyplot.show
   pyplot.pause


Interactive mode controls:

- whether created figures are automatically shown
- whether changes to artists automatically trigger re-drawing existing figures
- when `.pyplot.show()` returns if given no arguments: immediately, or after all of the figures have been closed

If in interactive mode:

- newly created figures will be displayed immediately
- figures will automatically redraw when elements are changed
- `pyplot.show()` displays the figures and immediately returns

If not in interactive mode:

- newly created figures and changes to figures are not displayed until

  * `.pyplot.show()` is called
  * `.pyplot.pause()` is called
  * `.FigureCanvasBase.flush_events()` is called

- `pyplot.show()` runs the GUI event loop and does not return until all the plot windows are closed

If you are in non-interactive mode (or created figures while in
non-interactive mode) you may need to explicitly call `.pyplot.show`
to display the windows on your screen.  If you only want to run the
GUI event loop for a fixed amount of time, you can use `.pyplot.pause`.
This will block the progress of your code as if you had called
`time.sleep`, ensure the current window is shown and re-drawn if needed,
and run the GUI event loop for the specified period of time.

The GUI event loop being integrated with your command prompt and
the figures being in interactive mode are independent of each other.
If you use `pyplot.ion` but have not arranged for the event loop integration,
your figures will appear but will not be interactive while the prompt is waiting for input.
You will not be able to pan/zoom and the figure may not even render
(the window might appear black, transparent, or as a snapshot of the
desktop under it).  Conversely, if you configure the event loop
integration, displayed figures will be responsive while waiting for input
at the prompt, regardless of pyplot's "interactive mode".

No matter what combination of interactive mode setting and event loop integration,
figures will be responsive if you use ``pyplot.show(block=True)``, `.pyplot.pause`, or run
the GUI main loop in some other way.


.. warning::

   Using `.Figure.show` it is possible to display a figure on
   the screen without starting the event loop and without being in
   interactive mode.  This may work (depending on the GUI toolkit) but
   will likely result in a non-responsive figure.

.. _navigation-toolbar:

Default UI
==========


The windows created by :mod:`~.pyplot` have an interactive toolbar with navigation
buttons and a readout of the data values the cursor is pointing at.  A number of
helpful keybindings are registered by default.


.. _key-event-handling:

Navigation keyboard shortcuts
-----------------------------

The following table holds all the default keys, which can be
overwritten by use of your :doc:`matplotlibrc
</tutorials/introductory/customizing>`.

================================== ===============================
Command                            Default key binding and rcParam
================================== ===============================
Home/Reset                         :rc:`keymap.home`
Back                               :rc:`keymap.back`
Forward                            :rc:`keymap.forward`
Pan/Zoom                           :rc:`keymap.pan`
Zoom-to-rect                       :rc:`keymap.zoom`
Save                               :rc:`keymap.save`
Toggle fullscreen                  :rc:`keymap.fullscreen`
Toggle major grids                 :rc:`keymap.grid`
Toggle minor grids                 :rc:`keymap.grid_minor`
Toggle x axis scale (log/linear)   :rc:`keymap.xscale`
Toggle y axis scale (log/linear)   :rc:`keymap.yscale`
Close Figure                       :rc:`keymap.quit`
Constrain pan/zoom to x axis       hold **x** when panning/zooming with mouse
Constrain pan/zoom to y axis       hold **y** when panning/zooming with mouse
Preserve aspect ratio              hold **CONTROL** when panning/zooming with mouse
================================== ===============================


.. _other-shells:

Other Python prompts
====================

Interactive mode works in the default Python prompt:


.. sourcecode:: pycon

   >>> import matplotlib.pyplot as plt
   >>> plt.ion()
   >>>

however this does not ensure that the event hook is properly installed
and your figures may not be responsive.  Please consult the
documentation of your GUI toolkit for details.



Jupyter Notebooks / JupyterLab
------------------------------

.. note::

   To get the interactive functionality described here, you must be
   using an interactive backend.  The default backend in notebooks,
   the inline backend, is not.  `~ipykernel.pylab.backend_inline`
   renders the figure once and inserts a static image into the
   notebook when the cell is executed.  Because the images are static, they
   can not be panned / zoomed, take user input, or be updated from other
   cells.

To get interactive figures in the 'classic' notebook or Jupyter lab,
use the `ipympl <https://github.com/matplotlib/ipympl>`__ backend
(must be installed separately) which uses the **ipywidget** framework.
If ``ipympl`` is installed use the magic:

.. sourcecode:: ipython

  %matplotlib widget

to select and enable it.

If you only need to use the classic notebook, you can use

.. sourcecode:: ipython

  %matplotlib notebook

which uses the `.backend_nbagg` backend provided by Matplotlib;
however, nbagg does not work in Jupyter Lab.

GUIs + Jupyter
~~~~~~~~~~~~~~

You can also use one of the non-``ipympl`` GUI backends in a Jupyter Notebook.
If you are running your Jupyter kernel locally, the GUI window will spawn on
your desktop adjacent to your web browser. If you run your notebook on a remote server,
the kernel will try to open the GUI window on the remote computer. Unless you have
arranged to forward the xserver back to your desktop, you will not be able to
see or interact with the window. It may also raise an exception.



PyCharm, Spyder, and VSCode
---------------------------

Many IDEs have built-in integration with Matplotlib, please consult their
documentation for configuration details.
.. redirect-from:: /users/event_handling

.. _event-handling-tutorial:

**************************
Event handling and picking
**************************

Matplotlib works with a number of user interface toolkits (wxpython,
tkinter, qt, gtk, and macosx) and in order to support features like
interactive panning and zooming of figures, it is helpful to the
developers to have an API for interacting with the figure via key
presses and mouse movements that is "GUI neutral" so we don't have to
repeat a lot of code across the different user interfaces.  Although
the event handling API is GUI neutral, it is based on the GTK model,
which was the first user interface Matplotlib supported.  The events
that are triggered are also a bit richer vis-a-vis Matplotlib than
standard GUI events, including information like which
`~.axes.Axes` the event occurred in.  The events also
understand the Matplotlib coordinate system, and report event
locations in both pixel and data coordinates.

.. _event-connections:

Event connections
=================

To receive events, you need to write a callback function and then
connect your function to the event manager, which is part of the
`~.FigureCanvasBase`.  Here is a simple
example that prints the location of the mouse click and which button
was pressed::

    fig, ax = plt.subplots()
    ax.plot(np.random.rand(10))

    def onclick(event):
        print('%s click: button=%d, x=%d, y=%d, xdata=%f, ydata=%f' %
              ('double' if event.dblclick else 'single', event.button,
               event.x, event.y, event.xdata, event.ydata))

    cid = fig.canvas.mpl_connect('button_press_event', onclick)

The `.FigureCanvasBase.mpl_connect` method returns a connection id (an
integer), which can be used to disconnect the callback via ::

    fig.canvas.mpl_disconnect(cid)

.. note::
   The canvas retains only weak references to instance methods used as
   callbacks.  Therefore, you need to retain a reference to instances owning
   such methods.  Otherwise the instance will be garbage-collected and the
   callback will vanish.

   This does not affect free functions used as callbacks.

Here are the events that you can connect to, the class instances that
are sent back to you when the event occurs, and the event descriptions:

====================== ================ ======================================
Event name             Class            Description
====================== ================ ======================================
'button_press_event'   `.MouseEvent`    mouse button is pressed
'button_release_event' `.MouseEvent`    mouse button is released
'close_event'          `.CloseEvent`    figure is closed
'draw_event'           `.DrawEvent`     canvas has been drawn (but screen
                                        widget not updated yet)
'key_press_event'      `.KeyEvent`      key is pressed
'key_release_event'    `.KeyEvent`      key is released
'motion_notify_event'  `.MouseEvent`    mouse moves
'pick_event'           `.PickEvent`     artist in the canvas is selected
'resize_event'         `.ResizeEvent`   figure canvas is resized
'scroll_event'         `.MouseEvent`    mouse scroll wheel is rolled
'figure_enter_event'   `.LocationEvent` mouse enters a new figure
'figure_leave_event'   `.LocationEvent` mouse leaves a figure
'axes_enter_event'     `.LocationEvent` mouse enters a new axes
'axes_leave_event'     `.LocationEvent` mouse leaves an axes
====================== ================ ======================================

.. note::
   When connecting to 'key_press_event' and 'key_release_event' events,
   you may encounter inconsistencies between the different user interface
   toolkits that Matplotlib works with. This is due to inconsistencies/limitations
   of the user interface toolkit. The following table shows some basic examples of
   what you may expect to receive as key(s) (using a QWERTY keyboard layout)
   from the different user interface toolkits, where a comma separates different keys:

   ================ ============================= ============================== ============================== ============================== ============================== ===================================
   Key(s) Pressed   WxPython                      Qt                             WebAgg                         Gtk                            Tkinter                        macosx
   ================ ============================= ============================== ============================== ============================== ============================== ===================================
   Shift+2          shift, shift+2                shift, @                       shift, @                       shift, @                       shift, @                       shift, @
   Shift+F1         shift, shift+f1               shift, shift+f1                shift, shift+f1                shift, shift+f1                shift, shift+f1                shift, shift+f1
   Shift            shift                         shift                          shift                          shift                          shift                          shift
   Control          control                       control                        control                        control                        control                        control
   Alt              alt                           alt                            alt                            alt                            alt                            alt
   AltGr            Nothing                       Nothing                        alt                            iso_level3_shift               iso_level3_shift
   CapsLock         caps_lock                     caps_lock                      caps_lock                      caps_lock                      caps_lock                      caps_lock
   CapsLock+a       caps_lock, a                  caps_lock, a                   caps_lock, A                   caps_lock, A                   caps_lock, A                   caps_lock, a
   a                a                             a                              a                              a                              a                              a
   Shift+a          shift, A                      shift, A                       shift, A                       shift, A                       shift, A                       shift, A
   CapsLock+Shift+a caps_lock, shift, A           caps_lock, shift, A            caps_lock, shift, a            caps_lock, shift, a            caps_lock, shift, a            caps_lock, shift, A
   Ctrl+Shift+Alt   control, ctrl+shift, ctrl+alt control, ctrl+shift, ctrl+meta control, ctrl+shift, ctrl+meta control, ctrl+shift, ctrl+meta control, ctrl+shift, ctrl+meta control, ctrl+shift, ctrl+alt+shift
   Ctrl+Shift+a     control, ctrl+shift, ctrl+A   control, ctrl+shift, ctrl+A    control, ctrl+shift, ctrl+A    control, ctrl+shift, ctrl+A    control, ctrl+shift, ctrl+a    control, ctrl+shift, ctrl+A
   F1               f1                            f1                             f1                             f1                             f1                             f1
   Ctrl+F1          control, ctrl+f1              control, ctrl+f1               control, ctrl+f1               control, ctrl+f1               control, ctrl+f1               control, Nothing
   ================ ============================= ============================== ============================== ============================== ============================== ===================================

Matplotlib attaches some keypress callbacks by default for interactivity; they
are documented in the :ref:`key-event-handling` section.

.. _event-attributes:

Event attributes
================

All Matplotlib events inherit from the base class
`matplotlib.backend_bases.Event`, which stores the attributes:

    ``name``
        the event name
    ``canvas``
        the FigureCanvas instance generating the event
    ``guiEvent``
        the GUI event that triggered the Matplotlib event

The most common events that are the bread and butter of event handling
are key press/release events and mouse press/release and movement
events.  The `.KeyEvent` and `.MouseEvent` classes that handle
these events are both derived from the LocationEvent, which has the
following attributes

    ``x``, ``y``
        mouse x and y position in pixels from left and bottom of canvas
    ``inaxes``
        the `~.axes.Axes` instance over which the mouse is, if any; else None
    ``xdata``, ``ydata``
        mouse x and y position in data coordinates, if the mouse is over an
        axes

Let's look a simple example of a canvas, where a simple line segment
is created every time a mouse is pressed::

    from matplotlib import pyplot as plt

    class LineBuilder:
        def __init__(self, line):
            self.line = line
            self.xs = list(line.get_xdata())
            self.ys = list(line.get_ydata())
            self.cid = line.figure.canvas.mpl_connect('button_press_event', self)

        def __call__(self, event):
            print('click', event)
            if event.inaxes!=self.line.axes: return
            self.xs.append(event.xdata)
            self.ys.append(event.ydata)
            self.line.set_data(self.xs, self.ys)
            self.line.figure.canvas.draw()

    fig, ax = plt.subplots()
    ax.set_title('click to build line segments')
    line, = ax.plot([0], [0])  # empty line
    linebuilder = LineBuilder(line)

    plt.show()

The `.MouseEvent` that we just used is a `.LocationEvent`, so we have access to
the data and pixel coordinates via ``(event.x, event.y)`` and ``(event.xdata,
event.ydata)``.  In addition to the ``LocationEvent`` attributes, it also has

    ``button``
        the button pressed: None, `.MouseButton`, 'up', or 'down' (up and down are used for scroll events)

    ``key``
        the key pressed: None, any character, 'shift', 'win', or 'control'

Draggable rectangle exercise
----------------------------

Write draggable rectangle class that is initialized with a
`.Rectangle` instance but will move its ``xy``
location when dragged.  Hint: you will need to store the original
``xy`` location of the rectangle which is stored as rect.xy and
connect to the press, motion and release mouse events.  When the mouse
is pressed, check to see if the click occurs over your rectangle (see
`.Rectangle.contains`) and if it does, store
the rectangle xy and the location of the mouse click in data coords.
In the motion event callback, compute the deltax and deltay of the
mouse movement, and add those deltas to the origin of the rectangle
you stored.  The redraw the figure.  On the button release event, just
reset all the button press data you stored as None.

Here is the solution::

    import numpy as np
    import matplotlib.pyplot as plt

    class DraggableRectangle:
        def __init__(self, rect):
            self.rect = rect
            self.press = None

        def connect(self):
            """Connect to all the events we need."""
            self.cidpress = self.rect.figure.canvas.mpl_connect(
                'button_press_event', self.on_press)
            self.cidrelease = self.rect.figure.canvas.mpl_connect(
                'button_release_event', self.on_release)
            self.cidmotion = self.rect.figure.canvas.mpl_connect(
                'motion_notify_event', self.on_motion)

        def on_press(self, event):
            """Check whether mouse is over us; if so, store some data."""
            if event.inaxes != self.rect.axes:
                return
            contains, attrd = self.rect.contains(event)
            if not contains:
                return
            print('event contains', self.rect.xy)
            self.press = self.rect.xy, (event.xdata, event.ydata)

        def on_motion(self, event):
            """Move the rectangle if the mouse is over us."""
            if self.press is None or event.inaxes != self.rect.axes:
                return
            (x0, y0), (xpress, ypress) = self.press
            dx = event.xdata - xpress
            dy = event.ydata - ypress
            # print(f'x0={x0}, xpress={xpress}, event.xdata={event.xdata}, '
            #       f'dx={dx}, x0+dx={x0+dx}')
            self.rect.set_x(x0+dx)
            self.rect.set_y(y0+dy)

            self.rect.figure.canvas.draw()

        def on_release(self, event):
            """Clear button press information."""
            self.press = None
            self.rect.figure.canvas.draw()

        def disconnect(self):
            """Disconnect all callbacks."""
            self.rect.figure.canvas.mpl_disconnect(self.cidpress)
            self.rect.figure.canvas.mpl_disconnect(self.cidrelease)
            self.rect.figure.canvas.mpl_disconnect(self.cidmotion)

    fig, ax = plt.subplots()
    rects = ax.bar(range(10), 20*np.random.rand(10))
    drs = []
    for rect in rects:
        dr = DraggableRectangle(rect)
        dr.connect()
        drs.append(dr)

    plt.show()


**Extra credit**: Use blitting to make the animated drawing faster and
smoother.

Extra credit solution::

    # Draggable rectangle with blitting.
    import numpy as np
    import matplotlib.pyplot as plt

    class DraggableRectangle:
        lock = None  # only one can be animated at a time

        def __init__(self, rect):
            self.rect = rect
            self.press = None
            self.background = None

        def connect(self):
            """Connect to all the events we need."""
            self.cidpress = self.rect.figure.canvas.mpl_connect(
                'button_press_event', self.on_press)
            self.cidrelease = self.rect.figure.canvas.mpl_connect(
                'button_release_event', self.on_release)
            self.cidmotion = self.rect.figure.canvas.mpl_connect(
                'motion_notify_event', self.on_motion)

        def on_press(self, event):
            """Check whether mouse is over us; if so, store some data."""
            if (event.inaxes != self.rect.axes
                    or DraggableRectangle.lock is not None):
                return
            contains, attrd = self.rect.contains(event)
            if not contains:
                return
            print('event contains', self.rect.xy)
            self.press = self.rect.xy, (event.xdata, event.ydata)
            DraggableRectangle.lock = self

            # draw everything but the selected rectangle and store the pixel buffer
            canvas = self.rect.figure.canvas
            axes = self.rect.axes
            self.rect.set_animated(True)
            canvas.draw()
            self.background = canvas.copy_from_bbox(self.rect.axes.bbox)

            # now redraw just the rectangle
            axes.draw_artist(self.rect)

            # and blit just the redrawn area
            canvas.blit(axes.bbox)

        def on_motion(self, event):
            """Move the rectangle if the mouse is over us."""
            if (event.inaxes != self.rect.axes
                    or DraggableRectangle.lock is not self):
                return
            (x0, y0), (xpress, ypress) = self.press
            dx = event.xdata - xpress
            dy = event.ydata - ypress
            self.rect.set_x(x0+dx)
            self.rect.set_y(y0+dy)

            canvas = self.rect.figure.canvas
            axes = self.rect.axes
            # restore the background region
            canvas.restore_region(self.background)

            # redraw just the current rectangle
            axes.draw_artist(self.rect)

            # blit just the redrawn area
            canvas.blit(axes.bbox)

        def on_release(self, event):
            """Clear button press information."""
            if DraggableRectangle.lock is not self:
                return

            self.press = None
            DraggableRectangle.lock = None

            # turn off the rect animation property and reset the background
            self.rect.set_animated(False)
            self.background = None

            # redraw the full figure
            self.rect.figure.canvas.draw()

        def disconnect(self):
            """Disconnect all callbacks."""
            self.rect.figure.canvas.mpl_disconnect(self.cidpress)
            self.rect.figure.canvas.mpl_disconnect(self.cidrelease)
            self.rect.figure.canvas.mpl_disconnect(self.cidmotion)

    fig, ax = plt.subplots()
    rects = ax.bar(range(10), 20*np.random.rand(10))
    drs = []
    for rect in rects:
        dr = DraggableRectangle(rect)
        dr.connect()
        drs.append(dr)

    plt.show()

.. _enter-leave-events:

Mouse enter and leave
======================

If you want to be notified when the mouse enters or leaves a figure or
axes, you can connect to the figure/axes enter/leave events.  Here is
a simple example that changes the colors of the axes and figure
background that the mouse is over::

    """
    Illustrate the figure and axes enter and leave events by changing the
    frame colors on enter and leave
    """
    import matplotlib.pyplot as plt

    def enter_axes(event):
        print('enter_axes', event.inaxes)
        event.inaxes.patch.set_facecolor('yellow')
        event.canvas.draw()

    def leave_axes(event):
        print('leave_axes', event.inaxes)
        event.inaxes.patch.set_facecolor('white')
        event.canvas.draw()

    def enter_figure(event):
        print('enter_figure', event.canvas.figure)
        event.canvas.figure.patch.set_facecolor('red')
        event.canvas.draw()

    def leave_figure(event):
        print('leave_figure', event.canvas.figure)
        event.canvas.figure.patch.set_facecolor('grey')
        event.canvas.draw()

    fig1, axs = plt.subplots(2)
    fig1.suptitle('mouse hover over figure or axes to trigger events')

    fig1.canvas.mpl_connect('figure_enter_event', enter_figure)
    fig1.canvas.mpl_connect('figure_leave_event', leave_figure)
    fig1.canvas.mpl_connect('axes_enter_event', enter_axes)
    fig1.canvas.mpl_connect('axes_leave_event', leave_axes)

    fig2, axs = plt.subplots(2)
    fig2.suptitle('mouse hover over figure or axes to trigger events')

    fig2.canvas.mpl_connect('figure_enter_event', enter_figure)
    fig2.canvas.mpl_connect('figure_leave_event', leave_figure)
    fig2.canvas.mpl_connect('axes_enter_event', enter_axes)
    fig2.canvas.mpl_connect('axes_leave_event', leave_axes)

    plt.show()

.. _object-picking:

Object picking
==============

You can enable picking by setting the ``picker`` property of an `.Artist` (such
as `.Line2D`, `.Text`, `.Patch`, `.Polygon`, `.AxesImage`, etc.)

The ``picker`` property can be set using various types:

    ``None``
        Picking is disabled for this artist (default).
    ``boolean``
        If True, then picking will be enabled and the artist will fire a
        pick event if the mouse event is over the artist.
    ``callable``
        If picker is a callable, it is a user supplied function which
        determines whether the artist is hit by the mouse event.  The
        signature is ``hit, props = picker(artist, mouseevent)`` to
        determine the hit test.  If the mouse event is over the artist,
        return ``hit = True``; ``props`` is a dictionary of properties that
        become additional attributes on the `.PickEvent`.

The artist's ``pickradius`` property can additionally be set to a tolerance
value in points (there are 72 points per inch) that determines how far the
mouse can be and still trigger a mouse event.

After you have enabled an artist for picking by setting the ``picker``
property, you need to connect a handler to the figure canvas pick_event to get
pick callbacks on mouse press events.  The handler typically looks like ::

    def pick_handler(event):
        mouseevent = event.mouseevent
        artist = event.artist
        # now do something with this...

The `.PickEvent` passed to your callback always has the following attributes:

    ``mouseevent``
        The `.MouseEvent` that generate the pick event.  See event-attributes_
        for a list of useful attributes on the mouse event.
    ``artist``
        The `.Artist` that generated the pick event.

Additionally, certain artists like `.Line2D` and `.PatchCollection` may attach
additional metadata, like the indices of the data that meet the
picker criteria (e.g., all the points in the line that are within the
specified ``pickradius`` tolerance).

Simple picking example
----------------------

In the example below, we enable picking on the line and set a pick radius
tolerance in points.  The ``onpick``
callback function will be called when the pick event it within the
tolerance distance from the line, and has the indices of the data
vertices that are within the pick distance tolerance.  Our ``onpick``
callback function simply prints the data that are under the pick
location.  Different Matplotlib Artists can attach different data to
the PickEvent.  For example, ``Line2D`` attaches the ind property,
which are the indices into the line data under the pick point.  See
`.Line2D.pick` for details on the ``PickEvent`` properties of the line.  ::

    import numpy as np
    import matplotlib.pyplot as plt

    fig, ax = plt.subplots()
    ax.set_title('click on points')

    line, = ax.plot(np.random.rand(100), 'o',
                    picker=True, pickradius=5)  # 5 points tolerance

    def onpick(event):
        thisline = event.artist
        xdata = thisline.get_xdata()
        ydata = thisline.get_ydata()
        ind = event.ind
        points = tuple(zip(xdata[ind], ydata[ind]))
        print('onpick points:', points)

    fig.canvas.mpl_connect('pick_event', onpick)

    plt.show()

Picking exercise
----------------

Create a data set of 100 arrays of 1000 Gaussian random numbers and
compute the sample mean and standard deviation of each of them (hint:
NumPy arrays have a mean and std method) and make a xy marker plot of
the 100 means vs. the 100 standard deviations.  Connect the line
created by the plot command to the pick event, and plot the original
time series of the data that generated the clicked on points.  If more
than one point is within the tolerance of the clicked on point, you
can use multiple subplots to plot the multiple time series.

Exercise solution::

    """
    Compute the mean and stddev of 100 data sets and plot mean vs. stddev.
    When you click on one of the (mean, stddev) points, plot the raw dataset
    that generated that point.
    """

    import numpy as np
    import matplotlib.pyplot as plt

    X = np.random.rand(100, 1000)
    xs = np.mean(X, axis=1)
    ys = np.std(X, axis=1)

    fig, ax = plt.subplots()
    ax.set_title('click on point to plot time series')
    line, = ax.plot(xs, ys, 'o', picker=True, pickradius=5)  # 5 points tolerance


    def onpick(event):
        if event.artist != line:
            return
        n = len(event.ind)
        if not n:
            return
        fig, axs = plt.subplots(n, squeeze=False)
        for dataind, ax in zip(event.ind, axs.flat):
            ax.plot(X[dataind])
            ax.text(0.05, 0.9,
                    f"$\\mu$={xs[dataind]:1.3f}\n$\\sigma$={ys[dataind]:1.3f}",
                    transform=ax.transAxes, verticalalignment='top')
            ax.set_ylim(-0.5, 1.5)
        fig.show()
        return True


    fig.canvas.mpl_connect('pick_event', onpick)
    plt.show()
.. _backends:

========
Backends
========

.. _what-is-a-backend:

What is a backend?
------------------

A lot of documentation on the website and in the mailing lists refers
to the "backend" and many new users are confused by this term.
Matplotlib targets many different use cases and output formats.  Some
people use Matplotlib interactively from the Python shell and have
plotting windows pop up when they type commands.  Some people run
`Jupyter <https://jupyter.org>`_ notebooks and draw inline plots for
quick data analysis. Others embed Matplotlib into graphical user
interfaces like PyQt or PyGObject to build rich applications.  Some
people use Matplotlib in batch scripts to generate postscript images
from numerical simulations, and still others run web application
servers to dynamically serve up graphs.

To support all of these use cases, Matplotlib can target different
outputs, and each of these capabilities is called a backend; the
"frontend" is the user facing code, i.e., the plotting code, whereas the
"backend" does all the hard work behind-the-scenes to make the figure.
There are two types of backends: user interface backends (for use in
PyQt/PySide, PyGObject, Tkinter, wxPython, or macOS/Cocoa); also referred to
as "interactive backends") and hardcopy backends to make image files
(PNG, SVG, PDF, PS; also referred to as "non-interactive backends").

Selecting a backend
-------------------

There are three ways to configure your backend:

- The :rc:`backend` parameter in your :file:`matplotlibrc` file
- The :envvar:`MPLBACKEND` environment variable
- The function :func:`matplotlib.use`

Below is a more detailed description.

If there is more than one configuration present, the last one from the
list takes precedence; e.g. calling :func:`matplotlib.use()` will override
the setting in your :file:`matplotlibrc`.

Without a backend explicitly set, Matplotlib automatically detects a usable
backend based on what is available on your system and on whether a GUI event
loop is already running.  The first usable backend in the following list is
selected: MacOSX, QtAgg, GTK4Agg, Gtk3Agg, TkAgg, WxAgg, Agg.  The last, Agg,
is a non-interactive backend that can only write to files.  It is used on
Linux, if Matplotlib cannot connect to either an X display or a Wayland
display.

Here is a detailed description of the configuration methods:

#. Setting :rc:`backend` in your :file:`matplotlibrc` file::

       backend : qtagg   # use pyqt with antigrain (agg) rendering

   See also :doc:`/tutorials/introductory/customizing`.

#. Setting the :envvar:`MPLBACKEND` environment variable:

   You can set the environment variable either for your current shell or for
   a single script.

   On Unix::

        > export MPLBACKEND=qtagg
        > python simple_plot.py

        > MPLBACKEND=qtagg python simple_plot.py

   On Windows, only the former is possible::

        > set MPLBACKEND=qtagg
        > python simple_plot.py

   Setting this environment variable will override the ``backend`` parameter
   in *any* :file:`matplotlibrc`, even if there is a :file:`matplotlibrc` in
   your current working directory. Therefore, setting :envvar:`MPLBACKEND`
   globally, e.g. in your :file:`.bashrc` or :file:`.profile`, is discouraged
   as it might lead to counter-intuitive behavior.

#. If your script depends on a specific backend you can use the function
   :func:`matplotlib.use`::

      import matplotlib
      matplotlib.use('qtagg')

   This should be done before any figure is created, otherwise Matplotlib may
   fail to switch the backend and raise an ImportError.

   Using `~matplotlib.use` will require changes in your code if users want to
   use a different backend.  Therefore, you should avoid explicitly calling
   `~matplotlib.use` unless absolutely necessary.

.. _the-builtin-backends:

The builtin backends
--------------------

By default, Matplotlib should automatically select a default backend which
allows both interactive work and plotting from scripts, with output to the
screen and/or to a file, so at least initially, you will not need to worry
about the backend.  The most common exception is if your Python distribution
comes without :mod:`tkinter` and you have no other GUI toolkit installed.
This happens on certain Linux distributions, where you need to install a
Linux package named ``python-tk`` (or similar).

If, however, you want to write graphical user interfaces, or a web
application server
(:doc:`/gallery/user_interfaces/web_application_server_sgskip`), or need a
better understanding of what is going on, read on. To make things easily
more customizable for graphical user interfaces, Matplotlib separates
the concept of the renderer (the thing that actually does the drawing)
from the canvas (the place where the drawing goes).  The canonical
renderer for user interfaces is ``Agg`` which uses the `Anti-Grain
Geometry`_ C++ library to make a raster (pixel) image of the figure; it
is used by the ``QtAgg``, ``GTK4Agg``, ``GTK3Agg``, ``wxAgg``, ``TkAgg``, and
``macosx`` backends.  An alternative renderer is based on the Cairo library,
used by ``QtCairo``, etc.

For the rendering engines, users can also distinguish between `vector
<https://en.wikipedia.org/wiki/Vector_graphics>`_ or `raster
<https://en.wikipedia.org/wiki/Raster_graphics>`_ renderers.  Vector
graphics languages issue drawing commands like "draw a line from this
point to this point" and hence are scale free. Raster backends
generate a pixel representation of the line whose accuracy depends on a
DPI setting.

Here is a summary of the Matplotlib renderers (there is an eponymous
backend for each; these are *non-interactive backends*, capable of
writing to a file):

========  =========  =======================================================
Renderer  Filetypes  Description
========  =========  =======================================================
AGG       png        raster_ graphics -- high quality images using the
                     `Anti-Grain Geometry`_ engine
PDF       pdf        vector_ graphics -- `Portable Document Format`_
PS        ps, eps    vector_ graphics -- Postscript_ output
SVG       svg        vector_ graphics -- `Scalable Vector Graphics`_
PGF       pgf, pdf   vector_ graphics -- using the pgf_ package
Cairo     png, ps,   raster_ or vector_ graphics -- using the Cairo_ library
          pdf, svg
========  =========  =======================================================

To save plots using the non-interactive backends, use the
``matplotlib.pyplot.savefig('filename')`` method.

These are the user interfaces and renderer combinations supported;
these are *interactive backends*, capable of displaying to the screen
and using appropriate renderers from the table above to write to
a file:

========= ================================================================
Backend   Description
========= ================================================================
QtAgg     Agg rendering in a Qt_ canvas (requires PyQt_ or `Qt for Python`_,
          a.k.a. PySide).  This backend can be activated in IPython with
          ``%matplotlib qt``.
ipympl    Agg rendering embedded in a Jupyter widget.  (requires ipympl).
          This backend can be enabled in a Jupyter notebook with
          ``%matplotlib ipympl``.
GTK3Agg   Agg rendering to a GTK_ 3.x canvas (requires PyGObject_,
          and pycairo_ or cairocffi_).  This backend can be activated in
          IPython with ``%matplotlib gtk3``.
GTK4Agg   Agg rendering to a GTK_ 4.x canvas (requires PyGObject_,
          and pycairo_ or cairocffi_).  This backend can be activated in
          IPython with ``%matplotlib gtk4``.
macosx    Agg rendering into a Cocoa canvas in OSX.  This backend can be
          activated in IPython with ``%matplotlib osx``.
TkAgg     Agg rendering to a Tk_ canvas (requires TkInter_). This
          backend can be activated in IPython with ``%matplotlib tk``.
nbAgg     Embed an interactive figure in a Jupyter classic notebook.  This
          backend can be enabled in Jupyter notebooks via
          ``%matplotlib notebook``.
WebAgg    On ``show()`` will start a tornado server with an interactive
          figure.
GTK3Cairo Cairo rendering to a GTK_ 3.x canvas (requires PyGObject_,
          and pycairo_ or cairocffi_).
GTK4Cairo Cairo rendering to a GTK_ 4.x canvas (requires PyGObject_,
          and pycairo_ or cairocffi_).
wxAgg     Agg rendering to a wxWidgets_ canvas (requires wxPython_ 4).
          This backend can be activated in IPython with ``%matplotlib wx``.
========= ================================================================

.. note::
   The names of builtin backends case-insensitive; e.g., 'QtAgg' and
   'qtagg' are equivalent.

.. _`Anti-Grain Geometry`: http://agg.sourceforge.net/antigrain.com/
.. _`Portable Document Format`: https://en.wikipedia.org/wiki/Portable_Document_Format
.. _Postscript: https://en.wikipedia.org/wiki/PostScript
.. _`Scalable Vector Graphics`: https://en.wikipedia.org/wiki/Scalable_Vector_Graphics
.. _pgf: https://ctan.org/pkg/pgf
.. _Cairo: https://www.cairographics.org
.. _PyGObject: https://wiki.gnome.org/action/show/Projects/PyGObject
.. _pycairo: https://www.cairographics.org/pycairo/
.. _cairocffi: https://pythonhosted.org/cairocffi/
.. _wxPython: https://www.wxpython.org/
.. _TkInter: https://docs.python.org/3/library/tk.html
.. _PyQt: https://riverbankcomputing.com/software/pyqt/intro
.. _`Qt for Python`: https://doc.qt.io/qtforpython/
.. _Qt: https://qt.io/
.. _GTK: https://www.gtk.org/
.. _Tk: https://www.tcl.tk/
.. _wxWidgets: https://www.wxwidgets.org/

ipympl
^^^^^^

The Jupyter widget ecosystem is moving too fast to support directly in
Matplotlib.  To install ipympl:

.. code-block:: bash

   pip install ipympl
   jupyter nbextension enable --py --sys-prefix ipympl

or

.. code-block:: bash

   conda install ipympl -c conda-forge

See `jupyter-matplotlib <https://github.com/matplotlib/jupyter-matplotlib>`__
for more details.

.. _QT_API-usage:

How do I select the Qt implementation?
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

The QtAgg and QtCairo backends support both Qt 5 and 6, as well as both Python
bindings (`PyQt`_ or `Qt for Python`_, a.k.a. PySide). If any binding has
already been loaded, then it will be used for the Qt backend. Otherwise, the
first available binding is used, in the order: PyQt6, PySide6, PyQt5, PySide2.

The :envvar:`QT_API` environment variable can be set to override the search
when nothing has already been loaded. It may be set to (case-insensitively)
PyQt6, PySide6, PyQt5, or PySide2 to pick the version and binding to use. If
the chosen implementation is unavailable, the Qt backend will fail to load
without attempting any other Qt implementations.

Using non-builtin backends
--------------------------
More generally, any importable backend can be selected by using any of the
methods above. If ``name.of.the.backend`` is the module containing the
backend, use ``module://name.of.the.backend`` as the backend name, e.g.
``matplotlib.use('module://name.of.the.backend')``.
.. redirect-from:: /users/fonts
  
Fonts in Matplotlib text engine
===============================

Matplotlib needs fonts to work with its text engine, some of which are shipped
alongside the installation. However, users can configure the default fonts, or
even provide their own custom fonts! For more details, see :doc:`Customizing
text properties </tutorials/text/text_props>`.

However, Matplotlib also provides an option to offload text rendering to a TeX
engine (``usetex=True``),
see :doc:`Text rendering with LaTeX </tutorials/text/usetex>`.

Font specifications
-------------------
Fonts have a long and sometimes incompatible history in computing, leading to
different platforms supporting different types of fonts. In practice, there are
3 types of font specifications Matplotlib supports (in addition to 'core
fonts', more about which is explained later in the guide):

.. list-table:: Type of Fonts
   :header-rows: 1

   * - Type 1 (PDF)
     - Type 3 (PDF/PS)
     - TrueType (PDF)
   * - One of the oldest types, introduced by Adobe
     - Similar to Type 1 in terms of introduction
     - Newer than previous types, used commonly today, introduced by Apple
   * - Restricted subset of PostScript, charstrings are in bytecode
     - Full PostScript language, allows embedding arbitrary code
       (in theory, even render fractals when rasterizing!)
     - Include a virtual machine that can execute code!
   * - These fonts support font hinting
     - Do not support font hinting
     - Hinting supported (virtual machine processes the "hints")
   * - Non-subsetted through Matplotlib
     - Subsetted via external module `ttconv <https://github.com/sandflow/ttconv>`_
     - Subsetted via external module `fonttools <https://github.com/fonttools/fonttools>`_

NOTE: Adobe will disable support for authoring with Type 1 fonts in
January 2023. `Read more here. <https://helpx.adobe.com/fonts/kb/postscript-type-1-fonts-end-of-support.html>`_

Special mentions
^^^^^^^^^^^^^^^^
Other font specifications which Matplotlib supports:

- Type 42 fonts (PS):

  - PostScript wrapper around TrueType fonts
  - 42 is the `Answer to Life, the Universe, and Everything! <https://en.wikipedia.org/wiki/Answer_to_Life,_the_Universe,_and_Everything>`_
  - Matplotlib uses an external library called `fonttools <https://github.com/fonttools/fonttools>`_
    to subset these types of fonts

- OpenType fonts:

  - OpenType is a new standard for digital type fonts, developed jointly by
    Adobe and Microsoft
  - Generally contain a much larger character set!
  - Limited Support with Matplotlib

Subsetting
----------
Matplotlib is able to generate documents in multiple different formats. Some of
those formats (for example, PDF, PS/EPS, SVG) allow embedding font data in such
a way that when these documents are visually scaled, the text does not appear
pixelated.

This can be achieved by embedding the *whole* font file within the
output document. However, this can lead to very large documents, as some
fonts (for instance, CJK - Chinese/Japanese/Korean fonts) can contain a large
number of glyphs, and thus their embedded size can be quite huge.

Font Subsetting can be used before generating documents, to embed only the
*required* glyphs within the documents. Fonts can be considered as a collection
of glyphs, so ultimately the goal is to find out *which* glyphs are required
for a certain array of characters, and embed only those within the output.

.. note::
  The role of subsetter really shines when we encounter characters like **ä**
  (composed by calling subprograms for **a** and **¨**); since the subsetter
  has to find out *all* such subprograms being called by every glyph included
  in the subset, this is a generally difficult problem!

Luckily, Matplotlib uses a fork of an external dependency called
`ttconv <https://github.com/sandflow/ttconv>`_, which helps in embedding and
subsetting font data. (however, recent versions have moved away from ttconv to
pure Python for certain types: for more details visit
`these <https://github.com/matplotlib/matplotlib/pull/18370>`_, `links <https://github.com/matplotlib/matplotlib/pull/18181>`_)

| *Type 1 fonts are still non-subsetted* through Matplotlib. (though one will encounter these mostly via *usetex*/*dviread* in PDF backend)
| **Type 3 and Type 42 fonts are subsetted**, with a fair amount of exceptions and bugs for the latter.

What to use?
------------
Practically, most fonts that are readily available on most operating systems or
are readily available on the internet to download include *TrueType fonts* and
its "extensions" such as MacOS-resource fork fonts and the newer OpenType
fonts.

PS and PDF backends provide support for yet another type of fonts, which remove
the need of subsetting altogether! These are called **Core Fonts**, and
Matplotlib calls them via the keyword **AFM**; all that is supplied from
Matplotlib to such documents are font metrics (specified in AFM format), and it
is the job of the viewer applications to supply the glyph definitions.

This is especially helpful to generate *really lightweight* documents.::

    # trigger core fonts for PDF backend
    plt.rcParams["pdf.use14corefonts"] = True
    # trigger core fonts for PS backend
    plt.rcParams["ps.useafm"] = True

    chars = "AFM ftw!"
    fig, ax = plt.subplots()
    ax.text(0.5, 0.5, chars)

    fig.savefig("AFM_PDF.pdf", format="pdf")
    fig.savefig("AFM_PS.ps", format="ps)

.. note::
  These core fonts are limited to PDF and PS backends only; they can not be
  rendered in other backends.

  Another downside to this is that while the font metrics are standardized,
  different PDF viewer applications will have different fonts to render these
  metrics. In other words, the **output might look different on different
  viewers**, as well as (let's say) Windows and Linux, if Linux tools included
  free versions of the proprietary fonts.

  This also violates the *what-you-see-is-what-you-get* feature of Matplotlib.
.. _users-guide-explain:

.. redirect-from:: /users/explain

Explanations
------------

.. toctree::
    :maxdepth: 2

    backends.rst
    interactive.rst
    fonts.rst
    event_handling.rst
    performance.rst
    interactive_guide.rst
.. _howto-faq:

.. redirect-from:: /faq/howto_faq

******
How-to
******

.. contents::
   :backlinks: none


.. _how-to-too-many-ticks:

Why do I have so many ticks, and/or why are they out of order?
--------------------------------------------------------------

One common cause for unexpected tick behavior is passing a *list of strings
instead of numbers or datetime objects*. This can easily happen without notice
when reading in a comma-delimited text file. Matplotlib treats lists of strings
as *categorical* variables
(:doc:`/gallery/lines_bars_and_markers/categorical_variables`), and by default
puts one tick per category, and plots them in the order in which they are
supplied.

.. plot::
    :include-source:
    :align: center

    import matplotlib.pyplot as plt
    import numpy as np

    fig, ax = plt.subplots(1, 2, constrained_layout=True, figsize=(6, 2))

    ax[0].set_title('Ticks seem out of order / misplaced')
    x = ['5', '20', '1', '9']  # strings
    y = [5, 20, 1, 9]
    ax[0].plot(x, y, 'd')
    ax[0].tick_params(axis='x', labelcolor='red', labelsize=14)

    ax[1].set_title('Many ticks')
    x = [str(xx) for xx in np.arange(100)]  # strings
    y = np.arange(100)
    ax[1].plot(x, y)
    ax[1].tick_params(axis='x', labelcolor='red', labelsize=14)

The solution is to convert the list of strings to numbers or
datetime objects (often ``np.asarray(numeric_strings, dtype='float')`` or
``np.asarray(datetime_strings, dtype='datetime64[s]')``).

For more information see :doc:`/gallery/ticks/ticks_too_many`.

.. _howto-determine-artist-extent:

Determine the extent of Artists in the Figure
---------------------------------------------

Sometimes we want to know the extent of an Artist.  Matplotlib `.Artist` objects
have a method `.Artist.get_window_extent` that will usually return the extent of
the artist in pixels.  However, some artists, in particular text, must be
rendered at least once before their extent is known.  Matplotlib supplies
`.Figure.draw_without_rendering`, which should be called before calling
``get_window_extent``.

.. _howto-figure-empty:

Check whether a figure is empty
-------------------------------
Empty can actually mean different things. Does the figure contain any artists?
Does a figure with an empty `~.axes.Axes` still count as empty? Is the figure
empty if it was rendered pure white (there may be artists present, but they
could be outside the drawing area or transparent)?

For the purpose here, we define empty as: "The figure does not contain any
artists except it's background patch." The exception for the background is
necessary, because by default every figure contains a `.Rectangle` as it's
background patch. This definition could be checked via::

    def is_empty(figure):
        """
        Return whether the figure contains no Artists (other than the default
        background patch).
        """
        contained_artists = figure.get_children()
        return len(contained_artists) <= 1

We've decided not to include this as a figure method because this is only one
way of defining empty, and checking the above is only rarely necessary.
Usually the user or program handling the figure know if they have added
something to the figure.

Checking whether a figure would render empty cannot be reliably checked except
by actually rendering the figure and investigating the rendered result.

.. _howto-findobj:

Find all objects in a figure of a certain type
----------------------------------------------

Every Matplotlib artist (see :doc:`/tutorials/intermediate/artists`) has a method
called :meth:`~matplotlib.artist.Artist.findobj` that can be used to
recursively search the artist for any artists it may contain that meet
some criteria (e.g., match all :class:`~matplotlib.lines.Line2D`
instances or match some arbitrary filter function).  For example, the
following snippet finds every object in the figure which has a
``set_color`` property and makes the object blue::

    def myfunc(x):
        return hasattr(x, 'set_color')

    for o in fig.findobj(myfunc):
        o.set_color('blue')

You can also filter on class instances::

    import matplotlib.text as text
    for o in fig.findobj(text.Text):
        o.set_fontstyle('italic')

.. _howto-supress_offset:

Prevent ticklabels from having an offset
----------------------------------------
The default formatter will use an offset to reduce
the length of the ticklabels.  To turn this feature
off on a per-axis basis::

   ax.get_xaxis().get_major_formatter().set_useOffset(False)

set :rc:`axes.formatter.useoffset`, or use a different
formatter.  See :mod:`~matplotlib.ticker` for details.

.. _howto-transparent:

Save transparent figures
------------------------

The :meth:`~matplotlib.pyplot.savefig` command has a keyword argument
*transparent* which, if 'True', will make the figure and axes
backgrounds transparent when saving, but will not affect the displayed
image on the screen.

If you need finer grained control, e.g., you do not want full transparency
or you want to affect the screen displayed version as well, you can set
the alpha properties directly.  The figure has a
:class:`~matplotlib.patches.Rectangle` instance called *patch*
and the axes has a Rectangle instance called *patch*.  You can set
any property on them directly (*facecolor*, *edgecolor*, *linewidth*,
*linestyle*, *alpha*).  e.g.::

    fig = plt.figure()
    fig.patch.set_alpha(0.5)
    ax = fig.add_subplot(111)
    ax.patch.set_alpha(0.5)

If you need *all* the figure elements to be transparent, there is
currently no global alpha setting, but you can set the alpha channel
on individual elements, e.g.::

   ax.plot(x, y, alpha=0.5)
   ax.set_xlabel('volts', alpha=0.5)

.. _howto-multipage:

Save multiple plots to one pdf file
-----------------------------------

Many image file formats can only have one image per file, but some formats
support multi-page files.  Currently, Matplotlib only provides multi-page
output to pdf files, using either the pdf or pgf backends, via the
`.backend_pdf.PdfPages` and `.backend_pgf.PdfPages` classes.

.. _howto-auto-adjust:

Make room for tick labels
-------------------------

By default, Matplotlib uses fixed percentage margins around subplots. This can
lead to labels overlapping or being cut off at the figure boundary. There are
multiple ways to fix this:

- Manually adapt the subplot parameters using `.Figure.subplots_adjust` /
  `.pyplot.subplots_adjust`.
- Use one of the automatic layout mechanisms:

  - constrained layout (:doc:`/tutorials/intermediate/constrainedlayout_guide`)
  - tight layout (:doc:`/tutorials/intermediate/tight_layout_guide`)

- Calculate good values from the size of the plot elements yourself
  (:doc:`/gallery/pyplots/auto_subplots_adjust`)

.. _howto-align-label:

Align my ylabels across multiple subplots
-----------------------------------------

If you have multiple subplots over one another, and the y data have
different scales, you can often get ylabels that do not align
vertically across the multiple subplots, which can be unattractive.
By default, Matplotlib positions the x location of the ylabel so that
it does not overlap any of the y ticks.  You can override this default
behavior by specifying the coordinates of the label.  The example
below shows the default behavior in the left subplots, and the manual
setting in the right subplots.

.. figure:: ../../gallery/pyplots/images/sphx_glr_align_ylabels_001.png
   :target: ../../gallery/pyplots/align_ylabels.html
   :align: center
   :scale: 50

.. _howto-set-zorder:

Control the draw order of plot elements
---------------------------------------

The draw order of plot elements, and thus which elements will be on top, is
determined by the `~.Artist.set_zorder` property.
See :doc:`/gallery/misc/zorder_demo` for a detailed description.

.. _howto-axis-equal:

Make the aspect ratio for plots equal
-------------------------------------

The Axes property :meth:`~matplotlib.axes.Axes.set_aspect` controls the
aspect ratio of the axes.  You can set it to be 'auto', 'equal', or
some ratio which controls the ratio::

  ax = fig.add_subplot(111, aspect='equal')

.. only:: html

    See :doc:`/gallery/subplots_axes_and_figures/axis_equal_demo` for a
    complete example.

.. _howto-twoscale:

Draw multiple y-axis scales
---------------------------

A frequent request is to have two scales for the left and right
y-axis, which is possible using :func:`~matplotlib.pyplot.twinx` (more
than two scales are not currently supported, though it is on the wish
list).  This works pretty well, though there are some quirks when you
are trying to interactively pan and zoom, because both scales do not get
the signals.

The approach uses :func:`~matplotlib.pyplot.twinx` (and its sister
:func:`~matplotlib.pyplot.twiny`) to use *2 different axes*,
turning the axes rectangular frame off on the 2nd axes to keep it from
obscuring the first, and manually setting the tick locs and labels as
desired.  You can use separate ``matplotlib.ticker`` formatters and
locators as desired because the two axes are independent.

.. plot::

    import numpy as np
    import matplotlib.pyplot as plt

    fig = plt.figure()
    ax1 = fig.add_subplot(111)
    t = np.arange(0.01, 10.0, 0.01)
    s1 = np.exp(t)
    ax1.plot(t, s1, 'b-')
    ax1.set_xlabel('time (s)')
    ax1.set_ylabel('exp')

    ax2 = ax1.twinx()
    s2 = np.sin(2*np.pi*t)
    ax2.plot(t, s2, 'r.')
    ax2.set_ylabel('sin')
    plt.show()


.. only:: html

    See :doc:`/gallery/subplots_axes_and_figures/two_scales` for a
    complete example.

.. _howto-batch:

Generate images without having a window appear
----------------------------------------------

Simply do not call `~matplotlib.pyplot.show`, and directly save the figure to
the desired format::

    import matplotlib.pyplot as plt
    plt.plot([1, 2, 3])
    plt.savefig('myfig.png')

.. seealso::

    :doc:`/gallery/user_interfaces/web_application_server_sgskip` for
    information about running matplotlib inside of a web application.

.. _how-to-threads:

Work with threads
-----------------

Matplotlib is not thread-safe: in fact, there are known race conditions
that affect certain artists.  Hence, if you work with threads, it is your
responsibility to set up the proper locks to serialize access to Matplotlib
artists.

You may be able to work on separate figures from separate threads.  However,
you must in that case use a *non-interactive backend* (typically Agg), because
most GUI backends *require* being run from the main thread as well.
.. _environment-variables:

.. redirect-from:: /faq/environment_variables_faq

*********************
Environment variables
*********************

.. contents::
   :backlinks: none

.. envvar:: HOME

  The user's home directory. On Linux, :envvar:`~ <HOME>` is shorthand for :envvar:`HOME`.

.. envvar:: MPLBACKEND

  This optional variable can be set to choose the Matplotlib backend. See
  :ref:`what-is-a-backend`.

.. envvar:: MPLCONFIGDIR

  This is the directory used to store user customizations to
  Matplotlib, as well as some caches to improve performance. If
  :envvar:`MPLCONFIGDIR` is not defined, :file:`{HOME}/.config/matplotlib`
  and :file:`{HOME}/.cache/matplotlib` are used on Linux, and
  :file:`{HOME}/.matplotlib` on other platforms, if they are
  writable. Otherwise, the Python standard library's `tempfile.gettempdir` is
  used to find a base directory in which the :file:`matplotlib` subdirectory is
  created.

.. envvar:: MPLSETUPCFG

   This optional variable can be set to the full path of a :file:`mplsetup.cfg`
   configuration file used to customize the Matplotlib build.  By default, a
   :file:`mplsetup.cfg` file in the root of the Matplotlib source tree will be
   read.  Supported build options are listed in :file:`mplsetup.cfg.template`.

.. envvar:: PATH

  The list of directories searched to find executable programs.

.. envvar:: PYTHONPATH

  The list of directories that are added to Python's standard search list when
  importing packages and modules.

.. envvar:: QT_API

   The Python Qt wrapper to prefer when using Qt-based backends. See :ref:`the
   entry in the usage guide <QT_API-usage>` for more information.

.. _setting-linux-osx-environment-variables:

Setting environment variables in Linux and macOS
================================================

To list the current value of :envvar:`PYTHONPATH`, which may be empty, try::

  echo $PYTHONPATH

The procedure for setting environment variables in depends on what your default
shell is.  Common shells include :program:`bash` and :program:`csh`.  You
should be able to determine which by running at the command prompt::

  echo $SHELL

To create a new environment variable::

  export PYTHONPATH=~/Python  # bash/ksh
  setenv PYTHONPATH ~/Python  # csh/tcsh

To prepend to an existing environment variable::

  export PATH=~/bin:${PATH}  # bash/ksh
  setenv PATH ~/bin:${PATH}  # csh/tcsh

The search order may be important to you, do you want :file:`~/bin` to be
searched first or last?  To append to an existing environment variable::

  export PATH=${PATH}:~/bin  # bash/ksh
  setenv PATH ${PATH}:~/bin  # csh/tcsh

To make your changes available in the future, add the commands to your
:file:`~/.bashrc` or :file:`~/.cshrc` file.

.. _setting-windows-environment-variables:

Setting environment variables in Windows
========================================

Open the :program:`Control Panel` (:menuselection:`Start --> Control Panel`),
start the :program:`System` program. Click the :guilabel:`Advanced` tab
and select the :guilabel:`Environment Variables` button. You can edit or add to
the :guilabel:`User Variables`.
.. _troubleshooting-faq:

.. redirect-from:: /faq/troubleshooting_faq

***************
Troubleshooting
***************

.. contents::
   :backlinks: none

.. _matplotlib-version:

Obtaining Matplotlib version
============================

To find out your Matplotlib version number, import it and print the
``__version__`` attribute::

    >>> import matplotlib
    >>> matplotlib.__version__
    '0.98.0'


.. _locating-matplotlib-install:

:file:`matplotlib` install location
===================================

You can find what directory Matplotlib is installed in by importing it
and printing the ``__file__`` attribute::

    >>> import matplotlib
    >>> matplotlib.__file__
    '/home/jdhunter/dev/lib64/python2.5/site-packages/matplotlib/__init__.pyc'

.. _locating-matplotlib-config-dir:

:file:`matplotlib` configuration and cache directory locations
==============================================================

Each user has a Matplotlib configuration directory which may contain a
:ref:`matplotlibrc <customizing-with-matplotlibrc-files>` file. To
locate your :file:`matplotlib/` configuration directory, use
:func:`matplotlib.get_configdir`::

    >>> import matplotlib as mpl
    >>> mpl.get_configdir()
    '/home/darren/.config/matplotlib'

On Unix-like systems, this directory is generally located in your
:envvar:`HOME` directory under the :file:`.config/` directory.

In addition, users have a cache directory. On Unix-like systems, this is
separate from the configuration directory by default. To locate your
:file:`.cache/` directory, use :func:`matplotlib.get_cachedir`::

    >>> import matplotlib as mpl
    >>> mpl.get_cachedir()
    '/home/darren/.cache/matplotlib'

On Windows, both the config directory and the cache directory are
the same and are in your :file:`Documents and Settings` or :file:`Users`
directory by default::

    >>> import matplotlib as mpl
    >>> mpl.get_configdir()
    'C:\\Documents and Settings\\jdhunter\\.matplotlib'
    >>> mpl.get_cachedir()
    'C:\\Documents and Settings\\jdhunter\\.matplotlib'

If you would like to use a different configuration directory, you can
do so by specifying the location in your :envvar:`MPLCONFIGDIR`
environment variable -- see
:ref:`setting-linux-osx-environment-variables`.  Note that
:envvar:`MPLCONFIGDIR` sets the location of both the configuration
directory and the cache directory.

.. _reporting-problems:

Getting help
============

There are a number of good resources for getting help with Matplotlib.
There is a good chance your question has already been asked:

- The `mailing list archive <http://matplotlib.1069221.n5.nabble.com/>`_.

- `GitHub issues <https://github.com/matplotlib/matplotlib/issues>`_.

- Stackoverflow questions tagged `matplotlib
  <https://stackoverflow.com/questions/tagged/matplotlib>`_.

If you are unable to find an answer to your question through search, please
provide the following information in your e-mail to the `mailing list
<https://mail.python.org/mailman/listinfo/matplotlib-users>`_:

* Your operating system (Linux/Unix users: post the output of ``uname -a``).

* Matplotlib version::

     python -c "import matplotlib; print(matplotlib.__version__)"

* Where you obtained Matplotlib (e.g., your Linux distribution's packages,
  GitHub, PyPI, or `Anaconda <https://www.anaconda.com/>`_).

* Any customizations to your ``matplotlibrc`` file (see
  :doc:`/tutorials/introductory/customizing`).

* If the problem is reproducible, please try to provide a *minimal*, standalone
  Python script that demonstrates the problem.  This is *the* critical step.
  If you can't post a piece of code that we can run and reproduce your error,
  the chances of getting help are significantly diminished.  Very often, the
  mere act of trying to minimize your code to the smallest bit that produces
  the error will help you find a bug in *your* code that is causing the
  problem.

* Matplotlib provides debugging information through the `logging` library, and
  a helper function to set the logging level: one can call ::

    plt.set_loglevel("info")  # or "debug" for more info

  to obtain this debugging information.

  Standard functions from the `logging` module are also applicable; e.g. one
  could call ``logging.basicConfig(level="DEBUG")`` even before importing
  Matplotlib (this is in particular necessary to get the logging info emitted
  during Matplotlib's import), or attach a custom handler to the "matplotlib"
  logger.  This may be useful if you use a custom logging configuration.

If you compiled Matplotlib yourself, please also provide:

* any changes you have made to ``setup.py`` or ``setupext.py``.
* the output of::

     rm -rf build
     python setup.py build

  The beginning of the build output contains lots of details about your
  platform that are useful for the Matplotlib developers to diagnose your
  problem.

* your compiler version -- e.g., ``gcc --version``.

Including this information in your first e-mail to the mailing list
will save a lot of time.

You will likely get a faster response writing to the mailing list than
filing a bug in the bug tracker.  Most developers check the bug
tracker only periodically.  If your problem has been determined to be
a bug and can not be quickly solved, you may be asked to file a bug in
the tracker so the issue doesn't get lost.

.. _git-trouble:

Problems with recent git versions
=================================

First make sure you have a clean build and install (see :ref:`clean-install`),
get the latest git update, install it and run a simple test script in debug
mode::

    rm -rf /path/to/site-packages/matplotlib*
    git clean -xdf
    git pull
    python -m pip install -v . > build.out
    python -c "from pylab import *; set_loglevel('debug'); plot(); show()" > run.out

and post :file:`build.out` and :file:`run.out` to the `matplotlib-devel
<https://mail.python.org/mailman/listinfo/matplotlib-devel>`_
mailing list (please do not post git problems to the `users list
<https://mail.python.org/mailman/listinfo/matplotlib-users>`_).

Of course, you will want to clearly describe your problem, what you
are expecting and what you are getting, but often a clean build and
install will help.  See also :ref:`reporting-problems`.
.. _faq-index:

.. redirect-from:: /faq/index

##########################
How-to and troubleshooting 
##########################

.. only:: html

   :Release: |version|
   :Date: |today|

   Frequently asked questions about Matplotlib:

.. toctree::
   :maxdepth: 2

   howto_faq.rst
   troubleshooting_faq.rst
   environment_variables_faq.rst
.. _contributing:

============
Contributing
============

This project is a community effort, and everyone is welcome to
contribute. Everyone within the community
is expected to abide by our
`code of conduct <https://github.com/matplotlib/matplotlib/blob/main/CODE_OF_CONDUCT.md>`_.

The project is hosted on
https://github.com/matplotlib/matplotlib

Contributor incubator
=====================

If you are interested in becoming a regular contributor to Matplotlib, but
don't know where to start or feel insecure about it, you can join our non-public
communication channel for new contributors. To do so, please go to `gitter
<https://gitter.im/matplotlib/matplotlib>`_ and ask to be added to '#incubator'.
This is a private gitter room moderated by core Matplotlib developers where you can
get guidance and support for your first few PRs.  This is a place you can ask questions
about anything: how to use git, github, how our PR review process works, technical questions
about the code, what makes for good documentation or a blog post, how to get involved involved
in community work, or get "pre-review" on your PR.


.. _new_contributors:

Issues for new contributors
---------------------------

While any contributions are welcome, we have marked some issues as
particularly suited for new contributors by the label
`good first issue <https://github.com/matplotlib/matplotlib/labels/good%20first%20issue>`_
These are well documented issues, that do not require a deep understanding of
the internals of Matplotlib. The issues may additionally be tagged with a
difficulty. ``Difficulty: Easy`` is suited for people with little Python experience.
``Difficulty: Medium`` and ``Difficulty: Hard`` are not trivial to solve and
require more thought and programming experience.

In general, the Matplotlib project does not assign issues. Issues are 
"assigned" or "claimed" by opening a PR; there is no other assignment 
mechanism. If you have opened such a PR, please comment on the issue thread to 
avoid duplication of work. Please check if there is an existing PR for the 
issue you are addressing. If there is, try to work with the author by 
submitting reviews of their code or commenting on the PR rather than opening 
a new PR; duplicate PRs are subject to being closed.  However, if the existing 
PR is an outline, unlikely to work, or stalled, and the original author is 
unresponsive, feel free to open a new PR referencing the old one. 

.. _submitting-a-bug-report:

Submitting a bug report
=======================

If you find a bug in the code or documentation, do not hesitate to submit a
ticket to the
`Issue Tracker <https://github.com/matplotlib/matplotlib/issues>`_. You are
also welcome to post feature requests or pull requests.

If you are reporting a bug, please do your best to include the following:

1. A short, top-level summary of the bug. In most cases, this should be 1-2
   sentences.

2. A short, self-contained code snippet to reproduce the bug, ideally allowing
   a simple copy and paste to reproduce. Please do your best to reduce the code
   snippet to the minimum required.

3. The actual outcome of the code snippet.

4. The expected outcome of the code snippet.

5. The Matplotlib version, Python version and platform that you are using. You
   can grab the version with the following commands::

      >>> import matplotlib
      >>> matplotlib.__version__
      '3.4.1'
      >>> import platform
      >>> platform.python_version()
      '3.9.2'

We have preloaded the issue creation page with a Markdown form that you can
use to organize this information.

Thank you for your help in keeping bug reports complete, targeted and descriptive.

.. _request-a-new-feature:

Requesting a new feature
========================

Please post feature requests to the
`Issue Tracker <https://github.com/matplotlib/matplotlib/issues>`_.

The Matplotlib developers will give feedback on the feature proposal. Since
Matplotlib is an open source project with limited resources, we encourage
users to then also
:ref:`participate in the implementation <contributing-code>`.

.. _contributing-code:

Contributing code
=================

.. _how-to-contribute:

How to contribute
-----------------

The preferred way to contribute to Matplotlib is to fork the `main
repository <https://github.com/matplotlib/matplotlib/>`__ on GitHub,
then submit a "pull request" (PR).

A brief overview is:

1. `Create an account <https://github.com/join>`_ on GitHub if you do not
   already have one.

2. Fork the `project repository <https://github.com/matplotlib/matplotlib>`_:
   click on the 'Fork' button near the top of the page. This creates a copy of
   the code under your account on the GitHub server.

3. Clone this copy to your local disk::

      git clone https://github.com/<YOUR GITHUB USERNAME>/matplotlib.git

4. Enter the directory and install the local version of Matplotlib.
   See :ref:`installing_for_devs` for instructions

5. Create a branch to hold your changes::

      git checkout -b my-feature origin/main

   and start making changes. Never work in the ``main`` branch!

6. Work on this copy, on your computer, using Git to do the version control.
   When you're done editing e.g., ``lib/matplotlib/collections.py``, do::

      git add lib/matplotlib/collections.py
      git commit

   to record your changes in Git, then push them to GitHub with::

      git push -u origin my-feature

Finally, go to the web page of your fork of the Matplotlib repo, and click
'Pull request' to send your changes to the maintainers for review.

.. seealso::

  * `Git documentation <https://git-scm.com/doc>`_
  * `Git-Contributing to a Project <https://git-scm.com/book/en/v2/GitHub-Contributing-to-a-Project>`_
  * `Introduction to GitHub  <https://lab.github.com/githubtraining/introduction-to-github>`_
  * :ref:`development-workflow` for best practices for Matplotlib
  * :ref:`using-git`

Contributing pull requests
--------------------------

It is recommended to check that your contribution complies with the following
rules before submitting a pull request:

* If your pull request addresses an issue, please use the title to describe the
  issue and mention the issue number in the pull request description to ensure
  that a link is created to the original issue.

* All public methods should have informative docstrings with sample usage when
  appropriate. Use the `numpy docstring standard
  <https://numpydoc.readthedocs.io/en/latest/format.html>`_.

* Formatting should follow the recommendations of PEP8_, as enforced by
  flake8_.  You can check flake8 compliance from the command line with ::

    python -m pip install flake8
    flake8 /path/to/module.py

  or your editor may provide integration with it.  Note that Matplotlib
  intentionally does not use the black_ auto-formatter (1__), in particular due
  to its unability to understand the semantics of mathematical expressions
  (2__, 3__).

  .. _PEP8: https://www.python.org/dev/peps/pep-0008/
  .. _flake8: https://flake8.pycqa.org/
  .. _black: https://black.readthedocs.io/
  .. __: https://github.com/matplotlib/matplotlib/issues/18796
  .. __: https://github.com/psf/black/issues/148
  .. __: https://github.com/psf/black/issues/1984

* Each high-level plotting function should have a simple example in the
  ``Example`` section of the docstring.  This should be as simple as possible
  to demonstrate the method.  More complex examples should go in the
  ``examples`` tree.

* Changes (both new features and bugfixes) should have good test coverage. See
  :ref:`testing` for more details.

* Import the following modules using the standard scipy conventions::

     import numpy as np
     import numpy.ma as ma
     import matplotlib as mpl
     import matplotlib.pyplot as plt
     import matplotlib.cbook as cbook
     import matplotlib.patches as mpatches

  In general, Matplotlib modules should **not** import `.rcParams` using ``from
  matplotlib import rcParams``, but rather access it as ``mpl.rcParams``.  This
  is because some modules are imported very early, before the `.rcParams`
  singleton is constructed.

* If your change is a major new feature, add an entry to the ``What's new``
  section by adding a new file in ``doc/users/next_whats_new`` (see
  :file:`doc/users/next_whats_new/README.rst` for more information).

* If you change the API in a backward-incompatible way, please document it in
  :file:`doc/api/next_api_changes/behavior`, by adding a new file with the
  naming convention ``99999-ABC.rst`` where the pull request number is followed
  by the contributor's initials. (see :file:`doc/api/api_changes.rst` for more
  information)

* See below for additional points about :ref:`keyword-argument-processing`, if
  applicable for your pull request.

.. note::

    The current state of the Matplotlib code base is not compliant with all
    of those guidelines, but we expect that enforcing those constraints on all
    new contributions will move the overall code base quality in the right
    direction.


.. seealso::

  * :ref:`coding_guidelines`
  * :ref:`testing`
  * :ref:`documenting-matplotlib`




.. _contributing_documentation:

Contributing documentation
==========================

You as an end-user of Matplotlib can make a valuable contribution because you
more clearly see the potential for improvement than a core developer. For example, you can:

- Fix a typo
- Clarify a docstring
- Write or update an :ref:`example plot <gallery>`
- Write or update a comprehensive :ref:`tutorial <tutorials>`

The documentation source files live in the same GitHub repository as the code.
Contributions are proposed and accepted through the pull request process.
For details see :ref:`how-to-contribute`.

If you have trouble getting started, you may instead open an `issue`_
describing the intended improvement.

.. _issue: https://github.com/matplotlib/matplotlib/issues

.. seealso::
  * :ref:`documenting-matplotlib`

.. _other_ways_to_contribute:

Other ways to contribute
========================

It also helps us if you spread the word: reference the project from your blog
and articles or link to it from your website!  If Matplotlib contributes to a
project that leads to a scientific publication, please follow the
:doc:`/users/project/citing` guidelines.

.. _coding_guidelines:

Coding guidelines
=================

API changes
-----------

API consistency and stability are of great value. Therefore, API changes
(e.g. signature changes, behavior changes, removals) will only be conducted
if the added benefit is worth the user effort for adapting.

API changes in Matplotlib have to be performed following the deprecation process
below, except in very rare circumstances as deemed necessary by the development team.
This ensures that users are notified before the change will take effect and thus
prevents unexpected breaking of code.

Rules
~~~~~

- Deprecations are targeted at the next point.release (e.g. 3.x)
- Deprecated API is generally removed two two point-releases after introduction
  of the deprecation. Longer deprecations can be imposed by core developers on
  a case-by-case basis to give more time for the transition
- The old API must remain fully functional during the deprecation period
- If alternatives to the deprecated API exist, they should be available
  during the deprecation period
- If in doubt, decisions about API changes are finally made by the
  API consistency lead developer

Introducing
~~~~~~~~~~~

1. Announce the deprecation in a new file
   :file:`doc/api/next_api_changes/deprecations/99999-ABC.rst` where ``99999``
   is the pull request number and ``ABC`` are the contributor's initials.
2. If possible, issue a `.MatplotlibDeprecationWarning` when the deprecated
   API is used. There are a number of helper tools for this:

   - Use ``_api.warn_deprecated()`` for general deprecation warnings
   - Use the decorator ``@_api.deprecated`` to deprecate classes, functions,
     methods, or properties
   - To warn on changes of the function signature, use the decorators
     ``@_api.delete_parameter``, ``@_api.rename_parameter``, and
     ``@_api.make_keyword_only``

   All these helpers take a first parameter *since*, which should be set to
   the next point release, e.g. "3.x".

   You can use standard rst cross references in *alternative*.

Expiring
~~~~~~~~

1. Announce the API changes in a new file
   :file:`doc/api/next_api_changes/[kind]/99999-ABC.rst` where ``99999``
   is the pull request number and ``ABC`` are the contributor's initials, and
   ``[kind]`` is one of the folders :file:`behavior`, :file:`development`,
   :file:`removals`. See :file:`doc/api/next_api_changes/README.rst` for more
   information. For the content, you can usually copy the deprecation notice
   and adapt it slightly.
2. Change the code functionality and remove any related deprecation warnings.

Adding new API
--------------

Every new function, parameter and attribute that is not explicitly marked as
private (i.e., starts with an underscore) becomes part of Matplotlib's public
API. As discussed above, changing the existing API is cumbersome. Therefore,
take particular care when adding new API:

- Mark helper functions and internal attributes as private by prefixing them
  with an underscore.
- Carefully think about good names for your functions and variables.
- Try to adopt patterns and naming conventions from existing parts of the
  Matplotlib API.
- Consider making as many arguments keyword-only as possible. See also
  `API Evolution the Right Way -- Add Parameters Compatibly`__.

  __ https://emptysqua.re/blog/api-evolution-the-right-way/#adding-parameters


New modules and files: installation
-----------------------------------

* If you have added new files or directories, or reorganized existing
  ones, make sure the new files are included in the match patterns in
  in *package_data* in :file:`setupext.py`.

C/C++ extensions
----------------

* Extensions may be written in C or C++.

* Code style should conform to PEP7 (understanding that PEP7 doesn't
  address C++, but most of its admonitions still apply).

* Python/C interface code should be kept separate from the core C/C++
  code.  The interface code should be named :file:`FOO_wrap.cpp` or
  :file:`FOO_wrapper.cpp`.

* Header file documentation (aka docstrings) should be in Numpydoc
  format.  We don't plan on using automated tools for these
  docstrings, and the Numpydoc format is well understood in the
  scientific Python community.

* C/C++ code in the :file:`extern/` directory is vendored, and should be kept
  close to upstream whenever possible.  It can be modified to fix bugs or
  implement new features only if the required changes cannot be made elsewhere
  in the codebase.  In particular, avoid making style fixes to it.

.. _keyword-argument-processing:

Keyword argument processing
---------------------------

Matplotlib makes extensive use of ``**kwargs`` for pass-through customizations
from one function to another.  A typical example is
`~matplotlib.axes.Axes.text`.  The definition of `matplotlib.pyplot.text` is a
simple pass-through to `matplotlib.axes.Axes.text`::

  # in pyplot.py
  def text(x, y, s, fontdict=None, **kwargs):
      return gca().text(x, y, s, fontdict=fontdict, **kwargs)

`matplotlib.axes.Axes.text` (simplified for illustration) just
passes all ``args`` and ``kwargs`` on to ``matplotlib.text.Text.__init__``::

  # in axes/_axes.py
  def text(self, x, y, s, fontdict=None, **kwargs):
      t = Text(x=x, y=y, text=s, **kwargs)

and ``matplotlib.text.Text.__init__`` (again, simplified)
just passes them on to the `matplotlib.artist.Artist.update` method::

  # in text.py
  def __init__(self, x=0, y=0, text='', **kwargs):
      super().__init__()
      self.update(kwargs)

``update`` does the work looking for methods named like
``set_property`` if ``property`` is a keyword argument.  i.e., no one
looks at the keywords, they just get passed through the API to the
artist constructor which looks for suitably named methods and calls
them with the value.

As a general rule, the use of ``**kwargs`` should be reserved for
pass-through keyword arguments, as in the example above.  If all the
keyword args are to be used in the function, and not passed
on, use the key/value keyword args in the function definition rather
than the ``**kwargs`` idiom.

In some cases, you may want to consume some keys in the local
function, and let others pass through.  Instead of popping arguments to
use off ``**kwargs``, specify them as keyword-only arguments to the local
function.  This makes it obvious at a glance which arguments will be
consumed in the function.  For example, in
:meth:`~matplotlib.axes.Axes.plot`, ``scalex`` and ``scaley`` are
local arguments and the rest are passed on as
:meth:`~matplotlib.lines.Line2D` keyword arguments::

  # in axes/_axes.py
  def plot(self, *args, scalex=True, scaley=True, **kwargs):
      lines = []
      for line in self._get_lines(*args, **kwargs):
          self.add_line(line)
          lines.append(line)

.. _using_logging:

Using logging for debug messages
--------------------------------

Matplotlib uses the standard Python `logging` library to write verbose
warnings, information, and debug messages. Please use it! In all those places
you write `print` calls to do your debugging, try using `logging.debug`
instead!


To include `logging` in your module, at the top of the module, you need to
``import logging``.  Then calls in your code like::

  _log = logging.getLogger(__name__)  # right after the imports

  # code
  # more code
  _log.info('Here is some information')
  _log.debug('Here is some more detailed information')

will log to a logger named ``matplotlib.yourmodulename``.

If an end-user of Matplotlib sets up `logging` to display at levels more
verbose than ``logging.WARNING`` in their code with the Matplotlib-provided
helper::

  plt.set_loglevel("debug")

or manually with ::

  import logging
  logging.basicConfig(level=logging.DEBUG)
  import matplotlib.pyplot as plt

Then they will receive messages like

.. code-block:: none

   DEBUG:matplotlib.backends:backend MacOSX version unknown
   DEBUG:matplotlib.yourmodulename:Here is some information
   DEBUG:matplotlib.yourmodulename:Here is some more detailed information

Which logging level to use?
~~~~~~~~~~~~~~~~~~~~~~~~~~~

There are five levels at which you can emit messages.

- `logging.critical` and `logging.error` are really only there for errors that
  will end the use of the library but not kill the interpreter.
- `logging.warning` and `._api.warn_external` are used to warn the user,
  see below.
- `logging.info` is for information that the user may want to know if the
  program behaves oddly. They are not displayed by default. For instance, if
  an object isn't drawn because its position is ``NaN``, that can usually
  be ignored, but a mystified user could call
  ``logging.basicConfig(level=logging.INFO)`` and get an error message that
  says why.
- `logging.debug` is the least likely to be displayed, and hence can be the
  most verbose.  "Expected" code paths (e.g., reporting normal intermediate
  steps of layouting or rendering) should only log at this level.

By default, `logging` displays all log messages at levels higher than
``logging.WARNING`` to `sys.stderr`.

The `logging tutorial`_ suggests that the difference between `logging.warning`
and `._api.warn_external` (which uses `warnings.warn`) is that
`._api.warn_external` should be used for things the user must change to stop
the warning (typically in the source), whereas `logging.warning` can be more
persistent. Moreover, note that `._api.warn_external` will by default only
emit a given warning *once* for each line of user code, whereas
`logging.warning` will display the message every time it is called.

By default, `warnings.warn` displays the line of code that has the ``warn``
call. This usually isn't more informative than the warning message itself.
Therefore, Matplotlib uses `._api.warn_external` which uses `warnings.warn`,
but goes up the stack and displays the first line of code outside of
Matplotlib. For example, for the module::

    # in my_matplotlib_module.py
    import warnings

    def set_range(bottom, top):
        if bottom == top:
            warnings.warn('Attempting to set identical bottom==top')

running the script::

    from matplotlib import my_matplotlib_module
    my_matplotlib_module.set_range(0, 0)  # set range

will display

.. code-block:: none

    UserWarning: Attempting to set identical bottom==top
    warnings.warn('Attempting to set identical bottom==top')

Modifying the module to use `._api.warn_external`::

    from matplotlib import _api

    def set_range(bottom, top):
        if bottom == top:
            _api.warn_external('Attempting to set identical bottom==top')

and running the same script will display

.. code-block:: none

   UserWarning: Attempting to set identical bottom==top
   my_matplotlib_module.set_range(0, 0)  # set range

.. _logging tutorial: https://docs.python.org/3/howto/logging.html#logging-basic-tutorial

.. _sample-data:

Writing examples
----------------

We have hundreds of examples in subdirectories of :file:`matplotlib/examples`,
and these are automatically generated when the website is built to show up in
the :ref:`examples <gallery>` section of the website.

Any sample data that the example uses should be kept small and
distributed with Matplotlib in the
:file:`lib/matplotlib/mpl-data/sample_data/` directory.  Then in your
example code you can load it into a file handle with::

    import matplotlib.cbook as cbook
    fh = cbook.get_sample_data('mydata.dat')
.. raw:: html

   <style>
   .checklist { list-style: none; padding: 0; margin: 0; }
   .checklist li { margin-left: 24px; padding-left: 23px;  margin-right: 6px; }
   .checklist li:before { content: "\2610\2001"; margin-left: -24px; }
   .checklist li p {display: inline; }
   </style>

.. _pr-guidelines:

***********************
Pull request guidelines
***********************

Pull requests (PRs) are the mechanism for contributing to Matplotlibs code and
documentation.

Summary for PR authors
======================

.. note::

   * We value contributions from people with all levels of experience. In
     particular if this is your first PR not everything has to be perfect.
     We'll guide you through the PR process.
   * Nevertheless, try to follow the guidelines below as well as you can to
     help make the PR process quick and smooth.
   * Be patient with reviewers. We try our best to respond quickly, but we
     have limited bandwidth. If there is no feedback within a couple of days,
     please ping us by posting a comment to your PR.

When making a PR, pay attention to:

.. rst-class:: checklist

* :ref:`Target the main branch <pr-branch-selection>`.
* Adhere to the :ref:`coding_guidelines`.
* Update the :ref:`documentation <pr-documentation>` if necessary.
* Aim at making the PR as "ready-to-go" as you can. This helps to speed up
  the review process.
* It is ok to open incomplete or work-in-progress PRs if you need help or
  feedback from the developers. You may mark these as
  `draft pull requests <https://docs.github.com/en/github/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/about-pull-requests#draft-pull-requests>`_
  on GitHub.
* When updating your PR, instead of adding new commits to fix something, please
  consider amending your initial commit(s) to keep the history clean.
  You can achieve this using

  .. code-block:: bash

     git commit --amend --no-edit
     git push [your-remote-repo] [your-branch] --force-with-lease

See also :ref:`contributing` for how to make a PR.

Summary for PR reviewers
========================

.. note::

   * If you have commit rights, then you are trusted to use them.
     **Please help review and merge PRs!**
   * Be patient and `kind <https://youtu.be/tzFWz5fiVKU?t=49m30s>`__ with
     contributors.

Content topics:

.. rst-class:: checklist

* Is the feature / bugfix reasonable?
* Does the PR conform with the :ref:`coding_guidelines`?
* Is the :ref:`documentation <pr-documentation>` (docstrings, examples,
  what's new, API changes) updated?

Organizational topics:

.. rst-class:: checklist

* Make sure all :ref:`automated tests <pr-automated-tests>` pass.
* The PR should :ref:`target the main branch <pr-branch-selection>`.
* Tag with descriptive :ref:`labels <pr-labels>`.
* Set the :ref:`milestone <pr-milestones>`.
* Keep an eye on the :ref:`number of commits <pr-squashing>`.
* Approve if all of the above topics are handled.
* :ref:`Merge  <pr-merging>` if a sufficient number of approvals is reached.

.. _pr-guidelines-details:

Detailed guidelines
===================

.. _pr-documentation:

Documentation
-------------

* Every new feature should be documented.  If it's a new module, don't
  forget to add a new rst file to the API docs.

* Each high-level plotting function should have a small example in
  the ``Examples`` section of the docstring.  This should be as simple as
  possible to demonstrate the method.  More complex examples should go into
  a dedicated example file in the :file:`examples` directory, which will be
  rendered to the examples gallery in the documentation.

* Build the docs and make sure all formatting warnings are addressed.

* See :ref:`documenting-matplotlib` for our documentation style guide.

* If your change is a major new feature, add an entry to
  :file:`doc/users/whats_new.rst`.

* If you change the API in a backward-incompatible way, please
  document it by adding a file in the relevant subdirectory of
  :file:`doc/api/next_api_changes/`, probably in the ``behavior/``
  subdirectory.

.. _pr-labels:

Labels
------

* If you have the rights to set labels, tag the PR with descriptive labels.
  See the `list of labels <https://github.com/matplotlib/matplotlib/labels>`__.
* If the PR makes changes to the wheel building Action, add the
  "Run cibuildwheel" label to enable testing wheels.

.. _pr-milestones:

Milestones
----------

* Set the milestone according to these rules:

  * *New features and API changes* are milestoned for the next minor release
    ``v3.X.0``.

  * *Bugfixes and docstring changes* are milestoned for the next patch
    release ``v3.X.Y``

  * *Documentation changes* (all .rst files and examples) are milestoned
    ``v3.X-doc``

  If multiple rules apply, choose the first matching from the above list.

  Setting a milestone does not imply or guarantee that a PR will be merged for that
  release, but if it were to be merged what release it would be in.

  All of these PRs should target the main branch. The milestone tag triggers
  an :ref:`automatic backport <automated-backports>` for milestones which have
  a corresponding branch.

.. _pr-merging:

Merging
-------

* Documentation and examples may be merged by the first reviewer.  Use
  the threshold "is this better than it was?" as the review criteria.

* For code changes (anything in ``src`` or ``lib``) at least two
  core developers (those with commit rights) should review all pull
  requests.  If you are the first to review a PR and approve of the
  changes use the GitHub `'approve review'
  <https://docs.github.com/en/github/collaborating-with-pull-requests/reviewing-changes-in-pull-requests>`__
  tool to mark it as such.  If you are a subsequent reviewer please
  approve the review and if you think no more review is needed, merge
  the PR.

  Ensure that all API changes are documented in a file in one of the
  subdirectories of :file:`doc/api/next_api_changes`, and significant new
  features have an entry in :file:`doc/user/whats_new`.

  - If a PR already has a positive review, a core developer (e.g. the first
    reviewer, but not necessarily) may champion that PR for merging.  In order
    to do so, they should ping all core devs both on GitHub and on the dev
    mailing list, and label the PR with the "Merge with single review?" label.
    Other core devs can then either review the PR and merge or reject it, or
    simply request that it gets a second review before being merged.  If no one
    asks for such a second review within a week, the PR can then be merged on
    the basis of that single review.

    A core dev should only champion one PR at a time and we should try to keep
    the flow of championed PRs reasonable.

* Do not self merge, except for 'small' patches to un-break the CI or
  when another reviewer explicitly allows it (ex, "Approve modulo CI
  passing, may self merge when green").

.. _pr-automated-tests:

Automated tests
---------------

Whenever a pull request is created or updated, various automated test tools
will run on all supported platforms and versions of Python.

* Make sure the Linting, GitHub Actions, AppVeyor, CircleCI, and Azure
  pipelines are passing before merging (All checks are listed at the bottom of
  the GitHub page of your pull request). Here are some tips for finding the
  cause of the test failure:

  - If *Linting* fails, you have a code style issue, which will be listed
    as annotations on the pull request's diff.
  - If a GitHub Actions or AppVeyor run fails, search the log for ``FAILURES``.
    The subsequent section will contain information on the failed tests.
  - If CircleCI fails, likely you have some reStructuredText style issue in
    the docs. Search the CircleCI log for ``WARNING``.
  - If Azure pipelines fail with an image comparison error, you can find the
    images as *artifacts* of the Azure job:

    - Click *Details* on the check on the GitHub PR page.
    - Click *View more details on Azure Pipelines* to go to Azure.
    - On the overview page *artifacts* are listed in the section *Related*.


* Codecov and LGTM are currently for information only. Their failure is not
  necessarily a blocker.

* tox_ is not used in the automated testing. It is supported for testing
  locally.

  .. _tox: https://tox.readthedocs.io/

* If you know your changes do not need to be tested (this is very rare!), all
  CIs can be skipped for a given commit by including ``[ci skip]`` or
  ``[skip ci]`` in the commit message. If you know only a subset of CIs need
  to be run (e.g., if you are changing some block of plain reStructuredText and
  want only CircleCI to run to render the result), individual CIs can be
  skipped on individual commits as well by using the following substrings
  in commit messages:

  - GitHub Actions: ``[skip actions]``
  - AppVeyor: ``[skip appveyor]`` (must be in the first line of the commit)
  - Azure Pipelines: ``[skip azp]``
  - CircleCI: ``[skip circle]``

.. _pr-squashing:

Number of commits and squashing
-------------------------------

* Squashing is case-by-case.  The balance is between burden on the
  contributor, keeping a relatively clean history, and keeping a
  history usable for bisecting.  The only time we are really strict
  about it is to eliminate binary files (ex multiple test image
  re-generations) and to remove upstream merges.

* Do not let perfect be the enemy of the good, particularly for
  documentation or example PRs.  If you find yourself making many
  small suggestions, either open a PR against the original branch,
  push changes to the contributor branch, or merge the PR and then
  open a new PR against upstream.

* If you push to a contributor branch leave a comment explaining what
  you did, ex "I took the liberty of pushing a small clean-up PR to
  your branch, thanks for your work.".  If you are going to make
  substantial changes to the code or intent of the PR please check
  with the contributor first.


.. _branches_and_backports:

Branches and backports
======================

Current branches
----------------
The current active branches are

*main*
  The current development version. Future minor releases (*v3.N.0*) will be
  branched from this. Supports Python 3.7+.

*v3.N.x*
  Maintenance branch for Matplotlib 3.N. Future patch releases will be
  branched from this.  Supports Python 3.6+.

*v3.N.M-doc*
  Documentation for the current release.  On a patch release, this will be
  replaced by a properly named branch for the new release.


.. _pr-branch-selection:

Branch selection for pull requests
----------------------------------

Generally, all pull requests should target the main branch.

Other branches are fed through :ref:`automatic <automated-backports>` or
:ref:`manual <manual-backports>`. Directly
targeting other branches is only rarely necessary for special maintenance
work.

.. backport_strategy:

Backport strategy
-----------------

We will always backport to the patch release branch (*v3.N.x*):

- critical bug fixes (segfault, failure to import, things that the
  user can not work around)
- fixes for regressions against the last two releases.

Everything else (regressions against older releases, bugs/api
inconsistencies the user can work around in their code) are on a
case-by-case basis, should be low-risk, and need someone to advocate
for and shepherd through the backport.

The only changes to be backported to the documentation branch (*v3.N.M-doc*)
are changes to :file:`doc`, :file:`examples`, or :file:`tutorials`.
Any changes to :file:`lib` or :file:`src` including docstring-only changes
should not be backported to this branch.


.. _automated-backports:

Automated backports
-------------------

We use meeseeksdev bot to automatically backport merges to the correct
maintenance branch base on the milestone.  To work properly the
milestone must be set before merging.  If you have commit rights, the
bot can also be manually triggered after a merge by leaving a message
``@meeseeksdev backport to BRANCH`` on the PR.  If there are conflicts
meeseekdevs will inform you that the backport needs to be done
manually.

The target branch is configured by putting ``on-merge: backport to
TARGETBRANCH`` in the milestone description on it's own line.

If the bot is not working as expected, please report issues to
`Meeseeksdev <https://github.com/MeeseeksBox/MeeseeksDev>`__.


.. _manual-backports:

Manual backports
----------------

When doing backports please copy the form used by meeseekdev,
``Backport PR #XXXX: TITLE OF PR``.  If you need to manually resolve
conflicts make note of them and how you resolved them in the commit
message.

We do a backport from main to v2.2.x assuming:

* ``matplotlib`` is a read-only remote branch of the matplotlib/matplotlib repo

The ``TARGET_SHA`` is the hash of the merge commit you would like to
backport.  This can be read off of the GitHub PR page (in the UI with
the merge notification) or through the git CLI tools.

Assuming that you already have a local branch ``v2.2.x`` (if not, then
``git checkout -b v2.2.x``), and that your remote pointing to
``https://github.com/matplotlib/matplotlib`` is called ``upstream``:

.. code-block:: bash

   git fetch upstream
   git checkout v2.2.x  # or include -b if you don't already have this.
   git reset --hard upstream/v2.2.x
   git cherry-pick -m 1 TARGET_SHA
   # resolve conflicts and commit if required

Files with conflicts can be listed by ``git status``,
and will have to be fixed by hand (search on ``>>>>>``).  Once
the conflict is resolved, you will have to re-add the file(s) to the branch
and then continue the cherry pick:

.. code-block:: bash

   git add lib/matplotlib/conflicted_file.py
   git add lib/matplotlib/conflicted_file2.py
   git cherry-pick --continue

Use your discretion to push directly to upstream or to open a PR; be
sure to push or PR against the ``v2.2.x`` upstream branch, not ``main``!
.. _min_deps_policy:

======================================
Minimum version of dependencies policy
======================================

For the purpose of this document, 'minor version' is in the sense of
SemVer (major, minor, patch) and includes both major and minor
releases. For projects that use date-based versioning, every release
is a 'minor version'.

Matplotlib follows `NEP 29
<https://numpy.org/neps/nep-0029-deprecation_policy.html>`__.

Python and NumPy
================

Matplotlib supports:

- All minor versions of Python released 42 months prior to the
  project, and at minimum the two latest minor versions.
- All minor versions of ``numpy`` released in the 24 months prior
  to the project, and at minimum the last three minor versions.

In ``setup.py``, the ``python_requires`` variable should be set to
the minimum supported version of Python.  All supported minor
versions of Python should be in the test matrix and have binary
artifacts built for the release.

Minimum Python and NumPy version support should be adjusted upward
on every major and minor release, but never on a patch release.

See also the :ref:`list-of-dependency-min-versions`.

Python dependencies
===================

For Python dependencies we should support at least:

with compiled extensions
  minor versions initially released in the 24 months prior to our planned
  release date or the oldest that support our minimum Python + NumPy

without compiled extensions
  minor versions initially released in the 12 months prior to our planned
  release date or the oldest that supports our minimum Python.

We will only bump these dependencies as we need new features or the old
versions no longer support our minimum NumPy or Python.

Test and documentation dependencies
===================================

As these packages are only needed for testing or building the docs and
not needed by end-users, we can be more aggressive about dropping
support for old versions.  However, we need to be careful to not
over-run what down-stream packagers support (as most of the run the
tests and build the documentation as part of the packaging process).

We will support at least minor versions of the development
dependencies released in the 12 months prior to our planned release.

We will only bump these as needed or versions no longer support our
minimum Python and NumPy.

System and C-dependencies
=========================

For system or C-dependencies (FreeType, GUI frameworks, LaTeX,
Ghostscript, FFmpeg) support as old as practical.  These can be difficult to
install for end-users and we want to be usable on as many systems as
possible.  We will bump these on a case-by-case basis.

.. _list-of-dependency-min-versions:

List of dependency versions
===========================

The following list shows the minimal versions of Python and NumPy dependencies
for different versions of Matplotlib. Follow the links for the full
specification of the dependencies.

==========  ========  ======
Matplotlib  Python    NumPy
==========  ========  ======
`3.6`_      3.7       1.19.0
`3.5`_      3.7       1.17.0
`3.4`_      3.7       1.16.0
`3.3`_      3.6       1.15.0
`3.2`_      3.6       1.11.0
`3.1`_      3.6       1.11.0
`3.0`_      3.5       1.10.0
`2.2`_      2.7, 3.4  1.7.1
`2.1`_      2.7, 3.4  1.7.1
`2.0`_      2.7, 3.4  1.7.1
`1.5`_      2.7, 3.4  1.6
`1.4`_      2.6, 3.3  1.6
`1.3`_      2.6, 3.3  1.5
1.2         2.6, 3.1  1.4
1.1         2.4       1.1
1.0         2.4       1.1
==========  ========  ======

.. _`3.6`: https://matplotlib.org/3.6.0/devel/dependencies.html
.. _`3.5`: https://matplotlib.org/3.5.0/devel/dependencies.html
.. _`3.4`: https://matplotlib.org/3.4.0/devel/dependencies.html
.. _`3.3`: https://matplotlib.org/3.3.0/users/installing.html#dependencies
.. _`3.2`: https://matplotlib.org/3.2.0/users/installing.html#dependencies
.. _`3.1`: https://matplotlib.org/3.1.0/users/installing.html#dependencies
.. _`3.0`: https://matplotlib.org/3.0.0/users/installing.html#dependencies
.. _`2.2`: https://matplotlib.org/2.2.0/users/installing.html#dependencies
.. _`2.1`: https://matplotlib.org/2.1.0/users/installing.html#dependencies
.. _`2.0`: https://matplotlib.org/2.0.0/users/installing.html#required-dependencies
.. _`1.5`: https://matplotlib.org/1.5.0/users/installing.html#required-dependencies
.. _`1.4`: https://matplotlib.org/1.4.0/users/installing.html#required-dependencies
.. _`1.3`: https://matplotlib.org/1.3.0/users/installing.html#build-requirements

.. _bug_triaging:

Bug triaging and issue curation
===============================

The `issue tracker <https://github.com/matplotlib/matplotlib/issues>`_
is important to communication in the project because it serves as the
centralized location for making feature requests, reporting bugs,
identifying major projects to work on, and discussing priorities.  For
this reason, it is important to curate the issue list, adding labels
to issues and closing issues that are resolved or unresolvable.

Triaging issues does not require any particular expertise in the
internals of Matplotlib, is extremely valuable to the project, and we
welcome anyone to participate in issue triage!  However, people who
are not part of the Matplotlib organization do not have `permissions
to change milestones, add labels, or close issue
<https://docs.github.com/en/organizations/managing-access-to-your-organizations-repositories/repository-permission-levels-for-an-organization>`_.
If you do not have enough GitHub permissions do something (e.g. add a
label, close an issue), please leave a comment tagging
``@matplotlib/triageteam`` with your recommendations!

Working on issues to improve them
---------------------------------

Improving issues increases their chances of being successfully resolved.
Guidelines on submitting good issues can be found :ref:`here
<submitting-a-bug-report>`.
A third party can give useful feedback or even add
comments on the issue.
The following actions are typically useful:

  - documenting issues that are missing elements to reproduce the problem
    such as code samples

  - suggesting better use of code formatting (e.g. triple back ticks in the
    markdown).

  - suggesting to reformulate the title and description to make them more
    explicit about the problem to be solved

  - linking to related issues or discussions while briefly describing
    how they are related, for instance "See also #xyz for a similar
    attempt at this" or "See also #xyz where the same thing was
    reported" provides context and helps the discussion

  - verifying that the issue is reproducible

  - classify the issue as a feature request, a long standing bug or a
    regression

.. topic:: Fruitful discussions

   Online discussions may be harder than it seems at first glance, in
   particular given that a person new to open-source may have a very
   different understanding of the process than a seasoned maintainer.

   Overall, it is useful to stay positive and assume good will. `The
   following article
   <http://gael-varoquaux.info/programming/technical-discussions-are-hard-a-few-tips.html>`_
   explores how to lead online discussions in the context of open source.


Triage team
-----------


If you would like to join the triage team:

1. Correctly triage 2-3 issues.
2. Ask someone on the `triage team
   <https://github.com/orgs/matplotlib/teams/triageteam>`_ (publicly
   or privately) to recommend you to the triage team .  If you worked
   with someone on the issue triaged, they would be a good person to
   ask.
3. Responsibly exercise your new power!

Anyone with commit or triage rights may also nominate a user to be
invited to join the triage team.



Triaging operations for members of the core and triage teams
------------------------------------------------------------

In addition to the above, members of the core team and the triage team
can do the following important tasks:

- Update labels for issues and PRs: see the list of `available github
  labels <https://github.com/matplotlib/matplotlib/labels>`_.

- Triage issues:

  - **reproduce the issue**, if the posted code is a bug label the issue
    with "status: confirmed bug".

  - **identify regressions**, determine if the reported bug used to
    work as expected in a recent version of Matplotlib and if so
    determine the last working version.  Regressions should be
    milestoned for the next bug-fix release and may be labeled as
    "Release critical".

  - **close usage questions** and politely point the reporter to use
    `discourse <https://discourse.matplotlib.org>`_ or Stack Overflow
    instead and label as "community support".

  - **close duplicate issues**, after checking that they are
    indeed duplicate. Ideally, the original submitter moves the
    discussion to the older, duplicate issue

  - **close issues that cannot be replicated**, after leaving time (at
    least a week) to add extra information



.. topic:: Closing issues: a tough call

    When uncertain on whether an issue should be closed or not, it is
    best to strive for consensus with the original poster, and possibly
    to seek relevant expertise. However, when the issue is a usage
    question or has been considered as unclear for many years, then it
    should be closed.


A typical workflow for triaging issues
--------------------------------------

The following workflow [1]_ is a good way to approach issue triaging:

#. Thank the reporter for opening an issue

   The issue tracker is many people’s first interaction with the
   Matplotlib project itself, beyond just using the library. As such,
   we want it to be a welcoming, pleasant experience.

#. Is this a usage question? If so close it with a polite message.

#. Is the necessary information provided?

   Check that the poster has filled in the issue template. If crucial
   information (the version of Python, the version of Matplotlib used,
   the OS, and the backend), is missing politely ask the original
   poster to provide the information.

#. Is the issue minimal and reproducible?

   For bug reports, we ask that the reporter provide a minimal
   reproducible example. See `this useful post
   <https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports>`_
   by Matthew Rocklin for a good explanation. If the example is not
   reproducible, or if it's clearly not minimal, feel free to ask the reporter
   if they can provide an example or simplify the provided one.
   Do acknowledge that writing minimal reproducible examples is hard work.
   If the reporter is struggling, you can try to write one yourself.

   If a reproducible example is provided, but you see a simplification,
   add your simpler reproducible example.

   If you can not reproduce the issue, please report that along with your
   OS, Python, and Matplotlib versions.

   If we need more information from either this or the previous step
   please label the issue with "status: needs clarification".

#. Is this a regression?

   While we strive for a bug-free library, regressions are the highest
   priority.  If we have broken user-code that *used to* work, we should
   fix that in the next patch release!

   Try to determine when the regression happened by running the
   reproduction code against older versions of Matplotlib.  This can
   be done by released versions of Matplotlib (to get the version it
   last worked in) or by using `git bisect
   <https://git-scm.com/docs/git-bisect>`_ to find the first commit
   where it was broken.


#. Is this a duplicate issue?

   We have many open issues. If a new issue seems to be a duplicate,
   point to the original issue. If it is a clear duplicate, or consensus
   is that it is redundant, close it. Make sure to still thank the
   reporter, and encourage them to chime in on the original issue, and
   perhaps try to fix it.

   If the new issue provides relevant information, such as a better or
   slightly different example, add it to the original issue as a comment
   or an edit to the original post.

   Label the closed issue with "status: duplicate"

#. Make sure that the title accurately reflects the issue. If you have the
   necessary permissions edit it yourself if it's not clear.

#. Add the relevant labels, such as "Documentation" when the issue is
   about documentation, "Bug" if it is clearly a bug, "New feature" if it
   is a new feature request, ...

   If the issue is clearly defined and the fix seems relatively
   straightforward, label the issue as “Good first issue” (and
   possibly a description of the fix or a hint as to where in the
   code base to look to get started).

   An additional useful step can be to tag the corresponding module e.g.
   the "GUI/Qt" label when relevant.


.. [1] Adapted from the pandas project `maintainers guide
       <https://dev.pandas.io/docs/development/maintaining.html>`_ and
       `the scikit-learn project
       <https://scikit-learn.org/dev/developers/bug_triaging.html>`_ .


Working on PRs to help review
------------------------------

Reviewing code is also encouraged. Contributors and users are welcome to
participate to the review process following our :ref:`review guidelines
<pr-guidelines>`.

Acknowledgments
---------------

This page is lightly adapted from `the sckit-learn project
<https://scikit-learn.org/dev/developers/bug_triaging.html>`_ .
.. _color_changes:

*********************
Default color changes
*********************

As discussed at length elsewhere [insert links], ``jet`` is an
empirically bad colormap and should not be the default colormap.
Due to the position that changing the appearance of the plot breaks
backward compatibility, this change has been put off for far longer
than it should have been.  In addition to changing the default color
map we plan to take the chance to change the default color-cycle on
plots and to adopt a different colormap for filled plots (``imshow``,
``pcolor``, ``contourf``, etc) and for scatter like plots.


Default heat map colormap
-------------------------

The choice of a new colormap is fertile ground to bike-shedding ("No,
it should be _this_ color") so we have a proposed set criteria (via
Nathaniel Smith) to evaluate proposed colormaps.

- it should be a sequential colormap, because diverging colormaps are
  really misleading unless you know where the "center" of the data is,
  and for a default colormap we generally won't.

- it should be perceptually uniform, i.e., human subjective judgments
  of how far apart nearby colors are should correspond as linearly as
  possible to the difference between the numerical values they
  represent, at least locally.

- it should have a perceptually uniform luminance ramp, i.e. if you
  convert to greyscale it should still be uniform. This is useful both
  in practical terms (greyscale printers are still a thing!) and
  because luminance is a very strong and natural cue to magnitude.

- it should also have some kind of variation in hue, because hue
  variation is a really helpful additional cue to perception, having
  two cues is better than one, and there's no reason not to do it.

- the hue variation should be chosen to produce reasonable results
  even for viewers with the more common types of
  colorblindness. (Which rules out things like red-to-green.)

- For bonus points, it would be nice to choose a hue ramp that still
  works if you throw away the luminance variation, because then we
  could use the version with varying luminance for 2d plots, and the
  version with just hue variation for 3d plots. (In 3d plots you
  really want to reserve the luminance channel for lighting/shading,
  because your brain is *really* good at extracting 3d shape from
  luminance variation. If the 3d surface itself has massively varying
  luminance then this screws up the ability to see shape.)

- Not infringe any existing IP

Example script
++++++++++++++

Proposed colormaps
++++++++++++++++++

Default scatter colormap
------------------------

For heat-map like applications it can be desirable to cover as much of
the luminance scale as possible, however when colormapping markers,
having markers too close to white can be a problem.  For that reason
we propose using a different (but maybe related) colormap to the
heat map for marker-based.  The design parameters are the same as
above, only with a more limited luminance variation.


Example script
++++++++++++++
::

   import numpy as np
   import matplotlib.pyplot as plt

   np.random.seed(1234)

   fig, (ax1, ax2) = plt.subplots(1, 2)

   N = 50
   x = np.random.rand(N)
   y = np.random.rand(N)
   colors = np.random.rand(N)
   area = np.pi * (15 * np.random.rand(N))**2  # 0 to 15 point radiuses

   ax1.scatter(x, y, s=area, c=colors, alpha=0.5)


   X,Y = np.meshgrid(np.arange(0, 2*np.pi, .2),
                     np.arange(0, 2*np.pi, .2))
   U = np.cos(X)
   V = np.sin(Y)
   Q = ax2.quiver(X, Y, U, V, units='width')
   qd = np.random.rand(np.prod(X.shape))
   Q.set_array(qd)

Proposed colormaps
++++++++++++++++++

Color cycle / qualitative colormap
-----------------------------------

When plotting lines it is frequently desirable to plot multiple lines
or artists which need to be distinguishable, but there is no inherent
ordering.


Example script
++++++++++++++
::

   import numpy as np
   import matplotlib.pyplot as plt

   fig, (ax1, ax2) = plt.subplots(1, 2)

   x = np.linspace(0, 1, 10)

   for j in range(10):
       ax1.plot(x, x * j)


   th = np.linspace(0, 2*np.pi, 1024)
   for j in np.linspace(0, np.pi, 10):
       ax2.plot(th, np.sin(th + j))

   ax2.set_xlim(0, 2*np.pi)

Proposed color cycle
++++++++++++++++++++
.. _dependencies:

============
Dependencies
============

Runtime dependencies
====================

Mandatory dependencies
----------------------

When installing through a package manager like ``pip`` or ``conda``, the
mandatory dependencies are automatically installed. This list is mainly for
reference.

* `Python <https://www.python.org/downloads/>`_ (>= 3.7)
* `NumPy <https://numpy.org>`_ (>= 1.19)
* `setuptools <https://setuptools.readthedocs.io/en/latest/>`_
* `cycler <https://matplotlib.org/cycler/>`_ (>= 0.10.0)
* `dateutil <https://pypi.org/project/python-dateutil/>`_ (>= 2.7)
* `kiwisolver <https://github.com/nucleic/kiwi>`_ (>= 1.0.1)
* `Pillow <https://pillow.readthedocs.io/en/latest/>`_ (>= 6.2)
* `pyparsing <https://pypi.org/project/pyparsing/>`_ (>=2.2.1)
* `fontTools <https://fonttools.readthedocs.io/en/latest/>`_ (>=4.22.0)


.. _optional_dependencies:

Optional dependencies
---------------------

The following packages and tools are not required but extend the capabilities
of Matplotlib.

Backends
~~~~~~~~

Matplotlib figures can be rendered to various user interfaces. See
:ref:`what-is-a-backend` for more details on the optional Matplotlib backends
and the capabilities they provide.

* Tk_ (>= 8.4, != 8.6.0 or 8.6.1) [#]_: for the Tk-based backends.
* PyQt6_ (>= 6.1), PySide6_, PyQt5_, or PySide2_: for the Qt-based backends.
* PyGObject_: for the GTK-based backends [#]_.
* wxPython_ (>= 4) [#]_: for the wx-based backends.
* pycairo_ (>= 1.11.0) or cairocffi_ (>= 0.8): for the GTK and/or cairo-based
  backends.
* Tornado_ (>=5): for the WebAgg backend.

.. _Tk: https://docs.python.org/3/library/tk.html
.. _PyQt5: https://pypi.org/project/PyQt5/
.. _PySide2: https://pypi.org/project/PySide2/
.. _PyQt6: https://pypi.org/project/PyQt6/
.. _PySide6: https://pypi.org/project/PySide6/
.. _PyGObject: https://pygobject.readthedocs.io/en/latest/
.. _wxPython: https://www.wxpython.org/
.. _pycairo: https://pycairo.readthedocs.io/en/latest/
.. _cairocffi: https://cairocffi.readthedocs.io/en/latest/
.. _Tornado: https://pypi.org/project/tornado/

.. [#] Tk is part of most standard Python installations, but it's not part of
       Python itself and thus may not be present in rare cases.
.. [#] If using pip (and not conda), PyGObject must be built from source; see
       https://pygobject.readthedocs.io/en/latest/devguide/dev_environ.html.
.. [#] If using pip (and not conda) on Linux, wxPython wheels must be manually
       downloaded from https://wxpython.org/pages/downloads/.

Animations
~~~~~~~~~~

* `ffmpeg <https://www.ffmpeg.org/>`_: for saving movies.
* `ImageMagick <https://www.imagemagick.org/script/index.php>`_: for saving
  animated gifs.

Font handling and rendering
~~~~~~~~~~~~~~~~~~~~~~~~~~~

* `LaTeX <https://www.latex-project.org/>`_ (with `cm-super
  <https://ctan.org/pkg/cm-super>`__ ) and `GhostScript (>=9.0)
  <https://ghostscript.com/download/>`_ : for rendering text with LaTeX.
* `fontconfig <https://www.fontconfig.org>`_ (>= 2.7): for detection of system
  fonts on Linux.

C libraries
-----------

Matplotlib brings its own copies of the following libraries:

- ``Agg``: the Anti-Grain Geometry C++ rendering engine
- ``ttconv``: a TrueType font utility

Additionally, Matplotlib depends on:

- FreeType_ (>= 2.3): a font rendering library
- QHull_ (>= 2020.2): a library for computing triangulations

.. _FreeType: https://www.freetype.org/
.. _Qhull: http://www.qhull.org/

By default, Matplotlib downloads and builds its own copies of FreeType (this is
necessary to run the test suite, because different versions of FreeType
rasterize characters differently) and of Qhull.  As an exception, Matplotlib
defaults to the system version of FreeType on AIX.

To force Matplotlib to use a copy of FreeType or Qhull already installed in
your system, create a :file:`mplsetup.cfg` file with the following contents:

.. code-block:: cfg

   [libs]
   system_freetype = true
   system_qhull = true

before running ``python -m pip install .``.

In this case, you need to install the FreeType and Qhull library and headers.
This can be achieved using a package manager, e.g. for FreeType:

.. code-block:: sh

   # Pick ONE of the following:
   sudo apt install libfreetype6-dev  # Debian/Ubuntu
   sudo dnf install freetype-devel    # Fedora
   brew install freetype              # macOS with Homebrew
   conda install freetype             # conda, any OS

(adapt accordingly for Qhull).

On Linux and macOS, it is also recommended to install pkg-config_, a helper
tool for locating FreeType:

.. code-block:: sh

   # Pick ONE of the following:
   sudo apt install pkg-config  # Debian/Ubuntu
   sudo dnf install pkgconf     # Fedora
   brew install pkg-config      # macOS with Homebrew
   conda install pkg-config     # conda
   # Or point the PKG_CONFIG environment variable to the path to pkg-config:
   export PKG_CONFIG=...

.. _pkg-config: https://www.freedesktop.org/wiki/Software/pkg-config/

If not using pkg-config (in particular on Windows), you may need to set the
include path (to the library headers) and link path (to the libraries)
explicitly, if they are not in standard locations.  This can be done using
standard environment variables -- on Linux and OSX:

.. code-block:: sh

   export CFLAGS='-I/directory/containing/ft2build.h'
   export LDFLAGS='-L/directory/containing/libfreetype.so'

and on Windows:

.. code-block:: bat

   set CL=/IC:\directory\containing\ft2build.h
   set LINK=/LIBPATH:C:\directory\containing\freetype.lib

If you go this route but need to reset and rebuild to change your settings,
remember to clear your artifacts before re-building::

  git clean -xfd


.. _development-dependencies:

Additional dependencies for development
=======================================

.. _test-dependencies:

Additional dependencies for testing
===================================
This section lists the additional software required for
:ref:`running the tests <testing>`.

Required:

- pytest_ (>=3.6)
- Ghostscript_ (>= 9.0, to render PDF files)
- Inkscape_ (to render SVG files)

Optional:

- pytest-cov_ (>=2.3.1) to collect coverage information
- pytest-flake8_ to test coding standards using flake8_
- pytest-timeout_ to limit runtime in case of stuck tests
- pytest-xdist_ to run tests in parallel

.. _pytest: http://doc.pytest.org/en/latest/
.. _Ghostscript: https://www.ghostscript.com/
.. _Inkscape: https://inkscape.org
.. _pytest-cov: https://pytest-cov.readthedocs.io/en/latest/
.. _pytest-flake8: https://pypi.org/project/pytest-flake8/
.. _pytest-xdist: https://pypi.org/project/pytest-xdist/
.. _pytest-timeout: https://pypi.org/project/pytest-timeout/
.. _flake8: https://pypi.org/project/flake8/


.. _doc-dependencies:

Additional dependencies for building documentation
==================================================

Python packages
---------------
The additional Python packages required to build the
:ref:`documentation <documenting-matplotlib>` are listed in
:file:`doc-requirements.txt` and can be installed using ::

    pip install -r requirements/doc/doc-requirements.txt

The content of :file:`doc-requirements.txt` is also shown below:

   .. include:: ../../requirements/doc/doc-requirements.txt
      :literal:

Additional external dependencies
--------------------------------
Required:

* a minimal working LaTeX distribution
* `Graphviz <http://www.graphviz.org/download>`_
* the following LaTeX packages (if your OS bundles TeXLive, the
  "complete" version of the installer, e.g. "texlive-full" or "texlive-all",
  will often automatically include these packages):

  * `cm-super <https://ctan.org/pkg/cm-super>`_
  * `dvipng <https://ctan.org/pkg/dvipng>`_
  * `underscore <https://ctan.org/pkg/underscore>`_

Optional, but recommended:

* `Inkscape <https://inkscape.org>`_
* `optipng <http://optipng.sourceforge.net>`_
* the font "Humor Sans" (aka the "XKCD" font), or the free alternative
  `Comic Neue <http://comicneue.com/>`_
* the font "Times New Roman"

.. note::

  The documentation will not build without LaTeX and Graphviz.  These are not
  Python packages and must be installed separately. The documentation can be
  built without Inkscape and optipng, but the build process will raise various
  warnings. If the build process warns that you are missing fonts, make sure
  your LaTeX distribution bundles cm-super or install it separately.

=========================
Documentation style guide
=========================

This guide contains best practices for the language and formatting of Matplotlib
documentation.

.. seealso::

    For more information about contributing, see the :ref:`documenting-matplotlib`
    section.

Expository language
===================

For explanatory writing, the following guidelines are for clear and concise
language use.

Terminology
-----------

There are several key terms in Matplotlib that are standards for
reliability and consistency in documentation. They are not interchangeable.

.. table::
  :widths: 15, 15, 35, 35

  +------------------+--------------------------+--------------+--------------+
  | Term             | Description              | Correct      | Incorrect    |
  +==================+==========================+==============+==============+
  | Figure_          | Matplotlib working space | - *For       | - "The figure|
  |                  | for programming.         |   Matplotlib |   is the     |
  |                  |                          |   objects*:  |   working    |
  |                  |                          |   Figure,    |   space for  |
  |                  |                          |   "The Figure|   visuals."  |
  |                  |                          |   is the     | - "Methods in|
  |                  |                          |   working    |   the figure |
  |                  |                          |   space for  |   provide the|
  |                  |                          |   the visual.|   visuals."  |
  |                  |                          | - *Referring | - "The       |
  |                  |                          |   to class*: |   Figure_    |
  |                  |                          |   Figure_ ,  |   Four       |
  |                  |                          |   "Methods   |   leglock is |
  |                  |                          |   within the |   a wrestling|
  |                  |                          |   Figure_    |   move."     |
  |                  |                          |   provide the|              |
  |                  |                          |   visuals."  |              |
  |                  |                          | - *General   |              |
  |                  |                          |   language*: |              |
  |                  |                          |   figure,    |              |
  |                  |                          |   "Michelle  |              |
  |                  |                          |   Kwan is a  |              |
  |                  |                          |   famous     |              |
  |                  |                          |   figure     |              |
  |                  |                          |   skater."   |              |
  +------------------+--------------------------+--------------+--------------+
  | Axes_            | Subplots within Figure.  | - *For       | - "The axes  |
  |                  | Contains plot elements   |   Matplotlib |   methods    |
  |                  | and is responsible for   |   objects*:  |   transform  |
  |                  | plotting and configuring |   Axes, "An  |   the data." |
  |                  | additional details.      |   Axes is a  | - "Each Axes_|
  |                  |                          |   subplot    |   is specific|
  |                  |                          |   within the |   to a       |
  |                  |                          |   Figure."   |   Figure."   |
  |                  |                          | - *Referring | - "The       |
  |                  |                          |   to class*: |   musicians  |
  |                  |                          |   Axes_ ,    |   on stage   |
  |                  |                          |   "Each Axes_|   call their |
  |                  |                          |   is specific|   guitars    |
  |                  |                          |   to one     |   Axes."     |
  |                  |                          |   Figure."   | - "The point |
  |                  |                          | - *General   |   where the  |
  |                  |                          |   language*: |   Axes meet  |
  |                  |                          |   axes, "Both|   is the     |
  |                  |                          |   loggers and|   origin of  |
  |                  |                          |   lumberjacks|   the        |
  |                  |                          |   use axes to|   coordinate |
  |                  |                          |   chop wood."|   system."   |
  |                  |                          |   OR "There  |              |
  |                  |                          |   are no     |              |
  |                  |                          |   standard   |              |
  |                  |                          |   names for  |              |
  |                  |                          |   the        |              |
  |                  |                          |   coordinates|              |
  |                  |                          |   in the     |              |
  |                  |                          |   three      |              |
  |                  |                          |   axes."     |              |
  |                  |                          |   (Plural of |              |
  |                  |                          |   axis)      |              |
  +------------------+--------------------------+--------------+--------------+
  | Artist_          | Broad variety of         | - *For       | - "Configure |
  |                  | Matplotlib objects that  |   Matplotlib |   the legend |
  |                  | display visuals.         |   objects*:  |   artist with|
  |                  |                          |   Artist,    |   its        |
  |                  |                          |   "Artists   |   respective |
  |                  |                          |   display    |   method."   |
  |                  |                          |   visuals and| - "There is  |
  |                  |                          |   are the    |   an Artist_ |
  |                  |                          |   visible    |   for that   |
  |                  |                          |   elements   |   visual in  |
  |                  |                          |   when the   |   the graph."|
  |                  |                          |   rendering  | - "Some      |
  |                  |                          |   a Figure." |   Artists    |
  |                  |                          | - *Referring |   became     |
  |                  |                          |   to class*: |   famous only|
  |                  |                          |   Artist_ ,  |   by         |
  |                  |                          |   "Each      |   accident." |
  |                  |                          |   Artist_ has|              |
  |                  |                          |   respective |              |
  |                  |                          |   methods and|              |
  |                  |                          |   functions."|              |
  |                  |                          | - *General   |              |
  |                  |                          |   language*: |              |
  |                  |                          |   artist,    |              |
  |                  |                          |   "The       |              |
  |                  |                          |   artist in  |              |
  |                  |                          |   the museum |              |
  |                  |                          |   is from    |              |
  |                  |                          |   France."   |              |
  +------------------+--------------------------+--------------+--------------+
  | Axis_            | Human-readable single    | - *For       | - "Plot the  |
  |                  | dimensional object       |   Matplotlib |   graph onto |
  |                  | of reference marks       |   objects*:  |   the axis." |
  |                  | containing ticks, tick   |   Axis, "The | - "Each Axis |
  |                  | labels, spines, and      |   Axis for   |   is usually |
  |                  | edges.                   |   the bar    |   named after|
  |                  |                          |   chart is a |   the        |
  |                  |                          |   separate   |   coordinate |
  |                  |                          |   Artist."   |   which is   |
  |                  |                          |   (plural,   |   measured   |
  |                  |                          |   Axis       |   along it." |
  |                  |                          |   objects)   | - "In some   |
  |                  |                          | - *Referring |   computer   |
  |                  |                          |   to class*: |   graphics   |
  |                  |                          |   Axis_ ,    |   contexts,  |
  |                  |                          |   "The Axis_ |   the        |
  |                  |                          |   contains   |   ordinate   |
  |                  |                          |   respective |   Axis_ may  |
  |                  |                          |   XAxis and  |   be oriented|
  |                  |                          |   YAxis      |   downwards."|
  |                  |                          |   objects."  |              |
  |                  |                          | - *General   |              |
  |                  |                          |   language*: |              |
  |                  |                          |   axis,      |              |
  |                  |                          |   "Rotation  |              |
  |                  |                          |   around a   |              |
  |                  |                          |   fixed axis |              |
  |                  |                          |   is a       |              |
  |                  |                          |   special    |              |
  |                  |                          |   case of    |              |
  |                  |                          |   rotational |              |
  |                  |                          |   motion."   |              |
  +------------------+--------------------------+--------------+--------------+
  | Explicit,        | Explicit approach of     | - Explicit   | - object     |
  | Object Oriented  | programming in           | - explicit   |   oriented   |
  | Programming (OOP)| Matplotlib.              | - OOP        | - OO-style   |
  +------------------+--------------------------+--------------+--------------+
  | Implicit,        | Implicit approach of     | - Implicit   | - MATLAB like|
  | ``pyplot``       | programming in Matplotlib| - implicit   | - Pyplot     |
  |                  | with ``pyplot`` module.  | - ``pyplot`` | - pyplot     |
  |                  |                          |              |   interface  |
  +------------------+--------------------------+--------------+--------------+

.. _Figure: :class:`~matplotlib.figure.Figure`
.. _Axes: :class:`~matplotlib.axes.Axes`
.. _Artist: :class:`~matplotlib.artist.Artist`
.. _Axis: :class:`matplotlib.axis.Axis`


Grammar
-------

Subject
^^^^^^^
Use second-person imperative sentences for directed instructions specifying an
action. Second-person pronouns are for individual-specific contexts and
possessive reference.

.. table::
   :width: 100%
   :widths: 50, 50

   +------------------------------------+------------------------------------+
   | Correct                            | Incorrect                          |
   +====================================+====================================+
   | Install Matplotlib from the source | You can install Matplotlib from the|
   | directory using the Python ``pip`` | source directory. You can find     |
   | installer program. Depending on    | additional support if you are      |
   | your operating system, you may need| having trouble with your           |
   | additional support.                | installation.                      |
   +------------------------------------+------------------------------------+

Tense
^^^^^
Use present simple tense for explanations. Avoid future tense and other modal
or auxiliary verbs when possible.

.. table::
   :width: 100%
   :widths: 50, 50

   +------------------------------------+------------------------------------+
   | Correct                            | Incorrect                          |
   +====================================+====================================+
   | The fundamental ideas behind       | Matplotlib will take data and      |
   | Matplotlib for visualization       | transform it through functions and |
   | involve taking data and            | methods. They can generate many    |
   | transforming it through functions  | kinds of visuals. These will be the|
   | and methods.                       | fundamentals for using Matplotlib. |
   +------------------------------------+------------------------------------+

Voice
^^^^^
Write in active sentences. Passive voice is best for situations or conditions
related to warning prompts.

.. table::
   :width: 100%
   :widths: 50, 50

   +------------------------------------+------------------------------------+
   | Correct                            | Incorrect                          |
   +====================================+====================================+
   | The function ``plot`` generates the| The graph is generated by the      |
   | graph.                             | ``plot`` function.                 |
   +------------------------------------+------------------------------------+
   | An error message is returned by the| You will see an error message from |
   | function if there are no arguments.| the function if there are no       |
   |                                    | arguments.                         |
   +------------------------------------+------------------------------------+

Sentence structure
^^^^^^^^^^^^^^^^^^
Write with short sentences using Subject-Verb-Object order regularly. Limit
coordinating conjunctions in sentences. Avoid pronoun references and
subordinating conjunctive phrases.

.. table::
   :width: 100%
   :widths: 50, 50

   +------------------------------------+------------------------------------+
   | Correct                            | Incorrect                          |
   +====================================+====================================+
   | The ``pyplot`` module in Matplotlib| The ``pyplot`` module in Matplotlib|
   | is a collection of functions. These| is a collection of functions which |
   | functions create, manage, and      | create, manage, and manipulate the |
   | manipulate the current Figure and  | current Figure and plotting area.  |
   | plotting area.                     |                                    |
   +------------------------------------+------------------------------------+
   | The ``plot`` function plots data   | The ``plot`` function plots data   |
   | to the respective Axes. The Axes   | within its respective Axes for its |
   | corresponds to the respective      | respective Figure.                 |
   | Figure.                            |                                    |
   +------------------------------------+------------------------------------+
   | The implicit approach is a         | Users that wish to have convenient |
   | convenient shortcut for            | shortcuts for generating plots use |
   | generating simple plots.           | the implicit approach.             |
   +------------------------------------+------------------------------------+


Formatting
==========

The following guidelines specify how to incorporate code and use appropriate
formatting for Matplotlib documentation.

Code
----

Matplotlib is a Python library and follows the same standards for
documentation.

Comments
^^^^^^^^
Examples of Python code have comments before or on the same line.

.. table::
   :width: 100%
   :widths: 50, 50

   +---------------------------------------+---------------------------------+
   | Correct                               | Incorrect                       |
   +=======================================+=================================+
   | ::                                    | ::                              |
   |                                       |                                 |
   |    # Data                             |    years = [2006, 2007, 2008]   |
   |    years = [2006, 2007, 2008]         |    # Data                       |
   +---------------------------------------+                                 |
   | ::                                    |                                 |
   |                                       |                                 |
   |    years = [2006, 2007, 2008]  # Data |                                 |
   +---------------------------------------+---------------------------------+

Outputs
^^^^^^^
When generating visuals with Matplotlib using ``.py`` files in examples,
display the visual with `matplotlib.pyplot.show` to display the visual.
Keep the documentation clear of Python output lines.

.. table::
   :width: 100%
   :widths: 50, 50

   +------------------------------------+------------------------------------+
   | Correct                            | Incorrect                          |
   +====================================+====================================+
   | ::                                 | ::                                 |
   |                                    |                                    |
   |    plt.plot([1, 2, 3], [1, 2, 3])  |    plt.plot([1, 2, 3], [1, 2, 3])  |
   |    plt.show()                      |                                    |
   +------------------------------------+------------------------------------+
   | ::                                 | ::                                 |
   |                                    |                                    |
   |    fig, ax = plt.subplots()        |    fig, ax = plt.subplots()        |
   |    ax.plot([1, 2, 3], [1, 2, 3])   |    ax.plot([1, 2, 3], [1, 2, 3])   |
   |    fig.show()                      |                                    |
   +------------------------------------+------------------------------------+

reStructuredText
----------------

Matplotlib uses reStructuredText Markup for documentation. Sphinx helps to
transform these documents into appropriate formats for accessibility and
visibility.

- `reStructuredText Specifications <https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html>`_
- `Quick Reference Document <https://docutils.sourceforge.io/docs/user/rst/quickref.html>`_


Lists
^^^^^
Bulleted lists are for items that do not require sequencing. Numbered lists are
exclusively for performing actions in a determined order.

.. table::
   :width: 100%
   :widths: 50, 50

   +------------------------------------+------------------------------------+
   | Correct                            | Incorrect                          |
   +====================================+====================================+
   | The example uses three graphs.     | The example uses three graphs.     |
   +------------------------------------+------------------------------------+
   | - Bar                              | 1. Bar                             |
   | - Line                             | 2. Line                            |
   | - Pie                              | 3. Pie                             |
   +------------------------------------+------------------------------------+
   | These four steps help to get       | The following steps are important  |
   | started using Matplotlib.          | to get started using Matplotlib.   |
   +------------------------------------+------------------------------------+
   |  1. Import the Matplotlib library. |  - Import the Matplotlib library.  |
   |  2. Import the necessary modules.  |  - Import the necessary modules.   |
   |  3. Set and assign data to work on.|  - Set and assign data to work on. |
   |  4. Transform data with methods and|  - Transform data with methods and |
   |     functions.                     |    functions.                      |
   +------------------------------------+------------------------------------+

Tables
^^^^^^
Use ASCII tables with reStructuredText standards in organizing content.
Markdown tables and the csv-table directive are not accepted.

.. table::
   :width: 100%
   :widths: 50, 50

   +--------------------------------+----------------------------------------+
   | Correct                        | Incorrect                              |
   +================================+========================================+
   | +----------+----------+        | ::                                     |
   | | Correct  | Incorrect|        |                                        |
   | +==========+==========+        |     | Correct | Incorrect |            |
   | | OK       | Not OK   |        |     | ------- | --------- |            |
   | +----------+----------+        |     | OK      | Not OK    |            |
   |                                |                                        |
   +--------------------------------+----------------------------------------+
   | ::                             | ::                                     |
   |                                |                                        |
   |     +----------+----------+    |     .. csv-table::                     |
   |     | Correct  | Incorrect|    |        :header: "correct", "incorrect" |
   |     +==========+==========+    |        :widths: 10, 10                 |
   |     | OK       | Not OK   |    |                                        |
   |     +----------+----------+    |        "OK   ", "Not OK"               |
   |                                |                                        |
   +--------------------------------+                                        |
   | ::                             |                                        |
   |                                |                                        |
   |     ===========  ===========   |                                        |
   |       Correct     Incorrect    |                                        |
   |     ===========  ===========   |                                        |
   |     OK           Not OK        |                                        |
   |     ===========  ===========   |                                        |
   |                                |                                        |
   +--------------------------------+----------------------------------------+


Additional resources
====================
This style guide is not a comprehensive standard. For a more thorough
reference of how to contribute to documentation, see the links below. These
resources contain common best practices for writing documentation.

* `Python Developer's Guide <https://devguide.python.org/documenting/#documenting-python>`_
* `Google Developer Style Guide <https://developers.google.com/style>`_
* `IBM Style Guide <https://www.oreilly.com/library/view/the-ibm-style/9780132118989/>`_
* `Red Hat Style Guide <https://stylepedia.net/style/#grammar>`_

.. _installing_for_devs:

=====================================
Setting up Matplotlib for development
=====================================

.. _dev-environment:

Creating a dedicated environment
================================
You should set up a dedicated environment to decouple your Matplotlib
development from other Python and Matplotlib installations on your system.
Here we use python's virtual environment `venv`_, but you may also use others
such as conda.

.. _venv: https://docs.python.org/3/library/venv.html

A new environment can be set up with ::

   python -m venv <file folder location>

and activated with one of the following::

   source <file folder location>/bin/activate  # Linux/macOS
   <file folder location>\Scripts\activate.bat  # Windows cmd.exe
   <file folder location>\Scripts\Activate.ps1  # Windows PowerShell

Whenever you plan to work on Matplotlib, remember to activate the development
environment in your shell.

Retrieving the latest version of the code
=========================================

Matplotlib is hosted at https://github.com/matplotlib/matplotlib.git.

You can retrieve the latest sources with the command (see
:ref:`set-up-fork` for more details)::

    git clone https://github.com/matplotlib/matplotlib.git

This will place the sources in a directory :file:`matplotlib` below your
current working directory.

If you have the proper privileges, you can use ``git@`` instead of
``https://``, which works through the ssh protocol and might be easier to use
if you are using 2-factor authentication.

Installing Matplotlib in editable mode
======================================
Install Matplotlib in editable mode from the :file:`matplotlib` directory
using the command ::

    python -m pip install -ve .

The 'editable/develop mode', builds everything and places links in your Python
environment so that Python will be able to import Matplotlib from your
development source directory.  This allows you to import your modified version
of Matplotlib without re-installing after every change. Note that this is only
true for ``*.py`` files.  If you change the C-extension source (which might
also happen if you change branches) you will have to re-run
``python -m pip install -ve .``

Installing pre-commit hooks
===========================
You can optionally install `pre-commit <https://pre-commit.com/>`_ hooks.
These will automatically check flake8 and other style issues when you run
``git commit``. The hooks are defined in the top level
``.pre-commit-config.yaml`` file. To install the hooks ::

    pip install pre-commit
    pre-commit install

Installing additional dependencies for development
==================================================
See :ref:`development-dependencies`.
.. _documenting-matplotlib:

=====================
Writing documentation
=====================

Getting started
===============

General file structure
----------------------

All documentation is built from the :file:`doc/`.  The :file:`doc/`
directory contains configuration files for Sphinx and reStructuredText
(ReST_; ``.rst``) files that are rendered to documentation pages.

Documentation is created in three ways.  First, API documentation
(:file:`doc/api`) is created by Sphinx_ from
the docstrings of the classes in the Matplotlib library.  Except for
:file:`doc/api/api_changes/`,  ``.rst`` files in :file:`doc/api` are created
when the documentation is built.  See :ref:`writing-docstrings` below.

Second, the contents of :file:`doc/plot_types`, :file:`doc/gallery` and
:file:`doc/tutorials` are generated by the `Sphinx Gallery`_ from python
files in :file:`plot_types/`, :file:`examples/` and :file:`tutorials/`.
These sources consist of python scripts that have ReST_ documentation built
into their comments.  See :ref:`writing-examples-and-tutorials` below.

Third, Matplotlib has narrative docs written in ReST_ in subdirectories of
:file:`doc/users/`.  If you would like to add new documentation that is suited
to an ``.rst`` file rather than a gallery or tutorial example, choose an
appropriate subdirectory to put it in, and add the file to the table of
contents of :file:`index.rst` of the subdirectory.  See
:ref:`writing-rest-pages` below.

.. note::

  Don't directly edit the ``.rst`` files in :file:`doc/plot_types`,
  :file:`doc/gallery`,  :file:`doc/tutorials`, and :file:`doc/api`
  (excepting :file:`doc/api/api_changes/`).  Sphinx_ regenerates
  files in these directories when building documentation.

Setting up the doc build
------------------------

The documentation for Matplotlib is generated from reStructuredText (ReST_)
using the Sphinx_ documentation generation tool.

To build the documentation you will need to
:ref:`set up Matplotlib for development <installing_for_devs>`. Note in
particular the :ref:`additional dependencies <doc-dependencies>` required to
build the documentation.

Building the docs
-----------------

The documentation sources are found in the :file:`doc/` directory in the trunk.
The configuration file for Sphinx is :file:`doc/conf.py`. It controls which
directories Sphinx parses, how the docs are built, and how the extensions are
used. To build the documentation in html format, cd into :file:`doc/` and run:

.. code-block:: sh

   make html

Other useful invocations include

.. code-block:: sh

   # Delete built files.  May help if you get errors about missing paths or
   # broken links.
   make clean

   # Build pdf docs.
   make latexpdf

The ``SPHINXOPTS`` variable is set to ``-W --keep-going`` by default to build
the complete docs but exit with exit status 1 if there are warnings.  To unset
it, use

.. code-block:: sh

   make SPHINXOPTS= html

On Windows the arguments must be at the end of the statement:

.. code-block:: bat

   make html SPHINXOPTS=

You can use the ``O`` variable to set additional options:

* ``make O=-j4 html`` runs a parallel build with 4 processes.
* ``make O=-Dplot_formats=png:100 html`` saves figures in low resolution.
* ``make O=-Dplot_gallery=0 html`` skips the gallery build.

Multiple options can be combined using e.g. ``make O='-j4 -Dplot_gallery=0'
html``.

On Windows, either use the format shown above or set options as environment variables, e.g.:

.. code-block:: bat

   set O=-W --keep-going -j4
   make html

Showing locally built docs
--------------------------

The built docs are available in the folder :file:`build/html`. A shortcut
for opening them in your default browser is:

.. code-block:: sh

   make show

.. _writing-rest-pages:

Writing ReST pages
==================

Most documentation is either in the docstrings of individual
classes and methods, in explicit ``.rst`` files, or in examples and tutorials.
All of these use the ReST_ syntax and are processed by Sphinx_.

The `Sphinx reStructuredText Primer
<https://www.sphinx-doc.org/en/master/usage/restructuredtext/basics.html>`_ is
a good introduction into using ReST. More complete information is available in
the `reStructuredText reference documentation
<https://docutils.sourceforge.io/rst.html#reference-documentation>`_.

This section contains additional information and conventions how ReST is used
in the Matplotlib documentation.

Formatting and style conventions
--------------------------------

It is useful to strive for consistency in the Matplotlib documentation.  Here
are some formatting and style conventions that are used.

Section formatting
~~~~~~~~~~~~~~~~~~

For everything but top-level chapters,  use ``Upper lower`` for
section titles, e.g., ``Possible hangups`` rather than ``Possible
Hangups``

We aim to follow the recommendations from the
`Python documentation <https://devguide.python.org/documenting/#sections>`_
and the `Sphinx reStructuredText documentation <https://www.sphinx-doc.org/en/master/usage/restructuredtext/basics.html#sections>`_
for section markup characters, i.e.:

- ``#`` with overline, for parts. This is reserved for the main title in
  ``index.rst``. All other pages should start with "chapter" or lower.
- ``*`` with overline, for chapters
- ``=``, for sections
- ``-``, for subsections
- ``^``, for subsubsections
- ``"``, for paragraphs

This may not yet be applied consistently in existing docs.

Function arguments
~~~~~~~~~~~~~~~~~~

Function arguments and keywords within docstrings should be referred to using
the ``*emphasis*`` role. This will keep Matplotlib's documentation consistent
with Python's documentation:

.. code-block:: rst

  Here is a description of *argument*

Do not use the ```default role```:

.. code-block:: rst

   Do not describe `argument` like this.  As per the next section,
   this syntax will (unsuccessfully) attempt to resolve the argument as a
   link to a class or method in the library.

nor the ````literal```` role:

.. code-block:: rst

   Do not describe ``argument`` like this.


.. _internal-section-refs:

Referring to other documents and sections
-----------------------------------------

Sphinx_ allows internal references_ between documents.

Documents can be linked with the ``:doc:`` directive:

.. code-block:: rst

   See the :doc:`/users/installing/index`

   See the tutorial :doc:`/tutorials/introductory/quick_start`

   See the example :doc:`/gallery/lines_bars_and_markers/simple_plot`

will render as:

  See the :doc:`/users/installing/index`

  See the tutorial :doc:`/tutorials/introductory/quick_start`

  See the example :doc:`/gallery/lines_bars_and_markers/simple_plot`

Sections can also be given reference names.  For instance from the
:doc:`/users/installing/index` link:

.. code-block:: rst

   .. _clean-install:

   How to completely remove Matplotlib
   ===================================

   Occasionally, problems with Matplotlib can be solved with a clean...

and refer to it using the standard reference syntax:

.. code-block:: rst

   See :ref:`clean-install`

will give the following link: :ref:`clean-install`

To maximize internal consistency in section labeling and references,
use hyphen separated, descriptive labels for section references.
Keep in mind that contents may be reorganized later, so
avoid top level names in references like ``user`` or ``devel``
or ``faq`` unless necessary, because for example the FAQ "what is a
backend?" could later become part of the users guide, so the label:

.. code-block:: rst

   .. _what-is-a-backend:

is better than:

.. code-block:: rst

   .. _faq-backend:

In addition, since underscores are widely used by Sphinx itself, use
hyphens to separate words.

.. _referring-to-other-code:

Referring to other code
-----------------------

To link to other methods, classes, or modules in Matplotlib you can use
back ticks, for example:

.. code-block:: rst

  `matplotlib.collections.LineCollection`

generates a link like this: `matplotlib.collections.LineCollection`.

*Note:* We use the sphinx setting ``default_role = 'obj'`` so that you don't
have to use qualifiers like ``:class:``, ``:func:``, ``:meth:`` and the likes.

Often, you don't want to show the full package and module name. As long as the
target is unanbigous you can simply leave them out:

.. code-block:: rst

  `.LineCollection`

and the link still works: `.LineCollection`.

If there are multiple code elements with the same name (e.g. ``plot()`` is a
method in multiple classes), you'll have to extend the definition:

.. code-block:: rst

  `.pyplot.plot` or `.Axes.plot`

These will show up as `.pyplot.plot` or `.Axes.plot`. To still show only the
last segment you can add a tilde as prefix:

.. code-block:: rst

  `~.pyplot.plot` or `~.Axes.plot`

will render as `~.pyplot.plot` or `~.Axes.plot`.

Other packages can also be linked via
`intersphinx <http://www.sphinx-doc.org/en/master/ext/intersphinx.html>`_:

.. code-block:: rst

  `numpy.mean`

will return this link: `numpy.mean`.  This works for Python, Numpy, Scipy,
and Pandas (full list is in :file:`doc/conf.py`).  If external linking fails,
you can check the full list of referenceable objects with the following
commands::

  python -m sphinx.ext.intersphinx 'https://docs.python.org/3/objects.inv'
  python -m sphinx.ext.intersphinx 'https://numpy.org/doc/stable/objects.inv'
  python -m sphinx.ext.intersphinx 'https://docs.scipy.org/doc/scipy/reference/objects.inv'
  python -m sphinx.ext.intersphinx 'https://pandas.pydata.org/pandas-docs/stable/objects.inv'

.. _rst-figures-and-includes:

Including figures and files
---------------------------

Image files can directly included in pages with the ``image::`` directive.
e.g., :file:`tutorials/intermediate/constrainedlayout_guide.py` displays
a couple of static images::

  # .. image:: /_static/constrained_layout_1b.png
  #    :align: center


Files can be included verbatim.  For instance the ``LICENSE`` file is included
at :ref:`license-agreement` using ::

    .. literalinclude:: ../../LICENSE/LICENSE

The examples directory is copied to :file:`doc/gallery` by sphinx-gallery,
so plots from the examples directory can be included using

.. code-block:: rst

    .. plot:: gallery/lines_bars_and_markers/simple_plot.py

Note that the python script that generates the plot is referred to, rather than
any plot that is created.  Sphinx-gallery will provide the correct reference
when the documentation is built.


.. _writing-docstrings:

Writing docstrings
==================

Most of the API documentation is written in docstrings. These are comment
blocks in source code that explain how the code works.

.. note::

   Some parts of the documentation do not yet conform to the current
   documentation style. If in doubt, follow the rules given here and not what
   you may see in the source code. Pull requests updating docstrings to
   the current style are very welcome.

All new or edited docstrings should conform to the `numpydoc docstring guide`_.
Much of the ReST_ syntax discussed above (:ref:`writing-rest-pages`) can be
used for links and references.  These docstrings eventually populate the
:file:`doc/api` directory and form the reference documentation for the
library.

Example docstring
-----------------

An example docstring looks like:

.. code-block:: python

    def hlines(self, y, xmin, xmax, colors='k', linestyles='solid',
               label='', **kwargs):
        """
        Plot horizontal lines at each *y* from *xmin* to *xmax*.

        Parameters
        ----------
        y : float or array-like
            y-indexes where to plot the lines.

        xmin, xmax : float or array-like
            Respective beginning and end of each line. If scalars are
            provided, all lines will have the same length.

        colors : array-like of colors, default: 'k'

        linestyles : {'solid', 'dashed', 'dashdot', 'dotted'}, default: 'solid'

        label : str, default: ''

        Returns
        -------
        lines : `~matplotlib.collections.LineCollection`

        Other Parameters
        ----------------
        **kwargs : `~matplotlib.collections.LineCollection` properties

        See also
        --------
        vlines : vertical lines
        axhline: horizontal line across the axes
        """

See the `~.Axes.hlines` documentation for how this renders.

The Sphinx_ website also contains plenty of documentation_ concerning ReST
markup and working with Sphinx in general.

Formatting conventions
----------------------

The basic docstring conventions are covered in the `numpydoc docstring guide`_
and the Sphinx_ documentation.  Some Matplotlib-specific formatting conventions
to keep in mind:

Quote positions
~~~~~~~~~~~~~~~
The quotes for single line docstrings are on the same line (pydocstyle D200)::

    def get_linewidth(self):
        """Return the line width in points."""

The quotes for multi-line docstrings are on separate lines (pydocstyle D213)::

        def set_linestyle(self, ls):
        """
        Set the linestyle of the line.

        [...]
        """

Function arguments
~~~~~~~~~~~~~~~~~~
Function arguments and keywords within docstrings should be referred to
using the ``*emphasis*`` role. This will keep Matplotlib's documentation
consistent with Python's documentation:

.. code-block:: rst

  If *linestyles* is *None*, the default is 'solid'.

Do not use the ```default role``` or the ````literal```` role:

.. code-block:: rst

  Neither `argument` nor ``argument`` should be used.


Quotes for strings
~~~~~~~~~~~~~~~~~~
Matplotlib does not have a convention whether to use single-quotes or
double-quotes.  There is a mixture of both in the current code.

Use simple single or double quotes when giving string values, e.g.

.. code-block:: rst

  If 'tight', try to figure out the tight bbox of the figure.

  No ``'extra'`` literal quotes.

The use of extra literal quotes around the text is discouraged. While they
slightly improve the rendered docs, they are cumbersome to type and difficult
to read in plain-text docs.

Parameter type descriptions
~~~~~~~~~~~~~~~~~~~~~~~~~~~
The main goal for parameter type descriptions is to be readable and
understandable by humans. If the possible types are too complex use a
simplification for the type description and explain the type more
precisely in the text.

Generally, the `numpydoc docstring guide`_ conventions apply. The following
rules expand on them where the numpydoc conventions are not specific.

Use ``float`` for a type that can be any number.

Use ``(float, float)`` to describe a 2D position. The parentheses should be
included to make the tuple-ness more obvious.

Use ``array-like`` for homogeneous numeric sequences, which could
typically be a numpy.array. Dimensionality may be specified using ``2D``,
``3D``, ``n-dimensional``. If you need to have variables denoting the
sizes of the dimensions, use capital letters in brackets
(``(M, N) array-like``). When referring to them in the text they are easier
read and no special formatting is needed. Use ``array`` instead of
``array-like`` for return types if the returned object is indeed a numpy array.

``float`` is the implicit default dtype for array-likes. For other dtypes
use ``array-like of int``.

Some possible uses::

  2D array-like
  (N,) array-like
  (M, N) array-like
  (M, N, 3) array-like
  array-like of int

Non-numeric homogeneous sequences are described as lists, e.g.::

  list of str
  list of `.Artist`

Referencing types
~~~~~~~~~~~~~~~~~
Generally, the rules from referring-to-other-code_ apply. More specifically:

Use full references ```~matplotlib.colors.Normalize``` with an
abbreviation tilde in parameter types. While the full name helps the
reader of plain text docstrings, the HTML does not need to show the full
name as it links to it. Hence, the ``~``-shortening keeps it more readable.

Use abbreviated links ```.Normalize``` in the text.

.. code-block:: rst

   norm : `~matplotlib.colors.Normalize`, optional
        A `.Normalize` instance is used to scale luminance data to 0, 1.

Default values
~~~~~~~~~~~~~~
As opposed to the numpydoc guide, parameters need not be marked as
*optional* if they have a simple default:

- use ``{name} : {type}, default: {val}`` when possible.
- use ``{name} : {type}, optional`` and describe the default in the text if
  it cannot be explained sufficiently in the recommended manner.

The default value should provide semantic information targeted at a human
reader. In simple cases, it restates the value in the function signature.
If applicable, units should be added.

.. code-block:: rst

   Prefer:
       interval : int, default: 1000ms
   over:
       interval : int, default: 1000

If *None* is only used as a sentinel value for "parameter not specified", do
not document it as the default. Depending on the context, give the actual
default, or mark the parameter as optional if not specifying has no particular
effect.

.. code-block:: rst

   Prefer:
       dpi : float, default: :rc:`figure.dpi`
   over:
       dpi : float, default: None

   Prefer:
       textprops : dict, optional
           Dictionary of keyword parameters to be passed to the
           `~matplotlib.text.Text` instance contained inside TextArea.
   over:
       textprops : dict, default: None
           Dictionary of keyword parameters to be passed to the
           `~matplotlib.text.Text` instance contained inside TextArea.


``See also`` sections
~~~~~~~~~~~~~~~~~~~~~
Sphinx automatically links code elements in the definition blocks of ``See
also`` sections. No need to use backticks there::

   See also
   --------
   vlines : vertical lines
   axhline: horizontal line across the axes

Wrapping parameter lists
~~~~~~~~~~~~~~~~~~~~~~~~
Long parameter lists should be wrapped using a ``\`` for continuation and
starting on the new line without any indent (no indent because pydoc will
parse the docstring and strip the line continuation so that indent would
result in a lot of whitespace within the line):

.. code-block:: python

  def add_axes(self, *args, **kwargs):
      """
      ...

      Parameters
      ----------
      projection : {'aitoff', 'hammer', 'lambert', 'mollweide', 'polar', \
  'rectilinear'}, optional
          The projection type of the axes.

      ...
      """

Alternatively, you can describe the valid parameter values in a dedicated
section of the docstring.

rcParams
~~~~~~~~
rcParams can be referenced with the custom ``:rc:`` role:
:literal:`:rc:\`foo\`` yields ``rcParams["foo"] = 'default'``, which is a link
to the :file:`matplotlibrc` file description.

Setters and getters
-------------------

Artist properties are implemented using setter and getter methods (because
Matplotlib predates the Python `property` decorator).
By convention, these setters and getters are named ``set_PROPERTYNAME`` and
``get_PROPERTYNAME``; the list of properties thusly defined on an artist and
their values can be listed by the `~.pyplot.setp` and `~.pyplot.getp` functions.

The Parameters block of property setter methods is parsed to document the
accepted values, e.g. the docstring of `.Line2D.set_linestyle` starts with

.. code-block:: python

   def set_linestyle(self, ls):
       """
       Set the linestyle of the line.

       Parameters
       ----------
       ls : {'-', '--', '-.', ':', '', (offset, on-off-seq), ...}
           etc.
       """

which results in the following line in the output of ``plt.setp(line)`` or
``plt.setp(line, "linestyle")``::

    linestyle or ls: {'-', '--', '-.', ':', '', (offset, on-off-seq), ...}

In some rare cases (mostly, setters which accept both a single tuple and an
unpacked tuple), the accepted values cannot be documented in such a fashion;
in that case, they can be documented as an ``.. ACCEPTS:`` block, e.g. for
`.axes.Axes.set_xlim`:

.. code-block:: python

   def set_xlim(self, ...):
       """
       Set the x-axis view limits.

       Parameters
       ----------
       left : float, optional
           The left xlim in data coordinates. Passing *None* leaves the
           limit unchanged.

           The left and right xlims may also be passed as the tuple
           (*left*, *right*) as the first positional argument (or as
           the *left* keyword argument).

           .. ACCEPTS: (bottom: float, top: float)

       right : float, optional
           etc.
       """

Note that the leading ``..`` makes the ``.. ACCEPTS:`` block a reST comment,
hiding it from the rendered docs.

Keyword arguments
-----------------

.. note::

  The information in this section is being actively discussed by the
  development team, so use the docstring interpolation only if necessary.
  This section has been left in place for now because this interpolation
  is part of the existing documentation.

Since Matplotlib uses a lot of pass-through ``kwargs``, e.g., in every function
that creates a line (`~.pyplot.plot`, `~.pyplot.semilogx`, `~.pyplot.semilogy`,
etc...), it can be difficult for the new user to know which ``kwargs`` are
supported.  Matplotlib uses a docstring interpolation scheme to support
documentation of every function that takes a ``**kwargs``.  The requirements
are:

1. single point of configuration so changes to the properties don't
   require multiple docstring edits.

2. as automated as possible so that as properties change, the docs
   are updated automatically.

The ``@docstring.interpd`` decorator implements this.  Any function accepting
`.Line2D` pass-through ``kwargs``, e.g., `matplotlib.axes.Axes.plot`, can list
a summary of the `.Line2D` properties, as follows:

.. code-block:: python

  # in axes.py
  @docstring.interpd
  def plot(self, *args, **kwargs):
      """
      Some stuff omitted

      Other Parameters
      ----------------
      scalex, scaley : bool, default: True
          These parameters determine if the view limits are adapted to the
          data limits. The values are passed on to `autoscale_view`.

      **kwargs : `.Line2D` properties, optional
          *kwargs* are used to specify properties like a line label (for
          auto legends), linewidth, antialiasing, marker face color.
          Example::

          >>> plot([1, 2, 3], [1, 2, 3], 'go-', label='line 1', linewidth=2)
          >>> plot([1, 2, 3], [1, 4, 9], 'rs', label='line 2')

          If you specify multiple lines with one plot call, the kwargs apply
          to all those lines. In case the label object is iterable, each
          element is used as labels for each set of data.

          Here is a list of available `.Line2D` properties:

          %(Line2D:kwdoc)s
      """

The ``%(Line2D:kwdoc)`` syntax makes ``interpd`` lookup an `.Artist` subclass
named ``Line2D``, and call `.artist.kwdoc` on that class.  `.artist.kwdoc`
introspects the subclass and summarizes its properties as a substring, which
gets interpolated into the docstring.

Note that this scheme does not work for decorating an Artist's ``__init__``, as
the subclass and its properties are not defined yet at that point.  Instead,
``@docstring.interpd`` can be used to decorate the class itself -- at that
point, `.kwdoc` can list the properties and interpolate them into
``__init__.__doc__``.


Inheriting docstrings
---------------------

If a subclass overrides a method but does not change the semantics, we can
reuse the parent docstring for the method of the child class. Python does this
automatically, if the subclass method does not have a docstring.

Use a plain comment ``# docstring inherited`` to denote the intention to reuse
the parent docstring. That way we do not accidentally create a docstring in
the future::

    class A:
        def foo():
            """The parent docstring."""
            pass

    class B(A):
        def foo():
            # docstring inherited
            pass


.. _docstring-adding-figures:

Adding figures
--------------

As above (see :ref:`rst-figures-and-includes`), figures in the examples gallery
can be referenced with a ``.. plot::`` directive pointing to the python script
that created the figure.  For instance the `~.Axes.legend` docstring references
the file :file:`examples/text_labels_and_annotations/legend.py`:

.. code-block:: python

    """
    ...

    Examples
    --------

    .. plot:: gallery/text_labels_and_annotations/legend.py
    """

Note that ``examples/text_labels_and_annotations/legend.py`` has been mapped to
``gallery/text_labels_and_annotations/legend.py``, a redirection that may be
fixed in future re-organization of the docs.

Plots can also be directly placed inside docstrings.  Details are in
:doc:`/api/sphinxext_plot_directive_api`.  A short example is:

.. code-block:: python

    """
    ...

    Examples
    --------

    .. plot::
       import matplotlib.image as mpimg
       img = mpimg.imread('_static/stinkbug.png')
       imgplot = plt.imshow(img)
    """

An advantage of this style over referencing an example script is that the
code will also appear in interactive docstrings.

.. _writing-examples-and-tutorials:

Writing examples and tutorials
==============================

Examples and tutorials are python scripts that are run by `Sphinx Gallery`_
to create a gallery of images in the :file:`/doc/gallery` and
:file:`/doc/tutorials` directories respectively.  To exclude an example
from having an plot generated insert "sgskip" somewhere in the filename.

The format of these files is relatively straightforward.  Properly
formatted comment blocks are treated as ReST_ text, the code is
displayed, and figures are put into the built page.

For instance the example :doc:`/gallery/lines_bars_and_markers/simple_plot`
example is generated from
:file:`/examples/lines_bars_and_markers/simple_plot.py`, which looks like:

.. code-block:: python

    """
    ===========
    Simple Plot
    ===========

    Create a simple plot.
    """
    import matplotlib.pyplot as plt
    import numpy as np

    # Data for plotting
    t = np.arange(0.0, 2.0, 0.01)
    s = 1 + np.sin(2 * np.pi * t)

    # Note that using plt.subplots below is equivalent to using
    # fig = plt.figure and then ax = fig.add_subplot(111)
    fig, ax = plt.subplots()
    ax.plot(t, s)

    ax.set(xlabel='time (s)', ylabel='voltage (mV)',
           title='About as simple as it gets, folks')
    ax.grid()
    plt.show()

The first comment block is treated as ReST_ text.  The other comment blocks
render as comments in :doc:`/gallery/lines_bars_and_markers/simple_plot`.

Tutorials are made with the exact same mechanism, except they are longer, and
typically have more than one comment block (i.e.
:doc:`/tutorials/introductory/quick_start`).  The first comment block
can be the same as the example above.  Subsequent blocks of ReST text
are delimited by a line of ``###`` characters:

.. code-block:: python

    """
    ===========
    Simple Plot
    ===========

    Create a simple plot.
    """
    ...
    ax.grid()
    plt.show()

    ##########################################################################
    # Second plot
    # ===========
    #
    # This is a second plot that is very nice

    fig, ax = plt.subplots()
    ax.plot(np.sin(range(50)))

In this way text, code, and figures are output in a "notebook" style.

References for sphinx-gallery
-----------------------------

The showcased Matplotlib functions should be listed in an admonition at the
bottom as follows

.. code-block:: python

    ###############################################################################
    #
    # .. admonition:: References
    #
    #    The use of the following functions, methods, classes and modules is shown
    #    in this example:
    #
    #    - `matplotlib.axes.Axes.fill` / `matplotlib.pyplot.fill`
    #    - `matplotlib.axes.Axes.axis` / `matplotlib.pyplot.axis`

This allows sphinx-gallery to place an entry to the example in the
mini-gallery of the mentioned functions. Whether or not a function is mentioned
here should be decided depending on if a mini-gallery link prominently helps
to illustrate that function; e.g. mention ``matplotlib.pyplot.subplots`` only
in examples that are about laying out subplots, not in every example that uses
it.

Functions that exist in ``pyplot`` as well as in Axes or Figure should mention
both references no matter which one is used in the example code. The ``pyplot``
reference should always be the second to mention; see the example above.

Order of examples in the gallery
--------------------------------

The order of the sections of the :ref:`tutorials` and the :ref:`gallery`, as
well as the order of the examples within each section are determined in a
two step process from within the :file:`/doc/sphinxext/gallery_order.py`:

* *Explicit order*: This file contains a list of folders for the section order
  and a list of examples for the subsection order. The order of the items
  shown in the doc pages is the order those items appear in those lists.
* *Implicit order*: If a folder or example is not in those lists, it will be
  appended after the explicitly ordered items and all of those additional
  items will be ordered by pathname (for the sections) or by filename
  (for the subsections).

As a consequence, if you want to let your example appear in a certain
position in the gallery, extend those lists with your example.
In case no explicit order is desired or necessary, still make sure
to name your example consistently, i.e. use the main function or subject
of the example as first word in the filename; e.g. an image example
should ideally be named similar to :file:`imshow_mynewexample.py`.

Miscellaneous
=============

Moving documentation
--------------------

Sometimes it is desirable to move or consolidate documentation.  With no
action this will lead to links either going dead (404) or pointing to old
versions of the documentation.  Preferable is to replace the old page
with an html refresh that immediately redirects the viewer to the new
page. So, for example we move ``/doc/topic/old_info.rst`` to
``/doc/topic/new_info.rst``.  We remove ``/doc/topic/old_info.rst`` and
in ``/doc/topic/new_info.rst`` we insert a ``redirect-from`` directive that
tells sphinx to still make the old file with the html refresh/redirect in it
(probably near the top of the file to make it noticeable)

.. code-block:: rst

   .. redirect-from:: /topic/old_info

In the built docs this will yield an html file
``/build/html/topic/old_info.html`` that has a refresh to ``new_info.html``.
If the two files are in different subdirectories:

.. code-block:: rst

   .. redirect-from:: /old_topic/old_info2

will yield an html file ``/build/html/old_topic/old_info2.html`` that has a
(relative) refresh to ``../topic/new_info.html``.

Use the full path for this directive, relative to the doc root at
``https://matplotlib.org/stable/``.  So ``/old_topic/old_info2`` would be
found by users at ``http://matplotlib.org/stable/old_topic/old_info2``.
For clarity, do not use relative links.


Adding animations
-----------------

Animations are scraped automatically by Sphinx-gallery. If this is not
desired,
there is also a Matplotlib Google/Gmail account with username ``mplgithub``
which was used to setup the github account but can be used for other
purposes, like hosting Google docs or Youtube videos.  You can embed a
Matplotlib animation in the docs by first saving the animation as a
movie using :meth:`matplotlib.animation.Animation.save`, and then
uploading to `Matplotlib's Youtube
channel <https://www.youtube.com/user/matplotlib>`_ and inserting the
embedding string youtube provides like:

.. code-block:: rst

  .. raw:: html

     <iframe width="420" height="315"
       src="https://www.youtube.com/embed/32cjc6V0OZY"
       frameborder="0" allowfullscreen>
     </iframe>

An example save command to generate a movie looks like this

.. code-block:: python

    ani = animation.FuncAnimation(fig, animate, np.arange(1, len(y)),
        interval=25, blit=True, init_func=init)

    ani.save('double_pendulum.mp4', fps=15)

Contact Michael Droettboom for the login password to upload youtube videos of
google docs to the mplgithub account.

.. _inheritance-diagrams:

Generating inheritance diagrams
-------------------------------

Class inheritance diagrams can be generated with the Sphinx
`inheritance-diagram`_ directive.

.. _inheritance-diagram: https://www.sphinx-doc.org/en/master/usage/extensions/inheritance.html

Example:

.. code-block:: rst

    .. inheritance-diagram:: matplotlib.patches matplotlib.lines matplotlib.text
       :parts: 2

.. inheritance-diagram:: matplotlib.patches matplotlib.lines matplotlib.text
   :parts: 2


Navbar and style
----------------

Matplotlib has a few subprojects that share the same navbar and style, so these
are centralized as a sphinx theme at
`mpl_sphinx_theme <https://github.com/matplotlib/mpl-sphinx-theme>`_.  Changes to the
style or topbar should be made there to propagate across all subprojects.

.. TODO: Add section about uploading docs

.. _ReST: https://docutils.sourceforge.io/rst.html
.. _Sphinx: http://www.sphinx-doc.org
.. _documentation: https://www.sphinx-doc.org/en/master/contents.html
.. _index: http://www.sphinx-doc.org/markup/para.html#index-generating-markup
.. _`Sphinx Gallery`: https://sphinx-gallery.readthedocs.io/en/latest/
.. _references: https://www.sphinx-doc.org/en/stable/usage/restructuredtext/roles.html
.. _`numpydoc docstring guide`: https://numpydoc.readthedocs.io/en/latest/format.html
.. _developers-guide-index:

############
Contributing
############

Thank you for your interest in helping to improve Matplotlib! There are various
ways to contribute to Matplotlib. All of them are super valuable but don't necessarily
require writing code at all. For example:

- contributing to the documentation
- opening new issues for bugs
- requesting new features
- asking for clarification on things you find unclear
- fixing bugs

If you have any questions on the
process or how to fix something feel free to ask on `gitter
<https://gitter.im/matplotlib/matplotlib>`_ for short questions and on
`discourse <https://discourse.matplotlib.org>`_ for longer questions.

.. raw:: html

   <div style="margin: 2em 0;">
     <a href="contributing.html#submitting-a-bug-report"><span class="mpl-button">Report a bug</span></a>
     <a href="contributing.html#request-a-new-feature"><span class="mpl-button">Request a feature</span></a>
     <a href="contributing.html#contributing-code"><span class="mpl-button">Contribute code</span></a>
     <a href="contributing.html#contributing-documentation"><span class="mpl-button">Write documentation</span></a>
   </div>

.. toctree::
   :maxdepth: 2

   contributing.rst
   triage.rst
   development_setup.rst
   testing.rst
   documenting_mpl.rst
   style_guide.rst
   gitwash/index.rst
   coding_guide.rst
   release_guide.rst
   dependencies.rst
   min_dep_policy.rst
   MEP/index

.. toctree::
   :hidden:

   license.rst
   color_changes
.. _testing:

=======
Testing
=======

Matplotlib uses the pytest_ framework.

The tests are in :file:`lib/matplotlib/tests`, and customizations to the pytest
testing infrastructure are in :mod:`matplotlib.testing`.

.. _pytest: http://doc.pytest.org/en/latest/
.. _pytest-xdist: https://pypi.org/project/pytest-xdist/


.. _testing_requirements:

Requirements
------------

To run the tests you will need to
:ref:`set up Matplotlib for development <installing_for_devs>`. Note in
particular the :ref:`additional dependencies <test-dependencies>` for testing.

.. note::

   We will assume that you want to run the tests in a development setup.

   While you can run the tests against a regular installed version of
   Matplotlib, this is a far less common use case. You still need the
   :ref:`additional dependencies <test-dependencies>` for testing.
   You have to additionally get the reference images from the repository,
   because they are not distributed with pre-built Matplotlib packages.

Running the tests
-----------------

In the root directory of your development repository run::

   python -m pytest


pytest can be configured via a lot of `command-line parameters`_. Some
particularly useful ones are:

=============================  ===========
``-v`` or ``--verbose``        Be more verbose
``-n NUM``                     Run tests in parallel over NUM
                               processes (requires pytest-xdist_)
``--capture=no`` or ``-s``     Do not capture stdout
=============================  ===========

To run a single test from the command line, you can provide a file path,
optionally followed by the function separated by two colons, e.g., (tests do
not need to be installed, but Matplotlib should be)::

  pytest lib/matplotlib/tests/test_simplification.py::test_clipping


.. _command-line parameters: http://doc.pytest.org/en/latest/usage.html


Writing a simple test
---------------------

Many elements of Matplotlib can be tested using standard tests. For
example, here is a test from :file:`matplotlib/tests/test_basic.py`::

  def test_simple():
      """
      very simple example test
      """
      assert 1 + 1 == 2

Pytest determines which functions are tests by searching for files whose names
begin with ``"test_"`` and then within those files for functions beginning with
``"test"`` or classes beginning with ``"Test"``.

Some tests have internal side effects that need to be cleaned up after their
execution (such as created figures or modified `.rcParams`). The pytest fixture
``matplotlib.testing.conftest.mpl_test_settings`` will automatically clean
these up; there is no need to do anything further.

Random data in tests
--------------------

Random data is a very convenient way to generate data for examples,
however the randomness is problematic for testing (as the tests
must be deterministic!).  To work around this set the seed in each test.
For numpy use::

  import numpy as np
  np.random.seed(19680801)

The seed is John Hunter's birthday.

Writing an image comparison test
--------------------------------

Writing an image-based test is only slightly more difficult than a simple
test. The main consideration is that you must specify the "baseline", or
expected, images in the `~matplotlib.testing.decorators.image_comparison`
decorator. For example, this test generates a single image and automatically
tests it::

   from matplotlib.testing.decorators import image_comparison
   import matplotlib.pyplot as plt

   @image_comparison(baseline_images=['line_dashes'], remove_text=True,
                     extensions=['png'])
   def test_line_dashes():
       fig, ax = plt.subplots()
       ax.plot(range(10), linestyle=(0, (3, 3)), lw=5)

The first time this test is run, there will be no baseline image to compare
against, so the test will fail.  Copy the output images (in this case
:file:`result_images/test_lines/test_line_dashes.png`) to the correct
subdirectory of :file:`baseline_images` tree in the source directory (in this
case :file:`lib/matplotlib/tests/baseline_images/test_lines`).  Put this new
file under source code revision control (with ``git add``).  When rerunning
the tests, they should now pass.

Baseline images take a lot of space in the Matplotlib repository.
An alternative approach for image comparison tests is to use the
`~matplotlib.testing.decorators.check_figures_equal` decorator, which should be
used to decorate a function taking two `.Figure` parameters and draws the same
images on the figures using two different methods (the tested method and the
baseline method).  The decorator will arrange for setting up the figures and
then collect the drawn results and compare them.

See the documentation of `~matplotlib.testing.decorators.image_comparison` and
`~matplotlib.testing.decorators.check_figures_equal` for additional information
about their use.

Creating a new module in matplotlib.tests
-----------------------------------------

We try to keep the tests categorized by the primary module they are
testing.  For example, the tests related to the ``mathtext.py`` module
are in ``test_mathtext.py``.

Using GitHub Actions for CI
---------------------------

`GitHub Actions <https://docs.github.com/en/actions>`_ is a hosted CI system
"in the cloud".

GitHub Actions is configured to receive notifications of new commits to GitHub
repos and to run builds or tests when it sees these new commits. It looks for a
YAML files in ``.github/workflows`` to see how to test the project.

GitHub Actions is already enabled for the `main Matplotlib GitHub repository
<https://github.com/matplotlib/matplotlib/>`_ -- for example, see `the Tests
workflows
<https://github.com/matplotlib/matplotlib/actions?query=workflow%3ATests>`_.

GitHub Actions should be automatically enabled for your personal Matplotlib
fork once the YAML workflow files are in it. It generally isn't necessary to
look at these workflows, since any pull request submitted against the main
Matplotlib repository will be tested.

You can see the GitHub Actions results at
https://github.com/your_GitHub_user_name/matplotlib/actions -- here's `an
example <https://github.com/QuLogic/matplotlib/actions>`_.


Using tox
---------

`Tox <https://tox.readthedocs.io/en/latest/>`_ is a tool for running tests
against multiple Python environments, including multiple versions of Python
(e.g., 3.6, 3.7) and even different Python implementations altogether
(e.g., CPython, PyPy, Jython, etc.), as long as all these versions are
available on your system's $PATH (consider using your system package manager,
e.g. apt-get, yum, or Homebrew, to install them).

tox makes it easy to determine if your working copy introduced any
regressions before submitting a pull request. Here's how to use it:

.. code-block:: bash

    $ pip install tox
    $ tox

You can also run tox on a subset of environments:

.. code-block:: bash

    $ tox -e py37,py38

Tox processes everything serially so it can take a long time to test
several environments. To speed it up, you might try using a new,
parallelized version of tox called ``detox``. Give this a try:

.. code-block:: bash

    $ pip install -U -i http://pypi.testrun.org detox
    $ detox

Tox is configured using a file called ``tox.ini``. You may need to
edit this file if you want to add new environments to test (e.g.,
``py33``) or if you want to tweak the dependencies or the way the
tests are run. For more info on the ``tox.ini`` file, see the `Tox
Configuration Specification
<https://tox.readthedocs.io/en/latest/config.html>`_.

Building old versions of Matplotlib
-----------------------------------

When running a ``git bisect`` to see which commit introduced a certain bug,
you may (rarely) need to build very old versions of Matplotlib.  The following
constraints need to be taken into account:

- Matplotlib 1.3 (or earlier) requires numpy 1.8 (or earlier).

Testing released versions of Matplotlib
---------------------------------------
Running the tests on an installation of a released version (e.g. PyPI package
or conda package) also requires additional setup.

.. note::

   For an end-user, there is usually no need to run the tests on released
   versions of Matplotlib. Official releases are tested before publishing.

Install additional dependencies
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Install the :ref:`additional dependencies for testing <test-dependencies>`.

Obtain the reference images
^^^^^^^^^^^^^^^^^^^^^^^^^^^
Many tests compare the plot result against reference images. The reference
images are not part of the regular packaged versions (pip wheels or conda
packages). If you want to run tests with reference images, you need to obtain
the reference images matching the version of Matplotlib you want to test.

To do so, either download the matching source distribution
``matplotlib-X.Y.Z.tar.gz`` from `PyPI <https://pypi.org/project/matplotlib/>`_
or alternatively, clone the git repository and ``git checkout vX.Y.Z``. Copy
the folder :file:`lib/matplotlib/tests/baseline_images` to the folder
:file:`matplotlib/tests` of your the matplotlib installation to test.
The correct target folder can be found using::

    python -c "import matplotlib.tests; print(matplotlib.tests.__file__.rsplit('/', 1)[0])"

An analogous copying of :file:`lib/mpl_toolkits/tests/baseline_images`
is necessary for testing ``mpl_toolkits``.

Run the tests
^^^^^^^^^^^^^
To run the all the tests on your installed version of Matplotlib::

    python -m pytest --pyargs matplotlib.tests

The test discovery scope can be narrowed to single test modules or even single
functions::

    python -m pytest --pyargs matplotlib.tests.test_simplification.py::test_clipping

.. highlight:: bash

.. _release-guide:

=============
Release guide
=============


.. admonition::  This document is only relevant for Matplotlib release managers.

   A guide for developers who are doing a Matplotlib release.


.. note::

   This assumes that a read-only remote for the canonical repository is
   ``remote`` and a read/write remote is ``DANGER``


.. _release-testing:

Testing
=======

We use `GitHub Actions <https://github.com/matplotlib/matplotlib/actions>`__
for continuous integration.  When preparing for a release, the final tagged
commit should be tested locally before it is uploaded::

   pytest -n 8 .


In addition the following test should be run and manually inspected::

   python tools/memleak.py agg 1000 agg.pdf


In addition the following should be run and manually inspected, but
is currently broken::

   pushd examples/tests/
   python backend_driver_sgskip.py
   popd


.. _release_ghstats:

GitHub statistics
=================


We automatically extract GitHub issue, PRs, and authors from GitHub via the
API.  Copy the current :file:`doc/users/github_stats.rst` to
:file:`doc/users/prev_whats_new/github_stats_X.Y.Z.rst`, changing the link
target at the top of the file, and removing the "Previous GitHub Stats" section
at the end.

For example, when updating from v3.2.0 to v3.2.1::

  cp doc/users/github_stats.rst doc/users/prev_whats_new/github_stats_3.2.0.rst
  $EDITOR doc/users/prev_whats_new/github_stats_3.2.0.rst
  # Change contents as noted above.
  git add doc/users/prev_whats_new/github_stats_3.2.0.rst

Then re-generate the updated stats::

  python tools/github_stats.py --since-tag v3.2.0 --milestone=v3.2.1 --project 'matplotlib/matplotlib' --links > doc/users/github_stats.rst

Review and commit changes.  Some issue/PR titles may not be valid reST (the
most common issue is ``*`` which is interpreted as unclosed markup).

.. note::

   Make sure you authenticate against the GitHub API.  If you
   do not you will get blocked by GitHub for going over the API rate
   limits.  You can authenticate in one of two ways:

   * using the ``keyring`` package; ``pip install keyring`` and then when
     running the stats script, you will be prompted for user name and password,
     that will be stored in your system keyring, or,
   * using a personal access token; generate a new token `on this GitHub page
     <https://github.com/settings/tokens>`__ with the ``repo:public_repo``
     scope and place the token in :file:`~/.ghoauth`.


.. _release_chkdocs:

Update and validate the docs
============================

Merge ``*-doc`` branch
----------------------

Merge the most recent 'doc' branch (e.g., ``v3.2.0-doc``) into the branch you
are going to tag on and delete the doc branch on GitHub.

Update supported versions in Security Policy
--------------------------------------------

When making major or minor releases, update the supported versions in the
Security Policy in :file:`SECURITY.md`.  Commonly, this may be one or two
previous minor releases, but is dependent on release managers.

Update release notes
--------------------

What's new
~~~~~~~~~~

*Only needed for major and minor releases. Bugfix releases should not have new
features.*

Merge the contents of all the files in :file:`doc/users/next_whats_new/`
into a single file :file:`doc/users/prev_whats_new/whats_new_X.Y.0.rst`
and delete the individual files.

API changes
~~~~~~~~~~~

*Primarily needed for major and minor releases. We may sometimes have API
changes in bugfix releases.*

Merge the contents of all the files in :file:`doc/api/next_api_changes/`
into a single file :file:`doc/api/prev_api_changes/api_changes_X.Y.Z.rst`
and delete the individual files.

Release notes TOC
~~~~~~~~~~~~~~~~~

Update :file:`doc/users/release_notes.rst`:

- For major and minor releases add a new section

  .. code:: rst

     X.Y
     ===
     .. toctree::
         :maxdepth: 1

         prev_whats_new/whats_new_X.Y.0.rst
         ../api/prev_api_changes/api_changes_X.Y.0.rst
         prev_whats_new/github_stats_X.Y.0.rst
- For bugfix releases add the GitHub stats and (if present) the API changes to
  the existing X.Y section

  .. code:: rst

     ../api/prev_api_changes/api_changes_X.Y.Z.rst
     prev_whats_new/github_stats_X.Y.Z.rst

Update version switcher
~~~~~~~~~~~~~~~~~~~~~~~

Update ``doc/_static/switcher.json``.  If a minor release, ``X.Y.Z``, create
a new entry ``version: X.Y.(Z-1)``, and change the name of stable
``name: stable/X.Y.Z``.  If a major release, ``X.Y.0``, change the name
of ``name: devel/X.(Y+1)`` and ``name: stable/X.Y.0`` as well as adding
a new version for the previous stable.

Verify that docs build
----------------------

Finally, make sure that the docs build cleanly ::

  make -Cdoc O=-j$(nproc) html latexpdf

After the docs are built, check that all of the links, internal and external,
are still valid.  We use ``linkchecker`` for this, which has not been ported to
Python3 yet.  You will need to create a Python2 environment with
``requests==2.9.0`` and linkchecker ::

  conda create -p /tmp/lnkchk python=2 requests==2.9.0
  source activate /tmp/lnkchk
  pip install linkchecker
  pushd doc/build/html
  linkchecker index.html --check-extern
  popd

Address any issues which may arise.  The internal links are checked on Circle
CI, this should only flag failed external links.


Update supported versions in SECURITY.md
----------------------------------------

For minor version release update the table in :file:`SECURITY.md` to specify
that the 2 most recent minor releases in the current major version series are
supported.

For a major version release update the table in :file:`SECURITY.md` to specify
that the last minor version in the previous major version series is still
supported.  Dropping support for the last version of a major version series
will be handled on an ad-hoc basis.

.. _release_tag:

Create release commit and tag
=============================

To create the tag, first create an empty commit with a very terse set of the release notes
in the commit message ::

  git commit --allow-empty

and then create a signed, annotated tag with the same text in the body
message ::

  git tag -a -s v2.0.0

which will prompt you for your GPG key password and an annotation.  For pre
releases it is important to follow :pep:`440` so that the build artifacts will
sort correctly in PyPI.

To prevent issues with any down-stream builders which download the
tarball from GitHub it is important to move all branches away from the commit
with the tag [#]_::

  git commit --allow-empty

Finally, push the tag to GitHub::

  git push DANGER main v2.0.0

Congratulations, the scariest part is done!

.. [#] The tarball that is provided by GitHub is produced using `git archive`_.
       We use setuptools_scm_ which uses a format string in
       :file:`lib/matplotlib/_version.py` to have ``git`` insert a
       list of references to exported commit (see
       :file:`.gitattributes` for the configuration).  This string is
       then used by ``setuptools_scm`` to produce the correct version,
       based on the git tag, when users install from the tarball.
       However, if there is a branch pointed at the tagged commit,
       then the branch name will also be included in the tarball.
       When the branch eventually moves, anyone how checked the hash
       of the tarball before the branch moved will have an incorrect
       hash.

       To generate the file that GitHub does use ::

          git archive v2.0.0 -o matplotlib-2.0.0.tar.gz --prefix=matplotlib-2.0.0/

.. _git archive: https://git-scm.com/docs/git-archive
.. _setuptools_scm: https://github.com/pypa/setuptools_scm

If this is a final release, also create a 'doc' branch (this is not
done for pre-releases)::

   git branch v2.0.0-doc
   git push DANGER v2.0.0-doc

and if this is a major or minor release, also create a bug-fix branch (a micro
release will be cut from this branch)::

   git branch v2.0.x

On this branch un-comment the globs from :ref:`release_chkdocs`.  And then ::

   git push DANGER v2.0.x




.. _release_DOI:

Release management / DOI
========================

Via the `GitHub UI
<https://github.com/matplotlib/matplotlib/releases>`__, turn the newly
pushed tag into a release.  If this is a pre-release remember to mark
it as such.

For final releases, also get the DOI from `zenodo
<https://zenodo.org/>`__ (which will automatically produce one once
the tag is pushed).  Add the doi post-fix and version to the dictionary in
:file:`tools/cache_zenodo_svg.py` and run the script.


This will download the new svg to the :file:`_static` directory in the
docs and edit :file:`doc/citing.rst`.  Commit the new svg, the change
to :file:`tools/cache_zenodo_svg.py`, and the changes to
:file:`doc/citing.rst` to the VER-doc branch and push to GitHub. ::

  git checkout v2.0.0-doc
  $EDITOR tools/cache_zenodo_svg.py
  python tools/cache_zenodo_svg.py
  $EDITOR doc/citing.html
  git commit -a
  git push DANGER v2.0.0-doc:v2.0.0-doc

.. _release_bld_bin:

Building binaries
=================

We distribute macOS, Windows, and many Linux wheels as well as a source tarball
via PyPI.  Most builders should trigger automatically once the tag is pushed to
GitHub:

* Windows, macOS and manylinux wheels are built on GitHub Actions.  Builds are
  triggered by the GitHub Action defined in
  :file:`.github/workflows/cibuildwheel.yml`, and wheels will be available as
  artifacts of the build.
* Alternative Windows wheels are built by Christoph Gohlke automatically and
  will be `available at his site
  <https://www.lfd.uci.edu/~gohlke/pythonlibs/#matplotlib>`__ once built.
* The auto-tick bot should open a pull request into the `conda-forge feedstock
  <https://github.com/conda-forge/matplotlib-feedstock>`__.  Review and merge
  (if you have the power to).

.. warning::

   Because this is automated, it is extremely important to bump all branches
   away from the tag as discussed in :ref:`release_tag`.

If this is a final release the following downstream packagers should be contacted:

- Debian
- Fedora
- Arch
- Gentoo
- Macports
- Homebrew
- Continuum
- Enthought

This can be done ahead of collecting all of the binaries and uploading to pypi.


.. _release_upload_bin:

Make distribution and upload to PyPI
====================================

Once you have collected all of the wheels (expect this to take about a
day), generate the tarball ::

  git checkout v2.0.0
  git clean -xfd
  python setup.py sdist

and copy all of the wheels into :file:`dist` directory.  First, check
that the dist files are OK ::

  twine check dist/*

and then use ``twine`` to upload all of the files to pypi ::

   twine upload -s dist/matplotlib*tar.gz
   twine upload dist/*whl

Congratulations, you have now done the second scariest part!


.. _release_docs:

Build and deploy documentation
==============================

To build the documentation you must have the tagged version installed, but
build the docs from the ``ver-doc`` branch.  An easy way to arrange this is::

  pip install matplotlib
  pip install -r requirements/doc/doc-requirements.txt
  git checkout v2.0.0-doc
  git clean -xfd
  make -Cdoc O="-t release -j$(nproc)" html latexpdf LATEXMKOPTS="-silent -f"

which will build both the html and pdf version of the documentation.


The built documentation exists in the `matplotlib.github.com
<https://github.com/matplotlib/matplotlib.github.com/>`__ repository.
Pushing changes to main automatically updates the website.

The documentation is organized by version.  At the root of the tree is always
the documentation for the latest stable release.  Under that, there are
directories containing the documentation for older versions.  The documentation
for current main is built on Circle CI and pushed to the `devdocs
<https://github.com/matplotlib/devdocs/>`__ repository.  These are available at
`matplotlib.org/devdocs <https://matplotlib.org/devdocs/>`__.

Assuming you have this repository checked out in the same directory as
matplotlib ::

  cd ../matplotlib.github.com
  mkdir 2.0.0
  rsync -a ../matplotlib/doc/build/html/* 2.0.0
  cp ../matplotlib/doc/build/latex/Matplotlib.pdf 2.0.0

which will copy the built docs over.  If this is a final release, link the
``stable`` subdirectory to the newest version::

  rsync -a 2.0.0/* ./
  rm stable
  ln -s 2.0.0/ stable

You will need to manually edit :file:`versions.html` to show the last
3 tagged versions.  You will also need to edit :file:`sitemap.xml` to include
the newly released version.  Now commit and push everything to GitHub ::

  git add *
  git commit -a -m 'Updating docs for v2.0.0'
  git push DANGER main

Congratulations you have now done the third scariest part!

If you have access, clear the Cloudflare caches.

It typically takes about 5-10 minutes for GitHub to process the push
and update the live web page (remember to clear your browser cache).


Announcing
==========

The final step is to announce the release to the world.  A short
version of the release notes along with acknowledgments should be sent to

- matplotlib-users@python.org
- matplotlib-devel@python.org
- matplotlib-announce@python.org

For final releases announcements should also be sent to the
numpy/scipy/scikit-image mailing lists.

In addition, announcements should be made on social networks (twitter
via the ``@matplotlib`` account, any other via personal accounts).
`NumFOCUS <https://numfocus.org/>`__ should be contacted for
inclusion in their newsletter.


Conda packages
==============

The Matplotlib project itself does not release conda packages. In particular,
the Matplotlib release manager is not responsible for conda packaging.

For information on the packaging of Matplotlib for conda-forge see
https://github.com/conda-forge/matplotlib-feedstock.
.. highlight:: bash

.. _set-up-fork:

==================
 Set up your fork
==================

First you follow the instructions for :ref:`forking`.

Overview
========

::

   git clone https://github.com/your-user-name/matplotlib.git
   cd matplotlib
   git remote add upstream https://github.com/matplotlib/matplotlib.git

In detail
=========

Clone your fork
---------------

#. Clone your fork to the local computer with ``git clone
   https://github.com/your-user-name/matplotlib.git``
#. Investigate.  Change directory to your new repo: ``cd matplotlib``. Then
   ``git branch -a`` to show you all branches.  You'll get something
   like:

   .. code-block:: none

      * main
      remotes/origin/main

   This tells you that you are currently on the ``main`` branch, and
   that you also have a ``remote`` connection to ``origin/main``.
   What remote repository is ``remote/origin``? Try ``git remote -v`` to
   see the URLs for the remote.  They will point to your github fork.

   Now you want to connect to the upstream `Matplotlib github`_ repository, so
   you can merge in changes from trunk.

.. _linking-to-upstream:

Linking your repository to the upstream repo
--------------------------------------------

::

   cd matplotlib
   git remote add upstream https://github.com/matplotlib/matplotlib.git

``upstream`` here is just the arbitrary name we're using to refer to the
main `Matplotlib`_ repository at `Matplotlib github`_.

Just for your own satisfaction, show yourself that you now have a new
'remote', with ``git remote -v show``, giving you something like:

.. code-block:: none

   upstream	https://github.com/matplotlib/matplotlib.git (fetch)
   upstream	https://github.com/matplotlib/matplotlib.git (push)
   origin	https://github.com/your-user-name/matplotlib.git (fetch)
   origin	https://github.com/your-user-name/matplotlib.git (push)

.. include:: links.inc
.. highlight:: bash

.. _development-workflow:

####################
Development workflow
####################

You already have your own forked copy of the `Matplotlib`_ repository, by
following :ref:`forking`. You have :ref:`set-up-fork`. You have configured
git by following :ref:`configure-git`.  Now you are ready for some real work.

Workflow summary
================

In what follows we'll refer to the upstream Matplotlib ``main`` branch, as
"trunk".

* Don't use your ``main`` branch for anything.  Consider deleting it.
* When you are starting a new set of changes, fetch any changes from trunk,
  and start a new *feature branch* from that.
* Make a new branch for each separable set of changes |emdash| "one task, one
  branch" (`ipython git workflow`_).
* Name your branch for the purpose of the changes - e.g.
  ``bugfix-for-issue-14`` or ``refactor-database-code``.
* If you can possibly avoid it, avoid merging trunk or any other branches into
  your feature branch while you are working.
* If you do find yourself merging from trunk, consider :ref:`rebase-on-trunk`
* Ask on the `Matplotlib mailing list`_ if you get stuck.
* Ask for code review!

This way of working helps to keep work well organized, with readable history.
This in turn makes it easier for project maintainers (that might be you) to see
what you've done, and why you did it.

See `linux git workflow`_ and `ipython git workflow`_ for some explanation.

Consider deleting your main branch
==================================

It may sound strange, but deleting your own ``main`` branch can help reduce
confusion about which branch you are on.  See `deleting main on github`_ for
details.

.. _update-mirror-trunk:

Update the mirror of trunk
==========================

First make sure you have done :ref:`linking-to-upstream`.

From time to time you should fetch the upstream (trunk) changes from github::

   git fetch upstream

This will pull down any commits you don't have, and set the remote branches to
point to the right commit.  For example, 'trunk' is the branch referred to by
(remote/branchname) ``upstream/main`` - and if there have been commits since
you last checked, ``upstream/main`` will change after you do the fetch.

.. _make-feature-branch:

Make a new feature branch
=========================

When you are ready to make some changes to the code, you should start a new
branch.  Branches that are for a collection of related edits are often called
'feature branches'.

Making an new branch for each set of related changes will make it easier for
someone reviewing your branch to see what you are doing.

Choose an informative name for the branch to remind yourself and the rest of us
what the changes in the branch are for.  For example ``add-ability-to-fly``, or
``buxfix-for-issue-42``.

::

    # Update the mirror of trunk
    git fetch upstream
    # Make new feature branch starting at current trunk
    git branch my-new-feature upstream/main
    git checkout my-new-feature

Generally, you will want to keep your feature branches on your public github_
fork of `Matplotlib`_.  To do this, you `git push`_ this new branch up to your
github repo.  Generally (if you followed the instructions in these pages, and by
default), git will have a link to your github repo, called ``origin``.  You push
up to your own repo on github with::

   git push origin my-new-feature

In git >= 1.7 you can ensure that the link is correctly set by using the
``--set-upstream`` option::

   git push --set-upstream origin my-new-feature

From now on git will know that ``my-new-feature`` is related to the
``my-new-feature`` branch in the github repo.

.. _edit-flow:

The editing workflow
====================

Overview
--------

::

   # hack hack
   git add my_new_file
   git commit -am 'NF - some message'
   git push

In more detail
--------------

#. Make some changes
#. See which files have changed with ``git status`` (see `git status`_).
   You'll see a listing like this one:

   .. code-block:: none

     # On branch ny-new-feature
     # Changed but not updated:
     #   (use "git add <file>..." to update what will be committed)
     #   (use "git checkout -- <file>..." to discard changes in working directory)
     #
     #	modified:   README
     #
     # Untracked files:
     #   (use "git add <file>..." to include in what will be committed)
     #
     #	INSTALL
     no changes added to commit (use "git add" and/or "git commit -a")

#. Check what the actual changes are with ``git diff`` (`git diff`_).
#. Add any new files to version control ``git add new_file_name`` (see
   `git add`_).
#. To commit all modified files into the local copy of your repo,, do
   ``git commit -am 'A commit message'``.  Note the ``-am`` options to
   ``commit``. The ``m`` flag just signals that you're going to type a
   message on the command line.  The ``a`` flag |emdash| you can just take on
   faith |emdash| or see `why the -a flag?`_ |emdash| and the helpful use-case
   description in the `tangled working copy problem`_. The `git commit`_ manual
   page might also be useful.
#. To push the changes up to your forked repo on github, do a ``git
   push`` (see `git push`_).

Ask for your changes to be reviewed or merged
=============================================

When you are ready to ask for someone to review your code and consider a merge:

#. Go to the URL of your forked repo, say
   ``https://github.com/your-user-name/matplotlib``.
#. Use the 'Switch Branches' dropdown menu near the top left of the page to
   select the branch with your changes:

   .. image:: branch_dropdown.png

#. Click on the 'Pull request' button:

   .. image:: pull_button.png

   Enter a title for the set of changes, and some explanation of what you've
   done.  Say if there is anything you'd like particular attention for - like a
   complicated change or some code you are not happy with.

   If you don't think your request is ready to be merged, just say so in your
   pull request message.  This is still a good way of getting some preliminary
   code review.

Some other things you might want to do
======================================

Delete a branch on github
-------------------------

::

   git checkout main
   # delete branch locally
   git branch -D my-unwanted-branch
   # delete branch on github
   git push origin :my-unwanted-branch

Note the colon ``:`` before ``my-unwanted-branch``.  See also:
https://help.github.com/articles/pushing-to-a-remote/#deleting-a-remote-branch-or-tag

Several people sharing a single repository
------------------------------------------

If you want to work on some stuff with other people, where you are all
committing into the same repository, or even the same branch, then just
share it via github.

First fork Matplotlib into your account, as from :ref:`forking`.

Then, go to your forked repository github page, say
``https://github.com/your-user-name/matplotlib``

Click on the 'Admin' button, and add anyone else to the repo as a
collaborator:

   .. image:: pull_button.png

Now all those people can do::

    git clone https://github.com/your-user-name/matplotlib.git

Remember that links starting with ``https`` or ``git@`` are read-write, and that
``git@`` uses the ssh protocol.

Your collaborators can then commit directly into that repo with the
usual::

     git commit -am 'ENH - much better code'
     git push origin main # pushes directly into your repo

Explore your repository
-----------------------

To see a graphical representation of the repository branches and
commits::

   gitk --all

To see a linear list of commits for this branch::

   git log

You can also look at the `network graph visualizer`_ for your github
repo.

Finally the :ref:`fancy-log` ``lg`` alias will give you a reasonable text-based
graph of the repository.

.. _rebase-on-trunk:

Rebasing on trunk
-----------------

Let's say you thought of some work you'd like to do. You
:ref:`update-mirror-trunk` and :ref:`make-feature-branch` called
``cool-feature``. At this stage trunk is at some commit, let's call it E. Now
you make some new commits on your ``cool-feature`` branch, let's call them A, B,
C.  Maybe your changes take a while, or you come back to them after a while.  In
the meantime, trunk has progressed from commit E to commit (say) G:

.. code-block:: none

          A---B---C cool-feature
         /
    D---E---F---G trunk

At this stage you consider merging trunk into your feature branch, and you
remember that this here page sternly advises you not to do that, because the
history will get messy. Most of the time you can just ask for a review, and not
worry that trunk has got a little ahead.  But sometimes, the changes in trunk
might affect your changes, and you need to harmonize them.  In this situation
you may prefer to do a rebase.

rebase takes your changes (A, B, C) and replays them as if they had been made to
the current state of ``trunk``.  In other words, in this case, it takes the
changes represented by A, B, C and replays them on top of G. After the rebase,
your history will look like this:

.. code-block:: none

                  A'--B'--C' cool-feature
                 /
    D---E---F---G trunk

See `rebase without tears`_ for more detail.

To do a rebase on trunk::

    # Update the mirror of trunk
    git fetch upstream
    # go to the feature branch
    git checkout cool-feature
    # make a backup in case you mess up
    git branch tmp cool-feature
    # rebase cool-feature onto trunk
    git rebase --onto upstream/main upstream/main cool-feature

In this situation, where you are already on branch ``cool-feature``, the last
command can be written more succinctly as::

    git rebase upstream/main

When all looks good you can delete your backup branch::

   git branch -D tmp

If it doesn't look good you may need to have a look at
:ref:`recovering-from-mess-up`.

If you have made changes to files that have also changed in trunk, this may
generate merge conflicts that you need to resolve - see the `git rebase`_ man
page for some instructions at the end of the "Description" section. There is
some related help on merging in the git user manual - see `resolving a merge`_.

.. _recovering-from-mess-up:

Recovering from mess-ups
------------------------

Sometimes, you mess up merges or rebases. Luckily, in git it is
relatively straightforward to recover from such mistakes.

If you mess up during a rebase::

   git rebase --abort

If you notice you messed up after the rebase::

   # reset branch back to the saved point
   git reset --hard tmp

If you forgot to make a backup branch::

   # look at the reflog of the branch
   git reflog show cool-feature

   8630830 cool-feature@{0}: commit: BUG: io: close file handles immediately
   278dd2a cool-feature@{1}: rebase finished: refs/heads/my-feature-branch onto 11ee694744f2552d
   26aa21a cool-feature@{2}: commit: BUG: lib: make seek_gzip_factory not leak gzip obj
   ...

   # reset the branch to where it was before the botched rebase
   git reset --hard cool-feature@{2}

.. _rewriting-commit-history:

Rewriting commit history
------------------------

.. note::

   Do this only for your own feature branches.

There's an embarrassing typo in a commit you made? Or perhaps the you
made several false starts you would like the posterity not to see.

This can be done via *interactive rebasing*.

Suppose that the commit history looks like this::

    git log --oneline
    eadc391 Fix some remaining bugs
    a815645 Modify it so that it works
    2dec1ac Fix a few bugs + disable
    13d7934 First implementation
    6ad92e5 * masked is now an instance of a new object, MaskedConstant
    29001ed Add pre-nep for a copule of structured_array_extensions.
    ...

and ``6ad92e5`` is the last commit in the ``cool-feature`` branch. Suppose we
want to make the following changes:

* Rewrite the commit message for ``13d7934`` to something more sensible.
* Combine the commits ``2dec1ac``, ``a815645``, ``eadc391`` into a single one.

We do as follows::

    # make a backup of the current state
    git branch tmp HEAD
    # interactive rebase
    git rebase -i 6ad92e5

This will open an editor with the following text in it::

    pick 13d7934 First implementation
    pick 2dec1ac Fix a few bugs + disable
    pick a815645 Modify it so that it works
    pick eadc391 Fix some remaining bugs

    # Rebase 6ad92e5..eadc391 onto 6ad92e5
    #
    # Commands:
    #  p, pick = use commit
    #  r, reword = use commit, but edit the commit message
    #  e, edit = use commit, but stop for amending
    #  s, squash = use commit, but meld into previous commit
    #  f, fixup = like "squash", but discard this commit's log message
    #
    # If you remove a line here THAT COMMIT WILL BE LOST.
    # However, if you remove everything, the rebase will be aborted.
    #

To achieve what we want, we will make the following changes to it::

    r 13d7934 First implementation
    pick 2dec1ac Fix a few bugs + disable
    f a815645 Modify it so that it works
    f eadc391 Fix some remaining bugs

This means that (i) we want to edit the commit message for
``13d7934``, and (ii) collapse the last three commits into one. Now we
save and quit the editor.

Git will then immediately bring up an editor for editing the commit
message. After revising it, we get the output::

    [detached HEAD 721fc64] FOO: First implementation
     2 files changed, 199 insertions(+), 66 deletions(-)
    [detached HEAD 0f22701] Fix a few bugs + disable
     1 files changed, 79 insertions(+), 61 deletions(-)
    Successfully rebased and updated refs/heads/my-feature-branch.

and the history looks now like this::

     0f22701 Fix a few bugs + disable
     721fc64 ENH: Sophisticated feature
     6ad92e5 * masked is now an instance of a new object, MaskedConstant

If it went wrong, recovery is again possible as explained :ref:`above
<recovering-from-mess-up>`.

.. include:: links.inc
.. highlight:: bash

.. _forking:

======================================================
Making your own copy (fork) of Matplotlib
======================================================

You need to do this only once.  The instructions here are very similar
to the instructions at https://help.github.com/forking/ |emdash| please see
that page for more detail.  We're repeating some of it here just to give the
specifics for the `Matplotlib`_ project, and to suggest some default names.

Set up and configure a github account
=====================================

If you don't have a github account, go to the github page, and make one.

You then need to configure your account to allow write access |emdash| see
the ``Generating SSH keys`` help on `github help`_.

Create your own forked copy of `Matplotlib`_
======================================================

#. Log into your github account.
#. Go to the `Matplotlib`_ github home at `Matplotlib github`_.
#. Click on the *fork* button:

   .. image:: forking_button.png

   Now, after a short pause, you should find yourself at the home page for
   your own forked copy of `Matplotlib`_.

.. include:: links.inc
.. highlight:: bash

.. _configure-git:

===============
 Configure git
===============

.. _git-config-basic:

Overview
========

Your personal git configurations are saved in the ``.gitconfig`` file in
your home directory.

Here is an example ``.gitconfig`` file:

.. code-block:: none

  [user]
          name = Your Name
          email = you@yourdomain.example.com

  [alias]
          ci = commit -a
          co = checkout
          st = status
          stat = status
          br = branch
          wdiff = diff --color-words

  [core]
          editor = vim

  [merge]
          summary = true

You can check what is already in your config file using the ``git config --list`` command.  You can edit the ``.gitconfig`` file directly or you can use the ``git config --global``
command.::

  git config --global user.name "Your Name"
  git config --global user.email you@yourdomain.example.com
  git config --global alias.ci "commit -a"
  git config --global alias.co checkout
  git config --global alias.st "status -a"
  git config --global alias.stat "status -a"
  git config --global alias.br branch
  git config --global alias.wdiff "diff --color-words"
  git config --global core.editor vim
  git config --global merge.summary true

To set up on another computer, you can copy your ``~/.gitconfig`` file,
or run the commands above.

In detail
=========

user.name and user.email
------------------------

It is good practice to tell git_ who you are, for labeling any changes
you make to the code.  The simplest way to do this is from the command
line::

  git config --global user.name "Your Name"
  git config --global user.email you@yourdomain.example.com

This will write the settings into your git configuration file,  which
should now contain a user section with your name and email:

.. code-block:: none

  [user]
        name = Your Name
        email = you@yourdomain.example.com

You'll need to replace ``Your Name`` and ``you@yourdomain.example.com``
with your actual name and email address.

Aliases
-------

You might well benefit from some aliases to common commands.

For example, you might well want to be able to shorten ``git checkout``
to ``git co``.  Or you may want to alias ``git diff --color-words``
(which gives a nicely formatted output of the diff) to ``git wdiff``

The following ``git config --global`` commands::

  git config --global alias.ci "commit -a"
  git config --global alias.co checkout
  git config --global alias.st "status -a"
  git config --global alias.stat "status -a"
  git config --global alias.br branch
  git config --global alias.wdiff "diff --color-words"

will create an ``alias`` section in your ``.gitconfig`` file with contents
like this:

.. code-block:: none

  [alias]
          ci = commit -a
          co = checkout
          st = status -a
          stat = status -a
          br = branch
          wdiff = diff --color-words

Editor
------

You may also want to make sure that your editor of choice is used ::

  git config --global core.editor vim

Merging
-------

To enforce summaries when doing merges (``~/.gitconfig`` file again):

.. code-block:: none

   [merge]
      log = true

Or from the command line::

  git config --global merge.log true

.. _fancy-log:

Fancy log output
----------------

This is a very nice alias to get a fancy log output; it should go in the
``alias`` section of your ``.gitconfig`` file:

.. code-block:: none

    lg = log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)[%an]%Creset' --abbrev-commit --date=relative

You use the alias with::

    git lg

and it gives graph / text output something like this (but with color!):

.. code-block:: none

    * 6d8e1ee - (HEAD, origin/my-fancy-feature, my-fancy-feature) NF - a fancy file (45 minutes ago) [Matthew Brett]
    *   d304a73 - (origin/placeholder, placeholder) Merge pull request #48 from hhuuggoo/master (2 weeks ago) [Jonathan Terhorst]
    |\  
    | * 4aff2a8 - fixed bug 35, and added a test in test_bugfixes (2 weeks ago) [Hugo]
    |/  
    * a7ff2e5 - Added notes on discussion/proposal made during Data Array Summit. (2 weeks ago) [Corran Webster]
    * 68f6752 - Initial implementation of AxisIndexer - uses 'index_by' which needs to be changed to a call on an Axes object - this is all very sketchy right now. (2 weeks ago) [Corr
    *   376adbd - Merge pull request #46 from terhorst/master (2 weeks ago) [Jonathan Terhorst]
    |\  
    | * b605216 - updated joshu example to current api (3 weeks ago) [Jonathan Terhorst]
    | * 2e991e8 - add testing for outer ufunc (3 weeks ago) [Jonathan Terhorst]
    | * 7beda5a - prevent axis from throwing an exception if testing equality with non-axis object (3 weeks ago) [Jonathan Terhorst]
    | * 65af65e - convert unit testing code to assertions (3 weeks ago) [Jonathan Terhorst]
    | *   956fbab - Merge remote-tracking branch 'upstream/master' (3 weeks ago) [Jonathan Terhorst]
    | |\  
    | |/

Thanks to Yury V. Zaytsev for posting it.

.. include:: links.inc
.. highlight:: bash

.. _install-git:

=============
 Install git
=============

Overview
========

================ =============
Debian / Ubuntu  ``sudo apt-get install git``
Fedora           ``sudo yum install git``
Windows          Download and install msysGit_
OS X             Use the git-osx-installer_
================ =============

In detail
=========

See the git page for the most recent information.

Have a look at the github install help pages available from `github help`_

There are good instructions here: https://git-scm.com/book/en/v2/Getting-Started-Installing-Git

.. include:: links.inc
.. highlight:: bash

.. _maintainer-workflow:

###################
Maintainer workflow
###################

This page is for maintainers |emdash| those of us who merge our own or other
peoples' changes into the upstream repository.

Being as how you're a maintainer, you are completely on top of the basic stuff
in :ref:`development-workflow`.

The instructions in :ref:`linking-to-upstream` add a remote that has read-only
access to the upstream repo.  Being a maintainer, you've got read-write access.

It's good to have your upstream remote have a scary name, to remind you that
it's a read-write remote::

    git remote add upstream-rw git@github.com:matplotlib/matplotlib.git
    git fetch upstream-rw

*******************
Integrating changes
*******************

Let's say you have some changes that need to go into trunk
(``upstream-rw/main``).

The changes are in some branch that you are currently on.  For example, you are
looking at someone's changes like this::

    git remote add someone https://github.com/someone/matplotlib.git
    git fetch someone
    git branch cool-feature --track someone/cool-feature
    git checkout cool-feature

So now you are on the branch with the changes to be incorporated upstream.  The
rest of this section assumes you are on this branch.

A few commits
=============

If there are only a few commits, consider rebasing to upstream::

    # Fetch upstream changes
    git fetch upstream-rw
    # rebase
    git rebase upstream-rw/main

Remember that, if you do a rebase, and push that, you'll have to close any
github pull requests manually, because github will not be able to detect the
changes have already been merged.

A long series of commits
========================

If there are a longer series of related commits, consider a merge instead::

    git fetch upstream-rw
    git merge --no-ff upstream-rw/main

The merge will be detected by github, and should close any related pull requests
automatically.

Note the ``--no-ff`` above.  This forces git to make a merge commit, rather than
doing a fast-forward, so that these set of commits branch off trunk then rejoin
the main history with a merge, rather than appearing to have been made directly
on top of trunk.

Check the history
=================

Now, in either case, you should check that the history is sensible and you have
the right commits::

    git log --oneline --graph
    git log -p upstream-rw/main..

The first line above just shows the history in a compact way, with a text
representation of the history graph. The second line shows the log of commits
excluding those that can be reached from trunk (``upstream-rw/main``), and
including those that can be reached from current HEAD (implied with the ``..``
at the end). So, it shows the commits unique to this branch compared to trunk.
The ``-p`` option shows the diff for these commits in patch form.

Push to trunk
=============

::

    git push upstream-rw my-new-feature:main

This pushes the ``my-new-feature`` branch in this repository to the ``main``
branch in the ``upstream-rw`` repository.

.. include:: links.inc
.. _git-development:

=====================
 Git for development
=====================

Contents:

.. toctree::
   :maxdepth: 2

   forking_hell
   set_up_fork
   configure_git
   development_workflow
   maintainer_workflow
.. _using-git:

Working with *Matplotlib* source code
================================================

Contents:

.. toctree::
   :maxdepth: 2

   git_intro
   git_install
   following_latest
   patching
   git_development
   git_resources
   dot2_dot3


.. _dot2-dot3:

========================================
 Two and three dots in difference specs
========================================

Thanks to Yarik Halchenko for this explanation.

Imagine a series of commits A, B, C, D...  Imagine that there are two
branches, *topic* and *main*.  You branched *topic* off *main* when
*main* was at commit 'E'.  The graph of the commits looks like this::


        A---B---C topic
        /
   D---E---F---G main

Then::

   git diff main..topic

will output the difference from G to C (i.e. with effects of F and G),
while::

   git diff main...topic

would output just differences in the topic branch (i.e. only A, B, and
C).
.. highlight:: bash

================
 Making a patch
================

You've discovered a bug or something else you want to change
in `Matplotlib`_ .. |emdash| excellent!

You've worked out a way to fix it |emdash| even better!

You want to tell us about it |emdash| best of all!

The easiest way is to make a *patch* or set of patches.  Here
we explain how.  Making a patch is the simplest and quickest,
but if you're going to be doing anything more than simple
quick things, please consider following the
:ref:`git-development` model instead.

.. _making-patches:

Making patches
==============

Overview
--------

::

   # tell git who you are
   git config --global user.email you@yourdomain.example.com
   git config --global user.name "Your Name Comes Here"
   # get the repository if you don't have it
   git clone https://github.com/matplotlib/matplotlib.git
   # make a branch for your patching
   cd matplotlib
   git branch the-fix-im-thinking-of
   git checkout the-fix-im-thinking-of
   # hack, hack, hack
   # Tell git about any new files you've made
   git add somewhere/tests/test_my_bug.py
   # commit work in progress as you go
   git commit -am 'BF - added tests for Funny bug'
   # hack hack, hack
   git commit -am 'BF - added fix for Funny bug'
   # make the patch files
   git format-patch -M -C main

Then, send the generated patch files to the `Matplotlib
mailing list`_ |emdash| where we will thank you warmly.

In detail
---------

#. Tell git who you are so it can label the commits you've
   made::

      git config --global user.email you@yourdomain.example.com
      git config --global user.name "Your Name Comes Here"

#. If you don't already have one, clone a copy of the
   `Matplotlib`_ repository::

      git clone https://github.com/matplotlib/matplotlib.git
      cd matplotlib

#. Make a 'feature branch'.  This will be where you work on
   your bug fix.  It's nice and safe and leaves you with
   access to an unmodified copy of the code in the main
   branch::

      git branch the-fix-im-thinking-of
      git checkout the-fix-im-thinking-of

#. Do some edits, and commit them as you go::

      # hack, hack, hack
      # Tell git about any new files you've made
      git add somewhere/tests/test_my_bug.py
      # commit work in progress as you go
      git commit -am 'BF - added tests for Funny bug'
      # hack hack, hack
      git commit -am 'BF - added fix for Funny bug'

   Note the ``-am`` options to ``commit``. The ``m`` flag just
   signals that you're going to type a message on the command
   line.  The ``a`` flag |emdash| you can just take on faith |emdash|
   or see `why the -a flag?`_.

#. When you have finished, check you have committed all your
   changes::

      git status

#. Finally, make your commits into patches.  You want all the
   commits since you branched from the ``main`` branch::

      git format-patch -M -C main

   You will now have several files named for the commits:

   .. code-block:: none

      0001-BF-added-tests-for-Funny-bug.patch
      0002-BF-added-fix-for-Funny-bug.patch

   Send these files to the `Matplotlib mailing list`_.

When you are done, to switch back to the main copy of the
code, just return to the ``main`` branch::

   git checkout main

Moving from patching to development
===================================

If you find you have done some patches, and you have one or
more feature branches, you will probably want to switch to
development mode.  You can do this with the repository you
have.

Fork the `Matplotlib`_ repository on github |emdash| :ref:`forking`.
Then::

   # checkout and refresh main branch from main repo
   git checkout main
   git pull origin main
   # rename pointer to main repository to 'upstream'
   git remote rename origin upstream
   # point your repo to default read / write to your fork on github
   git remote add origin git@github.com:your-user-name/matplotlib.git
   # push up any branches you've made and want to keep
   git push origin the-fix-im-thinking-of

Then you can, if you want, follow the
:ref:`development-workflow`.

.. include:: links.inc
.. highlight:: bash

.. _git-resources:

=============
git resources
=============

Tutorials and summaries
=======================

* `github help`_ has an excellent series of how-to guides.
* The `pro git book`_ is a good in-depth book on git.
* A `git cheat sheet`_ is a page giving summaries of common commands.
* The `git user manual`_
* The `git tutorial`_
* The `git community book`_
* `git ready`_ |emdash| a nice series of tutorials
* `git magic`_ |emdash| extended introduction with intermediate detail
* The `git parable`_ is an easy read explaining the concepts behind git.
* `git foundation`_ expands on the `git parable`_.
* Fernando Perez' git page |emdash| `Fernando's git page`_ |emdash| many
  links and tips
* A good but technical page on `git concepts`_
* `git svn crash course`_: git for those of us used to subversion_

Advanced git workflow
=====================

There are many ways of working with git; here are some posts on the
rules of thumb that other projects have come up with:

* Linus Torvalds on `git management`_
* Linus Torvalds on `linux git workflow`_ .  Summary; use the git tools
  to make the history of your edits as clean as possible; merge from
  upstream edits as little as possible in branches where you are doing
  active development.

Manual pages online
===================

You can get these on your own machine with (e.g) ``git help push`` or
(same thing) ``git push --help``, but, for convenience, here are the
online manual pages for some common commands:

* `git add`_
* `git branch`_
* `git checkout`_
* `git clone`_
* `git commit`_
* `git config`_
* `git diff`_
* `git log`_
* `git pull`_
* `git push`_
* `git remote`_
* `git status`_

.. include:: links.inc
.. highlight:: bash

.. _following-latest:

=============================
 Following the latest source
=============================

These are the instructions if you just want to follow the latest
*Matplotlib* source, but you don't need to do any development for now.

The steps are:

* :ref:`install-git`
* get local copy of the `Matplotlib github`_ git repository
* update local copy from time to time

Get the local copy of the code
==============================

From the command line::

   git clone https://github.com/matplotlib/matplotlib.git

You now have a copy of the code tree in the new ``matplotlib`` directory.

Updating the code
=================

From time to time you may want to pull down the latest code.  Do this with::

   cd matplotlib
   git pull

The tree in ``matplotlib`` will now have the latest changes from the initial
repository.

.. include:: links.inc
.. highlight:: bash

==============
 Introduction
==============

These pages describe a git_ and github_ workflow for the `Matplotlib`_
project.

There are several different workflows here, for different ways of
working with *Matplotlib*.

This is not a comprehensive git reference, it's just a workflow for our
own project.  It's tailored to the github hosting service. You may well
find better or quicker ways of getting stuff done with git, but these
should get you started.

For general resources for learning git, see :ref:`git-resources`.

.. include:: links.inc
=================================
 MEP11: Third-party dependencies
=================================

.. contents::
   :local:

This MEP attempts to improve the way in which third-party dependencies
in matplotlib are handled.

Status
======

**Completed** -- needs to be merged

Branches and Pull requests
==========================

#1157: Use automatic dependency resolution

#1290: Debundle pyparsing

#1261: Update six to 1.2

Abstract
========

One of the goals of matplotlib has been to keep it as easy to install
as possible.  To that end, some third-party dependencies are included
in the source tree and, under certain circumstances, installed
alongside matplotlib.  This MEP aims to resolve some problems with
that approach, bring some consistency, while continuing to make
installation convenient.

At the time that was initially done, setuptools_, easy_install_ and
PyPI_ were not mature enough to be relied on.  However, at present,
we should be able to safely leverage the "modern" versions of those
tools, distribute_ and pip_.

While matplotlib has dependencies on both Python libraries and C/C++
libraries, this MEP addresses only the Python libraries so as to not
confuse the issue.  C libraries represent a larger and mostly
orthogonal set of problems.

Detailed description
====================

matplotlib depends on the following third-party Python libraries:

   - Numpy
   - dateutil (pure Python)
   - pytz (pure Python)
   - six -- required by dateutil (pure Python)
   - pyparsing (pure Python)
   - PIL (optional)
   - GUI frameworks: pygtk, gobject, tkinter, PySide, PyQt4, wx (all
     optional, but one is required for an interactive GUI)

Current behavior
----------------

When installing from source, a :program:`git` checkout or pip_:

  - :file:`setup.py` attempts to ``import numpy``.  If this fails, the
    installation fails.

  - For each of dateutil_, pytz_ and six_, :file:`setup.py` attempts to
    import them (from the top-level namespace).  If that fails,
    matplotlib installs its local copy of the library into the
    top-level namespace.

  - pyparsing_ is always installed inside of the matplotlib
    namespace.

This behavior is most surprising when used with pip_, because no
pip_ dependency resolution is performed, even though it is likely to
work for all of these packages.

The fact that pyparsing_ is installed in the matplotlib namespace has
reportedly (#1290) confused some users into thinking it is a
matplotlib-related module and import it from there rather than the
top-level.

When installing using the Windows installer, dateutil_, pytz_ and
six_ are installed at the top-level *always*, potentially overwriting
already installed copies of those libraries.

TODO: Describe behavior with the OS-X installer.

When installing using a package manager (Debian, RedHat, MacPorts
etc.), this behavior actually does the right thing, and there are no
special patches in the matplotlib packages to deal with the fact that
we handle dateutil_, pytz_ and six_ in this way.  However, care
should be taken that whatever approach we move to continues to work in
that context.

Maintaining these packages in the matplotlib tree and making sure they
are up-to-date is a maintenance burden.  Advanced new features that
may require a third-party pure Python library have a higher barrier to
inclusion because of this burden.


Desired behavior
----------------

Third-party dependencies are downloaded and installed from their
canonical locations by leveraging pip_, distribute_ and PyPI_.

dateutil_, pytz_, and pyparsing_ should be made into optional
dependencies -- though obviously some features would fail if they
aren't installed.  This will allow the user to decide whether they
want to bother installing a particular feature.

Implementation
==============

For installing from source, and assuming the user has all of the
C-level compilers and dependencies, this can be accomplished fairly
easily using distribute_ and following the instructions `here
<https://pypi.org/project/distribute/>`_.  The only anticipated
change to the matplotlib library code will be to import pyparsing_
from the top-level namespace rather than from within matplotlib.  Note
that distribute_ will also allow us to remove the direct dependency
on six_, since it is, strictly speaking, only a direct dependency of
dateutil_.

For binary installations, there are a number of alternatives (here
ordered from best/hardest to worst/easiest):

1. The distutils wininst installer allows a post-install script to
   run.  It might be possible to get this script to run pip_ to
   install the other dependencies.  (See `this thread
   <http://grokbase.com/t/python/distutils-sig/109bdnfhp4/distutils-ann-setuptools-post-install-script-for-bdist-wininst>`_
   for someone who has trod that ground before).

2. Continue to ship dateutil_, pytz_, six_ and pyparsing_ in
   our installer, but use the post-install-script to install them
   *only* if they can not already be found.

3. Move all of these packages inside a (new) ``matplotlib.extern``
   namespace so it is clear for outside users that these are
   external packages.  Add some conditional imports in the core
   matplotlib codebase so dateutil_ (at the top-level) is tried
   first, and failing that ``matplotlib.extern.dateutil`` is used.

2 and 3 are undesirable as they still require maintaining copies of
these packages in our tree -- and this is exacerbated by the fact that
they are used less -- only in the binary installers.  None of these 3
approaches address Numpy, which will still have to be manually
installed using an installer.

TODO: How does this relate to the Mac OS-X installer?

Backward compatibility
======================

At present, matplotlib can be installed from source on a machine
without the third party dependencies and without an internet
connection.  After this change, an internet connection (and a working
PyPI) will be required to install matplotlib for the first time.
(Subsequent matplotlib updates or development work will run without
accessing the network).

Alternatives
============

Distributing binary eggs doesn't feel like a usable solution.  That
requires getting easy_install_ installed first, and Windows users
generally prefer the well known ``.exe`` or ``.msi`` installer that works
out of the box.

.. _PyPI: https://pypi.org
.. _dateutil: https://pypi.org/project/python-dateutil/
.. _distribute: https://pypi.org/project/distribute/
.. _pip: https://pypi.org/project/pip/
.. _pyparsing: https://pypi.org/project/pyparsing/
.. _pytz: https://pypi.org/project/pytz/
.. _setuptools: https://pypi.org/project/setuptools/
.. _six: https://pypi.org/project/six/
.. _easy_install: https://setuptools.readthedocs.io/en/latest/easy_install.html
=================================
MEP13: Use properties for Artists
=================================

.. contents::
   :local:

Status
======

- **Discussion**

Branches and Pull requests
==========================

None

Abstract
========

Wrap all of the matplotlib getter and setter methods with python
`properties
<https://docs.python.org/3/library/functions.html#property>`_, allowing
them to be read and written like class attributes.

Detailed description
====================

Currently matplotlib uses getter and setter functions (usually
prefixed with get\_ and set\_, respectively) for reading and writing
data related to classes.  However, since 2.6 python supports
properties, which allow such setter and getter functions to be
accessed as though they were attributes.  This proposal would
implement all existing setter and getter methods as properties.

Implementation
==============

1. All existing getter and setter methods will need to have two
   aliases, one with the get\_ or set\_ prefix and one without.
   Getter methods that currently lack prefixes should be recording in
   a text file.
2. Classes should be reorganized so setter and getter methods are
   sequential in the code, with getter methods first.
3. Getter and setter methods the provide additional optional optional
   arguments should have those arguments accessible in another manner,
   either as additional getter or setter methods or attributes of
   other classes.  If those classes are not accessible, getters for
   them should be added.
4. Property decorators will be added to the setter and getter methods
   without the prefix.  Those with the prefix will be marked as
   deprecated.
5. Docstrings will need to be rewritten so the getter with the prefix
   has the current docstring and the getter without the prefix has a
   generic docstring appropriate for an attribute.
6. Automatic alias generation will need to be modified so it will also
   create aliases for the properties.
7. All instances of getter and setter method calls will need to be
   changed to attribute access.
8. All setter and getter aliases with prefixes will be removed

The following steps can be done simultaneously: 1, 2, and 3; 4 and 5;
6 and 7.

Only the following steps must be done in the same release: 4, 5,
and 6.  All other changes can be done in separate releases.  8 should
be done several major releases after everything else.

Backward compatibility
======================

All existing getter methods that do not have a prefix (such as get\_)
will need to be changed from function calls to attribute access.  In
most cases this will only require removing the parenthesis.

setter and getter methods that have additional optional arguments will
need to have those arguments implemented in another way, either as a
separate property in the same class or as attributes or properties of
another class.

Cases where the setter returns a value will need to be changed to
using the setter followed by the getter.

Cases where there are set_ATTR_on() and set_ATTR_off() methods will be
changed to ATTR_on properties.

Examples
========

axes.Axes.set_axis_off/set_axis_on
----------------------------------

Current implementation: ::

   axes.Axes.set_axis_off()
   axes.Axes.set_axis_on()

New implementation: ::

   True = axes.Axes.axis_on
   False = axes.Axes.axis_on
   axes.Axes.axis_on = True
   axes.Axes.axis_on = False

axes.Axes.get_xlim/set_xlim and get_autoscalex_on/set_autoscalex_on
-------------------------------------------------------------------

Current implementation: ::

    [left, right] = axes.Axes.get_xlim()
    auto = axes.Axes.get_autoscalex_on()

    [left, right] = axes.Axes.set_xlim(left=left, right=right, emit=emit, auto=auto)
    [left, right] = axes.Axes.set_xlim(left=left, right=None, emit=emit, auto=auto)
    [left, right] = axes.Axes.set_xlim(left=None, right=right, emit=emit, auto=auto)
    [left, right] = axes.Axes.set_xlim(left=left, emit=emit, auto=auto)
    [left, right] = axes.Axes.set_xlim(right=right, emit=emit, auto=auto)

    axes.Axes.set_autoscalex_on(auto)

New implementation: ::

    [left, right] = axes.Axes.axes_xlim
    auto = axes.Axes.autoscalex_on

    axes.Axes.axes_xlim = [left, right]
    axes.Axes.axes_xlim = [left, None]
    axes.Axes.axes_xlim = [None, right]
    axes.Axes.axes_xlim[0] = left
    axes.Axes.axes_xlim[1] = right

    axes.Axes.autoscalex_on = auto

    axes.Axes.emit_xlim = emit

axes.Axes.get_title/set_title
-----------------------------

Current implementation: ::

    string = axes.Axes.get_title()
    axes.Axes.set_title(string, fontdict=fontdict, **kwargs)

New implementation: ::

    string = axes.Axes.title
    string = axes.Axes.title_text.text

    text.Text = axes.Axes.title_text
    text.Text.<attribute> = attribute
    text.Text.fontdict = fontdict

    axes.Axes.title = string
    axes.Axes.title = text.Text
    axes.Axes.title_text = string
    axes.Axes.title_text = text.Text

axes.Axes.get_xticklabels/set_xticklabels
-----------------------------------------

Current implementation: ::

   [text.Text] = axes.Axes.get_xticklabels()
   [text.Text] = axes.Axes.get_xticklabels(minor=False)
   [text.Text] = axes.Axes.get_xticklabels(minor=True)
   [text.Text] = axes.Axes.([string], fontdict=None, **kwargs)
   [text.Text] = axes.Axes.([string], fontdict=None, minor=False, **kwargs)
   [text.Text] = axes.Axes.([string], fontdict=None, minor=True, **kwargs)

New implementation: ::

   [text.Text] = axes.Axes.xticklabels
   [text.Text] = axes.Axes.xminorticklabels
   axes.Axes.xticklabels = [string]
   axes.Axes.xminorticklabels = [string]
   axes.Axes.xticklabels = [text.Text]
   axes.Axes.xminorticklabels = [text.Text]

Alternatives
============

Instead of using decorators, it is also possible to use the property
function.  This would change the procedure so that all getter methods
that lack a prefix will need to be renamed or removed.  This makes
handling docstrings more difficult and harder to read.

It is not necessary to deprecate the setter and getter methods, but
leaving them in will complicate the code.

This could also serve as an opportunity to rewrite or even remove
automatic alias generation.

Another alternate proposal:

Convert ``set_xlim``, ``set_xlabel``, ``set_title``, etc. to ``xlim``,
``xlabel``, ``title``,... to make the transition from ``plt``
functions to ``axes`` methods significantly simpler. These would still
be methods, not properties, but it's still a great usability
enhancement while retaining the interface.
==============================
 MEP10: Docstring consistency
==============================
.. contents::
   :local:

Status
======

**Progress**

This is still an on-going effort

Branches and Pull requests
==========================


Abstract
========

matplotlib has a great deal of inconsistency between docstrings.  This
not only makes the docs harder to read, but it is harder on
contributors, because they don't know which specifications to follow.
There should be a clear docstring convention that is followed
consistently.

The organization of the API documentation is difficult to follow.
Some pages, such as pyplot and axes, are enormous and hard to browse.
There should instead be short summary tables that link to detailed
documentation.  In addition, some of the docstrings themselves are
quite long and contain redundant information.

Building the documentation takes a long time and uses a :file:`make.py`
script rather than a Makefile.

Detailed description
====================

There are number of new tools and conventions available since
matplotlib started using Sphinx that make life easier.  The following
is a list of proposed changes to docstrings, most of which involve
these new features.

Numpy docstring format
----------------------

`Numpy docstring format
<https://github.com/numpy/numpy/blob/master/doc/HOWTO_DOCUMENT.rst.txt>`_:
This format divides the docstring into clear sections, each having
different parsing rules that make the docstring easy to read both as
raw text and as HTML.  We could consider alternatives, or invent our
own, but this is a strong choice, as it's well used and understood in
the Numpy/Scipy community.

Cross references
----------------

Most of the docstrings in matplotlib use explicit "roles" when linking
to other items, for example: ``:func:`myfunction```.  As of Sphinx
0.4, there is a "default_role" that can be set to "obj", which will
polymorphically link to a Python object of any type.  This allows one
to write ```myfunction``` instead.  This makes docstrings much easier
to read and edit as raw text.  Additionally, Sphinx allows for setting
a current module, so links like ```~matplotlib.axes.Axes.set_xlim```
could be written as ```~axes.Axes.set_xlim```.

Overriding signatures
---------------------

Many methods in matplotlib use the ``*args`` and ``**kwargs`` syntax
to dynamically handle the keyword arguments that are accepted by the
function, or to delegate on to another function.  This, however, is
often not useful as a signature in the documentation.  For this
reason, many matplotlib methods include something like::

    def annotate(self, *args, **kwargs):
        """
        Create an annotation: a piece of text referring to a data
        point.

        Call signature::

          annotate(s, xy, xytext=None, xycoords='data',
                   textcoords='data', arrowprops=None, **kwargs)
        """

This can't be parsed by Sphinx, and is rather verbose in raw text.  As
of Sphinx 1.1, if the ``autodoc_docstring_signature`` config value is
set to True, Sphinx will extract a replacement signature from the
first line of the docstring, allowing this::

    def annotate(self, *args, **kwargs):
        """
        annotate(s, xy, xytext=None, xycoords='data',
                   textcoords='data', arrowprops=None, **kwargs)

        Create an annotation: a piece of text referring to a data
        point.
        """

The explicit signature will replace the actual Python one in the
generated documentation.

Linking rather than duplicating
-------------------------------

Many of the docstrings include long lists of accepted keywords by
interpolating things into the docstring at load time.  This makes the
docstrings very long.  Also, since these tables are the same across
many docstrings, it inserts a lot of redundant information in the docs
-- particularly a problem in the printed version.

These tables should be moved to docstrings on functions whose only
purpose is for help.  The docstrings that refer to these tables should
link to them, rather than including them verbatim.

autosummary extension
---------------------

The Sphinx autosummary extension should be used to generate summary
tables, that link to separate pages of documentation.  Some classes
that have many methods (e.g. `~.axes.Axes`) should be documented with
one method per page, whereas smaller classes should have all of their
methods together.

Examples linking to relevant documentation
------------------------------------------

The examples, while helpful at illustrating how to use a feature, do
not link back to the relevant docstrings.  This could be addressed by
adding module-level docstrings to the examples, and then including
that docstring in the parsed content on the example page.  These
docstrings could easily include references to any other part of the
documentation.

Documentation using help() vs. a browser
----------------------------------------

Using Sphinx markup in the source allows for good-looking docs in your
browser, but the markup also makes the raw text returned using help()
look terrible. One of the aims of improving the docstrings should be
to make both methods of accessing the docs look good.

Implementation
==============

1. The numpydoc extensions should be turned on for matplotlib.  There
   is an important question as to whether these should be included in
   the matplotlib source tree, or used as a dependency.  Installing
   Numpy is not sufficient to get the numpydoc extensions -- it's a
   separate install procedure.  In any case, to the extent that they
   require customization for our needs, we should endeavor to submit
   those changes upstream and not fork them.

2. Manually go through all of the docstrings and update them to the
   new format and conventions.  Updating the cross references (from
   ```:func:`myfunc``` to ```func```) may be able to be
   semi-automated.  This is a lot of busy work, and perhaps this labor
   should be divided on a per-module basis so no single developer is
   over-burdened by it.

3. Reorganize the API docs using autosummary and ``sphinx-autogen``.
   This should hopefully have minimal impact on the narrative
   documentation.

4. Modify the example page generator (:file:`gen_rst.py`) so that it
   extracts the module docstring from the example and includes it in a
   non-literal part of the example page.

5. Use ``sphinx-quickstart`` to generate a new-style Sphinx Makefile.
   The following features in the current :file:`make.py` will have to be
   addressed in some other way:

   - Copying of some static content

   - Specifying a "small" build (only low-resolution PNG files for examples)

Steps 1, 2, and 3 are interdependent.  4 and 5 may be done
independently, though 5 has some dependency on 3.

Backward compatibility
======================

As this mainly involves docstrings, there should be minimal impact on
backward compatibility.

Alternatives
============

None yet discussed.
============
 MEP8: PEP8
============

.. contents::
   :local:


Status
======

**Completed**

We are currently enforcing a sub-set of pep8 on new code contributions.

Branches and Pull requests
==========================

None so far.

Abstract
========

The matplotlib codebase predates PEP8, and therefore is less than
consistent style-wise in some areas.  Bringing the codebase into
compliance with PEP8 would go a long way to improving its legibility.

Detailed description
====================

Some files use four space indentation, some use three.  Some use
different levels in the same file.

For the most part, class/function/variable naming follows PEP8, but it
wouldn't hurt to fix where necessary.

Implementation
==============

The implementation should be fairly mechanical: running the pep8 tool
over the code and fixing where appropriate.

This should be merged in after the 2.0 release, since the changes will
likely make merging any pending pull requests more difficult.

Additionally, and optionally, PEP8 compliance could be tracked by an
automated build system.

Backward compatibility
======================

Public names of classes and functions that require change (there
shouldn't be many of these) should first be deprecated and then
removed in the next release cycle.

Alternatives
============

PEP8 is a popular standard for Python code style, blessed by the
Python core developers, making any alternatives less desirable.
=========================
 MEP29: Text light markup
=========================

.. contents::
   :local:


Status
======

Discussion


Branches and Pull requests
==========================

None at the moment, proof of concept only.

Abstract
========

This MEP proposes to add lightweight markup to the text artist.

Detailed description
====================

Using different size/color/family in a text annotation is difficult because the
`~.Axes.text` method accepts argument for size/color/family/weight/etc. that are used
for the whole text. But, if one wants, for example, to have different colors,
one has to look at the gallery where one such example is provided:
:doc:`/gallery/text_labels_and_annotations/rainbow_text`

This example takes a list of strings as well as a list of colors which makes it
cumbersome to use. An alternative would be to use a restricted set of pango_-like markup and to interpret this markup.

.. _pango: https://developer.gnome.org/pygtk/stable/pango-markup-language.html

Some markup examples::

   Hello <b>world!</b>`
   Hello <span color="blue">world!</span>


Implementation
==============

A proof of concept is provided in `markup_example.py <https://github.com/rougier/matplotlib/blob/markup/examples/text_labels_and_annotations/markup.py>`_ but it currently only handles the horizontal direction.

Improvements
------------

* This proof of concept uses regex to parse the text but it may be better
  to use the html.parser from the standard library.

* Computation of text fragment positions could benefit from the OffsetFrom
  class. See for example item 5 in `Using Complex Coordinates with Annotations <https://matplotlib.org/devdocs/tutorials/text/annotations.html#using-complex-coordinates-with-annotations>`_

Problems
--------

* One serious problem is how to deal with text having both LaTeX and
  HTML-like tags. For example, consider the following::

     $<b>Bold$</b>

  Recommendation would be to have mutual exclusion.


Backward compatibility
======================

None at the moment since it is only a proof of concept


Alternatives
============

As proposed by @anntzer, this could be also implemented as improvements to
mathtext. For example::

  r"$\text{Hello \textbf{world}}$"
  r"$\text{Hello \textcolor{blue}{world}}$"
  r"$\text{Hello \textsf{\small world}}$"
==============================
 MEP21: color and cm refactor
==============================

.. contents::
   :local:


Status
======

- **Discussion**: This MEP has not commenced yet, but here are some
  ongoing ideas which may become a part of this MEP:



Branches and Pull requests
==========================



Abstract
========


* color

  * tidy up the namespace
  * Define a "Color" class
  * make it easy to convert from one color type to another ```hex ->
    RGB```, ```RGB -> hex```, ```HSV -> RGB``` etc.
  * improve the construction of a colormap - the dictionary approach
    is archaic and overly complex (though incredibly powerful)
  * make it possible to interpolate between two or more color types
    in different modes, especially useful for construction of
    colormaps in HSV space for instance

* cm

  * rename the module to something more descriptive - mappables?


Overall, there are a lot of improvements that can be made with
matplotlib color handling - managing backwards compatibility will be
difficult as there are some badly named variables/modules which really
shouldn't exist - but a clear path and message for migration should be
available, with a large amount of focus on this in the API changes
documentation.


Detailed description
====================

Implementation
==============


Backward compatibility
======================

Alternatives
============
=======================
 MEP26: Artist styling
=======================

.. contents::
   :local:


Status
======

**Rejected**

Branches and Pull requests
==========================

Abstract
========

This MEP proposes a new stylesheet implementation to allow more
comprehensive and dynamic styling of artists.

The current version of matplotlib (1.4.0) allows stylesheets based on
the rcParams syntax to be applied before creation of a plot.  The
methodology below proposes a new syntax, based on CSS, which would
allow styling of individual artists and properties, which can be
applied dynamically to existing objects.

This is related to (and makes steps toward) the overall goal of moving
to a DOM/tree-like architecture.


Detailed description
====================

Currently, the look and appearance of existing artist objects (figure,
axes, Line2D etc...) can only be updated via ``set_`` and ``get_`` methods
on the artist object, which is quite laborious, especially if no
reference to the artist(s) has been stored.  The new style sheets
introduced in 1.4 allow styling before a plot is created, but do not
offer any means to dynamically update plots or distinguish between
artists of the same type (i.e. to specify the ``line color`` and ``line
style`` separately for differing `.Line2D` objects).

The initial development should concentrate on allowing styling of
artist primitives (those `.Artist`\s that do not contain other
`.Artist`\s), and further development could expand the CSS syntax rules
and parser to allow more complex styling. See the appendix for a list
of primitives.

The new methodology would require development of a number of steps:

- A new stylesheet syntax (likely based on CSS) to allow selection of
  artists by type, class, id etc...
- A mechanism by which to parse a stylesheet into a tree
- A mechanism by which to translate the parse-tree into something
  which can be used to update the properties of relevant
  artists. Ideally this would implement a method by which to traverse
  the artists in a tree-like structure.
- A mechanism by which to generate a stylesheet from existing artist
  properties. This would be useful to allow a user to export a
  stylesheet from an existing figure (where the appearance may have
  been set using the matplotlib API)...

Implementation
==============

It will be easiest to allow a '3rd party' to modify/set the style of an artist
if the 'style' is created as a separate class and store against the artist as a
property.  The `.GraphicsContextBase` class already provides a the basis of a
``Style`` class and an artist's `~.Artist.draw` method can be refactored to use
the ``Style`` class rather than setting up its own `.GraphicsContextBase` and
transferring its style-related properties to it.  A minimal example of how this
could be implemented is shown here: https://github.com/JamesRamm/mpl_experiment

IMO, this will also make the API and code base much neater as
individual get/set methods for artist style properties are now
redundant...  Indirectly related would be a general drive to replace
get/set methods with properties. Implementing the style class with
properties would be a big stride toward this...

For initial development, I suggest developing a syntax based on a much
(much much) simplified version of CSS. I am in favour of dubbing this
Artist Style Sheets :+1: :

BNF Grammar
-----------

I propose a very simple syntax to implement initially (like a proof of
concept), which can be expanded upon in the future. The BNF form of
the syntax is given below and then explained ::

    RuleSet ::= SelectorSequence "{"Declaration"}"

    SelectorSequence :: = Selector {"," Selector}

    Declaration ::= propName":" propValue";"

    Selector ::= ArtistIdent{"#"Ident}

    propName ::= Ident

    propValue ::= Ident | Number | Colour | "None"

``ArtistIdent``, ``Ident``, ``Number`` and ``Colour`` are tokens (the basic
building blocks of the expression) which are defined by regular
expressions.

Syntax
------

A CSS stylesheet consists of a series of **rule sets** in hierarchical
order (rules are applied from top to bottom). Each rule follows the
syntax ::

    selector {attribute: value;}

Each rule can have any number of ``attribute: value`` pairs, and a
stylesheet can have any number of rules.

The initial syntax is designed only for `.Artist` primitives. It does
not address the question of how to set properties on `.Container` types
(whose properties may themselves be `.Artist`\s with settable
properties), however, a future solution to this could simply be nested
``RuleSet``\s

Selectors
~~~~~~~~~


Selectors define the object to which the attribute updates should be
applied. As a starting point, I propose just 2 selectors to use in
initial development:



Artist Type Selector


Select an `.Artist` by it's type. E.g `.Line2D` or `.Text`::

    Line2D {attribute: value}

The regex for matching the artist type selector (``ArtistIdent`` in the BNF grammar) would be::

    ArtistIdent = r'(?P<ArtistIdent>\bLine2D\b|\bText\b|\bAxesImage\b|\bFigureImage\b|\bPatch\b)'

GID selector
~~~~~~~~~~~~

Select an `.Artist` by its ``gid``::

    Line2D#myGID {attribute: value}

A ``gid`` can be any string, so the regex could be as follows::

    Ident = r'(?P<Ident>[a-zA-Z_][a-zA-Z_0-9]*)'


The above selectors roughly correspond to their CSS counterparts
(http://www.w3.org/TR/CSS21/selector.html)

Attributes and values
~~~~~~~~~~~~~~~~~~~~~

- ``Attributes`` are any valid (settable) property for the `.Artist` in question.
- ``Values`` are any valid value for the property (Usually a string, or number).

Parsing
-------

Parsing would consist of breaking the stylesheet into tokens (the
python cookbook gives a nice tokenizing recipe on page 66), applying
the syntax rules and constructing a ``Tree``. This requires defining the
grammar of the stylesheet (again, we can borrow from CSS) and writing
a parser. Happily, there is a recipe for this in the python cookbook
as well.


Visitor pattern for matplotlib figure
-------------------------------------

In order to apply the stylesheet rules to the relevant artists, we
need to 'visit' each artist in a figure and apply the relevant rule.
Here is a visitor class (again, thanks to python cookbook), where each
``node`` would be an artist in the figure. A ``visit_`` method would need
to be implemented for each mpl artist, to handle the different
properties for each ::

    class Visitor:
        def visit(self, node):
           name = 'visit_' + type(node).__name__
           meth = getattr(self, name, None)
           if meth is None:
              raise NotImplementedError
           return meth(node)

An ``evaluator`` class would then take the stylesheet rules and
implement the visitor on each one of them.



Backward compatibility
======================

Implementing a separate ``Style`` class would break backward
compatibility as many get/set methods on an artist would become
redundant.  While it would be possible to alter these methods to hook
into the ``Style`` class (stored as a property against the artist), I
would be in favor of simply removing them to both neaten/simplify the
codebase and to provide a simple, uncluttered API...

Alternatives
============

No alternatives, but some of the ground covered here overlaps with
MEP25, which may assist in this development

Appendix
========

Matplotlib primitives
---------------------

This will form the initial selectors which stylesheets can use.

* Line2D
* Text
* AxesImage
* FigureImage
* Patch
===============================
 MEP19: Continuous Integration
===============================

Status
======

**Completed**

Branches and Pull requests
==========================

Abstract
========

matplotlib could benefit from better and more reliable continuous
integration, both for testing and building installers and
documentation.

Detailed description
====================

Current state-of-the-art
------------------------

**Testing**

matplotlib currently uses Travis-CI for automated tests.  While
Travis-CI should be praised for how much it does as a free service, it
has a number of shortcomings:

- It often fails due to network timeouts when installing dependencies.

- It often fails for inexplicable reasons.

- build or test products can only be saved from build off of branches
  on the main repo, not pull requests, so it is often difficult to
  "post mortem" analyse what went wrong.  This is particularly
  frustrating when the failure can not be subsequently reproduced
  locally.

- It is not extremely fast.  matplotlib's cpu and memory requirements
  for testing are much higher than the average Python project.

- It only tests on Ubuntu Linux, and we have only minimal control over
  the specifics of the platform.  It can be upgraded at any time
  outside of our control, causing unexpected delays at times that may
  not be convenient in our release schedule.

On the plus side, Travis-CI's integration with github -- automatically
testing all pending pull requests -- is exceptional.

**Builds**

There is no centralized effort for automated binary builds for
matplotlib.  However, the following disparate things are being done
[If the authors mentioned here could fill in detail, that would be
great!]:

- @sandrotosi: builds Debian packages

- @takluyver: Has automated Ubuntu builds on Launchpad

- @cgohlke: Makes Windows builds (don't know how automated that is)

- @r-owen: Makes OS-X builds (don't know how automated that is)

**Documentation**

Documentation of main is now built by travis and uploaded to https://matplotlib.org/devdocs/index.html

@NelleV, I believe, generates the docs automatically and posts them on
the web to chart MEP10 progress.

Peculiarities of matplotlib
---------------------------

matplotlib has complex requirements that make testing and building
more taxing than many other Python projects.

- The CPU time to run the tests is quite high.  It puts us beyond the
  free accounts of many CI services (e.g. ShiningPanda)

- It has a large number of dependencies, and testing the full matrix
  of all combinations is impractical.  We need to be clever about what
  space we test and guarantee to support.

Requirements
------------

This section outlines the requirements that we would like to have.

#. Testing all pull requests by hooking into the GitHub API, as
   Travis-CI does

#. Testing on all major platforms: Linux, Mac OS-X, MS Windows (in
   that order of priority, based on user survey)

#. Retain the last n days worth of build and test products, to aid in
   post-mortem debugging.

#. Automated nightly binary builds, so that users can test the
   bleeding edge without installing a complete compilation
   environment.

#. Automated benchmarking.  It would be nice to have a standard
   benchmark suite (separate from the tests) whose performance could
   be tracked over time, in different backends and platforms.  While
   this is separate from building and testing, ideally it would run on
   the same infrastructure.

#. Automated nightly building and publishing of documentation (or as
   part of testing, to ensure PRs don't introduce documentation bugs).
   (This would not replace the static documentation for stable
   releases as a default).

#. The test systems should be manageable by multiple developers, so
   that no single person becomes a bottleneck.  (Travis-CI's design
   does this well -- storing build configuration in the git
   repository, rather than elsewhere, is a very good design.)

#. Make it easy to test a large but sparse matrix of different
   versions of matplotlib's dependencies.  The matplotlib user survey
   provides some good data as to where to focus our efforts:
   https://docs.google.com/spreadsheets/d/1jbK0J4cIkyBNncnS-gP7pINSliNy9lI-N4JHwxlNSXE/edit

#. Nice to have: A decentralized design so that those with more
   obscure platforms can publish build results to a central dashboard.

Implementation
==============

This part is yet-to-be-written.

However, ideally, the implementation would be a third-party service,
to avoid adding system administration to our already stretched time.
As we have some donated funds, this service may be a paid one if it
offers significant time-saving advantages over free offerings.

Backward compatibility
======================

Backward compatibility is not a major concern for this MEP.  We will
replace current tools and procedures with something better and throw
out the old.

Alternatives
============


Hangout Notes
=============

CI Infrastructure
-----------------

- We like Travis and it will probably remain part of our arsenal in
  any event.  The reliability issues are being looked into.

- Enable Amazon S3 uploads of testing products on Travis.  This will
  help with post-mortem of failures (@mdboom is looking into this
  now).

- We want Mac coverage.  The best bet is probably to push Travis to
  enable it for our project by paying them for a Pro account (since
  they don't otherwise allow testing on both Linux and Mac).

- We want Windows coverage.  Shining Panda is an option there.

- Investigate finding or building a tool that would collect and
  synthesize test results from a number of sources and post it to
  GitHub using the GitHub API.  This may be of general use to the
  Scipy community.

- For both Windows and Mac, we should document (or better yet, script)
  the process of setting up the machine for a build, and how to build
  binaries and installers.  This may require getting information from
  Russel Owen and Christoph Gohlke.  This is a necessary step for
  doing automated builds, but would also be valuable for a number of
  other reasons.

The test framework itself
-------------------------

- We should investigate ways to make it take less time

   - Eliminating redundant tests, if possible

   - General performance improvements to matplotlib will help

- We should be covering more things, particularly more backends

- We should have more unit tests, fewer integration tests, if possible
========================================
 MEP23: Multiple Figures per GUI window
========================================

.. contents::
   :local:



Status
======

**Discussion**

Branches and Pull requests
==========================

**Previous work**
- https://github.com/matplotlib/matplotlib/pull/2465 **To-delete**


Abstract
========

Add the possibility to have multiple figures grouped under the same
`~.backend_template.FigureManager`

Detailed description
====================

Under the current structure, every canvas has its own window.

This is and may continue to be the desired method of operation for
most use cases.

Sometimes when there are too many figures open at the same time, it is
desirable to be able to group these under the same window
[see](https://github.com/matplotlib/matplotlib/issues/2194).

The proposed solution modifies `.FigureManagerBase` to contain and manage more
than one ``Canvas``. The settings parameter :rc:`backend.multifigure` control
when the **MultiFigure** behaviour is desired.

**Note**

It is important to note, that the proposed solution, assumes that the
[MEP22](https://github.com/matplotlib/matplotlib/wiki/Mep22) is
already in place. This is simply because the actual implementation of
the ``Toolbar`` makes it pretty hard to switch between canvases.

Implementation
==============

The first implementation will be done in GTK3 using a Notebook as
canvas container.

``FigureManagerBase``
---------------------

will add the following new methods

* ``add_canvas``: To add a canvas to an existing
  `~.backend_template.FigureManager` object
* ``remove_canvas``: To remove a canvas from a
  `~.backend_template.FigureManager` object, if it is the last one, it will be
  destroyed
* ``move_canvas``: To move a canvas from one `~.backend_template.FigureManager`
  to another.
* ``set_canvas_title``: To change the title associated with a specific
  canvas container
* ``get_canvas_title``: To get the title associated with a specific
  canvas container
* ``get_active_canvas``: To get the canvas that is in the foreground and
  is subject to the gui events. There is no ``set_active_canvas``
  because the active canvas, is defined when ``show`` is called on a
  ``Canvas`` object.

``new_figure_manager``
----------------------

To control which `~.backend_template.FigureManager` will contain the new
figures, an extra optional parameter *figuremanager* will be added, this
parameter value will be passed to ``new_figure_manager_given_figure``.

``new_figure_manager_given_figure``
-----------------------------------

* If *figuremanager* parameter is given, this
  `~.backend_template.FigureManager` object will be used instead of creating a
  new one.
* If ``rcParams['backend.multifigure']`` is True: The last
  `~.backend_template.FigureManager` object will be used instead of creating a
  new one.

``NavigationBase``
------------------

Modifies the ``NavigationBase`` to keep a list of canvases, directing the
actions to the active one.

Backward compatibility
======================

For the **MultiFigure** properties to be visible, the user has to
activate them directly setting ``rcParams['backend.multifigure'] =
True``

It should be backwards compatible for backends that adhere to the
current `.FigureManagerBase` structure even if they have not
implemented the **MultiFigure** magic yet.


Alternatives
============

Instead of modifying the `.FigureManagerBase` it could be possible to add
a parallel class, that handles the cases where
``rcParams['backend.multifigure'] = True``.  This will warranty that
there won't be any problems with custom made backends, but also makes
bigger the code, and more things to maintain.
=============================================
 MEP28: Remove Complexity from Axes.boxplot
=============================================

.. contents::
   :local:


Status
======
**Discussion**

Branches and Pull requests
==========================

The following lists any open PRs or branches related to this MEP:

#. Deprecate redundant statistical kwargs in ``Axes.boxplot``: https://github.com/phobson/matplotlib/tree/MEP28-initial-deprecations
#. Deprecate redundant style options in ``Axes.boxplot``: https://github.com/phobson/matplotlib/tree/MEP28-initial-deprecations
#. Deprecate passings 2D NumPy arrays as input: None
#. Add pre- & post-processing options to ``cbook.boxplot_stats``: https://github.com/phobson/matplotlib/tree/boxplot-stat-transforms
#. Exposing ``cbook.boxplot_stats`` through ``Axes.boxplot`` kwargs: None
#. Remove redundant statistical kwargs in ``Axes.boxplot``: None
#. Remove redundant style options in ``Axes.boxplot``: None
#. Remaining items that arise through discussion: None

Abstract
========

Over the past few releases, the ``Axes.boxplot`` method has grown in
complexity to support fully customizable artist styling and statistical
computation. This lead to ``Axes.boxplot`` being split off into multiple
parts. The statistics needed to draw a boxplot are computed in
``cbook.boxplot_stats``, while the actual artists are drawn by ``Axes.bxp``.
The original method, ``Axes.boxplot`` remains as the most public API that
handles passing the user-supplied data to ``cbook.boxplot_stats``, feeding
the results to ``Axes.bxp``, and pre-processing style information for
each facet of the boxplot plots.

This MEP will outline a path forward to rollback the added complexity
and simplify the API while maintaining reasonable backwards
compatibility.

Detailed description
====================

Currently, the ``Axes.boxplot`` method accepts parameters that allow the
users to specify medians and confidence intervals for each box that
will be drawn in the plot. These were provided so that avdanced users
could provide statistics computed in a different fashion that the simple
method provided by matplotlib. However, handling this input requires
complex logic to make sure that the forms of the data structure match what
needs to be drawn. At the moment, that logic contains 9 separate if/else
statements nested up to 5 levels deep with a for loop, and may raise up to 2 errors.
These parameters were added prior to the creation of the ``Axes.bxp`` method,
which draws boxplots from a list of dictionaries containing the relevant
statistics. Matplotlib also provides a function that computes these
statistics via ``cbook.boxplot_stats``. Note that advanced users can now
either a) write their own function to compute the stats required by
``Axes.bxp``, or b) modify the output returned by ``cbook.boxplots_stats``
to fully customize the position of the artists of the plots. With this
flexibility, the parameters to manually specify only the medians and their
confidences intervals remain for backwards compatibility.

Around the same time that the two roles of ``Axes.boxplot`` were split into
``cbook.boxplot_stats`` for computation and ``Axes.bxp`` for drawing, both
``Axes.boxplot`` and ``Axes.bxp`` were written to accept parameters that
individually toggle the drawing of all components of the boxplots, and
parameters that individually configure the style of those artists. However,
to maintain backwards compatibility, the ``sym`` parameter (previously used
to specify the symbol of the fliers) was retained. This parameter itself
requires fairly complex logic to reconcile the ``sym`` parameters with the
newer ``flierprops`` parameter at the default style specified by ``matplotlibrc``.

This MEP seeks to dramatically simplify the creation of boxplots for
novice and advanced users alike. Importantly, the changes proposed here
will also be available to downstream packages like seaborn, as seaborn
smartly allows users to pass arbitrary dictionaries of parameters through
the seaborn API to the underlying matplotlib functions.

This will be achieved in the following way:

  1. ``cbook.boxplot_stats`` will be modified to allow pre- and post-
     computation transformation functions to be passed in (e.g., ``np.log``
     and ``np.exp`` for lognormally distributed data)
  2. ``Axes.boxplot`` will be modified to also accept and naïvely pass them
     to ``cbook.boxplots_stats`` (Alt: pass the stat function and a dict
     of its optional parameters).
  3. Outdated parameters from ``Axes.boxplot`` will be deprecated and
     later removed.

Importance
----------

Since the limits of the whiskers are computed arithmetically, there
is an implicit assumption of normality in box and whisker plots.
This primarily affects which data points are classified as outliers.

Allowing transformations to the data and the results used to draw
boxplots will allow users to opt-out of that assumption if the
data are known to not fit a normal distribution.

Below is an example of how ``Axes.boxplot`` classifies outliers of lognormal
data differently depending one these types of transforms.

.. plot::
   :include-source: true

   import numpy as np
   import matplotlib.pyplot as plt
   from matplotlib import cbook
   np.random.seed(0)

   fig, ax = plt.subplots(figsize=(4, 6))
   ax.set_yscale('log')
   data = np.random.lognormal(-1.75, 2.75, size=37)

   stats = cbook.boxplot_stats(data, labels=['arithmetic'])
   logstats = cbook.boxplot_stats(np.log(data), labels=['log-transformed'])

   for lsdict in logstats:
       for key, value in lsdict.items():
           if key != 'label':
               lsdict[key] = np.exp(value)

   stats.extend(logstats)
   ax.bxp(stats)
   fig.show()

Implementation
==============

Passing transform functions to ``cbook.boxplots_stats``
-------------------------------------------------------

This MEP proposes that two parameters (e.g., ``transform_in`` and
``transform_out`` be added to the cookbook function that computes the
statistics for the boxplot function. These will be optional keyword-only
arguments and can easily be set to ``lambda x: x`` as a no-op when omitted
by the user. The ``transform_in`` function will be applied to the data
as the ``boxplot_stats`` function loops through each subset of the data
passed to it. After the list of statistics dictionaries are computed the
``transform_out`` function is applied to each value in the dictionaries.

These transformations can then be added to the call signature of
``Axes.boxplot`` with little impact to that method's complexity. This is
because they can be directly passed to ``cbook.boxplot_stats``.
Alternatively, ``Axes.boxplot`` could be modified to accept an optional
statistical function kwarg and a dictionary of parameters to be directly
passed to it.

At this point in the implementation users and external libraries like
seaborn would have complete control via the ``Axes.boxplot`` method. More
importantly, at the very least, seaborn would require no changes to its
API to allow users to take advantage of these new options.

Simplifications to the ``Axes.boxplot`` API and other functions
---------------------------------------------------------------

Simplifying the boxplot method consists primarily of deprecating and then
removing the redundant parameters. Optionally, a next step would include
rectifying minor terminological inconsistencies between ``Axes.boxplot``
and ``Axes.bxp``.

The parameters to be deprecated and removed include:

  1. ``usermedians`` - processed by 10 SLOC, 3 ``if`` blocks, a ``for`` loop
  2. ``conf_intervals`` - handled by 15 SLOC, 6 ``if`` blocks, a ``for`` loop
  3. ``sym`` - processed by 12 SLOC, 4 ``if`` blocks

Removing the ``sym`` option allows all code in handling the remaining
styling parameters to be moved to ``Axes.bxp``. This doesn't remove
any complexity, but does reinforce the single responsibility principle
among ``Axes.bxp``, ``cbook.boxplot_stats``, and ``Axes.boxplot``.

Additionally, the ``notch`` parameter could be renamed ``shownotches``
to be consistent with ``Axes.bxp``. This kind of cleanup could be taken
a step further and the ``whis``, ``bootstrap``, ``autorange`` could
be rolled into the kwargs passed to the new ``statfxn`` parameter.

Backward compatibility
======================

Implementation of this MEP would eventually result in the backwards
incompatible deprecation and then removal of the keyword parameters
``usermedians``, ``conf_intervals``, and ``sym``. Cursory searches on
GitHub indicated that ``usermedians``, ``conf_intervals`` are used by
few users, who all seem to have a very strong knowledge of matplotlib.
A robust deprecation cycle should provide sufficient time for these
users to migrate to a new API.

Deprecation of ``sym`` however, may have a much broader reach into
the matplotlib userbase.

Schedule
--------
An accelerated timeline could look like the following:

#. v2.0.1 add transforms to ``cbook.boxplots_stats``, expose in ``Axes.boxplot``
#. v2.1.0 Initial Deprecations , and using 2D NumPy arrays as input

    a. Using 2D NumPy arrays as input. The semantics around 2D arrays are generally confusing.
    b. ``usermedians``, ``conf_intervals``, ``sym`` parameters

#. v2.2.0

    a. remove ``usermedians``, ``conf_intervals``, ``sym`` parameters
    b. deprecate ``notch`` in favor of ``shownotches`` to be consistent with
       other parameters and ``Axes.bxp``

#. v2.3.0
    a. remove ``notch`` parameter
    b. move all style and artist toggling logic to ``Axes.bxp`` such ``Axes.boxplot``
       is little more than a broker between ``Axes.bxp`` and ``cbook.boxplots_stats``


Anticipated Impacts to Users
----------------------------

As described above deprecating ``usermedians`` and ``conf_intervals``
will likely impact few users. Those who will be impacted are almost
certainly advanced users who will be able to adapt to the change.

Deprecating the ``sym`` option may import more users and effort should
be taken to collect community feedback on this.

Anticipated Impacts to Downstream Libraries
-------------------------------------------

The source code (GitHub master as of 2016-10-17) was inspected for
seaborn and python-ggplot to see if these changes would impact their
use. None of the parameters nominated for removal in this MEP are used by
seaborn. The seaborn APIs that use matplotlib's boxplot function allow
user's to pass arbitrary ``**kwargs`` through to matplotlib's API. Thus
seaborn users with modern matplotlib installations will be able to take
full advantage of any new features added as a result of this MEP.

Python-ggplot has implemented its own function to draw boxplots. Therefore,
no impact can come to it as a result of implementing this MEP.

Alternatives
============

Variations on the theme
-----------------------

This MEP can be divided into a few loosely coupled components:

#. Allowing pre- and post-computation transformation function in ``cbook.boxplot_stats``
#. Exposing that transformation in the ``Axes.boxplot`` API
#. Removing redundant statistical options in ``Axes.boxplot``
#. Shifting all styling parameter processing from ``Axes.boxplot`` to ``Axes.bxp``.

With this approach, #2 depends and #1, and #4 depends on #3.

There are two possible approaches to #2. The first and most direct would
be to mirror the new ``transform_in`` and ``transform_out`` parameters of
``cbook.boxplot_stats`` in ``Axes.boxplot`` and pass them directly.

The second approach would be to add ``statfxn`` and ``statfxn_args``
parameters to ``Axes.boxplot``. Under this implementation, the default
value of ``statfxn`` would be ``cbook.boxplot_stats``, but users could
pass their own function. Then ``transform_in`` and ``transform_out`` would
then be passed as elements of the ``statfxn_args`` parameter.

.. code:: python

   def boxplot_stats(data, ..., transform_in=None, transform_out=None):
       if transform_in is None:
           transform_in = lambda x: x

       if transform_out is None:
           transform_out = lambda x: x

       output = []
       for _d in data:
           d = transform_in(_d)
           stat_dict = do_stats(d)
           for key, value in stat_dict.item():
               if key != 'label':
                   stat_dict[key] = transform_out(value)
           output.append(d)
       return output


    class Axes(...):
        def boxplot_option1(data, ..., transform_in=None, transform_out=None):
            stats = cbook.boxplot_stats(data, ...,
                                        transform_in=transform_in,
                                        transform_out=transform_out)
            return self.bxp(stats, ...)

        def boxplot_option2(data, ..., statfxn=None, **statopts):
            if statfxn is None:
                statfxn = boxplot_stats
            stats = statfxn(data, **statopts)
            return self.bxp(stats, ...)

Both cases would allow users to do the following:

.. code:: python

   fig, ax1 = plt.subplots()
   artists1 = ax1.boxplot_optionX(data, transform_in=np.log,
                                  transform_out=np.exp)


But Option Two lets a user write a completely custom stat function
(e.g., ``my_box_stats``) with fancy BCA confidence intervals and the
whiskers set differently depending on some attribute of the data.

This is available under the current API:

.. code:: python

   fig, ax1 = plt.subplots()
   my_stats = my_box_stats(data, bootstrap_method='BCA',
                           whisker_method='dynamic')
   ax1.bxp(my_stats)

And would be more concise with Option Two

.. code:: python

   fig, ax = plt.subplots()
   statopts = dict(transform_in=np.log, transform_out=np.exp)
   ax.boxplot(data, ..., **statopts)

Users could also pass their own function to compute the stats:

.. code:: python

   fig, ax1 = plt.subplots()
   ax1.boxplot(data, statfxn=my_box_stats, bootstrap_method='BCA',
               whisker_method='dynamic')

From the examples above, Option Two seems to have only marginal benefit,
but in the context of downstream libraries like seaborn, its advantage
is more apparent as the following would be possible without any patches
to seaborn:

.. code:: python

   import seaborn
   tips = seaborn.load_data('tips')
   g = seaborn.factorplot(x="day", y="total_bill", hue="sex", data=tips,
                          kind='box', palette="PRGn", shownotches=True,
                          statfxn=my_box_stats, bootstrap_method='BCA',
                          whisker_method='dynamic')

This type of flexibility was the intention behind splitting the overall
boxplot API in the current three functions. In practice however, downstream
libraries like seaborn support versions of matplotlib dating back well
before the split. Thus, adding just a bit more flexibility to the
``Axes.boxplot`` could expose all the functionality to users of the
downstream libraries with modern matplotlib installation without intervention
from the downstream library maintainers.

Doing less
----------

Another obvious alternative would be to omit the added pre- and post-
computation transform functionality in ``cbook.boxplot_stats`` and
``Axes.boxplot``, and simply remove the redundant statistical and style
parameters as described above.

Doing nothing
-------------

As with many things in life, doing nothing is an option here. This means
we simply advocate for users and downstream libraries to take advantage
of the split between ``cbook.boxplot_stats`` and ``Axes.bxp`` and let
them decide how to provide an interface to that.
======================================
 MEP27: Decouple pyplot from backends
======================================

.. contents::
   :local:


Status
======
**Progress**

Branches and Pull requests
==========================
Main PR (including GTK3):
+ https://github.com/matplotlib/matplotlib/pull/4143

Backend specific branch diffs:
+ https://github.com/OceanWolf/matplotlib/compare/backend-refactor...OceanWolf:backend-refactor-tkagg
+ https://github.com/OceanWolf/matplotlib/compare/backend-refactor...OceanWolf:backend-refactor-qt
+ https://github.com/OceanWolf/matplotlib/compare/backend-refactor...backend-refactor-wx

Abstract
========

This MEP refactors the backends to give a more structured and
consistent API, removing generic code and consolidate existing code.
To do this we propose splitting:

1. ``FigureManagerBase`` and its derived classes into the core
   functionality class ``FigureManager`` and a backend specific class
   ``WindowBase`` and
2. ``ShowBase`` and its derived classes into ``Gcf.show_all`` and ``MainLoopBase``.

Detailed description
====================

This MEP aims to consolidate the backends API into one single uniform
API, removing generic code out of the backend (which includes
``_pylab_helpers`` and ``Gcf``), and push code to a more appropriate
level in matplotlib.  With this we automatically remove
inconsistencies that appear in the backends, such as
``FigureManagerBase.resize(w, h)`` which sometimes sets the canvas,
and other times set the entire window to the dimensions given,
depending on the backend.

Two main places for generic code appear in the classes derived from
``FigureManagerBase`` and ``ShowBase``.

1. ``FigureManagerBase`` has **three** jobs at the moment:

    1. The documentation describes it as a *``Helper class for pyplot
       mode, wraps everything up into a neat bundle''*
    2. But it doesn't just wrap the canvas and toolbar, it also does
       all of the windowing tasks itself.  The conflation of these two
       tasks gets seen the best in the following line: ```python
       self.set_window_title("Figure %d" % num) ``` This combines
       backend specific code ``self.set_window_title(title)`` with
       matplotlib generic code ``title = "Figure %d" % num``.

    3. Currently the backend specific subclass of ``FigureManager``
       decides when to end the mainloop.  This also seems very wrong
       as the figure should have no control over the other figures.


2. ``ShowBase`` has two jobs:

    1. It has the job of going through all figure managers registered
       in ``_pylab_helpers.Gcf`` and telling them to show themselves.
    2. And secondly it has the job of performing the backend specific
       ``mainloop`` to block the main programme and thus keep the
       figures from dying.

Implementation
==============

The description of this MEP gives us most of the solution:

1. To remove the windowing aspect out of ``FigureManagerBase`` letting
   it simply wrap this new class along with the other backend classes.
   Create a new ``WindowBase`` class that can handle this
   functionality, with pass-through methods (:arrow_right:) to
   ``WindowBase``.  Classes that subclass ``WindowBase`` should also
   subclass the GUI specific window class to ensure backward
   compatibility (``manager.window == manager.window``).
2. Refactor the mainloop of ``ShowBase`` into ``MainLoopBase``, which
   encapsulates the end of the loop as well.  We give an instance of
   ``MainLoop`` to ``FigureManager`` as a key unlock the exit method
   (requiring all keys returned before the loop can die).  Note this
   opens the possibility for multiple backends to run concurrently.
3. Now that ``FigureManagerBase`` has no backend specifics in it, to
   rename it to ``FigureManager``, and move to a new file
   ``backend_managers.py`` noting that:

   1. This allows us to break up the conversion of backends into
      separate PRs as we can keep the existing ``FigureManagerBase``
      class and its dependencies intact.
   2. and this also anticipates MEP22 where the new
      ``NavigationBase`` has morphed into a backend independent
      ``ToolManager``.

+--------------------------------------+------------------------------+---------------------+--------------------------------+
|FigureManagerBase(canvas, num)        |FigureManager(figure, num)    |``WindowBase(title)``|Notes                           |
|                                      |                              |                     |                                |
+======================================+==============================+=====================+================================+
|show                                  |                              |show                 |                                |
+--------------------------------------+------------------------------+---------------------+--------------------------------+
|destroy                               |calls destroy on all          |destroy              |                                |
|                                      |components                    |                     |                                |
+--------------------------------------+------------------------------+---------------------+--------------------------------+
|full_screen_toggle                    |handles logic                 |set_fullscreen       |                                |
+--------------------------------------+------------------------------+---------------------+--------------------------------+
|resize                                |                              |resize               |                                |
+--------------------------------------+------------------------------+---------------------+--------------------------------+
|key_press                             |key_press                     |                     |                                |
+--------------------------------------+------------------------------+---------------------+--------------------------------+
|get_window_title                      |                              |get_window_title     |                                |
+--------------------------------------+------------------------------+---------------------+--------------------------------+
|set_window_title                      |                              |set_window_title     |                                |
+--------------------------------------+------------------------------+---------------------+--------------------------------+
|                                      |_get_toolbar                  |                     |A common method to all          |
|                                      |                              |                     |subclasses of FigureManagerBase |
+--------------------------------------+------------------------------+---------------------+--------------------------------+
|                                      |                              |set_default_size     |                                |
+--------------------------------------+------------------------------+---------------------+--------------------------------+
|                                      |                              |add_element_to_window|                                |
+--------------------------------------+------------------------------+---------------------+--------------------------------+


+----------+------------+-------------+
|ShowBase  |MainLoopBase|Notes        |
+==========+============+=============+
|mainloop  |begin       |             |
+----------+------------+-------------+
|          |end         |Gets called  |
|          |            |automagically|
|          |            |when no more |
|          |            |instances of |
|          |            |the subclass |
|          |            |exist        |
+----------+------------+-------------+
|__call__  |            |Method moved |
|          |            |to           |
|          |            |Gcf.show_all |
+----------+------------+-------------+

Future compatibility
====================

As eluded to above when discussing MEP 22, this refactor makes it easy
to add in new generic features.  At the moment, MEP 22 has to make
ugly hacks to each class extending from ``FigureManagerBase``.  With
this code, this only needs to get made in the single ``FigureManager``
class.  This also makes the later deprecation of
``NavigationToolbar2`` very straightforward, only needing to touch the
single ``FigureManager`` class

MEP 23 makes for another use case where this refactored code will come
in very handy.

Backward compatibility
======================

As we leave all backend code intact, only adding missing methods to
existing classes, this should work seamlessly for all use cases.  The
only difference will lie for backends that used
``FigureManager.resize`` to resize the canvas and not the window, due
to the standardisation of the API.

I would envision that the classes made obsolete by this refactor get
deprecated and removed on the same timetable as
``NavigationToolbar2``, also note that the change in call signature to
the ``FigureCanvasWx`` constructor, while backward compatible, I think
the old (imho ugly style) signature should get deprecated and removed
in the same manner as everything else.

+-------------------------+-------------------------+-------------------------+
|backend                  |manager.resize(w,h)      |Extra                    |
+=========================+=========================+=========================+
|gtk3                     |window                   |                         |
+-------------------------+-------------------------+-------------------------+
|Tk                       |canvas                   |                         |
+-------------------------+-------------------------+-------------------------+
|Qt                       |window                   |                         |
+-------------------------+-------------------------+-------------------------+
|Wx                       |canvas                   |FigureManagerWx had      |
|                         |                         |``frame`` as an alias to |
|                         |                         |window, so this also     |
|                         |                         |breaks BC.               |
+-------------------------+-------------------------+-------------------------+


Alternatives
============

If there were any alternative solutions to solving the same problem,
they should be discussed here, along with a justification for the
chosen approach.

Questions
=========

Mdehoon: Can you elaborate on how to run multiple backends
concurrently?

OceanWolf: @mdehoon, as I say, not for this MEP, but I see this MEP
opens it up as a future possibility.  Basically the ``MainLoopBase``
class acts a per backend Gcf, in this MEP it tracks the number of
figures open per backend, and manages the mainloops for those
backends.  It closes the backend specific mainloop when it detects
that no figures remain open for that backend.  Because of this I
imagine that with only a small amount of tweaking that we can do
full-multi-backend matplotlib.  No idea yet why one would want to, but
I leave the possibility there in MainLoopBase.  With all the
backend-code specifics refactored out of ``FigureManager`` also aids
in this, one manager to rule them (the backends) all.

Mdehoon: @OceanWolf, OK, thanks for the explanation. Having a uniform
API for the backends is very important for the maintainability of
matplotlib. I think this MEP is a step in the right direction.
========================
 MEP22: Toolbar rewrite
========================

.. contents::
   :local:

Status
======
**Progress**


Branches and Pull requests
==========================

Previous work:

* https://github.com/matplotlib/matplotlib/pull/1849
* https://github.com/matplotlib/matplotlib/pull/2557
* https://github.com/matplotlib/matplotlib/pull/2465

Pull Requests:

* Removing the NavigationToolbar classes
  https://github.com/matplotlib/matplotlib/pull/2740 **CLOSED**
* Keeping the NavigationToolbar classes https://github.com/matplotlib/matplotlib/pull/2759 **CLOSED**
* Navigation by events: https://github.com/matplotlib/matplotlib/pull/3652

Abstract
========

The main goal of this MEP is to make it easier to modify (add, change,
remove) the way the user interacts with the figures.

The user interaction with the figure is deeply integrated within the
Canvas and Toolbar. Making extremely difficult to do any modification.

This MEP proposes the separation of this interaction into Toolbar,
Navigation and Tools to provide independent access and
reconfiguration.

This approach will make easier to create and share tools among
users. In the far future, we can even foresee a kind of Marketplace
for ``Tool``\s where the most popular can be added into the main
distribution.

Detailed description
====================

The reconfiguration of the Toolbar is complex, most of the time it
requires a custom backend.

The creation of custom Tools sometimes interferes with the Toolbar, as
example see https://github.com/matplotlib/matplotlib/issues/2694 also
the shortcuts are hardcoded and again not easily modifiable
https://github.com/matplotlib/matplotlib/issues/2699

The proposed solution is to take the actions out of the ``Toolbar`` and the
shortcuts out of the ``Canvas``. The actions and shortcuts will be in the form
of ``Tool``\s.

A new class ``Navigation`` will be the bridge between the events from the
``Canvas`` and ``Toolbar`` and redirect them to the appropriate ``Tool``.

At the end the user interaction will be divided into three classes:

* NavigationBase: This class is instantiated for each FigureManager
  and connect the all user interactions with the Tools
* ToolbarBase: This existing class is relegated only as a GUI access
  to Tools.
* ToolBase: Is the basic definition of Tools.


Implementation
==============

ToolBase(object)
----------------

Tools can have a graphical representation as the ``SubplotTool`` or not even be
present in the Toolbar as ``Quit``.

The `.ToolBase` has the following class attributes for configuration at definition time

* keymap = None: Key(s) to be used to trigger the tool
* description = '': Small description of the tool
* image = None: Image that is used in the toolbar

The following instance attributes are set at instantiation:

* name
* navigation

Methods
~~~~~~~

* ``trigger(self, event)``: This is the main method of the Tool, it is called
  when the Tool is triggered by:

  * Toolbar button click
  * keypress associated with the Tool Keymap
  * Call to navigation.trigger_tool(name)

* ``set_figure(self, figure)``: Set the figure and navigation attributes
* ``destroy(self, *args)``: Destroy the ``Tool`` graphical interface (if
  exists)

Available Tools
~~~~~~~~~~~~~~~

* ToolQuit
* ToolEnableAllNavigation
* ToolEnableNavigation
* ToolToggleGrid
* ToolToggleFullScreen
* ToolToggleYScale
* ToolToggleXScale
* ToolHome
* ToolBack
* ToolForward
* SaveFigureBase
* ConfigureSubplotsBase

ToolToggleBase(ToolBase)
------------------------

The `.ToolToggleBase` has the following class attributes for
configuration at definition time

* radio_group = None: Attribute to group 'radio' like tools (mutually
  exclusive)
* cursor = None: Cursor to use when the tool is active

The **Toggleable** Tools, can capture keypress, mouse moves, and mouse
button press

Methods
~~~~~~~

* ``enable(self, event)``: Called by `.ToolToggleBase.trigger` method
* ``disable(self, event)``: Called when the tool is untoggled
* ``toggled``: **Property** True or False

Available Tools
~~~~~~~~~~~~~~~

* ToolZoom
* ToolPan

NavigationBase
--------------

Defines the following attributes:

* canvas:
* keypresslock: Lock to know if the ``canvas`` ``key_press_event`` is
  available and process it
* messagelock: Lock to know if the message is available to write

Methods (intended for the end user)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

* ``nav_connect(self, s, func)``: Connect to navigation for events
* ``nav_disconnect(self, cid)``: Disconnect from navigation event
* ``message_event(self, message, sender=None)``: Emit a
  tool_message_event event
* ``active_toggle(self)``: **Property** The currently toggled tools or
  None
* ``get_tool_keymap(self, name)``: Return a list of keys that are
  associated with the tool
* ``set_tool_keymap(self, name, ``*keys``)``: Set the keys for the given tool
* ``remove_tool(self, name)``: Removes tool from the navigation control.
* ``add_tools(self, tools)``: Add multiple tools to ``Navigation``
* ``add_tool(self, name, tool, group=None, position=None)``: Add a tool
  to the ``Navigation``
* ``tool_trigger_event(self, name, sender=None, canvasevent=None,
  data=None)``: Trigger a tool and fire the event
* ``tools``:  **Property** A dict with available tools with
  corresponding keymaps, descriptions and objects
* ``get_tool(self, name)``: Return the tool object

ToolbarBase
-----------

Methods (for backend implementation)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

* ``add_toolitem(self, name, group, position, image, description, toggle)``:
  Add a toolitem to the toolbar. This method is a callback from
  ``tool_added_event`` (emitted by navigation)
* ``set_message(self, s)``: Display a message on toolbar or in status bar
* ``toggle_toolitem(self, name)``: Toggle the toolitem without firing event.
* ``remove_toolitem(self, name)``: Remove a toolitem from the ``Toolbar``


Backward compatibility
======================

For backward compatibility added 'navigation' to the list of values
supported by :rc:`toolbar`, that is used for ``Navigation`` classes
instantiation instead of the NavigationToolbar classes

With this parameter, it makes it transparent to anyone using the
existing backends.

[@pelson comment: This also gives us an opportunity to avoid needing
to implement all of this in the same PR - some backends can
potentially exist without the new functionality for a short while (but
it must be done at some point).]
=========================================================================
 MEP15: Fix axis autoscaling when limits are specified for one axis only
=========================================================================

.. contents::
   :local:

Status
======

**Discussion**

Branches and Pull requests
==========================

None so far.

Abstract
========

When one Axis of a 2-dimensional plot is overridden via `~.Axes.set_xlim` or
`~.Axes.set_ylim`, automatic scaling of the remaining Axis should be based on
the data that falls within the specified limits of the first Axis.

Detailed description
====================

When axis limits for a 2-D plot are specified for one axis only (via `~.Axes.set_xlim` or
`~.Axes.set_ylim`), matplotlib currently does not currently rescale the other axis.  The
result is that the displayed curves or symbols may be compressed into a tiny
portion of the available area, so that the final plot conveys much less
information than it would with appropriate axis scaling.

The proposed change of behavior would make matplotlib choose the scale for the
remaining axis using only the data that falls within the limits for the axis
where limits were specified.

Implementation
==============

I don't know enough about the internals of matplotlib to be able to suggest an
implementation.

Backward compatibility
======================

From the standpoint of software interfaces, there would be no break in
backward compatibility.  Some outputs would be different, but if the user
truly desires the previous behavior, he/she can achieve this by overriding
the axis scaling for both axes.

Alternatives
============

The only alternative that I can see is to maintain the status quo.
.. _MEP-index:

.. include:: README.rst

.. only:: html

   :Release: |version|
   :Date: |today|

.. toctree::
   :maxdepth: 1

   template

.. toctree::
   :glob:
   :maxdepth: 1

   MEP*
=======================================
 MEP24: Negative radius in polar plots
=======================================

.. contents::
   :local:



Status
======
*Discussion*

Branches and Pull requests
==========================

None

Abstract
========

It is clear that polar plots need to be able to gracefully handle
negative r values (not by clipping or reflection).

Detailed description
====================

One obvious application that we should support is bB plots (see
https://github.com/matplotlib/matplotlib/issues/1730#issuecomment-40815837),
but this seems more generally useful (for example growth rate as a
function of angle).  The assumption in the current code (as I
understand it) is that the center of the graph is ``r==0``, however it
would be good to be able to set the center to be at any ``r`` (with any
value less than the offset clipped).

Implementation
==============


Related Issues
==============
#1730, #1603, #2203, #2133



Backward compatibility
======================


Alternatives
============
==================================
 MEP9: Global interaction manager
==================================

.. contents::
   :local:

Add a global manager for all user interactivity with artists; make any
artist resizeable, moveable, highlightable, and selectable as desired
by the user.

Status
======

**Discussion**

Branches and Pull requests
==========================
https://github.com/dhyams/matplotlib/tree/MEP9

Abstract
========

The goal is to be able to interact with matplotlib artists in a very
similar way as drawing programs do.  When appropriate, the user should
be able to move, resize, or select an artist that is already on the
canvas.  Of course, the script writer is ultimately in control of
whether an artist is able to be interacted with, or whether it is
static.

This code to do this has already been privately implemented and
tested, and would need to be migrated from its current "mixin"
implementation, to a bona-fide part of matplotlib.

The end result would be to have four new keywords available to
matplotlib.artist.Artist: _moveable_, _resizeable_, _selectable_, and
_highlightable_.  Setting any one of these keywords to True would
activate interactivity for that artist.

In effect, this MEP is a logical extension of event handling in
matplotlib; matplotlib already supports "low level" interactions like
left mouse presses, a key press, or similar.  The MEP extends the
support to the logical level, where callbacks are performed on the
artists when certain interactive gestures from the user are detected.

Detailed description
====================

This new functionality would be used to allow the end-user to better
interact with the graph.  Many times, a graph is almost what the user
wants, but a small repositioning and/or resizing of components is
necessary.  Rather than force the user to go back to the script to
trial-and-error the location, and simple drag and drop would be
appropriate.

Also, this would better support applications that use matplotlib;
here, the end-user has no reasonable access or desire to edit the
underlying source in order to fine-tune a plot.  Here, if matplotlib
offered the capability, one could move or resize artists on the canvas
to suit their needs.  Also, the user should be able to highlight (with
a mouse over) an artist, and select it with a double-click, if the
application supports that sort of thing.  In this MEP, we also want to
support the highlighting and selection natively; it is up to
application to handle what happens when the artist is selected.  A
typical handling would be to display a dialog to edit the properties
of the artist.

In the future, as well (this is not part of this MEP), matplotlib
could offer backend-specific property dialogs for each artist, which
are raised on artist selection.  This MEP would be a necessary
stepping stone for that sort of capability.

There are currently a few interactive capabilities in matplotlib
(e.g. legend.draggable()), but they tend to be scattered and are not
available for all artists.  This MEP seeks to unify the interactive
interface and make it work for all artists.

The current MEP also includes grab handles for resizing artists, and
appropriate boxes drawn when artists are moved or resized.

Implementation
==============
* Add appropriate methods to the "tree" of artists so that the
  interactivity manager has a consistent interface for the
  interactivity manager to deal with.  The proposed methods to add to
  the artists, if they are to support interactivity, are:

  * get_pixel_position_ll(self): get the pixel position of the lower
    left corner of the artist's bounding box
  * get_pixel_size(self): get the size of the artist's bounding box,
    in pixels
  * set_pixel_position_and_size(self,x,y,dx,dy): set the new size of
    the artist, such that it fits within the specified bounding box.

* add capability to the backends to 1) provide cursors, since these
  are needed for visual indication of moving/resizing, and 2) provide
  a function that gets the current mouse position
* Implement the manager.  This has already been done privately (by
  dhyams) as a mixin, and has been tested quite a bit.  The goal would
  be to move the functionality of the manager into the artists so that
  it is in matplotlib properly, and not as a "monkey patch" as I
  currently have it coded.



Current summary of the mixin
============================

(Note that this mixin is for now just private code, but can be added
to a branch obviously)

InteractiveArtistMixin:

Mixin class to make any generic object that is drawn on a matplotlib
canvas moveable and possibly resizeable.  The Powerpoint model is
followed as closely as possible; not because I'm enamoured with
Powerpoint, but because that's what most people understand.  An artist
can also be selectable, which means that the artist will receive the
on_activated() callback when double clicked.  Finally, an artist can
be highlightable, which means that a highlight is drawn on the artist
whenever the mouse passes over.  Typically, highlightable artists will
also be selectable, but that is left up to the user.  So, basically
there are four attributes that can be set by the user on a per-artist
basis:

* highlightable
* selectable
* moveable
* resizeable

To be moveable (draggable) or resizeable, the object that is the
target of the mixin must support the following protocols:

* get_pixel_position_ll(self)
* get_pixel_size(self)
* set_pixel_position_and_size(self,x,y,sx,sy)

Note that nonresizeable objects are free to ignore the sx and sy
parameters. To be highlightable, the object that is the target of the
mixin must also support the following protocol:

* get_highlight(self)

Which returns a list of artists that will be used to draw the highlight.

If the object that is the target of the mixin is not an matplotlib
artist, the following protocols must also be implemented.  Doing so is
usually fairly trivial, as there has to be an artist *somewhere* that
is being drawn.  Typically your object would just route these calls to
that artist.

* get_figure(self)
* get_axes(self)
* contains(self,event)
* set_animated(self,flag)
* draw(self,renderer)
* get_visible(self)

The following notifications are called on the artist, and the artist
can optionally implement these.

* on_select_begin(self)
* on_select_end(self)
* on_drag_begin(self)
* on_drag_end(self)
* on_activated(self)
* on_highlight(self)
* on_right_click(self,event)
* on_left_click(self,event)
* on_middle_click(self,event)
* on_context_click(self,event)
* on_key_up(self,event)
* on_key_down(self,event)

The following notifications are called on the canvas, if no
interactive artist handles the event:

* on_press(self,event)
* on_left_click(self,event)
* on_middle_click(self,event)
* on_right_click(self,event)
* on_context_click(self,event)
* on_key_up(self,event)
* on_key_down(self,event)

The following functions, if present, can be used to modify the
behavior of the interactive object:

* press_filter(self,event) # determines if the object wants to have
  the press event routed to it
* handle_unpicked_cursor() # can be used by the object to set a cursor
  as the cursor passes over the object when it is unpicked.

Supports multiple canvases, maintaining a drag lock, motion notifier,
and a global "enabled" flag per canvas. Supports fixed aspect ratio
resizings by holding the shift key during the resize.

Known problems:

* Zorder is not obeyed during the selection/drag operations.  Because
  of the blit technique used, I do not believe this can be fixed.  The
  only way I can think of is to search for all artists that have a
  zorder greater then me, set them all to animated, and then redraw
  them all on top during each drag refresh.  This might be very slow;
  need to try.
* the mixin only works for wx backends because of two things: 1) the
  cursors are hardcoded, and 2) there is a call to
  wx.GetMousePosition() Both of these shortcomings are reasonably
  fixed by having each backend supply these things.

Backward compatibility
======================

No problems with backward compatibility, although once this is in
place, it would be appropriate to obsolete some of the existing
interactive functions (like legend.draggable())

Alternatives
============

None that I know of.
=====================================
 MEP12: Improve Gallery and Examples
=====================================
.. contents::
   :local:


Status
======

**Progress**

Initial changes added in 1.3. Conversion of the gallery is on-going.
29 September 2015 - The last ``pylab_examples`` where ``pylab`` is imported has
been converted over to use :mod:`matplotlib.pyplot` and `numpy`.

Branches and Pull requests
==========================

#1623, #1924, #2181

PR `#2474 <https://github.com/matplotlib/matplotlib/pull/2474>`_
demonstrates a single example being cleaned up and moved to the
appropriate section.

Abstract
========

Reorganizing the matplotlib plot gallery would greatly simplify
navigation of the gallery. In addition, examples should be cleaned-up
and simplified for clarity.


Detailed description
====================

The matplotlib gallery was recently set up to split examples up into
sections.  As discussed in that PR [1]_, the current example sections
(``api``, ``pylab_examples``) aren't terribly useful to users: New
sections in the gallery would help users find relevant examples.

These sections would also guide a cleanup of the examples: Initially,
all the current examples would remain and be listed under their
current directories.  Over time, these examples could be cleaned up
and moved into one of the new sections.

This process allows users to easily identify examples that need to be
cleaned up; i.e. anything in the ``api`` and ``pylab_examples``
directories.


Implementation
==============

1. Create new gallery sections. [Done]
2. Clean up examples and move them to the new gallery sections (over the course
   of many PRs and with the help of many users/developers). [In progress]

Gallery sections
----------------

The naming of sections is critical and will guide the clean-up
effort. The current sections are:

* Lines, bars, and markers (more-or-less 1D data)
* Shapes and collections
* Statistical plots
* Images, contours, and fields
* Pie and polar charts: Round things
* Color
* Text, labels, and annotations
* Ticks and spines
* Subplots, axes, and figures
* Specialty plots (e.g., sankey, radar, tornado)
* Showcase (plots with tweaks to make them publication-quality)
* separate sections for toolboxes (already exists: 'mplot3d',
  'axes_grid', 'units', 'widgets')

These names are certainly up for debate. As these sections grow, we
should reevaluate them and split them up as necessary.


Clean up guidelines
-------------------

The current examples in the ``api`` and ``pylab_examples`` sections of
the gallery would remain in those directories until they are cleaned
up. After clean-up, they would be moved to one of the new gallery
sections described above. "Clean-up" should involve:

* `sphinx-gallery docstrings <https://sphinx-gallery.readthedocs.io/en/latest/>`_:
  a title and a description of the example formatted as follows, at the top of
  the example::

    """
    ===============================
    Colormaps alter your perception
    ===============================

    Here I plot the function

    .. math:: f(x, y) = \sin(x) + \cos(y)

    with different colormaps. Look at how colormaps alter your perception!
    """


* PEP8_ clean-ups (running `flake8
  <https://pypi.org/project/flake8/>`_, or a similar checker, is
  highly recommended)
* Commented-out code should be removed.
* Replace uses of `pylab` interface with `.pyplot` (+ `numpy`,
  etc.). See `c25ef1e
  <https://github.com/tonysyu/matplotlib/commit/c25ef1e02b3a0ecb279492409dac0de9b3d2c0e2>`_
* Remove shebang line, e.g.:

      #!/usr/bin/env python

* Use consistent imports. In particular:

      import numpy as np

      import matplotlib.pyplot as plt

  Avoid importing specific functions from these modules (e.g. ``from
  numpy import sin``)

* Each example should focus on a specific feature (excluding
  ``showcase`` examples, which will show more "polished"
  plots). Tweaking unrelated to that feature should be removed. See
  `f7b2217
  <https://github.com/tonysyu/matplotlib/commit/f7b2217a1f92343e8aca0684d19c9915cc2e8674>`_,
  `e57b5fc
  <https://github.com/tonysyu/matplotlib/commit/e57b5fc31fbad83ed9c43c77ef15368efdcb9ec1>`_,
  and `1458aa8
  <https://github.com/tonysyu/matplotlib/commit/1458aa87c5eae9dd99e141956a6adf7a0f3c6707>`_

Use of `pylab` should be demonstrated/discussed on a dedicated help
page instead of the gallery examples.

**Note:** When moving an existing example, you should search for
references to that example.  For example, the API documentation for
:file:`axes.py` and :file:`pyplot.py` may use these examples to generate
plots. Use your favorite search tool (e.g., grep, ack, `grin
<https://pypi.org/project/grin/>`_, `pss
<https://pypi.org/project/pss/>`_) to search the matplotlib
package. See `2dc9a46
<https://github.com/tonysyu/matplotlib/commit/2dc9a4651e5e566afc0866c603aa8d06aaf32b71>`_
and `aa6b410
<https://github.com/tonysyu/matplotlib/commit/aa6b410f9fa085ccf5f4f962a6f26af5beeae7af>`_


Additional suggestions
~~~~~~~~~~~~~~~~~~~~~~

* Provide links (both ways) between examples and API docs for the
  methods/objects used. (issue `#2222
  <https://github.com/matplotlib/matplotlib/issues/2222>`_)
* Use ``plt.subplots`` (note trailing "s") in preference over
  ``plt.subplot``.
* Rename the example to clarify it's purpose. For example, the most
  basic demo of ``imshow`` might be ``imshow_demo.py``, and one
  demonstrating different interpolation settings would be
  ``imshow_demo_interpolation.py`` (*not* ``imshow_demo2.py``).
* Split up examples that try to do too much. See `5099675
  <https://github.com/tonysyu/matplotlib/commit/509967518ce5ce5ba31edf12486ffaa344e748f2>`_
  and `fc2ab07
  <https://github.com/tonysyu/matplotlib/commit/fc2ab07cc586abba4c024d8c0d841c4357a3936f>`_
* Delete examples that don't show anything new.
* Some examples exercise esoteric features for unit testing. These
  tweaks should be moved out of the gallery to an example in the
  ``unit`` directory located in the root directory of the package.
* Add plot titles to clarify intent of the example. See `bd2b13c
  <https://github.com/tonysyu/matplotlib/commit/bd2b13c54bf4aa2058781b9a805d68f2feab5ba5>`_


Backward compatibility
======================

The website for each Matplotlib version is readily accessible, so
users who want to refer to old examples can still do so.


Alternatives
============

Tags
----

Tagging examples will also help users search the example gallery. Although tags
would be a big win for users with specific goals, the plot gallery will remain
the entry point to these examples, and sections could really help users
navigate the gallery. Thus, tags are complementary to this reorganization.


.. _PEP8: https://www.python.org/dev/peps/pep-0008/

.. [1] https://github.com/matplotlib/matplotlib/pull/714
:orphan:


################################
Matplotlib Enhancement Proposals
################################

Matplotlib Enhancement Proposals (MEP), inspired by cpython's `PEP's
<https://www.python.org/dev/peps/>`__ but less formal, are design
documents for large or controversial changes to Matplotilb.  These
documents should provide a discussion of both why and how the changes
should be made.

To create a new MEP open a pull request (PR) adding a file based on
:ref:`the template <MEP-template>` to this the MEP directory.  For the
initial PR only a rough description is required and it should be
merged quickly.  Further detailed discussion can happen in follow on
PRs.

MEP25: Serialization
====================
.. contents::
   :local:

Status
------

**Rejected**

This work is important, but this particular effort has stalled.

Branches and Pull requests
--------------------------

* development branches:

* related pull requests:

Abstract
--------

This MEP aims at adding a serializable ``Controller`` objects to act
as an ``Artist`` managers. Users would then communicate changes to an
``Artist`` via a ``Controller``. In this way, functionality of the
``Controller`` objects may be added incrementally since each
``Artist`` is still responsible for drawing everything. The goal is to
create an API that is usable both by graphing libraries requiring
high-level descriptions of figures and libraries requiring low-level
interpretations.

Detailed description
--------------------

Matplotlib is a core plotting engine with an API that many users
already understand. It's difficult/impossible for other graphing
libraries to (1) get a complete figure description, (2) output raw
data from the figure object as the user has provided it, (3)
understand the semantics of the figure objects without heuristics,
and (4) give matplotlib a complete figure description to visualize. In
addition, because an ``Artist`` has no conception of its own semantics
within the figure, it's difficult to interact with them in a natural
way.

In this sense, matplotlib will adopt a standard
Model-View-Controller (MVC) framework. The *Model* will be the user
defined data, style, and semantics. The *Views* are the ensemble of
each individual ``Artist``, which are responsible for producing the
final image based on the *model*. The *Controller* will be the
``Controller`` object managing its set of ``Artist`` objects.

The ``Controller`` must be able to export the information that it's
carrying about the figure on command, perhaps via a ``to_json`` method
or similar. Because it would be extremely extraneous to duplicate all
of the information in the model with the controller, only
user-specified information (data + style) are explicitly kept. If a
user wants more information (defaults) from the view/model, it should
be able to query for it.

- This might be annoying to do, non-specified kwargs are pulled from
  the rcParams object which is in turn created from reading a user
  specified file and can be dynamically changed at run time.  I
  suppose we could keep a dict of default defaults and compare against
  that. Not clear how this will interact with the style sheet
  [[MEP26]] - @tacaswell

Additional Notes:

* The "raw data" does not necessarily need to be a ``list``,
  ``ndarray``, etc. Rather, it can more abstractly just have a method
  to yield data when needed.

* Because the ``Controller`` will contain extra information that users
  may not want to keep around, it should *not* be created by
  default. You should be able to both (a) instantiate a ``Controller``
  with a figure and (b) build a figure with a ``Controller``.

Use Cases:

* Export all necessary informat
* Serializing a matplotlib figure, saving it, and being able to rerun later.
* Any other source sending an appropriately formatted representation to matplotlib to open

Examples
--------
Here are some examples of what the controllers should be able to do.

1. Instantiate a matplotlib figure from a serialized representation (e.g., JSON): ::

    import json
    from matplotlib.controllers import Controller
    with open('my_figure') as f:
        o = json.load(f)
    c = Controller(o)
    fig = c.figure

2. Manage artists from the controller (e.g., Line2D): ::

    # not really sure how this should look
    c.axes[0].lines[0].color = 'b'
    # ?

3. Export serializable figure representation: ::

    o = c.to_json()
    # or... we should be able to throw a figure object in there too
    o = Controller.to_json(mpl_fig)

Implementation
--------------

1. Create base ``Controller`` objects that are able to manage
   ``Artist`` objects (e.g., ``Hist``)

    Comments:

    * initialization should happen via unpacking ``**``, so we need a
      copy of call signature parameter for the ``Artist`` we're
      ultimately trying to control. Unfortunate hard-coded
      repetition...
    * should the additional ``**kwargs`` accepted by each ``Artist``
      be tracked at the ``Controller``
    * how does a ``Controller`` know which artist belongs where? E.g.,
      do we need to pass ``axes`` references?

    Progress:

    * A simple NB demonstrating some functionality for
      ``Line2DController`` objects:
      https://nbviewer.jupyter.org/gist/theengineear/f0aa8d79f64325e767c0

2. Write in protocols for the ``Controller`` to *update* the model.

    Comments:

    * how should containers be dealt with? E.g., what happens to old
      patches when we re-bin a histogram?
    * in the link from (1), the old line is completely destroyed and
      redrawn, what if something is referencing it?

3. Create method by which a json object can be assembled from the
   ``Controllers``
4. Deal with serializing the unserializable aspects of a figure (e.g.,
   non-affine transforms?)
5. Be able to instantiate from a serialized representation
6. Reimplement the existing pyplot and Axes method,
   e.g. ``pyplot.hist`` and ``Axes.hist`` in terms of the new
   controller class.

> @theengineer: in #2 above, what do you mean by *get updates* from
each ``Artist``?

^ Yup. The ``Controller`` *shouldn't* need to get updated. This just
happens in #3. Delete comments when you see this.

Backward compatibility
----------------------

* pickling will change
* non-affine transformations will require a defined pickling method

Alternatives
------------

PR #3150 suggested adding semantics by parasitically attaching extra
containers to axes objects. This is a more complete solution with what
should be a more developed/flexible/powerful framework.
.. _MEP-template:

==============
 MEP Template
==============

.. contents::
   :local:


This MEP template is a guideline of the sections that a MEP should
contain.  Extra sections may be added if appropriate, and unnecessary
sections may be noted as such.

Status
======

MEPs go through a number of phases in their lifetime:

- **Discussion**: The MEP is being actively discussed on the mailing
  list and it is being improved by its author.  The mailing list
  discussion of the MEP should include the MEP number (MEPxxx) in the
  subject line so they can be easily related to the MEP.

- **Progress**: Consensus was reached and implementation work has begun.

- **Completed**: The implementation has been merged into main.

- **Superseded**: This MEP has been abandoned in favor of another
  approach.

- **Rejected**: There are currently no plans to implement the proposal.

Branches and Pull requests
==========================

All development branches containing work on this MEP should be linked to from here.

All pull requests submitted relating to this MEP should be linked to
from here.  (A MEP does not need to be implemented in a single pull
request if it makes sense to implement it in discrete phases).

Abstract
========

The abstract should be a short description of what the MEP will achieve.

Detailed description
====================

This section describes the need for the MEP.  It should describe the
existing problem that it is trying to solve and why this MEP makes the
situation better.  It should include examples of how the new
functionality would be used and perhaps some use cases.

Implementation
==============

This section lists the major steps required to implement the MEP.
Where possible, it should be noted where one step is dependent on
another, and which steps may be optionally omitted.  Where it makes
sense, each step should include a link related pull requests as the
implementation progresses.

Backward compatibility
======================

This section describes the ways in which the MEP breaks backward incompatibility.

Alternatives
============

If there were any alternative solutions to solving the same problem,
they should be discussed here, along with a justification for the
chosen approach.
====================
MEP14: Text handling
====================

.. contents::
   :local:


Status
======

- **Discussion**

Branches and Pull requests
==========================

Issue #253 demonstrates a bug where using the bounding box rather than
the advance width of text results in misaligned text.  This is a minor
point in the grand scheme of things, but it should be addressed as
part of this MEP.

Abstract
========

By reorganizing how text is handled, this MEP aims to:

- improve support for Unicode and non-ltr languages
- improve text layout (especially multi-line text)
- allow support for more fonts, especially non-Apple-format TrueType
  fonts and OpenType fonts.
- make the font configuration easier and more transparent

Detailed description
====================

**Text layout**

At present, matplotlib has two different ways to render text:
"built-in" (based on FreeType and our own Python code), and "usetex"
(based on calling out to a TeX installation).  Adjunct to the
"built-in" renderer there is also the Python-based "mathtext" system
for rendering mathematical equations using a subset of the TeX
language without having a TeX installation available.  Support for
these two engines in strewn about many source files, including every
backend, where one finds clauses like ::

  if rcParams['text.usetex']: # do one thing else: # do another

Adding a third text rendering approach (more on that later) would
require editing all of these places as well, and therefore doesn't
scale.

Instead, this MEP proposes adding a concept of "text engines", where
the user could select one of many different approaches for rendering
text.  The implementations of each of these would be localized to
their own set of modules, and not have little pieces around the whole
source tree.

Why add more text rendering engines?  The "built-in" text rendering
has a number of shortcomings.

- It only handles right-to-left languages, and doesn't handle many
  special features of Unicode, such as combining diacriticals.
- The multiline support is imperfect and only supports manual
  line-breaking -- it can not break up a paragraph into lines of a
  certain length.
- It also does not handle inline formatting changes in order to
  support something like Markdown, reStructuredText or HTML.  (Though
  rich-text formatting is contemplated in this MEP, since we want to
  make sure this design allows it, the specifics of a rich-text
  formatting implementation is outside of the scope of this MEP.)

Supporting these things is difficult, and is the "full-time job" of a
number of other projects:

- pango_/harfbuzz_
- QtTextLayout_
- `Microsoft DirectWrite`_
- `Apple Core Text`_

.. _pango: https://www.pango.org/
.. _harfbuzz: https://www.freedesktop.org/wiki/Software/HarfBuzz/
.. _QtTextLayout: https://doc.qt.io/archives/qt-4.8/qtextlayout.html
.. _Microsoft DirectWrite: https://docs.microsoft.com/en-ca/windows/win32/directwrite/introducing-directwrite
.. _Apple Core Text: https://developer.apple.com/library/archive/documentation/StringsTextFonts/Conceptual/CoreText_Programming/Overview/Overview.html

Of the above options, it should be noted that harfbuzz_ is designed
from the start as a cross platform option with minimal dependencies,
so therefore is a good candidate for a single option to support.

Additionally, for supporting rich text, we could consider using
`WebKit <https://webkit.org/>`_, and possibly whether than
represents a good single cross-platform option.  Again, however, rich
text formatting is outside of the scope of this project.

Rather than trying to reinvent the wheel and add these features to
matplotlib's "built-in" text renderer, we should provide a way to
leverage these projects to get more powerful text layout.  The
"built-in" renderer will still need to exist for reasons of ease of
installation, but its feature set will be more limited compared to the
others.  [TODO: This MEP should clearly decide what those limited
features are, and fix any bugs to bring the implementation into a
state of working correctly in all cases that we want it to work.  I
know @leejjoon has some thoughts on this.]

**Font selection**

Going from an abstract description of a font to a file on disk is the
task of the font selection algorithm -- it turns out to be much more
complicated than it seems at first.

The "built-in" and "usetex" renderers have very different ways of
handling font selection, given their different technologies.  TeX
requires the installation of TeX-specific font packages, for example,
and can not use TrueType fonts directly.  Unfortunately, despite the
different semantics for font selection, the same set of font
properties are used for each.  This is true of both the
`.FontProperties` class and the font-related `.rcParams` (which
basically share the same code underneath).  Instead, we should define
a core set of font selection parameters that will work across all text
engines, and have engine-specific configuration to allow the user to
do engine-specific things when required.  For example, it is possible
to directly select a font by name in the "built-in" using
:rc:`font.family`, but the same is not possible with "usetex".  It may be
possible to make it easier to use TrueType fonts by using XeTeX, but
users will still want to use the traditional metafonts through TeX
font packages.  So the issue still stands that different text engines
will need engine-specific configuration, and it should be more obvious
to the user which configuration will work across text engines and
which are engine-specific.

Note that even excluding "usetex", there are different ways to find
fonts.  The default is to use the font list cache in :mod:`.font_manager`
which matches fonts using our own algorithm based on the `CSS font
matching algorithm <http://www.w3.org/TR/CSS2/fonts.html#algorithm>`_.
It doesn't always do the same thing as the native font selection
algorithms on Linux (fontconfig_), Mac and
Windows, and it doesn't always find all of the fonts on the system
that the OS would normally pick up.  However, it is cross-platform,
and always finds the fonts that ship with matplotlib.  The Cairo and
MacOSX backends (and presumably a future HTML5-based backend)
currently bypass this mechanism and use the OS-native ones.  The same
is true when not embedding fonts in SVG, PS or PDF files and opening
them in a third-party viewer.  A downside there is that (at least with
Cairo, need to confirm with MacOSX) they don't always find the fonts
we ship with matplotlib.  (It may be possible to add the fonts to
their search path, though, or we may need to find a way to install our
fonts to a location the OS expects to find them).

.. _fontconfig: https://www.freedesktop.org/wiki/Software/fontconfig/

There are also special modes in the PS and PDF to only use the core
fonts that are always available to those formats.  There, the font
lookup mechanism must only match against those fonts.  It is unclear
whether the OS-native font lookup systems can handle this case.

There is also experimental support for using fontconfig_ for font
selection in matplotlib, turned off by default.  fontconfig is the
native font selection algorithm on Linux, but is also cross platform
and works well on the other platforms (though obviously is an
additional dependency there).

Many of the text layout libraries proposed above (pango, QtTextLayout,
DirectWrite and CoreText etc.) insist on using the font selection
library from their own ecosystem.

All of the above seems to suggest that we should move away from our
self-written font selection algorithm and use the native APIs where
possible.  That's what Cairo and MacOSX backends already want to use,
and it will be a requirement of any complex text layout library.  On
Linux, we already have the bones of a fontconfig_ implementation
(which could also be accessed through pango).  On Windows and Mac we
may need to write custom wrappers.  The nice thing is that the API for
font lookup is relatively small, and essentially consist of "given a
dictionary of font properties, give me a matching font file".

**Font subsetting**

Font subsetting is currently handled using ttconv.  ttconv was a
standalone commandline utility for converting TrueType fonts to
subsetted Type 3 fonts (among other features) written in 1995, which
matplotlib (well, I) forked in order to make it work as a library.  It
only handles Apple-style TrueType fonts, not ones with the Microsoft
(or other vendor) encodings.  It doesn't handle OpenType fonts at all.
This means that even though the STIX fonts come as .otf files, we have
to convert them to .ttf files to ship them with matplotlib.  The Linux
packagers hate this -- they'd rather just depend on the upstream STIX
fonts.  ttconv has also been shown to have a few bugs that have been
difficult to fix over time.

Instead, we should be able to use FreeType to get the font outlines
and write our own code (probably in Python) to output subsetted fonts
(Type 3 on PS and PDF and paths on SVG).  Freetype, as a popular and
well-maintained project, handles a wide variety of fonts in the wild.
This would remove a lot of custom C code, and remove some code
duplication between backends.

Note that subsetting fonts this way, while the easiest route, does
lose the hinting in the font, so we will need to continue, as we do
now, provide a way to embed the entire font in the file where
possible.

Alternative font subsetting options include using the subsetting
built-in to Cairo (not clear if it can be used without the rest of
Cairo), or using fontforge_ (which is a heavy and not terribly
cross-platform dependency).

.. _fontforge: https://fontforge.org

**Freetype wrappers**

Our FreeType wrapper could really use a reworking.  It defines its own
image buffer class (when a Numpy array would be easier).  While
FreeType can handle a huge diversity of font files, there are
limitations to our wrapper that make it much harder to support
non-Apple-vendor TrueType files, and certain features of OpenType
files.  (See #2088 for a terrible result of this, just to support the
fonts that ship with Windows 7 and 8).  I think a fresh rewrite of
this wrapper would go a long way.

**Text anchoring and alignment and rotation**

The handling of baselines was changed in 1.3.0 such that the backends
are now given the location of the baseline of the text, not the bottom
of the text.  This is probably the correct behavior, and the MEP
refactoring should also follow this convention.

In order to support alignment on multi-line text, it should be the
responsibility of the (proposed) text engine to handle text alignment.
For a given chunk of text, each engine calculates a bounding box for
that text and the offset of the anchor point within that box.
Therefore, if the va of a block was "top", the anchor point would be
at the top of the box.

Rotating of text should always be around the anchor point.  I'm not
sure that lines up with current behavior in matplotlib, but it seems
like the sanest/least surprising choice.  [This could be revisited
once we have something working].  Rotation of text should not be
handled by the text engine -- that should be handled by a layer
between the text engine and the rendering backend so it can be handled
in a uniform way.  [I don't see any advantage to rotation being
handled by the text engines individually...]

There are other problems with text alignment and anchoring that should
be resolved as part of this work.  [TODO: enumerate these].

**Other minor problems to fix**

The mathtext code has backend-specific code -- it should instead
provide its output as just another text engine.  However, it's still
desirable to have mathtext layout inserted as part of a larger layout
performed by another text engine, so it should be possible to do this.
It's an open question whether embedding the text layout of an
arbitrary text engine in another should be possible.

The text mode is currently set by a global rcParam ("text.usetex") so
it's either all on or all off.  We should continue to have a global
rcParam to choose the text engine ("text.layout_engine"), but it
should under the hood be an overridable property on the `.Text` object,
so the same figure can combine the results of multiple text layout
engines if necessary.


Implementation
==============

A concept of a "text engine" will be introduced.  Each text engine
will implement a number of abstract classes.  The ``TextFont`` interface
will represent text for a given set of font properties.  It isn't
necessarily limited to a single font file -- if the layout engine
supports rich text, it may handle a number of font files in a family.
Given a ``TextFont`` instance, the user can get a ``TextLayout`` instance,
which represents the layout for a given string of text in a given
font.  From a ``TextLayout``, an iterator over ``TextSpan``\ s is returned
so the engine can output raw editable text using as few spans as
possible.  If the engine would rather get individual characters, they
can be obtained from the ``TextSpan`` instance::


  class TextFont(TextFontBase):
      def __init__(self, font_properties):
          """
          Create a new object for rendering text using the given font properties.
          """
          pass

      def get_layout(self, s, ha, va):
          """
          Get the TextLayout for the given string in the given font and
          the horizontal (left, center, right) and verticalalignment (top,
          center, baseline, bottom)
          """
          pass

  class TextLayout(TextLayoutBase):
      def get_metrics(self):
          """
          Return the bounding box of the layout, anchored at (0, 0).
          """
          pass

      def get_spans(self):
          """
          Returns an iterator over the spans of different in the layout.
          This is useful for backends that want to editable raw text as
          individual lines.  For rich text where the font may change,
          each span of different font type will have its own span.
          """
          pass

      def get_image(self):
          """
          Returns a rasterized image of the text.  Useful for raster backends,
          like Agg.

          In all likelihood, this will be overridden in the backend, as it can
          be created from get_layout(), but certain backends may want to
          override it if their library provides it (as freetype does).
          """
          pass

      def get_rectangles(self):
          """
          Returns an iterator over the filled black rectangles in the layout.
          Used by TeX and mathtext for drawing, for example, fraction lines.
          """
          pass

      def get_path(self):
          """
          Returns a single Path object of the entire laid out text.

          [Not strictly necessary, but might be useful for textpath
          functionality]
          """
          pass

  class TextSpan(TextSpanBase):
      x, y      # Position of the span -- relative to the text layout as a whole
                # where (0, 0) is the anchor.  y is the baseline of the span.
      fontfile  # The font file to use for the span
      text      # The text content of the span

      def get_path(self):
          pass  # See TextLayout.get_path

      def get_chars(self):
          """
          Returns an iterator over the characters in the span.
          """
          pass

  class TextChar(TextCharBase):
      x, y      # Position of the character -- relative to the text layout as
                # a whole, where (0, 0) is the anchor.  y is in the baseline
                # of the character.
      codepoint # The unicode code point of the character -- only for informational
                # purposes, since the mapping of codepoint to glyph_id may have been
                # handled in a complex way by the layout engine.  This is an int
                # to avoid problems on narrow Unicode builds.
      glyph_id  # The index of the glyph within the font
      fontfile  # The font file to use for the char

      def get_path(self):
          """
          Get the path for the character.
          """
  pass


Graphic backends that want to output subset of fonts would likely
build up a file-global dictionary of characters where the keys are
(fontname, glyph_id) and the values are the paths so that only one
copy of the path for each character will be stored in the file.

Special casing: The "usetex" functionality currently is able to get
Postscript directly from TeX to insert directly in a Postscript file,
but for other backends, parses a DVI file and generates something more
abstract.  For a case like this, ``TextLayout`` would implement
``get_spans`` for most backends, but add ``get_ps`` for the Postscript
backend, which would look for the presence of this method and use it
if available, or fall back to ``get_spans``.  This kind of special
casing may also be necessary, for example, when the graphics backend
and text engine belong to the same ecosystem, e.g. Cairo and Pango, or
MacOSX and CoreText.

There are three main pieces to the implementation:

1) Rewriting the freetype wrapper, and removing ttconv.

 a) Once (1) is done, as a proof of concept, we can move to the
    upstream STIX .otf fonts

 b) Add support for web fonts loaded from a remote URL.  (Enabled by using freetype for font subsetting).

2) Refactoring the existing "builtin" and "usetex" code into separate text engines and to follow the API outlined above.

3) Implementing support for advanced text layout libraries.


(1) and (2) are fairly independent, though having (1) done first will
allow (2) to be simpler.  (3) is dependent on (1) and (2), but even if
it doesn't get done (or is postponed), completing (1) and (2) will
make it easier to move forward with improving the "builtin" text
engine.

Backward compatibility
======================

The layout of text with respect to its anchor and rotation will change
in hopefully small, but improved, ways.  The layout of multiline text
will be much better, as it will respect horizontal alignment.  The
layout of bidirectional text or other advanced Unicode features will
now work inherently, which may break some things if users are
currently using their own workarounds.

Fonts will be selected differently.  Hacks that used to sort of work
between the "builtin" and "usetex" text rendering engines may no
longer work.  Fonts found by the OS that weren't previously found by
matplotlib may be selected.

Alternatives
============

TBD
