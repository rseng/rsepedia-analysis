All of the people who have made at least one contribution to conda.
Authors are sorted alphabetically.

* ARF
* ARF1
* Aaron Meurer
* Alain Domissy
* Alan Du
* Albert DeFusco
* Albert Kottke
* Alex Alvarez
* Alex Hall
* Alex Liew
* Alex Wiltschko
* Almar Klein
* Amelio Vazquez-Reina
* Amir Mohammadi
* Andreas Girgensohn
* Andrew Achkar
* Andrew M. Farrell
* Andy R. Terrel
* Angela Gloyna
* Anthon van der Neut
* Anthony Scopatz
* Antoine Gallix
* Antoine Prouvost
* Antony Lee
* Anže Starič
* ApurvaWavhal
* Armin Burgmeier
* Aurelien Vallee
* Bas Nijholt
* Bastian Zimmermann
* Ben Bodenmiller
* Ben Mares
* Benedikt Wildenhain
* Benjamin Bertrand
* Benjamin Wilhelm
* Benjamin Zaitlen
* Bernardo da Eira Duarte
* Berton Earnshaw
* Billy Keyes
* Blake Nicholson
* Bojan Delic
* Brad Nemanich
* Brad S
* Bradley Kreider
* Brennan Chapman
* Brent Pedersen
* Brett Cannon
* Brett Randall
* Brian W. Hart
* Bruno Oliveira
* Bryan Van de Ven
* Casper da Costa-Luis
* Cheng H. Lee
* Chris Burr
* Chris Granade
* Chris Linton-Ford
* Chris Osborn
* Chris Tomkins-Tinch
* Christine Doig
* Christoph Buchner
* Christoph Deil
* Christoph Stich
* Christopher Barber
* Christopher Granade
* ColemanTom
* Colin Brislawn
* Cong
* Connor Martin
* Dainese Hsiao
* Dan Blanchard
* Dan Meador
* Daniel Bast
* Daniel Wehner
* Daniel Zeng
* Darren Dale
* Dave
* Dave Hirschfeld
* Dave Masino
* David Froger
* David Kent
* David Li
* David Mertz
* David Warde-Farley
* Dennis George
* Derek Ludwig
* Diogo de Campos
* Duncan Macleod
* Dylan Morroll
* Dylan Orzel
* Ed Reed
* Eli Rykoff
* Eric Dill
* Eric Prestat
* Ernst Reissner
* Eugene Van den Bulke
* Flavio Martins
* Floris Bruynooghe
* Forrest Waters
* Frederic Bastien
* Gabe Martin-Dempesy
* Gabriel Reis
* Geir Ove Myhr
* George Hartzell
* Giles Cope
* Gonzalo Peña-Castellanos
* Greg Brener
* Gregor Kržmanc
* Guilherme Quentel Melo
* Hamza Sheikh
* Havoc Pennington
* Henning Schroder
* Hsin-Hsiang Peng
* Hugo Buddelmeijer
* Iain Gillis
* Ian Stokes-Rees
* Ilan Cosman
* Ilan Schnell
* Ilango Rajagopal
* InfiniteChai
* Isaiah Norton
* Isuru Fernando
* Ivan Smirnov
* Jacob Hultman
* Jacob Smith
* Jacopo Sabbatini
* Jacques Kvam
* Jaime Rodríguez-Guerra
* James Domingo
* James Myatt
* James Penn
* James Sexton
* James Winegar
* Jan-Benedikt Jagusch
* Jan-Philipp Igla
* Jannis Leidel
* Jason Grout
* Jason Vestuto
* Jayson Messenger
* Jeffrey Gill
* Jeremy Liu
* Jesse Hamer
* Jillian Rowe
* Joe D
* Joe Jevnik
* Joel Kim
* Johan Carlin
* John Ayad
* John Kirkham
* Jonas Haag
* Jonathan J. Helmus
* Josh Mayer
* Juan Luis Cano Rodríguez
* Juan Nunez-Iglesias
* Julien Schueller
* Justyn Harriman
* Kahlil Hodgson
* Kai Tietz
* Kale Franz
* Kamil Kwiek
* Kara de la Marck
* Ken Odegard
* Kerry Watson
* Kevin Deldycke
* Kfir Zvi
* Korijn van Golen
* Kurt Wheeler
* Kyle Gerard Felker
* Larry Bradley
* Lila Hickey
* Lorcan Hamill
* Lori A. Burns
* Luc J. Bourhis
* Luis Gutierrez
* Maggie Mari
* Maksim Rakitin
* Mansour Moufid
* Marcel Bargull
* Marcel Stimberg
* Marcelo Duarte Trevisani
* Marcin Wojdyr
* Marco Rossi
* Marcos Vanetta
* Marcus Caisey
* Mario Juric
* Mark Wiebe
* Markus Gerstel
* Marland Sitt
* Martin Dengler
* Martin Kou
* Martin Prüsse
* Martin Raden
* Matt Craig
* Matthew Dillon
* Matthew R. Becker
* Matthew Rocklin
* Matthew Wardrop
* Matthieu Guillaumin
* MatthieuDartiailh
* Matti Picus
* Max Reeder
* Maximilian Noethe
* Meixu Song
* Mervin Fansler
* Michael C. Grant
* Michael Heilman
* Michael Marchetti
* Michael Sarahan
* Michael Wild
* Michaël Defferrard
* Michele Mastropietro
* Mickey Rose
* Mihir Rege
* Mika Fischer
* Mike Croucher
* MinRK
* Minh Phan
* Morgan Parry
* Morten Enemark Lund
* Murray Read
* Nate Coraor
* Nehal J Wani
* Nelson Liu
* Nicholas Pierotti
* Nick Eubank
* Nikhil Dhandre
* Niklas Holm
* Nir Ganani
* Nitin Madnani
* Nixon Kwok
* Noah Pendleton
* Ofek Lev
* Ohad Ravid
* Oleg Samoylenko
* Oleh Khoma
* Ondřej Čertík
* Orion Poplawski
* Patricio Hubmann
* Patrick Snape
* Pete Bachant
* Peter Cable
* Peter Williams
* Phil Elson
* Philippe Mathieu
* Philippe Ombredanne
* Pradipta Ghosh
* Rachel Rigdon
* Rafael de Barros
* Ralf Gommers
* Rami Chowdhury
* Ramsey D'silva
* Ravi Gummadi
* Ray Donnelly
* Remi Rampin
* Riccardo Vianello
* Rich
* Richard Gowers
* Robert Johansson
* Roger Erens
* Rollin Thomas
* Ryan
* Ryan Grout
* Rüdiger Busche
* Saad Parwaiz
* Sachin G Biradar
* Sam Davis
* Samuel Debionne
* Santiago Castro
* Sarah Bird
* Saranya Mahalingam
* Scott Evtuch
* Sebastien Awwad
* Shannon Green
* Shaun Walbridge
* Skipper Seabold
* Sophia Castellarin
* Stan Seibert
* Stanis Shkel
* Stefaan Lippens
* Stefan Scherfke
* Stefan Seefeld
* Steffen Van
* Stephan Hoyer
* Steve Palmroth
* Steven Engler
* Stuart Berg
* Tadeu Manoel
* Teake Nutma
* Thomas Holder
* Thomas Kluyver
* Thomas Wiecki
* Théo Segonds
* Tian Zhang
* Tim Gates
* Tim Hopper
* Tim Snyder
* Tobias Megies
* Tom Saleeba
* Travis E. Oliphant
* Travis Swicegood
* Trent Nelson
* Troy Powell
* Tyler Kim
* Tyrone Grandison
* Ullrich Koethe
* Uwe L. Korn
* Valentin Haenel
* Vlad Frolov
* Vlad Zagorodniy
* Wes Roach
* Wes Turner
* Willy Chen
* Winston Sebastian Pais
* Wolfgang Ulmer
* Yaroslav Dmytryk
* Yuval Reches
* Zach Heaton
* Zahari
* Zhiwei Liang
* Zongyuan Zuo
* albertmichaelj
* bgobbi
* blindgaenger
* bryanv@continuum.io
* christopher
* codepage949
* csoja
* dan-hook
* distro-bot@anaconda.com
* dlovell
* electronwill
* endolith
* faph
* giumas
* guoci
* immerrr
* ivigamberdiev
* jakirkham
* joel.hull@continuum.io
* jrovegno
* jusjusjus
* kanehira
* lambdalisue
* lexual
* majidaldo
* makbigc
* mandeep
* matta9001
* mayagilad
* mcopes73
* mkincaid
* mlline00
* nh3
* oinizan
* ovz
* peter1000
* psthomas
* rulerofthehuns
* santi
* saraneem
* saucoide
* shadow_walker
* sidhant007
* soapy1
* spalmrot-tic
* srossross
* stinos
* tester
* tianchen zhong
* twinssbc
* ugurthemaster
* unknown
* Øystein Idema Torget
[//]: # (current developments)

## 4.11.0 (2021-11-22)

### Enhancements

* Allow channel_alias to interpolate environment variables.
* Support running conda with PyPy on Windows.
* Add ability to add, append and prepend to sequence values when using the conda config subcommand.
* Support Python 3.10 in version parser.
* Add `XDG_CONFIG_HOME` to the conda search path following the [XDG Base Directory Specification (XDGBDS)](https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html).

### Bug fixes

* Fix the PowerShell activator to not show an error when unsetting environment variables.
* Remove superfluous `eval` statements in fish shell integration.
* Indent the conda fish integration file using fish_indent.
* Fix handling of environment variables containing equal signs (`=`).
* Handle permission errors when listing all known prefixes.
* Catch Unicode decoding errors when parsing conda-meta files.
* Fix handling write errors when trying to create package cache or env directories.

### Docs

* Update path of conda repo in RHEL based systems to `/etc/yum.repos.d/conda.repo`.
* Fix the advanced pip example to stop using the now invalid `file:` prefix.
* Minor docs cleanup and adding Code of Conduct.
* Add auto-built architecture documentation for conda based on the [C4 Model](https://c4model.com). See the conda documentation for more information.
* Expand the contributing documentation with a section about static code analysis and code linting.
* Add [developer guide section](https://docs.conda.io/projects/conda/en/latest/dev-guide/) to the documentation, including a conda [architecture overview](https://docs.conda.io/projects/conda/en/latest/architecture.html).
* Stop referring to updating anaconda when `conda update` fails with an error.

### Other

* Build Docker images periodically on GitHub Actions for the continuous integration testing on Linux, storing them on GitHub Packages's registry for reduced latency and cost when using Docker Hub.

* Simplify the Linux GitHub actions workflows by combining used shell scripts.
* Add periodic GitHub Actions workflow to review old issues in the conda issue tracker and mark them as stale if no feedback is provided in a sensible amount of time, eventually closing them.
* Add periodic GitHub Actions workflow to lock the comment threads of old issues and pull requests in the conda GitHub repository to surface regressions with new issues instead.
* Refactor test suite to use more GitHub Actions runners in parallel, reducing total run time by 50%.
* Switched the issue tracker to use forms with additional questions for bug reporters to help in ticket triage.
* Add and automatically run pre-commit as part of the CI system to improve the code quality continuously and raise issues in contributed patches early on.

  The used code linters are: [flake8](https://flake8.pycqa.org/), [pylint](https://pylint.org/) and [bandit](https://bandit.readthedocs.io/).

  The [Python code formatter black](https://black.readthedocs.io/) is used as well but is only enforced on changed code in a commit and not to the whole code base at once.
* Automatically build the conda package upon the successful merge into the master branch and upload it to the conda-canary channel on anaconda.org.

  To try conda out simply run:

  ```
  conda install -c conda-canary/label/dev conda
  ```
* Automate adding new issues to [public GitHub project board](https://github.com/orgs/conda/projects/4) to facilitate issue triage.

* Update GitHub issue and pull request labels to be more consistent.
* Start using [rever](https://regro.github.io/rever-docs/) for release management.
* (preview) Enable one-click gitpod and GitHub Codespaces setup for Linux development.

### Contributors

* Benjamin Bertrand
* Chawye Hsu
* Cheng H. Lee
* Dan Meador
* Daniel Bast
* Daniel Holth
* Gregor Kržmanc
* Hsin-Hsiang Peng
* Ilan Cosman
* Isuru Fernando
* Jaime Rodríguez-Guerra
* Jan-Benedikt Jagusch
* Jannis Leidel
* John Flavin
* Jonas Haag
* Ken Odegard
* Kfir Zvi
* Mervin Fansler
* bfis
* mkincaid
* pre-commit CI

## 4.10.3 (2021-06-29)

### Bug fixes

* Reverts "Don't create an unused S3 client at import time (#10516)"
  in 4.10.2 that introduced a regression for users using S3 based
  channels. (#10756)

## 4.10.2 (2021-06-25)

### Enhancements

* Add `--dry-run` option to `conda env create` (#10635)
* Print warning about pip-installed dependencies only once (#10638)
* Explicit install now respects `--download-only` flag (#10688)
* Bump vendored tqdm version (#10721)

### Bug fixes

* Fix `changeps1` handling for PowerShell (#10624)
* Handle unbound `$PS1` so sh activation does not fail with `set -u` (#10701)
* Fix sh activation so `$PATH` is properly restored on errors (#10631)
* Fix `-c` option handling so defaults channel is not always re-added (#10735)
* Fix artifact verification-related warnings and errors (#10627, #10677)
* Fix log level used in `conda/core/prefix_data.py` (#9998)
* Fix log level used when fetching artifact verification metadata (#10621)
* Don't create an unused S3 client at import time (#10516)
* Don't load `binstar_client` until needed (#10692)
* Reflect dropping of older Python versions in `setup.py` (#10642)

### Docs

* Merge release notes and changelog to reduce maintenance burden (#10745)
* Add mentions to PyPy, Anaconda terms of service (#10329, #10712)
* Update Python versions in examples (#10329, #10744)
* Update install macOS instructions (#10728)

### Contributors

* @AlbertDeFusco
* @awwad
* @casperdcl
* @cgranade
* @chenghlee
* @ColemanTom
* @dan-hook
* @dbast
* @ericpre
* @HedgehogCode
* @jamesp
* @jezdez
* @johnhany97
* @lightmare
* @mattip
* @maxerbubba
* @mrakitin
* @stinos
* @thermokarst


## 4.10.1 (2021-04-12)

### Bug fixes

* Fix version detection for `__linux` virtual package (#10599)
* Fix import from `conda_content_trust` (#10589)
* Fix how URL for verification metadata files are constructed (#10617)
* Partially fix profile `$PATH` setup on MSYS2 (#10459)
* Remove `.empty` directory even when `rsync` is not installed (#10331)

### Contributors

* @awwad
* @chenghlee
* @codepage949
* @niklasholm


## 4.10.0 (2021-03-30)

**NOTE**: This release formally drops support for Python 2.7 and Python < 3.6.

### Enhancements

* Add pilot support for metadata signatures and verification (#10578)
* Add `__linux` virtual package (#10552, #10561)
* Support nested keys when using `conda config --get` (#10447, #10572)
* Support installing default packages when using `conda env create` (#10530)
* Support HTTP sources for `conda env update -f` (#10536)
* Make macOS code signing operations less verbose (#10372)

### Bug fixes

* Fix `conda search` crashing on Python 3.9 (#10542)
* Allow `{channel}::pip` to satisfy pip requirements (#10550)
* Support `{host}:{port}` specifications in environment YAML files (#10417)
* Fall back to system `.condarc` if user `.condarc` is absent (#10479)
* Try UTF-16 if UTF-8 fails when reading environment YAML files (#10356)
* Properly parse Python version >= 3.10 (#10478)
* Fix zsh initialization when `$ZDOTDIR` is defined (#10413)
* Fix path handling for csh (#10410)
* Fix `setup.py` requirement for vendored `ruamel_yaml_conda` (#10441)
* Fix errors when pickling vendored `auxlib` objects (#10386)

### Docs

* Document the `__unix` and `__windows` virtual packages (#10511)
* Update list of supported and default versions of Python (#10531)
* Favor using `pip` instead of `setup.py` when setting up CI (#10308)

### Miscellaneous

* CI: drop Python 2.7 and add Python 3.9 (#10548)

### Contributors

* @awwad
* @BastianZim
* @beenje
* @bgobbi
* @blubs
* @chenghlee
* @cjmartian
* @ericpre
* @erykoff
* @felker
* @giladmaya
* @jamesmyatt
* @mingwandroid
* @opoplawski
* @saadparwaiz1
* @saucoide


## 4.9.2 (2020-11-10)

### Enhancements

* Use vendored `tqdm` in `conda.resolve` for better consistency (#10337)

### Bug fixes

* Revert to previous naming scheme for repodata cache files when
  `use_only_tar_bz2` config option is false (#10350)

### Docs

* Fix missing release notes (#10342)
* Fix permission errors when configuring deb repositories (#10347)

### Contributors

* @chenghlee
* @csoja
* @dylanmorroll
* @sscherfke


## 4.9.1 (2020-10-26)

### Enhancements

* Respect PEP 440 `~=` "compatible release" clause (#10313)

### Bug fixes

* Remove `preload_openssl` for Win32 (#10298)
* Add `if exist` to Windows registry hook (#10305)

### Contributors

* @mingwandroid


## 4.9.0 (2020-10-19)

### Enhancements

* Add `osx-arm64` as a recognized platform (#10128, #10134, #10137)
* Resign files modified during installation on ARM64 macOS (#10260)
* Add `__archspec` virtual package to identify CPU microarchitecture (#9930)
* Add `__unix` and `__win` virtual packages (#10214)
* Add `--no-capture--output` option to `conda run` (#9646)
* Add `--live-stream` option to `conda run` (#10270)
* Export and import environment variables set using `conda env config` (#10169)
* Cache repodata from `file://` channels (#9730)
* Do not relink already-installed packages (#10208)
* Speed up JSON formatting in logz module (#10189)


### Bug fixes:

* Stop `env remove --dry-run` from actually removing environments (#10261)
* Virtual package requirements are now considered by the solver (#10057)
* Fix cached filename processing when using only tar.bz2 (#10193)
* Stop showing solver hints about CUDA when it is not a dependency (#10275)
* Ignore virtual packages when checking environment consistency (#10196)
* Fix `config --json` output errors in certain circumstances (#10194)
* More consistent error handling by `conda shell` (#10238)
* Bump vendored version of tqdm to fix various threading and I/O bugs (#10266)


### Docs

* Correctly state default `/AddToPath` option in Windows installer (#10179)
* Fix typos in `--repodata-fn` help text (#10279)


### Miscellaneous

* Update CI infrastructure to use GitHub Actions (#10176, #10186, #10234)
* Update README badge to show GitHub Actions status (#10254)


### Contributors

* @AlbertDeFusco
* @angloyna
* @bbodenmiller
* @casperdcl
* @chenghlee
* @chrisburr
* @cjmartian
* @dhirschfeld
* @ericpre
* @gabrielcnr
* @InfiniteChai
* @isuruf
* @jjhelmus
* @LorcanHamill
* @maresb
* @mingwandroid
* @mlline00
* @xhochy
* @ydmytryk


## 4.8.5 (2020-09-14)

### Enhancements

* Add `osx-arm64` as a recognized platform (#10128, #10134)

### Contributors

* @isuruf
* @jjhelmus


## 4.8.4 (2020-08-06)

### Enhancements

* Add `linux-ppc64` as a recognized platform (#9797, #9877)
* Add `linux-s390x` as a recognized platform (#9933, #10051)
* Add spinner to pip installer (#10032)
* Add support for running conda in PyPy (#9764)
* Support creating conda environments using remote specification files (#9835)
* Allow request retries on various HTTP errors (#9919)
* Add `compare` command for environments against a specification file (#10022)
* Add (preliminary) support for JSON-format activation (#8727)
* Properly handle the `CURL_CA_BUNDLE` environment variable (#10078)
* More uniformly handle `$CONDA_PREFIX` when exporting environments (#10092)
* Enable trailing `_` to anchor OpenSSL-like versions (#9859)
* Replace `listdir` and `glob` with `scandir` (#9889)
* Ignore virtual packages when searching for constrained packages (#10117)
* Add virtual packages to be considered in the solver (#10057)

### Bug fixes:

* Prevent `remove --all` from deleting non-environment directories (#10086)
* Prevent `create --dry-run --yes` from deleting existing environments (#10090)
* Remove extra newline from environment export file (#9649)
* Print help on incomplete `conda env config` command rather than crashing (#9660)
* Correctly set exit code/errorlevel when `conda run` exits (#9665)
* Send "inconsistent environment" warnings to stderr to avoid breaking JSON output (#9738)
* Fix output formatting from post-link scripts (#9841)
* Fix URL parsing for channel subdirs (#9844)
* Fix `conda env export -f` sometimes producing empty output files (#9909)
* Fix handling of Python releases with two-digit minor versions (#9999)
* Do not use gid to determine if user is an admin on \*nix platforms (#10002)
* Suppress spurious xonsh activation warnings (#10005)
* Fix crash when running `conda update --all` on a nonexistent environment (#10028)
* Fix collections import for Python 3.8 (#10093)
* Fix regex-related deprecation warnings (#10093, #10096)
* Fix logic error when running under Python 2.7 on 64-bit platforms (#10108)
* Fix Python 3.8 leaked semaphore issue (#10115)

### Docs

* Fix formatting and typos (#9623, #9689, #9898, #10042)
* Correct location for yum repository configuration files (#9988)
* Clarify usage for the `--channel` option (#10054)
* Clarify Python is not installed by default into new environments (#10089)

### Miscellaneous

* Fixes to tests and CI pipelines (#9842, #9863, #9938, #9960, #10010)
* Remove conda-forge dependencies for developing conda (#9857, #9871)
* Audit YAML usage for `safe_load` vs `round_trip_load` (#9902)

### Contributors

* @alanhdu
* @angloyna
* @Anthchirp
* @Arrowbox
* @bbodenmiller
* @beenje
* @bernardoduarte
* @birdsarah
* @bnemanich
* @chenghlee
* @ChihweiLHBird
* @cjmartian
* @ericpre
* @error404-beep
* @esc
* @hartb
* @hugobuddel
* @isuruf
* @jjhelmus
* @kalefranz
* @mingwandroid
* @mlline00
* @mparry
* @mrocklin
* @necaris
* @pdnm
* @pradghos
* @ravigumm
* @Reissner
* @scopatz
* @sidhant007
* @songmeixu
* @speleo3
* @tomsaleeba
* @WinstonPais


## 4.8.3 (2020-03-13)

### Docs

* Add release notes for 4.8.2 to docs (#9632)
* Fix typos in docs (#9637, #9643)
* Grammatical and formatting changes (#9647)

### Bug fixes:

* Account for channel is specs (#9748)

### Contributors

* @bernardoduarte
* @forrestwaters
* @jjhelmus
* @msarahan
* @rrigdon
* @timgates42


## 4.8.2 (2020-01-24)

### Enhancements

* Solver messaging improvements (#9560)

### Docs

* Added precedence and conflict info  (#9565)
* Added how to set env variables with config API  (#9536)
* Updated user guide, deleted Overview, minor clean up (#9581)
* Add code of conduct (#9601, #9602, #9603, #9603, #9604 #9605)

### Bug fixes:

* change fish prompt only if changeps1 is true  (#7000)
* make frozendict JSON serializable (#9539)
* Conda env create empty dir (#9543)


### Contributors

* @msarahan
* @jjhelmus
* @rrigdon
* @soapy1
* @teake
* @csoja
* @kfranz

## 4.8.1 (2019-12-19)

### Enhancements

* improve performance for conda run by avoiding Popen.communicate  (#9381)
* Put conda keyring in /usr/share/keyrings on Debian (#9424)
* refactor common.logic to fix some bugs and prepare for better modularity (#9427)
* Support nested configuration  (#9449)
* Support Object configuration parameters  (#9465)
* Use freeze_installed to speed up conda env update  (#9511)
* add networking args to conda env create (#9525)

### Docs

* fix string concatenation running words together regarding CONDA_EXE  (#9411)
* Fix typo ("list" -> "info")  (#9433)
* typo in condarc key envs_dirs  (#9478)
* Clarify channel priority and package sorting (#9492)
* improve description of DLL loading verification and activating environments  (#9453)
* Installing with specific build number  (#9534)

### Bug fixes:

* Fix calling python api run_command with list and string arguments  (#9331)
* revert init bash completion  (#9421)
* set tmp to shortened path that excludes spaces (#9409)
* avoid function redefinition upon resourcing conda.fish  (#9444)
* propagate pip error level when creating envs with conda env (#9460)
* fix incorrect chown call (#9464)
* Add subdir to PackageRecord dist_str  (#9418)
* Fix running conda activate in multiple processes on windows  (#9477)
* Don't check in pkgs for trash (#9472)
* remove setuptools from run_constrained in recipe  (#9485)
* Fix `__conda_activate` function to correctly return exit code  (#9532)
* fix overly greedy capture done by subprocess for conda run  (#9537)


### Contributors

* @AntoinePrv
* @brettcannon
* @bwildenhain
* @cjmartian
* @felker
* @forrestwaters
* @gilescope
* @isuruf
* @jeremyjliu
* @jjhelmus
* @jhultman
* @marcuscaisey
* @mbargull
* @mingwandroid
* @msarahan
* @okhoma
* @osamoylenko
* @rrigdon
* @rulerofthehuns
* @soapy1
* @tartansandal


## 4.8.0 (2019-11-04)

### Enhancements

* retry downloads if they fail, controlled by `remote_max_retries` and `remote_backoff_factor` configuration values (#9318)
* redact authentication information in some URLs (#9341)
* add osx version virtual package , `__osx` (#9349)
* add glibc virtual package, `__glibc` (#9358)

### Docs

* removeed references to MD5s from docs (#9247)
* Add docs on `CONDA_DLL_SEARCH_MODIFICATION_ENABLED` (#9286)
* document threads, spec history and configuration (#9327)
* more documentation on channels (#9335)
* document the .condarc search order (#9369)
* various minor documentation fixes (#9238, #9248, #9267, #9334, #9351, #9372, #9378, #9388, #9391, #9393)

### Bug fixes

* fix issues with xonsh activation on Windows (#8246)
* remove unsupported --lock argument from conda clean (#8310)
* do not add `sys_prefix_path` to failed activation or deactivation (#9282)
* fix csh setenv command (#9284)
* do not memorize `PackageRecord.combined_depends` (#9289)
* use `CONDA_INTERNAL_OLDPATH` rather than `OLDPATH` in activation script (#9303)
* fixes xonsh activation and tab completion (#9305)
* fix what channels are queried when context.offline is True (#9385)


### Contributors

* @analog-cbarber
* @andreasg123
* @beckermr
* @bryant1410
* @colinbrislawn
* @felker
* @forrestwaters
* @gabrielcnr
* @isuruf
* @jakirkham
* @jeremyjliu
* @jjhelmus
* @jooh
* @jpigla
* @marcelotrevisani
* @melund
* @mfansler
* @mingwandroid
* @msarahan
* @rrigdon
* @scopatz
* @soapy1
* @WillyChen123
* @xhochy


## 4.7.12 (2019-09-12)

### Enhancements

* add support for env file creation based on explicit specs in history (#9093)
* detect prefix paths when -p nor -n not given  (#9135)
* Add config parameter to disable conflict finding (for faster time to errors)  (#9190)

### Bug fixes

* fix race condition with creation of repodata cache dir  (#9073)
* fix ProxyError expected arguments  (#9123)
* makedirs to initialize .conda folder when registering env - fixes permission errors with .conda folders not existing when package cache gets created (#9215)
* fix list duplicates errors in reading repodata/prefix data  (#9132)
* fix neutered specs not being recorded in history, leading to unsatisfiable environments later  (#9147)
* Standardize "conda env list" behavior between platforms  (#9166)
* add JSON output to conda env create/update  (#9204)
* speed up finding conflicting specs (speed regression in 4.7.11)  (#9218)

### Contributors

* @beenje
* @Bezier89
* @cjmartian
* @forrestwaters
* @jjhelmus
* @martin-raden
* @msarahan
* @nganani
* @rrigdon
* @soapy1
* @WesRoach
* @zheaton


## 4.7.11 (2019-08-06)

### Enhancements

* add config for control of number of threads. These can be set in condarc or using environment variables. Names/default values are: `default_threads/None`, `repodata_threads/None`, `verify_threads/1`, `execute_threads/1` (#9044)

### Bug fixes

* fix repodata_fns from condarc not being respected (#8998)
* Fix handling of UpdateModifiers other than FREEZE_INSTALLED (#8999)
* Improve conflict finding graph traversal (#9006)
* Fix setuptools being removed due to conda run_constrains (#9014)
* Avoid calling find_conflicts until all retries are spent (#9015)
* refactor _conda_activate.bat in hopes of improving behavior in parallel environments (#9021)
* Add support for local version specs in PYPI installed packages (#9025)
* fix boto3 initialization race condition (#9037)
* Fix return condition in package_cache_data (#9039)
* utilize libarchive_enabled attribute provided by conda-package-handling to fall back to .tar.bz2 files only. (#9041, #9053)
* Fix menu creation on windows having race condition, leading to popups about python.exe not being found (#9044)
* Improve list error when egg-link leads to extra egg-infos (#9045)
* Fix incorrect RemoveError when operating on an env that has one of conda's deps, but is not the env in which the current conda in use resides (#9054)

### Docs

* Document new package format better
* Document `conda init` command
* Document availability of RSS feed for CDN-backed channels that clone

### Contributors

* @Bezier89
* @forrestwaters
* @hajapy
* @ihnorton
* @matthewwardrop
* @msarahan
* @rogererens
* @rrigdon
* @soapy1


## 4.7.10 (2019-07-19)

### Bug fixes

* fix merging of specs
* fix bugs in building of chains in prefix graph


### Contributors

* @msarahan


## 4.7.9 (2019-07-18)

### Bug fixes

* fix Non records in comprehension
* fix potential keyerror in depth-first search
* fix PackageNotFound attribute error

### Contributors

* @jjhelmus
* @msarahan


## 4.7.8 (2019-07-17)

### Improvements

* improve unsatisfiable messages - try to group and explain output better.  Remove lots of extraneous stuff that was showing up in 4.7.7 (#8910)
* preload openssl on windows to avoid library conflicts and missing library issues (#8949)

### Bug fixes

* fix handling of channels where more than one channel contains packages with similar name, subdir, version and build_number.  This was causing mysterious unsatisfiable errors for some users.  (#8938)
* reverse logic check in checking channel equality, because == is not reciprocal to != with py27 (no `__ne__`) (#8938)
* fix an infinite loop or otherwise large process with building the unsatisfiable info.  Improve the depth-first search implementation.  (#8941)
* streamline fallback paths to unfrozen solve in case frozen fails. (#8942)
* Environment activation output only shows `conda activate envname` now, instead of sometimes showing just `activate`.  (#8947)

### Contributors

* @forrestwaters
* @jjhelmus
* @katietz
* @msarahan
* @rrigdon
* @soapy1


## 4.7.7 (2019-07-12)

### Improvements

* When an update command doesn't do anything because installed software conflicts with the update, information about the conflict is shown, rather than just saying "all requests are already satisfied"  (#8899)

### Bug fixes

* fix missing package_type attr in finding virtual packages  (#8917)
* fix parallel operations of loading index to preserve channel ordering  (#8921, #8922)
* filter PrefixRecords out from PackageRecords when making a graph to show unsatisfiable deps.  Fixes comparison error between mismatched types.  (#8924)
* install entry points before running post-link scripts, because post link scripts may depend on entry points.  (#8925)

### Contributors

* @jjhelmus
* @msarahan
* @rrigdon
* @soapy1


## 4.7.6 (2019-07-11)

### Improvements

* Improve cuda virtual package conflict messages to show the `__cuda` virtual package as part of the conflict (#8834)
* add additional debugging info to Resolve.solve (#8895)

### Bug fixes

* deduplicate error messages being shown for post-link scripts.  Show captured stdout/stderr on failure  (#8833)
* fix the checkout step in the Windows dev env setup instructions (#8827)
* bail out early when implicit python pinning renders an explicit spec unsatisfiable (#8834)
* handle edge cases in pinned specs better (#8843)
* extract package again if url is None (#8868)
* update docs regarding indexing and subdirs (#8874)
* remove warning about conda-build needing an update that was bothering people (#8884)
* only add repodata fn into cache key when fn is not repodata.json (#8900)
* allow conda to be downgraded with an explicit spec (#8892)
* add target to specs from historic specs (#8901)
* improve message when solving with a repodata file before repodata.json fails (#8907)
* fix distutils usage for "which" functionality.  Fix inability to change python version in envs with noarch packages (#8909)
* fix anaconda metapackage being removed because history matching was too restrictive (#8911)
* make freezing less aggressive; add fallback to non-frozen solve (#8912)

### Contributors

* @forrestwaters
* @jjhelmus
* @mcopes73
* @msarahan
* @richardjgowers
* @rrigdon
* @soapy1
* @twinssbc

## 4.7.5 (2019-06-24)

### Improvements

* improve wording in informational message when a particular `*_repodata.json` can't be found.  No need for alarm.  (#8808)

### Bug fixes

* restore tests being run on win-32 appveyor  (#8801)
* fix Dist class handling of .conda files  (#8816)
* fix strict channel priority handling when a package is unsatisfiable and thus not present in the collection  (#8819)
* handle JSONDecodeError better when package is corrupted at extract time  (#8820)

### Contributors

* @dhirschfeld
* @msarahan
* @rrigdon


## 4.7.4 (2019-06-19)

### Improvements

* Revert to and improve the unsatisfiability determination from 4.7.2 that was reverted in 4.7.3.  It's faster.  (#8783)

### Bug fixes

* fix tcsh/csh init scripts  (#8792)

### Docs improvements

* clean up docs of run_command
* fix broken links
* update docs environment.yaml file to update conda-package-handling
* conda logo favicon
* update strict channel priority info
* noarch package content ported from conda-forge
* add info about conda-forge
* remove references to things as they were before conda 4.1.  That was a long time ago.  This is not a history book.

### Contributors

* @jjhelmus
* @msarahan
* @rrigdon
* @soapy1


## 4.7.3 (2019-06-14)

### Bug fixes

* target prefix overrid applies to entry points in addition to replacements in standard files  (#8769)
* Revert to solver-based unsatisfiability determination  (#8775)
* fix renaming of existing prompt function in powershell  (#8774)

### Contributors

* @jjhelmus
* @msarahan
* @rrigdon
* @ScottEvtuch


## 4.7.2 (2019-06-10)

### Behavior changes

* unsatisfiability is determined in a slightly different way now. It no longer
  uses the SAT solver, but rather determines whether any specs have no
  candidates at all after running through get_reduced_index. This has been
  faster in benchmarks, but we welcome further data from your use cases about
  whether this was a good change.  (#8741)
* when using the --only-deps flag for the `install` command, conda now
  explicitly records those specs in your history. This primarily serves to
  reduce conda accidentally removing packages that you have actually requested.  (#8766)

### Improvements

* UnsatisfiableError messages are now grouped into categories and explained a bit better.  (#8741)
* --repodata-fn argument can be passed multiple times to have more fallback
  paths. `repodata_fns` conda config setting does the same thing, but saves you
  from needing to do it for every command invocation.  (#8741)

### Bug fixes

* fix channel flip-flopping that was happening when adding a channel other than earlier ones  (#8741)
* refactor flow control for multiple repodata files to not use exceptions  (#8741)
* force conda to use only old .tar.bz2 files if conda-build <3.18.3 is
  installed. Conda-build breaks when inspecting file contents, and this is fixed
  in conda-build 3.18.3 (#8741)
* use --force when using rsync to improve behavior with folders that may exist
  in the destination somehow. (#8750)
* handle EPERM errors when renaming, because MacOS lets you remove or create
  files, but not rename them. Thanks Apple. (#8755)
* fix conda removing packages installed via `install` with --only-deps flag when
  either `update` or `remove` commands are run. See behavior changes above.
  (#8766)

### Contributors

* @csosborn
* @jjhelmus
* @katietz
* @msarahan
* @rrigdon


## 4.7.1 (2019-05-30)

### Improvements

* Base initial solver specs map on explicitly requested specs (new and historic)  (#8689)
* Improve anonymization of automatic error reporting  (#8715)
* Add option to keep using .tar.bz2 files, in case new .conda isn't working for whatever reason  (#8723)

### Bug fixes

* fix parsing hyphenated PyPI specs (change hyphens in versions to .)  (#8688)
* fix PrefixRecord creation when file inputs are .conda files  (#8689)
* fix PrefixRecord creation for pip-installed packages  (#8689)
* fix progress bar stopping at 75% (no extract progress with new libarchive)  (#8689)
* preserve pre-4.7 download() interface in conda.exports  (#8698)
* virtual packages (such as cuda) are represented by leading double underscores
  by convention, to avoid confusion with existing single underscore packages
  that serve other purposes (#8738)

### Deprecations/Breaking Changes

* The `--prune` flag no longer does anything. Pruning is implicitly the
  standard behavior now as a result of the initial solver specs coming from
  explicitly requested specs. Conda will remove packages that are not explicitly
  requested and are not required directly or indirectly by any explicitly
  installed package.

### Docs improvements

* Document removal of the `free` channel from defaults (#8682)
* Add reference to conda config --describe  (#8712)
* Add a tutorial for .condarc modification  (#8737)

### Contributors

* @alexhall
* @cjmartian
* @kalefranz
* @martinkou
* @msarahan
* @rrigdon
* @soapy1

## 4.7.0 (2019-05-17)

### Improvements

* Implement support for "virtual" CUDA packages, to make conda consider the system-installed CUDA driver and act accordingly  (#8267)
* Support and prefer new .conda file format where available  (#8265, #8639)
* Use comma-separated env names in prompt when stacking envs  (#8431)
* show valid choices in error messages for enums  (#8602)
* freeze already-installed packages when running `conda install` as a first attempt, to speed up the solve in existing envs.  Fall back to full solve as necessary  (#8260, #8626)
* add optimization criterion to prefer arch over noarch packages when otherwise equivalent  (#8267)
* Remove `free` channel from defaults collection.  Add `restore_free_channel` config parameter if you want to keep it.  (#8579)
* Improve unsatisfiable hints  (#8638)
* Add capability to use custom repodata filename, for smaller subsets of repodata  (#8670)
* Parallelize SubdirData readup  (#8670)
* Parallelize transacation verification and execution  (#8670)

### Bug fixes

* Fix PATH handling with deactivate.d scripts  (#8464)
* Fix usage of deprecated collections ABCs (#)
* fix tcsh/csh initialization block  (#8591)
* fix missing CWD display in powershell prompt  (#8596)
* `wrap_subprocess_call`: fallback to sh if no bash  (#8611)
* move `TemporaryDirectory` to avoid importing from `conda.compat`  (#8671)
* fix missing conda-package-handling dependency in dev/start  (#8624)
* fix `path_to_url` string index out of range error  (#8265)
* fix conda init for xonsh  (#8644)
* fix fish activation (#8645)
* improve error handling for read-only filesystems  (#8665, #8674)
* break out of minimization when bisection has nowhere to go  (#8672)
* Handle None values for link channel name gracefully  (#8680)

### Contributors

* @chrisburr
* @EternalPhane
* @jjhelmus
* @kalefranz
* @mbargull
* @msarahan
* @rrigdon
* @scopatz
* @seibert
* @soapy1
* @nehaljwani
* @nh3
* @teake
* @yuvalreches

## 4.6.14 (2019-04-17)

### Bug fixes

* export extra function in powershell Conda.psm1 script (fixes anaconda powershell prompt)  (#8570)

### Contributors

* @msarahan


## 4.6.13 (2019-04-16)

### Bug fixes

* disable ``test_legacy_repodata`` on win-32 (missing dependencies)  (#8540)
* Fix activation problems on windows with bash, powershell, and batch.  Improve tests. (#8550, #8564)
* pass -U flag to for pip dependencies in conda env when running "conda env update"  (#8542)
* rename ``conda.common.os`` to ``conda.common._os`` to avoid shadowing os built-in  (#8548)
* raise exception when pip subprocess fails with conda env  (#8562)
* fix installing recursive requirements.txt files in conda env specs with python 2.7  (#8562)
* Don't modify powershell prompt when "changeps1" setting in condarc is False  (#8465)

### Contributors

* @dennispg
* @jjhelmus
* @jpgill86
* @mingwandroid
* @msarahan
* @noahp


## 4.6.12 (2019-04-10)

### Bug fixes

* Fix compat import warning (#8507)
* Adjust collections import to avoid deprecation warning (#8499)
* Fix bug in CLI tests (#8468)
* Disallow the number sign in environment names (#8521)
* Workaround issues with noarch on certain repositories (#8523)
* Fix activation on Windows when spaces are in path (#8503)
* Fix conda init profile modification for powershell (#8531)
* Point conda.bat to condabin (#8517)
* Fix various bugs in activation (#8520, #8528)

### Docs improvements

* Fix links in README (#8482)
* Changelogs for 4.6.10 and 4.6.11 (#8502)

### Contributors

@Bezier89
@duncanmmacleod
@ivigamberdiev
@javabrett
@jjhelmus
@katietz
@mingwandroid
@msarahan
@nehaljwani
@rrigdon


## 4.6.11 (2019-04-04)

### Bug fixes

* Remove sys.prefix from front of PATH in basic_posix (#8491)
* add import to fix conda.core.index.get_index (#8495)

### Docs improvements

* Changelogs for 4.6.10

### Contributors

* @jjhelmus
* @mingwandroid
* @msarahan


## 4.6.10 (2019-04-01)

### Bug fixes

* Fix python-3 only FileNotFoundError usage in initialize.py  (#8470)
* Fix more JSON encode errors for the _Null data type (#8471)
* Fix non-posix-compliant == in conda.sh (#8475, #8476)
* improve detection of pip dependency in environment.yml files to avoid warning message (#8478)
* fix condabin\conda.bat use of dp0, making PATH additions incorrect (#8480)
* init_fish_user: don't assume config file exists  (#8481)
* Fix for chcp output ending with . (#8484)

### Docs improvements

* Changelogs for 4.6.8, 4.6.9

### Contributors

* @duncanmmacleod
* @nehaljwani
* @ilango100
* @jjhelmus
* @mingwandroid
* @msarahan
* @rrigdon


## 4.6.9 (2019-03-29)

### Improvements

* Improve CI for docs commits (#8387, #8401, #8417)
* Implement `conda init --reverse` to undo rc file and registry changes (#8400)
* Improve handling of unicode systems  (#8342, #8435)
* Force the "COMSPEC"  environment variable to always point to cmd.exe on windows.  This was an implicit assumption that was not always true.  (#8457, #8461)

### Bug fixes

* Add central C:/ProgramData/conda as a search path on Windows  (#8272)
* remove direct use of ruamel_yaml (prefer internal abstraction, yaml_load)  (#8392)
* Fix/improve `conda init` support for fish shell (#8437)
* Improve solver behavior in the presence of inconsistent environments (such as pip as a conda dependency of python, but also installed via pip itself) (#8444)
* Handle read-only filesystems for environments.txt (#8451, #8453)
* Fix conda env commands involving pip-installed dependencies being installed into incorrect locations  (#8435)

### Docs improvements

* updated cheatsheet  (#8402)
* updated color theme  (#8403)

### Contributors

* @blackgear
* @dhirschfeld
* @jakirkham
* @jjhelmus
* @katietz
* @mingwandroid
* @msarahan
* @nehaljwani
* @rrigdon
* @soapy1
* @spamlrot-tic

## 4.6.8 (2019-03-06)

### Bug fixes

* detect when parser fails to parse arguments  (#8328)
* separate post-link script running from package linking.  Do linking of all packages first, then run any post-link
  scripts after all packages are present.  Ideally, more forgiving in presence of cycles.  (#8350)
* quote path to temporary requirements files generated by conda env.  Fixes issues with spaces.  (#8352)
* improve some exception handling around checking for presence of folders in extraction of tarballs  (#8360)
* fix reporting of packages when channel name is None  (#8379)
* fix the post-creation helper message from "source activate" to "conda activate"  (#8370)
* Add safety checks for directory traversal exploits in tarfiles.  These may be disabled using the ``safety_checks``
  configuration parameter.  (#8374)

### Docs improvements

* document MKL DLL hell and new Python env vars to control DLL search behavior  (#8315)
* add github template for reporting speed issues  (#8344)
* add in better use of sphinx admonitions (notes, warnings) for better accentuation in docs  (#8348)
* improve skipping CI builds when only docs changes are involved  (#8336)

### Contributors

* @albertmichaelj
* @jjhelmus
* @matta9001
* @msarahan
* @rrigdon
* @soapy1
* @steffenvan


## 4.6.7 (2019-02-21)

### Bug fixes

* skip scanning folders for contents during reversal of transactions.  Just ignore folders.  A bit messier, but a lot faster.  (#8266)
* fix some logic in renaming trash files to fix permission errors  (#8300)
* wrap pip subprocess calls in conda-env more cleanly and uniformly  (#8307)
* revert conda prepending to PATH in cli main file on windows  (#8307)
* simplify ``conda run`` code to use activation subprocess wrapper.  Fix a few conda tests to use ``conda run``.  (#8307)

### Docs improvements

* fixed duplicated "to" in managing envs section (#8298)
* flesh out docs on activation  (#8314)
* correct git syntax for adding a remote in dev docs  (#8316)
* unpin sphinx version in docs requirements  (#8317)

### Contributors

* @jjhelmus
* @MarckK
* @msarahan
* @rrigdon
* @samgd


## 4.6.6 (2019-02-18)

### Bug fixes
* fix incorrect syntax prepending to PATH for conda CLI functionality  (#8295)
* fix rename_tmp.bat operating on folders, leading to hung interactive dialogs.  Operate only on files.  (#8295)

### Contributors
* @mingwandroid
* @msarahan


## 4.6.5 (2019-02-15)

### Bug fixes
* Make super in resolve.py python 2 friendly  (#8280)
* support unicode paths better in activation scripts on Windows (#)
* set PATH for conda.bat to include Conda's root prefix, so that libraries can be found when using conda when the root env is not activated  (#8287, #8292)
* clean up warnings/errors about rsync and trash files  (#8290)

### Contributors
* @jjhelmus
* @mingwandroid
* @msarahan
* @rrigdon


## 4.6.4 (2019-02-13)

### Improvements
* allow configuring location of instrumentation records  (#7849)
* prepend conda-env pip commands with env activation to fix library loading  (#8263)

### Bug fixes
* resolve #8176 SAT solver choice error handling  (#8248)
* document ``pip_interop_enabled`` config parameter  (#8250)
* ensure prefix temp files are inside prefix  (#8253)
* ensure ``script_caller`` is bound before use  (#8254)
* fix overzealous removal of folders after cleanup of failed post-link scripts  (#8259)
* fix #8264: Allow 'int' datatype for values to non-sequence parameters  (#8268)

### Deprecations/Breaking Changes
* remove experimental ``featureless_minimization_disabled`` feature flag  (#8249)

### Contributors
* @davemasino
* @geremih
* @jjhelmus
* @kalefranz
* @msarahan
* @minrk
* @nehaljwani
* @prusse-martin
* @rrigdon
* @soapy1


## 4.6.3 (2019-02-07)

### Improvements
* Implement ``-stack`` switch for powershell usage of conda (#8217)
* Enable system-wide initialization for conda shell support (#8219)
* Activate environments prior to running post-link scripts (#8229)
* Instrument more solve calls to prioritize future optimization efforts (#8231)
* print more env info when searching in envs (#8240)

### Bug fixes
* resolve #8178, fix conda pip interop assertion error with egg folders (#8184)
* resolve #8157, fix token leakage in errors and config output (#8163)
* resolve #8185, fix conda package filtering with embedded/vendored python metadata (#8198)
* resolve #8199, fix errors on .* in version specs that should have been specific to the ~= operator (#8208)
* fix .bat scripts for handling paths on Windows with spaces (#8215)
* fix powershell scripts for handling paths on Windows with spaces (#8222)
* handle missing rename script more gracefully (especially when updating/installing conda itself) (#8212)

### Contributors
* @dhirschfeld
* @jjhelmus
* @kalefranz
* @msarahan
* @murrayreadccdc
* @nehaljwani
* @rrigdon
* @soapy1


## 4.6.2 (2019-01-29)

### Improvements
* Documentation restructuring/improvements  (#8139, #8143)
* rewrite rm_rf to use native system utilities and rename trash files  (#8134)

### Bug fixes
* fix UnavailableInvalidChannel errors when only noarch subdir is present  (#8154)
* document, but disable the ``allow_conda_downgrades`` flag, pending re-examination of the warning, which was blocking conda operations after an upgrade-downgrade cycle across minor versions.  (#8160)
* fix conda env export missing pip entries without use of pip interop enabled setting  (#8165)

### Contributors
* @jjhelmus
* @msarahan
* @nehaljwani
* @rrigdon


## 4.5.13 (2019-01-29)

### Improvements
* document the allow_conda_downgrades configuration parameter (#8034)
* remove conda upgrade message (#8161)

### Contributors
* @msarahan
* @nehaljwani

## 4.6.1 (2019-01-21)

### Improvements
* optimizations in ``get_reduced_index`` (#8117, #8121, #8122)

### Bug Fixes
* fix faulty onerror call for rm (#8053)
* fix activate.bat to use more direct call to conda.bat (don't require conda init; fix non-interactive script) (#8113)

### Contributors
* @jjhelmus
* @msarahan
* @pv


## 4.6.0 (2019-01-15)

### New Feature Highlights
* resolve #7053 preview support for conda operability with pip; disabled by default (#7067, #7370, #7710, #8050)
* conda initialize (#6518, #7388, #7629)
* resolve #7194 add '--stack' flag to 'conda activate'; remove max_shlvl
  config (#7195, #7226, #7233)
* resolve #7087 add non-conda-installed python packages into PrefixData (#7067, #7370)
* resolve #2682 add 'conda run' preview support (#7320, #7625)
* resolve #626 conda wrapper for PowerShell (#7794, #7829)

### Deprecations/Breaking Changes
* resolve #6915 remove 'conda env attach' and 'conda env upload' (#6916)
* resolve #7061 remove pkgs/pro from defaults (#7162)
* resolve #7078 add deprecation warnings for 'conda.cli.activate',
  'conda.compat', and 'conda.install' (#7079)
* resolve #7194 add '--stack' flag to 'conda activate'; remove max_shlvl
  config (#7195)
* resolve #6979, #7086 remove Dist from majority of project (#7216, #7252)
* fix #7362 remove --license from conda info and related code paths (#7386)
* resolve #7309 deprecate 'conda info package_name' (#7310)
* remove 'conda clean --source-cache' and defer to conda-build (#7731)
* resolve #7724 move windows package cache and envs dirs back to .conda directory (#7725)
* disallow env names with colons (#7801)

### Improvements
* import speedups (#7122)
* --help cleanup (#7120)
* fish autocompletion for conda env (#7101)
* remove reference to 'system' channel (#7163)
* add http error body to debug information (#7160)
* warn creating env name with space is not supported (#7168)
* support complete MatchSpec syntax in environment.yml files (#7178)
* resolve #4274 add option to remove an existing environment with 'conda create' (#7133)
* add ability for conda prompt customization via 'env_prompt' config param (#7047)
* resolve #7063 add license and license_family to MatchSpec for 'conda search' (#7064)
* resolve #7189 progress bar formatting improvement (#7191)
* raise log level for errors to error (#7229)
* add to conda.exports (#7217)
* resolve #6845 add option -S / --satisfied-skip-solve to exit early for satisfied specs (#7291)
* add NoBaseEnvironmentError and DirectoryNotACondaEnvironmentError (#7378)
* replace menuinst subprocessing by ctypes win elevation (4.6.0a3) (#7426)
* bump minimum requests version to stable, unbundled release (#7528)
* resolve #7591 updates and improvements from namespace PR for 4.6 (#7599)
* resolve #7592 compatibility shims (#7606)
* user-agent context refactor (#7630)
* solver performance improvements with benchmarks in common.logic (#7676)
* enable fuzzy-not-equal version constraint for pip interop (#7711)
* add -d short option for --dry-run (#7719)
* add --force-pkgs-dirs option to conda clean (#7719)
* address #7709 ensure --update-deps unlocks specs from previous user requests (#7719)
* add package timestamp information to output of 'conda search --info' (#7722)
* resolve #7336 'conda search' tries "fuzzy match" before showing PackagesNotFound (#7722)
* resolve #7656 strict channel priority via 'channel_priority' config option or --strict-channel-priority CLI flag (#7729)
* performance improvement to cache __hash__ value on PackageRecord (#7715)
* resolve #7764 change name of 'condacmd' dir to 'condabin'; use on all platforms (#7773)
* resolve #7782 implement PEP-440 '~=' compatible release operator (#7783)
* disable timestamp prioritization when not needed (#7894, #8012)
* compile pyc files for noarch packages in batches (#8015)
* disable per-file sha256 safety checks by default; add extra_safety_checks condarc option to enable them (#8017)
* shorten retries for file removal on windows, where in-use files can't be removed (#8024)
* expand env vars in ``custom_channels``, ``custom_multichannels``, ``default_channels``, ``migrated_custom_channels``, and ``whitelist_channels`` (#7826)
* encode repodata to utf-8 while caching, to fix unicode characters in repodata (#7873)

### Bug Fixes
* fix #7107 verify hangs when a package is corrupted (#7131)
* fix #7145 progress bar uses stderr instead of stdout (#7146)
* fix typo in conda.fish (#7152)
* fix #2154 conda remove should complain if requested removals don't exist (#7135)
* fix #7094 exit early for --dry-run with explicit and clone (#7096)
* fix activation script sort order (#7176)
* fix #7109 incorrect chown with sudo (#7180)
* fix #7210 add suppressed --mkdir back to 'conda create' (fix for 4.6.0a1) (#7211)
* fix #5681 conda env create / update when --file does not exist (#7385)
* resolve #7375 enable conda config --set update_modifier (#7377)
* fix #5885 improve conda env error messages and add extra tests (#7395)
* msys2 path conversion (#7389)
* fix autocompletion in fish (#7575)
* fix #3982 following 4.4 activation refactor (#7607)
* fix #7242 configuration load error message (#7243)
* fix conda env compatibility with pip 18 (#7612)
* fix #7184 remove conflicting specs to find solution to user's active request (#7719)
* fix #7706 add condacmd dir to cmd.exe path on first activation (#7735)
* fix #7761 spec handling errors in 4.6.0b0 (#7780)
* fix #7770 'conda list regex' only applies regex to package name (#7784)
* fix #8076 load metadata from index to resolve inconsistent envs (#8083)

### Non-User-Facing Changes
* resolve #6595 use OO inheritance in activate.py (#7049)
* resolve #7220 pep8 project renamed to pycodestyle (#7221)
* proxy test routine (#7308)
* add .mailmap and .cla-signers (#7361)
* add copyright headers (#7367)
* rename common.platform to common.os and split among windows, linux, and unix utils (#7396)
* fix windows test failures when symlink not available (#7369)
* test building conda using conda-build (#7251)
* solver test metadata updates (#7664)
* explicitly add Mapping, Sequence to common.compat (#7677)
* add debug messages to communicate solver stages (#7803)
* add undocumented sat_solver config parameter (#7811)

### Preview Releases

* 4.6.0a1 at d5bec21d1f64c3bc66c2999cfc690681e9c46177 on 2018-04-20
* 4.6.0a2 at c467517ca652371ebc4224f0d49315b7ec225108 on 2018-05-01
* 4.6.0b0 at 21a24f02b2687d0895de04664a4ec23ccc75c33a on 2018-09-07
* 4.6.0b1 at 1471f043eed980d62f46944e223f0add6a9a790b on 2018-10-22
* 4.6.0rc1 at 64bde065f8343276f168d2034201115dff7c5753 on 2018-12-31

### Contributors
* @cgranade
* @fabioz
* @geremih
* @goanpeca
* @jesse-
* @jjhelmus
* @kalefranz
* @makbigc
* @mandeep
* @mbargull
* @msarahan
* @nehaljwani
* @ohadravid
* @teake


## 4.5.12 (2018-12-10)

### Improvements
* backport 'allow_conda_downgrade' configuration parameter, default is False (#7998)
* speed up verification by disabling per-file sha256 checks (#8017)
* indicate Python 3.7 support in setup.py file (#8018)
* speed up solver by reduce the size of reduced index (#8016)
* speed up solver by skipping timestamp minimization when not needed (#8012)
* compile pyc files more efficiently, will speed up install of noarch packages (#8025)
* avoid waiting for removal of files on Windows when possible (#8024)

### Bug Fixes
* update integration tests for removal of 'features' key (#7726)
* fix conda.bat return code (#7944)
* ensure channel name is not NoneType (#8021)

### Contributors
* @debionne
* @jjhelmus
* @kalefranz
* @msarahan
* @nehaljwani


## 4.5.11 (2018-08-21)

### Improvements
* resolve #7672 compatibility with ruamel.yaml 0.15.54 (#7675)

### Contributors
* @CJ-Wright
* @mbargull


## 4.5.10 (2018-08-13)

### Bug Fixes
* fix conda env compatibility with pip 18 (#7627)
* fix py37 compat 4.5.x (#7641)
* fix #7451 don't print name, version, and size if unknown (#7648)
* replace glob with fnmatch in PrefixData (#7645)

### Contributors
* @jesse-
* @nehaljwani


## 4.5.9 (2018-07-30)

### Improvements
* resolve #7522 prevent conda from scheduling downgrades (#7598)
* allow skipping feature maximization in resolver (#7601)

### Bug Fixes
* fix #7559 symlink stat in localfs adapter (#7561)
* fix #7486 activate with no PATH set (#7562)
* resolve #7522 prevent conda from scheduling downgrades (#7598)

### Contributors
* @kalefranz
* @loriab


## 4.5.8 (2018-07-10)

### Bug Fixes
* fix #7524 should_bypass_proxies for requests 2.13.0 and earlier (#7525)

### Contributors
* @kalefranz


## 4.5.7 (2018-07-09)

### Improvements
* resolve #7423 add upgrade error for unsupported repodata_version (#7415)
* raise CondaUpgradeError for conda version downgrades on environments (#7517)

### Bug Fixes
* fix #7505 temp directory for UnlinkLinkTransaction should be in target prefix (#7516)
* fix #7506 requests monkeypatch fallback for old requests versions (#7515)

### Contributors
* @kalefranz
* @nehaljwani


## 4.5.6 (2018-07-06)

### Bug Fixes
* resolve #7473 py37 support (#7499)
* fix #7494 History spec parsing edge cases (#7500)
* fix requests 2.19 incompatibility with NO_PROXY env var (#7498)
* resolve #7372 disable http error uploads and CI cleanup (#7498, #7501)

### Contributors
* @kalefranz


## 4.5.5 (2018-06-29)

### Bug Fixes
* fix #7165 conda version check should be restricted to channel conda is from (#7289, #7303)
* fix #7341 ValueError n cannot be negative (#7360)
* fix #6691 fix history file parsing containing comma-joined version specs (#7418)
* fix msys2 path conversion (#7471)

### Contributors
* @goanpeca
* @kalefranz
* @mingwandroid
* @mbargull


## 4.5.4 (2018-05-14)

### Improvements
* resolve #7189 progress bar improvement (#7191 via #7274)

### Bug Fixes
* fix twofold tarball extraction, improve progress update (#7275)
* fix #7253 always respect copy LinkType (#7269)

### Contributors
* @jakirkham
* @kalefranz
* @mbargull


## 4.5.3 (2018-05-07)

### Bug Fixes
* fix #7240 conda's configuration context is not initialized in conda.exports (#7244)


## 4.5.2 (2018-04-27)

### Bug Fixes
* fix #7107 verify hangs when a package is corrupted (#7223)
* fix #7094 exit early for --dry-run with explicit and clone (#7224)
* fix activation/deactivation script sort order (#7225)


## 4.5.1 (2018-04-13)

### Improvements
* resolve #7075 add anaconda.org search message to PackagesNotFoundError (#7076)
* add CondaError details to auto-upload reports (#7060)

### Bug Fixes
* fix #6703,#6981 index out of bound when running deactivate on fish shell (#6993)
* properly close over $_CONDA_EXE variable (#7004)
* fix condarc map parsing with comments (#7021)
* fix #6919 csh prompt (#7041)
* add _file_created attribute (#7054)
* fix handling of non-ascii characters in custom_multichannels (#7050)
* fix #6877 handle non-zero return in CSH (#7042)
* fix #7040 update tqdm to version 4.22.0 (#7157)


## 4.5.0 (2018-03-20)

### New Feature Highlights
* A new flag, '--envs', has been added to 'conda search'. In this mode,
  'conda search' will look for the package query in existing conda environments
  on your system. If ran as UID 0 (i.e. root) on unix systems or as an
  Administrator user on Windows, all known conda environments for all users
  on the system will be searched.  For example, 'conda search --envs openssl'
  will show the openssl version and environment location for all
  conda-installed openssl packages.

### Deprecations/Breaking Changes
* resolve #6886 transition defaults from repo.continuum.io to repo.anaconda.com (#6887)
* resolve #6192 deprecate 'conda help' in favor of --help CLI flag (#6918)
* resolve #6894 add http errors to auto-uploaded error reports (#6895)

### Improvements
* resolve #6791 conda search --envs (#6794)
* preserve exit status in fish shell (#6760)
* resolve #6810 add CONDA_EXE environment variable to activate (#6923)
* resolve #6695 outdated conda warning respects --quiet flag (#6935)
* add instructions to activate default environment (#6944)

### API
* resolve #5610 add PrefixData, SubdirData, and PackageCacheData to conda/api.py (#6922)

### Bug Fixes
* channel matchspec fixes (#6893)
* fix #6930 add missing return statement to S3Adapter (#6931)
* fix #5802, #6736 enforce disallowed_packages configuration parameter (#6932)
* fix #6860 infinite recursion in resolve.py for empty track_features (#6928)
* set encoding for PY2 stdout/stderr (#6951)
* fix #6821 non-deterministic behavior from MatchSpec merge clobbering (#6956)
* fix #6904 logic errors in prefix graph data structure (#6929)

### Non-User-Facing Changes
* fix several lgtm.com flags (#6757, #6883)
* cleanups and refactors for conda 4.5 (#6889)
* unify location of record types in conda/models/records.py (#6924)
* resolve #6952 memoize url search in package cache loading (#6957)


## 4.4.11 (2018-02-23)

### Improvements
* resolve #6582 swallow_broken_pipe context manager and Spinner refactor (#6616)
* resolve #6882 document max_shlvl (#6892)
* resolve #6733 make empty env vars sequence-safe for sequence parameters (#6741)
* resolve #6900 don't record conda skeleton environments in environments.txt (#6908)

### Bug Fixes
* fix potential error in ensure_pad(); add more tests (#6817)
* fix #6840 handle error return values in conda.sh (#6850)
* use conda.gateways.disk for misc.py imports (#6870)
* fix #6672 don't update conda during conda-env operations (#6773)
* fix #6811 don't attempt copy/remove fallback for rename failures (#6867)
* fix #6667 aliased posix commands (#6669)
* fix #6816 fish environment autocomplete (#6885)
* fix #6880 build_number comparison not functional in match_spec (#6881)
* fix #6910 sort key prioritizes build string over build number (#6911)
* fix #6914, #6691 conda can fail to update packages even though newer versions exist (#6921)
* fix #6899 handle Unicode output in activate commands (#6909)


## 4.4.10 (2018-02-09)

### Bug Fixes
* fix #6837 require at least futures 3.0.0 (#6855)
* fix #6852 ensure temporary path is writable (#6856)
* fix #6833 improve feature mismatch metric (via 4.3.34 #6853)


## 4.4.9 (2018-02-06)

### Improvements
* resolve #6632 display package removal plan when deleting an env (#6801)

### Bug Fixes
* fix #6531 don't drop credentials for conda-build workaround (#6798)
* fix external command execution issue (#6789)
* fix #5792 conda env export error common in path (#6795)
* fix #6390 add CorruptedEnvironmentError (#6778)
* fix #5884 allow --insecure CLI flag without contradicting meaning of ssl_verify (#6782)
* fix MatchSpec.match() accepting dict (#6808)
* fix broken Anaconda Prompt for users with spaces in paths (#6825)
* JSONDecodeError was added in Python 3.5 (#6848)
* fix #6796 update PATH/prompt on reactivate (#6828)
* fix #6401 non-ascii characters on windows using expanduser (#6847)
* fix #6824 import installers before invoking any (#6849)


## 4.4.8 (2018-01-25)

### Improvements
* allow falsey values for default_python to avoid pinning python (#6682)
* resolve #6700 add message for no space left on device (#6709)
* make variable 'sourced' local for posix shells (#6726)
* add column headers to conda list results (#5726)

### Bug Fixes
* fix #6713 allow parenthesis in prefix path for conda.bat (#6722)
* fix #6684 --force message (#6723)
* fix #6693 KeyError with '--update-deps' (#6694)
* fix aggressive_update_packages availability (#6727)
* fix #6745 don't truncate channel priority map in conda installer (#6746)
* add workaround for system Python usage by lsb_release (#6769)
* fix #6624 can't start new thread (#6653)
* fix #6628 'conda install --rev' in conda 4.4 (#6724)
* fix #6707 FileNotFoundError when extracting tarball (#6708)
* fix #6704 unexpected token in conda.bat (#6710)
* fix #6208 return for no pip in environment (#6784)
* fix #6457 env var cleanup (#6790)
* fix #6645 escape paths for argparse help (#6779)
* fix #6739 handle unicode in environment variables for py2 activate (#6777)
* fix #6618 RepresenterError with 'conda config --set' (#6619)
* fix #6699 suppress memory error upload reports (#6776)
* fix #6770 CRLF for cmd.exe (#6775)
* fix #6514 add message for case-insensitive filesystem errors (#6764)
* fix #6537 AttributeError value for url not set (#6754)
* fix #6748 only warn if unable to register environment due to EACCES (#6752)


## 4.4.7 (2018-01-08)

### Improvements
* resolve #6650 add upgrade message for unicode errors in python 2 (#6651)

### Bug Fixes
* fix #6643 difference between '==' and 'exact_match_' (#6647)
* fix #6620 KeyError(u'CONDA_PREFIX',) (#6652)
* fix #6661 remove env from environments.txt (#6662)
* fix #6629 'conda update --name' AssertionError (#6656)
* fix #6630 repodata AssertionError (#6657)
* fix #6626 add setuptools as constrained dependency (#6654)
* fix #6659 conda list explicit should be dependency sorted (#6671)
* fix #6665 KeyError for channel '<unknown>' (#6668, #6673)
* fix #6627 AttributeError on 'conda activate' (#6655)


## 4.4.6 (2017-12-31)

### Bug Fixes
* fix #6612 do not assume Anaconda Python on Windows nor Library\bin hack (#6615)
* recipe test improvements and associated bug fixes (#6614)


## 4.4.5 (2017-12-29)

### Bug Fixes
* fix #6577, #6580 single quote in PS1 (#6585)
* fix #6584 os.getcwd() FileNotFound (#6589)
* fix #6592 deactivate command order (#6602)
* fix #6579 python not recognized as command (#6588)
* fix #6572 cached repodata PermissionsError (#6573)
* change instances of 'root' to 'base' (#6598)
* fix #6607 use subprocess rather than execv for conda command extensions (#6609)
* fix #6581 git-bash activation (#6587)
* fix #6599 space in path to base prefix (#6608)


## 4.4.4 (2017-12-24)

### Improvements
* add SUDO_ env vars to info reports (#6563)
* add additional information to the #6546 exception (#6551)

### Bug Fixes
* fix #6548 'conda update' installs packages not in prefix #6550
* fix #6546 update after creating an empty env (#6568)
* fix #6557 conda list FileNotFoundError (#6558)
* fix #6554 package cache FileNotFoundError (#6555)
* fix #6529 yaml parse error (#6560)
* fix #6562 repodata_record.json permissions error stack trace (#6564)
* fix #6520 --use-local flag (#6526)

## 4.4.3 (2017-12-22)

### Improvements
* adjust error report message (#6534)

### Bug Fixes
* fix #6530 package cache JsonDecodeError / ValueError (#6533)
* fix #6538 BrokenPipeError (#6540)
* fix #6532 remove anaconda metapackage hack (#6539)
* fix #6536 'conda env export' for old versions of pip (#6535)
* fix #6541 py2 and unicode in environments.txt (#6542)

### Non-User-Facing Changes
* regression tests for #6512 (#6515)


## 4.4.2 (2017-12-22)

### Deprecations/Breaking Changes
* resolve #6523 don't prune with --update-all (#6524)

### Bug Fixes
* fix #6508 environments.txt permissions error stack trace (#6511)
* fix #6522 error message formatted incorrectly (#6525)
* fix #6516 hold channels over from get_index to install_actions (#6517)


## 4.4.1 (2017-12-21)

### Bug Fixes
* fix #6512 reactivate does not accept arguments (#6513)


## 4.4.0 (2017-12-20)

### Recommended change to enable conda in your shell

With the release of conda 4.4, we recommend a change to how the `conda` command is made available to your shell environment. All the old methods still work as before, but you'll need the new method to enable the new `conda activate` and `conda deactivate` commands.

For the "Anaconda Prompt" on Windows, there is no change.

For Bourne shell derivatives (bash, zsh, dash, etc.), you likely currently have a line similar to

    export PATH="/opt/conda/bin:$PATH"

in your `~/.bashrc` file (or `~/.bash_profile` file on macOS).  The effect of this line is that your base environment is put on PATH, but without actually *activating* that environment. (In 4.4 we've renamed the 'root' environment to the 'base' environment.) With conda 4.4, we recommend removing the line where the `PATH` environment variable is modified, and replacing it with

    . /opt/conda/etc/profile.d/conda.sh
    conda activate base

In the above, it's assumed that `/opt/conda` is the location where you installed miniconda or Anaconda.  It may also be something like `~/Anaconda3` or `~/miniconda2`.

For system-wide conda installs, to make the `conda` command available to all users, rather than manipulating individual `~/.bashrc` (or `~/.bash_profile`) files for each user, just execute once

    $ sudo ln -s /opt/conda/etc/profile.d/conda.sh /etc/profile.d/conda.sh

This will make the `conda` command itself available to all users, but conda's base (root) environment will *not* be activated by default.  Users will still need to run `conda activate base` to put the base environment on PATH and gain access to the executables in the base environment.

After updating to conda 4.4, we also recommend pinning conda to a specific channel.  For example, executing the command

    $ conda config --system --add pinned_packages conda-canary::conda

will make sure that whenever conda is installed or changed in an environment, the source of the package is always being pulled from the `conda-canary` channel.  This will be useful for people who use `conda-forge`, to prevent conda from flipping back and forth between 4.3 and 4.4.


### New Feature Highlights

* **conda activate**: The logic and mechanisms underlying environment activation have been reworked. With conda 4.4, `conda activate` and `conda deactivate` are now the preferred commands for activating and deactivating environments. You'll find they are much more snappy than the `source activate` and `source deactivate` commands from previous conda versions. The `conda activate` command also has advantages of (1) being universal across all OSes, shells, and platforms, and (2) not having path collisions with scripts from other packages like python virtualenv's activate script.


* **constrained, optional dependencies**: Conda now allows a package to constrain versions of other packages installed alongside it, even if those constrained packages are not themselves hard dependencies for that package. In other words, it lets a package specify that, if another package ends up being installed into an environment, it must at least conform to a certain version specification. In effect, constrained dependencies are a type of "reverse" dependency. It gives a tool to a parent package to exclude other packages from an environment that might otherwise want to depend on it.

  Constrained optional dependencies are supported starting with conda-build 3.0 (via [conda/conda-build#2001[(https://github.com/conda/conda-build/pull/2001)). A new `run_constrained` keyword, which takes a list of package specs similar to the `run` keyword, is recognized under the `requirements` section of `meta.yaml`. For backward compatibility with versions of conda older than 4.4, a requirement may be listed in both the `run` and the `run_constrained` section. In that case older versions of conda will see the package as a hard dependency, while conda 4.4 will understand that the package is meant to be optional.

  Optional, constrained dependencies end up in `repodata.json` under a `constrains` keyword, parallel to the `depends` keyword for a package's hard dependencies.


* **enhanced package query language**: Conda has a built-in query language for searching for and matching packages, what we often refer to as `MatchSpec`. The MatchSpec is what users input on the command line when they specify packages for `create`, `install`, `update`, and `remove` operations. With this release, MatchSpec (rather than a regex) becomes the default input for `conda search`. We have also substantially enhanced our MatchSpec query language.

  For example,

      conda install conda-forge::python

  is now a valid command, which specifies that regardless of the active list of channel priorities, the python package itself should come from the `conda-forge` channel. As before, the difference between `python=3.5` and `python==3.5` is that the first contains a "*fuzzy*" version while the second contains an *exact* version. The fuzzy spec will match all python packages with versions `>=3.5` and `<3.6`. The exact spec will match only python packages with version `3.5`, `3.5.0`, `3.5.0.0`, etc. The canonical string form for a MatchSpec is thus

      (channel::)name(version(build_string))

  which should feel natural to experienced conda users. Specifications however are often necessarily more complicated than this simple form can support, and for these situations we've extended the specification to include an optional square bracket `[]` component containing comma-separated key-value pairs to allow matching on most any field contained in a package's metadata. Take, for example,

      conda search 'conda-forge/linux-64::*[md5=e42a03f799131d5af4196ce31a1084a7]' --info

  which results in information for the single package

  ```
  cytoolz 0.8.2 py35_0
  --------------------
  file name   : cytoolz-0.8.2-py35_0.tar.bz2
  name        : cytoolz
  version     : 0.8.2
  build string: py35_0
  build number: 0
  size        : 1.1 MB
  arch        : x86_64
  platform    : Platform.linux
  license     : BSD 3-Clause
  subdir      : linux-64
  url         : https://conda.anaconda.org/conda-forge/linux-64/cytoolz-0.8.2-py35_0.tar.bz2
  md5         : e42a03f799131d5af4196ce31a1084a7
  dependencies:
    - python 3.5*
    - toolz >=0.8.0
  ```

  The square bracket notation can also be used for any field that we match on outside the package name, and will override information given in the "simple form" position. To give a contrived example, `python==3.5[version='>=2.7,<2.8']` will match `2.7.*` versions and not `3.5`.


* **environments track user-requested state**: Building on our enhanced MatchSpec query language, conda environments now also track and differentiate (a) packages added to an environment because of an explicit user request from (b) packages brought into an environment to satisfy dependencies. For example, executing

      conda install conda-forge::scikit-learn

  will confine all future changes to the scikit-learn package in the environment to the conda-forge channel, until the spec is changed again. A subsequent command `conda install scikit-learn=0.18` would drop the `conda-forge` channel restriction from the package. And in this case, scikit-learn is the only user-defined spec, so the solver chooses dependencies from all configured channels and all available versions.


* **errors posted to core maintainers**: In previous versions of conda, unexpected errors resulted in a request for users to consider posting the error as a new issue on conda's github issue tracker. In conda 4.4, we've implemented a system for users to opt-in to sending that same error report via an HTTP POST request directly to the core maintainers.

  When an unexpected error is encountered, users are prompted with the error report followed by a `[y/N]` input. Users can elect to send the report, with 'no' being the default response. Users can also permanently opt-in or opt-out, thereby skipping the prompt altogether, using the boolean `report_errors` configuration parameter.


* **various UI improvements**: To push through some of the big leaps with transactions in conda 4.3, we accepted some regressions on progress bars and other user interface features. All of those indicators of progress, and more, have been brought back and further improved.


* **aggressive updates**: Conda now supports an `aggressive_update_packages` configuration parameter that holds a sequence of MatchSpec strings, in addition to the `pinned_packages` configuration parameter. Currently, the default value contains the packages `ca-certificates`, `certifi`, and `openssl`. When manipulating configuration with the `conda config` command, use of the `--system` and `--env` flags will be especially helpful here. For example,

      conda config --add aggressive_update_packages defaults::pyopenssl --system

  would ensure that, system-wide, solves on all environments enforce using the latest version of `pyopenssl` from the `defaults` channel.

      conda config --add pinned_packages python=2.7 --env

  would lock all solves for the current active environment to python versions matching `2.7.*`.


* **other configuration improvements**: In addition to `conda config --describe`, which shows detailed descriptions and default values for all available configuration parameters, we have a new `conda config --write-default` command. This new command simply writes the contents of `conda config --describe` to a condarc file, which is a great starter template. Without additional arguments, the command will write to the `.condarc` file in the user's home directory. The command also works with the `--system`, `--env`, and `--file` flags to write the contents to alternate locations.

  Conda exposes a tremendous amount of flexibility via configuration. For more information, [The Conda Configuration Engine for Power Users](https://www.continuum.io/blog/developer-blog/conda-configuration-engine-power-users) blog post is a good resource.


### Deprecations/Breaking Changes
* the conda 'root' environment is now generally referred to as the 'base' environment
* Conda 4.4 now warns when available information about per-path sha256 sums and file sizes
  do not match the recorded information.  The warning is scheduled to be an error in conda 4.5.
  Behavior is configurable via the `safety_checks` configuration parameter.
* remove support for with_features_depends (#5191)
* resolve #5468 remove --alt-hint from CLI API (#5469)
* resolve #5834 change default value of 'allow_softlinks' from True to False (#5835)
* resolve #5842 add deprecation warnings for 'conda env upload' and 'conda env attach' (#5843)

### API
* Add Solver from conda.core.solver with three methods to conda.api (4.4.0rc1) (#5838)

### Improvements
* constrained, optional dependencies (#4982)
* conda shell function (#5044, #5141, #5162, #5169, #5182, #5210, #5482)
* resolve #5160 conda xontrib plugin (#5157)
* resolve #1543 add support and tests for --no-deps and --only-deps (#5265)
* resolve #988 allow channel name to be part of the package name spec (#5365, #5791)
* resolve #5530 add ability for users to choose to post unexpected errors to core maintainers (#5531, #5571, #5585)
* Solver, UI, History, and Other (#5546, #5583, #5740)
* improve 'conda search' to leverage new MatchSpec query language (#5597)
* filter out unwritable package caches from conda clean command (#4620)
* envs_manager, requested spec history, declarative solve, and private env tests (#4676, #5114, #5094, #5145, #5492)
* make python entry point format match pip entry points (#5010)
* resolve #5113 clean up CLI imports to improve process startup time (#4799)
* resolve #5121 add features/track_features support for MatchSpec (#5054)
* resolve #4671 hold verify backoff count in transaction context (#5122)
* resolve #5078 record package metadata after tarball extraction (#5148)
* resolve #3580 support stacking environments (#5159)
* resolve #3763, #4378 allow pip requirements.txt syntax in environment files (#3969)
* resolve #5147 add 'config files' to conda info (#5269)
* use --format=json to parse list of pip packages (#5205)
* resolve #1427 remove startswith '.' environment name constraint (#5284)
* link packages from extracted tarballs when tarball is gone (#5289)
* resolve #2511 accept config information from stdin (#5309)
* resolve #4302 add ability to set map parameters with conda config (#5310)
* resolve #5256 enable conda config --get for all primitive parameters (#5312)
* resolve #1992 add short flag -C for --use-index-cache (#5314)
* resolve #2173 add --quiet option to conda clean (#5313)
* resolve #5358 conda should exec to subcommands, not subprocess (#5359)
* resolve #5411 add 'conda config --write-default' (#5412)
* resolve #5081 make pinned packages optional dependencies (#5414)
* resolve #5430 eliminate current deprecation warnings (#5422)
* resolve #5470 make stdout/stderr capture in python_api customizable (#5471)
* logging simplifications/improvements (#5547, #5578)
* update license information (#5568)
* enable threadpool use for repodata collection by default (#5546, #5587)
* conda info now raises PackagesNotFoundError (#5655)
* index building optimizations (#5776)
* fix #5811 change safety_checks default to 'warn' for conda 4.4 (4.4.0rc1) (#5824)
* add constrained dependencies to conda's own recipe (4.4.0rc1) (#5823)
* clean up parser imports (4.4.0rc2) (#5844)
* resolve #5983 add --download-only flag to create, install, and update (4.4.0rc2) (#5988)
* add ca-certificates and certifi to aggressive_update_packages default (4.4.0rc2) (#5994)
* use environments.txt to list all known environments (4.4.0rc2) (#6313)
* resolve #5417 ensure unlink order is correctly sorted (4.4.0) (#6364)
* resolve #5370 index is only prefix and cache in --offline mode (4.4.0) (#6371)
* reduce redundant sys call during file copying (4.4.0rc3) (#6421)
* enable aggressive_update_packages (4.4.0rc3) (#6392)
* default conda.sh to dash if otherwise can't detect (4.4.0rc3) (#6414)
* canonicalize package names when comparing with pip (4.4.0rc3) (#6438)
* add target prefix override configuration parameter (4.4.0rc3) (#6413)
* resolve #6194 warn when conda is outdated (4.4.0rc3) (#6370)
* add information to displayed error report (4.4.0rc3) (#6437)
* csh wrapper (4.4.0) (#6463)
* resolve #5158 --override-channels (4.4.0) (#6467)
* fish update for conda 4.4 (4.4.0) (#6475, #6502)
* skip an unnecessary environments.txt rewrite (4.4.0) (#6495)

### Bug Fixes
* fix some conda-build compatibility issues (#5089)
* resolve #5123 export toposort (#5124)
* fix #5132 signal handler can only be used in main thread (#5133)
* fix orphaned --clobber parser arg (#5188)
* fix #3814 don't remove directory that's not a conda environment (#5204)
* fix #4468 _license stack trace (#5206)
* fix #4987 conda update --all no longer displays full list of packages (#5228)
* fix #3489 don't error on remove --all if environment doesn't exist (#5231)
* fix #1509 bash doesn't need full path for pre/post link/unlink scripts on unix (#5252)
* fix #462 add regression test (#5286)
* fix #5288 confirmation prompt doesn't accept no (#5291)
* fix #1713 'conda package -w' is case dependent on Windows (#5308)
* fix #5371 try falling back to pip's vendored requests if no requests available (#5372)
* fix #5356 skip root logger configuration (#5380)
* fix #5466 scrambled URL of non-alias channel with token (#5467)
* fix #5444 environment.yml file not found (#5475)
* fix #3200 use proper unbound checks in bash code and test (#5476)
* invalidate PrefixData cache on rm_rf for conda-build (#5491, #5499)
* fix exception when generating JSON output (#5628)
* fix target prefix determination (#5642)
* use proxy to avoid segfaults (#5716)
* fix #5790 incorrect activation message (4.4.0rc1) (#5820)
* fix #5808 assertion error when loading package cache (4.4.0rc1) (#5815)
* fix #5809 _pip_install_via_requirements got an unexpected keyword argument 'prune' (4.4.0rc1) (#5814)
* fix #5811 change safety_checks default to 'warn' for conda 4.4 (4.4.0rc1) (#5824)
* fix #5825 --json output format (4.4.0rc1) (#5831)
* fix force_reinstall for case when packages aren't actually installed (4.4.0rc1) (#5836)
* fix #5680 empty pip subsection error in environment.yml (4.4.0rc2) (#6275)
* fix #5852 bad tokens from history crash conda installs (4.4.0rc2) (#6076)
* fix #5827 no error message on invalid command (4.4.0rc2) (#6352)
* fix exception handler for 'conda activate' (4.4.0rc2) (#6365)
* fix #6173 double prompt immediately after conda 4.4 upgrade (4.4.0rc2) (#6351)
* fix #6181 keep existing pythons pinned to minor version (4.4.0rc2) (#6363)
* fix #6201 incorrect subdir shown for conda search when package not found (4.4.0rc2) (#6367)
* fix #6045 help message and zsh shift (4.4.0rc3) (#6368)
* fix noarch python package resintall (4.4.0rc3) (#6394)
* fix #6366 shell activation message (4.4.0rc3) (#6369)
* fix #6429 AttributeError on 'conda remove' (4.4.0rc3) (#6434)
* fix #6449 problems with 'conda info --envs' (#6451)
* add debug exception for #6430 (4.4.0rc3) (#6435)
* fix #6441 NotImplementedError on 'conda list' (4.4.0rc3) (#6442)
* fix #6445 scale back directory activation in PWD (4.4.0rc3) (#6447)
* fix #6283 no-deps for conda update case (4.4.0rc3) (#6448)
* fix #6419 set PS1 in python code (4.4.0rc3) (#6446)
* fix #6466 sp_dir doesn't exist (#6470)
* fix #6350 --update-all removes too many packages (4.4.0) (#6491)
* fix #6057 unlink-link order for python noarch packages on windows 4.4.x (4.4.0) (#6494)

### Non-User-Facing Changes
* eliminate index modification in Resolve init (#4333)
* new MatchSpec implementation (#4158, #5517)
* update conda.recipe for 4.4 (#5086)
* resolve #5118 organization and cleanup for 4.4 release (#5115)
* remove unused disk space check instructions (#5167)
* localfs adapter tests (#5181)
* extra config command tests (#5185)
* add coverage for confirm (#5203)
* clean up FileNotFoundError and DirectoryNotFoundError (#5237)
* add assertion that a path only has a single hard link before rewriting prefixes (#5305)
* remove pycrypto as requirement on windows (#5326)
* import cleanup, dead code removal, coverage improvements, and other
  housekeeping (#5472, #5474, #5480)
* rename CondaFileNotFoundError to PathNotFoundError (#5521)
* work toward repodata API (#5267)
* rename PackageNotFoundError to PackagesNotFoundError and fix message formatting (#5602)
* update conda 4.4 bld.bat windows recipe (#5573)
* remove last remnant of CondaEnvRuntimeError (#5643)
* fix typo (4.4.0rc2) (#6043)
* replace Travis-CI with CircleCI (4.4.0rc2) (#6345)
* key-value features (#5645); reverted in 4.4.0rc2 (#6347, #6492)
* resolve #6431 always add env_vars to info_dict (4.4.0rc3) (#6436)
* move shell inside conda directory (4.4.0) (#6479)
* remove dead code (4.4.0) (#6489)


## 4.3.34 (2018-02-09)

### Bug Fixes
* fix #6833 improve feature mismatch metric (#6853)


## 4.3.33 (2018-01-24)

### Bug Fixes
* fix #6718 broken 'conda install --rev' (#6719)
* fix #6765 adjust the feature score assigned to packages not installed (#6766)


## 4.3.32 (2018-01-10)

### Improvements
* resolve #6711 fall back to copy/unlink for EINVAL, EXDEV rename failures (#6712)

### Bug Fixes
* fix #6057 unlink-link order for python noarch packages on windows (#6277)
* fix #6509 custom_channels incorrect in 'conda config --show' (#6510)


## 4.3.31 (2017-12-15)

### Improvements
* add delete_trash to conda_env create (#6299)

### Bug Fixes
* fix #6023 assertion error for temp file (#6154)
* fix #6220 --no-builds flag for 'conda env export' (#6221)
* fix #6271 timestamp prioritization results in undesirable race-condition (#6279)

### Non-User-Facing Changes
* fix two failing integration tests after anaconda.org API change (#6182)
* resolve #6243 mark root as not writable when sys.prefix is not a conda environment (#6274)
* add timing instrumentation (#6458)


## 4.3.30 (2017-10-17)

### Improvements
* address #6056 add additional proxy variables to 'conda info --all' (#6083)

### Bug Fixes
* address #6164 move add_defaults_to_specs after augment_specs (#6172)
* fix #6057 add additional detail for message 'cannot link source that does not exist' (#6082)
* fix #6084 setting default_channels from CLI raises NotImplementedError (#6085)


## 4.3.29 (2017-10-09)

### Bug Fixes
* fix #6096 coerce to millisecond timestamps (#6131)


## 4.3.28 (2017-10-06)

### Bug Fixes
* fix #5854 remove imports of pkg_resources (#5991)
* fix millisecond timestamps (#6001)


## 4.3.27 (2017-09-18)

### Bug Fixes
* fix #5980 always delete_prefix_from_linked_data in rm_rf (#5982)


## 4.3.26 (2017-09-15)

### Deprecations/Breaking Changes
* resolve #5922 prioritize channels within multi-channels (#5923)
* add https://repo.continuum.io/pkgs/main to defaults multi-channel (#5931)

### Improvements
* add a channel priority minimization pass to solver logic (#5859)
* invoke cmd.exe with /D for pre/post link/unlink scripts (#5926)
* add boto3 use to s3 adapter (#5949)

### Bug Fixes
* always remove linked prefix entry with rm_rf (#5846)
* resolve #5920 bump repodata pickle version (#5921)
* fix msys2 activate and deactivate (#5950)


## 4.3.25 (2017-08-16)

### Deprecations/Breaking Changes
* resolve #5834 change default value of 'allow_softlinks' from True to False (#5839)

### Improvements
* add non-admin check to optionally disable non-privileged operation (#5724)
* add extra warning message to always_softlink configuration option (#5826)

### Bug Fixes
* fix #5763 channel url string splitting error (#5764)
* fix regex for repodata _mod and _etag (#5795)
* fix uncaught OSError for missing device (#5830)


## 4.3.24 (2017-07-31)

### Bug Fixes
* fix #5708 package priority sort order (#5733)


## 4.3.23 (2017-07-21)

### Improvements
* resolve #5391 PackageNotFound and NoPackagesFoundError clean up (#5506)

### Bug Fixes
* fix #5525 too many Nones in CondaHttpError (#5526)
* fix #5508 assertion failure after test file not cleaned up (#5533)
* fix #5523 catch OSError when home directory doesn't exist (#5549)
* fix #5574 traceback formatting (#5580)
* fix #5554 logger configuration levels (#5555)
* fix #5649 create_default_packages configuration (#5703)


## 4.3.22 (2017-06-12)

### Improvements
* resolve #5428 clean up cli import in conda 4.3.x (#5429)
* resolve #5302 add warning when creating environment with space in path (#5477)
* for ftp connections, ignore host IP from PASV as it is often wrong (#5489)
* expose common race condition exceptions in exports for conda-build (#5498)

### Bug Fixes
* fix #5451 conda clean --json bug (#5452)
* fix #5400 confusing deactivate message (#5473)
* fix #5459 custom subdir channel parsing (#5478)
* fix #5483 problem with setuptools / pkg_resources import (#5496)


## 4.3.21 (2017-05-25)

### Bug Fixes
* fix #5420 conda-env update error (#5421)
* fix #5425 is admin on win int not callable (#5426)


## 4.3.20 (2017-05-23)

### Improvements
* resolve #5217 skip user confirm in python_api, force always_yes (#5404)

### Bug Fixes
* fix #5367 conda info always shows 'unknown' for admin indicator on Windows (#5368)
* fix #5248 drop plan description information that might not alwasy be accurate (#5373)
* fix #5378 duplicate log messages (#5379)
* fix #5298 record has 'build', not 'build_string' (#5382)
* fix #5384 silence logging info to avoid interfering with JSON output (#5393)
* fix #5356 skip root/conda logger init for cli.python_api (#5405)

### Non-User-Facing Changes
* avoid persistent state after channel priority test (#5392)
* resolve #5402 add regression test for #5384 (#5403)
* clean up inner function definition inside for loop (#5406)


## 4.3.19 (2017-05-18)

### Improvements
* resolve #3689 better error messaging for missing anaconda-client (#5276)
* resolve #4795 conda env export lacks -p flag (#5275)
* resolve #5315 add alias verify_ssl for ssl_verify (#5316)
* resolve #3399 add netrc existence/location to 'conda info' (#5333)
* resolve #3810 add --prefix to conda env update (#5335)

### Bug Fixes
* fix #5272 conda env export ugliness under python2 (#5273)
* fix #4596 warning message from pip on conda env export (#5274)
* fix #4986 --yes not functioning for conda clean (#5311)
* fix #5329 unicode errors on Windows (#5328, #5357)
* fix sys_prefix_unfollowed for Python 3 (#5334)
* fix #5341 --json flag with conda-env (#5342)
* fix 5321 ensure variable PROMPT is set in activate.bat (#5351)

### Non-User-Facing Changes
* test conda 4.3 with requests 2.14.2 (#5281)
* remove pycrypto as requirement on windows (#5325)
* fix typo avaialble -> available (#5345)
* fix test failures related to menuinst update (#5344, #5362)


## 4.3.18 (2017-05-09)

### Improvements
* resolve #4224 warn when pysocks isn't installed (#5226)
* resolve #5229 add --insecure flag to skip ssl verification (#5230)
* resolve #4151 add admin indicator to conda info on windows (#5241)

### Bug Fixes
* fix #5152 conda info spacing (#5166)
* fix --use-index-cache actually hitting the index cache (#5134)
* backport LinkPathAction verify from 4.4 (#5171)
* fix #5184 stack trace on invalid map configuration parameter (#5186)
* fix #5189 stack trace on invalid sequence config param (#5192)
* add support for the linux-aarch64 platform (#5190)
* fix repodata fetch with the `--offline` flag (#5146)
* fix #1773 conda remove spell checking (#5176)
* fix #3470 reduce excessive error messages (#5195)
* fix #1597 make extra sure --dry-run doesn't take any actions (#5201)
* fix #3470 extra newlines around exceptions (#5200)
* fix #5214 install messages for 'nothing_to_do' case (#5216)
* fix #598 stack trace for condarc write permission denied (#5232)
* fix #4960 extra information when exception can't be displayed (#5236)
* fix #4974 no matching dist in linked data for prefix (#5239)
* fix #5258 give correct element types for conda config --describe (#5259)
* fix #4911 separate shutil.copy2 into copy and copystat (#5261)

### Non-User-Facing Changes
* resolve #5138 add test of rm_rf of symlinked files (#4373)
* resolve #4516 add extra trace-level logging (#5249, #5250)
* add tests for --update-deps flag (#5264)


## 4.3.17 (2017-04-24)

### Improvements
* fall back to copy if hardlink fails (#5002)
* add timestamp metadata for tiebreaking conda-build 3 hashed packages (#5018)
* resolve #5034 add subdirs configuration parameter (#5030)
* resolve #5081 make pinned packages optional/constrained dependencies (#5088)
* resolve #5108 improve behavior and add tests for spaces in paths (#4786)

### Bug Fixes
* quote prefix paths for locations with spaces (#5009)
* remove binstar logger configuration overrides (#4989)
* fix #4969 error in DirectoryNotFoundError (#4990)
* fix #4998 pinned string format (#5011)
* fix #5039 collecting main_info shouldn't fail on requests import (#5090)
* fix #5055 improve bad token message for anaconda.org (#5091)
* fix #5033 only re-register valid signal handlers (#5092)
* fix #5028 imports in main_list (#5093)
* fix #5073 allow client_ssl_cert{_key} to be of type None (#5096)
* fix #4671 backoff for package validate race condition (#5098)
* fix #5022 gnu_get_libc_version => linux_get_libc_version (#5099)
* fix #4849 package name match bug (#5103)
* fixes #5102 allow proxy_servers to be of type None (#5107)
* fix #5111 incorrect typify for str + NoneType (#5112)

### Non-User-Facing Changes
* resolve #5012 remove CondaRuntimeError and RuntimeError (#4818)
* full audit ensuring relative import paths within project (#5090)
* resolve #5116 refactor conda/cli/activate.py to help menuinst (#4406)


## 4.3.16 (2017-03-30)

### Improvements
* additions to configuration SEARCH_PATH to improve consistency (#4966)
* add 'conda config --describe' and extra config documentation (#4913)
* enable packaging pinning in condarc using pinned_packages config parameter
  as beta feature (#4921, #4964)

### Bug Fixes
* fix #4914 handle directory creation on top of file paths (#4922)
* fix #3982 issue with CONDA_ENV and using powerline (#4925)
* fix #2611 update instructions on how to source conda.fish (#4924)
* fix #4860 missing information on package not found error (#4935)
* fix #4944 command not found error error (#4963)


## 4.3.15 (2017-03-20)

### Improvements
* allow pkgs_dirs to be configured using `conda config` (#4895)

### Bug Fixes
* remove incorrect elision of delete_prefix_from_linked_data() (#4814)
* fix envs_dirs order for read-only root prefix (#4821)
* fix break-point in conda clean (#4801)
* fix long shebangs when creating entry points (#4828)
* fix spelling and typos (#4868, #4869)
* fix #4840 TypeError reduce() of empty sequence with no initial value (#4843)
* fix zos subdir (#4875)
* fix exceptions triggered during activate (#4873)


## 4.3.14 (2017-03-03)

### Improvements
* use cPickle in place of pickle for repodata (#4717)
* ignore pyc compile failure (#4719)
* use conda.exe for windows entry point executable (#4716, #4720)
* localize use of conda_signal_handler (#4730)
* add skip_safety_checks configuration parameter (#4767)
* never symlink executables using ORIGIN (#4625)
* set activate.bat codepage to CP_ACP (#4558)

### Bug Fixes
* fix #4777 package cache initialization speed (#4778)
* fix #4703 menuinst PathNotFoundException (#4709)
* ignore permissions error if user_site can't be read (#4710)
* fix #4694 don't import requests directly in models (#4711)
* fix #4715 include resources directory in recipe (#4716)
* fix CondaHttpError for URLs that contain '%' (#4769)
* bug fixes for preferred envs (#4678)
* fix #4745 check for info/index.json with package is_extracted (#4776)
* make sure url gets included in CondaHTTPError (#4779)
* fix #4757 map-type configs set to None (#4774)
* fix #4788 partial package extraction (#4789)

### Non-User-Facing Changes
* test coverage improvement (#4607)
* CI configuration improvements (#4713, #4773, #4775)
* allow sha256 to be None (#4759)
* add cache_fn_url to exports (#4729)
* add unicode paths for PY3 integration tests (#4760)
* additional unit tests (#4728, #4783)
* fix conda-build compatibility and tests (#4785)


## 4.3.13 (2017-02-17)

### Improvements
* resolve #4636 environment variable expansion for pkgs_dirs (#4637)
* link, symlink, islink, and readlink for Windows (#4652, #4661)
* add extra information to CondaHTTPError (#4638, #4672)

### Bug Fixes
* maximize requested builds after feature determination (#4647)
* fix #4649 incorrect assert statement concerning package cache directory (#4651)
* multi-user mode bug fixes (#4663)

### Non-User-Facing Changes
* path_actions unit tests (#4654)
* remove dead code (#4369, #4655, #4660)
* separate repodata logic from index into a new core/repodata.py module (#4669)


## 4.3.12 (2017-02-14)

### Improvements
* prepare conda for uploading to pypi (#4619)
* better general http error message (#4627)
* disable old python noarch warning (#4576)

### Bug Fixes
* fix UnicodeDecodeError for ensure_text_type (#4585)
* fix determination of if file path is writable (#4604)
* fix #4592 BufferError cannot close exported pointers exist (#4628)
* fix run_script current working directory (#4629)
* fix pkgs_dirs permissions regression (#4626)

### Non-User-Facing Changes
* fixes for tests when conda-bld directory doesn't exist (#4606)
* use requirements.txt and Makefile for travis-ci setup (#4600, #4633)
* remove hasattr use from compat functions (#4634)


## 4.3.11 (2017-02-09)

### Bug Fixes
* fix attribute error in add_defaults_to_specs (#4577)


## 4.3.10 (2017-02-07)

### Improvements
* remove .json from pickle path (#4498)
* improve empty repodata noarch warning and error messages (#4499)
* don't add python and lua as default specs for private envs (#4529, #4533)
* let default_python be None (#4547, #4550)

### Bug Fixes
* fix #4513 null pointer exception for channel without noarch (#4518)
* fix ssl_verify set type (#4517)
* fix bug for windows multiuser (#4524)
* fix clone with noarch python packages (#4535)
* fix ipv6 for python 2.7 on Windows (#4554)

### Non-User-Facing Changes
* separate integration tests with a marker (#4532)


## 4.3.9 (2017-01-31)

### Improvements
* improve repodata caching for performance (#4478, #4488)
* expand scope of packages included by bad_installed (#4402)
* silence pre-link warning for old noarch (#4451)
* add configuration to optionally require noarch repodata (#4450)
* improve conda subprocessing (#4447)
* respect info/link.json (#4482)

### Bug Fixes
* fix #4398 'hard' was used for link type at one point (#4409)
* fixed "No matches for wildcard '$activate_d/*.fish'" warning (#4415)
* print correct activate/deactivate message for fish shell (#4423)
* fix 'Dist' object has no attribute 'fn' (#4424)
* fix noarch generic and add additional integration test (#4431)
* fix #4425 unknown encoding (#4433)

### Non-User-Facing Changes
* fail CI on conda-build fail (#4405)
* run doctests (#4414)
* make index record mutable again (#4461)
* additional test for conda list --json (#4480)


## 4.3.8 (2017-01-23)

### Bug Fixes
* fix #4309 ignore EXDEV error for directory renames (#4392)
* fix #4393 by force-renaming certain backup files if the path already exists (#4397)


## 4.3.7 (2017-01-20)

### Bug Fixes
* actually revert json output for leaky plan (#4383)
* fix not raising on pre/post-link error (#4382)
* fix find_commands and find_executable for symlinks (#4387)


## 4.3.6 (2017-01-18)

### Bug Fixes
* fix 'Uncaught backoff with errno 41' warning on windows (#4366)
* revert json output for leaky plan (#4349)
* audit os.environ setting (#4360)
* fix #4324 using old dist string instead of dist object (#4361)
* fix #4351 infinite recursion via code in #4120 (#4370)
* fix #4368 conda -h (#4367)
* workaround for symlink race conditions on activate (#4346)


## 4.3.5 (2017-01-17)

### Improvements
* add exception message for corrupt repodata (#4315)

### Bug Fixes
* fix package not being found in cache after download (#4297)
* fix logic for Content-Length mismatch (#4311, #4326)
* use unicode_escape after etag regex instead of utf-8 (#4325)
* fix #4323 central condarc file being ignored (#4327)
* fix #4316 a bug in deactivate (#4316)
* pass target_prefix as env_prefix regardless of is_unlink (#4332)
* pass positional argument 'context' to BasicClobberError (#4335)

### Non-User-Facing Changes
* additional package pinning tests (#4317)


## 4.3.4 (2017-01-13)

### Improvements
* vendor url parsing from urllib3 (#4289)

### Bug Fixes
* fix some bugs in windows multi-user support (#4277)
* fix problems with channels of type <unknown> (#4290)
* include aliases for first command-line argument (#4279)
* fix for multi-line FTP status codes (#4276)

### Non-User-Facing Changes
* make arch in IndexRecord a StringField instead of EnumField
* improve conda-build compatibility (#4266)


## 4.3.3 (2017-01-10)

### Improvements
* respect Cache-Control max-age header for repodata (#4220)
* add 'local_repodata_ttl' configurability (#4240)
* remove questionable "nothing to install" logic (#4237)
* relax channel noarch requirement for 4.3; warn now, raise in future feature release (#4238)
* add additional info to setup.py warning message (#4258)

### Bug Fixes
* remove features properly (#4236)
* do not use `IFS` to find activate/deactivate scripts to source (#4239)
* fix #4235 print message to stderr (#4241)
* fix relative path to python in activate.bat (#4242)
* fix args.channel references (#4245, #4246)
* ensure cache_fn_url right pad (#4255)
* fix #4256 subprocess calls must have env wrapped in str (#4259)


## 4.3.2 (2017-01-06)

### Deprecations/Breaking Changes
* Further refine conda channels specification. To verify if the url of a channel
  represents a valid conda channel, we check that `noarch/repodata.json` and/or
  `noarch/repodata.json.bz2` exist, even if empty. (#3739)

### Improvements
* add new 'path_conflict' and 'clobber' configuration options (#4119)
* separate fetch/extract pass for explicit URLs (#4125)
* update conda homepage to conda.io (#4180)

### Bug Fixes
* fix pre/post unlink/link scripts (#4113)
* fix package version regex and bug in create_link (#4132)
* fix history tracking (#4143)
* fix index creation order (#4131)
* fix #4152 conda env export failure (#4175)
* fix #3779 channel UNC path encoding errors on windows (#4190)
* fix progress bar (#4191)
* use context.channels instead of args.channel (#4199)
* don't use local cached repodata for file:// urls (#4209)

### Non-User-Facing Changes
* xfail anaconda token test if local token is found (#4124)
* fix open-ended test failures relating to python 3.6 release (#4145)
* extend timebomb for test_multi_channel_export (#4169)
* don't unlink dists that aren't in the index (#4130)
* add python 3.6 and new conda-build test targets (#4194)


## 4.3.1 (2016-12-19)

### Improvements
* additional pre-transaction validation (#4090)
* export FileMode enum for conda-build (#4080)
* memoize disk permissions tests (#4091)
* local caching of repodata without remote server calls; new 'repodata_timeout_secs'
  configuration parameter (#4094)
* performance tuning (#4104)
* add additional fields to dist object serialization (#4102)

### Bug Fixes
* fix a noarch install bug on windows (#4071)
* fix a spec mismatch that resulted in python versions getting mixed during packaging (#4079)
* fix rollback linked record (#4092)
* fix #4097 keep split in PREFIX_PLACEHOLDER (#4100)


## 4.3.0 (2016-12-14)  Safety

### New Features
* **Unlink and Link Packages in a Single Transaction**: In the past, conda hasn't always been safe
  and defensive with its disk-mutating actions. It has gleefully clobbered existing files, and
  mid-operation failures leave environments completely broken. In some of the most severe examples,
  conda can appear to "uninstall itself." With this release, the unlinking and linking of packages
  for an executed command is done in a single transaction. If a failure occurs for any reason
  while conda is mutating files on disk, the environment will be returned its previous state.
  While we've implemented some pre-transaction checks (verifying package integrity for example),
  it's impossible to anticipate every failure mechanism. In some circumstances, OS file
  permissions cannot be fully known until an operation is attempted and fails. And conda itself
  is not without bugs. Moving forward, unforeseeable failures won't be catastrophic. (#3833, #4030)

* **Progressive Fetch and Extract Transactions**: Like package unlinking and linking, the
  download and extract phases of package handling have also been given transaction-like behavior.
  The distinction is the rollback on error is limited to a single package. Rather than rolling back
  the download and extract operation for all packages, the single-package rollback prevents the
  need for having to re-download every package if an error is encountered. (#4021, #4030)

* **Generic- and Python-Type Noarch/Universal Packages**: Along with conda-build 2.1.0, a
  noarch/universal type for python packages is officially supported. These are much like universal
  python wheels. Files in a python noarch package are linked into a prefix just like any other
  conda package, with the following additional features
  1. conda maps the `site-packages` directory to the correct location for the python version
     in the environment,
  2. conda maps the python-scripts directory to either $PREFIX/bin or $PREFIX/Scripts depending
     on platform,
  3. conda creates the python entry points specified in the conda-build recipe, and
  4. conda compiles pyc files at install time when prefix write permissions are guaranteed.

  Python noarch packages must be "fully universal."  They cannot have OS- or
  python version-specific dependencies.  They cannot have OS- or python version-specific "scripts"
  files. If these features are needed, traditional conda packages must be used. (#3712)

* **Multi-User Package Caches**: While the on-disk package cache structure has been preserved,
  the core logic implementing package cache handling has had a complete overhaul.  Writable and
  read-only package caches are fully supported. (#4021)

* **Python API Module**: An oft requested feature is the ability to use conda as a python library,
  obviating the need to "shell out" to another python process. Conda 4.3 includes a
  `conda.cli.python_api` module that facilitates this use case. While we maintain the user-facing
  command-line interface, conda commands can be executed in-process. There is also a
  `conda.exports` module to facilitate longer-term usage of conda as a library across conda
  conda releases.  However, conda's python code *is* considered internal and private, subject
  to change at any time across releases. At the moment, conda will not install itself into
  environments other than its original install environment. (#4028)

* **Remove All Locks**:  Locking has never been fully effective in conda, and it often created a
  false sense of security. In this release, multi-user package cache support has been
  implemented for improved safety by hard-linking packages in read-only caches to the user's
  primary user package cache. Still, users are cautioned that undefined behavior can result when
  conda is running in multiple process and operating on the same package caches and/or
  environments. (#3862)

### Deprecations/Breaking Changes
* Conda will refuse to clobber existing files that are not within the unlink instructions of
  the transaction. At the risk of being user-hostile, it's a step forward for conda. We do
  anticipate some growing pains. For example, conda will not clobber packages that have been
  installed with pip (or any other package manager). In other instances, conda packages that
  contain overlapping file paths but are from different package families will not install at
  the same time. The `--force` command line flag is the escape hatch. Using `--force` will
  let your operation proceed, but also makes clear that you want conda to do something it
  considers unsafe.
* Conda signed packages have been removed in 4.3. Vulnerabilities existed. An illusion of security
  is worse than not having the feature at all.  We will be incorporating The Update Framework
  into conda in a future feature release. (#4064)
* Conda 4.4 will drop support for older versions of conda-build.

### Improvements
* create a new "trace" log level enabled by `-v -v -v` or `-vvv` (#3833)
* allow conda to be installed with pip, but only when used as a library/dependency (#4028)
* the 'r' channel is now part of defaults (#3677)
* private environment support for conda (#3988)
* support v1 info/paths.json file (#3927, #3943)
* support v1 info/package_metadata.json (#4030)
* improved solver hint detection, simplified filtering (#3597)
* cache VersionOrder objects to improve performance (#3596)
* fix documentation and typos (#3526, #3572, #3627)
* add multikey configuration validation (#3432)
* some Fish autocompletions (#2519)
* reduce priority for packages removed from the index (#3703)
* add user-agent, uid, gid to conda info (#3671)
* add conda.exports module (#3429)
* make http timeouts configurable (#3832)
* add a pkgs_dirs config parameter (#3691)
* add an 'always_softlink' option (#3870, #3876)
* pre-checks for diskspace, etc for fetch and extract #(4007)
* address #3879 don't print activate message when quiet config is enabled (#3886)
* add zos-z subdir (#4060)
* add elapsed time to HTTP errors (#3942)

### Bug Fixes
* account for the Windows Python 2.7 os.environ unicode aversion (#3363)
* fix link field in record object (#3424)
* anaconda api token bug fix; additional tests (#3673)
* fix #3667 unicode literals and unicode decode (#3682)
* add conda-env entrypoint (#3743)
* fix #3807 json dump on conda config --show --json (#3811)
* fix #3801 location of temporary hard links of index.json (#3813)
* fix invalid yml example (#3849)
* add arm platforms back to subdirs (#3852)
* fix #3771 better error message for assertion errors (#3802)
* fix #3999 spaces in shebang replacement (#4008)
* config --show-sources shouldn't show force by default (#3891)
* fix #3881 don't install conda-env in clones of root (#3899)
* conda-build dist compatibility (#3909)

### Non-User-Facing Changes
* remove unnecessary eval (#3428)
* remove dead install_tar function (#3641)
* apply PEP-8 to conda-env (#3653)
* refactor dist into an object (#3616)
* vendor appdirs; remove conda's dependency on anaconda-client import (#3675)
* revert boto patch from #2380 (#3676)
* move and update ROOT_NO_RM (#3697)
* integration tests for conda clean (#3695, #3699)
* disable coverage on s3 and ftp requests adapters (#3696, #3701)
* github repo hygiene (#3705, #3706)
* major install refactor (#3712)
* remove test timebombs (#4012)
* LinkType refactor (#3882)
* move CrossPlatformStLink and make available as export (#3887)
* make Record immutable (#3965)
* project housekeeping (#3994, #4065)
* context-dependent setup.py files (#4057)


## 4.2.17 (unreleased)

### Improvements
* silence pre-link warning for old noarch 4.2.x backport (#4453)

### Bug Fixes
* remove incorrect elision of delete_prefix_from_linked_data() (#4813)
* fix CB #1825 context clobbering (#4867)
* fix #5101 api->conda regex substitution for Anaconda API channels (#5100)

### Non-User-Facing Changes
* build 4.2.x against conda-build 2.1.2 and enforce passing (#4462)


## 4.2.16 (2017-01-20)

### Improvements
* vendor url parsing from urllib3 (#4289)
* workaround for symlink race conditions on activate (#4346)

### Bug Fixes
* do not replace \ with / in file:// URLs on Windows (#4269)
* include aliases for first command-line argument (#4279)
* fix for multi-line FTP status codes (#4276)
* fix errors with unknown type channels (#4291)
* change sys.exit to raise UpgradeError when info/files not found (#4388)

### Non-User-Facing Changes
* start using doctests in test runs and coverage (#4304)
* additional package pinning tests (#4312)


## 4.2.15 (2017-01-10)

### Improvements
* use 'post' instead of 'dev' for commits according to PEP-440 (#4234)
* do not use IFS to find activate/deactivate scripts to source (#4243)
* fix relative path to python in activate.bat (#4244)

### Bug Fixes
* replace sed with python for activate and deactivate #4257


## 4.2.14 (2017-01-07)

### Improvements
* use install.rm_rf for TemporaryDirectory cleanup (#3425)
* improve handling of local dependency information (#2107)
* add default channels to exports for Windows and Unix (#4103)
* make subdir configurable (#4178)

### Bug Fixes
* fix conda/install.py single-file behavior (#3854)
* fix the api->conda substitution (#3456)
* fix silent directory removal (#3730)
* fix location of temporary hard links of index.json (#3975)
* fix potential errors in multi-channel export and offline clone (#3995)
* fix auxlib/packaging, git hashes are not limited to 7 characters (#4189)
* fix compatibility with requests >=2.12, add pyopenssl as dependency (#4059)
* fix #3287 activate in 4.1-4.2.3 clobbers non-conda PATH changes (#4211)

### Non-User-Facing Changes
* fix open-ended test failures relating to python 3.6 release (#4166)
* allow args passed to cli.main() (#4193, #4200, #4201)
* test against python 3.6 (#4197)


## 4.2.13 (2016-11-22)

### Deprecations/Breaking Changes
* show warning message for pre-link scripts (#3727)
* error and exit for install of packages that require conda minimum version 4.3 (#3726)

### Improvements
* double/extend http timeouts (#3831)
* let descriptive http errors cover more http exceptions (#3834)
* backport some conda-build configuration (#3875)

### Bug Fixes
* fix conda/install.py single-file behavior (#3854)
* fix the api->conda substitution (#3456)
* fix silent directory removal (#3730)
* fix #3910 null check for is_url (#3931)

### Non-User-Facing Changes
* flake8 E116, E121, & E123 enabled (#3883)


## 4.2.12 (2016-11-02)

### Bug Fixes

* fix #3732, #3471, #3744 CONDA_BLD_PATH (#3747)
* fix #3717 allow no-name channels (#3748)
* fix #3738 move conda-env to ruamel_yaml (#3740)
* fix conda-env entry point (#3745 via #3743)
* fix again #3664 trash emptying (#3746)


## 4.2.11 (2016-10-23)

### Improvements
* only try once for windows trash removal (#3698)

### Bug Fixes
* fix anaconda api token bug (#3674)
* fix #3646 FileMode enum comparison (#3683)
* fix #3517 conda install --mkdir (#3684)
* fix #3560 hack anaconda token coverup on conda info (#3686)
* fix #3469 alias envs_path to envs_dirs (#3685)


## 4.2.10 (2016-10-18)

### Improvements
* add json output for `conda info -s` (#3588)
* ignore certain binary prefixes on windows (#3539)
* allow conda config files to have .yaml extensions or 'condarc' anywhere in filename (#3633)

### Bug Fixes
* fix conda-build's handle_proxy_407 import (#3666)
* fix #3442, #3459, #3481, #3531, #3548 multiple networking and auth issues (#3550)
* add back linux-ppc64le subdir support (#3584)
* fix #3600 ensure links are removed when unlinking (#3625)
* fix #3602 search channels by platform (#3629)
* fix duplicated packages when updating environment (#3563)
* fix #3590 exception when parsing invalid yaml (#3593 via #3634)
* fix #3655 a string decoding error (#3656)

### Non-User-Facing Changes
* backport conda.exports module to 4.2.x (#3654)
* travis-ci OSX fix (#3615 via #3657)


## 4.2.9 (2016-09-27)

### Bug Fixes
* fix #3536 conda-env messaging to stdout with --json flag (#3537)
* fix #3525 writing to sys.stdout with --json flag for post-link scripts (#3538)
* fix #3492 make NULL falsey with python 3 (#3524)


## 4.2.8 (2016-09-26)

### Improvements
* add "error" key back to json error output (#3523)

### Bug Fixes
* fix #3453 conda fails with create_default_packages (#3454)
* fix #3455 --dry-run fails (#3457)
* dial down error messages for rm_rf (#3522)
* fix #3467 AttributeError encountered for map config parameter validation (#3521)


## 4.2.7 (2016-09-16)

### Deprecations/Breaking Changes
* revert to 4.1.x behavior of `conda list --export` (#3450, #3451)

### Bug Fixes
* don't add binstar token if it's given in the channel spec (#3427, #3440, #3444)
* fix #3433 failure to remove broken symlinks (#3436)

### Non-User-Facing Changes
* use install.rm_rf for TemporaryDirectory cleanup (#3425)


## 4.2.6 (2016-09-14)

### Improvements
* add support for client TLS certificates (#3419)
* address #3267 allow migration of channel_alias (#3410)
* conda-env version matches conda version (#3422)

### Bug Fixes
* fix #3409 unsatisfiable dependency error message (#3412)
* fix #3408 quiet rm_rf (#3413)
* fix #3407 padding error messaging (#3416)
* account for the Windows Python 2.7 os.environ unicode aversion (#3363 via #3420)


## 4.2.5 (2016-09-08)

### Deprecations/Breaking Changes
* partially revert #3041 giving conda config --add previous --prepend behavior (#3364 via #3370)
* partially revert #2760 adding back conda package command (#3398)

### Improvements
* order output of conda config --show; make --json friendly (#3384 via #3386)
* clean the pid based lock on exception (#3325)
* improve file removal on all platforms (#3280 via #3396)

### Bug Fixes
* fix #3332 allow download urls with :: in them (#3335)
* fix always_yes and not-set argparse args overriding other sources (#3374)
* fix ftp fetch timeout (#3392)
* fix #3307 add try/except block for touch lock (#3326)
* fix CONDA_CHANNELS environment variable splitting (#3390)
* fix #3378 CONDA_FORCE_32BIT environment variable (#3391)
* make conda info channel urls actually give urls (#3397)
* fix cio_test compatibility (#3395 via #3400)


## 4.2.4 (2016-08-18)

### Bug Fixes
* fix #3277 conda list package order (#3278)
* fix channel priority issue with duplicated channels (#3283)
* fix local channel channels; add full conda-build unit tests (#3281)
* fix conda install with no package specified (#3284)
* fix #3253 exporting and importing conda environments (#3286)
* fix priority messaging on conda config --get (#3304)
* fix conda list --export; additional integration tests (#3291)
* fix conda update --all idempotence; add integration tests for channel priority (#3306)

### Non-User-Facing Changes
* additional conda-env integration tests (#3288)


## 4.2.3 (2016-08-11)

### Improvements
* added zsh and zsh.exe to Windows shells (#3257)

### Bug Fixes
* allow conda to downgrade itself (#3273)
* fix breaking changes to conda-build from 4.2.2 (#3265)
* fix empty environment issues with conda and conda-env (#3269)

### Non-User-Facing Changes
* add integration tests for conda-env (#3270)
* add more conda-build smoke tests (#3274)


## 4.2.2 (2016-08-09)

### Improvements
* enable binary prefix replacement on windows (#3262)
* add `--verbose` command line flag (#3237)
* improve logging and exception detail (#3237, #3252)
* do not remove empty environment without asking; raise an error when a named environment
  can't be found (#3222)

### Bug Fixes
* fix #3226 user condarc not available on Windows (#3228)
* fix some bugs in conda config --show* (#3212)
* fix conda-build local channel bug (#3202)
* remove subprocess exiting message (#3245)
* fix comment parsing and channels in conda-env environment.yml (#3258, #3259)
* fix context error with conda-env (#3232)
* fix #3182 conda install silently skipping failed linking (#3184)


## 4.2.1 (2016-08-01)

### Improvements
* improve an error message that can happen during conda install --revision (#3181)
* use clean sys.exit with user choice 'No' (#3196)

### Bug Fixes
* critical fix for 4.2.0 error when no git is on PATH (#3193)
* revert #3171 lock cleaning on exit pending further refinement
* patches for conda-build compatibility with 4.2 (#3187)
* fix a bug in --show-sources output that ignored aliased parameter names (#3189)

### Non-User-Facing Changes
* move scripts in bin to shell directory (#3186)


## 4.2.0 (2016-07-28)  Configuration

### New Features
* **New Configuration Engine**: Configuration and "operating context" are the foundation of
  conda's functionality. Conda now has the ability to pull configuration information from a
  multitude of on-disk locations, including `.d` directories and a `.condarc` file *within*
  a conda environment), along with full `CONDA_` environment variable support. Helpful
  validation errors are given for improperly-specified configuration. Full documentation
  updates pending. (#2537, #3160, #3178)
* **New Exception Handling Engine**: Previous releases followed a pattern of premature exiting
  (with hard calls to `sys.exit()` when exceptional circumstances were encountered. This
  release replaces over 100 `sys.exit` calls with python exceptions.  For conda developers,
  this will result in tests that are easier to write.  For developers using conda, this is a
  first step on a long path toward conda being directly importable.  For conda users, this will
  eventually result in more helpful and descriptive errors messages.
  (#2899, #2993, #3016, #3152, #3045)
* **Empty Environments**: Conda can now create "empty" environments when no initial packages
  are specified, alleviating a common source of confusion. (#3072, #3174)
* **Conda in Private Env**: Conda can now be configured to live within its own private
  environment.  While it's not yet default behavior, this represents a first step toward
  separating the `root` environment into a "conda private" environment and a "user default"
  environment. (#3068)
* **Regex Version Specification**: Regular expressions are now valid version specifiers.
  For example, `^1\.[5-8]\.1$|2.2`. (#2933)

### Deprecations/Breaking Changes
* remove conda init (#2759)
* remove conda package and conda bundle (#2760)
* deprecate conda-env repo; pull into conda proper (#2950, #2952, #2954, #3157, #3163, #3170)
* force use of ruamel_yaml (#2762)
* implement conda config --prepend; change behavior of --add to --append (#3041)
* exit on link error instead of logging it (#2639)

### Improvements
* improve locking (#2962, #2989, #3048, #3075)
* clean up requests usage for fetching packages (#2755)
* remove excess output from conda --help (#2872)
* remove os.remove in update_prefix (#3006)
* better error behavior if conda is spec'd for a non-root environment (#2956)
* scale back try_write function on unix (#3076)

### Bug Fixes
* remove psutil requirement, fixes annoying error message (#3135, #3183)
* fix #3124 add threading lock to memoize (#3134)
* fix a failure with multi-threaded repodata downloads (#3078)
* fix windows file url (#3139)
* address #2800, error with environment.yml and non-default channels (#3164)

### Non-User-Facing Changes
* project structure enhancement (#2929, #3132, #3133, #3136)
* clean up channel handling with new channel model (#3130, #3151)
* add Anaconda Cloud / Binstar auth handler (#3142)
* remove dead code (#2761, #2969)
* code refactoring and additional tests (#3052, #3020)
* remove auxlib from project root (#2931)
* vendor auxlib 0.0.40 (#2932, #2943, #3131)
* vendor toolz 0.8.0 (#2994)
* move progressbar to vendor directory (#2951)
* fix conda.recipe for new quirks with conda-build (#2959)
* move captured function to common module (#3083)
* rename CHANGELOG to md (#3087)


## 4.1.13 (unreleased)

* improve handling of local dependency information, #2107
* show warning message for pre-link scripts, #3727
* error and exit for install of packages that require conda minimum version 4.3, #3726
* fix conda/install.py single-file behavior, #3854
* fix open-ended test failures relating to python 3.6 release, #4167
* fix #3287 activate in 4.1-4.2.3 clobbers non-conda PATH changes, #4211
* fix relative path to python in activate.bat, #4244


## 4.1.12 (2016-09-08)

* fix #2837 "File exists" in symlinked path with parallel activations, #3210
* fix prune option when installing packages, #3354
* change check for placeholder to be more friendly to long PATH, #3349


## 4.1.11 (2016-07-26)

* fix PS1 backup in activate script, #3135 via #3155
* correct resolution for 'handle failures in binstar_client more generally', #3156


## 4.1.10 (2016-07-25)

* ignore symlink failure because of read-only file system, #3055
* backport shortcut tests, #3064
* fix #2979 redefinition of $SHELL variable, #3081
* fix #3060 --clone root --copy exception, #3080


## 4.1.9 (2016-07-20)

* fix #3104, add global BINSTAR_TOKEN_PAT
* handle failures in binstar_client more generally


## 4.1.8 (2016-07-12)

* fix #3004 UNAUTHORIZED for url (null binstar token), #3008
* fix overwrite existing redirect shortcuts when symlinking envs, #3025
* partially revert no default shortcuts, #3032, #3047


## 4.0.11 2016-07-09

* allow auto_update_conda from sysrc, #3015 via #3021


## 4.1.7 (2016-07-07)

* add msys2 channel to defaults on Windows, #2999
* fix #2939 channel_alias issues; improve offline enforcement, #2964
* fix #2970, #2974 improve handling of file:// URLs inside channel, #2976


## 4.1.6 (2016-07-01)

* slow down exp backoff from 1 ms to 100 ms factor, #2944
* set max time on exp_backoff to ~6.5 sec,#2955
* fix #2914 add/subtract from PATH; kill folder output text, #2917
* normalize use of get_index behavior across clone/explicit, #2937
* wrap root prefix check with normcase, #2938


## 4.1.5 (2016-06-29)

* more conservative auto updates of conda #2900
* fix some permissions errors with more aggressive use of move_path_to_trash, #2882
* fix #2891 error if allow_other_channels setting is used, #2896
* fix #2886, #2907 installing a tarball directly from the package cache, #2908
* fix #2681, #2778 reverting #2320 lock behavior changes, #2915


## 4.0.10 (2016-06-29)

* fix #2846 revert the use of UNC paths; shorten trash filenames, #2859 via #2878
* fix some permissions errors with more aggressive use of move_path_to_trash, #2882 via #2894


## 4.1.4 (2016-06-27)

* fix #2846 revert the use of UNC paths; shorten trash filenames, #2859
* fix exp backoff on Windows, #2860
* fix #2845 URL for local file repos, #2862
* fix #2764 restore full path var on win; create to CONDA_PREFIX env var, #2848
* fix #2754 improve listing pip installed packages, #2873
* change root prefix detection to avoid clobbering root activate scripts, #2880
* address #2841 add lowest and highest priority indication to channel config output, #2875
* add SYMLINK_CONDA to planned instructions, #2861
* use CONDA_PREFIX, not CONDA_DEFAULT_ENV for activate.d, #2856
* call scripts with redirect on win; more error checking to activate, #2852


## 4.1.3 (2016-06-23)

* ensure conda-env auto update, along with conda, #2772
* make yaml booleans behave how everyone expects them to, #2784
* use accept-encoding for repodata; prefer repodata.json to repodata.json.bz2, #2821
* additional integration and regression tests, #2757, #2774, #2787
* add offline mode to printed info; use offline flag when grabbing channels, #2813
* show conda-env version in conda info, #2819
* adjust channel priority superseded list, #2820
* support epoch ! characters in command line specs, #2832
* accept old default names and new ones when canonicalizing channel URLs #2839
* push PATH, PS1 manipulation into shell scripts, #2796
* fix #2765 broken source activate without arguments, #2806
* fix standalone execution of install.py, #2756
* fix #2810 activating conda environment broken with git bash on Windows, #2795
* fix #2805, #2781 handle both file-based channels and explicit file-based URLs, #2812
* fix #2746 conda create --clone of root, #2838
* fix #2668, #2699 shell recursion with activate #2831


## 4.1.2 (2016-06-17)

* improve messaging for "downgrades" due to channel priority, #2718
* support conda config channel append/prepend, handle duplicates, #2730
* remove --shortcuts option to internal CLI code, #2723
* fix an issue concerning space characters in paths in activate.bat, #2740
* fix #2732 restore yes/no/on/off for booleans on the command line, #2734
* fix #2642 tarball install on Windows, #2729
* fix #2687, #2697 WindowsError when creating environments on Windows, #2717
* fix #2710 link instruction in conda create causes TypeError, #2715
* revert #2514, #2695, disabling of .netrc files, #2736
* revert #2281 printing progress bar to terminal, #2707


## 4.1.1 (2016-06-16)

* add auto_update_conda config parameter, #2686
* fix #2669 conda config --add channels can leave out defaults, #2670
* fix #2703 ignore activate symlink error if links already exist, #2705
* fix #2693 install duplicate packages with older version of Anaconda, #2701
* fix #2677 respect HTTP_PROXY, #2695
* fix #2680 broken fish integration, #2685, #2694
* fix an issue with conda never exiting, #2689
* fix #2688 explicit file installs, #2708
* fix #2700 conda list UnicodeDecodeError, #2706


## 4.0.9 (2016-06-15)

* add auto_update_conda config parameter, #2686


## 4.1.0 (2016-06-14)  Channel Priority

* clean up activate and deactivate scripts, moving back to conda repo, #1727,
  #2265, #2291, #2473, #2501, #2484
* replace pyyaml with ruamel_yaml, #2283, #2321
* better handling of channel collisions, #2323, #2369 #2402, #2428
* improve listing of pip packages with conda list, #2275
* re-license progressbar under BSD 3-clause, #2334
* reduce the amount of extraneous info in hints, #2261
* add --shortcuts option to install shortcuts on windows, #2623
* skip binary replacement on windows, #2630
* don't show channel urls by default in conda list, #2282
* package resolution and solver tweaks, #2443, #2475, #2480
* improved version & build matching, #2442, #2488
* print progress to the terminal rather than stdout, #2281
* verify version specs given on command line are valid, #2246
* fix for try_write function in case of odd permissions, #2301
* fix a conda search --spec error, #2343
* update User-Agent for conda connections, #2347
* remove some dead code paths, #2338, #2374
* fixes a thread safety issue with http requests, #2377, #2383
* manage BeeGFS hard-links non-POSIX configuration, #2355
* prevent version downgrades during removes, #2394
* fix conda info --json, #2445
* truncate shebangs over 127 characters using /usr/bin/env, #2479
* extract packages to a temporary directory then rename, #2425, #2483
* fix help in install, #2460
* fix re-install bug when sha1 differs, #2507
* fix a bug with file deletion, #2499
* disable .netrc files, #2514
* dont fetch index on remove --all, #2553
* allow track_features to be a string *or* a list in .condarc, #2541
* fix #2415 infinite recursion in invalid_chains, #2566
* allow channel_alias to be different than binstar, #2564


## 4.0.8 (2016-06-03)

* fix a potential problem with moving files to trash, #2587


## 4.0.7 (2016-05-26)

* workaround for boto bug, #2380


## 4.0.6 (2016-05-11)

* log "custom" versions as updates rather than downgrades, #2290
* fixes a TypeError exception that can occur on install/update, #2331
* fixes an error on Windows removing files with long path names, #2452


## 4.0.5 (2016-03-16)

* improved help documentation for install, update, and remove, #2262
* fixes #2229 and #2250 related to conda update errors on Windows, #2251
* fixes #2258 conda list for pip packages on Windows, #2264


## 4.0.4 (2016-03-10)

* revert #2217 closing request sessions, #2233


## 4.0.3 (2016-03-10)

* adds a `conda clean --all` feature, #2211
* solver performance improvements, #2209
* fixes conda list for pip packages on windows, #2216
* quiets some logging for package downloads under python 3, #2217
* more urls for `conda list --explicit`, #1855
* prefer more "latest builds" for more packages, #2227
* fixes a bug with dependency resolution and features, #2226


## 4.0.2 (2016-03-08)

* fixes track_features in ~/.condarc being a list, see also #2203
* fixes incorrect path in lock file error #2195
* fixes issues with cloning environments, #2193, #2194
* fixes a strange interaction between features and versions, #2206
* fixes a bug in low-level SAT clause generation creating a
  preference for older versions, #2199


## 4.0.1 (2016-03-07)

* fixes an install issue caused by md5 checksum mismatches, #2183
* remove auxlib build dependency, #2188


## 4.0.0 (2016-03-04)  Solver

* The solver has been retooled significantly. Performance
  should be improved in most circumstances, and a number of issues
  involving feature conflicts should be resolved.
* `conda update <package>` now handles depedencies properly
  according to the setting of the "update_deps" configuration:
      --update-deps: conda will also update any dependencies as needed
                     to install the latest verison of the requrested
                     packages.  The minimal set of changes required to
                     achieve this is sought.
      --no-update-deps: conda will update the packages *only* to the
                     extent that no updates to the dependencies are
                     required
  The previous behavior, which would update the packages without regard to
  their dependencies, could result in a broken configuration, and has been
  removed.
* Conda finally has an official logo.
* Fix `conda clean --packages` on Windows, #1944
* Conda sub-commands now support dashes in names, #1840


## 3.19.4 (unreleased)

* improve handling of local dependency information, #2107
* use install.rm_rf for TemporaryDirectory cleanup, #3425
* fix the api->conda substitution, #3456
* error and exit for install of packages that require conda minimum version 4.3, #3726
* show warning message for pre-link scripts, #3727
* fix silent directory removal, #3730
* fix conda/install.py single-file behavior, #3854


## 3.19.3 (2016-02-19)

* fix critical issue, see #2106

## 3.19.2 (2016-02-19)

* add basic activate/deactivate, conda activate/deactivate/ls for fish,
  see #545
* remove error when CONDA_FORCE_32BIT is set on 32-bit systems, #1985
* suppress help text for --unknown option, #2051
* fix issue with conda create --clone post-link scripts, #2007
* fix a permissions issue on windows, #2083

## 3.19.1 (2016-02-01)

* resolve.py: properly escape periods in version numbers, #1926
* support for pinning Lua by default, #1934
* remove hard-coded test URLs, a module cio_test is now expected when
  CIO_TEST is set


## 3.19.0 (2015-12-17)

* OpenBSD 5.x support, #1891
* improve install CLI to make Miniconda -f work, #1905


## 3.18.9 (2015-12-10)

* allow chaning default_channels (only applies to "system" condarc), from
  from CLI, #1886
* improve default for --show-channel-urls in conda list, #1900


## 3.18.8 (2015-12-03)

* always attempt to delete files in rm_rf, #1864


## 3.18.7 (2015-12-02)

* simplify call to menuinst.install()
* add menuinst as dependency on Windows
* add ROOT_PREFIX to post-link (and pre_unlink) environment


## 3.18.6 (2015-11-19)

* improve conda clean when user lacks permissions, #1807
* make show_channel_urls default to True, #1771
* cleaner write tests, #1735
* fix documentation, #1709
* improve conda clean when directories don't exist, #1808


## 3.18.5 (2015-11-11)

* fix bad menuinst exception handling, #1798
* add workaround for unresolved dependencies on Windows

## 3.18.4 (2015-11-09)

* allow explicit file to contain MD5 hashsums
* add --md5 option to "conda list --explicit"
* stop infinite recursion during certain resolve operations, #1749
* add dependencies even if strictness == 3, #1766


## 3.18.3 (2015-10-15)

* added a pruning step for more efficient solves, #1702
* disallow conda-env to be installed into non-root environment
* improve error output for bad command input, #1706
* pass env name and setup cmd to menuinst, #1699


## 3.18.2 (2015-10-12)

* add "conda list --explicit" which contains the URLs of all conda packages
  to be installed, and can used with the install/create --file option, #1688
* fix a potential issue in conda clean
* avoid issues with LookupErrors when updating Python in the root
  environment on Windows
* don't fetch the index from the network with conda remove
* when installing conda packages directly, "conda install <pkg>.tar.bz2",
  unlink any installed package with that name (not just the installed one)
* allow menu items to be installed in non-root env, #1692


## 3.18.1 (2015-09-28)

* fix: removed reference to win_ignore_root in plan module


## 3.18.0 (2015-09-28)

* allow Python to be updated in root environment on Windows, #1657
* add defaults to specs after getting pinned specs (allows to pin a
  different version of Python than what is installed)
* show what older versions are in the solutions in the resolve debug log
* fix some issues with Python 3.5
* respect --no-deps when installing from .tar or .tar.bz2
* avoid infinite recursion with NoPackagesFound and conda update --all --file
* fix conda update --file
* toposort: Added special case to remove 'pip' dependency from 'python'
* show dotlog messages during hint generation with --debug
* disable the max_only heuristic during hint generation
* new version comparison algorithm, which consistently compares any version
  string, and better handles version strings using things like alpha, beta,
  rc, post, and dev. This should remove any inconsistent version comparison
  that would lead to conda installing an incorrect version.
* use the trash in rm_rf, meaning more things will get the benefit of the
  trash system on Windows
* add the ability to pass the --file argument multiple times
* add conda upgrade alias for conda update
* add update_dependencies condarc option and --update-deps/--no-update-deps
  command line flags
* allow specs with conda update --all
* add --show-channel-urls and --no-show-channel-urls command line options
* add always_copy condarc option
* conda clean properly handles multiple envs directories. This breaks
  backwards compatibility with some of the --json output. Some of the old
  --json keys are kept for backwards compatibility.


## 3.17.0 (2015-09-11)

* add windows_forward_slashes option to walk_prefix(), see #1513
* add ability to set CONDA_FORCE_32BIT environment variable, it should
  should only be used when running conda-build, #1555
* add config option to makes the python dependency on pip optional, #1577
* fix an UnboundLocalError
* print note about pinned specs in no packages found error
* allow wildcards in AND-connected version specs
* print pinned specs to the debug log
* fix conda create --clone with create_default_packages
* give a better error when a proxy isn't found for a given scheme
* enable running 'conda run' in offline mode
* fix issue where hardlinked cache contents were being overwritten
* correctly skip packages whose dependencies can't be found with conda
  update --all
* use clearer terminology in -m help text.
* use splitlines to break up multiple lines throughout the codebase
* fix AttributeError with SSLError


## 3.16.0 (2015-08-10)

  * rename binstar -> anaconda, see #1458
  * fix --use-local when the conda-bld directory doesn't exist
  * fixed --offline option when using "conda create --clone", see #1487
  * don't mask recursion depth errors
  * add conda search --reverse-dependency
  * check whether hardlinking is available before linking when
    using "python install.py --link" directly, see #1490
  * don't exit nonzero when installing a package with no dependencies
  * check which features are installed in an environment via track_features,
    not features
  * set the verify flag directly on CondaSession (fixes conda skeleton not
    respecting the ssl_verify option)


## 3.15.1 (2015-07-23)

  * fix conda with older versions of argcomplete
  * restore the --force-pscheck option as a no-op for backwards
    compatibility


## 3.15.0 (2015-07-22)

  * sort the output of conda info package correctly
  * enable tab completion of conda command extensions using
    argcomplete. Command extensions that import conda should use
    conda.cli.conda_argparse.ArgumentParser instead of
    argparse.ArgumentParser. Otherwise, they should enable argcomplete
    completion manually.
  * allow psutil and pycosat to be updated in the root environment on Windows
  * remove all mentions of pscheck. The --force-pscheck flag has been removed.
  * added support for S3 channels
  * fix color issues from pip in conda list on Windows
  * add support for other machine types on Linux, in particular ppc64le
  * add non_x86_linux_machines set to config module
  * allow ssl_verify to accept strings in addition to boolean values in condarc
  * enable --set to work with both boolean and string values


## 3.14.1 (2015-06-29)

  * make use of Crypto.Signature.PKCS1_PSS module, see #1388
  * note when features are being used in the unsatisfiable hint


## 3.14.0 (2015-06-16)

  * add ability to verify signed packages, see #1343 (and conda-build #430)
  * fix issue when trying to add 'pip' dependency to old python packages
  * provide option "conda info --unsafe-channels" for getting unobscured
    channel list, #1374


## 3.13.0 (2015-06-04)

  * avoid the Windows file lock by moving files to a trash directory, #1133
  * handle env dirs not existing in the Environments completer
  * rename binstar.org -> anaconda.org, see #1348
  * speed up 'source activate' by ~40%


## 3.12.0 (2015-05-05)

  * correctly allow conda to update itself
  * print which file leads to the "unable to remove file" error on Windows
  * add support for the no_proxy environment variable, #1171
  * add a much faster hint generation for unsatisfiable packages, which is now
    always enabled (previously it would not run if there were more than ten
    specs). The new hint only gives one set of conflicting packages, rather
    than all sets, so multiple passes may be necessary to fix such issues
  * conda extensions that import conda should use
    conda.cli.conda_argparser.ArgumentParser instead of
    argparse.ArgumentParser to conform to the conda help guidelines (e.g., all
    help messages should be capitalized with periods, and the options should
    be preceded by "Options:" for the sake of help2man).
  * add confirmation dialog to conda remove. Fixes conda remove --dry-run.


## 3.11.0 (2015-04-22)

  * fix issue where forced update on Windows could cause a package to break
  * remove detection of running processes that might conflict
  * deprecate --force-pscheck (now a no-op argument)
  * make conda search --outdated --names-only work, fixes #1252
  * handle the history file not having read or write permissions better
  * make multiple package resolutions warning easier to read
  * add --full-name to conda list
  * improvements to command help


## 3.10.1 (2015-04-06)

  * fix logic in @memoized for unhashable args
  * restored json cache of repodata, see #1249
  * hide binstar tokens in conda info --json
  * handle CIO_TEST='2 '
  * always find the solution with minimal number of packages, even if there
    are many solutions
  * allow comments at the end of the line in requirement files
  * don't update the progressbar until after the item is finished running
  * add conda/<version> to HTTP header User-Agent string


## 3.10.0 (2015-03-12)

  * change default repo urls to be https
  * add --offline to conda search
  * add --names-only and --full-name to conda search
  * add tab completion for packages to conda search


## 3.9.1 (2015-02-24)

  * pscheck: check for processes in the current environment, see #1157
  * don't write to the history file if nothing has changed, see #1148
  * conda update --all installs packages without version restrictions (except
    for Python), see #1138
  * conda update --all ignores the anaconda metapackage, see #1138
  * use forward slashes for file urls on Windows
  * don't symlink conda in the root environment from activate
  * use the correct package name in the progress bar info
  * use json progress bars for unsatisfiable dependencies hints
  * don't let requests decode gz files when downloaded


## 3.9.0 (2015-02-16)

  * remove (de)activation scripts from conda, those are now in conda-env
  * pip is now always added as a Python dependency
  * allow conda to be installed into environments which start with _
  * add argcomplete tab completion for environments with the -n flag, and for
    package names with install, update, create, and remove


## 3.8.4 (2015-02-03)

  * copy (de)activate scripts from conda-env
  * Add noarch (sub) directory support


## 3.8.3 (2015-01-28)

  * simplified how ROOT_PREFIX is obtained in (de)activate


## 3.8.2 (2015-01-27)

  * add conda clean --source-cache to clean the conda build source caches
  * add missing quotes in (de)activate.bat, fixes problem in Windows when
    conda is installed into a directory with spaces
  * fix conda install --copy


## 3.8.1 (2015-01-23)

  * add missing utf-8 decoding, fixes Python 3 bug when icondata to json file


## 3.8.0 (2015-01-22)

  * move active script into conda-env, which is now a new dependency
  * load the channel urls in the correct order when using concurrent.futures
  * add optional 'icondata' key to json files in conda-meta directory, which
    contain the base64 encoded png file or the icon
  * remove a debug print statement


## 3.7.4 (2014-12-18)

  * add --offline option to install, create, update and remove commands, and
    also add ability to set "offline: True" in condarc file
  * add conda uninstall as alias for conda remove
  * add conda info --root
  * add conda.pip module
  * fix CONDARC pointing to non-existing file, closes issue #961
  * make update -f work if the package is already up-to-date
  * fix possible TypeError when printing an error message
  * link packages in topologically sorted order (so that pre-link scripts can
    assume that the dependencies are installed)
  * add --copy flag to install
  * prevent the progressbar from crashing conda when fetching in some
    situations


## 3.7.3 (2014-11-05)

  * conda install from a local conda package (or a tar fill which
    contains conda packages), will now also install the dependencies
    listed by the installed packages.
  * add SOURCE_DIR environment variable in pre-link subprocess
  * record all created environments in ~/.conda/environments.txt


## 3.7.2 (2014-10-31)

  * only show the binstar install message once
  * print the fetching repodata dot after the repodata is fetched
  * write the install and remove specs to the history file
  * add '-y' as an alias to '--yes'
  * the `--file` option to conda config now defaults to
    os.environ.get('CONDARC')
  * some improvements to documentation (--help output)
  * add user_rc_path and sys_rc_path to conda info --json
  * cache the proxy username and password
  * avoid warning about conda in pscheck
  * make ~/.conda/envs the first user envs dir


## 3.7.1 (2014-10-07)

  * improve error message for forgetting to use source with activate and
    deactivate, see issue #601
  * don't allow to remove the current environment, see issue #639
  * don't fail if binstar_client can't be imported for other reasons,
    see issue #925
  * allow spaces to be contained in conda run
  * only show the conda install binstar hint if binstar is not installed
  * conda info package_spec now gives detailed info on packages. conda info
    path has been removed, as it is duplicated by conda package -w path.


## 3.7.0 (2014-09-19)

  * faster algorithm for --alt-hint
  * don't allow channel_alias with allow_other_channels: false if it is set in
    the system .condarc
  * don't show long "no packages found" error with update --all
  * automatically add the Binstar token to urls when the binstar client is
    installed and logged in
  * carefully avoid showing the binstar token or writing it to a file
  * be more careful in conda config about keys that are the wrong type
  * don't expect directories starting with conda- to be commands
  * no longer recommend to run conda init after pip installing conda. A pip
    installed conda will now work without being initialized to create and
    manage other environments
  * the rm function on Windows now works around access denied errors
  * fix channel urls now showing with conda list with show_channel_urls set to
    true


## 3.6.4 (2014-09-08)

  * fix removing packages that aren't in the channels any more
  * Pretties output for --alt-hint


## 3.6.3 (2014-09-04)

  * skip packages that can't be found with update --all
  * add --use-local to search and remove
  * allow --use-local to be used along with -c (--channels) and
    --override-channels. --override-channels now requires either -c or
    --use-local
  * allow paths in has_prefix to be quoted, to allow for spaces in paths on
    Windows
  * retain Unix style path separators for prefixes in has_prefix on
    Windows (if the placeholder path uses /, replace it with a path that uses
    /, not \)
  * fix bug in --use-local due to API changes in conda-build
  * include user site directories in conda info -s
  * make binary has_prefix replacement work with spaces after the prefix
  * make binary has_prefix replacement replace multiple occurrences of the
    placeholder in the same null-terminated string
  * don't show packages from other platforms as installed or cached in conda
    search
  * be more careful about not warning about conda itself in pscheck
  * Use a progress bar for the unsatisfiable packages hint generation
  * Don't use TemporaryFile in try_write, as it is too slow when it fails
  * Ignore InsecureRequestWarning when ssl_verify is False
  * conda remove removes features tracked by removed packages in
    track_features


## 3.6.2 (2014-08-20)

  * add --use-index-cache to conda remove
  * fix a bug where features (like mkl) would be selected incorrectly
  * use concurrent.future.ThreadPool to fetch package metadata asynchronously
    in Python 3.
  * do the retries in rm_rf on every platform
  * use a higher cutoff for package name misspellings
  * allow changing default channels in "system" .condarc


## 3.6.1 (2014-08-13)

  * add retries to download in fetch module
  * improved error messages for missing packages
  * more robust rm_rf on Windows
  * print multiline help for subcommands correctly


## 3.6.0 (2014-08-11)

  * correctly check if a package can be hard-linked if it isn't extracted yet
  * change how the package plan is printed to better show what is new,
    updated, and downgraded
  * use suggest_normalized_version in the resolve module. Now versions like
    1.0alpha that are not directly recognized by verlib's NormalizedVersion
    are supported better
  * conda run command, to run apps and commands from packages
  * more complete --json API. Every conda command should fully support --json
    output now.
  * show the conda_build and requests versions in conda info
  * include packages from setup.py develop in conda list (with use_pip)
  * raise a warning instead of dying when the history file is invalid
  * use urllib.quote on the proxy password
  * make conda search --outdated --canonical work
  * pin the Python version during conda init
  * fix some metadata that is written for Python during conda init
  * allow comments in a pinned file
  * allow installing and updating menuinst on Windows
  * allow conda create with both --file and listed packages
  * better handling of some nonexistent packages
  * fix command line flags in conda package
  * fix a bug in the ftp adapter


## 3.5.5 (2014-06-10)

  * remove another instance pycosat version detection, which fails on
    Windows, see issue #761


## 3.5.4 (2014-06-10)

  * remove pycosat version detection, which fails on Windows, see issue #761


## 3.5.3 (2014-06-09)

  * fix conda update to correctly not install packages that are already
    up-to-date
  * always fail with connection error in download
  * the package resolution is now much faster and uses less memory
  * add ssl_verify option in condarc to allow ignoring SSL certificate
    verification, see issue #737


## 3.5.2 (2014-05-27)

  * fix bug in activate.bat and deactivate.bat on Windows


## 3.5.1 (2014-05-26)

  * fix proxy support - conda now prompts for proxy username and password
    again
  * fix activate.bat on Windows with spaces in the path
  * update optional psutil dependency was updated to psutil 2.0 or higher


## 3.5.0 (2014-05-15)

  * replace use of urllib2 with requests. requests is now a hard dependency of
    conda.
  * add ability to only allow system-wise specified channels
  * hide binstar from output of conda info


## 3.4.3 (2014-05-05)

  * allow prefix replacement in binary files, see issue #710
  * check if creating hard link is possible and otherwise copy,
    during install
  * allow circular dependencies


## 3.4.2 (2014-04-21)

  * conda clean --lock: skip directories that don't exist, fixes #648
  * fixed empty history file causing crash, issue #644
  * remove timezone information from history file, fixes issue #651
  * fix PackagesNotFound error for missing recursive dependencies
  * change the default for adding cache from the local package cache -
    known is now the default and the option to use index metadata from the
    local package cache is --unknown
  * add --alt-hint as a method to get an alternate form of a hint for
    unsatisfiable packages
  * add conda package --ls-files to list files in a package
  * add ability to pin specs in an environment. To pin a spec, add a file
    called pinned to the environment's conda-meta directory with the specs to
    pin. Pinned specs are always kept installed, unless the --no-pin flag is
    used.
  * fix keyboard interrupting of external commands. Now keyboard interupting
    conda build correctly removes the lock file
  * add no_link ability to conda, see issue #678


## 3.4.1 (2014-04-07)

  * always use a pkgs cache directory associated with an envs directory, even
    when using -p option with an arbitrary a prefix which is not inside an
    envs dir
  * add setting of PYTHONHOME to conda info --system
  * skip packages with bad metadata


## 3.4.0 (2014-04-02)

  * added revision history to each environment:
      - conda list --revisions
      - conda install --revision
      - log is stored in conda-meta/history
  * allow parsing pip-style requirement files with --file option and in command
    line arguments, e.g. conda install 'numpy>=1.7', issue #624
  * fix error message for --file option when file does not exist
  * allow DEFAULTS in CONDA_ENVS_PATH, which expands to the defaults settings,
    including the condarc file
  * don't install a package with a feature (like mkl) unless it is
    specifically requested (i.e., that feature is already enabled in that
    environment)
  * add ability to show channel URLs when displaying what is going to be
    downloaded by setting "show_channel_urls: True" in condarc
  * fix the --quiet option
  * skip packages that have dependencies that can't be found


## 3.3.2 (2014-03-24)

  * fix the --file option
  * check install arguments before fetching metadata
  * fix a printing glitch with the progress bars
  * give a better error message for conda clean with no arguments
  * don't include unknown packages when searching another platform


## 3.3.1 (2014-03-19)

  * Fix setting of PS1 in activate.
  * Add conda update --all.
  * Allow setting CONDARC=' ' to use no condarc.
  * Add conda clean --packages.
  * Don't include bin/conda, bin/activate, or bin/deactivate in conda
    package.


## 3.3.0 (2014-03-18)

  * allow new package specification, i.e. ==, >=, >, <=, <, != separated
    by ',' for example: >=2.3,<3.0
  * add ability to disable self update of conda, by setting
    "self_update: False" in .condarc
  * Try installing packages using the old way of just installing the maximum
    versions of things first. This provides a major speedup of solving the
    package specifications in the cases where this scheme works.
  * Don't include python=3.3 in the specs automatically for the Python 3
    version of conda.  This allows you to do "conda create -n env package" for
    a package that only has a Python 2 version without specifying
    "python=2". This change has no effect in Python 2.
  * Automatically put symlinks to conda, activate, and deactivate in each
    environment on Unix.
  * On Unix, activate and deactivate now remove the root environment from the
    PATH. This should prevent "bleed through" issues with commands not
    installed in the activated environment but that are installed in the root
    environment. If you have "setup.py develop" installed conda on Unix, you
    should run this command again, as the activate and deactivate scripts have
    changed.
  * Begin work to support Python 3.4.
  * Fix a bug in version comparison
  * Fix usage of sys.stdout and sys.stderr in environments like pythonw on
    Windows where they are nonstandard file descriptors.


## 3.2.1 (2014-03-12)

  * fix installing packages with irrational versions
  * fix installation in the api
  * use a logging handler to print the dots


## 3.2.0 (2014-03-11)

  * print dots to the screen for progress
  * move logic functions from resolve to logic module


## 3.2.0a1 (2014-03-07)

  * conda now uses pseudo-boolean constraints in the SAT solver. This allows
    it to search for all versions at once, rather than only the latest (issue
    #491).
  * Conda contains a brand new logic submodule for converting pseudo-boolean
    constraints into SAT clauses.


## 3.1.1 (2014-03-07)

  * check if directory exists, fixed issue #591


## 3.1.0 (2014-03-07)

  * local packages in cache are now added to the index, this may be disabled
    by using the --known option, which only makes conda use index metadata
    from the known remote channels
  * add --use-index-cache option to enable using cache of channel index files
  * fix ownership of files when installing as root on Linux
  * conda search: add '.' symbol for extracted (cached) packages


## 3.0.6 (2014-02-20)

  * fix 'conda update' taking build number into account


## 3.0.5 (2014-02-17)

  * allow packages from create_default_packages to be overridden from the
    command line
  * fixed typo install.py, issue #566
  * try to prevent accidentally installing into a non-root conda environment


## 3.0.4 (2014-02-14)

  * conda update: don't try to update packages that are already up-to-date


## 3.0.3 (2014-02-06)

  * improve the speed of clean --lock
  * some fixes to conda config
  * more tests added
  * choose the first solution rather than the last when there are more than
    one, since this is more likely to be the one you want.


## 3.0.2 (2014-02-03)

  * fix detection of prefix being writable


## 3.0.1 (2014-01-31)

  * bug: not having track_features in condarc now uses default again
  * improved test suite
  * remove numpy version being treated special in plan module
  * if the post-link.(bat|sh) fails, don't treat it as though it installed,
    i.e. it is not added to conda-meta
  * fix activate if CONDA_DEFAULT_ENV is invalid
  * fix conda config --get to work with list keys again
  * print the total download size
  * fix a bug that was preventing conda from working in Python 3
  * add ability to run pre-link script, issue #548


## 3.0.0 (2014-01-24)

  * removed build, convert, index, and skeleton commands, which are now
    part of the conda-build project: https://github.com/conda/conda-build
  * limited pip integration to `conda list`, that means
    `conda install` no longer calls `pip install` # !!!
  * add ability to call sub-commands named 'conda-x'
  * The -c flag to conda search is now shorthand for --channel, not
    --canonical (this is to be consistent with other conda commands)
  * allow changing location of .condarc file using the CONDARC environment
    variable
  * conda search now shows the channel that the package comes from
  * conda search has a new --platform flag for searching for packages in other
    platforms.
  * remove condarc warnings: issue #526#issuecomment-33195012


## 2.3.1 (2014-01-17)

  * add ability create info/no_softlink
  * add conda convert command to convert non-platform-dependent packages from
    one platform to another (experimental)
  * unify create, install, and update code. This adds many features to create
    and update that were previously only available to install. A backwards
    incompatible change is that conda create -f now means --force, not
    --file.


## 2.3.0 (2014-01-16)

  * automatically prepend http://conda.binstar.org/ (or the value of
    channel_alias in the .condarc file) to channels whenever the
    channel is not a URL or the word 'defaults or 'system'
  * recipes made with the skeleton pypi command will use setuptools instead of
    distribute
  * re-work the setuptools dependency and entry_point logic so that
    non console_script entry_points for packages with a dependency on
    setuptools will get correct build script with conda skeleton pypi
  * add -m, --mkdir option to conda install
  * add ability to disable soft-linking


## 2.2.8 (2014-01-06)

  * add check for chrpath (on Linux) before build is started, see issue #469
  * conda build: fixed ELF headers not being recognized on Python 3
  * fixed issues: #467, #476


## 2.2.7 (2014-01-02)

  * fixed bug in conda build related to lchmod not being available on all
    platforms


## 2.2.6 (2013-12-31)

  * fix test section for automatic recipe creation from pypi
    using --build-recipe
  * minor Py3k fixes for conda build on Linux
  * copy symlinks as symlinks, issue #437
  * fix explicit install (e.g. from output of `conda list -e`) in root env
  * add pyyaml to the list of packages which can not be removed from root
    environment
  * fixed minor issues: #365, #453


## 2.2.5 (2013-12-17)

  * conda build: move broken packages to conda-bld/broken
  * conda config: automatically add the 'defaults' channel
  * conda build: improve error handling for invalid recipe directory
  * add ability to set build string, issue #425
  * fix LD_RUN_PATH not being set on Linux under Python 3,
    see issue #427, thanks peter1000


## 2.2.4 (2013-12-10)

  * add support for execution with the -m switch (issue #398), i.e. you
    can execute conda also as: python -m conda
  * add a deactivate script for windows
  * conda build adds .pth-file when it encounters an egg (TODO)
  * add ability to preserve egg directory when building using
        build/preserve_egg_dir: True
  * allow track_features in ~/.condarc
  * Allow arbitrary source, issue #405
  * fixed minor issues: #393, #402, #409, #413


## 2.2.3 (2013-12-03)

  * add "foreign mode", i.e. disallow install of certain packages when
    using a "foreign" Python, such as the system Python
  * remove activate/deactivate from source tarball created by sdist.sh,
    in order to not overwrite activate script from virtualenvwrapper


## 2.2.2 (2013-11-27)

  * remove ARCH environment variable for being able to change architecture
  * add PKG_NAME, PKG_VERSION to environment when running build.sh,
    .<name>-post-link.sh and .<name>-pre-unlink.sh


## 2.2.1 (2013-11-15)

  * minor fixes related to make conda pip installable
  * generated conda meta-data missing 'files' key, fixed issue #357


## 2.2.0 (2013-11-14)

  * add conda init command, to allow installing conda via pip
  * fix prefix being replaced by placeholder after conda build on Unix
  * add 'use_pip' to condarc configuration file
  * fixed activate on Windows to set CONDA_DEFAULT_ENV
  * allow setting "always_yes: True" in condarc file, which implies always
    using the --yes option whenever asked to proceed


## 2.1.0 (2013-11-07)

  * fix rm_egg_dirs so that the .egg_info file can be a zip file
  * improve integration with pip
      * conda list now shows pip installed packages
      * conda install will try to install via "pip install" if no
        conda package is available (unless --no-pip is provided)
      * conda build has a new --build-recipe option which
        will create a recipe (stored in <root>/conda-recipes) from pypi
        then build a conda package (and install it)
      * pip list and pip install only happen if pip is installed
  * enhance the locking mechanism so that conda can call itself in the same
    process.


## 2.0.4 (2013-11-04)

  * ensure lowercase name when generating package info, fixed issue #329
  * on Windows, handle the .nonadmin files


## 2.0.3 (2013-10-28)

  * update bundle format
  * fix bug when displaying packages to be downloaded (thanks Crystal)


## 2.0.2 (2013-10-27)

  * add --index-cache option to clean command, see issue #321
  * use RPATH (instead of RUNPATH) when building packages on Linux


## 2.0.1 (2013-10-23)

  * add --no-prompt option to conda skeleton pypi
  * add create_default_packages to condarc (and --no-default-packages option
    to create command)


## 2.0.0 (2013-10-01)

  * added user/root mode and ability to soft-link across filesystems
  * added create --clone option for copying local environments
  * fixed behavior when installing into an environment which does not
    exist yet, i.e. an error occurs
  * fixed install --no-deps option
  * added --export option to list command
  * allow building of packages in "user mode"
  * regular environment locations now used for build and test
  * add ability to disallow specification names
  * add ability to read help messages from a file when install location is RO
  * restore backwards compatibility of share/clone for conda-api
  * add new conda bundle command and format
  * pass ARCH environment variable to build scripts
  * added progress bar to source download for conda build, issue #230
  * added ability to use url instead of local file to conda install --file
    and conda create --file options


## 1.9.1 (2013-09-06)

  * fix bug in new caching of repodata index


## 1.9.0 (2013-09-05)

  * add caching of repodata index
  * add activate command on Windows
  * add conda package --which option, closes issue 163
  * add ability to install file which contains multiple packages, issue 256
  * move conda share functionality to conda package --share
  * update documentation
  * improve error messages when external dependencies are unavailable
  * add implementation for issue 194: post-link or pre-unlink may append
    to a special file ${PREFIX}/.messages.txt for messages, which is display
    to the user's console after conda completes all actions
  * add conda search --outdated option, which lists only installed packages
    for which newer versions are available
  * fixed numerous Py3k issues, in particular with the build command


## 1.8.2 (2013-08-16)

  * add conda build --check option
  * add conda clean --lock option
  * fixed error in recipe causing conda traceback, issue 158
  * fixes conda build error in Python 3, issue 238
  * improve error message when test command fails, as well as issue 229
  * disable Python (and other packages which are used by conda itself)
    to be updated in root environment on Windows
  * simplified locking, in particular locking should never crash conda
    when files cannot be created due to permission problems


## 1.8.1 (2013-08-07)

  * fixed conda update for no arguments, issue 237
  * fix setting prefix before calling should_do_win_subprocess()
    part of issue 235
  * add basic subversion support when building
  * add --output option to conda build


## 1.8.0 (2013-07-31)

  * add Python 3 support (thanks almarklein)
  * add Mercurial support when building from source (thanks delicb)
  * allow Python (and other packages which are used by conda itself)
    to be updated in root environment on Windows
  * add conda config command
  * add conda clean command
  * removed the conda pip command
  * improve locking to be finer grained
  * made activate/deactivate work with zsh (thanks to mika-fischer)
  * allow conda build to take tarballs containing a recipe as arguments
  * add PKG_CONFIG_PATH to build environment variables
  * fix entry point scripts pointing to wrong python when building Python 3
    packages
  * allow source/sha1 in meta.yaml, issue 196
  * more informative message when there are unsatisfiable package
    specifications
  * ability to set the proxy urls in condarc
  * conda build asks to upload to binstar. This can also be configured by
    changing binstar_upload in condarc.
  * basic tab completion if the argcomplete package is installed and eval
    "$(register-python-argcomplete conda)" is added to the bash profile.


## 1.7.2 (2013-07-02)

  * fixed conda update when packages include a post-link step which was
    caused by subprocess being lazily imported, fixed by 0d0b860
  * improve error message when 'chrpath' or 'patch' is not installed and
    needed by build framework
  * fixed sharing/cloning being broken (issue 179)
  * add the string LOCKERROR to the conda lock error message


## 1.7.1 (2013-06-21)

  * fix "executable" not being found on Windows when ending with .bat when
    launching application
  * give a better error message from when a repository does not exist


## 1.7.0 (2013-06-20)

  * allow ${PREFIX} in app_entry
  * add binstar upload information after conda build finishes


## 1.7.0a2 (2013-06-20)

  * add global conda lock file for only allowing one instance of conda
    to run at the same time
  * add conda skeleton command to create recipes from PyPI
  * add ability to run post-link and pre-unlink script


## 1.7.0a1 (2013-06-13)

  * add ability to build conda packages from "recipes", using the conda build
    command, for some examples, see:
    https://github.com/ContinuumIO/conda-recipes
  * fixed bug in conda install --force
  * conda update command no longer uses anaconda as default package name
  * add proxy support
  * added application API to conda.api module
  * add -c/--channel and --override-channels flags (issue 121).
  * add default and system meta-channels, for use in .condarc and with -c
    (issue 122).
  * fixed ability to install ipython=0.13.0 (issue 130)


## 1.6.0 (2013-06-05)

  * update package command to reflect changes in repodata
  * fixed refactoring bugs in share/clone
  * warn when anaconda processes are running on install in Windows (should
    fix most permissions errors on Windows)


## 1.6.0rc2 (2013-05-31)

  * conda with no arguments now prints help text (issue 111)
  * don't allow removing conda from root environment
  * conda update python does no longer update to Python 3, also ensure that
    conda itself is always installed into the root environment (issue 110)


## 1.6.0rc1 (2013-05-30)

  * major internal refactoring
  * use new "depends" key in repodata
  * uses pycosat to solve constraints more efficiently
  * add hard-linking on Windows
  * fixed linking across filesystems (issue 103)
  * add conda remove --features option
  * added more tests, in particular for new dependency resolver
  * add internal DSL to perform install actions
  * add package size to download preview
  * add conda install --force and --no-deps options
  * fixed conda help command
  * add conda remove --all option for removing entire environment
  * fixed source activate on systems where sourcing a gives "bash" as $0
  * add information about installed versions to conda search command
  * removed known "locations"
  * add output about installed packages when update and install do nothing
  * changed default when prompted for y/n in CLI to yes


## 1.5.2 (2013-04-29)

  * fixed issue 59: bad error message when pkgs dir is not writable


## 1.5.1 (2013-04-19)

  * fixed issue 71 and (73 duplicate): not being able to install packages
    starting with conda (such as 'conda-api')
  * fixed issue 69 (not being able to update Python / NumPy)
  * fixed issue 76 (cannot install mkl on OSX)


## 1.5.0 (2013-03-22)

  * add conda share and clone commands
  * add (hidden) --output-json option to clone, share and info commands
    to support the conda-api package
  * add repo sub-directory type 'linux-armv6l'


## 1.4.6 (2013-03-12)

  * fixed channel selection (issue #56)


## 1.4.5 (2013-03-11)

  * fix issue #53 with install for meta packages
  * add -q/--quiet option to update command


## 1.4.4 (2013-03-09)

  * use numpy 1.7 as default on all platfroms


## 1.4.3 (2013-03-09)

  * fixed bug in conda.builder.share.clone_bundle()


## 1.4.2 (2013-03-08)

  * feature selection fix for update
  * Windows: don't allow linking or unlinking python from the root
             environment because the file lock, see issue #42


## 1.4.1 (2013-03-07)

  * fix some feature selection bugs
  * never exit in activate and deactivate
  * improve help and error messages


## 1.4.0 (2013-03-05)

  * fixed conda pip NAME==VERSION
  * added conda info --license option
  * add source activate and deactivate commands
  * rename the old activate and deactivate to link and unlink
  * add ability for environments to track "features"
  * add ability to distinguish conda build packages from Anaconda
    packages by adding a "file_hash" meta-data field in info/index.json
  * add conda.builder.share module


## 1.3.5 (2013-02-05)

  * fixed detecting untracked files on Windows
  * removed backwards compatibility to conda 1.0 version


## 1.3.4 (2013-01-28)

  * fixed conda installing itself into environments (issue #10)
  * fixed non-existing channels being silently ignored (issue #12)
  * fixed trailing slash in ~/.condarc file cause crash (issue #13)
  * fixed conda list not working when ~/.condarc is missing (issue #14)
  * fixed conda install not working for Python 2.6 environment (issue #17)
  * added simple first cut implementation of remove command (issue #11)
  * pip, build commands: only package up new untracked files
  * allow a system-wide <sys.prefix>/.condarc (~/.condarc takes precedence)
  * only add pro channel is no condarc file exists (and license is valid)


## 1.3.3 (2013-01-23)

  * fix conda create not filtering channels correctly
  * remove (hidden) --test and --testgui options


## 1.3.2 (2013-01-23)

  * fix deactivation of packages with same build number
    note that conda upgrade did not suffer from this problem, as was using
    separate logic


## 1.3.1 (2013-01-22)

  * fix bug in conda update not installing new dependencies


## 1.3.0 (2013-01-22)

  * added conda package command
  * added conda index command
  * added -c, --canonical option to list and search commands
  * fixed conda --version on Windows
  * add this changelog


## 1.2.1 (2012-11-21)

  * remove ambiguity from conda update command


## 1.2.0 (2012-11-20)

  * "conda upgrade" now updates from AnacondaCE to Anaconda (removed
    upgrade2pro
  * add versioneer


## 1.1.0 (2012-11-13)

  * Many new features implemented by Bryan


## 1.0.0 (2012-09-06)

  * initial release
# Code of Conduct

This repo adheres to the [NumFOCUS Code of Conduct](https://www.numfocus.org/code-of-conduct).
# Contributing to Conda

## New Issues

If your issue is a bug report or feature request for:

* **a specific conda package**: please file it at <https://github.com/ContinuumIO/anaconda-issues/issues>
* **anaconda.org**: please file it at <https://anaconda.org/contact/report>
* **repo.anaconda.com**: please file it at <https://github.com/ContinuumIO/anaconda-issues/issues>
* **commands under `conda build`**: please file it at <https://github.com/conda/conda-build/issues>
* **commands under `conda env` and all other conda commands**: please file it at <https://github.com/conda/conda/issues>

## Code of Conduct

The conda organization adheres to the [NumFOCUS Code of Conduct](https://www.numfocus.org/code-of-conduct).

## Development Environment

0. [Signup for a GitHub account][github signup] (if you haven't already) and
   [install Git on your system][install git].
1. Fork the conda repository to your personal GitHub account by clicking the
   "Fork" button on https://github.com/conda/conda and follow GitHub's
   instructions.
2. Clone the repo you just forked on GitHub to your local machine. Configure
   your repo to point to both "upstream" (the main conda repo) and your fork
   ("origin"). For detailed directions, see below:

   **Bash (macOS, Linux, Windows)**

   ```bash
   # choose the repository location
   # warning: not the location of an existing conda installation!
   $ CONDA_PROJECT_ROOT="$HOME/conda"

   # clone the project
   # replace `your-username` with your actual GitHub username
   $ git clone git@github.com:your-username/conda "$CONDA_PROJECT_ROOT"
   $ cd "$CONDA_PROJECT_ROOT"

   # set the `upstream` as the the main repository
   $ git remote add upstream git@github.com:conda/conda
   ```

   **cmd.exe (Windows)**

   ```batch
   # choose the repository location
   # warning: not the location of an existing conda installation!
   > set "CONDA_PROJECT_ROOT=%HOMEPATH%\conda"

   # clone the project
   # replace `your-username` with your actual GitHub username
   > git clone git@github.com:your-username/conda "%CONDA_PROJECT_ROOT%"
   > cd "%CONDA_PROJECT_ROOT%"

   # set the `upstream` as the main repository
   > git remote add upstream git@github.com:conda/conda
   ```

3. One option is to create a local development environment and activate that environment

   **Bash (macOS, Linux, Windows)**

   ```bash
   $ source ./dev/start
   ```

   **cmd.exe (Windows)**

   ```batch
   > .\dev\start.bat
   ```

   This command will create a project-specific base environment (see `devenv`
   in your repo directory after running this command). If the base environment
   already exists this command will simply activate the already-created
   `devenv` environment.

   To be sure that the conda code being interpreted is the code in the project
   directory, look at the value of `conda location:` in the output of
   `conda info --all`.

4. Alternatively, for Linux development only, you can use the same Docker
   image the CI pipelines use. Note that you can run this from all three
   operating systems! We are using `docker compose`, which provides three
   actions for you:

   - `unit-tests`: Run all unit tests.
   - `integration-tests`: Run all integration tests.
   - `interactive`: You are dropped in a pre-initialized Bash session,
     where you can run all your `pytest` commands as required.

   Use them with `docker compose run <action>`. For example:


   **Any shell (macOS, Linux, Windows)**

   ```bash
   $ docker compose run unit-tests
   ```

   This builds the same Docker image as used in continuous
   integration from the [Github Container Registry](https://github.com/conda/conda/pkgs/container/conda-ci)
   and starts `bash` with the conda development mode already enabled.
   By default, it will use Python 3.9 installation.

   If you need a different Python version, set a `CONDA_DOCKER_PYTHON`
   environment variable like this to rebuild the image. You might need
   to add `--no-cache` to make sure the image is rebuilt.

   **Bash (macOS, Linux, Windows)**

   ```bash
   $ CONDA_DOCKER_PYTHON=3.8 docker compose build --no-cache unit-tests
   ```

   **cmd.exe (Windows)**

   ```batch
   > set CONDA_DOCKER_PYTHON=3.8 && docker compose build --no-cache unit-tests && set "CONDA_DOCKER_PYTHON="
   ```

   The next time you run `docker compose run <task>` you will use the new image.
   If you want to revert to the version you were previously using, you need to rebuild
   the image again.

>  The `conda` repository will be mounted to `/opt/conda-src`, so all changes
   done in your editor will be reflected live while the Docker container is
   running.

## Static Code Analysis

This project is configured with [pre-commit](https://pre-commit.com/) to
automatically run linting and other static code analysis on every commit.
Running these tools prior to the PR/code review process helps in two ways:

1. it helps *you* by automating the nitpicky process of identifying and
   correcting code style/quality issues
2. it helps *us* where during code review we can focus on the substance of
   your contribution

Feel free to read up on everything pre-commit related in their
[docs](https://pre-commit.com/#quick-start) but we've included the gist of
what you need to get started below:

**Bash (macOS, Linux, Windows)**

```bash
# reuse the development environment created above
$ source ./dev/start
# or start the Docker image in interactive mode
# $ docker compose run interactive

# install pre-commit hooks for conda
$ cd "$CONDA_PROJECT_ROOT"
$ pre-commit install

# manually running pre-commit on current changes
# note: by default pre-commit only runs on staged files
$ pre-commit run

# automatically running pre-commit during commit
$ git commit
```

**cmd.exe (Windows)**

```batch
:: reuse the development environment created above
> .\dev\start.bat
:: or start the Docker image in interactive mode
:: > docker compose run interactive

:: install pre-commit hooks for conda
> cd "%CONDA_PROJECT_ROOT%"
> pre-commit install

:: manually running pre-commit on current changes
:: note: by default pre-commit only runs on staged files
> pre-commit run

:: automatically running pre-commit during commit
> git commit
```

Beware that some of the tools run by pre-commit can potentially modify the
code (see [black](https://github.com/psf/black),
[blacken-docs](https://github.com/asottile/blacken-docs), and
[darker](https://github.com/akaihola/darker)). If pre-commit detects that any
files were modified it will terminate the commit giving you the opportunity to
review the code before committing again.

Strictly speaking using pre-commit on your local machine for commits is
optional (if you don't install pre-commit you will still be able to commit
normally). But once you open a PR to contribue your changes, pre-commit will
be automatically run at which point any errors that occur will need to be
addressed prior to proceeding.

## Testing

We use pytest to run our test suite. Please consult pytest's
[docs](https://docs.pytest.org/en/6.2.x/usage.html) for detailed instructions
but generally speaking all you need is the following:

**Bash (macOS, Linux, Windows)**

```bash
# reuse the development environment created above
$ source ./dev/start
# or start the Docker image in interactive mode
# $ docker compose run interactive

# run conda's unit tests using GNU make
$ make unit

# or alternately with pytest
$ pytest -m "not integration" conda tests

# or you can use pytest to focus on one specific test
$ pytest tests/test_create.py -k create_install_update_remove_smoketest
```

**cmd.exe (Windows)**

```batch
:: reuse the development environment created above
> .\dev\start.bat
:: or start the Docker image in interactive mode
:: > docker compose run interactive

:: run conda's unit tests with pytest
> pytest -m "not integration" conda tests

:: or you can use pytest to focus on one specific test
> pytest tests\test_create.py -k create_install_update_remove_smoketest
```

Note: Some integration tests require you build a package with conda-build beforehand.
This is taking care of if you run `docker compose run integration-tests`, but you need
to do it manually in other modes:

**Bash (macOS, Linux, Windows)**

```bash
$ conda install conda-build
$ conda-build tests/test-recipes/activate_deactivate_package
```

Check `dev/linux/integration.sh` and `dev\windows\integration.bat` for more details.


## Conda Contributor License Agreement

In case you're new to CLAs, this is rather standard procedure for larger
projects. [Django](https://www.djangoproject.com/foundation/cla/) and
[Python](https://www.python.org/psf/contrib/contrib-form/) for example
both use similar agreements.

Note: New contributors are required to complete the [Conda Contributor License Agreement][1].

For pull requests to be merged, contributors to GitHub pull requests need to
have signed the [Conda Contributor License Agreement][1], so Anaconda, Inc.
has it on file. A record of prior signatories is kept in a [separate repo in
conda's GitHub][2] organization.

[1]: https://conda.io/en/latest/contributing.html#conda-contributor-license-agreement
[2]: https://github.com/conda/clabot-config/blob/master/.clabot
[install git]: https://git-scm.com/book/en/v2/Getting-Started-Installing-Git
[github signup]: https://github.com/signup

## Releasing

Conda releases may be performed via the [rever command](https://regro.github.io/rever-docs/).
Rever is configured to perform the activities for a typical conda-build release.
To cut a release, simply run `rever <X.Y.Z>` where `<X.Y.Z>` is the
release number that you want bump to. For example, `rever 1.2.3`.

However, it is always good idea to make sure that the you have permissions
everywhere to actually perform the release. So it is customary to run
`rever check` before the release, just to make sure.

The standard workflow is thus:

```bash
$ rever check
$ rever 1.2.3
```

If for some reason a release fails partway through, or you want to claw back a
release that you have made, rever allows you to undo activities. If you find yourself
in this pickle, you can pass the `--undo` option a comma-separated list of
activities you'd like to undo. For example:

```bash
$ rever --undo tag,changelog,authors 1.2.3
```

Happy releasing!
# Release notes

This information is drawn from the GitHub conda project
changelog: https://github.com/conda/conda/blob/master/CHANGELOG.md

```{include} ../../CHANGELOG.md
```
```{include} ../../../CONTRIBUTING.md
```
.. NOTE: This file serves both as the README on GitHub and the index.html for
   conda.pydata.org. If you update this file, be sure to cd to the web
   directory and run ``make html; make live``

.. image:: https://s3.amazonaws.com/conda-dev/conda_logo.svg
   :alt: Conda Logo

----------------------------------------

.. image:: https://github.com/conda/conda/actions/workflows/ci.yml/badge.svg
    :target: https://github.com/conda/conda/actions/workflows/ci.yml
    :alt: CI Tests (GitHub Actions)

.. image:: https://github.com/conda/conda/actions/workflows/ci-images.yml/badge.svg
    :target: https://github.com/conda/conda/actions/workflows/ci-images.yml
    :alt: CI Images (GitHub Actions)

.. image:: https://img.shields.io/codecov/c/github/conda/conda/master.svg?label=coverage
   :alt: Codecov Status
   :target: https://codecov.io/gh/conda/conda/branch/master

.. image:: https://img.shields.io/github/release/conda/conda.svg
   :alt: latest release version
   :target: https://github.com/conda/conda/releases

Conda is a cross-platform, language-agnostic binary package manager. It is the
package manager used by `Anaconda
<https://www.anaconda.com/distribution/>`_ installations, but it may be
used for other systems as well.  Conda makes environments first-class
citizens, making it easy to create independent environments even for C
libraries. Conda is written entirely in Python, and is BSD licensed open
source.

Conda is enhanced by organizations, tools, and repositories created and managed by
the amazing members of the conda community.  Some of them can be found
`here <https://github.com/conda/conda/wiki/Conda-Community>`_.


Installation
------------

Conda is a part of the `Anaconda Distribution <https://repo.anaconda.com>`_.
Use `Miniconda <https://conda.io/en/latest/miniconda.html>`_ to bootstrap a minimal installation
that only includes conda and its dependencies.


Getting Started
---------------

If you install Anaconda, you will already have hundreds of packages
installed.  You can see what packages are installed by running

.. code-block:: bash

   $ conda list

to see all the packages that are available, use

.. code-block:: bash

   $ conda search

and to install a package, use

.. code-block:: bash

   $ conda install <package-name>


The real power of conda comes from its ability to manage environments. In
conda, an environment can be thought of as a completely separate installation.
Conda installs packages into environments efficiently using `hard links
<https://en.wikipedia.org/wiki/Hard_link>`_ by default when it is possible, so
environments are space efficient, and take seconds to create.

The default environment, which ``conda`` itself is installed into is called
``base``.  To create another environment, use the ``conda create``
command. For instance, to create an environment with the IPython notebook and
NumPy 1.6, which is older than the version that comes with Anaconda by
default, you would run

.. code-block:: bash

   $ conda create -n numpy16 ipython-notebook numpy=1.6

This creates an environment called ``numpy16`` with the latest version of
the IPython notebook, NumPy 1.6, and their dependencies.

We can now activate this environment, use

.. code-block:: bash

   # On Linux and Mac OS X
   $ source activate numpy16

   # On Windows
   > activate numpy16

This puts the bin directory of the ``numpy16`` environment in the front of the
``PATH``, and sets it as the default environment for all subsequent conda commands.

To go back to the base environment, use

.. code-block:: bash

   # On Linux and Mac OS X
   $ source deactivate

   # On Windows
   > deactivate


Building Your Own Packages
--------------------------

You can easily build your own packages for conda, and upload them
to `anaconda.org <https://anaconda.org>`_, a free service for hosting
packages for conda, as well as other package managers.
To build a package, create a recipe. Package building documentation is available
`here <https://conda.io/projects/conda-build/en/latest/>`_.
See https://github.com/AnacondaRecipes for the recipes that make up the Anaconda Distribution
and ``defaults`` channel. `Conda-forge <https://conda-forge.org/feedstocks/>`_ and
`Bioconda <https://github.com/bioconda/bioconda-recipes>`_ are community-driven
conda-based distributions.

To upload to anaconda.org, create an account.  Then, install the
anaconda-client and login

.. code-block:: bash

   $ conda install anaconda-client
   $ anaconda login

Then, after you build your recipe

.. code-block:: bash

   $ conda build <recipe-dir>

you will be prompted to upload to anaconda.org.

To add your anaconda.org channel, or the channel of others to conda so
that ``conda install`` will find and install their packages, run

.. code-block:: bash

   $ conda config --add channels https://conda.anaconda.org/username

(replacing ``username`` with the user name of the person whose channel you want
to add).

Getting Help
------------

The documentation for conda is at https://conda.io/en/latest/. You can
subscribe to the `conda mailing list
<https://groups.google.com/a/continuum.io/forum/#!forum/conda>`_.  The source
code and issue tracker for conda are on `GitHub <https://github.com/conda/conda>`_.

Contributing
------------

.. image:: https://gitpod.io/button/open-in-gitpod.svg
   :alt: open in gitpod for one-click development
   :target: https://gitpod.io/#https://github.com/conda/conda

Contributions to conda are welcome. See the `contributing <CONTRIBUTING.md>`_ documentation
for instructions on setting up a development environment.
=========
conda-env
=========

.. image:: https://travis-ci.org/conda/conda-env.svg
    :target: https://travis-ci.org/conda/conda-env

Provides the `conda env` interface to Conda environments.

Installing
----------

To install `conda env` with conda, run the following command in your base environment:

.. code-block:: bash

    $ conda install -c conda conda-env


Usage
-----
All of the usage is documented via the ``--help`` flag.

.. code-block:: bash

    $ conda env --help
    usage: conda-env [-h] {create,export,list,remove} ...

    positional arguments:
      {attach,create,export,list,remove,upload,update}
        attach              Embeds information describing your conda environment
                            into the notebook metadata
        create              Create an environment based on an environment file
        export              Export a given environment
        list                List the Conda environments
        remove              Remove an environment
        upload              Upload an environment to anaconda.org
        update              Updates the current environment based on environment
                            file

    optional arguments:
      -h, --help            show this help message and exit


``environment.yml``
-------------------
conda-env allows creating environments using the ``environment.yml``
specification file.  This allows you to specify a name, channels to use when
creating the environment, and the dependencies.  For example, to create an
environment named ``stats`` with numpy and pandas create an ``environment.yml``
file with this as the contents:

.. code-block:: yaml

    name: stats
    dependencies:
      - numpy
      - pandas

Then run this from the command line:

.. code-block:: bash

    $ conda env create
    Fetching package metadata: ...
    Solving package specifications: .Linking packages ...
    [      COMPLETE      ] |#################################################| 100%
    #
    # To activate this environment, use:
    # $ source activate numpy
    #
    # To deactivate this environment, use:
    # $ source deactivate
    #

Your output might vary a little bit depending on whether you have the packages
in your local package cache.

You can explicitly provide an environment spec file using ``-f`` or ``--file``
and the name of the file you would like to use.

The default channels can be excluded by adding ``nodefaults`` to the list of
channels. This is equivalent to passing the ``--override-channels`` option
to most ``conda`` commands, and is like ``defaults`` in the ``.condarc``
channel configuration but with the reverse logic.

Environment file example
-----------------------

.. code-block:: yaml

    name: stats
    channels:
      - javascript
    dependencies:
      - python=3.4   # or 2.7 if you are feeling nostalgic
      - bokeh=0.9.2
      - numpy=1.9.*
      - nodejs=0.10.*
      - flask
      - pip:
        - Flask-Testing

**Recommendation:** Always create your `environment.yml` file by hand.
Constantly
==========

A library that provides symbolic constant support.
It includes collections and constants with text, numeric, and bit flag values.
Originally ``twisted.python.constants`` from the `Twisted <https://twistedmatrix.com/>`_ project.


Tests
-----

To run tests::

    $ tox

This will run tests on Python 2.7, 3.3, 3.4, and PyPy, as well as doing coverage and pyflakes checks.


Incremental
===========

|travis|
|pypi|
|coverage|

Incremental is a small library that versions your Python projects.

API documentation can be found `here <https://hawkowl.github.io/incremental/docs/>`_.


Quick Start
-----------

Add this to your ``setup.py``\ 's ``setup()`` call, removing any other versioning arguments:

.. code::

   setup(
       use_incremental=True,
       setup_requires=['incremental'],
       install_requires=['incremental'], # along with any other install dependencies
       ...
   }


Then run ``python -m incremental.update <projectname> --create`` (you will need ``click`` installed from PyPI).
It will create a file in your package named ``_version.py`` and look like this:

.. code::

   from incremental import Version

   __version__ = Version("widgetbox", 17, 1, 0)
   __all__ = ["__version__"]


Then, so users of your project can find your version, in your root package's ``__init__.py`` add:

.. code::

   from ._version import __version__


Subsequent installations of your project will then use Incremental for versioning.


Incremental Versions
--------------------

``incremental.Version`` is a class that represents a version of a given project.
It is made up of the following elements (which are given during instantiation):

- ``package`` (required), the name of the package this ``Version`` represents.
- ``major``, ``minor``, ``micro`` (all required), the X.Y.Z of your project's ``Version``.
- ``release_candidate`` (optional), set to 0 or higher to mark this ``Version`` being of a release candidate (also sometimes called a "prerelease").
- ``dev`` (optional), set to 0 or higher to mark this ``Version`` as a development release.

You can extract a PEP-440 compatible version string by using the following methods:

- ``.local()``, which returns a ``str`` containing the full version plus any Git or SVN information, if available. An example output would be ``"17.1.1rc1+r123"`` or ``"3.7.0+rb2e812003b5d5fcf08efd1dffed6afa98d44ac8c"``.
- ``.public()``, which returns a ``str`` containing the full version, without any Git or SVN information. This is the version you should provide to users, or publicly use. An example output would be ``"13.2.0"``, ``"17.1.2dev1"``, or ``"18.8.0rc2"``.

Calling ``repr()`` with a ``Version`` will give a Python-source-code representation of it, and calling ``str()`` with a ``Version`` will provide a string similar to ``'[Incremental, version 16.10.1]'``.


Updating
--------

Incremental includes a tool to automate updating your Incremental-using project's version called ``incremental.update``.
It updates the ``_version.py`` file and automatically updates some uses of Incremental versions from an indeterminate version to the current one.
It requires ``click`` from PyPI.

``python -m incremental.update <projectname>`` will perform updates on that package.
The commands that can be given after that will determine what the next version is.

- ``--newversion=<version>``, to set the project version to a fully-specified version (like 1.2.3, or 17.1.0dev1).
- ``--rc``, to set the project version to ``<year-2000>.<month>.0rc1`` if the current version is not a release candidate, or bump the release candidate number by 1 if it is.
- ``--dev``, to set the project development release number to 0 if it is not a development release, or bump the development release number by 1 if it is.
- ``--patch``, to increment the patch number of the release. This will also reset the release candidate number, pass ``--rc`` at the same time to increment the patch number and make it a release candidate.

If you give no arguments, it will strip the release candidate number, making it a "full release".

Incremental supports "indeterminate" versions, as a stand-in for the next "full" version. This can be used when the version which will be displayed to the end-user is unknown (for example "introduced in" or "deprecated in"). Incremental supports the following indeterminate versions:

- ``Version("<projectname>", "NEXT", 0, 0)``
- ``<projectname> NEXT``

When you run ``python -m incremental.update <projectname> --rc``, these will be updated to real versions (assuming the target final version is 17.1.0):

- ``Version("<projectname>", 17, 1, 0, release_candidate=1)``
- ``<projectname> 17.1.0rc1``

Once the final version is made, it will become:

- ``Version("<projectname>", 17, 1, 0)``
- ``<projectname> 17.1.0``


.. |coverage| image:: https://codecov.io/github/hawkowl/incremental/coverage.svg?branch=master
.. _coverage: https://codecov.io/github/hawkowl/incremental

.. |travis| image:: https://travis-ci.org/hawkowl/incremental.svg?branch=master
.. _travis: http://travis-ci.org/hawkowl/incremental

.. |pypi| image:: http://img.shields.io/pypi/v/incremental.svg
.. _pypi: https://pypi.python.org/pypi/incremental


Chardet: The Universal Character Encoding Detector
--------------------------------------------------

.. image:: https://img.shields.io/travis/chardet/chardet/stable.svg
   :alt: Build status
   :target: https://travis-ci.org/chardet/chardet

.. image:: https://img.shields.io/coveralls/chardet/chardet/stable.svg
   :target: https://coveralls.io/r/chardet/chardet

.. image:: https://img.shields.io/pypi/v/chardet.svg
   :target: https://warehouse.python.org/project/chardet/
   :alt: Latest version on PyPI

.. image:: https://img.shields.io/pypi/l/chardet.svg
   :alt: License


Detects
 - ASCII, UTF-8, UTF-16 (2 variants), UTF-32 (4 variants)
 - Big5, GB2312, EUC-TW, HZ-GB-2312, ISO-2022-CN (Traditional and Simplified Chinese)
 - EUC-JP, SHIFT_JIS, CP932, ISO-2022-JP (Japanese)
 - EUC-KR, ISO-2022-KR (Korean)
 - KOI8-R, MacCyrillic, IBM855, IBM866, ISO-8859-5, windows-1251 (Cyrillic)
 - ISO-8859-5, windows-1251 (Bulgarian)
 - ISO-8859-1, windows-1252 (Western European languages)
 - ISO-8859-7, windows-1253 (Greek)
 - ISO-8859-8, windows-1255 (Visual and Logical Hebrew)
 - TIS-620 (Thai)

.. note::
   Our ISO-8859-2 and windows-1250 (Hungarian) probers have been temporarily
   disabled until we can retrain the models.

Requires Python 2.6, 2.7, or 3.3+.

Installation
------------

Install from `PyPI <https://pypi.python.org/pypi/chardet>`_::

    pip install chardet

Documentation
-------------

For users, docs are now available at https://chardet.readthedocs.io/.

Command-line Tool
-----------------

chardet comes with a command-line script which reports on the encodings of one
or more files::

    % chardetect somefile someotherfile
    somefile: windows-1252 with confidence 0.5
    someotherfile: ascii with confidence 1.0

About
-----

This is a continuation of Mark Pilgrim's excellent chardet. Previously, two
versions needed to be maintained: one that supported python 2.x and one that
supported python 3.x.  We've recently merged with `Ian Cordasco <https://github.com/sigmavirus24>`_'s
`charade <https://github.com/sigmavirus24/charade>`_ fork, so now we have one
coherent version that works for Python 2.6+.

:maintainer: Dan Blanchard


Docs for this project are maintained at https://github.com/wbond/asn1crypto#readme.



Automat
=======


.. image:: https://readthedocs.org/projects/automat/badge/?version=stable
   :target: http://automat.readthedocs.io/en/latest/
   :alt: Documentation Status


.. image:: https://travis-ci.org/glyph/automat.svg?branch=master
   :target: https://travis-ci.org/glyph/automat
   :alt: Build Status


.. image:: https://coveralls.io/repos/glyph/automat/badge.png
   :target: https://coveralls.io/r/glyph/automat
   :alt: Coverage Status


Self-service finite-state machines for the programmer on the go.
----------------------------------------------------------------

Automat is a library for concise, idiomatic Python expression of finite-state
automata (particularly deterministic finite-state transducers).

Read more here, or on `Read the Docs <https://automat.readthedocs.io/>`_\ , or watch the following videos for an overview and presentation

Overview and presentation by **Glyph Lefkowitz** at the first talk of the first Pyninsula meetup, on February 21st, 2017:

.. image:: https://img.youtube.com/vi/0wOZBpD1VVk/0.jpg
   :target: https://www.youtube.com/watch?v=0wOZBpD1VVk
   :alt: Glyph Lefkowitz - Automat - Pyninsula #0


Presentation by **Clinton Roy** at PyCon Australia, on August 6th 2017:

.. image:: https://img.youtube.com/vi/TedUKXhu9kE/0.jpg
   :target: https://www.youtube.com/watch?v=TedUKXhu9kE
   :alt: Clinton Roy - State Machines - Pycon Australia 2017


Why use state machines?
^^^^^^^^^^^^^^^^^^^^^^^

Sometimes you have to create an object whose behavior varies with its state,
but still wishes to present a consistent interface to its callers.

For example, let's say you're writing the software for a coffee machine.  It
has a lid that can be opened or closed, a chamber for water, a chamber for
coffee beans, and a button for "brew".

There are a number of possible states for the coffee machine.  It might or
might not have water.  It might or might not have beans.  The lid might be open
or closed.  The "brew" button should only actually attempt to brew coffee in
one of these configurations, and the "open lid" button should only work if the
coffee is not, in fact, brewing.

With diligence and attention to detail, you can implement this correctly using
a collection of attributes on an object; ``has_water``\ , ``has_beans``\ ,
``is_lid_open`` and so on.  However, you have to keep all these attributes
consistent.  As the coffee maker becomes more complex - perhaps you add an
additional chamber for flavorings so you can make hazelnut coffee, for
example - you have to keep adding more and more checks and more and more
reasoning about which combinations of states are allowed.

Rather than adding tedious 'if' checks to every single method to make sure that
each of these flags are exactly what you expect, you can use a state machine to
ensure that if your code runs at all, it will be run with all the required
values initialized, because they have to be called in the order you declare
them.

You can read about state machines and their advantages for Python programmers
in considerably more detail
`in this excellent series of articles from ClusterHQ <https://clusterhq.com/blog/what-is-a-state-machine/>`_.

What makes Automat different?
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

There are
`dozens of libraries on PyPI implementing state machines <https://pypi.org/search/?q=finite+state+machine>`_.
So it behooves me to say why yet another one would be a good idea.

Automat is designed around this principle: while organizing your code around
state machines is a good idea, your callers don't, and shouldn't have to, care
that you've done so.  In Python, the "input" to a stateful system is a method
call; the "output" may be a method call, if you need to invoke a side effect,
or a return value, if you are just performing a computation in memory.  Most
other state-machine libraries require you to explicitly create an input object,
provide that object to a generic "input" method, and then receive results,
sometimes in terms of that library's interfaces and sometimes in terms of
classes you define yourself.

For example, a snippet of the coffee-machine example above might be implemented
as follows in naive Python:

.. code-block:: python

   class CoffeeMachine(object):
       def brew_button(self):
           if self.has_water and self.has_beans and not self.is_lid_open:
               self.heat_the_heating_element()
               # ...

With Automat, you'd create a class with a ``MethodicalMachine`` attribute:

.. code-block:: python

   from automat import MethodicalMachine

   class CoffeeBrewer(object):
       _machine = MethodicalMachine()

and then you would break the above logic into two pieces - the ``brew_button``
*input*\ , declared like so:

.. code-block:: python

       @_machine.input()
       def brew_button(self):
           "The user pressed the 'brew' button."

It wouldn't do any good to declare a method *body* on this, however, because
input methods don't actually execute their bodies when called; doing actual
work is the *output*\ 's job:

.. code-block:: python

       @_machine.output()
       def _heat_the_heating_element(self):
           "Heat up the heating element, which should cause coffee to happen."
           self._heating_element.turn_on()

As well as a couple of *states* - and for simplicity's sake let's say that the
only two states are ``have_beans`` and ``dont_have_beans``\ :

.. code-block:: python

       @_machine.state()
       def have_beans(self):
           "In this state, you have some beans."
       @_machine.state(initial=True)
       def dont_have_beans(self):
           "In this state, you don't have any beans."

``dont_have_beans`` is the ``initial`` state because ``CoffeeBrewer`` starts without beans
in it.

(And another input to put some beans in:)

.. code-block:: python

       @_machine.input()
       def put_in_beans(self):
           "The user put in some beans."

Finally, you hook everything together with the ``upon`` method of the functions
decorated with ``_machine.state``\ :

.. code-block:: python


       # When we don't have beans, upon putting in beans, we will then have beans
       # (and produce no output)
       dont_have_beans.upon(put_in_beans, enter=have_beans, outputs=[])

       # When we have beans, upon pressing the brew button, we will then not have
       # beans any more (as they have been entered into the brewing chamber) and
       # our output will be heating the heating element.
       have_beans.upon(brew_button, enter=dont_have_beans,
                       outputs=[_heat_the_heating_element])

To *users* of this coffee machine class though, it still looks like a POPO
(Plain Old Python Object):

.. code-block:: python

   >>> coffee_machine = CoffeeMachine()
   >>> coffee_machine.put_in_beans()
   >>> coffee_machine.brew_button()

All of the *inputs* are provided by calling them like methods, all of the
*outputs* are automatically invoked when they are produced according to the
outputs specified to ``upon`` and all of the states are simply opaque tokens -
although the fact that they're defined as methods like inputs and outputs
allows you to put docstrings on them easily to document them.

How do I get the current state of a state machine?
--------------------------------------------------

Don't do that.

One major reason for having a state machine is that you want the callers of the
state machine to just provide the appropriate input to the machine at the
appropriate time, and *not have to check themselves* what state the machine is
in.  So if you are tempted to write some code like this:

.. code-block:: python

   if connection_state_machine.state == "CONNECTED":
       connection_state_machine.send_message()
   else:
       print("not connected")

Instead, just make your calling code do this:

.. code-block:: python

   connection_state_machine.send_message()

and then change your state machine to look like this:

.. code-block:: python

       @_machine.state()
       def connected(self):
           "connected"
       @_machine.state()
       def not_connected(self):
           "not connected"
       @_machine.input()
       def send_message(self):
           "send a message"
       @_machine.output()
       def _actually_send_message(self):
           self._transport.send(b"message")
       @_machine.output()
       def _report_sending_failure(self):
           print("not connected")
       connected.upon(send_message, enter=connected, [_actually_send_message])
       not_connected.upon(send_message, enter=not_connected, [_report_sending_failure])

so that the responsibility for knowing which state the state machine is in
remains within the state machine itself.

Input for Inputs and Output for Outputs
---------------------------------------

Quite often you want to be able to pass parameters to your methods, as well as
inspecting their results.  For example, when you brew the coffee, you might
expect a cup of coffee to result, and you would like to see what kind of coffee
it is.  And if you were to put delicious hand-roasted small-batch artisanal
beans into the machine, you would expect a *better* cup of coffee than if you
were to use mass-produced beans.  You would do this in plain old Python by
adding a parameter, so that's how you do it in Automat as well.

.. code-block:: python

       @_machine.input()
       def put_in_beans(self, beans):
           "The user put in some beans."

However, one important difference here is that *we can't add any
implementation code to the input method*.  Inputs are purely a declaration of
the interface; the behavior must all come from outputs.  Therefore, the change
in the state of the coffee machine must be represented as an output.  We can
add an output method like this:

.. code-block:: python

       @_machine.output()
       def _save_beans(self, beans):
           "The beans are now in the machine; save them."
           self._beans = beans

and then connect it to the ``put_in_beans`` by changing the transition from
``dont_have_beans`` to ``have_beans`` like so:

.. code-block:: python

       dont_have_beans.upon(put_in_beans, enter=have_beans,
                            outputs=[_save_beans])

Now, when you call:

.. code-block:: python

   coffee_machine.put_in_beans("real good beans")

the machine will remember the beans for later.

So how do we get the beans back out again?  One of our outputs needs to have a
return value.  It would make sense if our ``brew_button`` method returned the cup
of coffee that it made, so we should add an output.  So, in addition to heating
the heating element, let's add a return value that describes the coffee.  First
a new output:

.. code-block:: python

       @_machine.output()
       def _describe_coffee(self):
           return "A cup of coffee made with {}.".format(self._beans)

Note that we don't need to check first whether ``self._beans`` exists or not,
because we can only reach this output method if the state machine says we've
gone through a set of states that sets this attribute.

Now, we need to hook up ``_describe_coffee`` to the process of brewing, so change
the brewing transition to:

.. code-block:: python

       have_beans.upon(brew_button, enter=dont_have_beans,
                       outputs=[_heat_the_heating_element,
                                _describe_coffee])

Now, we can call it:

.. code-block:: python

   >>> coffee_machine.brew_button()
   [None, 'A cup of coffee made with real good beans.']

Except... wait a second, what's that ``None`` doing there?

Since every input can produce multiple outputs, in automat, the default return
value from every input invocation is a ``list``.  In this case, we have both
``_heat_the_heating_element`` and ``_describe_coffee`` outputs, so we're seeing
both of their return values.  However, this can be customized, with the
``collector`` argument to ``upon``\ ; the ``collector`` is a callable which takes an
iterable of all the outputs' return values and "collects" a single return value
to return to the caller of the state machine.

In this case, we only care about the last output, so we can adjust the call to
``upon`` like this:

.. code-block:: python

       have_beans.upon(brew_button, enter=dont_have_beans,
                       outputs=[_heat_the_heating_element,
                                _describe_coffee],
                       collector=lambda iterable: list(iterable)[-1]
       )

And now, we'll get just the return value we want:

.. code-block:: python

   >>> coffee_machine.brew_button()
   'A cup of coffee made with real good beans.'

If I can't get the state of the state machine, how can I save it to (a database, an API response, a file on disk...)
--------------------------------------------------------------------------------------------------------------------

There are APIs for serializing the state machine.

First, you have to decide on a persistent representation of each state, via the
``serialized=`` argument to the ``MethodicalMachine.state()`` decorator.

Let's take this very simple "light switch" state machine, which can be on or
off, and flipped to reverse its state:

.. code-block:: python

   class LightSwitch(object):
       _machine = MethodicalMachine()
       @_machine.state(serialized="on")
       def on_state(self):
           "the switch is on"
       @_machine.state(serialized="off", initial=True)
       def off_state(self):
           "the switch is off"
       @_machine.input()
       def flip(self):
           "flip the switch"
       on_state.upon(flip, enter=off_state, outputs=[])
       off_state.upon(flip, enter=on_state, outputs=[])

In this case, we've chosen a serialized representation for each state via the
``serialized`` argument.  The on state is represented by the string ``"on"``\ , and
the off state is represented by the string ``"off"``.

Now, let's just add an input that lets us tell if the switch is on or not.

.. code-block:: python

       @_machine.input()
       def query_power(self):
           "return True if powered, False otherwise"
       @_machine.output()
       def _is_powered(self):
           return True
       @_machine.output()
       def _not_powered(self):
           return False
       on_state.upon(query_power, enter=on_state, outputs=[_is_powered],
                     collector=next)
       off_state.upon(query_power, enter=off_state, outputs=[_not_powered],
                      collector=next)

To save the state, we have the ``MethodicalMachine.serializer()`` method.  A
method decorated with ``@serializer()`` gets an extra argument injected at the
beginning of its argument list: the serialized identifier for the state.  In
this case, either ``"on"`` or ``"off"``.  Since state machine output methods can
also affect other state on the object, a serializer method is expected to
return *all* relevant state for serialization.

For our simple light switch, such a method might look like this:

.. code-block:: python

       @_machine.serializer()
       def save(self, state):
           return {"is-it-on": state}

Serializers can be public methods, and they can return whatever you like.  If
necessary, you can have different serializers - just multiple methods decorated
with ``@_machine.serializer()`` - for different formats; return one data-structure
for JSON, one for XML, one for a database row, and so on.

When it comes time to unserialize, though, you generally want a private method,
because an unserializer has to take a not-fully-initialized instance and
populate it with state.  It is expected to *return* the serialized machine
state token that was passed to the serializer, but it can take whatever
arguments you like.  Of course, in order to return that, it probably has to
take it somewhere in its arguments, so it will generally take whatever a paired
serializer has returned as an argument.

So our unserializer would look like this:

.. code-block:: python

       @_machine.unserializer()
       def _restore(self, blob):
           return blob["is-it-on"]

Generally you will want a classmethod deserialization constructor which you
write yourself to call this, so that you know how to create an instance of your
own object, like so:

.. code-block:: python

       @classmethod
       def from_blob(cls, blob):
           self = cls()
           self._restore(blob)
           return self

Saving and loading our ``LightSwitch`` along with its state-machine state can now
be accomplished as follows:

.. code-block:: python

   >>> switch1 = LightSwitch()
   >>> switch1.query_power()
   False
   >>> switch1.flip()
   []
   >>> switch1.query_power()
   True
   >>> blob = switch1.save()
   >>> switch2 = LightSwitch.from_blob(blob)
   >>> switch2.query_power()
   True

More comprehensive (tested, working) examples are present in ``docs/examples``.

Go forth and machine all the state!


=============
Django-Twilio
=============


Integrate Twilio into your Django apps with ease.

.. image:: https://badge.fury.io/py/django-twilio.png
    :target: http://badge.fury.io/py/django-twilio
    :alt: PyPI version
.. image:: https://travis-ci.org/rdegges/django-twilio.png?branch=master
    :target: https://travis-ci.org/rdegges/django-twilio
    :alt: CI build
.. image:: https://readthedocs.org/projects/django-twilio/badge/?version=latest
    :target: https://readthedocs.org/projects/django-twilio/badge/?version=latest
    :alt: documentation build
.. image:: https://img.shields.io/pypi/pyversions/django-twilio.svg
    :target:  https://pypi.python.org/pypi/django-twilio/
    :alt: Python versions supported


Meta
----

* Author: Randall Degges
* Email:  rdegges@gmail.com
* Maintainer: Jason Held
* Email: jasonsheld@gmail.com
* Status: active development, stable, maintained


Twilio makes it easy to send & receive SMS messages, and create & manage voice calls through software.

Django-twilio makes it easy to use Twilio in your Django projects.

Version 0.9.0 supports twilio 6.x and django 1.8-2.0.

Version 0.9.2 has minimal py3.7 and also allows django 2.1

For legacy twilio (5.x SDK), please see the 0.8 version.

Documentation
-------------

The documentation is hosted at ReadTheDocs. You can check out the docs
here - http://django-twilio.rtfd.org/


========
queuelib
========

.. image:: https://secure.travis-ci.org/scrapy/queuelib.png?branch=master
   :target: http://travis-ci.org/scrapy/queuelib

.. image:: https://img.shields.io/codecov/c/github/scrapy/queuelib/master.svg
   :target: http://codecov.io/github/scrapy/queuelib?branch=master
   :alt: Coverage report


Queuelib is a collection of persistent (disk-based) queues for Python.

Queuelib goals are speed and simplicity. It was originally part of the `Scrapy
framework`_ and stripped out on its own library.

Note: Queuelib isn't thread-safe.

Requirements
============

* Python 2.7 or Python 3.3
* no external library requirements

Installation
============

You can install Queuelib either via the Python Package Index (PyPI) or from
source.

To install using pip::

    $ pip install queuelib

To install using easy_install::

    $ easy_install queuelib

If you have downloaded a source tarball you can install it by running the
following (as root)::

    # python setup.py install

FIFO/LIFO disk queues
=====================

Queuelib provides FIFO and LIFO queue implementations.

Here is an example usage of the FIFO queue::

    >>> from queuelib import FifoDiskQueue
    >>> q = FifoDiskQueue("queuefile")
    >>> q.push(b'a')
    >>> q.push(b'b')
    >>> q.push(b'c')
    >>> q.pop()
    b'a'
    >>> q.close()
    >>> q = FifoDiskQueue("queuefile")
    >>> q.pop()
    b'b'
    >>> q.pop()
    b'c'
    >>> q.pop()
    >>>

The LIFO queue is identical (API-wise), but importing ``LifoDiskQueue``
instead.

PriorityQueue
=============

A discrete-priority queue implemented by combining multiple FIFO/LIFO queues
(one per priority).

First, select the type of queue to be used per priority (FIFO or LIFO)::

    >>> from queuelib import FifoDiskQueue
    >>> qfactory = lambda priority: FifoDiskQueue('queue-dir-%s' % priority)

Then instantiate the Priority Queue with it::

    >>> from queuelib import PriorityQueue
    >>> pq = PriorityQueue(qfactory)

And use it::

    >>> pq.push(b'a', 3)
    >>> pq.push(b'b', 1)
    >>> pq.push(b'c', 2)
    >>> pq.push(b'd', 2)
    >>> pq.pop()
    b'b'
    >>> pq.pop()
    b'c'
    >>> pq.pop()
    b'd'
    >>> pq.pop()
    b'a'

RoundRobinQueue
===============

Has nearly the same interface and implementation as a Priority Queue except
that each element must be pushed with a (mandatory) key.  Popping from the
queue cycles through the keys "round robin".

Instantiate the Round Robin Queue similarly to the Priority Queue::

    >>> from queuelib import RoundRobinQueue
    >>> rr = RoundRobinQueue(qfactory)

And use it::

    >>> rr.push(b'a', '1')
    >>> rr.push(b'b', '1')
    >>> rr.push(b'c', '2')
    >>> rr.push(b'd', '2')
    >>> rr.pop()
    b'a'
    >>> rr.pop()
    b'c'
    >>> rr.pop()
    b'b'
    >>> rr.pop()
    b'd'


Mailing list
============

Use the `scrapy-users`_ mailing list for questions about Queuelib.

Bug tracker
===========

If you have any suggestions, bug reports or annoyances please report them to
our issue tracker at: http://github.com/scrapy/queuelib/issues/

Contributing
============

Development of Queuelib happens at GitHub: http://github.com/scrapy/queuelib

You are highly encouraged to participate in the development. If you don't like
GitHub (for some reason) you're welcome to send regular patches.

All changes require tests to be merged.

Tests
=====

Tests are located in `queuelib/tests` directory. They can be run using
`nosetests`_ with the following command::

    nosetests

The output should be something like the following::

    $ nosetests
    .............................................................................
    ----------------------------------------------------------------------
    Ran 77 tests in 0.145s

    OK

License
=======

This software is licensed under the BSD License. See the LICENSE file in the
top distribution directory for the full license text.

Versioning
==========

This software follows `Semantic Versioning`_

.. _Scrapy framework: http://scrapy.org
.. _scrapy-users: http://groups.google.com/group/scrapy-users
.. _Semantic Versioning: http://semver.org/
.. _nosetests: https://nose.readthedocs.org/en/latest/


UNKNOWN


PyJWT
=====

.. image:: https://secure.travis-ci.org/jpadilla/pyjwt.svg?branch=master
   :target: http://travis-ci.org/jpadilla/pyjwt?branch=master

.. image:: https://ci.appveyor.com/api/projects/status/h8nt70aqtwhht39t?svg=true
   :target: https://ci.appveyor.com/project/jpadilla/pyjwt

.. image:: https://img.shields.io/pypi/v/pyjwt.svg
   :target: https://pypi.python.org/pypi/pyjwt

.. image:: https://coveralls.io/repos/jpadilla/pyjwt/badge.svg?branch=master
   :target: https://coveralls.io/r/jpadilla/pyjwt?branch=master

.. image:: https://readthedocs.org/projects/pyjwt/badge/?version=latest
   :target: https://pyjwt.readthedocs.io

A Python implementation of `RFC 7519 <https://tools.ietf.org/html/rfc7519>`_. Original implementation was written by `@progrium <https://github.com/progrium>`_.

Sponsor
-------

+--------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| |auth0-logo| | If you want to quickly add secure token-based authentication to Python projects, feel free to check Auth0's Python SDK and free plan at `auth0.com/overview <https://auth0.com/overview?utm_source=GHsponsor&utm_medium=GHsponsor&utm_campaign=pyjwt&utm_content=auth>`_. |
+--------------+-----------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. |auth0-logo| image:: https://user-images.githubusercontent.com/83319/31722733-de95bbde-b3ea-11e7-96bf-4f4e8f915588.png

Installing
----------

Install with **pip**:

.. code-block:: sh

    $ pip install PyJWT


Usage
-----

.. code:: python

    >>> import jwt
    >>> encoded = jwt.encode({'some': 'payload'}, 'secret', algorithm='HS256')
    'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzb21lIjoicGF5bG9hZCJ9.4twFt5NiznN84AWoo1d7KO1T_yoc0Z6XOpOVswacPZg'

    >>> jwt.decode(encoded, 'secret', algorithms=['HS256'])
    {'some': 'payload'}


Command line
------------

Usage::

    pyjwt [options] INPUT

Decoding examples::

    pyjwt --key=secret TOKEN
    pyjwt --no-verify TOKEN

See more options executing ``pyjwt --help``.


Documentation
-------------

View the full docs online at https://pyjwt.readthedocs.io/en/latest/


Tests
-----

You can run tests from the project root after cloning with:

.. code-block:: sh

    $ python setup.py test


PyHamcrest
==========

| |docs| |travis| |coveralls| |landscape| |scrutinizer| |codeclimate|
| |version| |downloads| |wheel| |supported-versions| |supported-implementations|

.. |docs| image:: https://readthedocs.org/projects/pyhamcrest/badge/?style=flat
    :target: https://pyhamcrest.readthedocs.org/
    :alt: Documentation Status

.. |travis| image:: http://img.shields.io/travis/hamcrest/PyHamcrest/master.png?style=flat
    :alt: Travis-CI Build Status
    :target: https://travis-ci.org/hamcrest/PyHamcrest

.. |appveyor| image:: https://ci.appveyor.com/api/projects/status/github/hamcrest/PyHamcrest?branch=master
    :alt: AppVeyor Build Status
    :target: https://ci.appveyor.com/project/hamcrest/PyHamcrest

.. |coveralls| image:: http://img.shields.io/coveralls/hamcrest/PyHamcrest/master.png?style=flat
    :alt: Coverage Status
    :target: https://coveralls.io/r/hamcrest/PyHamcrest

.. |landscape| image:: https://landscape.io/github/hamcrest/PyHamcrest/master/landscape.svg?style=flat
    :target: https://landscape.io/github/hamcrest/PyHamcrest/master
    :alt: Code Quality Status

.. |codeclimate| image:: https://codeclimate.com/github/hamcrest/PyHamcrest/badges/gpa.svg
   :target: https://codeclimate.com/github/hamcrest/PyHamcrest
   :alt: Code Climate

.. |version| image:: http://img.shields.io/pypi/v/PyHamcrest.png?style=flat
    :alt: PyPI Package latest release
    :target: https://pypi.python.org/pypi/PyHamcrest

.. |downloads| image:: http://img.shields.io/pypi/dm/PyHamcrest.png?style=flat
    :alt: PyPI Package monthly downloads
    :target: https://pypi.python.org/pypi/PyHamcrest

.. |wheel| image:: https://pypip.in/wheel/PyHamcrest/badge.png?style=flat
    :alt: PyPI Wheel
    :target: https://pypi.python.org/pypi/PyHamcrest

.. |supported-versions| image:: https://pypip.in/py_versions/PyHamcrest/badge.png?style=flat
    :alt: Supported versions
    :target: https://pypi.python.org/pypi/PyHamcrest

.. |supported-implementations| image:: https://pypip.in/implementation/PyHamcrest/badge.png?style=flat
    :alt: Supported imlementations
    :target: https://pypi.python.org/pypi/PyHamcrest

.. |scrutinizer| image:: https://img.shields.io/scrutinizer/g/hamcrest/PyHamcrest/master.png?style=flat
    :alt: Scrtinizer Status
    :target: https://scrutinizer-ci.com/g/hamcrest/PyHamcrest/


Introduction
============

PyHamcrest is a framework for writing matcher objects, allowing you to
declaratively define "match" rules. There are a number of situations where
matchers are invaluable, such as UI validation, or data filtering, but it is in
the area of writing flexible tests that matchers are most commonly used. This
tutorial shows you how to use PyHamcrest for unit testing.

When writing tests it is sometimes difficult to get the balance right between
overspecifying the test (and making it brittle to changes), and not specifying
enough (making the test less valuable since it continues to pass even when the
thing being tested is broken). Having a tool that allows you to pick out
precisely the aspect under test and describe the values it should have, to a
controlled level of precision, helps greatly in writing tests that are "just
right." Such tests fail when the behavior of the aspect under test deviates
from the expected behavior, yet continue to pass when minor, unrelated changes
to the behaviour are made.

Installation
============

Hamcrest can be installed using the usual Python packaging tools. It depends on
distribute, but as long as you have a network connection when you install, the
installation process will take care of that for you.

My first PyHamcrest test
========================

We'll start by writing a very simple PyUnit test, but instead of using PyUnit's
``assertEqual`` method, we'll use PyHamcrest's ``assert_that`` construct and
the standard set of matchers:

.. code:: python

 from hamcrest import *
 import unittest

 class BiscuitTest(unittest.TestCase):
     def testEquals(self):
         theBiscuit = Biscuit('Ginger')
         myBiscuit = Biscuit('Ginger')
         assert_that(theBiscuit, equal_to(myBiscuit))

 if __name__ == '__main__':
     unittest.main()

The ``assert_that`` function is a stylized sentence for making a test
assertion. In this example, the subject of the assertion is the object
``theBiscuit``, which is the first method parameter. The second method
parameter is a matcher for ``Biscuit`` objects, here a matcher that checks one
object is equal to another using the Python ``==`` operator. The test passes
since the ``Biscuit`` class defines an ``__eq__`` method.

If you have more than one assertion in your test you can include an identifier
for the tested value in the assertion:

.. code:: python

 assert_that(theBiscuit.getChocolateChipCount(), equal_to(10), 'chocolate chips')
 assert_that(theBiscuit.getHazelnutCount(), equal_to(3), 'hazelnuts')

As a convenience, assert_that can also be used to verify a boolean condition:

.. code:: python

 assert_that(theBiscuit.isCooked(), 'cooked')

This is equivalent to the ``assert_`` method of unittest.TestCase, but because
it's a standalone function, it offers greater flexibility in test writing.


Predefined matchers
===================

PyHamcrest comes with a library of useful matchers:

* Object

  * ``equal_to`` - match equal object
  * ``has_length`` - match ``len()``
  * ``has_property`` - match value of property with given name
  * ``has_properties`` - match an object that has all of the given properties.
  * ``has_string`` - match ``str()``
  * ``instance_of`` - match object type
  * ``none``, ``not_none`` - match ``None``, or not ``None``
  * ``same_instance`` - match same object
  * ``calling, raises`` - wrap a method call and assert that it raises an exception

* Number

  * ``close_to`` - match number close to a given value
  * ``greater_than``, ``greater_than_or_equal_to``, ``less_than``,
    ``less_than_or_equal_to`` - match numeric ordering

* Text

  * ``contains_string`` - match part of a string
  * ``ends_with`` - match the end of a string
  * ``equal_to_ignoring_case`` - match the complete string but ignore case
  * ``equal_to_ignoring_whitespace`` - match the complete string but ignore extra whitespace
  * ``matches_regexp`` - match a regular expression in a string
  * ``starts_with`` - match the beginning of a string
  * ``string_contains_in_order`` - match parts of a string, in relative order

* Logical

  * ``all_of`` - ``and`` together all matchers
  * ``any_of`` - ``or`` together all matchers
  * ``anything`` - match anything, useful in composite matchers when you don't care about a particular value
  * ``is_not`` - negate the matcher

* Sequence

  * ``contains`` - exactly match the entire sequence
  * ``contains_inanyorder`` - match the entire sequence, but in any order
  * ``has_item`` - match if given item appears in the sequence
  * ``has_items`` - match if all given items appear in the sequence, in any order
  * ``is_in`` - match if item appears in the given sequence
  * ``only_contains`` - match if sequence's items appear in given list
  * ``empty`` - match if the sequence is empty

* Dictionary

  * ``has_entries`` - match dictionary with list of key-value pairs
  * ``has_entry`` - match dictionary containing a key-value pair
  * ``has_key`` - match dictionary with a key
  * ``has_value`` - match dictionary with a value

* Decorator

  * ``calling`` - wrap a callable in a deffered object, for subsequent matching on calling behaviour
  * ``raises`` - Ensure that a deferred callable raises as expected
  * ``described_as`` - give the matcher a custom failure description
  * ``is_`` - decorator to improve readability - see `Syntactic sugar` below

The arguments for many of these matchers accept not just a matching value, but
another matcher, so matchers can be composed for greater flexibility. For
example, ``only_contains(less_than(5))`` will match any sequence where every
item is less than 5.


Syntactic sugar
===============

PyHamcrest strives to make your tests as readable as possible. For example, the
``is_`` matcher is a wrapper that doesn't add any extra behavior to the
underlying matcher. The following assertions are all equivalent:

.. code:: python

 assert_that(theBiscuit, equal_to(myBiscuit))
 assert_that(theBiscuit, is_(equal_to(myBiscuit)))
 assert_that(theBiscuit, is_(myBiscuit))

The last form is allowed since ``is_(value)`` wraps most non-matcher arguments
with ``equal_to``. But if the argument is a type, it is wrapped with
``instance_of``, so the following are also equivalent:

.. code:: python

 assert_that(theBiscuit, instance_of(Biscuit))
 assert_that(theBiscuit, is_(instance_of(Biscuit)))
 assert_that(theBiscuit, is_(Biscuit))

*Note that PyHamcrest's ``is_`` matcher is unrelated to Python's ``is``
operator. The matcher for object identity is ``same_instance``.*


Writing custom matchers
=======================

PyHamcrest comes bundled with lots of useful matchers, but you'll probably find
that you need to create your own from time to time to fit your testing needs.
This commonly occurs when you find a fragment of code that tests the same set
of properties over and over again (and in different tests), and you want to
bundle the fragment into a single assertion. By writing your own matcher you'll
eliminate code duplication and make your tests more readable!

Let's write our own matcher for testing if a calendar date falls on a Saturday.
This is the test we want to write:

.. code:: python

 def testDateIsOnASaturday(self):
     d = datetime.date(2008, 04, 26)
     assert_that(d, is_(on_a_saturday()))

And here's the implementation:

.. code:: python

 from hamcrest.core.base_matcher import BaseMatcher
 from hamcrest.core.helpers.hasmethod import hasmethod

 class IsGivenDayOfWeek(BaseMatcher):

     def __init__(self, day):
         self.day = day  # Monday is 0, Sunday is 6

     def _matches(self, item):
         if not hasmethod(item, 'weekday'):
             return False
         return item.weekday() == self.day

     def describe_to(self, description):
         day_as_string = ['Monday', 'Tuesday', 'Wednesday', 'Thursday',
                          'Friday', 'Saturday', 'Sunday']
         description.append_text('calendar date falling on ')    \
                    .append_text(day_as_string[self.day])

 def on_a_saturday():
     return IsGivenDayOfWeek(5)

For our Matcher implementation we implement the ``_matches`` method - which
calls the ``weekday`` method after confirming that the argument (which may not
be a date) has such a method - and the ``describe_to`` method - which is used
to produce a failure message when a test fails. Here's an example of how the
failure message looks:

.. code:: python

 assert_that(datetime.date(2008, 04, 06), is_(on_a_saturday()))

fails with the message::

    AssertionError:
    Expected: is calendar date falling on Saturday
         got: <2008-04-06>

Let's say this matcher is saved in a module named ``isgivendayofweek``. We
could use it in our test by importing the factory function ``on_a_saturday``:

.. code:: python

 from hamcrest import *
 import unittest
 from isgivendayofweek import on_a_saturday

 class DateTest(unittest.TestCase):
     def testDateIsOnASaturday(self):
         d = datetime.date(2008, 04, 26)
         assert_that(d, is_(on_a_saturday()))

 if __name__ == '__main__':
     unittest.main()

Even though the ``on_a_saturday`` function creates a new matcher each time it
is called, you should not assume this is the only usage pattern for your
matcher. Therefore you should make sure your matcher is stateless, so a single
instance can be reused between matches.


More resources
==============

* Documentation_
* Package_
* Sources_
* Hamcrest_

.. _Documentation: http://readthedocs.org/docs/pyhamcrest/en/V1.8.2/
.. _Package: http://pypi.python.org/pypi/PyHamcrest
.. _Sources: https://github.com/hamcrest/PyHamcrest
.. _Hamcrest: http://hamcrest.org


pytz - World Timezone Definitions for Python
============================================

:Author: Stuart Bishop <stuart@stuartbishop.net>

Introduction
~~~~~~~~~~~~

pytz brings the Olson tz database into Python. This library allows
accurate and cross platform timezone calculations using Python 2.4
or higher. It also solves the issue of ambiguous times at the end
of daylight saving time, which you can read more about in the Python
Library Reference (``datetime.tzinfo``).

Almost all of the Olson timezones are supported.

.. note::

    This library differs from the documented Python API for
    tzinfo implementations; if you want to create local wallclock
    times you need to use the ``localize()`` method documented in this
    document. In addition, if you perform date arithmetic on local
    times that cross DST boundaries, the result may be in an incorrect
    timezone (ie. subtract 1 minute from 2002-10-27 1:00 EST and you get
    2002-10-27 0:59 EST instead of the correct 2002-10-27 1:59 EDT). A
    ``normalize()`` method is provided to correct this. Unfortunately these
    issues cannot be resolved without modifying the Python datetime
    implementation (see PEP-431).


Installation
~~~~~~~~~~~~

This package can either be installed from a .egg file using setuptools,
or from the tarball using the standard Python distutils.

If you are installing from a tarball, run the following command as an
administrative user::

    python setup.py install

If you are installing using setuptools, you don't even need to download
anything as the latest version will be downloaded for you
from the Python package index::

    easy_install --upgrade pytz

If you already have the .egg file, you can use that too::

    easy_install pytz-2008g-py2.6.egg


Example & Usage
~~~~~~~~~~~~~~~

Localized times and date arithmetic
-----------------------------------

>>> from datetime import datetime, timedelta
>>> from pytz import timezone
>>> import pytz
>>> utc = pytz.utc
>>> utc.zone
'UTC'
>>> eastern = timezone('US/Eastern')
>>> eastern.zone
'US/Eastern'
>>> amsterdam = timezone('Europe/Amsterdam')
>>> fmt = '%Y-%m-%d %H:%M:%S %Z%z'

This library only supports two ways of building a localized time. The
first is to use the ``localize()`` method provided by the pytz library.
This is used to localize a naive datetime (datetime with no timezone
information):

>>> loc_dt = eastern.localize(datetime(2002, 10, 27, 6, 0, 0))
>>> print(loc_dt.strftime(fmt))
2002-10-27 06:00:00 EST-0500

The second way of building a localized time is by converting an existing
localized time using the standard ``astimezone()`` method:

>>> ams_dt = loc_dt.astimezone(amsterdam)
>>> ams_dt.strftime(fmt)
'2002-10-27 12:00:00 CET+0100'

Unfortunately using the tzinfo argument of the standard datetime
constructors ''does not work'' with pytz for many timezones.

>>> datetime(2002, 10, 27, 12, 0, 0, tzinfo=amsterdam).strftime(fmt)
'2002-10-27 12:00:00 LMT+0020'

It is safe for timezones without daylight saving transitions though, such
as UTC:

>>> datetime(2002, 10, 27, 12, 0, 0, tzinfo=pytz.utc).strftime(fmt)
'2002-10-27 12:00:00 UTC+0000'

The preferred way of dealing with times is to always work in UTC,
converting to localtime only when generating output to be read
by humans.

>>> utc_dt = datetime(2002, 10, 27, 6, 0, 0, tzinfo=utc)
>>> loc_dt = utc_dt.astimezone(eastern)
>>> loc_dt.strftime(fmt)
'2002-10-27 01:00:00 EST-0500'

This library also allows you to do date arithmetic using local
times, although it is more complicated than working in UTC as you
need to use the ``normalize()`` method to handle daylight saving time
and other timezone transitions. In this example, ``loc_dt`` is set
to the instant when daylight saving time ends in the US/Eastern
timezone.

>>> before = loc_dt - timedelta(minutes=10)
>>> before.strftime(fmt)
'2002-10-27 00:50:00 EST-0500'
>>> eastern.normalize(before).strftime(fmt)
'2002-10-27 01:50:00 EDT-0400'
>>> after = eastern.normalize(before + timedelta(minutes=20))
>>> after.strftime(fmt)
'2002-10-27 01:10:00 EST-0500'

Creating local times is also tricky, and the reason why working with
local times is not recommended. Unfortunately, you cannot just pass
a ``tzinfo`` argument when constructing a datetime (see the next
section for more details)

>>> dt = datetime(2002, 10, 27, 1, 30, 0)
>>> dt1 = eastern.localize(dt, is_dst=True)
>>> dt1.strftime(fmt)
'2002-10-27 01:30:00 EDT-0400'
>>> dt2 = eastern.localize(dt, is_dst=False)
>>> dt2.strftime(fmt)
'2002-10-27 01:30:00 EST-0500'

Converting between timezones is more easily done, using the
standard astimezone method.

>>> utc_dt = utc.localize(datetime.utcfromtimestamp(1143408899))
>>> utc_dt.strftime(fmt)
'2006-03-26 21:34:59 UTC+0000'
>>> au_tz = timezone('Australia/Sydney')
>>> au_dt = utc_dt.astimezone(au_tz)
>>> au_dt.strftime(fmt)
'2006-03-27 08:34:59 AEDT+1100'
>>> utc_dt2 = au_dt.astimezone(utc)
>>> utc_dt2.strftime(fmt)
'2006-03-26 21:34:59 UTC+0000'
>>> utc_dt == utc_dt2
True

You can take shortcuts when dealing with the UTC side of timezone
conversions. ``normalize()`` and ``localize()`` are not really
necessary when there are no daylight saving time transitions to
deal with.

>>> utc_dt = datetime.utcfromtimestamp(1143408899).replace(tzinfo=utc)
>>> utc_dt.strftime(fmt)
'2006-03-26 21:34:59 UTC+0000'
>>> au_tz = timezone('Australia/Sydney')
>>> au_dt = au_tz.normalize(utc_dt.astimezone(au_tz))
>>> au_dt.strftime(fmt)
'2006-03-27 08:34:59 AEDT+1100'
>>> utc_dt2 = au_dt.astimezone(utc)
>>> utc_dt2.strftime(fmt)
'2006-03-26 21:34:59 UTC+0000'


``tzinfo`` API
--------------

The ``tzinfo`` instances returned by the ``timezone()`` function have
been extended to cope with ambiguous times by adding an ``is_dst``
parameter to the ``utcoffset()``, ``dst()`` && ``tzname()`` methods.

>>> tz = timezone('America/St_Johns')

>>> normal = datetime(2009, 9, 1)
>>> ambiguous = datetime(2009, 10, 31, 23, 30)

The ``is_dst`` parameter is ignored for most timestamps. It is only used
during DST transition ambiguous periods to resolve that ambiguity.

>>> tz.utcoffset(normal, is_dst=True)
datetime.timedelta(-1, 77400)
>>> tz.dst(normal, is_dst=True)
datetime.timedelta(0, 3600)
>>> tz.tzname(normal, is_dst=True)
'NDT'

>>> tz.utcoffset(ambiguous, is_dst=True)
datetime.timedelta(-1, 77400)
>>> tz.dst(ambiguous, is_dst=True)
datetime.timedelta(0, 3600)
>>> tz.tzname(ambiguous, is_dst=True)
'NDT'

>>> tz.utcoffset(normal, is_dst=False)
datetime.timedelta(-1, 77400)
>>> tz.dst(normal, is_dst=False)
datetime.timedelta(0, 3600)
>>> tz.tzname(normal, is_dst=False)
'NDT'

>>> tz.utcoffset(ambiguous, is_dst=False)
datetime.timedelta(-1, 73800)
>>> tz.dst(ambiguous, is_dst=False)
datetime.timedelta(0)
>>> tz.tzname(ambiguous, is_dst=False)
'NST'

If ``is_dst`` is not specified, ambiguous timestamps will raise
an ``pytz.exceptions.AmbiguousTimeError`` exception.

>>> tz.utcoffset(normal)
datetime.timedelta(-1, 77400)
>>> tz.dst(normal)
datetime.timedelta(0, 3600)
>>> tz.tzname(normal)
'NDT'

>>> import pytz.exceptions
>>> try:
...     tz.utcoffset(ambiguous)
... except pytz.exceptions.AmbiguousTimeError:
...     print('pytz.exceptions.AmbiguousTimeError: %s' % ambiguous)
pytz.exceptions.AmbiguousTimeError: 2009-10-31 23:30:00
>>> try:
...     tz.dst(ambiguous)
... except pytz.exceptions.AmbiguousTimeError:
...     print('pytz.exceptions.AmbiguousTimeError: %s' % ambiguous)
pytz.exceptions.AmbiguousTimeError: 2009-10-31 23:30:00
>>> try:
...     tz.tzname(ambiguous)
... except pytz.exceptions.AmbiguousTimeError:
...     print('pytz.exceptions.AmbiguousTimeError: %s' % ambiguous)
pytz.exceptions.AmbiguousTimeError: 2009-10-31 23:30:00


Problems with Localtime
~~~~~~~~~~~~~~~~~~~~~~~

The major problem we have to deal with is that certain datetimes
may occur twice in a year. For example, in the US/Eastern timezone
on the last Sunday morning in October, the following sequence
happens:

    - 01:00 EDT occurs
    - 1 hour later, instead of 2:00am the clock is turned back 1 hour
      and 01:00 happens again (this time 01:00 EST)

In fact, every instant between 01:00 and 02:00 occurs twice. This means
that if you try and create a time in the 'US/Eastern' timezone
the standard datetime syntax, there is no way to specify if you meant
before of after the end-of-daylight-saving-time transition. Using the
pytz custom syntax, the best you can do is make an educated guess:

>>> loc_dt = eastern.localize(datetime(2002, 10, 27, 1, 30, 00))
>>> loc_dt.strftime(fmt)
'2002-10-27 01:30:00 EST-0500'

As you can see, the system has chosen one for you and there is a 50%
chance of it being out by one hour. For some applications, this does
not matter. However, if you are trying to schedule meetings with people
in different timezones or analyze log files it is not acceptable.

The best and simplest solution is to stick with using UTC.  The pytz
package encourages using UTC for internal timezone representation by
including a special UTC implementation based on the standard Python
reference implementation in the Python documentation.

The UTC timezone unpickles to be the same instance, and pickles to a
smaller size than other pytz tzinfo instances.  The UTC implementation
can be obtained as pytz.utc, pytz.UTC, or pytz.timezone('UTC').

>>> import pickle, pytz
>>> dt = datetime(2005, 3, 1, 14, 13, 21, tzinfo=utc)
>>> naive = dt.replace(tzinfo=None)
>>> p = pickle.dumps(dt, 1)
>>> naive_p = pickle.dumps(naive, 1)
>>> len(p) - len(naive_p)
17
>>> new = pickle.loads(p)
>>> new == dt
True
>>> new is dt
False
>>> new.tzinfo is dt.tzinfo
True
>>> pytz.utc is pytz.UTC is pytz.timezone('UTC')
True

Note that some other timezones are commonly thought of as the same (GMT,
Greenwich, Universal, etc.). The definition of UTC is distinct from these
other timezones, and they are not equivalent. For this reason, they will
not compare the same in Python.

>>> utc == pytz.timezone('GMT')
False

See the section `What is UTC`_, below.

If you insist on working with local times, this library provides a
facility for constructing them unambiguously:

>>> loc_dt = datetime(2002, 10, 27, 1, 30, 00)
>>> est_dt = eastern.localize(loc_dt, is_dst=True)
>>> edt_dt = eastern.localize(loc_dt, is_dst=False)
>>> print(est_dt.strftime(fmt) + ' / ' + edt_dt.strftime(fmt))
2002-10-27 01:30:00 EDT-0400 / 2002-10-27 01:30:00 EST-0500

If you pass None as the is_dst flag to localize(), pytz will refuse to
guess and raise exceptions if you try to build ambiguous or non-existent
times.

For example, 1:30am on 27th Oct 2002 happened twice in the US/Eastern
timezone when the clocks where put back at the end of Daylight Saving
Time:

>>> dt = datetime(2002, 10, 27, 1, 30, 00)
>>> try:
...     eastern.localize(dt, is_dst=None)
... except pytz.exceptions.AmbiguousTimeError:
...     print('pytz.exceptions.AmbiguousTimeError: %s' % dt)
pytz.exceptions.AmbiguousTimeError: 2002-10-27 01:30:00

Similarly, 2:30am on 7th April 2002 never happened at all in the
US/Eastern timezone, as the clocks where put forward at 2:00am skipping
the entire hour:

>>> dt = datetime(2002, 4, 7, 2, 30, 00)
>>> try:
...     eastern.localize(dt, is_dst=None)
... except pytz.exceptions.NonExistentTimeError:
...     print('pytz.exceptions.NonExistentTimeError: %s' % dt)
pytz.exceptions.NonExistentTimeError: 2002-04-07 02:30:00

Both of these exceptions share a common base class to make error handling
easier:

>>> isinstance(pytz.AmbiguousTimeError(), pytz.InvalidTimeError)
True
>>> isinstance(pytz.NonExistentTimeError(), pytz.InvalidTimeError)
True


A special case is where countries change their timezone definitions
with no daylight savings time switch. For example, in 1915 Warsaw
switched from Warsaw time to Central European time with no daylight savings
transition. So at the stroke of midnight on August 5th 1915 the clocks
were wound back 24 minutes creating an ambiguous time period that cannot
be specified without referring to the timezone abbreviation or the
actual UTC offset. In this case midnight happened twice, neither time
during a daylight saving time period. pytz handles this transition by
treating the ambiguous period before the switch as daylight savings
time, and the ambiguous period after as standard time.


>>> warsaw = pytz.timezone('Europe/Warsaw')
>>> amb_dt1 = warsaw.localize(datetime(1915, 8, 4, 23, 59, 59), is_dst=True)
>>> amb_dt1.strftime(fmt)
'1915-08-04 23:59:59 WMT+0124'
>>> amb_dt2 = warsaw.localize(datetime(1915, 8, 4, 23, 59, 59), is_dst=False)
>>> amb_dt2.strftime(fmt)
'1915-08-04 23:59:59 CET+0100'
>>> switch_dt = warsaw.localize(datetime(1915, 8, 5, 00, 00, 00), is_dst=False)
>>> switch_dt.strftime(fmt)
'1915-08-05 00:00:00 CET+0100'
>>> str(switch_dt - amb_dt1)
'0:24:01'
>>> str(switch_dt - amb_dt2)
'0:00:01'

The best way of creating a time during an ambiguous time period is
by converting from another timezone such as UTC:

>>> utc_dt = datetime(1915, 8, 4, 22, 36, tzinfo=pytz.utc)
>>> utc_dt.astimezone(warsaw).strftime(fmt)
'1915-08-04 23:36:00 CET+0100'

The standard Python way of handling all these ambiguities is not to
handle them, such as demonstrated in this example using the US/Eastern
timezone definition from the Python documentation (Note that this
implementation only works for dates between 1987 and 2006 - it is
included for tests only!):

>>> from pytz.reference import Eastern # pytz.reference only for tests
>>> dt = datetime(2002, 10, 27, 0, 30, tzinfo=Eastern)
>>> str(dt)
'2002-10-27 00:30:00-04:00'
>>> str(dt + timedelta(hours=1))
'2002-10-27 01:30:00-05:00'
>>> str(dt + timedelta(hours=2))
'2002-10-27 02:30:00-05:00'
>>> str(dt + timedelta(hours=3))
'2002-10-27 03:30:00-05:00'

Notice the first two results? At first glance you might think they are
correct, but taking the UTC offset into account you find that they are
actually two hours appart instead of the 1 hour we asked for.

>>> from pytz.reference import UTC # pytz.reference only for tests
>>> str(dt.astimezone(UTC))
'2002-10-27 04:30:00+00:00'
>>> str((dt + timedelta(hours=1)).astimezone(UTC))
'2002-10-27 06:30:00+00:00'


Country Information
~~~~~~~~~~~~~~~~~~~

A mechanism is provided to access the timezones commonly in use
for a particular country, looked up using the ISO 3166 country code.
It returns a list of strings that can be used to retrieve the relevant
tzinfo instance using ``pytz.timezone()``:

>>> print(' '.join(pytz.country_timezones['nz']))
Pacific/Auckland Pacific/Chatham

The Olson database comes with a ISO 3166 country code to English country
name mapping that pytz exposes as a dictionary:

>>> print(pytz.country_names['nz'])
New Zealand


What is UTC
~~~~~~~~~~~

'UTC' is `Coordinated Universal Time`_. It is a successor to, but distinct
from, Greenwich Mean Time (GMT) and the various definitions of Universal
Time. UTC is now the worldwide standard for regulating clocks and time
measurement.

All other timezones are defined relative to UTC, and include offsets like
UTC+0800 - hours to add or subtract from UTC to derive the local time. No
daylight saving time occurs in UTC, making it a useful timezone to perform
date arithmetic without worrying about the confusion and ambiguities caused
by daylight saving time transitions, your country changing its timezone, or
mobile computers that roam through multiple timezones.

..  _Coordinated Universal Time: https://en.wikipedia.org/wiki/Coordinated_Universal_Time


Helpers
~~~~~~~

There are two lists of timezones provided.

``all_timezones`` is the exhaustive list of the timezone names that can
be used.

>>> from pytz import all_timezones
>>> len(all_timezones) >= 500
True
>>> 'Etc/Greenwich' in all_timezones
True

``common_timezones`` is a list of useful, current timezones. It doesn't
contain deprecated zones or historical zones, except for a few I've
deemed in common usage, such as US/Eastern (open a bug report if you
think other timezones are deserving of being included here). It is also
a sequence of strings.

>>> from pytz import common_timezones
>>> len(common_timezones) < len(all_timezones)
True
>>> 'Etc/Greenwich' in common_timezones
False
>>> 'Australia/Melbourne' in common_timezones
True
>>> 'US/Eastern' in common_timezones
True
>>> 'Canada/Eastern' in common_timezones
True
>>> 'Australia/Yancowinna' in all_timezones
True
>>> 'Australia/Yancowinna' in common_timezones
False

Both ``common_timezones`` and ``all_timezones`` are alphabetically
sorted:

>>> common_timezones_dupe = common_timezones[:]
>>> common_timezones_dupe.sort()
>>> common_timezones == common_timezones_dupe
True
>>> all_timezones_dupe = all_timezones[:]
>>> all_timezones_dupe.sort()
>>> all_timezones == all_timezones_dupe
True

``all_timezones`` and ``common_timezones`` are also available as sets.

>>> from pytz import all_timezones_set, common_timezones_set
>>> 'US/Eastern' in all_timezones_set
True
>>> 'US/Eastern' in common_timezones_set
True
>>> 'Australia/Victoria' in common_timezones_set
False

You can also retrieve lists of timezones used by particular countries
using the ``country_timezones()`` function. It requires an ISO-3166
two letter country code.

>>> from pytz import country_timezones
>>> print(' '.join(country_timezones('ch')))
Europe/Zurich
>>> print(' '.join(country_timezones('CH')))
Europe/Zurich


Internationalization - i18n/l10n
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Pytz is an interface to the IANA database, which uses ASCII names. The `Unicode  Consortium's Unicode Locales (CLDR) <http://cldr.unicode.org>`_
project provides translations. Thomas Khyn's
`l18n <https://pypi.org/project/l18n/>`_ package can be used to access
these translations from Python.


License
~~~~~~~

MIT license.

This code is also available as part of Zope 3 under the Zope Public
License,  Version 2.1 (ZPL).

I'm happy to relicense this code if necessary for inclusion in other
open source projects.


Latest Versions
~~~~~~~~~~~~~~~

This package will be updated after releases of the Olson timezone
database.  The latest version can be downloaded from the `Python Package
Index <https://pypi.org/project/pytz/>`_.  The code that is used
to generate this distribution is hosted on launchpad.net and available
using git::

    git clone https://git.launchpad.net/pytz

A mirror on github is also available at https://github.com/stub42/pytz

Announcements of new releases are made on
`Launchpad <https://launchpad.net/pytz>`_, and the
`Atom feed <http://feeds.launchpad.net/pytz/announcements.atom>`_
hosted there.


Bugs, Feature Requests & Patches
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Bugs can be reported using `Launchpad <https://bugs.launchpad.net/pytz>`__.


Issues & Limitations
~~~~~~~~~~~~~~~~~~~~

- Offsets from UTC are rounded to the nearest whole minute, so timezones
  such as Europe/Amsterdam pre 1937 will be up to 30 seconds out. This
  is a limitation of the Python datetime library.

- If you think a timezone definition is incorrect, I probably can't fix
  it. pytz is a direct translation of the Olson timezone database, and
  changes to the timezone definitions need to be made to this source.
  If you find errors they should be reported to the time zone mailing
  list, linked from http://www.iana.org/time-zones.


Further Reading
~~~~~~~~~~~~~~~

More info than you want to know about timezones:
http://www.twinsun.com/tz/tz-link.htm


Contact
~~~~~~~

Stuart Bishop <stuart@stuartbishop.net>




Overview
========

This Python package provides high level utilities to read/write a
variety of Python types to/from HDF5 (Heirarchal Data Format) formatted
files. This package also provides support for MATLAB MAT v7.3 formatted
files, which are just HDF5 files with a different extension and some
extra meta-data.

All of this is done without pickling data. Pickling is bad for security
because it allows arbitrary code to be executed in the interpreter. One
wants to be able to read possibly HDF5 and MAT files from untrusted
sources, so pickling is avoided in this package.

The package's documetation is found at
http://pythonhosted.org/hdf5storage/

The package's source code is found at
https://github.com/frejanordsiek/hdf5storage

The package is licensed under a 2-clause BSD license
(https://github.com/frejanordsiek/hdf5storage/blob/master/COPYING.txt).

Installation
============

Dependencies
------------

This package only supports Python >= 2.6.

This package requires the numpy and h5py (>= 2.1) packages to run. Note
that full functionality requires h5py >= 2.3. An optional dependency is
the scipy package.

Installing by pip
-----------------

This package is on `PyPI <https://pypi.python.org/pypi/hdf5storage>`_.
To install hdf5storage using pip, run the command::

    pip install hdf5storage

Installing from Source
----------------------

To install hdf5storage from source, download the package and then
install the dependencies ::

    pip install -r requirements.txt

Then to install the package, run the command with Python ::

    python setup.py install

Running Tests
-------------

For testing, the package nose (>= 1.0) is required as well as unittest2
on Python 2.6. There are some tests that require Matlab and scipy to be
installed and be in the executable path. Not having them means that
those tests cannot be run (they will be skipped) but all the other
tests will run. To install all testing dependencies, other than scipy,
run ::

    pip install -r requirements_tests.txt.

To run the tests ::

    python setup.py nosetests


Building Documentation
----------------------

The documentation additionally requires sphinx (>= 1.7). The
documentation dependencies can be installed by ::

    pip install -r requirements_doc.txt

To build the documentation ::

    python setup.py build_sphinx

Python 2
========

This package was designed and written for Python 3, with Python 2.7 and
2.6 support added later. This does mean that a few things are a little
clunky in Python 2. Examples include requiring ``unicode`` keys for
dictionaries, the ``int`` and ``long`` types both being mapped to the
Python 3 ``int`` type, etc. The storage format's metadata looks more
familiar from a Python 3 standpoint as well.

The documentation is written in terms of Python 3 syntax and types
primarily. Important Python 2 information beyond direct translations of
syntax and types will be pointed out.

Hierarchal Data Format 5 (HDF5)
===============================

HDF5 files (see http://www.hdfgroup.org/HDF5/) are a commonly used file
format for exchange of numerical data. It has built in support for a
large variety of number formats (un/signed integers, floating point
numbers, strings, etc.) as scalars and arrays, enums and compound types.
It also handles differences in data representation on different hardware
platforms (endianness, different floating point formats, etc.). As can
be imagined from the name, data is represented in an HDF5 file in a
hierarchal form modelling a Unix filesystem (Datasets are equivalent to
files, Groups are equivalent to directories, and links are supported).

This package interfaces HDF5 files using the h5py package
(http://www.h5py.org/) as opposed to the PyTables package
(http://www.pytables.org/).

MATLAB MAT v7.3 file support
============================

MATLAB (http://www.mathworks.com/) MAT files version 7.3 and later are
HDF5 files with a different file extension (``.mat``) and a very
specific set of meta-data and storage conventions. This package provides
read and write support for a limited set of Python and MATLAB types.

SciPy (http://scipy.org/) has functions to read and write the older MAT
file formats. This package has functions modeled after the
``scipy.io.savemat`` and ``scipy.io.loadmat`` functions, that have the
same names and similar arguments. The dispatch to the SciPy versions if
the MAT file format is not an HDF5 based one.

Supported Types
===============

The supported Python and MATLAB types are given in the tables below.
The tables assume that one has imported collections and numpy as::

    import collections as cl
    import numpy as np

The table gives which Python types can be read and written, the first
version of this package to support it, the numpy type it gets
converted to for storage (if type information is not written, that
will be what it is read back as) the MATLAB class it becomes if
targetting a MAT file, and the first version of this package to
support writing it so MATlAB can read it.

===============  =======  ==========================  ===========  ==============
Python                                                MATLAB
----------------------------------------------------  ---------------------------
Type             Version  Converted to                Class        Version
===============  =======  ==========================  ===========  ==============
bool             0.1      np.bool\_ or np.uint8       logical      0.1 [1]_
None             0.1      ``np.float64([])``          ``[]``       0.1
int [2]_ [3]_    0.1      np.int64 [2]_               int64        0.1
long [3]_ [4]_   0.1      np.int64                    int64        0.1
float            0.1      np.float64                  double       0.1
complex          0.1      np.complex128               double       0.1
str              0.1      np.uint32/16                char         0.1 [5]_
bytes            0.1      np.bytes\_ or np.uint16     char         0.1 [6]_
bytearray        0.1      np.bytes\_ or np.uint16     char         0.1 [6]_
list             0.1      np.object\_                 cell         0.1
tuple            0.1      np.object\_                 cell         0.1
set              0.1      np.object\_                 cell         0.1
frozenset        0.1      np.object\_                 cell         0.1
cl.deque         0.1      np.object\_                 cell         0.1
dict             0.1                                  struct       0.1 [7]_
np.bool\_        0.1                                  logical      0.1
np.void          0.1
np.uint8         0.1                                  uint8        0.1
np.uint16        0.1                                  uint16       0.1
np.uint32        0.1                                  uint32       0.1
np.uint64        0.1                                  uint64       0.1
np.uint8         0.1                                  int8         0.1
np.int16         0.1                                  int16        0.1
np.int32         0.1                                  int32        0.1
np.int64         0.1                                  int64        0.1
np.float16 [8]_  0.1
np.float32       0.1                                  single       0.1
np.float64       0.1                                  double       0.1
np.complex64     0.1                                  single       0.1
np.complex128    0.1                                  double       0.1
np.str\_         0.1      np.uint32/16                char/uint32  0.1 [5]_
np.bytes\_       0.1      np.bytes\_ or np.uint16     char         0.1 [6]_
np.object\_      0.1                                  cell         0.1
np.ndarray       0.1      [9]_ [10]_                  [9]_ [10]_   0.1 [9]_ [11]_
np.matrix        0.1      [9]_                        [9]_         0.1 [9]_
np.chararray     0.1      [9]_                        [9]_         0.1 [9]_
np.recarray      0.1      structured np.ndarray       [9]_ [10]_   0.1 [9]_
===============  =======  ==========================  ===========  ==============

.. [1] Depends on the selected options. Always ``np.uint8`` when doing
       MATLAB compatiblity, or if the option is explicitly set.
.. [2] In Python 2.x, it may be read back as a ``long`` if it can't fit
       in the size of an ``int``.
.. [3] Must be small enough to fit into an ``np.int64``.
.. [4] Type found only in Python 2.x. Python 2.x's ``long`` and ``int``
       are unified into a single ``int`` type in Python 3.x. Read as an
       ``int`` in Python 3.x.
.. [5] Depends on the selected options and whether it can be converted
       to UTF-16 without using doublets. If the option is explicity set
       (or implicitly when doing MATLAB compatibility) and it can be
       converted to UTF-16 without losing any characters that can't be
       represented in UTF-16 or using UTF-16 doublets (MATLAB doesn't
       support them), then it is written as ``np.uint16`` in UTF-16
       encoding. Otherwise, it is stored at ``np.uint32`` in UTF-32
       encoding.
.. [6] Depends on the selected options. If the option is explicitly set
       (or implicitly when doing MATLAB compatibility), it will be
       stored as ``np.uint16`` in UTF-16 encoding unless it has
       non-ASCII characters in which case a ``NotImplementedError`` is
       thrown). Otherwise, it is just written as ``np.bytes_``.
.. [7] All keys must be ``str`` in Python 3 or ``unicode`` in Python 2.
       They cannot have null characters (``'\x00'``) or forward slashes
       (``'/'``) in them.
.. [8] ``np.float16`` are not supported for h5py versions before
       ``2.2``.
.. [9] Container types are only supported if their underlying dtype is
       supported. Data conversions are done based on its dtype.
.. [10] Structured ``np.ndarray`` s (have fields in their dtypes) can be
        written as an HDF5 COMPOUND type or as an HDF5 Group with
        Datasets holding its fields (either the values directly, or as
        an HDF5 Reference array to the values for the different elements
        of the data). Can only be written as an HDF5 COMPOUND type if
        none of its field are of dtype ``'object'``. Field names cannot
        have null characters (``'\x00'``) and, when writing as an HDF5
        GROUP, forward slashes (``'/'``) in them.
.. [11] Structured ``np.ndarray`` s with no elements, when written like a
        structure, will not be read back with the right dtypes for their
        fields (will all become 'object').

This table gives the MATLAB classes that can be read from a MAT file,
the first version of this package that can read them, and the Python
type they are read as.

===============  =======  =================================
MATLAB Class     Version  Python Type
===============  =======  =================================
logical          0.1      np.bool\_
single           0.1      np.float32 or np.complex64 [12]_
double           0.1      np.float64 or np.complex128 [12]_
uint8            0.1      np.uint8
uint16           0.1      np.uint16
uint32           0.1      np.uint32
uint64           0.1      np.uint64
int8             0.1      np.int8
int16            0.1      np.int16
int32            0.1      np.int32
int64            0.1      np.int64
char             0.1      np.str\_
struct           0.1      structured np.ndarray
cell             0.1      np.object\_
canonical empty  0.1      ``np.float64([])``
===============  =======  =================================

.. [12] Depends on whether there is a complex part or not.


Versions
========

0.1.15. Bugfix release that fixed the following bugs.
        * Issue #68. Fixed bug where ``str`` and ``numpy.unicode_``
          strings (but not ndarrays of them) were saved in
          ``uint32`` format regardless of the value of
          ``Options.convert_numpy_bytes_to_utf16``.
        * Issue #70. Updated ``setup.py`` and ``requirements.txt`` to specify
          the maximum versions of numpy and h5py that can be used for specific
          python versions (avoid version with dropped support).
        * Issue #71. Fixed bug where the ``'python_fields'`` attribute wouldn't
          always be written when doing python metadata for data written in
          a struct-like fashion. The bug caused the field order to not be
          preserved when writing and reading.
        * Fixed an assertion in the tests to handle field re-ordering when
          no metadata is used for structured dtypes that only worked on
          older versions of numpy.
        * Issue #72. Fixed bug where python collections filled with ndarrays
          that all have the same shape were converted to multi-dimensional
          object ndarrays instead of a 1D object ndarray of the elements.

0.1.14. Bugfix release that also added a couple features.
        * Issue #45. Fixed syntax errors in unicode strings for Python
          3.0 to 3.2.
        * Issues #44 and #47. Fixed bugs in testing of conversion and
          storage of string types.
        * Issue #46. Fixed raising of ``RuntimeWarnings`` in tests due
          to signalling NaNs.
        * Added requirements files for building documentation and
          running tests.
        * Made it so that Matlab compatability tests are skipped if
          Matlab is not found, instead of raising errors.

0.1.13. Bugfix release fixing the following bug.
        * Issue #36. Fixed bugs in writing ``int`` and ``long`` to HDF5
          and their tests on 32 bit systems.

0.1.12. Bugfix release fixing the following bugs. In addition, copyright years were also updated and notices put in the Matlab files used for testing.
        * Issue #32. Fixed transposing before reshaping ``np.ndarray``
          when reading from HDF5 files where python metadata was stored
          but not Matlab metadata.
        * Issue #33. Fixed the loss of the number of characters when
          reading empty numpy string arrays.
        * Issue #34. Fixed a conversion error when ``np.chararray`` are
          written with Matlab metadata.

0.1.11. Bugfix release fixing the following.
        * Issue #30. Fixed ``loadmat`` not opening files in read mode.

0.1.10. Minor feature/performance fix release doing the following.
        * Issue #29. Added ``writes`` and ``reads`` functions to write
          and read more than one piece of data at a time and made
          ``savemat`` and ``loadmat`` use them to increase performance.
          Previously, the HDF5 file was being opened and closed for
          each piece of data, which impacted performance, especially
	  for large files.

0.1.9. Bugfix and minor feature release doing the following.
       * Issue #23. Fixed bug where a structured ``np.ndarray`` with
         a field name of ``'O'`` could never be written as an
         HDF5 COMPOUND Dataset (falsely thought a field's dtype was
         object).
       * Issue #6. Added optional data compression and the storage of
         data checksums. Controlled by several new options.

0.1.8. Bugfix release fixing the following two bugs.
       * Issue #21. Fixed bug where the ``'MATLAB_class'`` Attribute is
         not set when writing ``dict`` types when writing MATLAB
         metadata.
       * Issue #22. Fixed bug where null characters (``'\x00'``) and
         forward slashes (``'/'``) were allowed in ``dict`` keys and the
         field names of structured ``np.ndarray`` (except that forward
         slashes are allowed when the
         ``structured_numpy_ndarray_as_struct`` is not set as is the
         case when the ``matlab_compatible`` option is set). These
         cause problems for the ``h5py`` package and the HDF5 library.
         ``NotImplementedError`` is now thrown in these cases.

0.1.7. Bugfix release with an added compatibility option and some added test code. Did the following.
       * Fixed an issue reading variables larger than 2 GB in MATLAB
         MAT v7.3 files when no explicit variable names to read are
         given to ``hdf5storage.loadmat``. Fix also reduces memory
         consumption and processing time a little bit by removing an
         unneeded memory copy.
       * ``Options`` now will accept any additional keyword arguments it
         doesn't support, ignoring them, to be API compatible with future
         package versions with added options.
       * Added tests for reading data that has been compressed or had
         other HDF5 filters applied.

0.1.6. Bugfix release fixing a bug with determining the maximum size of a Python 2.x ``int`` on a 32-bit system.

0.1.5. Bugfix release fixing the following bug.
       * Fixed bug where an ``int`` could be stored that is too big to
         fit into an ``int`` when read back in Python 2.x. When it is
         too big, it is converted to a ``long``.
       * Fixed a bug where an ``int`` or ``long`` that is too big to
	 big to fit into an ``np.int64`` raised the wrong exception.
       * Fixed bug where fields names for structured ``np.ndarray`` with
         non-ASCII characters (assumed to be UTF-8 encoded in
         Python 2.x) can't be read or written properly.
       * Fixed bug where ``np.bytes_`` with non-ASCII characters can
         were converted incorrectly to UTF-16 when that option is set
         (set implicitly when doing MATLAB compatibility). Now, it throws
         a ``NotImplementedError``.

0.1.4. Bugfix release fixing the following bugs. Thanks goes to `mrdomino <https://github.com/mrdomino>`_ for writing the bug fixes.
       * Fixed bug where ``dtype`` is used as a keyword parameter of
         ``np.ndarray.astype`` when it is a positional argument.
       * Fixed error caused by ``h5py.__version__`` being absent on
         Ubuntu 12.04.

0.1.3. Bugfix release fixing the following bug.
       * Fixed broken ability to correctly read and write empty
         structured ``np.ndarray`` (has fields).

0.1.2. Bugfix release fixing the following bugs.
       * Removed mistaken support for ``np.float16`` for h5py versions
         before ``2.2`` since that was when support for it was
         introduced.
       * Structured ``np.ndarray`` where one or more fields is of the
         ``'object'`` dtype can now be written without an error when
         the ``structured_numpy_ndarray_as_struct`` option is not set.
         They are written as an HDF5 Group, as if the option was set.
       * Support for the ``'MATLAB_fields'`` Attribute for data types
         that are structures in MATLAB has been added for when the
         version of the h5py package being used is ``2.3`` or greater.
         Support is still missing for earlier versions (this package
         requires a minimum version of ``2.1``).
       * The check for non-unicode string keys (``str`` in Python 3 and
         ``unicode`` in Python 2) in the type ``dict`` is done right
         before any changes are made to the HDF5 file instead of in the
         middle so that no changes are applied if an invalid key is
         present.
       * HDF5 userblock set with the proper metadata for MATLAB support
         right at the beginning of when data is being written to an HDF5
         file instead of at the end, meaning the writing can crash and
         the file will still be a valid MATLAB file.

0.1.1. Bugfix release fixing the following bugs.
       * ``str`` is now written like ``numpy.str_`` instead of
         ``numpy.bytes_``.
       * Complex numbers where the real or imaginary part are ``nan``
         but the other part are not are now read correctly as opposed
         to setting both parts to ``nan``.
       * Fixed bugs in string conversions on Python 2 resulting from
         ``str.decode()`` and ``unicode.encode()`` not taking the same
         keyword arguments as in Python 3.
       * MATLAB structure arrays can now be read without producing an
         error on Python 2.
       * ``numpy.str_`` now written as ``numpy.uint16`` on Python 2 if
         the ``convert_numpy_str_to_utf16`` option is set and the
         conversion can be done without using UTF-16 doublets, instead
         of always writing them as ``numpy.uint32``.

0.1. Initial version.


Requests: HTTP for Humans
=========================

.. image:: https://img.shields.io/pypi/v/requests.svg
    :target: https://pypi.org/project/requests/

.. image:: https://img.shields.io/pypi/l/requests.svg
    :target: https://pypi.org/project/requests/

.. image:: https://img.shields.io/pypi/pyversions/requests.svg
    :target: https://pypi.org/project/requests/

.. image:: https://codecov.io/github/requests/requests/coverage.svg?branch=master
    :target: https://codecov.io/github/requests/requests
    :alt: codecov.io

.. image:: https://img.shields.io/github/contributors/requests/requests.svg
    :target: https://github.com/requests/requests/graphs/contributors

.. image:: https://img.shields.io/badge/Say%20Thanks-!-1EAEDB.svg
    :target: https://saythanks.io/to/kennethreitz

Requests is the only *Non-GMO* HTTP library for Python, safe for human
consumption.

.. image:: https://farm5.staticflickr.com/4317/35198386374_1939af3de6_k_d.jpg

Behold, the power of Requests:

.. code-block:: python

    >>> r = requests.get('https://api.github.com/user', auth=('user', 'pass'))
    >>> r.status_code
    200
    >>> r.headers['content-type']
    'application/json; charset=utf8'
    >>> r.encoding
    'utf-8'
    >>> r.text
    u'{"type":"User"...'
    >>> r.json()
    {u'disk_usage': 368627, u'private_gists': 484, ...}

See `the similar code, sans Requests <https://gist.github.com/973705>`_.

.. image:: https://raw.githubusercontent.com/requests/requests/master/docs/_static/requests-logo-small.png
    :target: http://docs.python-requests.org/


Requests allows you to send *organic, grass-fed* HTTP/1.1 requests, without the
need for manual labor. There's no need to manually add query strings to your
URLs, or to form-encode your POST data. Keep-alive and HTTP connection pooling
are 100% automatic, thanks to `urllib3 <https://github.com/shazow/urllib3>`_.

Besides, all the cool kids are doing it. Requests is one of the most
downloaded Python packages of all time, pulling in over 11,000,000 downloads
every month. You don't want to be left out!

Feature Support
---------------

Requests is ready for today's web.

- International Domains and URLs
- Keep-Alive & Connection Pooling
- Sessions with Cookie Persistence
- Browser-style SSL Verification
- Basic/Digest Authentication
- Elegant Key/Value Cookies
- Automatic Decompression
- Automatic Content Decoding
- Unicode Response Bodies
- Multipart File Uploads
- HTTP(S) Proxy Support
- Connection Timeouts
- Streaming Downloads
- ``.netrc`` Support
- Chunked Requests

Requests officially supports Python 2.7 & 3.4–3.6, and runs great on PyPy.

Installation
------------

To install Requests, simply use `pipenv <http://pipenv.org/>`_ (or pip, of course):

.. code-block:: bash

    $ pipenv install requests
    ✨🍰✨

Satisfaction guaranteed.

Documentation
-------------

Fantastic documentation is available at http://docs.python-requests.org/, for a limited time only.


How to Contribute
-----------------

#. Check for open issues or open a fresh issue to start a discussion around a feature idea or a bug. There is a `Contributor Friendly`_ tag for issues that should be ideal for people who are not very familiar with the codebase yet.
#. Fork `the repository`_ on GitHub to start making your changes to the **master** branch (or branch off of it).
#. Write a test which shows that the bug was fixed or that the feature works as expected.
#. Send a pull request and bug the maintainer until it gets merged and published. :) Make sure to add yourself to AUTHORS_.

.. _`the repository`: https://github.com/requests/requests
.. _AUTHORS: https://github.com/requests/requests/blob/master/AUTHORS.rst
.. _Contributor Friendly: https://github.com/requests/requests/issues?direction=desc&labels=Contributor+Friendly&page=1&sort=updated&state=open


.. :changelog:

Release History
---------------

dev
+++

- [Short description of non-trivial change.]

2.19.1 (2018-06-14)
+++++++++++++++++++

**Bugfixes**

- Fixed issue where status_codes.py's ``init`` function failed trying to append to
  a ``__doc__`` value of ``None``.

2.19.0 (2018-06-12)
+++++++++++++++++++

**Improvements**

- Warn user about possible slowdown when using cryptography version < 1.3.4
- Check for invalid host in proxy URL, before forwarding request to adapter.
- Fragments are now properly maintained across redirects. (RFC7231 7.1.2)
- Removed use of cgi module to expedite library load time.
- Added support for SHA-256 and SHA-512 digest auth algorithms.
- Minor performance improvement to ``Request.content``.
- Migrate to using collections.abc for 3.7 compatibility.

**Bugfixes**

- Parsing empty ``Link`` headers with ``parse_header_links()`` no longer return one bogus entry.
- Fixed issue where loading the default certificate bundle from a zip archive
  would raise an ``IOError``.
- Fixed issue with unexpected ``ImportError`` on windows system which do not support ``winreg`` module.
- DNS resolution in proxy bypass no longer includes the username and password in
  the request. This also fixes the issue of DNS queries failing on macOS.
- Properly normalize adapter prefixes for url comparison.
- Passing ``None`` as a file pointer to the ``files`` param no longer raises an exception.
- Calling ``copy`` on a ``RequestsCookieJar`` will now preserve the cookie policy correctly.

**Dependencies**

- We now support idna v2.7.
- We now support urllib3 v1.23.

2.18.4 (2017-08-15)
+++++++++++++++++++

**Improvements**

- Error messages for invalid headers now include the header name for easier debugging

**Dependencies**

- We now support idna v2.6.

2.18.3 (2017-08-02)
+++++++++++++++++++

**Improvements**

- Running ``$ python -m requests.help`` now includes the installed version of idna.

**Bugfixes**

- Fixed issue where Requests would raise ``ConnectionError`` instead of
  ``SSLError`` when encountering SSL problems when using urllib3 v1.22.

2.18.2 (2017-07-25)
+++++++++++++++++++

**Bugfixes**

- ``requests.help`` no longer fails on Python 2.6 due to the absence of
  ``ssl.OPENSSL_VERSION_NUMBER``.

**Dependencies**

- We now support urllib3 v1.22.

2.18.1 (2017-06-14)
+++++++++++++++++++

**Bugfixes**

- Fix an error in the packaging whereby the ``*.whl`` contained incorrect data
  that regressed the fix in v2.17.3.

2.18.0 (2017-06-14)
+++++++++++++++++++

**Improvements**

- ``Response`` is now a context manager, so can be used directly in a ``with`` statement
  without first having to be wrapped by ``contextlib.closing()``.

**Bugfixes**

- Resolve installation failure if multiprocessing is not available
- Resolve tests crash if multiprocessing is not able to determine the number of CPU cores
- Resolve error swallowing in utils set_environ generator


2.17.3 (2017-05-29)
+++++++++++++++++++

**Improvements**

- Improved ``packages`` namespace identity support, for monkeypatching libraries.


2.17.2 (2017-05-29)
+++++++++++++++++++

**Improvements**

- Improved ``packages`` namespace identity support, for monkeypatching libraries.


2.17.1 (2017-05-29)
+++++++++++++++++++

**Improvements**

- Improved ``packages`` namespace identity support, for monkeypatching libraries.


2.17.0 (2017-05-29)
+++++++++++++++++++

**Improvements**

- Removal of the 301 redirect cache. This improves thread-safety.


2.16.5 (2017-05-28)
+++++++++++++++++++

- Improvements to ``$ python -m requests.help``.

2.16.4 (2017-05-27)
+++++++++++++++++++

- Introduction of the ``$ python -m requests.help`` command, for debugging with maintainers!

2.16.3 (2017-05-27)
+++++++++++++++++++

- Further restored the ``requests.packages`` namespace for compatibility reasons.

2.16.2 (2017-05-27)
+++++++++++++++++++

- Further restored the ``requests.packages`` namespace for compatibility reasons.

No code modification (noted below) should be necessary any longer.

2.16.1 (2017-05-27)
+++++++++++++++++++

- Restored the ``requests.packages`` namespace for compatibility reasons.
- Bugfix for ``urllib3`` version parsing.

**Note**: code that was written to import against the ``requests.packages``
namespace previously will have to import code that rests at this module-level
now.

For example::

    from requests.packages.urllib3.poolmanager import PoolManager

Will need to be re-written to be::

    from requests.packages import urllib3
    urllib3.poolmanager.PoolManager

Or, even better::

    from urllib3.poolmanager import PoolManager

2.16.0 (2017-05-26)
+++++++++++++++++++

- Unvendor ALL the things!

2.15.1 (2017-05-26)
+++++++++++++++++++

- Everyone makes mistakes.

2.15.0 (2017-05-26)
+++++++++++++++++++

**Improvements**

- Introduction of the ``Response.next`` property, for getting the next
  ``PreparedResponse`` from a redirect chain (when ``allow_redirects=False``).
- Internal refactoring of ``__version__`` module.

**Bugfixes**

- Restored once-optional parameter for ``requests.utils.get_environ_proxies()``.

2.14.2 (2017-05-10)
+++++++++++++++++++

**Bugfixes**

- Changed a less-than to an equal-to and an or in the dependency markers to
  widen compatibility with older setuptools releases.

2.14.1 (2017-05-09)
+++++++++++++++++++

**Bugfixes**

- Changed the dependency markers to widen compatibility with older pip
  releases.

2.14.0 (2017-05-09)
+++++++++++++++++++

**Improvements**

- It is now possible to pass ``no_proxy`` as a key to the ``proxies``
  dictionary to provide handling similar to the ``NO_PROXY`` environment
  variable.
- When users provide invalid paths to certificate bundle files or directories
  Requests now raises ``IOError``, rather than failing at the time of the HTTPS
  request with a fairly inscrutable certificate validation error.
- The behavior of ``SessionRedirectMixin`` was slightly altered.
  ``resolve_redirects`` will now detect a redirect by calling
  ``get_redirect_target(response)`` instead of directly
  querying ``Response.is_redirect`` and ``Response.headers['location']``.
  Advanced users will be able to process malformed redirects more easily.
- Changed the internal calculation of elapsed request time to have higher
  resolution on Windows.
- Added ``win_inet_pton`` as conditional dependency for the ``[socks]`` extra
  on Windows with Python 2.7.
- Changed the proxy bypass implementation on Windows: the proxy bypass
  check doesn't use forward and reverse DNS requests anymore
- URLs with schemes that begin with ``http`` but are not ``http`` or ``https``
  no longer have their host parts forced to lowercase.

**Bugfixes**

- Much improved handling of non-ASCII ``Location`` header values in redirects.
  Fewer ``UnicodeDecodeErrors`` are encountered on Python 2, and Python 3 now
  correctly understands that Latin-1 is unlikely to be the correct encoding.
- If an attempt to ``seek`` file to find out its length fails, we now
  appropriately handle that by aborting our content-length calculations.
- Restricted ``HTTPDigestAuth`` to only respond to auth challenges made on 4XX
  responses, rather than to all auth challenges.
- Fixed some code that was firing ``DeprecationWarning`` on Python 3.6.
- The dismayed person emoticon (``/o\\``) no longer has a big head. I'm sure
  this is what you were all worrying about most.


**Miscellaneous**

- Updated bundled urllib3 to v1.21.1.
- Updated bundled chardet to v3.0.2.
- Updated bundled idna to v2.5.
- Updated bundled certifi to 2017.4.17.

2.13.0 (2017-01-24)
+++++++++++++++++++

**Features**

- Only load the ``idna`` library when we've determined we need it. This will
  save some memory for users.

**Miscellaneous**

- Updated bundled urllib3 to 1.20.
- Updated bundled idna to 2.2.

2.12.5 (2017-01-18)
+++++++++++++++++++

**Bugfixes**

- Fixed an issue with JSON encoding detection, specifically detecting
  big-endian UTF-32 with BOM.

2.12.4 (2016-12-14)
+++++++++++++++++++

**Bugfixes**

- Fixed regression from 2.12.2 where non-string types were rejected in the
  basic auth parameters. While support for this behaviour has been readded,
  the behaviour is deprecated and will be removed in the future.

2.12.3 (2016-12-01)
+++++++++++++++++++

**Bugfixes**

- Fixed regression from v2.12.1 for URLs with schemes that begin with "http".
  These URLs have historically been processed as though they were HTTP-schemed
  URLs, and so have had parameters added. This was removed in v2.12.2 in an
  overzealous attempt to resolve problems with IDNA-encoding those URLs. This
  change was reverted: the other fixes for IDNA-encoding have been judged to
  be sufficient to return to the behaviour Requests had before v2.12.0.

2.12.2 (2016-11-30)
+++++++++++++++++++

**Bugfixes**

- Fixed several issues with IDNA-encoding URLs that are technically invalid but
  which are widely accepted. Requests will now attempt to IDNA-encode a URL if
  it can but, if it fails, and the host contains only ASCII characters, it will
  be passed through optimistically. This will allow users to opt-in to using
  IDNA2003 themselves if they want to, and will also allow technically invalid
  but still common hostnames.
- Fixed an issue where URLs with leading whitespace would raise
  ``InvalidSchema`` errors.
- Fixed an issue where some URLs without the HTTP or HTTPS schemes would still
  have HTTP URL preparation applied to them.
- Fixed an issue where Unicode strings could not be used in basic auth.
- Fixed an issue encountered by some Requests plugins where constructing a
  Response object would cause ``Response.content`` to raise an
  ``AttributeError``.

2.12.1 (2016-11-16)
+++++++++++++++++++

**Bugfixes**

- Updated setuptools 'security' extra for the new PyOpenSSL backend in urllib3.

**Miscellaneous**

- Updated bundled urllib3 to 1.19.1.

2.12.0 (2016-11-15)
+++++++++++++++++++

**Improvements**

- Updated support for internationalized domain names from IDNA2003 to IDNA2008.
  This updated support is required for several forms of IDNs and is mandatory
  for .de domains.
- Much improved heuristics for guessing content lengths: Requests will no
  longer read an entire ``StringIO`` into memory.
- Much improved logic for recalculating ``Content-Length`` headers for
  ``PreparedRequest`` objects.
- Improved tolerance for file-like objects that have no ``tell`` method but
  do have a ``seek`` method.
- Anything that is a subclass of ``Mapping`` is now treated like a dictionary
  by the ``data=`` keyword argument.
- Requests now tolerates empty passwords in proxy credentials, rather than
  stripping the credentials.
- If a request is made with a file-like object as the body and that request is
  redirected with a 307 or 308 status code, Requests will now attempt to
  rewind the body object so it can be replayed.

**Bugfixes**

- When calling ``response.close``, the call to ``close`` will be propagated
  through to non-urllib3 backends.
- Fixed issue where the ``ALL_PROXY`` environment variable would be preferred
  over scheme-specific variables like ``HTTP_PROXY``.
- Fixed issue where non-UTF8 reason phrases got severely mangled by falling
  back to decoding using ISO 8859-1 instead.
- Fixed a bug where Requests would not correctly correlate cookies set when
  using custom Host headers if those Host headers did not use the native
  string type for the platform.

**Miscellaneous**

- Updated bundled urllib3 to 1.19.
- Updated bundled certifi certs to 2016.09.26.

2.11.1 (2016-08-17)
+++++++++++++++++++

**Bugfixes**

- Fixed a bug when using ``iter_content`` with ``decode_unicode=True`` for
  streamed bodies would raise ``AttributeError``. This bug was introduced in
  2.11.
- Strip Content-Type and Transfer-Encoding headers from the header block when
  following a redirect that transforms the verb from POST/PUT to GET.

2.11.0 (2016-08-08)
+++++++++++++++++++

**Improvements**

- Added support for the ``ALL_PROXY`` environment variable.
- Reject header values that contain leading whitespace or newline characters to
  reduce risk of header smuggling.

**Bugfixes**

- Fixed occasional ``TypeError`` when attempting to decode a JSON response that
  occurred in an error case. Now correctly returns a ``ValueError``.
- Requests would incorrectly ignore a non-CIDR IP address in the ``NO_PROXY``
  environment variables: Requests now treats it as a specific IP.
- Fixed a bug when sending JSON data that could cause us to encounter obscure
  OpenSSL errors in certain network conditions (yes, really).
- Added type checks to ensure that ``iter_content`` only accepts integers and
  ``None`` for chunk sizes.
- Fixed issue where responses whose body had not been fully consumed would have
  the underlying connection closed but not returned to the connection pool,
  which could cause Requests to hang in situations where the ``HTTPAdapter``
  had been configured to use a blocking connection pool.

**Miscellaneous**

- Updated bundled urllib3 to 1.16.
- Some previous releases accidentally accepted non-strings as acceptable header values. This release does not.

2.10.0 (2016-04-29)
+++++++++++++++++++

**New Features**

- SOCKS Proxy Support! (requires PySocks; ``$ pip install requests[socks]``)

**Miscellaneous**

- Updated bundled urllib3 to 1.15.1.

2.9.2 (2016-04-29)
++++++++++++++++++

**Improvements**

- Change built-in CaseInsensitiveDict (used for headers) to use OrderedDict
  as its underlying datastore.

**Bugfixes**

- Don't use redirect_cache if allow_redirects=False
- When passed objects that throw exceptions from ``tell()``, send them via
  chunked transfer encoding instead of failing.
- Raise a ProxyError for proxy related connection issues.

2.9.1 (2015-12-21)
++++++++++++++++++

**Bugfixes**

- Resolve regression introduced in 2.9.0 that made it impossible to send binary
  strings as bodies in Python 3.
- Fixed errors when calculating cookie expiration dates in certain locales.

**Miscellaneous**

- Updated bundled urllib3 to 1.13.1.

2.9.0 (2015-12-15)
++++++++++++++++++

**Minor Improvements** (Backwards compatible)

- The ``verify`` keyword argument now supports being passed a path to a
  directory of CA certificates, not just a single-file bundle.
- Warnings are now emitted when sending files opened in text mode.
- Added the 511 Network Authentication Required status code to the status code
  registry.

**Bugfixes**

- For file-like objects that are not seeked to the very beginning, we now
  send the content length for the number of bytes we will actually read, rather
  than the total size of the file, allowing partial file uploads.
- When uploading file-like objects, if they are empty or have no obvious
  content length we set ``Transfer-Encoding: chunked`` rather than
  ``Content-Length: 0``.
- We correctly receive the response in buffered mode when uploading chunked
  bodies.
- We now handle being passed a query string as a bytestring on Python 3, by
  decoding it as UTF-8.
- Sessions are now closed in all cases (exceptional and not) when using the
  functional API rather than leaking and waiting for the garbage collector to
  clean them up.
- Correctly handle digest auth headers with a malformed ``qop`` directive that
  contains no token, by treating it the same as if no ``qop`` directive was
  provided at all.
- Minor performance improvements when removing specific cookies by name.

**Miscellaneous**

- Updated urllib3 to 1.13.

2.8.1 (2015-10-13)
++++++++++++++++++

**Bugfixes**

- Update certificate bundle to match ``certifi`` 2015.9.6.2's weak certificate
  bundle.
- Fix a bug in 2.8.0 where requests would raise ``ConnectTimeout`` instead of
  ``ConnectionError``
- When using the PreparedRequest flow, requests will now correctly respect the
  ``json`` parameter. Broken in 2.8.0.
- When using the PreparedRequest flow, requests will now correctly handle a
  Unicode-string method name on Python 2. Broken in 2.8.0.

2.8.0 (2015-10-05)
++++++++++++++++++

**Minor Improvements** (Backwards Compatible)

- Requests now supports per-host proxies. This allows the ``proxies``
  dictionary to have entries of the form
  ``{'<scheme>://<hostname>': '<proxy>'}``. Host-specific proxies will be used
  in preference to the previously-supported scheme-specific ones, but the
  previous syntax will continue to work.
- ``Response.raise_for_status`` now prints the URL that failed as part of the
  exception message.
- ``requests.utils.get_netrc_auth`` now takes an ``raise_errors`` kwarg,
  defaulting to ``False``. When ``True``, errors parsing ``.netrc`` files cause
  exceptions to be thrown.
- Change to bundled projects import logic to make it easier to unbundle
  requests downstream.
- Changed the default User-Agent string to avoid leaking data on Linux: now
  contains only the requests version.

**Bugfixes**

- The ``json`` parameter to ``post()`` and friends will now only be used if
  neither ``data`` nor ``files`` are present, consistent with the
  documentation.
- We now ignore empty fields in the ``NO_PROXY`` environment variable.
- Fixed problem where ``httplib.BadStatusLine`` would get raised if combining
  ``stream=True`` with ``contextlib.closing``.
- Prevented bugs where we would attempt to return the same connection back to
  the connection pool twice when sending a Chunked body.
- Miscellaneous minor internal changes.
- Digest Auth support is now thread safe.

**Updates**

- Updated urllib3 to 1.12.

2.7.0 (2015-05-03)
++++++++++++++++++

This is the first release that follows our new release process. For more, see
`our documentation
<http://docs.python-requests.org/en/latest/community/release-process/>`_.

**Bugfixes**

- Updated urllib3 to 1.10.4, resolving several bugs involving chunked transfer
  encoding and response framing.

2.6.2 (2015-04-23)
++++++++++++++++++

**Bugfixes**

- Fix regression where compressed data that was sent as chunked data was not
  properly decompressed. (#2561)

2.6.1 (2015-04-22)
++++++++++++++++++

**Bugfixes**

- Remove VendorAlias import machinery introduced in v2.5.2.

- Simplify the PreparedRequest.prepare API: We no longer require the user to
  pass an empty list to the hooks keyword argument. (c.f. #2552)

- Resolve redirects now receives and forwards all of the original arguments to
  the adapter. (#2503)

- Handle UnicodeDecodeErrors when trying to deal with a unicode URL that
  cannot be encoded in ASCII. (#2540)

- Populate the parsed path of the URI field when performing Digest
  Authentication. (#2426)

- Copy a PreparedRequest's CookieJar more reliably when it is not an instance
  of RequestsCookieJar. (#2527)

2.6.0 (2015-03-14)
++++++++++++++++++

**Bugfixes**

- CVE-2015-2296: Fix handling of cookies on redirect. Previously a cookie
  without a host value set would use the hostname for the redirected URL
  exposing requests users to session fixation attacks and potentially cookie
  stealing. This was disclosed privately by Matthew Daley of
  `BugFuzz <https://bugfuzz.com>`_. This affects all versions of requests from
  v2.1.0 to v2.5.3 (inclusive on both ends).

- Fix error when requests is an ``install_requires`` dependency and ``python
  setup.py test`` is run. (#2462)

- Fix error when urllib3 is unbundled and requests continues to use the
  vendored import location.

- Include fixes to ``urllib3``'s header handling.

- Requests' handling of unvendored dependencies is now more restrictive.

**Features and Improvements**

- Support bytearrays when passed as parameters in the ``files`` argument.
  (#2468)

- Avoid data duplication when creating a request with ``str``, ``bytes``, or
  ``bytearray`` input to the ``files`` argument.

2.5.3 (2015-02-24)
++++++++++++++++++

**Bugfixes**

- Revert changes to our vendored certificate bundle. For more context see
  (#2455, #2456, and http://bugs.python.org/issue23476)

2.5.2 (2015-02-23)
++++++++++++++++++

**Features and Improvements**

- Add sha256 fingerprint support. (`shazow/urllib3#540`_)

- Improve the performance of headers. (`shazow/urllib3#544`_)

**Bugfixes**

- Copy pip's import machinery. When downstream redistributors remove
  requests.packages.urllib3 the import machinery will continue to let those
  same symbols work. Example usage in requests' documentation and 3rd-party
  libraries relying on the vendored copies of urllib3 will work without having
  to fallback to the system urllib3.

- Attempt to quote parts of the URL on redirect if unquoting and then quoting
  fails. (#2356)

- Fix filename type check for multipart form-data uploads. (#2411)

- Properly handle the case where a server issuing digest authentication
  challenges provides both auth and auth-int qop-values. (#2408)

- Fix a socket leak. (`shazow/urllib3#549`_)

- Fix multiple ``Set-Cookie`` headers properly. (`shazow/urllib3#534`_)

- Disable the built-in hostname verification. (`shazow/urllib3#526`_)

- Fix the behaviour of decoding an exhausted stream. (`shazow/urllib3#535`_)

**Security**

- Pulled in an updated ``cacert.pem``.

- Drop RC4 from the default cipher list. (`shazow/urllib3#551`_)

.. _shazow/urllib3#551: https://github.com/shazow/urllib3/pull/551
.. _shazow/urllib3#549: https://github.com/shazow/urllib3/pull/549
.. _shazow/urllib3#544: https://github.com/shazow/urllib3/pull/544
.. _shazow/urllib3#540: https://github.com/shazow/urllib3/pull/540
.. _shazow/urllib3#535: https://github.com/shazow/urllib3/pull/535
.. _shazow/urllib3#534: https://github.com/shazow/urllib3/pull/534
.. _shazow/urllib3#526: https://github.com/shazow/urllib3/pull/526

2.5.1 (2014-12-23)
++++++++++++++++++

**Behavioural Changes**

- Only catch HTTPErrors in raise_for_status (#2382)

**Bugfixes**

- Handle LocationParseError from urllib3 (#2344)
- Handle file-like object filenames that are not strings (#2379)
- Unbreak HTTPDigestAuth handler. Allow new nonces to be negotiated (#2389)

2.5.0 (2014-12-01)
++++++++++++++++++

**Improvements**

- Allow usage of urllib3's Retry object with HTTPAdapters (#2216)
- The ``iter_lines`` method on a response now accepts a delimiter with which
  to split the content (#2295)

**Behavioural Changes**

- Add deprecation warnings to functions in requests.utils that will be removed
  in 3.0 (#2309)
- Sessions used by the functional API are always closed (#2326)
- Restrict requests to HTTP/1.1 and HTTP/1.0 (stop accepting HTTP/0.9) (#2323)

**Bugfixes**

- Only parse the URL once (#2353)
- Allow Content-Length header to always be overridden (#2332)
- Properly handle files in HTTPDigestAuth (#2333)
- Cap redirect_cache size to prevent memory abuse (#2299)
- Fix HTTPDigestAuth handling of redirects after authenticating successfully
  (#2253)
- Fix crash with custom method parameter to Session.request (#2317)
- Fix how Link headers are parsed using the regular expression library (#2271)

**Documentation**

- Add more references for interlinking (#2348)
- Update CSS for theme (#2290)
- Update width of buttons and sidebar (#2289)
- Replace references of Gittip with Gratipay (#2282)
- Add link to changelog in sidebar (#2273)

2.4.3 (2014-10-06)
++++++++++++++++++

**Bugfixes**

- Unicode URL improvements for Python 2.
- Re-order JSON param for backwards compat.
- Automatically defrag authentication schemes from host/pass URIs. (`#2249 <https://github.com/requests/requests/issues/2249>`_)


2.4.2 (2014-10-05)
++++++++++++++++++

**Improvements**

- FINALLY! Add json parameter for uploads! (`#2258 <https://github.com/requests/requests/pull/2258>`_)
- Support for bytestring URLs on Python 3.x (`#2238 <https://github.com/requests/requests/pull/2238>`_)

**Bugfixes**

- Avoid getting stuck in a loop (`#2244 <https://github.com/requests/requests/pull/2244>`_)
- Multiple calls to iter* fail with unhelpful error. (`#2240 <https://github.com/requests/requests/issues/2240>`_, `#2241 <https://github.com/requests/requests/issues/2241>`_)

**Documentation**

- Correct redirection introduction (`#2245 <https://github.com/requests/requests/pull/2245/>`_)
- Added example of how to send multiple files in one request. (`#2227 <https://github.com/requests/requests/pull/2227/>`_)
- Clarify how to pass a custom set of CAs (`#2248 <https://github.com/requests/requests/pull/2248/>`_)



2.4.1 (2014-09-09)
++++++++++++++++++

- Now has a "security" package extras set, ``$ pip install requests[security]``
- Requests will now use Certifi if it is available.
- Capture and re-raise urllib3 ProtocolError
- Bugfix for responses that attempt to redirect to themselves forever (wtf?).


2.4.0 (2014-08-29)
++++++++++++++++++

**Behavioral Changes**

- ``Connection: keep-alive`` header is now sent automatically.

**Improvements**

- Support for connect timeouts! Timeout now accepts a tuple (connect, read) which is used to set individual connect and read timeouts.
- Allow copying of PreparedRequests without headers/cookies.
- Updated bundled urllib3 version.
- Refactored settings loading from environment -- new `Session.merge_environment_settings`.
- Handle socket errors in iter_content.


2.3.0 (2014-05-16)
++++++++++++++++++

**API Changes**

- New ``Response`` property ``is_redirect``, which is true when the
  library could have processed this response as a redirection (whether
  or not it actually did).
- The ``timeout`` parameter now affects requests with both ``stream=True`` and
  ``stream=False`` equally.
- The change in v2.0.0 to mandate explicit proxy schemes has been reverted.
  Proxy schemes now default to ``http://``.
- The ``CaseInsensitiveDict`` used for HTTP headers now behaves like a normal
  dictionary when references as string or viewed in the interpreter.

**Bugfixes**

- No longer expose Authorization or Proxy-Authorization headers on redirect.
  Fix CVE-2014-1829 and CVE-2014-1830 respectively.
- Authorization is re-evaluated each redirect.
- On redirect, pass url as native strings.
- Fall-back to autodetected encoding for JSON when Unicode detection fails.
- Headers set to ``None`` on the ``Session`` are now correctly not sent.
- Correctly honor ``decode_unicode`` even if it wasn't used earlier in the same
  response.
- Stop advertising ``compress`` as a supported Content-Encoding.
- The ``Response.history`` parameter is now always a list.
- Many, many ``urllib3`` bugfixes.

2.2.1 (2014-01-23)
++++++++++++++++++

**Bugfixes**

- Fixes incorrect parsing of proxy credentials that contain a literal or encoded '#' character.
- Assorted urllib3 fixes.

2.2.0 (2014-01-09)
++++++++++++++++++

**API Changes**

- New exception: ``ContentDecodingError``. Raised instead of ``urllib3``
  ``DecodeError`` exceptions.

**Bugfixes**

- Avoid many many exceptions from the buggy implementation of ``proxy_bypass`` on OS X in Python 2.6.
- Avoid crashing when attempting to get authentication credentials from ~/.netrc when running as a user without a home directory.
- Use the correct pool size for pools of connections to proxies.
- Fix iteration of ``CookieJar`` objects.
- Ensure that cookies are persisted over redirect.
- Switch back to using chardet, since it has merged with charade.

2.1.0 (2013-12-05)
++++++++++++++++++

- Updated CA Bundle, of course.
- Cookies set on individual Requests through a ``Session`` (e.g. via ``Session.get()``) are no longer persisted to the ``Session``.
- Clean up connections when we hit problems during chunked upload, rather than leaking them.
- Return connections to the pool when a chunked upload is successful, rather than leaking it.
- Match the HTTPbis recommendation for HTTP 301 redirects.
- Prevent hanging when using streaming uploads and Digest Auth when a 401 is received.
- Values of headers set by Requests are now always the native string type.
- Fix previously broken SNI support.
- Fix accessing HTTP proxies using proxy authentication.
- Unencode HTTP Basic usernames and passwords extracted from URLs.
- Support for IP address ranges for no_proxy environment variable
- Parse headers correctly when users override the default ``Host:`` header.
- Avoid munging the URL in case of case-sensitive servers.
- Looser URL handling for non-HTTP/HTTPS urls.
- Accept unicode methods in Python 2.6 and 2.7.
- More resilient cookie handling.
- Make ``Response`` objects pickleable.
- Actually added MD5-sess to Digest Auth instead of pretending to like last time.
- Updated internal urllib3.
- Fixed @Lukasa's lack of taste.

2.0.1 (2013-10-24)
++++++++++++++++++

- Updated included CA Bundle with new mistrusts and automated process for the future
- Added MD5-sess to Digest Auth
- Accept per-file headers in multipart file POST messages.
- Fixed: Don't send the full URL on CONNECT messages.
- Fixed: Correctly lowercase a redirect scheme.
- Fixed: Cookies not persisted when set via functional API.
- Fixed: Translate urllib3 ProxyError into a requests ProxyError derived from ConnectionError.
- Updated internal urllib3 and chardet.

2.0.0 (2013-09-24)
++++++++++++++++++

**API Changes:**

- Keys in the Headers dictionary are now native strings on all Python versions,
  i.e. bytestrings on Python 2, unicode on Python 3.
- Proxy URLs now *must* have an explicit scheme. A ``MissingSchema`` exception
  will be raised if they don't.
- Timeouts now apply to read time if ``Stream=False``.
- ``RequestException`` is now a subclass of ``IOError``, not ``RuntimeError``.
- Added new method to ``PreparedRequest`` objects: ``PreparedRequest.copy()``.
- Added new method to ``Session`` objects: ``Session.update_request()``. This
  method updates a ``Request`` object with the data (e.g. cookies) stored on
  the ``Session``.
- Added new method to ``Session`` objects: ``Session.prepare_request()``. This
  method updates and prepares a ``Request`` object, and returns the
  corresponding ``PreparedRequest`` object.
- Added new method to ``HTTPAdapter`` objects: ``HTTPAdapter.proxy_headers()``.
  This should not be called directly, but improves the subclass interface.
- ``httplib.IncompleteRead`` exceptions caused by incorrect chunked encoding
  will now raise a Requests ``ChunkedEncodingError`` instead.
- Invalid percent-escape sequences now cause a Requests ``InvalidURL``
  exception to be raised.
- HTTP 208 no longer uses reason phrase ``"im_used"``. Correctly uses
  ``"already_reported"``.
- HTTP 226 reason added (``"im_used"``).

**Bugfixes:**

- Vastly improved proxy support, including the CONNECT verb. Special thanks to
  the many contributors who worked towards this improvement.
- Cookies are now properly managed when 401 authentication responses are
  received.
- Chunked encoding fixes.
- Support for mixed case schemes.
- Better handling of streaming downloads.
- Retrieve environment proxies from more locations.
- Minor cookies fixes.
- Improved redirect behaviour.
- Improved streaming behaviour, particularly for compressed data.
- Miscellaneous small Python 3 text encoding bugs.
- ``.netrc`` no longer overrides explicit auth.
- Cookies set by hooks are now correctly persisted on Sessions.
- Fix problem with cookies that specify port numbers in their host field.
- ``BytesIO`` can be used to perform streaming uploads.
- More generous parsing of the ``no_proxy`` environment variable.
- Non-string objects can be passed in data values alongside files.

1.2.3 (2013-05-25)
++++++++++++++++++

- Simple packaging fix


1.2.2 (2013-05-23)
++++++++++++++++++

- Simple packaging fix


1.2.1 (2013-05-20)
++++++++++++++++++

- 301 and 302 redirects now change the verb to GET for all verbs, not just
  POST, improving browser compatibility.
- Python 3.3.2 compatibility
- Always percent-encode location headers
- Fix connection adapter matching to be most-specific first
- new argument to the default connection adapter for passing a block argument
- prevent a KeyError when there's no link headers

1.2.0 (2013-03-31)
++++++++++++++++++

- Fixed cookies on sessions and on requests
- Significantly change how hooks are dispatched - hooks now receive all the
  arguments specified by the user when making a request so hooks can make a
  secondary request with the same parameters. This is especially necessary for
  authentication handler authors
- certifi support was removed
- Fixed bug where using OAuth 1 with body ``signature_type`` sent no data
- Major proxy work thanks to @Lukasa including parsing of proxy authentication
  from the proxy url
- Fix DigestAuth handling too many 401s
- Update vendored urllib3 to include SSL bug fixes
- Allow keyword arguments to be passed to ``json.loads()`` via the
  ``Response.json()`` method
- Don't send ``Content-Length`` header by default on ``GET`` or ``HEAD``
  requests
- Add ``elapsed`` attribute to ``Response`` objects to time how long a request
  took.
- Fix ``RequestsCookieJar``
- Sessions and Adapters are now picklable, i.e., can be used with the
  multiprocessing library
- Update charade to version 1.0.3

The change in how hooks are dispatched will likely cause a great deal of
issues.

1.1.0 (2013-01-10)
++++++++++++++++++

- CHUNKED REQUESTS
- Support for iterable response bodies
- Assume servers persist redirect params
- Allow explicit content types to be specified for file data
- Make merge_kwargs case-insensitive when looking up keys

1.0.3 (2012-12-18)
++++++++++++++++++

- Fix file upload encoding bug
- Fix cookie behavior

1.0.2 (2012-12-17)
++++++++++++++++++

- Proxy fix for HTTPAdapter.

1.0.1 (2012-12-17)
++++++++++++++++++

- Cert verification exception bug.
- Proxy fix for HTTPAdapter.

1.0.0 (2012-12-17)
++++++++++++++++++

- Massive Refactor and Simplification
- Switch to Apache 2.0 license
- Swappable Connection Adapters
- Mountable Connection Adapters
- Mutable ProcessedRequest chain
- /s/prefetch/stream
- Removal of all configuration
- Standard library logging
- Make Response.json() callable, not property.
- Usage of new charade project, which provides python 2 and 3 simultaneous chardet.
- Removal of all hooks except 'response'
- Removal of all authentication helpers (OAuth, Kerberos)

This is not a backwards compatible change.

0.14.2 (2012-10-27)
+++++++++++++++++++

- Improved mime-compatible JSON handling
- Proxy fixes
- Path hack fixes
- Case-Insensitive Content-Encoding headers
- Support for CJK parameters in form posts


0.14.1 (2012-10-01)
+++++++++++++++++++

- Python 3.3 Compatibility
- Simply default accept-encoding
- Bugfixes


0.14.0 (2012-09-02)
++++++++++++++++++++

- No more iter_content errors if already downloaded.

0.13.9 (2012-08-25)
+++++++++++++++++++

- Fix for OAuth + POSTs
- Remove exception eating from dispatch_hook
- General bugfixes

0.13.8 (2012-08-21)
+++++++++++++++++++

- Incredible Link header support :)

0.13.7 (2012-08-19)
+++++++++++++++++++

- Support for (key, value) lists everywhere.
- Digest Authentication improvements.
- Ensure proxy exclusions work properly.
- Clearer UnicodeError exceptions.
- Automatic casting of URLs to strings (fURL and such)
- Bugfixes.

0.13.6 (2012-08-06)
+++++++++++++++++++

- Long awaited fix for hanging connections!

0.13.5 (2012-07-27)
+++++++++++++++++++

- Packaging fix

0.13.4 (2012-07-27)
+++++++++++++++++++

- GSSAPI/Kerberos authentication!
- App Engine 2.7 Fixes!
- Fix leaking connections (from urllib3 update)
- OAuthlib path hack fix
- OAuthlib URL parameters fix.

0.13.3 (2012-07-12)
+++++++++++++++++++

- Use simplejson if available.
- Do not hide SSLErrors behind Timeouts.
- Fixed param handling with urls containing fragments.
- Significantly improved information in User Agent.
- client certificates are ignored when verify=False

0.13.2 (2012-06-28)
+++++++++++++++++++

- Zero dependencies (once again)!
- New: Response.reason
- Sign querystring parameters in OAuth 1.0
- Client certificates no longer ignored when verify=False
- Add openSUSE certificate support

0.13.1 (2012-06-07)
+++++++++++++++++++

- Allow passing a file or file-like object as data.
- Allow hooks to return responses that indicate errors.
- Fix Response.text and Response.json for body-less responses.

0.13.0 (2012-05-29)
+++++++++++++++++++

- Removal of Requests.async in favor of `grequests <https://github.com/kennethreitz/grequests>`_
- Allow disabling of cookie persistence.
- New implementation of safe_mode
- cookies.get now supports default argument
- Session cookies not saved when Session.request is called with return_response=False
- Env: no_proxy support.
- RequestsCookieJar improvements.
- Various bug fixes.

0.12.1 (2012-05-08)
+++++++++++++++++++

- New ``Response.json`` property.
- Ability to add string file uploads.
- Fix out-of-range issue with iter_lines.
- Fix iter_content default size.
- Fix POST redirects containing files.

0.12.0 (2012-05-02)
+++++++++++++++++++

- EXPERIMENTAL OAUTH SUPPORT!
- Proper CookieJar-backed cookies interface with awesome dict-like interface.
- Speed fix for non-iterated content chunks.
- Move ``pre_request`` to a more usable place.
- New ``pre_send`` hook.
- Lazily encode data, params, files.
- Load system Certificate Bundle if ``certify`` isn't available.
- Cleanups, fixes.

0.11.2 (2012-04-22)
+++++++++++++++++++

- Attempt to use the OS's certificate bundle if ``certifi`` isn't available.
- Infinite digest auth redirect fix.
- Multi-part file upload improvements.
- Fix decoding of invalid %encodings in URLs.
- If there is no content in a response don't throw an error the second time that content is attempted to be read.
- Upload data on redirects.

0.11.1 (2012-03-30)
+++++++++++++++++++

* POST redirects now break RFC to do what browsers do: Follow up with a GET.
* New ``strict_mode`` configuration to disable new redirect behavior.


0.11.0 (2012-03-14)
+++++++++++++++++++

* Private SSL Certificate support
* Remove select.poll from Gevent monkeypatching
* Remove redundant generator for chunked transfer encoding
* Fix: Response.ok raises Timeout Exception in safe_mode

0.10.8 (2012-03-09)
+++++++++++++++++++

* Generate chunked ValueError fix
* Proxy configuration by environment variables
* Simplification of iter_lines.
* New `trust_env` configuration for disabling system/environment hints.
* Suppress cookie errors.

0.10.7 (2012-03-07)
+++++++++++++++++++

* `encode_uri` = False

0.10.6 (2012-02-25)
+++++++++++++++++++

* Allow '=' in cookies.

0.10.5 (2012-02-25)
+++++++++++++++++++

* Response body with 0 content-length fix.
* New async.imap.
* Don't fail on netrc.


0.10.4 (2012-02-20)
+++++++++++++++++++

* Honor netrc.

0.10.3 (2012-02-20)
+++++++++++++++++++

* HEAD requests don't follow redirects anymore.
* raise_for_status() doesn't raise for 3xx anymore.
* Make Session objects picklable.
* ValueError for invalid schema URLs.

0.10.2 (2012-01-15)
+++++++++++++++++++

* Vastly improved URL quoting.
* Additional allowed cookie key values.
* Attempted fix for "Too many open files" Error
* Replace unicode errors on first pass, no need for second pass.
* Append '/' to bare-domain urls before query insertion.
* Exceptions now inherit from RuntimeError.
* Binary uploads + auth fix.
* Bugfixes.


0.10.1 (2012-01-23)
+++++++++++++++++++

* PYTHON 3 SUPPORT!
* Dropped 2.5 Support. (*Backwards Incompatible*)

0.10.0 (2012-01-21)
+++++++++++++++++++

* ``Response.content`` is now bytes-only. (*Backwards Incompatible*)
* New ``Response.text`` is unicode-only.
* If no ``Response.encoding`` is specified and ``chardet`` is available, ``Response.text`` will guess an encoding.
* Default to ISO-8859-1 (Western) encoding for "text" subtypes.
* Removal of `decode_unicode`. (*Backwards Incompatible*)
* New multiple-hooks system.
* New ``Response.register_hook`` for registering hooks within the pipeline.
* ``Response.url`` is now Unicode.

0.9.3 (2012-01-18)
++++++++++++++++++

* SSL verify=False bugfix (apparent on windows machines).

0.9.2 (2012-01-18)
++++++++++++++++++

* Asynchronous async.send method.
* Support for proper chunk streams with boundaries.
* session argument for Session classes.
* Print entire hook tracebacks, not just exception instance.
* Fix response.iter_lines from pending next line.
* Fix but in HTTP-digest auth w/ URI having query strings.
* Fix in Event Hooks section.
* Urllib3 update.


0.9.1 (2012-01-06)
++++++++++++++++++

* danger_mode for automatic Response.raise_for_status()
* Response.iter_lines refactor

0.9.0 (2011-12-28)
++++++++++++++++++

* verify ssl is default.


0.8.9 (2011-12-28)
++++++++++++++++++

* Packaging fix.


0.8.8 (2011-12-28)
++++++++++++++++++

* SSL CERT VERIFICATION!
* Release of Cerifi: Mozilla's cert list.
* New 'verify' argument for SSL requests.
* Urllib3 update.

0.8.7 (2011-12-24)
++++++++++++++++++

* iter_lines last-line truncation fix
* Force safe_mode for async requests
* Handle safe_mode exceptions more consistently
* Fix iteration on null responses in safe_mode

0.8.6 (2011-12-18)
++++++++++++++++++

* Socket timeout fixes.
* Proxy Authorization support.

0.8.5 (2011-12-14)
++++++++++++++++++

* Response.iter_lines!

0.8.4 (2011-12-11)
++++++++++++++++++

* Prefetch bugfix.
* Added license to installed version.

0.8.3 (2011-11-27)
++++++++++++++++++

* Converted auth system to use simpler callable objects.
* New session parameter to API methods.
* Display full URL while logging.

0.8.2 (2011-11-19)
++++++++++++++++++

* New Unicode decoding system, based on over-ridable `Response.encoding`.
* Proper URL slash-quote handling.
* Cookies with ``[``, ``]``, and ``_`` allowed.

0.8.1 (2011-11-15)
++++++++++++++++++

* URL Request path fix
* Proxy fix.
* Timeouts fix.

0.8.0 (2011-11-13)
++++++++++++++++++

* Keep-alive support!
* Complete removal of Urllib2
* Complete removal of Poster
* Complete removal of CookieJars
* New ConnectionError raising
* Safe_mode for error catching
* prefetch parameter for request methods
* OPTION method
* Async pool size throttling
* File uploads send real names
* Vendored in urllib3

0.7.6 (2011-11-07)
++++++++++++++++++

* Digest authentication bugfix (attach query data to path)

0.7.5 (2011-11-04)
++++++++++++++++++

* Response.content = None if there was an invalid response.
* Redirection auth handling.

0.7.4 (2011-10-26)
++++++++++++++++++

* Session Hooks fix.

0.7.3 (2011-10-23)
++++++++++++++++++

* Digest Auth fix.


0.7.2 (2011-10-23)
++++++++++++++++++

* PATCH Fix.


0.7.1 (2011-10-23)
++++++++++++++++++

* Move away from urllib2 authentication handling.
* Fully Remove AuthManager, AuthObject, &c.
* New tuple-based auth system with handler callbacks.


0.7.0 (2011-10-22)
++++++++++++++++++

* Sessions are now the primary interface.
* Deprecated InvalidMethodException.
* PATCH fix.
* New config system (no more global settings).


0.6.6 (2011-10-19)
++++++++++++++++++

* Session parameter bugfix (params merging).


0.6.5 (2011-10-18)
++++++++++++++++++

* Offline (fast) test suite.
* Session dictionary argument merging.


0.6.4 (2011-10-13)
++++++++++++++++++

* Automatic decoding of unicode, based on HTTP Headers.
* New ``decode_unicode`` setting.
* Removal of ``r.read/close`` methods.
* New ``r.faw`` interface for advanced response usage.*
* Automatic expansion of parameterized headers.


0.6.3 (2011-10-13)
++++++++++++++++++

* Beautiful ``requests.async`` module, for making async requests w/ gevent.


0.6.2 (2011-10-09)
++++++++++++++++++

* GET/HEAD obeys allow_redirects=False.


0.6.1 (2011-08-20)
++++++++++++++++++

* Enhanced status codes experience ``\o/``
* Set a maximum number of redirects (``settings.max_redirects``)
* Full Unicode URL support
* Support for protocol-less redirects.
* Allow for arbitrary request types.
* Bugfixes


0.6.0 (2011-08-17)
++++++++++++++++++

* New callback hook system
* New persistent sessions object and context manager
* Transparent Dict-cookie handling
* Status code reference object
* Removed Response.cached
* Added Response.request
* All args are kwargs
* Relative redirect support
* HTTPError handling improvements
* Improved https testing
* Bugfixes


0.5.1 (2011-07-23)
++++++++++++++++++

* International Domain Name Support!
* Access headers without fetching entire body (``read()``)
* Use lists as dicts for parameters
* Add Forced Basic Authentication
* Forced Basic is default authentication type
* ``python-requests.org`` default User-Agent header
* CaseInsensitiveDict lower-case caching
* Response.history bugfix


0.5.0 (2011-06-21)
++++++++++++++++++

* PATCH Support
* Support for Proxies
* HTTPBin Test Suite
* Redirect Fixes
* settings.verbose stream writing
* Querystrings for all methods
* URLErrors (Connection Refused, Timeout, Invalid URLs) are treated as explicitly raised
  ``r.requests.get('hwe://blah'); r.raise_for_status()``


0.4.1 (2011-05-22)
++++++++++++++++++

* Improved Redirection Handling
* New 'allow_redirects' param for following non-GET/HEAD Redirects
* Settings module refactoring


0.4.0 (2011-05-15)
++++++++++++++++++

* Response.history: list of redirected responses
* Case-Insensitive Header Dictionaries!
* Unicode URLs


0.3.4 (2011-05-14)
++++++++++++++++++

* Urllib2 HTTPAuthentication Recursion fix (Basic/Digest)
* Internal Refactor
* Bytes data upload Bugfix



0.3.3 (2011-05-12)
++++++++++++++++++

* Request timeouts
* Unicode url-encoded data
* Settings context manager and module


0.3.2 (2011-04-15)
++++++++++++++++++

* Automatic Decompression of GZip Encoded Content
* AutoAuth Support for Tupled HTTP Auth


0.3.1 (2011-04-01)
++++++++++++++++++

* Cookie Changes
* Response.read()
* Poster fix


0.3.0 (2011-02-25)
++++++++++++++++++

* Automatic Authentication API Change
* Smarter Query URL Parameterization
* Allow file uploads and POST data together
* New Authentication Manager System
    - Simpler Basic HTTP System
    - Supports all build-in urllib2 Auths
    - Allows for custom Auth Handlers


0.2.4 (2011-02-19)
++++++++++++++++++

* Python 2.5 Support
* PyPy-c v1.4 Support
* Auto-Authentication tests
* Improved Request object constructor

0.2.3 (2011-02-15)
++++++++++++++++++

* New HTTPHandling Methods
    - Response.__nonzero__ (false if bad HTTP Status)
    - Response.ok (True if expected HTTP Status)
    - Response.error (Logged HTTPError if bad HTTP Status)
    - Response.raise_for_status() (Raises stored HTTPError)


0.2.2 (2011-02-14)
++++++++++++++++++

* Still handles request in the event of an HTTPError. (Issue #2)
* Eventlet and Gevent Monkeypatch support.
* Cookie Support (Issue #1)


0.2.1 (2011-02-14)
++++++++++++++++++

* Added file attribute to POST and PUT requests for multipart-encode file uploads.
* Added Request.url attribute for context and redirects


0.2.0 (2011-02-14)
++++++++++++++++++

* Birth!


0.0.1 (2011-02-13)
++++++++++++++++++

* Frustration
* Conception


Pure-Python implementation of ASN.1 types and DER/BER/CER codecs (X.208)


The humble, but powerful, URL runs everything around us. Chances
are you've used several just to read this text.

Hyperlink is a featureful, pure-Python implementation of the URL, with
an emphasis on correctness. BSD licensed.

See the docs at http://hyperlink.readthedocs.io.


UNKNOWN


===================================
cssselect: CSS Selectors for Python
===================================

.. image:: https://img.shields.io/pypi/v/cssselect.svg
   :target: https://pypi.python.org/pypi/cssselect
   :alt: PyPI Version

.. image:: https://img.shields.io/pypi/pyversions/cssselect.svg
   :target: https://pypi.python.org/pypi/cssselect
   :alt: Supported Python Versions

.. image:: https://img.shields.io/travis/scrapy/cssselect/master.svg
   :target: https://travis-ci.org/scrapy/cssselect
   :alt: Build Status

.. image:: https://img.shields.io/codecov/c/github/scrapy/cssselect/master.svg
   :target: https://codecov.io/github/scrapy/cssselect?branch=master
   :alt: Coverage report

*cssselect* parses `CSS3 Selectors`_ and translate them to `XPath 1.0`_
expressions. Such expressions can be used in lxml_ or another XPath engine
to find the matching elements in an XML or HTML document.

This module used to live inside of lxml as ``lxml.cssselect`` before it was
extracted as a stand-alone project.

.. _CSS3 Selectors: https://www.w3.org/TR/css3-selectors/
.. _XPath 1.0: https://www.w3.org/TR/xpath/
.. _lxml: http://lxml.de/


Quick facts:

* Free software: BSD licensed
* Compatible with Python 2.7 and 3.4+
* Latest documentation `on Read the Docs <https://cssselect.readthedocs.io/>`_
* Source, issues and pull requests `on GitHub
  <https://github.com/scrapy/cssselect>`_
* Releases `on PyPI <http://pypi.python.org/pypi/cssselect>`_
* Install with ``pip install cssselect``


A collection of ASN.1 modules expressed in form of pyasn1 classes. Includes protocols PDUs definition (SNMP, LDAP etc.) and various data structures (X.509, PKCS etc.).



CFFI
====

Foreign Function Interface for Python calling C code.
Please see the `Documentation <http://cffi.readthedocs.org/>`_.

Contact
-------

`Mailing list <https://groups.google.com/forum/#!forum/python-cffi>`_


.. image:: https://img.shields.io/pypi/v/backports.functools_lru_cache.svg
   :target: https://pypi.org/project/backports.functools_lru_cache

.. image:: https://img.shields.io/pypi/pyversions/backports.functools_lru_cache.svg

.. image:: https://img.shields.io/travis/jaraco/backports.functools_lru_cache/master.svg
   :target: https://travis-ci.org/jaraco/backports.functools_lru_cache

.. .. image:: https://readthedocs.org/projects/backportsfunctools_lru_cache/badge/?version=latest
..    :target: https://backportsfunctools_lru_cache.readthedocs.io/en/latest/?badge=latest

Backport of functools.lru_cache from Python 3.3 as published at `ActiveState
<http://code.activestate.com/recipes/578078/>`_.

Usage
=====

Consider using this technique for importing the 'lru_cache' function::

    try:
        from functools import lru_cache
    except ImportError:
        from backports.functools_lru_cache import lru_cache


=============================
Service Identity Verification
=============================

.. image:: https://readthedocs.org/projects/service-identity/badge/?version=stable
   :target: https://service-identity.readthedocs.io/en/stable/?badge=stable
   :alt: Documentation Status

.. image:: https://travis-ci.org/pyca/service_identity.svg?branch=master
   :target: https://travis-ci.org/pyca/service_identity
   :alt: CI status

.. image:: https://codecov.io/github/pyca/service_identity/branch/master/graph/badge.svg
   :target: https://codecov.io/github/pyca/service_identity
   :alt: Test Coverage

.. image:: https://www.irccloud.com/invite-svg?channel=%23cryptography-dev&amp;hostname=irc.freenode.net&amp;port=6697&amp;ssl=1
    :target: https://www.irccloud.com/invite?channel=%23cryptography-dev&amp;hostname=irc.freenode.net&amp;port=6697&amp;ssl=1

.. begin

Use this package if:

- you use pyOpenSSL_ and don’t want to be MITM_\ ed or
- if you want to verify that a `PyCA cryptography`_ certificate is valid for a certain hostname.

``service_identity`` aspires to give you all the tools you need for verifying whether a certificate is valid for the intended purposes.

In the simplest case, this means *host name verification*.
However, ``service_identity`` implements `RFC 6125`_ fully and plans to add other relevant RFCs too.

``service_identity``\ ’s documentation lives at `Read the Docs <https://service-identity.readthedocs.io/>`_, the code on `GitHub <https://github.com/pyca/service_identity>`_.


.. _Twisted: https://twistedmatrix.com/
.. _pyOpenSSL: https://pypi.python.org/pypi/pyOpenSSL/
.. _MITM: https://en.wikipedia.org/wiki/Man-in-the-middle_attack
.. _RFC 6125: http://www.rfc-editor.org/info/rfc6125
.. _PyCA cryptography: https://cryptography.io/


Release Information
===================

17.0.0 (2017-05-23)
-------------------

Deprecations:
^^^^^^^^^^^^^

- Since Chrome 58 and Firefox 48 both don't accept certificates that contain only a Common Name, its usage is hereby deprecated in ``service_identity`` too.
  We have been raising a warning since 16.0.0 and the support will be removed in mid-2018 for good.


Changes:
^^^^^^^^

- When ``service_identity.SubjectAltNameWarning`` is raised, the Common Name of the certificate is now included in the warning message.
  `#17 <https://github.com/pyca/service_identity/pull/17>`_
- Added ``cryptography.x509`` backend for verifying certificates.
  `#18 <https://github.com/pyca/service_identity/pull/18>`_
- Wildcards (``*``) are now only allowed if they are the leftmost label in a certificate.
  This is common practice by all major browsers.
  `#19 <https://github.com/pyca/service_identity/pull/19>`_

`Full changelog <https://service-identity.readthedocs.io/en/stable/changelog.html>`_.

Authors
=======

``service_identity`` is written and maintained by `Hynek Schlawack <https://hynek.me/>`_.

The development is kindly supported by `Variomedia AG <https://www.variomedia.de/>`_.

Other contributors can be found in `GitHub's overview <https://github.com/pyca/service_identity/graphs/contributors>`_.


urllib3
=======

.. image:: https://travis-ci.org/urllib3/urllib3.svg?branch=master
        :alt: Build status on Travis
        :target: https://travis-ci.org/urllib3/urllib3

.. image:: https://img.shields.io/appveyor/ci/urllib3/urllib3/master.svg
        :alt: Build status on AppVeyor
        :target: https://ci.appveyor.com/project/urllib3/urllib3

.. image:: https://readthedocs.org/projects/urllib3/badge/?version=latest
        :alt: Documentation Status
        :target: https://urllib3.readthedocs.io/en/latest/

.. image:: https://img.shields.io/codecov/c/github/urllib3/urllib3.svg
        :alt: Coverage Status
        :target: https://codecov.io/gh/urllib3/urllib3

.. image:: https://img.shields.io/pypi/v/urllib3.svg?maxAge=86400
        :alt: PyPI version
        :target: https://pypi.org/project/urllib3/

.. image:: https://www.bountysource.com/badge/tracker?tracker_id=192525
        :alt: Bountysource
        :target: https://www.bountysource.com/trackers/192525-urllib3?utm_source=192525&utm_medium=shield&utm_campaign=TRACKER_BADGE

.. image:: https://badges.gitter.im/python-urllib3/Lobby.svg
        :alt: Gitter
        :target: https://gitter.im/python-urllib3/Lobby?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge

urllib3 is a powerful, *sanity-friendly* HTTP client for Python. Much of the
Python ecosystem already uses urllib3 and you should too.
urllib3 brings many critical features that are missing from the Python
standard libraries:

- Thread safety.
- Connection pooling.
- Client-side SSL/TLS verification.
- File uploads with multipart encoding.
- Helpers for retrying requests and dealing with HTTP redirects.
- Support for gzip and deflate encoding.
- Proxy support for HTTP and SOCKS.
- 100% test coverage.

urllib3 is powerful and easy to use::

    >>> import urllib3
    >>> http = urllib3.PoolManager()
    >>> r = http.request('GET', 'http://httpbin.org/robots.txt')
    >>> r.status
    200
    >>> r.data
    'User-agent: *\nDisallow: /deny\n'


Installing
----------

urllib3 can be installed with `pip <https://pip.pypa.io>`_::

    $ pip install urllib3

Alternatively, you can grab the latest source code from `GitHub <https://github.com/urllib3/urllib3>`_::

    $ git clone git://github.com/urllib3/urllib3.git
    $ python setup.py install


Documentation
-------------

urllib3 has usage and reference documentation at `urllib3.readthedocs.io <https://urllib3.readthedocs.io>`_.


Contributing
------------

urllib3 happily accepts contributions. Please see our
`contributing documentation <https://urllib3.readthedocs.io/en/latest/contributing.html>`_
for some tips on getting started.


Maintainers
-----------

- `@theacodes <https://github.com/theacodes>`_ (Thea Flowers)
- `@SethMichaelLarson <https://github.com/SethMichaelLarson>`_ (Seth M. Larson)
- `@haikuginger <https://github.com/haikuginger>`_ (Jesse Shapiro)
- `@lukasa <https://github.com/lukasa>`_ (Cory Benfield)
- `@sigmavirus24 <https://github.com/sigmavirus24>`_ (Ian Cordasco)
- `@shazow <https://github.com/shazow>`_ (Andrey Petrov)

👋


Sponsorship
-----------

If your company benefits from this library, please consider `sponsoring its
development <https://urllib3.readthedocs.io/en/latest/contributing.html#sponsorship>`_.

Sponsors include:

- Google Cloud Platform (2018-present), sponsors `@theacodes <https://github.com/theacodes>`_'s work on an ongoing basis
- Abbott (2018-present), sponsors `@SethMichaelLarson <https://github.com/SethMichaelLarson>`_'s work on an ongoing basis
- Akamai (2017-present), sponsors `@haikuginger <https://github.com/haikuginger>`_'s work on an ongoing basis
- Hewlett Packard Enterprise (2016-2017), sponsored `@Lukasa’s <https://github.com/Lukasa>`_ work on urllib3


Changes
=======

1.23 (2018-06-04)
-----------------

* Allow providing a list of headers to strip from requests when redirecting
  to a different host. Defaults to the ``Authorization`` header. Different
  headers can be set via ``Retry.remove_headers_on_redirect``. (Issue #1316)

* Fix ``util.selectors._fileobj_to_fd`` to accept ``long`` (Issue #1247).

* Dropped Python 3.3 support. (Pull #1242)

* Put the connection back in the pool when calling stream() or read_chunked() on
  a chunked HEAD response. (Issue #1234)

* Fixed pyOpenSSL-specific ssl client authentication issue when clients
  attempted to auth via certificate + chain (Issue #1060)

* Add the port to the connectionpool connect print (Pull #1251)

* Don't use the ``uuid`` module to create multipart data boundaries. (Pull #1380)

* ``read_chunked()`` on a closed response returns no chunks. (Issue #1088)

* Add Python 2.6 support to ``contrib.securetransport`` (Pull #1359)

* Added support for auth info in url for SOCKS proxy (Pull #1363)


1.22 (2017-07-20)
-----------------

* Fixed missing brackets in ``HTTP CONNECT`` when connecting to IPv6 address via
  IPv6 proxy. (Issue #1222)

* Made the connection pool retry on ``SSLError``.  The original ``SSLError``
  is available on ``MaxRetryError.reason``. (Issue #1112)

* Drain and release connection before recursing on retry/redirect.  Fixes
  deadlocks with a blocking connectionpool. (Issue #1167)

* Fixed compatibility for cookiejar. (Issue #1229)

* pyopenssl: Use vendored version of ``six``. (Issue #1231)


1.21.1 (2017-05-02)
-------------------

* Fixed SecureTransport issue that would cause long delays in response body
  delivery. (Pull #1154)

* Fixed regression in 1.21 that threw exceptions when users passed the
  ``socket_options`` flag to the ``PoolManager``.  (Issue #1165)

* Fixed regression in 1.21 that threw exceptions when users passed the
  ``assert_hostname`` or ``assert_fingerprint`` flag to the ``PoolManager``.
  (Pull #1157)


1.21 (2017-04-25)
-----------------

* Improved performance of certain selector system calls on Python 3.5 and
  later. (Pull #1095)

* Resolved issue where the PyOpenSSL backend would not wrap SysCallError
  exceptions appropriately when sending data. (Pull #1125)

* Selectors now detects a monkey-patched select module after import for modules
  that patch the select module like eventlet, greenlet. (Pull #1128)

* Reduced memory consumption when streaming zlib-compressed responses
  (as opposed to raw deflate streams). (Pull #1129)

* Connection pools now use the entire request context when constructing the
  pool key. (Pull #1016)

* ``PoolManager.connection_from_*`` methods now accept a new keyword argument,
  ``pool_kwargs``, which are merged with the existing ``connection_pool_kw``.
  (Pull #1016)

* Add retry counter for ``status_forcelist``. (Issue #1147)

* Added ``contrib`` module for using SecureTransport on macOS:
  ``urllib3.contrib.securetransport``.  (Pull #1122)

* urllib3 now only normalizes the case of ``http://`` and ``https://`` schemes:
  for schemes it does not recognise, it assumes they are case-sensitive and
  leaves them unchanged.
  (Issue #1080)


1.20 (2017-01-19)
-----------------

* Added support for waiting for I/O using selectors other than select,
  improving urllib3's behaviour with large numbers of concurrent connections.
  (Pull #1001)

* Updated the date for the system clock check. (Issue #1005)

* ConnectionPools now correctly consider hostnames to be case-insensitive.
  (Issue #1032)

* Outdated versions of PyOpenSSL now cause the PyOpenSSL contrib module
  to fail when it is injected, rather than at first use. (Pull #1063)

* Outdated versions of cryptography now cause the PyOpenSSL contrib module
  to fail when it is injected, rather than at first use. (Issue #1044)

* Automatically attempt to rewind a file-like body object when a request is
  retried or redirected. (Pull #1039)

* Fix some bugs that occur when modules incautiously patch the queue module.
  (Pull #1061)

* Prevent retries from occurring on read timeouts for which the request method
  was not in the method whitelist. (Issue #1059)

* Changed the PyOpenSSL contrib module to lazily load idna to avoid
  unnecessarily bloating the memory of programs that don't need it. (Pull
  #1076)

* Add support for IPv6 literals with zone identifiers. (Pull #1013)

* Added support for socks5h:// and socks4a:// schemes when working with SOCKS
  proxies, and controlled remote DNS appropriately. (Issue #1035)


1.19.1 (2016-11-16)
-------------------

* Fixed AppEngine import that didn't function on Python 3.5. (Pull #1025)


1.19 (2016-11-03)
-----------------

* urllib3 now respects Retry-After headers on 413, 429, and 503 responses when
  using the default retry logic. (Pull #955)

* Remove markers from setup.py to assist ancient setuptools versions. (Issue
  #986)

* Disallow superscripts and other integerish things in URL ports. (Issue #989)

* Allow urllib3's HTTPResponse.stream() method to continue to work with
  non-httplib underlying FPs. (Pull #990)

* Empty filenames in multipart headers are now emitted as such, rather than
  being suppressed. (Issue #1015)

* Prefer user-supplied Host headers on chunked uploads. (Issue #1009)


1.18.1 (2016-10-27)
-------------------

* CVE-2016-9015. Users who are using urllib3 version 1.17 or 1.18 along with
  PyOpenSSL injection and OpenSSL 1.1.0 *must* upgrade to this version. This
  release fixes a vulnerability whereby urllib3 in the above configuration
  would silently fail to validate TLS certificates due to erroneously setting
  invalid flags in OpenSSL's ``SSL_CTX_set_verify`` function. These erroneous
  flags do not cause a problem in OpenSSL versions before 1.1.0, which
  interprets the presence of any flag as requesting certificate validation.

  There is no PR for this patch, as it was prepared for simultaneous disclosure
  and release. The master branch received the same fix in PR #1010.


1.18 (2016-09-26)
-----------------

* Fixed incorrect message for IncompleteRead exception. (PR #973)

* Accept ``iPAddress`` subject alternative name fields in TLS certificates.
  (Issue #258)

* Fixed consistency of ``HTTPResponse.closed`` between Python 2 and 3.
  (Issue #977)

* Fixed handling of wildcard certificates when using PyOpenSSL. (Issue #979)


1.17 (2016-09-06)
-----------------

* Accept ``SSLContext`` objects for use in SSL/TLS negotiation. (Issue #835)

* ConnectionPool debug log now includes scheme, host, and port. (Issue #897)

* Substantially refactored documentation. (Issue #887)

* Used URLFetch default timeout on AppEngine, rather than hardcoding our own.
  (Issue #858)

* Normalize the scheme and host in the URL parser (Issue #833)

* ``HTTPResponse`` contains the last ``Retry`` object, which now also
  contains retries history. (Issue #848)

* Timeout can no longer be set as boolean, and must be greater than zero.
  (PR #924)

* Removed pyasn1 and ndg-httpsclient from dependencies used for PyOpenSSL. We
  now use cryptography and idna, both of which are already dependencies of
  PyOpenSSL. (PR #930)

* Fixed infinite loop in ``stream`` when amt=None. (Issue #928)

* Try to use the operating system's certificates when we are using an
  ``SSLContext``. (PR #941)

* Updated cipher suite list to allow ChaCha20+Poly1305. AES-GCM is preferred to
  ChaCha20, but ChaCha20 is then preferred to everything else. (PR #947)

* Updated cipher suite list to remove 3DES-based cipher suites. (PR #958)

* Removed the cipher suite fallback to allow HIGH ciphers. (PR #958)

* Implemented ``length_remaining`` to determine remaining content
  to be read. (PR #949)

* Implemented ``enforce_content_length`` to enable exceptions when
  incomplete data chunks are received. (PR #949)

* Dropped connection start, dropped connection reset, redirect, forced retry,
  and new HTTPS connection log levels to DEBUG, from INFO. (PR #967)


1.16 (2016-06-11)
-----------------

* Disable IPv6 DNS when IPv6 connections are not possible. (Issue #840)

* Provide ``key_fn_by_scheme`` pool keying mechanism that can be
  overridden. (Issue #830)

* Normalize scheme and host to lowercase for pool keys, and include
  ``source_address``. (Issue #830)

* Cleaner exception chain in Python 3 for ``_make_request``.
  (Issue #861)

* Fixed installing ``urllib3[socks]`` extra. (Issue #864)

* Fixed signature of ``ConnectionPool.close`` so it can actually safely be
  called by subclasses. (Issue #873)

* Retain ``release_conn`` state across retries. (Issues #651, #866)

* Add customizable ``HTTPConnectionPool.ResponseCls``, which defaults to
  ``HTTPResponse`` but can be replaced with a subclass. (Issue #879)


1.15.1 (2016-04-11)
-------------------

* Fix packaging to include backports module. (Issue #841)


1.15 (2016-04-06)
-----------------

* Added Retry(raise_on_status=False). (Issue #720)

* Always use setuptools, no more distutils fallback. (Issue #785)

* Dropped support for Python 3.2. (Issue #786)

* Chunked transfer encoding when requesting with ``chunked=True``.
  (Issue #790)

* Fixed regression with IPv6 port parsing. (Issue #801)

* Append SNIMissingWarning messages to allow users to specify it in
  the PYTHONWARNINGS environment variable. (Issue #816)

* Handle unicode headers in Py2. (Issue #818)

* Log certificate when there is a hostname mismatch. (Issue #820)

* Preserve order of request/response headers. (Issue #821)


1.14 (2015-12-29)
-----------------

* contrib: SOCKS proxy support! (Issue #762)

* Fixed AppEngine handling of transfer-encoding header and bug
  in Timeout defaults checking. (Issue #763)


1.13.1 (2015-12-18)
-------------------

* Fixed regression in IPv6 + SSL for match_hostname. (Issue #761)


1.13 (2015-12-14)
-----------------

* Fixed ``pip install urllib3[secure]`` on modern pip. (Issue #706)

* pyopenssl: Fixed SSL3_WRITE_PENDING error. (Issue #717)

* pyopenssl: Support for TLSv1.1 and TLSv1.2. (Issue #696)

* Close connections more defensively on exception. (Issue #734)

* Adjusted ``read_chunked`` to handle gzipped, chunk-encoded bodies without
  repeatedly flushing the decoder, to function better on Jython. (Issue #743)

* Accept ``ca_cert_dir`` for SSL-related PoolManager configuration. (Issue #758)


1.12 (2015-09-03)
-----------------

* Rely on ``six`` for importing ``httplib`` to work around
  conflicts with other Python 3 shims. (Issue #688)

* Add support for directories of certificate authorities, as supported by
  OpenSSL. (Issue #701)

* New exception: ``NewConnectionError``, raised when we fail to establish
  a new connection, usually ``ECONNREFUSED`` socket error.


1.11 (2015-07-21)
-----------------

* When ``ca_certs`` is given, ``cert_reqs`` defaults to
  ``'CERT_REQUIRED'``. (Issue #650)

* ``pip install urllib3[secure]`` will install Certifi and
  PyOpenSSL as dependencies. (Issue #678)

* Made ``HTTPHeaderDict`` usable as a ``headers`` input value
  (Issues #632, #679)

* Added `urllib3.contrib.appengine <https://urllib3.readthedocs.io/en/latest/contrib.html#google-app-engine>`_
  which has an ``AppEngineManager`` for using ``URLFetch`` in a
  Google AppEngine environment. (Issue #664)

* Dev: Added test suite for AppEngine. (Issue #631)

* Fix performance regression when using PyOpenSSL. (Issue #626)

* Passing incorrect scheme (e.g. ``foo://``) will raise
  ``ValueError`` instead of ``AssertionError`` (backwards
  compatible for now, but please migrate). (Issue #640)

* Fix pools not getting replenished when an error occurs during a
  request using ``release_conn=False``. (Issue #644)

* Fix pool-default headers not applying for url-encoded requests
  like GET. (Issue #657)

* log.warning in Python 3 when headers are skipped due to parsing
  errors. (Issue #642)

* Close and discard connections if an error occurs during read.
  (Issue #660)

* Fix host parsing for IPv6 proxies. (Issue #668)

* Separate warning type SubjectAltNameWarning, now issued once
  per host. (Issue #671)

* Fix ``httplib.IncompleteRead`` not getting converted to
  ``ProtocolError`` when using ``HTTPResponse.stream()``
  (Issue #674)

1.10.4 (2015-05-03)
-------------------

* Migrate tests to Tornado 4. (Issue #594)

* Append default warning configuration rather than overwrite.
  (Issue #603)

* Fix streaming decoding regression. (Issue #595)

* Fix chunked requests losing state across keep-alive connections.
  (Issue #599)

* Fix hanging when chunked HEAD response has no body. (Issue #605)


1.10.3 (2015-04-21)
-------------------

* Emit ``InsecurePlatformWarning`` when SSLContext object is missing.
  (Issue #558)

* Fix regression of duplicate header keys being discarded.
  (Issue #563)

* ``Response.stream()`` returns a generator for chunked responses.
  (Issue #560)

* Set upper-bound timeout when waiting for a socket in PyOpenSSL.
  (Issue #585)

* Work on platforms without `ssl` module for plain HTTP requests.
  (Issue #587)

* Stop relying on the stdlib's default cipher list. (Issue #588)


1.10.2 (2015-02-25)
-------------------

* Fix file descriptor leakage on retries. (Issue #548)

* Removed RC4 from default cipher list. (Issue #551)

* Header performance improvements. (Issue #544)

* Fix PoolManager not obeying redirect retry settings. (Issue #553)


1.10.1 (2015-02-10)
-------------------

* Pools can be used as context managers. (Issue #545)

* Don't re-use connections which experienced an SSLError. (Issue #529)

* Don't fail when gzip decoding an empty stream. (Issue #535)

* Add sha256 support for fingerprint verification. (Issue #540)

* Fixed handling of header values containing commas. (Issue #533)


1.10 (2014-12-14)
-----------------

* Disabled SSLv3. (Issue #473)

* Add ``Url.url`` property to return the composed url string. (Issue #394)

* Fixed PyOpenSSL + gevent ``WantWriteError``. (Issue #412)

* ``MaxRetryError.reason`` will always be an exception, not string.
  (Issue #481)

* Fixed SSL-related timeouts not being detected as timeouts. (Issue #492)

* Py3: Use ``ssl.create_default_context()`` when available. (Issue #473)

* Emit ``InsecureRequestWarning`` for *every* insecure HTTPS request.
  (Issue #496)

* Emit ``SecurityWarning`` when certificate has no ``subjectAltName``.
  (Issue #499)

* Close and discard sockets which experienced SSL-related errors.
  (Issue #501)

* Handle ``body`` param in ``.request(...)``. (Issue #513)

* Respect timeout with HTTPS proxy. (Issue #505)

* PyOpenSSL: Handle ZeroReturnError exception. (Issue #520)


1.9.1 (2014-09-13)
------------------

* Apply socket arguments before binding. (Issue #427)

* More careful checks if fp-like object is closed. (Issue #435)

* Fixed packaging issues of some development-related files not
  getting included. (Issue #440)

* Allow performing *only* fingerprint verification. (Issue #444)

* Emit ``SecurityWarning`` if system clock is waaay off. (Issue #445)

* Fixed PyOpenSSL compatibility with PyPy. (Issue #450)

* Fixed ``BrokenPipeError`` and ``ConnectionError`` handling in Py3.
  (Issue #443)



1.9 (2014-07-04)
----------------

* Shuffled around development-related files. If you're maintaining a distro
  package of urllib3, you may need to tweak things. (Issue #415)

* Unverified HTTPS requests will trigger a warning on the first request. See
  our new `security documentation
  <https://urllib3.readthedocs.io/en/latest/security.html>`_ for details.
  (Issue #426)

* New retry logic and ``urllib3.util.retry.Retry`` configuration object.
  (Issue #326)

* All raised exceptions should now wrapped in a
  ``urllib3.exceptions.HTTPException``-extending exception. (Issue #326)

* All errors during a retry-enabled request should be wrapped in
  ``urllib3.exceptions.MaxRetryError``, including timeout-related exceptions
  which were previously exempt. Underlying error is accessible from the
  ``.reason`` property. (Issue #326)

* ``urllib3.exceptions.ConnectionError`` renamed to
  ``urllib3.exceptions.ProtocolError``. (Issue #326)

* Errors during response read (such as IncompleteRead) are now wrapped in
  ``urllib3.exceptions.ProtocolError``. (Issue #418)

* Requesting an empty host will raise ``urllib3.exceptions.LocationValueError``.
  (Issue #417)

* Catch read timeouts over SSL connections as
  ``urllib3.exceptions.ReadTimeoutError``. (Issue #419)

* Apply socket arguments before connecting. (Issue #427)


1.8.3 (2014-06-23)
------------------

* Fix TLS verification when using a proxy in Python 3.4.1. (Issue #385)

* Add ``disable_cache`` option to ``urllib3.util.make_headers``. (Issue #393)

* Wrap ``socket.timeout`` exception with
  ``urllib3.exceptions.ReadTimeoutError``. (Issue #399)

* Fixed proxy-related bug where connections were being reused incorrectly.
  (Issues #366, #369)

* Added ``socket_options`` keyword parameter which allows to define
  ``setsockopt`` configuration of new sockets. (Issue #397)

* Removed ``HTTPConnection.tcp_nodelay`` in favor of
  ``HTTPConnection.default_socket_options``. (Issue #397)

* Fixed ``TypeError`` bug in Python 2.6.4. (Issue #411)


1.8.2 (2014-04-17)
------------------

* Fix ``urllib3.util`` not being included in the package.


1.8.1 (2014-04-17)
------------------

* Fix AppEngine bug of HTTPS requests going out as HTTP. (Issue #356)

* Don't install ``dummyserver`` into ``site-packages`` as it's only needed
  for the test suite. (Issue #362)

* Added support for specifying ``source_address``. (Issue #352)


1.8 (2014-03-04)
----------------

* Improved url parsing in ``urllib3.util.parse_url`` (properly parse '@' in
  username, and blank ports like 'hostname:').

* New ``urllib3.connection`` module which contains all the HTTPConnection
  objects.

* Several ``urllib3.util.Timeout``-related fixes. Also changed constructor
  signature to a more sensible order. [Backwards incompatible]
  (Issues #252, #262, #263)

* Use ``backports.ssl_match_hostname`` if it's installed. (Issue #274)

* Added ``.tell()`` method to ``urllib3.response.HTTPResponse`` which
  returns the number of bytes read so far. (Issue #277)

* Support for platforms without threading. (Issue #289)

* Expand default-port comparison in ``HTTPConnectionPool.is_same_host``
  to allow a pool with no specified port to be considered equal to to an
  HTTP/HTTPS url with port 80/443 explicitly provided. (Issue #305)

* Improved default SSL/TLS settings to avoid vulnerabilities.
  (Issue #309)

* Fixed ``urllib3.poolmanager.ProxyManager`` not retrying on connect errors.
  (Issue #310)

* Disable Nagle's Algorithm on the socket for non-proxies. A subset of requests
  will send the entire HTTP request ~200 milliseconds faster; however, some of
  the resulting TCP packets will be smaller. (Issue #254)

* Increased maximum number of SubjectAltNames in ``urllib3.contrib.pyopenssl``
  from the default 64 to 1024 in a single certificate. (Issue #318)

* Headers are now passed and stored as a custom
  ``urllib3.collections_.HTTPHeaderDict`` object rather than a plain ``dict``.
  (Issue #329, #333)

* Headers no longer lose their case on Python 3. (Issue #236)

* ``urllib3.contrib.pyopenssl`` now uses the operating system's default CA
  certificates on inject. (Issue #332)

* Requests with ``retries=False`` will immediately raise any exceptions without
  wrapping them in ``MaxRetryError``. (Issue #348)

* Fixed open socket leak with SSL-related failures. (Issue #344, #348)


1.7.1 (2013-09-25)
------------------

* Added granular timeout support with new ``urllib3.util.Timeout`` class.
  (Issue #231)

* Fixed Python 3.4 support. (Issue #238)


1.7 (2013-08-14)
----------------

* More exceptions are now pickle-able, with tests. (Issue #174)

* Fixed redirecting with relative URLs in Location header. (Issue #178)

* Support for relative urls in ``Location: ...`` header. (Issue #179)

* ``urllib3.response.HTTPResponse`` now inherits from ``io.IOBase`` for bonus
  file-like functionality. (Issue #187)

* Passing ``assert_hostname=False`` when creating a HTTPSConnectionPool will
  skip hostname verification for SSL connections. (Issue #194)

* New method ``urllib3.response.HTTPResponse.stream(...)`` which acts as a
  generator wrapped around ``.read(...)``. (Issue #198)

* IPv6 url parsing enforces brackets around the hostname. (Issue #199)

* Fixed thread race condition in
  ``urllib3.poolmanager.PoolManager.connection_from_host(...)`` (Issue #204)

* ``ProxyManager`` requests now include non-default port in ``Host: ...``
  header. (Issue #217)

* Added HTTPS proxy support in ``ProxyManager``. (Issue #170 #139)

* New ``RequestField`` object can be passed to the ``fields=...`` param which
  can specify headers. (Issue #220)

* Raise ``urllib3.exceptions.ProxyError`` when connecting to proxy fails.
  (Issue #221)

* Use international headers when posting file names. (Issue #119)

* Improved IPv6 support. (Issue #203)


1.6 (2013-04-25)
----------------

* Contrib: Optional SNI support for Py2 using PyOpenSSL. (Issue #156)

* ``ProxyManager`` automatically adds ``Host: ...`` header if not given.

* Improved SSL-related code. ``cert_req`` now optionally takes a string like
  "REQUIRED" or "NONE". Same with ``ssl_version`` takes strings like "SSLv23"
  The string values reflect the suffix of the respective constant variable.
  (Issue #130)

* Vendored ``socksipy`` now based on Anorov's fork which handles unexpectedly
  closed proxy connections and larger read buffers. (Issue #135)

* Ensure the connection is closed if no data is received, fixes connection leak
  on some platforms. (Issue #133)

* Added SNI support for SSL/TLS connections on Py32+. (Issue #89)

* Tests fixed to be compatible with Py26 again. (Issue #125)

* Added ability to choose SSL version by passing an ``ssl.PROTOCOL_*`` constant
  to the ``ssl_version`` parameter of ``HTTPSConnectionPool``. (Issue #109)

* Allow an explicit content type to be specified when encoding file fields.
  (Issue #126)

* Exceptions are now pickleable, with tests. (Issue #101)

* Fixed default headers not getting passed in some cases. (Issue #99)

* Treat "content-encoding" header value as case-insensitive, per RFC 2616
  Section 3.5. (Issue #110)

* "Connection Refused" SocketErrors will get retried rather than raised.
  (Issue #92)

* Updated vendored ``six``, no longer overrides the global ``six`` module
  namespace. (Issue #113)

* ``urllib3.exceptions.MaxRetryError`` contains a ``reason`` property holding
  the exception that prompted the final retry. If ``reason is None`` then it
  was due to a redirect. (Issue #92, #114)

* Fixed ``PoolManager.urlopen()`` from not redirecting more than once.
  (Issue #149)

* Don't assume ``Content-Type: text/plain`` for multi-part encoding parameters
  that are not files. (Issue #111)

* Pass `strict` param down to ``httplib.HTTPConnection``. (Issue #122)

* Added mechanism to verify SSL certificates by fingerprint (md5, sha1) or
  against an arbitrary hostname (when connecting by IP or for misconfigured
  servers). (Issue #140)

* Streaming decompression support. (Issue #159)


1.5 (2012-08-02)
----------------

* Added ``urllib3.add_stderr_logger()`` for quickly enabling STDERR debug
  logging in urllib3.

* Native full URL parsing (including auth, path, query, fragment) available in
  ``urllib3.util.parse_url(url)``.

* Built-in redirect will switch method to 'GET' if status code is 303.
  (Issue #11)

* ``urllib3.PoolManager`` strips the scheme and host before sending the request
  uri. (Issue #8)

* New ``urllib3.exceptions.DecodeError`` exception for when automatic decoding,
  based on the Content-Type header, fails.

* Fixed bug with pool depletion and leaking connections (Issue #76). Added
  explicit connection closing on pool eviction. Added
  ``urllib3.PoolManager.clear()``.

* 99% -> 100% unit test coverage.


1.4 (2012-06-16)
----------------

* Minor AppEngine-related fixes.

* Switched from ``mimetools.choose_boundary`` to ``uuid.uuid4()``.

* Improved url parsing. (Issue #73)

* IPv6 url support. (Issue #72)


1.3 (2012-03-25)
----------------

* Removed pre-1.0 deprecated API.

* Refactored helpers into a ``urllib3.util`` submodule.

* Fixed multipart encoding to support list-of-tuples for keys with multiple
  values. (Issue #48)

* Fixed multiple Set-Cookie headers in response not getting merged properly in
  Python 3. (Issue #53)

* AppEngine support with Py27. (Issue #61)

* Minor ``encode_multipart_formdata`` fixes related to Python 3 strings vs
  bytes.


1.2.2 (2012-02-06)
------------------

* Fixed packaging bug of not shipping ``test-requirements.txt``. (Issue #47)


1.2.1 (2012-02-05)
------------------

* Fixed another bug related to when ``ssl`` module is not available. (Issue #41)

* Location parsing errors now raise ``urllib3.exceptions.LocationParseError``
  which inherits from ``ValueError``.


1.2 (2012-01-29)
----------------

* Added Python 3 support (tested on 3.2.2)

* Dropped Python 2.5 support (tested on 2.6.7, 2.7.2)

* Use ``select.poll`` instead of ``select.select`` for platforms that support
  it.

* Use ``Queue.LifoQueue`` instead of ``Queue.Queue`` for more aggressive
  connection reusing. Configurable by overriding ``ConnectionPool.QueueCls``.

* Fixed ``ImportError`` during install when ``ssl`` module is not available.
  (Issue #41)

* Fixed ``PoolManager`` redirects between schemes (such as HTTP -> HTTPS) not
  completing properly. (Issue #28, uncovered by Issue #10 in v1.1)

* Ported ``dummyserver`` to use ``tornado`` instead of ``webob`` +
  ``eventlet``. Removed extraneous unsupported dummyserver testing backends.
  Added socket-level tests.

* More tests. Achievement Unlocked: 99% Coverage.


1.1 (2012-01-07)
----------------

* Refactored ``dummyserver`` to its own root namespace module (used for
  testing).

* Added hostname verification for ``VerifiedHTTPSConnection`` by vendoring in
  Py32's ``ssl_match_hostname``. (Issue #25)

* Fixed cross-host HTTP redirects when using ``PoolManager``. (Issue #10)

* Fixed ``decode_content`` being ignored when set through ``urlopen``. (Issue
  #27)

* Fixed timeout-related bugs. (Issues #17, #23)


1.0.2 (2011-11-04)
------------------

* Fixed typo in ``VerifiedHTTPSConnection`` which would only present as a bug if
  you're using the object manually. (Thanks pyos)

* Made RecentlyUsedContainer (and consequently PoolManager) more thread-safe by
  wrapping the access log in a mutex. (Thanks @christer)

* Made RecentlyUsedContainer more dict-like (corrected ``__delitem__`` and
  ``__getitem__`` behaviour), with tests. Shouldn't affect core urllib3 code.


1.0.1 (2011-10-10)
------------------

* Fixed a bug where the same connection would get returned into the pool twice,
  causing extraneous "HttpConnectionPool is full" log warnings.


1.0 (2011-10-08)
----------------

* Added ``PoolManager`` with LRU expiration of connections (tested and
  documented).
* Added ``ProxyManager`` (needs tests, docs, and confirmation that it works
  with HTTPS proxies).
* Added optional partial-read support for responses when
  ``preload_content=False``. You can now make requests and just read the headers
  without loading the content.
* Made response decoding optional (default on, same as before).
* Added optional explicit boundary string for ``encode_multipart_formdata``.
* Convenience request methods are now inherited from ``RequestMethods``. Old
  helpers like ``get_url`` and ``post_url`` should be abandoned in favour of
  the new ``request(method, url, ...)``.
* Refactored code to be even more decoupled, reusable, and extendable.
* License header added to ``.py`` files.
* Embiggened the documentation: Lots of Sphinx-friendly docstrings in the code
  and docs in ``docs/`` and on https://urllib3.readthedocs.io/.
* Embettered all the things!
* Started writing this file.


0.4.1 (2011-07-17)
------------------

* Minor bug fixes, code cleanup.


0.4 (2011-03-01)
----------------

* Better unicode support.
* Added ``VerifiedHTTPSConnection``.
* Added ``NTLMConnectionPool`` in contrib.
* Minor improvements.


0.3.1 (2010-07-13)
------------------

* Added ``assert_host_name`` optional parameter. Now compatible with proxies.


0.3 (2009-12-10)
----------------

* Added HTTPS support.
* Minor bug fixes.
* Refactored, broken backwards compatibility with 0.2.
* API to be treated as stable from this version forward.


0.2 (2008-11-17)
----------------

* Added unit tests.
* Bug fixes.


0.1 (2008-11-16)
----------------

* First release.


conda.gateways
--------------

Gateways isolate interaction of conda code with the outside world.  Disk manipulation,
database interaction, and remote requests should all be through various gateways.  Functions
and methods in ``conda.gateways`` must use ``conda.models`` for arguments and return values.

Conda modules importable from ``conda.gateways`` are

- ``conda._vendor``
- ``conda.common``
- ``conda.models``
- ``conda.gateways``

Conda modules off limits for import within ``conda.gateways`` are

- ``conda.api``
- ``conda.cli``
- ``conda.client``
- ``conda.core``

Conda modules strictly prohibited from importing ``conda.gateways`` are

- ``conda.api``
- ``conda.cli``
- ``conda.client``
conda.common
------------

Code in ``conda.common`` is not conda-specific.  Technically, it sits *aside* the application
stack and not *within* the stack.  It is able to stand independently on its own.
The *only* allowed imports of conda code in ``conda.common`` modules are imports of other
``conda.common`` modules and imports from ``conda._vendor``.

If objects are needed from other parts of conda, they should be passed directly as arguments to
functions and methods.
conda.models
------------

Models are data transfer objects or "light-weight" domain objects with no appreciable logic
other than their own validation. Models are used to pass data between layers of the stack. In
many ways they are similar to ORM objects.  Unlike ORM objects, they are NOT themselves allowed
to load data from a remote resource.  Thought of another way, they cannot import from
``conda.gateways``, but rather ``conda.gateways`` imports from ``conda.models`` as appropriate
to create model objects from remote resources.

Conda modules importable from ``conda.models`` are

- ``conda._vendor``
- ``conda.common``
- ``conda.models``
conda.base
----------

Code in ``conda.base`` is the lowest level of the application stack.  It is loaded and executed
virtually every time the application is executed. Any code within, and any of its imports, must
be highly performant.

Conda modules importable from ``conda.base`` are

- ``conda._vendor``
- ``conda.base``
- ``conda.common``

Modules prohibited from importing ``conda.base`` are:

- ``conda._vendor``
- ``conda.common``

All other ``conda`` modules may import from ``conda.base``.
conda._vendor
-------------

Conda's pure-python dependencies will be
`vendored <http://stackoverflow.com/questions/26217488/what-is-vendoring>`_
until conda 5.0 when conda will be isolated in its own private environment.

Introduction of dependencies for the 4.x series is discussed in
https://github.com/conda/conda/issues/2825.
conda.core
----------

Code in ``conda.core`` is the core logic.  It is strictly forbidden from having side effects.
No printing to stdout or stderr, no disk manipulation, no http requests.
All side effects should be implemented through ``conda.gateways``.  Objects defined in
``conda.models`` should be heavily preferred for ``conda.core`` function/method arguments
and return values.

Conda modules importable from ``conda.core`` are

- ``conda._vendor``
- ``conda.common``
- ``conda.core``
- ``conda.models``
- ``conda.gateways``

Conda modules strictly off limits for import within ``conda.core`` are

- ``conda.api``
- ``conda.cli``
- ``conda.client``
admin
=====

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='user-guide/configuration/admin-multi-user-install.html'" /></head><body></body></html>
travis
======

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='user-guide/tasks/use-conda-with-travis-ci.html'" /></head><body></body></html>
:orphan:

Redirects
=========

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='index.html'" /></head><body></body></html>

.. toctree::
   :hidden:

   admin
   changelog
   channels
   config
   custom-channels
   download
   env-commands
   faq
   general-commands
   get-started
   installation
   intro
   mro
   py2or3
   r-with-conda
   test-drive
   travis
   troubleshooting
   winxp-proxy
   help/conda-pip-virtualenv-translator
   help/silent
   install/central
   install/full
   install/quick
   install/sample-condarc
   install/tab-completion
   user-guide/tasks/use-mro-with-conda
   user-guide/tasks/use-r-with-conda
   using/cheatsheet
   using/envs
   using/index
   using/pkgs
   using/test-drive
   using/using
   configuration
   api/index
config
======

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='user-guide/configuration/index.html'" /></head><body></body></html>
r-with-conda
============

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='user-guide/tasks/use-r-with-conda.html'" /></head><body></body></html>
custom-channels
===============

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='user-guide/tasks/create-custom-channels.html'" /></head><body></body></html>
Architecture
============

Conda is a complex system of many components and can be hard to
understand for users and developers alike. The following
`C4 model`_ based architecture diagrams should help in that regard.
As a refresher, the C4 model tries to visualize complex software
systems at different levels of detail, and explaining the functionality
to different types of audience.

.. note::

   These diagrams represent the state of conda at the time
   when the documentation was automatically build as part of the
   development process for conda |version| (|today|).

C4 stands for the for levels:

1. :ref:`Context <context>`
2. :ref:`Container <container>`
3. :ref:`Component <component>`
4. :ref:`Code <code>`

.. _context:

Level 1: Context
----------------

This is the overview, 30,000 feet view on conda, to better understand
how conda in the center of the diagram interacts with other
systems and how users relate to it.

More information about how to interpret this diagram can be found in
the `C4 model`_ documentation about the `System Context diagram`_.

.. uml:: umls/context/context.puml
   :width: 80%

.. _container:

Level 2: Container
------------------

This level is zooming in to conda on a system level, which was
in the center of the Level 1 diagram, to show the high-level shape
of the software architecture of and the various responsibilities
in conda, including major technology choices and communication
patterns between the various containers.

More information about how to interpret the following diagrams can be found
in the `C4 model`_ documentation about the `Container diagram`_.

Channels
^^^^^^^^

The following diagram focuses on the channels container from the level 1
diagram.

.. uml:: umls/container/channels.puml

Conda
^^^^^

The following diagram focuses on the conda container from the level 1 diagram.

.. uml:: umls/container/conda.puml

.. _component:

Level 3: Component
------------------

Yet another zoom-in, in which individual containers from Level 2
are decomposed to show major building blocks in conda and their
interactions. Those building blocks are called components in
the sense that they each have a higher function and relate to
an identifiable responsibility and implementation details.

.. uml:: umls/packages_conda.puml

More information about how to interpret this diagram can be found in
the `C4 model`_ documentation about the `Component diagram`_.

.. _code:

Level 4: Code
-------------

This part is auto-generated based on the current code and shows
how the code is structured and how it interacts. For brevity this
ignores a number of subsystems like the public API and exports modules,
utility and vendor packages.

More information about how to interpret this diagram can be found in
the `C4 model`_ documentation about the `Code diagram`_.

.. uml:: umls/classes_conda.puml

.. _`C4 model`: https://c4model.com/
.. _`System Context diagram`: https://c4model.com/#SystemContextDiagram
.. _`Container diagram`: https://c4model.com/#ContainerDiagram
.. _`Component diagram`: https://c4model.com/#ComponentDiagram
.. _`Code diagram`: https://c4model.com/#CodeDiagram
get-started
===========

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='user-guide/index.html'" /></head><body></body></html>
winxp-proxy
===========

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='user-guide/configuration/use-winxp-with-proxy.html'" /></head><body></body></html>
=================
Command reference
=================

.. contents::
   :local:
   :depth: 1

Conda provides many commands for managing packages and environments.
The links on this page provide help for each command.
You can also access help from the command line with the
``--help`` flag:

.. code-block:: bash

   conda install --help

The following commands are part of conda:

.. toctree::
   :glob:
   :maxdepth: 2

   commands/*

Conda vs. pip vs. virtualenv commands
=====================================

If you have used pip and virtualenv in the past, you can use
conda to perform all of the same operations. Pip is a package
manager and virtualenv is an environment manager. Conda is both.

Scroll to the right to see the entire table.

.. list-table::
   :widths: 5 15 15 15
   :header-rows: 1

   * - Task
     - Conda package and environment manager command
     - Pip package manager command
     - Virtualenv environment manager command
   * - Install a package
     - ``conda install $PACKAGE_NAME``
     - ``pip install $PACKAGE_NAME``
     - X
   * - Update a package
     - ``conda update --name $ENVIRONMENT_NAME $PACKAGE_NAME``
     - ``pip install --upgrade $PACKAGE_NAME``
     - X
   * - Update package manager
     - ``conda update conda``
     - Linux/macOS: ``pip install -U pip`` Win: ``python -m pip install -U pip``
     - X
   * - Uninstall a package
     - ``conda remove --name $ENVIRONMENT_NAME $PACKAGE_NAME``
     - ``pip uninstall $PACKAGE_NAME``
     - X
   * - Create an environment
     - ``conda create --name $ENVIRONMENT_NAME python``
     - X
     - ``cd $ENV_BASE_DIR; virtualenv $ENVIRONMENT_NAME``
   * - Activate an environment
     - ``conda activate $ENVIRONMENT_NAME``\*
     - X
     - ``source $ENV_BASE_DIR/$ENVIRONMENT_NAME/bin/activate``
   * - Deactivate an environment
     - ``conda deactivate``
     - X
     - ``deactivate``
   * - Search available packages
     - ``conda search $SEARCH_TERM``
     - ``pip search $SEARCH_TERM``
     - X
   * - Install package from specific source
     - ``conda install --channel $URL $PACKAGE_NAME``
     - ``pip install --index-url $URL $PACKAGE_NAME``
     - X
   * - List installed packages
     - ``conda list --name $ENVIRONMENT_NAME``
     - ``pip list``
     - X
   * - Create requirements file
     - ``conda list --export``
     - ``pip freeze``
     - X
   * - List all environments
     - ``conda info --envs``
     - X
     - Install virtualenv wrapper, then ``lsvirtualenv``
   * - Install other package manager
     - ``conda install pip``
     - ``pip install conda``
     - X
   * - Install Python
     - ``conda install python=x.x``
     - X
     - X
   * - Update Python
     - ``conda update python``\*
     - X
     - X


\* ``conda activate`` only works on conda 4.6 and later versions.
For conda versions prior to 4.6, type:

   * Windows: ``activate``
   * Linux and macOS: ``source activate``

\* ``conda update python`` updates to the most recent in the series,
so any Python 2.x would update to the latest 2.x and any Python 3.x
to the latest 3.x.


.. Show what files a package has installed ``pip show --files $PACKAGE_NAME``  not possible
.. Print details on an individual package ``pip show $PACKAGE_NAME``  not possible
.. List available environments   not possible   ``conda info -e``
.. #user will want to pass that through ``tail -n +3 | awk '{print $1;}'``
troubleshooting
===============

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='user-guide/troubleshooting.html'" /></head><body></body></html>
========
Glossary
========

.. contents::
   :local:
   :depth: 1

.. _condarc-glossary:

.condarc
========

The Conda Runtime Configuration file, an optional ``.yaml`` file
that allows you to configure many aspects of conda, such as which
channels it searches for packages, proxy settings, and environment
directories. A ``.condarc`` file is not included by default, but
it is automatically created in your home directory
when you use the ``conda config`` command. The ``.condarc`` file
can also be located in a root environment, in which case it
overrides any ``.condarc`` in the home directory. For more
information, see :doc:`user-guide/configuration/use-condarc`
and :doc:`user-guide/configuration/admin-multi-user-install`.
Pronounced "conda r-c".

.. _activate-deactivate-glossary:

Activate/Deactivate environment
===============================

Conda commands used to switch or move between installed
environments. The ``conda activate`` command prepends the path of your
current environment to the PATH environment variable so that you
do not need to type it each time. ``deactivate`` removes it.
Even when an environment is deactivated, you can still execute
programs in that environment by specifying their paths directly,
as in ``~/anaconda/envs/envname/bin/program_name``. When an
environment is activated, you can execute the program in that
environment with just ``program_name``.

.. note::
   Replace ``envname`` with the name of the environment and
   replace ``program_name`` with the name of the program.


.. _anaconda-glossary:

Anaconda
========

A downloadable, free, open-source, high-performance, and optimized
Python and R distribution. Anaconda includes
:ref:`conda <conda-glossary>`, conda-build, Python, and 250+
automatically installed, open-source scientific packages and
their dependencies that have been tested to work well together,
including SciPy, NumPy, and many others. Use the ``conda install`` command
to easily install 7,500+ popular open-source packages
for data science--including advanced and scientific
analytics--from the Anaconda repository. Use the ``conda``
command to install thousands more open-source packages.

Because Anaconda is a Python distribution, it can make
installing Python quick and easy even for new users.

Available for Windows, macOS, and Linux, all versions of
Anaconda are supported by the community.

See also :ref:`miniconda-glossary` and :ref:`conda-glossary`.


.. _anaconda-cloud-glossary:

Anaconda Cloud
==============

A web-based, repository hosting service in the cloud. Packages
created locally can be published to the cloud to be shared with
others. `Anaconda Cloud <https://docs.anaconda.com/anaconda-cloud/>`_
is a public version of Anaconda Repository.


.. _navigator-glossary:

Anaconda Navigator
==================

A desktop graphical user interface (GUI) included in all versions
of Anaconda that allows you to easily manage conda packages,
environments, channels, and notebooks without a command line
interface (CLI). See more about `Navigator <https://docs.anaconda.com/anaconda/navigator/>`_.

.. _channels-glossary:

Channels
========

The locations of the repositories where conda looks for packages.
Channels may point to a Cloud repository or a private
location on a remote or local repository that you or your organization
created. The ``conda channel`` command has a default set of channels to
search, beginning with https://repo.anaconda.com/pkgs/, which you may
override, for example, to maintain a private or internal channel.
These default channels are referred to in conda commands and in
the ``.condarc`` file by the channel name "defaults."


.. _conda-glossary:

conda
=====

The package and environment manager program bundled with Anaconda
that installs and updates conda packages and their dependencies.
Conda also lets you easily switch between conda environments on
your local computer.


.. _conda-environment-glossary:

conda environment
=================

A folder or directory that contains a specific collection of
conda packages and their dependencies, so they can be maintained
and run separately without interference from each other. For
example, you may use a conda environment for only Python 2 and
Python 2 packages, maintain another conda environment with only
Python 3 and Python 3 packages, and maintain another for R
language packages. Environments can be created from:

* The Navigator GUI
* The command line
* An environment specification file with the name
  ``your-environment-name.yml``


.. _conda-package-glossary:

conda package
=============

A compressed file that contains everything that a software
program needs in order to be installed and run, so that you do
not have to manually find and install each dependency separately.
A conda package includes system-level libraries, Python or R
language modules, executable programs, and other components. You
manage conda packages with conda.

.. _conda-repository-glossary:

conda repository
================

A cloud-based repository that contains 7,500+ open-source certified
packages that are easily installed locally with the
``conda install`` command. Anyone can access the repository from:

* The Navigator GUI

* A terminal or Anaconda Prompt using conda commands

*  https://repo.anaconda.com/pkgs/


.. _metapackage-glossary:

Metapackage
===========

A metapackage is a very simple package that has at least a name
and a version. It need not have any dependencies or build steps.
:ref:`meta-package` may list dependencies to several core,
low-level libraries and may contain links to software files
that are automatically downloaded when executed.

.. _miniconda-glossary:

Miniconda
=========

A free minimal installer for conda. `Miniconda <https://docs.conda.io/en/latest/miniconda.html>`_
is a small, bootstrap version of Anaconda that includes only conda,
Python, the packages they depend on, and a small number of other useful
packages, including pip, zlib, and a few others. Use the
``conda install`` command to install 7,500+ additional conda
packages from the Anaconda repository.

Miniconda is a Python distribution that can make
installing Python quick and easy even for new users.

See also :ref:`anaconda-glossary` and :ref:`conda-glossary`.

.. _noarch-glossary:

Noarch package
==============

A conda package that contains nothing specific to any system
architecture, so it may be installed from any system. When conda
searches for packages on any system in a channel, conda checks
both the system-specific subdirectory, such as ``linux-64``, and
the ``noarch`` directory. Noarch is a contraction of "no architecture".

.. _package-manager-glossary:

Package manager
===============

A collection of software tools that automates the process of
installing, updating, configuring, and removing computer programs
for a computer's operating system. Also known as a package management
system. Conda is a package manager.

.. _packages-glossary:

Packages
========

Software files and information about the software, such as its
name, the specific version, and a description, bundled into a
file that can be installed and managed by a package manager.

.. _repository-glossary:

Repository
==========

Any storage location from which software assets may be retrieved
and installed on a local computer. See also
:ref:`anaconda-cloud-glossary` and
:ref:`conda-repository-glossary`.

.. _silent-mode-glossary:

Silent mode installation
========================

When installing Miniconda or Anaconda in silent mode, screen
prompts are not shown on screen and default settings are
automatically accepted.
download
========

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='user-guide/install/download.html'" /></head><body></body></html>
Conda configuration
===================

.. program-output:: cd .. && python -c 'import os; import sys; src_dir = here = os.path.abspath(os.path.dirname("../setup.py")); sys.path.insert(0, src_dir); import conda.cli.main_config; print(conda.cli.main_config.describe_all_parameters())'
   :shell:
py2or3
======

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='user-guide/tasks/manage-python.html'" /></head><body></body></html>
general-commands
================

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='commands.html'" /></head><body></body></html>
installation
============

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='user-guide/install/index.html'" /></head><body></body></html>
faq
===

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='user-guide/tasks/index.html'" /></head><body></body></html>
=====
Conda
=====

.. figure::  /img/conda_logo.svg
   :align: center
   :width: 50%

   ..

|

:emphasis:`Package, dependency and environment management for any
language---Python, R, Ruby, Lua, Scala, Java, JavaScript, C/ C++,
FORTRAN`

Conda is an open-source package management system and environment
management system that runs on Windows, macOS, and Linux. Conda
quickly installs, runs, and updates packages and their dependencies.
Conda easily creates, saves, loads, and switches between environments
on your local computer. It was created for Python programs but it
can package and distribute software for any language.

Conda as a package manager helps you find and install packages.
If you need a package that requires a different version of
Python, you do not need to switch to a different environment
manager because conda is also an environment manager. With just
a few commands, you can set up a totally separate environment to
run that different version of Python, while continuing to run
your usual version of Python in your normal environment.

In its default configuration, conda can install and manage the
over 7,500 packages at repo.anaconda.com that are built, reviewed,
and maintained by Anaconda\ |reg|.

Conda can be combined with continuous integration systems such
as Travis CI and AppVeyor to provide frequent, automated testing
of your code.

The conda package and environment manager is included in all versions of
:ref:`Anaconda <anaconda-glossary>`\ |reg|,
:ref:`Miniconda <miniconda-glossary>`, and
`Anaconda Repository <https://docs.continuum.io/anaconda-repository/>`_.
Conda is also included in `Anaconda Enterprise
<https://www.anaconda.com/enterprise/>`_, which provides on-site enterprise
package and environment management for Python, R, Node.js, Java, and other
application stacks. Conda is also available on
`conda-forge <https://anaconda.org/conda-forge/conda>`_, a community channel.
You may also get conda on `PyPI <https://pypi.org/>`_, but
that approach may not be as up to date.

.. toctree::
   :hidden:
   :maxdepth: 1

   user-guide/index
   configuration
   api/index
   commands
   glossary
   dev-guide/index
   release-notes

.. |reg|    unicode:: U+000AE .. REGISTERED SIGN
mro
===

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='user-guide/tasks/use-mro-with-conda.html'" /></head><body></body></html>
test-drive
==========

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='user-guide/getting-started.html'" /></head><body></body></html>
env-commands
============

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='commands.html'" /></head><body></body></html>
intro
=====

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='index.html'" /></head><body></body></html>
channels
========

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='user-guide/tasks/manage-channels.html'" /></head><body></body></html>
changelog
=========

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='release-notes.html'" /></head><body></body></html>
``conda config``
*****************

.. argparse::
   :module: conda.cli.conda_argparse
   :func: generate_parser
   :prog: conda
   :path: config
   :nodefault:
   :nodefaultconst:
``conda list``
*****************

.. argparse::
   :module: conda.cli.conda_argparse
   :func: generate_parser
   :prog: conda
   :path: list
   :nodefault:
   :nodefaultconst:
``conda search``
*****************

.. argparse::
   :module: conda.cli.conda_argparse
   :func: generate_parser
   :prog: conda
   :path: search
   :nodefault:
   :nodefaultconst:
``conda info``
*****************

.. argparse::
   :module: conda.cli.conda_argparse
   :func: generate_parser
   :prog: conda
   :path: info
   :nodefault:
   :nodefaultconst:
``conda package``
*****************

.. argparse::
   :module: conda.cli.conda_argparse
   :func: generate_parser
   :prog: conda
   :path: package
   :nodefault:
   :nodefaultconst:
``conda update``
*****************

.. argparse::
   :module: conda.cli.conda_argparse
   :func: generate_parser
   :prog: conda
   :path: update
   :nodefault:
   :nodefaultconst:
``conda create``
*****************

.. argparse::
   :module: conda.cli.conda_argparse
   :func: generate_parser
   :prog: conda
   :path: create
   :nodefault:
   :nodefaultconst:
``conda remove``
*****************

.. argparse::
   :module: conda.cli.conda_argparse
   :func: generate_parser
   :prog: conda
   :path: remove
   :nodefault:
   :nodefaultconst:
``conda clean``
*****************

.. argparse::
   :module: conda.cli.conda_argparse
   :func: generate_parser
   :prog: conda
   :path: clean
   :nodefault:
   :nodefaultconst:
``conda install``
*****************

.. argparse::
   :module: conda.cli.conda_argparse
   :func: generate_parser
   :prog: conda
   :path: install
   :nodefault:
   :nodefaultconst:
help/silent
===========

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='../user-guide/install/index.html'" /></head><body></body></html>
help/conda-pip-virtualenv-translator
====================================

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='../commands.html'" /></head><body></body></html>
==========================
Getting started with conda
==========================

.. _navigator-starting:

Conda is a powerful package manager and environment manager that
you use with command line commands at the Anaconda Prompt for Windows,
or in a terminal window for macOS or Linux.

This 20-minute guide to getting started with conda lets you try out
the major features of conda. You should understand how conda works
when you finish this guide.

SEE ALSO: `Getting started with Anaconda Navigator
<https://docs.anaconda.com/anaconda/navigator/getting-started>`_, a
graphical user interface that lets you use conda in a web-like interface
without having to enter manual commands. Compare the Getting started
guides for each to see which program you prefer.

Before you start
================

You should have already `installed
Anaconda <https://docs.anaconda.com/anaconda/install/>`_.

Contents
========

 - :ref:`Starting conda <starting-conda>` on Windows, macOS, or Linux. 2 MINUTES

 - :ref:`Managing conda <managing-conda>`. Verify that Anaconda is installed and check that conda is updated to the current version. 3 MINUTES

 - :ref:`Managing environments <managing-envs>`. Create :doc:`environments <../user-guide/concepts/environments>` and move easily between them.  5 MINUTES

 - :ref:`Managing Python <managing-python>`. Create an environment that has a different version of Python. 5 MINUTES

 - :ref:`Managing packages <managing-pkgs>`. Find packages available for you to install. Install packages. 5 MINUTES

TOTAL TIME: 20 MINUTES


.. _starting-conda:

Starting conda
==============

**Windows**

* From the Start menu, search for and open "Anaconda Prompt."

.. figure:: /img/anaconda-prompt.png
   :width: 50%

   ..

|

On Windows, all commands below are typed into the Anaconda Prompt window.

**MacOS**

* Open Launchpad, then click the terminal icon.

On macOS, all commands below are typed into the terminal window.

**Linux**

* Open a terminal window.

On Linux, all commands below are typed into the terminal window.

.. _managing-conda:

Managing conda
===============

Verify that conda is installed and running on your system by typing:

 .. code::

    conda --version

Conda displays the number of the version that you have installed. You do not
need to navigate to the Anaconda directory.

EXAMPLE: ``conda 4.7.12``

.. note::
   If you get an error message, make sure you closed and re-opened the
   terminal window after installing, or do it now. Then verify that you are logged
   into the same user account that you used to install Anaconda or Miniconda.

Update conda to the current version. Type the following:

 .. code::

     conda update conda

Conda compares versions and then displays what is available to install.

If a newer version of conda is available, type ``y`` to update:

 .. code::

    Proceed ([y]/n)? y

.. tip::
   We recommend that you always keep conda updated to the latest version.

.. _managing-envs:

Managing environments
=====================

Conda allows you to create separate environments containing files, packages,
and their dependencies that will not interact with other environments.

When you begin using conda, you already have a default environment named
``base``. You don't want to put programs into your base environment, though.
Create separate environments to keep your programs isolated from each other.

#. Create a new environment and install a package in it.

   We will name the environment ``snowflakes`` and install the package
   BioPython. At the Anaconda Prompt or in your terminal window, type
   the following:

   .. code::

      conda create --name snowflakes biopython

   Conda checks to see what additional packages ("dependencies")
   BioPython will need, and asks if you want to proceed:

   .. code::

      Proceed ([y]/n)? y

   Type "y" and press Enter to proceed.

#. To use, or "activate" the new environment, type the following:

   * Windows: ``conda activate snowflakes``
   * macOS and Linux: ``conda activate snowflakes``

   .. note::
      ``conda activate`` only works on conda 4.6 and later versions.

   For conda versions prior to 4.6, type:

   * Windows: ``activate snowflakes``
   * macOS and Linux: ``source activate snowflakes``

   Now that you are in your ``snowflakes`` environment, any conda
   commands you type will go to that environment until
   you deactivate it.

#. To see a list of all your environments, type:

   .. code::

      conda info --envs

   A list of environments appears, similar to the following:

   .. code::

      conda environments:

          base           /home/username/Anaconda3
          snowflakes   * /home/username/Anaconda3/envs/snowflakes

   .. tip::
      The active environment is the one with an asterisk (*).

#. Change your current environment back to the default (base):
   ``conda activate``

   .. note::
      For versions prior to conda 4.6, use:

        * Windows:  ``activate``
        * macOS, Linux: ``source activate``

   .. tip::
      When the environment is deactivated, its name is no
      longer shown in your prompt, and the asterisk (*) returns to base.
      To verify, you can repeat the  ``conda info --envs`` command.


.. _managing-python:

Managing Python
===============

When you create a new environment, conda installs the same Python version you
used when you downloaded and installed Anaconda. If you want to use a different
version of Python, for example Python 3.5, simply create a new environment and
specify the version of Python that you want.

#. Create a new environment named "snakes" that contains Python 3.9:

   .. code::

      conda create --name snakes python=3.9

   When conda asks if you want to proceed, type "y" and press Enter.

#. Activate the new environment:

   * Windows: ``conda activate snakes``
   * macOS and Linux: ``conda activate snakes``

   .. note::
      ``conda activate`` only works on conda 4.6 and later versions.

   For conda versions prior to 4.6, type:

   * Windows: ``activate snakes``
   * macOS and Linux: ``source activate snakes``

#. Verify that the snakes environment has been added and is active:

   .. code::

      conda info --envs

   Conda displays the list of all environments with an asterisk (*)
   after the name of the active environment:

   .. code::

     # conda environments:
     #
     base                     /home/username/anaconda3
     snakes                *  /home/username/anaconda3/envs/snakes
     snowflakes               /home/username/anaconda3/envs/snowflakes

   The active environment is also displayed in front of your prompt in
   (parentheses) or [brackets] like this:

   .. code::

     (snakes) $

#. Verify which version of Python is in your current
   environment:

   .. code::

      python --version

#. Deactivate the snakes environment and return to base environment:
   ``conda activate``

   .. note::
      For versions prior to conda 4.6, use:

        * Windows:  ``activate``
        * macOS, Linux: ``source activate``


.. _managing-pkgs:

Managing packages
=================

In this section, you check which packages you have installed,
check which are available and look for a specific package and
install it.

#. To find a package you have already installed, first activate the environment
   you want to search. Look above for the commands to
   :ref:`activate your snakes environment <managing-envs>`.

#. Check to see if a package you have not installed named
   "beautifulsoup4" is available from the Anaconda repository
   (must be connected to the Internet):

   .. code::

      conda search beautifulsoup4

   Conda displays a list of all packages with that name on the Anaconda
   repository, so we know it is available.

#. Install this package into the current environment:

   .. code::

      conda install beautifulsoup4

#. Check to see if the newly installed program is in this environment:

   .. code::

      conda list


More information
================

* :doc:`Conda cheat sheet <cheatsheet>`
* Full documentation--- https://conda.io/docs/
* Free community support--- https://groups.google.com/a/anaconda.com/forum/#!forum/anaconda
* Paid support options--- https://www.anaconda.com/support/
===============
Troubleshooting
===============

.. contents::
   :local:
   :depth: 1


Using conda in Windows Batch script exits early
===============================================

In conda 4.6+, the way that you interact with conda goes through a batch script (``%PREFIX%\condabin\conda.bat``).
Unfortunately, this means it's a little complicated to use conda from other batch scripts. When using batch
scripts from within batch scripts, you must prefix your command with ``CALL``. If you do not do this, your batch
script that calls conda will exit immediately after the conda usage. In other words, if you write this in a .bat file:

   .. code-block:: bash

      conda create myenv python
      conda activate myenv
      echo test

Neither the activation, nor the echo will happen. You must write this in your batch script:

   .. code-block:: bash

      CALL conda create myenv python
      CALL conda activate myenv
      echo test

This is known behavior with cmd.exe, and we have not found any way to change it.
https://stackoverflow.com/questions/4798879/how-do-i-run-a-batch-script-from-within-a-batch-script/4798965

.. _mkl_library:

NumPy MKL library load failed
=============================

Error messages like

.. code-block::

    Intel MKL FATAL ERROR: Cannot load mkl_intel_thread.dll

or

.. code-block::

    The ordinal 241 could not be located in the the dynamic link library

Cause
-----

NumPy is unable to load the correct MKL or Intel OpenMP runtime libraries. This
is almost always caused by one of two things:

  1. The environment with NumPy has not been activated.
  2. Another software vendor has installed MKL or Intel OpenMP (libiomp5md.dll)
     files into the C:\\Windows\\System32 folder. These files are being loaded
     before Anaconda's and they're not compatible.

Solution
--------

If you are not activating your environments, start with doing that. There's more
info at :ref:`Activating environments <activate-env>`. If you are still stuck, you may need to consider
more drastic measures.

  #. Remove any MKL-related files from C:\\Windows\\System32. We recommend
     renaming them to add .bak to the filename to effectively hide them. Observe
     if any other software breaks. Try moving the DLL files alongside the .exe of
     the software that broke. If it works again, you can keep things in the
     moved state - Anaconda doesn't need MKL in System32, and no other software should need it either. If
     you identify software that is installing software here, please contact the
     creators of that software. Inform them that their practice of installing
     MKL to a global location is fragile and is breaking other people's software
     and wasting a lot of time. See the list of guilty parties below.
  #. You may try a special DLL loading mode that Anaconda builds into Python.
     This changes the DLL search path from System32 first to System32 as another
     entry on PATH, allowing libraries in your conda environment to be found
     before the libraries in System32. Control of this feature is done with
     environment variables. Only Python builds beyond these builds will react to
     these environment variables:

       * Python 2.7.15 build 14
       * Python 3.6.8 build 7
       * Python 3.7.2 build 8

     To update Python from the defaults channel::

       conda update -c defaults python

     .. note::
        Anaconda has built special patches into its builds of Python to enable
        this functionality. If you get your Python package from somewhere else
        (e.g. conda-forge), these flags may not do anything.

     Control environment variables:

       * ``CONDA_DLL_SEARCH_MODIFICATION_ENABLE``
       * ``CONDA_DLL_SEARCH_MODIFICATION_DEBUG``
       * ``CONDA_DLL_SEARCH_MODIFICATION_NEVER_ADD_WINDOWS_DIRECTORY``
       * ``CONDA_DLL_SEARCH_MODIFICATION_NEVER_ADD_CWD``

     To set variables on Windows, you may use either the CLI (Anaconda Prompt, for example) or a Windows GUI.

       * CLI: https://superuser.com/questions/79612/setting-and-getting-windows-environment-variables-from-the-command-prompt/79614
       * GUI: http://www.dowdandassociates.com/blog/content/howto-set-an-environment-variable-in-windows-gui/

     These should be set to a value of ``1`` to enable them.  For example, in an Anaconda Prompt terminal::

       set CONDA_DLL_SEARCH_MODIFICATION_ENABLE=1

    .. note::
       Only ``CONDA_DLL_SEARCH_MODIFICATION_ENABLE`` should be set finally.

List of known software that installs Intel libraries to C:\\Windows\\System32:

* Amplitube, by IK Multimedia
* ASIO4ALL, by Michael Tippach

If you find others, please let us know. If you're on this list and you want to
fix things, let us know. In either case, the conda issue tracker at
https://github.com/conda/conda/issues is the best way to reach us.

SSL connection errors
=====================

This is a broad umbrella of errors with many causes. Here are some we've seen.

CondaHTTPError: HTTP 000 CONNECTION FAILED
------------------------------------------

If you're on Windows and you see this error, look a little further down in the
error text. Do you see something like this?::

    SSLError(MaxRetryError('HTTPSConnectionPool(host=\'repo.anaconda.com\', port=443): Max retries exceeded with url: /pkgs/r/win-32/repodata.json.bz2 (Caused by SSLError("Can\'t connect to HTTPS URL because the SSL module is not available."))'))

The key part there is the last bit::

    Caused by SSLError("Can\'t connect to HTTPS URL because the SSL module is not available.")

Conda is having problems because it can't find the OpenSSL libraries that it needs.

Cause
~~~~~

You may observe this error cropping up after a conda update. More recent
versions of conda and more recent builds of Python are more strict about
requiring activation of environments. We're working on better error messages for
them, but here's the story for now. Windows relies on the PATH environment
variable as the way to locate libraries that are not in the immediate folder,
and also not in the C:\\Windows\\System32 folder. Searching for libraries in the
PATH folders goes from left to right. If you choose to put Anaconda's folders on
PATH, there are several of them:

  * (install root)
  * (install root)/Library/mingw-w64/bin
  * (install root)/Library/usr/bin
  * (install root)/Library/bin
  * (install root)/Scripts
  * (install root)/bin
  * (install root)/condabin

Early installers for Anaconda put these on PATH. That was ultimately fragile
because Anaconda isn't the only software on the system. If other software had
similarly named executables or libraries, and came earlier on PATH, Anaconda
could break. On the flip side, Anaconda could break other software if Anaconda
were earlier in the PATH order and shadowed any other executables or libraries.
To make this easier, we began recommending "activation" instead of modifying
PATH. Activation is a tool where conda sets your PATH, and also runs any custom
package scripts which are often used to set additional environment variables
that are necessary for software to run (e.g. ``JAVA_HOME``). Because activation runs
only in a local terminal session (as opposed to the permanent PATH entry), it is
safe to put Anaconda's PATH entries first. That means that Anaconda's libraries
get higher priority when you're running Anaconda but Anaconda doesn't interfere
with other software when you're not running Anaconda.

Anaconda's Python interpreter included a patch for a long time that added the
(install root)/Library/bin folder to that Python's PATH. Unfortunately, this
interfered with reasoning about PATH at all when using that Python interpreter.
We removed that patch in Python 3.7.0, and we regret that this has caused
problems for people who are not activating their environments and who otherwise
do not have the proper entries on PATH. We're experimenting with approaches that
will allow our executables to be less dependent on PATH and more self-aware of
their needed library load paths. For now, though, the only solutions to this
problem are to manage PATH properly.

Our humble opinion is that activation is the easiest way to ensure that things
work. See more information on activation in :ref:`Activating environments
<activate-env>`.

Solution
~~~~~~~~

Use "Anaconda Prompt" or shells opened from Anaconda Navigator. If you use a GUI
IDE and you see this error, ask the developers of your IDE to add activation for
conda environments.

SSL certificate errors
----------------------

Cause
~~~~~

Installing packages may produce a "connection failed" error if you do not have
the certificates for a secure connection to the package repository.

Solution
~~~~~~~~

Pip can use the ``--trusted-host`` option to indicate that the URL of the
repository is trusted::

    pip install --trusted-host pypi.org

Conda has three similar options.

#. The option ``--insecure`` or ``-k`` ignores certificate validation errors for all hosts.

   Running ``conda create --help`` shows::

       Networking Options:
         -k, --insecure        Allow conda to perform "insecure" SSL connections and
                               transfers. Equivalent to setting 'ssl_verify' to
                               'False'.

#. The configuration option ``ssl_verify`` can be set to ``False``.

   Running ``conda config --describe ssl_verify`` shows::

       # # ssl_verify (bool, str)
       # #   aliases: verify_ssl
       # #   conda verifies SSL certificates for HTTPS requests, just like a web
       # #   browser. By default, SSL verification is enabled and conda operations
       # #   will fail if a required URL's certificate cannot be verified. Setting
       # #   ssl_verify to False disables certification verification. The value for
       # #   ssl_verify can also be (1) a path to a CA bundle file, or (2) a path
       # #   to a directory containing certificates of trusted CA.
       # #
       # ssl_verify: true

   Running ``conda config --set ssl_verify false`` modifies ``~/.condarc`` and
   sets the ``-k`` flag for all future conda operations performed by that user.
   Running ``conda config --help`` shows other configuration scope options.

   When using ``conda config``, the user's conda configuration file at
   ``~/.condarc`` is used by default. The flag ``--system`` will instead write
   to the system configuration file for all users at
   ``<CONDA_BASE_ENV>/.condarc``. The flag ``--env`` will instead write to the
   active conda environment's configuration file at
   ``<PATH_TO_ACTIVE_CONDA_ENV>/.condarc``. If ``--env`` is used and no
   environment is active, the user configuration file is used.

#. The configuration option ``ssl_verify`` can be used to install new certificates.

   Running ``conda config --describe ssl_verify`` shows::

       # # ssl_verify (bool, str)
       # #   aliases: verify_ssl
       # #   conda verifies SSL certificates for HTTPS requests, just like a web
       # #   browser. By default, SSL verification is enabled, and conda operations
       # #   will fail if a required URL's certificate cannot be verified. Setting
       # #   ssl_verify to False disables certification verification. The value for
       # #   ssl_verify can also be (1) a path to a CA bundle file, or (2) a path
       # #   to a directory containing certificates of trusted CA.
       # #
       # ssl_verify: true

   Your network administrator can give you a certificate bundle for your
   network's firewall. Then ``ssl_verify`` can be set to the path of that
   certificate authority (CA) bundle and package installation operations will
   complete without connection errors.

   When using ``conda config``, the user's conda configuration file at
   ``~/.condarc`` is used by default. The flag ``--system`` will instead write
   to the system configuration file for all users at
   ``<CONDA_BASE_ENV>/.condarc``. The flag ``--env`` will instead write to the
   active conda environment's configuration file at
   ``<PATH_TO_ACTIVE_CONDA_ENV>/.condarc``. If ``--env`` is used and no
   environment is active, the user configuration file is used.

SSL verification errors
-----------------------

Cause
~~~~~

This error may be caused by lack of activation on Windows or expired
certifications::

    SSL verification error: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:590)

Solution
~~~~~~~~
Make sure your conda is up-to-date: ``conda --version``

If not, run: ``conda update conda``

Temporarily set your ``ssl_verify`` variable to false, upgrade the requests package, and then
set ``ssl_verify`` back to ``true`` using the following commands::

    conda config --set ssl_verify false
    conda update requests
    conda config --set ssl_verify true

You can also set ``ssl_verify`` to a string path to a certificate, which can be used to verify
SSL connections. Modify your ``.condarc`` and include the following::

    ssl_verify: path-to-cert/chain/filename.ext

If the repository uses a self-signed certificate, use the actual path to the certificate.
If the repository is signed by a private certificate authority (CA), the file needs to include
the root certificate and any intermediate certificates.


.. _permission-denied:

Permission denied errors during installation
============================================

Cause
-----

The ``umask`` command  determines the mask settings that control
how file permissions are set for newly created files. If you
have a very restrictive ``umask``, such as ``077``, you get
"permission denied" errors.

Solution
--------

Set a less restrictive ``umask`` before calling conda commands.
Conda was intended as a user space tool, but often users need to
use it in a global environment. One place this can go awry is
with restrictive file permissions. Conda creates links when you
install files that have to be read by others on the system.

To give yourself full permissions for files and directories but
prevent the group and other users from having access:

#. Before installing, set the ``umask`` to ``007``.

#. Install conda.

#. Return the ``umask`` to the original setting:

   .. code-block:: bash

      umask 007
      conda install
      umask 077


For more information on ``umask``, see
`http://en.wikipedia.org/wiki/Umask <http://en.wikipedia.org/wiki/Umask>`_.

.. _permission-denied-sudo:

Permission denied errors after using sudo conda command
=======================================================

Solution
--------

Once you run conda with sudo, you must use sudo forever. We recommend that you NEVER run conda with sudo.


.. _fix-broken-conda:

Already installed error message
===============================

Cause
-----

If you are trying to fix conda problems without removing the
current installation and you try to reinstall Miniconda or
Anaconda to fix it, you get an error message that Miniconda
or Anaconda is already installed and you cannot continue.

Solution
--------

Install using the ``--force`` option.


Download and install the appropriate Miniconda
for your operating system from the `Miniconda download page
<https://docs.conda.io/en/latest/miniconda.html>`_ using the force option
``--force`` or ``-f``:

.. code-block:: bash

    bash Miniconda3-latest-MacOSX-x86_64.sh -f

.. note::
   Substitute the appropriate filename and version for your
   operating system.

.. note::
   Be sure that you install to the same location as
   your existing install so it overwrites the core conda files and
   does not install a duplicate in a new folder.


.. _conda-claims-installed:

Conda reports that a package is installed, but it appears not to be
===================================================================

Sometimes conda claims that a package is already installed but
it does not appear to be, for example, a Python package that
gives ImportError.

There are several possible causes for this problem, each with its
own solution.

Cause
-----

You are not in the same conda environment as your package.

Solution
--------

#. Make sure that you are in the same conda environment as your
   package. The ``conda info`` command tells you what environment
   is currently active under ``default environment``.

#. Verify that you are using the Python from the correct
   environment by running:

   .. code:: python

      import sys

      print(sys.prefix)


Cause
-----
For Python packages, you have set the ``PYTHONPATH`` or ``PYTHONHOME``
variable. These environment variables cause Python to load files
from locations other than the standard ones. Conda works best
when these environment variables are not set, as their typical
use cases are obviated by conda environments and a common issue
is that they cause Python to pick up the wrong or broken
versions of a library.


Solution
--------

For Python packages, make sure you have not set the ``PYTHONPATH``
or ``PYTHONHOME`` variables. The command ``conda info -a`` displays
the values of these environment variables.

* To unset these environment variables temporarily for the
  current terminal session, run ``unset PYTHONPATH``.

* To unset them permanently, check for lines in the files:

  * If you use bash---``~/.bashrc``, ``~/.bash_profile``,
    ``~/.profile``.

  * If you use zsh---``~/.zshrc``.

  * If you use PowerShell on Windows, the file output by
    ``$PROFILE``.


Cause
-----

You have site-specific directories or, for Python, you have
so-called site-specific files. These are typically located in
``~/.local`` on macOS and Linux. For a full description of the locations of
site-specific packages, see `PEP 370
<http://legacy.python.org/dev/peps/pep-0370/>`_. As with
``PYTHONPATH``, Python may try importing packages from this
directory, which can cause issues.

Solution
--------

For Python packages, remove site-specific directories and
site-specific files.

Cause
-----

For C libraries, the following environment variables have been
set:

* macOS---``DYLD_LIBRARY_PATH``.
* Linux---``LD_LIBRARY_PATH``.

These act similarly to ``PYTHONPATH`` for Python. If they are
set, they can cause libraries to be loaded from locations other
than the conda environment. Conda environments obviate most use
cases for these variables. The command ``conda info -a`` shows
what these are set to.

Solution
--------

Unset ``DYLD_LIBRARY_PATH`` or ``LD_LIBRARY_PATH``.


Cause
-----

Occasionally, an installed package becomes corrupted. Conda works
by unpacking the packages in the ``pkgs`` directory and then
hard-linking them to the environment. Sometimes these get
corrupted, breaking all environments that use them. They
also break any additional environments since the same files are hard-linked
each time.


Solution
--------

Run the command ``conda install -f`` to unarchive the package
again and relink it. It also does an MD5 verification on the
package. Usually if this is different it is because your
channels have changed and there is a different package with the
same name, version, and build number.

.. note::
   This breaks the links to any other environments that
   already had this package installed, so you have to reinstall it
   there, too. It also means that running ``conda install -f`` a lot
   can use up significant disk space if you have many environments.

.. note::
   The ``-f`` flag to ``conda install`` (``--force``) implies
   ``--no-deps``, so ``conda install -f package`` does not reinstall
   any of the dependencies of ``package``.


.. _DistributionNotFound:

pkg_resources.DistributionNotFound: conda==3.6.1-6-gb31b0d4-dirty
=================================================================

Cause
-----

The local version of conda needs updating.

Solution
--------

Force reinstall conda. A useful way to work off the development
version of conda is to run ``python setup.py develop`` on a
checkout of the `conda GitHub repository
<https://github.com/conda/conda>`_. However, if you are not
regularly running ``git pull``, it is a good idea to un-develop,
as you will otherwise not get any regular updates to conda. The
normal way to do this is to run ``python setup.py develop -u``.

However, this command does not replace the ``conda`` script
itself. With other packages, this is not an issue, as you can
just reinstall them with ``conda``, but conda cannot be used if
conda is installed.

The fix is to use the ``./bin/conda`` executable in the conda
git repository to force reinstall conda. That is, run
``./bin/conda install -f conda``. You can then verify with
``conda info`` that you have the latest version of conda, and not
a git checkout. The version should not include any hashes.


.. _unknown-locale:

macOS error "ValueError unknown locale: UTF-8"
==============================================

Cause
-----

This is a bug in the macOS Terminal app that shows up only in
certain locales. Locales are country-language combinations.


Solution
--------

#. Open Terminal in ``/Applications/Utilities``

#. Clear the Set locale environment variables on startup checkbox.

   .. figure:: /img/conda_locale.jpg

      ..

   |

This sets your ``LANG`` environment variable to be empty. This may
cause Terminal to use incorrect settings for your locale. The
``locale`` command in Terminal tells you what settings are used.

To use the correct language, add a line to your bash profile,
which is typically ``~/.profile``:

.. code-block:: bash

   export LANG=your-lang

.. note::
   Replace ``your-lang`` with the correct locale specifier for
   your language.

The command ``locale -a`` displays all the specifiers. For
example, the language code for US English is ``en_US.UTF-8``. The
locale affects what translations are used when they are available
and also how dates, currencies, and decimals are formatted.


.. _AttributeError-getproxies:

AttributeError or missing getproxies
====================================

When running a command such as ``conda update ipython``, you may
get an ``AttributeError: 'module' object has no attribute
'getproxies'``.

Cause
-----

This can be caused by an old version of ``requests`` or by having
the ``PYTHONPATH`` environment variable set.

Solution
--------

Update ``requests`` and be sure ``PYTHONPATH`` is not set:

#. Run ``conda info -a`` to show the ``requests`` version and
   various environment variables such as ``PYTHONPATH``.

#. Update the ``requests`` version with
   ``pip install -U requests``.

#. Clear ``PYTHONPATH``:

   * On Windows, clear it the environment variable settings.

   * On macOS and Linux, clear it by removing it from the bash
     profile and restarting the shell.


.. _shell-command-location:

Shell commands open from the wrong location
===========================================

When you run a command within a conda environment, conda does not
access the correct package executable.

Cause
-----

In both bash and zsh, when you enter a command, the shell
searches the paths in PATH one by one until it finds the command.
The shell then caches the location, which is called hashing in
shell terminology. When you run command again, the shell does not
have to search the PATH again.

The problem is that before you installed the program, you ran a command which
loaded and hashed another version of that program in some other location on
the PATH, such as ``/usr/bin``. Then you installed the program
using ``conda install``, but the shell still had the old instance
hashed.


Solution
--------

Reactivate the environment or run ``hash -r`` (in bash) or
``rehash`` (in zsh).

When you run ``conda activate``, conda automatically runs
``hash -r`` in bash and ``rehash`` in zsh to clear the hashed
commands, so conda finds things in the new path on the PATH. But
there is no way to do this when ``conda install`` is run because
the command must be run inside the shell itself, meaning either
you have to run the command yourself or used a source file that
contains the command.

This is a relatively rare problem, since this happens only in the
following circumstances:

#. You activate an environment or use the root environment, and
   then run a command from somewhere else.

#. Then you ``conda install`` a program, and then try to run the
   program again without running ``activate`` or
   ``deactivate``.

The command ``type command_name`` always tells you exactly what
is being run. This is better than ``which command_name``, which
ignores hashed commands and searches the PATH directly.
The hash is reset by ``conda activate`` or by ``hash -r`` in bash or
``rehash`` in zsh.


.. _wrong-python:

Programs fail due to invoking conda Python instead of system Python
===================================================================

Cause
-----

After installing Anaconda or Miniconda, programs that run
``python`` switch from invoking the system Python to invoking the
Python in the root conda environment. If these programs rely on
the system Python to have certain configurations or dependencies
that are not in the root conda environment Python, the programs
may crash. For example, some users of the Cinnamon desktop
environment on Linux Mint have reported these crashes.


Solution
--------

Edit your ``.bash_profile`` and ``.bashrc`` files so that the
conda binary directory, such as ``~/miniconda3/bin``, is no
longer added to the PATH environment variable. You can still run
``conda activate`` and ``conda deactivate`` by using their full
path names, such as ``~/miniconda3/bin/conda``.

You may also create a folder with symbolic links to ``conda activate``
and ``conda deactivate`` and then edit your
``.bash_profile`` or ``.bashrc`` file to add this folder to your
PATH. If you do this, running ``python`` will invoke the system
Python, but running ``conda`` commands, ``conda activate MyEnv``,
``conda activate root``, or ``conda deactivate`` will work
normally.

After running ``conda activate`` to activate any environment,
including after running ``conda activate root``, running
``python`` will invoke the Python in the active conda environment.


.. _unsatisfiable:

UnsatisfiableSpecifications error
=================================

Cause
-----

Some conda package installation specifications are impossible to
satisfy. For example, ``conda create -n tmp python=3 wxpython=3``
produces an "Unsatisfiable Specifications" error because wxPython
3 depends on Python 2.7, so the specification to install Python 3
conflicts with the specification to install wxPython 3.

When an unsatisfiable request is made to conda, conda shows a
message such as this one::

    The following specifications were found to be in conflict:
    - python 3*
    - wxpython 3* -> python 2.7*
    Use ``conda search <package> --info`` to see the dependencies
    for each package.

This indicates that the specification to install wxpython 3
depends on installing Python 2.7, which conflicts with the
specification to install Python 3.

Solution
--------

Use ``conda search wxpython --info`` or ``conda search 'wxpython=3' --info``
to show information about this package and its dependencies::

    wxpython 3.0 py27_0
    -------------------
    file name   : wxpython-3.0-py27_0.tar.bz2
    name        : wxpython
    version     : 3.0
    build number: 0
    build string: py27_0
    channel     : defaults
    size        : 34.1 MB
    date        : 2014-01-10
    fn          : wxpython-3.0-py27_0.tar.bz2
    license_family: Other
    md5         : adc6285edfd29a28224c410a39d4bdad
    priority    : 2
    schannel    : defaults
    url         : https://repo.continuum.io/pkgs/free/osx-64/wxpython-3.0-py27_0.tar.bz2
    dependencies:
        python 2.7*
        python.app


By examining the dependencies of each package, you should be able
to determine why the installation request produced a conflict and
modify the request so it can be satisfied without conflicts. In
this example, you could install wxPython with Python 2.7::

    conda create -n tmp python=2.7 wxpython=3


.. _version-from-channel:

Package installation fails from a specific channel
==================================================

Cause
-----

Sometimes it is necessary to install a specific version from a
specific channel because that version is not available from the
default channel.


Solution
--------

The following example describes the problem in detail and its
solution.

Suppose you have a specific need to install the Python
``cx_freeze`` module with Python 3.4. A first step is to create a
Python 3.4 environment:

.. code-block:: bash

   conda create -n py34 python=3.4

Using this environment you should first attempt:

.. code-block:: bash

   conda install -n py34 cx_freeze

However, when you do this you get the following error::

   Using Anaconda Cloud api site https://api.anaconda.org
   Fetching package metadata .........
   Solving package specifications: .
   Error: Package missing in current osx-64 channels:
   - cx_freeze

   You can search for packages on anaconda.org with

     anaconda search -t conda cx_freeze

The message indicates that ``cx_freeze`` cannot be found in the
default package channels. However, there may be a
community-created version available and you can search for it by
running the following command:

.. code-block:: bash

   $ anaconda search -t conda cx_freeze
   Using Anaconda Cloud api site https://api.anaconda.org
   Run 'anaconda show <USER/PACKAGE>' to get more details:
   Packages:
        Name                      |  Version | Package Types   | Platforms
        ------------------------- |   ------ | --------------- | ---------------
        inso/cx_freeze            |    4.3.3 | conda           | linux-64
        pyzo/cx_freeze            |    4.3.3 | conda           | linux-64, win-32, win-64, linux-32, osx-64
                                             : http://cx-freeze.sourceforge.net/
        silg2/cx_freeze           |    4.3.4 | conda           | linux-64
                                             : create standalone executables from Python scripts
        takluyver/cx_freeze       |    4.3.3 | conda           | linux-64
   Found 4 packages


In this example, there are 4 different places that you could try
to get the package. None of them are officially supported or
endorsed by Anaconda, but members of the conda community have
provided many valuable packages. If you want to go with public
opinion, then `the web interface
<https://anaconda.org/search?q=cx_freeze>`_ provides more
information:

.. figure:: /img/conda_package-popularity.png
   :alt: cx_freeze packages on anaconda.org

   ..

|

Notice that the ``pyzo`` organization has by far the most
downloads, so you might choose to use their package. If so, you
can add their organization's channel by specifying it on the
command line:

.. code-block:: bash

   $ conda create -c pyzo -n cxfreeze_py34 cx_freeze python=3.4
   Using Anaconda Cloud api site https://api.anaconda.org
   Fetching package metadata: ..........
   Solving package specifications: .........

   Package plan for installation in environment /Users/username/anaconda/envs/cxfreeze_py34:

   The following packages will be downloaded:

       package                    |            build
       ---------------------------|-----------------
       cx_freeze-4.3.3            |           py34_4         1.8 MB
       setuptools-20.7.0          |           py34_0         459 KB
       ------------------------------------------------------------
                                              Total:         2.3 MB

   The following NEW packages will be INSTALLED:

       cx_freeze:  4.3.3-py34_4
       openssl:    1.0.2h-0
       pip:        8.1.1-py34_1
       python:     3.4.4-0
       readline:   6.2-2
       setuptools: 20.7.0-py34_0
       sqlite:     3.9.2-0
       tk:         8.5.18-0
       wheel:      0.29.0-py34_0
       xz:         5.0.5-1
       zlib:       1.2.8-0


Now you have a software environment sandbox created with Python
3.4 and ``cx_freeze``.


.. _auto-upgrade:

Conda automatically upgrades to unwanted version
================================================

When making a Python package for an app, you create an
environment for the app from a file ``req.txt`` that sets a
certain version, such as ``python=2.7.9``. However, when you
``conda install`` your package, it automatically upgrades to a
later version, such as ``2.7.10``.

Cause
-----

If you make a conda package for the app using conda-build, you
can set dependencies with specific version numbers. The
requirements lines that say ``- python`` could be
``- python ==2.7.9`` instead. It is important to have 1 space
before the == operator and no space after.

Solution
--------

Exercise caution when coding version requirements.

.. _upgrade-error:

Conda upgrade error
===================

Cause
-----
Downgrading conda from 4.6.1 to 4.5.x and then trying to ``conda install conda`` or  ``conda upgrade conda`` will produce a solving and upgrade error similar to the following:

.. code-block:: bash

   Solving environment: failed
   CondaUpgradeError: This environment has previously been operated on by a conda version that's newer than the conda currently being used. A newer version of conda is required.
   target environment location: /opt/conda
   current conda version: 4.5.9
   minimum conda version: 4.6

Solution
--------

Change the ``.condarc`` file. Set the parameter by editing the ``.condarc`` file directly:
``allow_conda_downgrades: true`` in conda version 4.5.12. This will then let you upgrade. If you have something older than 4.5.12, install conda 4.6.1 again from the package cache.

EXAMPLE: If my conda info says package cache : /opt/conda/pkgs and my Python version is 3.7, then on the command line, type ``conda install /opt/conda/pkgs/conda-4.6.1-py37_0.tar.bz2`` to resolve the issue.



ValidationError: Invalid value for timestamp
============================================

Cause
-----

This happens when certain packages are installed with conda 4.3.28, and then
conda is downgraded to 4.3.27 or earlier.

Solution
--------

See https://github.com/conda/conda/issues/6096.



Unicode error after installing Python 2
=======================================

Example: UnicodeDecodeError: 'ascii' codec can't decode byte 0xd3 in position 1: ordinal not in range(128)

Cause
-----

Python 2 is incapable of handling unicode properly, especially on Windows. In this case, if any character in your PATH env. var contains anything that is not ASCII then you see this exception.

Solution
--------

Remove all non-ASCII from PATH or switch to Python 3.


Windows environment has not been activated
==========================================

Cause
-----
You may receive a warning message if you have not activated your environment:

.. code-block::

   Warning:
   This Python interpreter is in a conda environment, but the environment has
   not been activated. Libraries may fail to load. To activate this environment
   please see https://conda.io/activation

Solution
--------

If you receive this warning, you need to activate your environment.
To do so on Windows, use the Anaconda Prompt shortcut in your Windows
start menu. If you have an existing cmd.exe session that you’d like to
activate conda in, run:
``call <your anaconda/miniconda install location>\Scripts\activate base``.


.. _path-error:

The system cannot find the path specified on Windows
====================================================

Cause
-----
PATH does not contain entries for all of the necessary conda directories.
PATH may have too many entries from 3rd party software adding itself to
PATH at install time, despite the user not needing to run the software via PATH lookup.

Solution
--------

Strip PATH to have fewer entries and activate your environment.

If there's some software that needs to be found on PATH (you run it via
the CLI), we recommend that you create your own batch files to set PATH
dynamically within a console session, rather than permanently modifying
PATH in the system settings.

For example, a new conda prompt batch file that first strips PATH, then
calls the correct activation procedure could look like:

.. code-block:: console

   set
   PATH=”%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;<3rd-party-entries>”
   call “<miniconda/anaconda root>\Scripts\activate”

If you need to run 3rd party software (software other than Windows
built-ins and Anaconda) from this custom conda prompt, then you should add
those entries (and only those strictly necessary) to the set PATH entry
above. Note that only the quotes wrapping the entire expression should be
there. That is how variables are properly set in batch scripts, and these
account for any spaces in any entries in PATH. No additional quotes should
be within the value assigned to PATH.

To make 3rd party software take precedence over the same-named programs
as supplied by conda, add it to PATH after activating conda:

.. code-block:: console

   set
   “PATH=%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\”
   call “<miniconda/anaconda root>\Scripts\activate”
   set “PATH=<3rd-party-entries>;%PATH%”


To make conda software take precedence, call the activation script last.
Because activation prepends the conda environment PATH entries,
they have priority.

.. code-block:: console

   set
   PATH=”%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;<3rd-party-entries>”
   call “<miniconda/anaconda root>\Scripts\activate”
==========
User guide
==========

.. toctree::
   :maxdepth: 1
   :hidden:

   concepts/index
   getting-started
   install/index
   configuration/index
   tasks/index
   cheatsheet
   troubleshooting

:doc:`Home <../index>` | :doc:`Concepts <concepts/index>` | :doc:`Getting started <getting-started>` | :doc:`Installation <install/index>` | :doc:`Configuration <configuration/index>` | :doc:`Tasks <tasks/index>` | :ref:`Additional resources <addl-resources>`

**Get started**

* :doc:`See what conda is and what it does <../index>`.
* :doc:`Learn conda concepts and fundamentals <concepts/index>`.
* :doc:`Create your first conda project in 20 minutes <getting-started>`.
* :doc:`View system requirements and installation directions <install/index>`.


**Dive deeper**

* :doc:`Configure your conda files <configuration/index>`.
* Follow the :doc:`tasks <tasks/index>` to :doc:`manage conda environments <tasks/manage-environments>`, :doc:`channels <tasks/manage-channels>`, :doc:`packages<tasks/manage-pkgs>`, and more.


.. _addl-resources:

**Additional resources**

* :doc:`Cheat sheet <cheatsheet>`.
* :doc:`Troubleshooting <troubleshooting>`.
===========
Cheat sheet
===========

See the :download:`conda cheat sheet <conda-cheatsheet.pdf>` PDF
(1 MB) for a single-page summary of the most important
information about using conda.
===========================================
Using the .condarc conda configuration file
===========================================

.. toctree::

.. contents::
   :local:
   :depth: 1

.. _config-overview:

Overview
========

The conda configuration file, ``.condarc``, is an optional
runtime configuration file that allows advanced users to
configure various aspects of conda, such as which channels it
searches for packages, proxy settings, and environment
directories. For all of the conda configuration options,
see the :doc:`configuration page <../../configuration>`.


.. note::

   A ``.condarc`` file can also be used in an
   administrator-controlled installation to override the users’
   configuration. See :doc:`admin-multi-user-install`.

The ``.condarc`` file can change many parameters, including:

* Where conda looks for packages.

* If and how conda uses a proxy server.

* Where conda lists known environments.

* Whether to update the Bash prompt with the currently activated
  environment name.

* Whether user-built packages should be uploaded to
  `Anaconda.org <http://anaconda.org>`_.

* What default packages or features to include in new environments.

Creating and editing
====================

The ``.condarc`` file is not included by default, but it is
automatically created in your home directory the first time you
run the ``conda config`` command. To create or modify a ``.condarc``
file, open Anaconda Prompt or a terminal and enter the
``conda config`` command.

The ``.condarc`` configuration file follows simple
`YAML syntax <http://docs.ansible.com/YAMLSyntax.html>`_.

EXAMPLE:

.. code-block:: yaml

  conda config --add channels conda-forge

Alternatively, you can open a text editor such as Notepad
on Windows, TextEdit on macOS, or VS Code. Name the new file
``.condarc`` and save it to your user home directory or root
directory. To edit the ``.condarc`` file, open it from your
home or root directory and make edits in the same way you would
with any other text file. If the ``.condarc`` file is in the root
environment, it will override any in the home directory.

You can find information about your ``.condarc`` file by typing
``conda info`` in your terminal or Anaconda Prompt.
This will give you information about your ``.condarc`` file,
including where it is located.

You can also download a :doc:`sample .condarc file
<sample-condarc>` to edit in your editor and save to your user
home directory or root directory.

To set configuration options, edit the ``.condarc`` file directly
or use the ``conda config --set`` command.

EXAMPLE: To set the ``auto_update_conda option`` to ``False``, run::

  conda config --set auto_update_conda False

For a complete list of conda config commands, see the
:doc:`command reference <../../commands/config>`. The same list
is available at the terminal or Anaconda Prompt by running
``conda config --help``. You can also see the `conda channel
configuration <https://conda.io/projects/conda/en/latest/configuration.html>`_ for more information.

.. tip::

   Conda supports :doc:`tab completion <enable-tab-completion>`
   with external packages instead of internal configuration.

Conda supports a wide range of configuration options. This page
gives a non-exhaustive list of the most frequently used options and
their usage. For a complete list of all available options for your
version of conda, use the ``conda config --describe`` command.

Searching for .condarc
======================

Conda looks in the following locations for a ``.condarc`` file:

.. code-block:: python

  if on_win:
      SEARCH_PATH = (
          "C:/ProgramData/conda/.condarc",
          "C:/ProgramData/conda/condarc",
          "C:/ProgramData/conda/condarc.d",
      )
  else:
      SEARCH_PATH = (
          "/etc/conda/.condarc",
          "/etc/conda/condarc",
          "/etc/conda/condarc.d/",
          "/var/lib/conda/.condarc",
          "/var/lib/conda/condarc",
          "/var/lib/conda/condarc.d/",
      )

  SEARCH_PATH += (
      "$CONDA_ROOT/.condarc",
      "$CONDA_ROOT/condarc",
      "$CONDA_ROOT/condarc.d/",
      "$XDG_CONFIG_HOME/conda/.condarc",
      "$XDG_CONFIG_HOME/conda/condarc",
      "$XDG_CONFIG_HOME/conda/condarc.d/",
      "~/.config/conda/.condarc",
      "~/.config/conda/condarc",
      "~/.config/conda/condarc.d/",
      "~/.conda/.condarc",
      "~/.conda/condarc",
      "~/.conda/condarc.d/",
      "~/.condarc",
      "$CONDA_PREFIX/.condarc",
      "$CONDA_PREFIX/condarc",
      "$CONDA_PREFIX/condarc.d/",
      "$CONDARC",
  )

``XDG_CONFIG_HOME`` is the path to where user-specific configuration files should
be stored defined following The XDG Base Directory Specification (XDGBDS). Default
to $HOME/.config should be used.
``CONDA_ROOT`` is the path for your base conda install.
``CONDA_PREFIX`` is the path to the current active environment.

Conflict merging strategy
-------------------------
When conflicts between configurations arise, the following strategies are employed:

* Lists - merge
* Dictionaries - merge
* Primitive - clobber

Precedence
----------

The precedence by which the conda configuration is built out is shown below.
Each new arrow takes precedence over the ones before it. For example, config
files (by parse order) will be superceded by any of the other configuration
options. Configuration environment variables (formatted like ``CONDA_<CONFIG NAME>``)
will always take precedence over the other 3.

.. figure:: /img/config-precedence.png

   ..


General configuration
=====================

* :ref:`config-channels`
* :ref:`allow-other-channels`
* :ref:`default-channels`
* :ref:`auto-update-conda`
* :ref:`always-yes`
* :ref:`show-channel-urls`
* :ref:`change-command-prompt`
* :ref:`add-pip-python-dependency`
* :ref:`use-pip`
* :ref:`config-proxy`
* :ref:`SSL_verification`
* :ref:`offline-mode-only`

.. _config-channels:

Channel locations (channels)
----------------------------

Listing channel locations in the ``.condarc`` file overrides
conda defaults, causing conda to search only the channels listed
here, in the order given.

Use ``defaults`` to automatically include all default channels.
Non-URL channels are interpreted as Anaconda.org user names. You
can change this by modifying the ``channel_alias`` as described
in :ref:`set-ch-alias`. The default is just ``defaults``.

EXAMPLE:

.. code-block:: yaml

  channels:
    - <anaconda_dot_org_username>
    - http://some.custom/channel
    - file:///some/local/directory
    - defaults

To select channels for a single environment, put a ``.condarc``
file in the root directory of that environment (or use the
``--env`` option when using ``conda config``).

EXAMPLE: If you have installed Miniconda with Python 3 in your
home directory and the environment is named "flowers", the
path may be::

  ~/miniconda3/envs/flowers/.condarc

.. _allow-other-channels:

Allow other channels (allow_other_channels)
-------------------------------------------

The system-level ``.condarc`` file may specify a set of allowed
channels, and it may allow users to install packages from other
channels with the boolean flag ``allow_other_channels``. The default
is ``True``.

If ``allow_other_channels`` is set to ``False``, only those channels
explicitly specified in the system ``.condarc`` file are allowed:

.. code-block:: yaml

  allow_other_channels: False

When ``allow_other_channels`` is set to ``True`` or not specified,
each user has access to the default channels and to any channels
that the user specifies in their local ``.condarc`` file. When
``allow_other_channels`` is set to ``false``, if the user specifies
other channels, the other channels are blocked and the user
receives a message reporting that channels are blocked. For more
information, see :ref:`admin-inst`.

If the system ``.condarc`` file specifies a ``channel_alias``,
it overrides any channel aliases set in a user's ``.condarc``
file. See :ref:`channel-alias`.


.. _default-channels:

Default channels (default_channels)
-----------------------------------

Normally the defaults channel points to several channels at the
`repo.anaconda.com <https://repo.anaconda.com/>`_ repository, but if
``default_channels`` is defined, it sets the new list of default channels.
This is especially useful for airgapped and enterprise installations:

To ensure that all users only pull packages from an on-premises
repository, an administrator can set both :ref:`channel alias <channel-alias>` and
``default_channels``.

.. code-block:: yaml

  default_channels:
    - http://some.custom/channel
    - file:///some/local/directory

.. _auto-update-conda:

Update conda automatically (auto_update_conda)
----------------------------------------------

When ``True``, conda updates itself any time a user updates or
installs a package in the root environment. When ``False``,
conda updates itself only if the user manually issues a
``conda update`` command. The default is ``True``.

EXAMPLE:

.. code-block:: yaml

  auto_update_conda: False

.. _always-yes:

Always yes (always_yes)
-----------------------

Choose the ``yes`` option whenever asked to proceed, such as
when installing. Same as using the ``--yes`` flag at the
command line. The default is ``False``.

EXAMPLE:

.. code-block:: yaml

  always_yes: True

.. _show-channel-urls:

Show channel URLs (show_channel_urls)
-------------------------------------

Show channel URLs when displaying what is going to be downloaded
and in ``conda list``. The default is ``False``.

EXAMPLE:

.. code-block:: yaml

  show_channel_urls: True

.. _change-command-prompt:

Change command prompt (changeps1)
---------------------------------

When using ``conda activate``, change the command prompt from ``$PS1``
to include the activated environment. The default is ``True``.

EXAMPLE:

.. code-block:: yaml

  changeps1: False

.. _add-pip-python-dependency:

Add pip as Python dependency (add_pip_as_python_dependency)
-----------------------------------------------------------

Add pip, wheel, and setuptools as dependencies of Python. This
ensures that pip, wheel, and setuptools are always installed any
time Python is installed. The default is ``True``.

EXAMPLE:

.. code-block:: yaml

  add_pip_as_python_dependency: False

.. _use-pip:

Use pip (use_pip)
-----------------

Use pip when listing packages with ``conda list``. This does not
affect any conda command or functionality other than the output
of the command ``conda list``. The default is ``True``.

EXAMPLE:

.. code-block:: yaml

  use_pip: False


.. _config-proxy:

Configure conda for use behind a proxy server (proxy_servers)
-------------------------------------------------------------

By default, proxy settings are pulled from the HTTP_PROXY and
HTTPS_PROXY environment variables or the system. Setting them
here overrides that default:

.. code-block:: yaml

  proxy_servers:
      http: http://user:pass@corp.com:8080
      https: https://user:pass@corp.com:8080

To give a proxy for a specific scheme and host, use the
scheme://hostname form for the key. This matches for any request
to the given scheme and exact host name:

.. code-block:: yaml

  proxy_servers:
    'http://10.20.1.128': 'http://10.10.1.10:5323'

If you do not include the username and password or if
authentication fails, conda prompts for a username and password.

If your password contains special characters, you need escape
them as described in `Percent-encoding reserved characters
<https://en.wikipedia.org/wiki/Percent-encoding#Percent-encoding_reserved_characters>`_
on Wikipedia.

Be careful not to use ``http`` when you mean https or
``https`` when you mean http.


.. _SSL_verification:

SSL verification (ssl_verify)
-----------------------------

If you are behind a proxy that does SSL inspection such as a
Cisco IronPort Web Security Appliance (WSA), you may need to use
``ssl_verify`` to override the SSL verification settings.

By default this variable is ``True``, which means that SSL
verification is used and conda verifies certificates for SSL
connections. Setting this variable to ``False`` disables the
connection's normal security and is not recommended:

.. code-block:: yaml

  ssl_verify: False

You can also set ``ssl_verify`` to a string path to a certificate,
which can be used to verify SSL connections:

.. code-block:: yaml

  ssl_verify: corp.crt

.. _offline-mode-only:

Offline mode only (offline)
---------------------------

Filters out all channel URLs that do not use the ``file://``
protocol. The default is ``False``.

EXAMPLE:

.. code-block:: yaml

  offline: True


Advanced configuration
======================
* :ref:`disallow-soft-linking`
* :ref:`set-ch-alias`
* :ref:`config-add-default-pkgs`
* :ref:`track-features`
* :ref:`disable-updating`
* :ref:`disallow-install`
* :ref:`add-anaconda-token`
* :ref:`specify-env-directories`
* :ref:`specify-pkg-directories`
* :ref:`use-only-tar-bz2`

.. _disallow-soft-linking:

Disallow soft-linking (allow_softlinks)
---------------------------------------

When ``allow_softlinks`` is ``True``, conda uses hard-links when
possible and soft-links---symlinks---when hard-links are not
possible, such as when installing on a different file system
than the one that the package cache is on.

When ``allow_softlinks`` is ``False``, conda still uses
hard-links when possible, but when it is not possible, conda
copies files. Individual packages can override this option,
specifying that certain files should never be soft-linked.

The default is ``True``.

EXAMPLE:

.. code-block:: yaml

  allow_softlinks: False


.. _set-ch-alias:

.. _channel-alias:

Set a channel alias (channel_alias)
-----------------------------------

Whenever you use the ``-c`` or ``--channel`` flag to give conda a
channel name that is not a URL, conda prepends the ``channel_alias``
to the name that it was given. The default ``channel_alias`` is
https://conda.anaconda.org.

If ``channel_alias`` is set
to ``https://my.anaconda.repo:8080/conda/``, then a user who runs the
command ``conda install -c conda-forge some-package`` will install the
package some-package from https://my.anaconda.repo:8080/conda/conda-forge.

For example, the command::

  conda install --channel asmeurer <package>

is the same as::

  conda install --channel https://conda.anaconda.org/asmeurer <package>

You can set ``channel_alias`` to your own repository.

EXAMPLE: To set ``channel_alias`` to your repository at
https://your.repo.com:

.. code-block:: yaml

  channel_alias: https://your.repo/

On Windows, you must include a slash ("/") at the end of the URL:

EXAMPLE: https://your.repo/conda/

When ``channel_alias`` set to your repository at
https://your.repo.com::

  conda install --channel jsmith <package>

is the same as::

  conda install --channel https://your.repo.com/jsmith <package>


.. _config-add-default-pkgs:

Always add packages by default (create_default_packages)
--------------------------------------------------------

When creating new environments, add the specified packages by
default. The default packages are installed in every environment
you create. You can override this option at the command prompt
with the ``--no-default-packages`` flag. The default is to not
include any packages.

EXAMPLE:

.. code-block:: yaml

  create_default_packages:
    - pip
    - ipython
    - scipy=0.15.0

.. _track-features:

Track features (track_features)
-------------------------------

Enable certain features to be tracked by default. The default is
to not track any features. This is similar to adding MKL to
the ``create_default_packages`` list.

EXAMPLE:

.. code-block:: yaml

  track_features:
    - mkl

.. _disable-updating:

Disable updating of dependencies (update_dependencies)
------------------------------------------------------

By default, ``conda install`` updates the given package to the
latest version and installs any dependencies necessary for
that package. However, if dependencies that satisfy the package's
requirements are already installed, conda will not update those
packages to the latest version.

In this case, if you would prefer that conda update all dependencies
to the latest version that is compatible with the environment,
set ``update_dependencies`` to ``True``.

The default is ``False``.

EXAMPLE:

.. code-block:: yaml

   update_dependencies: True

.. note::

   Conda still ensures that dependency specifications are
   satisfied. Thus, some dependencies may still be updated or,
   conversely, this may prevent packages given at the command line
   from being updated to their latest versions. You can always
   specify versions at the command line to force conda to install a
   given version, such as ``conda install numpy=1.9.3``.

To avoid updating only specific packages in an environment, a
better option may be to pin them. For more information, see
:ref:`pinning-packages`.

.. _disallow-install:

Disallow installation of specific packages (disallow)
-----------------------------------------------------

Disallow the installation of certain packages. The default is to
allow installation of all packages.

EXAMPLE:

.. code-block:: yaml

  disallow:
    - anaconda

.. _add-anaconda-token:

Add Anaconda.org token to automatically see private packages (add_anaconda_token)
---------------------------------------------------------------------------------

When the channel alias is Anaconda.org or an Anaconda Server GUI,
you can set the system configuration so that users automatically
see private packages. Anaconda.org was formerly known as
binstar.org. This uses the Anaconda command-line client, which
you can install with ``conda install anaconda-client``, to
automatically add the token to the channel URLs.

The default is ``True``.

EXAMPLE:

.. code-block:: yaml

  add_anaconda_token: False

.. note::

   Even when set to ``True``, this setting is enabled only if
   the Anaconda command-line client is installed and you are
   logged in with the ``anaconda login`` command.

.. _specify-env-directories:

Specify environment directories (envs_dirs)
-------------------------------------------

Specify directories in which environments are located. If this
key is set, the root prefix ``envs_dir`` is not used unless
explicitly included. This key also determines where the package
caches are located.

For each envs here, ``envs/pkgs`` is used as the pkgs cache,
except for the standard ``envs`` directory in the root
directory, for which the normal ``root_dir/pkgs`` is used.

EXAMPLE:

.. code-block:: yaml

  envs_dirs:
    - ~/my-envs
    - /opt/anaconda/envs

The ``CONDA_ENVS_PATH`` environment variable overwrites the ``envs_dirs`` setting:

* For macOS and Linux:
  ``CONDA_ENVS_PATH=~/my-envs:/opt/anaconda/envs``

* For Windows:
  ``set CONDA_ENVS_PATH=C:\Users\joe\envs;C:\Anaconda\envs``

.. _specify-pkg-directories:

Specify package directories (pkgs_dirs)
---------------------------------------

Specify directories in which packages are located. If this
key is set, the root prefix ``pkgs_dirs`` is not used unless
explicitly included.

If the ``pkgs_dirs`` key is not set, then ``envs/pkgs`` is used
as the pkgs cache, except for the standard ``envs`` directory in the root
directory, for which the normal ``root_dir/pkgs`` is used.

EXAMPLE:

.. code-block:: yaml

  pkgs_dirs:
    - /opt/anaconda/pkgs

The ``CONDA_PKGS_DIRS`` environment variable overwrites the
``pkgs_dirs`` setting:

* For macOS and Linux:
  ``CONDA_PKGS_DIRS=/opt/anaconda/pkgs``

* For Windows:
  ``set CONDA_PKGS_DIRS=C:\Anaconda\pkgs``

.. _use-only-tar-bz2:

Force conda to download only .tar.bz2 packages (use_only_tar_bz2)
-----------------------------------------------------------------

Conda 4.7 introduced a new ``.conda`` package file format.
``.conda`` is a more compact and faster alternative to ``.tar.bz2`` packages.
It's thus the preferred file format to use where available.

Nevertheless, it's possible to force conda to only download ``.tar.bz2`` packages
by setting the ``use_only_tar_bz2`` boolean to ``True``.

The default is ``False``.

EXAMPLE:

.. code-block:: yaml

  use_only_tar_bz2: True

.. note::

   This is forced to ``True`` if conda-build is installed and older than 3.18.3,
   because older versions of conda break when conda feeds it the new file format.

Conda-build configuration
=========================

* :ref:`specify-root-dir`
* :ref:`specify-output-folder`
* :ref:`auto-upload`
* :ref:`anaconda-token`
* :ref:`quiet`
* :ref:`filename-hashing`
* :ref:`no-verify`
* :ref:`set-build-id`
* :ref:`skip-existing`
* :ref:`include-recipe`
* :ref:`disable-activation`
* :ref:`long-test-prefix`
* :ref:`pypi-upload-settings`
* :ref:`pypi-repository`
* :ref:`threads`


.. _specify-root-dir:

Specify conda-build output root directory (root-dir)
----------------------------------------------------

Build output root directory. You can also set this with the
``CONDA_BLD_PATH`` environment variable. The default is
``<CONDA_PREFIX>/conda-bld/``. If you do not have write
permissions to ``<CONDA_PREFIX>/conda-bld/``, the default is
``~/conda-bld/``.

EXAMPLE:

.. code-block:: yaml

  conda-build:
      root-dir: ~/conda-builds


.. _specify-output-folder:

Specify conda-build build folder (conda-build 3.16.3+) (output_folder)
----------------------------------------------------------------------

Folder to dump output package to. Packages are moved here if build or test
succeeds. If unset, the output folder corresponds to the same directory as
the root build directory (``root-dir``).

.. code-block:: yaml

   conda-build:
       output_folder: conda-bld

.. _auto-upload:

Automatically upload conda-build packages to Anaconda.org (anaconda_upload)
---------------------------------------------------------------------------

Automatically upload packages built with conda-build to
`Anaconda.org <http://anaconda.org>`_. The default is ``False``.

EXAMPLE:

.. code-block:: yaml

  anaconda_upload: True

.. _anaconda-token:

Token to be used for Anaconda.org uploads (conda-build 3.0+) (anaconda_token)
-----------------------------------------------------------------------------

Tokens are a means of authenticating with Anaconda.org without logging in.
You can pass your token to conda-build with this condarc setting, or with a CLI
argument. This is unset by default. Setting it implicitly enables
``anaconda_upload``.

  .. code-block:: yaml

     conda-build:
         anaconda_token: gobbledygook

.. _quiet:

Limit build output verbosity (conda-build 3.0+) (quiet)
-------------------------------------------------------

Conda-build's output verbosity can be reduced with the ``quiet`` setting. For
more verbosity use the CLI flag ``--debug``.

.. code-block:: yaml

   conda-build:
       quiet: true

.. _filename-hashing:

Disable filename hashing (conda-build 3.0+) (filename_hashing)
--------------------------------------------------------------

Conda-build 3 adds hashes to filenames to allow greater customization of
dependency versions. If you find this disruptive, you can disable the hashing
with the following config entry:

.. code-block:: yaml

   conda-build:
       filename_hashing: false

.. warning::

   Conda-build does not check when clobbering packages. If you
   utilize conda-build 3's build matrices with a build configuration that is not
   reflected in the build string, packages will be missing due to clobbering.

.. _no-verify:

Disable recipe and package verification (conda-build 3.0+) (no_verify)
----------------------------------------------------------------------

By default, conda-build uses conda-verify to ensure that your recipe
and package meet some minimum sanity checks. You can disable these:

.. code-block:: yaml

   conda-build:
       no_verify: true


.. _set-build-id:

Disable per-build folder creation (conda-build 3.0+) (set_build_id)
-------------------------------------------------------------------

By default, conda-build creates a new folder for each build, named for the
package name plus a timestamp. This allows you to do multiple builds at once.
If you have issues with long paths, you may need to disable this behavior.
You should first try to change the build output root directory with the
``root-dir`` setting described above, but fall back to this as necessary:

.. code-block:: yaml

   conda-build:
       set_build_id: false

.. _skip-existing:

Skip building packages that already exist (conda-build 3.0+) (skip_existing)
----------------------------------------------------------------------------

By default, conda-build builds all recipes that you specify. You can instead
skip recipes that are already built. A recipe is skipped if and only if *all* of
its outputs are available on your currently configured channels.

.. code-block:: yaml

   conda-build:
       skip_existing: true

.. _include-recipe:

Omit recipe from package (conda-build 3.0+) (include_recipe)
------------------------------------------------------------

By default, conda-build includes the recipe that was used to build the package.
If this contains sensitive or proprietary information, you can omit the recipe.

.. code-block:: yaml

   conda-build:
       include_recipe: false

.. note::

   If you do not include the recipe, you cannot use conda-build to test
   the package after the build completes. This means that you cannot split your
   build and test steps across two distinct CLI commands (``conda build --notest
   recipe`` and ``conda build -t recipe``). If you need to omit the recipe and
   split your steps, your only option is to remove the recipe files from the
   tarball artifacts after your test step. Conda-build does not provide tools for
   doing that.

.. _disable-activation:

Disable activation of environments during build/test (conda-build 3.0+) (activate)
----------------------------------------------------------------------------------

By default, conda-build activates the build and test environments prior to
executing the build or test scripts. This adds necessary PATH entries, and also
runs any activate.d scripts you may have. If you disable activation, the PATH
will still be modified, but the activate.d scripts will not run. This is not
recommended, but some people prefer this.

.. code-block:: yaml

   conda-build:
       activate: false

.. _long-test-prefix:

Disable long prefix during test (conda-build 3.16.3+) (long_test_prefix)
------------------------------------------------------------------------

By default, conda-build uses a long prefix for the test prefix. If you have recipes
that fail in long prefixes but would still like to test them in short prefixes, you
can disable the long test prefix. This is not recommended.

.. code-block:: yaml

   conda-build:
       long_test_prefix: false

The default is ``true``.

.. _pypi-upload-settings:

PyPI upload settings (conda-build 3.0+) (pypirc)
------------------------------------------------

Unset by default. If you have wheel outputs in your recipe, conda-build will
try to upload them to the PyPI repository specified by the ``pypi_repository``
setting using credentials from this file path.

.. code-block:: yaml

   conda-build:
       pypirc: ~/.pypirc

.. _pypi-repository:

PyPI repository to upload to (conda-build 3.0+) (pypi_repository)
-----------------------------------------------------------------

Unset by default. If you have wheel outputs in your recipe, conda-build will
try to upload them to this PyPI repository using credentials from the file
specified by the ``pypirc`` setting.

.. code-block:: yaml

   conda-build:
       pypi_repository: pypi


Expansion of environment variables
==================================

Conda expands environment variables in a subset of configuration settings.
These are:

- ``envs_dirs``
- ``pkgs_dirs``
- ``ssl_verify``
- ``client_cert``
- ``client_cert_key``
- ``proxy_servers``
- ``channels``
- ``custom_channels``
- ``custom_multichannels``
- ``default_channels``
- ``migrated_custom_channels``
- ``whitelist_channels``

This allows you to store the credentials of a private repository in an
environment variable, like so:

.. code-block:: yaml

  channels:
    - https://${USERNAME}:${PASSWORD}@my.private.conda.channel


Obtaining information from the .condarc file
============================================

.. note::
   It may be necessary to add the "force" option ``-f`` to
   the following commands.

To get all keys and their values:

.. code-block:: bash

   conda config --get

To get the value of a specific key, such as channels:

.. code-block:: bash

   conda config --get channels

To add a new value, such as
http://conda.anaconda.org/mutirri, to a specific key, such as
channels:

.. code-block:: bash

   conda config --add channels http://conda.anaconda.org/mutirri

To remove an existing value, such as
http://conda.anaconda.org/mutirri from a specific key, such as
channels:

.. code-block:: bash

   conda config --remove channels http://conda.anaconda.org/mutirri

To remove a key, such as channels, and all of its values:

.. code-block:: bash

   conda config --remove-key channels

To configure channels and their priority for a single
environment, make a ``.condarc`` file in the :ref:`root directory
of that environment <config-channels>`.

.. _threads:

Configuring number of threads
=============================

You can use your ``.condarc`` file or environment variables to
add configuration to control the number of threads. You may
want to do this to tweak conda to better utilize your system.
If you have a very fast SSD, you might increase the number
of threads to shorten the time it takes for conda to create
environments and install/remove packages.

**repodata_threads**

* Default number of threads: None
* Threads used when downloading, parsing, and creating repodata
  structures from repodata.json files. Multiple downloads from
  different channels may occur simultaneously. This speeds up the
  time it takes to start solving.

**verify_threads**

* Default number of threads: 1
* Threads used when verifying the integrity of packages and files
  to be installed in your environment. Defaults to 1, as using
  multiple threads here can run into problems with slower hard
  drives.

**execute_threads**

* Default number of threads: 1
* Threads used to unlink, remove, link, or copy files into your
  environment. Defaults to 1, as using multiple threads here can
  run into problems with slower hard drives.

**default_threads**

* Default number of threads: None
* When set, this value is used for all of the above thread
  settings. With its default setting (None), it does not affect
  the other settings.

Setting any of the above can be done in ``.condarc`` or with
conda config:

At your terminal::

  conda config --set repodata_threads 2

In ``.condarc``::

  verify_threads: 4
==========================
Disabling SSL verification
==========================

Using conda with SSL is strongly recommended, but it is possible to disable SSL
and it may be necessary to disable SSL in certain cases.

Some corporate environments use proxy services that use Man-In-The-Middle
(MITM) attacks to sniff encrypted traffic. These services can interfere with
SSL connections such as those used by conda and pip to download packages from
repositories such as PyPI.

If you encounter this interference, you should set up the proxy service's
certificates so that the ``requests`` package used by conda can recognize and
use the certificates.

For cases where this is not possible, conda-build versions 3.0.31 and higher
have an option that disables SSL certificate verification and allows this
traffic to continue.

``conda skeleton pypi`` can disable SSL verification when pulling packages
from a PyPI server over HTTPS.

.. warning::
   This option causes your computer to download and execute arbitrary
   code over a connection that it cannot verify as secure. This is not
   recommended and should only be used if necessary. Use this option at your own
   risk.

To disable SSL verification when using ``conda skeleton pypi``, set the
``SSL_NO_VERIFY`` environment variable to either ``1`` or ``True`` (case
insensitive).

On \*nix systems:

.. code-block:: bash

    SSL_NO_VERIFY=1 conda skeleton pypi a_package

And on Windows systems:

.. code-block:: batch

    set SSL_NO_VERIFY=1
    conda skeleton pypi a_package
    set SSL_NO_VERIFY=

We recommend that you unset this environment variable immediately after use.
If it is not unset, some other tools may recognize it and incorrectly use
unverified SSL connections.

Using this option will cause ``requests`` to emit warnings to STDERR about
insecure settings. If you know that what you're doing is safe, or have been
advised by your IT department that what you're doing is safe, you may ignore
these warnings.
=============================================
Administering a multi-user conda installation
=============================================

By default, conda and all packages it installs, including
Anaconda, are installed locally with a user-specific
configuration. Administrative privileges are not required, and
no upstream files or other users are affected by
the installation.

You can make conda and any number of packages available to a
group of 1 or more users, while preventing these users
from installing unwanted packages with conda:

#. Install conda and the allowed packages, if any, in a
   location that is under administrator control and
   accessible to users.

#. Create a
   :doc:`.condarc system configuration file <use-condarc>` in
   the root directory of the installation. This system-level
   configuration file will override any user-level configuration
   files installed by the user.

Each user accesses the central conda installation, which reads
settings from the user ``.condarc`` configuration file located
in their home directory. The path to the user file is the same
as the root environment prefix displayed by ``conda info``,
as shown in :ref:`admin-inst-user` below. The user
``.condarc`` file is limited by the system ``.condarc`` file.

System configuration settings are commonly used in a
system ``.condarc`` file but may also be used in a
user ``.condarc`` file. All user configuration settings may
also be used in a system ``.condarc`` file.

For information about settings in the ``.condarc`` file,
see :doc:`use-condarc`.


.. _admin-inst:

Example administrator-controlled installation
=============================================

The following example describes how to view the system
configuration file, review the settings, compare it to a user's
configuration file, and determine what happens when the user
attempts to access a file from a blocked channel. It then
describes how the user must modify their configuration file to
access the channels allowed by the administrator.


System configuration file
-------------------------

#. The system configuration file must be in the top-level conda
   installation directory. Check the path where conda is located:

   .. code-block:: bash

      $ which conda
      /tmp/miniconda/bin/conda

#. View the contents of the ``.condarc`` file in the
   administrator's directory:

   .. code-block:: bash

      cat /tmp/miniconda/.condarc

   The following administrative ``.condarc`` file
   sets ``allow_other_channels`` to ``False``, and it specifies
   that users may download packages only from the ``admin``
   channel:

   .. code-block:: bash

     $ cat /tmp/miniconda/.condarc
     allow_other_channels : false
     channel_alias: https://conda.anaconda.org/
     channels:
       - admin

   .. note::
      The admin channel can also be expressed as
      https://conda.anaconda.org/admin/

   Because ``allow_other_channels`` is ``False`` and the
   channel defaults are not explicitly specified, users are
   disallowed from downloading packages from the default
   channels. You can check this in the next procedure.

.. _admin-inst-user:

User configuration file
-----------------------

#. Check the location of the user's conda installation:

   .. code-block:: bash

     $ conda info
     Current conda install:
     . . .
            channel URLs : https://repo.anaconda.com/pkgs/free/osx-64/
                           https://repo.anaconda.com/pkgs/pro/osx-64/
            config file : /Users/username/.condarc

   The ``conda info`` command shows that conda is using the
   user's ``.condarc`` file, located at
   ``/Users/username/.condarc`` and that the default channels
   such as ``repo.anaconda.com`` are listed as channel URLs.

#. View the contents of the administrative ``.condarc`` file in
   the directory that was located in step 1:

   .. code-block:: bash

     $ cat ~/.condarc
     channels:
       - defaults

   This user's ``.condarc`` file specifies only the default
   channels, but the administrator config file has blocked
   default channels by specifying that only ``admin`` is
   allowed. If this user attempts to search for a package in the
   default channels, they get a message telling them what
   channels are allowed:

   .. code-block:: bash

      $ conda search flask
      Fetching package metadata:
      Error: URL 'http://repo.anaconda.com/pkgs/pro/osx-64/' not
      in allowed channels.
      Allowed channels are:
       - https://conda.anaconda.org/admin/osx-64/

   This error message tells the user to add the ``admin`` channel
   to their configuration file.

#. The user must edit their local ``.condarc`` configuration file
   to access the package through the admin channel:

   .. code-block:: yaml

     channels:
       - admin

   The user can now search for packages in the allowed
   ``admin`` channel.
======================
Using the free channel
======================

.. contents::
   :local:
   :depth: 2

The free channel contains packages created prior to
September 26, 2017. Prior to conda 4.7, the free
channel was part of the ``defaults`` channel.
Read more about the :ref:`defaults channel <default-channels>`.

Removing the ``free`` channel reduced conda's search space
and hid old software. That old software could have incompatible
constraint information. Read more about `why we made this change
<https://www.anaconda.com/why-we-removed-the-free-channel-in-conda-4-7/>`_.


If you still need the content from the ``free`` channel to reproduce
old environments, you can re-add the channel following the directions below.

.. _free-channel-default:

Adding the free channel to defaults
===================================

If you want to add the ``free`` channel back into your default list,
use the command::

   conda config --set restore_free_channel true

The order of the channels is important. Using the above
command will restore the ``free`` channel in the correct order.

Changing .condarc
=================

You can also add the ``free`` channel back into your defaults by
changing the ``.condarc`` file itself.

Add the following to the conda section of your ``.condarc`` file::

   restore_free_channel: true

Read more about :doc:`use-condarc`.

Package name changes
====================

Some packages that are available in the ``free`` channel
have different names in the ``main`` channel.

.. list-table::
   :widths: 25 75
   :header-rows: 1

   * - Package name in ``free``
     - Package name in ``main``
   * - dateutil
     - python-dateutil
   * - gcc
     - gcc_linux-64 and similar
   * - pil
     - pillow
   * - ipython-notebook
     - now installable via notebook, a metapackage could be created
   * - Ipython-qtconsole
     - now installable via qtconsole, a metapackage could be created
   * - beautiful-soup
     - beautifulsoup4
   * - pydot-ng
     - pydot


Troubleshooting
===============

You may encounter some errors, such as UnsatisfiableError
or a PackagesNotFoundError.

An example of this error is::

   $ conda create -n test -c file:///Users/jsmith/anaconda/conda-bld bad_pkg
   Collecting package metadata: done
   Solving environment: failed

   UnsatisfiableError: The following specifications were found to be in conflict:
     - cryptography=2.6.1 -> openssl[version='>=1.1.1b,<1.1.2a']
     - python=3.7.0 -> openssl[version='>=1.0.2o,<1.0.3a']
   Use "conda search <package> --info" to see the dependencies for each package.

This can occur if:

- you’re trying to install a package that is only available in
  ``free`` and not in ``main``.
- you have older environments in files you want to recreate.
  If those spec files reference packages that are in ``free``,
  they will not show up.
- a package is dependent upon files found only in the free
  channel. Conda will not let you install the package if it cannot
  install the dependency, which the package requires to work.

If you encounter these errors, consider using a newer package than
the one in ``free``. If you want those older versions, you can
:ref:`add the free channel back into your defaults
<free-channel-default>`.
===================================
Improving interoperability with pip
===================================

The conda 4.6.0 release added improved support for interoperability between conda and pip.
This feature is still experimental and is therefore off by default.

With this interoperability,
conda can use pip-installed packages to satisfy dependencies,
cleanly remove pip-installed software, and replace them with
conda packages when appropriate.

If you’d like to try the feature, you can set this ``.condarc`` setting::

   conda config --set pip_interop_enabled True

.. note::

   Setting ``pip_interop_enabled`` to ``True`` may slow down conda.

Even without activating this feature, conda now understands pip metadata
more intelligently. For example, if we create an environment with conda::

   conda create -y -n some_pip_test python=3.7 imagesize=1.0

Then we update imagesize in that environment using pip::

   conda activate some_pip_test
   pip install -U imagesize

Prior to conda 4.6.0, the ``conda list`` command returned ambiguous results::

   imagesize                 1.1.0

   imagesize                 1.0.0 py37_0

Conda 4.6.0 now shows only one entry for imagesize (the newer pip entry)::

   imagesize                 1.1.0 pypi_0    pypi
=======================
Enabling tab completion
=======================

Conda versions up to 4.3 supports tab completion in Bash shells via the argcomplete
package. Bash tab completion is deprecated starting with version 4.4.

To enable tab completion in your Bash shell:

#. Make sure that argcomplete is installed:

   .. code-block:: bash

      conda install argcomplete

#. Add the following code to your bash profile:

   .. code-block:: bash

      eval "$(register-python-argcomplete conda)"

#. Test it:

   #. Open a new terminal window or an Anaconda Prompt.

   #. Type: ``conda ins``, and then press the Tab key.

      The command completes to:

      .. code-block:: bash

         conda install

To get tab completion in Zsh, see `conda-zsh-completion
<https://github.com/esc/conda-zsh-completion>`_.
=================================================
Using conda on Windows XP with or without a proxy
=================================================

Although Windows XP mainstream support and Extended Support from
Microsoft have ended, and Windows XP is no longer one of the
target systems supported by Anaconda, some users have had success
using Anaconda on Windows XP with the methods described on this
page.

Anaconda 2.3.0 is the last version of Python 3-based Anaconda
to support Windows XP. Anaconda 2.4 and later have a version of
Python 3 built with Visual Studio 2015, which by default does not
support Windows XP.

You can install Anaconda 2.3.0 and then update it with
``conda update conda`` and ``conda update --all``. Download
``Anaconda3-2.3.0-Windows-x86.exe`` at
https://repo.anaconda.com/archive/. Install it in any location,
such as ``C:\Anaconda``.

Using a proxy with Windows XP
=============================

To configure conda for use behind a corporate proxy that uses
proxy auto-config (PAC) files and SSL certificates for secure
connections:

#. Find a proxy server address from the PAC file:

   #. Open Internet Explorer.

   #. From the **Tools** menu, select Internet Options, and then
      click the **Connections** tab.

   #. On the **Connections** tab, click the LAN Settings button.

   #. In the LAN Settings dialog box, copy the address under
      the Use automatic configuration script checkbox.

   #. Click the Cancel button to close the LAN settings.

   #. Click the Cancel button to close the Internet Options.

   #. Paste the address into the Internet Explorer address bar,
      then press the Enter key.

   #. In the PAC file that opens, search for ``return`` until you
      find what looks like a proxy IP or DNS address with the
      port number, which may take some time in a long file.

   #. Copy the address and port number.

#. Follow the :ref:`.condarc instructions <config-overview>`
   to create a file named ``.condarc`` in your home directory or
   the installation directory, such as ``C:\Anaconda\.condarc``.

#. Follow the :ref:`.condarc proxy server instructions
   <config-proxy>` to add proxy information to the ``.condarc``
   file.

If you decide to include any passwords, be aware of
transformations that can affect special characters.

EXAMPLE: This example shows proxy information with passwords::

  proxy_servers:
    http: http://user:pass@corp.com:8080
    https: https://user:pass@corp.com:8080

  ssl_verify: False

If you include proxy information without passwords, you will be
asked to answer authentication prompts at the command line.

EXAMPLE: This example shows proxy information without passwords::

  proxy_servers:
    http: http://corp.com:8080
    https: https://corp.com:8080

  ssl_verify: False

Once the proxy is configured, you can run ``conda update conda``
and then create and manage environments with the `Anaconda
Navigator <https://docs.anaconda.com/anaconda/navigator/>`_.

Some packages such as ``flask-login`` may not be available
through conda, so you may need to use pip to install them:

#. To use pip securely over https::

     pip install --trusted-host pypi.python.org package-name

#. If the secure https proxy fails, you can force pip to use an
   insecure http proxy instead::

     pip install --index-url=http://pypi.python.org/simple/ --trusted-host pypi.python.org package-name
=============
Configuration
=============

.. toctree::
   :maxdepth: 1

   use-condarc
   sample-condarc
   free-channel
   admin-multi-user-install
   enable-tab-completion
   pip-interoperability
   use-winxp-with-proxy
   disable-ssl-verification
   non-standard-certs
===============================
Using non-standard certificates
===============================

Using conda behind a firewall may require using a non-standard
set of certificates, which requires custom settings.

If you are using a non-standard set of certificates, then the
requests package requires the setting of ``REQUESTS_CA_BUNDLE``.
If you receive an error with self-signed certifications, you may
consider unsetting ``REQUESTS_CA_BUNDLE`` as well as ``CURL_CA_BUNDLE`` and `disabling SSL verification <https://conda.io/projects/conda/en/latest/user-guide/configuration/disable-ssl-verification.html>`_
to create a conda environment over HTTP.

You may need to set the conda environment to use the root certificate
provided by your company rather than conda’s generic ones.

One workflow to resolve this on macOS is:

* Open Chrome, got to any website, click on the lock icon on the left
  of the URL. Click on «Certificate» on the dropdown. In the next window
  you see a stack of certificates. The uppermost (aka top line in window)
  is the root certificate (e.g. Zscaler Root CA).
* Open macOS keychain, click on «Certificates» and choose among the
  many certificates the root certificate that you just identified.
  Export this to any folder of your choosing.
* Convert this certificate with OpenSSL: ``openssl x509 -inform der -in /path/to/your/certificate.cer -out /path/to/converted/certificate.pem``
* For a quick check, set your shell to acknowledge the certificate: ``export REQUESTS_CA_BUNDLE=/path/to/converted/certificate.pem``
* To set this permanently, open your shell profile (.bshrs or e.g. .zshrc) and add this line: ``export REQUESTS_CA_BUNDLE=/path/to/converted/certificate.pem.``
  Now exit your terminal/shell and reopen. Check again.
====================
Sample .condarc file
====================

.. code-block:: yaml

  # This is a sample .condarc file.
  # It adds the r Anaconda.org channel and enables
  # the show_channel_urls option.

  # channel locations. These override conda defaults, i.e., conda will
  # search *only* the channels listed here, in the order given.
  # Use "defaults" to automatically include all default channels.
  # Non-url channels will be interpreted as Anaconda.org usernames
  # (this can be changed by modifying the channel_alias key; see below).
  # The default is just 'defaults'.
  channels:
    - r
    - defaults

  # Show channel URLs when displaying what is going to be downloaded
  # and in 'conda list'. The default is False.
  show_channel_urls: True

  # For more information about this file see:
  # https://conda.io/docs/user-guide/configuration/use-condarc.html
=================
Managing channels
=================

Conda channels are the locations where packages are stored.
They serve as the base for hosting and managing packages.
Conda packages are downloaded from remote channels, which are URLs to
directories containing conda packages. The conda command searches a default
set of channels and packages are automatically downloaded and updated
from https://repo.anaconda.com/pkgs/. Read more about
:doc:`conda channels <../concepts/channels>` and the various terms of service
for their use.

Different channels can have the same package, so conda must handle these
channel collisions.

There will be no channel collisions if you use only the defaults channel.
There will also be no channel collisions if all of the channels you use only
contain packages that do not exist in any of the other channels in your list.
The way conda resolves these collisions matters only when you have multiple
channels in your channel list that host the same package.

By default, conda prefers packages from a higher priority
channel over any version from a lower priority channel.
Therefore, you can now safely put channels at the bottom of your
channel list to provide additional packages that are not in the
default channels and still be confident that these channels will
not override the core package set.

Conda collects all of the packages with the same name across all
listed channels and processes them as follows:

#. Sorts packages from highest to lowest channel priority.

#. Sorts tied packages---packages with the same channel priority---from highest to
   lowest version number. For example, if channelA contains NumPy 1.12.0
   and 1.13.1, NumPy 1.13.1 will be sorted higher.

#. Sorts still-tied packages---packages with the same channel priority and same
   version---from highest to lowest build number. For example, if channelA contains
   both NumPy 1.12.0 build 1 and build 2, build 2 is sorted first. Any packages
   in channelB would be sorted below those in channelA.

#. Installs the first package on the sorted list that satisfies
   the installation specifications.

Essentially, the order goes:
channelA::numpy-1.13_1 > channelA::numpy-1.12.1_1 > channelA::numpy-1.12.1_0 > channelB::numpy-1.13_1

.. note::
   If strict channel priority is turned on then channelB::numpy-1.13_1 isn't
   included in the list at all.


To make conda install the newest version
of a package in any listed channel:

* Add ``channel_priority: false`` to your ``.condarc`` file.

  OR

* Run the equivalent command::

    conda config --set channel_priority false

Conda then sorts as follows:

#. Sorts the package list from highest to lowest version number.

#. Sorts tied packages from highest to lowest channel priority.

#. Sorts tied packages from highest to lowest build number.

Because build numbers from different channels are not
comparable, build number still comes after channel priority.

The following command adds the channel "new_channel" to the top
of the channel list, making it the highest priority::

  conda config --add channels new_channel

Conda has an equivalent command::

  conda config --prepend channels new_channel

Conda also has a command that adds the new channel to the
bottom of the channel list, making it the lowest priority::

  conda config --append channels new_channel

.. _strict:

Strict channel priority
=======================

As of version 4.6.0, Conda has a strict channel priority feature.
Strict channel priority can dramatically speed up conda operations and
also reduce package incompatibility problems. We recommend it as a default.
However, it may break old environment files, so we plan to delay making it
conda's out-of-the-box default until the next major version bump, conda 5.0.

Details about it can be seen by typing ``conda config --describe channel_priority``.

.. code-block:: none

    channel_priority (ChannelPriority)
    Accepts values of 'strict', 'flexible', and 'disabled'. The default
    value is 'flexible'. With strict channel priority, packages in lower
    priority channels are not considered if a package with the same name
    appears in a higher priority channel. With flexible channel priority,
    the solver may reach into lower priority channels to fulfill
    dependencies, rather than raising an unsatisfiable error. With channel
    priority disabled, package version takes precedence, and the
    configured priority of channels is used only to break ties. In
    previous versions of conda, this parameter was configured as either
    True or False. True is now an alias to 'flexible'.

    channel_priority: flexible
use-r-with-conda
================

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='https://docs.anaconda.com/anaconda/user-guide/tasks/use-r-language'" /></head><body></body></html>
=====================
Managing environments
=====================

.. contents::
   :local:
   :depth: 1

With conda, you can create, export, list, remove, and update
environments that have different versions of Python and/or
packages installed in them. Switching or moving between
environments is called activating the environment. You can also
share an environment file.

.. note::
   There are many options available for the commands described
   on this page. For details, see :doc:`../../commands`.

.. note::
   ``conda activate`` and ``conda deactivate`` only work on conda 4.6 and later versions.
   For conda versions prior to 4.6, run:

      * Windows: ``activate`` or ``deactivate``
      * Linux and macOS: ``source activate`` or ``source deactivate``

Creating an environment with commands
=====================================

.. tip::
   By default, environments are installed into the ``envs``
   directory in your conda directory. See :ref:`specifying-location`
   or run ``conda create --help`` for information on specifying
   a different path.

Use the terminal or an Anaconda Prompt for the following steps:

#. To create an environment:

   .. code::

      conda create --name myenv

   .. note::
      Replace ``myenv`` with the environment name.

#. When conda asks you to proceed, type ``y``:

   .. code::

      proceed ([y]/n)?

  This creates the myenv environment in ``/envs/``. No
  packages will be installed in this environment.

3. To create an environment with a specific version of Python:

   .. code-block:: bash

      conda create -n myenv python=3.6

4. To create an environment with a specific package:

   .. code-block:: bash

      conda create -n myenv scipy

   OR:

   .. code-block:: bash

      conda create -n myenv python
      conda install -n myenv scipy

5. To create an environment with a specific version of a package:

   .. code-block:: bash

      conda create -n myenv scipy=0.15.0

   OR:

   .. code-block:: bash

      conda create -n myenv python
      conda install -n myenv scipy=0.15.0

6. To create an environment with a specific version of Python and
   multiple packages:

  .. code-block:: bash

     conda create -n myenv python=3.6 scipy=0.15.0 astroid babel

  .. tip::
     Install all the programs that you want in this environment
     at the same time. Installing 1 program at a time can lead to
     dependency conflicts.

To automatically install pip or another program every time a new
environment is created, add the default programs to the
:ref:`create_default_packages <config-add-default-pkgs>` section
of your ``.condarc`` configuration file. The default packages are
installed every time you create a new environment. If you do not
want the default packages installed in a particular environment,
use the ``--no-default-packages`` flag:

.. code-block:: bash

  conda create --no-default-packages -n myenv python

.. tip::
   You can add much more to the ``conda create`` command.
   For details, run ``conda create --help``.


.. _create-env-from-file:

Creating an environment from an environment.yml file
====================================================

Use the terminal or an Anaconda Prompt for the following steps:

#. Create the environment from the ``environment.yml`` file:

   .. code::

      conda env create -f environment.yml

   The first line of the ``yml`` file sets the new environment's
   name. For details see :ref:`Creating an environment file manually
   <create-env-file-manually>`.


#. Activate the new environment: ``conda activate myenv``

#. Verify that the new environment was installed correctly:

   .. code::

      conda env list

  You can also use ``conda info --envs``.


.. _specifying-location:

Specifying a location for an environment
========================================

You can control where a conda environment lives by providing a path
to a target directory when creating the environment. For example,
the following command will create a new environment in a subdirectory
of the current working directory called ``envs``::

  conda create --prefix ./envs jupyterlab=0.35 matplotlib=3.1 numpy=1.16

You then activate an environment created with a prefix using the same
command used to activate environments created by name::

  conda activate ./envs

Specifying a path to a subdirectory of your project directory when
creating an environment has the following benefits:

  * It makes it easy to tell if your project uses an isolated environment
    by including the environment as a subdirectory.
  * It makes your project more self-contained as everything, including
    the required software, is contained in a single project directory.

An additional benefit of creating your project’s environment inside a
subdirectory is that you can then use the same name for all your
environments. If you keep all of your environments in your ``envs``
folder, you’ll have to give each environment a different name.

There are a few things to be aware of when placing conda environments
outside of the default ``envs`` folder.

#. Conda can no longer find your environment with the ``--name`` flag.
   You’ll generally need to pass the ``--prefix`` flag along with the
   environment’s full path to find the environment.
#. Specifying an install path when creating your conda environments
   makes it so that your command prompt is now prefixed with the active
   environment’s absolute path rather than the environment’s name.

After activating an environment using its prefix, your prompt will
look similar to the following::

(/absolute/path/to/envs) $

This can result in long prefixes::

(/Users/USER_NAME/research/data-science/PROJECT_NAME/envs) $

To remove this long prefix in your shell prompt, modify the env_prompt
setting in your ``.condarc`` file::

$ conda config --set env_prompt '({name})'

This will edit your ``.condarc`` file if you already have one
or create a ``.condarc`` file if you do not.

Now your command prompt will display the active environment’s
generic name, which is the name of the environment's root folder:

.. code-block::

  $ cd project-directory
  $ conda activate ./env
  (env) project-directory $

.. _update-env:

Updating an environment
=======================
You may need to update your environment for a variety of reasons.
For example, it may be the case that:

* one of your core dependencies just released a new version
  (dependency version number update).
* you need an additional package for data analysis
  (add a new dependency).
* you have found a better package and no longer need the older
  package (add new dependency and remove old dependency).

If any of these occur, all you need to do is update the contents of
your ``environment.yml`` file accordingly and then run the following
command::

$ conda env update --prefix ./env --file environment.yml  --prune

.. note::
   The ``--prune`` option causes conda to remove any dependencies
   that are no longer required from the environment.


Cloning an environment
======================

Use the terminal or an Anaconda Prompt for the following steps:

You can make an exact copy of an environment by creating a clone
of it:

.. code::

   conda create --name myclone --clone myenv

.. note::
   Replace ``myclone`` with the name of the new environment.
   Replace ``myenv`` with the name of the existing environment that
   you want to copy.

To verify that the copy was made:

.. code::

   conda info --envs

In the environments list that displays, you should see both the
source environment and the new copy.


Building identical conda environments
=====================================

You can use explicit specification files to build an identical
conda environment on the same operating system platform, either
on the same machine or on a different machine.

Use the terminal or an Anaconda Prompt for the following steps:

#. Run ``conda list --explicit`` to produce a spec list such as:

   .. code::

      # This file may be used to create an environment using:
      # $ conda create --name <env> --file <this file>
      # platform: osx-64
      @EXPLICIT
      https://repo.anaconda.com/pkgs/free/osx-64/mkl-11.3.3-0.tar.bz2
      https://repo.anaconda.com/pkgs/free/osx-64/numpy-1.11.1-py35_0.tar.bz2
      https://repo.anaconda.com/pkgs/free/osx-64/openssl-1.0.2h-1.tar.bz2
      https://repo.anaconda.com/pkgs/free/osx-64/pip-8.1.2-py35_0.tar.bz2
      https://repo.anaconda.com/pkgs/free/osx-64/python-3.5.2-0.tar.bz2
      https://repo.anaconda.com/pkgs/free/osx-64/readline-6.2-2.tar.bz2
      https://repo.anaconda.com/pkgs/free/osx-64/setuptools-25.1.6-py35_0.tar.bz2
      https://repo.anaconda.com/pkgs/free/osx-64/sqlite-3.13.0-0.tar.bz2
      https://repo.anaconda.com/pkgs/free/osx-64/tk-8.5.18-0.tar.bz2
      https://repo.anaconda.com/pkgs/free/osx-64/wheel-0.29.0-py35_0.tar.bz2
      https://repo.anaconda.com/pkgs/free/osx-64/xz-5.2.2-0.tar.bz2
      https://repo.anaconda.com/pkgs/free/osx-64/zlib-1.2.8-3.tar.bz2


#. To create this spec list as a file in the current working
   directory, run::

     conda list --explicit > spec-file.txt

   .. note::
      You can use ``spec-file.txt`` as the filename or replace
      it with a filename of your choice.

   An explicit spec file is not usually cross platform, and
   therefore has a comment at the top such as ``# platform: osx-64``
   showing the platform where it was created. This platform is the
   one where this spec file is known to work. On other platforms,
   the packages specified might not be available or dependencies
   might be missing for some of the key packages already in the
   spec.

   To use the spec file to create an identical environment on the
   same machine or another machine::

     conda create --name myenv --file spec-file.txt

   To use the spec file to install its listed packages into an
   existing environment::

     conda install --name myenv --file spec-file.txt

   Conda does not check architecture or dependencies when installing
   from a spec file. To ensure that the packages work correctly,
   make sure that the file was created from a working environment,
   and use it on the same architecture, operating system, and
   platform, such as linux-64 or osx-64.


.. _activate-env:

Activating an environment
=========================

Activating environments is essential to making the software in the environments
work well. Activation entails two primary functions: adding entries to PATH for
the environment and running any activation scripts that the environment may
contain. These activation scripts are how packages can set arbitrary
environment variables that may be necessary for their operation. You can also
:ref:`use the config API to set environment variables <set-env-vars>`.

When `installing Anaconda <http://docs.anaconda.com/anaconda/install.html>`_,
you have the option to “Add Anaconda
to my PATH environment variable.” This is not recommended because the
add to PATH option appends Anaconda to PATH. When the installer appends
to PATH, it does not call the activation scripts.

On Windows, PATH is composed of two parts, the system PATH and the
user PATH. The system PATH always comes first. When you install
Anaconda for Just Me, we add it to the user PATH. When you install
for All Users, we add it to the system PATH. In the former case,
you can end up with system PATH values taking precedence over
our entries. In the latter case, you do not. We do not recommend
`multi-user installs <https://docs.anaconda.com/anaconda/install/multi-user/>`_.

Activation prepends to PATH. This only takes effect
when you have the environment active so it is local to a terminal session,
not global.

To activate an environment: ``conda activate myenv``

.. note::
   Replace ``myenv`` with the environment name or directory path.

Conda prepends the path name ``myenv`` onto your system command.

You may receive a warning message if you have not activated your environment:

.. code-block:: Python

   Warning:
   This Python interpreter is in a conda environment, but the environment has
   not been activated. Libraries may fail to load. To activate this environment
   please see https://conda.io/activation.

If you receive this warning, you need to activate your environment. To do
so on Windows, run: ``c:\Anaconda3\Scripts\activate base`` in
Anaconda Prompt.

Windows is extremely sensitive to proper activation. This is because
the Windows library loader does not support the concept of libraries
and executables that know where to search for their dependencies
(RPATH). Instead, Windows relies on a `dynamic-link library search order <https://docs.microsoft.com/en-us/windows/win32/dlls/dynamic-link-library-search-order>`_.

If environments are not active, libraries won't be found and there
will be lots of errors. HTTP or SSL errors are common errors when the
Python in a child environment can't find the necessary OpenSSL library.

Conda itself includes some special workarounds to add its necessary PATH
entries. This makes it so that it can be called without activation or
with any child environment active. In general, calling any executable in
an environment without first activating that environment will likely not work.
For the ability to run executables in activated environments, you may be
interested in the ``conda run`` command.

If you experience errors with PATH, review our :ref:`troubleshooting <path-error>`.

Conda init
----------

Earlier versions of conda introduced scripts to make activation
behavior uniform across operating systems. Conda 4.4 allowed
``conda activate myenv``. Conda 4.6 added extensive initialization
support so that conda works faster and less disruptively on
a wide variety of shells (bash, zsh, csh, fish, xonsh, and more).
Now these shells can use the ``conda activate`` command.
Removing the need to modify PATH makes conda less disruptive to
other software on your system. For more information, read the
output from ``conda init --help``.

One setting may be useful to you when using ``conda init`` is::

  auto_activate_base: bool

This setting controls whether or not conda activates your base
environment when it first starts up. You'll have the ``conda``
command available either way, but without activating the environment,
none of the other programs in the environment will be available until
the environment is activated with ``conda activate base``. People
sometimes choose this setting to speed up the time their shell takes
to start up or to keep conda-installed software from automatically
hiding their other software.

Nested activation
-----------------

By default, ``conda activate`` will deactivate the current environment
before activating the new environment and reactivate it when
deactivating the new environment. Sometimes you may want to leave
the current environment PATH entries in place so that you can continue
to easily access command-line programs from the first environment.
This is most commonly encountered when common command-line utilities
are installed in the base environment. To retain the current environment
in the PATH, you can activate the new environment using::

  conda activate --stack myenv

If you wish to always stack when going from the outermost environment,
which is typically the base environment, you can set the ``auto_stack``
configuration option::

  conda config --set auto_stack 1

You may specify a larger number for a deeper level of automatic stacking,
but this is not recommended since deeper levels of stacking are more likely
to lead to confusion.

Environment variable for DLL loading verification
-------------------------------------------------

If you don't want to activate your environment and you want Python
to work for DLL loading verification, then follow the
:ref:`troubleshooting directions <mkl_library>`.

.. warning::
   If you choose not to activate your environment, then
   loading and setting environment variables to activate
   scripts will not happen. We only support activation.

Deactivating an environment
===========================

To deactivate an environment, type: ``conda deactivate``

Conda removes the path name for the currently active environment from
your system command.

.. note::
   To simply return to the base environment, it's better to call ``conda
   activate`` with no environment specified, rather than to try to deactivate. If
   you run ``conda deactivate`` from your base environment, you may lose the
   ability to run conda at all. Don't worry, that's local to this shell - you can
   start a new one. However, if the environment was activated using ``--stack``
   (or was automatically stacked) then it is better to use ``conda deactivate``.


.. _determine-current-env:

Determining your current environment
====================================

Use the terminal or an Anaconda Prompt for the following steps.

By default, the active environment---the one you are currently
using---is shown in parentheses () or brackets [] at the
beginning of your command prompt::

  (myenv) $

If you do not see this, run:

.. code::

   conda info --envs

In the environments list that displays, your current environment
is highlighted with an asterisk (*).

By default, the command prompt is set to show the name of the
active environment. To disable this option::

  conda config --set changeps1 false

To re-enable this option::

  conda config --set changeps1 true


Viewing a list of your environments
===================================

To see a list of all of your environments, in your terminal window or an
Anaconda Prompt, run:

.. code::

   conda info --envs

OR

.. code::

   conda env list

A list similar to the following is displayed:

.. code::

   conda environments:
   myenv                 /home/username/miniconda/envs/myenv
   snowflakes            /home/username/miniconda/envs/snowflakes
   bunnies               /home/username/miniconda/envs/bunnies

If this command is run by an administrator, a list of all environments
belonging to all users will be displayed.

Viewing a list of the packages in an environment
================================================

To see a list of all packages installed in a specific environment:

* If the environment is not activated, in your terminal window or an
  Anaconda Prompt, run:

  .. code-block:: bash

     conda list -n myenv

* If the environment is activated, in your terminal window or an
  Anaconda Prompt, run:

  .. code-block:: bash

     conda list

* To see if a specific package is installed in an environment, in your
  terminal window or an Anaconda Prompt, run:

  .. code-block:: bash

    conda list -n myenv scipy


.. _pip-in-env:

Using pip in an environment
===========================

To use pip in your environment, in your terminal window or an
Anaconda Prompt, run:

.. code-block:: bash

   conda install -n myenv pip
   conda activate myenv
   pip <pip_subcommand>

Issues may arise when using pip and conda together. When combining conda and pip,
it is best to use an isolated conda environment. Only after conda has been used to
install as many packages as possible should pip be used to install any remaining
software. If modifications are needed to the environment, it is best to create a
new environment rather than running conda after pip. When appropriate, conda and
pip requirements should be stored in text files.

We recommend that you:

**Use pip only after conda**
  - Install as many requirements as possible with conda then use pip.
  - Pip should be run with ``--upgrade-strategy only-if-needed`` (the default).
  - Do not use pip with the ``--user`` argument, avoid all users installs.

**Use conda environments for isolation**
  - Create a conda environment to isolate any changes pip makes.
  - Environments take up little space thanks to hard links.
  - Care should be taken to avoid running pip in the root environment.

**Recreate the environment if changes are needed**
  - Once pip has been used, conda will be unaware of the changes.
  - To install additional conda packages, it is best to recreate
    the environment.

**Store conda and pip requirements in text files**
  - Package requirements can be passed to conda via the ``--file`` argument.
  - Pip accepts a list of Python packages with ``-r`` or ``--requirements``.
  - Conda env will export or create environments based on a file with
    conda and pip requirements.

.. _set-env-vars:

Setting environment variables
=============================

If you want to associate environment variables with an environment,
you can use the config API. This is recommended as an alternative to
using activate and deactivate scripts since those are an execution of
arbitrary code that may not be safe.

First, create your environment and activate it::

  conda create -n test-env
  conda activate test-env

To list any variables you may have, run ``conda env config vars list``.

To set environment variables, run ``conda env config vars set my_var=value``.

Once you have set an environment variable, you have to reactivate your environment:
``conda activate test-env``.

To check if the environment variable has been set, run
``echo my_var`` or ``conda env config vars list``.

When you deactivate your environment, you can use those same commands to see that
the environment variable goes away.

You can specify the environment you want to affect using the ``-n`` and ``-p`` flags. The ``-n`` flag allows you to name the environment and ``-p`` allows you to specify the path to the environment.

To unset the environment variable, run ``conda env config vars unset my_var -n test-env``.

When you deactivate your environment, you can see that environment variable goes away by rerunning
``echo my_var`` or ``conda env config vars list`` to show that the variable name
is no longer present.

Environment variables set using ``conda env config vars`` will be retained in the output of
``conda env export``. Further, you can declare environment variables in the environment.yml file
as shown here::

    name: env-name
    channels:
      - conda-forge
      - defaults
    dependencies:
      - python=3.7
      - codecov
    variables:
      VAR1: valueA
      VAR2: valueB


Saving environment variables
============================

Conda environments can include saved environment variables.

Suppose you want an environment "analytics" to store both a
secret key needed to log in to a server and a path to a
configuration file. The sections below explain how to write a
script named ``env_vars`` to do this on :ref:`Windows
<win-save-env-variables>` and :ref:`macOS or Linux
<macos-linux-save-env-variables>`.

This type of script file can be part of a conda package, in
which case these environment variables become active when an
environment containing that package is activated.

You can name these scripts anything you like. However, multiple
packages may create script files, so be sure to use descriptive
names that are not used by other packages. One popular option is
to give the script a name in the form
``packagename-scriptname.sh``, or on Windows,
``packagename-scriptname.bat``.

.. _win-save-env-variables:

Windows
-------

#. Locate the directory for the conda environment in your
   Anaconda Prompt by running in the command shell ``%CONDA_PREFIX%``.

#. Enter that directory and create these subdirectories and
   files::

    cd %CONDA_PREFIX%
    mkdir .\etc\conda\activate.d
    mkdir .\etc\conda\deactivate.d
    type NUL > .\etc\conda\activate.d\env_vars.bat
    type NUL > .\etc\conda\deactivate.d\env_vars.bat

#. Edit ``.\etc\conda\activate.d\env_vars.bat`` as follows::

     set MY_KEY='secret-key-value'
     set MY_FILE=C:\path\to\my\file

#. Edit ``.\etc\conda\deactivate.d\env_vars.bat`` as follows::

     set MY_KEY=
     set MY_FILE=

When you run ``conda activate analytics``, the environment variables
``MY_KEY`` and ``MY_FILE`` are set to the values you wrote into the file.
When you run ``conda deactivate``, those variables are erased.

.. _macos-linux-save-env-variables:

macOS and Linux
---------------

#. Locate the directory for the conda environment in your terminal window by running in the terminal ``echo $CONDA_PREFIX``.

#. Enter that directory and create these subdirectories and
   files::

     cd $CONDA_PREFIX
     mkdir -p ./etc/conda/activate.d
     mkdir -p ./etc/conda/deactivate.d
     touch ./etc/conda/activate.d/env_vars.sh
     touch ./etc/conda/deactivate.d/env_vars.sh

#. Edit ``./etc/conda/activate.d/env_vars.sh`` as follows::

     #!/bin/sh

     export MY_KEY='secret-key-value'
     export MY_FILE=/path/to/my/file/

#. Edit ``./etc/conda/deactivate.d/env_vars.sh`` as follows::

     #!/bin/sh

     unset MY_KEY
     unset MY_FILE

When you run ``conda activate analytics``, the environment
variables ``MY_KEY`` and ``MY_FILE`` are set to the values you wrote into
the file. When you run ``conda deactivate``, those variables are
erased.


Sharing an environment
=======================

You may want to share your environment with someone else---for
example, so they can re-create a test that you have done. To
allow them to quickly reproduce your environment, with all of its
packages and versions, give them a copy of your
``environment.yml`` file.

Exporting the environment.yml file
----------------------------------

.. note::
   If you already have an ``environment.yml`` file in your
   current directory, it will be overwritten during this task.

#. Activate the environment to export: ``conda activate myenv``

   .. note::
      Replace ``myenv`` with the name of the environment.

#. Export your active environment to a new file::

     conda env export > environment.yml

   .. note::
      This file handles both the environment's pip packages
      and conda packages.

#. Email or copy the exported ``environment.yml`` file to the
   other person.

.. _export-platform:

Exporting an environment file across platforms
----------------------------------------------

If you want to make your environment file work across platforms,
you can use the ``conda env export --from-history`` flag. This
will only include packages that you’ve explicitly asked for,
as opposed to including every package in your environment.

For example, if you create an environment and install Python and a package::

  conda install python=3.7 codecov

This will download and install numerous additional packages to solve
for dependencies. This will introduce packages that may not be compatible
across platforms.

If you use ``conda env export``, it will export all of those packages.
However, if you use ``conda env export --from-history``, it will
only export those you specifically chose:

.. code-block::

   (env-name) ➜  ~ conda env export --from-history
   name: env-name
   channels:
     - conda-forge
     - defaults
   dependencies:
     - python=3.7
     - codecov
   prefix: /Users/username/anaconda3/envs/env-name

.. note::
   If you installed Anaconda 2019.10 on macOS, your prefix may be
   ``/Users/username/opt/envs/env-name``.

.. _create-env-file-manually:

Creating an environment file manually
-------------------------------------

You can create an environment file (``environment.yml``) manually
to share with others.

EXAMPLE: A simple environment file:

.. code::

    name: stats
    dependencies:
      - numpy
      - pandas

EXAMPLE: A more complex environment file:

.. code::

   name: stats2
   channels:
     - javascript
   dependencies:
     - python=3.6   # or 2.7
     - bokeh=0.9.2
     - numpy=1.9.*
     - nodejs=0.10.*
     - flask
     - pip:
       - Flask-Testing

.. note::
   Note the use of the wildcard * when defining the patch version
   number. Defining the version number by fixing the major and minor
   version numbers while allowing the patch version number to vary
   allows us to use our environment file to update our environment
   to get any bug fixes whilst still maintaining consistency of
   software environment.

You can exclude the default channels by adding ``nodefaults``
to the channels list.

.. code::

   channels:
     - javascript
     - nodefaults

This is equivalent to passing the ``--override-channels`` option
to most ``conda`` commands.

Adding ``nodefaults`` to the channels list in ``environment.yml``
is similar to removing ``defaults`` from the :ref:`channels
list <config-channels>` in the ``.condarc`` file. However,
changing ``environment.yml`` affects only one of your conda
environments while changing ``.condarc`` affects them all.

For details on creating an environment from this
``environment.yml`` file, see :ref:`create-env-from-file`.

Restoring an environment
========================

Conda keeps a history of all the changes made to your environment,
so you can easily "roll back" to a previous version. To list the history of each change to the current environment:
``conda list --revisions``

To restore environment to a previous revision: ``conda install --revision=REVNUM``
or ``conda install --rev REVNUM``.

.. note::
   Replace REVNUM with the revision number.

Example:
If you want to restore your environment to revision 8, run ``conda install --rev 8``.

Removing an environment
=======================

To remove an environment, in your terminal window or an
Anaconda Prompt, run:

.. code::

   conda remove --name myenv --all

You may instead use ``conda env remove --name myenv``.

To verify that the environment was removed, in your terminal window or an
Anaconda Prompt, run:

.. code::

   conda info --envs

The environments list that displays should not show the removed
environment.
===============
Managing Python
===============

.. contents::
   :local:
   :depth: 1


Conda treats Python the same as any other package, so it is easy
to manage and update multiple installations.

Anaconda supports Python 2.7, 3.6, 3.7, and 3.8. The default is Python
2.7 or 3.8, depending on which installer you used:

* For the installers "Anaconda" and "Miniconda," the default is
  2.7.

* For the installers "Anaconda3" or "Miniconda3," the default is
  3.8.


Viewing a list of available Python versions
===========================================

To list the versions of Python that are available to install,
in your terminal window or an Anaconda Prompt, run:

.. code::

   conda search python

This lists all packages whose names contain the text ``python``.

To list only the packages whose full name is exactly ``python``,
add the ``--full-name`` option. In your terminal window or an Anaconda Prompt,
run:

.. code::

   conda search --full-name python


Installing a different version of Python
=========================================

To install a different version of Python without overwriting the
current version, create a new environment and install the second
Python version into it:

#. Create the new environment:

   * To create the new environment for Python 3.9, in your terminal
     window or an Anaconda Prompt, run:

     .. code-block:: bash

        conda create -n py39 python=3.9 anaconda

     .. note::
        Replace ``py39`` with the name of the environment you
        want to create. ``anaconda`` is the metapackage that
        includes all of the Python packages comprising the Anaconda
        distribution. ``python=3.9`` is the package and version you
        want to install in this new environment. This could be any
        package, such as ``numpy=1.19``, or :ref:`multiple packages
        <installing multiple packages>`.

   * To create the new environment for Python 2.7, in your terminal window
     or an Anaconda Prompt, run:

     .. code-block:: bash

        conda create -n py27 python=2.7 anaconda

#. :ref:`Activate the new environment <activate-env>`.

#. Verify that the new environment is your :ref:`current
   environment <determine-current-env>`.

#. To verify that the current environment uses the new Python
   version, in your terminal window or an Anaconda Prompt, run:

   .. code::

      python --version

Installing PyPy
===============

To use the PyPy builds you can do the following::

    conda config conda config --add channels conda-forge
    conda config --set channel_priority strict
    conda create -n pypy pypy
    conda activate pypy


Using a different version of Python
====================================

To switch to an environment that has different version of Python,
:ref:`activate the environment <activate-env>`.


Updating or upgrading Python
=============================

Use the terminal or an Anaconda Prompt for the following steps.

If you are in an environment with Python version 3.4.2, the
following command updates Python to the latest
version in the 3.4 branch:

.. code-block:: bash

    conda update python

The following command upgrades Python to another
branch---3.8---by installing that version of Python. It is not recommended,
rather it is preferable to create a new environment. The resolver has to work
very hard to determine exactly which packages to upgrade. But it is possible,
and the command is:

.. code-block:: bash

    conda install python=3.8
==========================
Using conda with Travis CI
==========================

.. contents::
   :local:
   :depth: 1


If you are already using Travis CI, using conda is a preferable
alternative to using apt and pip to install packages. The
Debian repos provided by Travis may not include packages for all
versions of Python or may not be updated as quickly. Installing
such packages with pip may also be undesirable, as this can take
a long time, which can consume a large portion of the 50 minutes
that Travis allows for each build. Using conda also lets you test
the building of conda recipes on Travis.

This page describes how to use conda to test a Python package
on Travis CI. However, you can use conda with any language, not
just Python.


The .travis.yml file
====================

The following code sample shows how to modify the ``.travis.yml``
file to use `Miniconda <https://conda.io/miniconda.html>`_ for a
project that supports Python 2.7, 3.5, and 3.6:

.. code-block:: yaml

   language: python
   python:
     # We don't actually use the Travis Python, but this keeps it organized.
     - "2.7"
     - "3.5"
     - "3.6"
   install:
     # We do this conditionally because it saves us some downloading if the
     # version is the same.
     - if [[ "$TRAVIS_PYTHON_VERSION" == "2.7" ]]; then
         wget https://repo.continuum.io/miniconda/Miniconda2-latest-Linux-x86_64.sh -O miniconda.sh;
       else
         wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh;
       fi
     - bash miniconda.sh -b -p $HOME/miniconda
     - source "$HOME/miniconda/etc/profile.d/conda.sh"
     - hash -r
     - conda config --set always_yes yes --set changeps1 no
     - conda update -q conda
     # Useful for debugging any issues with conda
     - conda info -a

     # Replace dep1 dep2 ... with your dependencies
     - conda create -q -n test-environment python=$TRAVIS_PYTHON_VERSION dep1 dep2 ...
     - conda activate test-environment
     - python -m pip install .

   script:
     # Your test script goes here

.. note::
   For information about the basic configuration for Travis CI,
   see `Building a Python Project
   <http://docs.travis-ci.com/user/languages/python/#Examples>`_.


Supporting packages that do not have official builds
====================================================

To support a package that does not have official Anaconda builds:

#. Build the package yourself.

#. Add it to an `Anaconda.org <http://Anaconda.org>`_ channel.

#. Add the following line to the install steps in ``.travis.yml``
   so that it finds the packages on that channel:

   .. code-block:: yaml

      - conda config --add channels your_Anaconda_dot_org_username


   .. note::
      Replace ``your_Anaconda_dot_org_username`` with your
      user name.


Building a conda recipe
=======================

If you support official conda packages for your project, you may
want to use conda-build in Travis, so the building of your
recipe is tested as well.

#. Include the conda recipe in the same directory as your source
   code.

#. In your ``.travis.yml`` file, replace the following line:

   .. code-block:: yaml

      - python setup.py install

   with these lines:

   .. code-block:: yaml

      - conda build your-conda-recipe
      - conda install your-package --use-local


AppVeyor
========

`AppVeyor <http://www.appveyor.com/>`_ is a continuous build
service for Windows built on Azure and is an alternative to using
Travis CI with conda.

For an example project building conda packages on AppVeyor, see
https://github.com/rmcgibbo/python-appveyor-conda-example.

Bootstrap your environment
==========================

To bootstrap your environment, use the standalone conda
approach in your ``appveyor.yml``:

.. code-block:: yaml

   # Config file for automatic testing at travis-ci.org

   language: python
   python:
     - "2.7"
     - "3.7"

   install:
     - wget https://repo.anaconda.com/pkgs/misc/conda-execs/conda-latest-linux-64.exe -O conda.exe
     - chmod +x conda.exe
     - export CONDA_ALWAYS_YES=1
     # This is where you put any extra dependencies you may have.
     - ./conda.exe create -p $HOME/miniconda python=$TRAVIS_PYTHON_VERSION conda conda-build pytest six pytest-cov pytest-mock
     - export PATH="$HOME/miniconda/bin:$PATH"
     - hash -r
     # Install your code here.
   script:
     - pytest -v --color=yes --cov=cpr tests
   after_success:
     - conda install codecov
     - codecov
==============
Managing conda
==============

.. contents::
   :local:
   :depth: 1


Verifying that conda is installed
=================================

To verify that conda is installed, in your terminal window or an Anaconda Prompt, run:

.. code::

   conda --version

Conda responds with the version number that you have installed,
such as ``conda 4.7.12``.

If you get an error message, make sure of the following:

* You are logged into the same user account that you used to
  install Anaconda or Miniconda.

* You are in a directory that Anaconda or Miniconda can find.

* You have closed and re-opened the terminal window after
  installing conda.


Determining your conda version
==============================

In addition to the ``conda --version`` command explained above,
you can determine what conda version is installed by running
one of the following commands in your terminal window or an Anaconda Prompt:

.. code-block:: bash

   conda info

OR

.. code-block:: bash

   conda -V


Updating conda to the current version
=====================================

To update conda, in your terminal window or an Anaconda Prompt, run:

.. code::

   conda update conda

Conda compares versions and reports what is available to install.
It also tells you about other packages that will be automatically
updated or changed with the update. If conda reports that a newer
version is available, type ``y`` to update:

.. code::

   Proceed ([y]/n)? y


Suppressing warning message about updating conda
================================================

To suppress the following warning message when you do not want
to update conda to the latest version:

.. code-block::

    ==> WARNING: A newer version of conda exists. <==
    current version: 4.6.13
    latest version: 4.8.0

Update conda by running: ``conda update -n base conda``

Run the following command from your terminal or Anaconda Prompt:
``conda config --set notify_outdated_conda false``

Or add the following line in your ``.condarc`` file:
``notify_outdated_conda: false``
=========================
Managing virtual packages
=========================

.. contents::
   :local:
   :depth: 1

"Virtual" packages are injected into the conda solver to allow real packages
to depend on features present on the system that cannot be managed directly by
conda, like system driver versions or CPU features. Virtual packages are not
real packages and not displayed by ``conda list``. Instead ``conda`` runs a
small bit of code to detect the presence or absence of the system feature that
corresponds to the package. The currently supported list of virtual packages includes:

  * ``__cuda``: Maximum version of CUDA supported by the display driver.
  * ``__osx``: OSX version if applicable.
  * ``__glibc``: Version of glibc supported by the OS.
  * ``__linux``: Available when running on Linux.
  * ``__unix``: Available when running on OSX or Linux.
  * ``__win``: Available when running on Win.

Other virtual packages will be added in future conda releases. These are denoted
by a leading double-underscore in the package name.


Listing detected virtual packages
=================================

Use the terminal or an Anaconda Prompt for the following steps.

To see the list of detected virtual packages, run:

.. code-block:: bash

   conda info

If a package is detected, you will see it listed in the ``virtual packages``
section, as shown in this example::

         active environment : base
        active env location : /Users/demo/dev/conda/devenv
                shell level : 1
           user config file : /Users/demo/.condarc
     populated config files : /Users/demo/.condarc
              conda version : 4.6.3.post8+8f640d35a
        conda-build version : 3.17.8
             python version : 3.7.2.final.0
           virtual packages : __cuda=10.0
           base environment : /Users/demo/dev/conda/devenv (writable)
               channel URLs : https://repo.anaconda.com/pkgs/main/osx-64
                              https://repo.anaconda.com/pkgs/main/noarch
                              https://repo.anaconda.com/pkgs/free/osx-64
                              https://repo.anaconda.com/pkgs/free/noarch
                              https://repo.anaconda.com/pkgs/r/osx-64
                              https://repo.anaconda.com/pkgs/r/noarch
              package cache : /Users/demo/dev/conda/devenv/pkgs
                              /Users/demo/.conda/pkgs
           envs directories : /Users/demo/dev/conda/devenv/envs
                              /Users/demo/.conda/envs
                   platform : osx-64
                 user-agent : conda/4.6.3.post8+8f640d35a requests/2.21.0 CPython/3.7.2 Darwin/17.7.0 OSX/10.13.6
                    UID:GID : 502:20
                 netrc file : None
               offline mode : False


Overriding detected packages
============================

For troubleshooting, it is possible to override virtual package detection
using an environment variable. Supported variables include:

* ``CONDA_OVERRIDE_CUDA`` - CUDA version number or set to ``""`` for no CUDA
  detected.
* ``CONDA_OVERRIDE_OSX`` - OSX version number or set to ``""`` for no OSX
  detected.
* ``CONDA_OVERRIDE_GLIBC`` - GLIBC version number or set to ``""`` for no GLIBC.
  This only applies on Linux.
=================
Managing packages
=================

.. contents::
   :local:
   :depth: 1

.. note::
   There are many options available for the commands described
   on this page. For details, see :doc:`../../commands`.


Searching for packages
======================

Use the terminal or an Anaconda Prompt for the following steps.

To see if a specific package, such as SciPy, is available for
installation:

.. code-block:: bash

   conda search scipy

To see if a specific package, such as SciPy, is available for
installation from Anaconda.org:

.. code-block:: bash

   conda search --override-channels --channel defaults scipy

To see if a specific package, such as iminuit, exists in a
specific channel, such as http://conda.anaconda.org/mutirri,
and is available for installation:

.. code-block:: bash

   conda search --override-channels --channel http://conda.anaconda.org/mutirri iminuit


Installing packages
===================

Use the terminal or an Anaconda Prompt for the following steps.

To install a specific package such as SciPy into an existing
environment "myenv":

.. code-block:: bash

   conda install --name myenv scipy

If you do not specify the environment name, which in this
example is done by ``--name myenv``, the package installs
into the current environment:

.. code-block:: bash

   conda install scipy

To install a specific version of a package such as SciPy:

.. code-block:: bash

   conda install scipy=0.15.0

.. _`installing multiple packages`:

To install multiple packages at once, such as SciPy and cURL:

.. code-block:: bash

   conda install scipy curl

.. note::
   It is best to install all packages at once, so that all of
   the dependencies are installed at the same time.

To install multiple packages at once and specify the version of
the package:

.. code-block:: bash

   conda install scipy=0.15.0 curl=7.26.0

To install a package for a specific Python version:

.. code-block:: bash

   conda install scipy=0.15.0 curl=7.26.0 -n py34_env

If you want to use a specific Python version, it is best to use
an environment with that version. For more information,
see :doc:`../troubleshooting`.

Installing similar packages
===========================
Installing packages that have similar filenames and serve similar
purposes may return unexpected results. The package last installed
will likely determine the outcome, which may be undesirable.
If the two packages have different names, or if you're building
variants of packages and need to line up other software in the stack,
we recommend using :ref:`mutex-metapackages`.

Installing packages from Anaconda.org
=====================================

Packages that are not available using ``conda install`` can be
obtained from Anaconda.org, a package management service for
both public and private package repositories. Anaconda.org
is an Anaconda product, just like Anaconda and Miniconda.

To install a package from Anaconda.org:

#. In a browser, go to http://anaconda.org.

#. To find the package named bottleneck, type ``bottleneck``
   in the top-left box named Search Packages.

#. Find the package that you want and click it to go to the
   detail page.

   The detail page displays the name of the channel. In this
   example it is the "pandas" channel.

#. Now that you know the channel name, use the ``conda install``
   command to install the package. In your terminal window or
   an Anaconda Prompt, run:

   .. code::

      conda install -c pandas bottleneck

   This command tells conda to install the bottleneck package
   from the pandas channel on Anaconda.org.

#. To check that the package is installed, in your terminal window
   or an Anaconda Prompt, run:

   .. code::

      conda list

   A list of packages appears, including bottleneck.

.. note::
   For information on installing packages from multiple
   channels, see :doc:`manage-channels`.


Installing non-conda packages
=============================

If a package is not available from conda or Anaconda.org, you may be able to
find and install the package via conda-forge or with another package manager
like pip.

Pip packages do not have all the features of conda packages and we recommend
first trying to install any package with conda. If the package is unavailable
through conda, try finding and installing it with
`conda-forge <https://conda-forge.org/search.html>`_.

If you still cannot install the package, you can try
installing it with pip. The differences between pip and
conda packages cause certain unavoidable limits in compatibility but conda
works hard to be as compatible with pip as possible.

.. note::
   Both pip and conda are included in Anaconda and Miniconda, so you do not
   need to install them separately.

   Conda environments replace virtualenv, so there is no need to activate a
   virtualenv before using pip.

It is possible to have pip installed outside a conda environment or inside a
conda environment.

To gain the benefits of conda integration, be sure to install pip inside the
currently active conda environment and then install packages with that
instance of pip. The command ``conda list`` shows packages installed this way,
with a label showing that they were installed with pip.

You can install pip in the current conda environment with the command
``conda install pip``, as discussed in :ref:`pip-in-env`.

If there are instances of pip installed both inside and outside the current
conda environment, the instance of pip installed inside the current conda
environment is used.

To install a non-conda package:

#. Activate the environment where you want to put the program:

   * On Windows, in your Anaconda Prompt, run ``activate myenv``.
   * On macOS and Linux, in your terminal window, run ``conda activate myenv``.

#. To use pip to install a program such as See, in your terminal window or an Anaconda Prompt,
   run::

     pip install see

#. To verify the package was installed, in your terminal window or an Anaconda Prompt,
   run:

   .. code::

      conda list

   If the package is not shown, install pip as described in :ref:`pip-in-env`
   and try these commands again.


Installing commercial packages
==============================

Installing a commercial package such as IOPro is the same as
installing any other package. In your terminal window or an Anaconda Prompt,
run:

.. code-block:: bash

   conda install --name myenv iopro

This command installs a free trial of one of Anaconda's
commercial packages called `IOPro
<https://docs.continuum.io/iopro/>`_, which can speed up your
Python processing. Except for academic use, this free trial
expires after 30 days.


Viewing a list of installed packages
====================================

Use the terminal or an Anaconda Prompt for the following steps.

To list all of the packages in the active environment:

.. code::

   conda list

To list all of the packages in a deactivated environment:

.. code::

   conda list -n myenv

Listing package dependencies
============================

To find what packages are depending on a specific package in
your environment, there is not one specific conda command.
It requires a series of steps:

#. List the dependencies that a specific package requires to run:
   ``conda search package_name --info``

#. Find your installation’s package cache directory:
   ``conda info``

#. Find package dependencies. By default, Anaconda/Miniconda stores packages in ~/anaconda/pkgs/ (or ~/opt/pkgs/ on macOS Catalina).
   Each package has an index.json file which lists the package’s dependencies.
   This file resides in ~anaconda/pkgs/package_name/info/index.json.

#. Now you can find what packages depend on a specific package. Use grep to search all index.json files
   as follows: ``grep package_name ~/anaconda/pkgs/*/info/index.json``

The result will be the full package path and version of anything containing the <package_name>.

Example:
``grep numpy ~/anaconda3/pkgs/*/info/index.json``

Output from the above command::

  /Users/testuser/anaconda3/pkgs/anaconda-4.3.0-np111py36_0/info/index.json: numpy 1.11.3 py36_0
  /Users/testuser/anaconda3/pkgs/anaconda-4.3.0-np111py36_0/info/index.json: numpydoc 0.6.0 py36_0
  /Users/testuser/anaconda3/pkgs/anaconda-4.3.0-np111py36_0/info/index.json: numpy 1.11.3 py36_0

Note this also returned “numpydoc” as it contains the string “numpy”. To get a more specific result
set you can add \< and \>.

Updating packages
=================

Use ``conda update`` command to check to see if a new update is
available. If conda tells you an update is available, you can
then choose whether or not to install it.

Use the terminal or an Anaconda Prompt for the following steps.

* To update a specific package:

  .. code::

    conda update biopython

* To update Python:

  .. code::

    conda update python

* To update conda itself:

  .. code::

    conda update conda

.. note::
   Conda updates to the highest version in its series, so
   Python 2.7 updates to the highest available in the 2.x series and
   3.6 updates to the highest available in the 3.x series.

To update the Anaconda metapackage:

.. code-block:: bash

   conda update conda
   conda update anaconda

Regardless of what package you are updating, conda compares
versions and then reports what is available to install. If no
updates are available, conda reports "All requested packages are
already installed."

If a newer version of your package is available and you wish to
update it, type ``y`` to update:

.. code::

   Proceed ([y]/n)? y


.. _pinning-packages:

Preventing packages from updating (pinning)
===========================================

Pinning a package specification in an environment prevents
packages listed in the ``pinned`` file from being updated.

In the environment's ``conda-meta`` directory, add a file
named ``pinned`` that includes a list of the packages that you
do not want updated.

EXAMPLE: The file below forces NumPy to stay on the 1.7 series,
which is any version that starts with 1.7. This also forces SciPy to
stay at exactly version 0.14.2::

  numpy 1.7.*
  scipy ==0.14.2

With this ``pinned`` file, ``conda update numpy`` keeps NumPy at
1.7.1, and ``conda install scipy=0.15.0`` causes an error.

Use the ``--no-pin`` flag to override the update restriction on
a package. In the terminal or an Anaconda Prompt, run:

.. code-block:: bash

   conda update numpy --no-pin

Because the ``pinned`` specs are included with each conda
install, subsequent ``conda update`` commands without
``--no-pin`` will revert NumPy back to the 1.7 series.


Adding default packages to new environments automatically
=========================================================

To automatically add default packages to each new environment that you create:

#. Open Anaconda Prompt or terminal and run:
   ``conda config --add create_default_packages PACKAGENAME1 PACKAGENAME2``

#. Now, you can create new environments and the default packages will be installed in all of them.

You can also :ref:`edit the .condarc file <config-add-default-pkgs>` with a list of packages to create
by default.

You can override this option at the command prompt with the ``--no-default-packages`` flag.

Removing packages
=================

Use the terminal or an Anaconda Prompt for the following steps.

* To remove a package such as SciPy in an environment such as
  myenv:

  .. code-block:: bash

    conda remove -n myenv scipy

* To remove a package such as SciPy in the current environment:

  .. code-block:: bash

    conda remove scipy

* To remove multiple packages at once, such as SciPy and cURL:

  .. code-block:: bash

    conda remove scipy curl

* To confirm that a package has been removed:

  .. code::

    conda list
===========
Tasks
===========

.. toctree::
   :maxdepth: 1

   manage-conda
   manage-environments
   manage-channels
   create-custom-channels
   manage-pkgs
   manage-python
   manage-virtual
   use-conda-with-travis-ci
   view-command-line-help
=========================
Viewing command-line help
=========================

To see a list of supported conda commands, in your terminal window or an Anaconda Prompt, run:

.. code-block:: bash

   conda --help

OR

.. code-block:: bash

   conda -h

To get help for a specific command, type the command name
followed by ``--help``.

EXAMPLE: To see help for the ``create`` command, in your terminal window or an Anaconda Prompt, run:

.. code-block:: bash

   conda create -h

.. note::
   You can see the same command help in :doc:`../../commands`.
========================
Creating custom channels
========================

Channels are the path that conda takes to look for packages. The
easiest way to use and manage custom channels is to use a private
or public repository on `Anaconda.org <https://anaconda.org/>`_.
If you designate your Anaconda.org
repository as private, then only you and those you grant access to
can access your private repository.

If you do not wish to upload your packages to the Internet, you
can build a custom repository served either through a web server
or locally using a ``file://`` URL.

To create a custom channel:

#. If you have not yet used conda-build, install conda-build:

   .. code::

      conda install conda-build

#. Organize all the packages in subdirectories for the platforms
   you wish to serve:

   .. code::

      channel/
     linux-64/
      package-1.0-0.tar.bz2
     linux-32/
      package-1.0-0.tar.bz2
     osx-64/
      package-1.0-0.tar.bz2
     win-64/
      package-1.0-0.tar.bz2
     win-32/
      package-1.0-0.tar.bz2

#. Run ``conda index`` on the channel root directory:

   .. code::

      conda index channel/

   The conda index command generates a file ``repodata.json``,
   saved to each repository directory, which conda uses to get
   the metadata for the packages in the channel.

   .. note::
      Each time you add or modify a package in the channel,
      you must rerun ``conda index`` for conda to see the update.

#. To test custom channels, serve the custom channel using a web
   server or using a ``file://`` URL to the channel directory.
   Test by sending a search command to the custom channel.

   EXAMPLE: If you want a file in the custom channel location
   ``/opt/channel/linux-64/``, search for files in that location:

   .. code::

      conda search -c file:///opt/channel/ --override-channels

   .. note::
      The channel URL does not include the platform, as conda
      automatically detects and adds the platform.

   .. note::
      The option  ``--override-channels`` ensures that conda
      searches only your specified channel and no other channels,
      such as default channels or any other channels you may have
      listed in your ``.condarc`` file.

   If you have set up your private repository correctly, you
   get the following output:

   .. code::

      Fetching package metadata: . . . .

   This is followed by a list of the conda packages found. This
   verifies that you have set up and indexed your private
   repository successfully.
use-mro-with-conda
==================

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='https://docs.anaconda.com/anaconda/user-guide/tasks/use-r-language'" /></head><body></body></html>
===========================
Conda package specification
===========================

.. contents::
   :local:
   :depth: 1


.. _package_metadata:

Package metadata
================

The ``info/`` directory contains all metadata about a package.
Files in this location are not installed under the install
prefix. Although you are free to add any file to this directory,
conda only inspects the content of the files discussed below.

Info
----

* files

  * a list of all the files in the package (not included in ``info/``)

* ``index.json``

  * metadata about the package including platform, version,
    dependencies, and build info

.. code-block:: bash

  {
    "arch": "x86_64",
    "build": "py37hfa4b5c9_1",
    "build_number": 1,
    "depends": [
      "depend > 1.1.1"
    ],
    "license": "BSD 3-Clause",
    "name": "fun-packge",
    "platform": "linux",
    "subdir": "linux-64",
    "timestamp": 1535416612069,
    "version": "0.0.0"
  }

* ``paths.json``

  * a list of files in the package, along with their associated SHA-256, size in bytes,
    and the type of path (eg. hardlink vs. softlink)

.. code-block:: bash

  {
    "paths": [
      {
        "_path": "lib/python3.7/site-packages/fun-packge/__init__.py",
        "path_type": "hardlink",
        "sha256": "76f3b6e34feeb651aff33ca59e0279c4eadce5a50c6ad93b961c846f7ba717e9",
        "size_in_bytes": 2067
      },
      {
        "_path": "lib/python3.7/site-packages/fun-packge/__config__.py",
        "path_type": "hardlink",
        "sha256": "348e3602616c1fe4c84502b1d8cf97c740d886002c78edab176759610d287f06",
        "size_in_bytes": 87519
      },
      ...
  }


info/index.json
---------------

This file contains basic information about the package, such as
name, version, build string, and dependencies. The content of this
file is stored in ``repodata.json``, which is the repository
index file, hence the name ``index.json``. The JSON object is a
dictionary containing the keys shown below. The filename of the
conda package is composed of the first 3 values, as in:
``<name>-<version>-<build>.tar.bz2``.

.. list-table::
   :widths: 15 15 50

   * - **Key**
     - **Type**
     - **Description**

   * - name
     - string
     - The lowercase name of the package. May contain the "-"
       character.

   * - version
     - string
     - The package version. May not contain "-". Conda
       acknowledges `PEP 440
       <https://www.python.org/dev/peps/pep-0440/>`_.

   * - build
     - string
     - The build string. May not contain "-". Differentiates
       builds of packages with otherwise identical names and
       versions, such as:

       * A build with other dependencies, such as Python 3.4
         instead of Python 2.7.
       * A bug fix in the build process.
       * Some different optional dependencies, such as MKL versus
         ATLAS linkage. Nothing in conda actually inspects the
         build string. Strings such as ``np18py34_1`` are
         designed only for human readability and conda never
         parses them.

   * - build_number
     - integer
     - A non-negative integer representing the build number of
       the package.

       Unlike the build string, the build_number is inspected by
       conda. Conda uses it to sort packages that have otherwise
       identical names and versions to determine the latest one.
       This is important because new builds that contain bug
       fixes for the way a package is built may be added to a
       repository.

   * - depends
     - list of strings
     - A list of dependency specifications, where each element
       is a string, as outlined in :ref:`build-version-spec`.

   * - arch
     - string
     - Optional. The architecture the package is built for.

       EXAMPLE: ``x86_64``

       Conda currently does not use this key.

   * - platform
     - string
     - Optional. The OS that the package is built for.

       EXAMPLE: ``osx``

       Conda currently does not use this key. Packages for a
       specific architecture and platform are usually
       distinguished by the repository subdirectory that contains
       them---see :ref:`repo-si`.

info/files
----------

Lists all files that are part of the package itself, 1 per line.
All of these files need to get linked into the environment. Any
files in the package that are not listed in this file are not
linked when the package is installed. The directory delimiter for
the files in ``info/files`` should always be "/", even on
Windows. This matches the directory delimiter used in the
tarball.


info/has_prefix
---------------

Optional file. Lists all files that contain a hard-coded build
prefix or placeholder prefix, which needs to be replaced by the
install prefix at installation time.

.. note::
   Due to the way the binary replacement works, the
   placeholder prefix must be longer than the install prefix.

Each line of this file should be either a path, in which case it
is considered a text file with the default placeholder
``/opt/anaconda1anaconda2anaconda3``, or a space-separated list
of placeholder, mode, and path, where:

* Placeholder is the build or placeholder prefix.
* Mode is either ``text`` or ``binary``.
* Path is the relative path of the file to be updated.

EXAMPLE: On Windows::

  "Scripts/script1.py"
  "C:\Users\username\anaconda\envs\_build" text "Scripts/script2.bat"
  "C:/Users/username/anaconda/envs/_build" binary "Scripts/binary"

EXAMPLE: On macOS or Linux::

  bin/script.sh
  /Users/username/anaconda/envs/_build binary bin/binary
  /Users/username/anaconda/envs/_build text share/text

.. note::
   The directory delimiter for the relative path must always
   be "/", even on Windows. The placeholder may contain either "\\"
   or "/" on Windows, but the replacement prefix will match the
   delimiter used in the placeholder. The default placeholder
   ``/opt/anaconda1anaconda2anaconda3`` is an exception, being
   replaced with the install prefix using the native path
   delimiter. On Windows, the placeholder and path always appear
   in quotes to support paths with spaces.

info/license.txt
----------------

Optional file. The software license for the package.

info/no_link
------------

Optional file. Lists all files that cannot be linked - either
soft-linked or hard-linked - into environments and are copied
instead.

info/about.json
---------------

Optional file. Contains the entries in the `about section <https://docs.conda.io/projects/conda-build/en/latest/resources/define-metadata.html#about-section>`_
of the ``meta.yaml`` file. The following keys are
added to ``info/about.json`` if present in the build recipe:

* home
* dev_url
* doc_url
* license_url
* license
* summary
* description
* license_family

info/recipe
-----------

A directory containing the full contents of the build recipe.

meta.yaml.rendered
------------------

The fully rendered build recipe. See
`conda render <https://docs.conda.io/projects/conda-build/en/latest/resources/commands/conda-render.html>`_.

This directory is present only when the the include_recipe flag
is ``True`` in the `build section <https://docs.conda.io/projects/conda-build/en/latest/resources/define-metadata.html#build-section>`_.


.. _repo-si:

Repository structure and index
==============================

A conda repository - or channel - is a directory tree, usually
served over HTTPS, which has platform subdirectories, each of
which contain conda packages and a repository index. The index
file ``repodata.json`` lists all conda packages in the platform
subdirectory. Use ``conda index`` to create such an index from
the conda packages within a directory. It is simple mapping of
the full conda package filename to the dictionary object in
``info/index.json`` described in `link scripts <https://docs.conda.io/projects/conda-build/en/latest/resources/link-scripts.html>`_.

In the following example, a repository provides the conda package
``misc-1.0-np17py27_0.tar.bz2`` on 64-bit Linux and 32-bit
Windows::

  <some path>/linux-64/repodata.json
                       repodata.json.bz2
                       misc-1.0-np17py27_0.tar.bz2
             /win-32/repodata.json
                     repodata.json.bz2
                     misc-1.0-np17py27_0.tar.bz2

.. note::
   Both conda packages have identical filenames and are
   distinguished only by the repository subdirectory that contains
   them.


.. _build-version-spec:

Package match specifications
============================

This match specification is not the same as the syntax used at
the command line with ``conda install``, such as
``conda install python=3.9``. Internally, conda translates the
command line syntax to the spec defined in this section.

EXAMPLE: python=3.9 is translated to python 3.9*.

Package dependencies are specified using a match specification.
A match specification is a space-separated string of 1, 2, or 3
parts:

* The first part is always the exact name of the package.

* The second part refers to the version and may contain special
  characters:

  * \| means OR.

    EXAMPLE: ``1.0|1.2`` matches version 1.0 or 1.2

  * \* matches 0 or more characters in the version string. In
    terms of regular expressions, it is the same as ``r``.*````.

    EXAMPLE: 1.0|1.4* matches 1.0, 1.4 and 1.4.1b2, but not 1.2.

  * <, >, <=, >=, == and != are relational operators on versions,
    which are compared using
    `PEP-440 <https://www.python.org/dev/peps/pep-0440/>`_.  For example,
    ``<=1.0`` matches ``0.9``, ``0.9.1``, and ``1.0``, but not ``1.0.1``.
    ``==`` and ``!=`` are exact equality.

    Pre-release versioning is also supported such that ``>1.0b4`` will match
    ``1.0b5`` and ``1.0rc1`` but not ``1.0b4`` or ``1.0a5``.

    EXAMPLE: <=1.0 matches 0.9, 0.9.1, and 1.0, but not 1.0.1.

  * , means AND.

    EXAMPLE: >=2,<3 matches all packages in the 2 series. 2.0,
    2.1 and 2.9 all match, but 3.0 and 1.0 do not.

  * , has higher precedence than \|, so >=1,<2|>3 means greater
    than or equal to 1 AND less than 2 or greater than 3, which
    matches 1, 1.3 and 3.0, but not 2.2.

  Conda parses the version by splitting it into parts separated
  by \|. If the part begins with <, >, =, or !, it is parsed as a
  relational operator. Otherwise, it is parsed as a version,
  possibly containing the "*" operator.

* The third part is always the exact build string. When there are
  3 parts, the second part must be the exact version.

Remember that the version specification cannot contain spaces,
as spaces are used to delimit the package, version, and build
string in the whole match specification. ``python >= 2.7`` is an
invalid match specification. Furthermore, ``python>=2.7`` is
matched as any version of a package named ``python>=2.7``.

When using the command line, put double quotes around any package
version specification that contains the space character or any of
the following characters: <, >, \*, or \|.

EXAMPLE::

  conda install numpy=1.11
  conda install numpy==1.11
  conda install "numpy>1.11"
  conda install "numpy=1.11.1|1.11.3"
  conda install "numpy>=1.8,<2"


Examples
--------

The OR constraint "numpy=1.11.1|1.11.3" matches with 1.11.1 or
1.11.3.

The AND constraint "numpy>=1.8,<2" matches with 1.8 and 1.9 but
not 2.0.

The fuzzy constraint numpy=1.11 matches 1.11, 1.11.0, 1.11.1,
1.11.2, 1.11.18, and so on.

The exact constraint numpy==1.11 matches 1.11, 1.11.0, 1.11.0.0,
and so on.

The build string constraint "numpy=1.11.2=*nomkl*" matches the
NumPy 1.11.2 packages without MKL but not the normal MKL NumPy
1.11.2 packages.

The build string constraint "numpy=1.11.1|1.11.3=py36_0" matches
NumPy 1.11.1 or 1.11.3 built for Python 3.6 but not any versions
of NumPy built for Python 3.5 or Python 2.7.

The following are all valid match specifications for
numpy-1.8.1-py27_0:

* numpy
* numpy 1.8*
* numpy 1.8.1
* numpy >=1.8
* numpy ==1.8.1
* numpy 1.8|1.8*
* numpy >=1.8,<2
* numpy >=1.8,<2|1.9
* numpy 1.8.1 py27_0
* numpy=1.8.1=py27_0

Version ordering
================

The ``class VersionOrder(object)`` implements an order relation
between version strings.

Version strings can contain the usual alphanumeric characters
(A-Za-z0-9), separated into components by dots and underscores. Empty
segments (i.e. two consecutive dots, a leading/trailing underscore)
are not permitted. An optional epoch number - an integer
followed by ``!`` - can precede the actual version string
(this is useful to indicate a change in the versioning
scheme itself). Version comparison is case-insensitive.

Supported version strings
-------------------------

Conda supports six types of version strings:

   * Release versions contain only integers, e.g. ``1.0``, ``2.3.5``.
   * Pre-release versions use additional letters such as ``a`` or ``rc``,
     for example ``1.0a1``, ``1.2.beta3``, ``2.3.5rc3``.
   * Development versions are indicated by the string ``dev``,
     for example ``1.0dev42``, ``2.3.5.dev12``.
   * Post-release versions are indicated by the string ``post``,
     for example ``1.0post1``, ``2.3.5.post2``.
   * Tagged versions have a suffix that specifies a particular
     property of interest, e.g. ``1.1.parallel``. Tags can be added
     to any of the preceding 4 types. As far as sorting is concerned,
     tags are treated like strings in pre-release versions.
   * An optional local version string separated by ``+`` can be appended
     to the main (upstream) version string. It is only considered
     in comparisons when the main versions are equal, but otherwise
     handled in exactly the same manner.


Predictable version ordering
----------------------------

To obtain a predictable version ordering, it is crucial to keep the
version number scheme of a given package consistent over time.
Conda considers prerelease versions as less than release versions.

* Version strings should always have the same number of components
  (except for an optional tag suffix or local version string).

* Letters/Strings indicating non-release versions should always
  occur at the same position.

Before comparison, version strings are parsed as follows:

  * They are first split into epoch, version number, and local version
    number at ``!`` and ``+`` respectively. If there is no ``!``,
    the epoch is set to 0. If there is no ``+``, the local version is
    empty.
  * The version part is then split into components at ``.`` and ``_``.
  * Each component is split again into runs of numerals and non-numerals
  * Subcomponents containing only numerals are converted to integers.
  * Strings are converted to lowercase, with special treatment for ``dev``
    and ``post``.
  * When a component starts with a letter, the fillvalue 0 is inserted
    to keep numbers and strings in phase, resulting in ``1.1.a1' == 1.1.0a1'``.
  * The same is repeated for the local version part.

Examples:

  ``1.2g.beta15.rc  =>  [[0], [1], [2, 'g'], [0, 'beta', 15], [0, 'rc']]``

  ``1!2.15.1_ALPHA  =>  [[1], [2], [15], [1, '_alpha']]``

The resulting lists are compared lexicographically, where the following
rules are applied to each pair of corresponding subcomponents:

  * Integers are compared numerically.
  * Strings are compared lexicographically, case-insensitive.
  * Strings are smaller than integers, except

      * ``dev`` versions are smaller than all corresponding versions of other types.

      * ``post`` versions are greater than all corresponding versions of other types.
  * If a subcomponent has no correspondent, the missing correspondent is
    treated as integer 0 to ensure ``'1.1' == 1.1.0'``.

The resulting order is::

   0.4
 < 0.4.0
 < 0.4.1.rc
 == 0.4.1.RC   # case-insensitive comparison
 < 0.4.1
 < 0.5a1
 < 0.5b3
 < 0.5C1      # case-insensitive comparison
 < 0.5
 < 0.9.6
 < 0.960923
 < 1.0
 < 1.1dev1    # special case ``dev``
 < 1.1a1
 < 1.1.0dev1  # special case ``dev``
 == 1.1.dev1   # 0 is inserted before string
 < 1.1.a1
 < 1.1.0rc1
 < 1.1.0
 == 1.1
 < 1.1.0post1 # special case ``post``
 == 1.1.post1  # 0 is inserted before string
 < 1.1post1   # special case ``post``
 < 1996.07.12
 < 1!0.4.1    # epoch increased
 < 1!3.1.1.6
 < 2!0.4.1    # epoch increased again

Some packages (most notably OpenSSL) have incompatible version conventions.
In particular, OpenSSL interprets letters as version counters rather than
pre-release identifiers. For OpenSSL, the relation ``1.0.1 < 1.0.1a   =>   True   # for OpenSSL``
holds, whereas conda packages use the opposite ordering.
You can work around this problem by appending a dash to plain
version numbers:

``1.0.1a  =>  1.0.1post.a      # ensure correct ordering for OpenSSL``
=================
Conda performance
=================

Conda's performance can be affected by a variety of things.
Unlike many package managers, Anaconda’s repositories generally
don’t filter or remove old packages from the index. This allows old
environments to be easily recreated. However, it does mean that the
index metadata is always growing, and thus conda becomes slower as the
number of packages increases.

How a package is installed
==========================

While you are waiting, conda is doing a lot of work installing the
packages. At any point along these steps, performance issues may arise.

Conda follows these steps when installing a package:

#. Downloading and processing index metadata.
#. Reducing the index.
#. Expressing the package data and constraints as a SAT problem.
#. Running the solver.
#. Downloading and extracting packages.
#. Verifying package contents.
#. Linking packages from package cache into environments.

Therefore, if you're experiencing a slowdown, evaluate the following questions
to identify potential causes:

* Are you creating a new environment or installing into an existing one?
* Does your environment have pip-installed dependencies in it?
* What channels are you using?
* What packages are you installing?
* Is the channel metadata sane?
* Are channels interacting in bad ways?


Improving conda performance
===========================

To address these challenges, you can move packages to archive
channels and follow the methods below to present conda with a smaller, simpler view than
all available packages.

To speed up conda, we offer the following recommendations.

Are you:
    * Using conda-forge?
        * Use conda-metachannel to reduce conda’s problem size.
    * Using bioconda?
        * Use conda-metachannel to reduce conda’s problem size.
        * `Read more about docker images <https://github.com/bioconda/bioconda-recipes/issues/13774>`_.
    * Specifying very broad package specs?
        * Be more specific. Letting conda filter more candidates makes it faster.
          For example, instead of ``numpy``, we recommend ``numpy=1.15`` or, even better, ``numpy=1.15.4``.
        * If you are using R, instead of specifying only ``r-essentials``, specify ``r-base=3.5 r-essentials``.
    * Feeling frustrated with “verifying transaction” and also feeling lucky?
        * Run ``conda config --set safety_checks disabled``.
    * Getting strange mixtures of defaults and conda-forge?
        * Run ``conda config --set channel_priority strict``.
        * This also makes things go faster by eliminating possible mixed solutions.
    * Observing that an Anaconda or Miniconda installation is getting slower over time?
        * Create a fresh environment. As environments grow, they become harder
          and harder to solve. Working with small, dedicated environments can
          be much faster.

Read more about `how we made conda faster <https://www.anaconda.com/how-we-made-conda-faster-4-7/>`_.

Set strict channel priority
---------------------------

Setting strict channel priority makes it so that if a package exists on
a channel, conda will ignore all packages with the same name on lower
priority channels.

.. figure:: ../../img/strict-disabled.png
    :width: 50%
.. figure:: ../../img/strict-enabled.png
    :width: 50%

This can dramatically reduce package search space and reduces the use of
improperly constrained packages.

One thing to consider is that setting strict channel priority may make
environments unsatisfiable. Learn more about :ref:`strict`.


Reduce the index
----------------
One option for speeding up conda is to reduce the index. The index is
reduced by conda based upon the user's input specs. It's likely that
your repodata contains package data that is not used in the solving stage.
Filtering out these unnecessary packages before solving can save time.

Making your input specifications more specific improves
the effectiveness of the index reduction and, thus, speeds up the
process. Listing a version and build string for each of your specs can
dramatically reduce the number of packages that are considered when solving
so that the SAT doesn’t have as much work to do.

Reducing the index:
  * Reduces unnecessary input into generating solver clauses.
  * Reduces solve complexity.
  * Prefers newer packages that apply constraints.

Read more on `Understanding and Improving Conda's Performance
<https://www.anaconda.com/understanding-and-improving-condas-performance/>`_.
==============
Conda commands
==============

The ``conda`` command is the primary interface for managing
installations of various packages. It can:

* Query and search the Anaconda package index and current
  Anaconda installation.

* Create new conda environments.

* Install and update packages into existing conda environments.

.. tip::
   You can abbreviate many frequently used command options that
   are preceded by 2 dashes (``--``) to just 1 dash and the first
   letter of the option. So ``--name`` and ``-n`` are the same, and
   ``--envs`` and ``-e`` are the same.

For full usage of each command, including abbreviations, see
:doc:`../../commands`. You can see the same information at the
command line by :doc:`viewing the command-line help
<../tasks/view-command-line-help>`.
=====================
Installing with conda
=====================

.. image:: /img/installing-with-conda.png
    :align: right

.. _installing-with-conda:


To install conda packages, in the terminal or an Anaconda Prompt, run::

  conda install [packagename]


During the install process, files are extracted into the specified
environment, defaulting to the current environment if none is specified.
Installing the files of a conda package into an
environment can be thought of as changing the directory to an
environment, and then downloading and extracting the artifact
and its dependencies---all with the single
``conda install [packagename]`` command.

Read more about :doc:`conda environments and directory structure <../concepts/environments>`.

* When you ``conda install`` a package that exists in a channel and has no dependencies, conda:

  * Looks at your configured channels (in priority).

  * Reaches out to the repodata associated with your channels/platform.

  * Parses repodata to search for the package.

  * Once the package is found, conda pulls it down and installs.

Conda update versus conda install
=================================

``conda update`` is used to update to the latest compatible version.
``conda install`` can be used to install any version.

Example:

* If Python 2.7.0 is currently installed, and the latest version of Python 2 is 2.7.5, then ``conda update python`` installs Python 2.7.5. It does not install Python 3.

* If Python 3.7.0 is currently installed, and the latest version of Python is 3.9.0, then ``conda install python=3`` installs Python 3.9.0.

Conda uses the same rules for other packages. ``conda update`` always installs the highest version with the same major version number, whereas ``conda install`` always installs the highest version.


Installing conda packages offline
=================================

To install conda packages offline, run:
``conda install /path-to-package/package-filename.tar.bz2/``

If you prefer, you can create a /tar/ archive file containing
many conda packages and install them all with one command:
``conda install /packages-path/packages-filename.tar``

.. note::
   If an installed package does not work, it may be missing
   dependencies that need to be resolved manually.

Installing packages directly from the file does not resolve
dependencies.


Installing conda packages with a specific build number
======================================================

If you want to install conda packages with the correct package specification, try
``pkg_name=version=build_string``. Read more about `build strings and package naming conventions <https://docs.conda.io/projects/conda-build/en/latest/concepts/package-naming-conv.html#index-2>`_.
Learn more about `package specifications and metadata <https://docs.conda.io/projects/conda-build/en/latest/resources/package-spec.html#package-metadata>`_.

For example, if you want to install llvmlite 0.31.0dev0 on Python 3.7.8, you
would enter::

    conda install  -c numba/label/dev llvmlite=0.31.0dev0=py37_8
==================
Conda environments
==================

A conda environment is a directory that contains a specific
collection of conda packages that you have installed. For
example, you may have one environment with NumPy 1.7 and its
dependencies, and another environment with NumPy 1.6 for legacy
testing. If you change one environment, your other environments
are not affected. You can easily activate or deactivate
environments, which is how you switch between them. You can also
share your environment with someone by giving them a copy of your
``environment.yaml`` file. For more information, see
:doc:`../tasks/manage-environments`.


Conda directory structure
=========================

``ROOT_DIR``
------------
The directory that Anaconda or Miniconda was installed into.

EXAMPLES:

.. code-block:: shell

   /opt/Anaconda  #Linux
   C:\Anaconda    #Windows

``/pkgs``
---------

Also referred to as PKGS_DIR. This directory contains
decompressed packages, ready to be linked in conda environments.
Each package resides in a subdirectory corresponding to its
canonical name.

``/envs``
---------

The system location for additional conda environments to be
created.

The following subdirectories comprise the default Anaconda
environment:

| ``/bin``
| ``/include``
| ``/lib``
| ``/share``
|

Other conda environments usually contain the same subdirectories
as the default environment.

Virtual environments
====================

A virtual environment is a tool that helps to
keep dependencies required by different projects
separate by creating isolated spaces for them that
contain per-project dependencies for them.

Users can create virtual environments
using one of several tools such as
Pipenv or Poetry, or a conda virtual
environment. Pipenv and Poetry are based around Python's
built-in venv library, whereas conda has its own notion of virtual
environments that is lower-level (Python itself is a dependency provided
in conda environments).

Scroll to the right in the table below.

Some other traits are:

.. list-table::
   :widths: 20 40 40
   :header-rows: 1

   * -
     - Python virtual environment
     - Conda virtual environment
   * - **Libraries**
     - Statically link, vendor libraries in wheels,
       or use apt/yum/brew/etc.
     - Install system-level libraries as conda dependencies.
   * - **System**
     - Depend on base system install of Python.
     - Python is independent from system.
   * - **Extending environment**
     - Extend environment with pip.
     - Extended environment with conda or pip.
   * - **Non-Python dependencies**
     -
     - Manages non-Python dependencies (R, Perl,
       arbitrary executables).
   * - **Tracking dependencies**
     -
     - Tracks binary dependencies explicitly.

|

Why use venv-based virtual environments
---------------------------------------

- You prefer their workflow or spec formats.
- You prefer to use the system Python and libraries.
- Your project maintainers only publish to PyPI, and
  you prefer packages that come more directly from the
  project maintainers, rather than someone else providing
  builds based on the same code.

Why use conda virtual environments?
-----------------------------------

- You want control over binary compatibility choices.
- You want to utilize newer language standards, such as C++ 17.
- You need libraries beyond what the system Python offers.
- You want to manage packages from languages other than Python
  in the same space.

Workflow differentiators
========================

Some questions to consider as you determine your preferred
workflow and virtual environment:

- Is your environment shared across multiple code projects?
- Does your environment live alongside your code or in a separate place?
- Do your install steps involve installing any external libraries?
- Do you want to ship your environment as an archive of some sort
  containing the actual files of the environment?

Package system differentiators
==============================

There are potential benefits for choosing PyPI or conda.

PyPI has one global namespace and distributed ownership of that namespace.
Because of this, it is easier within PyPI to have single sources for a package
directly from package maintainers.

Conda has unlimited namespaces (channels) and distributed ownership of a
given channel.
As such, it is easier to ensure binary compatibility within a channel using
conda.
=========================
Conda for data scientists
=========================

Conda is useful for any packaging process but it stands out from other
package and environment management systems through its utility for data
science.

Conda’s benefits include:

* Providing prebuilt packages which avoid the need to deal with compilers or
  figuring out how to set up a specific tool.
* Managing one-step installation of tools that
  are more challenging to install (such as TensorFlow or IRAF).
* Allowing you to provide your environment to other people across different
  platforms, which supports the reproducibility of research workflows.
* Allowing the use of other package management tools, such as pip, inside
  conda environments where a library or tools are not already packaged for
  conda.
* Providing commonly used data science libraries and tools, such as R, NumPy,
  SciPy, and TensorFlow. These are built using optimized, hardware-specific
  libraries (such as Intel’s MKL or NVIDIA’s CUDA) which speed up performance
  without code changes.

`Read more about how conda supports data scientists
<https://kaust-vislab.github.io/introduction-to-conda-for-data-scientists>`_.
========
Concepts
========

Explore the links to learn more about conda foundations.

.. toctree::
   :maxdepth: 1

   conda-commands
   packages
   pkg-specs
   channels
   environments
   installing-with-conda
   conda-performance
   data-science

When you're comfortable with the conda concepts, learn how to :doc:`get started using conda <../getting-started>`.
==============
Conda packages
==============

.. contents::
   :local:
   :depth: 2

.. _concept-conda-package:

What is a conda package?
========================

A conda package is a compressed tarball file (.tar.bz2) or
.conda file that contains:

* system-level libraries.
* Python or other modules.
* executable programs and other components.
* metadata under the ``info/`` directory.
* a collection of files that are installed directly into an ``install`` prefix.

Conda keeps track of the dependencies between packages and platforms.
The conda package format is identical across platforms and
operating systems.

Only files, including symbolic links, are part of a conda
package. Directories are not included. Directories are created
and removed as needed, but you cannot create an empty directory
from the tar archive directly.

.conda file format
==================

The .conda file format was introduced in conda 4.7 as a more
compact, and thus faster, alternative to a tarball.

The .conda file format consists of an outer, uncompressed
ZIP-format container, with 2 inner compressed .tar files.

For the .conda format's initial internal compression format support,
we chose Zstandard (zstd). The actual compression format used does not
matter, as long as the format is supported by libarchive. The compression
format may change in the future as more advanced compression algorithms are
developed and no change to the .conda format is necessary. Only an updated
libarchive would be required to add a new compression format to .conda files.

These compressed files can be significantly smaller than their
bzip2 equivalents. In addition, they decompress much more quickly.
.conda is the preferred file format to use where available,
although we continue to provide .tar.bz2 files in tandem.

Read more about the `introduction of the .conda file format <https://www.anaconda.com/understanding-and-improving-condas-performance/>`_.

.. note::

  In conda 4.7 and later, you cannot use package names that
  end in “.conda” as they conflict with the .conda file format
  for packages.


Using packages
==============

* You may search for packages

.. code-block:: bash

  conda search scipy


* You may install a package

.. code-block:: bash

  conda install scipy


* You may build a package after `installing conda-build <https://docs.conda.io/projects/conda-build/en/latest/index.html>`_

.. code-block:: bash

  conda build my_fun_package



Package structure
=================

.. code-block:: bash

  .
  ├── bin
  │   └── pyflakes
  ├── info
  │   ├── LICENSE.txt
  │   ├── files
  │   ├── index.json
  │   ├── paths.json
  │   └── recipe
  └── lib
      └── python3.5

* bin contains relevant binaries for the package.

* lib contains the relevant library files (eg. the .py files).

* info contains package metadata.


.. _meta-package:

Metapackages
============

When a conda package is used for metadata alone and does not contain
any files, it is referred to as a metapackage.
The metapackage may contain dependencies to several core, low-level libraries
and can contain links to software files that are
automatically downloaded when executed.
Metapackages are used to capture metadata and make complicated package
specifications simpler.


An example of a metapackage is "anaconda," which
collects together all the packages in the Anaconda installer.
The command ``conda create -n envname anaconda`` creates an
environment that exactly matches what would be created from the
Anaconda installer. You can create metapackages with the
``conda metapackage`` command. Include the name and version
in the command.

Anaconda metapackage
--------------------

The Anaconda metapackage is used in the creation of the
`Anaconda Distribution <https://docs.anaconda.com/anaconda/>`_
installers so that they have a set of packages associated with them.
Each installer release has a version number, which corresponds
to a particular collection of packages at specific versions.
That collection of packages at specific versions is encapsulated
in the Anaconda metapackage.

The Anaconda metapackage contains several core, low-level
libraries, including compression, encryption, linear algebra, and
some GUI libraries.

`Read more about the Anaconda metapackage and Anaconda Distribution
<https://www.anaconda.com/whats-in-a-name-clarifying-the-anaconda-metapackage/>`_.

.. _mutex-metapackages:

Mutex metapackages
------------------
A mutex metapackage is a very simple package that has a
name. It need not have any dependencies or build steps.
Mutex metapackages are frequently an "output" in a recipe
that builds some variant of another package.
Mutex metapackages function as a tool to help achieve mutual
exclusivity among packages with different names.

Let's look at some examples for how to use mutex metapackages
to build NumPy against different BLAS implementations.

Building NumPy with BLAS variants
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you build NumPy with MKL, you also need to build
SciPy, scikit-learn, and anything else using BLAS
also with MKL. It is important to ensure that these
“variants” (packages built with a particular set of options)
are installed together and never with an alternate BLAS
implementation. This is to avoid crashes, slowness, or numerical problems.
Lining up these libraries is both a build-time and an install-time concern.
We’ll show how to use metapackages to achieve this need.

Let's start with the metapackage ``blas=1.0=mkl``:
https://github.com/AnacondaRecipes/intel_repack-feedstock/blob/e699b12/recipe/meta.yaml#L108-L112

Note that ``mkl`` is a string of ``blas``.

That metapackage is automatically added as a dependency
using ``run_exports`` when someone uses the mkl-devel
package as a build-time dependency:
https://github.com/AnacondaRecipes/intel_repack-feedstock/blob/e699b12/recipe/meta.yaml#L124

By the same token, here’s the metapackage for OpenBLAS:
https://github.com/AnacondaRecipes/openblas-feedstock/blob/ae5af5e/recipe/meta.yaml#L127-L131

And the ``run_exports`` for OpenBLAS, as part of
openblas-devel:
https://github.com/AnacondaRecipes/openblas-feedstock/blob/ae5af5e/recipe/meta.yaml#L100

Fundamentally, conda’s model of mutual exclusivity relies on the package name.
OpenBLAS and MKL are obviously not the same package name, and thus are not
mutually exclusive. There’s nothing stopping conda from installing both at
once. There’s nothing stopping conda from installing NumPy with MKL and SciPy
with OpenBLAS. The metapackage is what allows us to achieve the mutual
exclusivity. It unifies the options on a single package name,
but with a different build string. Automating the addition of the
metapackage with ``run_exports`` helps ensure the library consumers
(package builders who depend on libraries) will have correct dependency
information to achieve the unified runtime library collection.

Installing NumPy with BLAS variants
***********************************

To specify which variant of NumPy that you want, you could potentially
specify the BLAS library you want::

  conda install numpy mkl

However, that doesn’t actually preclude OpenBLAS from being chosen.
Neither MKL nor its dependencies are mutually exclusive (meaning they
do not have similar names and different version/build-string).

This pathway may lead to some ambiguity and solutions with mixed BLAS,
so using the metapackage is recommended. To specify MKL-powered NumPy
in a non-ambiguous way, you can specify the mutex package (either directly
or indirectly)::

  conda install numpy “blas=*=mkl”

There is a simpler way to address this, however. For example, you may want to
try another package that has the desired mutex package as a dependency.

OpenBLAS has this with its “nomkl” package:
https://github.com/AnacondaRecipes/openblas-feedstock/blob/ae5af5e/recipe/meta.yaml#L133-L147

Nothing should use “nomkl” as a dependency. It is strictly a utility for users
to facilitate switching from MKL (which is the default) to OpenBLAS.

How did MKL become the default? The solver needs a way to prioritize some packages
over others. We achieve that with an older conda feature called track_features that originally
served a different purpose.

Track_features
**************
One of conda’s optimization goals is to minimize the number of track_features needed
to specify the desired specs. By adding track_features to one or more of the options,
conda will de-prioritize it or “weigh it down.” The lowest priority package is the one
that would cause the most track_features to be activated in the environment. The default
package among many variants is the one that would cause the least track_features to be activated.

There is a catch, though: any track_features must be unique. No two packages can provide the
same track_feature. For this reason, our standard practice is to attach track_features to
the metapackage associated with what we want to be non-default.

Take another look at the OpenBLAS recipe: https://github.com/AnacondaRecipes/openblas-feedstock/blob/ae5af5e/recipe/meta.yaml#L127-L137

This attached track_features entry is why MKL is chosen over OpenBLAS.
MKL does not have any track_features associated with it. If there are 3 options,
you would attach 0 track_features to the default, then 1 track_features for the next preferred
option, and finally 2 for the least preferred option. However, since you generally only care
about the one default, it is usually sufficient to add 1 track_feature to all options other
than the default option.

More info
*********

For reference, the Visual Studio version alignment on Windows also uses mutex metapackages.
https://github.com/AnacondaRecipes/aggregate/blob/9635228/vs2017/meta.yaml#L24


.. _noarch:

Noarch packages
===============
Noarch packages are packages that are not architecture specific
and therefore only have to be built once. Noarch packages are
either generic or Python. Noarch generic packages allow users to
distribute docs, datasets, and source code in conda packages.
Noarch Python packages are described below.

Declaring these packages as ``noarch`` in the ``build`` section of
the ``meta.yaml`` reduces shared CI resources. Therefore, all packages
that qualify to be noarch packages should be declared as such.

Noarch Python
-------------
The ``noarch: python`` directive in the build section
makes pure-Python packages that only need to be built once.

Noarch Python packages cut down on the overhead of building multiple
different pure Python packages on different architectures and Python
versions by sorting out platform and Python version-specific differences
at install time.

In order to qualify as a noarch Python package, all of the following
criteria must be fulfilled:

* No compiled extensions.

* No post-link, pre-link, or pre-unlink scripts.

* No OS-specific build scripts.

* No Python version-specific requirements.

* No skips except for Python version. If the recipe is py3 only,
  remove skip statement and add version constraint on Python in host
  and run section.

* 2to3 is not used.

* Scripts argument in setup.py is not used.

* If ``console_script`` entrypoints are in setup.py,
  they are listed in ``meta.yaml``.

* No activate scripts.

* Not a dependency of conda.

.. note::
   While ``noarch: python`` does not work with selectors, it does
   work with version constraints. ``skip: True  # [py2k]`` can sometimes
   be replaced with a constrained Python version in the host and run
   subsections, for example: ``python >=3`` instead of just ``python``.

.. note::
   Only ``console_script`` entry points have to be listed in ``meta.yaml``.
   Other entry points do not conflict with ``noarch`` and therefore do
   not require extra treatment.

Read more about `conda's noarch packages <https://www.anaconda.com/condas-new-noarch-packages/>`_.

.. _link_unlink:

Link and unlink scripts
=======================

You may optionally execute scripts before and after the link
and unlink steps. For more information, see `Adding pre-link, post-link, and pre-unlink scripts <https://docs.conda.io/projects/conda-build/en/latest/resources/link-scripts.html>`_.

.. _package_specs:

More information
================

Go deeper on how to :ref:`manage packages <managing-pkgs>`.
Learn more about package metadata, repository structure and index,
and package match specifications at :doc:`Package specifications <../concepts/pkg-specs>`.
==============
Conda channels
==============

.. contents::
   :local:
   :depth: 1

.. _concepts-channels:

What is a "conda channel"?
==========================

Conda channels are the locations where packages are stored.
They serve as the base for hosting and managing packages.
Conda :doc:`packages <../concepts/packages>` are downloaded
from remote channels, which are URLs to directories
containing conda packages.
The ``conda`` command searches a set of channels. By default,
packages are automatically downloaded and updated from
the ``default`` channel https://repo.anaconda.com/pkgs/ which may require a
paid license, as described in the `repository terms of service`_
a commercial license. The ``conda-forge`` channel is free for all to use.
You can modify what remote channels are automatically searched.
You might want to do this to maintain a private or internal channel.
For details, see how to :ref:`modify your channel lists <config-channels>`.

We use conda-forge as an example channel.
`Conda-forge <https://conda-forge.org/>`_ is a community channel
made up of thousands of contributors. Conda-forge itself is
analogous to PyPI but with a unified,
automated build infrastructure and more peer review of
recipes.

.. _`repository terms of service`: https://www.anaconda.com/terms-of-service

.. _specifying-channels:

Specifying channels when installing packages
============================================

* From the command line use `--channel`

.. code-block:: bash

  $ conda install scipy --channel conda-forge

You may specify multiple channels by passing the argument multiple times:

.. code-block:: bash

  $ conda install scipy --channel conda-forge --channel bioconda

Priority decreases from left to right - the first argument is higher priority than the second.

* From the command line use `--override-channels` to only search the specified channel(s), rather than any channels configured in .condarc. This also ignores conda's default channels.

.. code-block:: bash

  $ conda search scipy --channel file:/<path to>/local-channel --override-channels

* In .condarc, use the key ``channels`` to see a list of channels for conda to search for packages.

Learn more about :doc:`managing channels <../tasks/manage-channels>`.

.. _rss-feed:

Conda clone channel RSS feed
============================

We offer a RSS feed that represents all the things
that have been cloned by the channel clone and are
now available behind the CDN (content delivery network).
The RSS feed shows what has happened on a rolling,
two-week time frame and is useful for seeing where
packages are or if a sync has been run.

Let's look at the `conda-forge channel RSS feed <https://conda-static.anaconda.org/conda-forge/rss.xml>`_
as an example.

In that feed, it will tell you every time that it runs a sync.
The feed includes other entries for packages that were added or
removed. Each entry is formatted to show the subdirectory
the package is from, the action that was taken (addition or removal),
and the name of the package. Everything has a publishing date,
per standard RSS practice.

.. code-block:: xml

  <rss version="0.91">
    <channel>
      <title>conda-forge updates</title>
      <link>https://anaconda.org</link>
      <description>Updates in the last two weeks</description>
      <language>en</language>
      <copyright>Copyright 2019, Anaconda, Inc.</copyright>
      <pubDate>30 Jul 2019 19:45:47 UTC</pubDate>
        <item>
          <title>running sync</title>
          <pubDate>26 Jul 2019 19:26:36 UTC</pubDate>
        </item>
        <item>
          <title>linux-64:add:jupyterlab-1.0.4-py36_0.tar.bz2</title>
          <pubDate>26 Jul 2019 19:26:36 UTC</pubDate>
        </item>
        <item>
          <title>linux-64:add:jupyterlab-1.0.4-py37_0.tar.bz2</title>
          <pubDate>26 Jul 2019 19:26:36 UTC</pubDate>
        </item>
===================
Installing on macOS
===================

#. Download the installer:

   * `Miniconda installer for macOS <https://conda.io/miniconda.html>`_.

   * `Anaconda installer for macOS <https://www.anaconda.com/download/>`_.

#. :ref:`Verify your installer hashes <hash-verification>`.

#. Install:

   * Miniconda---In your terminal window, run:

     .. code::

        bash Miniconda3-latest-MacOSX-x86_64.sh

   * Anaconda---Double-click the ``.pkg`` file.

#. Follow the prompts on the installer screens.

   If you are unsure about any setting, accept the defaults. You
   can change them later.

#. To make the changes take effect, close and then re-open your
   terminal window.

#. Test your installation. In your terminal window or
   Anaconda Prompt, run the command ``conda list``. A list of installed packages appears
   if it has been installed correctly.


.. _install-macos-silent:

Installing in silent mode
=========================

.. note::
   The following instructions are for Miniconda. For Anaconda,
   substitute ``Anaconda`` for ``Miniconda`` in all of the commands.

To run the :ref:`silent installation <silent-mode-glossary>` of
Miniconda for macOS or Linux, specify the -b and -p arguments of
the bash installer. The following arguments are supported:

* ``-b``: Batch mode with no PATH modifications to shell scripts.
  Assumes that you agree to the license agreement. Does not edit
  shell scripts such as ``.bashrc``, ``.bash_profile``, ``.zshrc``, etc.
* ``-p``: Installation prefix/path.
* ``-f``: Force installation even if prefix ``-p`` already exists.

EXAMPLE:

.. code-block:: bash

    wget https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-x86_64.sh -O ~/miniconda.sh
    bash ~/miniconda.sh -b -p $HOME/miniconda

The installer prompts “Do you wish the installer to initialize Miniconda3 by running ``conda init``?” We recommend “yes”.

.. note::
   If you enter “no”, then conda will not modify your shell scripts at all. In order to initialize after the installation process is done, first run ``source <path to conda>/bin/activate`` and then run ``conda init``.

   **macOS Catalina (and later)**

   If you are on macOS Catalina (or later versions), the default shell is zsh. You will instead need to run ``source <path to conda>/bin/activate`` followed by ``conda init zsh`` (to explicitly select the type of shell to initialize).

Updating Anaconda or Miniconda
==============================

#. Open a terminal window.

#. Navigate to the ``anaconda`` directory.

#. Run ``conda update conda``.


Uninstalling Anaconda or Miniconda
==================================

#. Open a terminal window.

#. Remove the entire Miniconda install directory with::

     rm -rf ~/miniconda

#. OPTIONAL: Edit ``~/.bash_profile`` to remove the Miniconda
   directory from your PATH environment variable.

#. Remove the following hidden file and folders that may have
   been created in the home directory:

   * ``.condarc`` file
   * ``.conda`` directory
   * ``.continuum`` directory

   By running::

     rm -rf ~/.condarc ~/.conda ~/.continuum
=================
Downloading conda
=================

.. contents::
   :local:
   :depth: 1


You have 3 conda download options:

* `Download Anaconda <https://www.anaconda.com/download/>`_---free.

* `Download Miniconda <https://conda.io/miniconda.html>`_---free.

* Purchase `Anaconda Enterprise <https://www.anaconda.com/enterprise/>`_.

You can download any of these 3 options with legacy Python 2.7 or
current Python 3.

You can also choose a version with a GUI or a command line
installer.

.. tip::
   If you are unsure which option to download, choose the
   most recent version of Anaconda3.
   If you are on Windows or macOS, choose the version with the
   GUI installer.


Anaconda or Miniconda?
======================

Choose Anaconda if you:

* Are new to conda or Python.

* Like the convenience of having Python and over 1,500 scientific
  packages automatically installed at once.

* Have the time and disk space---a few minutes and 3 GB.

* Do not want to individually install each of the packages you
  want to use.

* Wish to use a curated and vetted set of packages.

Choose Miniconda if you:

* Do not mind installing each of the packages you want to use
  individually.

* Do not have time or disk space to install over 1,500 packages at
  once.

* Want fast access to Python and the conda commands and you wish
  to sort out the other programs later.


Choosing a version of Anaconda or Miniconda
===========================================

* Whether you use Anaconda or Miniconda, select the most recent
  version.

* Select an older version from the `archive
  <https://repo.continuum.io/archive/>`_ only if you are testing
  or need an older version for a specific purpose.

* To use conda on Windows XP, select Anaconda 2.3.0 and see
  :doc:`../configuration/use-winxp-with-proxy`.


GUI versus command line installer
=================================

Both GUI and command line installers are available for Windows,
macOS, and Linux:

* If you do not wish to enter commands in a terminal window,
  choose the GUI installer.

* If GUIs slow you down, choose the command line version.


Choosing a version of Python
============================

* The last version of Python 2 is 2.7, which is included with
  Anaconda and Miniconda.
* The newest stable version of Python is quickly included
  with Anaconda3 and Miniconda3.
* You can easily set up additional versions of Python such as 3.9
  by downloading any version and creating a new environment with
  just a few clicks. See :doc:`../getting-started`.

.. _hash-verification:

Cryptographic hash verification
===============================

SHA-256 checksums are available for
`Miniconda <https://conda.io/en/latest/miniconda_hashes.html>`_ and
`Anaconda <https://docs.continuum.io/anaconda/install/hashes/all>`_.
We do not recommend using MD5 verification as SHA-256 is more secure.

Download the installer file and before installing verify it as follows:

* Windows:

  * If you have PowerShell V4 or later:

    Open a PowerShell console and verify the file as follows::

      Get-FileHash filename -Algorithm SHA256

  * If you don't have PowerShell V4 or later:

    Use the free `online verifier tool
    <https://gallery.technet.microsoft.com/PowerShell-File-Checksum-e57dcd67>`_
    on the Microsoft website.

    #. Download the file and extract it.

    #. Open a Command Prompt window.

    #. Navigate to the file.

    #. Run the following command::

        Start-PsFCIV -Path C:\path\to\file.ext -HashAlgorithm SHA256 -Online

* macOS: In iTerm or a terminal window enter ``shasum -a 256 filename``.

* Linux: In a terminal window enter ``sha256sum filename``.
-----------------------------------------
RPM and Debian Repositories for Miniconda
-----------------------------------------
Conda, the package manager from Anaconda, is available as either a RedHat RPM or as a Debian package. The packages are the equivalent to the Miniconda installer which only contains conda and its dependencies. You can use yum or apt to install, uninstall and manage conda on your system. To install conda, follow the instructions for your Linux distribution.

To install the RPM on RedHat, CentOS, Fedora distributions, and other RPM-based distributions such as openSUSE, download the GPG key and add a repository configuration file for conda.

.. code-block:: none

   # Import our GPG public key
   rpm --import https://repo.anaconda.com/pkgs/misc/gpgkeys/anaconda.asc

   # Add the Anaconda repository
   cat <<EOF > /etc/yum.repos.d/conda.repo
   [conda]
   name=Conda
   baseurl=https://repo.anaconda.com/pkgs/misc/rpmrepo/conda
   enabled=1
   gpgcheck=1
   gpgkey=https://repo.anaconda.com/pkgs/misc/gpgkeys/anaconda.asc
   EOF

Conda is ready to install on your RPM-based distribution.

.. code-block:: none

   # Install it!
   yum install conda
   Loaded plugins: fastestmirror, ovl
   Setting up Install Process
   Loading mirror speeds from cached hostfile
    * base: repo1.dal.innoscale.net
    * extras: mirrordenver.fdcservers.net
    * updates: mirror.tzulo.com
   Resolving Dependencies
   --> Running transaction check
   ---> Package conda.x86_64 0:4.5.11-0 will be installed
   --> Finished Dependency Resolution

   Dependencies Resolved


 ===============================================================================
   Package         Arch        Version             Repository            Size

 ===============================================================================
   Installing:
   conda           x86_64      4.5.11-0            conda                 73 M

   Transaction Summary

 ===============================================================================
   Install   	1 Package(s)

   Total download size: 73 M
   Installed size: 210 M
   Is this ok [y/N]:

To install on Debian-based Linux distributions such as Ubuntu, download the public GPG key and add the conda repository to the sources list.

.. code-block:: none

   # Install our public GPG key to trusted store
   curl https://repo.anaconda.com/pkgs/misc/gpgkeys/anaconda.asc | gpg --dearmor > conda.gpg
   install -o root -g root -m 644 conda.gpg /usr/share/keyrings/conda-archive-keyring.gpg

   # Check whether fingerprint is correct (will output an error message otherwise)
   gpg --keyring /usr/share/keyrings/conda-archive-keyring.gpg --no-default-keyring --fingerprint 34161F5BF5EB1D4BFBBB8F0A8AEB4F8B29D82806

   # Add our Debian repo
   echo "deb [arch=amd64 signed-by=/usr/share/keyrings/conda-archive-keyring.gpg] https://repo.anaconda.com/pkgs/misc/debrepo/conda stable main" > /etc/apt/sources.list.d/conda.list

   **NB:** If you receive a Permission denied error when trying to run the above command (because `/etc/apt/sources.list.d/conda.list` is write protected), try using the following command instead:
   echo "deb [arch=amd64 signed-by=/usr/share/keyrings/conda-archive-keyring.gpg] https://repo.anaconda.com/pkgs/misc/debrepo/conda stable main" | sudo tee -a /etc/apt/sources.list.d/conda.list

Conda is ready to install on your Debian-based distribution.

.. code-block:: none

   # Install it!
   apt update
   apt install conda
   Reading package lists... Done
   Building dependency tree
   Reading state information... Done
   The following NEW packages will be installed:
   conda
   0 upgraded, 1 newly installed, 0 to remove and 3 not upgraded.
   Need to get 76.3 MB of archives.
   After this operation, 221 MB of additional disk space will be used.
   Get:1 https://repo.anaconda.com/pkgs/misc/debrepo/conda stable/main amd64
   conda amd64 4.5.11-0 [76.3 MB]
   Fetched 76.3 MB in 10s (7733 kB/s)
   debconf: delaying package configuration, since apt-utils is not installed
   Selecting previously unselected package conda.
   (Reading database ... 4799 files and directories currently installed.)
   Preparing to unpack .../conda_4.5.11-0_amd64.deb ...
   Unpacking conda (4.5.11-0) ...
   Setting up conda (4.5.11-0) …

Check to see if the installation is successful by typing:

.. code-block:: none

   source /opt/conda/etc/profile.d/conda.sh
   conda -V
   conda 4.5.11


Installing conda packages with the system package manager makes it very easy
to distribute conda across a cluster of machines running Linux without having
to worry about any non-privileged user modifying the installation.
Any non-privileged user simply needs to run ``source /opt/conda/etc/profile.d/conda.sh`` to use conda.

Administrators can also distribute a .condarc file at /opt/conda/.condarc so that a
predefined configuration for channels, package cache directory, and environment locations
is pre-seeded to all users in a large organization. A sample configuration could look like:

.. code-block:: none

   channels:
   defaults
   pkg_dirs:
   /shared/conda/pkgs
   $HOME/.conda/pkgs
   envs_dirs:
   /shared/conda/envs
   $HOME/.conda/envs

These RPM and Debian packages provide another way to set up conda inside a Docker container.

It is recommended to use this installation in a read-only manner and upgrade conda using the respective package manager only.

If you’re new to conda, check out the documentation at https://conda.io/docs/
===================
Installing on Linux
===================

#. Download the installer:

   * `Miniconda installer for Linux <https://docs.conda.io/en/latest/miniconda.html#linux-installers>`_.

   * `Anaconda installer for Linux <https://www.anaconda.com/download/>`_.

#. :ref:`Verify your installer hashes <hash-verification>`.

#. In your terminal window, run:

   * Miniconda:

     .. code::

        bash Miniconda3-latest-Linux-x86_64.sh

   * Anaconda:

     .. code::

        bash Anaconda-latest-Linux-x86_64.sh

#. Follow the prompts on the installer screens.

   If you are unsure about any setting, accept the defaults. You
   can change them later.

#. To make the changes take effect, close and then re-open your
   terminal window.

#.  Test your installation. In your terminal window or
    Anaconda Prompt, run the command ``conda list``. A list of installed packages appears
    if it has been installed correctly.


.. _install-linux-silent:

Using with fish shell
=========================

To use conda with fish shell, run the following in your terminal:

  ``conda init fish``

Installing in silent mode
=========================

See the instructions for
:ref:`installing in silent mode on macOS <install-macos-silent>`.


Updating Anaconda or Miniconda
==============================

#. Open a terminal window.

#. Run ``conda update conda``.


Uninstalling Anaconda or Miniconda
==================================

#. Open a terminal window.

#. Remove the entire Miniconda install directory with::

     rm -rf ~/miniconda

#. OPTIONAL: Edit ``~/.bash_profile`` to remove the Miniconda
   directory from your PATH environment variable.

#. OPTIONAL: Remove the following hidden file and folders that
   may have been created in the home directory:

   * ``.condarc`` file
   * ``.conda`` directory
   * ``.continuum`` directory

   By running::

     rm -rf ~/.condarc ~/.conda ~/.continuum
============
Installation
============

.. contents::
   :local:
   :depth: 1

The fastest way to :doc:`obtain <download>` conda is to install
:ref:`Miniconda <miniconda-glossary>`, a mini version of
:ref:`Anaconda <anaconda-glossary>` that includes only conda and
its dependencies. If you prefer to have conda plus over 7,500 open-source
packages, install Anaconda.

We recommend you install Anaconda for the local user, which does
not require administrator permissions and is the most robust
type of installation. You can also install Anaconda system wide,
which does require administrator permissions.

For information on using our graphical installers for
Windows or macOS, see the instructions for
`installing Anaconda <http://docs.continuum.io/anaconda/install.html>`_.

.. _system-reqs:

System requirements
===================

* 32- or 64-bit computer.

* For Miniconda---400 MB disk space.

* For Anaconda---Minimum 3 GB disk space to download and install.


* Windows, macOS, or Linux.

* For Windows: Windows 8.1 or newer for Python 3.9, or Windows Vista or newer for Python 3.8.


.. note::
   You do not need administrative or root permissions to
   install Anaconda if you select a user-writable install
   location.


Regular installation
====================

Follow the instructions for your operating system:

* :doc:`Windows <windows>`.
* :doc:`macOS <macos>`.
* :doc:`Linux <linux>`.


Installing in silent mode
=========================

You can use :ref:`silent installation <silent-mode-glossary>` of
Miniconda or Anaconda for deployment or testing or building
services such as Travis CI and AppVeyor.

Follow the silent-mode instructions for your operating system:

* :ref:`Windows <install-win-silent>`.
* :ref:`macOS <install-macos-silent>`.
* :ref:`Linux <install-linux-silent>`.


Installing conda on a system that has other Python installations or packages
============================================================================

You do not need to uninstall other Python installations or
packages in order to use conda. Even if you already have a
system Python, another Python installation from a source such as
the macOS Homebrew package manager and globally installed
packages from pip such as pandas and NumPy, you do not need to
uninstall, remove, or change any of them before using conda.

Install Anaconda or Miniconda normally, and let the installer
add the conda installation of Python to your PATH environment
variable. There is no need to set the PYTHONPATH environment
variable.

To see if the conda installation of Python is in your PATH
variable:

* On Windows, open an Anaconda Prompt and run---``echo %PATH%``.

* On macOS and Linux, open the terminal and run---``echo $PATH``.

To see which Python installation is currently set as the default:

* On Windows, open an Anaconda Prompt and run---``where python``.

* On macOS and Linux, open the terminal and run---``which python``.

To see which packages are installed in your current conda
environment and their version numbers, in your terminal window
or an Anaconda Prompt, run ``conda list``.

.. toctree::
   :maxdepth: 1
   :hidden:

   download
   windows
   macos
   linux
   rpm-debian
=====================
Installing on Windows
=====================

#. Download the installer:

   * `Miniconda installer for
     Windows <https://conda.io/miniconda.html>`_.

   * `Anaconda installer for
     Windows <https://www.anaconda.com/download/>`_.

#. :ref:`Verify your installer hashes <hash-verification>`.

#. Double-click the ``.exe`` file.

#. Follow the instructions on the screen.

   If you are unsure about any setting, accept the defaults. You
   can change them later.

   When installation is finished, from the **Start** menu, open the
   Anaconda Prompt.

#. Test your installation. In your terminal window or
   Anaconda Prompt, run the command ``conda list``. A list of installed packages appears
   if it has been installed correctly.


.. _install-win-silent:

Installing in silent mode
=========================

.. note::
   The following instructions are for Miniconda. For Anaconda,
   substitute ``Anaconda`` for ``Miniconda`` in all of the commands.

To run the the Windows installer for Miniconda in
:ref:`silent mode <silent-mode-glossary>`, use the ``/S``
argument. The following optional arguments are supported:

* ``/InstallationType=[JustMe|AllUsers]``---Default is ``JustMe``.
* ``/AddToPath=[0|1]``---Default is ``0``
* ``/RegisterPython=[0|1]``---Make this the system's default
  Python.
  ``0`` indicates ``JustMe``, which is the default. ``1``
  indicates ``AllUsers``.
* ``/S``---Install in silent mode.
* ``/D=<installation path>``---Destination installation path.
  Must be the last argument. Do not wrap in quotation marks.
  Required if you use ``/S``.

All arguments are case-sensitive.

EXAMPLE: The following command installs Miniconda for the
current user without registering Python as the system's default:

.. code-block:: bat

   start /wait "" Miniconda3-latest-Windows-x86_64.exe /InstallationType=JustMe /RegisterPython=0 /S /D=%UserProfile%\Miniconda3


Updating conda
==============

#. Open your Anaconda Prompt from the start menu.

#. Navigate to the ``anaconda`` directory.

#. Run ``conda update conda``.


Uninstalling conda
==================

#. In the Windows Control Panel, click Add or Remove Program.

#. Select Python X.X (Miniconda), where X.X is your version of Python.

#. Click Remove Program.

.. note::
   Removing a program is different in Windows 10.
using/pkgs
==========

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='../user-guide/tasks/manage-pkgs.html'" /></head><body></body></html>
using/using
===========

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='../user-guide/tasks/manage-conda.html'" /></head><body></body></html>
using/index
===========

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='../user-guide/tasks/index.html'" /></head><body></body></html>
using/test-drive
================

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='../user-guide/getting-started.html'" /></head><body></body></html>
using/envs
==========

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='../user-guide/tasks/manage-environments.html'" /></head><body></body></html>
using/cheatsheet
================

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='../user-guide/cheatsheet.html'" /></head><body></body></html>
install/full
============

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='../user-guide/install/index.html'" /></head><body></body></html>
install/central
===============

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='../user-guide/configuration/admin-multi-user-install.html'" /></head><body></body></html>
install/quick
=============

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='../user-guide/install/index.html'" /></head><body></body></html>
install/tab-completion
======================

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='../user-guide/configuration/enable-tab-completion.html'" /></head><body></body></html>
install/sample-condarc
======================

.. raw:: html

        <html><head><meta http-equiv="refresh" content="0; URL='../user-guide/configuration/sample-condarc.html'" /></head><body></body></html>
``conda.api.Solver``
====================

.. py:module:: conda.core.solve

.. autoclass:: DepsModifier
   :members:
   :undoc-members:

.. autoclass:: Solver
   :members:
Conda Python API
================

As of conda 4.4, conda can be installed in any environment, not just environments with names starting with _ (underscore). That change was made, in part, so that conda can be used as a Python library.

There are 3 supported public modules. We support:

#. import conda.cli.python_api
#. import conda.api
#. import conda.exports

The first 2 should have very long-term stability. The third is guaranteed to be stable throughout the lifetime of a feature release series--i.e. minor version number.

As of conda 4.5, we do not support ``pip install conda``. However, we are considering that as a supported bootstrap method in the future.


.. toctree::
   :maxdepth: 1
   :caption: Contents

   solver
   python_api
   api
``conda.cli.python_api``
========================

.. py:module:: conda.cli.python_api

.. autoclass:: Commands
   :members:
   :undoc-members:

.. autofunction:: run_command
``conda.api``
==============

.. py:module:: conda.api

.. autoclass:: Solver
   :members:
   :undoc-members:

.. autoclass:: SubdirData
  :members:
  :undoc-members:

.. autoclass:: PackageCacheData
  :members:
  :undoc-members:

.. autoclass:: PrefixData
  :members:
  :undoc-members:
===============
Developer guide
===============

.. toctree::
   :maxdepth: 2

   contributing
   ../architecture
