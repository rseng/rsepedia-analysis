# History of changes

## Version 1.1.1 (2022/01/11)

### Issues Closed

#### Bugs fixed

* [Issue 312](https://github.com/OpenWaterAnalytics/pyswmm/issues/312) - Pip install pyswmm does not install julian

In this release 1 issue was closed.

### Pull Requests Merged

* [PR 313](https://github.com/OpenWaterAnalytics/pyswmm/pull/313) - v1.1.1, by [@jennwuu](https://github.com/jennwuu)

In this release 1 pull request was closed.


## Version 1.1.0 (2022/01/09)

### Issues Closed

#### Documentation

* [Issue 297](https://github.com/OpenWaterAnalytics/pyswmm/issues/297) - Update List for Projects using PySWMM
* [Issue 293](https://github.com/OpenWaterAnalytics/pyswmm/issues/293) - Add Citation file

#### New Features

* [Issue 274](https://github.com/OpenWaterAnalytics/pyswmm/issues/274) - Port SWMM output functions into PySWMM from swmm-python

#### Bugs fixed

* [Issue 268](https://github.com/OpenWaterAnalytics/pyswmm/issues/268) - readthedocs build is broken

In this release 4 issues were closed.

### Pull Requests Merged

* [PR 275](https://github.com/OpenWaterAnalytics/pyswmm/pull/275) - Port swmm-toolkit output into simulation module, by [@jennwuu](https://github.com/jennwuu)

In this release 1 pull request was closed.


## Version 1.0.1 (2021-01-13)

### Issues Closed

#### Bugs fixed

* [Issue 267](https://github.com/OpenWaterAnalytics/pyswmm/issues/267) - Add swmm-toolkit package as an install_require in setup.py

In this release 1 issue was closed.


## Version 1.0.0 (2021-01-12)

### Issues Closed

#### Enhancements

* [Issue 264](https://github.com/OpenWaterAnalytics/pyswmm/issues/264) - Refactor PySWMM to use swmm-toolkit package ([PR 262](https://github.com/OpenWaterAnalytics/pyswmm/pull/262))

#### Maintenance

* [Issue 265](https://github.com/OpenWaterAnalytics/pyswmm/issues/265) - Repository clean up ([PR 262](https://github.com/OpenWaterAnalytics/pyswmm/pull/262))

#### Deprecated

* [Issue 263](https://github.com/OpenWaterAnalytics/pyswmm/issues/263) - Deprecate DLL selector function ([PR 262](https://github.com/OpenWaterAnalytics/pyswmm/pull/262))

In this release 3 issues were closed.

### Pull Requests Merged

* [PR 262](https://github.com/OpenWaterAnalytics/pyswmm/pull/262) - PySWMM v1.0 ([265](https://github.com/OpenWaterAnalytics/pyswmm/issues/265), [264](https://github.com/OpenWaterAnalytics/pyswmm/issues/264), [263](https://github.com/OpenWaterAnalytics/pyswmm/issues/263))

In this release 1 pull request was closed.


## Version 0.6.2 (2020/08/04)

Updating release version.

## Version 0.6.1 (2020/08/04)


### Pull Requests Merged

* [PR 217](https://github.com/OpenWaterAnalytics/pyswmm/pull/217) - add node, link water quality getters, by [@katmratliff](https://github.com/katmratliff) ([206](https://github.com/OpenWaterAnalytics/pyswmm/issues/206))

In this release 1 pull request was closed.

## Version 0.6.0 (2019-10-19)


### Pull Requests Merged

* [PR 214](https://github.com/OpenWaterAnalytics/pyswmm/pull/214) - Feat terminate sim ([213](https://github.com/OpenWaterAnalytics/pyswmm/issues/213))

In this release 1 pull request was closed.

## Version 0.5.2 (2019-10-08)


### Pull Requests Merged

* [PR 212](https://github.com/OpenWaterAnalytics/pyswmm/pull/212) - change single ptr struct to double ptr struct for ctypes for subcatch ([211](https://github.com/OpenWaterAnalytics/pyswmm/issues/211))
* [PR 208](https://github.com/OpenWaterAnalytics/pyswmm/pull/208) - update SWMM5 libraries compiled with optimizer flags ([209](https://github.com/OpenWaterAnalytics/pyswmm/issues/209))

In this release 2 pull requests were closed.

## Version 0.5.1 (2019/08/26)

### Pull Requests Merged

* [PR 208](https://github.com/OpenWaterAnalytics/pyswmm/pull/208) - update SWMM5 libraries compiled with optimizer flags ([209](https://github.com/OpenWaterAnalytics/pyswmm/issues/209))

In this release 1 pull request was closed.

## Version 0.5.0 (2019/07/26)

### Issues Closed

#### New Features

* [Issue 199](https://github.com/OpenWaterAnalytics/pyswmm/issues/199) - Add support to RainGage API ([PR 198](https://github.com/OpenWaterAnalytics/pyswmm/pull/198))
* [Issue 194](https://github.com/OpenWaterAnalytics/pyswmm/issues/194) - Add LID support to pyswmm  ([PR 152](https://github.com/OpenWaterAnalytics/pyswmm/pull/152))

#### Bugs fixed

* [Issue 192](https://github.com/OpenWaterAnalytics/pyswmm/issues/192) - latest version of v0.4.9.dev0 seems unstable ([PR 152](https://github.com/OpenWaterAnalytics/pyswmm/pull/152))
* [Issue 172](https://github.com/OpenWaterAnalytics/pyswmm/issues/172) - `error_check` swallows exceptions and converts them to warnings ([PR 173](https://github.com/OpenWaterAnalytics/pyswmm/pull/173))
* [Issue 164](https://github.com/OpenWaterAnalytics/pyswmm/issues/164) - pump_statistics['max_flowrate'] gives zero division error ([PR 204](https://github.com/OpenWaterAnalytics/pyswmm/pull/204))
* [Issue 146](https://github.com/OpenWaterAnalytics/pyswmm/issues/146) - Fix linux / osx CI

In this release 6 issues were closed.

### Pull Requests Merged

* [PR 204](https://github.com/OpenWaterAnalytics/pyswmm/pull/204) - Bug Fix Issue 164 ([164](https://github.com/OpenWaterAnalytics/pyswmm/issues/164))
* [PR 203](https://github.com/OpenWaterAnalytics/pyswmm/pull/203) - Merge develop to master ([201](https://github.com/OpenWaterAnalytics/pyswmm/issues/201), [200](https://github.com/OpenWaterAnalytics/pyswmm/issues/200))
* [PR 198](https://github.com/OpenWaterAnalytics/pyswmm/pull/198) - Merging Abhi's Raingage API work ([199](https://github.com/OpenWaterAnalytics/pyswmm/issues/199), [155](https://github.com/OpenWaterAnalytics/pyswmm/issues/155))
* [PR 191](https://github.com/OpenWaterAnalytics/pyswmm/pull/191) - Eliminating VCOMP DLL Not Found on Windows ([186](https://github.com/OpenWaterAnalytics/pyswmm/issues/186), [153](https://github.com/OpenWaterAnalytics/pyswmm/issues/153))
* [PR 175](https://github.com/OpenWaterAnalytics/pyswmm/pull/175) - doc update simulation to sim
* [PR 173](https://github.com/OpenWaterAnalytics/pyswmm/pull/173) - Make _error_check throw exception for all errcodes ([172](https://github.com/OpenWaterAnalytics/pyswmm/issues/172))
* [PR 170](https://github.com/OpenWaterAnalytics/pyswmm/pull/170) - add getters for pollutant surface buildup and ponded concentration in subcatchments
* [PR 165](https://github.com/OpenWaterAnalytics/pyswmm/pull/165) - Simple ci ([166](https://github.com/OpenWaterAnalytics/pyswmm/issues/166))
* [PR 163](https://github.com/OpenWaterAnalytics/pyswmm/pull/163) - Update system.py docs ([162](https://github.com/OpenWaterAnalytics/pyswmm/issues/162))
* [PR 154](https://github.com/OpenWaterAnalytics/pyswmm/pull/154) - Updated Linux Binary ([133](https://github.com/OpenWaterAnalytics/pyswmm/issues/133))
* [PR 152](https://github.com/OpenWaterAnalytics/pyswmm/pull/152) - LID Support ([197](https://github.com/OpenWaterAnalytics/pyswmm/issues/197), [196](https://github.com/OpenWaterAnalytics/pyswmm/issues/196), [194](https://github.com/OpenWaterAnalytics/pyswmm/issues/194), [192](https://github.com/OpenWaterAnalytics/pyswmm/issues/192))
* [PR 151](https://github.com/OpenWaterAnalytics/pyswmm/pull/151) - Updated Node Tests with Assertion Checks ([150](https://github.com/OpenWaterAnalytics/pyswmm/issues/150))
* [PR 109](https://github.com/OpenWaterAnalytics/pyswmm/pull/109) - Adding Code of Conduct to Project

In this release 13 pull requests were closed.

## Version 0.4.7 (2018-01-08)

### Issues Closed

#### New Features

* [Issue 147](https://github.com/OpenWaterAnalytics/pyswmm/issues/147) - Add before_end simulation hook.

In this release 1 issue was closed.

### Pull Requests Merged

* [PR 148](https://github.com/OpenWaterAnalytics/pyswmm/pull/148) - Added additional callback hook for Before_End

In this release 1 pull request was closed.

## Version 0.4.6 (2018-01-02)

### Issues Closed

#### New Features

* [Issue 140](https://github.com/OpenWaterAnalytics/pyswmm/issues/140) - Add simulation function hook for callbacks

#### Bugs fixed

* [Issue 143](https://github.com/OpenWaterAnalytics/pyswmm/issues/143) - Remove bare exceptions

In this release 2 issues were closed.

### Pull Requests Merged

* [PR 144](https://github.com/OpenWaterAnalytics/pyswmm/pull/144) - Added swmm_lib_path argument to Simulation and PySWMM class
* [PR 142](https://github.com/OpenWaterAnalytics/pyswmm/pull/142) - Added Hooks for Callbacks

In this release 2 pull requests were closed.

## Version 0.4.5 (2017-12-27)

### Issues Closed

#### New Features

* [Issue 90](https://github.com/OpenWaterAnalytics/pyswmm/issues/90) - Add test *.inp files to distribution

#### Bugs fixed

* [Issue 139](https://github.com/OpenWaterAnalytics/pyswmm/issues/139) - Update SWMM5 Lib Windows - Linking Issue
* [Issue 136](https://github.com/OpenWaterAnalytics/pyswmm/issues/136) - broken doctests

In this release 3 issues were closed.

## Version 0.4.4 (2017-11-14)

### Issues Closed

#### New Features

* [Issue 127](https://github.com/OpenWaterAnalytics/pyswmm/issues/127) - Set Outfall Stage  ([PR 128](https://github.com/OpenWaterAnalytics/pyswmm/pull/128))
* [Issue 125](https://github.com/OpenWaterAnalytics/pyswmm/issues/125) - pollutant buildup addition to subcatchment stats

In this release 2 issues were closed.

### Pull Requests Merged

* [PR 129](https://github.com/OpenWaterAnalytics/pyswmm/pull/129) - Add subcatchment surface buildup to subcatchment statistics
* [PR 128](https://github.com/OpenWaterAnalytics/pyswmm/pull/128) - Set bc ([127](https://github.com/OpenWaterAnalytics/pyswmm/issues/127))

In this release 2 pull requests were closed.

## Version 0.4.2 (2017-08-24)

### Issues Closed

#### Bugs fixed

* [Issue 119](https://github.com/OpenWaterAnalytics/pyswmm/issues/119) - Update SWMM Library
* [Issue 115](https://github.com/OpenWaterAnalytics/pyswmm/issues/115) - execute() method

In this release 2 issues were closed.

## Version 0.4.1 (2017-08-09)


### Pull Requests Merged

* [PR 113](https://github.com/OpenWaterAnalytics/pyswmm/pull/113) - Bug Fixes

In this release 1 pull request was closed.

## Version 0.4.0 (2017-07-14)


### Pull Requests Merged

* [PR 106](https://github.com/OpenWaterAnalytics/pyswmm/pull/106) - Updatetests
* [PR 103](https://github.com/OpenWaterAnalytics/pyswmm/pull/103) - Linux
* [PR 97](https://github.com/OpenWaterAnalytics/pyswmm/pull/97) - Statsfix

In this release 3 pull requests were closed.

## Version 0.3.4 (2017-05-08)


### Pull Requests Merged

* [PR 89](https://github.com/OpenWaterAnalytics/pyswmm/pull/89) - added Simulation.percent_complete property and fixed function name

In this release 1 pull request was closed.


## Version 0.3.3 (2017/05/05)


### Pull Requests Merged

* [PR 86](https://github.com/OpenWaterAnalytics/pyswmm/pull/86) - Support for SWMM 5.1.12 and exposed error and engine version properties
* [PR 81](https://github.com/OpenWaterAnalytics/pyswmm/pull/81) - Python 3 Support

In this release 2 pull requests were closed.


## Version 0.3.2 (2017/03/13)


### Pull Requests Merged

* [PR 78](https://github.com/OpenWaterAnalytics/pyswmm/pull/78) - added SWMM5 engine selector

In this release 1 pull request was closed.

## Version 0.3.1 (2017/03/10)


### Pull Requests Merged

* [PR 76](https://github.com/OpenWaterAnalytics/pyswmm/pull/76) - re-compiled SWMM to fix set simulation time functions
* [PR 73](https://github.com/OpenWaterAnalytics/pyswmm/pull/73) - updated default save to bin file
* [PR 70](https://github.com/OpenWaterAnalytics/pyswmm/pull/70) - PR: Update readme

In this release 3 pull requests were closed.


## Version 0.3 (2017/02/24)

### Issues Closed

#### New Features

* [Issue 63](https://github.com/OpenWaterAnalytics/pyswmm/issues/63) - updates to Simulation.py
* [Issue 27](https://github.com/OpenWaterAnalytics/pyswmm/issues/27) - Enhancements to pyswmm.Simulation base classes

#### Bugs fixed

* [Issue 55](https://github.com/OpenWaterAnalytics/pyswmm/issues/55) - import update bug fix for py2.7
* [Issue 48](https://github.com/OpenWaterAnalytics/pyswmm/issues/48) - Fix Docs

In this release 4 issues were closed.

### Pull Requests Merged

* [PR 69](https://github.com/OpenWaterAnalytics/pyswmm/pull/69) - hot fix - subcatchments
* [PR 68](https://github.com/OpenWaterAnalytics/pyswmm/pull/68) - PR: Fix code style
* [PR 67](https://github.com/OpenWaterAnalytics/pyswmm/pull/67) - added subcatchments.py module
* [PR 66](https://github.com/OpenWaterAnalytics/pyswmm/pull/66) - turned off reader module
* [PR 62](https://github.com/OpenWaterAnalytics/pyswmm/pull/62) - Updated Simulation Docs and Added Current Time Function
* [PR 61](https://github.com/OpenWaterAnalytics/pyswmm/pull/61) - PR: Report coverage
* [PR 58](https://github.com/OpenWaterAnalytics/pyswmm/pull/58) - PR: Fix/ci
* [PR 57](https://github.com/OpenWaterAnalytics/pyswmm/pull/57) - Updates to docs
* [PR 56](https://github.com/OpenWaterAnalytics/pyswmm/pull/56) - Fix import for py2.7
* [PR 53](https://github.com/OpenWaterAnalytics/pyswmm/pull/53) - #48 Updates to docs
* [PR 49](https://github.com/OpenWaterAnalytics/pyswmm/pull/49) - Bug Fix All API Enum Arguments
* [PR 45](https://github.com/OpenWaterAnalytics/pyswmm/pull/45) - PR: Add release process workflow
* [PR 43](https://github.com/OpenWaterAnalytics/pyswmm/pull/43) - PR: Add code style automatic checks on appveyor
* [PR 41](https://github.com/OpenWaterAnalytics/pyswmm/pull/41) - PR: Clean up code and imports
* [PR 39](https://github.com/OpenWaterAnalytics/pyswmm/pull/39) - PR: Include the output toolkit api
* [PR 38](https://github.com/OpenWaterAnalytics/pyswmm/pull/38) - PR: Clean up code and docs style and clean imports
* [PR 37](https://github.com/OpenWaterAnalytics/pyswmm/pull/37) - Added Link Connection and type helper functions
* [PR 30](https://github.com/OpenWaterAnalytics/pyswmm/pull/30) - Add manifest for pypi packaging
* [PR 29](https://github.com/OpenWaterAnalytics/pyswmm/pull/29) - enhacements to pyswmm.Simulation class
* [PR 28](https://github.com/OpenWaterAnalytics/pyswmm/pull/28) - Add gitattributes, normalize endings
* [PR 24](https://github.com/OpenWaterAnalytics/pyswmm/pull/24) - Add copyright header to files
* [PR 17](https://github.com/OpenWaterAnalytics/pyswmm/pull/17) - Added pyswmm simulation class; restructured and added descriptors
* [PR 3](https://github.com/OpenWaterAnalytics/pyswmm/pull/3) - Enable platform detection and some utilities
* [PR 1](https://github.com/OpenWaterAnalytics/pyswmm/pull/1) - pyswmm house cleaning

In this release 24 pull requests were closed.
---
title: 'PySWMM: The Python Interface to Stormwater Management Model (SWMM)'

tags:
  - SWMM
  - Stormwater
  - Hydrology
  - Hydraulics
  - OpenWaterAnalytics

authors:
 - name: Bryant E. McDonnell
   orcid: 0000-0002-6250-2220
   affiliation: 1
 - name: Katherine Ratliff
   orcid: 0000-0003-1410-2756
   affiliation: 2
 - name: Michael E. Tryby
   affiliation: 2
 - name: Jennifer Jia Xin Wu
   affiliation: 1
 - name: Abhiram Mullapudi
   orcid: 0000-0001-8141-3621
   affiliation: 3
affiliations:
 - name: EmNet, a Xylem Brand
   index: 1
 - name: U.S. Environmental Protection Agency, Office of Research and Development
   index: 2
 - name: Department of Civil and Environmental Engineering, University of Michigan
   index: 3
   
date: 13 April 2020

bibliography: paper.bib
---

# Summary

Stormwater management seeks to reduce runoff from rain or melted snow and improve water quality. Where it can absorb into soil, runoff is filtered and returns to streams, rivers, and aquifers, but in developed areas, precipitation often cannot soak into the ground because impervious surfaces (e.g., pavement, buildings), and already saturated soils can create excess runoff. This water, which can contain pollutants, then runs across urban surfaces and into storm drains, drainage ditches, and sewer systems. Stormwater runoff can cause flooding, erosion, infrastructure and habitat damage, and contamination (including combined and sanitary sewer overflows). In urban and developed areas, effective stormwater management that routes and detains stormwater helps to mitigate these impacts and improve water quality.

The U.S. Environmental Protection Agency's (EPA) [Stormwater Management Model (SWMM)](https://www.epa.gov/water-research/storm-water-management-model-swmm) is a dynamic rainfall-runoff model that has been used for decades to conduct single event or long-term hydrologic, hydraulic, and water quality simulations. It has been used widely throughout the world for planning, analysis, and design of drainage systems [@swmm]. SWMM models the hydrologic processes that generate runoff including rainfall, snowmelt, evaporation, infiltration, and groundwater dynamics, and it routes water through a hydraulic network that includes channels, pipes, storage units, and pumps. The EPA distribution of SWMM does not, however, allow the modeler to interact with the SWMM model during simulation time nor access all of the simulated values and results.

Over the last decade, several libraries have been developed to read, parse, and run SWMM models (\*.inp). These tools have been developed in several programming languages including, but not limited to, Python, R, MATLAB, and Visual Basic. Beyond simple SWMM interfacing utilities, many libraries include a collection of specific features for different applications. Some authors have focused on optimization frameworks [@pathirana:2014; @martinez:2016; @macro:2019] and model calibration [@leutnant:2019], and others have moved toward water quality modeling within their frameworks [@banik:2014]. Even others have extended functionality to support modeling of real-time controls [@riano:2016]. From the most general standpoint, most of these previous works have one major thing in common -- a wrapper interface is used to generate a new \*.inp (SWMM input) file -- which duplicates the data model, adding redundancy. From a maintainability standpoint, the scientific and engineering communities significantly benefit from directly accessing the SWMM data model during a simulation without having to read and write new \*.inp files. 

In support of the OpenWaterAnalytics  (OWA) open source initiative, the PySWMM project encompasses the development of a Python interfacing wrapper to SWMM with parallel ongoing development of the [Open Water Analytics SWMM5 application programming interface (API)](https://github.com/OpenWaterAnalytics/Stormwater-Management-Model). PySWMM (along with the co-development of the SWMM5-API) is being developed to enable Pythonic to access the SWMM data model, which facilitates rapid prototyping, and it also enables users to interact with a model during simulation time. Since PySWMM incorporates enhancements to the SWMM code base, it retains backward compatibilty and ultimately serves to augment what SWMM can do. Current mid-simulation capabilties include the ability to change hydraulic network settings, load externally-generated inflows, and maniuplate low impact development (LID) parameters. Node, link, subcatchment, LID statistics, and results are also accessible both during and after simulation time. PySWMM provides a single framework which encompasses a collection of low-level interfacing functions to the SWMM data model (getters and setters), which facilitates editing of network and hydrologic parameters. This functionality allows researchers and engineers to streamline stormwater model optimization, controls, and result post-processing in order to more effectively address scientific and engineering questions related to water runoff quantity and quality. 

PySWMM is actively being used to address a range of topics in industry, academia, and in government. In industry, PySWMM has been used for real-time controls and asset optimization.  It has been used in academia for studying the effects of real-time controls and model predictive controls of drainage systems [@li:2019; @sadler:2019]. In the EPA's Office of Research and Development, PySWMM is being used to model the precipitation-driven transport of contaminants and pollutants in urban environments [@ratliff:2018]. EPA SWMM has been used widely for research applications, with applications being described in hundreds of journal articles and conference proceedings [@niazi:2017]. It is also used for developing discharge permits, and in addition, it is accepted by the Federal Emergency Management Agency for floodway analysis for National Flood Insurance Program purposes. PySWMM facilitates ease of use and enhances the capabilities of EPA SWMM for these research, engineering, and regulatory applications.

# Open Water Analytics Group

OWA is a group of individuals who have come together to collaborate and grow model extensibilty and features for a number of EPA models, including SWMM and EPANET (used for modeling drinking water distribution systems). We are an open community for the exchange of information and ideas related to computing and analysis in the water and wastewater industries and related research aims, and members with varying affiliations work together to craft the current and future development of these mission-critical software tools. The group has close relationships with the EPA and adheres to common coding practices that are in line with the direction of EPA. More information can be found on [wateranalytics.org](wateranalytics.org). 

# Acknowledgements

The authors acknowledge the many developers of SWMM over the past several decades, including Lewis Rossman and Robert Dickinson, and are grateful for the contributions from the many [contributors](https://github.com/OpenWaterAnalytics/pyswmm/blob/master/AUTHORS) to PySWMM. This manuscript has been subjected to the U.S. EPA’s peer and administrative review and has been approved for external publication. Any opinions or ideas expressed in this paper are those of the author(s) and do not necessarily reflect the official positions and policies of the U.S. EPA. Any mention of trade names or commercial products does not constitute endorsement or recommendation for use. Neither the U.S. EPA nor the software author(s) can assume responsibility for software modification, content, output, interpretation, or usage.

# References---
name: Bug report
about: Create a report to help us improve
title: ''
labels: type:bug
assignees: ''

---

**Describe the bug**
A clear and concise description of what the bug is.

**To Reproduce**
Steps to reproduce the behavior.  Good to place code here with support files.


**Expected behavior**
A clear and concise description of what you expected to happen.

**Screenshots**
If applicable, add screenshots to help explain your problem.

**Desktop (please complete the following information):**
 - OS: [e.g. Windows, MacOS, Linux]
 - Python Version [e.g. Python 3.6-x86]
 - PySWMM Version [e.g. v0.4.8]

**Additional context**
Add any other context about the problem here.
PYSWMM
======

*Python Wrapper for Stormwater Management Model (SWMM5)*

Documentation
	http://pyswmm.readthedocs.io/en/latest/
Development
	https://github.com/OpenWaterAnalytics/pyswmm/
PySWMM Wiki
	https://github.com/OpenWaterAnalytics/pyswmm/wiki/
Cite our Paper
	McDonnell, Bryant E., Ratliff, Katherine M., Tryby, Michael E., Wu, Jennifer Jia Xin, & Mullapudi, Abhiram. (2020). PySWMM: The Python Interface to Stormwater Management Model (SWMM). *Journal of Open Source Software, 5*\ (52), 2292, https://doi.org/10.21105/joss.02292

Build status
------------
|appveyor status| |travisci status|

Project information
-------------------
|docs| |license| |pypi version| |downloads| |cite|

.. |appveyor status| image:: https://ci.appveyor.com/api/projects/status/gm3ci07gmkoyaeol/branch/master?svg=true
   :target: https://ci.appveyor.com/project/bemcdonnell/pyswmm
   :alt: Appveyor build status
.. |travisci status| image:: https://travis-ci.org/OpenWaterAnalytics/pyswmm.svg?branch=master
   :target: https://travis-ci.org/OpenWaterAnalytics/pyswmm
   :alt: Travis-CI build status
.. |downloads| image:: https://img.shields.io/badge/dynamic/json.svg?label=Downloads&url=https%3A%2F%2Fpypistats.org%2Fapi%2Fpackages%2Fpyswmm%2Frecent&query=%24.data.last_month&colorB=green&suffix=%20last%20month
   :target: https://pypi.python.org/pypi/pyswmm/
   :alt: PyPI Monthly Downloads
.. |license| image:: https://img.shields.io/pypi/l/pyswmm.svg
   :target: LICENSE.txt
   :alt: License
.. |pypi version| image:: https://img.shields.io/pypi/v/pyswmm.svg
   :target: https://pypi.python.org/pypi/pyswmm/
   :alt: Latest PyPI version
.. |docs| image:: https://readthedocs.org/projects/pyswmm/badge/?version=latest
   :target: http://pyswmm.readthedocs.io/en/latest/?badge=latest
   :alt: Documentation Status
.. |cite| image:: https://joss.theoj.org/papers/10.21105/joss.02292/status.svg
   :target: https://doi.org/10.21105/joss.02292
   :alt: Cite our Paper


YouTube Examples
----------------
Stream Results and Adjust Weir Setting
	.. image:: http://img.youtube.com/vi/U5Z0NXTEjHE/0.jpg
	  :target: http://www.youtube.com/watch?v=U5Z0NXTEjHE

Overview
--------

PySWMM is a Python language software package for the creation,
manipulation, and study of the structure, dynamics, and function of complex networks.

With PySWMM you can load and manipulate USEPA Stormwater Management Models.
With the development of PySWMM, control algorithms can now be developed exclusively
in Python which allows the use of functions and objects as well as storing and
tracking hydraulic trends for control actions.

As of version v1.1.0, PySWMM includes new features to proccess metadata and timeseries
stored in SWMM binary output file.

Who uses PySWMM?
----------------

PySWMM is used by engineers, modelers, and researchers who want to streamline
stormwater modeling optimization, controls, and post-processing results.

Goals
-----
PySWMM is intended to provide

-  tools for the study of the structure and
   dynamics within USEPA SWMM5,

-  a standard programming interface and graph implementation that is suitable
   for many applications,

-  a rapid development environment for collaborative, multidisciplinary
   projects,

-  an interface to USEPA SWMM5,

-  development and implementation of control logic outside of native EPA-SWMM Controls,

-  methods for users to establish their own node inflows,

-  a coding interface to binary output files,

-  new modeling possibilities for the SWMM5 Community.

Download
--------

Get the latest version of PySWMM from
https://pypi.python.org/pypi/pyswmm/

::

	$ pip install pyswmm

To get the git version do

::

	$ git clone https://github.com/OpenWaterAnalytics/pyswmm.git


Usage
-----

A quick example that steps through a simulation:

Examples:

Intialize using with statement.  This automatically cleans up
after a simulation

>>> from pyswmm import Simulation
>>>
>>> with Simulation('model.inp') as sim:
...     for ind in sim:
...         pass


Initialize the simulation and execute.  This style does not allow
the user to interact with the simulation.  However, this approach
tends to be the fastest.

>>> from pyswmm import Simulation
>>>
>>> sim = Simulation('model.inp')
>>> sim.execute()


Intialize a simulation and iterate through a simulation. This
approach requires some clean up.

>>> from pyswmm import Simulation
>>>
>>> sim = Simulation('model.inp')
>>> for ind in sim:
...     pass
>>>
>>> sim.close()

Opening a SWMM binary output file and accessing model metadata and 
timeseries.

>>> from swmm.toolkit.shared_enum import SubcatchAttribute, NodeAttribute, LinkAttribute
>>> from pyswmm import Output
>>>
>>> with Output('model.out') as out:
...     print(len(out.subcatchments))
...     print(len(out.nodes))
...     print(len(out.links))
...     print(out.version)
...     sub_ts = out.subcatch_series('S1', SubcatchAttribute.RUNOFF_RATE)
...     node_ts = out.node_series('J1', NodeAttribute.INVERT_DEPTH)
...     link_ts = out.link_series('C2', LinkAttribute.FLOW_RATE)

Bugs
----

Our issue tracker is at https://github.com/OpenWaterAnalytics/pyswmm/issues.
Please report any bugs that you find.  Or, even better, fork the repository on
GitHub and create a pull request.  All changes are welcome, big or small, and we
will help you make the pull request if you are new to git
(just ask on the issue).

Contributing
------------
Please check out our Wiki https://github.com/OpenWaterAnalytics/pyswmm/wiki
for more information on contributing, including an Author Contribution Checklist.

License
-------

Distributed with a BSD2 license; see LICENSE.txt::

   Copyright (C) 2014 PySWMM Developers
   Bryant E. McDonnell <bemcdonnell@gmail.com>

Powered By
----------

EmNet, a Xylem Brand:
	.. image:: https://media-exp1.licdn.com/dms/image/C4D0BAQHaKTsKSWX1_w/company-logo_200_200/0/1519922058017?e=2159024400&v=beta&t=qYRoPhFhmfiuNBU36Y_Qxwy3Kcg1ZF_ud0YeUCz0VT4
	  :target: http://emnet.net/

Open Storm:
    .. image:: https://avatars2.githubusercontent.com/u/28744644?v=3&s=200
      :target: http://open-storm.org/

Acknowledgements
----------------

- Tim Cera
- Assela Pathirana
--------
Download
--------

Software
~~~~~~~~

Source and binary releases: http://pypi.python.org/pypi/pyswmm/

Github (latest development): https://github.com/OpenWaterAnalytics/pyswmm

*******
Authors
*******

Maintainers
===========

- Bryant E. McDonnell
- Katherine Ratliff
- Jennifer Wu


Authors with Copyrighted Contributions
======================================

- Bryant E. McDonnell
- Jennifer Wu
- Gonzalo Peña-Castellanos
- Stephen Roberts
- Abhiram Mullapudi
- Jiada Li


Authors with Contributions in the Public Domain
===============================================

- Michael Tryby
- Katherine Ratliff
..  -*- coding: utf-8 -*-

Overview
========

PySWMM is a Python language software package for the creation, 
manipulation, and study of the structure, dynamics, and function of complex networks.  

With PySWMM you can load and manipulate USEPA Stormwater Management Models. 
With the development of PySWMM, control algorithms can now be developed exclusively 
in Python which allows the use of functions and objects as well as storing and 
tracking hydraulic trends for control actions.


Who uses PySWMM?
----------------

PySWMM is used by engineers, modelers, and researchers who want to streamline 
stormwater modeling optimization, controls, and post-processing results. 
  
Goals
-----
PySWMM is intended to provide

-  tools for the study of the structure and
   dynamics within USEPA SWMM5,

-  a standard programming interface and graph implementation that is suitable
   for many applications, 

-  a rapid development environment for collaborative, multidisciplinary
   projects,

-  an interface to USEPA SWMM5, 

-  development and implementation of control logic outside of native EPA-SWMM Controls,

-  methods for users to establish their own node inflows,

-  a coding interface to binary output files, 

-  new modeling possibilities for the SWMM5 Community.

Powered By
----------

.. |emnet| image:: https://media-exp1.licdn.com/dms/image/C4D0BAQHaKTsKSWX1_w/company-logo_200_200/0/1519922058017?e=2159024400&v=beta&t=qYRoPhFhmfiuNBU36Y_Qxwy3Kcg1ZF_ud0YeUCz0VT4
  :target: http://emnet.net/
  

.. |openstorm| image:: https://avatars2.githubusercontent.com/u/28744644?v=3&s=200
  :target: http://open-storm.org/

+---------+-------------+
| |emnet| | |openstorm| |
+---------+-------------+  
 
Free software
-------------

PySWMM is free software; you can redistribute it and/or
modify it under the terms of the :doc:`BSD License </reference/legal>`.
We welcome contributions from the community.  Information on
PySWMM development is found at the PySWMM Github Page
https://github.com/OpenWaterAnalytics/pyswmm


What Next
^^^^^^^^^

 - :doc:`A Brief Tour </tutorial/tutorial>`

 - :doc:`Installing </install>`

 - :doc:`Reference </reference/index>`

 - :doc:`Examples </examples/index>`
.. _contents

PySWMM documentation
====================

.. only:: html

    :Release: |version|
    :Date: |today|



.. toctree::
   :maxdepth: 2

   overview
   download
   authors
   install
   tutorial/index
   reference/index
   examples/index
   cite

.. only:: html

Powered By
==========
.. |emnet| image:: https://ideacenter.nd.edu/assets/269492/1200x630/emnet_xylem.png
  :target: http://emnet.net/


.. |openstorm| image:: https://avatars2.githubusercontent.com/u/28744644?v=3&s=200
  :target: http://open-storm.org/

+---------+-------------+
| |emnet| | |openstorm| |
+---------+-------------+

Indices and tables
==================

* :ref:`genindex`
* :ref:`modindex`
* :ref:`search`
* :ref:`glossary`
**********
Installing
**********

Installing with pip
===================
Try to install it with

::

   pip install pyswmm

and an attempt will be made to find and install an appropriate version
that matches your operating system and Python version.

You can also get pyswmm from the Python Package Index manually
at http://pypi.python.org/pypi/pyswmm
To use pip, you need to have `setuptools <https://pypi.python.org/pypi/setuptools>`_ installed.

Requirements
============

Python
------

To use PySWMM you need Python 3.6 or greater.
***********
How to Cite
***********

Cite our Paper
==============

Please acknowledge use of PySWMM by citing our paper:

- McDonnell, Bryant E., Ratliff, Katherine M., Tryby, Michael E., Wu, Jennifer Jia Xin, & Mullapudi, Abhiram. (2020). PySWMM: The Python Interface to Stormwater Management Model (SWMM). *Journal of Open Source Software, 5*\ (52), 2292, https://doi.org/10.21105/joss.02292

Projects using PySWMM (Newest on top)
=====================================
- Oberascher, M., Kinzel, C., Kastlunger, U., Kleidorfer, M., Zingerle, C., Rauch, W., Sitzenfrei, R., 2021. Integrated urban water management with micro storages developed as an IoT-based solution – the smart rain barrel. Environmental Modelling & Software, 105028. https://doi.org/10.1016/j.envsoft.2021.105028.
- Li, J., Burian, S., & Oroza, C. (2019). Exploring the Potential for Simulating System-Level Controlled Smart Stormwater System. In *World Environmental and Water Resources Congress 2019: Water, Wastewater, and Stormwater; Urban Water Resources; and Municipal Water Infrastructure* (pp. 46-56). Reston, VA: American Society of Civil Engineers. https://ascelibrary.org/doi/abs/10.1061/9780784482360.006
- Sadler, J. M., Goodall, J. L., Behl, M., Morsy, M. M., Culver, T. B., & Bowes, B. D. (2019). Leveraging open source software and parallel computing for model predictive control of urban drainage systems using EPA-SWMM5. *Environmental Modelling & Software*, 120, 104484. https://doi.org/10.1016/j.envsoft.2019.07.009
- Ratliff, K. M., McDonnell, B., Tryby, M., & Mikelonis, A. (2018). Expanding the EPA Storm Water Management Model (SWMM5) API for Tracking Contamination in Urban Environments. In *AGU Fall Meeting Abstracts*.
..  -*- coding: utf-8 -*-


Start here to begin working with pyswmm.

The pyswmm package allows seamless interaction with the USEPA-SWMM5
data model.  Parameter getters/setters and results getters have been
exposed, allowing the user to see results while a simulation is
running as well as update link settings.

Loading a Model
---------------

There are three options to load a model. If there is no desire to
interact with the simulation then the simplest way to run the
model is the following:

.. code-block:: python

	>>> from pyswmm import Simulation
	>>>
	>>> sim = Simulation('./testmodel.inp')
	>>> sim.execute()


The following method allows the user to read in a model and
manually step through the simulation and get/set parameters and
results.  This scenario is the cleanest solution using a
with statement. It automatically cleans up after the
simulation is complete.

.. code-block:: python

	>>> from pyswmm import Simulation
	>>>
	>>> with Simulation('./testmodel.inp') as sim:
	... 	for step in sim:
	... 		pass

One feature that pyswmm adds to the modeling world is the simulation
stride function ``step_advance``.  Assuming a user has developed all
of their control rules in in a Python script, to reduce simulation
time a user can specify how often Python controls should be evaluated.

For example, let's assume ``testmodel.inp`` has a 30 second routing step
(using the dynamic wave solver, this step could vary significantly).  If
complex control scenarios are developed, evaluating rules could add
significant time to the simulation.

.. code-block:: python

	>>> from pyswmm import Simulation
	>>>
	>>> with Simulation('testmodel.inp') as sim:
	... 	sim.step_advance(300)
	... 	for step in sim:
	... 		print(sim.current_time)
	... 		# or here! sim.step_advance(newvalue)

	2015-11-01 14:05:00
	2015-11-01 14:10:00
	2015-11-01 14:15:00
	2015-11-01 14:20:00

Nodes
-----

For interacting with nodes a :py:class:`pyswmm.nodes.Nodes` object must be initialized.
See the following example. Once the ``Nodes`` object is initialized,
you can then initialize a :py:class:`pyswmm.nodes.Node`

.. code-block:: python

	>>> from pyswmm import Simulation, Nodes
	>>>
	>>> with Simulation('./testmodel.inp') as sim:
	... 	node_object = Nodes(sim)
	...
	... 	#J1 node instantiation
	... 	J1 = node_object["J1"]
	... 	print(J1.invert_elevation)
	... 	print(J1.is_junction())
	...
	... 	#Step through a simulation
	... 	for step in sim:
	... 		print(J1.total_inflow)
	...


Links
-----

For interacting with links a :py:class:`pyswmm.links.Links` object must be initialized.
See the following example. Once the ``Links`` object is initialized,
you can then initialize a :py:class:`pyswmm.links.Link`

.. code-block:: python


	>>> from pyswmm import Simulation, Links
	>>>
	>>> with Simulation('./testmodel.inp') as sim:
	... 	link_object = Links(sim)
	...
	... 	#C1:C2 link instantiation
	... 	c1c2 = link_object["C1:C2"]
	... 	print(c1c2.flow_limit)
	... 	print(c1c2.is_conduit())
	...
	... 	#Step through a simulation
	... 	for step in sim:
	... 		print(c1c2.flow)
	... 		if c1c2.flow > 10.0:
	... 			c1c2.target_setting = 0.5
	...


Subcatchments
-------------

For interacting with subcatchments a :py:class:`pyswmm.subcatchments.Subcatchments`
object must be initialized. See the following example. Once the ``Subcatchments`` object is initialized,
you can then initialize a :py:class:`pyswmm.subcatchments.Subcatchment`

.. code-block:: python


	>>> from pyswmm import Simulation, Subcatchments
	>>>
	>>> with Simulation('./testmodel.inp') as sim:
	... 	subcatch_object = Subcatchments(sim)
	...
	... 	#SC1 subcatchment instantiation
	... 	SC1 = subcatch_object["S1"]
	... 	print(SC1.area)
	...
	... 	#Step through a simulation
	... 	for step in sim:
	... 		print(SC1.runoff)
	...


In the example above we introduce the option to change a link's settings.

PySWMM Controls
---------------

The pyswmm package exposes new possibility in interfacing with models.  All control
rules can now be removed from USEPA SWMM5 and brought into Python.  Now that this
functionality exists, open-source Python packages can now be used in conjunction
with pyswmm to bring even more complex control routines.

The following example illustrates the use of functions for
comparing two depths.

.. code-block:: python

	>>> from pyswmm import Simulation, Links, Nodes
	>>>
	>>> def TestDepth(node, node2):
	>>> 	if node > node2:
	>>> 		return True
	>>> 	else:
	>>> 		return False
	>>>
	>>> with Simulation('./testmodel.inp') as sim:
	... 	link_object = Links(sim)
	...
	... 	#C1:C2 link instantiation
	... 	c1c2 = link_object["C1:C2"]
	...
	... 	node_object = Nodes(sim)
	... 	#J1 node instantiation
	... 	J1 = node_object["J1"]
	... 	#J2 node instantiation
	... 	J2 = node_object["J2"]
	...
	... 	#Step through a simulation
	... 	for step in sim:
	... 		if TestDepth(J1.depth, J2.depth):
	... 			c1c2.target_setting = 0.5
	...

If an EPA-SWMM5 Model has existing control actions within, any control
rules developed using pyswmm will have the highest priority.  All pyswmm
control actions are evaluated at the end of each simulation step, after
EPA-SWMM native controls have been evaluated.  If control actions are reported,
any control action updated by pyswmm will be output to the *.rpt file.


Generate Node Inflows
---------------------

Among the newest features pyswmm brings to SWMM5 modeling is the ability to
set a node's inflow.  This can enable the user to model different behavior such as
runoff or seasonality.

.. code-block:: python

	>>> from pyswmm import Simulation, Nodes
	>>>
	>>> with Simulation('/testmodel.inp') as sim:
	... 	j1 = Nodes(sim)["J1"]
	... 	for step in sim:
	... 		j1.generated_inflow(9)
    
    
Access SWMM Output Binary File
---------------------
As of pyswmm version v1.1.0, the Output module provides the ability to process 
timeseries and metadata in the SWMM output binary file. This feature enables the user to 
access data in the binary file without re-running the simulation.

To access a SWMM outfile, you need to initialize a :py:class:`pyswmm.output.Output` object.
Once the ``Output`` object is initialized, you can use pre-defined methods to access data in the binary file.

The following example opens a SWMM output binary file and identifies the number of subcatchments, nodes,
and links and the SWMM engine used to generate the binary file. 

.. code-block:: python

    >>> from pyswmm import Output
    >>>
    >>> with Output('tests/data/model_full_features.out') as out:
    ...     print(len(out.subcatchments))
    ...     print(len(out.nodes))
    ...     print(len(out.links))
    ...     print(out.version)

The next example opens a SWMM output binary file and gets the entire depth timeseries for node `J1` stored in the 
binary file using :py:class:`pyswmm.output.Output.node_series` method.

.. code-block:: python

        >>> from swmm.toolkit.shared_enum import NodeAttribute
        >>> from pyswmm import Output
        >>>
        >>> with Output('tests/data/model_full_features.out') as out:
        ...     ts = out.node_series('J1', NodeAttribute.INVERT_DEPTH, datetime(2015, 11, 1, 15), datetime(2015, 11, 1, 16))
        ...     for index in ts:
        ...         print(index, ts[index])
        >>> 2015-11-01 15:00:00 15.0
        >>> 2015-11-01 15:01:00 15.0
        >>> 2015-11-01 15:02:00 15.0
        >>> 2015-11-01 15:03:00 15.0

The :py:class:`pyswmm.output.Output.node_series` method allows the user to access all timeseries types for node objects such as INVERT_DEPTH, HYDRAULIC_HEAD, 
PONDED_VOLUME, LATERAL_INFLOW, TOTAL_INFLOW, and FLOODING_LOSSES. If pollutants are defined in the simulation, the concentration 
timeseries can be accessed using POLLUT_CONC_0.

Lid Controls
---------------------
For interacting with lid controls a :py:class:`pyswmm.lidcontrols.LidControls`
object must be initialized. See the following example. Once the ``LidControls`` object is initialized,
you can then initialize a :py:class:`pyswmm.lidcontrols.LidControl`. Once the ``LidControl`` object is initialized, 
you can then interact with the parameters defined in each layers within an Lid Control: ``Surface``, ``Soil``, 
``Storage``, ``Pavement``, ``Drain``, ``DrainMat``. 

The layers parameters that can be accessed using PySWMM are listed in the table below.

.. code-block:: python

	>>> from pyswmm import Simulation, LidControls
	>>>
	>>> with Simulation('/testmodel.inp') as sim:
	... 	rain_barrel = LidControls(sim)["rain_barrel"]
	... 	print(rain_barrel.drain.coefficient)
	... 	rain_barrel.drain.coefficient = 0.60
	... 	print(rain_barrel.drain.coefficient)    
    
All LidControl parameters can be accessed before and during model simulations. 
All LidControl parameters can be set before model simulation. Only some LidControl parameters can be set 
during model simulation.


Lid Groups
---------------------
For interacting with group of lids defined on a subcatchment :py:class:`pyswmm.lidgroups.LidGroups`
object must be initialized. See the following example. Once the ``LidGroups`` object is initialized,
you can then initialize a :py:class:`pyswmm.lidgroups.LidGroup`. Once the ``LidGroup`` object is initialized, 
you can then interact with the lid units defined on the subcatchment. You can iterate through the list of lid units 
using the LidGroup object. 

.. code-block:: python

	>>> from pyswmm import Simulation, LidGroups
	>>>
	>>> with Simulation('/testmodel.inp') as sim:
	... 	lid_on_sub = LidGroups(sim)["subcatch_id"]
	... 	for lid in lid_on_sub:
	... 		print(lid)
	... 	print(lid_on_sub[0])
	... 	for step in sim:
	... 		print(lid_on_sub.old_drain_flow)
    

Lid Units
---------------------
For interacting with group of lids defined on a subcatchment :py:class:`pyswmm.lidgroups.LidGroups`
object must be initialized. See the example above. Once the ``LidGroups`` object is initialized,
you can then initialize a :py:class:`pyswmm.lidgroups.LidGroup`. Once the ``LidGroup`` object is initialized, 
you can then interact with the lid units defined on the subcatchment. You can iterate through the list of lid units 
using the LidGroup object. 

.. code-block:: python

	>>> from pyswmm import Simulation, LidGroups
	>>>
	>>> with Simulation('/testmodel.inp') as sim:
	... 	lid_on_sub = LidGroups(sim)["subcatch_id"]
	... 	for lid in lid_on_sub:
	... 		print(lid)
	... 	print(lid_on_sub[0])
	... 	for step in sim:
	... 		print(lid_on_sub.WaterBalance.inflow)
	... 		print(lid_on_sub.WaterBalance.evaporation)
    
All LidUnits parameters can be accessed before and during model simulations. 
All LidUnits parameters can be set before model simulation. Only some LidUnits parameters can be set 
during model simulation.
..  -*- coding: utf-8 -*-

********
Tutorial
********

.. toctree::
   :maxdepth: 2

   tutorial

**What Next**


Now that you have an idea of what the PySWMM package provides,
you should investigate the parts of the package most useful for
you.  

:doc:`Reference Section</reference/index>` provides details on PySWMM.
..  -*- coding: utf-8 -*-

.. currentmodule:: pyswmm.raingages

raingages module
================

.. automodule:: pyswmm.raingages
    :members:
    :undoc-members:
    :show-inheritance:
..  -*- coding: utf-8 -*-

.. currentmodule:: pyswmm.system

system module
=============

.. automodule:: pyswmm.system
    :members: SystemStats
    :undoc-members:
    :show-inheritance:..  -*- coding: utf-8 -*-

.. currentmodule:: pyswmm.lidcontrols

lidcontrols module
==================

.. automodule:: pyswmm.lidcontrols
    :members:
    :undoc-members:
    :show-inheritance:
..  -*- coding: utf-8 -*-

.. currentmodule:: pyswmm.lidunits

lidunits module
===============

.. automodule:: pyswmm.lidunits
    :members:
    :undoc-members:
    :show-inheritance:
toolkitapi module
=================

.. automodule:: toolkitapi
    :members:
    :undoc-members:
    :show-inheritance:
..  -*- coding: utf-8 -*-

.. currentmodule:: pyswmm.output

output module
=================

.. automodule:: pyswmm.output
    :members: 
    :undoc-members:
    :show-inheritance:License
=======
PySWMM is distributed with the BSD-2 license.

::

   Copyright (C) 2014-, See AUTHORS
   Bryant E. McDonnell <bemcdonnell@gmail.com>
   All rights reserved.

   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions are
   met:

     * Redistributions of source code must retain the above copyright
       notice, this list of conditions and the following disclaimer.

     * Redistributions in binary form must reproduce the above
       copyright notice, this list of conditions and the following
       disclaimer in the documentation and/or other materials provided
       with the distribution.

   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
   "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
   LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
   A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
   OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
   SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
   LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
   DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
   THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
   (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
   OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

..  -*- coding: utf-8 -*-

.. currentmodule:: pyswmm.lidgroups

lidgroups module
================

.. automodule:: pyswmm.lidgroups
    :members:
    :undoc-members:
    :show-inheritance:
..  -*- coding: utf-8 -*-

.. currentmodule:: pyswmm.nodes

nodes module
============

.. automodule:: pyswmm.nodes
    :members: Nodes, Node, Outfall, Storage
    :undoc-members:
    :show-inheritance:swmm5 module
============

.. automodule:: swmm5
    :members:
    :undoc-members:
    :show-inheritance:
..  -*- coding: utf-8 -*-

.. currentmodule:: pyswmm.links

links module
============

.. automodule:: pyswmm.links
    :members: Links, Link, Conduit, Pump
    :undoc-members:
    :show-inheritance:..  -*- coding: utf-8 -*-

Reference
*********
.. only:: html

   :Release: |release|
   :Date: |today|


.. toctree::
   :maxdepth: 2

   introduction
   simulation
   nodes
   links
   lidcontrols
   lidgroups
   lidlayers
   lidunits
   raingages
   subcatchments
   system
   output
   lib
   legal

.. only:: html
lib module
============

.. automodule:: lib
    :members:
    :undoc-members:
    :show-inheritance:
..  -*- coding: utf-8 -*-

Introduction
~~~~~~~~~~~~
.. currentmodule:: pyswmm

.. only:: html




PySWMM Basics
-------------

After starting Python, import the pyswmm module with

>>> from pyswmm import Simulation

To save repetition, in the documentation we assume that 
PySWMM has been imported this way.

If importing pyswmm fails, it means that Python cannot find the installed
module. Check your installation and your PYTHONPATH.

The following simulation classes are available:

:class:`Simulation`
   This class initializes a simulation object from a SWMM input file (*.inp).

Initialize a SWMM Model with

>>> sim = Simulation(r"./example.inp")

Once a model is initialized, there are several options available to 
run a simulation as well as edit the simulation. 
..  -*- coding: utf-8 -*-

.. currentmodule:: pyswmm.simulation

simulation module
=================

.. automodule:: pyswmm.simulation
    :members: 
    :undoc-members:
    :show-inheritance:..  -*- coding: utf-8 -*-

.. currentmodule:: pyswmm.subcatchments

subcatchments module
====================

.. automodule:: pyswmm.subcatchments
    :members: Subcatchments, Subcatchment
    :undoc-members:
    :show-inheritance:..  -*- coding: utf-8 -*-

.. currentmodule:: pyswmm.lidlayers

lidlayers module
================

.. automodule:: pyswmm.lidlayers
    :members:
    :undoc-members:
    :show-inheritance:
..	-*- coding: utf-8 -*-


Be sure to download the :download:`SWMM5 model 
</examples/swmm_example.inp>` before running the examples.


Printing Subcatchment Runoff
----------------------------

The following example prints subcatchment runoff values throughout
a simulation.

.. literalinclude:: print_runoff.py

Download this example file :download:`here</examples/print_runoff.py>`.

Saving to a CSV File
--------------------

The following example saves subcatchment pollutant buildup to a
CSV file within a subdirectory at specified saving times.

.. literalinclude:: save_buildup.py

Download this example file :download:`here</examples/save_buildup.py>`.
..  -*- coding: utf-8 -*-

Examples
*********

.. toctree::
   :maxdepth: 2

   examples

See the :doc:`Tutorial </tutorial/tutorial>` for a guided tour
on using PySWMM.

The :doc:`Reference Section </reference/index>` provides details on PySWMM.
