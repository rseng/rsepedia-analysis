changelog v full changeloghttpsgithubcomaiidateamaiidacorecomparevv patch releas contain number help bug fix improv improv add support proxyjump ssh config option sete arbitrari number proxi jump without addit process creat tcp channel exist ssh connect provid improv control lifetim differ connect see ssh configurationdocssourcehowtosshrst detail httpsgithubcomaiidateamaiidacorepul allow numpi array serial process checkpoint httpsgithubcomaiidateamaiidacorepul add _merg method processbuild updat builder nest dictionari httpsgithubcomaiidateamaiidacorepul verdi setup set defaut databas hostnam localhost httpsgithubcomaiidateamaiidacorepul allow node__init__ construct specif user node httpsgithubcomaiidateamaiidacorepul minim databas log fail schema version retriev httpsgithubcomaiidateamaiidacorepul remov duplic call normal callback interactiveopt httpsgithubcomaiidateamaiidacorepul updat requir pyyaml contain critic secur fix httpsgithubcomaiidateamaiidacorepul bug fix fix regress issu __contains__ oper linkmanag use doubl underscor eg some__nested__namespac calcinput httpsgithubcomaiidateamaiidacorepul stop deprec warn shown tabcomplet incom outgo node link httpsgithubcomaiidateamaiidacorepul stop possibl command hint shown attempt tab complet verdi command exist httpsgithubcomaiidateamaiidacorepul use get_detailed_job_info retriev calcul job job id set httpsgithubcomaiidateamaiidacorepul race condit two process tri creat foldersandboxfold httpsgithubcomaiidateamaiidacorepul return whole nest namespac use baserestartworkchainresult httpsgithubcomaiidateamaiidacorepul use numpynanmin numpynanmax comput ylimit bandsdata matplotlib method httpsgithubcomaiidateamaiidacorepul use sanit job titl sgeschedul schedul httpsgithubcomaiidateamaiidacorepul v full changeloghttpsgithubcomaiidateamaiidacorecomparevv patch releas pin psycopgbinari version x avoid issu databas creation version httpsgithubcomaiidateamaiidacorepul v full changeloghttpsgithubcomaiidateamaiidacorecomparevv github contributor page releasehttpsgithubcomaiidateamaiidacoregraphscontributorsfromtotypec patch releas fix bug introduc v would caus number verdi command fail due bug with_dbenv decor util bug fix fix aiidacmdlineutilsdecoratorsload_backend_if_not_load httpsgithubcomaiidateamaiidacorepul v full changeloghttpsgithubcomaiidateamaiidacorecomparevv github contributor page releasehttpsgithubcomaiidateamaiidacoregraphscontributorsfromtotypec bug fix cli use proper proxi command verdi calcjob gotocomput configur httpsgithubcomaiidateamaiidacorepul respect nest output namespac processexposed_output httpsgithubcomaiidateamaiidacorepul nodelinkmanag properli regener origin nest namespac flat link label store databas mean one nodeoutputssomenestedoutput instead nodeoutputssome__nested__output goe nodeinput httpsgithubcomaiidateamaiidacorepul fix aiidacmdlineutilsdecoratorswith_dbenv alway load databas load databas alreadi load intend httpsgithubcomaiidateamaiidacorepul featur add account option lsfschedul schedul plugin httpsgithubcomaiidateamaiidacorepul document updat ssh proxycommand section instruct handl case ssh key need specifi proxi server httpsgithubcomaiidateamaiidacorepul add extend workflowshttpsaiidacorereadthedocsioenlatesthowtowrite_workflowshtmlextendingworkflow section explain use expose_input expose_output featur well nest namespac httpsgithubcomaiidateamaiidacorepul add help intro quicksetup fail due problem autodetect postgresql set httpsgithubcomaiidateamaiidacorepul v full changeloghttpsgithubcomaiidateamaiidacorecomparevv github contributor page releasehttpsgithubcomaiidateamaiidacoregraphscontributorsfromtotypec patch releas primarili intend fix regress aiida_profil test fixtur use plugin develop caus config valid error httpsgithubcomaiidateamaiidacorepul addit new ad structuredataimport entrypoint allow plugin defin fileformat specif subcommand verdi data structur import httpsgithubcomaiidateamaiidacorepul new ad label group option verdi data structur import appli labelgroup structur import httpsgithubcomaiidateamaiidacorepul updat psgu depend increas vx fix bug verdi quicksetup use window subsystem linux wsl platform httpsgithubcomaiidateamaiidacorepul fix metadataoptionsmax_memory_kb ignor use direct schedul httpsgithubcomaiidateamaiidacorepul previous impos virtual memori limit ulimit v differ physic memori limit schedul plugin impos straightforward way exist directli limit physic memori usag schedul fix ad __str__ method orbit class fix recurs error httpsgithubcomaiidateamaiidacorepul v full changeloghttpsgithubcomaiidateamaiidacorecomparevv github contributor page releasehttpsgithubcomaiidateamaiidacoregraphscontributorsfromtotypec well introduc number improv new featur list releas mark underthehood migrat tornado packag python builtin modul asyncio handl asynchron process within aiida engin remov number block depend version clash tool particular newest jupyt shell notebook environ migrat present backward incompat chang aiida public api substanti effort made test debug new implement ensur perform least equival previou code improv pleas let us know uncov addit issu releas also drop support python test carri note v tent intend final minor vx releas vx includ new file repositori implement remov deprec code new calcul featur additional_retrieve_list metadata option ad calcjob httpsgithubcomaiidateamaiidacorepul new option allow one specifi addit file retriev perinst basi addit file alreadi defin plugin retriev new namespac stash bee ad metadataopt input namespac calcjob process httpsgithubcomaiidateamaiidacorepul option namespac allow user specifi certain file creat calcul job stash somewher remot use file need store longer time scratch space job run avail need kept remot machin retriev exampl file necessari restart calcul big retriev store perman local file repositori see stash file remotehttpsaiidareadthedocsioprojectsaiidacoreenvtopicscalculationsusagehtmlstashingfilesontheremot detail new transfercalcjob plugin httpsgithubcomaiidateamaiidacorepul allow user copi file remot machin local machin run aiida specif follow take number file number remotedata folder remot machin copi local repositori singl newli creat folderdata node take number file number folderdata node local machin copi singl newli creat remotedata folder given remot machin see transfer datahttpsaiidareadthedocsioprojectsaiidacoreenvhowtodatahtmltransferringdata howto detail profil configur improv way globalprofil configur access undergon number distinct chang httpsgithubcomaiidateamaiidacorepul load configjson found aiida folder valid json schemahttpsjsonschemaorg found aiidamanageconfigurationschemahttpsgithubcomaiidateamaiidacoretreedevelopaiidamanageconfigurationschema schema includ number new globalprofil option includ transporttask_retry_initial_interv transporttask_maximum_attempt rmqtask_timeout loggingaiopika_loglevel httpsgithubcomaiidateamaiidacorepul cache_configyml also deprec merg configjson part profil option merg handl automat upon first load configjson use new aiida version inlin chang verdi config command refactor separ command includ verdi config list verdi config set verdi config unset verdi config cach see configur profil optionshttpsaiidareadthedocsioprojectsaiidacoreenvhowtoinstallationhtmlconfiguringprofileopt configur cachinghttpsaiidareadthedocsioprojectsaiidacoreenvhowtorun_codeshtmlhowtosavecomputetimewithcach howto detail commandlin addit improv addit verdi config numer new command option ad verdi deprec verdi export verdi import command replac new verdi archiv httpsgithubcomaiidateamaiidacorepul ad verdi group delet deletenod also delet node group remov httpsgithubcomaiidateamaiidacorepul improv verdi group removenod command warn request node specifi group httpsgithubcomaiidateamaiidacorepul ad except project map verdi process list exampl use debug verdi process list except p ctime pk except httpsgithubcomaiidateamaiidacorepul ad verdi databas summari httpsgithubcomaiidateamaiidacorepul print summari count entiti option list uniqu identifi entiti improv verdi process play perform queri activ process flag httpsgithubcomaiidateamaiidacorepul ad verdi databas version command httpsgithubcomaiidateamaiidacorepul show schema gener version databas given profil use mostli develop debug improv verdi node delet perform httpsgithubcomaiidateamaiidacorepul logic rewritten greatli reduc time delet larg amount node fix verdi quicksetup noninteract ensur includ user prompt httpsgithubcomaiidateamaiidacorepul fix verdi version use edit mode httpsgithubcomaiidateamaiidacorepul api addit improv base node class evalu equal base node uuid httpsgithubcomaiidateamaiidacorepul exampl load node twice alway resolv equival load_nod load_nod note exist class specif equal relationship still overrid base class behaviour exampl int int even node differ uuid behaviour subclass still discuss httpsgithubcomaiidateamaiidacoreissu hash node use cach featur convert reduc issu differ hash beforeaft node storag httpsgithubcomaiidateamaiidacorepul known failur mode hash also rais hashingerror except httpsgithubcomaiidateamaiidacorepul aiidatoolsdelete_nod httpsgithubcomaiidateamaiidacorepul aiidaormto_aiida_typ httpsgithubcomaiidateamaiidacorepul expos use public api pathlibpath instanc use file argument singlefiledata httpsgithubcomaiidateamaiidacorepul type annot ad inputsoutput function method aiidaengin httpsgithubcomaiidateamaiidacorepul aiidaormnodesprocess httpsgithubcomaiidateamaiidacorepul outlin pep httpswwwpythonorgdevpepspep improv static code analysi exampl allow better autocomplet type check mani code editor new rest api queri endpoint querybuild endpoint first post method avail aiida rest api httpsgithubcomaiidateamaiidacorepul post endpoint return querybuild would return provid proper queryhelp dictionari see document herehttpsaiidareadthedocsioprojectsaiidacoreenlatesttopicsdatabasehtmlthequeryhelp furthermor return entitiesresult standard rest api format except link_typ link_label key link particular key still present type label respect secur post method toggl onoff verdi restapi postingnopost option default although note option yet strictli public sinc name may chang futur see aiida rest api documentationhttpsaiidareadthedocsioprojectsaiidacoreenlatestreferencerest_apihtml detail addit chang fix direct schedul combin sshtransport hang submit command httpsgithubcomaiidateamaiidacorepul ssh transport emul chdir current directori kept memori everi command prepend cd folder_nam actualcommand aiidatoolsipythonipython_mag load_ipython_extens deprec favour register_ipython_extens httpsgithubcomaiidateamaiidacorepul refactor ci folder make test portabl easier understand httpsgithubcomaiidateamaiidacorepul ci folder becom clutter contain configur script github action jenkin ci chang move gh action specif script githubsystem_test refactor jenkin setuptest use moleculemoleculereadthedocsio molecul folder aiidacor develop pytest requires_rmq marker config_with_profil fixtur ad httpsgithubcomaiidateamaiidacorepul httpsgithubcomaiidateamaiidacorepul v note releas v skip due problem upload file pypi bug fix dict access inexist key rais keyerror instead attributeerror httpsgithubcomaiidateamaiidacorepul config make write disk atom possibl httpsgithubcomaiidateamaiidacorepul config overwrit load migrat httpsgithubcomaiidateamaiidacorepul sqlalchemi fix bug group extra migrat revis edcddaf httpsgithubcomaiidateamaiidacorepul develop sqlalchemi improv alemb migrat code httpsgithubcomaiidateamaiidacorepul ci manual instal numpi prevent incompat releas httpsgithubcomaiidateamaiidacorepul v minor version releas support python ad httpsgithubcomaiidateamaiidacorepul support python drop httpsgithubcomaiidateamaiidacorepul version compat current python version endoflif featur process function calcfunct workfunct submit daemon like calcjob workchain httpsgithubcomaiidateamaiidacorepul rest api list endpoint base url httpsgithubcomaiidateamaiidacorepul rest api new full_types_count endpoint count number node type node httpsgithubcomaiidateamaiidacorepul processbuild allow unset input attribut delet httpsgithubcomaiidateamaiidacorepul verdi migrat make inplac work across differ file system httpsgithubcomaiidateamaiidacorepul improv ad remain origin document didnt make first step recent major overhaul v verdi process show order ctime print process label httpsgithubcomaiidateamaiidacorepul linkmanag fix inaccuraci except messag nonexist link httpsgithubcomaiidateamaiidacorepul add reset method toprogressreporterabstract httpsgithubcomaiidateamaiidacorepul improv deprec warn nodeopen outsid context manag httpsgithubcomaiidateamaiidacorepul bug fix slurmschedul fix bug valid job resourc httpsgithubcomaiidateamaiidacorepul fix zerodivisionerror worker slot check httpsgithubcomaiidateamaiidacorepul calcjob attempt clean retriev temporari folder pars present httpsgithubcomaiidateamaiidacorepul add miss entri point group map httpsgithubcomaiidateamaiidacorepul rest api process_typ identifi patholog emptystring null entri databas httpsgithubcomaiidateamaiidacorepul develop verdi group delet deprec ignor clear option httpsgithubcomaiidateamaiidacorepul replac old format string interpol fstring httpsgithubcomaiidateamaiidacorepul ci move pylint configur pyprojecttoml httpsgithubcomaiidateamaiidacorepul ci use e instal tox add dockercompos isol rabbitmq httpsgithubcomaiidateamaiidacorepul ci add coverag patch threshold prevent fals posit httpsgithubcomaiidateamaiidacorepul ci allow mypi type check thirdparti import httpsgithubcomaiidateamaiidacorepul depend updat requir pytest use pyprojecttoml httpsgithubcomaiidateamaiidacorepul archiv importexport refactor refactor goal pave way implement new archiv format v aiidateamaephttpsgithubcomaiidateamaeppul three abstractconcret interfac class defin writer reader migrat independ theintern structur archiv class use within exportimport code code aiidatoolsimportexport larg rewritten particular ad aiidatoolsimportexportarch contain code interfac archiv requir connectionto aiida profil export logic rewritten minimis requir queri faster allow stream datainto writer minimis ram requir new format intend similiar pr made import code gener progress bar implement avail aiidacommonprogress_reporterpi correspondingcli command also verbos option merg pr refactor export archiv httpsgithubcomaiidateamaiidacorepul httpsgithubcomaiidateamaiidacorepul refactor import archiv httpsgithubcomaiidateamaiidacorepul refactor migrat archiv httpsgithubcomaiidateamaiidacorepul add group extra archiv httpsgithubcomaiidateamaiidacorepul refactor cmdline progress bar httpsgithubcomaiidateamaiidacorepul httpsgithubcomaiidateamaiidacorepul updat archiv version httpsgithubcomaiidateamaiidacorepul deprec export_zip export_tar export_tre extract_zip extract_tar extract_treefunct silent keyword export function remov zipfold class v patch backport fix v bug fix dict access inexist key rais keyerror instead attributeerror httpsgithubcomaiidateamaiidacorepul develop ci manual instal numpi prevent incompat releas httpsgithubcomaiidateamaiidacorepul v bug fix rabbitmq updat topika requir fix ssl connect remov valid broker_paramet profil httpsgithubcomaiidateamaiidacorepul fix unboundlocalerror aiidacmdlineutilsedit_multiline_templ affect verdi codecomput setup httpsgithubcomaiidateamaiidacorepul v critic bug fix calcjob make sure local_copy_list file end node repositori folder httpsgithubcomaiidateamaiidacorepul v improv verdi setup forward broker default interact mode httpsgithubcomaiidateamaiidacorepul bug fix verdi setup improv valid help string broker virtual host httpsgithubcomaiidateamaiidacorepul implement next iter nodeopen deprec wrapper httpsgithubcomaiidateamaiidacorepul depend increas minimum version requir plumpi suppress noisi warn end interpret ran process httpsgithubcomaiidateamaiidacorepul v improv add default configur option sshtransport plugin httpsgithubcomaiidateamaiidacorepul verdi statu distinguish databas schema version incompat httpsgithubcomaiidateamaiidacorepul slurmschedul implement parse_output detect oom oow httpsgithubcomaiidateamaiidacorepul featur make rabbitmq connect paramet configur httpsgithubcomaiidateamaiidacorepul add infrastructur pars schedul output calcjob httpsgithubcomaiidateamaiidacorepul add support peer authent postgresql httpsgithubcomaiidateamaiidacorepul add paus flag verdi process list httpsgithubcomaiidateamaiidacorepul make loglevel daemon configur httpsgithubcomaiidateamaiidacorepul transport add option use login shell command httpsgithubcomaiidateamaiidacorepul implement skip_orm option sqlalchemi groupremove_nod httpsgithubcomaiidateamaiidacorepul dict allow set attribut setitem attributemanag httpsgithubcomaiidateamaiidacorepul calcjob allow nest target path local_copy_list httpsgithubcomaiidateamaiidacorepul verdi export migrat add inplac flag migrat archiv place httpsgithubcomaiidateamaiidacorepul bug fix verdi make prependtext appendtext option properli interact httpsgithubcomaiidateamaiidacorepul verdi comput test fix fail result harmless stderr respons httpsgithubcomaiidateamaiidacorepul querybuild accept empti string entity_typ append method httpsgithubcomaiidateamaiidacorepul verdi statu except profil configur httpsgithubcomaiidateamaiidacorepul arithmeticaddpars attach output check neg valu httpsgithubcomaiidateamaiidacorepul calcjob fix bug retrieve_list affect entri without wildcard httpsgithubcomaiidateamaiidacorepul templatereplacercalcul make file namespac dynam httpsgithubcomaiidateamaiidacorepul develop renam folder testfixtur teststat httpsgithubcomaiidateamaiidacorepul remov file precommit exclud list httpsgithubcomaiidateamaiidacorepul orm move attributesextra method frontend backend node mixin httpsgithubcomaiidateamaiidacorepul depend depend updat minimum requir paramiko httpsgithubcomaiidateamaiidacorepul deped remov upper limit allow numpi httpsgithubcomaiidateamaiidacorepul deprec deprec getter setter method comput properti httpsgithubcomaiidateamaiidacorepul deprec method refer comput label name httpsgithubcomaiidateamaiidacorepul chang baserestartworkchain run process_handl exit_cod httpsgithubcomaiidateamaiidacorepul slurmschedul alway rais nonzero exit code httpsgithubcomaiidateamaiidacorepul remov superflu error_no_retrieved_fold calcjob subclass httpsgithubcomaiidateamaiidacorepul v bug fix fix file handl leak due runner close event loop creat httpsgithubcomaiidateamaiidacorepul arithmeticaddpars attach output check neg valu httpsgithubcomaiidateamaiidacorepul v improv comprehens restructur revamp onlin document httpsgithubcomaiidateamaiidacorepul improv default verdi comput configur ssh httpsgithubcomaiidateamaiidacorepul proven graph enabl highlight specif node class highlight root node default httpsgithubcomaiidateamaiidacorepul perform enabl eventbas monitor work chain child process poll everi second httpsgithubcomaiidateamaiidacorepul increas default runnerpollinterv config option second httpsgithubcomaiidateamaiidacorepul increas effici sqlagroupnod iter httpsgithubcomaiidateamaiidacorepul featur add progress bar export import relat function httpsgithubcomaiidateamaiidacorepul enabl load configyml file url verdi command config option httpsgithubcomaiidateamaiidacorepul querybuild add flat argument method httpsgithubcomaiidateamaiidacorepul verdi statu add normq flag skip rabbitmq check httpsgithubcomaiidateamaiidacorepul add support process function verdi plugin list httpsgithubcomaiidateamaiidacorepul allow profil select ipython magic aiida httpsgithubcomaiidateamaiidacorepul support complex formula format aiidaormdatacifparse_formula httpsgithubcomaiidateamaiidacorepul bug fix baserestartworkchain assum metadata exist input run_process httpsgithubcomaiidateamaiidacorepul baserestartworkchain fix bug inspect_process httpsgithubcomaiidateamaiidacorepul baserestartworkchain fix unhandl failur mechan deal failur subprocess httpsgithubcomaiidateamaiidacorepul fix except handl command call list_repository_cont httpsgithubcomaiidateamaiidacorepul fix bug codeget_full_text_info httpsgithubcomaiidateamaiidacorepul fix bug verdi daemon restart reset httpsgithubcomaiidateamaiidacorepul fix tabcomplet linkmanag attributemanag httpsgithubcomaiidateamaiidacorepul calcjobresultmanag fix bug broke tab complet httpsgithubcomaiidateamaiidacorepul sshtransportgettre allow nonexist nest target directori httpsgithubcomaiidateamaiidacorepul calcjob move job resourc valid schedul class fix problem sge lsf schedul plugin httpsgithubcomaiidateamaiidacorepul workchain guarante maintain order append await httpsgithubcomaiidateamaiidacorepul add support binari file variou verdi cat command httpsgithubcomaiidateamaiidacorepul ensur verdi group show limit respect limit even raw mode httpsgithubcomaiidateamaiidacorepul querybuild fix type string filter gener group subclass httpsgithubcomaiidateamaiidacorepul rais call nodeobjectsdelet node incom link httpsgithubcomaiidateamaiidacorepul properli handl multipl request thread rest api httpsgithubcomaiidateamaiidacorepul nodetransl assum get_export_format exist httpsgithubcomaiidateamaiidacorepul color directori verdi node repo ls color httpsgithubcomaiidateamaiidacorepul develop add arithmet workflow restructur calcul plugin httpsgithubcomaiidateamaiidacorepul add minim mypi run precommit hook httpsgithubcomaiidateamaiidacorepul fix timeout testscmdlinecommandstest_processtest_pause_play_kil httpsgithubcomaiidateamaiidacorepul revis updatedepend flow resolv issu httpsgithubcomaiidateamaiidacorepul add github action transifex upload httpsgithubcomaiidateamaiidacorepul deprec get_valid_schedul class method schedul class deprec favor aiidapluginsentry_pointget_entry_point_nam httpsgithubcomaiidateamaiidacorepul v fix three bug three minor featur ad along way featur add config option daemonworker_process_slot configur maximum number concurr task daemon worker handl httpsgithubcomaiidateamaiidacorepul add config option daemondefault_work set default number worker start verdi daemon start httpsgithubcomaiidateamaiidacorepul calcjob make submit script filenam configur metadataopt httpsgithubcomaiidateamaiidacorepul bug fix calcjob fix bug idempot check upload transport task httpsgithubcomaiidateamaiidacorepul rest api reintroduc cor header lack break materi cloud proven explor httpsgithubcomaiidateamaiidacorepul remov equal oper exitcod caus serial workchain fail put workchain context httpsgithubcomaiidateamaiidacorepul deprec hookup argument aiidarestapirun_api hookup option verdi restapi deprec httpsgithubcomaiidateamaiidacorepul v featur exitcod make exit messag parameteriz templat httpsgithubcomaiidateamaiidacorepul grouppath util work virtual group hierarchi httpsgithubcomaiidateamaiidacorepul make group sub classabl entri point httpsgithubcomaiidateamaiidacorepullhttpsgithubcomaiidateamaiidacorepullhttpsgithubcomaiidateamaiidacorepul add autocomplet support codeparamtyp groupparamtyp httpsgithubcomaiidateamaiidacorepul add export archiv migrat group type string httpsgithubcomaiidateamaiidacorepul add vversion option verdi export migrat httpsgithubcomaiidateamaiidacorepul add llimit option verdi group show httpsgithubcomaiidateamaiidacorepul add orderbyorderdirect option verdi group list httpsgithubcomaiidateamaiidacorepul add prepend_text append_text aiida_local_code_factori pytest fixtur httpsgithubcomaiidateamaiidacorepul rest api make easier call run_api wsgi script httpsgithubcomaiidateamaiidacorepul plot band one kpoint httpsgithubcomaiidateamaiidacorepul bug fix improv valid cli paramet httpsgithubcomaiidateamaiidacorepul ensur unic creat instanc autogroup httpsgithubcomaiidateamaiidacorepul prevent node without regist entri point store httpsgithubcomaiidateamaiidacorepul fix rotatingfilehandl configur daemon loggerhttpsgithubcomaiidateamaiidacorepul ensur log messag duplic daemon log file httpsgithubcomaiidateamaiidacorepul convert argument str aiidacommonescapingescape_for_bash httpsgithubcomaiidateamaiidacorepul remov return statement remotedatagetfil httpsgithubcomaiidateamaiidacorepul support bandsdata node without structuredata ancestor httpsgithubcomaiidateamaiidacorepul deprec deprec grouptyp option favor typestr verdi group list httpsgithubcomaiidateamaiidacorepul document doc link document librari via intersphinx map httpsgithubcomaiidateamaiidacorepul doc remov extra advanced_plot instal instruct httpsgithubcomaiidateamaiidacorepul doc consist use plugin vs plugin packag terminolog httpsgithubcomaiidateamaiidacorepul develop dedupl code test archiv migrat code httpsgithubcomaiidateamaiidacorepul ci use github action servic postgresql rabbitmq httpsgithubcomaiidateamaiidacorepul move aiidamanageexternalpgsu extern packag pgsu httpsgithubcomaiidateamaiidacorepul cleanup toplevel directori repositori httpsgithubcomaiidateamaiidacorepul remov unus ormimplementationutil modul httpsgithubcomaiidateamaiidacorepul revis depend manag workflow httpsgithubcomaiidateamaiidacorepul readd support coverag report codecovio httpsgithubcomaiidateamaiidacorepul v chang emit warn input port specifi node instanc default httpsgithubcomaiidateamaiidacorepul baserestartworkchain requir process handler instanc method httpsgithubcomaiidateamaiidacorepul baserestartworkchain add method enabledis process handler httpsgithubcomaiidateamaiidacorepul docker contain remov conda activ configureaiidash script httpsgithubcomaiidateamaiidacorepul add fixtur clear databas test httpsgithubcomaiidateamaiidacorepul verdi statu add configur directori path output httpsgithubcomaiidateamaiidacorepul querybuild add support datetimed object filter httpsgithubcomaiidateamaiidacorepul bug fix fix bug node_store_from_cach noderepositoryeras could result calcul reus httpsgithubcomaiidateamaiidacorepul cach fix configur spec valid httpsgithubcomaiidateamaiidacorepul write migrat config disk configfrom_fil httpsgithubcomaiidateamaiidacorepul valid label string code setup stage httpsgithubcomaiidateamaiidacorepul reus prepend_text append_text verdi computercod duplic httpsgithubcomaiidateamaiidacorepul fix broken import urllib variou locat includ verdi import httpsgithubcomaiidateamaiidacorepul match header actual output verdi data structur list httpsgithubcomaiidateamaiidacorepul disabl cach data node subclass affect usual cach behavior httpsgithubcomaiidateamaiidacorepul v nota bene although minor version releas support python drop httpsgithubcomaiidateamaiidacorepul follow reason outlin correspond aephttpsgithubcomaiidateamaeptreemaster_drop_python critic bug fix python support juli v releas seri addit python httpsgithubcomaiidateamaiidacorepul version compat current python version endoflif featur add aiida graph explor age gener tool travers proven graph httpsgithubcomaiidateamaiidacorepul add baserestartworkchain make easier write simpl work chain wrapper around anoth process autom error handl httpsgithubcomaiidateamaiidacorepul add provenance_exclude_list attribut calcinfo data structur allow prevent calcul input file perman store repositori httpsgithubcomaiidateamaiidacorepul add verdi node repo dump command httpsgithubcomaiidateamaiidacorepul add method control cach invalid complet process node httpsgithubcomaiidateamaiidacorepul allow document build without instal configur aiida httpsgithubcomaiidateamaiidacorepul add option expand namespac sphinx direct httpsgithubcomaiidateamaiidacorepul perform add node_typ list immut model field prevent repeat databas hit httpsgithubcomaiidateamaiidacorepul add cach entri point entri point group httpsgithubcomaiidateamaiidacorepul improv perform export mani group httpsgithubcomaiidateamaiidacorepul chang calcjob move presubmit call calcjobrun waitingexecut httpsgithubcomaiidateamaiidacorepul calcjob paus except thrown presubmit httpsgithubcomaiidateamaiidacorepul move calcjob spec valid correspond namespac httpsgithubcomaiidateamaiidacorepul move get complet job account retriev transport task httpsgithubcomaiidateamaiidacorepul move last_job_info jsonseri string dictionari httpsgithubcomaiidateamaiidacorepul improv sqlalchemi session handl querybuild httpsgithubcomaiidateamaiidacorepul use builtin open instead ioopen possibl python longer support httpsgithubcomaiidateamaiidacorepul add nonzero exit code verdi daemon statu httpsgithubcomaiidateamaiidacorepul bug fix deal unreach daemon worker get_daemon_statu httpsgithubcomaiidateamaiidacorepul django backend limit batch size bulk_creat oper httpsgithubcomaiidateamaiidacorepul make sure datetim convers ignor none httpsgithubcomaiidateamaiidacorepul allow empti key_filenam verdi comput configur ssh reus cooldown time reconfigur httpsgithubcomaiidateamaiidacorepul updat pyyaml v prevent arbitrari code execut httpsgithubcomaiidateamaiidacorepul querybuild fix valid bug improv messag oper httpsgithubcomaiidateamaiidacorepul consid aiida_test_profil get_test_backend_nam httpsgithubcomaiidateamaiidacorepul ensur correct type querybuilderdict multipl project httpsgithubcomaiidateamaiidacorepul make local modul import run verdi run httpsgithubcomaiidateamaiidacorepul fix bug upload_calcul calcjob local code httpsgithubcomaiidateamaiidacorepul add import urllib dbimport httpsgithubcomaiidateamaiidacorepul develop move continu integr travi github action httpsgithubcomaiidateamaiidacorepul replac custom unit test framework pytest move test test top level directori httpsgithubcomaiidateamaiidacorepullhttpsgithubcomaiidateamaiidacorepullhttpsgithubcomaiidateamaiidacorepul clean direct depend relax requir possibl httpsgithubcomaiidateamaiidacorepul set job poll interv zero localhost pytest fixtur httpsgithubcomaiidateamaiidacorepul make command line deprec warn visibl test profil httpsgithubcomaiidateamaiidacorepul add docker imag minim run aiida instanc httpsgithubcomaiidateamaiidacorepul v improv improv backup mechan configur file uniqu backup written updat httpsgithubcomaiidateamaiidacorepul forward verdi code delet verdi node delet httpsgithubcomaiidateamaiidacorepul homogen improv output verdi comput test httpsgithubcomaiidateamaiidacorepul schedul slurm support unlimit not_set valu request walltim httpsgithubcomaiidateamaiidacorepul set default safe_interv option verdi comput configur httpsgithubcomaiidateamaiidacorepul creat backup configur file migrat httpsgithubcomaiidateamaiidacorepul add python_requir setupjson necessari futur drop python httpsgithubcomaiidateamaiidacorepul remov unus qb methodsfunct httpsgithubcomaiidateamaiidacorepul move pgtest argument temporaryprofilemanag constructor httpsgithubcomaiidateamaiidacorepul add filenam argument singlefiledata constructor httpsgithubcomaiidateamaiidacorepul mention machin ssh connect except messag httpsgithubcomaiidateamaiidacorepul doc expand qb order_bi inform httpsgithubcomaiidateamaiidacorepul replac deprec pymatgen sitespecies_and_occu sitespeci httpsgithubcomaiidateamaiidacorepul querybuild add deepcopi implement queryhelp properti httpsgithubcomaiidateamaiidacorepul bug fix fix verdi calcjob gotocomput key_filenam miss httpsgithubcomaiidateamaiidacorepul fix bug databas migrat schema gener determin except old databas httpsgithubcomaiidateamaiidacorepul fix fals posit verdi databas integr detectinvalidlink httpsgithubcomaiidateamaiidacorepul config migrat handl edg case daemon key miss daemon_profil httpsgithubcomaiidateamaiidacorepul rais unabl detect name local timezon httpsgithubcomaiidateamaiidacorepul fix bug calcjob dri run store_provenancefals httpsgithubcomaiidateamaiidacorepul migrat legaci illeg default link label _return export version up httpsgithubcomaiidateamaiidacorepul fix rest api attributes_filt extras_filt httpsgithubcomaiidateamaiidacorepul fix bug plugin factori class python httpsgithubcomaiidateamaiidacorepul make polishworkchain checkpoint httpsgithubcomaiidateamaiidacorepul rest api fix gener full node namespac httpsgithubcomaiidateamaiidacorepul v overview chang follow summari major chang improv v v faster workflow engin new messagebas engin power rabbitmq support ten thousand process per hour greatli speed workflow test run one daemon per aiida profil faster databas queri switch jsonb node attribut extra greatli improv queri speed reduc storag size order magnitud robust calcul aiida deal network connect issu automat retri backoff mechan connect pool box workflow calcul process paus play anytim better verdi command move click framework bring homogen command line option across command load node easili add new command plugin easier workflow develop input output namespac reus spec subprocess less boilerpl code simplifi write workchain calcjob also enabl power autodocument featur matur proven model clear separ data proven calcul data logic proven workflow old databas migrat new model automat python compat aiida compat python python later python support drop come month detail list chang nonexhaust list chang categori chang alphabeta releas includ see changelog correspond releas engin daemon implement concept exit statu calcul allow programmat definit success failur process httpsgithubcomaiidateamaiidacorepul calcul go process layer homogen state work job calcul httpsgithubcomaiidateamaiidacorepul allow none default argument process function httpsgithubcomaiidateamaiidacorepul implement new calcfunct decor httpsgithubcomaiidateamaiidacorepul profil daemon run complet independ parallel httpsgithubcomaiidateamaiidacorepul poll base daemon replac much faster eventbas daemon httpsgithubcomaiidateamaiidacorepul replac celeri circu daemon daemon httpsgithubcomaiidateamaiidacorepul daemon stop without load databas make possibl stop even databas version match code httpsgithubcomaiidateamaiidacorepul implement exponenti backoff retri mechan transport task httpsgithubcomaiidateamaiidacorepul paus calcjob transport task fall exponenti backoff httpsgithubcomaiidateamaiidacorepul separ calcjob submit task folder upload schedul submit httpsgithubcomaiidateamaiidacorepul daemon worker respect option minimum schedul poll interv httpsgithubcomaiidateamaiidacorepul make execmanagerretrieve_calcul idempotentish httpsgithubcomaiidateamaiidacorepul make execmanagerupload_calcul idempotentish httpsgithubcomaiidateamaiidacorepul make execmanagersubmit_calcul idempotentish httpsgithubcomaiidateamaiidacorepul implement pluginversionprovid process automat add version aiidacor plugin process node httpsgithubcomaiidateamaiidacorepul process implement processbuild simplifi definit process input launch process httpsgithubcomaiidateamaiidacorepul namespac ad port contain processspec class httpsgithubcomaiidateamaiidacorepul convent lead underscor nonstor input replac proper non_db attribut port class httpsgithubcomaiidateamaiidacorepul implement sphinx extens workchain class automat gener document workchain definit httpsgithubcomaiidateamaiidacorepul workchain expos input output anoth workchain great write modular workflow httpsgithubcomaiidateamaiidacorepul add builtin support api exit code workchain httpsgithubcomaiidateamaiidacorepul httpsgithubcomaiidateamaiidacorepul httpsgithubcomaiidateamaiidacorepul implement method calcjobnod creat restart builder httpsgithubcomaiidateamaiidacorepul add calculationtool base entri point aiidatoolscalcul httpsgithubcomaiidateamaiidacorepul gener sphinx workchain extens process httpsgithubcomaiidateamaiidacorepul collaps namespac sphinxext httpsgithubcomaiidateamaiidacorepul retrieve_singlefile_list deprec replac retrieve_temporary_list httpsgithubcomaiidateamaiidacorepul automat set calcinfouuid calcjobrun httpsgithubcomaiidateamaiidacorepul allow usag lambda function inputport default valu httpsgithubcomaiidateamaiidacorepul orm implementat authinfo class allow custom configur per configur comput httpsgithubcomaiidateamaiidacorepul add effici count method aiidaormgroupsgroup httpsgithubcomaiidateamaiidacorepul speed creation node aiida orm httpsgithubcomaiidateamaiidacorepul enabl use tupl querybuilderappend orm class httpsgithubcomaiidateamaiidacorepul httpsgithubcomaiidateamaiidacorepul refactor orm explicit frontend backend layer httpsgithubcomaiidateamaiidacorepullhttpsgithubcomaiidateamaiidacorepullhttpsgithubcomaiidateamaiidacorepullhttpsgithubcomaiidateamaiidacorepullhttpsgithubcomaiidateamaiidacorepul add support index slice ormgroupnod iter httpsgithubcomaiidateamaiidacorepul add support process class querybuilderappend httpsgithubcomaiidateamaiidacorepul chang type uuid return querybuild unicod httpsgithubcomaiidateamaiidacorepul attributedict construct recurs nest dictionari httpsgithubcomaiidateamaiidacorepul ensur immut calcjobnod hash store httpsgithubcomaiidateamaiidacorepul fix bug remotedata_clean method httpsgithubcomaiidateamaiidacorepul fix bug querybuilderfirst multipl project httpsgithubcomaiidateamaiidacorepul fix bug delete_nod pass pk nonexist node httpsgithubcomaiidateamaiidacorepul remov unserializ data metadata log record httpsgithubcomaiidateamaiidacorepul data fix bug parse_formula formula lead trail whitespac httpsgithubcomaiidateamaiidacorepul refactor orbit code fix bug httpsgithubcomaiidateamaiidacorepul fix bug store method cifdata would rais except call httpsgithubcomaiidateamaiidacorepul allow pass directori path folderdata constructor httpsgithubcomaiidateamaiidacorepul add element x element list order support unknown speci httpsgithubcomaiidateamaiidacorepul variou bug consist fix cifdata structuredata httpsgithubcomaiidateamaiidacorepul chang data class attribut trajectorydata data storag httpsgithubcomaiidateamaiidacorepullhttpsgithubcomaiidateamaiidacorepul renam parameterdata dict httpsgithubcomaiidateamaiidacorepul remov frozendict data sub class httpsgithubcomaiidateamaiidacorepul remov error data sub class httpsgithubcomaiidateamaiidacorepul make code real sub class data httpsgithubcomaiidateamaiidacorepul implement has_atomic_sit has_unknown_speci properti cifdata class httpsgithubcomaiidateamaiidacorepul chang default librari use _get_aiida_structur convert cifdata structuredata ase pymatgen httpsgithubcomaiidateamaiidacorepul add convert upfdata upf json format httpsgithubcomaiidateamaiidacorepul fix potenti ineffici aiidatoolsdatacif convert httpsgithubcomaiidateamaiidacorepul fix bug kpointsdatareciprocal_cel httpsgithubcomaiidateamaiidacorepul improv robust pars version element name upf file httpsgithubcomaiidateamaiidacorepul verdi command line interfac migrat verdi click infrastructur httpsgithubcomaiidateamaiidacorepul add default user aiida configur elimin need retyp user inform everi new profil httpsgithubcomaiidateamaiidacorepul implement tabcomplet profil p option verdi httpsgithubcomaiidateamaiidacorepul homogen interfac verdi quicksetup verdi setup httpsgithubcomaiidateamaiidacorepul add option version verdi display current version httpsgithubcomaiidateamaiidacorepul verdi comput configur read input yaml file config option httpsgithubcomaiidateamaiidacorepul extern databas import add import class materi platform data scienc api host paul file data httpsgithubcomaiidateamaiidacorepul add import class materi project api httpsgithubcomaiidateamaiidacorepul databas add index column dblink sqlalchemi httpsgithubcomaiidateamaiidacorepul creat uniqu constraint index db_dbgroup_dbnod tabl sqlalchemi httpsgithubcomaiidateamaiidacorepul perform improv ad node group httpsgithubcomaiidateamaiidacorepul make uuid column uniqu sqlalchemi httpsgithubcomaiidateamaiidacorepul allow postgresql connect via unix socket httpsgithubcomaiidateamaiidacorepul drop unus nodevers public column node tabl httpsgithubcomaiidateamaiidacorepul drop variou unus column user tabl httpsgithubcomaiidateamaiidacorepul drop unus transport_param column comput tabl httpsgithubcomaiidateamaiidacorepul drop dbcalcstat tabl httpsgithubcomaiidateamaiidacorepul django migrat node attribut extra schema use jsonb greatli improv storag queri effici httpsgithubcomaiidateamaiidacorepul sqlalchemi improv speed node attribut extra deseri httpsgithubcomaiidateamaiidacorepul export import implement export import node extra httpsgithubcomaiidateamaiidacorepul implement export import comment httpsgithubcomaiidateamaiidacorepul implement export import log httpsgithubcomaiidateamaiidacorepul add export_paramet metadatajson archiv file httpsgithubcomaiidateamaiidacorepul simplifi data format export archiv greatli reduc file size httpsgithubcomaiidateamaiidacorepul verdi import automat migrat archiv file old format httpsgithubcomaiidateamaiidacorepul miscellan refactor unit test manag add basic fixtur pytest httpsgithubcomaiidateamaiidacorepul rest api v updat conform aiidacor httpsgithubcomaiidateamaiidacorepul improv decor use wrapt librari function signatur properli maintain httpsgithubcomaiidateamaiidacorepul allow empti enabl disabl key cach configur httpsgithubcomaiidateamaiidacorepul aiida enforc utf encod text output file databas httpsgithubcomaiidateamaiidacorepul backwardsincompat chang subset remov aiidatest obsolet aiidabackendsteststest_pars entri point group httpsgithubcomaiidateamaiidacorepul implement new link type httpsgithubcomaiidateamaiidacorepul renam type string group chang attribut name type label type_str httpsgithubcomaiidateamaiidacorepul make variou protect node method public httpsgithubcomaiidateamaiidacorepul renam dbnodetyp dbnodenode_typ httpsgithubcomaiidateamaiidacorepul renam orm class node sub class jobcalcul workcalcul inlinecalcul functioncalcul httpsgithubcomaiidateamaiidacorepullhttpsgithubcomaiidateamaiidacorepullhttpsgithubcomaiidateamaiidacorepullhttpsgithubcomaiidateamaiidacorepullhttpsgithubcomaiidateamaiidacorepul allow copi deepcopi node except data node httpsgithubcomaiidateamaiidacorepul remov aiidacontrol aiidautil toplevel modul reorgan aiidacommon aiidamanag aiidatool httpsgithubcomaiidateamaiidacorepul make node repositori api backend agnost httpsgithubcomaiidateamaiidacorepul redesign parser class httpsgithubcomaiidateamaiidacorepul django remov support datetim object node attribut extra httpsgithubcomaiidateamaiidacorepul enforc specif precis clean_valu float comput node hash httpsgithubcomaiidateamaiidacorepul move physic constant aiidacommonconst extern qetool packag httpsgithubcomaiidateamaiidacorepul add type check plugin factori httpsgithubcomaiidateamaiidacorepul disallow pickl store numpi array arraydata httpsgithubcomaiidateamaiidacorepul remov implement legaci workflow httpsgithubcomaiidateamaiidacorepul implement calcjob process class replac deprec jobcalcul httpsgithubcomaiidateamaiidacorepul chang structur calcinfolocal_copy_list httpsgithubcomaiidateamaiidacorepul querybuild chang ancestor_ofdescendant_of with_descendantswith_ancestor httpsgithubcomaiidateamaiidacorepul v improv ad new endpoint rest api get list distinct node type httpsgithubcomaiidateamaiidacorepul travi port deploy stage develop branch httpsgithubcomaiidateamaiidacorepul minor bug fix correct graph export set expans rule httpsgithubcomaiidateamaiidacorepul miscellan backport streamlin quick instal instruct provenance_redesign httpsgithubcomaiidateamaiida_corepul remov useless chainmap depend httpsgithubcomaiidateamaiidacorepul add aiidacor version doc home page httpsgithubcomaiidateamaiidacorepul doc add note increas work_mem httpsgithubcomaiidateamaiidacorepul v improv fast addit node group skip_ormtru httpsgithubcomaiidateamaiidacorepul add environmentyml instal depend use conda releas aiidacor condaforg channel httpsgithubcomaiidateamaiidacorepul rest api io tree respons includ link type node label httpsgithubcomaiidateamaiidacorepul httpsgithubcomaiidateamaiidacorepul backport postgr improv quicksetup httpsgithubcomaiidateamaiidacorepul backport aiidaget_strict_vers plugin develop httpsgithubcomaiidateamaiidacorepul minor bug fix fix secur vulner upgrad paramiko httpsgithubcomaiidateamaiidacorepul disabl cach inlin calcul broken sinc move workfunctionbas implement httpsgithubcomaiidateamaiidacorepul let verdi help return exit statu httpsgithubcomaiidateamaiidacorepul decod dict key string backport httpsgithubcomaiidateamaiidacorepul remov broken verdiplug entri point httpsgithubcomaiidateamaiidacorepul verdi node delet without argument longer tri delet node httpsgithubcomaiidateamaiidacorepul fix plot bandsdata object httpsgithubcomaiidateamaiidacorepul miscellan rest api add test random sort list entri type httpsgithubcomaiidateamaiidacorepul add variou badg readm httpsgithubcomaiidateamaiidacorepul minor document improv httpsgithubcomaiidateamaiidacorepul add licens file manifest httpsgithubcomaiidateamaiidacorepul add instruct verdi import fail httpsgithubcomaiidateamaiidacorepul v improv support hash uuiduuid type regist hash function httpsgithubcomaiidateamaiidacorepul add document plugin cutter httpsgithubcomaiidateamaiidacorepul minor bug fix make export graph consist current node link hierarchi definit httpsgithubcomaiidateamaiidacorepul fix link import problem sqla httpsgithubcomaiidateamaiidacorepul fix cach folder copi httpsgithubcomaiidateamaiidacorepul httpsgithubcomaiidateamaiidacorepul fix bug mixinspi copi node httpsgithubcomaiidateamaiidacorepul fix pgtest failur releasebranch travi httpsgithubcomaiidateamaiidacorepul fix plugin return testrunn result fail travi test dont pass httpsgithubcomaiidateamaiidacorepul miscellan remov pycrypto depend found sercur flaw httpsgithubcomaiidateamaiidacorepul set xsf default format structur visual httpsgithubcomaiidateamaiidacorepul delet unus utilscreate_requirementspi file httpsgithubcomaiidateamaiidacorepul v improv alway use bash login shell execut remot ssh command overrid system default shell httpsgithubcomaiidateamaiidacorepul reduc size distribut packag almost half remov test fixtur gener data fli httpsgithubcomaiidateamaiidacorepul remov explicit depend upper limit scipi httpsgithubcomaiidateamaiidacorepul resolv variou depend requir conflict httpsgithubcomaiidateamaiidacorepul minor bug fix fix bug verdi node delet would throw except certain case httpsgithubcomaiidateamaiidacorepul fix bug cif endpoint rest api httpsgithubcomaiidateamaiidacorepul v improv hash cach fastforward httpsgithubcomaiidateamaiidacorepul calcul longer store full sourc file httpsgithubcomaiidateamaiidacorepul delet node via verdi node delet httpsgithubcomaiidateamaiidacorepul import structur use ase httpsgithubcomaiidateamaiidacorepul structuredata pymatgen structuredata roundtrip work arbitrari kind name httpsgithubcomaiidateamaiidacorepul httpsgithubcomaiidateamaiidacorepul httpsgithubcomaiidateamaiidacorepul output format archiv file defin verdi export migrat httpsgithubcomaiidateamaiidacorepul automat report code coverag unit test ad httpsgithubcomaiidateamaiidacorepul critic bug fix add parser_nam jobprocess option httpsgithubcomaiidateamaiidacorepul node attribut read alway date across interpret sqlalchemi httpsgithubcomaiidateamaiidacorepul minor bug fix cell vector print correctli httpsgithubcomaiidateamaiidacorepul fix readthedoc issu httpsgithubcomaiidateamaiidacorepul httpsgithubcomaiidateamaiidacorepul fix structureband visual rest api httpsgithubcomaiidateamaiidacorepul httpsgithubcomaiidateamaiidacorepul fix verdi work list test httpsgithubcomaiidateamaiidacorepul fix _inline_to_standalone_script tcodexport httpsgithubcomaiidateamaiidacorepul updat reentri fix variou small bug relat plugin regist httpsgithubcomaiidateamaiidacorepul miscellan bump qetool version httpsgithubcomaiidateamaiidacorepul document link type httpsgithubcomaiidateamaiidacorepul switch trusti postgr travi httpsgithubcomaiidateamaiidacorepul use raw sql sqlalchemi migrat code httpsgithubcomaiidateamaiidacorepul document queri list attribut httpsgithubcomaiidateamaiidacorepul document run aiida daemon servic httpsgithubcomaiidateamaiidacorepul document torqu loadlev schedul fulli support httpsgithubcomaiidateamaiidacorepul cookbook check number queuedrun job schedul httpsgithubcomaiidateamaiidacorepul v improv pycifrw upgrad httpsgithubcomaiidateamaiidacorepul critic bug fix persist load pars workchain input recreat avoid creat duplic default input httpsgithubcomaiidateamaiidacorepul serial workchain context persist httpsgithubcomaiidateamaiidacorepul v improv document aiida automat gener complet api document use sphinxapidoc httpsgithubcomaiidateamaiidacorepul add json schema connect rest api materi cloud explor interfac httpsgithubcomaiidateamaiidacorepul critic bug fix finished_key failed_key variabl known abstractcalcul httpsgithubcomaiidateamaiidacorepul minor bug fix make rest extra lowercas one pip instal aiidacorerest httpsgithubcomaiidateamaiidacorepul cifdata visual endpoint return data httpsgithubcomaiidateamaiidacorepul deprec querytool deprec favor querybuild sinc v httpsgithubcomaiidateamaiidacorepul miscellan add gourc config gener video develop histori httpsgithubcomaiidateamaiidacorepul v critic bug fix link type respect nodeget_input sqlalchemi httpsgithubcomaiidateamaiidacorepul v improv support visual structur cif file vesta httpsgithubcomaiidateamaiidacorepul better fallback node class avail httpsgithubcomaiidateamaiidacorepul cifdata support faster pars lazi load httpsgithubcomaiidateamaiidacorepul rest endpoint cifdata api report full list avail endpoint httpsgithubcomaiidateamaiidacorepul variou smaller improv httpsgithubcomaiidateamaiidacorepul httpsgithubcomaiidateamaiidacorepul critic bug fix restor attribut immut node httpsgithubcomaiidateamaiidacorepul fix daemon issu could caus aiida daemon kill httpsgithubcomaiidateamaiidacorepul minor bug fix fix type column verdi calcul list httpsgithubcomaiidateamaiidacorepul httpsgithubcomaiidateamaiidacorepul fix verdi import url httpsgithubcomaiidateamaiidacorepul v improv core entiti comput shebang line customiz httpsgithubcomaiidateamaiidacorepul kpointsdata deprec buggi legaci implement kpoint gener favor seekpath httpsgithubcomaiidateamaiidacorepul dict to_aiida_typ use dictionari automat convert dict httpsgithubcomaiidateamaiidacorepul jobcalcul parser specifi file retriev local pars temporarili delet pars complet httpsgithubcomaiidateamaiidacorepul httpsgithubcomaiidateamaiidacorepul plugin plugin data hook plugin add custom command verdi data httpsgithubcomaiidateamaiidacorepul plugin fixtur simpletous decor write test plugin httpsgithubcomaiidateamaiidacorepul httpsgithubcomaiidateamaiidacorepul plugin develop longer swallow importerror except import plugin httpsgithubcomaiidateamaiidacorepul verdi verdi shell improv tab complet import httpsgithubcomaiidateamaiidacorepul verdi work list project verdi work list httpsgithubcomaiidateamaiidacorepul miscellan supervisor remov depend unixonli supervisor packag remov httpsgithubcomaiidateamaiidacorepul rest api add server info endpoint structur endpoint return differ file format httpsgithubcomaiidateamaiidacorepul rest api updat endpoint structur visual calcul includ retriev input output list add endpoint upfdata httpsgithubcomaiidateamaiidacorepul httpsgithubcomaiidateamaiidacorepul test use daemon run faster httpsgithubcomaiidateamaiidacorepul document updat outdat workflow exampl httpsgithubcomaiidateamaiidacorepul document updat importexport httpsgithubcomaiidateamaiidacorepul document plugin quickstart httpsgithubcomaiidateamaiidacorepul document parser exampl httpsgithubcomaiidateamaiidacorepul minor bug fix fix bug repositori extern hard drive httpsgithubcomaiidateamaiidacorepul fix bug configur precommit hook httpsgithubcomaiidateamaiidacorepul fix improv plugin loader test httpsgithubcomaiidateamaiidacorepul fix broken celeri log httpsgithubcomaiidateamaiidacorepul deprec async aiidaworkrun deprec lead race condit therebi unexpect behavior httpsgithubcomaiidateamaiidacorepul v improv improv except handl load db test httpsgithubcomaiidateamaiidacorepul verdi work kill workchain skip calcul kill rather stop httpsgithubcomaiidateamaiidacorepul remov unnecessari info messag alemb sqlalchemi backend httpsgithubcomaiidateamaiidacorepul add filter suppress unnecessari log messag test httpsgithubcomaiidateamaiidacorepul critic bug fix fix bug verdi quicksetup ubuntu add regress test catch similar problem futur httpsgithubcomaiidateamaiidacorepul fix bug verdi data list command sqlalchemi backend httpsgithubcomaiidateamaiidacorepul minor bug fix variou bug fix relat workflow sqlalchemi backend httpsgithubcomaiidateamaiidacorepul httpsgithubcomaiidateamaiidacorepul v major chang dbpath tabl remov replac dynam transit closur among other nest workchain could lead dbpath tabl explod size code plugin remov aiidacor migrat respect plugin repositori found quantum espressohttpsgithubcomaiidateamaiidaquantumespresso asehttpsgithubcomaiidateamaiidaas cod toolshttpsgithubcomaiidateamaiidacodtool nwchemhttpsgithubcomaiidateamaiidanwchem instal pip use eg pip instal aiidaquantumespresso exist instal requir migrat see updat instruct documentationhttpsaiidacorereadthedocsioenvinstallationupdatinghtmlpluginmigr complet overview avail plugin visit registryhttpsaiidateamgithubioaiidaregistri improv new entri retrieve_temporary_list calcinfo allow retriev file temporarili pars store perman repositori httpsgithubcomaiidateamaiidacorepul new verdi command verdi work kill kill run workchain httpsgithubcomaiidateamaiidacorepul new verdi command verdi data remot lscatshow inspect content remotedata object httpsgithubcomaiidateamaiidacorepul new verdi command verdi export migrat allow migrat exist export archiv new format httpsgithubcomaiidateamaiidacorepul new verdi command verdi profil delet httpsgithubcomaiidateamaiidacorepul implement new option verdi work report command limit number nest level print httpsgithubcomaiidateamaiidacorepul ad run field output verdi work list give current state workchain httpsgithubcomaiidateamaiidacorepul implement faster queri obtain databas statist httpsgithubcomaiidateamaiidacorepul ad test automat sqlalchemi databas migrat alemb httpsgithubcomaiidateamaiidacorepul except trigger step workchain properli log node make visibl verdi work report httpsgithubcomaiidateamaiidacorepul critic bug fix export write link type archiv import properli recreat link httpsgithubcomaiidateamaiidacorepul fix bug workchain persist would lead crash workchain certain condit resubmit httpsgithubcomaiidateamaiidacorepul fix bug pickl workchain instanc contain _if logic block outlin httpsgithubcomaiidateamaiidacorepul minor bug fix logger subclass abstractnod properli namespac aiida work plugin outsid aiidacor sourc tree httpsgithubcomaiidateamaiidacorepul fix problem state direct schedul caus daemon process hang submiss httpsgithubcomaiidateamaiidacorepul variou bug fix relat old workflow combin sqlalchemi backend httpsgithubcomaiidateamaiidacorepul httpsgithubcomaiidateamaiidacorepul fix bug tcodexport httpsgithubcomaiidateamaiidacorepul verdi profil delet respect configur dbport set httpsgithubcomaiidateamaiidacorepul restor correct help text verdi help httpsgithubcomaiidateamaiidacorepul fix queri icsd import element caus certain structur erron skip httpsgithubcomaiidateamaiidacorepul miscellan ad quickstart plugin develop documentationhttpaiidacorereadthedocsioenvdeveloper_guidepluginsquickstarthtml structur around new plugintemplatehttpsgithubcomaiidateamaiidaplugintempl httpsgithubcomaiidateamaiidacorepul improv restructur develop document httpsgithubcomaiidateamaiidacorepul v critic bug fix workchain step longer execut multipl time due process pickl lock minor bug fix fix arithmet oper basic numer type fix verdi calcul cleanworkdir chang querybuild syntax fix verdi calcul logshow except call workcalcul node fix verdi import sqlalchemi profil fix bug reentri updat depend requir v made octal liter string compat python fix broken import ase plugin improv verdi calcul show properli distinguish workcalcul jobcalcul node improv error handl verdi setup noninteract disabl unnecessari consol log test v data export function number new function ad export band structur number format includ gnuplot matplotlib export python file directli png pdf support latex typeset json improv agr xmgrace output also support twocolor band collinear magnet system ad also possibl specifi exportformatspecif paramet ad method get_export_format know avail export format given data subclass ad label prettifi properli typeset highsymmetri kpoint label differ format simpleold format seekpath number plot code xmgrace gnuplot latex improv commandlin export function option possibl write directli file possibl pass custom option export remov dbpath depend workchain crucial bug fix workchain run daemon ie use aiidaworksubmit enhanc ad abort abort_nowait method workchain allow abort workchain earliest possibl moment enhanc ad report method workchain allow workchain develop log messag databas enhanc ad command verdi work report given pk return messag log workchain report method enhanc workchain input port valid default specifi longer requir explicitli set requiredfals overriden automat new plugin system new plugin system implement allow load aiida entrypoint work parallel old system still experiment though command line entri point fulli implement yet support plugin registri code refactor refactor node move much possibl cach code abstract class refactor data node export code topmost class make gener also format export one file refactor number data subclass support new export api refactor bandsdata export code specif xmgrace given format make gener document gener improv document ad document upgrad aiida v v ad document new plugin system tutori ad indepth document export data node variou format ad explan export band structur avail format ad document run test develop guid document latex requir updat workchain document waitingequationofst exampl updat aiida instal document instal virtual environ updat document use jupyt enhanc speedup travi build process cach pip file run node load pass start uuid handl invalid verdi command line argument ad help text upgrad paramiko avoid creat empti file remot connect fail verdi calcul kill command avail sge plugin updat plum creat workchain input default valu evalu fals querybuild import default verdi command bug fix bug fix qe input parser codeget method accept pk integ string format wherea codeget_from_str method accept pk string format verdi code show command show descript code bug fix check comput properli configur submit calcul miscellan replac depend old unmantain pyspglib new spglib accept basetyp attributesextra convert automat valu way instanc possibl pass int float str valu dictionari store dict switch pkg_resourc reentri allow much faster load modul possibl therefor allow good speed bash complet remov obsolet code sqlite remov mayavi packag depend v export upgrad tcodexport produc cif file conform newest version cif_tcodd gener ad depend six properli rerais except v instal setup simplifi instal procedur adopt standard python packag instal method setuptool pip verdi instal replac verdi setup new verdi command quicksetup simplifi setup procedur significantli updat improv instal document gener significantli increas test coverag implement backend activ continu integr travi ci applicationwid log abstract implement backend ad rest api layer hook verdi cli verdi restapi improv querybuild composit model instead inherit remov requir determin implement import ad keyword with_dbpath make querybuild switch use dbpathand use updat improv document querytool well class nodequeri method deprec favor querybuild migrat verdi cli use querybuild order support databas backend ad option project verdi calcul list specifi attribut print document document restructur improv navig ad pseudopotenti tutori databas drop support mysql sqlite fulli support effici featur postgr like jsonb field databas effici improv order magnitud speedup larg databas ad indic daemon queri node uuid queri replac deprec commit_on_success atom django transact chang sqlalchemi intern use session engin work also fork eg celeri workflow final name new workflow system workflow work fragmentedworkfunct replac workchain inlinecalcul replac workfunct processcalcul replac workcalcul old style workflow still call run new style workchain major improv workchain workfunct implement improv workchain implement return statement workchain specif log databas implement workchainreport debug improv kill command oldstyl workflow avoid step rema run state plugin ad finer granular pars pw timer output new quantum espresso schedul plugin contribut epfl asegpaw plugin andrea cepellotti epfl berkeley quantum espresso do projwfc daniel marchand epfl mcgill quantum espresso phonon matdyn qr forc constant plugin giovanni pizzi nicola mounet epfl andrea cepellotti epfl berkeley quantum espresso cpx plugin giovanni pizzi epfl quantum espresso nebx plugin marco gibertini epfl lsf schedul nicola mounet epfl implement function export visual molecular dynam trajectori use eg matplotlib mayavi improv tcodexport fix adapt chang extern librari ad addit tcod cif tag variou bugfix variou fix improv fix direct schedul mac os x fix import comput name collis gener backup script made profil specif save start_backup_profilepi fix vary_round warn v function implement support kerbero authent ssh transport plugin ad _get_submit_script_foot schedul base class improv slurm schedul plugin fulli function parser quantumespresso cp pw better pars atom speci pw output array class project xy chang kpoint class ad codespecif tool quantumespresso verdi code listnow show local code verdi export export non userdefin group pk fix fix bug old workflow manag daemon improv effici old workflow manag fix jobcalcul text prepend multipl code v releas introduc lot signific chang enhanc work new backend aiida instal use sqlalchemi mani verdi command function test work backend full json support provid sqlalchemi latest version postgresql enabl signific speed increas attribut relat queri sqlalchemi backend choic beta option sinc last function command need implement improv backend script provid transit databas django backend sqlalchemi backend releas includ new queri tool call querybuild powerful tool allow user write complex graph queri explor aiida graph databas provid variou featur like select entiti properti filter result combin entiti specif properti well variou way obtain final result also provid user abstract way queri data without enforc write backend depend queri last least includ new workflow engin beta version avail verdi workflow command new workflow easier write close write python possibl seamless mix short run task long run remot task encourag user write reusabl workflow moreov debug workflow made easier possibl inid log list chang instal procedur work sqlalchemi backend sqlalchemi option still beta verdi command work sqlalchemi backend transit script django schema version sqlalchemi schema version aiida daemon redesign work backend django sqlalchemi introduc new workflow engin allow better debug easier write workflow avail verdi workflow command exampl also ad old workflow still support avail verdi workflow command introduc new queri tool call querybuild allow easili write complex graph queri execut aiida graph databas extens document also ad unifi behaviour verdi command backend up version plum need workflow implement valid input helper quantum espresso pwx improv document pw cp input plugin flag set node fix wrong behavior qe pwcp plugin check parser option check unknown flag set node howev solv yet complet problem see issu implement valid input helper quantum espresso pwx ad element z aiidacommonconst ad method set_kpoints_mesh_from_dens kpointsdata class improv increment backup document ad backup relat test ad option test_pwpi run also serial ssh transport connect remot comput via sshsftp support sge slurm schedul support quantum espresso carparrinello calcul support data node store electron band phonon dispers gener array defin brillouin zone v perform lot chang introduc one follow releas second objectrel mapper refer backend manag use dbmss specif postgresql sqlalchemi latest version postgresql allow aiida store json document directli databas also queri moreov json queri optim left databas includ also use json specif index major code restructur accommod new backend result abstract mani class orm packag aiida even need restructur code addit finish bit work need therefor even version django avail backend end user howev user updat aiida configur file execut migrat file found your_aiida_diraiidacommonadditionsmigrationpi linux user instal aiida system eg python your_aiida_diraiidacommonadditionsmigrationpi list chang backend select ad backend select sqlalchemi select disabl moment migrat script configur file aiida sqlalchemi support enrich link descript databas enrich proven model correct numpi array cell list use cell fix backend import verdi command load late possibl need backend abstract basic aiida orm class like node comput data etc need support differ backend eg django sqlalchemi fix structur import qeinput file sqlalchemi django benchmark ultrajson support requirementstxt also includ sqlalchemi depend recurs way load json sqlalchemi improv way access calcul workflow attach workflow step ad method programmat creat new code comput v gener final paper publish ref g pizzi cepellotti r sabatini n marzari b kozinski aiida autom interact infrastructur databas comput scienc comp mat sci core concret requir kept requirementstxt option move optional_requirementstxt schema chang v got rid calc_statesundetermin importexport backup code interact nonbackcompat support multipl code execut submiss script plugin interfac chang requir adapt code plugin ad import support xyz file ad support van der waal tabl qe input restart qe calcul avoid use scratch use copi parent calc ad databas import nninc pseudopotenti virtual vault implement convers pymatgen molecul list aiida trajectorydata ad convert pymatgen molecul aiida structuredata queri much faster export ad option export zip file ad backup script effici increment backup larg aiida repositori api ad possibl add kind django queri groupqueri ad tcod theoret crystallographi open databas import export ad option sort field queri tool implement select data node calcul group ad nwchem plugin chang default behaviour symbol link copi transport plugin putget method symbol link follow copi copi method symbol link follow copi schedul explicit torqu support slightli differ flag improv pbspro schedul ad new num_cores_per_machin num_cores_per_mpiproc field pb torqu schedul give full support mpiopenmp hybrid code direct schedul ad allow calcul run without batch system ie directli call execut verdi support profil ad allow user switch databas configur use verdi profil command ad verdi data structur import file filexyz import xyz ad verdi data upf exportfamili command export upf pseudopotenti famili folder ad new function verdi group command show list node add remov node command line allow verdi export command take group pk ad ase possibl format visual structur command line ad possibl export trajectori data xsf format ad possibl show trajectori data xcrysden ad filter group name verdi group list ad possibl load custom modul verdi shell addit properti verdishellmodul creat set verdi devel setproperti verdishellmodul ad verdi data array show command use json_dat serial display content arraydata ad verdi data trajectori deposit command line command ad command option comput code verdi data deposit ad command line option allus verdi data list list object own user img srchttpwwwaiidanetwpcontentuploadslogo_aiidapng altaiida width aiida wwwaiidanet workflow manag comput scienc strong focu proven perform extens latest releas pypi versionhttpsbadgefuryiopyaiidacoresvghttpsbadgefuryiopyaiidacor condaforgehttpsimgshieldsiocondavncondaforgeaiidacoresvgstyleflathttpsanacondaorgcondaforgeaiidacor pypi pyversionshttpsimgshieldsiopypipyversionsaiidacoresvghttpspypipythonorgpypiaiidacor get help doc statushttpsreadthedocsorgprojectsaiidacorebadgehttpaiidacorereadthedocsio googl grouphttpsimgshieldsiobadgegooglegrouplightgreysvghttpsgroupsgooglecomforumforumaiidaus build statu build statushttpsgithubcomaiidateamaiidacoreworkflowsaiidacorebadgesvghttpsgithubcomaiidateamaiidacoreact coverag statushttpscodecovioghaiidateamaiidacorebranchdevelopgraphbadgesvghttpscodecovioghaiidateamaiidacor activ pypidownloadshttpsimgshieldsiopypidmaiidacoresvgstyleflathttpspypistatsorgpackagesaiidacor commit activityhttpsimgshieldsiogithubcommitactivitymaiidateamaiidacoresvghttpsgithubcomaiidateamaiidacorepuls commun affili numfocushttpsimgshieldsiobadgenumfocusaffiliatedprojectorangesvgstyleflatcoloraedcolorbdahttpsnumfocusorgsponsoredprojectsaffiliatedproject twitterhttpsimgshieldsiotwitterfollowaiidateamsvgstylesociallabelfollowhttpstwittercomaiidateam featur workflow write complex autodocu workflow python link arbitrari execut local remot comput eventbas workflow engin support ten thousand process per hour full checkpoint data proven automat track input output metadata calcul proven graph full reproduc perform fast queri graph contain million node hpc interfac move calcul differ comput chang one line code aiida compat schedul like slurmhttpsslurmschedmdcom pb prohttpswwwpbsproorg torquehttpwwwadaptivecomputingcomproductstorqu sgehttpgridschedulersourceforgenet lsfhttpswwwibmcomsupportknowledgecenterssetdproduct_welcome_platform_lsfhtml box plugin interfac extend aiida pluginshttpsaiidateamgithubioaiidaregistri new simul code input gener pars data type schedul transport mode open scienc export subset proven graph share peer make avail onlin everyon materi cloudhttpswwwmaterialscloudorg open sourc aiida releas mit open sourc licenselicensetxt instal pleas see aiida documentationhttpsaiidacorereadthedocsioenlatest contribut pr welcomehttpsimgshieldsiobadgeprswelcomebrightgreensvgstyleflatsquarehttpmakeapullrequestcom github issu bylabelhttpsimgshieldsiogithubissuesaiidateamaiidacoregoodfirstissuehttpsgithubcomaiidateamaiidacoreissuesqisaissueisaopenlabelagoodfirstissu aiida team appreci help wide rang differ background small improv document minor bug fix alway welcom pleas see contributor wikihttpsgithubcomaiidateamaiidacorewiki get start frequent ask question experienc problem aiida instal pleas refer faq page documentationhttpsaiidacorereadthedocsioenlatesthowtofaqhtml cite use aiida research pleas consid cite follow public aiida p huber et al aiida scalabl comput infrastructur autom reproduc workflow data proven scientif data doi shttpsdoiorg aiida uhrin et al workflow aiida engin highthroughput eventbas engin robust modular comput workflow comput materi scienc doi jcommatscihttpsdoiorgjcommatsci aiida giovanni pizzi andrea cepellotti riccardo sabatini nicola marzariand bori kozinski aiida autom interact infrastructur databas comput scienc comput materi scienc doi jcommatscihttpsdoiorgjcommatsci licens aiida distribut mit open sourc licens see licensetxtlicensetxt list open sourc compon includ aiida see open_source_licensestxtopen_source_licensestxt acknowledg aiida numfocu affili projecthttpswwwnumfocusorg support marvel nation centr compet researchhttpwwwmarvelnccrch max european centr excellencehttpwwwmaxcentreeu number support project partner institut whose complet list avail aiida websit acknowledg pagehttpwwwaiidanetacknowledg contributor coven code conduct pledg interest foster open welcom environ contributor maintain pledg make particip project commun harassmentfre experi everyon regardless age bodi size disabl ethnic sex characterist gender ident express level experi educ socioeconom statu nation person appear race religion sexual ident orient standard exampl behavior contribut creat posit environ includ use welcom inclus languag respect differ viewpoint experi grace accept construct critic focus best commun show empathi toward commun member exampl unaccept behavior particip includ use sexual languag imageri unwelcom sexual attent advanc troll insultingderogatori comment person polit attack public privat harass publish other privat inform physic electron address without explicit permiss conduct could reason consid inappropri profession set respons project maintain respons clarifi standard accept behavior expect take appropri fair correct action respons instanc unaccept behavior project maintain right respons remov edit reject comment commit code wiki edit issu contribut align code conduct ban temporarili perman contributor behavior deem inappropri threaten offens harm scope code conduct appli within project space public space individu repres project commun exampl repres project commun includ use offici project email address post via offici social media account act appoint repres onlin offlin event represent project may defin clarifi project maintain enforc instanc abus harass otherwis unaccept behavior may report contact project team developersaiidanet complaint review investig result respons deem necessari appropri circumst project team oblig maintain confidenti regard report incid detail specif enforc polici may post separ project maintain follow enforc code conduct good faith may face temporari perman repercuss determin member project leadership attribut code conduct adapt contributor covenanthomepag version avail httpswwwcontributorcovenantorgversioncodeofconducthtml homepag httpswwwcontributorcovenantorg answer common question code conduct see httpswwwcontributorcovenantorgfaq molecul system integrationstress test folder contain configur run autom system integr test isol aiida environ utilis moleculehttpsmoleculereadthedocsio autom creationdestruct docker contain environ setup test within test current set stresstest aiida engin launch number workchain vari complex defin revers polish notationhttpsenwikipediaorgwikireverse_polish_not run test local simplest way run test use tox environ provid repositori pyprojecttoml file consol pip instal tox tox e moleculedjango note wan run molecul directli ensur set export molecule_globmoleculeconfig_localyml run test scenario defin config_localyml delet exist contain label creat docker contain base dockerfil folder also copi repositori code contain see create_dockeryml instal aiidacor see setup_pythonyml set aiida profil comput see setup_aiidayml set number workchain vari complexitydefin revers polish notationhttpsenwikipediaorgwikireverse_polish_not run see run_testsyml delet contain wish setup contain manual inspect ie run step run consol tox e moleculedjango converg jump contain run test step separ consol tox e moleculedjango valid final run step consol tox e moleculedjango destroy set aiida profil either django sqla even run parallel consol tox e moleculedjangomoleculesqla p test parallel addit variabl specifi number daemon worker spawn use aiida_test_work environ variabl consol aiida_test_work tox e moleculedjango readm requirementstxt file within directori defin python environ use continu integr test packag note instruct instal packag regular use pleas see document consist requir defin depend defin pyprojecttoml file check automat part continu integr workflow httpsgithubcomaiidateamaiidacorewikiaiidadependencymanag aiida configur file folder contain configur file aiida comput code etc slurm_rsa privat key provid access slurmssh contain name bug report report bug encount titl label typebug assigne rais issu suggest first check aiida troubleshoot documentationhttpsaiidareadthedocsioprojectsaiidacoreenlatestintrotroubleshootinghtml aiida user forumhttpsgroupsgooglecomforumforumaiidaus describ bug clear concis descript bug step reproduc step reproduc behavior go click scroll see error expect behavior clear concis descript expect happen environ oper system eg linux python version eg aiidacor version eg relev softwar version eg postr rabbitmq addit context add context problem name document improv suggest improv document titl doc label topicdocument assigne describ current issu clear concis descript problem eg section unclear cant find inform describ solut youd like clear concis descript would like see happen name featur request suggest new improv featur titl label typefeatur request assigne suggest featur suggest also check httpsgithubcomaiidateamaep featur request relat problem pleas describ clear concis descript problem eg im alway frustrat describ solut youd like clear concis descript want happen describ altern youv consid clear concis descript altern solut featur youv consid addit context add context screenshot featur request folder contain test must run directli github action contain environ usual requir activ daemon specif environ requir sphinxaiida broken demo test configur broken aiida workchain aiidaworkchain brokendemoworkchain modul broken_demo_workchain sphinxaiida demo demo document show featur sphinxaiida extens toctre maxdepth caption content aiidaworkchain demoworkchain modul demo_workchain want hide input store node databas use hideunstoredinput option aiidaworkchain demoworkchain modul demo_workchain hidenondbinput namespac set expand default use expandnamespac option aiidaworkchain demoworkchain modul demo_workchain expandnamespac follow workchain check direct work also outlin specifi aiidaworkchain emptyoutlineworkchain modul demo_workchain command also hook sphinxextautodoc aiida process properli document use automodul well automodul demo_workchain member orphan oh oh could find page pleas tri use link sidebar find look believ document page link redirect suitabl page would grate could inform aiida develop open issu github click open issu httpsgithubcomaiidateamaiidacoreissuesnewassigneeslabelstopicfdocumentationtemplatedocimprovementsmdtitledocsa__ imag imageslogo_aiida_docspng align center width px orphan extern link redirect page longer exist document see list potenti link may search git cheat sheet move httpsgithubcomaiidateamaiidacorewikigitcheatsheet sphinx cheat sheet origin document found v document httpsaiidareadthedocsioprojectsaiidacoreenvdeveloper_guidetoolssphinx_cheatsheethtml_ see offici sphinx document httpwwwsphinxdocorgenmaster_ quantum espresso exampl move httpsaiidaquantumespressoreadthedocsio welcom aiida document aiidacor version releas aiida_ opensourc python infrastructur help research autom manag persist share reproduc complex workflow associ modern comput scienc associ data see reffeaturesintroabout panel bodi bglight textcent footer bglight border farocketmr get start aiida instal configur troubleshoot linkbutton introget_start type ref text instal guid class btnoutlineprimari btnblock stretchedlink fainfocirclemr tutori first time user get feet wet aiida basic linkbutton introtutori type ref text tutori class btnoutlineprimari btnblock stretchedlink faquestioncirclemr howto guid learn use aiida power work linkbutton howtoindex type ref text howto guid class btnoutlineprimari btnblock stretchedlink fabookmarkmr topic background inform aiida underli concept linkbutton topicsindex type ref text topic class btnoutlineprimari btnblock stretchedlink facogsmr api refer comprehens document aiida compon commandlin interfac python interfac rest api linkbutton referenceindex type ref text refer guid class btnoutlineprimari btnblock stretchedlink fasitemapmr intern architectur note aiida design architectur aim core develop linkbutton internalsindex type ref text architectur guid class btnoutlineprimari btnblock stretchedlink admonit develop contribut class titleiconcodefork saw typo document want improv code help alway welcom get start contribut guidelin httpsgithubcomaiidateamaiidacorewiki__ toctre maxdepth hidden introindex howtoindex topicsindex referenceindex internalsindex cite use aiida research pleas cite follow work highlight aiida sebastiaan p huber spyro zoupano martin uhrin leopold talirz leonid kahl rico huselmann dominik gresch tiziano mller aliaksandr v yakutovich casper w andersen francisco f ramirez carl adorf fernando gargiulo snehal kumbhar elsa passaro conrad johnston andriu merki andrea cepellotti nicola mounet nicola marzari bori kozinski giovanni pizzi aiida scalabl comput infrastructur autom reproduc workflow data proven scientif data doi httpsdoiorgs_ highlight aiida martin uhrin sebastiaan p huber jusong yu nicola marzari giovanni pizzi workflow aiida engin highthroughput eventbas engin robust modular comput workflow comput materi scienc doi jcommatsci httpsdoiorgjcommatsci_ highlight aiida giovanni pizzi andrea cepellotti riccardo sabatini nicola marzari bori kozinski aiida autom interact infrastructur databas comput scienc comput materi scienc doi jcommatsci httpsdoiorgjcommatsci_ acknowledg aiida support marvel nation centr compet research_ max european centr excellence_ number support project partner institut whose complet list avail aiida websit acknowledg page_ aiida numfocu affili project visit numfocusorg_ inform _aiida httpwwwaiidanet _marvel nation centr compet research httpwwwmarvelnccrch _max european centr excel httpwwwmaxcentreeu _aiida websit acknowledg page httpwwwaiidanetacknowledg _numfocusorg httpswwwnumfocusorg plugin develop toctre maxdepth pluginsbas pluginsquickstart pluginsentry_point pluginsdocu pluginsplugin_test pluginspublish core develop toctre maxdepth coreintern coretransport coreextend_restapi corecach coreplugin_system designchang aiida intern node node aiida proven graph inherit pyclassaiidaormnodesnodenod class among pyclassaiidaormnodesdatadatadata class pyclassaiidaormnodesprocessprocessprocessnod class repres comput transform data pyclassaiidaormnodesdatacodecod class repres execut file collect use calcul immut concept node store inform attribut sinc aiida guarante certain level proven attribut becom immut soon node store mean soon node store attempt alter attribut chang valu delet altogeth shall met rais except certain subclass node need adapt behavior howev exampl case pyclassaiidaormnodesprocessprocessprocessnod class see calcul updat attributes_ sinc immut store node core concept aiida behavior nonetheless enforc node level guarante subclass node class respect behavior unless explicitli overriden entiti method pymethaiidaormimplementationutilsclean_valu take valu return object serial storag databas object must abl subsequ deseri without chang valu simpl datatyp pass integ float etc check perform see valu nan inf store otherwis list tupl dictionari etc pass check perform valu contain done recurs automat handl case nest object import note iter type object convert list process map convert normal dictionari effici reason clean attribut valu delay last moment possibl mean unstor entiti new attribut clean simpli set cach underli databas model entiti store attribut clean one fell swoop success valu flush databas entiti store longer cach attribut valu clean straight away call mechan hold clean valu extra node method properti follow section import method properti pyclassaiidaormnodesnodenod class describ node subclass organ pyclassaiidaormnodesnodenod class two import attribut pyattraiidaormnodesnodenode_plugin_type_str character class object pyattraiidaormnodesnodenode_query_type_str character class subclass point packag python file contain class convent pyclassaiidaormnodesnodenod subclass class b inherit class packag aiidaorm file __init__pi bpi directori b packag correspond __init__pi exampl pyclassaiidaormnodesdataarrayarraydata pyclassaiidaormnodesdataarraykpointskpointsdata pyclassaiidaormnodesdataarrayarraydata place aiidaormdataarray__init__pi pyclassaiidaormnodesdataarraykpointskpointsdata inherit pyclassaiidaormnodesdataarrayarraydata place aiidaormdataarraykpointspi implicit quick way check inherit pyclassaiidaormnodesnodenod subclass gener purpos method pymethaiidaormnodesnodenode__init__ construct new unstor node note use load exist node databas pymethaiidaormnodesnodenodectim pymethaiidaormnodesnodenodemtim provid creation modif time node pymethaiidaormnodesnodenodecomput return comput associ node pymethaiidaormnodesnodenode_valid valid check node import pyclassaiidaormnodesnodenod subclass variou attribut check consist store pymethaiidaormnodesnodenodeus return user creat node pymethaiidaormnodesnodenodeuuid return univers uniqu identifi uuid node annot method pyclassaiidaormnodesnodenod annot label descript comment follow method use manag properti label manag pyattraiidaormnodesnodenodelabel return label node also use chang label eg mynodelabel new label descript manag pyattraiidaormnodesnodenodedescript return descript node detail label also use chang descript eg mynodedescript new descript comment manag pymethaiidaormnodesnodenodeadd_com add comment pymethaiidaormnodesnodenodeget_com return sort list comment pymethaiidaormnodesnodenodeupdate_com updat node comment also access cli verdi comment updat pymethaiidaormnodesnodenoderemove_com remov node comment also access cli verdi comment remov link manag method pyclassaiidaormnodesnodenod object object subclass ancestor descend connect link follow method exist manag link pymethaiidaormnodesnodenodehas_cached_link show cach link node pymethaiidaormnodesnodenodeadd_incom add link current node src node given link label link type depend whether node store link written databas cach pymethaiidaormnodesnodenodeget_incom return iter input node method get output data pymethaiidaormnodesnodenodeget_outgo return iter output node list link exampl assum user want see avail link node order understand structur graph mayb travers follow exampl load specif node list incom outgo link c load_nod let load node specif pk cget_incomingal linktriplelink_typeinputlink labelcod nodecod remot code cp daint pk uuid ccdbfcdaebdddaaa linktriplelink_typeinputlink labelparamet nodedict uuid efeffeeaafeafbaa pk linktriplelink_typeinputlink labelparent_calc_fold noderemotedata uuid becbccbfeaceff pk linktriplelink_typeinputlink labelpseudo_ba nodeupfdata uuid ebddbbefbacbc pk linktriplelink_typeinputlink labelpseudo_o nodeupfdata uuid cccddcbcaaf pk linktriplelink_typeinputlink labelpseudo_ti nodeupfdata uuid efcfbba pk linktriplelink_typeinputlink labelset nodedict uuid aabfdddbedd pk linktriplelink_typeinputlink labelstructur nodestructuredata uuid fcccbaceb pk cget_outgoingal linktriplelink_typecreatelink labeloutput_paramet nodedict uuid facafaafff pk linktriplelink_typecreatelink labeloutput_parameters_ nodedict uuid facafaafff pk linktriplelink_typecreatelink labeloutput_trajectori nodetrajectorydata uuid cbbcbbbaceacfc pk linktriplelink_typecreatelink labeloutput_trajectory_ nodetrajectorydata uuid cbbcbbbaceacfc pk linktriplelink_typecreatelink labelremote_fold noderemotedata uuid accacefbddcebeaa pk linktriplelink_typecreatelink labelremote_folder_ noderemotedata uuid accacefbddcebeaa pk linktriplelink_typecreatelink labelretriev nodefolderdata uuid adcddbdff pk linktriplelink_typecreatelink labelretrieved_ nodefolderdata uuid adcddbdff pk pymethaiidaormnodesnodenodeget_incom pymethaiidaormnodesnodenodeget_outgo method return manag object contain collect incom outgo link target node collect consist neighbor node match queri neighbor defin node link label link type set three properti refer link tripl implement pyclassaiidaormutilslinkslinktripl name tupl variou method link manag link tripl return attribut relat method pymethaiidaormnodesnodenod object attribut properti character node properti energi atom symbol lattic vector follow method use manag attribut pymethaiidaormnodesnodenodeset_attribut pymethaiidaormnodesnodenodeset_attribute_mani add one mani new attribut node key attribut properti name eg energi lattice_vector etc valu attribut valu properti pymethaiidaormnodesnodenodereset_attribut replac exist attribut new set attribut pymethaiidaormnodesnodenodeattribut properti return attribut pymethaiidaormnodesnodenodeget_attribut pymethaiidaormnodesnodenodeget_attribute_mani use return singl mani specif attribut pymethaiidaormnodesnodenodedelete_attribut pymethaiidaormnodesnodenodedelete_attribute_mani delet one multipl specif attribut pymethaiidaormnodesnodenodeclear_attribut delet exist attribut extra relat method extra addit inform ad node contrast repositori file attribut extra inform ad user immut even node store pymethaiidaormnodesnodenodeset_extra pymethaiidaormnodesnodenodeset_extra_mani add one mani new extra node key extra properti name eg energi lattice_vector etc valu extra valu properti pymethaiidaormnodesnodenodereset_extra replac exist extra new set extra pymethaiidaormnodesnodenodeextra properti return extra pymethaiidaormnodesnodenodeget_extra pymethaiidaormnodesnodenodeget_extra_mani use return singl mani specif extra pymethaiidaormnodesnodenodedelete_extra pymethaiidaormnodesnodenodedelete_extra_mani delet one multipl specif extra pymethaiidaormnodesnodenodeclear_extra delet exist extra folder manag folder object repres directori disk virtual extra inform node store folder temporari perman store delet pymethaiidaormnodesnodenodestore_al store input node store current node end store cach input link pymethaiidaormnodesnodenodeverify_are_parents_stor check parent store pymethaiidaormnodesnodenodestor method check node data valid check node parent store move content temporari folder repositori folder end store databas inform cach latter happen databas transact case transact fail data transfer repositori folder move back temporari folder folder aiida use pyclassaiidacommonfoldersfold subclass add abstract layer function method work directli filesystem aiida particularli use want easili chang differ folder option temporari perman etc storag option plain local directori compress file remot file directori etc pyclassaiidacommonfoldersfold main class avail folder class apart abstract provid os oper need aiida one main featur restrict avail oper within given folder limit avail method pymethaiidacommonfoldersfoldermode_dir pymethaiidacommonfoldersfoldermode_fil return mode folder file writabl pymethaiidacommonfoldersfolderget_subfold return subfold match given name pymethaiidacommonfoldersfolderget_content_list return content match pattern pymethaiidacommonfoldersfolderinsert_path add filefold specif locat pymethaiidacommonfoldersfolderremove_path remov filefold pymethaiidacommonfoldersfolderget_abs_path return absolut path filefold given folder pymethaiidacommonfoldersfolderabspath return absolut path folder pymethaiidacommonfoldersfoldercreate_symlink creat symlink point given locat insid folder pymethaiidacommonfoldersfoldercreate_file_from_filelik creat file given content pymethaiidacommonfoldersfolderopen open file folder pymethaiidacommonfoldersfolderfolder_limit return limit creation filesfold restrain pymethaiidacommonfoldersfolderexist return true fals depend whether folder exist pymethaiidacommonfoldersfolderisfil pymethaiidacommonfoldersfolderisdir return true fals depend exist given filefold pymethaiidacommonfoldersfoldercr creat folder pymethaiidacommonfoldersfoldereras delet folder pymethaiidacommonfoldersfolderreplace_with_fold copiesmov given folder pyclassaiidacommonfolderssandboxfold pyclassaiidacommonfolderssandboxfold object correspond temporari sandbox folder main method pymethaiidacommonfolderssandboxfolder__init__ creat new temporari folder pymethaiidacommonfolderssandboxfolder__exit__ destroy folder exit data navig input output pymethaiidaormnodesdatadatacr return either pyclassaiidaormnodesprocesscalculationcalculationnod creat none creat calcul processnod navig input output pymethaiidaormnodesprocessprocessnodecal return either caller pyclassaiidaormnodesprocessworkflowworkflownod none call process calculationnod navig input output pymethaiidaormnodesprocesscalculationcalculationnodeinput return pymethaiidaormutilsmanagersnodelinksmanag object use access node incom input_calc link nodelinksmanag use quickli go node neighbor node exampl let load node specif pk c load_nod c cpcalcul uuid dcfcbcfecc pk let travers input node type cinputstab get input link cinput cinputscod cinputsparent_calc_fold cinputspseudo_o cinputsset cinputsparamet cinputspseudo_ba cinputspseudo_ti cinputsstructur may follow link access node exampl let follow parent_calc_fold cinputsparent_calc_fold remotedata uuid becbccbfeaceff pk let assign r node reach parent_calc_fold link r cinputsparent_calc_fold rinputs__dir__ __class__ __delattr__ __dict__ __dir__ __doc__ __format__ __getattr__ __getattribute__ __getitem__ __hash__ __init__ __iter__ __module__ __new__ __reduce__ __reduce_ex__ __repr__ __setattr__ __sizeof__ __str__ __subclasshook__ __weakref__ remote_fold input manag workflownod output manag calculationnod workflownod work way see pymethaiidaormnodesprocesscalculationcalculationnodeoutput return pymethaiidaormutilsmanagersnodelinksmanag object use access node outgo creat link _calcul updat attribut updat attribut pyclassaiidaormnodesprocessprocessnod class subclass pyclassaiidaormnodesnodenod class mean attribut becom immut store howev calcul runnabl need store would mean state store attribut longer updat solv issu pyclassaiidaormutilsmixinsseal mixin introduc mixin use subclass node need updat attribut even node store databas mixin defin _updatable_attribut tupl defin attribut consid mutabl even node store also allow node seal even updat attribut becom immut workflownod navig input output pymethaiidaormnodesprocessworkflowworkflownodeinput return pymethaiidaormutilsmanagersnodelinksmanag object use access node incom input_work link pymethaiidaormnodesprocessworkflowworkflownodeoutput return pymethaiidaormutilsmanagersnodelinksmanag object use access node outgo return link deprec featur renam ad new method case method renam remov procedur follow want renam move code new function name docstr add someth like versionad renam oldmethodnam dont remov directli old function chang code use new function add docstr deprec use methnewmethodnam instead moreov begin function add someth like import warn call deprecationwarn pycharm properli strike function aiidacommonwarn import aiidadeprecationwarn deprecationwarn pylint disableredefinedbuiltin warningswarndeprec warn make specif deprec shown per differ messag deprecationwarn rest function cours replac part symbol correct string advantag method pycharm still show method cross aiidadeprecationwarn inherit deprecationwarn hidden python user disabl warn use aiida properti verdi config set warningsshowdeprec fals chang configjson structur gener chang configjson avoid possibl howev need modifi follow procedur use creat migrat determin whether chang backwardscompat mean older version aiida still abl run new configjson structur goe without say prefer chang configjson backwardscompat way aiidamanageconfigurationmigrationsmigrationspi increas current_config_vers one chang backwardscompat set oldest_compatible_config_vers valu write function transform old config dict new version possibl need user input migrat case also handl function add entri _migration_lookup key version migrat valu configmigr object configmigr construct migrat function hardcod valu current_config_vers oldest_compatible_config_vers valu hardcod migrat break soon valu chang add test migrat aiidabackendstestsmanageconfigurationmigrationstest_migrationspi add two type test test run entir migrat use check_and_migrate_config function make sure run storefals otherwis overwrit configjson file test updat refer file test run singl step migrat use configmigrationappli method use need test differ edg case migrat exampl type test daemon signal handl aiida daemon run interrupt signal sigint sigterm captur daemon shut grace implement use python signal modul shown follow dummi exampl code python import signal def print_fooarg printfoo signalsignalsignalsigint print_foo awar develop code run daemon particular import creat subprocess signal sent whole process group receiv signal result subprocess kill even though python main process captur signal avoid creat new process group subprocess mean receiv signal need pass start_new_sessiontru subprocess function code python import os import subprocess printsubprocesscheck_outputsleep echo bar start_new_sessiontru design evolut document record evolut design architectur aiida includ underli reason version _design_changes____provenance_redesign proven redesign earli stage aiida concept proven graph simpl data use input calcul turn creat new data output data calcul produc ran aiida store node graph due causal principl result graph natur acycl piec data could possibl also input creation direct acycl graph store data proven aiida well defin good howev aiida matur use case becam complex soon need abl defin run workflow workflow allow user defin sequenc calcul ultim produc result order abl retriev final result directli workflow need abl return data creat calcul ran easi peasi simpli add return link workflow node graph creat data node seem like easi solut brought host unforeseen problem introduc concept return link acycl graph broken much aiida graph travers api assum properti year discuss aiida develop user conclud concept return link absolut crucial without result complic heavili nest workflow buri deep within call stack difficult retriev altern redesign proven graph architectur acycl would return part proven graph keep util return link aiida develop team close collabor advanc user spent year half redesign proven architectur implement chang aiida api alway tri best allow earli adopt aiida migrat exist databas newer version easi possibl provid automat migrat time around differ except fact migrat lot complic unfortun time backwardsincompat chang introduc api detail explan new proven design motiv found refher topicsproven _design_changes____calcjob_redesign calcul job redesign calcul job one use import compon aiida repres calcul submit schedul often remot cluster earliest concept class implement featur jobcalcul fulfil two major distinct task one side provid mean user specifi input calcul requir actual input file construct file retriev complet addit sinc sub class node class also function record proven graph actual calcul execut doubl role lead problem node class becom complic well inconsist exampl instanc repres alreadi complet calcul would also still method run problem solv introduct workchain aiidacor version like jobcalcul workchain process take certain input perform oper order produc output howev unlik jobcalcul workchain class concern knowledg process run repres execut workchain proven graph differ class use name workchainnod separ respons lead two entiti clearer interfac behavior quit version old new way defin run process kept function alongsid one anoth slowli old way adapt use new mechan aiidacor version fulli deprec old way calcul use processnod dualiti result jobcalcul class disappear instead calcjobnod creat proven graph repres execut calcul schedul moreov implement plugin calcul job one subclass process subclass calcjob whose interfac workchain input output potenti exit code simpli implement defin class method would workchain unlik workchain howev calcjob outlin instead singl method implement name prepare_for_submiss method take singl argument folder point temporari folder requir input file calcul written plugin develop standpoint rest work exactli prepare_for_submiss method return calcinfo object contain inform engin file copi retriev detail explan new calcjob best practic write parser implement found refher topicscalculationsusagecalcjob _design_changes____module_hierarchi modul hierarchi import aiida develop use sinc past six year tri much possibl reduc chang python api time minimum time lot new function ad code potenti complex submodul structur aiida python packag start becom complex even rememb find given function class aiidacor version decid restructur packag modul hierarchi move function class intuit locat expos function commonli use user higher level eg one aiidaorm import calcjobnod addit aiidaormnodesprocesscalculationcalcjob import calcjobnod albeit chang essenti increas usabl want guarante highdegre stabil user compon intend public faciliti explain first modul hierarchi aiidacor part api intend public preferenti import first level packag hierarchi aiida modul contain mani packag within orm engin refer secondlevel packag much deeper hierarchi within sinc intern structur mostli simplifi develop organiz purpos compon aiida packag usabl expos secondlevel packag practic mean anyth intend use import secondlevel packag exampl aiidaengin import workchain calcfunct aiidaorm import load_nod calcjobnod definit public compon aiidacor packag place maintain standard deprec polici minim amount break chang plugin user particular strive chang api public compon much possibl forc chang anyway deprec signifc amount time advanc backward incompat chang increas major version better clariti refcur list class functionsreferenceapipubl expos second level intend public polici enforc version plugin system plugin system design follow goal mind share calcul workflow data type plugin bundl python packag distribut zip sourc archiv python egg pypi packag extens document avail distribut python packag httpspackagingpythonorgenlatest_ eas use plugin list aiida plugin registri registry_ instal one simpl command process familiar everi regular python user decoupl develop updat cycl aiida plugin sinc plugin separ python packag develop separ code repositori updat develop see fit without need updat aiida similarli aiida updat plugin may need releas new version promot modular design aiida develop separ plugin python packag ensur plugin easili access part aiida code part public api enabl aiida develop stay agil appli plugin reli plugin low overhead develop plugin develop write extens way would write python code meant distribut automat aiida setup test plugin instal complet python environ consist mani packag autom provid packag use setuptool distribut tool enabl use aiida servicebas way use eg docker imag becom possibl creat autom test combin plugin long plugin provid test entri point chosen approach plugin limit interfac entri point object enforc implicitli way object use respons plugin develop test complianc especi object deriv recommend base class provid aiida clearli commun document plugin develop freedom plugin develop name renam class end inform question store databas eg node attribut system design possibl plugin version mind howev implement yet principl two differ plugin give name entri point creat ambigu tri load associ object plugin develop guidelin document advis avoid problem address via use central registri known aiida plugin plugin potenti contain malici otherwis danger code registri aiida plugin tri flag plugin know safe use _introget_startedsystemwideinstal systemwid instal systemwid instal instal prerequisit servic postgresql rabbitmq via standard packag manag startup shutdown larg manag oper system aiida core python packag instal either conda pip recommend instal method setup aiida person laptop workstat major user panel contain containerlg pb column collg p instal prerequisit servic aiida design run unix httpsenwikipediaorgwikiunix_ oper system requir bash httpsenwikipediaorgwikibash_unix_shell_ zsh httpsenwikipediaorgwikiz_shell_ shell python tab ubuntu aiida test ubuntu version open termin execut codeblock consol sudo apt instal git pythondev pythonpip postgresql postgresqlserverdeval postgresqlcli rabbitmqserv tab maco x homebrew recommend instal method mac os x use homebrew httpsbrewsh__ follow guid httpsdocsbrewshinstallation__ instal homebrew system instal yet open termin execut codeblock consol brew instal postgresql rabbitmq git python brew servic start postgresql brew servic start rabbitmq tab window subsystem linux follow instruct set aiida wsl combin ubuntu instal rabbitmq wsl instal start window nativ rabbitmq httpswwwrabbitmqcominstallwindowshtml_ wsl instal rabbitmq insid wsl codeblock consol sudo apt instal rabbitmqserv start rabbitmq server codeblock consol sudo servic rabbitmqserv start instal python postgresql codeblock consol sudo apt instal postgresql postgresqlserverdeval postgresqlcli git pythondev pythonpip start postgresql server codeblock consol sudo servic postgresql start dropdown setup wsl automat start servic system boot creat file start_aiida_servicessh contain follow line codeblock consol servic postgresql start servic rabbitmqserv start wsl store prefer locat eg home directori make file execut edit root user codeblock consol chmod axgow pathtostart_aiida_servicessh sudo chown rootroot pathtostart_aiida_servicessh next run codeblock consol sudo visudo add line codeblock sh usernam allroot nopasswd pathtostart_aiida_servicessh replac usernam ubuntu usernam allow run specif sh file root access without password without lower secur rest system use window task schedul automat execut file startup open task schedul action menu click creat task generalsecur option select run whether user log trigger tab click new begin task dropdown select startup click ok confirm action tab click new action dropdown select start program programscript text field add cwindowssystembashex add argument option text field add c sudo pathtostart_aiida_servicessh click ok confirm click ok confirm task tweak detail task fit need tab instal rabbitmq follow instruct applic system httpswwwrabbitmqcomdownloadhtml__ instal postgresql follow instruct applic system httpswwwpostgresqlorgdownload__ tip altern use refpur conda instal method introget_startedcondainstal instal aiida core tab pip venv instal aiidacor packag pypi virtual environ open termin execut codeblock consol python venv envsaiida sourc envsaiidabinactiv aiida pip instal aiidacor import make sure python execut python version support aiida see version use codeblock consol python version find support python version latest version aiida pypi page httpspypiorgprojectaiidacore__ tip see venv document httpsdocspythonorglibraryvenvhtml__ activ command fail exact command activ virtual environ differ slightli base use shell dropdown fapluscircl instal extra addit option packag may want instal group follow categori atomic_tool packag allow import manipul crystal structur variou format ssh_kerbero add support ssh transport authent kerbero rest allow rest server ran local serv aiida data doc tool build document notebook jupyt notebook allow import aiida modul test python modul requir run automat unit test precommit precommit tool requir develop enabl automat code lint format order instal packag group simpli append comma separ list pip instal command exampl codeblock consol aiida pip instal aiidacoreatomic_toolsdoc dropdown fawrench kerbero ubuntu instal option ssh_kerbero ubuntu might encount error relat gss packag fix need instal libffidev libkrbdev packag codeblock consol sudo aptget instal libffidev libkrbdev tab conda instal aiidacor packag conda environ make sure conda instal eg follow instruct instal miniconda httpsdocscondaioenlatestminicondahtml__ open termin execut codeblock consol conda creat yn aiida c condaforg aiidacor conda activ aiida tab sourc instal aiidacor packag directli clone repositori open termin execut codeblock consol git clone httpsgithubcomaiidateamaiidacoregit cd aiidacor python venv envsaiida sourc envsaiidabinactiv aiida pip instal setup profil next set aiida configur profil relat data storag verdi quicksetup command codeblock consol aiida verdi quicksetup info enter help info enter ignor default set valu profil name email address share data meusercom first name last name name institut whereiwork admonit aiida unabl autodetect postgresql setup class attent titleicontroubleshoot get error say aiida troubl autodetect postgresql setup need manual setup explain reftroubleshoot sectionintrotroubleshootinginstallationpostgresqlautodetectissu start verdi daemon start verdi daemon use run aiida workflow codeblock consol aiida verdi daemon start import verdi daemon must restart system reboot tip start daemon physic processor system check setup check everyth set correctli execut codeblock consol aiida verdi statu config dir homeubuntuaiida profil profil repositori homeubuntuaiidarepositorym postgr connect aiida_qs_ubuntu_cafdfbecdbdcdcfclocalhost rabbitmq connect amqpheartbeat daemon daemon run pid sinc point work aiida environ add retriev data admonit miss checkmark encount issu class attent titleicontroubleshoot refse troubleshoot section introtroubleshoot linkbutton introget_startednext type ref text what next class btnoutlineprimari btnblock fontweightbold _introget_start get start aiida instal consist three core compon plu extern code wish run aiidacor main python packag associ verdi command line interfac postgresql servic manag databas aiida use store data rabbitmq messag broker use commun within aiida toctre maxdepth hidden install_system install_conda run_dock _introinstallsetup _introget_startedsetup setup multipl rout set work aiida environ optim depend environ use case unsur use refsystemwid instal introget_startedsystemwideinstal method panel bodi bglight footer bglight border fadesktopmr systemwid instal linkbutton introget_startedsystemwideinstal type ref text instal softwar directli workstat laptop class stretchedlink btnlink instal prerequisit servic use standard packag manag apt homebrew etc administr privileg fafoldermr instal conda environ linkbutton introget_startedcondainstal type ref text instal softwar isol conda environ class stretchedlink btnlink method requir administr privileg involv manual manag startup shutdown servic facubemr run via docker contain linkbutton introget_starteddock type ref text run aiida prerequisit servic singl docker contain class stretchedlink btnlink requir separ instal prerequisit servic especi wellsuit get directli start tutori facloudmr run via virtual machin linkbutton httpsquantummobilereadthedocsio text use virtual machin requir softwar preinstal class stretchedlink btnlink materi cloud httpswwwmaterialscloudorg__ provid download web base vm also incorpor preinstal materi scienc code _introget_startednext what next success complet one outlin setup rout new aiida recom go refbas tutori tutorialbas see refnext step guid tutorialnextstep howev encount issu proceed reftroubleshoot section introtroubleshoot admonit indepth instruct class seealso titleiconreadmor detail instruct configur aiida refse configur howto howtoinstallationconfigur postgresql replac postgresql httpswwwpostgresqlorg__ rabbitmq replac rabbitmq httpswwwrabbitmqcom__ homebrew replac homebrew httpsbrewsh__ _introget_starteddock _introinstalldock run aiida via docker imag aiida team maintain docker httpswwwdockercom__ imag docker hub httpshubdockercomraiidateamaiidacore__ imag contain fulli preconfigur aiida environ make particularli use learn test purpos caution data store contain persist lifetim particular contain unless use volum see instruct panel contain containerlg pb column collg p start contain first pull imag parsedliter docker pull aiidateamaiidacor releas start contain parsedliter docker run name aiidacontain aiidateamaiidacor releas use follow command block servic start codeblock consol docker exec aiidacontain waitforservic check setup default profil creat aiida user execut command must add user aiida option exampl check verdi statu execut codeblock consol docker exec user aiida aiidacontain binbash l c verdi statu config dir homeaiidaaiida profil profil default repositori homeaiidaaiidarepositorydefault postgr connect aiida_qs_aiida_ddfcacbaeflocalhost rabbitmq connect amqpheartbeat daemon daemon run pid sinc use contain interact enter contain run command directli shell use codeblock consol docker exec user aiida aiidacontain binbash drop shell within contain user aiida persist data across differ contain stop contain start data creat persist codeblock consol docker stop aiidacontain docker start aiidacontain howev remov contain data remov well codeblock consol docker stop aiidacontain docker rm aiidacontain prefer way persist store data creat volum httpsdocsdockercomstoragevolumes__ creat simpl volum run codeblock consol docker volum creat mydata make sure mount volum run aiida contain parsedliter docker run name aiidacontain mount sourcemydatatargettmpmy_data aiidateamaiidacor releas start contain command ensur data store tmpmy_data path within contain store mydata volum therefor persist even contain remov linkbutton introget_startednext type ref text what next class btnoutlineprimari btnblock fontweightbold _introtroubleshoot troubleshoot experi problem first check servic run codeblock consol verdi statu profil profil django repositori repoaiida_devdjango postgr connect aiidalocalhost rabbitmq connect amqpheartbeat daemon daemon run pid sinc exampl output servic green check mark run expect servic run still experienc problem troubl instal aiidacor relat servic consid commonli encount problem _introtroubleshootinginstal instal issu numpi depend clean ubuntu instal pip instal command pip instal e aiidacor may fail due problem depend numpi packag case may present messag like follow codeblock python numpydistutilsmisc_util import get_numpy_include_dir importerror modul name numpydistutilsmisc_util fix simpli instal numpi individu pip virtual env ie codeblock consol pip instal numpi follow execut origin instal command codeblock consol pip instal e aiidacor fix depend error databas instal locat instal fail instal packag relat databas may instal set databas librari particular mac os x instal binari packag postgresql possibl path environ variabl set correctli get error pg_config execut found error case discov binari locat add line bashrc file similar follow codeblock bash export paththepathtothepg_configfilepath open new bash shell possibl path found stackoverflow link_ nonexhaust list possibl path follow version number may chang applicationspostgresappcontentsmacosbin applicationspostgresappcontentsversionsbin librarypostgresqlbinpg_config similarli packag instal error occur first aiida symbol found error similar may need point path dynam librari way add line similar follow bashrc open new shell codeblock bash export dyld_fallback_library_pathlibrarypostgresqllibdyld_fallback_library_path cours adapt path postgresql librari _stackoverflow link httpstackoverflowcomquestionshowtofindpgconfigpathlink _introtroubleshootinginstallationpostgresqlautodetectissu autodetect postgresql setup sometim aiida fail autodetect local configur postgresql run verdi quicksetup case tri creat databas manual postgresql see refhereintroinstalldatabas run full verdi setup command see refhereintroinstallverdi_setup rabbitmq instal unix verdi statu rabbitmq connect first check rabbitmq actual run codeblock consol sudo rabbitmqctl statu statu node rabbitphtsm pid listenersclusteringamqphttp default aiida profil configur connect rabbitmq via amqpguestguest henc port open connect linux mac osx also check port pid open use codeblock consol sudo lsof pan p command pid user fd type devic sizeoff node name beamsmp user u ipv xddcda tcp listen beamsmp user u ipv xddc tcp establish beamsmp user u ipv xddcea tcp listen beamsmp user u ipv xddca tcp listen connect found tri start rabbitmqserv nondetach mode encount output similar may version rabbitmq erlang program languag rabbitmq written incompat codeblock consol rabbitmqserv boot fail error descript noproc stack trace error descript noproc init termin do_bootnoproc init termin do_boot noproc crash dump written erl_crashdumpdon check version erlang use codeblock consol erl eval ok version fileread_filefilenamejoincoderoot_dir releas erlangsystem_infootp_releas otp_vers iofwritevers halt noshel version rabbitmqserv codeblock consol rabbitmqctl version see rabbitmq erlang version requir httpswwwrabbitmqcomwhicherlanghtml__ check compat reinstal appropri see also rabbitmq troubleshoot httpswwwrabbitmqcomtroubleshootinghtml__ inform ensur utf local reason machin notabl often mac os x default local defin run verdi setup first time fail see also issue_ django run termin mayb even better add bashrc rememb open new shell window codeblock bash export langen_usutf export lc_allen_usutf run verdi setup _thi issu httpscodedjangoprojectcomticket possibl ubuntu depend sever user report need instal also libpqdev header file libpq postgresql librari codeblock consol aptget instal libpqdev ubuntu need verdi path instal aiidacor python packag add verdi cli path automat verdi execut avail termin folder pip place binari may ad path linux system folder usual someth like localbin codeblock bash export pathlocalbinpath mac os x system path add usual librarypythonbin codeblock bash export pathlibrarypythonbinpath updat path verdi command avail note preprequisit verdi work aiida python packag import test open python ipython shell type codeblock python import aiida get importerror environ aiida instal add pythonpath manual codeblock bash export pythonpathpythonpathaiida_fold configur remot ssh comput ssh_kerbero instal instal ssh_kerbero option requir anaconda may encount follow error ubuntu machin codeblock consol version gfortran_ found requir usrliblibblasso relat open issu anaconda continuumioanacondaissues_ potenti solut run follow command codeblock consol export ld_preloadusrlibx_linuxgnulibgfortranso _continuumioanacondaissu httpsgithubcomcontinuumioanacondaissuesissu output bashrc andor bash_profil remot comput note also appli comput configur via local transport connect remot comput aiida like code sftp get confus code bashrc bash_profil produc output eg run command like clean requir termin instanc add echo bashrc tri sftp file get error like receiv messag long still want code need interact shell echo clean want disabl noninteract shell put top file guard like codeblock bash shell noninteract done return fi everyth execut noninteract shell note still might want code top like eg set path similar need run also case noninteract shell test comput produc spuriou output run configur codeblock consol verdi comput test computernam check case problem suggest solv problem note method explain work configur aiida use login shell connect comput may prevent spuriou output print verdi comput configur set nouseloginshel ask use login shell set fals note howev may result slightli differ environ sinc certain startup file sourc login shell httpsunixstackexchangecoma_ _stackexchang thread httpsapplestackexchangecomquestionswhatisthedifferencebetweenbashprofileandbashrc improv depend activ ase visual within virtual environ attempt visual structur ase either shell use command verdi data structur show formatas pk might end follow error messag importerror modul name pygtk issu pygtk current pipinstal one instal separ creat appropri bind manual virtual environ follow follow procedur get around issu instal pythongtk packag ubuntu codeblock consol sudo aptget instal pythongtk creat libpythondistpackag folder within virtual environ codeblock consol mkdir aiida_venv_folderlibpythondistpackag chmod aiida_venv_folderlibpythondistpackag aiida_venv_fold virtual environ folder creat instal process creat sever symbol link folder point number file usrlibpythondistpackag codeblock consol cd aiida_venv_folderlibpythondistpackag ln usrlibpythondistpackagesglib glib ln usrlibpythondistpackagesgobject gobject ln usrlibpythondistpackagesgtk gtk ln usrlibpythondistpackagespygtkpth pygtkpth ln usrlibpythondistpackagespygtkpi pygtkpi ln usrlibpythondistpackagescairo cairo verdi data structur show formatas pk work use ipythonjupyt order use aiida object function jupyt latter instruct use ipython kernel instal aiida virtual environ happen default instal aiida pip includ notebook option run jupyt aiida virtual environ reason want instal jupyt virtual environ might consid instal virtual environ alreadi done codeblock consol pip instal jupyt activ aiida virtual environ codeblock consol sourc aiidavirtualenvbinactiv setup aiida ipython kernel codeblock consol pip instal ipykernel python ipykernel instal user nameaiidakernelnam chosen meaning name new kernel final start jupyt server codeblock consol jupyt notebook newli open browser tab select new aiidakernelnam _introincreaseloggingverbos increas log verbos default log level aiida minim avoid much nois logfil warn error log daemon log file info debug messag discard experienc problem increas default minimum log level aiida messag codeblock consol verdi config loggingaiida_loglevel debug might also interest review circu log messag circu librari daemon manag daemon runner codeblock consol verdi config loggingcircus_loglevel debug howev messag usual relev debug aiida intern profil run daemon two uniqu logfil one aiida log messag name aiidaprofile_namelog one circu log name circusprofile_namelog file found aiidadaemonlog folder restart daemon verdi daemon restart number messag log increas significantli may help determin sourc problem note besid debug also use level defin standard python log modul httpsdocspythonorglibrarylogginghtmllogginglevels_ addit aiida defin custom report level valu verbos warn level less verbos info report level aiida default log level problem solv suggest reset default log level codeblock consol verdi config loggingcircus_loglevel unset verdi config loggingaiida_loglevel unset avoid much nois logfil config option set current profil view use codeblock consol verdi profil show option row _introget_startedcondainstal instal conda environ instal rout instal necessari softwar includ prerequisit servic postgresql rabbitmq conda environ recommend method user share system system user administr privileg want instal aiida onto person workstationlaptop recommand use refsystemwid instal introget_startedsystemwideinstal import instal method instal softwar conda environ includ postgresql rabbitmq see refsystemwid instal introget_startedsystemwideinstal use conda instal aiida core python packag panel contain containerlg pb column collg p instal prerequisit servic aiida core codeblock consol conda creat n aiida c condaforg aiidacor aiidacoreservic conda activ aiida startup servic initi data storag work aiida must first initi databas storag area disk codeblock consol aiida initdb mylocal_db databas cluster locat insid folder name mylocal_db may contain collect databas one per profil manag singl run server process start process codeblock consol aiida pg_ctl mylocal_db l logfil start admonit read class seealso titleiconreadmor creat databas cluster httpswwwpostgresqlorgdocscreatingclusterhtml__ start databas server httpswwwpostgresqlorgdocsserverstarthtml__ start rabbitmq server codeblock consol aiida rabbitmqserv detach import servic start way use default port machin conflict may happen one user run aiida way machin alreadi server run systemwid instal get around issu explicitli defin port use setup profil next set aiida configur profil relat data storag verdi quicksetup command codeblock consol aiida verdi quicksetup info enter help info enter ignor default set valu profil name email address share data meusercom first name last name name institut whereiwork tip case nondefault port use databas cluster rabbitmq server pass use dbport brokerport option respect admonit aiida unabl autodetect postgresql setup class attent titleicontroubleshoot get error say aiida troubl autodetect postgresql setup need manual setup explain reftroubleshoot sectionintrotroubleshootinginstallationpostgresqlautodetectissu profil run start aiida daemon codeblock consol aiida verdi daemon start import verdi daemon must restart system reboot tip start daemon physic processor system check setup check everyth set correctli execut codeblock consol aiida verdi statu config dir homeubuntuaiida profil profil repositori homeubuntuaiidarepositorym postgr connect aiida_qs_ubuntu_cafdfbecdbdcdcfclocalhost rabbitmq connect amqpheartbeat daemon daemon run pid sinc point work aiida environ add retriev data admonit miss checkmark ecount issu class attent titleicontroubleshoot refse troubleshoot section introtroubleshoot linkbutton introget_startednext type ref text what next class btnoutlineprimari btnblock fontweightbold shutdown servic finish aiida session particularli switch profil may wish power daemon servic codeblock consol aiida verdi daemon stop aiida pg_ctl mylocal_db stop aiida rabbitmqctl stop restart servic want restart servic daemon codeblock consol aiida pg_ctl mylocal_db start aiida rabbitmqserv detach aiida verdi daemon start tip differ port use pass well _introinstal _introadvancedconfig advanc configur chapter cover topic go beyond refstandard setup aiida introget_startedsetup new aiida recommend first go refbas tutori tutorialbas see refnext step guid tutorialnextstep _introinstalldatabas creat databas aiida use databas store node node attribut inform allow end user perform fast queri result current highli perform postgresql_ databas support databas backend _postgresql httpswwwpostgresqlorgdownload admonit find databas class seealso titleiconreadmor creat databas cluster httpswwwpostgresqlorgdocscreatingclusterhtml__ start databas server httpswwwpostgresqlorgdocsserverstarthtml__ refth databas topic topicsdatabas manual creat databas aiida need run program psql interact postgr oper system need postgr user creat upon instal softwar assum role postgr run root codeblock consol su postgr equival type sudo su postgr depend distribut launch postgr program codeblock consol psql creat new databas user account aiida run codeblock sql creat user aiida password password replac password password choic need provid password configur aiida use databas verdi setup want chang password creat use command codeblock sql alter user aiida password password next creat databas enforc utf encod specif local codeblock sql creat databas aiidadb owner aiida encod utf lc_collateen_usutf lc_ctypeen_usutf templatetempl grant privileg db previouslycr aiida user codeblock sql grant privileg databas aiidadb aiida creat databas aiida close postgr shell type q test databas creat success run follow command regular user bash termin codeblock consol psql h localhost aiidadb u aiida w type password insert prompt everyth work well get error see prompt psql shell use name exampl command verdi setup phase follow paramet appli newli creat databas codeblock consol databas engin postgresql_psycopg databas host localhost databas port aiida databas name aiidadb aiida databas user aiida aiida databas password password admonit dont forget backup databas class tip titleicontip see refdatabas backup howto howtoinstallationbackuppostgresql refhow move databas howtoinstallationperform databas setup use peer authent ubuntu linux default postgresql setup configur use peer authent allow passwordless login via local unix socket mode postgresql compar unix user connect socket databas user allow connect match user exist note altern rout set databas standard approach work ubuntu well go take advantag commandlin util ship ubuntu simplifi creat user databas compar issu sql command directli assum role postgr codeblock consol sudo su postgr creat databas user name unix user run aiida usual login name codeblock consol createus usernam replac usernam usernam next creat databas user owner codeblock consol createdb usernam aiidadb exit shell go back login user test databas creat success tri codeblock consol psql aiidadb verdi setup phase use leav host empti specifi unix user name aiida databas user codeblock consol databas engin postgresql_psycopg databas host databas port aiida databas name aiidadb aiida databas user usernam aiida databas password rabbitmq configur normal setup rabbitmq instal run servic machin host aiida case use default configur propos profil setup work fine howev instal rabbitmq standard exampl run differ port even run complet differ machin relev connect detail configur verdi setup follow paramet configur paramet option default explan protocol brokerprotocol amqp protocol use either amqp amqp ssl enabl connect usernam brokerusernam guest usernam connect guest account avail usabl default rabbitmq instal password brokerpassword guest password connect guest account avail usabl default rabbitmq instal host brokerhost hostnam rabbitmq server port brokerport port server listen virtual host brokervirtualhost option virtual host contain lead forward slash ad automat aiida paramet avail na addit broker paramet typic encod url paramet exampl specifi ssl paramet filepath certif use paramet current defin cli ad manual configjson key broker_paramet ad dictionari contain field cafil capath cadata certfil keyfil no_verify_ssl _introinstallverdi_setup verdi setup databas creat codeblock consol verdi setup profil profile_nam profile_nam profil name choos verdi setup command guid setup process seri prompt first inform ask email use associ calcul aiida email usernam act uniqu identifi importingexport data aiida note password current version aiida use use rest api web interfac leav field empti password set access grant user via rest api web interfac follow prompt help configur databas typic set codeblock consol default user email richardwagnerleipzigd databas engin postgresql_psycopg postgresql host localhost postgresql port aiida databas name aiida_dev aiida databas user aiida aiida databas password password aiida repositori directori homewagneraiidarepositori configur new user email richardwagnerleipzigd first name richard last name wagner institut bruhl leipzig user password want set one yn insert new password insert new password admonit dont forget backup data class tip titleicontip see refinstal backup howto howtoinstallationbackup _introinstallstart_daemon manag daemon aiida daemon process run background take care process submit calcul workflow check statu retriev result finish store aiida databas aiida daemon control use three simpl command verdi daemon start start daemon verdi daemon statu check statu daemon verdi daemon stop stop daemon note oper daemon log activ file aiidadaemonlog gener aiida_pathaiidadaemonlog get latest log messag via verdi daemon logshow _introinstalljupyt use aiida jupyt instal aiida notebook extra insid aiida python environ eg run pip instal aiidacorenotebook option regist aiida ipython magic load environ verdi shell copi follow code snippet home_folderipythonprofile_defaultstartupaiida_magic_registerpi literalinclud aiidatoolsipythonaiida_magic_registerpi startaft document marker note use ipython locat profil your unsur locat ipython profil folder setup your readi use aiida jupyt notebeook start jupyt notebook server codeblock consol jupyt notebook open tab browser click new python regist aiida ipython magic simpli run codeblock ipython aiida execut cell shiftent receiv messag load aiida db environ otherwis load profil manual would python script codeblock python aiida import load_profil orm load_profil qb ormquerybuild _tutori _tutorialbas refer tutori guidelin httpsgithubcomaiidateamaiidacorewikiwritingdocumentationtutorial_ see issu httpsgithubcomaiidateamaiidacoreissues_ basic tutori welcom aiida tutori goal tutori give basic idea aiida help execut datadriven workflow end tutori know store data databas subsequ retriev decor python function input output automat track run monitor statu process explor visual proven graph import work machin note tutori assum work aiida instal set aiida profil current python environ case consult refget start pageintroget_start proven dive need briefli introduc one import concept aiida proven aiida databas contain result calcul also input step execut obtain inform store form direct acycl graph dag exampl numreffig_intro_workchain_graph show proven calcul tutori _fig_intro_workchain_graph figur includeworkchain_graphpng scale align center proven graph basic aiida workchain proven graph see differ type node repres differ shape green ellips data node blue ellips code node rectangl repres process ie calcul perform workflow proven graph allow us see data also produc tutori use aiida gener proven graph numreffig_intro_workchain_graph step step data node run calcul let creat store data node aiida ship interact ipython shell mani basic aiida class preload start ipython shell simpli type termin codeblock consol verdi shell aiida implement data node type common type data int float str etc extend composit data node type need tutori well keep simpl start initi int node assign node variabl codeblock ipython node int check content node variabl like codeblock ipython node int uuid eacdbaebaeabdbeba unstor valu quit bit inform freshli creat node return data node type int node univers uniqu identifi uuid eacdbaebaeabdbeba node current store databas unstor integ valu node let store node databas codeblock ipython nodestor int uuid eacdbaebaeabdbeba pk valu see data node assign primari key pk number identifi node databas pk pk uuid refer node differ pk uniqu local databas wherea uuid global uniqu identifi therefor use differ databas use pk work within singl databas ie interact session uuid case import pk number shown throughout tutori assum start complet empti databas possibl node pk differ databas uuid gener randomli therefor guarante differ next let leav ipython shell type exit enter back termin use verdi command line interfac cli check data node creat code consol verdi node show print someth like follow codeblock bash properti valu type int pk uuid eacdbaebaeabdbeba label descript ctime mtime see node type int pk uuid eacdbaebaeabdbeba besid inform verdi node show command also show empti label descript well time node creat ctime last modifi mtime note aiida alreadi provid mani standard data type also refcreat owntopicsdata_typesplugin calcul function data store databas readi use comput task exampl let say want multipli two int data node follow python function codeblock python def multiplyx return x give desir result appli two int node calcul store proven graph howev use python decor httpsdocspythonorgglossaryhtmltermdecorator_ provid aiida automat make part proven graph start aiida ipython shell use verdi shell execut follow code snippet codeblock ipython aiidaengin import calcfunct calcfunct def multiplyx return x convert multipli function aiida calcul function basic execut unit aiida next load int node creat previou section use load_nod function pk data node codeblock ipython x load_nodepk cours need anoth integ multipli first one let creat new int data node assign variabl codeblock ipython int time multipli two number codeblock ipython multiplyx int uuid dfbfabbec pk valu success calcfunctiondecor multipli function multipli two int data node return new int data node whose valu product two input node note execut multipli function input output node automat store databas codeblock ipython int uuid cfffddabec pk valu yet store data node assign variabl provid input argument multipli function automat store pk similarli return int node valu store pk let leav ipython shell exit look process run use verdi cli code consol verdi process list return list empti dont worri default verdi process list return activ process want see process ie also process termin simpli add option code consol verdi process list see someth like follow output codeblock bash pk creat process label process state process statu ago multipli finish total result info last time entri chang state ago see multipli calcfunct creat minut ago assign pk finish final step let look proven simpl calcul proven graph automat gener use verdi cli let gener proven graph multipli calcul function run pk codeblock consol verdi node graph gener command write proven graph pdf file use favorit pdf viewer look look someth like graph shown numreffig_calcfun_graph _fig_calcfun_graph figur includecalcfun_graphpng scale align center proven graph multipli calcul function note rememb pk calcjob differ databas _tutorialbasiccalcjob calcjob run calcul requir extern code run remot machin simpl calcul function longer suffici purpos aiida provid calcjob process class run calcjob need set two thing code go implement desir calcul comput calcul run your run tutori quantum mobil vm binder preconfigur your run machin follow instruct panel seealso detail refrun extern code howtoruncod dropdown instal localhost comput code let begin set comput use verdi comput subcommand codeblock consol verdi comput setup l tutor h localhost coreloc coredirect w echo pwdwork n verdi comput configur coreloc tutor safeinterv n first command set comput follow option label l tutor hostnam h localhost transport local schedul direct workdir w work subdirectori current directori second command configur comput minimum interv connect safeinterv second command noninteract option n ad prompt extra input next let set code go use tutori codeblock consol verdi code setup l add oncomput computertutor p corearithmeticadd remoteabspathbinbash n command set code label add comput tutor use plugin corearithmeticadd typic realworld exampl comput remot supercomput facil code anyth python script power ab initio code quantum espresso machin learn tool like tensorflow let look code avail us code consol verdi code list list configur code use verdi code show codeid see detail pk addtutor see singl code addtutor pk print list code allow us add two integ togeth addtutor identifi indic code label add run comput label tutor see detail comput use follow verdi command code consol verdi comput show tutor comput name tutor pk uuid becbcddbabfc descript hostnam localhost transport type local schedul type direct work directori usersmbercxepfltutorialsmy_tutorwork shebang binbash mpirun command mpirun np tot_num_mpiproc prepend text prepend text append text append text see work directori set work subdirectori current directori directori calcul run tutor comput execut note may notic pk tutor comput int node creat start tutori differ entiti node comput group store differ tabl databas pk entiti type uniqu databas entiti differ type pk within one databas let start verdi shell load addtutor code use label codeblock ipython code load_codelabeladd everi code conveni tool set requir input call builder obtain use get_build method codeblock ipython builder codeget_build use builder easili set calcul directli provid input argument let use int node creat previou calcfunct one input new node second input codeblock ipython builderx load_nodepk builderi int case node pk differ dont rememb pk output node previou calcul check proven graph gener earlier use uuid output node instead codeblock ipython builderx load_nodeuuidd builderi int note dont provid entir uuid load node long first part uuid uniqu within databas aiida find node look note one nifti featur builder abil use tab complet input tri type builder tab verdi shell execut calcjob use run function provid aiida engin codeblock ipython aiidaengin import run runbuild wait process complet done return dictionari output node codeblock ipython sum int uuid ddefabddbbdb pk valu remote_fold remotedata uuid dafbdabbcdff pk retriev folderdata uuid aaefaebeccfbdb pk besid sum two int node calcul function also return two output one type remotedata one type folderdata see reftop section calcul job topicscalculationsusagecalcfunct detail exit ipython shell check process codeblock consol verdi process list see two process list one multipli calcfunct ran earlier second arithmeticaddcalcul calcjob run grab pk arithmeticaddcalcul gener proven graph result look like graph shown numreffig_calcjob_graph codeblock consol verdi node graph gener _fig_calcjob_graph figur includecalcjob_graphpng scale align center proven graph arithmeticaddcalcul calcjob one input provid output multipli calcul function see detail process includ input output use verdi shell code consol verdi process show submit daemon use run command previou section ipython shell block wait calcjob finish problem simpli ad two number togeth want run multipl calcul take hour day longer practic instead go submit calcjob aiida daemon daemon program run background manag submit calcul termin let first check statu daemon use verdi cli codeblock consol verdi daemon statu daemon run output someth like follow codeblock bash profil tutori daemon run pid sinc activ worker pid mem cpu start use verdi daemon incr decr num increas decreas amount worker case let stop codeblock consol verdi daemon stop next let submit calcjob ran previous start verdi shell execut python code snippet follow step previous use submit function instead run codeblock ipython aiidaengin import submit code load_codelabeladd builder codeget_build builderx load_nodepk builderi int submitbuild use submit calcul job run local interpret sent daemon get back control instantli instead result calcul return node calcjob submit codeblock ipython calcjobnod uuid ecfbbacebb pk aiidacalculationscorearithmeticadd let exit ipython shell look process list codeblock consol verdi process list see calcjob submit state creat codeblock bash pk creat process label process state process statu ago arithmeticaddcalcul creat total result info last time entri chang state ago calcjob process wait pick daemon runner daemon current disabl let start codeblock consol verdi daemon start either use verdi process list follow execut calcjob watch progress codeblock consol verdi process watch let wait calcjob complet use verdi process list see process run far codeblock bash pk creat process label process state process statu ago multipli finish ago arithmeticaddcalcul finish ago arithmeticaddcalcul finish total result info last time entri chang state ago workflow far execut process manual aiida allow us autom step link togeth workflow whose proven store ensur reproduc tutori prepar basic workchain alreadi implement aiidacor see code dropdown multiplyaddworkchain code literalinclud aiidaworkflowsarithmeticmultiply_addpi languag python startaft startmark first recogn multipli function use earlier decor calcfunct defin class method specifi input output workchain well outlin step workflow step provid method multiplyaddworkchain class note besid workchain workflow also implement work function ideal workflow comput intens easili implement python function let run workchain start verdi shell load multiplyaddworkchain use workflowfactori codeblock ipython multiplyaddworkchain workflowfactorycorearithmeticmultiply_add workflowfactori use robust tool load workflow base entri point eg corearithmeticmultiply_add case similar calcjob workchain input set use builder codeblock ipython builder multiplyaddworkchainget_build buildercod load_codelabeladd builderx int builderi int builderz int workchain input set submit daemon use submit function aiida engin codeblock ipython aiidaengin import submit submitbuild quickli leav ipython shell check process list codeblock consol verdi process list depend step workflow run get someth like follow codeblock bash pk creat process label process state process statu ago multipli finish ago arithmeticaddcalcul finish ago arithmeticaddcalcul finish ago multiplyaddworkchain wait wait child process ago multipli finish ago arithmeticaddcalcul wait wait transport task retriev total result info last time entri chang state ago see multiplyaddworkchain current wait child process arithmeticaddcalcul finish check process list process know half minut process finish state verdi process statu command print hierarch overview process call work chain codeblock consol verdi process statu multiplyaddworkchain finish result multipli finish arithmeticaddcalcul finish bracket result indic current step outlin pyclassaiidaworkflowsarithmeticmultiply_addmultiplyaddworkchain step name result process statu particularli use debug complex work chain sinc help pinpoint problem occur gener full proven graph workchain codeblock consol verdi node graph gener look familiar proven graph similar one show start tutori numreffig_workchain_graph _fig_workchain_graph figur includeworkchain_graphpng scale align center final proven graph basic aiida tutori _tutorialnextstep next step congratul complet first step becom aiida expert compil howto guid especi relev follow use case div dropdowngroup dropdown run pure python lightweight comput contain design workflow read refbas tutori tutorialbas may want learn encod logic typic scientif workflow refwrit workflow howto howtowriteworkflow reusabl data type certain input output data type use often may wish turn refdata plugin topicsdata_typesplugin find queri data run multipl comput reffind queri data howto howtoqueri show effici explor data data lineag also visualis refproven graph howtodatavisualiseproven share data export part data file refexportimport functionalityhowtosharearch even serv data http use refaiida rest api howtoshareserv share workflow work comput workflow may also wish refpackag python modul howtopluginsdevelop other use dropdown run computeintens code contain work extern code exist calcul plugin interfac extern code avail aiida plugin registri httpsaiidateamgithubioaiidaregistry_ none meet need refextern code howto howtoplugincod show creat calcul plugin tune perform optimis perform aiida run mani concurr comput see reftun perform howto howtoinstallationperform save comput resourc aiida cach reus output ident comput describ refcach howto howtoruncodescach dropdown run comput high perform comput connect supercomput setup comput commun highperform comput ssh see refhowto run extern code howtoruncod add refcustom transport howtoplugincodestransport aiida prewritten schedul plugin work lsf pbspro sge slurm torqu work extern code exist calcul plugin interfac extern code avail aiida plugin registri httpsaiidateamgithubioaiidaregistry_ none meet need refextern code howto howtoplugincod show creat calcul plugin explor data run multipl comput reffind queri data howto howtoqueri show effici explor data data lineag also visualis refproven graph howtodatavisualiseproven share data export part data file refexportimport functionalityhowtosharearch even serv data http use refaiida rest api howtoshareserv share calcul plugin work plugin may also wish refpackag python modul howtopluginsdevelop other use aiida basic arithmet check cool realworld exampl aiida action demo page link todo add connect supercomput add refcustom schedul howtoplugincodesschedul introduct toctre maxdepth get_start instal tutori troubleshoot _introabout aiida aiida opensourc python infrastructur help research autom manag persist share reproduc complex workflow associ modern comput scienc associ data aiida built support streamlin four core pillar ade model autom data environ share describ httpsarxivorgabs__ key featur aiida includ workflow aiida allow build execut complex autodocu workflow link multipl code local remot comput highthroughput aiida eventbas workflow engin support ten thousand process per hour full checkpoint data proven aiida automat track record input output metadata calcul workflow extens proven graph preserv full lineag data advanc queri aiida queri languag enabl fast graph queri million node plugin interfac aiida support via plugin comput code data analyt tool data type schedul connect mode etc see public plugin repositori httpsaiidateamgithubioaiidaregistry__ hpc interfac aiida seamlessli deal heterogen remot comput resourc work mani schedul box slurm httpsslurmschedmdcom__ pb pro httpswwwpbsproorg__ torqu httpwwwadaptivecomputingcomproductstorque__ sge httpgridschedulersourceforgenet__ lsf httpswwwibmcomdocsenspectrumlsf__ open scienc aiida allow export full databas select subset share collabor made avail browsabl onlin archiv httpsarchivematerialscloudorg__ explor httpswwwmaterialscloudorgexplore__ section materi cloud httpswwwmaterialscloudorg__ open sourc aiida releas mit opensourc licens httpsgithubcomaiidateamaiidacoreblobdeveloplicensetxt__ see also list aiidapow scientif public httpwwwaiidanetscience__ testimoni aiida user httpwwwaiidanettestimonials__ _topicsdatabas databas todo _ httpsgithubcomaiidateamaiidacoreissu _topicsdatabaseadvancedqueri advanc queri basic use classaiidaormquerybuilderquerybuild find data interest explain reffind queri howtohowtoqueri section explain advanc method queri databas refquerybuild dictionarytopicsdatabaseadvancedqueri _topicsdatabaseadvancedqueryedg work edg filter project appli vertic queri path edg connect appli filter project edg work way vertic relev keyword preced edge_ use arithmeticaddcalcul calcul job exampl let say want queri first input addit ie int node provid input label x codeblock python aiidaorm import querybuild qb querybuild qbappendcalcjobnod tagcalcjob qbappendint with_outgoingcalcjob edge_filterslabel x use edge_filt keyword argument queri input label x note oper use filter vertic also appli edg say want find input int node connect calcjobnod via edg label x codeblock python qb querybuild qbappendcalcjobnod tagcalcjob qbappendint with_outgoingcalcjob edge_filterslabel x equal oper negat prepend exclam mark see refrefer tabl belowtopicsdatabaseadvancedquerytablesoper tabl oper similar filter project inform edg use edge_project keyword argument codeblock python qb querybuild qbappendcalcjobnod tagcalcjob qbappendint with_outgoingcalcjob edge_projectlabel exampl queri edg label incom int node calcjobnod _topicsdatabaseadvancedqueryord order limit result order result queri properti entiti say want return list int output calcjobnod sort time creat descend order ie recent first codeblock python qb querybuild qbappendcalcjobnod tagcalcjob qbappendint with_incomingcalcjob qborder_byint ctime desc also use order result base valu nest dictionari attribut column howev classaiidaormquerybuilderquerybuild infer type valu case cast type codeblock python qb querybuild qbappendcalcjobnod tagcalcjob qbappendint with_incomingcalcjob qborder_byint attributesvalu order asc cast queri return int node output calcjobnod ascend order valu ie small big note case specifi order oper dictionari order key detail want order queri result cast key inform querybuild attribut type list avail cast type alias found tabl _topicsdatabaseadvancedquerytablescasttyp python type alia sqlalchemi type int integ float f float bool b boolean str string dict j jsonb datetimedatetim datetim also order use multipl properti provid list dictionari specifi one sort oper codeblock python qb querybuild qbappendcalcjobnod tagcalcjob qbappendint with_incomingcalcjob qborder_byint attributesvalu order asc cast f ctime desc int node first sort valu ascend order node valu equal subsequ sort modif time descend order final also limit number queri result return limit method suppos want first three result queri codeblock python qb querybuild qbappendcalcjobnod qblimit easili combin order_bi method order get last three calcjobnod creat databas codeblock python qb querybuild qbappendcalcjobnod qblimit qborder_bycalcjobnod ctime desc _topicsdatabaseadvancedqueryt refer tabl _topicsdatabaseadvancedquerytablesoper list oper oper datatyp exampl explan id filter equal name foo bar filter valu given list float ctime datetim filter valu greater smaller certain valu integ date like string name like label filter match substr _ wildcard match liter _ escap prefix ilik string name ilik label case insensit version like list id list express least one match express list id list express match express has_key dict attribut has_key some_key filter dictionari contain certain key of_typ attributessome_key of_typ bool filter valu certain type of_length list attributessome_list of_length filter list certain length shorter list attributessome_list shorter filter list shorter certain length longer list attributessome_list longer filter list longer certain length contain list attributessome_key contain b filter list contain certain valu _topicsdatabaseadvancedquerytablesrelationship list relationship entiti entiti relationship explan node node with_outgo one node input anoth node node node with_incom one node output anoth node node node with_descend one node ancestor anoth node path node node with_ancestor one node descend anoth node path node group with_nod group node group node with_group node member group node comput with_nod comput node comput node with_comput node comput node user with_nod creator node user user node with_us node creat user user group with_us node creat user group user with_group node creat user node log with_nod log node log node with_log node log node comment with_nod comment node comment node with_com node comment user comment with_us comment creat user comment user with_com creator comment user _topicsdatabaseadvancedqueryqueryhelp _topicsdatabaseadvancedqueryquerydict convert querybuild tofrom dictionari import aiidacor version dictionari access querybuilderqueryhelp deprec classaiidaormquerybuilderquerybuild class convert dictionari also load dictionari easi serialis storag built queri use append method explain reffind queri data howtohowtoqueri advanc section easili store queri save querybuilderas_dict dictionari json file later use codeblock python import json aiidaorm import querybuild qb querybuild qbappendcalcjobnod openquerydictjson w file filewritejsondumpsqbas_dict indent use dictionari instanti classaiidaormquerybuilderquerybuild use from_dict class method codeblock python openquerydictjson r file query_dict jsonloadfil qb querybuilderfrom_dictquery_dict altern also use dictionari set queri specifi path filter project construct dictionari hand specifi path user specifi path along join tabl list dictionari list item identifi vertex path defin vertex class cl key query_dict path cl data entiti queri uniqu tag tag provid set name class howev work choos class twice queri case provid tag use tag key query_dict path clsnode tagnode_ clsnode tagnode_ also detail inform vertex edg order connect correctli sever redund way done specifi node input output anoth node preced current one list node specifi integ class type follow exampl valid join instruct assum structur defin index path tag struc edge_specif query_dictpath edge_specificationwith_incom edge_specificationwith_incom structuredata edge_specificationwith_incom struc edge_specificationwith_outgo edge_specificationwith_outgo structuredata edge_specificationwith_outgo struc query_dictpathidirect integ spec with_outgo with_incom specifi key direct look direct defin distanc tree defin one step tree along link mean join node specifi dictionari node specifi listitem output direct default noth specifi node join previou one output default neg number revers direct link absolut valu direct defin tabl join respect posit list absolut valu join one tabl valu tabl defin indic two follow dictionari yield queri aiidaorm import trajectorydata aiida_quantumespressocalculationspw import pwcalcul aiidaorm import dict query_dict_ path clspwcalcul clstrajectorydata clsdict direct return queri query_dict_ path clspwcalcul clstrajectorydata clsdict with_outgoingpwcalcul shorter version query_dict_ path dict pwcalcul trajectorydata project determin column queri return query_dict pathpwcalcul project pwcalculationuser_id id use jsonb column also project valu store insid json query_dict path pwcalcul structuredata project pwcalculationst id return state id instanc pwcalcul structur link output relaxcalcul string pass name column pass asterisk queri return instanc aiidaclass filter filter enabl specifi queri exampl queri structur ad certain time say last day id larger aiidacommon import timezon datetim import timedelta query_dict path clspwcalcul pwcalcul structur output clsstructuredata filter structuredata ctime timezonenow timedeltaday id want includ filter project link node add filter project queri dictionari let take exampl add filter link query_dict path clspwcalcul tagrelax pwcalcul structur output clsstructuredata tagstructur filter structur id relaxstructur labellikeoutput_ project relaxstructurelabel structurelabel relaxlabel uuid notic tag link default tag two connect node delimit two dash order matter altern choos tag edg path defin entiti join use edge_tag query_dict path clspwcalcul tagrelax relax structur output clsstructuredata tagstructur edge_tagthisismylinktag definin link tag filter structur id thisismylinktag use link tag labellikeoutput_ project thisismylinktaglabel structurelabel relaxlabel uuid limit offset set directli like query_dict pathnod limit offset query_dict would tell querybuild return row first skip _topicsrepositori repositori addit refdatabas topicsdatabas aiida also store inform repositori form file repositori optim store larg amount file allow aiida scale highthroughput load result file access directli use file system tool despit fact store somewher local file system instead interact repositori api sinc node virtual file hierarchi repositori content node access classaiidaormnodesnodenod class hierarchi virtual file may actual written disk hierarchi technic inform implement pleas refer refrepositori intern section internalarchitecturerepositori _topicsrepositorywrit write repositori write file node use one follow three method methaiidaormnodesrepositorynoderepositorymixinput_object_from_fil methaiidaormnodesrepositorynoderepositorymixinput_object_from_filelik methaiidaormnodesrepositorynoderepositorymixinput_object_from_tre let assum file local file system call somepathfiletxt want copi node straightforward solut follow code python node node nodeput_object_from_filesomepathfiletxt filetxt note first argument absolut filepath second argument filenam file written repositori node valid filenam long rel target filenam contain nest subdirectori exampl somerelativepathfiletxt nest directori exist altern also possibl write file node stream filelikeobject use content file alreadi memori prevent write local filesystem first exampl one follow code python opensomepathfiletxt handl node node nodeput_object_from_filelikehandl filetxt previou exampl except file open first context manag filelikeobject pass methaiidaormnodesrepositorynoderepositorymixinput_object_from_filelik method work filelikeobject exampl also byte textstream code python import io node node nodeput_object_from_filelikeiobytesiobsom content filetxt final instead write one file time write content entir directori node repositori code python node node nodeput_object_from_treesomedirectori content entir directori recurs written node repositori option write content subdirectori repositori code python node node nodeput_object_from_treesomedirectori somesubpath methaiidaormnodesrepositorynoderepositorymixinput_object_from_fil sub directori explicitli creat first _topicsrepositorylist list repositori content determin content node repositori use follow method methaiidaormnodesrepositorynoderepositorymixinlist_object_nam methaiidaormnodesrepositorynoderepositorymixinlist_object methaiidaormnodesrepositorynoderepositorymixinwalk first method return list file object contain within node repositori object either directori file code ipython nodelist_object_nam sub filetxt determin content subdirectori simpli pass path argument code ipython nodelist_object_namessubdirectori nestedtxt note element return list simpl string one tell correspond directori file inform need use methaiidaormnodesrepositorynoderepositorymixinlist_object instead method return list classaiidarepositorycommonfil object object methaiidarepositorycommonfilefile_typ methaiidarepositorycommonfilenam properti return type name file object respect exampl usag would follow code python aiidarepositorycommon import filetyp obj nodelist_object objfile_typ filetypedirectori printfobjnam directori elif objfile_typ filetypefil printfobjnam file retriev specif file object particular rel path use methaiidaormnodesrepositorynoderepositorymixinget_object code ipython nodeget_objectsubdirectorynestedtxt filefile_typefiletypefil namenestedtxt final want recurs iter content node repositori use methaiidaormnodesrepositorynoderepositorymixinwalk method oper exactli oswalk_ code ipython root dirnam filenam nodewalk printroot dirnam filenam sub filetxt sub directori subdirectori nestedtxt _topicsrepositoryread read repositori retriev content file store node repositori use follow method methaiidaormnodesrepositorynoderepositorymixinopen methaiidaormnodesrepositorynoderepositorymixinget_object_cont first method function exactli python open builtin function code python nodeopensomefiletxt r handl content handleread methaiidaormnodesrepositorynoderepositorymixinget_object_cont method provid shortcut oper case want directli read content memori code python content nodeget_object_contentsomefiletxt r method accept second argument determin whether file open text binarymod valid valu r rb respect note method use read content repositori read mode wb result except write file repositori use method describ section refwrit repositori topicsrepositorywrit _topicsrepositorycopi copi repositori want copi specif file node repositori section refread repositorytopicsrepositoryread show read content written elsewher howev sometim want copi entir content node repositori subdirectori methaiidaormnodesrepositorynoderepositorymixincopy_tre method make easi use follow code python nodecopy_treesometargetdirectori write entir repositori content node directori sometargetdirectori local file system want copi particular subdirectori repositori pass second path argument code python nodecopy_treesometargetdirectori pathsubdirectori method combin methaiidaormnodesrepositorynoderepositorymixinput_object_from_tre make easi copi entir repositori content subdirectori one node anoth code python import tempfil node_sourc load_nodepk node_target node tempfiletemporarydirectori dirpath node_sourcecopy_treedirpath node_targetput_object_from_treedirpath note method effici file first written node_a temporari directori disk read memori written repositori node_b effici method requir bit code directli use methaiidaormnodesrepositorynoderepositorymixinwalk method explain section reflist repositori content topicsrepositorylist code python node_sourc load_nodepk node_target node root dirnam filenam node_sourcewalk filenam filenam filepath root filenam node_sourceopenfilepath handl node_targetput_object_from_filelikehandl filepath note exampl file explicitli copi intermedi nest directori automat creat virtual hierarchi howev current possibl creat directori explicitli empti directori yet support oswalk replac oswalk method python standard librari _oswalk httpsdocspythonorglibraryoshtmloswalk _topicscli command line interfac command line interfac util aiida call verdi section explain basic concept appli verdi command _topicscliparamet paramet paramet verdi command come two flavor argument posit paramet eg verdi process kill option announc flag eg f flag potenti follow valu eg verdi process list limit verdi process h _topicsclimulti_value_opt multivalu option verdi command provid option take multipl valu allow avoid repetit eg write verdi archiv creat n archiveaiida instead lengthi verdi archiv creat n n n archiveaiida note use socal endopt marker necessari mark end n option distinguish archiveaiida argument _topicsclihelp_str help string append help option verdi subcommand get help use exampl verdi process kill help show usag verdi process kill option process kill run process option timeout float time second wait respons time default wait nowait wait action complet otherwis return soon schedul h help show messag exit help string consist three part usag line describ invok command descript command function list avail option usag line encod inform command paramet eg option command take one option process command requir process posit argument process command take process option posit argument process command take one process option posit argument multivalu option follow help string usag line correspond command contain endopt marker exampl usag verdi archiv creat option output_fil export variou entiti code comput group node archiv file backup share purpos option x code code one multipl code identifi id uuid label comput comput one multipl comput identifi id uuid label g group group one multipl group identifi id uuid name n node node one multipl node identifi id uuid _topicscliprofil profil aiida support multipl profil per instal one mark default use unless anoth profil request show current default profil use verdi profil list order use differ profil pass pprofil option verdi command exampl verdi p profil process list note specifi profil use command use verdi profil setdefault order perman chang default profil _topicscliverbos verbos verdi command vverbos option allow control verbos output print command option take valu known log level messag emit inferior log level suppress valid valu order increas log level notset debug info report warn error critic exampl log level set error messag error critic level shown choic log level valu come directli python builtin log modul httpsdocspythonorglibrarylogginghtml_ report level log level defin ad aiida sit info warn level default log level verbos option caseinsensit ie verbos debug verbos debug ident option pass subcommand level exampl code consol verdi process list verbos debug ident code consol verdi verbos debug process list option specifi multipl time last valu consid _topicscliidentifi identifi work aiida entiti need way refer command line entiti aiida address via three identifi primari key pk integ eg identifi entiti within databas automat assign univers uniqu identifi httpsenwikipediaorgwikiuniversally_unique_identifierversion__random_ uuid string eg cecfafeebcacec identifi entiti global automat assign label humanread string eg test_calcul manual assign note pk easi type work long stay within databas share data other howev alway use uuid verdi command expect identifi paramt accept pk uuid label almost case work box sinc command line paramet pass string aiida need deduc type identifi content fail edg case see reftopicscliidentifier_resolut detail take follow precaut order avoid edg case pk precaut need uuid precaut need full uuid partial uuid includ least one nonnumer charact dash label add exclam mark end identifi order forc interpret label _topicscliidentifier_resolut implement identifi resolut logic deduc identifi type follow tri interpret identifi pk integ fail tri interpret identifi uuid full partial fail interpret identifi label follow exampl illustr edg case aris logic pk uuid label dfbbbbcaadcefdffcc group deadbeefbafdddac dfaeeabfbef deadbeef tri identifi first entiti partial uuid would match third entiti pk instead tri identifi second entiti label would match first entiti pk instead tri identifi third entiti label deadbeef would match second entiti partial uuid deadbeef instead ambigu partial uuid pk alway resolv includ longer substr uuid eventu render identifi longer valid pk case label also valid pk partial uuid requir differ solut case verdi reserv special charact exclam mark append identifi type guess done aiida check presenc marker found interpret identifi label ie solv ambigu exampl mention one would pass deadbeef _topicsschedul batch job schedul batch job schedul manag job queue execut comput resourc aiida ship plugin rang schedul section describ interfac plugin follow refthes instruct topicsschedulersdevelop_plugin add support custom schedul pbspro pbspro_ schedul support test version main featur support schedul use reftopicsschedulersjob_resourcesnod set job resourc _pbspro httpwwwpbsworkscomproductaspxid slurm slurm_ schedul support test version main featur support schedul use reftopicsschedulersjob_resourcesnod set job resourc _slurm httpsslurmschedmdcom sge sge_ schedul sun grid engin call oracl grid engin main variantsfork support test version ge u main featur support schedul use reftopicsschedulersjob_resourcespar set job resourc _sge httpsenwikipediaorgwikioracle_grid_engin lsf ibm lsf_ schedul support test version cern lxplu cluster _lsf httpswwwibmcomsupportknowledgecenterssetd_lsf_welcomehtml torqu torque_ base openpb support test version ubuntu main featur support schedul use reftopicsschedulersjob_resourcesnod set job resourc _torqu httpwwwadaptivecomputingcomproductsopensourcetorqu direct execut bypass schedul direct schedul plugin simpli execut command new bash shell put background check process id pid determin execut complet main purpos debug local machin use proper batch schedul product calcul warn compar proper batch schedul direct execut mode fragil particular queue ie calcul run parallel pid numer reset reboot warn use direct schedul run supercomput job end run login node typic forbidden centr multipl login node aiida may get confus subsequ ssh connect end differ login node caus aiida infer job complet main featur support schedul use reftopicsschedulersjob_resourcesnod set job resourc _topicsschedulersjob_resourc job resourc unsurprisingli differ schedul differ way specifi resourc job number requir node number mpi process per node aiida differ account subclass jobresourc class previou section list subclass use given schedul subclass defin least pymethaiidaschedulersdatastructuresjobresourceget_tot_num_mpiproc method return total number mpi process request otherwis slightli differ interfac describ follow note manual load specif jobresourc subclass directli import eg codeblock python aiidaschedulersdatastructur import nodenumberjobresourc practic howev appropri class infer schedul configur relev aiida comput simpli set relev field metadataopt input dictionari calcjob schedul job resourc type nodenumberjobresourc could codeblock python aiidaorm import load_cod input code load_codesomecodelocalhost configur code use also defin comput metadata option resourc num_machin num_mpiprocs_per_machin _topicsschedulersjob_resourcesnod nodenumberjobresourc pbslike nodenumberjobresourc class use specifi job resourc pb slurm class follow attribut resnum_machin number machin also call node code run resnum_mpiprocs_per_machin number mpi process use machin restot_num_mpiproc total number mpi process job request resnum_cores_per_machin number core use machin resnum_cores_per_mpiproc number core run mpi process need specifi two among first three field defin upon construct suggest use first two instanc codeblock python re nodenumberjobresourcenum_machin num_mpiprocs_per_machin ask schedul alloc machin mpi process machin automat ask total total number mpi process note creat new comput ask default_mpiprocs_per_machin specifi automat use default valu num_mpiprocs_per_machin whenev creat resourc comput note prefer use restot_num_mpiproc instead make sure multipl resnum_machin andor resnum_mpiprocs_per_machin first three field relat equat codeblock python resnum_machin resnum_mpiprocs_per_machin restot_num_mpiproc num_cores_per_machin num_cores_per_mpiproc field option must satisfi equat codeblock python resnum_cores_per_mpiproc resnum_mpiprocs_per_machin resnum_cores_per_machin note pbspro num_mpiprocs_per_machin num_cores_per_machin field use mpiproc ppn respect torqu num_mpiprocs_per_machin field use ppn unless num_mpiprocs_per_machin specifi _topicsschedulersjob_resourcespar parenvjobresourc sgelik pyclassaiidaschedulersdatastructuresparenvjobresourc class use specifi resourc sge similar schedul requir specifi parallel environ total number cpu request class follow attribut resparallel_env parallel environ want run job string restot_num_mpiproc total number mpi process job request attribut requir check done consist specifi parallel environ total number mpi process request instanc parallel environ may configur cluster administr run singl machin respons make sure inform valid otherwis submiss fail set field directli class constructor codeblock python re parenvjobresourceparallel_envmpi tot_num_mpiproc set field use metadataopt input dictionari calcjob codeblock python input metadata option resourc parallel_env mpi tot_num_mpiproc _topicsschedulersdevelop_plugin develop plugin schedul plugin allow aiida commun specif type schedul plugin subclass classaiidaschedulersschedulerschedul class implement number method instruct certain key command execut submit new job request current activ job get start download downloadthi templat includescheduler_templatepi implement follow method _get_joblist_command return command report full inform exist job _get_detailed_job_info_command return command get detail inform job even job finish _get_submit_script_head return submit script header _get_submit_command return string submit given script _parse_joblist_output pars queue output string return execut command return _get_joblist_command _parse_submit_output pars output submit command return execut command return _get_submit_command _get_kill_command return command kill job specifi jobid _parse_kill_output pars output kill command parse_output pars output schedul method implement except _get_detailed_job_info_command parse_output option addit method _job_resource_class class attribut need set subclass classaiidaschedulersdatastructuresjobresourc schedul work like slurm torqu pb one like simpli reus classaiidaschedulersdatastructuresnodenumberjobresourc class ship aiidacor schedul work like lsf sge may abl reus classaiidaschedulersdatastructuresparenvjobresourc instead neither work one implement custom subclass templat class call templatejobresourc alreadi includ templat file note inform aiida new schedul plugin must regist entri point aiidaschedul entri point group refer refth section regist plugin howtopluginsdevelopentrypoint instruct nodenumberjobresourc replac pyclassaiidaschedulersdatastructuresnodenumberjobresourc jobresourc replac pyclassaiidaschedulersdatastructuresjobresourc calcjob replac pyclassaiidaengineprocessescalcjobscalcjobcalcjob _topicsplugin plugin _topicspluginsmay plugin add new class aiida refentri point group topicspluginsentrypointgroup includ calcul parser workflow data type verdi command schedul transport importersexport extern databas typic involv subclass respect base class aiida provid purpos instal new commandlin andor gui execut depend build top number plugin long requir clash _topicspluginsmaynot plugin aiida plugin chang databas schema aiida use use protect function method class aiida start underscor _ monkey patch anyth within aiida namespac namespac failur compli like prevent plugin list offici aiida plugin registri registry__ find situat feel like need pleas open issu aiida repositori core__ tri advis proceed _core httpsgithubcomaiidateamaiidacor _registri httpsgithubcomaiidateamaiidaregistri _topicspluginsguidelin guidelin plugin design calcjob parser plugin follow guidelin use keep mind wrap extern code start simpl make use exist class like pyclassaiidaormnodesdatadictdict pyclassaiidaormnodesdatasinglefilesinglefiledata write necessari pass inform aiida dont break data proven store least need full reproduc expos full function standard good dont artifici limit power code wrap user get frustrat code way plugin dont reli aiida intern function deeper nest level consid part public api may chang minor aiida releas break plugin pars want queri make list inform pars databas queri pyclassaiidaormnodesdatadictdict store file repositori safekeep pyclassaiidaormnodesdatasinglefilesinglefiledata leav comput calcul ran pyclassaiidaormnodesdataremoteremotedata _topicspluginsentrypoint entri point setuptool packag use pip featur call entri points_ allow associ string entri point identifi python object defin insid python packag entri point defin setuppi file exampl entry_point aiidadata entri point pathtopythonobject mycodemydata aiida_mycodedatamydatamydata add new entri point mycodemydata entri point group aiidadata entri point identifi point mydata class insid file mydatapi part aiida_mycod packag instal python packag defin entri point entri point specif written file insid distribut egginfo folder setuptool provid packag pkg_resourc queri entri point specif distribut entri point group andor name entri point load data structur point entri point aiida defin set entri point group see reftopicspluginsentrypointgroup inspect entri point ad group aiida plugin aiida offer uniform interfac interact exampl verdi plugin list aiidaworkflow provid overview workflow instal aiida plugin user inspect inputsoutput workflow use command without studi document plugin datafactori calculationfactori workflowfactori method allow instanti new class simpl short string eg quantumespressopw user dont need rememb exactli plugin packag class resid plugin refactor without user relearn plugin api _topicspluginsentrypointgroup aiida entri point group list entri point group defin search aiida get list output verdi plugin list aiidacalcul entri point group expect subclass pyclassaiidaormjobcalcul aiidaormnodesprocesscalculationcalcjobcalcjobnod replac previou method place python modul class question insid aiidaormcalculationjob subpackag exampl entri point specif entry_point aiidacalcul mycodemycod aiida_mycodecalcsmycodemycodecalcul aiida_mycodecalcsmycodepi aiidaorm import jobcalcul class mycodecalculationjobcalcul lead usag aiidaplugin import calculationfactori calc calculationfactorymycodemycod aiidapars aiida expect subclass parser replac previou approach consist place parser modul aiidaparsersplugin exampl spec entry_point aiidacalcul mycodemycod aiida_mycodeparsersmycodemycodepars aida_mycodeparsersmyparserpi aiidapars import parser class mycodeparserpars usag aiidaplugin import parserfactori parser parserfactorymycodemycod aiidadata group pyclassaiidaormnodesdatadatadata subclass previous locat subpackag aiidaormdata spec entry_point aiidadata mycodemydata aiida_mycodedatamydatmydata aiida_mycodedatamydatpi aiidaorm import data class mydatadata usag aiidaplugin import datafactori param datafactorymycodemydata aiidaworkflow packag aiida workflow follow spec entry_point aiidaworkflow mycodemywf aiida_mycodeworkflowsmywfmyworkflow aiida_mycodeworkflowsmywfpi aiidaengineworkchain import workchain class myworkflowworkchain usag aiidaplugin import workflowfactori wf workflowfactorymycodemywf note oldstyl workflow entri point mechan plugin system support therefor one load workflow workflowfactori way run store sourc code aiidaworkflowsus directori use normal python import load class aiidacmdlin verdi use click_ framework make possibl add new subcommand exist verdi command verdi data mydata aiida expect entri point either clickcommand clickcommandgroup present extra command inject follow level refdirect subcommand verdi dataspecverdidata refsubcommand verdi data structur importspecverdidatastructureimport _specverdidata spec verdi data entry_point aiidacmdlinedata mydata aiida_mycodecommandsmydatamydata aiida_mycodecommandsmydatapi import click clickgroup mydata commandlin help mydata command mydatacommandanim clickoptionformat clickargumentpk create_fancy_animationformat pk help usag codeblock bash verdi data mydata anim formatformat pk _specverdidatastructureimport spec verdi data structur import entry_point aiidacmdlinedatastructureimport myformat aiida_mycodecommandsmyformatmyformat aiida_mycodecommandsmyformatpi import click clickgroup clickargumentfilenam typeclickfil myformatfilenam commandlin help myformat import command usag codeblock bash verdi data structur import myformat a_filemyfmt aiidatoolsdbexport plugin packag add support export extern databas use entri point aiida find modul defin necessari function sure dbexport work spec entry_point aiidatoolsdbexport mymatdb aiida_mymatdbmymatdb aiidatoolsdbimport plugin packag add support import extern databas use entri point aiida find modul defin necessari function spec entry_point aiidatoolsdbimport mymatdb aiida_mymatdbmymatdb aiidaschedul recommend name plugin packag schedul eg aiidamyschedul entri point name simpli equal name schedul spec entry_point aiidaschedul myschedul aiida_myschedulermyschedulermyschedul aiida_myschedulermyschedulerpi aiidaschedul import schedul class myschedulerschedul usag schedul use familiar way enter myschedul schedul option set comput aiidatransport aiidacor ship two mode transport file folder remot comput coressh coreloc stub remot comput actual recommend name plugin packag mode transport eg aiidamytransport entri point name simpli equal name transport spec entry_point aiidatransport mytransport aiida_mytransportmytransportmytransport aiida_mytransportmytransportpi aiidatransport import transport class mytransporttransport usag aiidaplugin import transportfactori transport transportfactorymytransport set new comput specifi mytransport transport mode _topicspluginstestfixtur plugin test fixtur one concern run test aiida plugin separ test environ product environ typic test run empti aiida databas aiida ship tool take care start temporari postgr server creat new databas creat temporari aiida folder creat test profil option reset aiida databas everi individu test thu let focu test function plugin without worri separ note overhead set temporari environ order second occur per test session control databas backend temporari profil set aiida_test_backend environ variabl eg export aiida_test_backendsqlalchemi prefer run test exist profil say test_profil simpli set follow environ variabl run test export aiida_test_profiletest_profil note order prevent accident data loss aiida allow run test profil whose name start test_ aiida ship number fixtur pymodaiidamanagetestspytest_fixtur use particular pyfuncaiidamanagetestspytest_fixturesaiida_profil fixtur initi pyclassaiidamanageteststestmanag yield test function paramet scopesess autousetru caus fixtur automat run per test session even dont explicitli requir pyfuncaiidamanagetestspytest_fixturesclear_databas fixtur depend pyfuncaiidamanagetestspytest_fixturesaiida_profil fixtur tell receiv pyclassaiidamanageteststestmanag instanc reset databas fixtur let test start fresh aiida environ pyfuncaiidamanagetestspytest_fixturestemp_dir fixtur return temporari directori file oper delet test finish may want add fixtur tailor plugin set specif data node _pytest httpspytestorg _unittest httpsdocspythonorglibraryunittesthtml _fixtur httpsdocspytestorgenlatestfixturehtml _click httpsclickpalletsprojectscom _entri point httpspackagingpythonorgenlatestguidescreatinganddiscoveringplugin _topicsdata_typ data type aiida alreadi ship number use data type section detail common handi featuresfunction work differ data type access pyfuncaiidapluginsfactoriesdatafactori function also expos pymodaiidaplugin pass correspond entri point argument exampl work verdi shell codeblock ipython arraydata datafactorycorearray import mani exampl section assum work insid verdi shell case first load eg pyfuncaiidapluginsfactoriesdatafactori function codeblock python aiidaplugin import datafactori arraydata datafactorycorearray list data entri point obtain run command verdi plugin list aiidadata data type follow link correspond data class api refer read class method also detail store databas mostli attribut inform easili queri eg refquerybuild howtoqueri store raw file aiida file repositori provid access file content effici queryabl use eg big data file dont need queri need work specif type data first check list data typesplugin dont find need give look refad support custom data type topicsdata_typesplugin _topicsdata_typescor core data type list core data type alreadi provid aiida along entri point data store node store aiida databas tabl width class entri point store databas store repositori refint topicsdata_typescorebas int integ valu reffloat topicsdata_typescorebas float float valu refstr topicsdata_typescorebas str string refbool topicsdata_typescorebas bool boolean valu reflist topicsdata_typescorebaseiter list complet list refdict topicsdata_typescorebaseiter dict complet dictionari refarraydata topicsdata_typescorearray array array name correspond shape array data npi format refxydata topicsdata_typescorearrayxi arrayxi array name correspond shape array data npi format refsinglefiledata topicsdata_typescoresinglefil singlefil filenam file reffolderdata topicsdata_typescorefold folder file folder refremotedata topicsdata_typescoreremot remot comput absolut path folder file folder _topicsdata_typescorebas base type number use class wrap base python data type pyclassaiidaormnodesdataintint pyclassaiidaormnodesdatafloatfloat pyclassaiidaormnodesdatastrstr pyclassaiidaormnodesdataboolbool store proven automat load verdi shell also directli expos pymodaiidaorm particularli use need provid singl paramet eg pyclassaiidaengineprocessesfunctionsworkfunct class often use similar way correspond base type codeblock ipython total int int need access bare valu whole aiida class use valu properti codeblock ipython totalvalu warn conveni need simpl manipul like multipli two number care pass node instead correspond python valu librari perform heavi comput fact oper valu would replac oper creat new aiida node howev order magnitud slower see discuss httpsgithubcomaiidateamaiidacoreissues_ github case rememb pass nodevalu mathemat function instead _topicsdata_typescorebaseiter aiida also implement data class two basic python iter pyclassaiidaormnodesdatalistlist pyclassaiidaormnodesdatadictdict store list dictionari element base python type string float integ boolean none type codeblock ipython l listlist fals note use keyword argument list requir constructor pyclassaiidaormnodesdatalistlist class also store list dictionari within iter depth level exampl creat dictionari valu list dictionari codeblock ipython dictdictk l n obtain python list dictionari pyclassaiidaormnodesdatalistlist pyclassaiidaormnodesdatadictdict instanc use pymethaiidaormnodesdatalistlistget_list pymethaiidaormnodesdatadictdictget_dict method codeblock ipython lget_list fals dget_dict k l n howev also use list index dictionari key extract specif valu codeblock ipython l dk also use mani method correspond python base type exampl codeblock ipython lappendb true lget_list fals b true base data type valu store databas attribut column store node use pymethaiidaormnodesnodenodestor method warn pyclassaiidaormnodesdatalistlist pyclassaiidaormnodesdatadictdict store python base type correspond aiida data type convert correspond python base type store pyclassaiidaormnodesdatalistlist pyclassaiidaormnodesdatadictdict node databas _topicsdata_typescorearray arraydata pyclassaiidaormnodesdataarrayarraydata class use repres numpi httpsnumpyorg_ array proven array assign name specifi user use pymethaiidaormnodesdataarrayarraydataset_array method codeblock ipython arraydata datafactorycorearray import numpi np array arraydata arrayset_arraymatrix nparray note one pyclassaiidaormnodesdataarrayarraydata instanc store multipl array differ name codeblock ipython arrayset_arrayvector nparray see list array name store pyclassaiidaormnodesdataarrayarraydata instanc use pymethaiidaormnodesdataarrayarraydataget_arraynam method codeblock ipython arrayget_arraynam matrix vector want array correspond certain name simpli suppli name pymethaiidaormnodesdataarrayarraydataget_array method codeblock ipython arrayget_arraymatrix array node store pyclassaiidaormnodesdataarrayarraydata node use pymethaiidaormnodesnodenodestor method howev name shape array store databas content array store repositori numpi format httpsnumpyorgdocstablereferencegeneratednumpylibformathtmlnpyformat_ npi _topicsdata_typescorearrayxi xydata case work array relationship ie function x use pyclassaiidaormnodesdataarrayxydata class codeblock ipython xydata datafactorycorearrayxi import numpi np xy xydata class equip setter getter method x valu specif take care valid eg check shape user also specifi unit x codeblock ipython xyset_xnparray temper celsiu xyset_ynparray volum expans note set multipl valu correspond x grid pyclassaiidaormnodesdataarrayarraydata name shape array store databas content array store repositori numpi format httpsnumpyorgdocstablereferencegeneratednumpylibformathtmlnpyformat_ npi _topicsdata_typescoresinglefil singlefiledata order includ singl file proven use pyclassaiidaormnodesdatasinglefilesinglefiledata class class initi via absolut path file want store codeblock ipython singlefiledata datafactorycoresinglefil single_fil singlefiledataabsolutepathtofil content file string format obtain use pymethaiidaormnodesdatasinglefilesinglefiledataget_cont method codeblock ipython single_fileget_cont file content store node filenam store databas file copi repositori _topicsdata_typescorefold folderdata pyclassaiidaormnodesdatafolderfolderdata class store set file folder includ subfold store complet directori simpli use tree keyword codeblock ipython folderdata datafactorycorefold folder folderdatatreeabsolutepathtodirectori altern construct node first use variou repositori method add object directori file path codeblock ipython folder folderdata folderput_object_from_treeabsolutepathtodirectori folderput_object_from_fileabsolutepathtofiletxt pathfiletxt filelik object httpsdocspythonorgglossaryhtmltermfilelikeobject_ codeblock ipython folderput_object_from_filelikefilelike_object pathfiletxt invers content file store pyclassaiidaormnodesdatafolderfolderdata node access use pymethaiidaormnodesrepositorynoderepositorymixinget_object_cont method codeblock ipython folderget_object_contentfiletxt file contentn see file store pyclassaiidaormnodesdatafolderfolderdata use pymethaiidaormnodesrepositorynoderepositorymixinlist_object_nam method codeblock ipython folderlist_object_nam subdir filetxt filetxt exampl subdir sub directori absolutepathtodirectori whose content ad list content subdir directori pass path pymethaiidaormnodesrepositorynoderepositorymixinlist_object_nam method codeblock ipython folderlist_object_namessubdir filetxt modulepi content shown use pymethaiidaormnodesrepositorynoderepositorymixinget_object_cont method pass correct path codeblock ipython folderget_object_contentsubdirfiletxt file contentn sinc pyclassaiidaormnodesdatafolderfolderdata node simpli collect file simpli store file repositori _topicsdata_typescoreremot remotedata pyclassaiidaormnodesdataremoteremotedata node repres symbol link specif folder remot comput main use allow user persist proven eg calcul produc data rawscratch folder whole folder need provid restartcontinu creat pyclassaiidaormnodesdataremoteremotedata instanc simpli pass remot path folder comput store codeblock ipython remotedata datafactorycoreremot comput load_computerlabelcomputer_label remot remotedataremote_pathabsolutepathtoremotedirectori computerloc see content remot folder use pymethaiidaormnodesdataremoteremotedatalistdir method codeblock ipython remotelistdir filetxt filetxt subdir see content subdirectori pass rel path pymethaiidaormnodesdataremoteremotedatalistdir method codeblock ipython remotelistdirsubdir filetxt modulepi warn use pymethaiidaormnodesdataremoteremotedatalistdir method method retriev inform remot comput open connect remot comput use transport type use strongli discourag write script andor workflow todo _topicsdata_typescorecod titl code _topicsdata_typesmateri materi scienc data type sinc aiida first develop within comput materi scienc commun aiidacor still contain sever data type specif field section list data type provid import exampl usag tabl width class entri point store databas store repositori refstructuredata topicsdata_typesmaterialsstructur structur cell period boundari condit atom posit speci kind reftrajectorydata topicsdata_typesmaterialstrajectori arraytrajectori structur speci shape cell step posit array array data numpi format refupfdata topicsdata_typesmaterialsupf upf md upf element pseudopotenti pseudopotenti file refkpointsdata topicsdata_typesmaterialskpoint arraykpoint mesh mesh offset list kpoint array shape label indic array data numpi format refbandsdata topicsdata_typesmaterialsband arrayband unit label number shape band kpoint array array data numpi format _topicsdata_typesmaterialsstructur structuredata pyclassaiidaormnodesdatastructurestructuredata data type repres structur ie collect site defin cell boundari condit period default set nonperiod direct exampl say want creat pyclassaiidaormnodesdatastructurestructuredata instanc bcc li let begin creat instanc defin unit cell codeblock ipython structuredata datafactorycorestructur unit_cel structur structuredatacellunit_cel note default unit crystal structur cell atom coordin aiida  ngstrm next add li atom structur use pyclassaiidaormnodesdatastructurestructuredataappend_atom method codeblock ipython structureappend_atomposit symbolsli structureappend_atomposit symbolsli check cell site set properli check cell site properti codeblock ipython structurecel structuresit site kind name li site kind name li pyclassaiidaormnodesdatastructurestructuredata node also obtain format wellknown materi scienc python librari atom simul environ httpswikifysikdtudkaseindexhtml_ ase pymatgen httpspymatgenorgindexhtml_ codeblock ipython structureget_as atomssymbolsli pbctrue cell mass structureget_pymatgen structur summari lattic abc angl volum b c periodicsit li periodicsit li export follow export format avail pyclassaiidaormnodesdatastructurestructuredata xsf format support eg xcrysden visual softwar support period cell xyz classic xyz format typic support period cell even cell indic comment line cif export cif format without symmetri reduct ie alway store structur p symmetri node export use verdi cli exampl codeblock consol verdi data structur export format xsf identifi lixsf identifi one possibl identifi node eg pk uuid output structur xsf format write file _topicsdata_typesmaterialstrajectori trajectorydata pyclassaiidaormnodesdataarraytrajectorytrajectorydata data type repres sequenc structuredata object number atom kind site chang time besid coordin also option store veloc list pyclassaiidaormnodesdatastructurestructuredata instanc call structure_list repres trajectori system creat pyclassaiidaormnodesdataarraytrajectorytrajectorydata instanc list codeblock ipython trajectorydata datafactorycorearraytrajectori trajectori trajectorydatastructure_list note contrari pyclassaiidaormnodesdatastructurestructuredata data type cell atom posit store numpi array repositori databas export export pyclassaiidaormnodesdataarraytrajectorytrajectorydata node verdi data trajectori export accept number format includ xsf cif addit paramet like step num choos export given trajectori step follow export format avail xsf format support eg xcrysden visual softwar support period cell cif export cif format without symmetri reduct ie alway store structur p symmetri todo think exampl use case see _ _ httpsgithubcomaiidateamaiidacoreissu _topicsdata_typesmaterialsupf upfdata pyclassaiidaormnodesdataupfupfdata data type repres pseudopotenti upf format eg use quantum espresso_ see also aiida quantum espresso plugin_ usual instal part pseudopotenti famili exampl via aiidapseudo httpsgithubcomaiidateamaiidapseudo_ packag see pseudopotenti famili instal aiida profil use verdi cli codeblock consol verdi data upf listfamili success sssp_v_precision_pb pseudo success sssp_v_efficiency_pb pseudo _quantum espresso httpwwwquantumespressoorg _aiida quantum espresso plugin httpaiidaquantumespressoreadthedocsioenlatest _topicsdata_typesmaterialskpoint kpointsdata pyclassaiidaormnodesdataarraykpointskpointsdata data type repres either grid kpoint reciproc space crystal structur explicit list kpoint option weight associ one creat pyclassaiidaormnodesdataarraykpointskpointsdata instanc describ regular x x mesh kpoint execut follow set command verdi shell codeblock ipython kpointsdata datafactorycorearraykpoint kpoints_mesh kpointsdata kpoints_meshset_kpoints_mesh creat x x mesh center gamma point ie without offset altern also defin pyclassaiidaormnodesdataarraykpointskpointsdata node list kpoint use pymethaiidaormnodesdataarraykpointskpointsdataset_kpoint method codeblock ipython kpoints_list kpointsdata kpoints_listset_kpoint case also associ label point use gener plot band structur store pyclassaiidaormnodesdataarraybandsbandsdata instanc codeblock ipython kpoints_listlabel g kpoints_listlabel g _topicsdata_typesmaterialskpointsautomat automat comput kpoint path aiida provid number tool wrapper automat comput kpoint path given cell crystal structur main interfac provid two method pyfuncaiidatoolsdataarraykpointsget_kpoints_path pyfuncaiidatoolsdataarraykpointsget_explicit_kpoints_path method also conveni export directli eg aiidatoolsget_kpoints_path differ two method follow pyfuncaiidatoolsdataarraykpointsget_kpoints_path return dictionari kpoint coordin eg gamma x l list tupl endpoint segment eg gamma x x l l gamma mathgammaxlgamma path pyfuncaiidatoolsdataarraykpointsget_explicit_kpoints_path instead return list kpoint follow path predefin usercustomiz distanc point eg someth like depend underli code work one method might prefer docstr method describ expect paramet gener interfac requir alway structuredata first paramet structur well string method use default seekpath httpsgithubcomgiovannipizziseekpath_ also legaci method implement earlier version aiida avail see descript addit paramet pass kwarg underli implement often accept differ number paramet _topicsdata_typesmaterialskpointsseekpath seekpath implement specifi methodseekpath seekpath httpsgithubcomgiovannipizziseekpath_ librari use gener path note requir seekpath instal avail default order reduc depend aiida core easili instal use pip instal seekpath full descript accept paramet refer docstr underli method pyfuncaiidatoolsdataarraykpointsseekpathget_explicit_kpoints_path pyfuncaiidatoolsdataarraykpointsseekpathget_kpoints_path gener inform seekpath document httpsseekpathreadthedocsio_ use implement pleas cite hinuma paper httpsdoiorgjcommatsci_ hinuma g pizzi kumagai f oba tanaka band structur diagram path base crystallographi comp mat sci doi jcommatsci dropdown legaci implement refer implement avail sinc earli version aiida note case three direct period boundari condit implement expect structur alreadi standard accord setyawan paper see journal refer case kpoint band structur return incorrect case dealt correctli librari case axe swap librari correctli take swappingrot account assign kpoint label coordin therefor suggest use seekpath implement abl automat correctli identifi standard crystal structur primit convent describ hinuma paper httpsdoiorgjcommatsci_ full descript accept paramet refer docstr underli method pyfuncaiidatoolsdataarraykpointslegacyget_explicit_kpoints_path pyfuncaiidatoolsdataarraykpointslegacyget_kpoints_path gener inform seekpath document httpsseekpathreadthedocsio_ use implement pleas cite correct refer follow one implement base setyawan paper httpsdoiorgjcommatsci_ w setyawan curtarolo highthroughput electron band structur calcul challeng tool comp mat sci doi jcommatsci implement base ramirez paper httpsdoiorgqua_ r ramirez c bohm simpl geometr gener special point brillouinzon integr twodimension bravai lattic int j quant chem xxx doi qua _topicsdata_typesmaterialsband bandsdata pyclassaiidaormnodesdataarraybandsbandsdata data type dedic store band structur differ type electron band phonon bandstructurelik quantiti function kpoint brillouin zone section describ usag bandsdata store electron band structur silicon logic behind method dropdown panel explain expand use case creat pyclassaiidaormnodesdataarraybandsbandsdata node plot band structur dropdown creat bandsdata instanc manual start work pyclassaiidaormnodesdataarraybandsbandsdata data type import use datafactori creat object type bandsdata codeblock python aiidaplugin import datafactori bandsdata datafactorycorearrayband bands_data bandsdata import band need make sure two array one contain kpoint anoth contain band shape kpoint object nkpoint shape band nkpoint nstate let assum number kpoint number state kpoint band array look follow codeblock python import numpi np kpoint nparray array shape band nparray array shape size kpoint mesh numb state insert kpoint band bands_data object employ set_kpoint set_band method codeblock python bands_dataset_kpointskpoint bands_dataset_bandsband unitsev dropdown plot band structur next want visual band structur one thing may want add array kpoint label codeblock python label gamma x x u bands_datalabel label bands_datashow_mpl visual band result band structur look follow figur includebandspng warn aiida node bands_data object store bands_datastor wont accept modif may notic depend assign kpoint label output show_mpl method look differ pleas compar codeblock python bands_datalabel gamma x u bands_datashow_mpl bands_datalabel gamma x u bands_datashow_mpl first case two neighbor kpoint x label look like xy second case separ certain distanc logic behind differ follow first case plot method discov two neighbor kpoint assum discontinu point band structur eg gammaxyu second case kpoint label x neighbor anymor plot certain distanc interv kpoint x axi proport cartesian distanc dropdown deal spin bandsdata object also deal result spinpolar calcul two provid differ band two differ spin merg one array import use set_band method codeblock python bands_spin band band distinguish band differ spin subtract second band structur bands_dataset_bandsbands_spin unitsev bands_datashow_mpl shape band array becom nspin nkpoint nstate dropdown export pyclassaiidaormnodesdataarraybandsbandsdata data type export verdi data band export accept number format includ see also addit paramet like prettifyformat formatnam see valid format yminlim ymaxlim specifi yaxi limit follow export format avail agr export xmgrace agr file band plot agr_batch export xmgrace batch file togeth independ dat file dat_block export dat file line data point xy band separ block empti line dat_multicolumn export dat file line valu given x coordin x x linear coordin along band path yn band energi gnuplot export gnuplot file togeth dat file json export json file band divid segment mpl_singlefil export python file execut show plot use matplotlib modul data includ python file multilin string contain data json format mpl_withjson json data store separ differ file mpl_pdf creat py file run export band structur pdf file vectori note requir python matplotlib modul instal use_latex true requir latex instal system typeset label well dvipng binari mpl_png creat py file run export band structur pdf file vectori note format depend mpl_pdf format aiida provid number function prettifi label band structur label present data node ie replac gamma mathgamma k_ mathk_ instanc make sens output format eg xmgrace gnuplot matplotlib prettifi function defin method pyclassaiidacommonutilsprettifi class obtain call pymethprettifierget_prettifiersaiidacommonutilsprettifierget_prettifi prettifi chosen depend two aspect raw label store databas two type exist current seekpath use seekpath modul greek letter written explicitli eg gamma underscor use indic subscript k_ old simpl format mathgamma indic g underscor symbol depend output format xmgrace specif syntax greek letter subscript matplotlib use latex syntax etc export format alreadi decid prettifi best use need chang pass prettify_format paramet pymethaiidaormnodesdatadatadataexport method valid prettifi includ agr_seekpath format xmgrace use seekpath raw label syntax agr_simpl format xmgrace use simpl raw label syntax latex_simpl format latex includ dollar sign use seekpath raw label syntax latex_seekpath format latex includ dollar sign use simpl raw label syntax gnuplot_simpl format gnuplot unicod greek letter latex syntax without dollar sign underscor use seekpath raw label syntax gnuplot_seekpath format gnuplot unicod greek letter latex syntax without dollar sign underscor use simpl raw label syntax pass noop prettifi leav string unchang raw valu todo _topicsdata_typesmaterialscif titl cifdata _topicsdata_typesmaterialsorbit titl orbitaldata _topicsdata_typesmaterialsproject titl projectiondata _topicsdata_typesexport export data node next cli command describ data node pymethaiidaormnodesdatadatadataexport method allow export given data node file varieti avail format eg pass visual softwar pymethaiidaormnodesdatadatadataexport method ask filenam write file result possibl one file written exampl produc gnuplot script data typic differ dat file return valu function list file creat list export format depend specif data plugin export format typic infer file extens possibl want specifi given format pass addit fileformat paramet pymethaiidaormnodesdatadatadataexport list valid export format obtain call dataget_export_format method return list string valid format dont want export directli file want get simpli content file string call pymethaiidaormnodesdatadatadata_exportcont method pass also fileformat paramet return valu tupl length first element string content main file second dictionari possibl empti list addit file createdneed key filenam valu file content _topicsdata_typesplugin ad support custom data type node refproven graphtopicsproven input output process refer data repres classaiidaormnodesdatadatadata node sinc data come shape form classaiidaormnodesdatadatadata class sub class aiida ship basic data type classaiidaormnodesdataintint repres simpl integ classaiidaormnodesdatadictdict repres dictionari keyvalu pair also complex data type classaiidaormnodesdataarrayarrayarraydata store multidimension array number basic data type serv need major applic specif solut may use even necessari next section explain refhow new data type createdtopicsdata_typesplugincr refguidelinestopicsdata_typesplugindesignguidelin ideal observ design process _topicsdata_typesplugincr creat data plugin creat new data type simpl creat new sub class base classaiidaormnodesdatadatadata class codeblock python aiidaorm import data class newdatadata new data type wrap singl valu point new data type noth special typic one creat new data type repres specif type data purpos exampl let assum goal newdata type store singl numer valu allow one construct new newdata data node desir valu exampl codeblock python node newdatavalu need allow pass valu constructor node class therefor overrid constructor methaiidaormnodesnodenode__init__ codeblock python aiidaorm import data class newdatadata new data type wrap singl valu def __init__self kwarg valu kwargspopvalu super__init__kwarg selfset_attributevalu valu warn class function properli signatur constructor chang constructor parent class call call constructor base class remov valu keyword keyword argument kwarg base class expect rais except left keyword argument final step actual store valu pass caller constructor new node two locat perman store properti databas file repositori section refdesign guidelinestopicsdata_typesplugindesignguidelin go detail advantag disadvantag option use sinc store singl valu easiest best option use databas node attribut store keyvalu pair long valu json serializ ad valu node attribut queryabl databas instanc newdata node store codeblock python node newdatavalu creat new node instanc memori nodeset_attributevalu memori node attribut chang nodestor store node instanc databas store node instanc databas attribut frozen nodeset_attributevalu fail store valu attribut node instanc ensur valu retriev even node reload later point time besid make sure content data node store databas file repositori data type class also provid use method user retriev data exampl current state newdata class order retriev valu store newdata node one need codeblock python node load_nodeidentifi nodeget_attributevalu word user newdata class need know valu store attribut name valu easi rememb therefor userfriendli sinc newdata type class give use method let introduc one return valu store codeblock python aiidaorm import data class newdatadata new data type wrap singl valu properti def valueself return valu store instanc return selfget_attributevalu addit instanc properti valu make retriev valu newdata node lot easier codeblock python node load_nodeidentifi valu nodevalu said addit attribut data type also store properti file repositori exampl custom data type need wrap singl text file codeblock python import os aiidaorm import data class textfiledatadata data class use wrap singl text file store file repositori def __init__self filepath kwarg construct new instanc set content file param file absolut filepath file wrap super__init__kwarg filenam ospathbasenamefilepath get filenam absolut path selfput_object_from_filefilepath filenam store file repositori given filenam selfset_attributefilenam filenam store attribut filenam def get_contentself return content singl file store data node return content file string filenam selfget_attributefilenam return selfget_object_contentfilenam creat new instanc data type get content codeblock python node textfiledatafilepathsomeabsolutepathtofiletxt nodeget_cont return content file exampl simplifi version classaiidaormnodesdatasinglefilesinglefiledata data class ship aiidacor happen use case close cours better use class sub class adapt need present exampl new data type cours trivial concept alway easili extend complex custom data type follow section provid use guidelin optim design new data type _topicsdata_typesplugindesignguidelin databas repositori decid store properti data type one option choos databas file repositori node properti store databas attribut directli searchabl part databas queri wherea data store file repositori queri mean exampl possibl search node particular databasestor integ attribut fall certain valu rang valu store file within file repositori would directli searchabl way howev store larg amount data within databas come cost slow databas queri therefor big data think larg file whose content necessarili need queri better store file repositori data type may safe use databas file repositori parallel individu properti properti store databas store attribut node node class variou method set attribut pymethaiidaormentitiesentityattributesmixinset_attribut pymethaiidaormentitiesentityattributesmixinset_attribute_mani _topicstransport transport plugin term transport aiida refer class engin use perform oper local remot machin pyclassaiidaengineprocessescalcjobscalcjobcalcjob submit base class pyclassaiidatransportstransporttransport defin interfac oper copi file execut command transport plugin class implement base class specif connect method aiidacor packag ship two transport plugin pyclassaiidatransportspluginslocallocaltransport pyclassaiidatransportspluginssshsshtransport class local transport use connect localhost make use standard python modul like os shutil ssh transport use machin connect ssh simpli wrapper around librari paramiko httpswwwparamikoorg_ instal requir depend aiidacor develop plugin transport class actual almost never use directli user mostli util engin use transport plugin connect machin calcul job manag run engin abl use alway method regardless kind transport requir connect comput question gener transport class contain set minim method implement must support order fulli compat plugin notimplementederror rais interrupt manag calcul whatev use transport plugin gener function plugin pymethaiidatransportstransporttransport__init__ method use initi class instanc without actual open transport channel connect must open pymethaiidatransportstransporttransport__enter__ method close pymethaiidatransportstransporttransport__exit__ pymethaiidatransportstransporttransport__enter__ method let use transport class use statement see python doc httpsdocspythonorgreferencecompound_stmtshtmlwith_ way similar follow codeblock python transportplugin transport transportsome_method ensur exampl local plugin use hidden boolean variabl _is_open set pymethaiidatransportstransporttransport__enter__ pymethaiidatransportstransporttransport__exit__ method call ssh logic instead given properti sftp function requir care copi function call use follow terminolog put local sourc remot destin get remot sourc local destin copi copi file remot sourc remot destin note function must accept file folder intern fallback function like putfil puttre last function requir care pymethaiidatransportstransporttransportexec_command_wait analogu subprocess httpdocspythonorglibrarysubprocesshtml_ python modul function give freedom execut string remot command thu could produc nasti effect written care warn sure escap string bash download downloadthi templat transport_templatepi start point implement new transport plugin contain interfac method need implement includ docstr work sphinx document note inform aiida new transport plugin must regist entri point aiidatransport entri point group pleas visit aiida registri httpsaiidateamgithubioaiidaregistry_ see exampl done topic toctre maxdepth cli processesindex calculationsindex workflowsindex provenanceindex data_typ databas repositori plugin schedul transport todo daemon proven todo _topicsdaemon daemon _ _ httpsgithubcomaiidateamaiidacoreissu _topicsprovenanceconcept concept node link two import concept aiida data process former piec data simpl integ float way complex data concept dictionari paramet folder file crystal structur process oper data order produc new data process come two differ form calcul process abl creat new data case instanc extern simul code gener new data workflow process orchestr workflow calcul ie manag logic flow abl call process workflow data input gener new data return data alreadi databas one typic case return data creat calcul call data process repres aiida proven graph node graph graph edg refer link come differ form input link connect data node process node use input calcul workflow creat link connect calcul node data node creat return link connect workflow node data node return call link connect workflow node process node directli call calcul workflow note creat return link often collect refer output link data proven logic proven aiida automat store entiti databas link form direct graph direct graph automat track proven data produc calcul return workflow track proven way one alway fulli retrac particular piec data came exist thu ensur reproduc particular defin two type proven data proven consist part graph consist data calcul ie without consid workflow input creat link connect data proven record full histori data gener due causal principl data proven part graph direct acycl graph dag ie node connect direct edg contain cycl logic proven consist workflow data node togeth input return call link connect logic proven acycl eg workflow act filter return one input directli introduc cycl data proven essenti log calcul gener data use certain input data proven alon alreadi guarante reproduc one could run one one calcul provid input would obtain output logic proven give addit inform specif calcul run imagin case start structur filter oper pick one run simul data proven show simul run structur pick logic proven also show specif structur pick random via specif workflow logic entiti besid node data process aiida defin entiti like pyclassaiidaormcomputerscomput repres comput supercomput comput cluster calcul run data store pyclassaiidaormgroupsgroup group node togeth organiz purpos pyclassaiidaormusersus keep track user first gener given node comput group follow section describ detail gener proven concept actual implement aiida specif refer python class implement classinherit relationship _topicsprovenanceimplement implement graph node node aiida proven graph group two main type process node processnod repres execut calcul workflow data node data repres piec data particular process node divid two sub categori calcul node calculationnod repres code execut creat new data subdivid two subclass pyclassaiidaormnodesprocesscalculationcalcjobcalcjobnod repres execut calcul extern aiida typic via job batch schedul see concept refcalcul jobstopicscalculationsconceptscalcjob pyclassaiidaormnodesprocesscalculationcalcfunctioncalcfunctionnod repres execut python function see concept refcalcul functionstopicscalculationsconceptscalcfunct workflow node workflownod repres python code orchestr execut workflow calcul option return data creat process call subdivid two subclass pyclassaiidaormnodesprocessworkflowworkchainworkchainnod repres execut python class instanc builtin checkpoint process may pausedstoppedresum see concept refwork chainstopicsworkflowsconceptsworkchain pyclassaiidaormnodesprocessworkflowworkfunctionworkfunctionnod repres execut python function call process see concept refwork functionstopicsworkflowsconceptsworkfunct class hierarchi process node shown figur _fig_provenance_class_hierarchi figur includeimagesclass_hierarchypng hierarchi orm class process node instanc lowest level class actual enter proven graph two upper level mostli taxonom purpos allow us refer multipl class reason graph well place defin common function see section refprocess topicsprocessesconcept concern data node base class data subclass provid function specif data type python method oper often name subclass contain word data append requir exampl pyclassaiidaormnodesdatafloatfloat pyclassaiidaormnodesdataintint pyclassaiidaormnodesdataboolbool pyclassaiidaormnodesdatastrstr pyclassaiidaormnodesdatalistlist pyclassaiidaormnodesdatadictdict repres dictionari keyvalu pair paramet gener natur need belong specif data subclass pyclassaiidaormnodesdatastructurestructuredata repres crystal structur data contain chemic symbol atom posit atom period cell period structur pyclassaiidaormnodesdataarrayarrayarraydata repres gener numer array data python numpi array pyclassaiidaormnodesdataarraykpointskpointsdata repres numer array kpoint data subclass arraydata detail inform see refaiida data type datatyp next section introduc link node creat aiida graph show exampl clarifi introduc graph link process node connect input output data node direct link calcul process creat data workflow process call calcul return output consid follow graph exampl repres data node circl calcul node squar workflow node diamond shape _fig_provenance_simple_workflow figur includeimagesschematic_provenance__simple_workflowpng simpl proven graph workflow w sub call calcul c sub workflow take singl data node sub input pass calcul call calcul creat new data node sub also return workflow node notic differ style name two link come sub intent calcul creat new data wherea workflow mere return subtl distinct big consequ allow workflow process return data also return data among input _fig_provenance_cycl figur includeimagesschematic_provenance__cyclepng proven graph exampl workflow node receiv three data node input return one input input link sub w sub return link w sub sub introduc cycl graph scenario like repres numreffig_provenance_cycl would creat cycl proven graph break acycl dag restor direct acycl graph separ entir proven graph two plane describ data proven logic proven divis acycl graph restor data proven plane addit benefit think proven graph two plane allow inspect differ layer granular imagin high level workflow call larg number calcul subworkflow may also call subprocess final produc return one data node result graph exampl basic definit aiida proven graph place let take look exampl consid sequenc comput add two number x multipli result third number z sequenc repres proven graph would look someth like shown numreffig_provenance_add_multiply_data _fig_provenance_add_multiply_data figur includeimagesadd_multiply_calcfunction_datapng dag comput xyz two simpl calcul c sub repres addit c sub multipl two data node sub sub input c sub creat data node sub togeth sub sub form input c sub multipli valu creat product repres sub simpl exampl extern process control exact sequenc oper may imagin howev ad workflow call two calcul success shown numreffig_provenance_add_multiply_ful _fig_provenance_add_multiply_ful figur includeimagesadd_multiply_calcfunction_fullpng calcul xyz perform use workflow data node sub sub sub input workflow w sub call calcul c sub input sub sub call calcul c sub use input sub sub creat c sub calcul c sub creat data node sub final return workflow w sub notic omit workflow node link proven graph numreffig_provenance_add_multiply_ful one would end exact graph shown numreffig_provenance_add_multiply_data data proven graph _topicsprovenanceconsist consist natur scientif research becom indispens abl delet part databas eg error made input misspel useless calcul perform export collabor public purpos featur provid aiida one aspect common easili lead proven graph incomplet inform better understand let take look follow basic proven graph _delexp_examplea figur includeimagesdelexp_exampleapng even simpl case export calcul node output data node equival delet input data node would lost part critic inform need run calcul d_ node thu lose reproduc calcul c_ simpl case therefor order consist proven whenev export calcul node must also import input node symmetr whenev delet data node must also delet calcul use input one mani rule must consid tri manual edit proven databas key messag rememb aiida delet export node explicitli target user also includ node need keep consist proven result databas also worth note success export partial inform aiida abl reconstruct link might broken divid data export first export previou graph export next section full databas _delexp_exampleb figur includeimagesdelexp_examplebpng aiida abl automat identifi share node d_ connect section back togeth import process kind recognit doesnt matter subgraph export first follow section explain detail criteria includ node correspond travers rule _topicsprovenanceconsistencytraversalrul travers rule run verdi node delet node_id verdi archiv creat n node_id aiida look link incom outgo node specifi decid node critic keep decis import consid type link also follow along direct call forward direct revers direct backward direct clarifi exampl delet data node d_ aiida follow input_calc link forward direct case decid link node c_ must also delet initi target node instead c_ input_calc link would follow backward direct case node d_ delet explain process repeat recurs everi node includ delet export node need ad rule defin whether link node ad deleteexport list base kind direct link call travers rule follow section describ rule export delet procedur tabl group accord type node link involv also provid illustr case consid encircl node one target node red arrow point one consid addit deleteexport list data calcul node first exampl alreadi discuss case delet input node case necessari also delet calcul use input aiida appli criterion also delet output case follow creat link backward direct mark delet also calcul creat reason calcul miss output could mislead instanc calcul produc option output depend combin input flag use miss output might interpret piec inform comput calcul case export rule typic revers use delet therefor case follow rule appli export calcul node input data node creat output node must export well hand export data node user typic need also export calcul use input may repres work default need export well unless explicitli specifi user list node equival delet calcul one typic want keep input might use unrel calcul happen instead output calcul delet often one might want delet recurs output gener howev leav option user delet calcul keep output databas emphas oper remov proven inform output node case use even need remov input protect copyright creat smaller archiv file transfer collabor want work output data illustr diagram explicitli target name rule behavior export target node behavior delet target node node encircl imag includeimagesdelexp_casedcpng input_calc_forward default valu fals fix valu true scale link node wont export default link node alway delet imag includeimagesdelexp_casedcpng input_calc_backward fix valu true fix valu fals f_ scale link node alway export link node never delet imag includeimagesdelexp_casecdpng create_forward fix valu true default valu true scale link node alway export link node delet default imag includeimagesdelexp_casecdpng create_backward default valu true fix valu true scale link node export default link node alway delet f although provid option automat export calcul use input target data node specifi input_calc_forwardtru current provid reciproc option delet data node input target calcul node mainli potenti danger would impli automat enabl upward travers data proven delet would make extrem hard predict control node ultim affect data workflow node behavior consid input_work link exactli consid input_calc link reason case return link partial similar one creat one inde isnt desir result databas miss output export workflow return data node also includ delet data node return workflow also remov howev export return node default behavior travers backward return link sinc data node might return sever unrel workflow repres select procedur studi exampl unrel creation workflow respons coordin creation includ export directli chain effect includ creat calcul create_backward includ call workflow call_calc_backward call_work_backward see next section illustr diagram explicitli target name rule behavior export target node behavior delet target node node encircl imag includeimagesdelexp_casedwpng input_work_forward default valu fals fix valu true scale link node wont export default link node alway delet imag includeimagesdelexp_casedwpng input_work_backward fix valu true fix valu fals scale link node alway export link node never delet imag includeimagesdelexp_casewdpng return_forward fix valu true fix valu fals f_ scale link node alway export link node never delet imag includeimagesdelexp_casewdpng return_backward default valu fals fix valu true scale link node wont export default link node alway delet f reason prevent delet return data node sinc logic proven cyclic might end delet input thu propag delet process unrel part databas case want delet return data node abl set call_calc_forwardtru see create_forwardtru default valu workflow calcul node final consid possibl call link process result parent workflow depend critic subworkflow calcul launch export workflow node therefor alway travers call link call_calc call_work forward direct includ children process ie process directli call sinc travers rule appli recurs mean also children process workflow child target one export well analog delet process appli opposit direct backward includ parent workflow target node one parent parent etc sinc call link follow backward default target one process either export delet result select child process also children parent process result call link travers direct target process node workflow mean inclus process workflow well user disabl travers call link one direct forward delet backward export finegrain control see exampl illustr diagram explicitli target name rule behavior export target node behavior delet target node node encircl imag includeimagesdelexp_casewcpng call_calc_forward fix valu true default valu true scale link node alway export link node delet default imag includeimagesdelexp_casewcpng call_calc_backward default valu true fix valu true scale link node export default link node alway delet imag includeimagesdelexp_casewwpng call_work_forward fix valu true default valu true scale link node alway export link node delet default imag includeimagesdelexp_casewwpng call_work_backward default valu true fix valu true scale link node export default link node alway delet cascad rule exampl previou section describ basic rule use aiida decid node also includ initi list node delet export rule appli recurs new node includ delet exportlist rule appli well new node includ therefor consequ use featur given set node may alway straightforward final set might includ node naiv expect let us first focu data proven ie input_calc creat link follow two rule appli go forward direct delet data node calcul use input alway delet well input_calc_forwardtru delet calcul node output data node delet default create_forwardtru consequ two togeth chain reaction everi node trace back data proven initi target node end delet well reciproc true export default behavior everi ancestor also export default create_backward true default input_calc_backward alway true regard connect data proven logic proven import thing understand default behavior program treat highestlevel workflow unit handl logic behind assumpt typic user program deal mostli interact way run predefin workflow verdi command line without need detail knowledg intern procedur default behavior design reproduc intuit outcom type usag behavior basic result set call_calc_forwardtru call_work_forwardtru make inclus process node also impli inclus child parent process node well follow rule recurs way lead command affect process within given workflow way node subprocess given highestlevel workflow end group togeth sens default affect way delet export freedom custom select section export delet avail specif switchabl flag function although final section must alway compli nonswitch rule see howev usual requir deeper understand travers rule may impli thorough analysi particular graph better illustr consid applic delet procedur follow graph _delexp_exampl imag includeimagesdelexp_examplepng scale see w_ w_ describ two similar independ procedur launch singl parent workflow w_ typic user would obtain directli run workflow w_ obtain result d_ d_ input d_ d_ may even unawar intern divis w_ two subworkflow w_ w_ henc user consid workflow mean whole set node produc longer necessari intuit thing order remov databas would target workflow node w_ delet inde would produc desir result _delexp_examplea imag includeimagesdelexp_exampleapng scale node w_ w_ would includ w_ target call_work_forwardtru node c_ c_ would also includ call_calc_forwardtru final node d_ d_ would end includ well create_forwardtru end input d_ d_ remain sinc input_work_backwardfals alway input_calc_backwardfals default result would occur user target output node instead intend delet everyth associ obtent result import notic even user delet one output whole set node gener workflow would delet one associ target data node result d_ d_ obtain highlevel process w_ default behavior underli assumpt interconnect independ one anoth two differ output singl calcul _delexp_examplea imag includeimagesdelexp_exampleapng scale case node c_ would first includ data node d_ target create_reversetru turn would includ node w_ call_calc_reversetru parent workflow w_ call_work_reversetru node w_ c_ d_ includ w_ includ reason explain paragraph custom graph travers delet export depend node becom particularli relev exampl user knowledg intern procedur parent workflow w_ want delet calcul result associ workflow w_ intuit action target w_ produc desir outcom _delexp_exampleb imag includeimagesdelexp_examplebpng scale inde c_ d_ delet call_calc_forward w_ c_ create_forward c_ d_ w_ call_work_revers w_ w_ call_work_forward w_ c_ call_calc_forward w_ d_ create_forward c_ way achiev desir outcom trivial although situat like one could propos casespecif solut target w_ switchabl flag call_work_forwardfals prevent travers w_ w_ _delexp_exampleb imag includeimagesdelexp_examplebpng scale howev approach gener applic wouldnt work w_ subworkflow need delet well gener approach first sever connect w_ delet node w_ switchabl travers rule turn independ w_ w_ explicitli reflect graph node w_ delet default set _delexp_exampleb imag includeimagesdelexp_examplebpng scale worth note workflow w_ part higherlevel workflow higherlevel logic would delet due nonswitch rule call_work_reversetru inevit outcom delet part workflow sinc due loss inform becom incomplet make sens keep w_ replac w sub w_ replac w sub w_ replac w sub c_ replac c sub c_ replac c sub d_ replac sub d_ replac sub d_ replac sub d_ replac sub _topicsprovenancecach cach hash section cover gener consider hashingcach mechan practic guid enabl disabl featur pleas visit correspond refhowto section howtoruncodescach want know intern design mechan implement check refintern section internal_architectureenginecach instead _topicsprovenancecachinghash node hash hash turn default ie node aiida hash mean even enabl cach alreadi complet number calcul calcul still use retroact cach mechan sinc hash comput hash data node comput attribut node except _updatable_attribut _hash_ignored_attribut __version__ packag defin node class content repositori folder node uuid comput node associ one hash classaiidaormprocessnod includ top hash input data node node store databas hash store _aiida_hash extra extra use find match node node class hash alreadi exist databas consid cach match use methaiidaormnodesnodeget_hash method check hash node order figur calcul reus methaiidaormnodesnode_get_objects_to_hash method may use codeblock ipython node load_nod nodeget_hash ecacbdbccbbabdedeccfaeb node_get_objects_to_hash resourc num_machin default_mpiprocs_per_machin parser_nam cpk linkname_retriev retriev aiidacommonfoldersfold xba dcebbabaec code fbdbcaafcfddcfcfdeaabbaaaea paramet cfdcccebabacfbbeebaaeadbeeb structur cfcdbbcfcdcfddcabddbbfaa parent_calc_fold eceeffcdedddbceebfabadc _topicsprovenancecachingcontrolhash control hash data node hash data node custom implement new data node class runtim pyclassaiidaormnodesnod subclass use _hash_ignored_attribut exclud list node attribut attr attr comput hash includ extra inform comput hash overrid methaiidaormnodesnode_get_objects_to_hash method use super method append list object hash also modifi hash behavior runtim pass keyword argument methaiidaormnodesnodeget_hash forward methaiidacommonhashingmake_hash process node hash process node fix influenc indirectli via hash input implement detail hash mechan process node see refher internal_architectureenginecach _topicsprovenancecachingcontrolcach control cach cach mechan two differ type role play node node current store call target node alreadi store databas consid equival refer sourc target control node look databas exist equival store done class level section refhowtoruncodescachingconfigur explain control global profil configur local context manag sourc node store target cach enabl node class see section valid cach sourc obtain method methaiidaormnodesnodenode_get_same_nod method call iter methaiidaormnodesnodenode_iter_all_same_nod take first one return find list sourc node equival target store methaiidaormnodesnodenode_iter_all_same_nod perform follow step queri databas node hash target node result node return properti methaiidaormnodesnodenodeis_valid_cach return true properti methaiidaormnodesnodenodeis_valid_cach therefor allow control whether store node use sourc cach mechan default node properti return true howev chang pernod basi set fals codeblock python node load_nodeidentifi nodeis_valid_cach fals set properti fals caus extra store node databas even load later point time is_valid_cach return fals codeblock python node load_nodeidentifi assert nodeis_valid_cach fals method possibl guarante individu node never use sourc cach classaiidaengineprocessesprocessprocess class overrid methaiidaormnodesnodenodeis_valid_cach properti give finegrain control process node cach sourc either methaiidaormnodesnodenodeis_valid_cach base class methaiidaormnodesprocessprocessprocessnodeis_finish return fals process node valid sourc likewis process class load node methaiidaormnodesprocessprocessprocessnodeprocess_class node valid cach sourc final associ process class implement methaiidaengineprocessesprocessprocessis_valid_cach method call pass node argument return true node consid valid cach sourc methaiidaengineprocessesprocessprocessis_valid_cach implement classaiidaengineprocessesprocessprocess class check whether exit code set node keyword argument invalidates_cach set true case properti return fals indic node valid cach sourc whether exit code invalid cach control invalidates_cach argument defin process spec methspecexit_cod aiidaengineprocessesprocess_specprocessspecexit_cod method warn process plugin overrid methaiidaengineprocessesprocessprocessis_valid_cach method control node consid valid cach sourc make sure call methsuperis_valid_cachenod aiidaengineprocessesprocessprocessis_valid_cach respect output fals implement also return fals compli invalidates_cach keyword exit code longer work _topicsprovenancecachinglimit limit guidelin workflow node cach current design follow requir proven graph independ whether cach enabl calcul node calcul node data input creat new data node output order make look clone calcul produc output output node copi link well workflow node workflow differ calcul return input node output node creat calcul sinc cach care ident input node content straightforward figur node return cach workflow limit typic signific impact sinc runtim aiida work chain commonli domin expens calcul cach mechan calcul trigger input calcul perform exactli aiida hash includ version python packag contain calculationdata class detect case underli python code chang without increas version number anoth scenario lead erron cach hit parser calcul implement part python packag calcul node store name version use parser note cach save unnecessari comput save disk space output node cach calcul full copi origin output final modifi hashingcach behaviour class keep mind cach match go wrong two way fals neg two node hash fals posit two differ node get hash mistak fals neg highli preferr increas runtim calcul fals posit lead wrong result _topicsproven proven topic section concept proven graph implement explain refconsistencytopicsprovenanceconsist section detail rule impos consist proven graph node export delet toctre maxdepth concept implement consist cach _topicsworkflowsconcept concept workflow aiida process see refprocess sectiontopicsprocessesconcept detail call workflow calcul option return data encod logic typic scientif workflow current two way implement workflow process refwork functionstopicsworkflowsconceptsworkfunct refwork chainstopicsworkflowsconceptsworkchain first one simplest two basic python function magic transform process ideal workflow comput intens easili implement python function complex workflow work chain better altern chain work chain work function togeth run sub process defin workflow simplic use term workflow work chain work function interchang par pro toto totum pro part follow section concept explain without go much detail implement run detail expos pleas refer respect advanc section refwork functionstopicsworkflowsusageworkfunct refwork chainstopicsworkflowsusageworkchain _topicsworkflowsconceptsworkfunct work function work function implement refcalcul functiontopicscalculationsconceptscalcfunct howev distinct use case sinc work function workflowlik process return exist data wherea calcul function creat calculationlik process creat new data differ address greater detail refprocesstopicsprocessesconceptstyp section import one understand distinct explain use workfunct continu exampl refcalcul functionstopicscalculationsconceptscalcfunct continu read section first exampl show calcfunct decor use creat two function three given integ comput sum first two multipli third keep proven even though calcul function ensur proven data kept logic call function explicitli kept proven graph gener calcul function imposs deduc whether function call straight anoth singl script whether first add function call long time later output use input multipli function captur logic proven sequenc call process exactli workflowlik process workfunct design consid follow exampl implement function call add_and_multipli decor workfunct decor includ includesnippetsworkfunctionsadd_multiply_workfunction_orchestratepi code python instead call calcul function directli script call work function consecut call calcul function pass intermedi result first second look proven graph gener exampl would see someth like follow _fig_work_functions_provenance_add_multiply_ful figur includeimagesadd_multiply_calcfunction_fullpng full proven gener work function exampl clear proven graph contain lot inform one calcul function exampl whether inform actual necessari use depend situat entir user big advantag strict separ calculationlik workflowlik process differ allow link codifi refproven graph implementationtopicsprovenanceimplement may seem bit excess first glanc new user howev addit parallel yet distinct workflow layer repres logic proven allow one ignor detail comput demonstr proven graph exact one except data workflow node shown _fig_work_functions_provenance_add_multiply_log figur includeimagesadd_multiply_calcfunction_logicalpng logic proven gener work function exampl workflow data node link shown reduc represent big pictur origin input led final result becom immedi clear convers none actual data proven lost figur workflow node omit end exact proven graph numreffig_calculation_functions_provenance_add_multipli reforigin exampletopicscalculationsconceptscalcfunct use calcul function _fig_work_functions_provenance_add_multiply_data figur includeimagesadd_multiply_calcfunction_datapng data proven gener work function exampl calcul data node link shown simpl exampl power abl select part proven graph one interest obvious limit workflow quickli becom complex deepli nest point abil group part proven graph togeth singl node effect hide intern part transpar way becom invalu addit orchestr role work function fullfil also use filter select function imagin want write process function take set input integ node return one highest valu employ calcfunct would return one input node explicitli forbidden howev workfunct return exist node even one input perfectli fine exampl implement might look like follow includ includesnippetsworkfunctionsadd_multiply_workfunction_selectpi code python work function return input node x one output highest valu proven execut select work function look like follow _fig_work_functions_provenance_select figur includeimagesselect_workfunctionpng proven gener work function select one input node warn import realiz work function exampl given node return work function alreadi store say either creat calcul function call work function pass one input accid work function return store node tri return node creat work function rais except find detail explan reason behind design choic document variou refprocess typestopicsprocessesconceptstyp present aiida refimplement proven graphtopicsprovenanceimplement _topicsworkflowsconceptsworkchain work chain demonstr easili workfunct use write workflow automat keep proven time confess work function perfect shortcom simpl exampl ad multipli number time execut function short imagin perform costli calcul eg want run actual calcjob submit schedul may run long time anywher chain workflow interrupt whatev reason progress lost checkpoint speak simpli chain work function togeth fret tackl problem aiida defin concept work chain name suggest construct way chain multipl logic step workflow togeth way allow save progress step soon success complet work chain therefor prefer solut part workflow involv expens complex calcul defin work chain aiida provid pyclassaiidaengineprocessesworkchainsworkchainworkchain class implement reimplement work function solut simpl exampl problem previou section time use work chain would look someth like follow includ includesnippetsworkchainsadd_multiply_workchain_external_computationpi code python dont intimid code snippet point exampl explain exact syntax done greater detail refadvanc workflowstopicsworkflowsusageworkchain section mere introduc concept work chain core attribut work chain defin refprocess specificationtopicsprocessesusagespec setup pymethaiidaengineprocessesprocessprocessdefin method thing need notic defin input work chain take logic outlin output produc step outlin implement class method work chain add step add first two integ call add calcul function store sum temporarili refcontexttopicsworkflowsusageworkchainscontext next step outlin multipli take sum store context comput first outlin step call multipli calcul function third input integ final result step take product produc previou step record output work chain result proven run work chain look like follow _fig_work_chains_provenance_add_multiply_workchain_ful figur includeimagesadd_multiply_workchain_fullpng proven gener work chain exampl call calcul function perform addit multipl see produc proven graph ident numreffig_work_functions_provenance_add_multiply_ful produc work function solut except workflow node work chain instead work function node full data proven kept calcul sum product work chain repres explicitli calcul node add multipli calcul function call warn usag calcul function comput sum product accid conciou design choic sinc work chain workflowlik process creat data perform calcul directli work chain outlin step would result loss data proven illustr mean worklow process abl creat new data caus loss data proven let chang previou implement perform sum product work chain outlin step instead call calcul function includ includesnippetsworkchainsadd_multiply_workchain_outline_computationpi code python result proven would look like follow _fig_work_chains_provenance_add_multiply_workchain_log figur includeimagesadd_multiply_workchain_logicalpng proven gener work chain exampl comput sum product directli outlin step instead deleg calcul function note contrast proven previou correct solut numreffig_work_chains_provenance_add_multiply_workchain_ful explicit calcul node repres comput sum product instead comput abstract repres singl workflow node repres execut work chain logic insid outlin step hidden encapsul proven graph singl workflow node addit output node repres final product return link even though creat work chain refworkflow process capac creat new nodestopicsworkflowsusageworkfunctionsreturning_data therefor exampl data proven lost import thing rememb comput happen bodi outlin step work chain explicitli repres encapsul singl node graph repres work chain execut whether loss data proven relev depend use case left develop workflow determin two exampl demonstr aiida forc particular method allow user choos exactli level granular would like maintain proven howev rule thumb want reduc loss hide proven minimum one keep real comput within bodi work function work chain minimum deleg calcul real comput work relev data proven better implement explicit calcul process usual separ calcul function advantag work chain solut addmultipli problem requir significantli code compar work function solut present begin section one bother use work chain advantag trivial exampl may difficult see imagin logic workflow becom complic calcul becom intens process specif work chain provid central way defin input output make easi see glanc work chain oper addit outlin give succinct summari logic step work chain perform work function outlin exampl trivial simpl refadvanc work chain develop sectiontopicsworkflowsusageworkchain show complex logic implement directli process specif process specif also make easi wrap exist work chain complex work chain refexpos functionalitytopicsworkflowsusageworkchainsexpose_inputs_output final mention work chain provid possibl checkpoint ie save progress certain point comput continu interrupt state work chain save outlin step expens calcul job perform individu outlin step save soon finish imposs work function interrupt comput complet intermedi progress would lost rule thumb therefor soon worfklow becom slightli complex comput intens prefer given refwork chainstopicsworkflowsconceptsworkchain refcalcul jobstopicscalculationsconceptscalcjob quick overview intend use work chain work cours lot featur learn write work chain real life problem continu read refwork chain developmenttopicsworkflowsusageworkchain section read follow part use work function better use work chain use know two workflow compon work function work chain work aiida might wonder use one simpl oper take long simplic work function may need mean use howev good rule thumb soon code expect take longer exampl want launch refcalcul jobtopicscalculationsconceptscalcjob anoth complex workflow alway best go work chain automat checkpoint guarante work step save becom import work chain offer lot featur checkpoint may make prefer work function read advanc refwork chain develop topicsworkflowsusageworkchain section _topicsworkflowsusag usag note chapter assum knowledg refbas concepttopicsworkflowsconcept differ work function work chain known one use workflow aiida process see refprocess sectiontopicsprocessesconcept detail call workflow calcul option return data encod logic typic scientif workflow current two way implement workflow process refwork functiontopicsworkflowsusageworkfunct refwork chaintopicsworkflowsusageworkchain section provid detail inform best practic implement two workflow type _topicsworkflowsusageworkfunct work function concept work function basic rule implement document detail elsewher refconcept work functionstopicsworkflowsconceptsworkfunct refimplement process functionstopicsprocessesfunct sinc work function sub type process function like calcul function implement rule good ident howev intend aim heurist differ refcalcul functionstopicscalculationsusagecalcfunct calculationlik process creat new data work function behav like workflowlik process return data entail term intend usag limit work function scope section _topicsworkflowsusageworkfunctionsreturning_data return data said mani time work function like workflowlik process return data return mean exactli context term return intend refer piec python code return valu instead refer workflow process record data node one output creat rather creat process call workflow calcul process respons creat data node workflow mere return one output exactli workfunct function take one data node input call process pass input option return output creat calcul process call explain reftechn sectiontopicsprocessesfunct output record return node simpli return node function engin inspect return valu function attach output node node repres work function verifi output node fact creat engin check node store therefor import store node creat engin rais except shown follow exampl includ includesnippetsworkfunctionsworkfunction_storepi code python return node newli creat node store engin rais follow except code bash valueerror workflowillegal_workfunct tri return unstor data node like mean new data creat insid workflow order preserv data proven use calcfunct creat node return output workflow note could cours circumv check call store node miss point problem use workfunct creat new data proven lost illustr problem let go back simpl problem implement workflow add two integ multipli result third refcorrect implementationtopicsworkflowsconceptsworkfunct result proven graph clearli captur addit multipl separ calcul node shown numreffig_work_functions_provenance_add_multiply_ful illustr would happen one call calcul function perform comput instead directli perform work function return result consid follow exampl includ includesnippetsworkfunctionsworkfunction_add_multiply_internalpi code python warn document skimmer explicit exampl use work function refcorrect implementationtopicsworkflowsconceptsworkfunct call calcul function perform comput note exampl implement explicitli call store result return avoid except thrown engin result proven would look like follow _fig_work_functions_provenance_add_multiply_intern figur includeimagesadd_multiply_workfunction_internalpng proven gener incorrect work function implement note addit multipl explicitli repres implicitli hidden insid workflow node moreov result node creat link work function creat new data howev look gener proven show exactli shouldnt faulti implement lose proven explicit represent addit multipl result node creat link mean data proven follow appear thin air compar proven graph numreffig_work_functions_provenance_add_multiply_ful gener solut correctli use calcul function perform comput trivial exampl one may think loss inform import implicitli captur workflow node halfway solut may make problem appar demonstr follow snippet addit properli done call calcul function final product still perform work function includ includesnippetsworkfunctionsworkfunction_add_multiply_halfwaypi code python warn document skimmer explicit exampl use work function refcorrect implementationtopicsworkflowsconceptsworkfunct call calcul function perform comput time around addit correctli perform calcul function howev result multipli work function return note store call explicitli product avoid engin throw valueerror purpos exampl done practic result proven would look like follow _fig_work_functions_provenance_add_multiply_halfway figur includeimagesadd_multiply_workfunction_halfwaypng proven gener incorrect work function implement use calcul function addit perform multipl red cross indic actual connect intermedi sum final result even though latter realiti deriv former gener proven show although addit explicitli repres work function call calcul function connect sum final result say direct link sum final result indic red cross even though know final answer base intermedi sum direct caus work function creat new data illustr proven data creation lost _topicsworkflowsusageworkfunctionsexit_cod exit code termin execut work function mark fail one simpli return refexit codetopicsprocessesusageexit_cod pyclassaiidaengineprocessesexit_codeexitcod class construct integ denot desir exit statu option messag exit code return engin mark node work function finish set exit statu messag valu exit code consid follow exampl code python workfunct def exiting_workfunct aiidaengin import exitcod return exitcod teapot execut work function immedi termin soon exit code return exit statu messag set teapot respect sinc output node return workfunctionnod node output valu return function call empti dictionari _topicsworkflowsusageworkchain work chain refbas concept work chaintopicsworkflowsconceptsworkchain explain elsewher section provid detail work chain implement work chain implement pyclassaiidaengineprocessesworkchainsworkchainworkchain class sinc sub class pyclassaiidaengineprocessesprocessprocess class share properti valuabl read section work refgener processestopicsprocessesusag continu concept explain appli also work chain let continu exampl present section refconcept workchainstopicsworkflowsconceptsworkchain sum two integ multipli result third provid simpl implement code snippet whose gener proven graph execut shown numreffig_work_chains_provenance_add_multiply_workchain_ful conveni copi snippet includ includesnippetsworkchainsadd_multiply_workchain_external_computationpi code python got implement stepbystep go detail interfac best practic _topicsworkflowsusageworkchainsdefin defin implement new work chain simpli creat new class sub class pyclassaiidaengineprocessesworkchainsworkchainworkchain give new class valid python class name convent end workchain alway immedi clear refer creat new work chain class first import method implement pymethaiidaengineprocessesprocessprocessdefin method class method allow develop defin characterist work chain input take output gener potenti exit code return logic outlin accomplish implement defin method start follow three line code python classmethod def definecl spec superdefinespec replac addandmultiplyworkchain actual name work chain classmethod decor indic method class method f_ instanc method second line method signatur specifi receiv class cl spec instanc pyclassaiidaengineprocessesprocess_specprocessspec object use defin input output relev properti work chain third final line extrem import call defin method parent class case pyclassaiidaengineprocessesworkchainsworkchainworkchain class warn forget call super defin method work chain fail miser _topicsworkflowsusageworkchainsdefine_inputs_output input output formal way start defin interest properti work chain spec exampl see method pymethplumpyprocessspecinput use defin multipl input port document exactli input work chain expect similarli pymethplumpyprocessspecoutput call instruct work chain produc output label result two port creation method support lot function ad help string valid document detail section refport port namespacetopicsprocessesusageports_portnamespac _topicsworkflowsusageworkchainsdefine_outlin outlin outlin set work chain apart process way defin higherlevel logic encod workflow work chain take outlin defin defin method pymethplumpyworkchainspecoutlin take sequenc instruct work chain execut implement method work chain class simpl exampl outlin consist three simpl instruct add multipli result sinc implement instanc method prefix cl indic fact method work chain class reason implement take self one argument demonstr exampl snippet outlin simpl exampl particular interest consist three simpl instruct execut sequenti howev outlin also support variou logic construct whileloop condit return statement usual best way illustr construct exampl current avail logic construct work chain outlin elif els return distinguish construct python builtin suffix underscor like while_ use work chain design import code python aiidaengin import if_ while_ return_ follow exampl show use logic construct defin outlin work chain code python specoutlin clsintialize_to_zero while_clsn_is_less_than_hundr if_clsn_is_multitple_of_thre clsreport_fizz elif_clsn_is_multiple_of_f clsreport_buzz elif_clsn_is_multiple_of_three_and_f clsreport_fizz_buzz else_ clsreport_n clsincrement_n_by_on implement extrem contriv one well known fizzbuzz f_ problem idea program suppos print sequenc number zero limit except number multipl three fizz print multipl five buzz multipl program print fizzbuzz note syntax look much like normal python syntax method use condit parenthes while_ if_ construct exampl return boolean true condit hold fals otherwis actual implement outlin step trivial code python def initialize_to_zeroself selfctxn def n_is_less_than_hundredself return selfctxn def n_is_multiple_of_threeself return selfctxn def n_is_multiple_of_fiveself return selfctxn def n_is_multiple_of_three_and_fiveself return selfctxn selfctxn def increment_n_by_oneself selfctxn intent exampl show well design outlin user look outlin good idea work chain one look implement outlin step import inform captur outlin sinc goal work chain execut well defin task goal outlin captur requir logic achiev goal clear short yet overli succint manner outlin support variou logic flow construct condit loop possibl logic express outlin bodi outlin function howev one also go overboard put fine grain logic block outlin caus becom bulki difficult understand good rule thumb design outlin follow start design work chain defin clearli task carri goal clear draw schemat block diagram necessari step logic decis connect order accomplish goal convert result flow diagram onetoon fashion outlin often result reason outlin design _topicsworkflowsusageworkchainsdefine_exit_cod exit code one properti work chain specifi process specif addit input output outlin work chain may one multipl failur mode model refexit codestopicsprocessesusageexit_cod work chain stop time simpli return exit code outlin method retriev exit code defin spec one use pymethaiidaengineprocessesprocessprocessexit_cod properti return attribut dictionari exit code label map correspond exit code exampl follow process spec code python spec processspec specexit_cod error_i_am_a_teapot process ident crisi see exit code use termin execut work chain grace refer section reftopicsworkflowsusageworkchainsaborting_and_exit_cod _topicsworkflowsusageworkchainslaunching_workchain launch work chain rule launch work chain process detail refthi sectiontopicsprocessesusagelaunch top basic rule one peculiar case work chain submit daemon submit workchain daemon process matter need make sure daemon find class need load regist class plugin system design entri point one way make sure daemon abl find howev simpli test class want go effort creat entri point make sure modul defin class python path addit make sure definit work chain file submit engin wont abl load _topicsworkflowsusageworkchainscontext context simplest work chain exampl present introductori section alreadi saw context use persist inform execut work chain pass outlin step context essenti data contain similar dictionari hold sort data engin ensur content save persist step daemon shut restart trivial exampl would follow code python def step_oneself selfctxsome_vari store context def step_twoself assert selfctxsome_vari store context step_on outlin step store string store context context address selfctx key some_vari note key use anyth would valid key normal python dictionari second outlin step step_two verifi string success persist check valu store context selfctxsome_vari warn data store context serializ simpl exampl introduc concept context howev realli one import part work chain context realli becom crucial want submit calcul anoth work chain within work chain accomplish show next section _topicsworkflowsusageworkchainssubmitting_sub_process submit sub process one main task workchain launch process calcjob anoth workchain submit process explain refanoth sectiontopicsprocessesusagelaunch accomplish use pyfuncaiidaenginelaunchsubmit launch function howev submit sub process within work chain use instead pyclassaiidaengineprocessesprocessprocess class provid pymethaiidaengineprocessesprocessprocesssubmit method greet except code python invalidoper use toplevel submit within anoth process use selfsubmit instead chang make replac toplevel submit method builtin method process class code python def submit_sub_processself node selfsubmitsomeprocess input use selfsubmit submit aiidaengin return tocontextsub_processnod selfsubmit method exact interfac global aiidaenginelaunchsubmit launcher submit method call process creat submit daemon point yet done valu return submit call result submit process rather process node repres execut process proven graph act futur somehow need tell work chain wait sub process finish futur resolv continu howev control return engin process complet call next step outlin analys result snippet alreadi reveal accomplish return instanc tocontext class context order store futur submit process store context special construct tell engin wait process finish continu work chain illustr work consid follow minim exampl includ includesnippetsworkchainsrun_workchain_submit_completepi code python explain previou section call selfsubmit given process want submit return futur add futur context access context directli explain refcontext sectiontopicsworkflowsusageworkchainscontext rather need use class pyclassaiidaengineprocessesworkchainscontexttocontext class import aiidaengin modul add futur context simpli construct instanc tocontext pass futur keyword argument return outlin step keyword use workchain exampl key use store node context execut termin return instanc tocontext signal engin wait futur contain within finish execut store node context specifi key continu next step outlin exampl inspect_workchain method point sure process work chain case termin execut although necessarili success continu logic work chain warn use tocontext construct alon enough tell engin wait sub process finish need least anoth step outlin follow step ad await step follow accord outlin engin interpret work chain done wait sub process finish think like even singl step follow also noth work chain could result sub process point wait sometim one want launch one multipl process time run parallel mechan describ possibl sinc submit singl process return tocontext instanc work chain wait process finish continu solv problem anoth way add futur context includ includesnippetsworkchainsrun_workchain_submit_parallelpi code python submit three work chain loop singl outlin step instead return instanc tocontext call methaiidaengineprocessesworkchainsworkchainworkchainto_context method method exactli syntax tocontext class except necessari return valu call multipl time one outlin step hood function also tocontext class end submit_workchain outlin step engin find futur ad call to_context wait finish good thing three sub work chain run parallel done parent work chain go next step inspect_workchain find node work chain context key use keyword argument to_context call previou step sinc want subsequ call to_context overrid previou futur creat uniqu key store exampl chose use index forloop name carri mean requir guarante uniqu key name pattern occur often want launch multipl work chain calcul parallel come uniqu name essenc howev realli creat list would better abl creat list context simpli append futur list submit achiev explain next section append want add futur submit sub process context append list rather assign key use funcaiidaengineprocessesworkchainscontextappend_ function consid exampl previou section use append_ function instead includ includesnippetsworkchainsrun_workchain_submit_appendpi code python notic submit_workchain step longer gener uniqu key base index simpli wrap futur append_ function assign gener key workchain engin see append_ function instead assign node correspond futur key workchain append list store key list yet exist automat creat selfctxworkchain contain list node complet work chain order insert inspect_workchain step simpli iter access note use append_ limit to_context method also use exactli way tocontext append process list context multipl outlin step nest context key simplifi organ context key may contain dot transpar creat namespac process exampl compar follow parallel submiss exampl includ includesnippetsworkchainsrun_workchain_submit_appendpi code python allow creat intuit group easili access structur child calcul workchain _topicsworkflowsusageworkchainsreport report execut workchain may want keep user abreast progress happen purpos workchain implement pymethaiidaengineprocessesprocessprocessreport method function logger sort take singl argument string messag need report code python def submit_calculationself selfreporther submit calcul send messag intern logger python caus pick default aiida logger also trigger databas log handler store messag databas link node work chain allow verdi process report command retriev messag fire use report method specif process note report method addit pk work chain also automat record name work chain name outlin step report messag fire inform show output verdi process report never explicitli refer work chain name outlin step name date time messag import note report system form log design read human say report system design pass inform programmat pars log messag _topicsworkflowsusageworkchainsaborting_and_exit_cod abort exit code end everi outlin step return valu inspect engin nonzero integ valu detect engin interpret exit code stop execut work chain set process state finish addit integ return valu set exit_statu work chain combin finish process state denot worchain consid fail explain section refprocess state topicsprocessesconceptsst use allow workflow design easili exit work chain use return valu commun programmat reason work chain stop assum read refsect defin exit code topicsworkflowsusageworkchainsdefine_exit_cod process specif work chain consid follow exampl work chain defin exit code code python specexit_cod error_calculation_fail child calcul finish success imagin outlin launch calcul next step check whether finish success event calcul finish success follow snippet show retriev correspond exit code abort workchain return code python def submit_calculationself input code code futur selfsubmitsomecalcjob input return tocontextcalculationfutur def inspect_calculationself selfctxcalculationis_finished_ok selfreportth calcul finish success noth return selfexit_codeserror_calculation_fail selfreportth calcul finish success inspect_calcul outlin retriev calcul submit ad context previou step check finish success properti is_finished_ok return fals exampl simpli fire report messag return exit code correspond label error_calculation_fail note specif exit code retriev workchain properti exit_cod return collect exit code defin workchain specif exit code retriev access attribut return exit code instanc pyclassaiidaengineprocessesexit_codeexitcod class caus work chain abort exit_statu exit_messag set node defin spec note notat selfexit_codeserror_calculation_fail syntact sugar retriev exitcod instanc defin spec error label construct exitcod directli return outlin step exactli effect term abort work chain execut set exit statu messag howev strongli advis defin exit code spec retriev selfexit_cod collect make easili retriev spec caller work chain messag attribut exitcod also string contain placehold use exit code messag gener enough host situat one would like parameter exit messag concret templat messag exit code simpli call methaiidaengineprocessesexit_codeexitcodeformat method pass paramet keyword argument code python exit_code_templ exitcod paramet paramet invalid exit_code_concret exit_code_templateformatparametersome_specific_key concept also appli within scope process process spec declar gener exit code whose exact messag depend one multipl paramet code python specexit_cod error_invalid_paramet paramet paramet invalid selfexit_cod collect workchain gener easili custom follow code python def inspect_calculationself return selfexit_codeserror_invalid_parameterformatparametersome_specific_key differ exampl selfexit_codeserror_invalid_paramet simpli return instanc exitcod call format substitut paramet conclus best part use exit code abort work chain execut exit statu use programmat exampl parent work chain imagin parent work chain submit work chain termin execut parent work chain want know happen child work chain alreadi note refreporttopicsworkflowsusageworkchainsreport section report messag work chain use exit statu howev perfect way parent work chain easili request exit statu child work chain exit_statu properti base valu determin proceed modular workflow design creat complex workflow good idea split smaller modular part lowest level workflow perform exactli one task workflow wrap togeth parent workflow creat larger logic unit order make approach manag need simpl possibl glue togeth multipl workflow larger parent workflow one tool aiida provid simplifi abil expos port anoth work chain _topicsworkflowsusageworkchainsexpose_inputs_output expos input output consid follow exampl work chain simpli take input return output includ includesnippetsexpose_inputschildpi code python first exampl implement thin wrapper workflow simpli forward input childworkchain forward output child output includ includesnippetsexpose_inputssimple_parentpi code python defin method simpl parent work chain use methplumpyprocess_specprocessspecexpose_input methplumpyprocess_specprocessspecexpose_output creat correspond input output port parent work chain addit aiida rememb input output expos particular work chain class use call child run_child method methaiidaengineprocessesprocessprocessexposed_input method return dictionari input parent receiv expos child use pass child final final method use methaiidaengineprocessesprocessprocessexposed_output retriev output child expos parent use methaiidaengineprocessesprocessprocessout_mani output ad output parent work chain work chain run exactli way child includ includesnippetsexpose_inputsrun_simplepi code python next see complex parent work chain creat use addit featur expos function follow work chain launch two children children share input differ b c output e taken first child wherea f taken children order avoid name conflict need creat namespac two children input output share store goal workflow call follow includ includesnippetsexpose_inputsrun_complexpi code python achiev follow workflow next section explain step includ includesnippetsexpose_inputscomplex_parentpi code python first want expos input e output toplevel use methplumpyprocess_specprocessspecexpose_input methplumpyprocess_specprocessspecexpose_output option keyword includ specifi list key input output list expos pass includea methplumpyprocess_specprocessspecexpose_input input expos addit want expos input b c output f namespac specif two children purpos pass namespac paramet expos function howev sinc shouldnt expos e use exclud keyword specifi list key expos call children use methaiidaengineprocessesprocessprocessexposed_input method forward expos input sinc input b c specif namespac need pass namespac addit paramet default methaiidaengineprocessesprocessprocessexposed_input search parent namespac given namespac search input shown call child_ input key exist multipl namespac input lowest namespac take preced also possibl disabl behavior instead search explicit namespac pass done set agglomeratefals shown call child_ cours need explicitli pass input final use methaiidaengineprocessesprocessprocessexposed_output methaiidaengineprocessesprocessprocessout_mani forward output children output parent namespac agglomer option use select output return methaiidaengineprocessesprocessprocessexposed_output method seealso practic exampl creat workflow see refhow write workflowshowtowriteworkflow refhow write error resist workflow howtorestartworkchain section rubric footnot f httpsdocspythonorglibraryfunctionshtmlclassmethod f httpsenwikipediaorgwikifizz_buzz _topicsworkflow workflow topic section provid detail inform concept workflow aiida extens guid work introductori guid work workflow found refhow run multistep workflowshowtorunworkflow toctre maxdepth concept usag _topicscalculationsconcept concept calcul process see refprocess sectiontopicsprocessesconcept detail creat new data current two way implement calcul process refcalcul functiontopicscalculationsconceptscalcfunct refcalcul jobtopicscalculationsconceptscalcjob first one simplest two basic python function magic transform process ideal calcul comput intens easili implement python function tax calcul typic perform extern code option run remot comput cluster calcul job better altern follow section concept explain without go much detail implement run detail expos pleas refer respect advanc section refcalcul functionstopicscalculationsusagecalcfunct refcalcul jobstopicscalculationsusagecalcjob _topicscalculationsconceptscalcfunct calcul function consid follow comput task hand highlight given three integ add first two multipli sum third plain python code solut would look someth like follow includ includesnippetscalcfunctionsadd_multiply_plain_pythonpi code python simpl code snippet achiev goal get desir result howev proven lost connect output function input remedi problem pyfuncaiidaengineprocessesfunctionscalcfunct calcfunct aiida function decor httpsdocspythonorgglossaryhtmltermdecorator_ transform regular python function calcul process automat store proven output refproven graphtopicsproven execut updat previou snippet calcfunct decor yield includ includesnippetscalcfunctionsadd_multiply_calcfunction_decoratorpi code python thing decor two function add line calcfunct function definit ad decor tell aiida proven function store proven graph execut mean link input output calcul node repres function execut final chang perform make possibl make input output storabl previou snippet input plain python integ type automat store proven graph node solv one wrap pyclassaiidaormnodesdataintint node sub class make storabl databas includ includesnippetscalcfunctionsadd_multiply_calcfunction_data_typespi code python differ previou snippet input wrap pyclassaiidaormnodesdataintint class result return function also pyclassaiidaormnodesdataintint node store proven graph contain result comput note sinc x insid add multipli function alreadi pyclassaiidaormnodesdataintint instanc sum also one true arithmet oper also work base aiida class int float etc would equival python type import realiz though pyclassaiidaormnodesnodenod instanc sub class thereof store inform return result process function refer refadvanc sectiontopicscalculationsusagecalcfunct trivial chang full proven result produc run function maintain look like follow _fig_calculation_functions_provenance_add_multipli figur topicsworkflowsincludeimagesadd_multiply_calcfunction_datapng proven gener calcfunct exampl exampl alreadi show calcfunct run simpli call valu return result return definit function howev sometim one would also like refer calcul node repres execut function proven graph follow exampl show two addit launch function return tupl addit result also return pk node associ process includ includesnippetscalcfunctionsadd_multiply_calcfunction_runpi code python short limit descript calcul function detail descript launch pleas refer section reflaunch processestopicsprocessesusagelaunch want detail implement calcul function best practic refer section refwork calcul functionstopicscalculationsusagecalcfunct _topicscalculationsconceptscalcjob calcul job previou section refcalcul functionstopicscalculationsconceptscalcfunct show simpl python function transform process launch execut record automat proven graph howev comput well suit implement python function rather implement separ code extern aiida interfac extern code engin aiida pyclassaiidaengineprocessescalcjobscalcjobcalcjob process class introduc detail explan implement interfac best practic found reflat sectiontopicscalculationsusagecalcjob instead focu big pictur explain broad line calcul job model execut extern code task perform launch illustr calcul job oper need extern code let imagin extern code consist bash script read input file contain two integ sum print result standard output use echo exampl code bash binbash read two integ file aiidain echo sum xcat aiidain awk print ycat aiidain awk print echo x run script read content file call aiidain expect contain two integ pars variabl x print sum want run code aiida need tell aiida run pyclassaiidacalculationsarithmeticaddarithmeticaddcalcul calcul job implement form interfac accomplish exactli exampl bash script calcjob implement specif code often refer calcul plugin essenti instruct engin run includ necessari input file creat base input receiv code execut call file retriev calcul complet note file retriev calcul job run localhost refcomput configur aiidahowtoruncodescomput includ remot machin access exampl ssh sinc calcjob process like refcalcul functionstopicscalculationsconceptscalcfunct describ run ident way includ includesnippetscalcjobsarithmetic_add_runpi code python proven gener run calcul job look someth like _fig_calculation_jobs_provenance_arithmetic_add figur includeimagesarithmetic_addpng proven gener calcul job exampl execut calcul job repres proven graph process node ie pink squar label c sub numreffig_calculation_jobs_provenance_arithmetic_add integ data node x pass input link calcul job well third input code input requir calcul job repres extern code actual execut code node instanc pyclassaiidaormnodesdatacodecod class subclass pyclassaiidaormnodesdatadatadata mean code instanc sort data node function record path execut code relat attribut defin code setup calcul job produc two output integ node contain sum x pyclassaiidaormnodesdatafolderfolderdata node contain output file retriev note output calcul job except retriev node technic creat calcul job rather implement pyclassaiidaparsersparserpars class principl step option calcul job therefor requir produc output except retriev folder data node alway parser fit concept calcul job address refthi sectiontopicscalculationsconceptscalcjobs_pars _topicscalculationsconceptscalcjobs_transport_task transport task arriv proven graph shown numreffig_calculation_jobs_provenance_arithmetic_add engin perform quit task calcul job launch engin take roughli follow step upload calcul job implement use transform input node requir input file upload work directori target machin submit execut calcul job submit schedul comput input code configur updat engin queri schedul check statu calcul job retriev job finish engin retriev output file specifi calcul plugin store node attach output node calcul task requir engin interact comput machin actual run extern code sinc pyclassaiidaormnodesdatacodecod use input calcul job configur specif pyclassaiidaormcomputerscomput engin know exactli execut task calcjob implement complet independ machin code run run calcul job differ machin chang code input one configur machin machin localhost engin need way connect remot machin order perform four task list mechan allow engin connect remot machin call transport therefor task perform use transport call transport task _topicscalculationsconceptscalcjobs_exponential_backoff exponenti backoff mechan case calcul job execut remot machin engin connect machin transport task connect remot whole host potenti problem may occur would caus calcul job fail exampl remot machin may result unreach engin may lose internet connect howev problem often temporari prevent calcul job except lost forev exponenti backoff mechan implement whenev engin perform transport task encount except instead let calcul job fail reschedul task execut later time task automat reschedul finish success interv tri increas exponenti consecut tri task still fail instead reschedul engin simpli paus calcul job output verdi process list give inform task fail codeblock bash pk creat state process label process statu h ago wait arithmeticaddcalcul paus fail transport task retrieve_calcul fail time consecut total result calcul job paus transport task fail multipl time user time investig problem problem determin temporari resolv one use verdi process play resum paus process engin automat reschedul task fail last calcul job continu left exponenti backoff mechan make engin robust respect calcul job reduc loss comput resourc due temporari problem absolut minimum note paramet delay retri maximum number retri current configur might futur _topicscalculationsconceptscalcjobs_pars parser previou section explain calcjob class function interfac aiida engin extern piec code calcul job plugin instruct engin reftransport taskstopicscalculationsconceptscalcjobs_transport_task accomplish howev mention task stop output file retriev engin attach pyclassaiidaormnodesdatafolderfolderdata node label retriev calcul job node far calcul job goe absolut requir howev often one want pars output file specif output repres individu node proven graph accomplish implement pyclassaiidaparsersparserpars class specifi input calcul job case engin call parser output file creat job success retriev parser implement retriev file pars convert output node technic detail implement parser calcul job specifi input pleas refer refdetail parser sectiontopicscalculationsusagecalcjobspars _topicscalculationsusag usag note chapter assum knowledg refbas concepttopicscalculationsconcept differ calcul function calcul job known one use calcul process see refprocess sectiontopicsprocessesconcept detail creat new data current two way implement calcul process refcalcul functiontopicscalculationsusagecalcfunct refcalcul jobtopicscalculationsusagecalcjob section provid detail inform best practic implement two calcul type _topicscalculationsusagecalcfunct calcul function section refconcept calcul functionstopicscalculationsconceptscalcfunct alreadi address aim automat record execut input output proven graph refsect process functionstopicsprocessesfunct subsequ detail rule appli implement calcul function sub type like work function howev differ given calcul function calculationlik process work function behav like workflowlik process entail term intend usag limit calcul function scope section creat data said mani time calcul function like calculationlik process creat data creat mean exactli context term creat intend refer simpl creation new data node graph interact shell script exampl rather indic creation new piec data data comput implement process exactli calcul function take one data node input return one data node output whose content base input explain reftechn sectiontopicsprocessesfunct output creat simpli return node function engin inspect return valu function attach output node calcul node repres calcul function verifi output node fact creat engin check node store therefor import store node creat engin rais except shown follow exampl includ includesnippetscalcfunctionsadd_calcfunction_storepi code python return node alreadi store engin rais follow except code bash valueerror tri return alreadi store data node calcfunct howev calcfunct return data store node simpli call store want return input node use workfunct instead reason strict node store creat function bodi indistinguish node alreadi store simpli load function bodi return eg includ includesnippetscalcfunctionsadd_calcfunction_load_nodepi code python load node would also gotten creat link calcul function even though realli creat exactli prevent ambigu calcul function requir return output node unstor note work function exactli opposit requir output return store workflowlik process creat new data detail refer refwork function sectiontopicsworkflowsusageworkfunct _topicscalculationsusagecalcjob calcul job explain calcul job implement continu exampl present section refconcept calcul jobtopicscalculationsconceptscalcjob describ code add two integ implement simpl bash script pyclassaiidaengineprocessescalcjobscalcjobcalcjob class use run code aiida sinc sub class pyclassaiidaengineprocessesprocessprocess class share properti valuabl read section work refgener processestopicsprocessesusag continu concept explain appli also calcul job _topicscalculationsusagecalcjobsdefin defin implement calcul job one simpli sub class pyclassaiidaengineprocessescalcjobscalcjobcalcjob process class implement pymethaiidaengineprocessescalcjobscalcjobcalcjobdefin method pick name valid python class name import method calcjob class defin class method defin input take output gener includ includesnippetscalcjobsarithmetic_add_spec_inputspi code python snippet demonstr class method take two argument cl refer class mandatori class method spec specif warn forget add line superdefinespec first line defin method replac class name name calcul job call defin method parent class necessari calcul job work properli name suggest spec use specifi properti calcul job exampl use defin input calcul job take exampl need abl pass two integ input defin spec call specinput first argument name input name use later specifi input launch calcul job also use label link connect data node calcul node proven graph addit done specifi type valid particular input sinc expect integ specifi valid type databas storabl pyclassaiidaormnodesdataintint class note sinc sub class calcjob call defin method inherit port declar well look implement find base class calcjob alreadi defin input code take code instanc refer code user want run launch calcjob reason declar input next defin output expect calcul produc includ includesnippetscalcjobsarithmetic_add_spec_outputspi code python input one specifi node type output default defin output requir mean calcul job termin output attach process mark fail indic output option one use requiredfals specoutput call note process spec pymethplumpyprocessspecinput pymethplumpyprocessspecoutput method provid lot function fore detail pleas refer section refprocess specificationstopicsprocessesusagespec _topicscalculationsusagecalcjobsprepar prepar defin process specif input calcul job expect output creat final remain task instruct engin calcul job actual run understand engin would accomplish let consid one typic manual prepar run comput job schedul prepar work directori scratch space machin job run creat raw input file requir execut creat launch script contain schedul direct load environ variabl final call execut certain command line paramet need instruct engin accomplish thing specif calcul job sinc instruct calcul depend implement pymethaiidaengineprocessescalcjobscalcjobcalcjobprepare_for_submiss method implement arithmeticaddcalcul consid exampl look like follow includ includesnippetscalcjobsarithmetic_add_spec_prepare_for_submissionpi code python go code linebylin let describ big pictur happen goal method help engin accomplish three step requir prepar submiss calcul job describ raw input file requir written sandbox folder pass folder argument note folder argument point temporari sandbox folder local file system use write input file prepare_for_submiss method return engin take content copi work directori calcul run top file also written file repositori node repres calcul addit measur proven even though inform written deriv content node pass input node sinc deriv form store explicitli nonetheless sometim behavior undesir exampl effici data privaci reason control variou list reflocal_copy_list topicscalculationsusagecalcjobsfile_lists_local_copi refprovenance_exclude_list topicscalculationsusagecalcjobsfile_lists_provenance_exclud requir inform direct file copi command line option use defin pyclassaiidacommondatastructurescalcinfo datastructur return method valu principl one prepare_for_submiss method write raw input file requir calcul run folder sandbox folder use calcinfo instruct engin file copi work directori use calcinfo tell code run use command line paramet standard input output redirect note prepare_for_submiss write submiss script engin know code use configur specif comput defin schedul use give engin necessari inform write launch script schedul direct write know prepare_for_submiss expect let see implement arithmeticaddcalcul accomplish linebylin input file requir exampl calcul consist two integ pass input selfinput attribut return attribut dictionari pars valid input accord process specif defin defin method mean valid input say input mark requir certain type time get prepare_for_submiss guarante dictionari return selfinput contain input correct type two input x pass calcul job launch gener input file simpli text file two number singl line separ space accomplish open filehandl input file sandbox folder write valu two int node file note format input file happen format refbash scripttopicscalculationsconceptscalcjob expect use exampl exact number input file content cours depend code calcul job written input file written creat instanc pyclassaiidacommondatastructurescalcinfo return method data structur instruct engin exactli need done execut code file copi remot comput code execut simpl exampl defin four simpl attribut codes_info list pyclassaiidacommondatastructurescodeinfo datastructur tell code run consecut job local_copy_list list tupl instruct file copi work directori local machin remote_copy_list list tupl instruct file copi work directori machin job run retrieve_list list tupl instruct file retriev work directori store local repositori job finish exampl need run singl code codes_info list singl codeinfo datastructur datastructur need defin code need run one input pass calcjob mean uuid stdout_nam attribut tell engin output execut redirect exampl set valu output_filenam option option avail calcul job set explain refsect optionstopicscalculationsusagecalcjobsopt final cmdline_param attribut take list command line paramet place execut launch script use explicitli instruct execut read input filenam store option input_filenam note sinc instruct execut read input selfoptionsinput_filenam also filenam use write input file sandbox folder final defin variou file list tell file copi file retriev briefli describ intend goal implement detail describ full reffil list sectiontopicscalculationsusagecalcjobsfile_list local copi list use instruct engin copi file might alreadi store databas instanc pyclassaiidaormnodesdatasinglefilesinglefiledata node defin pass input calcjob could cours mani copi content folder sandbox folder also caus written work directori disadvantag method howev content written sandbox folder also store repositori calcjobnod repres execut calcjob proven graph caus duplic data contain within data node write explicitli sandbox folder avoid duplic without lose proven data node cours record proven graph remot copi list use avoid unnecessari file transfer machin engin run calcul job execut exampl imagin alreadi complet calcul job remot cluster want launch second one requir output file first run input remot copi list allow specifi exactli output file copi remot work directori without retriev engin machin retriev list final allow instruct engin file retriev work directori job termin file download local machin store pyclassaiidaormnodesdatafolderfolderdata data node attach output calcjobnod link label retriev note didnt explicitli defin retriev folder data node output exampl arithmeticaddcalcul implement shown alreadi defin calcjob base class code input retriev output common calcul job implement _topicscalculationsusagecalcjobsfile_list file list _topicscalculationsusagecalcjobsfile_lists_local_copi local copi list local copi list take tupl length three repres file directori copi defin follow item node uuid node whose repositori contain file typic singlefiledata folderdata node sourc rel path rel path file directori within node repositori target rel path rel path within work directori copi file directori content exampl consid calcjob implement receiv singlefiledata node input name pseudopotenti copi content one specifi code python calc_infolocal_copy_list selfinputspseudopotentialuuid selfinputspseudopotentialfilenam pseudopotentialdat singlefiledata node contain singl file definit rel path return filenam attribut instead need transfer specif file folderdata specifi explicit key file like code python calc_infolocal_copy_list selfinputsfolderuuid internalrelativepathfiletxt relativetargetfiletxt note filenam rel sourc target path need depend fulli file store node repositori file need written work directori copi content directori sourc node simpli defin sourc rel path exampl imagin folderdata node pass folder input follow repositori virtual hierarchi code bash sub file_btxt file_atxt entir content need copi specifi local_copy_list follow code python calc_infolocal_copy_list selfinputsfolderuuid none indic entir content need copi altern one specifi sub directori eg code python calc_infolocal_copy_list selfinputsfolderuuid sub none final target rel path use write content sourc repositori particular sub directori work directori exampl follow statement code python calc_infolocal_copy_list selfinputsfolderuuid sub relativetarget result follow file hierarchi work directori calcul code bash rel target file_btxt one might think purpos list one could easili use normal normal api write file folder sandbox folder true way file copi work directori howev also copi repositori calcul node sinc case mere direct onetoon copi file alreadi part one input node unalt form duplic unnecessari add useless weight file repositori use local_copy_list prevent unnecessari duplic file content also use content particular input node privaci sensit duplic repositori _topicscalculationsusagecalcjobsfile_lists_provenance_exclud proven exclud list reflocal_copy_list topicscalculationsusagecalcjobsfile_lists_local_copi allow one instruct engin write file input file work directori without also copi file repositori calcul node discuss correspond section use order avoid duplic case data node proprietari privaci sensit duplic arbitrarili everywher file repositori howev limit local_copy_list target singl file entireti use arbitrari file written folder sandbox folder provid full control file folder store perman calcul node file repositori provenance_exclude_list introduc pyclassaiidacommondatastructurescalcinfo attribut list filepath rel base path folder sandbox folder store file repositori consid follow file structur written implement prepare_for_submiss folder sandbox code bash sub file_btxt personaldat file_atxt secretkey clearli want personaldat secretkey file end perman file repositori achiev defin code python calc_infoprovenance_exclude_list subpersonaldat secretkey specif final content repositori calcul node contain code bash sub file_btxt file_atxt _topicscalculationsusagecalcjobsfile_lists_remote_copi remot copi list remot copi list take tupl length three repres file copi remot machin calcul run defin follow item comput uuid uuid comput sourc file resid remot copi list copi file machin job run sourc absolut path absolut path sourc file remot machin target rel path rel path within work directori copi file code python calc_inforemote_copy_listselfinputsparent_foldercomputeruuid output_fold restart_fold note sourc path point directori case content recurs copi entireti _topicscalculationsusagecalcjobsfile_lists_retriev retriev list retriev list list instruct file folder retriev engin calcul job termin instruct one two format string repres rel filepath remot work directori tupl length three allow control name retriev file folder retriev folder retriev list contain number instruct use format time first format obvious simplest howev requir one know exact name file folder retriev addit subdirectori ignor retriev exact filenam known glob pattern httpsenwikipediaorgwikiglob_programming_ use origin folder structur partial kept one use tupl format follow format sourc rel path rel path respect work directori remot file directori retriev target rel path rel path directori retriev folder content sourc copi string indic top level retriev folder depth number level nest sourc path maintain copi start deepest file illustr variou possibl consid follow exampl file hierarchi remot work directori code bash path sub file_ctxt file_dtxt file_btxt file_atxt find exampl variou use case file folder retriev exampl start format retrieve_list follow schemat depict final file hierarchi would creat retriev folder explicit file folder retriev singl toplevel file folder content final folder structur import code bash retrieve_list file_atxt file_atxt code bash retrieve_list path sub file_ctxt file_dtxt file_btxt explicit nest file folder retriev singl file folder content locat subdirectori remot work directori final folder structur import code bash retrieve_list pathfile_btxt file_btxt code bash retrieve_list pathsub file_ctxt file_dtxt explicit nest file folder keep partial hierarchi follow exampl show file hierarchi retriev file control chang depth paramet tupl one control part remot folder hierarchi kept given exampl maximum depth remot folder hierarchi follow exampl show specifi exact folder structur kept code bash retrieve_list pathsubfile_ctxt path sub file_ctxt depth two level nest kept includ file path folder discard code bash retrieve_list pathsubfile_ctxt sub file_ctxt appli directori specifi directori first element content retriev depth first level sub kept folder hierarchi code bash retrieve_list pathsub sub file_ctxt file_dtxt pattern match exact file folder name known beforehand glob pattern use follow exampl file match ctxt directori pathsub retriev sinc depth file copi without pathsub subdirectori code bash retrieve_list pathsubctxt file_ctxt keep subdirectori structur one set depth paramet previou exampl code bash retrieve_list pathsubctxt sub file_ctxt specif target directori final folder hierarchi retriev file retriev folder determin hierarchi remot work directori also control second third element instruct tupl final depth element control level hierarchi sourc maintain second element specifi base path retriev folder remot file retriev exampl retriev nest file maintain remot hierarchi store local target directori one follow code bash retrieve_list pathsubfile_ctxt target target path sub file_ctxt appli folder retriev code bash retrieve_list pathsub target target sub file_ctxt file_dtxt note target use renam retriev file folder indic path directori sourc copi target rel path also compat glob pattern sourc rel path code bash retrieve_list pathsubctxt target target file_ctxt retriev temporari list recal explain refprepar sectiontopicscalculationsusagecalcjobsprepar file retriev engin follow retriev list store retriev folder data node mean file retriev complet calcul job store repositori retriev big file caus repositori grow significantli often howev might need part inform contain retriev file solv common issu concept retriev temporari list specif retriev temporari list ident normal refretriev listtopicscalculationsusagecalcjobsfile_lists_retriev ad calc_info retrieve_temporary_list attribut codeblock python calcinfo calcinfo calcinforetrieve_temporary_list relativepathtofiletxt differ unlik file retriev list perman store retriev pyclassaiidaormnodesdatafolderfolderdata node file retriev temporari list store temporari sandbox folder folder pass retrieved_temporary_fold keyword argument pars method refparsertopicscalculationsusagecalcjobspars one specifi calcul job codeblock python def parseself kwarg pars retriev file calcul job retrieved_temporary_fold kwargsretrieved_temporary_fold parser implement pars file store relev inform output node import type kwargsretrieved_temporary_fold simpl str repres absolut filepath temporari folder access content os standard librari modul convert pathlibpath parser termin engin automat clean sandbox folder temporarili retriev file concept retrieve_temporary_list essenti file avail pars destroy immedi afterward _topicscalculationsusagecalcjobsstash stash remot versionad stash option namespac allow user specifi certain file andor folder creat calcul job stash somewher remot job run use need store longer time machin scratch space clean regularli need kept remot machin retriev exampl file necessari restart calcul big retriev store perman local file repositori filesfold need stash specifi rel filepath within work directori stashsource_list option use copi mode target path defin anoth locat filesystem calcul copi file set stashtarget_bas option exampl codeblock python aiidacommondatastructur import stashmod input code metadata option stash source_list aiidaout outputtxt target_bas storageprojectstash_fold stash_mod stashmodecopyvalu note futur method stash may implement place file compress tarbal even stash file tape import stash option namespac defin calcul job daemon perform stash oper file retriev mean stash happen pars output file occur retriev step file stash independ final exit statu parser assign calcul job may caus file stash calcul later consid fail stash file folder repres output node attach calcul node label remote_stash remotestashfolderdata node like remote_fold node repres locat file remot machin equival symbol link import aiida actual control file remot stash content may disappear point _topicscalculationsusagecalcjobsopt option addit common metadata input label descript process pyclassaiidaengineprocessescalcjobscalcjobcalcjob additon input call option option allow subtli chang behavior calcul job exampl parser use finish special schedul direct full list avail option document part calcjob interfac aiidacalcjob calcjob modul aiidaengineprocessescalcjob expandnamespac rerunn option enabl schedul relaunch calcul fail exampl due node failur failur launch job correspond requeu option slurm r option sge lsf pb follow two condit must met order work well aiida schedul assign jobid restart job code produc result alreadi partial run everi schedul may produc situat depend schedul configur code use say conclus work test test cluster use slurm guarante slurm cluster behav way _topicscalculationsusagecalcjobslaunch launch launch calcul job differ launch process class pleas refer section reflaunch processestopicsprocessesusagelaunch caveat place calcul job typic tend take quit bit time trivial exampl use cours run fast typic calcul job submit schedul like take longer second reason highli advis submit calcul job instead run submit daemon free interpret straight away process checkpoint variou reftransport taskstopicscalculationsconceptscalcjobs_transport_task perform except cours want run calcul job local test demonstr purpos _topicscalculationsusagecalcjobsdry_run dri run calcul job one addit featur process come launch sinc incorrectli configur calcul job potenti wast comput resourc one might want inspect input file written plugin actual submit job socal dryrun possibl simpli specifi metadata input use process builder simpl code python buildermetadatadry_run true launch process builder engin perform entir process normal calcul job run except actual upload submit job remot comput howev prepare_for_submiss method call input write input folder store temporari folder call submit_test creat current work directori time perform dryrun new sub folder creat submit_test folder allow perform multipl dryrun without overwrit previou result moreov follow appli call pyfuncaiidaenginelaunchrun calcul dry_run flag set get back result alway empti dictionari call pyfuncaiidaenginelaunchrun_get_nod get back node unstor calcjobnod case unstor calcjobnod let call node addit properti nodedry_run_info dictionari contain addit inform dryrun output particular follow key folder absolut path folder within submit_test folder file creat eg homeusersubmit_test script_filenam filenam submiss script aiida gener folder eg _aiidasubmitsh send dryrun pyfuncaiidaenginelaunchsubmit function forward run get back unstor node properti warn default store proven enabl goe also dri run want node creat dri run simpli set metadata input store_proven fals _topicscalculationsusagecalcjobspars pars previou section explain detail execut extern execut wrap calcjob class make runnabl aiida engin first step prepar input file remot machin retriev relev file store pyclassaiidaormnodesdatafolderfolderdata node attach retriev output last requir step calcjob termin often would like pars raw output attach queryabl output node calcul job node automat trigger pars calcul job output retriev specifi refpars name optiontopicscalculationsusagecalcjobsopt engin find option specifi load correspond parser class sub class pyclassaiidaparsersparserpars call pymethaiidaparsersparserparserpars method explain interfac parser class pars method let take pyclassaiidaparserspluginsarithmeticaddarithmeticaddpars exampl parser design pars output produc simpl bash script wrap arithmeticaddcalcul discuss previou section literalinclud includesnippetscalcjobsarithmetic_add_parserpi languag python lineno creat new parser implement simpli creat new class sub class pyclassaiidaparsersparserpars class usual valid python class name work convent alway use parser suffix use name calcul job parser design exampl implement parser arithmeticaddcalcul therefor name arithmeticaddpars replac calcul suffix parser method need implement pymethaiidaparsersparserparserpars method signatur includ kwarg reason becom clear later goal pars method simpl open load content output file gener calcul job retriev engin creat data node raw data attach output node log humanread warn messag case worri output option return refexit codetopicsprocessesconceptsexit_cod indic result calcul success advantag ad raw output data differ form output node form content becom queryabl allow one queri calcul produc specif output certain valu becom power approach postprocess analys big databas retriev attribut parser return folderdata node attach engin contain retriev file specifi use refretriev listtopicscalculationsusagecalcjobsfile_lists_retriev refprepar step calcul jobtopicscalculationsusagecalcjobsprepar retriev folder use open read content file contain exampl singl output file written redirect standard output bash script ad two integ parser open file read content tri pars sum literalinclud includesnippetscalcjobsarithmetic_add_parserpi languag python line lineno linenostart note pars action wrap tryexcept block catch except would thrown output file could read except would caught engin catch except instead set process state correspond calcul except note happen uncaught except thrown pars instead catch except return exit code retriev referenc label error_reading_output_fil exampl selfexit_cod properti call retriev correspond exit code defin calcjob current pars return exit code parser stop pars immedi instruct engin set exit statu exit messag node calcul job parse_stdout method small util function separ actual pars data main parser code case pars simpl might well kept main method illustr complet free organ code within pars method clariti manag pars sum produc calcul wrap appropri pyclassaiidaormnodesdataintint data node class regist output method literalinclud includesnippetscalcjobsarithmetic_add_parserpi languag python line lineno linenostart note encount problem return anyth engin interpret calcul finish success might pose question part raw data pars type data node store easi question answer gener heavili depend type raw output produc calcul part would like queryabl howev give guidelin store data might want queri lightweight data node pyclassaiidaormnodesdatadictdict pyclassaiidaormnodesdatalistlist pyclassaiidaormnodesdatastructurestructuredata content node store attribut databas make sure queri bigger data set larg multidimnension array better store pyclassaiidaormnodesdataarrayarrayarraydata one sub class store data databas would becom unnecessarili bloat chanc would queri data unlik instead array type data node store bulk content repositori way still keep data therewith proven calcul keep databas lean fast _topicscalculationsusagecalcjobsschedulererror schedul error besid output parser schedul plugin also provid pars output gener job schedul implement methaiidaschedulersschedulerschedulerparse_output method schedul plugin implement method output gener schedul written stdout stderr file descriptor well output detail job info command pars parser detect known problem outofmemori oom outofwalltim oow error correspond exit code alreadi set calcul job node output parser defin input inspect exit statu node decid keep overrid differ potenti use exit code code python class someparserpars def parseself kwarg pars content output file retriev folderdata probabl best check explicit exit code selfnodeexit_statu selfexit_codeserror_scheduler_out_of_walltimestatu schedul parser detect oow error return none exit code kept return none also possibl check exit statu set fallback selfnodeexit_statu none still tri pars file exit pars return none note exampl given parser return immedi detect schedul detect problem sinc return none exit code schedul kept final exit code calcul job howev parser immedi return still tri pars retriev output find specif problem gener schedul error alway return exit code overrid parser even return exitcod calcul mark success finish despit schedul determin problem follow tabl summar possibl scenario schedul parser output parser return exit code final result exit code set node scenario schedul result retriev result final result neither parser found problem none none exitcod schedul parser found issu exitcod none exitcod output parser overrid output parser found problem none exitcod exitcod schedul parser found issu output parser overrid exitcod exitcod exitcod specif error code schedul found issu output parser overrid say despit exitcod exitcod exitcod calcul consid finish success _topicscalcul calcul topic section provid detail inform concept calcul aiida extens guid work introductori guid work calcul found refhow run extern codeshowtoplugincod toctre maxdepth concept usag _topicsprocessesconcept concept anyth run aiida instanc pyclassaiidaengineprocessesprocessprocess class process class contain inform logic tell whoever handl run complet typic one respons run process instanc pyclassaiidaenginerunnersrunn local runner one daemon runner case daemon run process addit run instruct process execut need sort record databas store happen execut exampl need record exact input log messag report final output purpos everi process util instanc sub class pyclassaiidaormnodesprocessprocessnod class processnod class sub class pyclassaiidaormnodesnod serv record process execut databas extens proven graph import understand divis labor process describ someth run processnod serv mere record databas actual happen execut good thing rememb run deal process finish interact processnod _topicsprocessesconceptstyp process type process aiida come two flavor calculationlik workflowlik calculationlik process capabl creat data wherea workflowlik process orchestr process abil return data produc calcul distinct play big role aiida crucial understand reason differ type process also get differ sub class processnod class hierarchi node class link type allow data node explain detail refproven implementationtopicsprovenanceimplement document current four type process aiidacor follow tabl show node class repres proven graph process use process class node class use pyclassaiidaengineprocessescalcjobscalcjobcalcjob pyclassaiidaormnodesprocesscalculationcalcjobcalcjobnod calcul perform extern code pyclassaiidaengineprocessesworkchainsworkchainworkchain pyclassaiidaormnodesprocessworkflowworkchainworkchainnod workflow run multipl calcul pyclassaiidaengineprocessesfunctionsfunctionprocess pyclassaiidaormnodesprocesscalculationcalcfunctioncalcfunctionnod python function decor calcfunct decor pyclassaiidaengineprocessesfunctionsfunctionprocess pyclassaiidaormnodesprocessworkflowworkfunctionworkfunctionnod python function decor workfunct decor basic inform concept calcjob calcfunct refer refcalcul concepttopicscalculationsconcept workchain workfunct describ refworkflow concepttopicsworkflowsconcept read understood basic concept calcul workflow process detail inform implement use found dedic develop section refcalculationstopicscalculationsusag refworkflowstopicsworkflowsusag respect note functionprocess never explicitli implement gener dynam engin python function decor pyfuncaiidaengineprocessesfunctionscalcfunct pyfuncaiidaengineprocessesfunctionsworkfunct run _topicsprocessesconceptsst process state instanc process class execut process state properti tell current statu process store instanc process workflow engin plumpi librari oper valu howev process instanc die soon termin therefor process state also written calcul node process use databas record process_st attribut process one six state activ termin creat kill run except wait finish three state left column activ state wherea right column display three termin state process reach termin state never leav execut perman termin process first creat put creat state soon pick runner activ run state process wait anoth process call finish wait state process kill state mean user issu command kill parent process kill except state indic execut except occur caught process unexpectedli termin final option finish state mean process success execut execut nomin note automat mean result process also consid success execut without problem distinguish success fail execut refexit statustopicsprocessesconceptsexit_cod anoth attribut store node process integ set process zero mean result process success nonzero valu indic failur process node use variou process subclass pyclassaiidaormnodesprocessprocessnod defin handi properti queri process state exit statu properti mean process_st return current process state exit_statu return exit statu none set exit_messag return exit messag none set is_termin return true process either kill except finish is_kil return true process kill is_except return true process except is_finish return true process finish is_finished_ok return true process finish exit_statu equal zero is_fail return true process finish exit_statu nonzero load calcul node databas use properti method inquir state exit statu _topicsprocessesconceptsexit_cod process exit code previou section process state show process finish say anyth whether result success fail finish state mean noth engin succeed run process end execut without encount except kill distinguish success fail process exit statu defin exit statu common concept program httpsenwikipediaorgwikiexit_status_ small integ zero mean result process success nonzero valu indic failur default process termin nomin get zero exit statu mark process fail one return instanc pyclassaiidaengineprocessesexit_codeexitcod name tupl allow set integ exit_statu string messag exit_messag engin receiv exitcod return valu process set exit statu messag correspond attribut process node repres process proven graph seealso exit code defin return see refexit code usag section topicsprocessesusageexit_cod _topicsprocessesconceptslifetim process lifetim lifetim process defin time moment launch reach reftermin statetopicsprocessesconceptsst _topicsprocessesconceptsnode_distinct process node distinct explain refintroduct sectiontopicsprocessesconcept clear import distinct process node repres execut proven graph process launch instanc process class creat memori propag complet respons runner process instanc exist memori python interpret run exampl daemon runner directli inspect state process write state chang correspond node repres proven graph way node act proxi mirror imag reflect state process memori mean output mani verdi command verdi process list actual show state process instanc rather state node last written state process task previou section explain launch process mean creat instanc process class memori process run see section reflaunch processestopicsprocessesusagelaunch detail say local interpret particular process instanc die soon interpret die often make submit prefer method launch process process submit instanc process creat along node repres databas state persist store databas call process checkpoint inform refwil follow latertopicsprocessesconceptscheckpoint subsequ process instanc shut continu task sent process queue rabbitmq task simpli small messag contain identifi process order reconstruct process checkpoint process need import daemon environ give refassoci entri pointhowtoplugincodesentrypoint b refinclud modul pathhowtofaqprocessnotimportabledaemon pythonpath daemon worker daemon runner launch subscrib process queue rabbitmq distribut continu task come make sure task sent one runner time receiv daemon runner restor process instanc memori checkpoint store databas continu execut soon process reach termin state daemon runner acknowledg rabbitmq task complet runner confirm task complet rabbitmq consid task incomplet daemon runner shut die got chanc finish run process task automat requeu rabbitmq sent anoth daemon runner togeth fact task process queue persist disk rabbitmq guarante continu task sent rabbitmq point finish allow machin shut daemon runner maximum number task run concurr mean activ task avail slot task remain queu process whose task queue runner though technic activ termin actual run moment process actual run ie memori runner one interact similarli soon task disappear either process intent termin unintent process never continu run figur includeimagessubmit_sysmlpng system model represent submit process _topicsprocessesconceptscheckpoint process checkpoint process checkpoint complet represent process instanc memori store databas sinc complet represent process instanc also fulli reconstruct checkpoint state transit process checkpoint creat serial process instanc store attribut correspond process node mechan final cog machin togeth persist process queue rabbitmq explain previou section allow process continu machin run shut restart _topicsprocessesconceptss process seal one cardin rule aiida node store immut mean attribut longer chang rule problem process howev sinc order abl start run correspond process node first store howev point attribut process state mutabl attribut longer chang engin throughout lifetim correspond process overcom limit concept updat attribut introduc special attribut allow chang even process node alreadi store correspond process still activ mark point process termin even updat attribut process node consid immut node seal seal process node behav exactli like normal store node attribut immut addit process node seal incom outgo link attach unseal process node also export belong process still activ note seal concept appli data node export soon store determin whether process node seal one use properti pyattraiidaormutilsmixinssealableis_s _topicsprocessesusag usag note chapter assum knowledg previou section refbas concept processestopicsworkflowsconcept section explain aspect work process appli process detail pertain specif sub type process document respect section refcalcul functionstopicscalculationsusagecalcfunct refcalcul jobstopicscalculationsusagecalcjob refwork functionstopicsworkflowsusageworkfunct refwork chainstopicsworkflowsusageworkchain _topicsprocessesusagedefin defin process _topicsprocessesusagespec process specif process defin input requir option take depend process type input pyclassaiidaengineprocessescalcjobscalcjobcalcjob pyclassaiidaengineprocessesworkchainsworkchainworkchain given pyclassaiidaengineprocessesprocess_specprocessspec class defin though pymethaiidaengineprocessesprocessprocessdefin method process function pyclassaiidaengineprocessesprocess_specprocessspec dynam gener engin signatur decor function therefor determin input process take one simpli look process specif defin method function signatur pyclassaiidaengineprocessescalcjobscalcjobcalcjob pyclassaiidaengineprocessesworkchainsworkchainworkchain also concept refprocess buildertopicsprocessesusagebuild allow one inspect input tabcomplet help string shell three import attribut pyclassaiidaengineprocessesprocess_specprocessspec input output exit_cod attribut one defin input process take output produc potenti exit code return case error look process specif one know exactli happen happen input output attribut namespac contain call port one repres specif input output namespac arbitrarili nest port call port namespac port port namespac implement pyclassplumpyport pyclassaiidaengineprocessesportsportnamespac class respect _topicsprocessesusageports_portnamespac port port namespac defin input process specif need add port input port namespac follow code python spec processspec specinputparamet input method creat instanc pyclassaiidaengineprocessesportsinputport sub class base pyclassplumpyport add input port namespac spec creat output easi one use pymethplumpyprocessspecoutput method instead code python spec processspec specoutputresult caus instanc pyclassaiidaengineprocessesportsoutputport also sub class base pyclassplumpyport creat ad output specifc attribut recal input output instanc pyclassaiidaengineprocessesportsportnamespac mean contain port pyclassaiidaengineprocessesportsportnamespac also port ad anoth port namespac allow one creat nest port namespac creat new namespac exampl input namespac simpl code python spec processspec specinput_namespacenamespac creat new portnamespac name namespac input namespac spec creat arbitrarili nest namespac one statement separ shown code python spec processspec specinput_namespacenestednamespac command result portnamespac name namespac nest insid anoth portnamespac call nest note period reserv denot differ nest namespac use name termin input output port could misinterpret later port nest namespac graphic visual nest dictionari look like follow code python input nest namespac output attribut processspec also portnamespac input differ creat outputport instead inputport instanc therefor concept nest portnamespac appli output processspec _topicsprocessesusagevalidation_default valid default previou section saw processspec use portnamespac inputport outputport defin input output structur process underli concept allow nest port portnamespac inputport outputport subclass pyclassplumpyportsport differ subclass class properti attribut common exampl relat concept valid default valu three follow attribut except outputport default attribut default requir valid_typ valid attribut set upon construct port fact long spec seal mean alter without limit long within defin method correspond process exampl input port explicitli set attribut follow code python specinputpositive_numb requiredfals defaultlambda int valid_typeint float validatoris_number_posit defin input name positive_numb type int float pass test is_number_posit valid valu pass default use warn python good practic avoid mutabl default function argument sinc instanti function definit reus invoc httpsdocspythonorgreferencecompound_stmtshtmlfunctiondefinitions_ lead unexpect result default valu chang function call context aiida node store unstor consid mutabl therefor use default valu process port howev possibl use lambda return node instanc done exampl return new instanc node given valu time process instanti note valid noth free function take singl argument valu valid noth return valu consid valid signal valu invalid valid error rais simpli return string valid error messag exampl code python def is_number_positivenumb number return number greater equal zero valid_typ defin singl type tupl valid type note note default port requir specifi default valu impli input requir specifi requiredfals necessari case ad exampl simpli clariti valid input output valu respect specif correspond port happen instanti process final respect input invalid correspond except thrown process instanti fail output fail valid likewis except thrown process state set except _topicsprocessesusagedynamic_namespac dynam namespac previou section describ variou attribut relat valid claim port variant share attribut yet discuss inputport outputport explicitli statement howev still correct portnamespac attribut might wonder mean valid_typ default portnamespac contain inputport outputport portnamespac answer question lie portnamespac attribut dynam often design specif process know exactli input want abl pass process howev concept inputport outputport one need know exactli mani valu one expect least defin dynam attribut portnamespac come default set fals set true one indic namespac take number valu unknown time definit specif explain mean valid_typ valid default attribut context portnamespac mark namespac dynam may still want limit set valu accept specifi valid type valid valu eventu pass port namespac valid accord rule exactli valu regular input port would _topicsprocessesusagenon_db non storabl input principl valid type input output instanc pyclassaiidaormnodesdatadatadata node one sub class data type record proven graph input output process howev case might want pass input process whose proven care therefor would want pass nondatabas storabl type anyway note aiida allow break proven restrict alway tri urg guid direct keep proven legitim reason break regardless make sure think implic whether realli will lose inform situat inputport attribut non_db default set fals set true indic valu pass port store node proven graph link process node allow one pass normal valu one would also abl pass normal function _topicsprocessesusageserialize_input automat input serial quit often input given python data type need cast correspond aiida type pass process manual cumbersom defin function defin process specif convers automat function pass serial paramet specinput invok given input alreadi aiida type input store databas non_dbfals serial function return aiida data type non_db input function must idempot might appli follow exampl work chain take three input b c simpli return given input funcaiidaormnodesdatabaseto_aiida_typ function use serial function includ includesnippetsserializeworkchain_serializepi code python work chain call nativ python type automat convert aiida type funcaiidaormnodesdatabaseto_aiida_typ function note modul defin correspond aiida type must load recogn funcaiidaormnodesdatabaseto_aiida_typ includ includesnippetsserializerun_workchain_serializepi code python cours also use serial featur perform complex serial input _topicsprocessesusageexit_cod exit code process like one multipl expect failur mode clearli commun caller went wrong process support set exit_statu exit_statu posit integ attribut process node convent zero mean process success wherea valu indic failur concept exit code posit integ exit statu common concept program httpsenwikipediaorgwikiexit_status_ standard way program commun result execut potenti exit code process defin processspec like input output exit code consist posit nonzero integ string label refer detail descript problem trigger exit code consid follow exampl code python spec processspec specexit_cod error_i_am_a_teapot process ident crisi defin exit code process exit statu exit messag work chain ident crisi string error_i_am_a_teapot label develop use refer particular exit code somewher process code whenev process exit particular error code caller abl introspect exit_statu exit_messag attribut node assum exampl ran process threw exit code describ caller would abl follow code python node load_nodepk nodeexit_statu nodeexit_messag process ident crisi use caller programmat base exit_statu decid proceed infinit robust way commun specif error nonhuman pars textbas log report addit exit code make easi queri fail process specif error code seealso addit document specif certain process type found follow section refprocess functionstopicsprocessesfunctionsexit_cod refwork functionstopicsworkflowsusageworkfunctionsexit_cod refcalcjob parserstopicscalculationsusagecalcjobspars refworkchain exit code specificationtopicsworkflowsusageworkchainsdefine_exit_cod refextern code pluginshowtoplugincodesparsingerror refrestart workchainshowtorestartworkchain _topicsprocessesusageexit_code_convent exit code convent principl restrict exit statu exit code posit integ zero howev make effect use exit code guidelin convent decid integ use note sinc follow rule guidelin choos ignor current engin complain might chang futur regardless advis follow guidelin sinc improv interoper code exist plugin follow integ rang reserv suggest reserv intern use aiidacor reserv error pars schedul output calcul job note yet implement suggest use process input valid error suggest critic process error exit code one use integ _topicsprocessesusagemetadata process metadata process addit normal input defin process specif take option metadata metadata differ input sens node show input proven graph execut process rather input slightli modifi behavior process allow set attribut process node repres execut follow metadata input avail process class label set label processnod descript set descript processnod store_proven boolean flag default true set fals ensur execut process store proven graph sub class pyclassaiidaengineprocessesprocessprocess class specifi metadata input refer specif document detail pass metadata option process simpli pass dictionari key metadata input launch process process launch explain follow section _topicsprocessesusagelaunch launch process process launch run submit run mean run process current python interpret block way wherea submit mean send daemon worker rabbitmq long run process calcul job complex workflow best advis submit daemon ad benefit directli return control interpret allow daemon save intermedi progress checkpoint reload process restart run process use trivial comput task simpl calcfunct workfunct debug test purpos _topicsprocessesusagelaunch process launch launch process one use free function import pymodaiidaengin modul four differ function pyfuncaiidaenginelaunchrun pyfuncaiidaenginelaunchrun_get_nod pyfuncaiidaenginelaunchrun_get_pk pyfuncaiidaenginelaunchsubmit name suggest first three run process latter submit daemon run mean process execut interpret launch block interpret process termin submit daemon contrast mean process sent daemon execut interpret releas straight away function exact interfac launchprocess input process process class process function launch input input keyword argument pass process input pass depend exact process class launch exampl want run instanc pyclassaiidacalculationsarithmeticaddarithmeticaddcalcul process take two pyclassaiidaormnodesdataintint node input name x f_ would follow includ includesnippetslaunchlaunch_submitpi code python function submit calcul daemon immedi return control interpret return node use repres process proven graph warn process submitt class function need import daemon environ give refassoci entri pointhowtoplugincodesentrypoint b refinclud modul pathhowtofaqprocessnotimportabledaemon pythonpath daemon worker run function call ident includ includesnippetslaunchlaunch_runpi code python except submit process daemon execut current interpret block process termin return valu run function also node repres execut process result return process dictionari node produc output would still like process node pk process node use one follow variant includ includesnippetslaunchlaunch_run_alternativepi code python final pyfuncaiidaenginelaunchrun launcher two attribut get_nod get_pk simpl proxi pyfuncaiidaenginelaunchrun_get_nod pyfuncaiidaenginelaunchrun_get_pk method handi shortcut choos use three variant singl import includ includesnippetslaunchlaunch_run_shortcutpi code python want launch process class take lot input often use defin dictionari use python syntax automat expand keyword argument valu pair exampl use would look like follow includ includesnippetslaunchlaunch_submit_dictionarypi code python process function ie refcalcul functionstopicscalculationsconceptscalcfunct refwork functionstopicsworkflowsconceptsworkfunct launch like process explain process function two addit method launch simpli call function use intern run method attribut use calcul function add two number exampl two method look like follow includ includesnippetslaunchlaunch_process_functionpi code python _topicsprocessesusagebuild process builder explain refprevi sectiontopicsprocessesusagespec input pyclassaiidaengineprocessescalcjobscalcjobcalcjob pyclassaiidaengineprocessesworkchainsworkchainworkchain defin pymethaiidaengineprocessesprocessprocessdefin method know input take one would read implement annoy develop simplifi process two process class provid util call process builder process builder essenti tool help build input specif process class want run get builder particular calcjob workchain implement need class load pyclassaiidapluginsfactoriescalculationfactori pyclassaiidapluginsfactoriesworkflowfactori respect let take pyclassaiidacalculationsarithmeticaddarithmeticaddcalcul exampl arithmeticaddcalcul calculationfactorycorearithmeticadd builder arithmeticaddcalculationget_build string corearithmeticadd entri point arithmeticaddcalcul pass calculationfactori return correspond class call get_build method class return instanc pyclassaiidaengineprocessesbuilderprocessbuild class tailor arithmeticaddcalcul builder help defin input arithmeticaddcalcul requir handi tool simplifi process find input builder expos simpli use tab complet interact python shell simpli type builder hit tab key complet list avail input shown input builder also show addit inform sort input expect interact shell get inform display follow buildercod type properti string form properti object xfccec docstr name code requir true non_db fals valid_typ class aiidaormnodesdatacodecod help code use job docstr see help string contain detail inform input port addit display valid_typ defin show data type expect default valu defin also display non_db attribut defin whether particular input store proper input node databas process submit defin input builder simpl assign valu attribut follow exampl show set paramet input well descript label metadata input buildermetadatalabel calcul label buildermetadatadescript exampl calcul demonstr process builder builderx int builderi int evalu builder instanc simpli type variabl name hit enter current valu builder input display builder metadata descript exampl calcul demonstr process builder label calcul label option x intuuidabbcbafbbec unstor intuuiddadcbedf unstor exampl see valu set descript label addit also show namespac input process support nest namespac metadataopt namespac exampl note nest namespac also autocomplet travers recurs tabcomplet remain fill requir input readi launch process builder input defin builder use actual launch process process launch pass builder free function pymodaiidaenginelaunch modul would normal process refdescrib abovetopicsprocessesusagelaunch ie includ includesnippetslaunchlaunch_builderpi code python note process builder principl design use interact shell tabcomplet automat input document realli shine howev perfectli possibl use builder script simpli use input contain instead plain python dictionari _topicsprocessesusagemonitor monitor process launch process may want investig statu progress result refverdireferencecommandlin command line tool provid variou command _topicsprocessesusagemonitoring_list verdi process list first point entri verdi command verdi process list command print list activ process processnod store databas use repres execut typic exampl may look someth like follow codeblock bash pk creat state process label process statu h ago run arithmeticaddcalcul ago creat arithmeticaddcalcul total result state column concaten process_st exit_statu processnod default command show activ item ie processnod yet reach termin state want also show node termin state use flag call verdi process list codeblock bash pk creat state process label process statu h ago finish add h ago finish multipli h ago run arithmeticaddcalcul ago creat arithmeticaddcalcul total result inform mean state column pleas refer document refprocess state topicsprocessesconceptsst flag let queri specif process state ie issu verdi process list creat return codeblock bash pk creat state process label process statu ago creat arithmeticaddcalcul total result queri specif exit statu one use verdi process list e codeblock bash pk creat state process label process statu h ago finish add h ago finish multipli total result simpl tool give good idea current statu run process statu termin one complet list avail option pleas refer document refverdi processreferencecommandlineverdiprocess look inform specif process node follow three command dispos verdi process report give list log messag attach process verdi process statu print call hierarchi process statu node verdi process show print detail statu input output caller calle process follow section explain briefli command work purpos exampl show output command complet pwbaseworkchain aiidaquantumespresso plugin simpli call pwcalcul _topicsprocessesusagemonitoring_report verdi process report develop process attach log messag node process pymethaiidaengineprocessesprocessprocessreport method verdi process report command display log messag chronolog order codeblock bash report pwbaseworkchainrun_calcul launch pwcalcul iter report pwbaseworkchaininspect_calcul pwcalcul complet success report pwbaseworkchainresult work chain complet iter report pwbaseworkchainon_termin remot folder clean log messag includ timestamp follow level log alway report second block format pkclass namefunct name detail inform case work chain step messag fire final messag display cours mani messag log use process develop gener use user understand happen execut process howev one realiz entri store databas overus unnecessarili bloat databas _topicsprocessesusagemonitoring_statu verdi process statu command use workchain instanc also work calcjob one power aspect work chain call calcjob workchain creat nest call hierarchi want inspect statu work chain children call verdi process statu goto tool exampl output follow codeblock bash pwbaseworkchain pk processstatefinish result pwcalcul pk finish command print tree represent hierarch call structur recurs way exampl singl pwbaseworkchain call pwcalcul indic indent one level addit call tree node also show current process state work chain step outlin tool use inspect work chain run step outlin current well statu children calcul call _topicsprocessesusagemonitoring_show verdi process show final command display detail inform processnod input output option process call call exampl output pwbaseworkchain would look like follow codeblock bash properti valu type workchainnod pk uuid bcacdadeacddaddcbb label descript ctime mtime process state processstatefinish exit statu code pwv input pk type paramet dict structur structuredata kpoint kpointsdata pseudo_famili str max_iter int clean_workdir bool option dict output pk type output_band bandsdata remote_fold remotedata output_paramet dict output_array arraydata call pk type call pwcalcul log messag log messag calcul run verdi process report see overview give inform want inspect process input output closer detail provid pk _topicsprocessesusagemanipul manipul process understand one manipul run process one understand principl refprocessnod distinctiontopicsprocessesconceptsnode_distinct refprocess lifetimetopicsprocessesconceptslifetim first sure read section first _topicsprocessesusagemanipulating_pause_play_kil verdi process pauseplaykil verdi command line interfac provid three command interact live process verdi process paus verdi process play verdi process kill first paus process temporarili second resum paus process third one perman kill sub command name might seem tell alreadi might look like know function underneath quit complic deserv addit explan nonetheless section refth distinct process nodetopicsprocessesconceptsnode_distinct explain manipul process mean interact live process instanc live memori runner run definit runner alway run differ system process one want interact otherwis would runner given singl runner interpret run interpret would block perform oper mean order interact live process one interact anoth interpret run differ system process facilit rabbitmq messag broker runner start run process also add listen incom messag sent specif process rabbitmq note appli daemon runner also normal runner say launch process local runner interpret block still setup listen process rabbitmq mean manipul process anoth termin would process run daemon runner case paus play kill one send call remot procedur call rpc rabbitmq rpc includ process identifi action intend rabbitmq send whoever regist listen specif process case runner run process immedi reveal potenti problem rpc fall deaf ear one listen multipl caus exampl explain section refprocess lifetimetopicsprocessesconceptslifetim case submit process correspond task still queu avail process slot occupi even task runner might busi respond rpc process appear unreach whenev process unreach rpc command return error code bash error process unreach depend caus process unreach problem may resolv automat time one tri later time exampl case runner busi respond howev prevent happen runner design commun happen separ thread schedul callback necessari action main thread perform heavi lift make occurr runner busi respond rare howev unfortun way tell actual problem process reachabl problem manifest ident runner could respond time task accident lost forev due bug even though two complet separ situat bring us anoth potenti unintuit aspect interact process previou paragraph alreadi mention pass remot procedur call sent first need answer respons runner applic directli execut call call incom communc thread allow direct access process instanc instead schedul callback main thread perform action callback howev necessarili execut directli may action wait perform paus play kill process directli rather schedul request runner success receiv request schedul callback command therefor show someth like follow code bash success schedul kill process schedul indic actual kill might necessarili happen yet mean even call verdi process kill get success messag correspond process may still list activ output verdi process list default paus play kill command ask confirm runner request schedul actual wait command execut explain actual action perform might instantan runner may busi work process would mean command would block long time want send multipl request lot process one go would ineffect one would wait previou one complet chang default actual wait action complet await respons use wait flag know daemon runner may experienc heavi load also increas time command wait time ttimeout flag rubric footnot f note pyclassaiidacalculationsarithmeticaddarithmeticaddcalcul process class also take code input omit purpos exampl _topicsprocessesfunct process function process function process see refconceptstopicsprocessesconcept definit explan implement decor python function current two type process function refcalcul functiontopicscalculationsconceptscalcfunct refwork functiontopicsworkflowsconceptsworkfunct former creat new data wherea latter orchestr process return result section provid detail inform best practic implement two process type sinc calcul function work function process function implement rule explain appli process type simpl exampl refintroductori section calcul functionstopicscalculationsconceptscalcfunct show simpl python function turn calcul function simpli adorn pyfuncaiidaengineprocessesfunctionscalcfunct decor function run aiida dynam gener pyclassaiidaengineprocessesfunctionsfunctionprocess build refprocess specificationtopicsprocessesusagespec base function signatur explain accomplish featur python function signatur standard support function signatur explain featur python function definit call support first need clear terminolog deal function two distinct part function definit httpsdocspythonorgreferencecompound_stmtshtmlfunctiondefinitions_ function call httpsdocspythonorgreferenceexpressionshtmlcalls_ consid follow code snippet defin simpl python function includ includesnippetsfunctionssignature_plain_python_definitionpi code python function take three paramet name x z addit function plain_funct said default valu one paramet z case form paramet express call function terminolog chang slightli valu paramet pass either posit keyword exampl function call posit argument includ includesnippetsfunctionssignature_plain_python_call_positionalpi code python call posit argument explicitli name match correspond paramet sole base posit function call exampl x z valu respect sinc specifi three valu default third paramet z actual use howev allow specifi two argument case default use seen includ includesnippetsfunctionssignature_plain_python_call_defaultpi code python specifi third argument default use case z equal addit one employ name argument specif target paramet base name instead reli posit includ includesnippetsfunctionssignature_plain_python_call_keywordpi code python notic order pass argument irrelev specifi name argument explicitli assign valu know differ posit name argument import realiz python requir posit argument come name argument mean function definit function call illeg name argument posit one includ includesnippetsfunctionssignature_plain_python_call_illegalpi code python final python know concept arg kwarg also refer variabl argument keyword argument allow one defin function accept undetermin number posit keyword argument includ includesnippetsfunctionssignature_plain_python_args_kwargspi code python variabl argument arg receiv posit pass argument tupl keyword argument kwarg receiv name argument dictionari formal definit way let see concept support process function default argument default argument support calcul function normal python function long pyclassaiidaormnodesnodenod instanc like input none howev python function one use immut object function default mutabl object give unexpect result kept function call therefor order use default valu process function simpli use none default valu check presenc function bodi set default valu none pattern look like follow includ includesnippetsfunctionssignature_calcfunction_defaultpi code python function call exampl exact result variabl keyword argument variabl argument support process function reason behind process specif pyclassaiidaengineprocessesfunctionsfunctionprocess built dynam base function signatur name input base paramet name function definit name argument function call sinc variabl argument neither function definit function call explicit paramet name use engin imposs determin name extens link label use input contrast keyword argument reason support keyword use function call determin name paramet label input link follow snippet therefor perfectli legal return sum node pass includ includesnippetsfunctionssignature_calcfunction_kwargspi code python proven gener exampl look like follow _fig_calculation_functions_kwarg figur includeimagesadd_calcfunction_kwargspng link label input determin base name paramet function call note input pass keyword argument use link label input would simpli pass posit argument engin could imposs determin label use link connect input node calcul function node reason invok dynam function ie one support kwarg signatur posit argument explicitli name signatur rais typeerror return valu numreffig_calculation_functions_kwarg see engin use label result link connect calcul function node output node default link label singl result return calcul function want specifi label return result form dictionari key use link label use dictionari also record multipl node output consid follow snippet includ includesnippetsfunctionscalcfunction_multiple_outputspi code python proven gener run calcul function look like _fig_calculation_functions_multiple_output figur includeimagesadd_calcfunction_multiple_outputspng dictionari return key use label link connect output node calcul node alway valu return calcul function storabl mean instanc pyclassaiidaormnodesnodenod class warn import call pymethaiidaormnodesnodenodestor node return calcfunct calculationworkflow dualiti aiida calcfunct calculationlik process creat return data node mean node return calcfunct alreadi store engin throw except _topicsprocessesfunctionsexit_cod exit code far seen exampl calcul function everyth work fine howev real world differ often encount situat problem aris calcul function may receiv incorrect incoher input code execut may throw except cours could throw input valid except even catch except code call throw lead function process put except termin state explain refprocess statetopicsprocessesconceptsst section state inde reserv process incur except execut consid follow calcul function definit call includ includesnippetsfunctionscalcfunction_exceptionpi code python valu pass zero engin encount zerodivisionerror except calcul function run output verdi process list confirm process except codeblock bash pk creat state process label process statu ago except divid total result except occur execut process record log messag correspond process node show log messag one use verdi process report case exampl would look someth like follow codeblock bash divideon_except traceback recent call last file homesphubercodeaiidaenvdevplumpyplumpyprocess_statespi line execut result selfrun_fnselfarg selfkwarg file homesphubercodeaiidaenvdevaiidacoreaiidaengineprocessesfunctionspi line run result self_funcarg kwarg file docssourceworkingincludesnippetsfunctionscalcfunction_exceptionpi line divid return x file homesphubercodeaiidaenvdevaiidacoreaiidaormnodesdatanumericpi line inner return to_aiida_typefuncleft right file homesphubercodeaiidaenvdevaiidacoreaiidaormnodesdatanumericpi line __div__ return self zerodivisionerror divis zero howev particular exampl except much unexpect error one could consid seen come might applic simpli mark process fail accomplish concept refexit statustopicsprocessesconceptsexit_cod set process integ nonzero mark process finish state fail sinc exit statu set attribut process node also make easi queri fail process set nonzero exit statu calcul function indic fail simpli return instanc pyclassaiidaengineprocessesexit_codeexitcod class time demonstr includ includesnippetsfunctionscalcfunction_exit_codepi code python run calcul function input instead except process success termin exit statu set valu store exitcod exit statu also display verdi process list codeblock bash pk creat state process label process statu ago except divid ago finish divid total result approach valid one use depend use case question ask whether potenti problem merit throw process pile except process mayb exampl problem easili forese classifi well defin exit statu case might make sens return exit code end one think solut make easier workflow call function respond base result make easier queri specif failur mode proven addit basic attribut store process process state label process function automat store addit inform relat sourc code function repres function name function namespac function start line number function sourc file first three retriev inspect python sourc code soon process function execut store attribut process node access correspond properti process node follow includ includesnippetsfunctionsprocess_function_attributespi code python sourc code file function defin also store sinc quit big store raw file repositori process node retriev pymethaiidaormutilsmixinsfunctioncalculationmixinget_function_source_cod method attribut give querabl process function store proven graph store sourc code function execut refer futur track function creat output node note howev store sourc file function guarante one reproduc exact result exampl one leak data function read file load exist node databas explicitli pass input altern extern code import call sourc code record reproduc guidelin due natur way process function implement imposs guarante reproduc follow follow guidelin one come close possibl leak data function limit import extern code keep function selfconsist separ file leak data function accomplish exampl read file local file system function bodi use content creation output even store sourc code dont possess file read imposs reproduc result likewis load exist data databas api rather direct input process function similar problem occur import python code practic almost imposs never import code process function would forc massiv code duplic howev still differ import code aiidacor librari repositori process function host import local python file even though case guarante reproduc former stand better chanc far version number plugin packag record rule thumb keep import code minimum make sure make part plugin packag welldefin version number final mention introduct sourc file process function store file repositori execut current automat dedupl ident file engin file may occupi quit bit space reason advis keep process function separ file improv readabl also minim impact size file repositori _topicsprocess process topic section provid extens detail inform concept process aiida work sinc concept explain appli process gener also appli subtyp calcul workflow inform specif subtyp found topic section refcalcul topicscalcul refworkflow topicsworkflow respect toctre maxdepth concept usag function _howtoplugincod write plugin extern code tip start write new plugin check aiida plugin registri httpsaiidateamgithubioaiidaregistry_ plugin code alreadi avail skip straight refhowtoruncod tip walk logic step aiida interact extern code alreadi know basic would like get start new plugin packag quickli check refhowtopluginsdevelop run extern code aiida need correspond calcul plugin tell aiida prepar requir input file run code correct command line paramet final probabl want parser plugin tell aiida pars output code howto take process refcreat calcul pluginhowtoplugincodesinterfac use refrun codehowtoplugincodesrun refwrit parser howtoplugincodespars output exampl code diff execut comput differ two input file print differ standard output codeblock consol cat filetxt file content content cat filetxt file content content diff filetxt filetxt c content content use diff sinc avail almost everi unix system default take command line argument two file command line option eg caseinsensit match similar execut mani scientif simul code work make easi adapt exampl use case run diff codeblock bash diff filetxt filetxt diffpatch thu write differ filetxt filetxt diffpatch _howtoplugincodesinterfac interfac extern code start creat file calculationspi subclass calcjob class codeblock python aiidacommon import datastructur aiidaengin import calcjob aiidaorm import singlefiledata class diffcalculationcalcjob aiida calcul plugin wrap diff execut follow tell aiida run code implement two key method pymethaiidaengineprocessescalcjobscalcjobcalcjobdefin pymethaiidaengineprocessescalcjobscalcjobcalcjobprepare_for_submiss defin spec defin method tell aiida input calcjob expect output produc exit code refdiscuss laterhowtoplugincodesparsingerror done instanc pyclassaiidaengineprocessesprocess_speccalcjobprocessspec class pass spec argument defin method exampl literalinclud aiidacalculationsdiff_tutorialcalculationspi languag python pyobject diffcalculationdefin first line method call defin method calcjob parent class necessari step defin input output common calcjob next use pymethplumpyprocess_specprocessspecinput method order defin two input file file file type singlefiledata admonit read use singlefiledata aiida keep track input file flexibl downsid make difficult queri inform contain file ensur input valid refhowtoplugincodescliopt show use dict class repres diff command line option python dictionari aiidadiff_ demo plugin goe add automat valid use pymethplumpyprocess_specprocessspecoutput defin output calcul label diff aiida attach output defin success finish calcul use link label provid think follow realli need point note default aiida expect output defin spec use requiredfals order mark output option final set default option name parser implement later name input output file comput resourc use calcul option alreadi defin spec superdefinespec call access pyattrplumpyprocess_specprocessspecinput attribut behav like dictionari return statement defin defin method directli modifi spec object receiv note one input requir calcjob extern execut use extern execut repres code instanc contain inform comput resid path file system pass calcjob via code input defin calcjob base class dont codeblock python specinputcod valid_typeormcod helpth code use job admonit read detail set input output cover valid dynam number input etc see refdefin process topicsprocessesusagedefin topic prepar submiss pymethaiidaengineprocessescalcjobscalcjobcalcjobprepare_for_submiss method two job creat input file format extern code expect return pyclassaiidacommondatastructurescalcinfo object contain instruct aiida engin code run exampl literalinclud aiidacalculationsdiff_tutorialcalculationspi languag python pyobject diffcalculationprepare_for_submiss input provid calcul valid spec prepare_for_submiss call therefor access pyattrplumpyprocessesprocessinput attribut safe assum requir input set input valid type start creat codeinfo object let aiida know run code ie codeblock bash diff filetxt filetxt diffpatch includ command line paramet name file would like diff uuid code run sinc diff write directli standard output redirect standard output specifi output filenam next creat calcinfo object let aiida know file copi back forth exampl two input file alreadi store aiida file repositori use local_copy_list pass along note use case may need creat new file fli folder argument pymethaiidaengineprocessescalcjobscalcjobcalcjobprepare_for_submiss code python folderopenfilenam w handl handlewritefil content file directori creat sandbox folder automat transfer comput resourc actual calcul take place detail tutori note default content sandbox folder also store perman file repositori calcul node addit proven guarante case eg licens issu file size may want chang behavior refexclud file storedtopicscalculationsusagecalcjobsfile_lists_provenance_exclud retrieve_list hand tell engin file retriev directori job ran finish file list store folderdata node attach output node calcul label retriev final pass codeinfo calcinfo object one calcul job involv one execut codes_info list one execut codes_info set codes_run_mod specifi mode execut coderunmodeseri default defin retrieve_list filenam engin retriev directori job ran finish engin store file folderdata node attach output node calcul label retriev admonit read refoth file list availabletopicscalculationsusagecalcjobsfile_list allow easili custom move file remot work directori order prevent creation unnecessari copi detail calcjob class refer topic section refdefin calcul topicscalculationsusag _howtoplugincodespars pars output pars output file produc code aiida node option make data queryabl therefor easier access analyz creat parser plugin subclass parser class file call parserspi literalinclud aiidaparserspluginsdiff_tutorialparserspi languag python startaft start parser head endbefor end parser head pars method call two import attribut set parser instanc selfretriev instanc folderdata point folder contain output file calcjob instruct retriev provid mean pymethaiidaormnodesrepositorynoderepositorymixinopen file contain selfnod pyclassaiidaormnodesprocesscalculationcalcjobcalcjobnod repres finish calcul among thing provid access input selfnodeinput implement pymethaiidaparsersparserparserpars method literalinclud aiidaparserspluginsdiff_tutorialparserspi languag python pyobject diffparsersimplepars pymethaiidaormnodesprocesscalculationcalcjobcalcjobnodeget_opt conveni method use get filenam output file final pymethaiidaparsersparserparserout method use return output file diff output calcul first argument name use label link connect calcul data node second argument node record output note output type need match process specif correspond calcjob except rais minimalist exampl isnt actual much pars go simpli pass along output file singlefiledata node code produc output structur format instead return file may want pars eg python dictionari dict node make result easili searchabl admonit exercis consid differ output file produc favorit simul code inform would want pars databas queri eg dict structuredata store aiida file repositori safekeep eg singlefiledata leav comput calcul ran eg record remot locat use remotedata simpli ignor know answer question readi start write parser code order request automat pars calcjob finish user set metadataoptionsparser_nam input launch job particular parser use default calcjob defin method set default valu parser name done refprevi section howtoplugincodesinterfac codeblock python classmethod def definecl spec specinputsmetadataoptionsparser_namedefault difftutori note default set parser class entri point string parser class regist regist entri point parser bit _howtoplugincodesparsingerror handl pars error far spent much attent deal potenti error aris run extern code howev lot way code fail execut nomin parser play import role detect commun error refworkflow howtorunworkflow decid proceed eg modifi input paramet resubmit calcul parser commun error refexit codestopicsprocessesconceptsexit_cod defin spec calcjob pars diffcalcul exampl defin follow exit code codeblock python specexit_cod error_missing_output_fil messagecalcul produc expect output file exit_cod defin exit statu posit integ follow reftopicsprocessesusageexit_code_convent label use refer code pars method selfexit_cod properti shown messag provid detail descript problem order inform aiida fail calcul simpli return pars method exit code correspond detect issu complet version exampl parser present previou section literalinclud aiidaparserspluginsdiff_tutorialparserspi languag python pyobject diffparserpars simpl check make sure expect output file diffpatch among file retriev comput calcul run product plugin often scan aspect output eg standard error output file etc issu may indic problem calcul return correspond exit code aiida store exit code return pars method calcul node pars inspect line see refdefin process topicsprocessesusagedefin topic detail note schedul plugin detect issu schedul level pars job schedul output set exit code topic section refschedul exit code topicscalculationsusagecalcjobsschedulererror explain inspect insid parser option overridden _howtoplugincodesentrypoint regist entri point refentri point howtopluginsdevelopentrypoint prefer method regist new calcul parser plugin aiida calculationspi parserspi file hand let regist entri point plugin contain move two script subfold aiida_diff_tutori codeblock consol mkdir aiida_diff_tutori mv calculationspi parserspi aiida_diff_tutori creat aiida_diff_tutori python packag write minimalist setuppi script new packag codeblock python setuptool import setup setup nameaiidadifftutori packagesaiida_diff_tutori entry_point aiidacalcul difftutori aiida_diff_tutorialcalculationsdiffcalcul aiidapars difftutori aiida_diff_tutorialparsersdiffpars note strictli speak aiidadifftutori name distribut aiida_diff_tutori name packag aiidacor document use term packag bit loos instal new aiidadifftutori plugin packag codeblock consol pip instal e instal packag edit mode see refhowtopluginsinstal section detail see plugin list codeblock consol verdi plugin list aiidacalcul verdi plugin list aiidacalcul difftutori verdi plugin list aiidapars _howtoplugincodesrun run calcul entri point set readi launch first calcul new plugin havent alreadi done refset computerhowtoruncodescomput follow assum localhost codeblock consol verdi comput setup l localhost h localhost coreloc coredirect w echo pwdwork n verdi comput configur coreloc localhost safeinterv n creat input file calcul codeblock consol echo e file contentncont filetxt echo e file contentncont filetxt mkdir input_fil mv filetxt filetxt input_fil write launchpi script literalinclud includesnippetspluginslaunchpi languag python note launchpi script set aiida code instanc associ usrbindiff execut diffcalcul class entri point diff code automat set code input port builder pass input calcul plugin launch calcul codeblock consol verdi run launchpi everyth goe well print result calcul someth like codeblock consol verdi run launchpi comput diff file c content content tip encount pars error help make reftopicscalculationsusagecalcjobsdry_run allow inspect input folder gener aiida calcul launch final instead run calcul current shell submit calcul aiida daemon restart daemon updat python environ codeblock consol verdi daemon restart reset updat launch script use codeblock python submit calcul aiida daemon node enginesubmitbuild printsubmit calcul formatnod note node calcjobnod repres state underli calcul process may finish yet launch calcul codeblock consol verdi run launchpi print uuid pk submit calcul use verdi command line interfac refmonitortopicsprocessesusagemonitor process codeblock bash verdi process list p show process calcul ran use verdi calcjob outputcat pk check output calcul submit daemon congratul write plugin extern simul code use submit calcul still time left consid go option exercis _howtoplugincodescliopt exercis support commandlin option discuss diff know coupl commandlin option codeblock bash diff help usag diff option file compar file line line ignorecas ignor case differ file content e ignoretabexpans ignor chang due tab expans b ignorespacechang ignor chang amount white space w ignoreallspac ignor white space b ignoreblanklin ignor chang line blank ignorematchinglinesr ignor chang line match simplic let focu excerpt option shown allow user plugin pass along notic one option ignorematchinglin requir user pass regular express string option dont requir valu one way repres set command line option like code bash diff ignorecas ignorematchinglinesabc would use python dictionari code python paramet ignorecas true ignorespacechang fals ignorematchinglin abc simpl code snippet translat dictionari list command line option code python def cli_optionsparamet return command line option paramet dictionari param dict paramet dictionari command line paramet option key valu parametersitem could valid key known commandlin option isinstancevalu bool valu optionsappendfkey elif isinstancevalu str could valid valu valid regular express optionsappendfkey optionsappendvalu return option note pass paramet along simul code tri valid detect error directli submiss calcul thu prevent calcul malform input ever enter queue hpc system sake breviti perform valid numer python librari voluptuous_ use aiidadiff_ see exampl httpsgithubcomaiidateamaiidadiffblobcbdccdbddadbabfddbfaiida_diffdata__init__pyll_ marshmallow_ pydantic_ help defin schema valid input let open previou calculationspi file start modifi diffcalcul class defin method add new input spec label paramet type dict aiidaorm import dict prepare_for_submiss method run cli_opt function selfinputsparametersget_dict get list commandlin option add codeinfocmdline_param dropdown solut add follow line defin method codeblock python specinputparamet valid_typedict helpdiff commandlin paramet copi cli_opt snippet end calculationspi set cmdline_param code python codeinfocmdline_param cli_optionsselfinputsparametersget_dict selfinputsfilefilenam selfinputsfilefilenam that let open launchpi script pass along command line paramet code python builderparamet ormdictdictignorecas true chang capit one charact first line filetxt restart daemon submit new calcul code bash verdi daemon restart verdi run launchpi everyth work intend capit differ first line ignor thu show output mark end howto calcjob parser plugin still rather basic aiidadifftutori plugin packag miss number use featur packag metadata document test ci etc continu refhowtopluginsdevelop order learn quickli creat featurerich new plugin packag scratch todo _howtoplugincodesschedul titl ad support custom schedul _ _howtoplugincodestransport titl ad support custom transport _ int replac pyclassaiidaormnodesdataintint singlefiledata replac pyclassaiidaormnodesdatasinglefilesinglefiledata structuredata replac pyclassaiidaormnodesdatastructurestructuredata remotedata replac pyclassaiidaormnodesdataremoteremotedata dict replac pyclassaiidaormnodesdatadictdict code replac pyclassaiidaormnodesdatacod parser replac pyclassaiidaparsersparserpars pars replac pyclassaiidaparsersparserparserpars folder replac pyclassaiidacommonfoldersfold folderopen replac pyclassaiidacommonfoldersfolderopen calcjob replac pyclassaiidaengineprocessescalcjobscalcjobcalcjob calcjobnod replac pyclassaiidaormcalcjobnod calcinfo replac pyclassaiidacommoncalcinfo codeinfo replac pyclassaiidacommoncodeinfo folderdata replac pyclassaiidaormnodesdatafolderfolderdata spec replac spec defin replac pyclassaiidaengineprocessescalcjobscalcjobdefin prepare_for_submiss replac pymethaiidaengineprocessescalcjobscalcjobprepare_for_submiss _aiidadiff httpsgithubcomaiidateamaiidadiff _voluptu httpsgithubcomalecthomasvoluptu _pydant httpsgithubcomsamuelcolvinpydant _marshmallow httpsgithubcommarshmallowcodemarshmallow _ httpsgithubcomaiidateamaiidacoreissu _ httpsgithubcomaiidateamaiidacoreissu _howtoshar share data aiida offer two avenu share data other archiv file rest api _howtosharearch share aiida archiv perform calcul aiida would like share aiida proven graph exampl make scientif studi reproduc sinc aiida keep track proven everi comput result step easi tell aiida final result would like reproduc aiida automat includ entir proven use reftopicsprovenanceconsistencytraversalrul export individu node let say key result studi contain three aiida node pk export result togeth proven easi codeblock consol verdi archiv creat mycalculationsaiida node usual use identifi label pk uuid specifi node export result archiv file mycalculationsaiida contain inform pertain export node default travers rule make sure includ complet proven node specifi suffici case see verdi archiv creat help way modifi travers rule tip see would export export use testrun option codeblock consol verdi archiv creat testrun mycalculationsaiida pleas rememb use uuid point colleagu data insid aiida archiv sinc uuid guarante univers uniqu pk arent export larg number node number result export larg exampl highthroughput studi use querybuild add correspond node group myresult see refhowtodataorganizegroup export group codeblock consol verdi archiv creat mycalculationsaiida group myresult altern export entir profil codeblock consol verdi archiv creat mycalculationsaiida publish aiida archiv file aiida archiv file publish research data repositori exampl materi cloud archive_ zenodo_ open scienc framework_ publish aiida archiv materi cloud archive_ also get interact explor section allow peer brows aiida proven graph directli browser _zenodo httpszenodoorg _open scienc framework httpsosfio _materi cloud archiv httpsarchivematerialscloudorg inspect archiv order get quick overview archiv file without import aiida profil use verdi archiv inspect codeblock consol verdi archiv inspect ssspefficiencyaiida version archiv version aiida compress databas statist user count email abcom comput count label bellatrix node count node_typ dataarraykpointskpointsdata datacorearrayarraydata datacorearraybandsbandsdata datacorearraytrajectorytrajectorydata datacorecifcifdata datacorecodecod datacoredictdict datacorefolderfolderdata datacoreremoteremotedata processcalculationcalcfunctioncalcfunctionnod processcalculationcalcjobcalcjobnod process_typ aiidacalculationscodtoolsciffilt aiidacalculationsquantumespressomatdyn aiidacalculationsquantumespressoph aiidacalculationsquantumespressopw aiidacalculationsquantumespressoqr group count type_str coreimport comment count log count link count repo file count also use python api inspect archiv file use pyclassaiidaormquerybuilderquerybuild queri databas codeblock python aiida import orm aiidatoolsarch import get_format archive_format get_format archive_formatopen moder reader qb readerquerybuild printqbappendormnodecount import archiv use verdi archiv import import aiida archiv current aiida profil verdi archiv import accept url eg codeblock consol verdi archiv import httpsarchivematerialscloudorgrecordfilefile_idaceafebcdbcfilenamesssp__pbe_efficiencyaiidarecord_id import aiida avoid identifi collis node duplic base uuid email comparison pyclassaiidaormusersus entri default exist entiti updat recent chang node extra comment special mode determin import detail see verdi archiv import help see would import import use testrun option codeblock consol verdi archiv import testrun mycalculationsaiida tip aiida archiv format evolv time still import archiv creat previou aiida version outdat archiv version detect import archiv file automat migrat newest version within temporari folder import retri also use verdi archiv migrat creat updat archiv file exist archiv file updat place _howtoshareserv serv data rest api aiida rest api allow queri aiida databas http return result refjson format referencerestapiendpointsrespons note octob aiida rest api support get method read particular yet support workflow manag featur howev part aiida roadmap httpsgithubcomaiidateamaiidacorewikiaiidareleaseroadmap_ _howtoshareservelaunch launch rest api start serv data default aiida profil via rest api codeblock consol verdi restapi rest api run httpapiv serv flask app aiidarestapirun_api lazi load environ product warn develop server use product deploy use product wsgi server instead debug mode run http press ctrlc quit rest api run port local comput like verdi command select differ aiida profil via p profil option codeblock bash verdi p another_profil restapi note rest api version histori version histori aiidacor b v simplifi endpoint node process calcjob group comput server remain aiidacor b b v develop version never ship stabl releas aiidacor b v first api version new endpoint ad step step _howtoshareservequeri queri rest api url queri rest api consist base url default httpapiv queri base url return list avail endpoint path defin request resourc option follow specif endpoint exampl node nodespag nodesprojectable_properti nodesuuid nodesuuidlinksoutgo endpoint append api return list object resourc order request specif object resourc append uuid note usual use partial uuid long uniqu order queri pk need use id filter see also appli pyclassaiidaormusersus dont uuid instead use email option queri string filter order pagin result exampl limitoffset id node_typelikedata exampl tri httpapivus httpapivcomputersscheduler_typeslurm httpapivnodesidnode_typelikedata tip interact explor section materi cloud httpswwwmaterialscloudorgexploremenu_ power aiida rest api queri underli api either use web browser use tool like curl codeblock consol curl httpsaiidadevmaterialscloudorgdstructuresapivus extens user document endpoint queri string well format respons see refaiida rest api refer referencerestapi _howtoshareservedeploy deploy rest api server verdi restapi command run rest api werkzeug pythonbas http server order deploy product instanc rest api serv data other recommend use fulli fledg web server apach httpshttpdapacheorg_ nginx httpswwwnginxcom_ run rest api python applic web server gateway interfac wsgi httpswsgireadthedocsio_ note one apachenginx server host multipl instanc rest api eg serv data differ aiida profil myprofilerestwsgi script aiida profil myprofil would look like literalinclud includesnippetsmyprofilerestwsgi note see document pyfuncaiidarestapirun_apiconfigure_api avail configur option follow explain run wsgi applic use apach ubuntu instal enabl mod_wsgi wsgi modul httpsmodwsgireadthedocsio_ modul codeblock consol sudo apt instal libapachemodwsgipi sudo aenmod wsgi place wsgi script folder server exampl homeubuntuwsgimyprofilerestwsgi configur apach run wsgi applic use virtual host configur similar literalinclud includesnippetsaiidarestconf place aiidarestconf file etcapachesitesen restart apach sudo servic apach restart abl reach rest api localhostmyprofileapiv port _howtocookbook cookbook howto page collect use short script code snippet may use everyday usag aiida check queu job schedul want know job current schedul eg dynam decid comput submit delay submiss etc use follow script exampl codeblock python def get_scheduler_jobscomputer_labellocalhost only_current_usertru return list current job schedul note ssh connect open close everi launch function param computer_label label comput param only_current_us true retriev job current default user featur support schedul plugin otherwis show job aiida import orm comput computerobjectsgetlabelcomputer_label transport computerget_transport schedul computerget_schedul schedulerset_transporttransport open ssh connect ssh transport transport only_current_us remote_usernam transportwhoami all_job schedulerget_jobsuserremote_usernam as_dicttru els all_job schedulerget_jobsas_dicttru return all_job __name__ __main__ all_job get_scheduler_jobsonly_current_userfals user_job get_scheduler_jobsonly_current_usertru printfcurr user lenuser_job job lenall_job schedul printdetail job view job_id job_info user_jobsitem printfjob id job_id k v job_infoitem k raw_data continu printf k v print use verdi run execut codeblock consol verdi run file_with_scriptpi import everi time call function two ssh connect open care run function spars supercomput center might block account possibl work around limit pass transport paramet pass reus exampl output would current user job schedul detail job view job id job_id wallclock_time_second titl aiida num_machin job_stat run queue_nam parallel num_mpiproc allocated_machines_raw rnode submission_tim job_own some_remote_usernam dispatch_tim annot none requested_wallclock_time_second get authinfo know comput user open transport comput need correspond classaiidaormauthinfosauthinfo object contain requir inform specif user relev classaiidaormcomputerscomput classaiidaormusersus object obtain follow codeblock python computerget_authinfous exampl use util function codeblock python def get_authinfo_from_computer_labelcomputer_label aiidaorm import load_comput user comput load_computercomputer_label user userobjectsget_default return computerget_authinfous use instanc follow codeblock python authinfo get_authinfo_from_computer_labellocalhost authinfoget_transport transport printtransportlistdir _howtodata work data _howtodataimport import data aiida allow user export data databas export archiv file import aiida databas aiida export archiv would like import use verdi archiv import command see refth refer sectionreferencecommandlineverdiarch detail note inform export import data via aiida archiv see refhow share datahowtosharearch instead exist data yet part aiida export archiv file folder tabular data array kind data howto guid show import aiida store piec data aiida need wrap pyclassaiidaormnodesdatadata node repres refproven graph topicsproven differ varieti subclass data class suit differ type data aiida ship number builtin data type list use refverdi pluginreferencecommandlineverdiplugin command execut verdi plugin list aiidadata display someth like regist entri point aiidadata array bool code dict float folder list singlefil info pass entri point argument display detail inform output suggest get inform type append name command exampl verdi plugin list aiidadata singlefil descript singlefil data type design store singl file entireti singlefil node creat exist file local filesystem two way pass absolut path file singlefil singlefiledatafileabsolutepathtofiletxt pass filelik object openabsolutepathtofiletxt rb handl singlefil singlefiledatafilehandl filenam result file databas base filenam pass file argument default overridden pass explicit name filenam argument constructor see singlefil type correspond pyclassaiidaormnodesdatasinglefilesinglefiledata class design wrap singl file store local filesystem file would like store aiida use verdi shell creat codeblock python singlefiledata datafactorycoresinglefil singlefil singlefiledatafileabsolutepathtofiletxt singlefilestor first step load class correspond data type pass name list verdi plugin list aiidadata pyclassaiidapluginsfactoriesdatafactori construct instanc class pass file interest argument note exact manner construct instanc particular data type type depend use verdi plugin list aiidadata entry_point command get inform specif type note construct get unstor node mean point data yet store databas first inspect option modifi happi result store new data perman call pymethaiidaormnodesnodenodestor method everi node assign univers uniqu identifi uuid upon creation store also assign primari key pk retriev nodeuuid nodepk properti respect use identifi refer retriev node way find retriev data previous import describ section refhow find datahowtoqueri none current avail data type list verdi plugin list seem fit need also creat custom type detail refer next section refhow add support custom data typestopicsdata_typesplugin _howtodataimportproven proven aiida automat keep proven data creat calcul workflow clearli case creat data node manual describ previou section typic manual creation data happen begin project data extern databas import start point calcul still keep form proven classaiidaormnodesdatadata base class allow record _source_ data contain construct new data node type pass dictionari inform sourc sourc keyword argument codeblock python data datasourceuri httpsomedomainorgfilesid id store data alway retriev sourc properti codeblock python datasourc return sourc dictionari pass constructor follow list show key allow set sourc dictionari db_name name extern databas db_uri base uri extern databas uri exact uri data retriev ideal persist uri id extern id data identifi extern databas version version data extra option dictionari field sourc descript source_md md checksum data descript humanread free form descript data sourc licens string type licens appli data key defin except rais constructor _howtodataorgan organ data _howtodataorganizegroup group node aiida databas great automat store data sometim tricki navig flat data store creat order mass data group set node togeth would file folder filesystem folder analog repres pyclassaiidaormgroupsgroup class group instanc hold amount node node contain number group typic use case store node share common properti singl group show perform typic set oper one may want perform group creat new group command line interfac codeblock consol verdi group creat test_group python interfac codeblock ipython group grouplabeltest_group groupstor group test_group type core user xxxxxcom list avail group exampl codeblock consol verdi group list group come differ type indic type string default verdi group list show group type core case want show group anoth type use ttypestr option want show group type use aalltyp option exampl list group type coreauto use codeblock consol verdi group list coreauto similarli use type_str key filter group querybuild codeblock ipython querybuilderappendgroup filterstype_str coreallflattru group another_group type core user xxxxxcom group old_group type core user xxxxxcom group new_group type core user xxxxxcom add node group test_group creat add node exampl add node pk group could either use command line interfac codeblock consol verdi group addnod g test_group realli want add node grouptest_group yn python interfac codeblock ipython groupadd_nodesload_nodepk show inform group command line interfac codeblock consol verdi group show test_group group label test_group group type_str user group descript descript node pk type creat code dhm ago remov node group command line interfac codeblock consol verdi group removenod g test_group realli want remov node grouptest_group yn python interfac codeblock ipython group load_grouplabeltest_group groupremove_nodesload_nod altern might want remov node group command line need add cclear option verdi group removenod codeblock consol verdi group removenod c g test_group realli want remov node grouptest_group yn python interfac use clear method achiev goal codeblock ipython group load_grouplabeltest_group groupclear renam group command line interfac codeblock consol verdi group relabel test_group old_group success label chang old_group python interfac codeblock ipython group load_grouplabelold_group grouplabel another_group delet group command line interfac codeblock consol verdi group delet another_group sure delet groupanother_group yn success groupanother_group delet delet oper relat group default affect node exampl delet group node belong group remain databas happen remov node group remain databas wont belong group anymor also wish delet node delet group use deletenod option codeblock consol verdi group delet another_group deletenod copi one group anoth oper copi node sourc group destin group destin group yet exist creat automat command line interfac codeblock consol verdi group copi source_group dest_group success node copi groupsource_group groupdest_group python interfac codeblock ipython src_group groupobjectsgetlabelsource_group dest_group grouplabeldestination_groupstor dest_groupadd_nodeslistsrc_groupnod exampl use group section provid practic exampl one use group structur organ node databas _howtodatagroupsimilar group structur similar properti suppos want group structur comput bandgap higher ev group name promising_structur one could use follow approach codeblock python find structur bandgap qb querybuild qbappendstructuredata tagstructur project project entir structur object qbappendcalcjobnod with_incomingstructur tagcalcul qbappenddict with_incomingcalcul filtersattributesbandgap ad structur promising_structur group group load_grouplabelpromising_structur groupadd_nodesqallflattru note node includ group ad simpli ignor mean add_nod safe call multipl time node werent alreadi part group ad use group data process demonstr submit calcul structur belong group name promising_structur codeblock python queri structur belong promising_structur group qb querybuild qbappendgroup filterslabel promising_structur taggroup qbappendstructuredata with_groupgroup submit simul structur qballflattru builder someworkchainget_build builderstructur structur submitbuild note howev one also use groupnod access node group achiev result one would need someth follow codeblock python group load_grouplabelpromising_structur make sure includ structur group contain node structur node node groupnod isinstancenod structuredata structur structur builder someworkchainget_build builderstructur structur submitbuild find structur properti property_a valu lower also belong promising_structur group one could build queri follow codeblock python qb querybuild qbappendgroup filterslabel promising_structur taggroup qbappendstructuredata with_groupgroup tagstructur project qbappendsomeworkchain with_incomingstructur tagcalcul qbappenddict with_incomingcalcul filtersattributesproperty_a return valu qballflattru would contain structur match mention criteria _howtodataorganizegrouppath organis group hierarchi meta keyword grouppath group aiida inher flat group may contain node group howev possibl construct virtual group hierarchi base delimit group label use pyclassaiidatoolsgroupspathsgrouppath util pyclassaiidatoolsgroupspathsgrouppath design work much way python pyclasspathlibpath wherebi path denot forward slash charact group label exampl say group codeblock consol verdi group list pk label type string user basesub_group core useremailcom basesub_group core useremailcom baseothersub_group core useremailcom also access commandlin codeblock consol verdi group path ls l path subgroup base base verdi group path ls base basesub_group basesub_group python interfac codeblock ipython aiidatoolsgroup import grouppath path grouppathbas printlistpathchildren grouppathbasesub_group clsclass aiidaormgroupsgroup grouppathbasesub_group clsclass aiidaormgroupsgroup grouppath construct use index divisor codeblock ipython path grouppath pathbas path base true use pyfuncaiidatoolsgroupspathsgrouppathbrows attribut also construct path preced attribut use interact environ wherebi avail path shown tabcomplet codeblock ipython pathbrowsebasesub_group grouppathbasesub_group clsclass aiidaormgroupsgroup check exist path element codeblock ipython base path true group may virtual case label directli relat group group retriev pyfuncaiidatoolsgroupspathsgrouppathget_group method codeblock ipython pathis_virtu true pathget_group none true pathbasesub_groupis_virtu fals pathbasesub_groupget_group group basesub_group type core user useremailcom group creat destroy codeblock ipython pathbasesub_groupdelete_group pathbasesub_groupis_virtu true pathbasesub_groupget_or_create_group group basesub_group type core user useremailcom true pathbasesub_groupis_virtu fals travers path use pyfuncaiidatoolsgroupspathsgrouppathchildren attribut recurs travers use pyfuncaiidatoolsgroupspathsgrouppathwalk codeblock ipython subpath pathwalkreturn_virtualfals printsubpath grouppathbasesub_group clsclass aiidaormgroupsgroup grouppathbasesub_group clsclass aiidaormgroupsgroup grouppathbaseothersub_group clsclass aiidaormgroupsgroup also travers directli node path option filter node class filter allow refquerybuild howtoqueri codeblock ipython aiidaorm import data data data dataset_extrakey valu datastor data uuid adbdfdaeaddd pk pathbasesub_groupget_groupadd_nodesdata nextpathwalk_nodesnode_classdata filtersextraskey valu walknoderesultgroup_pathgrouppathbasesub_group clsclass aiidaormgroupsgroup nodedata uuid adbdfdaeaddd pk final also specifi group subclass discuss codeblock ipython aiidaorm import upffamili path grouppathclsupffamili pathbaseget_or_create_group upffamili base type coreupf user useremailcom true import pyclassaiidatoolsgroupspathsgrouppath instanc recognis group instanti cl type default cl aiidaormgroup codeblock ipython ormupffamilylabelastor upffamili type coreupf user useremailcom grouppathais_virtu true grouppatha clsormupffamilyis_virtu fals _howtodatadelet delet data default everi time run submit new calcul aiida creat new node databas never replac delet data case howev might use delet node use anymor instanc test run incorrectwrong data calcul case aiida provid verdi node delet command pyfuncaiidatoolsgraphdeletionsdelete_nod function remov node proven graph caution data delet way recov unless made backup critic note even ask delet one node verdi node delet typic delet number addit link node order preserv consist state proven graph instanc delet input calcul aiida delet also calcul otherwis would effect chang input calcul proven graph full set consist rule explain detail refher topicsprovenanceconsist therefor alway check output verdi node delet make sure delet expect also use dryrun flag verdi node delet see command would without perform actual oper addit number addit rule mandatori ensur consist toggl user instanc set createforward delet calcul want delet also data produc use instead nocreateforward delet calcul keep output data note effect strip proven inform output data full list flag avail help command verdi node delet h codeblock python aiidatool import delete_nod pks_to_be_delet delete_nod dry_runtru create_forwardtru call_calc_forwardtru call_work_forwardtru delet comput delet comput use verdi comput delet command mostli use right creat comput realis error want remov particular note verdi comput delet prevent execut comput alreadi use least one node case need use verdi node delet delet first correspond node delet mutabl data subset data aiida mutabl also store node use conveni user taggroupcom data data safe delet time includ notabl node extra delet use pymethaiidaormentitiesentityextrasmixindelete_extra pymethaiidaormentitiesentityextrasmixindelete_extra_mani method node comment remov use pymethaiidaormnodesnodenoderemove_com group delet use pymethgroupobjectsdelet aiidaormgroupsgroupcollectiondelet command delet group node contain group complet delet aiida profil dont want select delet node instead want delet whole aiida profil altogeth use verdi profil delet command command delet file repositori databas danger possibl restor delet profil unless previous back _howtodatatransf transfer data versionad danger featur still beta version api might chang near futur therefor recommend reli publicproduct workflow moreov feedback implement much appreci httpsgithubcomaiidateamaiidacoreissu calcul job launch aiida creat pyclassaiidaormnodesdataremoteremotedata node attach output node calcul node label remote_fold input file gener calcjob plugin copi remot folder sinc job execut well code produc output file remot folder also sinc pyclassaiidaormnodesdataremoteremotedata node explicitli store filepath remot comput actual content function less like symbol link mean remot folder get delet way retriev content calcjob plugin reason specifi file refretrievedtopicscalculationsusagecalcjobsfile_lists_retriev store local pyclassaiidaormnodesdatafolderfolderdata node safeke attach calcul node output label retrieved_fold although refretrieve_listtopicscalculationsusagecalcjobsfile_lists_retriev allow specifi output file retriev local done calcul submit order provid flexibl decid file complet calcul job store local even termin aiida ship pyclassaiidacalculationstransfertransfercalcul plugin calcul plugin enabl retriev file remot machin save local pyclassaiidaormnodesdatafolderfolderdata specif copi provid input type codeblock ipython instructions_cont instructions_contretrieve_fil true instructions_contsymlink_fil node_keynam sourcepathfilenam targetpathfilenam instructions_nod ormdictdictinstructions_cont sourcepathfilenam targetpathfilenam rel path respect folder node_keynam string use provid sourc pyclassaiidaormnodesdataremoteremotedata node calcul also need provid comput transfer occur codeblock ipython transfer_build calculationfactorycoretransferget_build transfer_builderinstruct instructions_nod transfer_buildersource_nod node_keynam source_nod transfer_buildermetadatacomput source_nodecomput variabl source_nod correspond remotedata node whose content need retriev final run submit calcul would codeblock ipython aiidaengin import submit submittransfer_build also use copi local file new pyclassaiidaormnodesdataremoteremotedata folder first adapt instruct set retrieve_fil fals use local_fil list instead symlink_fil codeblock ipython instructions_cont instructions_contretrieve_fil fals instructions_contlocal_fil node_keynam sourcepathfilenam targetpathfilenam instructions_nod ormdictdictinstructions_cont also relev note case source_nod type pyclassaiidaormnodesdatafolderfolderdata manual select comput want copi file look avail comput run verdi comput list use label shown load pyfuncaiidaormutilsload_comput codeblock ipython transfer_buildermetadatacomput load_computersomecomputerlabel upload retriev copi multipl file append list local_fil symlink_fil key instruct input respect also possibl copi file number node provid sever source_nod differ node_keynam target node alway one gather file singl call distribut _howtointeract interact aiida varieti manner interact aiida refthrough command line interfac howtointeractcli refthrough script howtointeractscript refthrough interact shell howtointeractshel refthrough interact notebook howtointeractnotebook refthrough rest api howtointeractrestapi _howtointeractcli command line interfac aiida come command line interfac call verdi refreferencecommandlin section give overview avail command detail inform refer topic section reftopicscli _howtointeractscript script aiida python api use python script mix python code requir api use aiida profil load recommend way accomplish run script command line interfac codeblock consol verdi run scriptpi verdi cli automat load default profil call actual script pass command line argument may specifi note refdiffer profil select topicscliprofil use profil option verdi command altern one also add aiida specif shebang httpsenwikipediaorgwikishebang_unix_ top file codeblock bash usrbinenv runaiida script start shebang execut automat pass verdi run would call verdi run directli advantag one longer explicitli type verdi run run script simpli make execut execut directli downsid allow specifi particular profil alway load default profil whatev reason verdi run special shebang use profil also load directli api within python script codeblock python aiida import load_profil load_profil one pass particular profil name methaiidamanageconfigurationload_profil otherwis default profil load _howtointeractshel interact shell aiida provid python api use interact shell ipython httpsipythonorg_ recommend way start interact shell session work aiida command line interfac codeblock consol verdi shell command open normal ipython shell automat load default aiida profil requir use python api note refdiffer profil select topicscliprofil use profil option verdi command addit automat load aiida profil certain modul aiida api use often automat import modul preload configur use refreferencecommandlineverdiconfig command whatev reason use verdi shell profil also load directli api within shell codeblock ipython aiida import load_profil load_profil aiidamanageconfigurationprofileprofil xfccfdca one pass particular profil name methaiidamanageconfigurationload_profil otherwis default profil load _howtointeractnotebook interact notebook similar refinteract shell howtointeractshel aiida also directli compatbil interact python notebook jupyt httpsjupyterorg_ use aiida python api notebook first profil load codeblock ipython aiida import load_profil load_profil aiidamanageconfigurationprofileprofil xfccfdca one pass particular profil name methaiidamanageconfigurationload_profil otherwis default profil load accomplish use follow magic statement codeblock ipython aiida magic line replic environ refth interact shell howtointeractshel provid verdi shell howev requir onetim instal detail section refintroinstalljupyt _howtointeractrestapi rest api aiida ship built rest api allow queri data particular profil refer section refhowtoshareservelaunch learn start rest api section refhowtoshareservequeri provid inform interact run rest api _howtossh setup ssh connect aiida commun remot comput via ssh protocol two way set ssh connect aiida use passwordless ssh key easier less safe use passwordprotect ssh key sshagent one step safer _howtosshpasswordless use passwordless ssh key numer tutori web see eg httpswwwredhatcomsysadminpasswordlessssh_ briefli first creat new privatepubl keypair aiidaaiidapub leav passphras emtpi codeblock consol sshkeygen rsa b f sshaiida copi public key remot machin normal add public key remot machin sshauthorized_key codeblock consol sshcopyid sshaiida yourusernameyourclusteraddress add follow line sshconfig file creat exist codeblock bash host yourclusteraddress user yourusernam identityfil sshaiida note cluster need connect anoth comput proxi first use proxyjump proxycommand featur ssh see refhowtosshproxi abl access remot comput without need type password via codeblock consol ssh yourclusteraddress connect use copi file sftp yourclusteraddress admonit connect close failur class attent titleicontroubleshoot ssh command work sftp command print connect close may line bashrc file cluster either produc text output error removecom line file output error produc make sftp work final plan use batch schedul remot comput tri also codeblock consol ssh yourclusteraddress queue_visualization_command replac queue_visualization_command squeue slurm qstat pbspro equival command schedul check print list job queue without error admonit schedul error class attent titleicontroubleshoot previou command error command found queue_visualization_command work fine youv log via ssh may guard bashrc file cluster prevent necessari modul load look line like codeblock bash z ps return codeblock bash case return esac prevent instruct follow execut either move relev instruct line delet guard entir wonder whether path environ variabl set correctli check valu use codeblock bash ssh yourclusteraddress echo path _howtosshpassphras use passphraseprotect key via sshagent tool like sshagent avail linux distro maco allow enter passphras protect key provid access decrypt key long agent run allow use passphraseprotect key requir hpc centr make decrypt key avail aiida automat ssh oper creat key start follow instruct refhowtosshpasswordless differ enter passphras creat key log remot comput ad key agent provid passphras privat key agent code bash sshadd sshaiida privat key rel passphras record instanc agent note passphas store agent next reboot shut restart aiida machin start aiida deamon rememb run sshadd command start sshagent modern linux instal sshagent start automat login eg ubuntu later maco later receiv error could open connect authent agent need start agent manual instead check whether start sshagent current shell code bash eval sshagent order reus agent instanc everywher includ aiida daemon environ variabl sshagent need reus shell download script downloadloadsinglesshagentsh includeloadsinglesshagentsh place eg bin add follow line bashrc file code bash f binloadsinglesshagentsh binloadsinglesshagentsh fi check work open new shell bashrc file sourc run sshadd close shell open new shell tri log remot comput tri log remot comput longer requir passphras key correspond passphras store agent stop reboot rememb run sshadd sshaiida start aiida daemon integr sshagent keychain osx osx sierra later nativ sshadd client allow passphras store persist osx keychain httpssupportapplecomengbguidekeychainaccesskycamac__ store passphras keychain use osxspecif k argument code bash sshadd k sshaiida instruct ssh look osx keychain key passphras add follow line sshconfig code bash host usekeychain ye aiida configur refconfigur comput aiida howtoruncodescomputerconfigur simpli make sure allow ssh agent set true default _howtosshproxi connect remot comput via proxi server comput cluster requir connect intermedi server proxi connect cluster target run calcul section explain use proxyjump proxycommand featur ssh order make jump automat tip method also use avoid start virtual privat network vpn client ssh account proxyjumphost server access current network access target machin directli ssh configur decid whether use proxyjump recommend proxycommand direct pleas check version ssh client first ssh v proxyjump direct ad version openssh henc use older version ssh machin proxi use older proxycommand setup proxi configur proxyjump edit sshconfig file comput instal aiida creat miss add follow line host shortname_target hostnam fullhostname_target user user_target identityfil sshaiida proxyjump user_proxyfullhostname_proxi host fullhostname_proxi identityfil sshaiida replac _target _proxi variabl hostus name respect server dropdown fapluscircl altern setup proxycommand setup proxi configur proxycommand instead edit sshconfig file comput instal aiida creat miss add follow line host shortname_target hostnam fullhostname_target user user_target identityfil sshaiida proxycommand ssh w hp user_proxyfullhostname_proxi host fullhostname_proxi identityfil sshaiida replac _target _proxi variabl hostus name respect server case allow directli connect target server use codeblock consol ssh shortname_target note user directori share proxi target supercomput facil user directori share machin need follow refinstruct passwordless connect howtosshpasswordless twice connect comput proxi server connect proxi server target server eg public key must list sshauthorized_key file proxi target server aiida configur refconfigur comput aiida howtoruncodescomputerconfigur aiida automat pars requir inform sshconfig file notabl except proxy_jump direct must specifi manual simpli copi past instruct use proxyjump sshconfig input proxy_jump codeblock consol verdi comput configur coressh shortname_target allow ssh agent true ssh proxi jump user_proxyfullhostname_proxi note chain proxi specifi commasepar list need specifi differ usernam user_proxi usernam specifi proxi usernam target use import specifi proxy_command manual specifi updat proxy_command option via verdi comput configur ssh pleas use placehold h p provid actual hostnam port aiida replac pars sshconfig file use kerbero token remot machin requir authent kerbero token need obtain use ssh typic need instal libffi sudo aptget instal libffidev ubuntu instal ssh_kerbero extra instal aiidacor see refintroinstallsetup provid necessari gssapi option sshconfig file verdi comput configur alreadi pick appropri valu gssrelat option _howtorunworkflow run multistep workflow launch predefin workflow first step launch predefin workflow load work function work chain class defin workflow want run recommend method load workflow use workflowfactori exampl codeblock python aiidaplugin import workflowfactori add_and_multipli workflowfactorycorearithmeticadd_multipli multiplyaddworkchain workflowfactorycorearithmeticmultiply_add essenti import workflow respect modul use workflowfactori advantag call entri point eg corearithmeticmultiply_add chang packag plugin reorganis mean code less like break updat aiida plugin suppli workflow list instal plugin easili access via verdi cli codeblock consol verdi plugin list see list workflow entri point simpli use codeblock consol verdi plugin list aiidaworkflow specifi entri point workflow see descript input output exit code codeblock consol verdi plugin list aiidaworkflow corearithmeticmultiply_add work function run work function simpl call typic python function simpli call requir input argument codeblock python aiidaplugin import workflowfactori datafactori add_and_multipli workflowfactorycorearithmeticadd_multipli int datafactorycoreint result add_and_multiplyint int int add_and_multipli work function return output int node assign variabl result note input argument work function must instanc data node subclass call add_and_multipli function regular integ result valueerror store proven graph note although exampl show straightforward way run add_and_multipli work function sever way run process return result exampl run_get_nod function aiida engin return result workflow work function node see refcorrespond topic section detail topicsprocessesusagelaunch work chain launch work chain either use run submit function either function need provid class work chain first argument follow input keyword argument run work chain use run function execut system process interpret launch codeblock python aiidaengin import run aiidaplugin import workflowfactori datafactori int datafactorycoreint multiplyaddworkchain workflowfactorycorearithmeticmultiply_add add_cod load_codelabeladd result runmultiplyaddworkchain xint yint zint codeadd_cod altern first construct dictionari input pass run function take advantag python automat keyword expans httpsdocspythonorgtutorialcontrolflowhtmlunpackingargumentlists_ codeblock python input x int int z int code add_cod result runmultiplyaddworkchain input particularli use case workflow lot input case run multiplyaddworkchain workflow return result workflow ie dictionari node produc output key dictionari correspond label respect output note similar process multipl function launch work chain see section reflaunch process detailstopicsprocessesusagelaunch sinc run workflow block interpret wait workflow finish get back control moreov wont abl turn comput even termin workflow fulli termin difficult run multipl workflow parallel advis submit complex longer work chain daemon codeblock python aiidaengin import submit aiidaplugin import workflowfactori datafactori int datafactorycoreint multiplyaddworkchain workflowfactorycorearithmeticmultiply_add add_cod load_codelabeladd input x int int z int code add_cod workchain_nod submitmultiplyaddworkchain input note use submit work chain run local interpret sent daemon get back control instantli allow submit multipl work chain time daemon start work parallel submit call return get result run get node repres work chain submit work chain instead directli run make easier execut multipl work chain parallel also ensur progress workchain lost restart comput note aiida v possibl submit work chain work function daemon older version allow submiss work chain wherea work function submit daemon henc run unfamiliar input particular workchain conveni tool set work chain refprocess buildertopicsprocessesusagebuild obtain use get_build method implement everi calcjob workchain codeblock ipython aiidaplugin import workflowfactori datafactori int datafactorycoreint multiplyaddworkchain workflowfactorycorearithmeticmultiply_add builder multiplyaddworkchainget_build explor input work chain use tab autocomplet type builder hit tab want get detail specif input simpli add press enter codeblock ipython builderx type properti string form properti object xaddd docstr name x requir true valid_typ class aiidaormnodesdataintint non_db fals see x input requir need int type store databas non_db fals use builder input workchain provid one one codeblock ipython buildercod load_codelabeladd builderx int builderi int builderz int requir input workflow provid builder either run work chain submit daemon codeblock ipython aiidaengin import submit workchain_nod submitbuild note detail process builder see refcorrespond topic sectiontopicsprocessesusagebuild know run predefin workflow may want start refwrit ownhowtowriteworkflow _howtoqueri find queri data aiida databas store graph connect entiti queri classaiidaormquerybuilderquerybuild class start write queri help know want queri languag databas need tell backend entiti look option properti want project exampl might interest label calcul pk output know relationship entiti interest node aiida graph vertic connect link edg node exampl either input output anoth node also ancestor descend know want filter result queri clear want get classaiidaormquerybuilderquerybuild build sqlqueri two way use classaiidaormquerybuilderquerybuild append method construct queri step step use querybuilderappend method dictionari approach construct dictionari defin queri pass classaiidaormquerybuilderquerybuild api provid function append method may suitabl interact use eg verdi shell wherea dictionari method use script section focu basic append method advanc queri detail queri dictionari see reftop section advanc queri topicsdatabaseadvancedqueri _howtoqueryselect select entiti use append method classaiidaormquerybuilderquerybuild queri entiti interest suppos want queri calcul job node databas codeblock python aiidaorm import querybuild qb querybuild instanti instanc one instanc one queri qbappendcalcjobnod set first vertex path interest instanc differ class also pass iter class howev ormtyp eg subclass classaiidaormnodesnodenod codeblock python qb querybuild instanti instanc one instanc one queri qbappendcalcjobnod workchainnod set first vertic path either workchainnod job note process runtim classaiidaengineprocessesprocessprocess execut classaiidaormnodesnodenod store data databas see refcorrespond topic sectiontopicsprocessesconceptstyp detail explan classaiidaormquerybuilderquerybuild allow pass either classaiidaormnodesnodenod class eg classaiidaormnodesprocesscalculationcalcjobcalcjobnod classaiidaengineprocessesprocessprocess class eg classaiidaengineprocessescalcjobscalcjobcalcjob automat select right entiti queri use either classaiidaormnodesprocesscalculationcalcjobcalcjobnod classaiidaengineprocessescalcjobscalcjobcalcjob produc queri result _howtoqueryresult retriev result append entiti want queri classaiidaormquerybuilderquerybuild next question get result sever way obtain data queri codeblock python qb querybuild instanti instanc qbappendcalcjobnod set first vertic path first_row qbfirst return list result first row all_results_d qbdict return result list dictionari all_results_l qball return list list case work larg dataset also return queri gener codeblock python all_res_d_gen qbiterdict return gener dictionari result all_res_l_gen qbiteral return gener list retriev data batch start work data queri complet finish exampl iter result queri loop codeblock python entri qbiteral someth singl entri queri result _howtoqueryfilt filter usual want queri entiti certain class rather filter result base certain properti suppos want classaiidaormnodesprocesscalculationcalcjobcalcjobnod data finish codeblock python qb querybuild initi querybuild instanc qbappend calcjobnod append calcjobnod filter specifi filter attributesprocess_st finish process finish appli multipl filter one entiti queri say interest calcul job databas finish exit_statu codeblock python qb querybuild initi querybuild instanc qbappend calcjobnod append calcjobnod filter specifi filter attributesprocess_st finish process finish attributesexit_statu exit_statu case want queri calcul job satisfi one condit use oper codeblock python qb querybuild qbappend calcjobnod filter attributesprocess_st finish attributesexit_statu written instead exampl would perform exact queri previou one default behavior provid sever filter keyvalu pair dictionari filter argument case want calcul job state finish except also use oper codeblock python qb querybuild qbappend calcjobnod filter attributesprocess_st finish except negat filter ad exclam mark front oper queri calcul job finish except state codeblock python qb querybuild qbappend calcjobnod filter attributesprocess_st finish except note rule appli oper exampl check nonequ sinc equal oper negat prepend complet list avail oper found refadvanc queri sectiontopicsdatabaseadvancedquerytablesoper _howtoqueryrelationship relationship possibl queri data base relationship anoth entiti databas imagin interest calcul job one output creat build upon initi queri classaiidaormnodesprocesscalculationcalcjobcalcjobnod databas use relationship output first step queri codeblock qb querybuild qbappendcalcjobnod tagcalcjob qbappendint with_incomingcalcjob first append call queri classaiidaormnodesprocesscalculationcalcjobcalcjobnod databas tag step uniqu identifi calcjob next look int node output classaiidaormnodesprocesscalculationcalcjobcalcjobnod found first step use with_incom relationship argument int node creat classaiidaormnodesprocesscalculationcalcjobcalcjobnod incom creat link context queri build path consist vertic ie entiti queri connect edg defin relationship complet set possibl relationship use queri well entiti connect found refadvanc queri sectiontopicsdatabaseadvancedquerytablesrelationship note tag identifi alphanumer string simpli label use refer previou vertex along queri path defin relationship _howtoqueryproject project default classaiidaormquerybuilderquerybuild return instanc entiti correspond final append queri path exampl codeblock python qb querybuild qbappendcalcjobnod tagcalcjob qbappendint with_incomingcalcjob code snippet return int node output classaiidaormnodesprocesscalculationcalcjobcalcjobnod howev also project entiti path ad project correspond append call codeblock python qb querybuild qbappendcalcjobnod tagcalcjob project qbappendint with_incomingcalcjob return classaiidaormnodesprocesscalculationcalcjobcalcjobnod int output node howev mani case interest entiti rather pk uuid attribut piec inform store entiti achiev provid correspond column project keyword argument codeblock python qb querybuild qbappendcalcjobnod tagcalcjob qbappendint with_incomingcalcjob projectid exampl execut queri return pk int node output classaiidaormnodesprocesscalculationcalcjobcalcjobnod databas moreov project one piec inform one vertex provid list codeblock python qb querybuild qbappendcalcjobnod tagcalcjob qbappendint with_incomingcalcjob projectid attributesvalu queri qball return list list element correspond one entiti contain two item pk int node valu final project inform multipl vertic along queri path codeblock python qb querybuild qbappendcalcjobnod tagcalcjob project qbappendint with_incomingcalcjob projectid attributesvalu project must start one column entiti databas project instanc use exampl column encount far id uuid attribut column dictionari expand dictionari valu use dot notat done previou exampl obtain attributesvalu use project valu nest dictionari well note awar consist querybuilderal iteral alway return list list even project one properti singl entiti use querybuilderallflattru return queri result flat list case mention begin section provid brief introduct classaiidaormquerybuilderquerybuild basic function learn advanc queri pleas see refth correspond topic sectiontopicsdatabaseadvancedqueri _howtoqueryshortcut shortcut classaiidaormquerybuilderquerybuild gener way queri data aiida certain common queri shortcut ad aiida python api save coupl line code _howtoqueryshortcutsincomingoutgo incom outgo link proven graph aiida refdirect graph topicsprovenanceconcept vertic graph node edg connect call link sinc graph direct node incom outgo link connect neighbor node discov neighbor given node use method methaiidaormnodesnodenodeget_incom methaiidaormnodesnodenodeget_outgo exact interfac return neighbor connect current node link come link go respect exampl given node inspect neighbor node link incom node codeblock python nodeget_incom return instanc classaiidaormutilslinkslinkmanag manag request result specif format interest neighbor node call classaiidaormutilslinkslinkmanagerall_nod method codeblock python nodeget_incomingall_nod return list classaiidaormnodesnodenod instanc correspond node neighbor node link go toward node call methaiidaormutilslinkslinkmanageral method manag instead return list classaiidaormutilslinkslinktripl name tupl tupl contain addit neighbor node also link label link type connect origin node exampl list neighbor node link incom codeblock python link_tripl nodeget_incomingal printlink_triplenod link_triplelink_typ link_triplelink_label note classaiidaormutilslinkslinkmanag provid mani conveni method get inform neigbor node methaiidaormutilslinkslinkmanagerall_link_label need list link label methaiidaormnodesnodenodeget_incom methaiidaormnodesnodenodeget_outgo method accept variou argument allow one filter neighbor node match node_class accept subclass classaiidaormnodesnodenod neighbor node class match return link_typ accept valu classaiidacommonlinkslinktyp neighbor node link link type return link_label_filt accept string express option wildcard use syntax sql like pattern see neighbor node link link label match pattern return exampl codeblock python nodeget_incomingnode_classdata link_typelinktypeinput_calc link_label_filteroutputnode_all_nod return neighbor data node link node link type linktypeinput_calc link label match pattern outputnode_ remind syntax sql like pattern charact match string zero charact _ charact match exactli one charact two special charact escap prepend backslash note put backslash python string escap backslash need two backslash eg match exactli link label a_b need pass link_label_filtera_b _howtoqueryshortcutsinputsoutput input output process methaiidaormnodesnodenodeget_incom methaiidaormnodesnodenodeget_outgo method describ refprevi section howtoqueryshortcutsincomingoutgo use access neighbor certain node provid advanc filter option howev often one doesnt need express simpli want retriev neighbor node syntax succint possibl prime exampl retriev input output refa process topicsprocessesconcept instead use methaiidaormnodesnodenodeget_incom methaiidaormnodesnodenodeget_outgo get input output process_nod one codeblock python input process_nodeinput output process_nodeoutput properti return actual input output directli instead return instanc classaiidaormutilsmanagersnodelinksmanag reason manag input output access link label input output process uniqu tabcomplet exampl process_nod output label result retriev codeblock python process_nodeoutputsresult input output also access key dereferenc codeblock python process_nodeoutputsresult neighbor output given link label classaiidacommonexceptionsnotexistentattributeerror classaiidacommonexceptionsnotexistentkeyerror rais respect note input output properti defin classaiidaormnodesprocessprocessprocessnod mean chain call input output process node guarante classaiidaormnodesdatadata node input output _howtoqueryshortcutscreatorcallercal creator caller call similar input output properti process node properti make explor proven graph easier methaiidaormnodesprocessprocessprocessnodecal defin classaiidaormnodesprocessprocessprocessnod return list process node call node process node call process properti return empti list methaiidaormnodesprocessprocessprocessnodecal defin classaiidaormnodesprocessprocessprocessnod return process node call node node call process properti return none methaiidaormnodesdatadatacr defin classaiidaormnodesdatadata node return process node creat node creat process properti return none note use creator input properti one easili move proven graph exampl start data node repres result long workflow one move proven graph find initi input node interest resultcreatorinputssome_inputcreatorinputsinitial_input _howtoqueryshortcutscalcjobresult calcul job result classaiidaormnodesprocesscalculationcalcjobcalcjobnod provid methaiidaormnodesprocesscalculationcalcjobcalcjobnoder properti give easi access result calcul job requir classaiidaengineprocessescalcjobscalcjobcalcjob class produc node defin default output node spec node classaiidaormnodesdatadictdict output alway creat exampl classaiidacalculationstemplatereplacertemplatereplacercalcul plugin output_paramet output specifi default output node methaiidaormnodesprocesscalculationcalcjobcalcjobnoder properti give direct easi access key within dictionari output exampl follow codeblock python listnoder return list key output node individu key access attribut dereferenc codeblock python noderessome_key interact shell avail key also tabcomplet type noder follow tab key twice list avail key print note methaiidaormnodesprocesscalculationcalcjobcalcjobnoder properti realli shortcut quickli easili access attribut default output node calcul job exampl default output node link label output_paramet noderessome_key exactli equival nodeoutputsoutput_parametersdictsome_key say use re one access attribut one output node calcul job node _howtopluginsdevelop packag plugin section focus packag aiida extens plugin test publish eventu reus other guid write specif extens see refhowtoplugincodesinterfac reftopicsdata_typesplugin todo guid write specif extens see refhowtoplugincodesinterfac refhowtoplugincodesschedul refhowtoplugincodestransport reftopicsdata_typesplugin _howtopluginsdevelopbundl creat plugin packag aiida plugin bundl distribut python packag packages__ provid set extens aiida note python commun use term packag rather loos depend context may refer simpli folder contain individu python modul may includ file necessari build instal packag distribut via python packag index pypi pypi__ _packag httpsdocspythonorgtutorialmoduleshtmlpackag quickstart fastest way jumpstart aiida plugin packag use aiida plugin cutter plugincutter__ order templat basic folder structur alreadi custom accord desir name plugin follow aiida convent simpli go aiida plugin cutter plugincutter__ follow usag instruct see also aiidadiff_ demo plugin packag indepth explan file folder produc plugin cutter follow explain convent implement aiida plugin cutter choos name name convent aiida plugin packag aiidamycod plugin distribut pypi_ aiida_mycod correspond python packag lead follow folder structur aiidamycod aiida_mycod __init__pi note python packag name contain dash thu underscor intend eventu publish plugin packag pleas go aiida plugin registri registry__ choos name alreadi taken also encourag preregist packag instruct provid registri reserv plugin name inform other ongo develop _howtopluginsdevelopbundlefolderstructur folder structur overal folder structur plugin use follow set basic convent exampl folder structur aiida plugin illustr differ level nest see also aiidadiff demo plugin aiidadiff__ aiidamycod distribut folder aiida_mycod toplevel packag aiida_mycod import __init__pi calcul __init__pi mycodepi contain mycodecalcul parser __init__pi basicpi contain basicmycodepars fullpi contain fullmycodepars data __init__pi contain codespecif mydata data format commandspi contain verdi subcommand visual mydata workflow __init__pi basicpi contain basic workflow use mycod licens licens plugin manifestin list nonpython file instal licens readmemd project descript github pypi pyprojecttoml plugin metadata instal requir author entri point etc minim plugin packag instead might look like aiidaminim aiida_minim __init__pi pyprojecttoml _howtopluginsdevelopentrypoint regist plugin entri point aiida plugin extens aiida announc mean new entri point detail see reftopicspluginsentrypoint ad new entri point consist follow step decid name strongli suggest start name entri point name plugin packag omit aiida prefix packag aiidamycod usual mean mycodesometh find right entri point group list entri point group defin aiida via verdi plugin list document group see reftopicspluginsentrypointgroup ad entri point entry_point field pyprojecttoml file projectentrypointsaiidacalcul mycodesometh aiida_mycodecalcssomemysomethingcalcul new entri point show verdi plugin list aiidacalcul note take packag name aiidadiff exampl pip instal aiidadiff resolv instal depend python packag creat folder aiida_diffegginfo metadata packag e option given symbol link python packag search path aiidadiff directori creat egginfo folder put instead chang sourc code pick python without reinstal restart interpret chang metadata detail see python packag user guid packaging__ _howtopluginsdeveloptest test plugin packag write test aiida plugin run continu integr test use free platform like github action ghactions__ best way ensur plugin work keep work develop recommend use pytest_ framework test aiida plugin exampl write test set continu integr see aiidadiff_ demo plugin packag folder structur suggest follow folder structur includ test aiida plugin packag aiidamycod distribut folder aiida_mycod plugin packag test test directori possibl subdirectori note keep test outsid plugin packag keep distribut plugin packag light aiida fixtur mani test requir full aiida environ set test start eg aiida data node pytest librari concept fixtures_ encapsul code would like run test start aiida ship number fixtur pymodaiidamanagetestspytest_fixtur take care set test environ detail see reftopicspluginstestfixtur order make fixtur avail test creat conftestpi see also pytest doc conftest__ root level plugin packag follow import pytest pytest_plugin aiidamanagetestspytest_fixtur make aiida fixtur avail tip look insid aiidamanagetestspytest_fixtur see fixtur provid pytestfixturescopefunct fixtur run per test function request def integer_input integ input test run aiidaorm import int input_valu int return input_valu pytestfixturescopefunct autousetru fixtur automat run per test function def clear_database_autoclear_databas request aiida clear_databas fixtur automat clear databas test pass start write test eg teststest_calculationspi file need import fixtur ad pytest automag def test_qe_calculationaiida_local_code_factori integer_input request aiida_local_code_factori integer_input fixtur test run calcul use calcjob plugin aiidaengin import run aiidaplugin import calculationfactori search pwx execut path set aiida code return code aiida_local_code_factoryentry_pointquantumespressopw executablepwx input code code int_input integer_input use integer_input fixtur run calcul use code result runcalculationfactoryquantumespressopw input check output calcul assert result order run test simpli type pytest root level packag pytest automat discov execut file class function name start word test _conftest httpsdocspytestorgenlatesthowtofixtureshtmlscopesharingfixturesacrossclassesmodulespackagesorsess _fixtur httpsdocspytestorgenlatesthowtofixtureshtml _howtopluginsdevelopdocu document plugin packag aiida plugin packag python packag gener best practis write python document httpsdocspythonguideorgwritingdocumentation_ appli follow mention hint appli specif aiida plugin repositorylevel document sinc sourc code aiida plugin host github first contact new user plugin packag like land page github repositori make sure use readmemd describ plugin instal leav contact email ad licens also good idea make sure inform pyprojecttoml file correct date particular version number sinc inform use advertis packag aiida plugin registri sourcecodelevel document sourcecod level document matter user plugin python api particularli attract contribut other ad new type calcul workflow make sure use docstr httpswwwpythonorgdevpepspepwhatisadocstring_ use help argument document input port output port user plugin inspect input calculationsworkflow expect output produc directli verdi cli exampl tri verdi plugin list aiidacalcul corearithmeticadd document websit simpl plugin wellwritten readmemd good start readm grow proport may want consid creat dedic document websit sphinx httpwwwsphinxdocorgenmaster_ tool make easi creat document websit python packag readthedoc httpreadthedocsorg_ servic host sphinx document onlin free aiidadiff demo plugin aiidadiff__ come full templat sphinxbas document includ mix manual written page automat gener document plugin python api see develop guid aiidadiff httpsaiidadiffreadthedocsioenlatestdeveloper_guideindexhtml_ instruct build aiida provid sphinx extens insert automat gener document process class calcul workflow sphinx document analog inform display verdi plugin list enabl extens ad aiidasphinxext list extens docsconfpi file use aiidaprocess aiidacalcjob aiidaworkchain direct rest file like aiidaworkchain myworkchain modul my_plugin hidenondbinput myworkchain name workchain document modul python modul workchain import hideunstoredinput hide workchain input store databas shown default note aiidaworkchain direct hook sphinxextautodoc ie use automat gener automodul autoclass direct appli workchain class _howtopluginsdeveloppublish publish plugin packag aiida plugin packag publish aiida plugin registri registry__ python packag index pypi pypi__ publish plugin make sure plugin come pyprojecttoml file plugin metadata instal plugin via pip licens exampl file see aiidadiff demo plugin aiidadiff__ _howtopluginsdeveloppublishpluginregistri publish plugin registri aiida plugin registri registry__ aim home publicli avail aiida plugin collect inform type plugin provid packag aiida version compat etc order regist plugin packag simpli go plugin registri registry__ follow instruct readm note plugin registri read metadata plugin pyprojecttoml file plugin repositori encourag get plugin packag list soon possibl order reserv plugin name inform other ongo develop publish pypi distribut aiida plugin packag recommend follow guidelin packag python project packaging__ includ make plugin avail python packag index pypi__ make possibl user simpli pip instal aiidamyplugin _plugincutt httpsgithubcomaiidateamaiidaplugincutt _aiidadiff httpsgithubcomaiidateamaiidadiff _pytest httpspytestorg _ghaction httpsgithubcomfeaturesact _registri httpsgithubcomaiidateamaiidaregistri _pypi httpspypipythonorg _packag httpspackagingpythonorgenlatesttutorialspackagingproject _howtoinstal manag instal _howtoinstallationprofil manag profil creat profil aiida instal multipl profil individu databas file repositori store content refproven graphtopicsprovenanceconcept profil allow run multipl project complet independ one anoth singl aiida instal least one profil requir run aiida new profil creat use refverdi quicksetupreferencecommandlineverdiquicksetup refverdi setupreferencecommandlineverdisetup work similar former give control user list profil refverdi profilereferencecommandlineverdiprofil command line interfac provid variou command manag profil aiida instal list current configur profil use verdi profil list code bash info configur folder homeuservirtualenvsaiidaaiida projecton projecttwo particular exampl two configur profil projecton projecttwo first one highlight mark symbol mean default profil profil default mean simpli verdi command alway execut profil refchang profil percal basistopicscliprofil pprofil option chang default profil use verdi profil setdefault profil show profil profil defin variou paramet locat file repositori file system connect paramet databas display paramet use verdi profil show code bash info profil projecton aiidadb_backend django aiidadb_engin postgresql_psycopg aiidadb_host localhost aiidadb_nam aiida_project_on aiidadb_pass correcthorsebatterystapl aiidadb_port aiidadb_repository_uri filehomeuservirtualenvsaiidarepositori aiidadb_us aiida default_user_email useremailcom option daemon_default_work profile_uuid cadfbdafedbb default paramet default profil shown one pass profil name anoth eg verdi profil show projecttwo chang delet profil profil delet use verdi profil delet command default delet profil also delet file repositori databas behavior chang use skiprepositori skipdb option note order delet databas system user need requir right alway guarante depend system case databas delet may fail user perform delet manual postgresql _howtoinstallationconfigur configur instal _howtoinstallationconfiguretabcomplet activ tabcomplet verdi command line interfac mani command paramet tabcomplet simplifi use enabl tabcomplet follow shell command execut depend shell use panel contain containerlg pb column collg p enabl tabcomplet verdi one follow support shell tab bash codeblock consol eval _verdi_completebash_sourc verdi tab zsh codeblock consol eval _verdi_completezsh_sourc verdi tab fish codeblock consol eval env _foo_bar_completefish_sourc foobar place command shell virtual environ activ script automat enabl tab complet open new shell activ environ file shell specif like one follow startup file shell bashrc zsh aiida instal systemwid activ httpsvirtualenvpypaioenlatestuser_guidehtmlactivators_ virtual environ startup file httpscondaioprojectscondaenlatestuserguidetasksmanageenvironmentshtmlsavingenvironmentvariables_ conda environ import ad line start script make sure restart termin sourc script chang take effect _howtoinstallationconfigureopt configur profil option aiida provid variou configur option profil control refverdi configreferencecommandlineverdiconfig command view configur option set current profil code consol verdi config list name sourc valu autofilluseremail global abctestcom autofilluserfirst_nam global chri autofilluserinstitut global epfl autofilluserlast_nam global sewel cachingdefault_en default fals cachingdisabled_for default cachingenabled_for default daemondefault_work default daemontimeout profil daemonworker_process_slot default dbbatch_siz default loggingaiida_loglevel default report loggingalembic_loglevel default warn loggingcircus_loglevel default info loggingdb_loglevel default report loggingkiwipy_loglevel default warn loggingparamiko_loglevel default warn loggingplumpy_loglevel default warn loggingsqlalchemy_loglevel default warn rmqtask_timeout default runnerpollinterv profil transporttask_maximum_attempt global transporttask_retry_initial_interv default verdishellauto_import default warningsshowdeprec default true configur option valu taken order prioriti either profil specif set global set appli profil default valu also filter prefix code consol verdi config list transport name sourc valu transporttask_maximum_attempt global transporttask_retry_initial_interv default show full inform configur option get current valu code consol verdi config show transporttask_maximum_attempt schema default descript maximum number transport task attempt process paus minimum type integ valu default global profil notset verdi config get transporttask_maximum_attempt also retriev valu via api codeblock ipython aiida import get_config_opt get_config_optiontransporttask_maximum_attempt set valu profil global level codeblock consol verdi config set transporttask_maximum_attempt success transporttask_maximum_attempt set quicksetup profil verdi config set global transporttask_maximum_attempt success transporttask_maximum_attempt set global verdi config show transporttask_maximum_attempt schema type integ default minimum descript maximum number transport task attempt process paus valu default global profil verdi config get transporttask_maximum_attempt tip default option set verdi config appli current default profil chang profil use refprofil optiontopicscliprofil similarli unset valu codeblock consol verdi config unset transporttask_maximum_attempt success transporttask_maximum_attempt unset quicksetup profil verdi config unset global transporttask_maximum_attempt success transporttask_maximum_attempt unset global verdi config show transporttask_maximum_attempt schema type integ default minimum descript maximum number transport task attempt process paus valu default global notset profil notset verdi config get transporttask_maximum_attempt import chang affect daemon eg loggingaiida_loglevel take affect restart daemon seealso refhowto configur cach howtoruncodescach _howtoinstallationconfigureinstanceisol isol multipl instanc aiida instanc defin instal sourc code plu configur folder store configur file configur profil possibl run multipl aiida instanc singl machin simpli isol code configur virtual environ isol code make sure instal aiida virtual environ eg conda venv describ refher introget_startedsetup whenev activ particular environ run particular version aiida plugin instal specif separ configur aiida store configur directori alway name aiida default store home directori therefor default path configur directori aiida default aiida instanc instal store associ profil folder best practic alway separ profil togeth code belong typic approach place configur folder virtual environ automat select whenev environ activ locat aiida configur folder control aiida_path environ variabl allow us chang configur folder automat ad follow line activ script virtual environ exampl path virtual environ homeuservirtualenvsaiida add follow line code bash export aiida_pathhomeuservirtualenvsaiida make sure reactiv virtual environ alreadi activ chang take effect note conda creat directori structur etccondaactiv root folder conda environ eg homeuserminicondaenvsaiida place file aiidainitsh folder export aiida_path test everyth work first echo environ variabl echo aiida_path confirm print correct path final check aiida know also properli realiz new locat configur folder call verdi profil list display current locat configur directori code bash info configur folder homeuservirtualenvsaiidaaiida critic configur file homeuservirtualenvsaiidaaiidaconfigjson exist second line see havent yet setup profil aiida instanc inform set profil refer refcreat profileshowtoinstallationprofil besid singl path valu aiida_path also colonsepar list path aiida go path check whether contain configur directori ie folder name aiida first configur directori encount use configur directori configur directori found one creat last path consid exampl directori structur home folder might look like aiida project_a aiida subfold leav aiida_path variabl unset default locat aiida use howev set code bash export aiida_pathproject_a configur directori project_aaiida use warn aiida directori project_a aiida would creat make sure set aiida_path correctli _howtoinstallationconfiguredaemonasservic daemon servic daemon set system servic automat start system startup oper system specif ubuntu templat servic file httpsgithubcommarvelnccransibleroleaiidablobcdffdeaedeabafbeftemplatesaiidadaemonservice_ ansibl instruct instal servic httpsgithubcommarvelnccransibleroleaiidablobcdffdeaedeabafbeftasksaiidadaemonyml_ _howtoinstallationperform tune perform aiida support run hundr thousand calcul graph million node howev optim perform scale might requir tweak aiida configur balanc cpu disk load tip tune aiida perform dropdown increas number daemon worker default aiida daemon use singl worker ie singl oper system process verdi daemon statu show daemon worker constantli high cpu usag use verdi daemon incr x add x parallel daemon worker keep mind process need run comput eg rabbitmq postgresql databas ie good idea stop increas number worker reach number core cpu make chang perman set verdi config set daemondefault_work dropdown increas number daemon worker slot daemon worker accept limit number task time verdi daemon statu constantli warn high percentag avail daemon worker slot use increas number task handl daemon worker thu increas workload per worker increas typic work set correspond config variabl restart daemon verdi config set daemonworker_process_slot dropdown prevent oper system index file repositori mani linux distribut includ locat command quickli find file folder run daili cron job updatedbmloc creat correspond index larg file repositori take long time index point hard drive constantli index order exclud repositori folder index add path prunepath variabl etcupdatedbconf configur file use sudo dropdown move postgresql databas fast disk ssd ideal larg partit stop aiida daemon refback databas howtoinstallationbackuppostgresql find data directori postgr instal someth like varlibpostgresqlmain scratchpostgresmain best way becom postgr unix user enter postgr shell psql show data_directori q unabl enter postgr shell tri look data_directori variabl file etcpostgresqlmainpostgresqlconf similar stop postgr databas servic servic postgresql stop copi file folder postgr data_directori new locat cp source_directori destination_directori note flag creat directori within destination_directori eg cp old_dirmain new_dir creat new_dirmain also keep file permiss necessari file permiss new old directori need ident includ subdirectori particular owner group postgr except symbol link servercrt serverkey may may present note permiss link need chang use h option chown avoid chang permiss destin link case chang permiss link destin mistak typic bewar might depend actual distribut rwrr root root mar etcsslcertssslcertsnakeoilpem rwr root sslcert mar etcsslprivatesslcertsnakeoilkey point data_directori variabl postgr configur file eg etcpostgresqlmainpostgresqlconf new directori restart databas daemon servic postgresql start final check data directori inde chang psql show data_directori q tri simpl aiida queri new databas everyth went fine delet old databas locat your still encount perform issu follow tip help pinpoint perform bottleneck dropdown analyz rabbitmq messag rate your observ slow perform aiida engin rabbitmq manag plugin httpswwwrabbitmqcommanagementhtml_ provid intuit dashboard let monitor messag rate check aiida engin enabl manag plugin via someth like sudo rabbitmqplugin enabl rabbitmq_manag navig httplocalhost log guestguest _howtoinstallationupd updat instal whenev updat aiida instal make sure follow instruct care even mere upgrad patch version fail may leav instal broken state wors may even damag data potenti irrepar activ python environ aiida instal finish run process finish process automat migrat possibl resum unfinish process stop daemon use verdi daemon stop refcreat backup databas repositoryhowtoinstallationbackup warn migrat databas longer go back older version aiidacor unless restor databas repositori backup updat aiidacor instal instal aiida conda simpli run conda updat aiidacor instal aiida pip simpli run pip instal upgrad aiidacor instal git repositori use pip instal e first delet pyc file find name pyc delet updat branch git pull migrat databas verdi p profile_nam storag migrat depend size databas number migrat perform data migrat take time pleas patient databas migrat finish abl continu work exist data note updat involv chang major version number aiidacor expect backward incompat chang check whether also need updat instal plugin packag updat x addit instruct migrat x version httpsaiidareadthedocsioprojectsaiidacoreenvinstallupdating_installationhtmlupdatingfromto_ addit instruct migrat version httpsaiidareadthedocsioprojectsaiidacoreenvinstallupdating_installationhtmlolderversions_ list break chang x x seri aiida see httpsaiidareadthedocsioprojectsaiidacoreenvinstallupdating_installationhtmlbreakingchangesfromto_ _howtoinstallationbackup _howtoinstallationbackupsoftwar back instal full backup aiida instanc aiida manag data requir backup aiida configur folder typic name aiida locat home folder see also refintroinstallsetup folder contain among thing configjson configur file log file file associ node repositori folder one per profil typic locat aiida folder queryabl metadata postgresql databas one per profil todo _howtoinstallationbackuprepositori titl repositori backup _howtoinstallationbackuppostgresql databas backup postgresql typic spread databas inform multipl file back directli guarante restor databas therefor strongli recommend period dump databas content file back use method choic use pointer order avoid enter databas password time use script creat file pgpass home directori contain databas credenti describ postgresql document httpswwwpostgresqlorgdocslibpqpgpasshtml_ order dump databas use pg_dump util postgresql httpswwwpostgresqlorgdocsapppgdumphtml_ use start exampl bash script similar downloadthi file includebackup_postgresqlsh setup backup script run daili use cron see note refprevi section howtoinstallationbackuprepositori _howtoinstallationbackuprestor restor backup order restor backup need restor repositori folder back earlier locat use check locat configjson file insid aiida folder simpli use verdi profil show creat empti databas follow instruct describ refdatabas introinstalldatabas skip verdi setup phase databas name databas usernam origin one ie restor origin postgresql cluster may either renam delet origin databas chang directori folder contain databas dump creat pg_dump load use psql command dropdown exampl command linux ubuntu exampl command assum dump name aiidadbbackuppsql codeblock bash psql h localhost u aiida aiidadb f aiidadbbackuppsql suppli databas password databas restor note instal databas ubuntu system servic need type sudo su postgr becom postgr unix user _howtoinstallationmultius manag multipl user aiida current support multipl user run concurr aiida profil aiida tag node pyclassaiidaormusersus creat default user specifi profil inform current use intern particular current permiss system place limit oper perform given user typic setup involv user individu instal aiida oper system account data share privat aiida profil refaiida export import function howtosharearch note configur file aiida instanc contain access credenti eg postgresql databas rabbitmq servic aiida store sensit data databas file repositori aiida export archiv never contain data _ httpsgithubcomaiidateamaiidacoreissu comput replac pyclassaiidaormcomput _howtofaq frequent ask question problem face address send email mail list httpwwwaiidanetmailinglist_ open issu github httpsgithubcomaiidateamaiidacoreissuesnewchoose_ think concern bug updat version aiida longer work first make sure daemon run check verdi daemon statu find daemon actual still run like problem stop first use verdi daemon stop import time want refupd aiida installationhowtoinstallationupd alway first finish run process stop daemon restart daemon verdi daemon start get pyclassaiidacommonexceptionsmissingentrypointerror pyclassaiidacommonexceptionsmultipleentrypointerror except say particular entri point found fix often caus outdat entri point cach happen exampl updat aiida instal instal new plugin use pip instal make sure also restart daemon ensur chang pick daemon well updat code pyclassaiidaengineprocessesworkchainsworkchain pyclassaiidaengineprocessescalcjobscalcjob whatev python code daemon seem pick chang time chang code restart daemon chang take effect daemon worker actual system process python interpret instanc sinc dont support autom hotswap daemon worker automat detect chang code simpli call verdi daemon restart trick updat code pyclassaiidaengineprocessesworkchainsworkchain pyclassaiidaengineprocessescalcjobscalcjob whatev python code python shell instanc seem pick chang verdi shell python interpret automat detect code chang simpli reload shell solv problem calcul job take long run remot machin even though actual comput time fast first make sure calcul actual wait queue schedul actual run alreadi complet still take seemingli lot time aiida updat calcul coupl explan first run mani process daemon worker may simpli busi manag calcul workflow case may wit effect builtin throttl mechan aiida engin ensur aiida daemon overload remot comput schedul builtin limit often daemon worker allow open ssh connect poll schedul determin minimum transport job poll interv use verdi comput configur show comput computerget_minimum_job_poll_interv respect lower valu use codeblock consol verdi comput configur transport_typ comput safeintervalnumber_of_second codeblock ipython computerset_minimum_job_poll_intervalnumber_of_second respect howev care make interv short daemon worker may spam remot machin andor schedul could advers effect machin get account ban depend polici remot machin addit note import interv guarante respect per daemon worker individu collect say safe interv set second singl worker guarante open connect machin everi minut howev multipl activ daemon worker machin may access per minut _howtofaqprocessnotimportabledaemon would process run fine local rais except submit daemon almost alway caus import issu determin exactli might go wrong first refset loglevel introincreaseloggingverbos debug execut command codeblock consol verdi config set loggingaiida_loglevel debug restart daemon verdi daemon restart chang take effect run command verdi daemon logshow separ termin see log output daemon submit problemat calcul workflow root caus inde due import problem probabl appear importerror except daemon log solv issu make sure python code run properli import mean part pythonpath httpsdocspythonorgusingcmdlinehtmlenvvarpythonpath_ make sure pythonpath correctli defin automat start shell exampl use bash add bashrc complet reset daemon exampl go directori contain file defin process run codeblock consol echo export pythonpathpythonpathpwd homebashrc sourc homebashrc verdi daemon restart reset _howtofaqcachingnoten cach enabl default cach design work unobtrus way simpli save time valuabl comput resourc howev design doubleegd sword user might awar function caught guard result calcul cach mechan come limit caveat import understand refer reftopicsprovenancecachinglimit section detail _howtopluginsinstal instal plugin function aiida extend plugin variou type function extend new refdata typestopicsdata_typesplugin refcalcul pluginshowtoplugincod much multipl plugin bundl togeth distribut refplugin packagehowtopluginsdevelop aiida plugin registri httpsaiidateamgithubioaiidaregistry_ give overview public plugin packag instal aiida plugin packag done pip httpspypiorgprojectpip_ packag distribut via python packag index pypi httpspypiorgsearchqaiida_ instal follow codeblock consol pip instal aiidapluginnam packag also instal sourc code exampl code avail git repositori codeblock consol git clone httpsgithubcomaiidateamaiidadiff cd aiidadiff pip instal warn daemon run instal updat plugin packag make sure restart reset flag chang take effect codeblock consol verdi daemon restart reset verifi plugin current instal use command codeblock consol verdi plugin list list variou categori function extend plugin see plugin instal categori pass categori name argument eg codeblock consol verdi plugin list aiidadata _howtorestartworkchain write errorresist workflow admonit overview howto introduc pyclassaiidaengineprocessesworkchainsrestartbaserestartworkchain subclass handl known failur mode process calcul refhowto write workflow howtowriteworkflow discuss write simpl multistep workflow use work chain howev one thing consid calcul step fail exampl pyclassaiidaworkflowsarithmeticmultiply_addmultiplyaddworkchain launch pyclassaiidacalculationsarithmeticaddarithmeticaddcalcul fail work chain would except line selfctxadditionoutputssum rais attributeerror case work chain run singl calcul big deal reallif work chain run number calcul sequenc work chain except caus work point lost take exampl workflow comput phonon crystal structur use quantum espresso figur includeimagesworkflow_error_handling_basic_successpng schemat diagram workflow comput phonon crystal structur use quantum espresso workflow consist four consecut calcul use pwx phx qrx matdynx code respect calcul run without problem workflow cours also run fine produc desir final result imagin third calcul actual fail workflow explicitli check failur instead blindli assum calcul produc requir result fail lose progress made first two calcul figur includeimagesworkflow_error_handling_basic_failedpng exampl execut quantum espresso phonon workflow third step qrx code fail workflow blindli assum would finish without error also fail solut seem simpl calcul simpli add check verifi finish success produc requir output continu next calcul though calcul fail depend caus failur might actual abl fix problem rerun calcul potenti correct input common exampl calcul ran wall time request time job schedul cancel job schedul case simpli restart calcul code support restart option give job wall time resourc may fix problem might tempt add error handl directli workflow howev requir implement errorhandl code mani time workflow happen run code exampl could add error handl pwx code directli phonon workflow structur optim workflow also run pwx implement errorhandl logic way implement easili reus variou workflow ye instead directli run calcul workflow one rather run work chain explicitli design run calcul complet base work chain know variou failur mode calcul tri fix problem restart calcul whenev fail finish success logic base work chain gener appli calcul actual process figur includeimagesworkflow_error_handling_flow_basepng align center height px schemat flow diagram logic base work chain whose job run subprocess repeatedli fix potenti error finish success work chain run subprocess finish inspect statu subprocess finish success work chain return result job done instead subprocess fail work chain inspect caus failur attempt fix problem restart subprocess cycl repeat subprocess finish success cours run risk enter infinit loop work chain never manag fix problem want build limit maximum number calcul rerun _workflowerrorhandlingflowloop figur includeimagesworkflow_error_handling_flow_looppng align center height px improv flow diagram base work chain limit maximum number iter work chain tri get calcul finish success sinc common logic flow base work chain wrap anoth pyclassaiidaengineprocessesprocessprocess restart finish success implement abstract base class aiidacor pyclassaiidaengineprocessesworkchainsrestartbaserestartworkchain implement logic flow diagram shown although baserestartworkchain subclass pyclassaiidaengineprocessesworkchainsworkchainworkchain launch reason complet gener know pyclassaiidaengineprocessesprocessprocess class run instead make use base restart work chain subclass process class want wrap write base restart work chain howto show implement baserestartworkchain pyclassaiidacalculationsarithmeticaddarithmeticaddcalcul start import relev base class creat subclass codeblock python aiidaengin import baserestartworkchain aiidaplugin import calculationfactori arithmeticaddcalcul calculationfactorycorearithmeticadd class arithmeticaddbaseworkchainbaserestartworkchain _process_class arithmeticaddcalcul see creat subclass baserestartworkchain class call arithmeticaddbaseworkchain set _process_class class attribut arithmeticaddcalcul latter instruct work chain type process launch next work chain defin process specif codeblock python aiida import orm aiidaengin import while_ classmethod def definecl spec defin process specif superdefinespec specinputx valid_typeormint ormfloat helpth left operand specinputi valid_typeormint ormfloat helpth right operand specinputcod valid_typeormcod helpth code use perform summat specoutputsum valid_typeormint ormfloat helpth sum left right operand specoutlin clssetup while_clsshould_run_process clsrun_process clsinspect_process clsresult input output defin essenti determin sub process work chain run sinc arithmeticaddcalcul requir input x produc sum output mirror specif work chain otherwis wouldnt abl pass necessari input final defin logic outlin look close resembl logic flow chart present numrefworkflowerrorhandlingflowloop lot start set work chain enter loop subprocess yet finish success havent exceed maximum number iter run anoth instanc process inspect result condit implement should_run_process outlin step process finish success abandon report result unlik normal work chain implement implement outlin step alreadi implement baserestartworkchain dont base restart work chain use save us write repeat lot boilerpl code httpsenwikipediaorgwikiboilerplate_code__ warn minim outlin definit requir work chain work properli chang logic name step omit step work chain run ad extra outlin step add custom function howev fine actual encourag make sens last part puzzl defin setup input work chain pass subprocess might wonder necessari alreadi defin input specif input pass baserestartworkchain also defin input max_iter see pymethaiidaengineprocessesworkchainsrestartbaserestartworkchaindefin method make absolut clear input intend subprocess defin dictionari context key input one way reus pymethaiidaengineprocessesworkchainsrestartbaserestartworkchainsetup method codeblock python def setupself call setup baserestartworkchain creat input dictionari selfctxinput selfctxinput dictionari use baserestartworkchain submit process intern loop supersetup selfctxinput x selfinputsx selfinputsi code selfinputscod note explain setup step form crucial part logic outlin base restart work chain omit outlin break work chain overrid complet except long call super code write function work chain launch like work chain baserestartworkchain work magic codeblock python submitarithmeticaddbaseworkchain xint yint codeload_codeaddtutor work chain finish inspect happen exampl verdi process statu codeblock consol verdi process statu arithmeticaddbaseworkchain finish result arithmeticaddcalcul finish see work chain launch singl instanc arithmeticaddcalcul finish success job work chain done well note work chain except make sure directori contain workchain definit pythonpath add folder python file defin workchain pythonpath codeblock bash export pythonpathpathtoworkchaindirectorypythonpath import restart daemon codeblock bash verdi daemon restart reset inde updat exist work chain file ad new one necessari restart daemon everi time chang taken place expos input output base restart work chain need expos input subprocess wrap like want output produc although latter necessari simpl exampl present previou section simpli copypast input output port definit subprocess arithmeticaddcalcul troublesom howev quickli becom tediou importantli errorpron start wrap process quit input prevent copypast input output specif classaiidaengineprocessesprocess_specprocessspec class provid methplumpyprocessspecexpose_input methplumpyprocessspecexpose_output method codeblock python classmethod def definecl spec defin process specif superdefinespec specexpose_inputsarithmeticaddcalcul namespaceadd specexpose_outputsarithmeticaddcalcul seealso detail expos input output see basic refworkchain usag section topicsworkflowsusageworkchainsexpose_inputs_output take care expos port specif wrap process class effici way effici retriev input pass process one use methaiidaengineprocessesprocessprocessexposed_input method note past tens method name method take process class option namespac argument return input pass namespac launch util allow us simplifi setup outlin step shown codeblock python def setupself call setup baserestartworkchain creat input dictionari selfctxinput selfctxinput dictionari use baserestartworkchain submit process intern loop supersetup selfctxinput selfexposed_inputsarithmeticaddcalcul add way dont manual fish individu input selfinput call singl method save lot time line code submit run work chain use namespac input add exampl import use namespac codeblock python input add x int int code load_codeaddtutor submitarithmeticaddbaseworkchain input import everi time make chang arithmeticaddbaseworkchain dont forget restart daemon codeblock bash verdi daemon restart reset error handl far seen easi get work chain run run subprocess use baserestartworkchain howev whole point exercis describ introduct work chain abl deal fail process yet previou exampl finish without problem would happen subprocess fail comput sum input x neg arithmeticaddcalcul fail exit code correspond error_negative_numb seealso refexit code usag sectiontopicsprocessesusageexit_cod detail explan exit code let launch work chain input caus calcul fail eg make one operand neg see happen codeblock python submitarithmeticaddbaseworkchain addx int int code load_codeaddtutor time see work chain take quit differ path codeblock consol verdi process statu arithmeticaddbaseworkchain finish while_should_run_processinspect_process arithmeticaddcalcul finish arithmeticaddcalcul finish expect arithmeticaddcalcul fail time work chain notic failur inspect result subprocess inspect_process keep name design restart calcul howev sinc input chang calcul inevit wholli expectedli fail exact error code unlik first iter howev work chain restart gave return exit code stand error_second_consecutive_unhandled_failur name suggest work chain tri run subprocess fail twice row without problem handl obviou question cours exactli instruct base work chain handl certain problem sinc problem necessarili depend subprocess work chain run implement baserestartworkchain class rather implement subclass subprocess fail baserestartworkchain call set process handler inspect_process step process handler get pass node subprocess run inspect result potenti fix problem find regist process handler base restart work chain implement simpli defin method take node singl argument decor funcaiidaengineprocessesworkchainsutilsprocess_handl decor codeblock python aiidaengin import process_handl processhandlerreport class arithmeticaddbaseworkchainbaserestartworkchain _process_class arithmeticaddcalcul process_handl def handle_negative_sumself node check calcul fail error_negative_numb case simpli make input posit take absolut valu param node node subprocess ran current iter return option classaiidaengineprocessesworkchainsutilsprocesshandlerreport instanc signal problem detect potenti handl nodeexit_statu arithmeticaddcalculationexit_codeserror_negative_numberstatu selfctxinputsx ormintabsnodeinputsxvalu selfctxinputsi ormintabsnodeinputsyvalu return processhandlerreport method name anyth long valid python method name overlap one base work chain method better readabl howev recommend method name start handle_ exampl want specif check particular failur mode arithmeticaddcalcul compar methaiidaormnodesprocessprocessprocessnodeexit_statu node spec process exit code match know problem due sum neg fix fictiti problem exampl simpl make sure input posit take absolut valu assign new valu selfctxinput defin origin input setup step final indic handl problem return instanc classaiidaengineprocessesworkchainsutilsprocesshandlerreport instruct work chain restart subprocess take updat input context simpl addit launch work chain codeblock consol verdi process statu arithmeticaddbaseworkchain finish result arithmeticaddcalcul finish arithmeticaddcalcul finish time around although first subprocess fail new process handler call fix input work chain restart subprocess new input finish success simpl process add mani process handler would like deal potenti problem might occur specif subprocess type work chain implement make code even readabl funcaiidaengineprocessesworkchainsutilsprocess_handl decor come variou syntact sugar instead condit start handler compar exit statu node particular exit code subprocess defin exit_cod keyword argument decor codeblock python process_handlerexit_codesarithmeticaddcalculationexit_codeserror_negative_numb def handle_negative_sumself node handl error_negative_numb failur mode arithmeticaddcalcul selfctxinputsx ormintabsnodeinputsxvalu selfctxinputsi ormintabsnodeinputsyvalu return processhandlerreport exit_cod keyword defin either singl instanc classaiidaengineprocessesexit_codeexitcod list thereof process handler call exit statu node correspond one exit code otherwis simpli skip multipl process handler sinc typic base restart work chain implement one process handler one might want control order call done prioriti keyword codeblock python process_handlerprior exit_codesarithmeticaddcalculationexit_codeserror_negative_numb def handle_negative_sumself node handl error_negative_numb failur mode arithmeticaddcalcul selfctxinputsx ormintabsnodeinputsxvalu selfctxinputsi ormintabsnodeinputsyvalu return processhandlerreport process handler higher prioriti call first scenario addit control order handler call may also want stop process handl determin problem achiev set do_break argument processhandl true codeblock python process_handlerprior exit_codesarithmeticaddcalculationexit_codeserror_negative_numb def handle_negative_sumself node handl error_negative_numb failur mode arithmeticaddcalcul selfctxinputsx ormintabsnodeinputsxvalu selfctxinputsi ormintabsnodeinputsyvalu return processhandlerreportdo_breaktru final sometim one detect problem simpli correct work chain case handler signal work chain abort set classaiidaengineprocessesexit_codeexitcod instanc exit_cod argument processhandl codeblock python aiidaengin import exitcod process_handlerprior exit_codesarithmeticaddcalculationexit_codeserror_negative_numb def handle_negative_sumself node handl error_negative_numb failur mode arithmeticaddcalcul return processhandlerreportexit_codeexitcod input lead neg sum correct base restart work chain detect exit code abort work chain set correspond statu messag node usual codeblock consol verdi process statu arithmeticaddbaseworkchain finish while_should_run_processinspect_process arithmeticaddcalcul finish basic tool broad rang usecas address prevent lot boilerpl code howto guid toctre maxdepth interact plugins_instal run_cod run_workflow ssh plugin_cod write_workflow workchains_restart data queri share_data visualising_graphsvisualising_graph instal plugins_develop cookbook faq _howtowriteworkflow write extend workflow write workflow workflow aiida refprocess topicsprocessesconcept call workflow calcul option return data encod logic typic scientif workflow current two way implement workflow process refwork functionstopicsworkflowsconceptsworkfunct refwork chainstopicsworkflowsconceptsworkchain present brief introduct write workflow type note detail concept workflow differ work function work chain pleas see correspond reftop sectiontopicsworkflowsconcept note develop workflow may involv run sever lengthi calcul consid refen cach howtoruncodescach help avoid repeat long workflow step work function work function process function call one calcul function return data creat calcul function call moreov work function also call work function allow write nest workflow write work function whose proven automat store simpl write python function decor classaiidaengineprocessesfunctionsworkfunct decor literalinclud aiidaworkflowsarithmeticadd_multiplypi languag python startaft startmark import reiter classaiidaengineprocessesfunctionsworkfunctiondecor add_multipli function creat new data node add multipli calcul function creat int data node work function return result multipli calcul function moreov calcul workflow function accept return data node ie instanc class subclass classaiidaormnodesdatadatadata class work chain workflow want run complex take longer finish better write work chain write work chain aiida requir creat class inherit classaiidaengineprocessesworkchainsworkchainworkchain class exampl work chain take three integ input multipli first two add third obtain final result literalinclud aiidaworkflowsarithmeticmultiply_addpi languag python startaft startmark give work chain valid python class name convent end classaiidaengineprocessesworkchainsworkchainworkchain alway immedi clear refer let go method multiplyaddworkchain one one literalinclud aiidaworkflowsarithmeticmultiply_addpi languag python pyobject multiplyaddworkchaindefin dedent import method implement everi work chain defin method class method must alway start call defin method parent class next defin method use defin specif work chain contain work chain spec input specifi use specinput method first argument input method string specifi label input eg x valid_typ keyword argument allow specifi requir node type input keyword argument allow develop set default input indic input store databas see refth process topic section topicsprocessesusagespec detail outlin logic workflow specifi use specoutlin method outlin workflow construct method classaiidaengineprocessesworkchainsworkchainworkchain class multiplyaddworkchain outlin simpl linear sequenc step possibl includ actual logic directli outlin order defin complex workflow well see refwork chain outlin section topicsworkflowsusageworkchainsdefine_outlin detail output specifi use specoutput method method similar usag input method exit code work chain specifi use specexit_cod method exit code use clearli commun known failur mode work chain user first second argument defin exit_statu work chain case failur string develop use refer exit code error_negative_numb descript exit messag provid use messag keyword argument multiplyaddworkchain demand final result neg number check validate_result step outlin note inform defin method process spec see refcorrespond section topic topicsprocessesusagedefin multipli method first step outlin multiplyaddworkchain work chain literalinclud aiidaworkflowsarithmeticmultiply_addpi languag python pyobject multiplyaddworkchainmultipli dedent step simpli involv run calcul function multipli x input work chain store result function use next step outlin ad context work chain use selfctx literalinclud aiidaworkflowsarithmeticmultiply_addpi languag python pyobject multiplyaddworkchainadd dedent add method second step outlin work chain step use arithmeticaddcalcul calcul job start set input classaiidaengineprocessescalcjobscalcjobcalcjob dictionari next submit calcul job daemon import use submit method work chain instanc via selfsubmit sinc result addit avail calcul job finish submit method return classaiidaormnodesprocesscalculationcalcjobcalcjobnod futur arithmeticaddcalcul process tell work chain wait process finish continu workflow return tocontext class pass dictionari specifi futur calcul job node assign addit context key warn never use global submit function submit calcul daemon within classaiidaengineprocessesworkchainsworkchainworkchain rais except runtim see reftop section work chainstopicsworkflowsusageworkchainssubmitting_sub_process detail note instead pass dictionari also initi tocontext instanc pass futur process keyword argument eg tocontextadditioncalcjob_nod inform tocontext class found refth topic section submit sub processestopicsworkflowsusageworkchainssubmitting_sub_process literalinclud aiidaworkflowsarithmeticmultiply_addpi languag python pyobject multiplyaddworkchainvalidate_result dedent arithmeticaddcalcul calcul job finish next step work chain valid result ie verifi result neg number addit node extract context take sum node arithmeticaddcalcul output store result variabl case valu int node neg error_negative_numb exit code defin defin method return note exit code return step outlin work chain termin step execut literalinclud aiidaworkflowsarithmeticmultiply_addpi languag python pyobject multiplyaddworkchainresult dedent final step outlin pass result output work chain use selfout method first argument result specifi label output correspond label provid spec defin method second argument result work chain extract int node store context addit key complet discuss workflow usag pleas read refth correspond topic sectiontopicsworkflowsusag _howtowriteworkflowsextend extend workflow design workflow mani case want reus exist process section explain extend workflow wrap around process link togeth exampl let say want extend multiplyaddworkchain ad anoth step analysi check whether result even number final step written simpl calcfunct literalinclud includesnippetsextend_workflowspi languag python pyobject is_even could simpli write new workflow base multiplyaddworkchain includ extra step outlin run is_even calcul function howev would lead lot code duplic longer workflow consist multipl work chain would becom cumbersom deal see dropdown panel dropdown badmultiplyaddisevenworkchain literalinclud includesnippetsextend_workflowspi languag python pyobject badmultiplyaddisevenworkchain note weve remov result step outlin well result output work chain assum interest whether result even avoid code duplic simpli submit multiplyaddworkchain within one step new work chain would call is_even second step literalinclud includesnippetsextend_workflowspi languag python pyobject bettermultiplyaddisevenworkchain alreadi simplifi extend work chain avoid duplic step multiplyaddworkchain outlin howev still copi input definit multiplyaddworkchain manual extract input pass selfsubmit method fortun better way expos input output subprocess work chain expos input output mani case conveni work chain expos input subprocess wrap user specifi input directli well expos output produc one result parent work chain simpl exampl present previou section simpli copypast input output port definit subprocess multiplyaddworkchain troublesom howev quickli becom tediou errorpron start wrap process quit input prevent copypast input output specif classaiidaengineprocessesprocess_specprocessspec class provid methplumpyprocessspecexpose_input methplumpyprocessspecexpose_output method call methplumpyprocessspecexpose_input particular process class automat copi input class input namespac process specif codeblock python classmethod def definecl spec specifi input output superdefinespec specexpose_inputsmultiplyaddworkchain expos input instead copi definit specoutlin clsmultiply_add clsis_even specoutputis_even valid_typebool awar input alreadi exist namespac overridden prevent method accept namespac argument caus input copi namespac instead toplevel namespac especi use expos input sinc process metadata input expos input without namespac metadata input port expos class overrid one host often desir let copi input multiplyaddworkchain multiply_add namespac literalinclud includesnippetsextend_workflowspi languag python pyobject multiplyaddisevenworkchaindefin dedent take care expos port specif wrap process class effici way easili retriev input pass process one use methaiidaengineprocessesprocessprocessexposed_input method note past tens method name method take process class option namespac argument return input pass namespac launch util allow us simplifi multiply_add step outlin literalinclud includesnippetsextend_workflowspi languag python pyobject multiplyaddisevenworkchainmultiply_add dedent way dont manual fish individu input selfinput call singl method save time line code final multiplyaddisevenworkchain found dropdown panel dropdown multiplyaddisevenworkchain literalinclud includesnippetsextend_workflowspi languag python pyobject multiplyaddisevenworkchain submit run work chain use namespac input multiply_add exampl import use namespac provid input codeblock python add_cod load_codelabeladd input multiply_add x int int z int code add_cod workchain_nod submitmultiplyaddworkchain input run multiplyaddisevenworkchain see hierarch overview process call work chain use verdi process statu command codeblock consol verdi process statu multiplyaddisevenworkchain finish is_even multiplyaddworkchain finish result multipli finish arithmeticaddcalcul finish is_even finish note command also recurs show process call subprocess multiplyaddisevenworkchain work chain mention earlier also expos output multiplyaddworkchain use methplumpyprocessspecexpose_output method say want add result multiplyaddworkchain one output extend work chain codeblock python classmethod def definecl spec specifi input output superdefinespec specexpose_inputsmultiplyaddworkchain namespacemultiply_add specoutlin clsmultiply_add clsis_even specexpose_outputsmultiplyaddworkchain specoutputis_even valid_typebool sinc one output port share process class less critic use namespac argument expos output howev take care overrid output parent work chain case output port name still need pass result multiplyaddworkchain output parent work chain exampl could is_even step use methaiidaengineprocessesprocessprocessout method codeblock python def is_evenself check result even result selfctxmulti_additionoutputsresult result_is_even is_evenresult selfoutresult result selfoutis_even result_is_even work fine want pass singl output parent work chain becom tediou errorpron pass multipl output instead use methaiidaengineprocessesprocessprocessexposed_output method combin methaiidaengineprocessesprocessprocessout_mani method codeblock python def is_evenself check result even result_is_even is_evenselfctxmulti_additionoutputsresult selfout_manyselfexposed_outputsselfctxmulti_addit multiplyaddworkchain selfoutis_even result_is_even methaiidaengineprocessesprocessprocessexposed_output method return dictionari expos output multiplyaddworkchain extract workchain node store multi_addit key context methaiidaengineprocessesprocessprocessout_mani method take dictionari assign valu output port name equal correspond key import besid avoid code duplic error use method expos input output also advantag parent work chain doesnt adjust case input output child work chain chang make code much easier maintain _howtoruncod run extern code howto walk step set possibl remot comput resourc set code comput submit calcul aiida similar refintroductori tutori tutorialbasiccalcjob detail run extern code aiida need appropri refcalcul plugin topicsplugin follow assum plugin code alreadi avail aiida plugin registri httpsaiidateamgithubioaiidaregistry_ instal machin refer refhowtopluginsinstal section detail instal exist plugin plugin code yet avail see refhowtoplugincod throughout process prompt inform comput code prompt type follow enter get help ask prompt press ctrlc moment abort setup process aiida databas remain unmodifi note verdi command use readlin extens provid default answer requir advanc termin use standard termin termin embed text editor emac known caus problem _howtoruncodescomput set comput comput aiida denot comput resourc run calcul either machin aiida instal machin access via ssh httpsenwikipediaorgwikisecure_shell_ machin aiida instal possibl refvia proxi serverhowtosshproxi second option allow manag multipl remot comput resourc includ hpc cluster cloud servic aiida instal move comput job note second option requir access ssh keypair comput resourc demand twofactor authent may need instal aiida directli comput resourc instead comput requir comput must satisfi follow requir run unixlik oper system linux distro maco work fine bash instal option batch schedul instal see reflist support schedul topicsschedul configur remot comput start refconfigur passwordless ssh access howtossh note aiida use bash remot comput regardless default shell pleas ensur remot bash configur load differ shell _howtoruncodescomputersetup comput setup configur comput happen two step set public metadata associ comput aiida proven graph configur privat connect detail start creat new comput instanc databas codeblock consol verdi comput setup end command open default editor file contain summari configur point add bash command execut actual execut job preexecut script script submiss post execut script use addit line perform set environ comput exampl load modul export environ variabl codeblock bash export newvar sourc somefil note dont specifi set specif code calcul set preexecut command code even calcjob level done edit save quit comput creat databas still need configur access use credenti tip order avoid retyp setup inform next time around provid inform via configur file codeblock consol verdi comput setup config computeryml computeryml configur file yaml format httpsenwikipediaorgwikiyamlsyntax__ file contain inform seri keyvalu pair codeblock yaml label localhost hostnam localhost transport local schedul direct work_dir homemaxaiida_run mpirun_command mpirun np tot_num_mpiproc mpiprocs_per_machin prepend_text modul load mymodul export newvar list key yaml file given option comput setup command codeblock consol verdi comput setup help note remov prefix replac within key underscor _ _howtoruncodescomputerconfigur comput connect configur second step configur privat connect detail use codeblock consol verdi comput configur transporttyp computerlabel replac computerlabel comput label chosen setup replac transporttyp name chosen transport type ie local localhost comput ssh remot comput setup configur complet let check everyth work properli codeblock consol verdi comput test computernam command perform variou test make sure aiida connect comput creat new file scratch directori retriev file queri job schedul _howtoruncodescomputerconnect mitig connect overload comput resourc particularli larg supercomput center may toler submit mani job execut schedul command frequent open mani ssh connect limit number job queue set limit maximum number workflow submit submit new one previou workflow start complet support number job depend supercomput configur may document part center user document supercomput administr may also find inform found page httpsgithubcomaiidateamaiidacorewikioptimisingtheslurmschedulerconfigurationforclusteradministrators_ use increas time interv poll job queue time interv second set python api load correspond comput node eg verdi shell codeblock python load_computerfidisset_minimum_job_poll_interv increas connect cooldown time minimum time second wait open new connect modifi exist comput use codeblock bash verdi comput configur coressh noninteract safeinterv second computer_nam import two interv appli per daemon worker ie doubl number worker may end put twice load remot comput manag comput fulli configur comput list codeblock consol verdi comput list get detail inform specif comput name computerlabel codeblock consol verdi comput show computerlabel renam comput remov databas codeblock consol verdi comput renam oldcomputerlabel newcomputerlabel verdi comput delet computerlabel note delet comput need delet node link eg calcjob remotedata node otherwis aiida prevent order preserv proven remot machin mainten longer oper may want disabl correspond comput prevent aiida connect given comput check state calcul submit new calcul codeblock consol verdi comput disabl computerlabel verdi comput enabl computerlabel _howtoruncodescod setup code comput configur set code aiida store set metadata code attach automat calcul use besid import reproduc also make easi queri calcul run given code instanc specif version found contain bug _howtoruncodescodesetup set code verdi code cli access point manag code aiida setup new code execut codeblock consol verdi code setup guid process setup code admonit remot local code class tip titleiconlightbulb case advis instal execut use aiida target machin submit calcul use order take advantag compil librari present target machin setup refer remot code instal target comput true occasion may need run small reason machineindepend script eg python bash copi manual number differ target comput tediou use case aiida provid local code instal target comput fals local code store aiida file repositori copi target comput everi execut use local code way encapsul environ complex execut contain much better solut problem work ad nativ support contain aiida end step prompt edit script includ bash command execut run submiss script pre execut script line run submiss script post execut script separ use instanc load modul set variabl need code codeblock bash modul load intelmpi end receiv confirm pk uuid new code tip verdi code setup command perform minim check order keep perform reli internet connect want addit check verifi code properli configur usabl run verdi code test command remot code exampl check whether associ comput connect whether specifi execut exist look command help see check may run admonit use configur file class tip titleiconlightbulb analog refcomput setup howtoruncodescomput inform describ provid via configur file codeblock consol verdi code setup config codeyml codeyml configur file yaml format httpsenwikipediaorgwikiyamlsyntax_ file contain inform seri keyvalu pair codeblock yaml label qepw descript quantum_espresso v input_plugin quantumespressopw on_comput true remote_abs_path pathtocodepwx comput localhost prepend_text modul load modul modul load modul append_text list key yaml file given avail option code setup command codeblock consol verdi code setup help note remov prefix replac within key underscor _ manag code chang label code use follow command codeblock consol verdi code relabel identifi newlabel identifi numer pk uuid label code either label labelcomputernam label uniqu also list avail code identifi codeblock consol verdi code list also accept flag filter code given comput code use specif plugin etc use h option get inform specif code codeblock consol verdi code show identifi final delet code use codeblock consol verdi code delet identifi wasnt use calcul otherwis except rais note code subclass pyclassnod aiidaormnodesnod attach extra code exampl codeblock python load_codeidentifierset_extravers load_codeidentifierset_extrafamili cpk use queri instanc order find run done cpk code version later _howtoruncodessubmit submit calcul refset comput howtoruncodescomput refset code howtoruncodescodesetup readi launch calcul make sure daemon run codeblock bash verdi daemon statu figur input calcjob plugin need eg use codeblock bash verdi plugin list aiidacalcul corearithmeticadd write submitpi script codeblock python aiidaengin import submit code load_codeaddlocalhost builder codeget_build builderx int builderi int buildermetadataoptionswithmpi fals buildermetadataoptionsresourc num_machin num_mpiprocs_per_machin buildermetadatadescript first calcul printsubmitbuild cours code label builder input need adapt code calcul submit calcul aiida daemon codeblock bash verdi run submitpi use verdi process list monitor statu calcul see reftopicsprocessesusagelaunch reftopicsprocessesusagemonitor detail _howtoruncodescach save comput time cach cours project may end rerun calcul multipl time two workflow includ calcul one need restart workflow fail due infrastructur problem sinc aiida store full proven calcul detect whether calcul run instead run simpli reus output therebi save valuabl comput resourc mean cach aiida cach enabl aiida search databas calcul refhashtopicsprovenancecachinghash found aiida creat copi calcul node result thu ensur result proven graph independ whether cach enabl see numreffig_cach _fig_cach figur includeimagescachingpng align center height px reus result calcul c new calcul c aiida simpli make copi result node link usual diagram depict input node use calcul input node hash would trigger cach well cach happen calcul level cach workflow level see reftopicsprovenancecachinglimit default success fail calcul enter cach detail reftopicsprovenancecachingcontrolcach _howtoruncodescachingen enabl cach import cach enabl default see refth faq howtofaqcachingnoten cach control perprofil level via refverdi config cli howtoinstallationconfigureopt view current cach configur codeblock consol verdi config list cach name sourc valu cachingdefault_en default fals cachingdisabled_for default cachingenabled_for default enabl cach current profil global profil codeblock consol verdi config set cachingdefault_en true success cachingdefault_en set true quicksetup profil verdi config set g cachingdefault_en true success cachingdefault_en set true global verdi config list cach name sourc valu cachingdefault_en profil true cachingdisabled_for default cachingenabled_for default versionchang configur cach via cache_configyml deprec aiida exist cache_configyml file migrat central configjson file automat point onward launch new calcul aiida compar hash fix size string uniqu calul type input see reftopicsprovenancecachinghash calcul alreadi present databas anoth calcul hash found aiida reus result without repeat actual calcul note contrast cach hash enabl default ie hash calcul alreadi comput _howtoruncodescachingconfigur configur cach cach mechan configur process class level mean rule automat appli instanc given class perinst level mean control individu process instanc launch class level besid onoff switch set cachingdefault_en cach control level specif calcul use correspond entri point string see output verdi plugin list aiidacalcul codeblock consol verdi config set cachingdisabled_for aiidacalculationscoretemplatereplac success cachingdisabled_for set aiidacalculationscoretemplatereplac quicksetup profil verdi config set cachingenabled_for aiidacalculationsquantumespressopw success cachingenabled_for set aiidacalculationsquantumespressopw quicksetup profil verdi config set append cachingenabled_for aiidacalculationsoth success cachingenabled_for set aiidacalculationsquantumespressopw aiidacalculationsoth quicksetup profil verdi config list cach name sourc valu cachingdefault_en profil true cachingdisabled_for profil aiidacalculationscoretemplatereplac cachingenabled_for profil aiidacalculationsquantumespressopw aiidacalculationsoth exampl cach enabl default explicitli disabl calcul templatereplacercalcul class identifi correspond aiidacalculationscoretemplatereplac entri point string also show enabl cach particular calcul effect due profilewid default tip set multipl entrypoint use delimit avail entrypoint environ list enableddis use codeblock consol verdi config cach aiidacalculationscorearithmeticadd aiidacalculationscoretransf aiidaworkflowscorearithmeticadd_multipli aiidaworkflowscorearithmeticmultiply_add verdi config cach disabl aiidacalculationscoretemplatereplac calcul entri point need specifi fulli qualifi python name instead exampl seekpath_structure_analysi calcfunct defin aiida_quantumespressoworkflowsfunctionsseekpath_structure_analysi label aiida_quantumespressoworkflowsfunctionsseekpath_structure_analysisseekpath_structure_analysi exist classaiidaormnodesprocesscalculationcalculationnod get identifi string process_typ attribut cach configur also accept wildcard exampl follow configur disabl cach calcul entri point codeblock consol verdi config set cachingdisabled_for aiidacalcul success cachingdisabled_for set aiidacalcul quicksetup profil verdi config cach aiidaworkflowscorearithmeticadd_multipli aiidaworkflowscorearithmeticmultiply_add verdi config cach disabl aiidacalculationscorearithmeticadd aiidacalculationscoretransf aiidacalculationscoretemplatereplac entri wildcard overridden specif entri follow configur disabl cach aiidacalcul entri point except arithmet codeblock consol verdi config set cachingenabled_for aiidacalculationscorearithmet success cachingenabled_for set aiidacalculationscorearithmet quicksetup profil verdi config list cach name sourc valu cachingdefault_en profil true cachingdisabled_for profil aiidacalcul cachingenabled_for profil aiidacalculationscorearithmet verdi config cach aiidacalculationscorearithmeticadd aiidaworkflowscorearithmeticadd_multipli aiidaworkflowscorearithmeticmultiply_add verdi config cach disabl aiidacalculationscoretransf aiidacalculationscoretemplatereplac instanc level cach enabl disabl casebycas basi use classaiidamanagecachingenable_cach classaiidamanagecachingdisable_cach context manag respect regardless profil set codeblock python aiidaengin import run aiidamanagecach import enable_cach enable_cachingidentifieraiidacalculationscoretemplatereplac run warn affect current python interpret wont chang behavior daemon worker mean techniqu use use pyclassaiidaenginerun pyclassaiidaenginesubmit besid control process class cach may use necessari control alreadi _stored_ node use cach _sources_ section reftopicsprovenancecachingcontrolcach provid detail aiida decid store node equival node store consid valid cach sourc comput replac pyclassaiidaormcomput calcjob replac pyclassaiidaengineprocessescalcjobscalcjobcalcjob document creat ipypublish f sphinx_ipypublish_al _howtodatavisualiseproven visual proven meta keyword graphgraphviz note tutori download run jupyt notebook downloadvisualising_graphsipynb proven graph databas visual inspect via graphviz httpswwwgraphvizorg__ use python api commandlin interfac seealso verdi graph gener h first load databas requir modul code python aiida import load_profil profil load_profil aiidacommon import linktyp aiidaormutilslink import linkpair aiidatoolsvisu import graph pstate_node_styl testsutilsarch import get_archive_fil exampl proven graph use tutori download downloadfrom link graphaiida fadownload import databas code ipython verdi archiv import n graphaiida code python dict_uuid eaafacaaeb calc_uuid beeeddbcda pyclassaiidatoolsvisualizationgraphgraph class use store visual represent node edg ad separ cumul one graph travers method pyattraiidatoolsvisualizationgraphgraphgraphviz attribut return graphvizdigraph httpsgraphvizreadthedocsioenstable__ instanc automag render graph notebook use save graph file code python graph graph graphadd_nodedict_uuid graphadd_nodecalc_uuid graphgraphviz figur visualising_graphs_filesoutput__svg alt output__ align center code python graphadd_edg dict_uuid calc_uuid link_pairlinkpairlinktypeinput_calc input graphgraphviz figur visualising_graphs_filesoutput__svg alt output__ align center code python graphadd_incomingcalc_uuid graphadd_outgoingcalc_uuid graphgraphviz figur visualising_graphs_filesoutput__svg alt output__ align center pyclassaiidatoolsvisualizationgraphgraph also initi global style attribut outlin graphviz attribut tabl httpswwwgraphvizorgdocinfoattrshtml__ code python graph graphnode_id_typeuuid global_node_stylepenwidth global_edge_stylecolor blue graph_attrs rankdir lr graphadd_incomingcalc_uuid graphadd_outgoingcalc_uuid graphgraphviz figur visualising_graphs_filesoutput__svg alt output__ align center addit function pars pyclassaiidatoolsvisualizationgraphgraph initi specifi exactli node repres exampl pyfuncaiidatoolsvisualizationgraphpstate_node_styl function color process node process state code python def link_stylelink_pair kwarg return color blue graph graphnode_style_fnpstate_node_styl link_style_fnlink_styl graph_attrs rankdir lr graphadd_incomingcalc_uuid graphadd_outgoingcalc_uuid graphgraphviz figur visualising_graphs_filesoutput__svg alt output__ align center edg annot one edg label link type code python graph graphgraph_attrs rankdir lr graphadd_incomingcalc_uuid annotate_linksboth graphadd_outgoingcalc_uuid annotate_linksboth graphgraphviz figur visualising_graphs_filesoutput__svg alt output__ align center methaiidatoolsvisualizationgraphgraphrecurse_descend methaiidatoolsvisualizationgraphgraphrecurse_ancestor method use construct full proven graph code python graph graphgraph_attrs rankdir lr graphrecurse_descend dict_uuid origin_stylenon include_process_inputstru annotate_linksboth graphgraphviz figur visualising_graphs_filesoutput__svg alt output__ align center link type also filter view data logic proven code python graph graphgraph_attrs rankdir lr graphrecurse_descend dict_uuid origin_stylenon include_process_inputstru annotate_linksboth link_typesinput_calc creat graphgraphviz figur visualising_graphs_filesoutput__svg alt output__ align center code python graph graphgraph_attrs rankdir lr graphrecurse_descend dict_uuid origin_stylenon include_process_inputstru annotate_linksboth link_typesinput_work return graphgraphviz figur visualising_graphs_filesoutput__svg alt output__ align center wish highlight specif node class highlight_class option use color specifi node code python graph graphgraph_attrs rankdir lr graphrecurse_descend dict_uuid highlight_classesdict graphgraphviz figur visualising_graphs_filesoutput__svg alt output__ align center _referencecommandlin aiida command line _referencecommandlineverdi command list avail subcommand _referencecommandlineverdiarch verdi archiv code consol usag option command arg creat inspect import aiida archiv option help show messag exit command creat write subset proven graph singl file import import data aiida archiv file inspect inspect content archiv without import migrat migrat export archiv recent format version _referencecommandlineverdicalcjob verdi calcjob code consol usag option command arg inspect manag calcjob option help show messag exit command cleanworkdir clean content output remot folder calcjob gotocomput open shell remot folder calcjob inputcat show content one calcjob input file inputl show list gener calcjob input file outputcat show content one calcjob retriev output outputl show list retriev calcjob output file re print data result output dict node calcjob _referencecommandlineverdicod verdi code code consol usag option command arg setup manag code option help show messag exit command delet delet code duplic duplic code allow chang paramet hide hide one code verdi code list list list avail code relabel relabel code reveal reveal one hidden code verdi code list setup setup new code show display detail inform code test run test given code check whether usabl _referencecommandlineverdicomput verdi comput code consol usag option command arg setup manag comput option help show messag exit command configur configur authinfo detail comput user delet delet comput disabl disabl comput given user duplic duplic comput allow chang paramet enabl enabl comput given user list list avail comput relabel relabel comput setup creat new comput show show detail inform comput test test connect comput _referencecommandlineverdiconfig verdi config code consol usag option command arg manag aiida configur option help show messag exit command cach list cachingen process type current profil downgrad print configur downgrad specif version get get valu aiida option current profil list list aiida option current profil set set aiida option show show detail aiida option current profil unset unset aiida option _referencecommandlineverdidaemon verdi daemon code consol usag option command arg inspect manag daemon option help show messag exit command decr remov number default worker run daemon incr add number default worker run daemon logshow show log daemon press ctrlc quit restart restart daemon start start daemon number worker statu print statu current daemon daemon stop stop daemon _referencecommandlineverdidata verdi data code consol usag option command arg inspect creat manag data node option v verbos notsetdebuginforeportwarningerrorcrit set verbos output help show messag exit _referencecommandlineverdidatabas verdi databas code consol usag option command arg inspect manag databas deprec v option help show messag exit command integr check integr databas fix potenti issu migrat migrat databas latest schema version summari summaris entiti databas version show version databas _referencecommandlineverdidevel verdi devel code consol usag option command arg command develop option help show messag exit command checkloadtim check common indic slowdown verdi checkundesiredimport check verdi import python modul shouldnt runsql run raw sql command databas run_daemon run daemon instanc current interpret validateplugin valid plugin check load _referencecommandlineverdigroup verdi group code consol usag option command arg creat inspect manag group node option help show messag exit command addnod add node group copi duplic group creat creat empti group given label delet delet group option node contain descript chang descript group list show list exist group movenod move specifi node one group anoth path inspect group node delimit label path relabel chang label group removenod remov node group show show inform given group _referencecommandlineverdihelp verdi help code consol usag option command show help given command option help show messag exit _referencecommandlineverdinod verdi node code consol usag option command arg inspect creat manag node option help show messag exit command attribut show attribut one node comment inspect creat manag node comment delet delet node proven graph descript view set descript one node extra show extra one node graph creat visual represent proven graph label view set label one node rehash recomput hash node databas repo inspect content node repositori folder show show gener inform one node _referencecommandlineverdiplugin verdi plugin code consol usag option command arg inspect aiida plugin option help show messag exit command list display list avail plugin _referencecommandlineverdiprocess verdi process code consol usag option command arg inspect manag process option help show messag exit command callroot show root process call stack given process kill kill run process list show list run termin process paus paus run process play play unpaus paus process report show log report one multipl process show show detail one multipl process statu print statu one multipl process watch watch state transit process _referencecommandlineverdiprofil verdi profil code consol usag option command arg inspect manag configur profil option help show messag exit command delet delet one profil list display list avail profil setdefault set profil default one show show detail profil _referencecommandlineverdiquicksetup verdi quicksetup code consol usag option setup new profil fulli autom fashion option n noninteract noninteract mode cli never prompt simpli use default valu option defin one profil profil name new profil requir email email email address associ data gener email address export along data share requir firstnam nonemptystr first name user requir lastnam nonemptystr last name user requir institut nonemptystr institut user requir dbengin postgresql_psycopg engin use connect databas dbbackend djangosqlalchemi databas backend use dbhost hostnam databas server host leav empti peer authent dbport integ databas server port dbname nonemptystr name databas creat dbusernam nonemptystr name databas user creat dbpassword text password databas user sudbnam text name templat databas connect databas superus sudbusernam text user name databas super user sudbpassword text password connect databas superus brokerprotocol amqpamqp protocol use messag broker default amqp brokerusernam nonemptystr usernam use authent messag broker default guest brokerpassword nonemptystr password use authent messag broker default guest brokerhost hostnam hostnam messag broker default brokerport integ port messag broker default brokervirtualhost text name virtual host messag broker without lead forward slash repositori directori absolut path file repositori config fileorurl load option valu configur file yaml format local path url help show messag exit _referencecommandlineverdirestapi verdi restapi code consol usag option run aiida rest api server exampl usag verdi p profile_nam restapi hostnam port option h hostnam hostnam hostnam p port integ port number c configdir path path configur directori wsgiprofil whether enabl wsgi profil middlewar find bottleneck help show messag exit _referencecommandlineverdirun verdi run code consol usag option scriptnam vararg execut script preload aiida environ option autogroup enabl autogroup l autogrouplabelprefix text specifi prefix label auto group number might automat append gener uniqu name per run e exclud str exclud class auto group use full entrypoint string includ str includ class auto group use full entrypoint string help show messag exit _referencecommandlineverdisetup verdi setup code consol usag option setup new profil option n noninteract noninteract mode cli never prompt simpli use default valu option defin one profil profil name new profil requir email email email address associ data gener email address export along data share requir firstnam nonemptystr first name user requir lastnam nonemptystr last name user requir institut nonemptystr institut user requir dbengin postgresql_psycopg engin use connect databas dbbackend djangosqlalchemi databas backend use dbhost hostnam databas server host leav empti peer authent dbport integ databas server port dbname nonemptystr name databas creat requir dbusernam nonemptystr name databas user creat requir dbpassword text password databas user requir brokerprotocol amqpamqp protocol use messag broker requir brokerusernam nonemptystr usernam use authent messag broker requir brokerpassword nonemptystr password use authent messag broker requir brokerhost hostnam hostnam messag broker requir brokerport integ port messag broker requir brokervirtualhost text name virtual host messag broker without lead forward slash requir repositori directori absolut path file repositori config fileorurl load option valu configur file yaml format local path url help show messag exit _referencecommandlineverdishel verdi shell code consol usag option start python shell preload aiida environ option plain use plain python shell nostartup use plain python ignor pythonstartup environ variabl pythonrcpi script interfac ipythonbpython specifi interact interpret interfac help show messag exit _referencecommandlineverdistatu verdi statu code consol usag option print statu aiida servic option printtraceback print full traceback case except rais normq check rabbitmq statu help show messag exit _referencecommandlineverdistorag verdi storag code consol usag option command arg inspect manag store data profil option help show messag exit command info summaris content storag integr check integr data storag maintain perform mainten task repositori migrat migrat storag latest schema version _referencecommandlineverdius verdi user code consol usag option command arg inspect manag user option help show messag exit command configur configur new exist user list show list user setdefault set user default user profil end_of_verdi_commands_mark refer toctre maxdepth command_lin apiindex rest_api _referencerestapi aiida rest api aiida rest httpsenwikipediaorgwikirepresentational_state_transfer_ api httpsenwikipediaorgwikiapplication_programming_interface_ implement use flask rest framework httpsflaskrestfulreadthedocsioenlatest_ return respons json httpswwwjsonorgjsonenhtml_ format use aiida rest api must instal compon aiida instal codeblock consol pip instal aiidacorerest rest servic start codeblock consol verdi restapi see refher referencecommandlineverdirestapi detail _referencerestapiendpointsrespons avail endpoint respons order obtain list avail endpoint queri api base url serverendpoint endpoint httplocalhostapiv httplocalhostapivserverendpoint http respons rest api consist statu code header json object possibl statu code success request bad request json object contain error messag describ issu request gener intern server error json object contain gener error messag invalid url request match resourc json return header standard http respons header addit custom field xtotalcount link pagin result requir see pagin section data field json object contain main payload return api json object contain inform request method url url_root path query_str resource_typ field _restapi_apach node get list node object rest url httplocalhostapivnodeslimitoffsetorderbyid descript return list two node object limit start th row offset databas tabl list order id descend order respons data node ctime sun jul gmt full_typ datacoredictdict id label mtime sun jul gmt node_typ datacoredictdict process_typ null user_id uuid afeddbbaacabcda ctime sun jul gmt full_typ datacoreremoteremotedata id label mtime sun jul gmt node_typ datacoreremoteremotedata process_typ null user_id uuid fecdfabbe id null method get path apivnod query_str limitoffsetorderbyid resource_typ node url httplocalhostapivnodeslimitoffsetorderbyid url_root httplocalhost get list node attribut call pbc rest url httplocalhostapivnodesattributestrueattributes_filterpbc descript return list node object everi node object contain valu attribut call pbc present otherwis null respons data node attributespbc true ctime sun jul gmt full_typ datacorestructurestructuredata id label mtime sun jul gmt node_typ datacorestructurestructuredata process_typ null user_id uuid deddffaadcccaf attributespbc null ctime sun jul gmt full_typ datacoredictdict id label mtime sun jul gmt node_typ datacoredictdict process_typ null user_id uuid faeaeebe id null method get path apivnod query_str limitoffsetorderbyid resource_typ node url httplocalhostapivnodeslimitoffsetorderbyid url_root httplocalhost get list avail node type databas rest url httplocalhostapivnodesfull_typ descript return list full_typ databas respons data full_typ node label node namespac node path node subspac id null method get path apivnodesfull_typ query_str resource_typ node url httplocalhostapivnodesfull_typ url_root httplocalhost get list avail download format rest url httplocalhostapivnodesdownload_format descript return list avail download format respons data datacorearraybandsbandsdata agr agr_batch dat_block dat_multicolumn gnuplot json mpl_pdf mpl_png mpl_singlefil mpl_withjson datacorearraytrajectorytrajectorydata cif xsf datacorecifcifdata cif datacorestructurestructuredata chemdoodl cif xsf xyz datacoreupfupfdata upf id null method get path apivnodesdownload_format query_str resource_typ node url httplocalhostapivnodesdownload_format url_root httplocalhost get detail singl node object rest url httplocalhostapivnodesfec descript return detail node object uuidfec respons data node ctime sun jul gmt full_typ datacoreremoteremotedata id label mtime sun jul gmt node_typ datacoreremoteremotedata process_typ null user_id uuid fecdfabbe id fec method get path apivnodesfec query_str resource_typ node url httplocalhostapivnodesfec url_root httplocalhost get list incom specif node rest url httplocalhostapivnodesdeblinksincominglimit descript return list first two input node limit node object uuiddeb respons data incom ctime sun jul gmt full_typ datacoredictdict id label link_label set link_typ input_calc mtime sun jul gmt node_typ datacoredictdict process_typ null user_id uuid cababdf ctime fri jun gmt full_typ datacoreupfupfdata id label link_label pseudos__n link_typ input_calc mtime fri jun gmt node_typ datacoreupfupfdata process_typ null user_id uuid edfdabbffbdaf id deb method get path apivnodesdeblinksincom query_str limit resource_typ node url httplocalhostapivnodesdeblinksincominglimit url_root httplocalhost filter incomingoutgo node full type rest url httplocalhostapivnodesdeblinksincomingfull_typedatacoredictdict descript return list dict incom node node object uuiddeb respons data incom ctime sun jul gmt full_typ datacoredictdict id label link_label set link_typ input_calc mtime sun jul gmt node_typ datacoredictdict process_typ null user_id uuid cababdf id deb method get path apivnodesdeblinksincom query_str full_typedatacoredictdict resource_typ node url httplocalhostapivnodesdeblinksincomingfull_typedatacoredictdict url_root httplocalhost rest url httplocalhostapivnodesdeblinksoutgoingfull_typedatacoredictdict descript return list dict outgo node node object uuiddeb respons data outgo ctime sun jul gmt full_typ datacoredictdict id label link_label output_paramet link_typ creat mtime sun jul gmt node_typ datacoredictdict process_typ null user_id uuid eabcad id deb method get path apivnodesdeblinksoutgo query_str full_typedatacoredictdict resource_typ node url httplocalhostapivnodesdeblinksoutgoingfull_typedatacoredictdict url_root httplocalhost get list attributesextra specif node rest url httplocalhostapivnodesffecontentsattribut descript return list attribut node object uuidff respons data attribut append_text input_plugin quantumespressopw is_loc fals prepend_text remote_exec_path projectespressointelbinpwx id ffe method get path apivnodesffecontentsattribut query_str resource_typ node url httplocalhostapivnodesffecontentsattribut url_root httplocalhost rest url httplocalhostapivnodesffecontentsextra descript return list extra node object uuidff respons data extra trialbool true trialfloat trialint trialstr trial id ffe method get path apivnodesffecontentsextra query_str resource_typ node url httplocalhostapivnodesffecontentsextra url_root httplocalhost get userdefin list attributesextra specif node rest url httplocalhostapivnodesffecontentsattributesattributes_filterappend_textis_loc descript return list attribut append_text is_loc node object uuidff respons data attribut append_text is_loc fals id ffe method get path apivnodesffecontentsattribut query_str attributes_filterappend_textis_loc resource_typ node url httplocalhostapivnodesffecontentsattributesattributes_filterappend_textis_loc url_root httplocalhost rest url httplocalhostapivnodesffecontentsextrasextras_filtertrialbooltrialint descript return list extra trialbool trialint node object uuidff respons data extra trialbool true trialint id ffe method get path apivnodesffecontentsextra query_str extras_filtertrialbooltrialint resource_typ node url httplocalhostapivnodesffecontentsextrasextras_filtertrialbooltrialint url_root httplocalhost get comment specif node rest url httplocalhostapivnodesffecontentscom descript return comment given node respons data comment test comment add anoth comment id ffe method get path apivnodesffecontentscom query_str resource_typ node url httplocalhostapivnodesffecontentscom url_root httplocalhost get list filesdirectori repositori specif node rest url httplocalhostapivnodesfferepolist descript return list filesdirectori node repositori respons data repo_list name aiida type directori name _aiidasubmitsh type file name aiidain type file name type directori name pseudo type directori id ffe method get path apivnodesfferepolist query_str resource_typ node url httplocalhostapivnodesfferepolist url_root httplocalhost download file repositori node rest url httplocalhostapivnodesfferepocontentsfilenameaiidain descript download file aiidain node repositori respons download file specif download format check nodesdownload_format endpoint avail download differ type node endpoint use download file given format rest url httplocalhostapivnodesfafdsfdownloaddownload_formatxsf descript download structur node uuidfafdsf xsf format respons download file process get report processnod rest url httplocalhostapivprocessesbcdreport descript return report process uuidbcd respons data log id bcd method get path apivprocessesbcdreport query_str resource_typ process url httplocalhostapivprocessesbcdreport url_root httplocalhost calcjob get list input output file given calcjobnod rest url httplocalhostapivcalcjobssffsjinput_fil descript return list input file given calcjobnod uuidsffsj respons data name aiida type directori name _aiidasubmitsh type file name aiidain type file name type directori id sffsj method get path apivcalcjobssffsjinput_fil query_str resource_typ calcjob url httplocalhostapivcalcjobssffsjinput_fil url_root httplocalhost comput get list comput object rest url httplocalhostapivcomputerslimitoffsetorderbyid descript return list three comput object limit start rd row offset databas tabl list order ascend valu id respons data comput descript alpha comput hostnam alphaaiidanet id name alpha scheduler_typ coreslurm transport_typ coressh uuid bcbbfbebcbfcec descript beta comput hostnam betaaiidanet id name beta scheduler_typ coreslurm transport_typ coressh uuid ddddbfc descript gamma comput hostnam gammaaiidanet id name gamma scheduler_typ coreslurm transport_typ coressh uuid acffcafcecfb id null method get path apivcomput query_str limitoffsetorderbyid resource_typ comput url httplocalhostapivcomputerslimitoffsetorderbyid url_root httplocalhost get detail singl comput object rest url httplocalhostapivcomputersdd descript return detail comput object uuidddd respons data comput descript beta comput hostnam betaaiidanet id name beta scheduler_typ coreslurm transport_typ coressh uuid ddddbfc id null method get path apivcomputersdd query_str resource_typ comput url httplocalhostapivcomputersdd url_root httplocalhost user get list user rest url httplocalhostapivus descript return list user object respons data user first_nam aiida id institut last_nam daemon first_nam gengi id institut last_nam khan id null method get path apivus query_str resource_typ user url httplocalhostapivus url_root httplocalhost get list user whose first name start given string rest url httplocalhostapivusersfirst_nameilikeaii descript return list user object whose first name start aii regardless case charact respons data user first_nam aiida id institut last_nam daemon id null method get path apivus query_str first_nameilikeaii resource_typ user url httplocalhostapivusersfirst_nameilikeaii url_root httplocalhost group get list group rest url httplocalhostapivgroupslimitorderbyuser_id descript return list ten group object limit start st row databas tabl offset list order user_id descend order respons data group descript id label sssp_new_phonons_p type_str user_id uuid ceeeabbecd descript id label sssp_cubic_old_phonons_p type_str user_id uuid cedfcaec id null method get path apivgroup query_str limitorderbyuser_id resource_typ group url httplocalhostapivgroupslimitorderbyuser_id url_root httplocalhost get detail specif group rest url httplocalhostapivgroupsaeb descript return detail group object uuidaeb respons data group descript gbrv us pseudo version id label gbrv_ type_str datacoreupffamili user_email aiidatheossrvepflch user_id uuid aebcdbbfeacfc id aeb method get path apivgroupsaeb query_str resource_typ group url httplocalhostapivgroupsaeb url_root httplocalhost querybuild rest url httplocalhostapivquerybuild descript post queri databas content queri pass attach json file use endpoint need http oper allow pass attach demonstr two option httpie httpshttpieio_ use termin python librari request httpsdocspythonrequestsorgenlatest_ use python option httpie instal httpie httpshttpieio_ type termin codeblock consol pip instal httpie execut rest api call codeblock consol http localhostapivquerybuild my_queryjson my_queryjson file contain queri dictionari json format respons dropdown codeblock python data code_ attribut append_text input_plugin quantumespressoph is_loc fals prepend_text ulimit unlimit remote_exec_path homeubuntucodesqebinphx ctime wed dec gmt dbcomputer_id descript phonon quantum_espresso v extra _aiida_hash afcfeafafebcebcbeffecadcffef hidden fals full_typ datacodecod id label qe__ph mtime wed dec gmt node_typ datacodecod process_typ null user_id uuid cfacbbbaeccddaa attribut append_text input_plugin quantumespressopp is_loc fals prepend_text ulimit unlimit remote_exec_path homeubuntucodesqebinppx ctime mon dec gmt dbcomputer_id descript postproc quantum_espresso v extra _aiida_hash dcabbeacaabfdbdcaacefdfbcdadf hidden fals full_typ datacodecod id label qe__pp mtime mon dec gmt node_typ datacodecod process_typ null user_id uuid abdadcabdafc attribut append_text input_plugin quantumespressopw is_loc fals prepend_text ulimit unlimit remote_exec_path homeubuntucodesqebinpwx ctime thu nov gmt dbcomputer_id descript quantum_espresso v extra _aiida_hash ebeacfcdafcdbfbbdaecb hidden fals full_typ datacodecod id label qe__pw mtime thu nov gmt node_typ datacodecod process_typ null user_id uuid eecbbacdbadf method post path apivquerybuild query_str resource_typ querybuild url httplocalhostapivquerybuild url_root httplocalhost easiest way construct queri json file use refquerybuild topicsdatabaseadvancedqueri aiida demonstr next open verdi shell section codeblock consol verdi shell build queri save file codeblock ipython qb querybuild qbappendcod aiidaormquerybuilderquerybuild xfbbeedd qb_dict qbqueryhelp import json openmy_queryjson w file jsondumpqb_dict file check content my_queryjson codeblock python path entity_typ datacodecod tag code_ joining_keyword null joining_valu null outerjoin fals edge_tag null filter code_ node_typ like datacod project code_ order_bi limit null offset null option resquest librari python approach short exampl python codeblock python aiidaorm import querybuild code aiida import load_profil import request load_profilemy_profil qb querybuild qbappendcod qb_dict qbqueryhelp respons requestsposthttplocalhostapivquerybuild jsonqb_dict responsejson one respons _referencerestapipagin pagin page result access append page nd page url path page limit control via perpageperpag queri string maximum page limit exampl httplocalhostapivcomputerspag httplocalhostapivcomputerspageperpag httplocalhostapivcomputerspag page number specifi system redirect request page pagin use header respons contain two nonempti field xtotalcount custom field total number result return queri ie sum result page link link first previou next last page suppos send request whose result fill page valu link field would look like httplocalhostpag relfirst httplocalhostpag relprev httplocalhostpag relnext httplocalhostpag rellast besid pagin number result also control use limit offset filter see refbelow referencerestapifilteringuniqu _referencerestapifilt filter result filter queri string form one field separ special charact field form keyoperatorvalu note field contain alphanumer charact plu _ first charact number similar python variabl name note follow id synonym pk use section document _referencerestapifilteringuniqu filter key uniqu filter specifi queri string must follow oper listtabl uniqu filter headerrow filter key descript limit number result integ offset skip first offset result integ perpag mani result show per page integ orderbi properti ascend order properti descend order properti default ascend ascend descend order string correspond alphabet reversealphabet order wherea datetim object correspond chronolog reversechronolog order exampl httplocalhostapivcomputersorderbyid httplocalhostapivcomputersorderbynam httplocalhostapivcomputersorderbyuuid attributes_filt commasepar list attribut return use togeth attributestru avail endpoint contentsattribut node exampl httplocalhostapivnodesfbefcontentsattributesattributes_filterappend_textprepend_text extras_filt similar attributes_filt extra use endpoint contentsextra node attribut pass true order return attribut node endpoint exclud default extra pass true order return extra node endpoint exclud default download_format specifi download format download endpoint download download endpoint downloadfals display content browser instead download file filenam filter use pass file name repolist repocont endpoint tree_in_limit specifi limit tree incom node tree_out_limit specifi limit tree outgo node regular filter compound requir specifi filter appli listtabl regular filter headerrow filter key valu type support resourc attribut string node ctime datetim node descript string comput group node email string user first_nam string user full_typ string node hostnam string comput id integ user comput group node institut string user label string group node last_nam string user mtime datetim node name string comput node_typ string node scheduler_typ string comput transport_typ string comput type_str string group user_id integ group uuid string comput group node key filter respons user endpoint privaci reason note node type specifi string defin posit aiida sourc tree end dot exampl node_typedatacorecodecod select object type code node_typedatacoreremoteremotedata select object type pyclassaiidaormnodesdataremoteremotedata note use linksincom linksoutgo endpoint combin one filter filter appli incom outgo node select id exampl request httplocalhostapivnodesafbalinksoutgoingfull_typedatacoredictdict would first search outgo node uuid start afba select node full_typ datacorecoredictdict filter oper oper support specif filter key uniqu determin valu type associ key exampl key requir boolean valu admit ident oper wherea integ valu enabl usag comparison oper plu membership oper listtabl filter oper headerrow oper mean accept valu type ident integ string bool datetim greater integ string datetim less integ string datetim greater equal integ string datetim less equal integ string datetim like pattern match string ilik caseinsensit pattern match string ident one element list integ string datetim pattern match pattern match oper like ilik must follow pattern definit name string two charact assum special mean use replac arbitrari sequenc charact includ charact _ use replac one zero charact note special charact requir verbatim escap prepend backslash listtabl pattern match like ilik headerrow filter match doesnt match namelikead_ aiida aiida nameilikead_ aiida aiida namelikea_d_ aiida namelikeaiid_a aiida uuidlikecdfd cdfdfedbacbd descriptionlikethi calcul use calcul use membership membership oper follow commasepar list valu type condit fulfil column valu object element list exampl httplocalhostapivnodesidin httplocalhostapivcomputersscheduler_typeincoreslurmcorepb comparison comparison oper assum natur order integ caseinsensit alphabet order string chronolog order datetim valu exampl httplocalhostapivnodesid select node id larger httplocalhostapivuserslast_namem select user whose last name begin charact rang filter valu type filter valu specifi follow listtabl filter valu type headerrow valu type descript bool either true fals lower case datetim datetim object express format datettimeshift shift time differ respect utc time requir avoid problem aris compar datetim valu express differ time zone format field yyyymmdd date mandatori hhmmss time option format hh hhmm support hhmm shift option present requir time specifi format hh allow shift specifi utc time assum shift format follow gener convent eastern western shift posit neg api unawar daylight save time user requir adjust shift take account format iso compliant note date time field separ charact exampl httplocalhostapivnodesctimet httplocalhostapivnodesctimet httplocalhostapivnodesmtim integ posit integ number string text enclos doubl quot string contain doubl quot escap two doubl quot note unlik occurr sequenc doubl quot escap write twice mani doubl quot comput replac pyclassaiidaormcomputerscomput code replac pyclassaiidaormnodescod node replac pyclassaiidaormnodesnod processnod replac pyclassaiidaormnodesprocessprocessnod calcjobnod replac pyclassaiidaormnodesprocesscalcjobnod user replac pyclassaiidaormusersus group replac pyclassaiidaormgroupsgroup _referenceapipubl overview public api toplevel packag aiidacor distribut call aiida contain variou subpackag refer secondlevel packag admonit rule class tip titleiconlightbulb resourc import directli top level secondlevel packag part public python api intend extern use resourc deeper nest level consid intern intend use outsid aiidacor exampl codeblock python aiida import load_profil ok toplevel import aiidaorm import querybuild ok secondlevel import aiidatoolsimportexport import archiv public api warn interfac implement resourc consid part public api chang minor aiida releas even move fulli remov without deprec period whatsoev awar script aiida plugin reli resourc therefor break unexpectedli minor aiida releas provid list resourc per secondlevel packag expos way modul mention resourc defin __all__ includ aiidacmdlin paramsargu paramsopt paramstyp utilsdecor utilsecho aiidacommon datastructur except extendeddict link log aiidaengin process processst tocontext assign_ append_ workchain while_ return_ if_ calcjob calcfunct workfunct exitcod run run_get_nod run_get_pid submit aiidaorm node data processnod calcfunctionnod calcjobnod workfunctionnod workchainnod arraydata bandsdata kpointsdata projectiondata trajectorydata xydata bool float int str list parameterdata cifdata code folderdata orbitaldata remotedata singlefiledata structuredata upfdata comment comput group log querybuild user load_nod load_cod load_comput load_group to_aiida_typ aiidapars parser aiidaplugin entry_point calculationfactori datafactori dbimporterfactori parserfactori schedulerfactori transportfactori workflowfactori aiidaschedul schedul aiidatool calculationtool get_kpoints_path get_explicit_kpoints_path structure_to_spglib_tupl spglib_tuple_to_structur dbimport aiidatransport transport aiida api toctre maxdepth public apidocaiidarst _internal_architectureplugin_system plugin system note page explain contribut plugin system aiidacor instrucion develop plugin see refhowtopluginsdevelop design principl restrict plugin develop realli necessari avoid databas schema chang whenev reason possibl find load plugin must fast plugin allow especi command line interfac cli command word directli import plugin class notic faster use plugin loaderfactori implement dropin replac provid backward compat pre plugin system plugin manag user friendli verdi shell cli minispec nomenclatur plugin_nam uniqu name identifi plugin suggest name scheme aiidapluginnam pypi distribut sourc code repositori aiida_plugin_nam python packag import aiida_plugin_nam dash replac underscor plugin_nameep_nam entri point categori name given aspect aiida extend via plugin calcul schedul see output verdi plugin list complet list categori map entri point group aiidacategori interfac pluginload plugin load function defin pymodaiidapluginsentry_point registri tool see api document pymodaiidaplugin _internal_architecturedatabas databas structur databas main tool aiida use keep track proven directli store critic data contain access inform everyth get store repositori content organ differ tabl although exact structur depend backend use django sqlalchemi possibl follow section first go main tabl relat aiida entiti relationship tabl also properti backend give gener overview explan work provid exhaust technic descript intern structur introduc remain tabl either serv auxiliari purpos backend specif aiida entiti tabl entiti store databas within tabl db_dbnode node import entiti aiida proven graph made interconect data process node db_dbgroup group contain organ node group may contain mani differ node also node includ differ group db_dbuser user repres contain inform real life individu work program everi node creat singl user author db_dbcomput comput repres contain inform physic hardwar resourc avail node associ comput remot code remot folder process run remot db_dbauthinfo authinfo contain specif user configur access given comput db_dbcomment comment attach node user db_dblog log may attach node aiida provid inform relev event transpir creation exampl warn error execut process tabl databas one mention primari key uniqu identifi member posit integ number call id sometim also pk howev number uniqu within tabl thu user id node id databas trivial two differ node id differ databas entiti also aforement except user authinfo uuid valu uuid meant serv identifi uniqu within tabl aiida databas world posit hexadecim sequenc store string dash separ section exampl adebbbbbfaccbf go descript entiti may notic kind interact relationship least one entiti way relationship track insid one relat entiti tabl whilst other requir creation whole new tabl purpos keep track manytoon relationship see exampl manytoon relationship user node node one one user creat singl user may creat mani node although case relationship mandatori doesnt need case exampl node comput associ one one follow entiti manytoon relationship mani node creat user mani node point comput mani group creat user mani authinfo set user mani authinfo set comput mani comment creat user mani comment attach node mani log attach node way keep track relationship insert foreign key column tabl mani entiti point correspond id valu one entiti relat exampl user_id foreign key column db_dbnode tabl store id user creat node manytomani relationship type relationship bit difficult track sinc member relat one element record tabl one entiti would impli store list valu column often discourag well support therefor conveni use extra tabl connect correspond entri indic specif element relat two manytomani relationship aiida group node specifi mani node insid group singl node belong mani differ group relationship track db_dbgroup_dbnod tabl node link node known selfreferenc relationship mean connect among inde one core principl proven graph work relationship track db_dblink tabl tabl schema follow section provid complet schema tabl sqlalchemi backend indic column uniqu constraint indic foreign key indic valu type nullabl sqlamodel aiidabackendssqlalchemymodelsnodedbnod sqlamodel aiidabackendssqlalchemymodelsnodedblink sqlamodel aiidabackendssqlalchemymodelsgroupdbgroup sqlamodel aiidabackendssqlalchemymodelsgroupdbgroupnod sqlamodel aiidabackendssqlalchemymodelsuserdbus sqlamodel aiidabackendssqlalchemymodelscomputerdbcomput sqlamodel aiidabackendssqlalchemymodelsauthinfodbauthinfo sqlamodel aiidabackendssqlalchemymodelscommentdbcom sqlamodel aiidabackendssqlalchemymodelslogdblog sqlamodel aiidabackendssqlalchemymodelssettingsdbset sequenc tabl necessari keep track id primari key main tabl includ backendspecif one end _id_seq exampl db_dbnode_id_seq db_dbgroup_id_seq db_dblink_id_seq backend specif tabl auth_group django auth_group_permiss django auth_permiss django django_content_typ django django_migr django alembic_vers sqlalchemi todo databas migrat _internalarchitecturerepositori repositori file repositori aiida often refer simpli repositori data store file persist belong node proven graph chapter design implement file repositori describ current architectur heavili influenc lesson learn origin design file repositori earliest version aiida difficulti scale larg number file reason end chapter descript origin design limit instruct understand design current solut _internalarchitecturerepositorydesign design follow requir consid design file repositori implement scalabl repositori abl store million file permit effici backup heterogen repositori oper effici data heterogen size object size rang byte multipl gigabyt simplic solut requir activ run server oper concurr repositori support multipl concurr read write process effici repositori automat dedupl file content effort reduc total amount requir storag space mere requir data store persist content file backend file repositori frontend interfac employ user store file anoth set requir altogeth user use think file storag term file hierarchi would normal file system file store nest directori moreov context aiida node expect subset file hierarchi exampl shown numreffiginternalarchitecturerepositorydesignnoderepositori frontend interfac therefor need allow user store address file hierarchi per node basi even virtual guarante backend implement free store file way imagin order meet requir specifi _figinternalarchitecturerepositorydesignnoderepositori figur includeimagesrepositoryschematic_design_node_repopng align center width px schemat represent possibl virtual file hierarchi node proven graph user perspect node contain arbitrari number file directori certain file hierarchi hierarchi complet virtual howev sens hierarchi necessarili maintain liter data store contain file content satisfi requir frontend interfac actual data store time file repositori solut aiida divid two compon backend frontend follow current backend implement disk object store describ disk object store disk object store design scratch order satisfi technic requir file repositori describ previou section concept simpl file repositori repres contain directori local file system contain file content file written contain first written scratch directori oper finish success file move atom loos directori call loos file directori store individu loos object name object given hash comput content current use sha algorithm httpsenwikipediaorgwikisha_ loos directori appli one level shard base first two charact object hash order make lookup object perform describ refinternalarchitecturerepositoryoriginaldesign schemat overview folder structur disk object store contain shown numreffiginternalarchitecturerepositorydesigndo _figinternalarchitecturerepositorydesigndo figur includeimagesrepositoryschematic_design_dospng align center width px schemat represent file hierarchi contain disk object store httpspypiorgprojectdiskobjectstore_ packag write file contain first written scratch sandbox folder move atom loos directori mainten oper loos file concaten pack file store pack directori approach creat new file repositori first write scratch sandbox folder atom move loos object directori directli address requir concurr reli atom file move oper oper system loos object guarante protect data corrupt within limit atom guarante local file system usag file content hash checksum filenam automat fulfil effici requir assum hash algorithm use collis two object hash guarante content therefor store singl object although comput file hash store incur nonneglig overhead chosen hash algorithm fast enough justifi cost given give signific reduct requir storag space due automat implicit data dedupl approach scratch loos directori address criteria concurr effici solut scalabl reforigin design internalarchitecturerepositoryoriginaldesign solut scale file repositori multipl million node sinc everi object store individu file disk describ make repositori impract backup sinc mere construct list file present expens oper tackl problem disk object store implement concept pack mainten oper content loos object store loos directori concaten singl file store pack folder pack file configur maximum size reach next pack file creat whose filenam name consecut integ sqlite httpssqliteorgindexhtml_ databas use track pack file object store byte offset start total byte length index file necessari individu object pack smaller number file respect simplic requir sqlite databas chosen sinc serverless effici loos object concaten random order say disk object store undertak effort order object accord content size way align block file system unlik keyvalu store solut file size treat equal optim toward store smaller file larger file done intent disk object store expect abl store file strongli heterogen size make optim particular rang file size current pack oper seen mainten oper therefor unlik write new loos object oper concurr multipl process despit current limit pack mechan satisfi final scalabl requir reduc total number file pack strategi pack file copi backup copi effici sinc new object concaten end exist pack file exist pack file principl never touch reach maximum size unless pack file forc repack backup tool rsync httpsenwikipediaorgwikirsync_ reduc transfer content bare minimum _internalarchitecturerepositorydesignrepositorybackend file repositori backend abl respect diverg requir laid refat start section internalarchitecturerepositorydesign file repositori regard user interfac actual data store implement divid backend frontend interfac clear separ respons backend sole task store content file return upon request effici possibl retriev file individu well bulk simplic repositori backend deal raw byte stream maintain sort file hierarchi interfac backend file repositori implement defin classaiidarepositorybackendabstractabstractrepositorybackend abstract class literalinclud aiidarepositorybackendabstractpi languag python pyobject abstractrepositorybackend methaiidarepositorybackendabstractabstractrepositorybackendput_object_from_filelik main method given stream filelikeobject byte write object repositori return key methaiidarepositorybackendabstractabstractrepositorybackendput_object_from_fil conveni method allow store file object directli file local file system simpli call methaiidarepositorybackendabstractabstractrepositorybackendput_object_from_filelik key return putmethod could type string uniqu identifi store object use key methaiidarepositorybackendabstractabstractrepositorybackendopen methaiidarepositorybackendabstractabstractrepositorybackendget_object_cont use obtain handl object entir content read memori respect final methaiidarepositorybackendabstractabstractrepositorybackendhas_object methaiidarepositorybackendabstractabstractrepositorybackenddelete_object use determin whether repositori contain object certain key delet respect abstract repositori backend interfac implement disk object store_ classaiidarepositorybackenddisk_object_storediskobjectstorerepositorybackend well scratch sandbox classaiidarepositorybackendsandboxsandboxrepositorybackend latter implement simpli implement interfac use temporari scratch folder local file system store file content file object store flat manner filenam function uniqu key base randomli gener uuid shown numreffiginternalarchitecturerepositorydesignsandbox _figinternalarchitecturerepositorydesignsandbox figur includeimagesrepositoryschematic_design_sandboxpng align center width px file structur creat classaiidarepositorybackendsandboxsandboxrepositorybackend implement file repositori backend file store complet flat structur name determin randomli gener uuid effici method write read file local file system sinc sandbox repositori intend short lifetim contain rel object typic drawback flat file store appli simpl flat structur sandbox implement limit sinc backend use shortliv temporari file repositori use case provid file repositori unstor node new node instanc creat interact shell session often discard store import creation new file also delet node delet effici possibl disk object store optim effici adhoc object delet rather object delet implement softdelet actual delet perform mainten oper pack loos object new node instanc upon instanti get instanc classaiidarepositorybackendsandboxsandboxrepositorybackend repositori node get store file copi perman classaiidarepositorybackenddisk_object_storediskobjectstorerepositorybackend file repositori _internalarchitecturerepositorydesignrepositoryfront file repositori frontend understand file repositori frontend integr orm file repositori backend consid follow class diagram _figinternalarchitecturerepositoryclasshierarchi figur includeimagesrepositoryschematic_design_class_hierarchypng align center width px file repositori backend interfac classaiidarepositoryrepositoryrepositori class maintain refer instanc one avail file repositori backend implement sandbox disk object store variant store file object retriev content store object intern keep virtual file hierarchi allow client address file path file hierarchi oppos uniqu key identifi creat backend final classaiidaormnodesnodenod class main point interact user entir api mix classaiidaormnodesrepositorynoderepositorymixin class latter keep instanc classaiidarepositoryrepositoryrepositori class repositori oper forward check node mutabl perform oppos backend interfac frontend classaiidarepositoryrepositoryrepositori understand concept file hierarchi keep fulli memori allow client interact interfac file store indic hierarchi address rel filepath oppos uniqu string identifi gener backend import note howev virtual hierarchi initi base actual content file repositori backend fact backend notion file hierarchi provid hierarchi classaiidarepositoryrepositoryrepositori construct mean classaiidarepositoryrepositoryrepositori expos subset file contain within file repositori backend persist virtual hierarchi file store particular node store databas node databas model jsonb column call repository_metadata contain virtual file hierarchi serial form serial form gener methaiidarepositoryrepositoryrepositoryseri method methaiidarepositoryrepositoryrepositoryfrom_seri class method use reconstruct repositori instanc preexist file hierarchi note upon construct serial file hierarchi classaiidarepositoryrepositoryrepositori actual valid file object contain within hierarchi actual contain backend final integr classaiidarepositoryrepositoryrepositori class orm classaiidaormnodesrepositorynoderepositorymixin class mix classaiidaormnodesnodenod class layer serv coupl function implement mutabl rule node serv translat layer string byte stream first necessari node store content consid immut includ content file repositori classaiidaormutilsmixinsseal mixin overrid classaiidarepositoryrepositoryrepositori method mutat repositori content ensur process node mutat content long seal second raisondtr classaiidaormnodesrepositorynoderepositorymixin allow client work string stream instead byte stream explain section reffil repositori backend internalarchitecturerepositorydesignrepositorybackend work byte stream howev user frontend api often use work string file given encod classaiidaormnodesrepositorynoderepositorymixin overrid putmethod accept string stream enabl return file handl exist file object automat decod byte content addit requir oper string instead byte client specifi encod sinc file repositori backend store sort metadata imposs deduc file encod automat decod likewis use default file encod system may yield wrong result sinc file could import actual origin written anoth system differ encod encod decod file object therefor respons frontend user lifetim node compon describ describ employ throughout lifetim node new node instanc construct yet instanc classaiidarepositoryrepositoryrepositori instead done lazili soon oper file repositori execut crucial perform sinc node instanc may often initi without repositori content ever need access construct repositori interfac instanc nonneglig overhead node unstor classaiidarepositoryrepositoryrepositori construct instanc classaiidarepositorybackendsandboxsandboxrepositorybackend implement advantag node object go scope store content may creat repositori automat clean local file system node get store classaiidarepositoryrepositoryrepositori instanc replac new instanc time backend set classaiidarepositorybackenddisk_object_storediskobjectstorerepositorybackend initi point contain current profil content sandbox repositori copi disk object store classaiidarepositoryrepositoryrepositori interfac end content serial serial file hierarchi store node repository_metadata column allow reconstruct classaiidarepositoryrepositoryrepositori instanc correctli node reload databas call methaiidarepositoryrepositoryrepositoryfrom_seri class method pass store repository_metadata _internalarchitecturerepositoryoriginaldesign origin design origin file repositori aiida implement simpl directori local file system file belong node would written subdirectori within repositori directori without compress pack name directori equal uuid node guarante subdirectori uniqu file differ node would overwrit one anoth even ident name anticip databas contain mani node lead mani subdirectori would slow oper find directori particular node repositori shard httpsenwikipediaorgwikishard_database_architecture_ context file system mean instead flat structur file repositori node directori store nest subdirectori subdirectori determin uuid first second subdirectori given first second two charact respect remain charact uuid form name final subdirectori exampl given uuid edaebeaaf rel path subdirectori would edaebeaaf structur file repositori would contain directori ff appli one start third level howev file hierarchi would flat schemat overview result file hierarchi shown numreffiginternalarchitecturerepositorydesignorigin _figinternalarchitecturerepositorydesignorigin figur includeimagesrepositoryschematic_design_originalpng align center width px schemat represent origin structur file repositori file node store directori exclus node whose path determin uuid node directori shard twice use two consecut charact start uuid creat two level subdirectori done limit number directori one level order make look directori given node effici limit simpl robust design origin architectur file repositori variou limit mani would start play signific role larger project contain mani file main limit origin design file store eventu lead larg number file store larg number subdirectori file system file directori requir inod label file system abl map filepath actual locat disk number avail inod file system limit certain aiida project hit limit make imposs write file disk even though might plenti raw storag space left addit back file repositori origin design practic imposs due sheer number file even determin differ origin backup repositori exampl use rsync httpsenwikipediaorgwikirsync_ could take day comput differ let alon time would take perform actual backup howev wasnt mere number file problemat even number directori typic repositori would contain would alreadi significantli slow backup oper sinc databas kept refer file directori store file repositori given node origin design would alway creat subdirectori file repositori node even contain file whatsoev otherwis would imposs know whether node realli contain file directori file repositori accident mistaken approach howev lead larg number empti directori mani node often contain file exampl base type data node _internal_architectureengin engin _internal_architectureenginecach control cach import section cover detail cach mechan discuss reftop section topicsprovenancecach develop plugin want modifi cach behavior class recommend read section first sever method intern class aiida use control cach mechan level gener classormnod aiidaormnodesnod class methaiidaormnodesnodeis_valid_cach properti determin whether particular node use cach use exampl disabl cach fail calcul node class _cachabl attribut set fals complet switch cach node class avoid perform queri hash altogeth level classprocess aiidaengineprocessesprocessprocess classormprocessnod aiidaormnodesprocessprocessnod class methprocessnodeis_valid_cach aiidaormnodesprocessprocessnodeis_valid_cach call methprocessis_valid_cach aiidaengineprocessesprocessprocessis_valid_cach pass node use classaiidaengineprocessesprocessprocess subclass eg calcul plugin implement custom way invalid cach methprocessnode_hash_ignored_input aiidaormnodesprocessprocessprocessnode_hash_ignored_input attribut list input ignor creat hash check methprocessnode_get_objects_to_hash aiidaormnodesprocessprocessprocessnode_get_objects_to_hash method methprocessis_valid_cach aiidaengineprocessesprocessprocessis_valid_cach methexit_cod aiidaengineprocessesprocess_specprocessspecexit_cod mark invalidates_cach check workflownod exampl discuss reftop section topicsprovenancecachinglimit node return link cach enforc two level _cachabl properti set fals classaiidaormnodesnod reenabl classaiidaormnodesprocesscalculationcalculationcalculationnod affect calcjob calcfunct mean classaiidaormnodesprocessworkflowworkflowworkflownod cach _store_from_cach method use clone exist node rais error exist node return link extra safeguard prevent case user might incorrectli overrid _cachabl properti workflownod subclass _ httpsgithubcomaiidateamaiidacoreissu todo _internal_architectureglobaldesign global design decis _ _ httpsgithubcomaiidateamaiidacoreissu todo _internal_architectureorm orm _internal_architectureorment entiti node _ _internal_architectureormquerybuild querybuild _ _internal_architectureormontolog aiida ontolog _ _ httpsgithubcomaiidateamaiidacoreissu _ httpsgithubcomaiidateamaiidacoreissu _ httpsgithubcomaiidateamaiidacoreissu _internal_architectureormarch aiida archiv format aiida archiv singl file format canon extens aiida long term storag aiida proven graph provid data storag backend integr databas file repositori standard format zip archiv contain follow file metadatajson file contain inform version archiv dbsqlite file contain aiida databas repo directori contain aiida file repositori imag includeimagesarchivefilestructur width align center central directori written metadata databas record top file zip file read first bottom contain byte posit start central directori scan central directori extract record file extract metadatadatabas one simpli scan record break directli decompress byte array file way scan record repositori file _internal_architectureormarchivemetadata metadata file contain import inform necessari correct interpret dbsqlite use avoid incompat among differ version aiida hre exampl metadatajson literalinclud includesmetadatajson languag json begin file see version archiv file export_vers version aiida code new archiv version introduc sever differ reason may gener chang occur export entiti databas andor archiv scheme updat chang standard export properti valu updat aiida note archiv version older advis manual tri convinc migrat complet success migrat test tri includ reason edgecas migrat involv version intric possibl miss edgecas test quit real worth note ever issu pleas report github httpswwwgithubcomaiidateamaiida_coreissuesnew_ join aiida mail list httpwwwaiidanetmailinglist_ use contact form httpwwwaiidanetcontactnew_ note migrat archiv file newest version may extra entri metadatajson simpli state archiv version file migrat note suppli old archiv file current aiida code support verdi archiv import automat tri migrat archiv call verdi archiv migrat _internal_architectureormarchivedatajson databas databas sqlite format schema dynam gener sqlalchemi orm class main databas convert jsonb json uuid string seealso refinternal_architecturedatabas intern architectur toctre maxdepth databas repositori archive_format plugin_system engin rest_api todo global_design orm role pythoncod languag python _internal_architecturerestapi rest api aiida rest api made two main class app inherit flaskflask gener class flask web applic aiidaapi inherit flask_restfulapi class defin resourc serv rest api instanc aiidaapi let call api app let call app need coupl set apiapp app extend rest api follow go minim exampl creat api extend aiida rest api ad endpoint newendpoint endpoint support two http method get retriev latest creat dict object return id ctime iso format attribut post creat dict object placehold attribut store return id order achiev need creat flask_restfulresourc class bound new endpoint extend pyclassaiidarestapiapiaiidaapi class order regist new endpoint option extend pyclassaiidarestapiapiapp class addit custom let start put follow code file apipi literalinclud includessnippetsapipi go previou code step step first thing first import codeblock python aiidarestapiapi import aiidaapi app aiidarestapirun_api import run_api flask_rest import resourc start import base class extendedemploy aiidaapi app simplic advis import method run_api provid interfac configur api pars commandlin argument coupl two class repres api app howev refer document flask_rest httpsflaskrestfulreadthedocsio_ configur hookup api builtin method defin class repres addit resourc codeblock python class newresourceresourc resourc contain get post method descript method follow get return id ctime attribut latest creat dict post creat dict object store databas return newli assign id def getself aiidaorm import querybuild dict qb querybuild qbappenddict projectid ctime attribut tagpdata qborder_bypdata ctime desc result qbfirst result return dictionari datetim object serial iso return dictidresult ctimeresultisoformat attributesresult def postself aiidaorm import dict param dictpropertyspam propertyegg paramsdata dictdictparamsstor return id paramsdatapk class newresourc contain two method get post name chosen function arbitrari fix flask individu function respond http request type get post respect word api receiv get post request url newendpoint function newresourceget newresourcepost execut http respons construct around data return function data pack dictionari serial flask json stream data python builtin type serial flask eg int float str etc wherea serial custom type let refer flask document httpflaskpocooorgdocs_ document flask main sourc inform also topic custom http respons construct custom url eg accept paramet advanc serial issu whenev face need handl error consid use aiida rest apispecif except alreadi defin pyclassaiidarestapicommonexcept reason becom clear slightli later section new resourc defin regist api assign one endpoint done __init__ newapi mean method add_resourc codeblock python class newapiaiidaapi def __init__self appnon kwarg init serv add new endpoint basic aiida api super__init__appapp kwarg selfadd_resourcenewresourc newendpoint strict_slashesfals origin intent main purpos overrid __init__ method regist new resourc api fact gener form __init__ meant codeblock python class newapiaiidaapi def __init__self appnon kwarg super selfadd_resourc selfadd_resourc selfadd_resourc exampl inde characterist line pythonselfadd_resourcenewresourc newendpoint strict_slashesfals anyway method add_resourc defin document flask httpflaskpocooorgdocs_ final main code configur run api codeblock python import aiidarestapicommon common aiida import load_profil config_dir common__path__ import click clickcommand clickoptionp port typeclickint default helpport number clickoptionh hostnam default helphostnam clickoptioncconfigdirconfigtypeclickpathexiststru defaultconfig_dir helpth path configur directori clickoptiondebug debug is_flagtru defaultfals helprun app debug mode clickoptionwsgiprofil wsgi_profil is_flagtru defaultfals helpto use wsgi profil middlewar find bottleneck web applic def newendpointkwarg run rest api invok runner run_apiapp newapi kwarg main program __name__ __main__ run app provid option exampl python apipi host port load_profil newendpoint click packag httpsclickpalletsprojectscomenx_ use provid nice command line interfac process option handl default valu pass newendpoint function method run_api accomplish sever function coupl api instanc flaskflask name flask fundament class repres web app consequ app configur requir hook take input class repres api applic strongli suggest pass run_api pyclassaiidarestapiapiapp class inherit flaskflask handl correctli aiida restapispecif except posit argument repres commandlin argumentsopt pass click function type default help string set clickopt definit handl command line call thing use script want custom error handl take inspir look definit app creat deriv class newappapp support command line option ident verdi restapi use verdi restapi help full document want add option modifi exist one creat custom runner take inspir run_api time run apipi type termin codeblock consol chmod x apipi apipi port rest api run httpapiv serv flask app aiidarestapirun_api lazi load environ product warn develop server use product deploy use product wsgi server instead debug mode run http press ctrlc quit let use curl get method ask latest creat node codeblock bash curl httpapivnewendpoint x get form output form resembl codeblock python attribut binding_energy_per_substructure_per_unit_area_unit evang binding_energy_per_substructure_per_unit_area ctime id wherea actual valu respons dictionari well intern structur attribut field gener differ let us creat node post method check get codeblock python curl httpapivnewendpoint x post id curl httpapivnewendpoint x get attribut properti spam properti egg ctime id post request trigger creation new dict node confirm respons get request final remark might circumst want use intern werkzeugbas server exampl might want run app apach use wsgi script case simpli use configure_api return custom object api codeblock python api configure_apiapp mycloudapi kwarg app retriev apiapp snippet code becom fundament block wsgi file use apach document refhowtoshareservedeploy moreov recommend consult document mod_wsgi httpsmodwsgireadthedocsio_ note option creat click option variabl catch_internal_serv fals order let except includ python traceback bubbl apach error log particularli use app still heavi develop structur extern databas aiida support automat import export atom structur select extern databas import base class defin api import found pyclassaiidatoolsdbimportersbaseclassesdbimport list avail plugin toctre maxdepth dbimportersicsd dbimporterscod cod databas import cod databas import use import crystal structur crystallographi open databas httpwwwcrystallographynet_ cod aiida setup instanc pyclassaiidatoolsdbimporterspluginscodcoddbimport creat follow codeblock python aiidatoolsdbimporterspluginscod import coddbimport import coddbimport addit paramet requir standard queri main cod server queri search initi use pymethaiidatoolsdbimporterspluginscodcoddbimporterqueri method suppli statement use keywordvalu syntax codeblock python result importerquerychemical_namecaffein list possibl keyword list use method pymethaiidatoolsdbimporterspluginscodcoddbimporterget_supported_keyword codeblock python importerget_supported_keyword valu keyword encapsul list case queri return entri match valu binari list moreov case multipl keyword entri match condit impos keyword return binari exampl codeblock python result importerquerychemical_namecaffein serotonin year equival follow sql statement codeblock sql result select data chemical_nam caffein chemical_nam serotonin year year queri return instanc pyclassaiidatoolsdbimporterspluginscodcodsearchresult use way list pyclassaiidatoolsdbimporterspluginscodcodentri instanc codeblock python printlenresult entri result printentri use data pyclassaiidatoolsdbimporterspluginscodcodentri pyclassaiidatoolsdbimporterspluginscodcodentri method inherit pyclassaiidatoolsdbimportersbaseclassescifentri access content instanc pymethaiidatoolsdbimportersbaseclassescifentryget_aiida_structur pymethaiidatoolsdbimportersbaseclassescifentryget_ase_structur pymethaiidatoolsdbimportersbaseclassescifentryget_cif_nod pymethaiidatoolsdbimportersbaseclassescifentryget_parsed_cif pymethaiidatoolsdbimportersbaseclassescifentryget_raw_cif _icsd_importer_guid icsd databas import section explain import cif file icsd databas use pyclassaiidatoolsdbimporterspluginsicsdicsddbimport class abl queri icsd provid fiz karlsruh intranet databas instal server httpwwwfizkarlsruhedeicsd_intranethtml follow instal describ manual necessari know webpag icsd web interfac access full databas local machin either queri mysql databas web page latter restrict maximum search result make unsuit data mine purpos recommend set mysql connect setup instanc pyclassaiidatoolsdbimporterspluginsicsdicsddbimport creat follow codeblock python aiidatoolsdbimporterspluginsicsd import icsddbimport import icsddbimporterserverhttpicsdservercom host list import input paramet explan connect type web sql server address web interfac icsd databas contain protocol domain name end slash exampl codeblock python server httpicsdservercom follow paramet requir mysql queri host databas host name address tip databas host local machin use creat ssh tunnel port databas host ssh l localhost usernameicsddbhostnamecom get urlerror errno connect refus queri databas tri instead use ssh l localhost l localhost usernameicsddbhostnamecom databas access use host host user pass_wd db port login usernam password name databas port mysql databas respect standard instal icsd intranet version follow default valu work otherwis contact system administr get requir inform user dba pass_wd sql db icsd port set querydb true default mysql databas queri otherwis web page queri detail document addit set found pyclassaiidatoolsdbimporterspluginsicsdicsddbimport queri setup work first queri codeblock python cif_nr_list queryresult importerqueryidcif_nr_list support keyword obtain use codeblock python importerget_supported_keyword inform keyword found httpwwwfizkarlsruhedefileadminbe_usericsdpdfsci_man_icsd_vpdf_ queri return instanc pyclassaiidatoolsdbimporterspluginsicsdicsdsearchresult pyclassaiidatoolsdbimporterspluginsicsdicsdentri posit access use codeblock python queryresultsati also iter queri result codeblock python entri query_result someth instanc pyclassaiidatoolsdbimporterspluginsicsdicsdentri follow method pymethaiidatoolsdbimportersbaseclassescifentryget_cif_nod return instanc pyclassaiidaormnodesdatacifcifdata use aiida workflow pymethaiidatoolsdbimportersbaseclassescifentryget_aiida_structur return aiida pyclassaiidaormnodesdatastructurestructuredata instanc pymethaiidatoolsdbimporterspluginsicsdicsdentryget_ase_structur return ase structur conveni format chosen process full exampl full exampl icsd import use codeblock python aiidatoolsdbimporterspluginsicsd import icsddbimport cif_nr_list import icsddbimporterserverhttpicsdservercom host query_result importerqueryidcif_nr_list result query_result printresultsourcedb_id aiida_structur resultget_aiida_structur someth structur troubleshoot test mysql connect test mysql connect first make sure connect port machin host databas databas host local machin use local port tunnel provid ssh follow ssh l localhost usernameicsddbhostnamecom note get urlerror errno connect refus queri databas tri use instead codeblock shell ssh l localhost l localhost usernameicsddbhostnamecom note need account host machin note plenti explan onlin setup tunnel ssh connect use l option open new verdi shell type ipython verbatim import mysqldb db mysqldbconnecthost userdba passwdsql dbicsd port get error timeout success establish connect mysql databas