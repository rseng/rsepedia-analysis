changelog v drop support python httpsgithubcomaiidateamkiwipypul rmqcommun add server_properti properti httpsgithubcomaiidateamkiwipypul expos aio_pikaconnectionadd_close_callback httpsgithubcomaiidateamkiwipypul v refactor broadcastfilt extract filter condit separ is_filt method v improv add debug log send taskrpcbroadcast rmq improv close creat asyncio loop rmqthreadcommunicatorclos v fix aiopika deprec use async context manag process messag v default task messag ttl set chang v break exist queue sinc rabbitmq allow chang paramet exist queue therefor chang revert releas v howev sinc patch releas merg back v well therefor problem describ revert appli releas restor origin function chang revert increas default ttl task messag httpsgithubcomaiidateamkiwipypul v chang add support python httpsgithubcomaiidateamkiwipypul drop support python httpsgithubcomaiidateamkiwipypul replac old format string interpol fstring httpsgithubcomaiidateamkiwipypul bug fix fix warn caus except task repli httpsgithubcomaiidateamkiwipypul depend depend updat upper limit requir pytray httpsgithubcomaiidateamkiwipypul depend updat requir pytestasyncio httpsgithubcomaiidateamkiwipypul titl kiwipi robust highvolum messag bigdata comput scienc workflow tag python highthroughput comput messag broker scientif workflow faulttoler comput author name martin uhrin orcid affili name sebastiaan p huber orchid affili affili name depart energi convers storag technic univers denmark kg lyngbi denmark index name nation centr comput design discoveri novel materi marvel école polytechniqu fédérale de lausann ch lausann switzerland index name theori simul materi theo faculté de scienc et techniqu de lingénieur école polytechniqu fédérale de lausann ch lausann switzerland index date april bibliographi paperbib summari comput scienc seen huge increas use highthroughput autom workflow cours last two decad focus domain comput materi scienc sever larg scale initi provid highqual result standardis calcul landi curtarolo jain saal draxla talirz almost repositori popul use result highthroughput quantum mechan calcul reli workflow framework jaina mortensen includ aiidahttpwwwaiidanet pizzi huber power materi cloudhttpswwwmaterialscloudorg one mani challeng framework maximis faulttoler whilst simultan maintain highthroughput often across sever system typic client launch task supercomput carri comput server host databas softwar level problem perhap best address use messag broker take respons guarante durabl persist atom messag often enabl eventbas commun inde solut rabbitmqhttpswwwrabbitmqcom see widespread adopt industri howev adopt academia limit homemad queue data structur race condit suscept lock poll base solut commonplac like due messag broker typic complex api reflect nontrivi natur underli protocol well lack familiar eventbas program gener within commun kiwipyhttpskiwipyreadthedocsioenlatest design specif address issu provid tool enabl build robust eventbas system interfac simpl possibl kiwipi messag save disk rabbitmq mean system involv workflow includ broker shut abruptli grace previou state recreat allow workflow continu necessari resourc brought back onlin especi import longrun hpc job may take day week featur differenti kiwipi protocol mpi zeromqhttpszeromqorg librari daskhttpsdocsdaskorgenlatest persist state number librari interact directli messag broker exist includ pikahttpspikareadthedocsioenst aiopikahttpsaiopikareadthedocsioenlatestindexhtml pyamqphttpsbarryporgsoftwarepyamqplib kombuhttpsgithubcomcelerykombu other tend rather lowlevel focu channel exchang rout socket comparison differ focu pika kiwipi found documentationhttpskiwipyreadthedocsioenlatest end spectrum librari celeryhttpsdocsceleryprojectorgenstablegettingstartedintroductionhtml rqhttpspythonrqorg othershttpswwwfullstackpythoncomtaskqueueshtml provid task queue librari rpychttpsrpycreadthedocsioenlatest spynehttpspyneio pythonjrpchttpsgithubcomalexshermanpythonjrpc othershttpsstackoverflowcomquestionswhatisthecurrentchoicefordoingrpcinpython enabl remot procedur call contrast kiwipi bring togeth three commonli use messag type task queue remot procedur call rpc broadcast singl interfac messag kiwipi done commun class trivial construct provid uri string point rabbitmq server default kiwipi creat separ commun thread user never see allow interact commun use familiar python syntax without need familiar either coroutin multithread addit advantag kiwipi maintain heartbeat period check make sure connect still aliv server whilst user code thing heartbeat essenti part rabbitmq fault toler two miss check automat trigger messag requeu pick anoth client demonstr possibl usag scenario briefli outlin way kiwipi use aiida aiida amongst thing manag execut complex workflow made process may checkpoint task queue common highthroughput workflow engin aiida maintain task queue process submit typic user workstat task consum multipl daemon process may also user workstat remot remov task queue acknowledg complet consum daemon grace abruptli shut task lost sinc task simpli requeu broker notic consum die furthermor worri race condit multipl daemon process sinc task queue guarante distribut task one consum time remot procedur call use control live process process uniqu identifi sent paus play kill messag respons option sent back initi indic success someth els broadcast current serv two purpos send paus play kill messag process broadcast relev messag control flow process parent process wait child complet inform via broadcast messag child say execut termin enabl decoupl child need know exist parent togeth three messag type allow aiida implement highlydecoupl distribut yet reactiv system proven scalabl individu laptop workstat drive simul highperform supercomput workflow consist vari durat rang millisecond multipl day week hope lower barrier adopt kiwipi bring benefit industri grade messag broker academia beyond ultim make robust scientif softwar easier write maintain acknowledg would like thank giovanni pizzi nicola marzari aiida team continu coordin develop project also thank jason yu contribut first version document work support marvel nation centr compet research fund swiss nation scienc foundat grant agreement id nf european materi model councilcsa fund european union horizon research innov programm grant agreement refer _aiida httpswwwaiidanet _rmq tutori httpswwwrabbitmqcomgetstartedhtml _document httpskiwipyreadthedocsioenlatestindexhtml kiwipi imag docssource_staticlogosvg height px width px alt kiwipi imag httpscodecovioghaiidateamkiwipybranchdevelopgraphbadgesvg target httpscodecovioghaiidateamkiwipi alt coveral imag httpsgithubcomaiidateamkiwipyworkflowscontinuousintegrationbadgesvg target httpsgithubcomaiidateamkiwipyactionsqueryworkflowacontinuousintegr alt github action imag httpsimgshieldsiopypivkiwipysvg target httpspypipythonorgpypikiwipi alt latest version imag httpsimgshieldsiopypipyversionskiwipysvg target httpspypipythonorgpypikiwipi imag httpsimgshieldsiopypilkiwipysvg target httpspypipythonorgpypikiwipi imag httpsjosstheojorgpapersjossstatussvg target httpsdoiorgjoss kiwipy_ librari make remot messag use rabbitmq possibl messag broker easi design support highthroughput workflow bigdata comput scienc set current use aiida_ comput materi research around world said kiwipi entir gener use anywher highthroughput robust messag need here get rpc broadcast filter task queue messag let dive exampl taken rmq tutorial_ see detail head documentation_ rpc client codeblock python import kiwipi kiwipyconnectamqplocalhost comm send rpc messag print x request fib respons commrpc_sendfib result print got r respons rmq_rpc_clientpi sourc httpsrawgithubusercontentcomaiidateamkiwipydevelopexamplesrmq_rpc_clientpy_ server codeblock python import thread import kiwipi def fibcomm num num return num return return fibcomm num fibcomm num kiwipyconnectamqp comm regist rpc subscrib name fib commadd_rpc_subscriberfib fib wait indefinit fibonacci call threadingeventwait rmq_rpc_serverpi sourc httpsrawgithubusercontentcomaiidateamkiwipydevelopexamplesrmq_rpc_serverpy_ worker creat new task codeblock python import sy import kiwipi messag joinsysargv hello world rmqconnectamqplocalhost comm commtask_sendmessag rmq_new_taskpi sourc httpsrawgithubusercontentcomaiidateamkiwipydevelopexamplesrmq_new_taskpy_ worker codeblock python import time import thread import kiwipi print wait messag exit press ctrlc def callback_comm task print x receiv r task timesleeptaskcountb print x done tri kiwipyconnectamqplocalhost comm commadd_task_subscribercallback threadingeventwait except keyboardinterrupt pass rmq_workerpi sourc httpsrawgithubusercontentcomaiidateamkiwipydevelopexamplesrmq_workerpy_ cite use kiwipi directli indirectli eg use aiida_ pleas cite uhrin huber p kiwipi robust highvolum messag bigdata comput scienc workflow httpdoiorgjoss help us keep make commun softwar version softwar follow semant versioning_ contribut want new featur found bug want contribut document translat perhap help alway welcom get start contribut guid httpsgithubcomaiidateamkiwipywikicontributing__ _semant version httpsemverorg develop packag utilis tox httpstoxreadthedocsio__ unit test autom precommit httpsprecommitcom__ code style format test autom instal develop depend codeblock bash pip instal tox precommit run unit test codeblock bash tox rmq test requir run instanc rabbitmq one way achiev use docker launch testrmqdockercomposeyml run precommit test codeblock bash precommit run build document codeblock bash tox e docsclean chang submit pull request pr develop branch publish releas creat releas prcommit develop branch updat kiwipyversionpi changelogmd fastforward merg develop master branch creat releas github httpsgithubcomaiidateamkiwipyreleasesnew point releas commit master name vxyz ident version kiwipyversionpi trigger continuousdeploy github workflow test pass publish packag pypi check success complet github action tab httpsgithubcomaiidateamkiwipyact releas fail delet releas tag _task exampl examplestasksipynb _rpc exampl examplesrpcipynb _broadcast exampl examplesbroadcastipynb concept introduc mean task rpc broadcast usag scenario sinc mean task kiwipi differ slightli one rabbitmq tutori task task one mani messag mean sent task queue zero worker attach one process task readi result task option deliv sender see task example_ see action rpc remot procedur onetoon use want call particular remot functionmethod usual expect immedi respons exampl imagin ask remot process paus would make rpc wait get confirm inde paus see rpc example_ see action broadcast one sender zero consum fire forget call broadcast messag anyon listen consum may option appli filter receiv messag match criteria see broadcast example_ see action coroutin vs thread kiwipi rabbitmq backend coroutin thread version commun your coroutin environ may prefer use classkiwipyrmqcommunicatorrmqcommun use coroutin classasynciofuturesfutur dont event loop stick classkiwipyrmqthreadcommsrmqthreadcommun run event loop separ thread allow asynchron commun applic logic get stuff mean noth stick classkiwipyrmqthreadcommsrmqthreadcommun exampl exampl basic function keep mind run one system usual commun would use multipl distribut client toctre maxdepth glob examplesbroadcastipynb examplestasksipynb examplesrpcipynb _pika httpspikareadthedocsioenst _aiopika httpspikareadthedocsioenst _msgpack httpsgithubcommsgpackmsgpackpython perform kiwipi design primarili easeofus robust mind less focu perform never less expect depend configur network condit kiwpi abl handl hundr thousand messag per second chart show benchmark compar kiwipi pika_ use follow configur send task messag consist byte size default messag sent _then_ receiv ie serialis abl show split time everyth run local server client dell xp core ih x tb ssd hdd ubuntu use msgpack_ encod decod messag mandatori rout enabl mean code wait messag rout broker rais except full code found testrmqbenchtest_benchmarkspi test split send get send_get show breakdown full process send receiv messag send_get test carri differ messag size byte indic squar bracket imag _staticbenchsvg width alt perform comparison kiwipi vs pika see kiwipi faster get task test_kiwi_get ms vs test_pika__get ms significantli slower send test_kiwi_send ms vs test_pika_send ms result overal sendget time roughli x ms slower pika may due fact kiwipi run separ thread perform commun mean client make request send messag main thread kiwipi synchronis commun thread wait messag send return control user make easier write correct code use kiwipi error encount send rais immedi except oppos user explicitli check futur incom messag hand deliv directli commun thread user respons synchronis main thread need henc see perform loss run benchmark clone sourc instal run like codeblock shell pip instal e rmqtest pytest test end test see summari time _exampl examplesrst instal python kiwipi support python version rabbitmq kiwipi depend rabbitmq messag broker ubuntu simpl codeblock shell apt instal rabbitmq platform refer download instal rabbitmq httpswwwrabbitmqcomdownloadhtml_ basic instal pip instal kiwipyrmq your readi run examples_ build sourc order develop kiwipi best instal kiwipi edit mode allow chang make kiwipi reflect immedi runtim environ first clone sourc codeblock shell git clone httpsgithubcomaiidateamkiwipygit creat activ virtualenv codeblock shell virtualenv venv venvbinactiv pip instal e kiwipyrmqprecommittest run test make sure rabbitmq server run see rabbitmq document accomplish andor verifi type codeblock shell pytest test _pika httpspikareadthedocsioenst _rabbitmq tutori httpswwwrabbitmqcomgetstartedhtml _work queue httpswwwrabbitmqcomtutorialstutorialtwopythonhtml _topic httpswwwrabbitmqcomtutorialstutorialfivepythonhtml _rpc httpswwwrabbitmqcomtutorialstutorialsixpythonhtml _aiopika httpsaiopikareadthedocsioenlatestindexhtml come pika kiwipi come nativ rabbitmq commun other ad extend pyclasskiwipycommun interfac thu may use see achiev thing pika_ standard librari use rabbitmq tutorials_ kiwipi also show differ particularli kiwipi less verbos set sensibl default user work queue let start rabbitmq work queues_ exampl pika code send task literalinclud examplespikanew_taskpi languag python code run worker literalinclud examplespikaworkerpi languag python kiwipi kiwipi code send task literalinclud exampleskiwipynew_taskpi languag python compar pika snippet see dont decid know exchang routing_key properti channel durabl messag task queue kiwipi alway durabl correspond messag persist routing_key simpli name queue user declar exchang select automat user set kiwipytask default exchang default chang construct pyclasskiwipyrmqthreadcommsrmqthreadcommun explicitli creat task queue call task_queu howev even default version user doesnt need multipl queue case code would simpli kiwipyconnectamqplocalhost comm commtask_sendmessag print x sent r messag run worker literalinclud exampleskiwipyworkerpi languag python fairli straightforward decis user make prefetch count number task worker work simultan topic move topics_ exampl known broadcast filter kiwipi pika pika code emit log topic literalinclud examplespikaemit_log_topicpi languag python receiv code literalinclud examplespikareceive_logs_topicpi languag python kiwipi emit kiwipi literalinclud exampleskiwipyemit_log_topicpi languag python weve come see kiwipi there need worri channel exchang exchang type rout key known subject messag receiv log literalinclud exampleskiwipyreceive_logs_topicpi languag python see filter perform use pyclasskiwipybroadcastfilt match string option includ wildcard rpc final let end rpc_ exampl pika code run rpc server literalinclud examplespikarpc_serverpi languag python client side literalinclud examplespikarpc_clientpi languag python kiwipi kiwipi server becom literalinclud exampleskiwipyrpc_serverpi languag python usual rout messag automat set kiwipi identifi rpc subscrib thing need link client server client code literalinclud exampleskiwipyrpc_clientpi languag python send rpc request identifi use rpc_send call give us back futur get result receiv server roundup exampl demonstr kiwipi tri use sensibl default keep mani rout detail hidden user advantag bring power dedic messag broker rabbitmq less expert user addit allow messag done use simpl interfac implement messag protocol allow client protocol agnost tradeoff cours reduc control finer detail messag perform user need finegrain control pika_ excel aiopika_ may better altern kiwipi document master file creat sphinxquickstart tue may adapt file complet like least contain root toctre direct _kiwipi httpsgithubcomaiidateamkiwipi _aiida httpswwwaiidanet _pika httpspikareadthedocsioenst _exampl examplesrst _concept conceptsrst _come pika pikacomparisonrst _instal installationrst _perform performancerst _api document apidocrst welcom kiwipi document imag httpscodecovioghaiidateamkiwipybranchdevelopgraphbadgesvg target httpscodecovioghaiidateamkiwipi alt coveral imag httpsgithubcomaiidateamkiwipyworkflowscontinuousintegrationbadgesvg target httpsgithubcomaiidateamkiwipyactionsqueryworkflowacontinuousintegr alt github action imag httpsimgshieldsiopypivkiwipysvg target httpspypipythonorgpypikiwipi alt latest version imag httpsimgshieldsiopypipyversionskiwipysvg target httpspypipythonorgpypikiwipi imag httpsimgshieldsiopypilkiwipysvg target httpspypipythonorgpypikiwipi imag httpsjosstheojorgpapersjossstatussvg target httpsdoiorgjoss kiwipy_ librari make remot messag use rabbitmq possibl messag broker easi design support highthroughput workflow bigdata comput scienc set current use aiida_ comput materi research around world said kiwipi entir gener use anywher highthroughput robust messag need featur support messag per second performance___ highli robust loss messag connect interrupt etc messag automat persist disk gener commun interfac nativ support rabbitmq support task queue broadcast rpc support thread coroutin base commun python compat get start instal kiwipi follow instruct installation_ section success instal kiwipi give examples_ see kiwipi design concept behind kiwipi found concepts_ section your alreadi familiar pika_ might find come pika_ section use final check complet api documentation_ admonit develop contribut class note want new featur found bug want contribut document translat perhap help alway welcom get start contribut guid httpsgithubcomaiidateamkiwipywikicontributing__ tabl content toctre maxdepth instal concept exampl pikacomparison perform api refer apidockiwipi cite use kiwipi directli indirectli eg use aiida_ pleas cite uhrin huber p kiwipi robust highvolum messag bigdata comput scienc workflow httpdoiorgjoss help us keep make commun softwar version softwar follow semant versioning_ _semant version httpsemverorg