swiftsimio build statushttpsgithubcomswiftsimswiftsimioactionsworkflowspytestymlbadgesvg document statushttpsreadthedocsorgprojectsswiftsimiobadgeversionlatesthttpsswiftsimioreadthedocsioenlatestbadgelatest joss statushttpsjosstheojorgpapersecfbdfbdfstatussvghttpsjosstheojorgpapersecfbdfbdf swift astrophys simul code httpswiftduracuk use wide exist mani way read data swift output hdf file rang read directli use hpi use complex system yt howev either unsatisfactori eg lack unit inform read hdf complex usecas swiftsimio provid objectori api read dynam data swift full document avail readthedocshttpswiftsimioreadthedocsorg get set swiftsimio easi design requir number option packag instal make experi better recommend requir requir python v higher unfortun possibl support swiftsimio version python lower import upgrad still python user python packag numpi requir core numer routin hpi requir read data swift hdf output file unyt requir symbol unit calcul depend sympi option packag numba highli recommend wish use inbuilt visualis tool scipi requir wish gener smooth length particl type store variabl snapshot eg dark matter tqdm requir progress bar longrun task instal progress bar shown pysphview wish use integr visualis code instal swiftsimio instal use python packag manag pip packag manag wish use pip instal swiftsimio cite pleas cite swiftsimio use joss paperhttpsjosstheojorgpapersjoss bibtex articleborrow doi joss url httpsdoiorgjoss year publish open journal volum number page author josh borrow alexei borrisov titl swiftsimio python librari read swift data journal journal open sourc softwar use subsampl project backend ask cite relev spheric paperhttpsarxivorgab note cite arxiv version recommend ad track confer proceed well bibtex articleborrow titleproject sph particl adapt environ authorjosh borrow ashley j kelli year eprint archiveprefixarxiv primaryclassastrophga contribut swiftsimio contribut swiftsimio come github repositori avail httpsgithubcomswiftsimswiftsimio contribut alway welcom make sure follow contribut pass unit test check pytest contribut add unit test new function contribut format black formatt see formatsh contribut document fulli doc also abid follow code conduct code conduct commun particip open sourc astronomi project made member around globe divers set skill person experi differ commun experi success continu growth expect everyon commun follow guidelin interact other insid outsid commun goal keep posit inclus success grow commun member commun pledg treat peopl respect provid harass bullyingfre environ regardless sex sexual orient andor gender ident disabl physic appear bodi size race nation ethnic religion particular sexual languag imageri sexist racist otherwis exclusionari joke appropri pledg respect work other recogn acknowledgementcit request origin author author pledg explicit want work cite acknowledg pledg welcom interest join commun realiz includ peopl varieti opinion background serv enrich commun particular discuss relat proscon variou technolog program languag welcom done respect take proactiv measur ensur particip heard feel confid freeli express opinion pledg welcom question answer respect pay particular attent new commun pledg provid respect critic feedback forum especi discuss thread result code contribut pledg conscienti percept wider commun respond critic respect strive model behaviour encourag product debat disagr within commun critic treat outsid commun respect peopl within commun pledg help entir commun follow code conduct remain silent see violat code conduct take action member commun violat code contact joshuaborrowdurhamacuk subject line swiftsimio code conduct email sent fashion treat strictest confid talk privat person code conduct appli commun situat onlin offlin includ mail list forum social media confer meet associ social event onetoon interact relat activ project organ member swiftsimio commun includ affili packag welcom code conduct agre also abid present code conduct part code conduct adapt psf code conduct astropi code conduct httpswwwastropyorgcode_of_conducthtml swiftsimio document master file creat sphinxquickstart sat nov adapt file complet like least contain root toctre direct welcom swiftsimio document swiftsimio toolkit read swift_ data astrophys simul code use ensur everyth read symbol unit attach use visualis final key featur enabl use cell metadata swift snapshot enabl partial read toctre maxdepth getting_startedindex loading_dataindex maskingindex visualisationindex velociraptorindex creating_initial_conditionsindex statisticsindex command_lineindex modulesindex cite swiftsimio pleas cite swiftsimio use joss paper_ codeblock bibtex articleborrow doi joss url httpsdoiorgjoss year publish open journal volum number page author josh borrow alexei borrisov titl swiftsimio python librari read swift data journal journal open sourc softwar use subsampl project backend ask cite relev spheric article_ note cite arxiv version recommend ad track confer proceed well codeblock bibtex articleborrow titleproject sph particl adapt environ authorjosh borrow ashley j kelli year eprint archiveprefixarxiv primaryclassastrophga _swift httpwwwswiftsimcom _paper httpsjosstheojorgpapersjoss _articl httpsuiadsabsharvardeduabsarxivbabstract indic tabl refgenindex refmodindex refsearch velociraptor integr modswiftsimio use modvelociraptor librari extract particl contain within given halo surround region modvelociraptor librari document also avail readthedoc httpvelociraptorpythonreadthedocsorg_ instal pypi use pip instal velociraptor overarch workflow integr follow load halo catalogu group file use modvelociraptor modul get two object correspond bound unbound particl halo use to_swiftsimio_dataset load region around halo aheadoftim mask techniqu use region around halo directli use mask provid particl type consid bound particl workflow explor use exampl data avail swift velociraptor data avail httpvirgodbcosmaduracukswiftwebstorageioexamplessmall_cosmo_volumezip exampl first must load velociraptor catalogu follow codeblock python velociraptor import load load_catalogu velociraptorparticl import load_group catalogue_nam velociraptor snapshot_nam snapshot catalogu load_cataloguefcatalogue_nameproperti group load_groupsfcatalogue_namecatalog_group cataloguecatalogu extract largest halo volum codeblock python particl unbound_particl groupsextract_halohalo_id load particl modswiftsimio dataset codeblock python velociraptorswiftswift import to_swiftsimio_dataset data mask to_swiftsimio_dataset particl fsnapshot_namehdf generate_extra_masktru generate_extra_mask provid second return valu mask extract bound particl system make imag full box show small subsect volum load within twice maxim usabl radiu within velociraptor imag load_halo_fullboxpng code make imag follow codeblock python swiftsimiovisualis import project_gas_pixel_grid import matplotlibpyplot plt matplotlibcolor import lognorm grid project_gas_pixel_griddatadata resolut fig ax pltsubplotsfigs dpi figsubplots_adjust axaxisoff aximshowgridt originlow cmapinferno normlognormvmin cliptru figsavefigload_halo_fullboxpng make imag central halo access properti particl instanc get posit halo codeblock python region particlesx_mbp particlesr_crit particlesx_mbp particlesr_crit particlesy_mbp particlesr_crit particlesy_mbp particlesr_crit grid project_gas_pixel_griddatadata resolut regionregion fig ax pltsubplotsfigs dpi figsubplots_adjust axaxisoff aximshowgridt originlow cmapinferno normlognormvmin cliptru figsavefigload_halo_selectionpng produc follow imag imag load_halo_selectionpng final visualis bound particl use mask object return initi extract swiftsimio dataset codeblock python grid project_gas_pixel_griddatadata resolut regionregion maskmaskga fig ax pltsubplotsfigs dpi figsubplots_adjust axaxisoff aximshowgridt originlow cmapinferno normlognormvmin cliptru figsavefigload_halo_bound_selectionpng produc follow imag imag load_halo_bound_selectionpng hope use featur excit data use assmallasposs exampl show herecommandlin util modswiftsimio come use commandlin util basic document provid alway find uptod document invok h help swiftsnap swiftsnap util introduc modswiftsimio version allow preview metadata insid swift snapshot file simpli invok path snapshot show select use metadata see exampl code bash swiftsnap output_hdf produc follow output code untitl swift simul written activ polici cosmolog integr hydro keep self graviti steal output type snapshot output select snapshot llvmclang nonmpi version swift swift io_selection_chang vgddbdirti simul state z gyr h_ kmmpc ρ_crite cm ω_b ω_k ω_lambda ω_m ω_r ω ω_ ω_a graviti scheme perparticl soften hydrodynam scheme gadget version sph springel chemistri model none cool model none entropi floor none feedback model none tracer none load data main purpos modswiftsimio load data section tell four main object objswiftsimioreaderswiftunit respons creat correspond swift unit modunyt object objswiftsimioreaderswiftmetadata respons load requir inform swift header pythonread data objswiftsimioreaderswiftdataset respons hold particl data keep track two object objswiftsimioreaderswiftparticletypemetadata respons catalogu metadata individu particl type like ga includ particl field present get start first locat swift data wish analys dont handi alway download test cosmolog volum httpvirgodbcosmaduracukswiftwebstorageioexamplescosmo_volume_examplehdf associ halo catalogu httpvirgodbcosmaduracukswiftwebstorageioexamplescosmo_volume_exampleproperti need wish use velociraptor integr librari visualis exampl creat first instanc objswiftsimioreaderswiftdataset use helper function modswiftsimioload follow codeblock python swiftsimio import load cours replac path snapshot use custom data data loadcosmo_volume_examplehdf type data objswiftsimioreaderswiftdataset quick look around dataset ipython shell jupyt notebook see contain sever subobject dataga contain inform ga particl simul datadark_matt likewis contain inform dark matter particl simul datametadata instanc objswiftsimioreaderswiftmetadata dataunit instanc objswiftsimioreaderswiftunit use metadata let begin read use metadata straight datametadata object instanc may want know boxsiz simul codeblock python meta datametadata boxsiz metaboxs printboxs output mpc note unit attach unit attach everyth one key advantag use modswiftsimio realli easi convert unit instanc want boxsiz kiloparsec codeblock python boxsizeconvert_to_unitskpc printboxs output kpc neat thank tight integr modunyt complex unit often use specifi term modunyt object follow codeblock python import unyt new_unit unytcm unytmpc unytkpc new_unitssimplifi boxsizeconvert_to_unitsnew_unit gener suggest use modunyt unit object rather string find inform modunyt unyt document website_ _unyt document websit httpsunytreadthedocsioenst lot metadata avail object best way see explor object use dir interact shell summari metadata snapshot avail mani variabl exampl metahydro_schem properti number particl differ type avail metan_gasdark_matterstarsblack_hol sever prelatex string avail describ configur state code metahydro_info metacompiler_info sever snapshotwid paramet metaa current scale factor metat current time metaz current redshift metarun_nam name run specifi swift paramet file metasnapshot_d moddatetim object describ snapshot written disk astropi instal also use metadatacosmolog object astropycosmologywwacdm instanc read particl data find particl properti present snapshot use instanc objswiftsimioreaderswiftmetadata datametadata contain sever instanc objswiftsimioreaderswiftparticletypemetadata describ kind field present ga dark matter codeblock python note gas_properti instanc swiftparticletypemetadata printdatametadatagas_propertiesfield_nam print larg list like codeblock python coordin densiti temperatur veloc individu attribut access objectori interfac instanc codeblock python x_ga datagascoordin rho_ga datagasdens x_dm datadark_mattercoordin point inform actual read snapshot far read three array memori case correspond parttypecoordin parttypecoordin parttypedens allow quit lazi write script write instanc block start file hpyfil handl read data simpli access data whenev need predict interfac like boxsiz carri symbol modunyt unit codeblock python printx_gasunit output mpc convert whatev unit like instanc wish convert ga densiti solar mass per cubic megaparsec codeblock python new_density_unit unytsolar_mass unytmpc rho_gasconvert_to_unitsnew_density_unit printrho_gasunitslatex_repr output fracm_odotrmmpc latex represent symbol unit convert data use make plot ensur data axe label alway consist unit name column swift output custom metadata subgridschemenamedcolumn multi dimension tabl contain column carri individu data one common exampl element mass fraction ga stellar particl place object hierarchi follow codeblock python printdatagaselement_mass_fract output name column instanc hydrogen helium carbon nitrogen oxygen neon magnesium silicon iron avail fraction particl mass given element access individu column case element abund codeblock python access silicon abund datagaselement_mass_fractionssilicon nonunyt properti data array custom properti present within base objunytunyt_array class creat version objswiftsimioobjectscosmo_array allow dataset contain cosmolog name properti instanc ever need know dataset repres ask descript codeblock python printrho_gasnam output comov mass densiti particl includ scalefactor inform cosmo_factor object codeblock python convers factor make densiti physic quantiti printrho_gascosmo_factora_factor physical_rho_ga rho_gascosmo_factora_factor rho_ga symbol scalefactor express printrho_gascosmo_factorexpr output easi way convert comov valu physic one even easier way convert properti physic use builtin to_phys convert_to_phys method follow codeblock python physical_rho_ga rho_gasto_phys convert inplac rho_gasconvert_to_phys userdefin particl type possibl add userdefin particl type alreadi present modswiftsimio metadata need specifi three name see particl dataset provid swift automat read codeblock python import swiftsimio sw import swiftsimiometadataparticl swp swiftsimioobject import cosmo_factor swpparticle_name_underscor extratyp swpparticle_name_class extratyp swpparticle_name_text extratyp data swload extra_testhdf tool modswiftsimio includ tool help make visualis prettier describ tool use color map modswiftsimiovisualisationtoolscmap modul includ three object use deploy two dimension colour map first classswiftsimiovisualisationtoolscmapslinearsegmentedcmapd second classswiftsimiovisualisationtoolscmapslinearsegmentedcmapdhsv allow gener new color map set color coordin codeblock python bower linearsegmentedcmapd color coordin namebow gener color map quasilinear interpol point map display use plot method codeblock python fig ax pltsubplot bowerplotax gener imag bower_cmappng final color map appli data call codeblock python def vertical_funcx return ab x def horizontal_funci return raster_at nplinspac x npmeshgridhorizontal_funcraster_at vertical_funcraster_at imag bowerx pltimsavetest_d_cmap_outputpng imag imag rgba array output imag test_d_cmap_outputpng final type color map load imag one display similar famou color map use millenium simul imag millenium_cmappng load use classswiftsimiovisualisationtoolscmapsimagecmapd class follow codeblock python mill imagecmapdfilenamemillenium_cmappng use similarli color map exampl output follow imag test_d_cmap_output_millpng recommend way use two dimension color map gener quit complex best left imagegener program gimp photoshop pysphview integr provid wrapper everpopular pysphviewer_ easi use modswiftsimio dataset particl dataset contain smooth length gener use scipi ckdtree get access object submodul follow codeblock python swiftsimio import load swiftsimiovisualisationsphview import sphviewerwrapp import matplotlibpyplot plt data loadcosmo_volume_examplehdf resolut ga sphviewerwrapperdataga smooth_overmass gas_temp sphviewerwrapp dataga smooth_overdatagasmass datagastemperatur dark_matt sphviewerwrapperdatadark_matt smooth_overmass gasquick_viewxsizeresolut ysizeresolut rinfin gas_tempquick_viewxsizeresolut ysizeresolut rinfin dark_matterquick_viewxsizeresolut ysizeresolut rinfin pltimsavegas_imagepng gasimag pltimsavegas_temppng gas_tempimag gasimag pltimsavedm_imagepng dark_matterimag objswiftsimiovisualisationsphviewersphviewerwrapp object allow get access particl camera render object particl get_camera camera get_rend render respect _pysphview httpsgithubcomalejandrobllpysphviewerproject modswiftsimiovisualisationproject submodul provid interfac render swift data project grid take data project request mass smooth function return surfac densiti effect solv equat mathtildea_i sum_j a_j w_ij mathtildea_i smooth quantiti pixel mathi mathj particl simul mathw kernel use wendlandc kernel primari function methswiftsimiovisualisationprojectionproject_ga allow creat ga project field see exampl exampl codeblock python swiftsimio import load swiftsimiovisualisationproject import project_ga data loadcosmo_volume_examplehdf creat grid unit msun mpc transform like unyt quantiti mass_map project_gasdata resolut projectmass paralleltru let say wish save msun kpc unyt import msun kpc mass_mapconvert_to_unitsmsun kpc matplotlibpyplot import imsav matplotlibcolor import lognorm normal save imsavegas_surface_dens_mappng lognormmass_mapvalu cmapviridi basic demonstr creat mass surfac densiti map creat exampl project temperatur map need remov surfac densiti depend ie methproject_ga return surfac temperatur unit k kpc want k divid codeblock python swiftsimio import load swiftsimiovisualisationproject import project_ga data loadcosmo_volume_examplehdf first creat massweight temperatur dataset datagasmass_weighted_temp datagasmass datagastemperatur map msun mpc mass_map project_gasdata resolut projectmass paralleltru map msun k mpc mass_weighted_temp_map project_ga data resolut projectmass_weighted_temp paralleltru temp_map mass_weighted_temp_map mass_map unyt import k temp_mapconvert_to_unitsk matplotlibpyplot import imsav matplotlibcolor import lognorm normal save imsavetemp_mappng lognormtemp_mapvalu cmaptwilight output exampl use exampl data provid load data section look someth like imag temp_mappng backend certain case rather use facil visualis wish valu return well converg possibl provid sever differ backend pass backendstr project visualis function avail modul modswiftsimiovisualisationprojectionprojection_backend avail backend follow fast default backend extrem fast provid basic smooth return type singl precis float point number histogram backend provid zero smooth act similar way nphistd function argument scatter refer backend fast two distinguish featur calcul perform doubl precis return earli warn messag enough pixel fulli resolv kernel regular user use mode renormalis fast kernel evalu twice renormalis ensur mass conserv within float point precis return singl precis array subsampl recommend mode user wish converg result even low resolut kernel evalu least time overlap pixel consid everi singl particl return doubl precis subsampled_extrem subsampl provid kernel evalu gpu fast use cuda faster comput support gpu parallel implement function nonparallel exampl codeblock python swiftsimio import load swiftsimiovisualisationproject import project_ga data loadcosmo_volume_examplehdf subsampled_array project_ga data resolut projectentropi paralleltru backendsubsampl like look similar imag make default backendfast wellconverg distribut resolut level rotat sometim need visualis galaxi differ perspect modswiftsimiovisualisationrot submodul provid routin gener rotat matric correspond vector provid rotation_matrix argument methproject_ga methproject_gas_pixel_grid also need suppli rotation_cent argument rotat take place around given point exampl code load snapshot halo catalogu creat edgeon faceon project use integr velociraptor inform possibl integr librari shown velociraptor section codeblock python swiftsimio import load mask velociraptor import load load_catalogu swiftsimiovisualisationrot import rotation_matrix_from_vector swiftsimiovisualisationproject import project_gas_pixel_grid import unyt import numpi np import matplotlibpyplot plt matplotlibcolor import lognorm radiu around load data visualis half size unytkpc snapshot_filenam cosmo_volume_examplehdf catalogue_filenam cosmo_volume_exampleproperti catalogu load_cataloguecatalogue_filenam halo visualis halo x cataloguepositionsxcmbphalo cataloguepositionsycmbphalo z cataloguepositionszcmbphalo lx catalogueangular_momentumlxhalo ly catalogueangular_momentumlyhalo lz catalogueangular_momentumlzhalo angular momentum vector point perpendicular galaxi disk simul contain star use lx_star angular_momentum_vector nparraylxvalu lyvalu lzvalu angular_momentum_vector nplinalgnormangular_momentum_vector face_on_rotation_matrix rotation_matrix_from_vector angular_momentum_vector edge_on_rotation_matrix rotation_matrix_from_vector angular_momentum_vector axisi region x size x size size size z size z size visualise_region x size x size size size data_mask masksnapshot_filenam data_maskconstrain_spatialregion data loadsnapshot_filenam maskdata_mask use project_gas_pixel_grid gener project imag common_argu dictdatadata resolut paralleltru regionvisualise_region un_rot project_gas_pixel_gridcommon_argu face_on project_gas_pixel_grid common_argu rotation_centerunytunyt_arrayx z rotation_matrixface_on_rotation_matrix edge_on project_gas_pixel_grid common_argu rotation_centerunytunyt_arrayx z rotation_matrixedge_on_rotation_matrix use provid exampl data show blob due low resolut natur use one eagl volum exampleseagle_ produc much nicer galaxi data larg provid exampl tutori also provid extra two valu z min max part region paramet may slight perform impact gener advis subload volum particl type particl type abl visualis use methswiftsimiovisualisationprojectionproject_pixel_grid function attach correct symbol unit work perform smooth aim introduc featur correctli appli unit project soon use featur particl type smooth length need gener exampl creat mass densiti map dark matter provid util methswiftsimiovisualisationsmoothing_length_generationgenerate_smoothing_length codeblock python swiftsimio import load swiftsimiovisualisationproject import project_pixel_grid swiftsimiovisualisationsmoothing_length_gener import generate_smoothing_length data loadcosmo_volume_examplehdf gener smooth length dark matter datadark_mattersmoothing_length generate_smoothing_length datadark_mattercoordin datametadataboxs kernel_gamma neighbour speedup_fac dimens project dark matter mass dm_mass project_pixel_grid note pass dark matter dataset whole data object specifi particl type wish visualis datadatadark_matt boxsizedatametadataboxs resolut projectmass paralleltru regionnon matplotlibpyplot import imsav matplotlibcolor import lognorm everyon know dark matter purpl imsavedm_mass_mappng lognormdm_mass cmapinferno output exampl use exampl data provid load data section look someth like imag dm_mass_mappng lowerlevel api lowerlevel api project allow gener posit smooth length smooth quantiti gener pixel grid repres smooth version data api avail methswiftsimiovisualisationprojectionscatt methswiftsimiovisualisationprojectionscatter_parallel parallel version parallel version use significantli memori alloc threadloc imag array thread sum end describ scatter variant behav exact way default use fast backend use other select manual modul use backend backends_parallel dictionari modswiftsimiovisualisationproject use function need xposit particl x yposit particl quantiti wish smooth particl mass smooth length particl h resolut wish make squar imag re key particl domain x visibl imag may particl outsid rang crash code may even contribut imag smooth length overlap need rescal data live within rang may use function follow codeblock python swiftsimiovisualisationproject import scatter use variabl name scatterxx yy hh mm resr modnumpi grid shape re re need rescal back origin dimens get correct unit forget repres smooth quantiti per surfac area slice modswiftsimiovisualisationslic submodul provid interfac render swift data onto slice take data find densiti fix zposit slice box effect solv equat mathtildea_i sum_j a_j w_ij mathtildea_i smooth quantiti pixel mathi mathj particl simul mathw kernel use wendlandc kernel note take kernel fix zposit primari function methswiftsimiovisualisationsliceslice_ga allow creat ga slice field see exampl exampl codeblock python swiftsimio import load swiftsimiovisualisationslic import slice_ga data loadcosmo_volume_examplehdf creat grid unit msun mpc transform like unyt quantiti note slice given term boxsiz take slice z boxsiz mass_map slice_ga data slice resolut projectmass paralleltru let say wish save g cm unyt import g cm mass_mapconvert_to_unitsg cm matplotlibpyplot import imsav matplotlibcolor import lognorm normal save imsavegas_slice_mappng lognormmass_mapvalu cmapviridi basic demonstr creat mass densiti map creat exampl project temperatur map need remov densiti depend ie methslice_ga return volumetr temperatur unit k kpc want k divid codeblock python swiftsimio import load swiftsimiovisualisationslic import slice_ga data loadcosmo_volume_examplehdf first creat massweight temperatur dataset datagasmass_weighted_temp datagasmass datagastemperatur map msun mpc mass_map slice_ga data slice resolut projectmass paralleltru map msun k mpc mass_weighted_temp_map slice_ga data slice resolut projectmass_weighted_temp paralleltru temp_map mass_weighted_temp_map mass_map unyt import k temp_mapconvert_to_unitsk matplotlibpyplot import imsav matplotlibcolor import lognorm normal save imsavetemp_mappng lognormtemp_mapvalu cmaptwilight output exampl use exampl data provid load data section look someth like imag temp_slicepng rotat rotat box prior slice provid similar fashion modswiftsimiovisualisationproject submodul use modswiftsimiovisualisationrot submodul rotat perspect prior slice rotation_cent argument methslice_ga need provid specifi point around rotat take place angl rotat specifi matrix suppli rotation_matrix methslice_ga rotat matrix may comput methrotation_matrix_from_vector result perspect rotat along provid vector approach rotat appli exampl shown codeblock python swiftsimio import load swiftsimiovisualisationslic import slice_ga swiftsimiovisualisationrot import rotation_matrix_from_vector data loadcosmo_volume_examplehdf first creat massweight temperatur dataset datagasmass_weighted_temp datagasmass datagastemperatur specifi rotat paramet center datametadataboxs rotate_vec matrix rotation_matrix_from_vectorrotate_vec axisz map msun mpc mass_map slice_ga data slice resolut projectmass rotation_matrixmatrix rotation_centercent paralleltru map msun k mpc mass_weighted_temp_map slice_ga data slice resolut projectmass_weighted_temp rotation_matrixmatrix rotation_centercent paralleltru temp_map mass_weighted_temp_map mass_map unyt import k temp_mapconvert_to_unitsk matplotlibpyplot import imsav matplotlibcolor import lognorm normal save imsavetemp_mappng lognormtemp_mapvalu cmaptwilight lowerlevel api lowerlevel api slice allow gener posit smooth length smooth quantiti gener pixel grid repres smooth slice version data api avail methswiftsimiovisualisationsliceslice_scatt methswiftsimiovisualisationsliceslice_scatter_parallel parallel version parallel version use significantli memori alloc threadloc imag array thread sum end describ scatter variant behav exact way use function need xposit particl x yposit particl zposit particl z rang wish slice z_slice quantiti wish smooth particl mass smooth length particl h resolut wish make squar imag re key particl domain x z visibl imag may particl outsid rang crash code may even contribut imag smooth length overlap need rescal data live within rang may use function follow codeblock python swiftsimiovisualisationslic import slice_scatt use variabl name slice_scatterxx yy zz hh mm z_slicez_slic resr modnumpi grid shape re re need rescal back origin dimens get correct unit forget repres smooth quantiti per volum volum render modswiftsimiovisualisationvolume_rend submodul provid interfac render swift data onto fix grid take data find densiti fix posit allow use code requir fix grid radi transfer program effect solv equat mathtildea_i sum_j a_j w_ij mathtildea_i smooth quantiti pixel mathi mathj particl simul mathw kernel use wendlandc kernel primari function methswiftsimiovisualisationvolume_renderrender_ga allow creat ga densiti grid field see exampl exampl codeblock python swiftsimio import load swiftsimiovisualisationvolume_rend import render_ga data loadcosmo_volume_examplehdf creat grid unit msun mpc transform like unyt quantiti mass_grid render_ga data resolut projectmass paralleltru basic demonstr creat mass densiti cube creat exampl project temperatur cube need remov densiti depend ie methrender_ga return volumetr temperatur unit k kpc want k divid codeblock python swiftsimio import load swiftsimiovisualisationvolume_rend import render_ga data loadcosmo_volume_examplehdf first creat massweight temperatur dataset datagasmass_weighted_temp datagasmass datagastemperatur map msun mpc mass_cub render_ga data resolut projectmass paralleltru map msun k mpc mass_weighted_temp_cub render_ga data resolut projectmass_weighted_temp paralleltru x x cube dimens temperatur temp_cub mass_weighted_temp_cub mass_cub rotat rotat box prior volum render provid similar fashion modswiftsimiovisualisationproject submodul use modswiftsimiovisualisationrot submodul rotat perspect prior slice rotation_cent argument methrender_ga need provid specifi point around rotat take place angl rotat specifi matrix suppli rotation_matrix methrender_ga rotat matrix may comput methrotation_matrix_from_vector result perspect rotat along provid vector approach rotat appli exampl shown codeblock python swiftsimio import load swiftsimiovisualisationvolume_rend import render_ga swiftsimiovisualisationrot import rotation_matrix_from_vector data loadcosmo_volume_examplehdf first creat massweight temperatur dataset datagasmass_weighted_temp datagasmass datagastemperatur specifi rotat paramet center datametadataboxs rotate_vec matrix rotation_matrix_from_vectorrotate_vec axisz map msun mpc mass_cub render_ga data resolut projectmass rotation_matrixmatrix rotation_centercent paralleltru map msun k mpc mass_weighted_temp_cub render_ga data resolut projectmass_weighted_temp rotation_matrixmatrix rotation_centercent paralleltru x x cube dimens temperatur temp_cub mass_weighted_temp_cub mass_cub lowerlevel api lowerlevel api volum render allow gener posit smooth length smooth quantiti gener pixel grid repres smooth volum render version data api avail methswiftsimiovisualisationvolume_renderscatt methswiftsimiovisualisationvolume_renderscatter_parallel parallel version parallel version use significantli memori alloc threadloc imag array thread sum end describ scatter variant behav exact way use function need xposit particl x yposit particl zposit particl z quantiti wish smooth particl mass smooth length particl h resolut wish make cube re key particl domain x z visibl cube may particl outsid rang crash code may even contribut imag smooth length overlap need rescal data live within rang may use function follow codeblock python swiftsimiovisualisationvolume_rend import scatter use variabl name scatterxx yy zz hh mm resr modnumpi grid shape re re re need rescal back origin dimens get correct unit forget repres smooth quantiti per volum visualis modswiftsimio provid visualis routin acceler modnumba modul work without modul strongli recommend instal best perform x speedup provid modswiftismiovisualis submodul three builtin render type describ follow common interfac codeblock python render_func_name_ga datadata swiftsimio dataset resolut resolut along one axi output imag projectmass variabl project eg mass temperatur etc parallelfals construct imag thread parallel regionnon none list tell region render_func_nam output function come associ unit correct dimens lowerlevel api also document provid addit function final also describ integr modpysphview toctre maxdepth project slice volume_rend tool pysphview mask modswiftsimio provid uniqu function compar softwar packag read hdf data mask facil swift snapshot contain cell metadata allow us spatial mask data ahead time modswiftsimio provid number object help function provid modswiftsimiomask submodul avail easili methswiftsimiomask toplevel function function use heavili velociraptor integr library_ read data near bound object two type mask default allow spatial mask full mask requir significantli memori overhead gener much slower spatial mask _velociraptor integr librari httpsgithubcomswiftsimvelociraptorpython spatialonli mask spatial mask approxim allow load particl within given region precis toplevel cell defin within swift alway load particl request simplic may also load particl slightli outsid region interest work follow load toplevel cell metadata find overlap specifi region cell load cell within overlap see edg region may load extra inform alway load whole toplevel cell exampl exampl use objswiftsimiomasksswiftmask object load bottom left half corner box codeblock python import swiftsimio sw filenam cosmo_volume_examplehdf mask swmaskfilenam full metadata object avail within mask boxsiz maskmetadataboxs load_region x list left right bottom top front back load_region b b b boxsiz constrain mask maskconstrain_spatialload_region load snapshot mask data swloadfilenam maskmask data regular objswiftsimioreaderswiftdataset object ever load particl approxim insid load_region region importantli method tini memori overhead also rel small overhead read data allow use snapshot much larger avail memori machin process eas full mask exampl show use full mask object use constrain densiti particl load particl within densiti window codeblock python import swiftsimio sw creat set mask object mask swmaskcosmological_volumehdf spatial_onlyfals aheadoftim creat spatial mask base cell metadata maskconstrain_spati maskmetadataboxs maskmetadataboxs none none fun also constrain densiti gcm read relev data region test elementbyel note use mask type significantli slower use spatialonli mask density_unit maskunitsmass maskunitslength maskconstrain_maskga densiti density_unit density_unit grab actual data object includ mask paramet data swloadcosmo_volume_examplehdf maskmask attribut data object access one belong mask region densiti spatial read ie ask temperatur particl reciev array contain temperatur particl lie region densiti gcm write subset snapshot case may use write subset exist snapshot hdf file could use exampl extract galaxi halo interest snapshot file easier work transport write_subset function provid use exampl follow codeblock python import swiftsimio sw import unyt mask swmaskeagle_snapshothdf maskconstrain_spati unytunyt_quant unytkpc unytunyt_quant unytkpc none none swsubset_writerwrite_subsettest_subsethdf mask write snapshot contain particl specifi snapshot whose xcoordin within rang kpc function use cell mask encompas specifi spatial domain success read portion dataset input file write new snapshot due coars grain natur cell mask particl outsid rang may also includ within top level cell particl fall within given rang pleas note import run constrain_spati gener store cell mask need write snapshot subset statist file modswiftsimio includ routin load log file sfrtxt energytxt avail objswiftsimiostatisticsswiftstatisticsfil object main load_statist function exampl codeblock python swiftsimio import load_statist data load_statisticsenergytxt printdata printxtotal_massnam output codeblock bash statist file energytxt contain field step time z total_mass gas_mass dm_mass sink_mass star_mass bh_mass gas_z_mass star_z_mass bh_z_mass kin_energi int_energi pot_energi rad_energi gas_entropi com_x com_i com_z mom_x mom_i mom_z ang_mom_x ang_mom_i ang_mom_z total mass simulationcr initi condit write dataset valid consumpt cosmolog code difficult especi consid best use unit swift use differ set intern unit specifi paramet file necessarili need set unit initi condit specifi nevertheless import ensur unit initi condit consist facilit use modunyt array exampl gener randomli place ga particl uniform densiti function creat initi condit avail modswiftsimiowrit submodul toplevel objswiftsimiowrit object note properti modswiftsimio requir initi condit one actual read swift field left unread includ initi condit file current known issu due inconsist initi condit simul snapshot modswiftsimio actual abl read inititi condit produc aim fix upcom releas exampl codeblock python swiftsimio import writer swiftsimiounit import cosmo_unit import unyt import numpi np box mpc boxsiz unytmpc gener object cosmo_unit correspond default gadgetoid unit msun mpc km x writercosmo_unit boxsiz particl n_p randomli space coordin mpc direct xgascoordin nprandomrandn_p unytmpc random veloc km xgasveloc nprandomrandn_p unytkm unyt gener uniform mass solar mass particl xgasmass nponesn_p dtypefloat e unytmsun gener intern energi correspond k xgasinternal_energi nponesn_p dtypefloat e unytkb unytk e unytmsun gener initi guess smooth length base mip xgasgenerate_smoothing_lengthsboxsizeboxs dimens id present automat gener xwritetesthdf run hglanc result testhdf produc codeblock bash testhdf header attribut boxsiz dimens array int flag_entropy_ numpart_tot array int numpart_total_highword array int parttyp coordin float internalenergi float mass float particleid float smoothinglength float veloc float unit attribut unit current cg u_i array float unit length cg u_l array float unit mass cg u_m array float unit temperatur cg u_t array float unit time cg u_t array float note need care choic unit system allow valu ie need ensur provid valu unit written file safe interpret singleprecis float except coordin store doubl precis get start swift astrophys simul code httpswiftduracuk use wide exist mani way read data swift output hdf file rang read directli use modhpi use complex system modyt howev either unsatisfactori eg lack unit inform read hdf complex usecas thin wrapper provid objectori api read dynam data swift get set modswiftsimio easi design requir number option packag instal make experi better recommend requir detail requir requir python v higher unfortun possibl support modswiftsimio version python lower import upgrad still python user python packag numpi requir core numer routin hpi requir read data swift hdf output file unyt requir symbol unit calcul depend sympi option packag numba highli recommend wish use inbuilt visualis tool scipi requir wish gener smooth length particl type store variabl snapshot eg dark matter tqdm requir progress bar longrun task instal progress bar shown pysphview wish use integr visualis code instal modswiftsimio instal use python packag manag pip packag manag wish use pip instal swiftsimio note instal requir packag set code develop first clone latest master github git clone httpsgithubcomswiftsimswiftsimiogit instal pip use e flag cd swiftsimio pip instal e todo add contribut guid usag mani exampl use modswiftsimio avail swiftsimio_examples_ repositori also includ exampl read older eg eagl dataset exampl usag shown plot densitytemperatur phase diagram densiti temperatur given cg unit codeblock python import swiftsimio sw load metadata explicitli _not_ read particl data yet data swloadpathtoswiftoutput import matplotlibpyplot plt datagasdensitiesconvert_to_cg datagastemperaturesconvert_to_cg pltloglog pltscatter datagasdens datagastemperatur pltxlabelfrga densiti leftdatagasdensitiesunitslatex_reprright pltylabelfrga temperatur leftdatagastemperaturesunitslatex_reprright plttight_layout pltsavefigtest_plotpng dpi dont worri much cant understand get much heavili next section import note follow metadata read methswiftsimioload function call densiti temperatur correspond parttypedens parttypetemperatur dataset read data read methswiftsimioobjectscosmo_arrayconvert_to_cg method call methswiftsimioobjectscosmo_arrayconvert_to_cg convert data inplac ie return none data cach reread pltscatter call _swiftsimio_exampl httpsgithubcomswiftsimswiftsimioexampl api document api document toctre maxdepth swiftsimio indic tabl refgenindex refmodindex refsearch