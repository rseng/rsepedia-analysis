<!-- badges: start -->

[![R build
status](https://github.com/ropenscilabs/r2readthedocs/workflows/R-CMD-check/badge.svg)](https://github.com/ropenscilabs/r2readthedocs/actions)
[![codecov](https://codecov.io/gh/ropenscilabs/r2readthedocs/branch/main/graph/badge.svg)](https://codecov.io/gh/ropenscilabs/r2readthedocs)
[![Project Status:
Concept](https://www.repostatus.org/badges/latest/concept.svg)](https://www.repostatus.org/#concept)
<!-- badges: end -->

# r2readthedocs

Convert R package documentation to a
[‘readthedocs’](https://readthedocs.org/) website.

## Why?

Two compelling reasons:

1.  R packages are not necessarily self-contained, yet much of the
    surrounding infrastructure, from CRAN to automatic documentation
    generators such as [`pkgdown`](https://pkgdown.r-lib.org/), presume
    a package to be a self-contained unit. Any projects requiring
    greater flexibility must employ alternative documentation systems,
    for which [‘readthedocs’](https://readthedocs.org/) (RTD) offers an
    extremely simple and highly flexible way to embed or enhance package
    documentation within or alongside almost anything else.
2.  [‘readthedocs’](https://readthedocs.org/) is based on a markup
    language called [‘reStructuredText’
    (`.rst`)](https://docutils.sourceforge.io/docs/user/rst/quickref.html),
    which is more flexible and powerful than the `markdown` generally
    used in R packages. Alternatively, yet another form called
    [‘Markedly Structured Text’
    (MyST)](https://myst-parser.readthedocs.io/en/latest/index.html#)
    can be used instead. The possibility of readily swapping between
    different markdown parsing systems provide much greater flexibility
    than available in convention `RMarkdown` parsers.

## How?

For those unfamiliar with [‘readthedocs’](https://readthedocs.org/)
(RTD), we recommend using the `rtd_dummy_pkg()` function provided with
this package, which generates a “skeleton” of a package which can be
used to generate an RTD site.

``` r
path <- rtd_dummy_pkg ()
```

Then either using that `path` to the dummy package, or a local path to a
package of your choice, generate an RTD website by running:

``` r
r2readthedocs (path)
```

The RTD website will be automatically opened in your default browser.
Most of the content is automatically generated straight from the package
documentation, as for a [`pkgdown`](https://pkgdown.r-lib.org/) website.
The primary difference you’ll immediate notice is that the front page is
not the package’s `README.md` document. There are two reasons for this:

1.  While `markdown` pages can be readily inserted into `.rst` pages,
    this is not possible for the main page, which must be encoded
    entirely in `.rst` form.
2.  This package may easily be used to document several packages, or a
    project of which an actual R package is just one component. Leaving
    the main page largely unstructured enables ready adaptation to
    almost any configuration.

The main file controlling the site’s appearance is `index.rst`, located
in a sub-directory of the local `path` named `"docs"` - in R terms, at
`file.path(path, "docs", "index.rst")`.

## Further Information

An RTD site is primarily determined by a few simple files. The
`r2readthedocs()` function initially inserts these files, and then
generates the entire site, creating a `"docs"` sub-directory with a
large number of files. The `rtd_clean()` function can be used to remove
all files automatically generated by RTD itself, reducing the files down
to the primary set of files controlling the site’s structure and
appearance. These are:

1.  `index.rst` responsible for the structure of the main page of the
    site.
2.  `conf.py` A python script for configuring aspects of the site.
3.  `requirements.txt` containing a list of required python packages,
    which may be extended as desired.
4.  `make.bat` and `Makefile` which are responsible for the main build
    system, and should **not** be modified. Type `make` in the local
    `"docs"` directory to see a full list of `make` options.

The main RTD documentation files can be re-generated at any time with
`rtd_build()`.
---
title: "r2readthedocs"
output:
  md_document:
    variant: gfm

  rmarkdown::html_vignette:
    self_contained: no
---

<!-- badges: start -->
[![R build status](https://github.com/ropenscilabs/r2readthedocs/workflows/R-CMD-check/badge.svg)](https://github.com/ropenscilabs/r2readthedocs/actions)
[![codecov](https://codecov.io/gh/ropenscilabs/r2readthedocs/branch/main/graph/badge.svg)](https://codecov.io/gh/ropenscilabs/r2readthedocs)
[![Project Status:
Concept](https://www.repostatus.org/badges/latest/concept.svg)](https://www.repostatus.org/#concept)
<!-- badges: end -->

# r2readthedocs

Convert R package documentation to a ['readthedocs'](https://readthedocs.org/) website.

## Why?

Two compelling reasons:

1. R packages are not necessarily self-contained, yet much of the surrounding
   infrastructure, from CRAN to automatic
   documentation generators such as [`pkgdown`](https://pkgdown.r-lib.org/),
   presume a package to be a self-contained unit. Any projects requiring
   greater flexibility must employ alternative documentation systems, for which
   ['readthedocs'](https://readthedocs.org/) (RTD) offers an extremely simple and
   highly flexible way to embed or enhance package documentation within or
   alongside almost anything else.
2. ['readthedocs'](https://readthedocs.org/) is based on a markup language
   called ['reStructuredText'
   (`.rst`)](https://docutils.sourceforge.io/docs/user/rst/quickref.html),
   which is more flexible and powerful than the `markdown` generally used in
   R packages. Alternatively, yet another form called ['Markedly Structured
   Text' (MyST)](https://myst-parser.readthedocs.io/en/latest/index.html#) can
   be used instead. The possibility of readily swapping between different
   markdown parsing systems provide much greater flexibility than available in
   convention `RMarkdown` parsers.

## How?

For those unfamiliar with ['readthedocs'](https://readthedocs.org/) (RTD), we
recommend using the `rtd_dummy_pkg()` function provided with this package,
which generates a "skeleton" of a package which can be used to generate an RTD
site. 

```{r rtd-dummy, eval = FALSE}
path <- rtd_dummy_pkg ()
```

Then either using that `path` to the dummy package, or a local path to a
package of your choice, generate an RTD website by running:

```{r rtd-run, eval = FALSE}
r2readthedocs (path)
```

The RTD website will be automatically opened in your default browser. Most of
the content is automatically generated straight from the package documentation,
as for a [`pkgdown`](https://pkgdown.r-lib.org/) website. The primary
difference you'll immediate notice is that the front page is not the package's
`README.md` document. There are two reasons for this:

1. While `markdown` pages can be readily inserted into `.rst` pages, this is
   not possible for the main page, which must be encoded entirely in `.rst`
   form.
2. This package may easily be used to document several packages, or a project
   of which an actual R package is just one component. Leaving the main page
   largely unstructured enables ready adaptation to almost any configuration.

The main file controlling the site's appearance is `index.rst`, located in a
sub-directory of the local `path` named `"docs"` - in R terms, at
`file.path(path, "docs", "index.rst")`.

## Further Information

An RTD site is primarily determined by a few simple files. The
`r2readthedocs()` function initially inserts these files, and then generates
the entire site, creating a `"docs"` sub-directory with a large number of
files. The `rtd_clean()` function can be used to remove all files automatically
generated by RTD itself, reducing the files down to the primary set of files
controlling the site's structure and appearance. These are:

1. `index.rst` responsible for the structure of the main page of the site.
2. `conf.py` A python script for configuring aspects of the site.
3. `requirements.txt` containing a list of required python packages, which may
   be extended as desired.
4. `make.bat` and `Makefile` which are responsible for the main build system,
   and should **not** be modified. Type `make` in the local `"docs"` directory
   to see a full list of `make` options.

The main RTD documentation files can be re-generated at any time with
`rtd_build()`.
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/r2readthedocs-package.R
\docType{package}
\name{r2readthedocs-package}
\alias{r2readthedocs-package}
\alias{_PACKAGE}
\title{r2readthedocs: Convert R Package Documentation to a 'readthedocs' Website}
\description{
Convert R package documentation to a 'readthedocs' website.
}
\seealso{
Useful links:
\itemize{
  \item \url{https://github.com/ropenscilabs/r2readthedocs}
  \item Report bugs at \url{https://github.com/ropenscilabs/r2readthedocs/issues}
}

}
\author{
\strong{Maintainer}: Mark Padgham \email{mark.padgham@email.com}

}
\keyword{internal}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/make-fns.R
\name{rtd_clean}
\alias{rtd_clean}
\title{Clean the RTD \verb{_build} directory}
\usage{
rtd_clean(path = ".", full = FALSE)
}
\arguments{
\item{path}{Path to local R package with documentation to be converted}

\item{full}{If \code{TRUE}, also clean R package files, including vignettes and
help files. Use \link{r2readthedocs} to re-generate these.}
}
\description{
Clean the RTD \verb{_build} directory
}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pkg-skeleton.R
\name{rtd_dummy_pkg}
\alias{rtd_dummy_pkg}
\title{Make a dummy package for testing 'r2readthedocs' functions}
\usage{
rtd_dummy_pkg(base_dir = tempdir(), pkg_name = "demo")
}
\arguments{
\item{base_dir}{Base directory in which package is to be constructed (as a
sub-directory)}

\item{pkg_name}{Name of package, which will become a sub-directory of
\code{base_dir}.}
}
\value{
Path to root directory of resultant package
}
\description{
Make a dummy package for testing 'r2readthedocs' functions
}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/readthedocs.R
\name{r2readthedocs}
\alias{r2readthedocs}
\title{Convert package documentation to \code{readthedocs} format}
\usage{
r2readthedocs(path, open = TRUE)
}
\arguments{
\item{path}{Path to local R package with documentation to be converted}

\item{open}{If \code{TRUE}, open the documentation site in default browser.}
}
\value{
TRUE (invisibly) if documentation successfully converted.
}
\description{
Convert package documentation to \code{readthedocs} format
}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/make-fns.R
\name{rtd_open}
\alias{rtd_open}
\title{Open the main RTD 'html' page in default browser}
\usage{
rtd_open(path = ".")
}
\arguments{
\item{path}{Path to local R package with documentation to be converted}
}
\description{
Open the main RTD 'html' page in default browser
}
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/make-fns.R
\name{rtd_build}
\alias{rtd_build}
\title{Build the RTD site}
\usage{
rtd_build(path = ".")
}
\arguments{
\item{path}{Path to local R package with documentation to be converted}
}
\description{
Build the RTD site
}
.. documentation master file, created by sphinx-quickstart 
   You can adapt this file completely to your liking, but it should at least
   contain the root `toctree` directive.

reStructuredText
================================

.. raw:: html

    <style> .red {color:red} </style>

.. role:: red

This main document is in `'reStructuredText' ("rst") format
<https://www.sphinx-doc.org/en/master/usage/restructuredtext/index.html>`_,
which differs in many ways from standard markdown commonly used in R packages.
``rst`` is richer and more powerful than markdown. The remainder of this main
document demonstrates some of the features, with links to additional ``rst``
documentation to help you get started. The definitive argument for the benefits
of ``rst`` over markdown is the `official language format documentation
<https://www.python.org/dev/peps/pep-0287/>`_, which starts with a very clear
explanation of the `benefits
<https://www.python.org/dev/peps/pep-0287/#benefits>`_.

Examples
--------

All of the following are defined within the ``docs/index.rst`` file. Here is
some :red:`coloured` text which demonstrates how raw HTML commands can be
incorporated. The following are examples of ``rst`` "admonitions":

.. note::

    Here is a note

    .. warning::

        With a warning inside the note

.. seealso::

    The full list of `'restructuredtext' directives <https://www.sphinx-doc.org/en/master/usage/restructuredtext/directives.html>`_ or a similar list of `admonitions <https://restructuredtext.documatt.com/admonitions.html>`_.

.. centered:: This is a line of :red:`centered text`

.. hlist::
   :columns: 3

   * and here is
   * A list of
   * short items
   * that are
   * displayed
   * in 3 columns

The remainder of this document shows three tables of contents for the main
``README`` (under "Introduction"), and the vignettes and R directories of
a package. These can be restructured any way you like by changing the main
``docs/index.rst`` file. The contents of this file -- and indeed the contents
of any `readthedocs <https://readthedocs.org>`_ file -- can be viewed by
clicking *View page source* at the top left of any page.

.. toctree::
   :maxdepth: 1
   :caption: Introduction:
