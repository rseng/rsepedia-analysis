v spack bugfix allow lock work high content improv error messag clingo respect packag permiss sbang fix enablelock behavior fix logformat report ignor instal error fix overload argpars key allow style command run target develop log lock messag debug level instead verbos level handl invalid unicod log spack audit fix api call variant provid meaning messag empti environ instal ad opensus leap contain spack container revert patch make reappli patch idempot manpath use system default add setdefault subcommand spack modul tcl regener view spec alreadi instal packag bugfix fix extern packag detect openmpi updat upc packag ad pyvermin v v v major featur releas major featur releas new concret default new concret introduc experiment featur v default new concret base clingohttpsgithubcompotasscoclingo logic program system enabl us much higher qualiti faster depend solv old concret still avail via concret origin set deprec remov v binari bootstrap make easier use new concret binari packag spack bootstrap clingo gnupg public binari abl bootstrap binari instal sourc code chang still abl clone spack start use almost immedi reus exist packag experiment want featur user surveyhttpsspackiospackusersurvey want spack featur time spack instal spack spec spack concret reus option caus spack minim number rebuild reus option tri find exist instal binari packag local regist mirror prefer use build new version allow user build sourc far less prior version spack featur continu improv configur option better cli expect v becom default concret mode v better error messag improv error messag gener new concret use unsatisfi core spack print summari type constraint violat make spec unsatisfi condit variant variant whenspec claus allow condit base version attribut packag git commit version environ commandlin provid full charact git commit version packag toplevel git url eg spack instal hdfbbfadaebbefcaada spack compar commit tag git repositori understand version ahead behind overrid local config cach directori set spack_disable_local_config disabl spack etcspack configur scope spack_user_cache_path allow move cach spack well address common problem user could isol ci environ local configur improv spack container ad reproduc pin spack version use spack container contain build build spack version pin build recip creation instead latest spack version new command deal tag spack tag command allow list tag packag list test filter tag spack test list new featur note copi reloc environ view standalon instal spack diff command diff two instal spec spack c config set oneoff config paramet cli spack load list alia spack find load spack gpg export privat key secret spack style automat bootstrap depend spack style fix automat invok isort build depend instal build cach includebuilddep spack audit command check packag constraint spack fetch cv repositori yep realli spack monitor let upload analysi instal spack monitor serverhttpsgithubcomspackspackmonitor spack python path show python spack use spack env activ temp creat temporari environ prefer latest option spack checksum cc pure posix run alpin spack_python environ variabl set python spack use spack_skip_modul let sourc setupenvsh faster dont need modul major intern refactor specyaml file specjson yield larg speed improv splice allow spack spec store mix build proven extens hook api instal new intern api get activ environ perform improv parallel separ concret environ previous min es solv take min drastic improv yamlfilesystemview file remov perform via batch speed spec comparison speed environ activ archspec improv support new gener x__v x__v x__v target see archspechttpsgithubcomarchspecarchspecjsonpul spack arch gener let get best gener architectur node ad support aocc arm compil graviton afx infrastructur buildcach servic add support gc bucket mirror add spackbot help packag maintain notif see spackgithubiospackbothttpsspackgithubiospackbot reproduc pipelin build spack ci rebuild remov redund concret gitlab pipelin gener spack ci longer gener job unbuilt spec everi pull request pipelin buildcach noadd instal specifi spec alreadi present add environmentawar spack buildcach sync command binari cach instal speedup improv deprec remov spack setup deprec v remov use spack develop spack devbuild remov unus depend flag spack load remov stub spack modul refreshfindrmload deprec notabl bugfix deactiv previou env activ new one mani fix error code spack instal config add infer type base json schema valid error spack config edit work even spackyaml broken packag allow nonempti version rang like remov mani version rang python use platformspecif site packag dir cachedcmakepackag use cmake initi config file lualang allow swap lua luajit better support ldgold ldlld build time store metadata prefixspack postinstal test reus smoke test packag use pypi attribut infer homepageurllist_url use gnuconfig packag configguess file replac patch make reappli patch idempot spack commun stat total packag new sinc v new python packag new r packag peopl contribut releas committ packag committ core lot gpu updat cudarel commit amdrel updat oneapirel commit commit amd toolchain support spack test usag packag increas packag test mostli gener python test packag test v clangllvm fix version detect fix use quot python build system cray fix extract path modul file use aw cloudfront sourc mirror ensur root instal environ mark explicit db fix fetch python lock open lockfil instead everi lock held remov eol cento docker imag v major perform improv spack load command spack fetch environmentawar numer fix new clingobas concret supoprt automat bootstrap clingo sourc python support collectionsabc fix import issu use __import__ instead spack packag import bugfix sourcedir argument spack locat better support extern share prefix spack buildenv prefer spec defin activ environ remov erron warn quot from_sourcing_fil fix clear cach internalconfigscop bugfix activ pkg alreadi activ error make singlefilescop abl repopul cach clear channelflow fix packag descript error messag bug packagepi use packagesuppli autogensh respect kverifysslfals _existing_url method v minor releas includ new featur associ fix inteloneapi support new packag releas also contain bug fixesenhanc hiprocm support concret environ instal report fix avoid import abi compat info restor abil devbuild skip patch spack find spec group spack smoke test support maco fix abstract spec comparison continu integr perform improv binari reloc addit saniti check variant builtin packag pollut autogener configur file empti list dict plu assort document packag bug fixesenhanc v v major featur releas major featur releas new concret experiment new backtrack concret spack experiment featur need instal clingomasterpython set concret clingo configyaml use origin concret exhaust guarante find solut one exist encourag use new concret report bug find anticip make new concret default includ requir depend spack v detail see spack test experiment user add test method packag run smoke test instal new spack test command old spack test spack unittest spack test environmentawar spack instal environ spack test run smoke test packag histor test log perus spack test result gener smoke test mpi implement c c fortran compil well specif smoke test packag mark experiment test api selfrun_test like chang encourag user upstream test maintain refactor ad mainlin packag spack develop new spack develop command allow develop sever packag within spack environ run spack develop foov spack develop barv check specif version foo bar subdirectori build increment spack instal parallel spack previous instal depend _single_ spec parallel entir environ instal parallel greatli acceler build larg environ get parallel individu spec spack parallel entir environ build customiz base imag spack container spack container previous output dockerfil base ubuntu may specifi base imag choos extern find spack extern find ad v cmake support spack extern find find bison cuda findutil flex git lustr mpich mvapich ncurs openmpi perl spectrummpi tar texinfo system add automat packagesyaml support aocc nvhpc oneapi compil aggress pursu support newest vendor compil especi us exascal preexascal system compil class autodetect aocc nvhpc oneapi spack addit new featur note new spack mark command use design packag explicitli instal spack gc garbagecollect install_tre custom spack project format sbang live install_tre user access csh tcsh user longer need set spack_root sourc setupenvcsh spec syntax support variant syntax find packag particular variant spack respect spack_gnupghom variabl custom gpg directori spack recogn graviton chip major refactor use spawn instead fork python maco use index public build cach sbang extern packag httpsgithubcomspacksbang archspec extern packag httpsgithubcomarchspecarchspec deprec remov spack bootstrap deprec v remov spack setup deprec v spack test call spack unittest spack test smoke test featur bugfix notabl bugfix releas includ better warn messag deprec syntax packagesyaml buildcach list allarch work properli mani fix test buildcach binari relcoat packag improv spack total packag ad sinc v rocm packag hip aomp ad amd other mani improv arm support llvmflang flang f remov llvm real flang support sinc flang merg llvm mainlin emerg support spack extern find spack test packag infrastructur major infrastructur improv pipelin gitlabspackio support test pr fork enabl fork enabl roll uptod binari build develop v releas contain one featur addit user set spack_gnupghom overrid spack gpg path sever bugfix cuda binari packag spack v cuda packag lib method search libcudart instead libcuda dont set cudahostcxx environ contain cuda buildcach creat nooverwriteexcept warn error fix spack buildcach list allarch spack v work releaseslatest tag shallow clone fix github action test ensur ci pass releas branch v releas contain follow bugfix fix handl rel view path fix binari reloc fix redund print error messag build environ also add support script spack tutori add tutori setup script sharespack v minor releas includ two new featur spack instal verbos decreas debug level ad spacksharespackkey directori contain public key may option trust public binari mirror releas also includ sever import fix mpicc relat variabl cleand build environ llvm flang build cuda offload compon cuda ci pipelin longer upload user environ contain secret internet ci pipelin add bootstrap compil compil config spack buildcach list exit first failur list later mirror appl gcc execut appleclang compil gener gcc compil config mix compil toolchain merg natur across differ compil suffix cray shasta platform detect os properli addit minor fix v minor releas includ sever import fix fix shell support cray fix use extern instal spack instanc fix gccbinutil build fix usag intelmpi fix autotool configguess detect updat spack instal messag prompt user environ explicitli activ releas also add mirror sourc fetch spack expect use offici websit spack packag unavail v v major featur releas major featur releas cray support spack work properli cray cluster system non xc system modul purg command cray system see virtual packag configur virtual packag allow packagesyaml configur allow user specifi virtual packag nonbuild without need specifi implement see new config subcommand releas add spack config add spack config remov command add remov yaml configur file cli see environ activ anonym environ longer automat activ current work directori activ environ spackyaml file current directori use spack env activ command remov concern user easili pollut anonym environ accident instal see appl clang compil clang compil appleclang compil separ compil spack allow spack improv support appleclang compil see find extern packag spack packag support api find extern instal allow spack extern find command automat add instal packag user configur see addit new featur note support use spack fish shell spack load first option load first match instead prompt user support cray cce compil new classic version spack devbuild command support stop specifi phase support automat launch shell build environ spack instal failfast allow build fail first error rather besteffort environ speclist refer dereferenc compil depend constraint spack view command new support copyreloc view type ci pipelin see document sever improv spack mirror command support exclud packag spack buildcach creat environmentawar modul gener flexibl format specifi name scheme lmod modul gener packag configur core spec lmod hierarchi deprec remov follow command deprec v remov spack configur spack build spack diy follow command deprec v remov next major releas spack bootstrap bugfix notabl bugfix releas includ spack environ contain string h spack instal grace handl background spack use isystem instead case underli build system well spack longer print spec safe copi spack command incomplet spack environ contain python longer caus problem sever improv binari packag reloc packag improv spack project constantli engag routin mainten bugfix improv packag ecosystem particular note releas follow spack contain packag newli support packag v gcc build properli arm architectur python patch support compil mix cc python modul distutil improv pytorch pytensorflow packag improv major mpi implement mvapich mpich openmpi other spack project manag much spack ci infrastructur move travi github action merg develop branch run es ci pipelin new spack debug report command make report bug easier v minor releas seri includ perform improv bug fix improv spack instal handl foregroundbackground major perform improv read packag db longer check old indexyaml databas file properli activ environ h name extern packag correct prefix environmentsview improv comput env modif sourc file bugfix cray machin get term env variabl avoid ad spuriou lmod env var intel modul dont output mock instal run test v bugfix releas top v specif fix includ sever bugfix parallel instal spack load work packag renam bugfix suitespars instal dedupl ident suffix ad modul name fix issu configure_arg modul refresh increas test coverag test fix remov unus code v v major featur releas highlight featur distribut build multipl spack instanc coordin properli lock work singl node youv call spack sever time across multipl node share filesystem exampl slurm could build trilino depend core node spack instanc per node build job per instanc srun n n spack instal j trilino requir filesystem lock enabl mpi librari parallel build pipelin also build parallel gitlab ci simpli creat spack environ push gitlab build gitlab runner pipelin support integr singl spack ci command set easier ever see pipelin sectionhttpsspackreadthedocsioenvpipelineshtml doc contain build new spack container command allow creat docker singular recip spack environ option custom build need see contain imag sectionhttpsspackreadthedocsioenlatestcontainershtml doc addit sever new command mani bugfix improv spack load longer requir modul use way laptop supercomput spack grew packag sinc last releas novemb project grew contributor thank make yet anoth great releas possibl detail note major new core featur distribut build spack instanc coordin build parallel new spack ci command manag ci pipelin gener contain recip environ spack container spack load work without use modul garbag collect oldunus instal spack gc configur file set environ modif way docshttpsspackreadthedocsioenvconfigurationhtmlenvironmentmodif spack command formatbash autogener complet packag specifi altern fetch url case one fail improv improv lock concurr environ spack test send arg pytest support better list better support aarch cascadelak microarch archspec separ librari see httpsgithubcomarchspecarchspec mani improv spack buildcach command select bugfix compil requir exact match version bugfix patch specifi specif version spack find p work environ depend queri work correctli spack find bugfix lock upstream spack instanc chain fix powerpc clang optim flag fix issu compil specif microarchitectur new command option spack ci spack container spack gc spack load accept packag depend spack command formatbash spack command updatecomplet spack instal withcach new option nochecksignatur spack test list listlong listnam spack instal helpcdash move cdash help main help deprec spack releasejob roll spack ci spack bootstrap remov futur version longer need set modul see spack load improv document new section build contain imag spack see docshttpsspackreadthedocsioenlatestcontainershtml new section use spack ci command build pipelin see docshttpsspackreadthedocsioenlatestpipelineshtml document add condit depend document use spack replac homebrewconda see docshttpsspackreadthedocsioenlatestworkflowshtmlusingspacktoreplacehomebrewconda import packag chang total packag ad sinc ad first cut tensorflow packag build r without recommend packag manag wspack elpa openbla leverag microarchitectur support fix octav compil wrapper usag enforc packag builtin arent miss depend v releas contain sever bugfix bugfix invok python variou environ brought tab complet date bugfix remov extens view order bugfix nondeterminist hash spec extern v releas contain major perform improv spack environ well bugfix mirror python issu rhel mirror bugfix symlink duplic patch except handl dont tri fetch bundlepackag avoid refetch patch alreadi ad mirror avoid refetch alreadi ad patch avoid refetch alreadi ad patch allow repeat invoc spack mirror creat dir bugfix rhel python unavail improv concret perform environ improv instal perform environ v releas contain major perform improv spack environ well bugfix minor chang allow miss modul blacklist speed environ activ mirror path work unknown version environ dont tri modifi runenv spec instal use semicolon instead newlin modulepython command verifypi ospathexist except handl document use maintain field bugfix config cach hwloc ad master version point head master branch config option allow gpg warn suppress fix rel symlink reloc binari packag allow binari reloc string rel binari v bugfix releas top v specif fix includ spack find display variant spec constraint bugfix uninstal find concret spec dag hash environ make shell modif partial uncondit binari distribut reloc text file properli rel binari bugfix fetch prefer fetch local mirror remot resourc environ write necessari bugfix spackutilurljoin handl absolut path correctli sbang use utf encod patch spec quot flag contain space pars correctli target print warn messag downgrad travi ci test python document databasequeri method share docstr cuda fix conflict statement x target cpu fix clang flag gener x_ syaml_int type use int__repr__ rather str__repr__ elpa prefer sseavxavx issu resolv trilino temporarili constrain netcdf v v biggest spack releas yet mani new major featur facil deploy improv environ microarchitectur support autogener build farm releas featur user spack grew packag past year project contributor thank make releas possibl major new core featur chain use depend extern upstream spack instanc environ behav like virtualenvconda env view directori packag symlink activ environ set path ld_library_path cpath cmake_prefix_path pkg_config_path etc point view spack detect build specif microarchitectur name understand target like skylak broadwel power zen spack know compil build architectur packag easili queri support featur like avx sse pick target eg spack instal foo targeticelak spack stack combinatori environ facil deploy environ build cartesian product spec matrix condit syntax support exclud certain build stack project abil build easili navig symlink tree environ support nosourc packag bundlepackag aggreg relat packag extens user write custom command live outsid spack repo support arm fujitsu compil cibuild farm support spack releasejob detect packagepi chang gener gitlabciyml creat binari environ stack parallel initi support chang futur releas result build pipelin upload cdash server spack uploadfetch packag mirror amazon new commandsopt spack mirror creat download packag sourcesresourcespatch spack devbuild run phase instal pipelin work directori spack deprec perman symlink old unwant packag new one spack verifi chceck packag file match origin instal spack find json print json easi pars eg jq spack find format format allow flexibl print packag metadata spack spec json print json version specyaml select improv autobuild request compil exist spack automat add rpath need make execut find compil runtim librari eg path newer libstdc icpc g setupenvsh compat bash dash zsh spack cap build job min ncore default spack compil find also throttl number spawn process spack write stage directori directli tmpdir instead symlink stage within spackvarspackcach improv power spec format string pass specyaml file anywher cli type spec mani improv binari cach gradual support new featur environ modul v spack edit respect visual environ variabl simplifi packag syntax specifi buildrun environ modif numer improv support environ across spack command concret improv document multilingu document start japanes translat tutori site spacktutorialreadthedocsio enabl us keep multipl version tutori around deprec spack longer support dotkit llnl homegrown deprec modul tool spack build spack configur spack diy deprec favor spack devbuild spack instal import packag chang total packag ad sinc spack default python previous prefer default much improv arm support thank fugaku riken snl team support new special version master trunk head addit develop better find logic librari header v minor bugfix releas minor fix tutori flake fix bugfix add r back regex string binari distribut fix gcc instal version tutori v major new featur spack environ spackyaml spacklock file track depend custom configur via command line better support link python packag view directori packag control compil flag via flag handler better support modul file gener better support intel compil intel mpi etc mani perform improv improv startup time licens releas spack permiss licens apach mit user option consent contributor obtain make relicens possibl previou version distribut lgpl licens version new packag packag ad sinc last year spack would possibl without commun thank contributorshttpsgithubcomspackspackgraphscontributor new featur packag releas v releas contain follow fix fix gfortran compil detect fix except thrown modul gener v releas contain bugfix compil flag handl issu v caus packag built without proper optim fix issu fftw instal spack get built without optimis includ pr fix flag handl behavior pr fix type issu set flag handler e upstream fix list_url variou r packag v spack v contain mani improv sinc v summari major featur broken categori new packag spack packag v mani python packag r packag exascal proxi app tri spack list proxyapp core featur user relocat binari packag spack buildcach spack fulli support python packag tag search tag custom modul file templat use jinja spack bootstrap command set basic modul environ simplifi better organ help output improv less redund spack instal output rework spack depend spack depend command major new featur packag multivalu variant new conflict direct new depend type test depend packag requir patch depend depends_on patchespatch list build interfac pass linker inform spec major packag use blaslapack use interfac flag handler allow packag control compil flag packag subclass support mani build system autotool perl qmake scon cmake makefil python r waf packagelevel support instal intel hpc product spack blame command show contributor packag spack creat guess mani build system better url pars guess packag version url much improv pythonpackag support core much faster concret improv output redirect redirect build output work properli numer improv intern structur api tutori document mani updat document new tutori materi schttpsspackreadthedocsioenlatesttutorialhtml configur build system build interfac work modul gener document docker workflow best practic select improv bug fix longer build python egg instal plain directori improv filter system path build path rpath git submodul properli handl fetch set default number parallel build job configyaml improv setupenvcsh better default compil discoveri mac os x clang automat mix gfortran improv compil detect cray machin better support ibm xl compil better tab complet resum grace prematur termin partial instal better mesa support spack would possibl without commun thank contributorshttpsgithubcomspackspackgraphscontributor new featur packag releas v spack v releas start push spack releas regularli last spack releas without autom packag test next releas begin run packag test addit unit test spack grown rapidli packageshttpsspackreadthedocsioenvpackage_listhtml thank hard work contributor condens version chang sinc v packag grew packag includ major updat like x qt expand hpc r python ecosystem core major speed improv spack find concret complet rework architectur support platform frontend backend ostarget combin much better support cray bgq crosscompil environ download cach local support instal deepli nest directori patch long shebang use sbang basic usag easier global configur via configyaml custom instal stage cach locat hierarch configur scope default site user platformspecif scope allow better perplatform default abil set cflag cxxflag fflag command line yamlconfigur support lmod tcl modul mainlin spack instal support dirti option emerg develop support multipl depend type build link run ad packag base class custom build system autotoolspackag cmakepackag pythonpackag etc spack creat guess mani build system develop environ integr spack setup new interfac pass link inform via spec object current use blaslapackscalapack librari polymorph virtual depend attribut specblasblas_lib test document unit test run continu travi ci mac linux switch nose pytest unit test unit test take minut instead massiv expand document doc host spackreadthedocsiohttpsspackreadthedocsio img srchttpscdnrawgitcomspackspackdevelopsharespacklogospacklogosvg width valignmiddl altspack spack unit testshttpsgithubcomspackspackworkflowslinuxtestsbadgesvghttpsgithubcomspackspackact bootstrappinghttpsgithubcomspackspackactionsworkflowsbootstrapymlbadgesvghttpsgithubcomspackspackactionsworkflowsbootstrapyml maco build nightlyhttpsgithubcomspackspackworkflowsmacosbuildsnightlybadgesvgbranchdevelophttpsgithubcomspackspackactionsqueryworkflowamacosbuildsnightli codecovhttpscodecovioghspackspackbranchdevelopgraphbadgesvghttpscodecovioghspackspack containershttpsgithubcomspackspackactionsworkflowsbuildcontainersymlbadgesvghttpsgithubcomspackspackactionsworkflowsbuildcontainersyml read docshttpsreadthedocsorgprojectsspackbadgeversionlatesthttpsspackreadthedocsio slackhttpsslackspackiobadgesvghttpsslackspackio spack multiplatform packag manag build instal multipl version configur softwar work linux maco mani supercomput spack nondestruct instal new version packag break exist instal mani configur packag coexist spack offer simpl spec syntax allow user specifi version configur option packag file written pure python spec allow packag author write singl script mani differ build packag spack build softwar way want see featur overviewhttpsspackreadthedocsioenlatestfeatureshtml exampl highlight instal spack first packag make sure python git clone c featuremanyfilestru httpsgithubcomspackspackgit cd spackbin spack instal zlib document full documentationhttpsspackreadthedocsio avail run spack help spack help cheat sheet spack syntax run spack help spec tutori maintain handson tutorialhttpsspackreadthedocsioenlatesttutorialhtml cover basic advanc usag packag develop featur larg hpc deploy exercis laptop use docker contain feel free use materi teach user organ spack commun spack open sourc project question discuss contribut welcom contribut anyth new packag bugfix document even new core featur resourc slack workspac spackpmslackcomhttpsspackpmslackcom get invit visit slackspackiohttpsslackspackio mail list groupsgooglecomdforumspackhttpsgroupsgooglecomdforumspack twitter spackpmhttpstwittercomspackpm sure mention us contribut contribut spack rel easi send us pull requesthttpshelpgithubcomarticlesusingpullrequest send request make develop destin branch spack repositoryhttpsgithubcomspackspack pr must pass spack unit test document test must pep httpswwwpythonorgdevpepspep compliant enforc guidelin ci process run test local help tip git see contribut guidehttpsspackreadthedocsioenlatestcontribution_guidehtml spack develop branch latest contribut pull request target develop user want latest packag version featur etc use develop releas multius site deploy use case need stabl softwar instal recommend use spack stabl releaseshttpsgithubcomspackspackreleas spack releas seri also correspond branch eg releasesv x version spack releasesv x version backport import bug fix branch advanc packag version make chang would chang way spack concret depend within releas branch base spack deploy releas branch git pull get fix without packag churn come develop latest releas alway avail releaseslatest tag see doc releaseshttpsspackreadthedocsioenlatestdeveloper_guidehtmlreleas detail code conduct pleas note spack code conductgithubcode_of_conductmd particip spack commun agre abid rule author mani thank go spack contributorshttpsgithubcomspackspackgraphscontributor spack creat todd gamblin tgamblinllnlgov cite spack referenc spack public pleas cite follow paper todd gamblin matthew p legendr michael r collett gregori l lee adam moodi broni r de supinski w scott futral spack packag manag bring order hpc softwar chaoshttpswwwcomputerorgcsdlproceedingsscpdf supercomput sc austin texa novemb llnlconf github copi citat apa bibtex format via cite repositori button see comment citationcff raw bibtex licens spack distribut term mit licens apach licens version user may choos either licens option new contribut must made mit apach licens see licensemithttpsgithubcomspackspackblobdeveloplicensemit licenseapachehttpsgithubcomspackspackblobdeveloplicenseapach copyrighthttpsgithubcomspackspackblobdevelopcopyright noticehttpsgithubcomspackspackblobdevelopnotic detail spdxlicenseidentifi apach mit llnlcode secur polici support version provid secur updat follow releas spack releas structur see readmemdhttpsgithubcomspackspackreleas version support develop white_check_mark x white_check_mark report vulner report vulner secur issu email maintainersspackio expect hear back within two day secur issu accept best releas fix within week fix issu take longer discuss timelin option test data unpars test packag test spack unpars use ensur canon unpars use spack packag hash remain consist across python version copi mainlin spack packag renam txt suffix theyr consid proper sourc file variou checker use spack ci packag chosen variou reason mainli theyr complex packag spack exercis unpars featur packag packag interest featur hard unpars consist across python version see docstr packag detail directori vendor pluggi modul detail discuss reason vendor packag pleas see issuehttpsgithubcompytestdevpytestissu updat current version execut pip instal u pluggyvers nocompil target_pytestvendored_packag commit modifi file pluggyversiondistinfo directori creat pip ad well httpsgithubcomarchspecarchspecworkflowsunittestsbadgesvghttpsgithubcomarchspecarchspecact codecovhttpscodecoviogharchspecarchspecbranchmastergraphbadgesvghttpscodecoviogharchspecarchspec document statushttpsreadthedocsorgprojectsarchspecbadgeversionlatesthttpsarchspecreadthedocsioenlatestbadgelatest archspec python bind archspec aim provid standard set humanunderstand label variou aspect system architectur like cpu network fabric etc api detect queri compar project grew spackhttpsspackio current activ develop present support api detect model compat relationship among differ cpu microarchitectur get start develop archspec python packag need poetryhttpspythonpoetryorg instal vc sourc prefer method instal via custom instal outsid virtual environ consol curl ssl httpsrawgithubusercontentcompythonpoetrypoetrymastergetpoetrypi python refer poetri documentationhttpspythonpoetryorgdocsinstal detail method instal tool youll also need tox run unit test consol pip instal user tox final youll need clone repositori consol git clone recurs httpsgithubcomarchspecarchspecgit run unit test environ readi run archspec unit test use tox root repositori consol tox py command succeed py command succeed py command succeed py command succeed py command succeed pylint command succeed flake command succeed black command succeed congratul cite archspec referenc archspec public pleas cite follow paper massimiliano culpo gregori becker carlo eduardo arango gutierrez kenneth host todd gamblin archspec librari detect label reason microarchitectureshttpstgamblingithubiopubsarchspeccanopiehpcpdf nd intern workshop contain new orchestr paradigm isol environ hpc canopiehpc onlin event novemb licens archspec distribut term mit licens apach licens version user may choos either licens option new contribut must made mit apach licens see licensemithttpsgithubcomarchspecarchspecblobmasterlicensemit licenseapachehttpsgithubcomarchspecarchspecblobmasterlicenseapach copyrighthttpsgithubcomarchspecarchspecblobmastercopyright noticehttpsgithubcomarchspecarchspecblobmasternotic detail spdxlicenseidentifi apach mit llnlcode httpsgithubcomarchspecarchspecjsonworkflowsjsonvalidationbadgesvghttpsgithubcomarchspecarchspecjsonact archspecjson archspecjsonhttpsgithubcomarchspecarchspecjson repositori part archspechttpsgithubcomarchspec project contain data variou architectur aspect platform store json format meant use base develop languag specif api current repositori contain follow json file consol copyright cpu microarchitecturesjson contain inform cpu microarchitectur microarchitectures_schemajson schema file licens archspec distribut term mit licens apach licens version user may choos either licens option new contribut must made mit apach licens see licensemithttpsgithubcomarchspecarchspecjsonblobmasterlicensemit licenseapachehttpsgithubcomarchspecarchspecjsonblobmasterlicenseapach copyrighthttpsgithubcomarchspecarchspecjsonblobmastercopyright noticehttpsgithubcomarchspecarchspecjsonblobmasternotic detail spdxlicenseidentifi apach mit llnlcode spack commun code conduct pledg interest foster open welcom environ contributor maintain pledg make particip project commun harassmentfre experi everyon regardless age bodi size disabl ethnic gender ident express level experi nation person appear race religion sexual ident orient standard exampl behavior contribut creat posit environ includ use welcom inclus languag respect differ viewpoint experi grace accept construct critic focus best commun show empathi toward commun member exampl unaccept behavior particip includ use sexual languag imageri unwelcom sexual attent advanc troll insultingderogatori comment person polit attack public privat harass publish other privat inform physic electron address without explicit permiss conduct could reason consid inappropri profession set respons project maintain respons clarifi standard accept behavior expect take appropri fair correct action respons instanc unaccept behavior project maintain right respons remov edit reject comment commit code wiki edit issu contribut align code conduct ban temporarili perman contributor behavior deem inappropri threaten offens harm scope code conduct appli within project space public space individu repres spack project commun exampl repres project commun includ use offici project email address post via offici social media account act appoint repres onlin offlin event represent project may defin clarifi spack maintain enforc instanc abus harass otherwis unaccept behavior may report contact project team maintainersspackio project team review investig complaint respond way deem appropri circumst project team oblig maintain confidenti regard report incid detail specif enforc polici may post separ project maintain follow enforc code conduct good faith may face temporari perman repercuss determin member project leadership attribut code conduct adapt contributor covenanthomepag version avail httpcontributorcovenantorgversionvers homepag httpcontributorcovenantorg version httpcontributorcovenantorgvers contribut spack contribut spack must made apach licens version apach mit licens mit contribut spack read contribut guidehttpsspackreadthedocsioenlatestcontribution_guidehtml maintain part spack document gpg key directori contain key trust instal spack import run spack gpg init may also import manual spack gpg trust pathtokey mock gpg directori directori contain key data use test spack legion spack packag note legion spack packag follow underli approach use legion cmakebas build infrastructur familiar use spack encourag start spack tutorialhttpsspacktutorialreadthedocsioenlatest background legion pleas visit project websitehttpslegionstanfordedu find inform get start tutori support document version strongli recommend major user start latest stabl branch legion guarante regularli test debug version code also strive quarterli tag releas throughout calendar year start march eg legionyymm mm start run calendar year version download captur via legion github pagehttpsgithubcomstanfordlegionlegion captur spack packag individu use via name convent detail releas captur changestxt file toplevel repositori spack usag detail note version legion spackag longer depend upon extern gasnet spackag instead support prefer gasnet develop legion intern gasnet configur build process tailor legion need present approach minim build configur issu occur past work instal spack follow variant use download configur build legion latest releas legion use featur c build use either gcc clang like compil full c support exampl spack instal legion clang build instal legion use version clang compil addit compil flag beyond automat enabl underli legion cmake configur may specifi use cppflag option spack spack instal legion clang cppflagswal find detail custom compil spack herehttpsspacktutorialreadthedocsioenlatesttutorial_basicshtmlcustomizingcompil number configur paramet variant legion specifi command line see complet list variant use follow command spack info legion default build instal legion suitabl laptopdesktop develop need addit variant need specifi build distribut memori system gpu support featur eg debug profil etc full list current support variant provid variant may use spack command line custom build legion would like instal booleanbas variant sigil use case specifi true valu either use fals set two valu fals provid avoid conflict shell command line paramet exampl spack instal legionstablecudahdfclang buildinstal stabl version legion without cuda hdf support use clang compil see exampl variou packag option overview legion spack variant section provid overview variant avail build instal legion underli realm runtim librari variant rang import configur paramet mani user involv lowlevel detail like leverag debug correct perform issu last set use case encourag user visit legion debugginghttpslegionstanfordedudebug profilinghttpslegionstanfordeduprofil page note variant default boolean valu may configur spack command line use sigil final build highest perform instal legion requir appropri configur instal gasnetex support mpi transport layer still test evalu achiev best possibl perform see follow section detail step need build highperform instal legion use spack debug intern runtim configur build_typ variant expos cmake build type set follow directli cmake avail valu variant debug relwithdebinfo releas defaultrelwithdebinfo bounds_check variant support valu enabl disabl bound check within runtim data accessor help debug potenti degrad perform therefor disabl default build defaultoff privilege_check variant enabl runtim check data privileg legion data accessor help debug applic defaultoff spi variant enabl applic produc detail log inform debug legion spyhttpslegionstanfordedudebugginglegionspi tool defaultoff max_dim variant provid integr valu maximum number dimens logic region support buildinstal default note current support valu rang max_field variant provid integr valu maximum number field may store within logic region default note intern requir valu poweroftwo non poweroftwo valu provid next largest poweroftwo use output_level variant enabl dynam debug level runtim one follow valu spew debug info print warn error fatal none defaultwarn papi variant enabl papi perform measur defaultoff redop_complex variant enabl support reduct complex type defaultoff note enabl bind set shared_lib build share librari legion realm defaultoff enable_tl variant support enabl threadlocalstorag legion runtim context defaultoff bind interoper bind variant support build languag bind legion addit requir c interfac current includ c python fortran defaultoff note use python fortran select subset bind python variant enabl python support term bind runtim support instanc python interpret must avail defaultoff fortran variant support enabl build fortran languag bind legion defaultoff tood detail kokko interop kokko enabl support interoper kokkoshttpsgithubcomkokko use legion task defaultoff tood detail openmp interop openmp variant enabl openmp support within legion task within realm runtim pleas note full openmp featur set eg openmp fulli support enabl featur defaultoff libdl enabl support dynam object load via libdl defaulton processor architectur support eg gpu cuda variant support enabl cuda support within legion defaultoff cuda_arch variant specif specif cuda architectur support within legion buildinstal current variant must one pascal architectur volta ture volta default cuda_hijack variant support determin build enabl perform enhanc hijack entri point cuda runtim api thu obvious impli cudathi perform enhanc necessari suggest product use case nvidiabas system defaultoff extern librari support hdf variant support enabl build hdf support within runtim defaultoff hwloc build use libhwloc support numaawar topolog support within realm legion lowlevel runtim layer defaultoff zlib variant enabl support zlib defaulton distribut memorynetwork transportinterconnect support network variant specifi network transport layer legionrealm use move data across distribut memori system option current gasnet mpi none test reliabl interfac distribut memori system gasnet via packag gasnet automat configur built want use preinstal version gasnet use gasnet_root variant disabl automaticintern instal gasnet strongli encourag use automat configur build mechan tailor legion use case would like read pleas visit web pagehttpsgasnetlblgov note mpi transport layer new still tune debug final want run singl system eg desktop laptop develop activ may drop paramet specifi networknon defaultnon conduit requir networkgasnet variant select gasnet conduit use must provid networkgasnet current choic ari ibv mpi ucx udp none default none ari ari cray xc seri see documentationhttpsgasnetlblgovdistexariesconduitreadm ibv openibopenfabr verb infiniband see documentationhttpsgasnetlblgovdistexibvconduitreadm mpi portabl conduit work network mpi newer see documentationhttpsgasnetlblgovdistexmpiconduitreadm ucx note experiment unifi commun x framework see documentationhttpsgasnetlblgovdistexucxconduitreadm udp portabl conduit work network tcpip stack see documentationhttpsgasnetlblgovdistexudpconduitreadm gasnet_root variant point packag preinstal version gasnet use build legion skip default behavior embed gasnet build within legion requir conduit set match use instal version gasnet note incorrectli set conduit could result failur caught spack packag failur occur build legion defaultusrloc exampl section highlight common configurationsinstal variou common instal legion laptopdesktop develop default configur build version legion without network support often help laptop desktop instal develop use legion first exampl straightforward enabl cpuonli configur legion spack instal legionst given mani use case laptopdesktop develop involv debug legion might want consid enabl legion spyhttpslegionstanfordedudebugginglegionspi bound privileg check option enabl debug level output diagnost spack instal legionst spi bounds_check privilege_check outputdebug note specifi spi packag also instal legion profil avail correspond bin directori creat spack instal mechan ad gpu support enabl support nvidia gpu legion add cuda variant exampl provid addit also use cuda_arch flag enabl specif gpu architectur exampl follow command line instal stabl version legion cuda support nvidia volta architectur spack instal legionst cuda cuda_arch want program task use kokko support gpu simpli add kokko option previou command line spack instal legionst cuda cuda_arch kokko enabl kokko interoper legion also build configur version kokko cuda volta gpu support networkingdistribut memori support order add modifi configur support distribut memori architectur need add network target exampl build version legion use gasnet data transport layer would specifi spack instal legionst cuda cuda_arch kokko networkgasnet without addit specif gasnet conduit command use udp conduit chang support infnibandbas cluster would add spack instal legionst cuda cuda_arch kokko networkgasnet conduitibv preexist instal gasnet point packag root directori instal also often know instal prefix exampl point packag version instal optloc ie includ file store optlocalinclud librari optlocallib would add gasnet_rootoptloc command line root recip note root signific number build option support packag recip time relev note support lack thereof variou option fix unsupport option miss depend follow configur option unsupport set due miss depend alien requir libgapiui alic gfal monalisa monitor monalisa depend libapmoncpp odbc tcmalloc xinetd discontinu option support sever option discontinu root without prior support recip afdsmgrd af bonjour castor chirp geocad glite globu hdf io krb ldap rfio rubi sapdb srp fix unsupport option arrowoff asimageon astiffon builtin_afterimageon full control asimag astiff would requir packag recip libafterimag afterstep absenc use provid intern built version libafterimag ccacheoff use repeat build clingoff use cling assum cxxmodul option confus runtime_cxxmodul cxxmodul optim affect effici build root exceptionson support c except assum explicitlinkon use explicit link make share librari assum failonmissingon failur miss depend assum _vs_ automat set builtin_xxx gnuinstalloff gnucompli instal layout libcxx option control use libc standard c librari via compil option set automat root configur maco clang compil configur due complex relat compil option way compil might configur configur support disabl least spack support standard librari virtual depend pchon use precompil header build assum roottestoff roottest requir access network runtime_cxxmodulesoff option tell root gener use pcm librari function experiment root current support recip sharedon use share librari assum soversionon use version share librari assum test build root test suit avail use ctest peg spack determin whether test requir current instal procedur variant version depend support option configur option version dependentunavail specif version current account option recip far exhaust survey variou option version support would use howev account somewhat clumsi absent claus variant similar conflict variant sinc memstat qt repres obsolet qt qtgsi root build option tabl temporarili conflict variant perman remov variant follow variant remov recip alway ineffect avahi kerbero ldap libcxx odbc tiff addit test variant remov action irrelev instal sourceth correspond test root option enabl selfrun_test set develop note intel packag note concept develop libspackspackbuild_systemsintelpi document use intelpackag see libspackdocsbuild_systemsintelpackagerst instal path handl implement intelpi prefix differ spackextern spackintern instal problem summari intel packag instal extern spack selfprefix componentspecif path eg mklspecif dir hierarchi wherea packag instal spack selfprefix vendorlevel path hold one compon part thereof must qualifi particular desir compon possibl similar conceptu differ inher packag famili use common vendorstyl instal descript spack make packag avail two rout let call b packag preinstal extern spack configur spack b packag built instal spack user interest build endus applic matter rout depend packag instal packag nativ support prefix concept unifi two rout fine intel packag howev complic consist number compon releas suit vari extent like intel parallel studio foo edit subset product like mkl mpi also contain librari compon like compil runtim multithread librari reason intel packag anchor instal directori level higher userfac directori convent hierarchi bin lib other relev endproduct result intern spack conceptu differ selfprefix repres two rout rout consid mkl instal outsid spack like one product compon among product one particular releas among other instal sibl cousin directori local system therefor path given spack packagesyaml productspecif fulli versionspecif directori eg intelmkl packag selfprefix look like optintelcompilers_and_libraries_linuxmkl rout interact point user encapsul environ variabl pseudocod mklroot selfprefix rout b spackbas instal mkl place directori given installsh script intel packag distribut directori taken vendorspecif anchor directori play role default optintel case selfprefix spack_rootoptspacklinuxcentosx_gccintelmklhash howev environ variabl construct sever directori level mklroot selfprefixcompilers_and_libraries_linuxmkl recent post spack mail list illustr confus rout taken rout b one code spack httpsgroupsgooglecomdmsgspackxqlmqpaysewxuagaj solut introduc seri function return appropri directori regardless whether intel packag instal extern intern spack function exampl return valu normalize_suite_dir spackextern instal optintelcompilers_and_libraries_ spackintern instal spack_roothashcompilers_and_libraries_ normalize_pathmkl suite_dirlinuxmkl component_bin_dir suite_dirlinuxmklbin component_lib_dir suite_dirlinuxmkllibintel normalize_pathmpi suite_dirlinuxmpi component_bin_dirmpi suite_dirlinuxmpiintelbin component_lib_dirmpi suite_dirlinuxmpiintellib analysi directori layout let look sampl directori layout use ls lf focus name symlink spackborn instal intelmkl ls l prefix bin compilervarssh symlink compilers_and_librari compilers_and_libraries_ genericallynam entri point stabl across version one hope compilers_and_libraries_ vaguelyvers dirnam hold stub hierarchi ignor ls l compilers_and_libraries_linux bin actual compilervarssh reg file document documentation_ lib compilers_and_libraries_linuxcompilerlib mkl compilers_and_libraries_linuxmkl pkg_bin compilers_and_libraries_linuxbin sampl samples_ tbb compilers_and_libraries_linuxtbb compilers_and_libraries_ main product minim set lib relat product ls l compilers_and_libraries_linux bin compilervarssh link_installsh mkl main product assign mklroot compil libintel_linlibiomp tbb tbblibintel_lingcclibtbbso parallel_studio_xe_ parallel_studio_xe_ parallel_studio_xe_ altern product packag ignor ls l parallel_studio_xe_ bin actual psxevarssh reg file compilers_and_libraries_ full_pathcomparies_ documentation_ full_path_prefixdocumentation_ samples_ full_path_prefixsamples_ documentation_ samples_ lib compilers_and_librarieslinuxlib mkl compilers_and_librarieslinuxmkl tbb compilers_and_librarieslinuxtbb auxiliari conveni link spackextern instal intelmpi mpi layout slightli differ mkl prefix includ architectur directori typic intel contain bin lib without architectur branch environ variabl i_mpi_root api document howev must packag top directori includ architectur fixm manpath need parent dir ls lf optintelcompilers_and_libraries_linuxmpi bin intelbin etc inteletc includ intelinclud lib intellib benchmark bind intel man test packag contain mpi preview curious releas note contain tag file structur cleanup could find document howev unclear chang make releas httpssoftwareintelcomenusarticlesrestoringlegacypathstructureonintelmpilibrari ls lf optintelcompilers_and_libraries_linuxmpi_ bind doc imb intel man test spackextern instal intel parallel studio main product bundl actual download instal system nomin instal directori mostli hold mere symlink compon instal sibl dir ls lf optintelparallel_studio_xe_ advisor_ optinteladvisor_ clck_ optintelclck compilers_and_libraries_ optintelcomparies_ documentation_ optinteldocumentation_ ide_support_ optintelide_support_ inspector_ optintelinspector_ itac_ optintelitac man optintelman samples_ optintelsamples_ vtune_amplifier_ optintelvtune_amplifier_ psxevarscsh binpsxevarscsh psxevarssh binpsxevarssh bin varssh script sshconnectivityexp licens uninstal relev regular file varssh also churn subordin var file compon instal model intel packag come installsh script normal run interact either text gui mode run unattend silent file option cours spack use format configur file configur file convent call silentcfg simpl tokenvalu syntax use configur file instal call staging_dirpsetcheckawk valid exampl path valid l_mkl_psetcheckawk parallel_studio_xe__update_cluster_editionpsetcheckawk token accept configur file vari packag token support given packag caus instal stop fail particularli relev licenserel token accept packag actual requir licens refer intel documentationhttpssoftwareintelcomenusarticlesconfigurationfileformat see also httpssoftwareintelcomenusarticlessilentinstallationguideforintelparallelstudioxecomposereditionforosx follow parallel_studio_xe__update_cluster_editionpsetcheckawk token valid packag encount accept_eula accept declin continue_with_optional_error ye pset_install_dir optintel filepat continue_with_installdir_overwrit ye compon default anythingpat pset_mod instal repair uninstal nonrpm_db_dir filepat signing_en ye arch_select ia intel mention unexplain checkawk no_valid licens packag activation_serial_numb snpat activation_license_fil lspat filepat activation_typ exist_l license_serv license_fil trial_lic phonehome_send_usage_data ye serial_numb amplifi obvious amplifier_sampling_driver_install_typ build kit amplifier_driver_access_group anythingpat vtune amplifier_driver_permiss anythingpat amplifier_load_driv ye amplifier_c_compil filepat auto none amplifier_kernel_src_dir filepat auto none amplifier_make_command filepat auto none amplifier_install_boot_script ye amplifier_driver_per_user_mod ye mkl studio cluster_install_remot ye cluster_install_temp filepat cluster_install_machines_fil filepat backward compat install_mod rpm nonrpm download_onli ye download_dir filepat detail licens token quot httpssoftwareintelcomenusarticlesconfigurationfileformat refer ed note page incorrectli refer activ use correct activation_typ activation_typeexist_l direct tell instal program look exist licens instal process prefer method silent instal take time regist serial number get licens file see licens file system simplifi process addit administr good practic know licens save system licens file plain text file lic extens default save optintellicens search default save licens elsewher perhap nf folder set environ variabl intel_license_fil full path licens file prior start instal use configur file direct activation_license_fil specifi full pathnam licens file option activation_typ exist_l license_fil server_l serial_numb trial_lic exist_l direct instal search valid licens server search util environ variabl intel_license_fil search default licens directori optintellicens use activation_license_fil direct find valid licens file license_fil similar exist_l direct instal use activation_license_fil find licens file server_l similar exist_l exist_l direct instal client instal float licens server contact activ product option contact float licens server network retriev licens inform use option make sure client correctli set network includ network rout name servic firewal configur insur client direct access float licens server firewal set allow tcpip access licens server port server_l use intel_license_fil contain porthost format client licens file format describ httpssoftwareintelcomenusarticleslicensingsettinguptheclientfloatinglicens serial_numb direct instal use direct activation_serial_numb activ method requir instal contact extern intel activ server internet confirm serial number due user compani firewal method complex henc error prone avail activ method highli recommend use licens file licens server activ instead trial_lic use exist licens intend temporarili evalu compil method creat temporari trial licens trust storag system var file intel product packag contain number shell initi file let call var file three kind componentspecif var file mklvar tbbvar toplevel var file psxevar scan componentspecif var file associ product sourc found symbol link either link may appear differ name backward compat present intelpackag class concern toplevel var file gener found product toplevel bin directori refer overview name locat var file product releas seen spackn instal nb may incomplet compon may omit instal name var file seen cd optspacklinuxcentosx_ find intel name varssh printf fn sort u nl advixevarssh amplxevarssh apsvarssh compilervarssh daalvarssh debuggervarssh iccvarssh ifortvarssh inspxevarssh ippvarssh mklvarssh mpivarssh pstlvarssh psxevarssh sep_varssh tbbvarssh name locat var file sort spack packag name cd optspacklinuxcentosx_ find intel name varssh printf ytfthn cut f sed iccvarsifortvarsd stt ssh intel sort k k nl awk printf sn item file link name var file spack packag name dir rel spack instal dir f mpivar intel compilers_and_libraries_linuxmpiintelbin f mpivar intel compilers_and_libraries_linuxmpirtbinia_lin f tbbvar intel compilers_and_libraries_linuxtbbbin f pstlvar intel compilers_and_libraries_linuxpstlbin f compilervar intel compilers_and_libraries_linuxbin f compilervar intel compilers_and_libraries_linuxbin l compilervar intel bin f daalvar intelda compilers_and_libraries_linuxdaalbin f psxevar intelda parallel_studio_xe_bin l psxevar intelda parallel_studio_xe_ f compilervar intelda compilers_and_libraries_linuxbin f compilervar intelda compilers_and_libraries_linuxbin l compilervar intelda bin f ippvar intelipp compilers_and_libraries_linuxippbin f psxevar intelipp parallel_studio_xe_bin l psxevar intelipp parallel_studio_xe_ f compilervar intelipp compilers_and_libraries_linuxbin f compilervar intelipp compilers_and_libraries_linuxbin l compilervar intelipp bin f mklvar intelmkl compilers_and_libraries_linuxmklbin f psxevar intelmkl parallel_studio_xe_bin l psxevar intelmkl parallel_studio_xe_ f compilervar intelmkl compilers_and_libraries_linuxbin f compilervar intelmkl compilers_and_libraries_linuxbin l compilervar intelmkl bin f mpivar intelmpi compilers_and_libraries_linuxmpi_intelbin f mpivar intelmpi compilers_and_libraries_linuxmpiintelbin f psxevar intelmpi parallel_studio_xe_bin l psxevar intelmpi parallel_studio_xe_ f compilervar intelmpi compilers_and_libraries_linuxbin f compilervar intelmpi compilers_and_libraries_linuxbin l compilervar intelmpi bin f apsvar intelparallelstudio vtune_amplifier_ l apsvar intelparallelstudio performance_snapshots_ f ippvar intelparallelstudio compilers_and_libraries_linuxippbin f ippvar intelparallelstudio composer_xe_ippbin f mklvar intelparallelstudio compilers_and_libraries_linuxmklbin f mklvar intelparallelstudio composer_xe_mklbin f mpivar intelparallelstudio compilers_and_libraries_linuxmpiintelbin f mpivar intelparallelstudio compilers_and_libraries_linuxmpirtbinia_lin f tbbvar intelparallelstudio compilers_and_libraries_linuxtbbbin f tbbvar intelparallelstudio composer_xe_tbbbin f daalvar intelparallelstudio compilers_and_libraries_linuxdaalbin f pstlvar intelparallelstudio compilers_and_libraries_linuxpstlbin f psxevar intelparallelstudio parallel_studio_xe_bin l psxevar intelparallelstudio parallel_studio_xe_ f sep_var intelparallelstudio vtune_amplifier_ f sep_var intelparallelstudio vtune_amplifier_targetandroid_v_x_ f advixevar intelparallelstudio advisor_ f amplxevar intelparallelstudio vtune_amplifier_ f inspxevar intelparallelstudio inspector_ f compilervar intelparallelstudio compilers_and_libraries_linuxbin f compilervar intelparallelstudio compilers_and_libraries_linuxbin l compilervar intelparallelstudio bin f debuggervar intelparallelstudio debugger_bin mpi linkag librari select spack code far librari select mpi libnam libmpifort libmpi cxx selfspeclast_queryextra_paramet libnam libmpicxx libnam return find_librarieslibnam rootselfcomponent_lib_dirmpi sharedtru recursivefals problem multipl librari version component_lib_dir cd i_mpi_root find name libmpiso sort intellibdebuglibmpiso intellibdebug_mtlibmpiso intelliblibmpiso intellibreleaselibmpiso intellibrelease_mtlibmpiso mt refer multithread explicit sens sens threadsaf mpiifort help grep mt mt_mpi link thread safe version intelr mpi librari well inspect canon script wrapper hardcod prefix thu tell us wipe environ less env intelbinmpiicc show helloc ldunwraparg icc helloc ioptintelcompilers_and_libraries_linuxmpiintelinclud loptintelcompilers_and_libraries_linuxmpiintellibrelease_mt loptintelcompilers_and_libraries_linuxmpiintellib xlinker enablenewdtag xlinker rpathoptintelcompilers_and_libraries_linuxmpiintellibrelease_mt xlinker rpathoptintelcompilers_and_libraries_linuxmpiintellib xlinker rpathoptintelmpirtintellibrelease_mt xlinker rpathoptintelmpirtintellib lmpifort lmpi lmpigi ldl lrt lpthread mpi wrapper option refer here wrapper builtin help output mpiifort help simpl script compil andor link mpi program usag mpiifort option file follow option support fcname fname specifi fortran compil name ie fcifort echo print script execut show show command line without real call confignam specifi configur file ie configifort mpififortconf file v print version info mpiifort nativ compil profilenam specifi profil configur file mpi profil librari ie profilemyprofil myprofilecfg file special case libnameso libnamea may use librari found check_mpi link intelr trace collector profilevtmc static_mpi link intelr mpi librari static mt_mpi link thread safe version intelr mpi librari ilp link ilp support intelr mpi librari no_ilp disabl ilp support explicitli fast static_mpi pass fast option compil trace link intelr trace collector traceimbal link intelr trace collector imbal librari profilevtim dynamic_log link intelr trace collector dynam static use static linkag method nostrip turn debug inform strip static link enabl optim link_mpinam link specifi version intelr mpi librari option pass compil without chang follow environ variabl use i_mpi_root intelr mpi librari instal directori path i_mpi_f mpich_f pathnam underli compil use i_mpi_fc_profil i_mpi_f_profil mpif_profil name profil file without extens i_mpi_compiler_config_dir folder contain configur file conf i_mpi_trace_profil specifi default profil trace option i_mpi_check_profil specifi default profil check_mpi option i_mpi_check_compil enabl compil setup check i_mpi_link specifi version intelr mpi librari i_mpi_debug_info_strip turn onoff debug inform strip static link i_mpi_fcflag special flag need compil i_mpi_ldflag special flag need link side note mpi version diverg releas packag intelparallelstudioclust contain full mpi develop version prefiximpi mpi runtim composer_x suit directori curious differ version releas date nearli year apart spack_rootuaxawimpiintelbinmpiexec version intelr mpi librari linux os version updat build build id copyright c intel corpor right reserv spack_rootuaxawcomposer_xe_mpirtbinintelmpiexec version intelr mpi librari linux os version updat build copyright c intel corpor right reserv im sure make maco support maco spack method includ support integr extern instal mkl url child packag linuxspecif maco download packag locat differ number dir name m_dmg plugin registr hook call python plugin manag use pytest strip pytest specif detail x seri plugin much document except extens docstr pluggypi modul markupsaf markupsaf implement text object escap charact safe use html xml charact special mean replac display actual charact mitig inject attack mean untrust user input safe display page instal instal updat use pip_ codeblock text pip instal u markupsaf _pip httpspippypaioenstablequickstart exampl codeblock pycon markupsaf import markup escap escap replac special charact wrap markup escapescriptalertdocumentcookiescript markupultscriptgtalertdocumentcookieltscriptgt wrap markup mark text safe prevent escap markupstronghellostrong markupstronghellostrong escapemarkupstronghellostrong markupstronghellostrong markup text subclass str python unicod python method oper escap argument templat markuphello emsem templat world markuphello emworldem donat pallet organ develop support markupsaf librari use order grow commun contributor user allow maintain devot time project pleas donat today_ _pleas donat today httpspalletsprojectscomdon link websit httpspalletsprojectscompmarkupsaf document httpsmarkupsafepalletsprojectscom licens bsdclaus httpsgithubcompalletsmarkupsafeblobmasterlicenserst_ releas httpspypiorgprojectmarkupsaf code httpsgithubcompalletsmarkupsaf issu tracker httpsgithubcompalletsmarkupsafeissu test statu linux mac httpstravisciorgpalletsmarkupsaf window httpsciappveyorcomprojectpalletsmarkupsaf test coverag httpscodecovioghpalletsmarkupsaf ruamelyaml ruamelyaml yaml loaderdump packag python overview httpyamlreadthedocsorgenlatestoverviewhtml_ instal httpyamlreadthedocsorgenlatestinstallhtml_ detail httpyamlreadthedocsorgenlatestdetailhtml_ exampl httpyamlreadthedocsorgenlatestexamplehtml_ differ pyyaml httpyamlreadthedocsorgenlatestpyyamlhtml_ imag httpsreadthedocsorgprojectsyamlbadgeversionst target httpsyamlreadthedocsorgenst changelog xxxx chang prevent futurewarn numpi report tgehr comparison none result elementwis object comparison futur fix preserve_quot miss origin loader report leyno bitbucket issu document autom linux wheel ad support roundtrip singledoubl quot scalar use ruamelyamlround_trip_loadstream preserve_quotestru roundtripload load default sexagesim octal yesnoonoff boolean copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _packagelist packag list list thing instal use spack automat gener base packag spack version raw html file package_listhtml copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _buildset build custom spack allow custom softwar built packagesyaml file use make spack prefer particular implement virtual depend eg mpi blaslapack make prefer build particular compil also tell spack use extern softwar instal alreadi present system high level packagesyaml file structur like codeblock yaml packag packag set packag packag set packag set appli packag either set build prefer specif one packag specifi certain set appli packag type set custom describ detail spack build default default etcspackdefaultspackagesyaml file overrid spackpackagesyaml etcspackpackagesyaml detail work see refconfigurationscop _secexternalpackag extern packag spack configur use externallyinstal packag rather build packag may desir machin ship system packag custom mpi use instead spack build mpi extern packag configur packagesyaml file found spack instal etcspack user spack directori here exampl extern configur codeblock yaml packag openmpi extern spec openmpigcc archlinuxdebianx_ prefix optopenmpi spec openmpigcc archlinuxdebianx_debug prefix optopenmpidebug spec openmpiintel archlinuxdebianx_ prefix optopenmpiintel exampl list three instal openmpi one built gcc one built gcc debug inform anoth built intel spack ask build packag use one mpi depend use preinstal openmpi given directori note specifi path toplevel instal prefix bin subdirectori packagesyaml also use specifi modul load instead instal prefix follow exampl say modul cmake provid cmake version codeblock yaml cmake extern spec cmake modul cmake packagesyaml begin packag attribut follow list packag name specifi extern add extern attribut packag name list extern extern specifi spec string welldefin reason possibl packag lack spec compon miss compil packag version spack guess miss compon base mostfavor packag may guess incorrectli packag version compil list extern entri spack packag compil configur even though packag compil may ever built packag configur tell spack use extern locat certain packag version restrict spack use extern packag exampl sinc newer version openmpi avail spack choos start build link latest version rather continu use preinstal openmpi version prevent packagesyaml configur also allow packag flag nonbuild previou exampl could modifi codeblock yaml packag openmpi extern spec openmpigcc archlinuxdebianx_ prefix optopenmpi spec openmpigcc archlinuxdebianx_debug prefix optopenmpidebug spec openmpiintel archlinuxdebianx_ prefix optopenmpiintel buildabl fals addit buildabl flag tell spack never build version openmpi instead alway reli prebuilt openmpi similar path buildabl specifi properti packag name extern modul specifi buildabl spack load extern modul build environ use link buildabl need pair extern packag could also use alon forbid packag may buggi otherwis undesir virtual packag spack also specifi buildabl extern implement provid exampl openmpi configur buildabl spack often prefer mpi implement extern avail openmpi spack configur everi mpi provid buildabl individu conveni codeblock yaml packag mpi buildabl fals openmpi extern spec openmpigcc archlinuxdebianx_ prefix optopenmpi spec openmpigcc archlinuxdebianx_debug prefix optopenmpidebug spec openmpiintel archlinuxdebianx_ prefix optopenmpiintel implement also list immedi virtual provid codeblock yaml packag mpi buildabl fals openmpigcc archlinuxdebianx_ optopenmpi openmpigcc archlinuxdebianx_debug optopenmpidebug openmpiintel archlinuxdebianx_ optopenmpiintel mpich clang archlinuxdebianx_ optmpichintel spack use list extern implement mpi satisfi depend choos depend compil architectur _cmdspackexternalfind automat find extern packag run refspack extern find spackexternalfind command search systemprovid packag add packagesyaml run command packagesyaml may includ new entri codeblock yaml packag cmake extern spec cmake prefix usr gener use detect small set commonlyus packag gener limit find buildonli depend specif limit includ packag discover default packag discover spack extern find need add special logic see refher makepackagefind detail current implement collect examin execut file typic use buildrun depend case librari packag also provid execut may possibl extract meaning spec run execut exampl compil wrapper mpi implement logic search modul file detect packag execut defin path help spack locat extern use modul file load associ modul packag want spack know run spack extern find spack overwrit exist entri packag configur extern defin spec configur scope spack add new extern entri spack config blame packag help locat extern entri _concretizationprefer concret prefer spack configur prefer certain compil packag version depend variant concret prefer configur control via spackpackagesyaml file user configur etcspackpackagesyaml site configur here exampl packagesyaml file set prefer packag codeblock yaml packag opencv compil gcc variant debug gperftool version compil gcc gcc intel clang pgi target sandybridg provid mpi mvapich mpich openmpi high level exampl specifi packag concret opencv packag prefer use gcc built debug option gperftool packag prefer version everi packag system prefer mvapich mpi gcc except opencv overrid prefer gcc option use fill implicit default overwritten command line explicitli request packagesyaml file begin string packag packag name specifi next level special string appli set packag underneath packag name one compon compil variant version provid target compon order list spec constraint earlier entri list prefer later entri sometim packag instal may constraint forbid first concret rule case spack use first legal concret rule go back exampl user request gperftool later spack instal version version gperftool prefer explicit concret rule prefer section alway take prefer unlist concret exampl xlc isnt list compil list everi list compil gcc pgi thu prefer xlc compil syntax provid section differ slightli concret rule provid list valu packag may depend_on eg mpi list rule fulfil depend _package_permiss packag permiss spack configur assign permiss file instal packag packagesyaml file permiss attribut read write group control packag permiss attribut set perpackag packag permiss set specif packag packagespecif set take preced read write attribut take one user group world codeblock yaml packag permiss write group group spack my_app permiss read group group my_team permiss set describ broadest level access instal specifi packag execut permiss file set level read permiss file execut default set read world write user exampl instal my_app instal user group permiss world permiss own group my_team packag instal user group write privileg world read privileg packag own group spack group attribut assign unixstyl group packag file instal packag own assign group sticki group bit set instal prefix directori insid instal prefix ensur even manual place file within instal prefix own assign group group assign spack allow os default behavior go expect copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _repositori packag repositori spack come thousand builtin packag recip varspackreposbuiltin packag repositori directori spack search need find packag name may need maintain packag restrict proprietari experiment softwar separ builtin repositori spack allow configur local repositori use either reposyaml spack repo command packag repositori directori structur like repo repoyaml packag hdf packagepi mpich packagepi mpichbugfixpatch trilino packagepi toplevel repoyaml file contain configur metadata repositori packag directori contain subdirectori packag repositori packag directori contain packagepi file patch file need build packag packag repositori allow maintain packag separ spack share packag eg host share file system without commit builtin spack packag repositori overrid builtin spack packag implement packag separ repositori also depend builtin spack packag leverag exist recip without reimplement repositori reposyaml spack use reposyaml file spack refelsewher configur find repositori note reposyaml configur file distinct repoyaml file repositori yaml format configur file preced work spack see refconfigur configur default etcspackdefaultsreposyaml file look like codeblock yaml repo spackvarspackreposbuiltin file start repo contain singl order list path repositori path separ line start add repositori insert anoth path list codeblock yaml repo optlocalrepo spackvarspackreposbuiltin spack interpret spec eg mpich spack instal mpich search repositori order first last resolv packag name exampl spack look follow packag use first valid file optlocalrepopackagesmpichpackagepi spackvarspackreposbuiltinpackagesmpichpackagepi note current spack use repositori file system plan eventu support url reposyaml easili point remot packag repositori yet implement namespac everi repositori spack associ namespac defin toplevel repoyaml file look varspackreposbuiltinrepoyaml builtin repositori youll see namespac builtin codeblock consol cat varspackreposbuiltinrepoyaml repo namespac builtin spack record repositori namespac instal packag exampl instal mpich packag builtin repo spack record fulli qualifi name builtinmpich accomplish two thing packag name differ namespac instal easili determin repositori packag came instal refbelow namespaceexampl note may seem redund repositori namespac path repositori path may chang time mention local host repositori path may eventu host remot url namespac design allow packag author associ uniqu identifi packag packag identifi even repositori move namespac determin repoyaml file repositori rather local reposyaml configur repositori maintain set name uniqu choos namespac uniqu identifi packag repositori exampl make repositori packag written organ could use organ name also nest namespac use period could identifi repositori suborgan exampl llnl might use namespac intern repositori like llnl packag physic life scienc director pl might use llnlpl namespac packag creat comput director might use llnlcomp spack ensur everi repositori name uniqu prevent regist two repositori namespac time tri add repositori name exist one eg builtin spack print warn messag _namespaceexampl namespac exampl suppos llnl maintain version mpich separ spack builtin mpich packag suppos youv instal llnl spack mpich packag use spack find wont see differ two packag codeblock consol spack find instal packag linuxrhelx_ gcc mpich mpich howev use spack find n spack display packag namespac codeblock consol spack find n instal packag linuxrhelx_ gcc builtinmpich llnlcompmpich know one llnl special version one builtin spack packag might guess packag ident except namespac still differ hash codeblock consol spack find ln instal packag linuxrhelx_ gcc cpgc builtinmpich itoqmox llnlcompmpich spack command take packag refspec secspec also accept fulli qualifi spec namespac mean use namespac specif design eg packag want uninstal codeblock consol spack uninstal llnlcompmpich overrid builtin packag spack search semant mean make implement builtin spack packag like mpich put repositori use overrid builtin packag long repositori contain mpich earlier reposyaml builtin packag depend mpich use one repositori suppos three repositori builtin spack repo builtin share repo institut eg llnl repo contain prototyp packag proto suppos contain packag follow namespac path repo packag proto proto mpich llnl usrlocalllnl hdf builtin spackvarspackreposbuiltin mpich hdf other suppos hdf depend mpich overrid builtin hdf ad llnl repo reposyaml codeblock yaml repo usrlocalllnl spackvarspackreposbuiltin spack instal hdf instal llnlhdf builtinmpich instead reposyaml look like codeblock yaml repo proto usrlocalllnl spackvarspackreposbuiltin spack instal hdf instal llnlhdf protompich unqualifi packag name resolv search reposyaml first entri last forc particular repositori packag use fulli qualifi name exampl reposyaml want builtinmpich instead protompich write spack instal hdf builtinmpich instal llnlhdf builtinmpich similarli forc builtinhdf like spack instal builtinhdf builtinmpich search reposyaml builtin repo specifi case instal builtinhdf builtinmpich want see repositori use build instal use spack spec n codeblock consol spack spec n hdf input spec hdf normal hdf zlib concret builtinhdfpatchappleclangcxxdebugfortranmpisharedszipthreadsaf archdarwinelcapitanx_ builtinopenmpiappleclangmxmpmipsmpsmslurmsqlitethread_multipletmverbsvt archdarwinelcapitanx_ builtinhwlocappleclang archdarwinelcapitanx_ builtinlibpciaccessappleclang archdarwinelcapitanx_ builtinlibtoolappleclang archdarwinelcapitanx_ builtinmappleclangsigsegv archdarwinelcapitanx_ builtinlibsigsegvappleclang archdarwinelcapitanx_ builtinpkgconfigappleclanginternal_glib archdarwinelcapitanx_ builtinutilmacrosappleclang archdarwinelcapitanx_ builtinzlibappleclangp archdarwinelcapitanx_ warn use fulli qualifi packag name depends_on direct packagepi file like depends_onprotohdf recommend make difficult multipl repo compos share packagepi like fail proto repositori regist reposyaml _cmdspackrepo spack repo spack refconfigur system configur allow repositori set come reposyaml file mani locat want see repositori regist result configur file use spack repo list spack repo list codeblock consol spack repo list packag repositori myrepo myrepo builtin spackvarspackreposbuiltin repositori list associ namespac get raw merg yaml configur file use spack config get repo codeblock consol spack config get repo repossrepo myrepo spackvarspackreposbuiltin note unlik spack repo list includ namespac read repo repoyaml spack repo creat make repositori dont need construct directori use spack repo creat command codeblock consol spack repo creat myrepo creat repo namespac myrepo regist spack run command spack repo add myrepo ls myrepo packag repoyaml cat myreporepoyaml repo namespac myrepo default namespac new repo match directori name suppli custom namespac second argument eg codeblock consol spack repo creat myrepo llnlcomp creat repo namespac llnlcomp regist spack run command spack repo add myrepo cat myreporepoyaml repo namespac llnlcomp spack repo add repositori creat regist spack spack repo add codeblock consol spack repo add myrepo ad repo namespac llnlcomp spack repo list packag repositori llnlcomp myrepo builtin spackvarspackreposbuiltin simpli add repo reposyaml file repositori regist like abl see packag name output spack list abl build use spack instal name would builtin packag spack repo remov remov alreadyregist repositori spack repo rm work whether pass repositori namespac path namespac codeblock consol spack repo rm llnlcomp remov repositori myrepo namespac llnlcomp spack repo list packag repositori builtin spackvarspackreposbuiltin path codeblock consol spack repo rm myrepo remov repositori myrepo spack repo list packag repositori builtin spackvarspackreposbuiltin repo namespac python may notic namespac notat repositori similar notat namespac python turn treat spack repositori like python packag implement could exampl extend builtin packag repositori codeblock python spackpkgbuiltinmpich import mpich class mypackagempich spack repo namespac actual python namespac tack spackpkg search semant reposyaml actual implement use python builtin syspath httpsdocspythonorglibrarysyshtmlsyspath_ search pymodspackrepo modul implement custom python import httpsdocspythonorglibraryimphtml_ warn mechan extend packag yet extens test extend packag across repositori impos interrepo depend may hard manag use featur risk let us know use case copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit known issu list known bug spack provid way get around problem encount variant properli forward depend statu expect fix spack new concret sometim variant packag also affect depend built exampl order build mpi support packag may requir depend also built mpi support packagepi look like codeblock python depends_onhdfmpi whenmpi depends_onhdfmpi whenmpi spack handl situat properli immedi depend build hdf variant use packag depend howev indirect depend depend depend spack backtrack dag far enough handl user commonli run situat tri build r x support codeblock consol spack instal rx error invalid spec cairogccx archlinuxfedorax_ bzipgccshar archlinuxfedorax_ fontutilgcc archlinuxfedorax_ fontconfiggcc archlinuxfedorax_ freetypegcc archlinuxfedorax_ gettextgccbzipcursesgitlibunistringlibxmltarxz archlinuxfedorax_ glibgcclibmount archlinuxfedorax_ inputprotogcc archlinuxfedorax_ kbprotogcc archlinuxfedorax_ libffigcc archlinuxfedorax_ libpnggcc archlinuxfedorax_ libpthreadstubsgcc archlinuxfedorax_ libxgcc archlinuxfedorax_ libxaugcc archlinuxfedorax_ libxcbgcc archlinuxfedorax_ libxdmcpgcc archlinuxfedorax_ libxextgcc archlinuxfedorax_ libxmlgccpython archlinuxfedorax_ libxrendergcc archlinuxfedorax_ ncursesgccsymlink archlinuxfedorax_ opensslkgcc archlinuxfedorax_ pcregccutf archlinuxfedorax_ pixmangcc archlinuxfedorax_ pkgconfiggccinternal_glib archlinuxfedorax_ pythongccsharedtkuc archlinuxfedorax_ readlinegcc archlinuxfedorax_ renderprotogcc archlinuxfedorax_ sqlitegcc archlinuxfedorax_ tarutilmacrosgcc archlinuxfedorax_ xcbprotogcc archlinuxfedorax_ xextprotogcc archlinuxfedorax_ xprotogcc archlinuxfedorax_ xtransgcc archlinuxfedorax_ xzgcc archlinuxfedorax_ zlibgccpicshar archlinuxfedorax_ packag cairo requir variant x spec ask x workaround explicitli activ variant depend well codeblock consol spack instal rx cairox pangox see httpsgithubcomspackspackissu httpsgithubcomspackspackissu detail depends_on handl recurs depend statu yet work progress although depends_on handl aspect spack spec syntax current handl recurs depend sigil appear depends_on statement concret hang exampl someth like codeblock python depends_onmfemcuda hyprecuda whencuda rewritten codeblock python depends_onmfemcuda whencuda depends_onhyprecuda whencuda see httpsgithubcomspackspackissu httpsgithubcomspackspackissu detail copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _analyz analyz analyz command frontend variou tool let us analyz packag instal analyz modul differ kind analysi done packag instal includ limit binari log text analysi thu analyz command group allow take exist packag instal choos analyz extract output packag use analyz metadata analyz write analyz folder spack valu specifi spack config configanalyzers_dir exampl see result run analysi zlib codeblock consol tree spackanalyz linuxubuntuskylak gcc zlibslmmzkbejtkrajigjamygvu environment_vari spackanalyzerenvironmentvariablesjson install_fil spackanalyzerinstallfilesjson libabigail spackanalyzerlibabigaillibzsoxml mean alway find analyz output folder organ logic packag instal run want custom top level folder simpli provid path argument spack analyz run nest organ maintain within custom root list analyz arent familiar spack analyz quickli list avail codeblock consol spack analyz listanalyz install_fil instal file list read install_manifestjson environment_vari environ variabl pars spackbuildenvtxt config_arg config arg load spackconfigureargstxt libabigail applic binari interfac abi featur object first three fairli simpl pars metadata file packag instal directori save analyz packag analyz command akin instal accept packag spec perform analysi packag must instal let walk exampl zlib first ask analyz howev sinc one instal ask disambigu codeblock consol spack analyz run zlib error zlib match multipl packag match packag fzb zlibgcc archlinuxubuntuskylak slmm zlibgcc archlinuxubuntuskylak use specif spec specifi spec version want analyz codeblock consol spack analyz run zlibfzb dont provid specif analyz name default analyz shown listanalyz subcommand list run analyz result skip exampl result run zlib codeblock consol ls spackanalyzerslinuxubuntuskylakegcczlibslmmzkbejtkrajigjamygvu spackanalyzerenvironmentvariablesjson spackanalyzerinstallfilesjson spackanalyzerlibabigaillibzsoxml want run specif analyz ask analyz run spack analyz libabigail alreadi instal _using_ libabigail codeblock consol spack analyz run analyz abigail libabigail _analyze_monitor monitor analysi kind analysi use spack monitor httpsgithubcomspackspackmonitor_ spackmon server upload run metadata follow instruct spack monitor document httpsspackmonitorreadthedocsorg_ first creat server along usernam token use guid interact server first export spack monitor token usernam environ codeblock consol export spackmon_tokenafdfebdbffeec export spackmon_userspacki default host server expect http prefix ms case simpli add monitor flag instal command codeblock consol spack analyz run monitor wget need custom host prefix well codeblock consol spack analyz run monitor monitorprefix monitor monitorhost httpsmonitorserviceio wget server doesnt authent skip codeblock consol spack analyz run monitor monitordisableauth wget regardless choic run analyz instal packag whether instal monitor youll see result gener messag monitor server ping codeblock consol spack analyz monitor wget send result wget binwget monitor copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit featur overview highlevel overview featur make spack differ packag manag httpenwikipediaorgwikipackage_management_system_ port system httpenwikipediaorgwikiports_collection_ simpl packag instal instal default version packag simpl instal latest version mpileak packag depend codeblock consol spack instal mpileak custom version configur spack allow instal custom user specifi version build compil compiletim option crosscompil platform command line codeblock consol instal particular version append spack instal mpileak specifi compil version spack instal mpileak gcc add special compiletim option name spack instal mpileak gcc debugtru add special boolean compiletim option spack instal mpileak gcc debug add compil flag use convent name spack instal mpileak gcc cppflagso floopblock crosscompil differ microarchitectur target spack instal mpileak targeticelak user specifi mani option care spack fill unspecifi valu sensibl default two list syntax variant ident valu boolean custom depend spack allow depend particular instal custom extens suppos hdf depend openmpi indirectli hwloc use user add custom configur depend codeblock consol instal hdf link specif version openmpi hwloc spack instal hdf gcc debug openmpicuda fabricsauto hwlocgl nondestruct instal spack instal everi uniqu packagedepend configur prefix new instal break exist one packag peac coexist spack avoid librari misconfigur use rpath link depend user link librari run program tie depend built need manipul ld_library_path runtim creat packag easi creat new packag spack need url sourc archiv spack creat command creat boilerpl packag file packag author fill specif build step pure python exampl command codeblock consol spack creat httpwwwmrdesoftwarelibelftargz creat simpl python file codeblock python spack import class libelfpackag fixm put proper descript packag fixm add proper url packag homepag homepag httpwwwexamplecom url httpwwwmrdesoftwarelibelftargz version dbcdfbafaac fixm add depend requir depends_onfoo def installself spec prefix fixm modifi configur line suit build system configureprefixformatprefix fixm add logic build instal make makeinstal doesnt take much python code get work packag literalinclud _spack_rootvarspackreposbuiltinpackageslibelfpackagepi line spack also provid wrapper function around common command like configur make cmake make write packag simpl copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _mirror mirror site may access internet fetch packag site need local repositori tarbal get file spack support mirror mirror url point directori either local filesystem server contain tarbal spack packag here exampl mirror directori structur codeblock none mirror cmake cmaketargz dyninst dyninsttgz dyninsttgz libdwarf libdwarftargz libdwarftargz libdwarftargz libelf libelftargz libelftargz libunwind libunwindtargz mpich mpichtargz mvapich mvapichtgz structur simpl toplevel directori second level directori name packag third level contain tarbal packag name packag note archiv name exactli way packag fetch url form nameversionextens name spack name packag version version tarbal extens whatev format packag fetch url contain order make mirror creation reason fast copi tarbal origin format mirror directori standard particular compress algorithm would potenti requir expand recompress archiv _cmdspackmirror spack mirror mirror manag spack mirror command help spack mirror look like commandoutput spack help mirror creat command actual build mirror fetch packag internet checksum three command manag mirror configur control url spack download packag _cmdspackmirrorcr spack mirror creat creat mirror use spack mirror creat command assum your machin access internet command iter spack packag download safe one directori structur like one look like codeblock consol spack mirror creat libelf libdwarf creat new mirror spackmirror tri fetch httpwwwmrdesoftwarelibelftargz checksum pass libelf ad libelf tri fetch httpwwwmrdesoftwarelibelftargz checksum pass libelf ad libelf tri fetch httpwwwprevandersnetlibdwarftargz checksum pass libdwarf ad libdwarf tri fetch httpwwwprevandersnetlibdwarftargz checksum pass libdwarf ad libdwarf tri fetch httpwwwprevandersnetlibdwarftargz ad libdwarf ad spackmirrorlibdwarflibdwarftargz mirror ad python success updat mirror spackmirror archiv stat alreadi present ad fail fetch done tar spackmirror directori copi machin want host custom packag set normal spack mirror creat download archiv checksum want creat mirror subset packag suppli list packag spec command line spack mirror creat exampl command codeblock consol spack mirror creat libelf boost creat mirror libelf version greater equal boost version greater equal mirror file larg number packag want mirror suppli file spec one per line codeblock consol cat specstxt libdwarf libelf boost boost spack mirror creat file specstxt use specif suit softwar manag site mirror environ creat mirror packag requir concert environ activ environ call spack mirror creat especi use creat mirror environ concret anoth machin codeblock consol remot spack env creat myenv remot spack env activ myenv remot spack add remot spack concret sftp remotespackvarenvironmentmyenvspacklock spack env creat myenv spacklock spack env activ myenv spack mirror creat _cmdspackmirroradd spack mirror add mirror need let spack know rel simpl first figur url mirror directori use file url like one codeblock none filehomespackmirror point directori local filesystem web server could use url like one httpsexamplecomsomewebhosteddirectoryspackmirror spack use url root packag fetch tell spack instal use mirror like codeblock consol spack mirror add local_filesystem filehomespackmirror mirror name refer later _cmdspackmirrorlist spack mirror list see mirror spack know run spack mirror list codeblock consol spack mirror list local_filesystem filehomeusernamespackmirror _cmdspackmirrorremov spack mirror remov remov mirror name run codeblock consol spack mirror remov local_filesystem spack mirror list mirror configur mirror preced ad mirror realli add line spackmirrorsyaml codeblock yaml mirror local_filesystem filehomeusernamespackmirror remote_serv httpsexamplecomsomewebhosteddirectoryspackmirror want chang order mirror search packag edit file reorder section spack search topmost mirror first bottommost mirror last _cach local default cach spack cach resourc download part instal cach valid spack mirror use directori structur name scheme spack mirror copi anywher referenc url like mirror mirror maintain local within spack instal directori filevarspackcach alway enabl alway search first attempt retriev file instal clear refclean cmdspackclean cach directori also delet manual without issu cach includ retriev tarbal archiv sourc control repositori resourc associ digest commit id eg revis number svn cach copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _packagingguid packag guid guid intend develop administr want packag softwar spack instal assum least familiar python youv read refbas usag guid basicusag especi part refspec secspec two key part spack spec express describ build softwar packag python modul describ build softwar accord spec spec allow user describ particular build way packag author understand packag allow packag encapsul build logic differ version compil option platform depend combin one place essenti packag translat spec build logic packag spack written pure python anyth spack python python chosen implement languag two reason first python becom ubiquit scientif softwar commun second modern languag mani power featur help make packag write easi creat edit packag _cmdspackcreat spack creat spack creat command creat directori packag name gener packagepi file boilerpl packag templat given url point tarbal softwar archiv spack creat smart enough determin basic inform packag includ name build system case spack creat plu modif need get packag work here exampl codeblock consol spack creat httpsgmpliborgdownloadgmpgmptarbz spack examin tarbal url tri figur name packag creat name contain uppercas letter automat convert lowercas name contain underscor period automat convert dash spack also search addit version locat directori websit spack prompt tell mani version found ask mani would like download checksum codeblock consol spack creat httpsgmpliborgdownloadgmpgmptarbz look like url gmp found version gmp httpsgmpliborgdownloadgmpgmptarbz httpsgmpliborgdownloadgmpgmptarbz httpsgmpliborgdownloadgmpgmptarbz httpsgmpliborgdownloadgmpgmptarbz mani would like checksum default q abort spack automat download number tarbal specifi start recent checksum download version front alway choos download one tarbal initi run refcmdspackchecksum later need version let say download tarbal codeblock consol mani would like checksum default q abort download fetch httpsgmpliborgdownloadgmpgmptarbz fetch httpsgmpliborgdownloadgmpgmptarbz fetch httpsgmpliborgdownloadgmpgmptarbz checksum version gmp packag look like use autotool build system creat templat gmp packag creat packag file usersadamspackvarspackreposbuiltinpackagesgmppackagepi spack automat creat directori appropri repositori gener boilerpl templat packag open new packagepi favorit editor codeblock python lineno templat packag file spack weve put fixm next thing youll want chang youv handl save file test packag like spack instal gmp edit file type spack edit gmp see spack document inform packag submit packag back spack pull request pleas first remov boilerpl fixm comment spack import class gmpautotoolspackag fixm put proper descript packag fixm add proper url packag homepag homepag httpwwwexamplecom url httpsgmpliborgdownloadgmpgmptarbz fixm add list github account notifi packag updat maintain github_us github_us version ddbbdcbdedebbaa version cfeebdbfcaa version eeeebfcabaec fixm add depend requir depends_onfoo def configure_argsself fixm add argument prefix fixm need delet function arg return arg tediou stuff creat class checksum archiv done youll notic spack creat correctli detect gmp use autotool build system creat new gmp packag subclass autotoolspackag base class base class provid basic instal method common autotool packag codeblock bash configur prefixpathtoinstallationdirectori make make check make instal autotool packag suffici need add addit argument configur call add via configure_arg function gener packag download url attribut alreadi set thing still need chang mark fixm label delet comment instruct licens first import statement read rest task need follow add descript immedi insid packag class docstr triplequot use gener descript shown user run spack info chang homepag use url homepag display user run spack info learn packag add commasepar list maintain maintain field list github account peopl want notifi time packag modifi pull request submit updat packag peopl request review pr use develop maintain spack packag softwar well user reli piec softwar want ensur packag doesnt break also give user list peopl contact help someon report build error packag add depends_on call packag depend depends_on tell spack packag need built instal one see refdepend get instal work new packag may requir specif flag configur ad via configure_arg specif differ depend packag build system refimpl instal method installmethod cover detail later pass url spack creat conveni easi way get basic packag templat softwar licens download url still creat boilerpl packagepi tell spack creat name want use codeblock consol spack creat name intel creat simpl intel packag instal method craft instal packag spack creat url guess wrong name build system exampl packag use autotool build system come configur script spack wont realiz use autotool overwrit old packag forc specifi name name build system templat use templat codeblock consol spack creat name gmp httpsgmpliborgdownloadgmpgmptarbz spack creat forc templat autotool httpsgmpliborgdownloadgmpgmptarbz note creat packag use autotool build system come configur script youll need add autoreconf method packag explain gener configur script may also need follow depend codeblock python depends_onautoconf typebuild depends_onautomak typebuild depends_onlibtool typebuild depends_onm typebuild complet list avail build system templat found run spack creat help _cmdspackedit spack edit one easiest way learn write packag look exist one edit packag file name spack edit command codeblock consol spack edit gmp use spack creat creat packag save close result file get back spack edit gmp packag actual live spack_rootvarspackreposbuiltinpackagesgmppackagepi spack edit provid much simpler shortcut save troubl type full path name directori structur section describ packag need name live spack directori structur gener refcmdspackcr handl creat packag file skip detail varspackreposbuiltinpackag spack instal directori structur like standard unix instal prefix bin lib includ var opt etc code spack live spack_rootlibspack packag live spack_rootvarspackreposbuiltinpackag cd directori see directori packag commandoutput cd spack_rootvarspackreposbuiltinpackag ls shell ellipsi directori contain file call packagepi python code packag goe exampl libelf packag live codeblock none spack_rootvarspackreposbuiltinpackageslibelfpackagepi alongsid packagepi file packag may contain extra directori file like patch need build packag name packag name directori contain packagepi libelf packagepi live directori call libelf packagepi file defin class call libelf extend spack packag class exampl spack_rootvarspackreposbuiltinpackageslibelfpackagepi codeblock python lineno spack import class libelfpackag descript homepag url version depends_on def instal directori name libelf determin packag name user provid command line eg type codeblock consol spack info libelf spack version libelf spack instal libelf spack see packag name spec look libelfpackagepi varspackreposbuiltinpackag likewis run spack instal pynumpi spack look pynumpypackagepi spack use directori name packag name order give packag freedom name packag packag name contain letter number dash use python identifi eg class name modul name would make difficult support option name packag proxi foobar spack wont care need see name packag directori packag class name spack load packagepi file dynam need find special class name file load succeed class name libelf exampl form convert word separ file name camelcas name start number prefix class name _ exampl modul name class name foobar foobar proxi _proxi gener wont rememb name convent refcmdspackcr refcmdspackedit handl detail trust download spack verifi sourc code download corrupt compromis least version author spack packag saw packag creat spack use download method verifi say download method trust trust import download spack control secur variou site download sourc code never assum particular site hasnt compromis trust establish differ way differ download method common download method singlefil tarbal tarbal checksum git download use commit trust implicitli long hash specifi spack also provid untrust download method tarbal url may suppli without checksum git download may specifi branch tag instead hash user control trust sourc untrust download secur risk unless otherwis specifi user special case spack default use trust download method unfortun spack current provid guarante provid follow mechan safeti default spack instal tarbal packag checksum checksum match overrid spack instal nochecksum numer version almost alway tarbal download wherea nonnumer version name develop frequent download untrust branch tag version control system long packag least one numer version nonnumer version name develop spack prefer nonnumer version checksum tarbal download spack current support checksum use md sha sha sha sha sha algorithm determin algorithm use base hash length _versionsandfetch version fetch straightforward way add new version packag add line like packag class codeblock python class foopackag url httpexamplecomfootargz version dbcdfbafaac version cffadeade version dddedaeefdfadffdf version list descend order newest oldest date version wish use date version best use format yyyymmdd ensur sort correct order altern might use hybrid releasevers date scheme exampl _ would mean version branch august version url default version url extrapol url field packag exampl spack smart enough download version foo packag httpexamplecomfootargz url particularli complic chang base releas overrid default url gener algorithm defin url_for_vers function exampl download url openmpi contain majorminor version one spot majorminorpatch version anoth httpswwwopenmpiorgsoftwareompivdownloadsopenmpitarbz order handl defin url_for_vers function like literalinclud _spack_rootvarspackreposbuiltinpackagesopenmpipackagepi pyobject openmpiurl_for_vers use url_for_vers spack know download openmpi httpwwwopenmpiorgsoftwareompivdownloadsopenmpitarbz download openmpi httpwwwopenmpiorgsoftwareompivdownloadsopenmpitarbz youll notic openmpi url_for_vers function make use special version function call up_to call versionup_to version like return versionup_to would return use packag place xy version singl directori place xyz version subdirectori version properti awar gener prefer numer version separ dot uniform tarbal name way exampl icuc separ major minor version underscor like icuc_srctgz valu _ obtain use versionunderscor properti note python properti dont need parenthes separ properti well properti result versiondot versiondash versionunderscor __ versionjoin note python properti dont need parenthes versiondash correct versiondash incorrect addit version properti combin up_to exampl codeblock python version version versionup_todash version versionunderscoredup_to version_ see order import keep mind up_to version properti return version object string url deriv systemat special url one version add explicit url particular version codeblock python version dbcdfbafaac urlhttpexamplecomfoospecialversiontargz suppli custom url version spack use url verbatim perform extrapol order preced method packagelevel url url_for_vers versionspecif url packag contain url_for_vers overridden versionspecif url packag contain packagelevel url url_for_vers spack determin url download even version specifi url spack use nearest url request version use packag easi extrapol url keep chang url format everi releas method need specifi url url chang mirror main url spack support list mirror main url packag defin url attribut codeblock python class foopackag url httpexamplecomfootargz httpmirrorcomfootargz instead singl url attribut list possibl url tri order fetch packag notic either one url url present packag time wellknown case packag fetch multipl mirror gnu spack goe step defin mixin class take care plumb requir packag defin proper gnu_mirror_path attribut literalinclud _spack_rootvarspackreposbuiltinpackagesautoconfpackagepi line skip expand step spack normal expand archiv eg targz zip automat standard stage sourc directori selfstagesource_path download want skip step eg selfextract execut custom archiv type add expandfals version direct codeblock python version dbcdfbafaac urlhttpexamplecomfoospecialversionsh expandfals expand set fals spack set current work directori directori contain download archiv call instal method within instal path download archiv avail selfstagearchive_fil exampl snippet packag distribut selfextract archiv exampl set permiss download file make execut run argument codeblock python def installself spec prefix set_executableselfstagearchive_fil instal executableselfstagearchive_fil installerprefix prefix arg arg etc _deprec deprec old version mani reason remov old version softwar secur vulner seriou reason chang build system increas packag complex chang dependenciespatchesresourcesflag increas packag complex maintainerdevelop inabilityunwilling support old version longer avail download right forgotten packag version renam time mani reason keep old version softwar reproduc requir older packag eg packag still reli qt gener remov old version packagepi instead first deprec use follow syntax codeblock python version sha deprecatedtru two effect first spack info longer advertis version second command like spack instal fetch packag requir user approv codeblock consol spack instal openssl warn openssl deprec may remov futur spack releas fetch anyway yn use spack instal deprec check skip also appli packag recip renam remov first deprec version remov packag need renam deprec old packag creat new packag time version deprec alway last least one spack minor releas cycl version complet remov exampl version deprec spack remov spack version remov without deprec process give user chanc complain deprec case old version need applic requir deprec version packag simpli submit pr remov deprecatedtru packag howev may ask help maintain version packag current maintain unwil support older version download cach spack maintain cach describ refher cach save file retriev packag instal avoid redownload case packag instal differ specif version reinstal account chang hash scheme may rare necessari avoid cach particular version ad no_cachetru option version direct exampl situat would snapshotlik version control system vc tag vc branch vpatch url specifi regularli updat snapshot tarbal version comparison spack version numer tupl integ exampl apex ferret pynetcdf spack know compar sort numer version spack version involv slight extens numer syntax exampl pysphinxrtdthemea case number alway consid newer letter consist rpm httpsbugzillaredhatcomshow_bugcgiid_ spack version may also arbitrari nonnumer string exampl develop master local order version defin follow version string split list compon base delimit etc list order lexicograph compon order follow follow special string consid larger numer nonnumer version compon satisfi follow order develop main master head trunk number order numer less special string larger nonnumer compon nonnumer compon less numer compon order alphabet logic behind sort order twofold nonnumer version usual use special case develop debug piec softwar keep less numer version ensur spack choos numer version default whenev possibl mostrec develop version packag usual newer releas numer version allow develop version satisfi depend like depends_onabc whenxyz version select concret mani version might match usersuppli spec exampl spec python match avail version packag python similarli python match version python given set version match spec spack concret use follow prioriti decid one use user provid list version packagesyaml first match version list use one version specifi preferredtru either packagesyaml packagepi largest match version use latest defin sort order prefer particular specifi packag packagesyaml largest match nondevelop version use avoid develop prevent user accident instal develop version els fail develop match version use _cmdspackchecksum spack checksum want add new version packag youv alreadi creat autom spack checksum command here exampl libelf codeblock consol spack checksum libelf found version libelf httpwwwmrdesoftwarelibelftargz httpwwwmrdesoftwarelibelftargz httpwwwmrdesoftwarelibelftargz httpwwwmrdesoftwarelibelftargz httpwwwmrdesoftwarelibelftargz httpwwwmrdesoftwarelibelftargz httpwwwmrdesoftwarelibelftargz httpwwwmrdesoftwarelibelftargz httpwwwmrdesoftwarelibelftargz httpwwwmrdesoftwarelibelftargz mani would like checksum default q abort thing spack creat allow go back add new version easili need eg theyr releas fetch tarbal ask print list version command readi copypast packag file codeblock consol checksum new version libelf version dbcdfbafaac version efdffdadcfec version ebdfcaafbf version dbdcddfadffdbd default spack search new tarbal download scrape parent directori tarbal gave tarbal httpexamplecomdownloadsfootargz spack look httpexamplecomdownload link addit version need search anoth path download link suppli extra attribut control packag find new version see document refattribute_list_url refattribute_list_depth note command assum spack extrapol new url exist url packag spack find similar url webpag that possibl eg packag develop dont name tarbal consist youll need manual add version call spack checksum work spack need abl import packag python mean cant syntax error import fail use youv got packag work order find new version youv alreadi seen homepag url packag attribut codeblock python lineno spack import class mpichpackag mpich high perform wide portabl implement messag pass interfac mpi standard homepag httpwwwmpichorg url httpwwwmpichorgstaticdownloadsmpichtargz classlevel attribut use spack show user inform packag determin download sourc code spack use tarbal url extrapol find tarbal packag eg refcmdspackchecksum alway work section cover way tell spack find tarbal elsewher _attribute_list_url list_url spack tri find avail version packag eg refcmdspackchecksum spider parent directori tarbal url attribut exampl libelf url codeblock python url httpwwwmrdesoftwarelibelftargz spack spider httpwwwmrdesoftwar find similar tarbal link ultim make list avail version libelf mani packag tarbal parent directori may unlist may contain link sourc code archiv fact mani time addit packag download arent even avail directori download url specifi separ list_url indic page search tarbal exampl libdwarf homepag list_url link old version codeblock python lineno class libdwarfpackag homepag httpwwwprevandersnetdwarfhtml url httpwwwprevandersnetlibdwarftargz list_url homepag _attribute_list_depth list_depth libdwarf mani packag list avail version singl webpag exampl mpich tarbal url look like codeblock python url httpwwwmpichorgstaticdownloadsmpichtargz download mani differ subdirectori httpwwwmpichorgstaticdownload need add list_url list_depth attribut codeblock python lineno class mpichpackag homepag httpwwwmpichorg url httpwwwmpichorgstaticdownloadsmpichtargz list_url httpwwwmpichorgstaticdownload list_depth default spack look toplevel page avail list_url list_depth tell follow level link toplevel page note impli level subdirectori mpich websit structur much like filesystem list_depth realli refer link depth spider page _vcsfetch fetch code repositori packag sourc code provid version control system vc repositori rather tarbal spack fetch packag vc repositori current spack support fetch git gitfetch__ mercuri hg hgfetch__ subvers svn svnfetch__ cv cv cvsfetch__ go gofetch__ case destin standard stage sourc path fetch packag sourc repositori spack need know vc use download much like url packag author specifi classlevel git hg svn cv go attribut contain correct download locat mani packag develop git git repositori well releas tarbal avail download packag defin classlevel tarbal url vc exampl codeblock python class trilinoscmakepackag homepag httpstrilinosorg url httpsgithubcomtrilinostrilinosarchivetrilinosreleasetargz git httpsgithubcomtrilinostrilinosgit versiondevelop branchdevelop versionmast branchmast version ecdfacbfacc version dbdcfddcfd version ffeebbdbaedb packag contain url git classlevel attribut spack decid use base argument version direct version contain specif branch tag revis assum vc download method version contain checksum assum url download method like url specif version download differ repositori default repo overridden versionspecif argument note order reduc ambigu packag singl vc toplevel attribut addit url rare case packag use multipl vc fetch strategi specifi version exampl rockstar packag contain codeblock python class rockstarmakefilepackag homepag httpsbitbucketorggfcstanfordrockstar versiondevelop githttpsbitbucketorggfcstanfordrockstargit versionyt hghttpsbitbucketorgmatthewturkrockstar _gitfetch git git fetch support follow paramet version git url git repositori differ classlevel git branch name branch fetch tag name tag fetch commit sha hash prefix commit fetch submodul also fetch submodul recurs check repositori submodules_delet list submodul forcibl delet repositori fetch use version repositori submodul disappearedar longer access get_full_repo ensur full git histori check remot branch inform normal get_full_repofals default git option depth use version git specifi transport protocol support singlebranch use version git support one tag branch commit use time destin directori clone standard stage sourc path default branch fetch repositori default branch codeblock python class examplepackag git httpsgithubcomexampleprojectexamplegit versiondevelop download method untrust recommend asid http way verifi repositori compromis commit get instal packag like wont commit use packag first written addit default branch may chang best least specifi branch name branch fetch particular branch use branch paramet codeblock python versionexperiment branchexperiment download method untrust recommend branch move target commit get instal packag like wont commit use packag first written tag fetch particular tag use tag instead codeblock python version tagv download method untrust recommend although tag gener stabl branch git allow tag move mani develop use tag denot roll releas may move tag bug patch commit final fetch particular commit use commit codeblock python version commitdcdeccceadeacc doesnt full hash abbrevi youd expect git codeblock python version commitdcd download method trust recommend way secur download git repositori may use provid saner version commit like eg might use date version done know commit releas cut use releas version packag author decid make sens although use commit hash version number recommend wont sort properli submodul suppli submodulestru caus spack fetch submodul recurs along repositori fetch time inform git submodul see manpag git man gitsubmodul codeblock python version tagv submodulestru _githubfetch github project host github valid git branch tag hash may download tarbal accomplish simpli construct appropri url spack checksum packag download way therebi produc trust download exampl follow download particular hash appli checksum codeblock python version debcddbbabbd urlhttpswwwgithubcomjswhitpyprojtarballbeccfebacabeabf _hgfetch mercuri fetch mercuri work much like git gitfetch_ use hg paramet destin directori still standard stage sourc path default branch add hg attribut revis pass version codeblock python class examplepackag hg httpsbitbucketorgexampleprojectexampl versiondevelop download method untrust recommend git default fetch strategi way verifi integr download revis fetch particular revis use revis paramet codeblock python version revisionv unlik git special paramet differ type revis use revis branch tag commit fetch mercuri like git fetch specif branch tag untrust download method recommend recommend fetch strategi specifi particular commit hash revis _svnfetch subvers fetch subvers use svn revis paramet destin directori standard stage sourc path fetch head simpli add svn paramet packag codeblock python class examplepackag svn httpsoutreachscidacgovsvnexampletrunk versiondevelop download method untrust recommend reason mention fetch revis fetch particular revis add revis argument version direct codeblock python versiondevelop revis download method untrust recommend unfortun subvers commit hash scheme like git mercuri way guarante download get download use packag creat use risk subvers branch handl part directori structur check branch tag chang url want packag multipl branch simpli add svn argument version direct _cvsfetch cv cv concurr version system old central version control system predecessor subvers fetch cv use cv branch date paramet destin directori standard stage sourc path fetch head simpli add cv paramet packag codeblock python class examplepackag cv pserveroutreachscidacgovcvsrootmodulemodulenam version cv repositori locat describ use older syntax differ today ubiquit url syntax pserver denot transport method cv server host multipl repositori call modul locat one need specifi server locat modul name access spack combin one string use modulemodulenam suffix shown download method untrust fetch date version cv commonli specifi date fetch particular branch date add branch andor date argument version direct codeblock python version branchbranchnam date unfortun cv identifi repositorywid commit via revis hash like subvers git mercuri make imposs specifi exact commit check cv featur sinc cv rare use day spack support _gofetch go go isnt vc program languag builtin command go get httpsgolangorgcmdgohdrdownload_and_install_packages_and_dependencies_ fetch packag depend automat destin directori standard stage sourc path strategi clone git repositori download anoth sourc locat exampl codeblock python class theplatinumsearcherpackag homepag httpsgithubcommonochromeganethe_platinum_search go githubcommonochromeganethe_platinum_search versionhead go use fetch particular commit branch alway download head repositori download method untrust recommend use anoth fetch strategi whenev possibl variant mani softwar packag configur enabl option featur often come expens addit depend longer build time flexibl enough support wide varieti use case spack allow expos endus abil choos featur activ packag time instal mechan employ pyfuncspackdirectivesvari direct boolean variant simplest form variant boolean option specifi packag level codeblock python class hdfautotoolspackag variant share defaulttru descriptionbuild share version librari default valu descript mean use packag variant test context spec constraint expect exampl share variant tie build share dynam librari pass right option configur time branch depend valu codeblock python def configure_argsself share selfspec extra_argsappendenableshar els extra_argsappenddisableshar extra_argsappendenablestaticexec explain refbasicvari constraint share mean boolean variant set true share mean set fals anoth common exampl option activ extra depend requir use variant argument pyfuncspackdirectivesdepends_on codeblock python class hdfautotoolspackag variantszip defaultfals descriptionen szip support depends_onszip whenszip shown snippet szip model option depend hdf multivalu variant need spack go beyond boolean variant permit arbitrari number allow valu might use model option tightli relat valu case pass pyfuncspackdirectivesvari direct tupl codeblock python class blispackag variant thread defaultnon descriptionmultithread support valuespthread openmp none multifals exampl argument multi set fals indic one among variant valu activ time constraint enforc parser error emit user specifi two valu time codeblock consol spack spec bli threadsopenmppthread input spec bli threadsopenmppthread concret error multipl valu allow variant thread anoth use note python none allow default valu therefor use denot featur select user instead select anoth valu like none handl explicitli within packag recip need codeblock python selfspecvariantsthreadsvalu none optionsappendnothread case multipl valu select time multi set true codeblock python class gccautotoolspackag variant languag defaultccfortran valuesada brig c c fortran go java jit lto objc objc multitru descriptioncompil runtim librari build within packag recip multivalu variant test use keyvalu syntax codeblock python languagesjit spec optionsappendenablehostshar complex valid logic variant valu cover complex use case pyfuncspackdirectivesvari direct could accept valu argument fullfledg object default argument direct embed attribut exampl alreadi implement spack core pyclassspackvariantdisjointsetsofvalu class use implement conveni function like pyfuncspackvariantany_combination_of codeblock python class adiosautotoolspackag variant stage valuesany_combination_offlexpath dataspac descriptionen dataspac andor flexpath stage transport allow combin specifi valu also allow user specifi none string choos none object return function modifi chain method call chang default valu custom error messag similar oper codeblock python class mvapichautotoolspackag variant process_manag descriptionlist process manag activ valuesdisjoint_set auto slurm hydra gforker remshel prohibit_empty_setwith_error slurm auto activ along process manag with_defaultautowith_non_feature_valuesauto condit variant variant direct accept claus variant present spec otherwis satisfi spec list claus exampl follow class variant bar version higher codeblock python class foopackag variantbar defaultfals descriptionhelp messag claus follow syntax accept valu argument pyfuncspackdirectivesdepends_on overrid variant packag may overrid variant sever reason often chang default variant defin parent class chang condit variant present spec variant defin multipl time whether packag file subclass superclass last definit use attribut except claus claus accumul invoc variant present spec accumul condit satisfi exampl consid follow packag codeblock python class foopackag variantbar defaultfals descriptionhelp variantbar defaulttru whenplatformdarwin descriptionhelp packag foo variant bar spec satisfi either platformdarwin platform version default variant present alway true regardless condit variant satisfi allow packag overrid variant packag build system class inherit modifi variant valu without modifi claus also allow packag implement semant variant claus duplic variant definit resourc expand extra tarbal packag notabl compil provid option featur addit resourc expand within sourc tree build spack possibl describ need resourc direct codeblock python resourc namecargo githttpsgithubcomrustlangcargogit tag destinationcargo base keyword present among argument appropri fetchstrategi use resourc keyword destin rel sourc root packag point resourc expand _licens licens softwar order instal licens softwar spack need know detail packag follow class attribut defin license_requir boolean set true softwar requir licens set fals follow attribut ignor default fals license_com string contain symbol use licens manag denot comment default license_fil list string file softwar search look licens file path must rel instal directori complex packag like intel may requir multipl licens individu compon default empti list license_var list string environ variabl set tell softwar look licens usual locat default empti list license_url string url point licens setup instruct softwar default empti string exampl let take look packag pgi compil codeblock python licens license_requir true license_com license_fil licensedat license_var pgroupd_license_fil lm_license_fil license_url httpwwwpgroupcomdocpgiinstallpdf see pgi requir licens licens manag flexnet use symbol denot comment expect licens file name licensedat locat directli instal prefix would like instal file locat elsewher simpli set pgroupd_license_fil lm_license_fil instal instruct instal licens see url provid let walk sampl pgi instal see exactli spack isnt capabl sinc pgi provid download url must download manual either ad mirror locat current directori spack instal pgi run see refmirror instruct set mirror run spack instal pgi first thing happen spack creat global licens file locat spack_rootetcspacklicensespgilicensedat open file use editor set editor vi unset look like codeblock sh licens requir use pgi recommend solut store licens key global licens file instal follow symlink ad point file rel instal prefix licensedat altern use one follow environ variabl pgroupd_license_fil lm_license_fil choos store licens nonstandard locat may set one variabl full pathnam licens file porthost store licens key dedic licens server like want set variabl modul file get load everi time someon tri use pgi inform acquir licens pleas refer httpwwwpgroupcomdocpgiinstallpdf may enter licens add licens directli file tell flexnet use licens store separ licens server exampl point licens server call licman codeblock none server licmanmcsanlgov ebfba use_serv packag requir licens instal refer locat global licens use selfglobal_license_fil instal symlink file given license_fil creat point global licens instal differ version variant packag spack automat detect reus alreadi exist global licens softwar tri packag doesnt reli licens file spack print warn messag let user know need set environ variabl point instal document _patch patch depend host architectur packag version known bug issu may need patch softwar get build correctli like mani packag system spack allow store patch alongsid packag file appli sourc code download patch specifi patch packag file patch direct patch look like codeblock python class mvapichpackag patchad_lustre_rwcontig_open_sourcepatch first argument either url filenam specifi patch file appli sourc patch suppli filenam patch need live within spack sourc tree exampl patch live directori structur like codeblock none spack_rootvarspackreposbuiltinpackag mvapich packagepi ad_lustre_rwcontig_open_sourcepatch suppli url instead filenam need suppli sha checksum like codeblock python patchhttpwwwnwchemsworgimagestddft_mxvecpatch shacafbededcedcefadadfcbfcdf spack includ hash patch version inform packag differ patch appli differ hash identifi ensur hash scheme consist must use sha checksum patch patch fetch url check appli sourc code use gnu util shasum maco shasum command gener checksum patch file spack also handl compress patch use spack need littl help specif need two checksum sha patch archive_sha compress archiv archive_sha help spack ensur download file corrupt malici run tool like tar zip sha patch still requir includ spec provid packag file ensur spack wont download decompress patch wont end use instal time archiv patch checksum check patch archiv download codeblock python patchhttpwwwnwchemsworgimagestddft_mxvecpatchgz shacafbededcedcefadadfcbfcdf archive_shaeaeccabfcfcebaeeffcdbceddabacd patch keyword argument describ sha archive_sha hash download patch compress archiv respect need patch fetch url suppli spec tell spack appli patch instal packag spec match spec patch appli exampl patch appli mvapich version higher level tell spack run patch command default level spack run patch p level spack run patch p lot peopl confus level here primer look patch file may see someth like codeblock diff lineno asrcmpiromioadioad_lustread_lustre_rwcontigc bsrcmpiromioadioad_lustread_lustre_rwcontigc copyright c sun microsystem lustr group defin _xopen_sourc defin _xopen_sourc includ stdlibh includ malloch includ ad_lustreh line show path synthet b prefix placehold two mvapich sourc directori diff compar creat patch file git default behavior creat patch file program may behav differ p strip first level prefix path allow patch appli root expand mvapich archiv set level would strip src gener easier structur patch file appli cleanli p your use patch didnt creat level handi working_dir tell spack run patch command default work directori sourc path stage howev sometim patch made respect subdirectori work directori come handi intern work directori given patch via option let take exampl patch assum reason download follow form codeblock diff lineno aromioadioad_lustread_lustre_rwcontigc bromioadioad_lustread_lustre_rwcontigc copyright c sun microsystem lustr group defin _xopen_sourc defin _xopen_sourc includ stdlibh includ malloch includ ad_lustreh henc patch need appli srcmpi subdirectori working_dirsrcmpi option would exactli patch function addit suppli patch file write custom function patch packag sourc exampl pypysid packag contain custom code tweak way pysid build handl rpath _pysidepatch literalinclud _spack_rootvarspackreposbuiltinpackagespypysidepackagepi pyobject pypysidepatch lineno patch function present run patch file appli instal run could put logic instal put patch function give benefit first spack ensur patch function run per code checkout mean run instal hit ctrlc run instal code patch function run also tell spack run patch part build use refcmdspackpatch command _patch_dependency_patch depend patch far weve cover patch direct use packag patch sourc code packag also specifi patch appli depend requir special modif packag spack patch depend librari coexist version librari see section depends_on dependency_dependency_patching__ detail _patch_inspecting_patch inspect patch want better understand patch spack appli packag use spack spec spack find queri command let look run spack spec see patch would appli spack spec input spec concret mappleclang patchesabfabaeeddaceefefcebfcdcafbffbfccebdedabfcdbfdbbaefcbabaadcdceeccbcdcfdbc sigsegv archdarwinhighsierrax_ libsigsegvappleclang archdarwinhighsierrax_ also see patch appli instal packag spack find v spack find v instal packag darwinhighsierrax_ appleclang patchesabfabaeeddaceefefcebfcdcafbffbfccebdedabfcdbfdbbaefcbabaadcdceeccbcdcfdbc sigsegv _cmdspackresourc case see patch sha hash store spec variant mention mean multipl differentlypatch version packag instal look patch sha hash short version use spack resourc show command spack resourc show ab abfabaeeddaceefefcebfcd path homespackusersrcspackvarspackreposbuiltinpackagesmgnulibpgipatch appli builtinm spack resourc show look download resourc packag file hash print inform see ab patch appli packag output also tell us find patch thing get interest want know depend patch exampl dealii built boost patch boost work correctli didnt know might wonder extra boost patch come spack spec dealii boost hdffortran grep boost boost boostappleclangatomicchronoclanglibcpp cxxstddefault date_timedebugexceptionfilesystemgraphicuiostreamslocalelogmathmpimultithreadednumpi patchesabcddecaaeadfdcccbcdcbffcbcaaefdaadfefaf picprogram_optionspythonrandomregexserializationsharedsignalssinglethreadedsystemtaggedlayouttestthreadtimerversionedlayoutwav archdarwinhighsierrax_ spack resourc show b bffcbcaaefdaadfefaf path homespackusersrcspackvarspackreposbuiltinpackagesdealiiboost_patch appli builtinboost patch builtindealii see patch appli boost dealii live dealii directori spack builtin packag repositori _handling_rpath handl rpath spack instal packag way ensur depend found run use rpath httpenwikipediaorgwikirpath_ rpath search path store binari execut librari tell dynam loader find depend runtim may familiar ld_library_path httptldporghowtoprogramlibraryhowtosharedlibrarieshtml_ linux dyld_library_path httpsdeveloperapplecomlibrarymacdocumentationdarwinreferencemanpagesmandyldhtml_ mac os x rpath similar path tell loader find librari unlik embed binari set user environ rpath spack handl one three way packag rpath handl automat use spack refcompil wrapper compilerwrapp wrapper set standard variabl like cc cxx f fc build system autotool mani gmake system pick use cmake also respect spack compil wrapper mani cmake build logic overwrit rpath binari instal spack provid std_cmake_arg variabl includ paramet necessari cmake build use right instal rpath use like cmake invok codeblock python class mypackagepackag def installself spec prefix cmake std_cmake_arg make makeinstal need modifi build add rpath use selfrpath properti packag return list rpath spack use link see use refpysid exampl pysidepatch _attribute_parallel parallel build spack support parallel build individu packag instal level packagelevel parallel establish job option configur packag recip equival installationlevel parallel driven dag request packag packag packagelevel build parallel default spack invok make similar tool j njob argument build run parallel parallel determin valu build_job entri configyaml see refher buildjob detail valu comput packag build properli parallel overrid set ad parallel fals packag exampl openssl build work parallel packag look like codeblock python emphasizelin lineno class opensslpackag homepag httpwwwopensslorg url httpwwwopensslorgsourceopensslhtargz versionh ddadccaadfbdacf depends_onzlib parallel fals similarli disabl parallel build specif make command libdwarf codeblock python emphasizelin lineno class libelfpackag def installself spec prefix configureprefix prefix enableshar disabledependencytrack disabledebug make mkdir command libelf instal fail parallel makeinstal parallelfals first make run parallel second set parallel fals packag level call make sequenti default packag call makeparalleltru overrid installlevel build parallel spack support concurr instal packag within spack instanc across multipl process use file system lock parallel separ packagelevel achiev build system use j njob option installlevel parallel process coordin instal depend spec provid command line part environ build one process allow instal given packag time refer refdepend inform depend refinstallingenviron instal environ concurr process may combin interact session batch job mean spack instal run termin window batch job run spack instal overlap depend without process tri redo work anoth exampl use slurm could launch instal mpich use follow command codeblock consol srun n n spack instal j mpich creat eight concurr fourjob instal two differ node altern could run instal one node enter follow command line bash shell codeblock consol nohup spack instal j mpich mpich_installtxt done note effect parallel base maximum number packag instal time limit number packag remain uninstal depend _depend depend weve cover build simpl packag one packag reli anoth packag build express packag file refer packag build script packag spack make rel easi let take look libdwarf packag see done codeblock python emphasizelin lineno class libdwarfpackag homepag httpwwwprevandersnetdwarfhtml url httpwwwprevandersnetlibdwarftargz list_url homepag version ccefbbaaec depends_onlibelf def installself spec prefix depends_on highlight depends_onlibelf call tell spack need build instal libelf packag build libdwarf mean instal method guarante libelf built instal success reli libdwarf build depend spec depends_on doesnt take name anoth packag take full spec well mean restrict version configur option libelf libdwarf build exampl suppos libdwarf packag write codeblock python depends_onlibelf libdwarf requir libelf exactli version also specifi requir particular variant specif compil flag codeblock python depends_onlibelfdebug depends_onlibelf debugtru depends_onlibelf cppflagsfpic user packag author use spec syntax refer differ packag configur user use spec syntax command line find instal packag instal packag particular constraint packag author use spec describ relationship packag version rang although packag requir specif version depend built rang version exampl write packag legaci python modul work python would look like codeblock python depends_onpython version rang spack inclus mean version greater equal includ x want specifi packag work version python higher would look like codeblock python depends_onpython leav upper bound want say packag requir python similarli leav lower bound codeblock python depends_onpython notic didnt use version rang inclus mean includ x version packag built python might inclin use codeblock python depends_onpython howev would wrong spack assum version constraint exact would tri instal python exactli nonexist version correct way specifi would codeblock python depends_onpython spec contain version list rang individu version separ comma exampl need boost newer known issu say codeblock python depends_onboost _dependencytyp depend type depend creat equal spack allow specifi exactli kind depend need exampl codeblock python depends_oncmak typebuild depends_onpynumpi typebuild run depends_onlibelf typebuild link depends_onpypytest typetest follow depend type avail build depend ad path pythonpath buildtim link depend ad spack compil wrapper automat inject appropri linker flag includ l rpathrunpath handl run depend ad path pythonpath runtim true spack load modul file spack write test depend ad path pythonpath buildtim differ build test test depend built user request unit test spack instal test one advantag build depend type although depend need instal order packag built uninstal without concern afterward link run disallow uninstal depend would break packag anoth consequ buildonli depend affect hash packag true test depend depend type specifi spack use default build link common case compil languag noncompil packag like python modul commonli use build run mean compil wrapper dont need inject depend prefixlib directori packag need path pythonpath build process later user want run packag condit depend may packag requir depend certain condit exampl may packag option mpi support mpi depend want enabl mpi support packag case could say someth like codeblock python variantmpi defaultfals descriptionen mpi support depends_onmpi whenmpi includ constraint variant version compil etc modsyntaxspackspec spec written command line dependencyfeatur packag isnt typic use save time make condit sinc spack build depend unless requir spec _dependency_dependency_patch depend patch packag maintain special patch depend either add new featur fix bug typic make packag harder maintain encourag develop upstream contribut back chang rather maintain patch howev case possibl upstream mayb depend develop dont accept chang mayb havent time integr time like spack depends_on direct option take patch list patch codeblock python class specialtoolpackag depends_onbinutil patchesspecialbinutilsfeaturepatch specialtool packag requir special featur binutil provid extra patchesfilenam keyword argument similar patch direct patching__ one small differ specialtool respons patch live specialtool directori packag repositori binutil directori need someth sophist simpli nest patch direct insid depends_on codeblock python class specialtoolpackag depends_on binutil patchespatchspecialbinutilsfeaturepatch level condit binutil condit specialtool note two option condit one patch direct depends_on condit patch direct appli binutil packag patch condit depends_on appli specialtool see patch direct patching__ detail argument patch direct take final need multipl patch depend provid list patch eg codeblock python class specialtoolpackag depends_on binutil patch binutilsbugfixpatch binutilsbugfixpatch patchhttpsexamplecomspecialbinutilsfeaturepatch shacafbededcedcefadadfcbfcdf patch direct patch appli order appear packag file case list note may wonder whether depend patch interfer packag depend binutil wont describ patching_ patch packag add sha patch packag spec mean differ uniqu hash version without patch patch version coexist unpatch version spack support handling_rpaths_ guarante instal find right version two packag depend binutil patch way use singl instal binutil _setupdependentenviron influenc depend built run spack provid mechan depend influenc environ depend overrid methsetup_dependent_run_environ spackpackagepackagebasesetup_dependent_run_environ methsetup_dependent_build_environ spackpackagepackagebasesetup_dependent_build_environ method qt packag instanc use call literalinclud _spack_rootvarspackreposbuiltinpackagesqtpackagepi pyobject qtsetup_dependent_build_environ lineno set qtdir environ variabl packag depend particular qt instal find anoth good exampl depend influenc build environ depend python packag literalinclud _spack_rootvarspackreposbuiltinpackagespythonpackagepi pyobject pythonsetup_dependent_build_environ lineno method ensur packag depend python pythonpath pythonhom path environ variabl set appropri start instal make thing even simpler python setuppi command also insert modul scope depend overrid third method call methsetup_dependent_packag spackpackagepackagebasesetup_dependent_packag literalinclud _spack_rootvarspackreposbuiltinpackagespythonpackagepi pyobject pythonsetup_dependent_packag lineno allow python packag simpl instal procedur like follow codeblock python def installself spec prefix setup_pyinstal prefixformatprefix final python packag take also care modif pythonpath allow depend run correctli literalinclud _spack_rootvarspackreposbuiltinpackagespythonpackagepi pyobject pythonsetup_dependent_run_environ lineno _packaging_conflict conflict sometim packag known bug limit would prevent build eg depend certain compil spack make possibl express constraint conflict direct ad follow packag codeblock python conflictsintel msgmynicepackag v built intel icc pleas use newer releas express fact current packag built intel compil tri instal version argument omit case conflict alway activ conflict alway evalu concret step perform match found detail error messag shown user add addit messag via msg paramet conflict provid specif instruct user _packaging_extens extens spack support packag extens document extens refextens section document make extend packag extens support extens packag need set extend properti true eg codeblock python class pythonpackag extend true make packag extens simpli add extend call packag definit pass name extend packag codeblock python class pynumpypackag extendspython pynumpi packag use argument spack activ activ file prefix symbol link prefix python packag ad addit constraint packag produc python extens compat python python case depends_on declar made addit extend declar codeblock python class icebinpackag extendspython whenpython depends_onpython whenpython mani packag produc python extens variant other extend python appropri variant select may accomplish condit extend declar codeblock python class foolibpackag variantpython defaulttru descriptionbuild python extens modul extendspython whenpython sometim certain file one packag conflict anoth mean activ symlink time case tell spack ignor file activ codeblock python class pysncosmopackag pysncosmo binari duplic pyastropi extendspython ignorerbin depends_onpyastropi code prevent everyth prefixbin directori link activ time note call either depends_on extend one packag exampl depends_onpython extendspython packag extend impli depends_on view cover reffilesystemview spack view command use symlink number packag merg prefix method packageviewmixin overridden custom packag ad view gener use creat copi specif file rather symlink symlink work exampl python overrid add_files_to_view order creat copi python binari sinc real path python execut use detect extens consequ python extens packag inherit pythonpackag likewis overrid add_files_to_view order rewrit shebang line point python interpret activ deactiv ad extens view refer activ view maintain spack instal prefix extende call global activ activ may involv updat central state maintain extende packag addit work ad extens compar nonextens packag spack packag class default activ deactiv implement handl symbol link extens prefix specifi view extend packag overrid method add custom activatedeactiv logic exampl activ deactiv method python class handl symbol link extens also handl detail surround python pth file aspect python packag spack extens mechan design extens packag like rubi r perl etc provid custom extens manag logic may handl modul way python let look python activ function literalinclud _spack_rootvarspackreposbuiltinpackagespythonpackagepi pyobject pythonactiv lineno function call extende python first call activ superclass handl symlink extens packag prefix specifi view special handl easyinstallpth file part python setuptool deactiv behav similarli activ unlink file literalinclud _spack_rootvarspackreposbuiltinpackagespythonpackagepi pyobject pythondeactiv lineno method call custom function python packag see sourc spack python packag detail activ argument may notic activ function defin take keyword argument keyword argument extend pass activ deactiv capabl allow extens custom activ pass argument extende extende likewis implement custom activ deactiv function suit need keyword argument support default ignor argument take regex list regex predic determin file symlink activ _virtualdepend virtual depend case one packag satisfi anoth packag depend one way happen packag depend particular interfac multipl implement interfac packag could built common interfac hpc messag pass interfac mpi httpwwwmcsanlgovresearchprojectsmpi_ use mani largescal parallel applic mpi sever differ implement eg mpich httpwwwmpichorg_ openmpi httpwwwopenmpiorg_ mvapich httpmvapichcseohiostateedu_ scientif applic built one complic matter mpi standard abi packag built one implement simpli relink anoth implement mani packag manag handl interfac like requir mani similar packag file eg foo foomvapich foompich spack avoid explos packag file provid support virtual depend provid spack mpi handl virtual packag packag like mpileak depend like packag suppli depends_on call packag definit exampl codeblock python lineno emphasizelin class mpileakspackag homepag httpsgithubcomhpcmpileak url httpsgithubcomhpcmpileaksreleasesdownloadvmpileakstargz version cbadcdaa depends_onmpi depends_onadeptutil depends_oncallpath callpath adeptutil concret packag actual packag file mpi say virtual packag syntax depends_on look insid packag file mpi implement say mpich well see someth like codeblock python class mpichpackag providesmpi providesmpi call tell spack mpich packag use satisfi depend packag depends_onmpi version interfac pass spec depends_on pass spec provid add constraint allow spack support notion version interfac mpi standard gone mani revis new function ad revis standard version number packag may requir recent implement support mpi function mpi version may provid mpi other may need mpi higher indic ad version constraint spec pass provid codeblock python providesmpi suppos provid call mpich packag say mpich provid mpi support version packag depends_onmpi spack build packag mpich provid packag may provid differ version interfac depend version simplifi provid call mpich make explan easier realiti mpich call provid codeblock python providesmpi providesmpi argument provid allow specifi option constraint provid packag provid provid provid declar virtual spec match constraint claus mpich version higher provid mpi version mpich version higher provid mpi virtual packag version qualifi ensur spack select suitabl high version mpich satisfi packag depends_on particular version mpi also prevent user build low version mpich exampl suppos packag foo declar codeblock python class foopackag depends_onmpi suppos user invok spack instal like codeblock consol spack instal foo mpich spack fail constraint violat version mpich request low mpi requir foo _abstractandconcret abstract concret spec weve seen spec constraint specifi refon command line secspec within packag definit talk spack put inform togeth run codeblock consol spack instal mpileak callpathdebug libelf spack pars command line build spec descript spec say mpileak built callpath librari debug option enabl libelf version spack also look depends_on call packag build spec spec command line spec built packag descript combin constraint check make sure theyr satisfi done call abstract spec abstract spec partial specifi word could describ one build packag spack make thing easier user specifi much packag spec care here exampl partial spec dag base constraint codeblock none mpileak callpathdebug dyninst libdwarf libelf mpi graphviz digraph mpileak mpi mpileak callpathdebug mpi callpathdebug dyninst dyninst libdwarf libelf dyninst libelf diagram show spec dag output tree success level indent repres dependson relationship dag see packag annot constraint packag annot annot mean user doesnt care configur packag built long work concret abstract spec use user cant instal abstract spec spack take abstract spec fill remain unspecifi part order instal process call concret concret happen time user run spack instal time instal method call concret version spec might look like codeblock none mpileaksgcc archlinuxdebianx_ callpathgccdebug archlinuxdebianx_ dyninstgcc archlinuxdebianx_ libdwarfgcc archlinuxdebianx_ libelfgcc archlinuxdebianx_ mpichgcc archlinuxdebianx_ graphviz digraph mpileaksngccn archlinuxdebianx_ mpichngccn archlinuxdebianx_ mpileaksngccn archlinuxdebianx_ callpathngccdebugn archlinuxdebianx_ mpichngccn archlinuxdebianx_ callpathngccdebugn archlinuxdebianx_ dyninstngccn archlinuxdebianx_ dyninstngccn archlinuxdebianx_ libdwarfngccn archlinuxdebianx_ libelfngccn archlinuxdebianx_ dyninstngccn archlinuxdebianx_ libelfngccn archlinuxdebianx_ version compil platform fill singl version version rang packag decis configur made point spack call instal method packag concret spack base certain select polici tell spack select eg version one specifi explicitli concret polici discuss detail refconfigur site use spack custom match prefer user _cmdspackspec spack spec arbitrari spec see result concret run spack spec exampl codeblock consol spack spec dyninst dyninst libdwarf libelf dyninstgcc archlinuxdebianx_ libdwarfgcc archlinuxdebianx_ libelfgcc archlinuxdebianx_ use want know exactli spack ask particular spec _concretizationpolici concret polici user may certain prefer packag concret system exampl one user may prefer packag built openmpi intel compil anoth user may prefer packag built mvapich gcc see refconcretizationprefer section detail _group_when_spec common constraint case packag need mani direct share whole argument part spack allow group common part context manag codeblock python class gccautotoolspackag whennvptx depends_oncuda conflict msgnvptx support gcc conflictslanguagesada conflictslanguagesbrig conflictslanguagesgo snippet equival verbos codeblock python class gccautotoolspackag depends_oncuda whennvptx conflict whennvptx msgnvptx support gcc conflictslanguagesada whennvptx conflictslanguagesbrig whennvptx conflictslanguagesgo whennvptx constraint stem context ad explicitli present argument direct codeblock python whenelpa depends_onelpaopenmp whenopenmp equival codeblock python depends_onelpaopenmp whenopenmpelpa constraint nest context manag also combin togeth rare need recommend _installmethod conflict spec suppos user need instal packag c depend packag b packag build librari python extens packag b build librari python extens packag b load togeth python runtim codeblock python class apackag variantpython defaulttru enabl python bind depends_onpython whenpython def installself spec prefix whatev necessari enabledis python bind accord variant class bpackag variantpython defaulttru enabl python bind depends_onpython whenpython def installself spec prefix whatev necessari enabledis python bind accord variant packag c need use librari packag b need either python extens case packag c simpli depend python variant b codeblock python class cpackag depends_onapython depends_onbpython may requir b built twice user wish use python extens provid python python use littl extra disk space solut seriou problem _installation_procedur implement instal procedur last element packag instal procedur real work instal happen main part packag youll need custom piec softwar defin instal procedur mean overrid set method attribut call point instal packag packag base class usual special given build system determin actual set entiti avail overrid class current provid spack base class purpos classspackpackagepackag gener base class special build system classspackbuild_systemsmakefilemakefilepackag special class packag built invok handwritten makefil classspackbuild_systemsautotoolsautotoolspackag special class packag built use gnu autotool classspackbuild_systemscmakecmakepackag special class packag built use cmake classspackbuild_systemscudacudapackag helper class packag use cuda classspackbuild_systemsqmakeqmakepackag special class packag built use qmake classspackbuild_systemsrocmrocmpackag helper class packag use rocm classspackbuild_systemssconssconspackag special class packag built use scon classspackbuild_systemswafwafpackag special class packag built use waf classspackbuild_systemsrrpackag special class r extens classspackbuild_systemsoctaveoctavepackag special class octav packag classspackbuild_systemspythonpythonpackag special class python extens classspackbuild_systemsperlperlpackag special class perl extens classspackbuild_systemsintelintelpackag special class licens intel softwar note choic appropri base class packag case packag dont worri select right base class packag spack creat make appropri choic behalf rare case manual intervent need need stress packag base class depend build system use languag packag exampl python extens instal cmake would extendspython subclass classspackbuild_systemscmakecmakepackag instal pipelin user run spack instal spack fetch archiv correct version softwar expand archiv set current work directori root directori expand archiv depend base class packag consider execut certain number phase reflect way packag type usual built name order phase execut obtain either read api doc pymodspackbuild_system use spack info command codeblock consol emphasizelin spack info autotoolspackag homepag httpswwwgnuorgsoftwaremmhtml safe version ftpftpgnuorggnummtargz variant name default descript sigsegv build libsigsegv depend instal phase autoreconf configur build instal build depend libsigsegv typic phase default implement fit common case literalinclud _spack_rootlibspackspackbuild_systemsautotoolspi pyobject autotoolspackageconfigur lineno thu suffici packag overrid build system specif helper method attribut provid instanc configur argument literalinclud _spack_rootvarspackreposbuiltinpackagesmpackagepi pyobject mconfigure_arg lineno note specif build system list attribut overridden finetun instal packag without overrid entir phase inform place go api doc pymodspackbuild_system modul overrid entir phase extrem case may necessari overrid entir phase regardless build system signatur exampl signatur instal phase codeblock python class foopackag def installself spec prefix self use python instanc method packag case instanc foo extend packag api doc packag object see pyclasspackag spackpackagepackag spec concret spec object creat spack abstract spec suppli user describ instal type pyclassspec spackspecspec prefix path instal method copi build target act like string actual special type pyclassprefix spackutilprefixprefix argument spec prefix pass conveni alway correspond selfspec selfspecprefix respect mention refinstallenviron usual need refer depend explicitli packag file compil wrapper take care heavi lift time though need refer instal locat depend need someth differ depend version compil depend etc packag built paramet give access type inform _installenviron build environ gener much differ instal method would instal packag command line fact may need less would command line spack tri set environ variabl modifi compil call appear build system your build standard system instal everyth obvious that go cover build system make easi port packag spack use standard build system usual autotool cmake build instal easi build use custom makefil may need add logic modifi makefil remaind section cover way spack build environ work fork instal give packag free reign instal environ spack fork new process time invok packag instal method allow packag sandbox build environ without impact environ ofoth job main spack process run packag free chang environ modifi spack intern instal call dedic process environ variabl spack set number standard environ variabl serv two purpos make build system use spack compil wrapper build allow build system find depend easili compil environ variabl spack set variabl purpos cc c compil cxx c compil f fortran compil fc fortran compil spack set variabl point compil wrapper cover reftheir section compilerwrapp standard variabl respect build system project use autotool cmake pick automat run configur cmake instal function mani tradit build use gnu make bsd make also respect variabl may work system build system automat pick variabl environ simpli pass command line use patch part build process get correct compil project build system also file edit command use describ later section file manipul filemanipulation__ addit compil variabl variabl set enter instal packag locat depend easili path set point bin directori depend cmake_prefix_path path depend prefix cmake pkg_config_path path pkgconfig directori depend pythonpath path sitepackag dir python depend path set point depend bin directori use tool instal depend packag build time exampl mpich_rootbinmpicc frequent use depend mpich cmake_prefix_path contain colonsepar list prefix cmake search depend librari header caus standard cmake find command look path depend manual specifi argument like ddependency_dirpathtodepend cmake cmake document httpwwwcmakeorgcmakehelpvvariablecmake_prefix_pathhtml_ pkg_config_path packag attempt discov depend use gnu pkgconfig tool similar cmake_prefix_path allow build automat discov depend want see environ packag build want run command environ test use refcmdspackbuildenv command document fail build sometim dont want packag success instal unless condit true explicitli caus build fail instal rais installerror exampl codeblock python specarchitecturestartswithdarwin rais installerrorthi packag build mac os x _shellwrapp shell command function recal instal method libelf literalinclud _spack_rootvarspackreposbuiltinpackageslibelfpackagepi pyobject libelfinstal lineno normal python youd write someth like order execut shell command codeblock python import subprocess subprocesscheck_callconfigur prefixformatprefix weve tri make bit easier provid callabl wrapper object shell command default configur cmake make wrapper provid call natur packag file need command use get codeblock python sed whichs sedsfoobar filenam function search path applic callabl wrapper also allow spack provid special featur exampl spack make parallel default spack figur number core machin pass appropri valu jnumjob call make see parallel packag attribut attribute_parallel packag file suppli keyword argument parallelfals make wrapper disabl parallel make libelf packag allow us avoid race condit librari build system compil flag compil flag set user spec object pass build one three way default build environ inject flag directli compil command use spack compil wrapper case build system requir knowledg compil flag regist build system altern pass environ variabl build system argument flag_handl method use chang behavior packag overrid flag_handl method one three builtin flag_handl builtin flag_handl name inject_flag env_flag build_system_flag inject_flag method default env_flag method put flag environ variabl make use implicit variabl cflag cxxflag etc build_system_flag method add flag argument invoc configur cmake respect warn pass compil flag use build system argument support cmake autotool packag individu packag may also differ whether properli respect argument individu packag may also defin flag_handl method flag_handl method take packag instanc self name flag list valu flag call six compil flag support spack return tripl injf envf bsf injf list flag inject via spack compil wrapper envf list flag set appropri environ variabl bsf list flag pass build system argument warn pass nonempti list flag bsf build system support build system argument result error definit three builtin flag handler codeblock python def inject_flagspkg name flag return flag none none def env_flagspkg name flag return none flag none def build_system_flagspkg name flag return none none flag note return none equival flag_handl method packag overrid default behavior either specifi one builtin flag handler codeblock python flag_handl env_flag implement flag_handl method suppos packag foo need pass cflag cxxflag cppflag environ rest flag compil wrapper inject need add lbar ldlib follow flag handler method accomplish codeblock python def flag_handlerself name flag name cflag cxxflag cppflag return none flag none elif name ldlib flagsappendlbar return flag none none method pass valu environ variabl import overrid variabl unnecessarili eg set envcflag packag method use nondefault flag handler setup_environ setup_dependent_environ method use append_flag method environmentmodif class append valu list flag whenev flag handler env_flag packag pass flag environ build system manual instal method exampl recommend use default flag handler remov manual refer implement custom flag handler method add desir flag export environ variabl pass build system manual flag pass like interfer env_flag build_system_flag method rare circumst compil run small unit test packag develop may need know appropri compil flag enabl featur like openmp c c alik end compil class spack implement follow properti openmp_flag cxx_flag cxx_flag cxx_flag cxx_flag access packag selfcompilercxx_flag alik note implement given compil version support featur error produc therefor packag develop also use properti assert compil support request featur handi packag support addit variant like codeblock python variantopenmp defaulttru descriptionen openmp support _blas_lapack_scalapack bla lapack scalapack librari multipl packag provid implement bla lapack scalapack routin name result static andor share librari differ packag packag order make instal method independ choic bla implement packag provid implement properti def blas_libsself return object librarylist httpsspackreadthedocsioenlatestllnlutilhtmlllnlutilfilesystemlibrarylist_ type simplifi usag set librari appli packag provid lapack scalapack packag develop request use interfac common usag case space separ list full path codeblock python lapack_bla speclapacklib specblaslib optionsappend withblaslapacklibformatlapack_blasjoin name librari directori contain codeblock python bla specblaslib optionsextend dblas_library_namesformatjoinblasnam dblas_library_dirsformatjoinblasdirectori search link flag codeblock python math_lib specscalapacklib speclapacklib specblaslib optionsappend dmath_libsstringformatmath_libsld_flag inform see document librarylist httpsspackreadthedocsioenlatestllnlutilhtmlllnlutilfilesystemlibrarylist_ class _prefixobject prefix object spack pass prefix paramet instal method pass configur cmake instal eg codeblock python configureprefixformatprefix part prefix object behav exactli like string packag instal target implement poorli like libdwarf may need manual copi thing particular directori prefix refer standard subdirectori without construct path eg codeblock python def installself spec prefix mkdirpprefixbin installfootool prefixbin mkdirpprefixinclud installfooh prefixinclud mkdirpprefixlib installlibfooa prefixlib attribut object creat fli request follow work prefix attribut locat prefixbin prefixbin prefixlib prefixlib prefixshareman prefixshareman prefixfoobarbaz prefixfoobarbaz cours work file directori valid python variabl name file directori contain dash dot use join instead codeblock python prefixlibjoinlibza _specobject spec object instal call part build process set correct version tarbal download expand environ variabl like cc cxx set point correct compil version instal prefix alreadi select pass prefix case need get configur cmake anoth instal work correctli time need know build configur exampl softwar requir pass special paramet configur like withlibelfpathtolibelf withmpich might also need suppli special compil flag depend compil inform avail spec test spec constraint test whether spec configur certain way use satisfi method exampl want check whether packag version particular rang use spec eg codeblock python configure_arg prefixformatprefix specsatisfi configure_argsappendcxxflagsdwith_featur configureconfigure_arg work compil codeblock python specsatisfiesgcc configure_argsappendcxxflagsg specsatisfiesintel configure_argsappendcxxflagsxss fast combin spec constraint codeblock python specsatisfiesintel ttyerrorvers break use intel compil also similar satisfact test depend codeblock python specsatisfiesdyninst configure_argsappendcxxflagsdspecial_dyninst_featur could allow easili work around bug particular depend version use satisfi test particular depend eg foosatisfiesopenmpi foosatisfiesmpich use python builtin oper codeblock python libelf spec print packag depend libelf use virtual depend easili see implement select build codeblock python openmpi spec configure_argsappendwithopenmpi elif mpich spec configure_argsappendwithmpich elif mvapich spec configure_argsappendwithmvapich also bit concis satisfi differ two function satisfi test whether spec constraint overlap test whether spec depend satisfi provid spec architectur specifi mention refsupportformicroarchitectur node concret spec object architectur attribut triplet platform os target three item queri take decis configur build instal packag queri platform oper system sometim action taken instal packag might differ depend platform instal case use condit codeblock python specplatform darwin action specif darwin argsappenddarwinspecificflag branch base current spec platform need make packag direct condit platform instead employ usual spec syntax pass correspond constraint appropri argument direct codeblock python class libnlautotoolspackag conflictsplatformdarwin msglibnl requir freebsd linux similar consider also valid os part spec architectur instanc codeblock python class glibautotoolspackag patcholdkernelspatch whenoscento appli patch oper system cento note even though experienc python programm might recogn way retriev inform platform codeblock python sysplatform darwin action specif darwin argsappenddarwinspecificflag queri spec architectur platform consid prefer key differ queri sysplatform anyth similar alway bound host interpret run spack locat wont work correctli environ crosscompil requir queri target microarchitectur third item architectur tupl target abstract inform cpu microarchitectur list target known spack obtain via command line commandoutput spack arch knowntarget within direct name use match particular target codeblock python class juliapackag patch appli icelak microarchitectur patchicelakepatch whentargeticelak also possibl select architectur belong famili use open rang codeblock python class juliapackag patch appli x_ microarchitectur trail colon denot open rang target patchgeneric_x_patch whentargetx_ way resembl shown refversionsandfetch version target object realli shine though use method call configur build instal time case test target support featur instanc codeblock python avx spectarget argsappendwithavx snippet append withavx item list argument correspond featur support current target sometim need take differ action base architectur famili specif microarchitectur case check famili attribut codeblock python spectargetfamili ppcle argsappendenablepow possibl valu famili attribut display spack arch knowntarget gener architectur famili header final possibl perform action base whether current microarchitectur compat known one codeblock python spectarget haswel argsappendneedsatleasthaswel snippet add item list configur option current architectur superset haswel said otherwis current architectur later microarchitectur still compat haswel admonit use spack unknown microarchitectur spack use unknown microarchitectur tri perform best match featur detect select closest microarchitectur inform case noth match creat fli new gener architectur done allow user still abl use spack work softwar built wont probabl optim could need newer compil build newer architectur may need newer version spack new architectur correctli label access depend may need get file binari that instal prefix one depend subscript spec codeblock python specmpi valu bracket need packag name spec need depend packag oper fail exampl code fail spec doesnt depend mpi valu return anoth spec object thing would packag spec codeblock python specmpiprefixbin specmpivers _multimethod multimethod spack allow make multipl version instanc function packag base whether packag spec satisfi particular criteria annot let packag declar multipl version method like instal depend packag spec exampl codeblock python class somepackagepackag def installself prefix default instal whenarchchaos__x__ib def installself prefix execut instead default instal packag sys_typ chaos__x__ib whenarchlinuxdebianx_ def installself prefix execut packag sys_typ linuxdebianx_ code three version instal two special particular platform version call depend architectur packag spec note work method instal well part instal platform specif could someth like codeblock python class somepackagepackag virtual depend mpi could resolv mpich mpich openmpi depends_onmpi def setupself noth default case pass whenopenmpi def setupself someth special built openmpi mpi implement def installself prefix common instal stuff selfsetup common instal stuff write multipl spec satisfi packag spec exampl codeblock python class somepackagepackag depends_onmpi def setup_mpiself default call spec match pass whenmpi def setup_mpiself call mpi version higher pass whenmpi def setup_mpiself call mpi version higher pass whenmpi def setup_mpiself call mpi version higher pass situat like first match spec declar order call spec match default method one without decor call warn default version decor method must alway come first otherwis overrid platformspecif version there much get around way decor work _compilerwrapp compil wrapper mention cc cxx f fc set point spack compil wrapper simpli call cc c f f live spack_rootlibspackenv spack_rootlibspackenv ad first path environ variabl instal run system compil pick instead compil wrapper point singl compil wrapper script figur real compil build come either spec concret abstractandconcrete_ user explicitli ask particular compil use eg intel command line addit invok right compil compil wrapper add flag compil line depend easili found flag ad depend exist compiletim librari search path ldep_prefixlib ldep_prefixlib runtim librari search path rpath rpath_flagdep_prefixlib rpath_flagdep_prefixlib includ search path idep_prefixinclud exampl would libdwarf build one depend libelf everi call cc libdwarf build ilibelf_prefixinclud llibelf_prefixlib rpath_flaglibelf_prefixlib insert command line done transpar project build system think use system libelf readili avail insert extra l etc command line anoth use consequ often add extra paramet configur line get autotool find depend libdwarf instal method call configur like codeblock python configureprefix prefix l argument configur success find libdwarfh libdwarfso without packag provid withlibdwarfpathtolibdwarf command line note compil rpath_flag wlrpath howev nag pass flag gcc instead pass directli linker therefor rpath_flag doubli wrap wlwlrpath rpath_flag overridden compil specif basi libspackspackcompilerscompilerpi compil wrapper also pass compil flag specifi user command line cflag cxxflag fflag cppflag ldflag andor ldlib overrid canon autotool flag name allcap may pass build particularli challeng packag script mpi support spack common high perform comput softwarepackag use messag pass interfac mpi result conret given packag built use differ implement mpi openmpi mpich intelmpi packag declar depends_onmpi built mpi implement scenario configur packag one provid appropri mpi compil wrapper mpicc mpic howev differ implement mpi may differ name wrapper spack provid idiomat way use mpi compil packag use mpi wrapper compil whole build instal method codeblock python envcc specmpimpicc envcxx specmpimpicxx envf specmpimpif envfc specmpimpifc that longer explan work dont tri forc particular build method packag decis use mpi wrapper depend way packag written common practic work loos three type mpi build build system work well without wrapper treat mpi extern librari person build suppli includeslibsetc fairli uncommon other realli want wrapper assum your use mpi compil ie mechan add mpi includeslibrariesetc cmake findmpi need compil wrapper use extract l argument treat mpi like regular librari note cmake build fall case either dont know dont like cmake findmpi support assum mpi compil also autotool build fall case eg autotool version cmake findmpi httpsgithubcomtgamblinlibrablobmastermlx_find_mpim_ given leav use wrapper packag spack support three way build mpi packag packag convent mention instal method cc cxx f fc point spack wrapper around chosen compil spack wrapper mpi compil wrapper though automat add l wlrpath arg depend similar way mpi wrapper bit differ also add l argument mpi librari add special argument trigger build option mpi program case gener dont need patch makefil add configur arg normal would case dont need much anyth spack put mpi compil wrapper path build find interrog case thing bit complic youll need tell build use mpi compil wrapper instead spack compil wrapper take line like codeblock python envcc specmpimpicc envcxx specmpimpicxx envf specmpimpif envfc specmpimpifc pass cc cxx etc directli build eg withccpath youll want substitut specmpimpicc instead eg codeblock python configureprefix prefix withcc specmpimpicc may think lose includ librari path rpath spack compil wrapper get weve actual set thing mpi compil wrapper use spack compil wrapper run within spack use mpi wrapper realli simpl code specmpi ok work packag virtual depend like mpi refer specmpi within instal get concret mpi implement depend dag spec object like one pass instal mpi implement set addit properti help eg mvapich youll find literalinclud _spack_rootvarspackreposbuiltinpackagesmvapichpackagepi pyobject mvapichsetup_dependent_packag code allow mvapich packag associ mpicc properti mvapich node dag depend access openmpi mpich similar thing matter mpi your use specmpimpicc get locat mpi compil allow us fairli simpl polymorph interfac inform virtual depend like mpi wrap wrapper spack like use compil wrapper make easi add rpath build tri hard ensur build use right depend doesnt play nice default mpi coupl trick build mpi spack wrapper mpicc friend instal hardcod path spack wrapper use outsid spack fail work within spack fix patch mpicc friend use regular compil look filter_compil method mpich openmpi mvapich detail still want use spack compil wrapper spack call mpicc luckili wrapper mainstream mpi implement provid environ variabl allow us dynam set compil use mpicc mpicxx etc deni past code spack build environ set mpicc mpicxx etc mpich deriv ompi_cc ompi_cxx etc openmpi make mpi compil wrapper use spack compil wrapper depend still get proper rpath even use mpi wrapper mpi cray machin cray program environ notabl use compil wrapper function like mpi wrapper cray system cc cc ftn wrapper mpi compil wrapper assum youll use build cray dont bother mpicc mpicxx etc spack mpi implement set specmpimpicc point spack wrapper wrap cray wrapper wrap regular compil includ mpi flag may seem complic packag mean code use mpi wrapper work even even cray codeblock python envcc specmpimpicc cray specmpimpicc spack_cc _checking_an_instal check instal packag appear instal success mean actual instal correctli continu work indefinit number possibl point failur spack provid featur check softwar along way failur occur instal process build may start softwar end fulli instal instal softwar may work expect softwar may work instal due chang system may stop work day week month instal section describ spack support check perform instal former check refer buildtim test latter standalon smoke test _build_timetest buildtim test spack infer statu build base content instal prefix success assum anyth eg file directori written instal complet otherwis build assum fail howev presenc instal prefix content suffici indic success consid simpl autotool build use follow command codeblock consol configur prefixpathtoinstallationprefix make make instal standard autotool cmake write anyth prefix configur make command file written make instal build complet note want learn autotool cmake packag spack refer refautotoolspackag autotoolspackag refcmakepackag cmakepackag respect check build progress satisfactorili specif file directori expect success instal add basic fast saniti check also add check perform one instal phase _sanitycheck ad saniti check unfortun mani build scientif softwar modifi instal prefix make instal build like fals report success error occur instal complet simpl saniti check use identifi file directori requir success instal spack check presenc file directori instal run list file directori miss build fail instal prefix remov exist spack consid build success saniti check perspect keep prefix place exampl saniti check refram packag specifi eight path must exist within instal prefix instal method complet codeblock python class reframepackag saniti check sanity_check_is_fil join_pathbin refram sanity_check_is_dir bin config doc refram tutori unittest cscscheck spack ensur instal creat file selfprefixbinrefram also check exist follow directori selfprefixbin selfprefixconfig selfprefixdoc selfprefixrefram selfprefixtutori selfprefixunittest selfprefixcscscheck note must use sanity_check_is_fil specifi requir file sanity_check_is_dir requir directori _install_phasetest ad instal phase test sometim packag appear build correctli runtim behavior issu discov later stage full softwar stack reli built check perform differ phase packag instal possibl avoid type problem check builtin differ build system other need ad packag builtin instal phase test provid packag inherit select refbuild system buildsystem name convent use identifi typic test identifi system gener wont need add anyth packag take advantag test softwar build system compli convent otherwis youll want need overrid postphas method perform check listtabl builtin instal phase test headerrow build system class postbuild phase method run postinstal phase method run refautotoolspackag autotoolspackag check make test make check installcheck make installcheck refcmakepackag cmakepackag check make check make test applic refmakefilepackag makefilepackag check make test make check installcheck make installcheck refmesonpackag mesonpackag check make test make check applic refperlpackag perlpackag check make test applic refpythonpackag pythonpackag applic test modul import refqmakepackag qmakepackag check make check applic refsconspackag sconspackag build_test must overridden applic refsippackag sippackag applic test modul import exampl libelf packag inherit autotoolspackag makefil standard check target spack automat run make check build phase instal use test option codeblock consol spack instal testroot libelf addit overrid builtin build system instal phase test write instal phase test need use two decor phase test method run_aft on_package_attribut first decor tell spack instal process run test method instal process name provid instal phase second decor tell spack run check test option provid command line note sure place direct test method order run_aft on_package_attribut note also want sure packag support phase use run_aft direct exampl packagebas support instal phase autotoolspackag makefilepackag support instal build phase assum build instal phase avail could add addit check perform phase base skeleton provid codeblock python class yourmakefilepackagemakefilepackag run_afterbuild on_package_attributesrun_teststru def check_buildself add custom postbuild phase test pass run_afterinstal on_package_attributesrun_teststru def check_installself add custom postinstal phase test pass note could also schedul work done given phase use run_befor decor way concret exampl refram packag mention previous simpl instal phase check run instal execut check implement follow codeblock python class reframepackag check run refram run_afterinstal on_package_attributesrun_teststru def check_listself working_dirselfstagesource_path refram executablejoin_pathselfprefix bin refram reframel warn api ad test yet consid stabl may chang futur releas _cmdspacktest standalon smoke test buildtim test integr instal process standalon test independ process consequ test perform day even week softwar instal standalon test check run rel quickli order minut ideal execut aspect instal softwar least key function note execut speed import test intend quickli assess whether instal softwar work system fail standalon test indic reason proceed resourceintens test pass standalon smoke test lead thorough test extens unit regress test test run scale spack support thorough test work progress standalon test test stage directori configur test compil build softwar compil use build packag use file cach build test instal custom file sourc data expect output ad use test configur test stage directori standalon test reli stage directori build run track result default directori spacktest defin refetcspackdefaultsconfigyaml configyaml configur locat highlevel config ad chang test_stag path appropri configyaml file codeblock yaml config test_stag pathtostag packag access path test process use selftest_suitestag note test stage path establish entir suit mean root directori spec instal spack test run command spec get stage subdirectori enabl test compil standalon test requir access compil packag built especi libraryonli packag must enabl load packag compil configur set test_requires_compil properti true packag exampl codeblock python class mypackagepackag test_requires_compil true set properti true make compil avail test environ canon environ variabl eg cc cxx fc f note recommend ad properti top packag attribut homepag url _cache_extra_test_sourc ad buildtim file note highli recommend reus buildtim test input file test instal softwar file easier keep synchron sinc resid within softwar repositori maintain custom instal test file spack packag use cache_extra_test_sourc method copi directori file build stage directori packag instal directori signatur cache_extra_test_sourc codeblock python def cache_extra_test_sourcesself src src string list string correspond path file subdirectori rel stage sourc copi correspond rel test path prefix content within subdirectori also copi exampl packag method copi everyth test subdirectori plu fooc barc file exampl implement shown note method name copy_test_sourc illustr purpos free use name suit packag key copi file build time standalon test use run_aft direct ensur associ file copi provid build stage codeblock python class mypackagepackag run_afterinstal def copy_test_sourcesself src test join_pathexampl fooc join_pathexampl barc selfcache_extra_test_sourcessrc case method copi associ file build stage softwar instal packag metadata directori result directori file cach special test subdirectori instal prefix path automat copi test stage directori standalon test packag test method access use selftest_suitecurrent_test_cache_dir properti exampl method would use follow path refer copi entri list src respect join_pathselftest_suitecurrent_test_cache_dir test join_pathselftest_suitecurrent_test_cache_dir exampl fooc join_pathselftest_suitecurrent_test_cache_dir exampl barc note librari develop want build associ test instal librari run note sourc input file gener recommend binari may also cach build process instal test packag writer maintain know whether would appropri ensur instal softwar continu work underli system evolv _cache_custom_fil ad custom file test may requir addit file avail build exampl includ test sourc file test input file test build script expect test output extra file ad test subdirectori packag spack repositori spack automat copi content directori test stage directori standalon test test method access file use selftest_suitecurrent_test_data_dir properti _expected_test_output_from_fil read expect output file helper function get_escaped_text_output avail packag retriev properli format text file contain output expect execut run use selfrun_test signatur get_escaped_text_output codeblock python def get_escaped_text_outputfilenam filenam path file contain expect output filenam refcustom file cache_custom_fil access use illustr simplifi version sqlite packag check codeblock python class sqliteautotoolspackag def testself test_data_dir selftest_suitecurrent_test_data_dir db_filenam test_data_dirjoinpackagesdb expect get_escaped_text_outputtest_data_dirjoindumpout selfrun_testsqlit db_filenam dump expect installedtru purposetest check dump output skip_missingfals expect output store spack packag maintain sourc actual prefer suppos packag sourc examplesfooc examplesfooout file copi standalon test purpos use refcache_extra_test_sourc cache_extra_test_sourc run_test method build execut examplesfoo packag retriev expect output examplesfooout use codeblock python class myfoopackagepackag def testself filenam join_pathselftest_suitecurrent_test_cache_dir exampl fooout expect get_escaped_text_outputfilenam altern suppos myfoopackag instal test sharetest output sharetestsoutput expect output foo assum still call fooout retriev follow codeblock python class myfoopackagepackag def testself filenam join_pathselfprefixsharetestsoutput fooout expect get_escaped_text_outputfilenam ad standalon test standalon test defin packag test method default test method noop youll want overrid implement test note packag method name test automat execut spack spack test run command perform exampl mypackag packag provid skeleton test method codeblock python class mypackagepackag def testself todo add quick check instal softwar pass standalon test run environ provid access packag depend includ testtyp depend standard python assert statement error report mechan use test method spack report error test failur implement multipl test test part within test method use run_test method invoc run separ manner allow test continu failur signatur run_test codeblock python def run_testself exe option expect statu installedfals purpos skip_missingfals work_dirnon argument follow mean exe execut run name exe requir found one path path environ variabl unless skip_miss true altern rel work_dir fulli qualifi path execut provid exe test fail result path within prefix packag test unless instal fals option list command line option option list string pass execut run default mean option provid execut expect option list expect output string spack requir everi string expect regex match part output test run eg expectedcomplet success converg output also includ expect failur output eg expectedfail converg expect output refread file expected_test_output_from_fil default expect spack check output statu option expect return code list return code correspond success execut provid eg statu support nonzero return code allow basic expect failur test well differ return code across version softwar default statu correspond success execut sens execut exit failur code rais except instal use requir exe within packag prefix true path exe requir within packag prefix otherwis path constrain default fals fulli qualifi path exe need within instal directori purpos option head describ test part output test written test log file argument serv searchabl head text log highlight start test part descript help debug fail test skip_miss use determin test skip true test part skip execut miss otherwis execut must exist option use test execut remov chang softwar evolv subsequ version default fals mean test execut must present instal version softwar work_dir path directori execut run default none correspond current directori access packag testrel file may need access file one locat write standalon test happen softwar repositori includ test sourc file includ file way build execut use instal header librari case may need refer file rel one root directori properti contain packag testrel directori path provid tabl listtabl directorytoproperti map headerrow root directori packag properti exampl packag instal file selfprefix selfprefixinclud selfprefixlib packag depend file selfspecdependencypackageprefix selfspectrilinosprefixinclud test suit stage file selftest_suitestag join_pathselftest_suitestag resultstxt stage cach buildtim file selftest_suitecurrent_test_cache_dir join_pathselftest_suitecurrent_test_cache_dir exampl fooc stage custom packag file selftest_suitecurrent_test_data_dir join_pathselftest_suitecurrent_test_data_dir hellof inherit standalon test standalon test defin parent eg refbuildsystem virtual eg refvirtualdepend packag avail packag inherit provid interfac packag respect tabl summar test includ provid packag execut standalon test listtabl inheritedprovid standalon test headerrow parentprovid packag standalon test c httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackagesc_ compil helloc run cxx httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackagescxx_ compil run sever hello program fortan httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackagesfortran_ compil run hello program f f mpi httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackagesmpi_ compil run mpi_hello c fortran pythonpackag build_systemspythonpackag import instal modul test gener import packag develop maintain provid addit standalon test custom packag one exampl packag add standalon smoke test openmpi packag httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackagesopenmpipackagepy_ preliminari set test packag perform follow check instal binari version option return expect version output select instal binari match expect make succe build exampl copi sourc directori packag instal output run copi built exampl match expect exampl run view standalon test output first set shown codeblock consol spack test run alia openmpi openmpi spack test openmpi test packag openmpieygjgv spack test result l openmpi spack test openmpi test packag openmpieygjgv result test suit openmpi openmpieygjgv pass test packag openmpieygjgv test ensur version mpicc spack_rootoptspacklinuxrhelbroadwellgccopenmpieygjgvekawforqaljltjindoarbinmpicc version g gcc red hat copyright c free softwar foundat inc free softwar see sourc copi condit warranti even merchant fit particular purpos pass test check mpirun output spack_rootoptspacklinuxrhelbroadwellgccopenmpieygjgvekawforqaljltjindoarbinmpirun n ls openmpieygjgv repo test_suitelock openmpieygjgvetestouttxt resultstxt pass test ensur abil build exampl usrbinmak mpicc g hello_cc hello_c mpicc g ring_cc ring_c mpicc g connectivity_cc connectivity_c mpicc g spc_examplec spc_exampl pass test check hello_c exampl output statu hello_c hello world open mpi v packag open mpi dahlgrenquartz distribut ident repo rev v aug pass test ensur copi exampl clean usrbinmak clean rm f hello_c hello_cxx hello_mpifh hello_usempi hello_usempif hello_oshmem hello_oshmemcxx hello_oshmemfh helloclass ring_c ring_cxx ring_mpifh ring_usempi ring_usempif ring_oshmem ring_oshmemfh ringclass connectivity_c oshmem_shmalloc oshmem_circular_shift oshmem_max_reduct oshmem_strided_put oshmem_symmetric_data spc_exampl pass test mpicc expect command statu spack_rootoptspacklinuxrhelbroadwellgccopenmpieygjgvekawforqaljltjindoarbinmpicc mpi_hello_c homespacktesthyzqeqlqfogfawlzxwgprqyvjhmsopenmpieygjgvedatampimpi_helloc pass test mpirun expect command statu spack_rootoptspacklinuxrhelbroadwellgccopenmpieygjgvekawforqaljltjindoarbinmpirun np mpi_hello_c hello world rank pass warn api ad run standalon test yet consid stabl may chang drastic futur releas packag standalon test refactor match chang api _cmdspacktestlist spack test list packag avail instal test found use spack test list command command output instal packag defin test method altern use option get list packag defin test method even instal inform refer spack test list httpsspackreadthedocsioenlatestcommand_indexhtmlspacktestlist_ _cmdspacktestrun spack test run instal test run one instal packag use spack test run command test suit creat provid spec spec provid test spec activ environ spec instal spack environ activ test suit name use alia option unalias test suit use content hash spec name commonli use debug option failfast stop test packag first failur failfirst stop test packag first failur test output written text log file default junit cdash output avail logformat option inform refer spack test run httpsspackreadthedocsioenlatestcommand_indexhtmlspacktestrun_ _cmdspacktestresult spack test result spack test result command show result complet test suit provid alia content hash limit report correspond test suit log option includ output gener associ test facilit debug fail option limit result shown fail test match packag inform refer spack test result httpsspackreadthedocsioenlatestcommand_indexhtmlspacktestresults_ _cmdspacktestfind spack test find spack test find command list alias content hash test suit whose result avail inform refer spack test find httpsspackreadthedocsioenlatestcommand_indexhtmlspacktestfind_ _cmdspacktestremov spack test remov spack test remov command remov test suit declutt test result directori prompt confirm remov test suit unless use yestoal option inform refer spack test remov httpsspackreadthedocsioenlatestcommand_indexhtmlspacktestremove_ _filemanipul file manipul function mani build perfect build lack instal target use system like cmake autotool standard way set compil option may need edit file instal file get work spack standard python code python rich librari function file manipul filter spack also provid number conveni function make life even easier function describ section function section includ simpli run codeblock python spack import alreadi part boilerpl packag creat spack creat filter function pyfuncfilter_fileregex repl filenam kwarg llnlutilfilesystemfilter_fil work like sed python regular express syntax take regular express replac set file repl raw string callabl function raw string contain etc refer captur group regular express callabl pass python matchobject return suitabl replac string particular match exampl filter makefil forc use spack compil wrapper codeblock python filter_filerscc cc spack_cc makefil filter_filerscxx cxx spack_cxx makefil filter_filersf f spack_f makefil filter_filersfc fc spack_fc makefil replac usrbinperl usrbinenv perl bibxhtml codeblock python filter_filerusrbinperl usrbinenv perl prefixbinbibxhtml switch compil use mpich mpi wrapper script cc etc compil use spack build codeblock python filter_filecccc cc selfcompilercc prefixbinmpicc filter_filecxxc cxx selfcompilercxx prefixbinmpicxx pyfuncchange_sed_delimiterold_delim new_delim filenam llnlutilfilesystemchange_sed_delimit packag like tau build system cant instal directori eg name use hardcod sed command build change_sed_delimit find sed searchreplac command chang delimit eg file contain command look like use chang exampl chang tau codeblock python change_sed_delimit configur change_sed_delimit utilsfixmakefil change_sed_delimit utilsfixmakefileseddefault file function pyfuncancestordir n llnlutilfilesystemancestor get n supth ancestor directori dir pyfunccan_accesspath llnlutilfilesystemcan_access true read write file path nativ python osaccessfile_nam osr_okosw_ok pyfuncinstallsrc dest llnlutilfilesysteminstal instal file particular locat exampl instal header includ directori instal prefix codeblock python installmyheaderh prefixinclud pyfuncjoin_pathpath llnlutilfilesystemjoin_path alia ospathjoin join path use os path separ pyfuncmkdirppath llnlutilfilesystemmkdirp creat directori path creat parent directori exist pyfuncworking_dirdirnam kwarg llnlutilfilesystemworking_dir python context manag httpsdocspythonorglibrarycontextlibhtml_ make easier work subdirectori build use python statement chang work directori block done chang back origin directori think safe pushd popd combin popd guarante call end even except thrown exampl usag libdwarf build first run configur make subdirectori call libdwarf implement instal code natur working_dir codeblock python working_dirlibdwarf configureprefix prefix enableshar make installlibdwarfa prefixlib mani cmake build requir build sourc subdirectori handl creat cding subdirectori like llvm packag codeblock python working_dirspackbuild createtru cmake dllvm_requires_rtti dpython_executableusrbinpython dpython_include_dirusrincludepython dpython_libraryusrliblibpythonso std_cmake_arg make makeinstal createtru keyword argument caus command creat directori exist pyfunctouchpath llnlutilfilesystemtouch creat empti file path _makepackagefind make packag discover spack extern find simplest way make packag discover refspack extern find cmdspackexternalfind defin execut associ packag implement method determin version execut minim detect first step fairli simpl requir specifi packag level execut attribut codeblock python class foopackag string provid treat regular express would match exampl foo foobar bazfoo execut foo attribut must list string string regular express eg gcc would match gcc gcc myweirdgcc etc determin set system execut might part packag note match execut name gcc regular express gcc must use final determin version execut determine_vers method must implement codeblock python classmethod def determine_versioncl exe return either version execut pass argument none version determin arg exe str absolut path execut examin method receiv input path singl execut must return output version string user determin version determin execut instanc packag return none exe discard candid implement two step mandatori give packag basic abil detect spec present system given version note execut determine_vers method return none discard wont appear later stage workflow describ addit function besid two mandatori step describ also option method implement either increas amount detail detect improv robust detect logic packag variant custom attribut determine_vari method option implement packag detect addit detail spec codeblock python classmethod def determine_variantscl exe version_str return either variant string tupl variant string dictionari extra attribut record packagesyaml list item arg exe list str list execut absolut path live prefix share version version_str str version associ list execut detect determine_vers method take input list execut live prefix share version string return either variant string tupl variant string dictionari extra attribut list item match either multipl spec detect set execut extra attribut return record packagesyaml avail later reus exampl gcc packag record default differ compil found entri packagesyaml would look like codeblock yaml packag gcc extern spec gcc languagesccfortran prefix usr extra_attribut compil c usrbinx_linuxgnugcc c usrbinx_linuxgnug fortran usrbinx_linuxgnugfortran allow us instanc keep track execut would name differ built spack eg x_linuxgnugcc instead gcc todo need gather experi overrid prefix special keyword extra attribut soon confid way go document process see httpsgithubcomspackspackpullissuecom filter match execut sometim defin appropri regex execut attribut might prove difficult especi one deal corner case exclud red her help keep regular express simpl possibl packag option implement filter_execut method codeblock python classmethod def filter_detected_exescl prefix exes_in_prefix return filter list execut prefix take input prefix list match execut return filter list said execut use method advantag allow custom logic filter restrict user regular express consid case detect gnu c compil tri search execut match g would unwant side effect select also clang c compil provid anoth packag present system tri select execut contain g clang would quit complic use regex employ filter_detected_ex method becom codeblock python class gccpackag execut g def filter_detected_exescl prefix exes_in_prefix return x x exes_in_prefix clang x anoth possibl method open appli certain filter logic specif condit met eg take decis os anoth valid detect increas detect robust packag may also implement method valid detect spec object codeblock python classmethod def validate_detected_speccl spec extra_attribut valid detect spec rais except valid fail method receiv detect spec along extra attribut use check certain condit met spec packag either use assert rais invalidspecdetect except check fail case condit honor spec discard messag associ assert except log reason discard exampl packag want check compil attribut extra attribut implement method like codeblock python classmethod def validate_detected_speccl spec extra_attribut check compil extra attribut msg extra attribut compil must set detect spec formatspec assert compil extra_attribut msg like codeblock python classmethod def validate_detected_speccl spec extra_attribut check compil extra attribut compil extra_attribut msg extra attribut compil must set detect spec formatspec rais invalidspecdetectedmsg _determine_spec_detail custom detect workflow rare case mechan describ far dont fit detect packag implement method disregard instead custom determine_spec_detail method implement directli packag class note definit execut attribut still requir codeblock python classmethod def determine_spec_detailscl prefix exes_in_prefix exes_in_prefix set path path execut prefix prefix common path exes_in_prefix return none none exe repres instanc packag return one spec instanc packag thought instal provid prefix method take input set discov execut match specifi user well common prefix share execut function must return one pyclassspackspecspec associ execut also return none indic provid execut associ packag exampl consid madeup packag call foopackag build execut call foo foopackag would appear follow codeblock python class foopackagepackag homepag url version string provid treat regular express would match exampl foo foobar bazfoo execut foo classmethod def determine_spec_detailscl prefix exes_in_prefix candid listx x exes_in_prefix ospathbasenamex foo candid return implement lazi check first candid exe_path candid exe executableexe_path output exevers outputstr errorstr version_str pars output version string return specfrom_detect foopackageformatversion_str _packagelifecycl style guidelin packag follow guidelin provid interest make spack packag work consist manner variant name spack packag variant similar alreadyexist spack packag use name variant standard variant name name default descript share true build share librari mpi true use mpi python fals build python extens specifi tabl correspond default use declar variant semant share variant import packag built share packag guarante share librari built packag built share packag guarante share librari built make guarante whether static librari built version list spack packag list support version newest first packag workflow command build packag like get thing complet right first time spack instal command perform number task final instal packag download archiv expand temporari directori give control packag instal method build doesnt go plan may want clean temporari directori packag isnt download properli might want run fetch stage build spack perform besteffort instal packag depend default mean continu instal mani depend possibl detect failur tri instal packag lot depend one may fail build might want tri failfast option stop instal process first failur typic packag workflow might look like codeblock consol spack edit mypackag spack instal failfast mypackag build break spack clean mypackag spack edit mypackag spack instal failfast mypackag repeat cleaninstal instal work command allow finergrain control instal process _cmdspackfetch spack fetch first step spack instal take spec determin correct download url use request packag version download archiv check md checksum store stage directori check success stage directori locat first writabl directori build_stag configur set run archiv alreadi download spack fetch idempot download archiv _cmdspackstag spack stage second step spack instal spack fetch expand download archiv temporari directori built spack instal similar fetch archiv alreadi expand stage idempot _cmdspackpatch spack patch stage spack appli patch download packag specifi packag file command run instal process fetch stage patch phase spack keep track whether patch alreadi appli skip step spack discov patch didnt appli cleanli previou run restag entir packag patch _cmdspackrestag spack restag restor sourc code pristin state build one two way sourc fetch tarbal delet entir build directori reexpand tarbal sourc check repositori delet build directori check _cmdspackclean spack clean clean spack temporari cach file command use recov disk space temporari file interrupt fail instal accumul call stage without argument remov stage file download option remov cach refcach cach download forc remov instal failur track marker use failur option note spack instal automat clear relev failur mark prior perform request instal longliv cach like virtual packag index remov use misccach option pythoncach option remov pyc pyo __pycache__ folder remov command call call posit argument command clean temporari file particular packag fetch stage instal run spack build process start scratch keep stage directori success default spack instal delet stage area packag success built instal use keepstag leav build directori intact codeblock consol spack instal keepstag spec allow inspect build directori potenti debug build use clean later get rid unwant temporari file keep instal prefix failur default spack instal delet partial construct instal prefix anyth fail instal want keep prefix anyway eg diagnos bug use keepprefix codeblock consol spack instal keepprefix spec note may confus spack think packag instal properli may need use spack uninstal forc get rid instal prefix build codeblock consol spack uninstal forc spec graph depend _cmdspackgraph spack graph spack provid spack graph command graph depend command default gener ascii render spec depend graph exampl commandoutput spack graph hdf top root packag dag depend edg emerg color termin edg color depend lead commandoutput spack graph deptypelink hdf deptyp argument tell spack type depend graph default includ link run depend build depend suppli deptypelink show link depend default deptypeal equival deptypebuildlinkruntest option deptyp includ combin build link run test separ comma type depend also use spack graph gener graph wide use dot httpwwwgraphvizorgdocinfolanghtml_ format exampl commandoutput spack graph dot hdf graph provid input graph tool graphviz httpwwwgraphvizorg_ graphviz instal write straight pdf like codeblock consol spack graph dot hdf dot tpdf hdfpdf _packagingshellsupport interact shell support spack provid limit shell support make life easier packag enabl command sourc setup file sharespack directori bash ksh run codeblock sh export spack_rootpathtospack spack_rootsharespacksetupenvsh csh tcsh run codeblock csh setenv spack_root pathtospack sourc spack_rootsharespacksetupenvcsh spack cd avail _cmdspackcd spack cd spack cd allow quickli cd pertin directori spack suppos youv stage packag want modifi build codeblock consol spack stage libelf tri fetch httpwwwmrdesoftwarelibelftargz stage archiv spackvarspackstagelibelfgcc archlinuxdebianx_libelftargz creat stage spackvarspackstagelibelfgcc archlinuxdebianx_ spack cd libelf pwd spackvarspackstagelibelfgcc archlinuxdebianx_libelf spack cd chang current work directori directori contain expand libelf sourc code number place cd spack directori hierarchi commandoutput spack cd help chang directori packagespecif locat stage directori instal directori packag directori other chang core spack locat exampl spack cd moduledir take main python sourc directori spack instal _cmdspackbuildenv spack buildenv spack buildenv function much like standard unix buildenv command take spec argument use see environ variabl set particular build run exampl codeblock consol spack buildenv mpileaksintel display entir environ set mpileaksintel build run run command packag build environ simpli provid spec argument spack buildenv codeblock consol spack cd mpileaksintel spack buildenv mpileaksintel configur cd build directori run configur packag build environ _cmdspackloc spack locat spack locat spack cd requir shell support simpli print path ask rather cding bash codeblock consol cd spack locat builddir spec codeblock consol spack cd builddir spec spack locat intend use script makefil need know packag instal eg makefil might write codeblock makefil dwarf_prefix spack locat installdir libdwarf cxxflag idwarf_prefixinclud cxxflag ldwarf_prefixlib copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _binary_cach build cach site may encourag user set test environ carri central instal user may prefer set environ motiv reduc load recompil otherwis ident packag spec differ instal instal packag put build cach tarbal upload spack mirror download instal other creat build cach file compress tarbal instal packag creat tarbal creat link run depend packag well compress tarbal sign gpg signatur tarbal put spack file option rpath id dep maco chang path rel spack instal tree tarbal creat build cach creat via codeblock consol spack buildcach creat spec want creat build cach local directori would provid argument target directori also specifi spec exampl creat local directori spackcach creat build cach file ninja spec codeblock consol mkdir p spackcach spack buildcach creat spackcach ninja buildcach file output filehomespackuserspackspackcachebuild_cach gpgconf socketdir runusergnupg gpg use edfabdedffbdbdd default secret key sign note target spec must alreadi instal build cach add mirror discuss next find instal build cach file find build cach instal build cach spack mirror must configur codeblock consol spack mirror add name url note url web url _or_ local filesystem locat previou exampl might add directori spackcach call mymirror codeblock consol spack mirror add mymirror spackcach see mirror ad spack mirror list follow codeblock consol spack mirror list mymirror filehomespackuserspackspackcach spackpubl httpsspackllnlmirrorsuswestamazonawscom point youv creat buildcach spack hasnt index run spack buildcach list wont see result need index new build cach follow codeblock consol spack buildcach updateindex spackcach use list codeblock consol spack buildcach list cach build linuxubuntuskylak gcc ninja great let say differ spack instal perhap differ environ one want instal packag build cach let first uninstal actual librari ninja see reinstal cach codeblock consol spack uninstal ninja reinstal buildcach codeblock consol spack buildcach instal ninja buildcach spec match ninja fetch filehomespackuserspackspackcachebuild_cachelinuxubuntuskylakegccninjalinuxubuntuskylakegccninjaieluourjxdpcbkiykdimkemkymspack instal buildcach spec ninjagcc archlinuxubuntuskylak gpgconf socketdir runusergnupg gpg signatur made tue mar pm mdt gpg use rsa key edfabdedffbdbdd gpg good signatur spackus gpg creat spack spackusernoreplyusersgithubcom ultim work youv complet full exampl creat build cach spec interest ad mirror updat index list content final instal note command intend instal particular packag build cach creat instal packag build cach latter mirror ad default spack instal usecach flag set instal packag build cach avail want alway use cach codeblock consol spack instal cacheonli packag exampl combin command add es build cach instal exclus would codeblock consol spack mirror add es httpscacheesio spack buildcach key instal trust spack instal cacheonli packag use instal trust say instal key keyr trust download key list popular build cach extremescal scientif softwar stack es httpsesprojectgithubio_ build cach httpsoacissuoregoneduesinventoryhtml_ reloc initi build later instal necessarili happen locat spack provid reloc capabl correct rpath nonrelocat script howev mani packag compil path binari artifact directli case build instruct packag would need adjust better relocat _cmdspackbuildcach spack buildcach spack buildcach creat creat tarbal instal spack packag depend tarbal checksum sign gpg avail place directori build_cach copi mirror command like spack buildcach instal search spack mirror build_cach get list build cach argument descript spec list partial spec hash lead match instal packag use creat build cach path directori build_cach directori creat default f overwrit spack file build_cach directori exist k key key sign packag case multipl key exist packag unsign unless k use r make path binari rel creat tarbal answer ye creat unsign build_cach question spack buildcach list retriev spec build cach avail spack mirror argument descript spec list partial packag spec match spec download build cach eg spack buildcach list gcc print command instal gcc packag spack buildcach instal retriev spec build cach avail spack mirror instal build cach spec match spec input argument descript spec list partial packag spec hash lead instal build cach f remov instal directori exist unpack tarbal answer ye dont verifi packag gpg question spack buildcach key list public key avail spack mirror argument descript trust key download prompt answer ye trust key download copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _environ environ environ use group togeth set spec purpos build rebuild deploy coher fashion environ provid number advantag à la cart approach build load individu spack modul environ separ step choos instal b concret c instal allow environ remain stabl repeat even spack packag upgrad spec reconcret user explicitli ask even possibl reliabl transport environ differ comput run differ version spack environ allow sever spec built robust solut adhoc script make multipl call spack instal environ built whole load whole user environ environ built maintain filesystem view packag environ load view user environ activ time spack also gener script load modul relat environ packag system also provid environ similar way spack environ exampl conda environ httpscondaiodocsuserguidetasksmanageenvironmentshtml_ python virtual environ httpsdocspythonorgtutorialvenvhtml_ spack environ provid distinct featur spec instal environ differ spec instal anywher els spack environ assembl simpli collect togeth set spec spack environ may contain one spec packag spack use manifest lock model similar bundler gemfil httpsbundleriomangemfilehtml_ packag manag user input file name spackyaml lock file name spacklock _environmentsus use environ follow typic use case creat concret instal load environ creat name environ environ creat codeblock consol spack env creat myenv spack creat directori varspackenvironmentsmyenv note name environ store varspackenviron folder varspackenvironmentsmyenv directori spack creat file spackyaml hidden directori spackenv spack store metadata spackenv directori user interact occur spackyaml file spack command affect environ concret spack creat file spacklock concret inform environ addit default locat view associ environ spackenv directori also contain repo repo consist spack packag use environ allow environ build theori even differ version spack differ packag log directori contain build log packag environ spack environ also creat either spackyaml manifest spacklock lockfil creat environ spackyaml manifest codeblock consol spack env creat myenv spackyaml creat environ spacklock lockfil codeblock consol spack env creat myenv spacklock either command also take full path initi file spack environ creat spackyaml manifest guarante root spec origin environ may concret differ spack environ creat spacklock lockfil guarante concret spec origin environ either may obvious differ user modifi activ environ activ environ use follow command codeblock consol spack env activ myenv default spack env activ load view associ environ user environ v withview argument ensur behavior v withoutview argument activ environ without chang user environ variabl p option spack env activ command modifi user prompt begin environ name bracket codeblock consol spack env activ p myenv myenv deactiv environ use command codeblock consol spack env deactiv shortcut alia codeblock consol despacktiv environ activ view deactiv environ remov view user environ anonym environ directori treat environ contain file spackyaml load anonym environ use codeblock consol spack env activ pathtodirectori anonym spec creat place use command codeblock consol spack env creat case spack simpli creat spackyaml file request directori environ sensit command spack command environ sensit exampl find command show spec activ environ environ activ similarli instal uninstal command act activ environ codeblock consol spack find instal packag spack instal zlib instal zlibqcqrdtoiktfgqyqccuvmfmwbiv binari zlibqcqrdtoiktfgqyqccuvmfmwbiv found instal sourc zlib execut phase instal spackoptspacklinuxrhelbroadwellgcczlibqcqrdtoiktfgqyqccuvmfmwbiv spack env activ myenv spack find environ myenv root spec instal packag spack instal zlib instal zlibyfcepfnsfngnnotccaiyxhazx binari zlibyfcepfnsfngnnotccaiyxhazx found instal sourc zlib execut phase instal spackoptspacklinuxrhelbroadwellgcczlibyfcepfnsfngnnotccaiyxhazx updat view spackvarspackenvironmentsmyenvspackenvview spack find environ myenv root spec zlib instal packag linuxrhelbroadwel gcc zlib despacktiv spack find instal packag linuxrhelbroadwel gcc zlib zlib note instal abstract spec zlib present root environ explicitli instal packag list root environ spack command act list instal spec environmentsensit way includ instal uninstal activ deactiv find extens refenvironmentconfigur section discuss environmentsensit command ad abstract spec abstract spec userspecifi spec spack appli default depend inform user add abstract spec environ use spack add command import compon environ list abstract spec ad spec add manifest spackyaml file use defin root environ affect concret spec lockfil instal spec spack add command environ awar add current activ environ environ awar command also call use spack e flag specifi environ codeblock consol spack env activ myenv spack add mpileak codeblock consol spack e myenv add python _environments_concret concret user spec ad environ concret default spec concret separ one mode oper permit deploy full softwar stack multipl configur packag need instal alongsid central instal done hpc center system administr user support group common case fit behavior environ also configur concret root spec selfconsist way ensur packag environ come singl configur mode oper usual requir softwar develop want deploy develop environ regardless mode oper chosen follow command ensur root spec concret accord constraint prescrib configur codeblock consol myenv spack concret case spec concret togeth command concret spec ad yet concret forc reconcret spec done instead command codeblock consol myenv spack concret f f flag use reconcret spec spack guarante alreadi concret spec unchang environ concret command instal packag packag alreadi instal outsid environ process ad spec concret ident instal spec assum concret exact spec instal outsid environ spack find command show concret spec separ instal spec use c concret flag codeblock consol myenv spack add zlib myenv spack concret myenv spack find c environ myenv root spec zlib concret root linuxrhelx_ gcc zlib instal packag _installingenviron instal environ addit instal individu spec environ one instal entir environ use command codeblock consol myenv spack instal environ concret spack instal concret spec otherwis spack instal first concret environ instal concret spec instal spack instal creat symbol link log directori environ allow easi inspect build log relat environ spack instal command also store spack repo contain packagepi file use instal time packag repo directori environ noadd option use concret environ tell spack instal spec alreadi present environ add new root spec environ root spec provid spack instal command line noadd default depend spec hand option word unambigu match activ concret environ root spec provid spack instal command line spack requir specifi noadd option prevent spec ad time spec alreadi exist environ depend ad environ root spec without noadd option load environ instal follow creat load script codeblock consol spack env load r creat file call load environ directori sourc file bash make environ avail user includ bashrc file etc load file may also copi environ renam etc spackyaml spack environ custom finer granular edit spackyaml manifest file directli _environmentconfigur configur environ varieti spack behavior chang spack configur file cover detail refconfigur section spack environ provid addit level configur scope custom scope user scope discuss configur document two way includ configur inform spack environ inlin spackyaml file includ spackyaml file anoth file mani spack command also affect configur inform file automat command take scope argument environ specifi envnam affect environ foo set scope envfoo command automat manipul configur inlin spackyaml file inlin configur inlin environmentscop configur done use yaml format standard spack configur scope cover refconfigur section section contain toplevel yaml object name exampl spackyaml manifest file contain packag prefer configur packagesyaml file could contain codeblock yaml spack packag compil intel configur set default compil packag intel includ configur spack environ allow includ head yaml schema head pull extern configur file appli environ codeblock yaml spack includ relativepathtoconfigyaml absolutepathtopackagesyaml environ includ file either rel absolut path inlin configur take preced includ configur dont chang share configur file make small chang individu environ includ config list earlier higher preced includ config appli revers order manual edit spec list list abstractroot spec environ maintain spackyaml manifest head spec codeblock yaml spack spec ncview netcdf nco pysphinx append list yaml ident use spack add command command line howev power avail yaml file spec concret spec concret separ togeth alreadi explain refenvironments_concret behavior activ environ determin concret properti codeblock yaml spack spec ncview netcdf nco pysphinx concret togeth current take either one two allow valu togeth separ default admonit reconcret user spec concret spec togeth entir set spec reconcret addit new user spec ensur environ remain consist instead spec concret separ new spec reconcret addit spec matric entri spec list individu abstract spec spec matrix spec matrix yaml object contain multipl list spec evalu crossproduct spec spec matric also contain exclud direct elimin certain combin evalu result follow two environ manifest ident codeblock yaml spack spec zlib gcc zlib gcc libelf gcc libelf gcc libdwarf gcc cmake spack spec matrix zlib libelf libdwarf gcc gcc exclud libdwarfgcc cmake spec matric use instal swath softwar across variou toolchain concret logic spec matric differ slightli rest spack variant depend constraint matrix invalid spack reject constraint tri without exampl follow two environ manifest produc spec codeblock yaml spack spec matrix zlib libelf hdfmpi mvapich openmpi spack spec zlib libelf hdfmpi mvapich hdfmpi openmpi allow one creat toolchain combin constraint appli somewhat indiscrimin packag without regard applic constraint spec list refer last type possibl entri spec list refer spack environ manifest yaml schema contain addit head definit definit array yaml object object one two field one requir field name option field claus name field spec list spec list use syntax spec entri entri spec list spec spec matrix refer earlier name list refer specifi use sigil splat place ie element refer level element list separ exampl follow two manifest file ident codeblock yaml spack definit first libelf libdwarf compil gcc intel second first matrix zlib compil spec second cmake spack spec libelf libdwarf zlibgcc zlibintel cmake note name spec list definit section may refer name list defin order matter short file like exampl may easier simpli list includ spec howev complic exampl involv mani packag across mani toolchain separ factor list make environ substanti manag addit l option spack add command allow one add name list definit section manifest file directli command line direct use condit add spec name list direct take string python code refer restrict set variabl evalu boolean spec list append name list string evalu true follow snippet name list compil gcc clang intel x_ system gcc clang system codeblock yaml spack definit compil gcc clang archsatisfiesx_ compil intel note definit name list true claus absent claus append togeth valid variabl claus platform platform string default spack architectur system os os string default spack architectur system target target string default spack architectur system architectur arch spack spec satisfi default spack architectur system support queri via satisfi method shown arch_str architectur string default spack architectur system standard regex modul python env user environ usual osenviron python hostnam hostnam system hostnam execut user path speclist constraint depend compil spack packag environ constraint packag refer speclist allow shorthand treat packag list either compil depend use syntax respect exampl follow environ three root packag gcc mvapich gcc hdfmpi gcc mvapich codeblock yaml spack definit compil gcc mpi mvapich packag hdfmpi spec compil matrix mpi compil matrix packag mpi compil allow muchneed reduct redund packag constraint environmentmanag view spack environ defin filesystem view softwar maintain packag instal uninstal environ filesystem view provid access point packag filesystem user want access packag directli inform filesystem view see section reffilesystemview spack environ manag view updat everi time environ written lock file spacklock concret environ view alway compat _configuring_environment_view configur environ view spack environ manifest file toplevel keyword view entri head view descriptor head name view descriptor contain root view option project view select exclud list view link inform via link link_typ exampl follow manifest file snippet defin view name mpi root pathtoview project use packag name version compil name determin path given packag view select packag depend mpi exclud built pgi compil version depend root spec environ link view due command link file view symlink spack instal directori codeblock yaml spack view mpi root pathtoview select mpi exclud pgi project nameversioncompilernam link link_typ symlink inform use view project see section refadding_projections_to_view default select exclud valu select everyth exclud noth default project default view project link default also root root spec environ desir view link_typ default symlink also take valu hardlink copi number view may defin view head spack environ two shorthand environ singl view environ pathtoenv singl view root pathtoenvspackenvview default select exclus default project put view true environ manifest similarli environ view differ root default select exclus project manifest say view pathtoview view automat name default codeblock yaml spack view true equival codeblock yaml spack view default root spackenvview codeblock yaml spack view pathtoview equival codeblock yaml spack view default root pathtoview default spack environ configur view true manifest environ configur without view use view fals backward compat reason environ view key treat view true command line spack env creat command take argument withview path set path singl default view path specifi default path use view true argument withoutview use creat environ without view configur spack env view command use chang manag view environ subcommand spack env view enabl add view name default environ take option argument specifi path new default view subcommand spack env view disabl remov view name default environ one exist subcommand spack env view regener regener view environ appli updat environ configur yet appli activ environ view spack env activ command put default view environ user path addit activ environ spack command argument vwithview vwithoutview use tune behavior default behavior activ environ view one environ variabl affect spack env activ command path use updat determin refprefix inspect customizeenvmodif defin modul configur default summar follow tabl variabl path path bin manpath man shareman aclocal_path shareacloc ld_library_path lib lib library_path lib lib cpath includ pkg_config_path libpkgconfig libpkgconfig sharepkgconfig cmake_prefix_path path append view root ad relev variabl path exist reason recommend use nondefault project default view environ spack env deactiv command remov default view environ user path copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit extens custom extens spack extens permit extend spack capabl deploy custom command logic arbitrari locat filesystem might extrem use eg develop maintain command whose purpos specif consid reintegr mainlin evolv command earli stage start discuss merg upstream spack point view extens path filesystem respect prescrib name layout file codeblock consol spackscript top level directori must match format spackextension_nam pytestini option file extens ship test script folder may contain modul need extens command cmd folder contain extens command filterpi new command avail test test extens conftestpi test_filterpi templat templat may need extens exampl extens name script add addit command filter unit test verifi behavior code exampl obtain clone correspond git repositori todo write adhoc hello world extens make part spack organ codeblock consol pwd homeus mkdir tmp cd tmp git clone httpsgithubcomalalazospackscriptinggit clone spackscript remot count object done remot compress object done remot total delta reus delta packreus receiv object done see inspect sourc python modul part extens import core spack modul configur spack use extens make current spack instanc awar extens add root path configyaml case exampl mean ensur codeblock yaml config extens homeusertmpspackscript part configur file setup command extens provid avail command line codeblock consol spack filter help usag spack filter h instal notinstal explicit implicit output output filter spec base properti posit argument spec spec filter option argument h help show help messag exit instal select instal spec notinstal select spec yet instal explicit select spec instal explicitli implicit select spec instal instal implicitli output output dump result correspond unit test run give appropri option spack unittest codeblock consol spack unittest extensionscript test session start platform linux python rc pytest py pluggi rootdir homemculpotmpspackscript inifil pytestini collect item teststest_filterpi xx short test summari info xpass teststest_filterpytest_filtering_specsflagsspecsexpect xpass teststest_filterpytest_filtering_specsflagsspecsexpect slowest test durat setup teststest_filterpytest_filtering_specsflagsspecsexpect call teststest_filterpytest_filtering_specsflagsspecsexpect call teststest_filterpytest_filtering_specsflagsspecsexpect call teststest_filterpytest_filtering_specsflagsspecsexpect call teststest_filterpytest_filtering_specsflagsspecsexpect call teststest_filterpytest_filtering_specsflagsspecsexpect teardown teststest_filterpytest_filtering_specsflagsspecsexpect setup teststest_filterpytest_filtering_specsflagsspecsexpect setup teststest_filterpytest_filtering_specsflagsspecsexpect setup teststest_filterpytest_filtering_specsflagsspecsexpect setup teststest_filterpytest_filtering_specsflagsspecsexpect teardown teststest_filterpytest_filtering_specsflagsspecsexpect teardown teststest_filterpytest_filtering_specsflagsspecsexpect teardown teststest_filterpytest_filtering_specsflagsspecsexpect teardown teststest_filterpytest_filtering_specsflagsspecsexpect pass xpass second copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _configur configur file spack mani configur file quick list case want skip directli specif doc refcompilersyaml compilerconfig refconfigyaml configyaml refmirrorsyaml mirror refmodulesyaml modul refpackagesyaml buildset refreposyaml repositori yaml format spack configur file written yaml chose yaml human readabl also versatil support dictionari list nest section detail format see yamlorg httpyamlorg_ libyaml httppyyamlorgwikilibyaml_ exampl configyaml file codeblock yaml config install_tre spackoptspack module_root lmod spacksharespacklmod build_stag tempdiruserspackstag spackstag spack configur file nest toplevel section correspond name configyaml start config mirrorsyaml start mirror etc _configurationscop configur scope spack pull configur data file sever directori six configur scope lowest highest default store prefixetcspackdefault factori set user gener modifi set overrid configur scope default chang version version spack system store etcspack set machin machin file system mount site scope use set idiosyncrat particular machin locat compil extern packag set presum control someon root access machin overrid default scope site store prefixetcspack set affect instanc spack overrid default system scope site scope use perproject set one spack instanc per project sitewid set multius machin eg common spack instanc user store home directori spack set affect instanc spack take higher preced site system default scope custom store custom directori specifi configscop multipl scope list command line order lowest highest preced environ use spack refenviron spack read addit configur environ file see refenvironmentconfigur detail scope environ scope referenc command line envnam refer environ foo use envfoo command line build set specifi command line take preced scope configur directori may contain sever configur file configyaml compilersyaml mirrorsyaml configur conflict set higherpreced scope overrid lowerpreced set command modifi scope eg spack compil spack repo etc take scopenam paramet use control scope modifi default modifi highestpreced scope _customscop custom scope addit default system site user scope may add configur scope directli command line configscop argument c short exampl follow add two configur scope name scopea scopeb spack spec command codeblock consol spack c myscopesscopea c myscopesscopeb spec ncurs custom scope come spack command subcommand specifi singl path directori full configur file add configur file directori add scope configyaml packagesyaml etc multipl scope provid must preced configscop c flag must order lowest highest preced exampl scope releas develop suppos need support simultan build releas develop version mypackag mypackag b could creat follow file codeblock yaml caption myscopesreleasepackagesyaml packag mypackag version version b version codeblock yaml caption myscopesdeveloppackagesyaml packag mypackag version develop version develop b version develop switch releas develop configur use configur argument would type spack c myscopesreleas want build design releas version mypackag b would type spack c myscopesdevelop want build packag develop version exampl swap mpi provid suppos need build two softwar packag packagea packageb packagea python base packageb python base packagea build openmpi packageb build mpich creat differ configur scope use packagea packageb codeblock yaml caption myscopespackgeapackagesyaml packag python version provid mpi openmpi codeblock yaml caption myscopespackagebpackagesyaml packag python version provid mpi mpich _platformscop platformspecif scope scope exclud environ scope also platformspecif set exampl platform gcc prefer compil howev maco darwin clang often work packag set default compil configur set prefixetcspackdefaultsdarwinpackagesyaml take preced set default scope still overridden set system systemdarwin site sitedarwin user userdarwin custom customdarwin full scope preced default defaultsplatform system systemplatform site siteplatform user userplatform custom customplatform get name use platform run spack arch platform system config scope platform section site etc mount multipl heterogen machin scope preced spack queri configur paramet search higherpreced scope first set higherpreced file overrid key lowerpreced one listvalu set spack prepend higherpreced set lowerpreced set complet ignor higherlevel configur option support notat key see refconfigoverrid simpl key let look exampl overrid singl key spack file configur look like codeblock yaml caption prefixetcspackdefaultsconfigyaml config install_tre spackoptspack module_root lmod spacksharespacklmod build_stag tempdiruserspackstag spackstag codeblock yaml caption spackconfigyaml config install_tre someotherdirectori spack overrid install_tre config section take site prefer set see final combin configur spack config get configtyp command codeblock consol emphasizelin spack config get config config install_tre someotherdirectori module_root lmod spacksharespacklmod build_stag tempdiruserspackstag spackstag _configoverrid overrid entir section user configyaml overrid specif set default configyaml sometim use complet overrid lowerpreced set use two colon end key configur file exampl codeblock yaml emphasizelin caption spackconfigyaml config install_tre someotherdirectori spack ignor lowerpreced configur config section codeblock consol spack config get config config install_tre someotherdirectori listvalu set let revisit configyaml exampl one time build_stag set valu order list directori codeblock yaml caption prefixetcspackdefaultsconfigyaml build_stag tempdiruserspackstag spackstag suppos user configur add list build_stag path codeblock yaml caption spackconfigyaml build_stag lustrescratchuserspack mystag spack first look path default configyaml path user spackconfigyaml list higherpreced scope prepend default spack config get config show result codeblock consol emphasizelin spack config get config config install_tre someotherdirectori module_root lmod spacksharespacklmod build_stag lustrescratchuserspack mystag tempdiruserspackstag spackstag refconfigoverrid higherpreced scope complet overrid lowerpreced scope use user config look like codeblock yaml emphasizelin caption spackconfigyaml build_stag lustrescratchuserspack mystag merg configur would look like codeblock consol emphasizelin spack config get config config install_tre someotherdirectori module_root lmod spacksharespacklmod build_stag lustrescratchuserspack mystag _configfilevari config file variabl spack understand sever variabl use config file path wherev appear three set variabl spackspecif variabl environ variabl user path variabl spackspecif variabl environ variabl indic prefix variabl name user path variabl indic start path user spackspecif variabl spack understand sever special variabl env name current activ refenviron environ spack path prefix spack instal tempdir default system temporari directori specifi python tempfiletempdir httpsdocspythonorglibrarytempfilehtmltempfiletempdir_ variabl user name current user user_cache_path user cach directori spack unless refoverridden localconfigoverrid note shell variabl write varnam brace distinguish variabl surround charact varnam name also case insensit mean spack work well spack special variabl substitut first environ variabl name use environ variabl spackspecif variabl evalu environ variabl expand format like spackspecif variabl eg varnam use insert environ variabl spack configur user home directori spack perform unixstyl tild expans path configur file mean tild expand current user home directori user expand specifi user home directori must appear begin path spack expand _configuration_environment_vari environ modif spack allow prescrib custom environ modif place within configur file everi time modif allow specifi dictionari like follow exampl codeblock yaml environ set license_fil pathtolicens unset cpath library_path append_path path newbindir possibl action permit set unset append_path prepend_path final remove_path requir dictionari variabl name map valu use modif except unset requir list variabl name particular order ensur execut modif see spack configur mani scope overrid sometim difficult understand spack final configur look like spack provid two use way view final merg version configur file spack config get spack config blame _cmdspackconfigget spack config get spack config get show fulli merg configur file take account scope exampl see fulli merg configyaml type codeblock consol spack config get config config debug fals checksum true verify_ssl true dirti fals build_job install_tre spackoptspack template_dir spacktempl directory_layout architecturecompilernamecompilerversionnameversionhash module_root tcl spacksharespackmodul lmod spacksharespacklmod build_stag tempdiruserspackstag spackstag spackvarspackstag source_cach spackvarspackcach misc_cach spackcach lock true likewis show fulli merg packagesyaml codeblock consol spack config get packag use conjunct c configscop argument see scope affect spack configur codeblock consol spack c pathtomyscop config get packag _cmdspackconfigblam spack config blame spack config blame function much like spack config get show exactli configur file prefer came know spack behav certain way help track problem codeblock consol spack insecur c myscop c myscop config blame config warn ask insecur check ssl certif config _builtin debug fals homemyuserspacketcspackdefaultsconfigyaml checksum true command_lin verify_ssl fals myscopeconfigyaml dirti fals _builtin build_job myscopeconfigyaml install_tre pathtosometre homemyuserspacketcspackdefaultsconfigyaml template_dir homemyuserspacketcspackdefaultsconfigyaml spacktempl homemyuserspacketcspackdefaultsconfigyaml directory_layout architecturecompilernamecompilerversionnameversionhash homemyuserspacketcspackdefaultsconfigyaml module_root homemyuserspacketcspackdefaultsconfigyaml tcl spacksharespackmodul homemyuserspacketcspackdefaultsconfigyaml lmod spacksharespacklmod homemyuserspacketcspackdefaultsconfigyaml build_stag homemyuserspacketcspackdefaultsconfigyaml tempdiruserspackstag homemyuserspacketcspackdefaultsconfigyaml spackstag homemyuserspacketcspackdefaultsconfigyaml spackvarspackstag homemyuserspacketcspackdefaultsconfigyaml source_cach spackvarspackcach homemyuserspacketcspackdefaultsconfigyaml misc_cach spackcach homemyuserspacketcspackdefaultsconfigyaml lock true see build_job debug set built overridden configur file verify_ssl set come insceur option command line dirti install_tre come custom scope myscop myscop configur option come default configur file ship spack _localconfigoverrid overrid local configur spack system user scope provid way administr user set global default spack instanc use case one want clean spack instal scope undesir exampl user may want opt global system configur may want ignor home directori set run continu integr environ spack also default keep variou cach user data spack user may want overrid locat spack provid three environ variabl allow overrid opt configur locat spack_user_config_path overrid path use user scope spack default spack_system_config_path overrid path use system scope etcspack default spack_disable_local_config set environ variabl complet disabl system user configur directori spack consid default site configur locat one allow move default cach locat spack_user_cache_path overrid default path use user data misc_cach test report etc set want isol spack ci environ export spack_disable_local_configtru export spack_user_cache_pathtmpspack copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _developer_guid develop guid guid intend peopl want work spack want develop packag see refpackagingguid assum youv read refbasicusag refpackagingguid section your familiar concept discuss your recommend read first overview spack design three separ role mind user need instal softwar without know detail built packag know particular softwar packag built encod inform packag file develop work spack add new featur tri make job packag user easier user could end user instal softwar home directori administr instal softwar share directori share machin packag could administr want autom softwar build applic develop want make softwar access user might expect mani type user differ level sophist spack design accommod simpl complex use case packag user know need certain packag abl type someth simpl like spack instal packag name get packag want user want ask specif version use particular compil build sever version differ configur possibl minim amount addit specif get us two key concept spack softwar design spec express describ build softwar packag python modul build softwar accord spec packag templat build particular softwar spec descriptor one instanc templat user express configur want use spec packag turn spec complet build obviou difficulti design user underspecifi want build softwar packag packag object need complet specif spack spec describ one instanc packag say concret spec could describ mani instanc ie underspecifi one way anoth say abstract spack job take abstract spec user find concret spec satisfi constraint hand task build softwar packag object rest document describ piec come togeth make happen directori structur familiar project well start high level view spack directori structur codeblock none spack instal root bin spack main spack execut etc spack spack config file overridden file spack var spack build stage directori repo contain packag repositori builtin pkg repositori come spack repoyaml descriptor builtin repositori packag directori contain packag cach save resourc download instal opt spack packag instal lib spack doc sourc document env compil wrapper build environ extern extern lib includ spack distro llnl generalus librari spack spack modul contain python code analyz modul run analysi instal packag build_system modul differ build system cmd file spack subcommand compil compil descript file contain modul spack container hook hook modul run differ point modul modul lmod tcl etc operating_system oper system modul platform differ spack platform report report like cdash junit schema schema valid data structur solver spack solver test unit test modul util common code spack design could live within standard unix directori hierarchi httplinuxdienetmanhier_ lib var opt contain spack subdirectori case spack instal alongsid softwar interest part spack live libspack spack one directori layout instal process python program dont look like use distutil setuppi etc want make spack easi use simpl layout spare user need instal spack python environ mani user dont write access python instal instal entir new instanc python bootstrap spack would complic user instal big complic packag use thing that suppos spare detail big complic packag end result spack work box clone add bin path your readi go code structur section give overview variou python modul spack group function packagerel modul modspackpackag contain classspackpackagepackag class superclass packag spack method packag implement phase refpackag lifecycl packagelifecycl manag build process modspackutilnam contain function map spack packag name python modul name python class name function like funcspackutilnamingmod_to_class handl map packag modul name class name modspackdirect direct function call insid packag definit modifi packag like funcspackdirectivesdepends_on funcspackdirectivesprovid see refdepend refvirtualdepend modspackmultimethod implement funcwhen spackmultimethodwhen decor allow refmultimethod multimethod packag specrel modul modspackspec contain classspackspecspec classspackspecspecpars also implement logic normal concret spec modspackpars contain base class implement simpl recurs descent parser classspackparsepars classspackparselex use classspackspecspecpars modspackconcret contain classspackconcretizeconcret implement allow site administr chang spack refconcretizationpolici modspackvers implement simpl classspackversionvers class simpl comparison semant also implement classspackversionversionrang classspackversionversionlist three compar offer union intersect oper spack use class compar version manag version constraint spec comparison semant similar loosevers class distutil way rpm compar version string modspackcompil submodul contain descriptor valid compil spack use build system set build environ warn yet implement current two compil descript compil arent fulli integr build process yet build environ modspackstag handl creat temporari directori build modspackbuild_environ contain util function use compil wrapper script cc modspackdirectory_layout class control way instal directori laid creat implement chang hierarchi name scheme spack_prefixopt spack subcommand modspackcmd modul packag implement spack subcommand see refwrit command writingcommand detail unit test modspacktest implement spack test suit add modul put name test suit __init__pi add unit test research monitor modul modspackmonitor contain classspackmonitorspackmonitorcli access spack instal spack analyz command send build packag metadata spack monitor httpsgithubcomspackspackmonitor_ server modspackanalyz modul folder classspackanalyzersanalyzer_baseanalyzerbas provid base function run save option upload analysi result spack monitor httpsgithubcomspackspackmonitor_ server modul modspackurl url pars deduc name version packag tarbal url modspackerror classspackerrorspackerror base class spack except hierarchi modllnlutiltti basic output function messag spack write termin modllnlutilttycolor implement color format syntax use spacktti modllnlutil packag number util modul rest spack spec object packag object spack command look someth like pars abstract spec spec command line normal spec base inform packag file concret spec accord customiz polici instanti packag base spec call method eg instal packag object inform packag file use stage process conceptu packag overload contain stage object _writinganalyz write analyz write analyz add new python file analyz modul directori libspackspackanalyz analyz subclass classanalyzerbas spackanalyzersanalyzer_baseanalyzerbas exampl want add analyz class myanalyz would write spackanalyzersmyanalyzerpi import use base follow codeblock python analyzer_bas import analyzerbas class myanalyzeranalyzerbas note class name modul file name lowercas except first capit letter look analyz analyz directori exampl guid tell basic function need analyz output directori default run spack analyz run analyz output directori creat spack user directori home reason output instal directori might alway writabl codeblock consol spack analyz result file written organ subfold structur packag analyz own subfold exampl codeblock consol tree spackanalyz homespackuserspackanalyz linuxubuntuskylak gcc zlibslmmzkbejtkrajigjamygvu environment_vari spackanalyzerenvironmentvariablesjson install_fil spackanalyzerinstallfilesjson libabigail lib spackanalyzerlibabigaillibzsoxml notic libabigail analyz sinc result gener per object honor object folder case equival name file differ folder result file typic written json easili read upload futur interact monitor analyz metadata analyz requir class attribut name outfil descript print user use subcommand spack analyz listanalyz exampl mention note analyz would live modul name libabigailpi analyz folder class discov codeblock python class libabigailanalyzerbas name libabigail outfil spackanalyzerlibabigailjson descript applic binari interfac abi featur object mean name output file uniqu analyz note name analyz key use indic user want run analyz _analyzer_run_funct analyz run function core analyz run function accept argument assum analyz packag spec interest selfspec run function gener whatev analysi data need return object key analyz name result data list object name analyzer_nam install_fil one valu binary_valu instal file rel path absolut path exampl let say extract metric call metric binwget use analyz thebestanalyz might data look like codeblock python result name metric analyzer_nam thebestanalyz valu install_fil binwget wed return follow note key analyz name selfnam codeblock python return selfnam result save complet result analyz metadata folder describ previous want support ad differ kind metadata eg associ instal file monitor server would need updat support first analyz init function dont need extra depend check skip defin analyz init function base class handl typic accept spec option output directori user want default metadata folder analyz result analyz init function call parent init extra check valid requir work exampl codeblock python def __init__self spec dirnamenon supermyanalyz self__init__spec dirnam instal extra depend extra prepar check end init avail selfspec spec object selfdirnam option directori name user provid init save selfoutput_dir analyz metadata directori save default selfmeta_dir path packag metadata directori spack need proceed write analyz save analyz result analyz save_result call result object gener save filesystem user ad monitor flag upload monitor server result follow accept result format dont need pars dont need add function class howev result data larg otherwis need addit pars defin defin function use know output_dir properti join output file rel path choic codeblock python outfil ospathjoinselfoutput_dir myoutputfiletxt directori provid output_dir properti wont exist creat codeblock python creat output directori ospathexistsself_output_dir osmakedirsself_output_dir gener result match specif file packag instal directori tri maintain path case equival name file differ directori would overwrit one anoth exampl analyz custom save libabigail analyz save xml file analyz metadata folder run either binari xml text would usual big pass one request reason file save run filenam ad result object result object pass back save_result skip save filesystem instead read file send one separ monitor codeblock python def save_resultself result monitornon overwritefals abi result save individu file one need read upload result lookup gener run key analyz name valu result file current upload entir xml text libabigail cant easili read gzip xml updat monitor return name selfspecpackagenam obj filenam resultgetselfnam item dont includ prefix rel_path objreplaceselfspecprefix ospathsep weve alreadi save result file run content spackmonitorread_filefilenam result need analyz valu binary_valu name data valu content install_fil rel_path name abidwxml ttyinfosend result monitor name rel_path monitorsend_analyze_metadataselfspecpackag libabigail data notic function defin requir result object gener run monitor want send boolean overwrit use check result exist first write result exist overwrit fals also notic sinc alreadi save file analyz metadata folder return earli monitor isnt defin function serv send result monitor havent save anyth analyz metadata folder yet might want also use ttyinfo give user messag write result dirnam _writingcommand write command ad new command spack easi simpli add namepi file libspackspackcmd name name subcommand bare minimum two function requir file setup_pars unless command doesnt accept argument setup_pars function requir defin argument flag command take see argpars document httpsdocspythonorglibraryargparsehtml_ detail add argument command set subcommand like spack compil find spack modul lmod refresh add subpars parser handl check spack edit command compil exampl lot command take argument flag argument defin libspackspackcmdcommonargumentspi dont need redefin multipl command name order run command spack search function name command namepi main method command call helper method handl common task rememb ad new command think whether new command actual necessari sometim function desir ad exist command also rememb add unit test command isnt use frequent chang rest spack caus command break without suffici unit test prevent happen whenev addremoverenam command flag exist command make sure updat spack bash tab complet script httpsgithubcomadamjstewartspackblobdevelopsharespackspackcompletionbash_ write hook hook callback make easi design function run differ event way defin hook type insert differ place spack code base whenev hook type trigger way function call find hook type run spack defin hook way modul libspackspackhook defin type hook __init__pi python file folder use hook function file automat pars write new file integr eg libspackspackhooksmyintegrationpi write hook function file automat detect run whenev hook call section cover basic kind hook write type hook follow hook current implement make easi develop add hook differ stage spack instal similar hook would like miss propos add new one pre_installspec pre_instal hook run within instal subprocess directli instal start expect singl argument spec run multiprocess subprocess note see pre_instal function associ packag hook defin rather callback function associ packag instal post_installspec post_instal hook run within instal subprocess directli instal finish build stage remov write one hook expect accept spec argument run multiprocess subprocess post_instal also seen packag context relat hook describ on_install_startspec hook run begin libspackspackinstallerpi instal function packageinstal importantli part build process newli grab task prepar instal write hook type provid spec codeblock python def on_install_startspec start instal want printon_install_start on_install_successspec hook run success instal also run insid build process akin post_instal main differ hook run outsid context stage directori mean build stage remov user alert instal success need write hook run success particular phase use on_phase_success on_install_failurespec hook run given instal failur happen outsid build subprocess somewher installerpi someth els goe wrong need write hook relev failur within build process would want instead use on_phase_failur on_install_cancelspec trigger spec instal cancel reason on_phase_successpkg phase_nam log_fil hook run within instal subprocess specif phase success finish sinc interest packag name phase output requir pkg packag variabl also attach spec pkgspec phase_nam name phase success eg configur log_fil path file output case need inspect otherwis interact on_phase_errorpkg phase_nam log_fil case error phase might want trigger event hook purpos particular hook akin on_phase_success requir variabl packag fail name phase log file might find error on_analyzer_savepkg result analyz save result packag hook call provid packag ran analysi along load result typic result structur name analyz key result object defin detail refanalyzer_run_funct codeblock python def on_analyzer_savepkg result given packag result printdo someth extra packag analysi result ad new hook type ad new hook type simpl libspackspackhooks__init__pi simpli creat new hookrunn name match new hook exampl let say want add new hook call post_log_writ trigger anyth written logger would add follow codeblock python prepost instal run instal subprocess pre_instal hookrunnerpre_instal post_instal hookrunnerpost_instal hook relat log post_log_writ hookrunnerpost_log_writ new hook need decid argument hook would expect sinc relat log let say want messag level mean add python file libspackspackhook folder one callback intend trigger hook might use new hook follow codeblock python def post_log_writemessag level someth custom messsag level everi time write log printrun post_log_writ use hook would call follow somewher logic log exampl use outsid logger alreadi defin codeblock python import spackhook someth gener logger messag spackhookspost_log_writemessag loggerlevel say would best way implement integr logger youd probabl want write custom logger could hook defin within logger serv exampl write hook unit test unit test develop environ warn experiment featur expect chang use product environ instal packag current support export environ variabl specifi ad debug flag build default packag instal build without debug flag howev want add export codeblock consol export spack_add_debug_flagstru spack instal zlib want add custom flag export addit variabl codeblock consol export spack_add_debug_flagstru export spack_debug_flagsg spack instal zlib environ variabl eventu integr spack set command line develop command _cmdspackdoc spack doc _cmdspackstyl spack style spack style exist help develop user check import style mypi flake isort soon black run style check simpli codeblock consol spack style run automat fix isort codeblock consol spack style fix need python packag instal system check work spack bootstrap instal packag use spack unittest see refcontributor guid section cmdspackunittest spack unittest _cmdspackpython spack python spack python command let import debug thing spack interact shell without argument similar normal interact python shell except import spack spack modul codeblock consol spack python spack version python linux x_ spackvers import version version b version__ b true c versionb c true prefer use ipython interpret given ipython instal specifi interpret codeblock consol spack python ipython python default may type copyright credit licens inform ipython enhanc interact python type help spack version python linux x_ either interpret run singl command codeblock consol spack python c import distro distrolinux_distribut ubuntu bionic beaver spack python ipython c import distro distrolinux_distribut ubuntu bionic beaver file codeblock consol spack python test_fetchingpi spack python ipython test_fetchingpi like would normal python command _cmdspackurl spack blame spack blame way quickli see contributor packag file spack repositori provid target packag name file name command exampl ask see contribut packag python codeblock consol spack blame python last_commit line author email week ago mickey mous cheddargmouseorg month ago minni mous swissmouseorg week ago default get tabl view shown sort date contribut recent contribut top want sort instead percentag code contribut add p codeblock consol spack blame p python see git blame view add g instead codeblock consol spack blame g python final get json export data add json codeblock consol spack blame json python spack url packag contain singl url use download sever differ version packag youv ever wonder work magic modspackurl modul contain method extract name version packag url name use spack creat guess name packag determin version url spack replac version determin download regular express parse_name_offset parse_version_offset use extract name version arent perfect order debug spack url pars support spack url command use spack url pars need debug singl url use follow command commandoutput spack url pars httpcacherubylangorgpubrubyrubytargz youll notic name version url correctli detect even see regular express match howev youll notic substitut version number doesnt replac would expect b live particular packag may requir list_url url_for_vers function command also accept spider flag provid spack search version packag print match url spack url list command list everi url everi packag spack given color extrapol flag also color part string detect name version incorrectnam incorrectvers flag use print url pars correctli spack url summari command attempt pars everi url everi packag spack print summari mani correctli pars also print histogram show regular express match frequent commandoutput spack url summari command essenti anyon ad chang regular express pars name version run command chang make sure regular express fix packag break profil spack limit builtin support profil report statist use standard python time tool use featur suppli profil spack command line subcommand _spackp spack profil spack profil output look like commandoutput spack profil graph hdf ellipsi bottom output show top time consum function slowest top profil support python builtin tool cprofil httpsdocspythonorglibraryprofilehtmlmodulecprofile_ _releas releas section document spack releas process intend project maintain task describ requir maintain privileg spack repositori other hope section least provid insight spack project work _releasebranch releas branch current two type spack releas refmajor releas majorreleas etc refpoint releas pointreleas etc diagram spack releas branch work branch develop latest version merg v develop branch releasesv tag v merg v develop tag v merg v develop branch releasesv tag v merg v develop tag v merg v develop tag v develop branch latest contribut nearli pull request target develop spack releas seri also correspond branch eg releasesv x version spack releasesv x version major releas first tag version releas branch minor releas backport develop onto releas branch typic done cherrypick bugfix commit develop avoid version churn user releas seri minor releas make chang would chang concret packag gener contain fix spack core howev sometim prioriti new function need ad minor releas major minor releas tag releas merg releas branch back develop version bump releasespecif chang visibl mainlin conveni also tag latest releas releaseslatest user easili check get latest stabl version see refmergingreleas detail schedul work releas schedul work releas creat github project httpsgithubcomspackspackprojects_ time may sever open releas project exampl two releas past version page link imag imagesprojectspng imag show one releas progress anoth releas project board contain issu pull request github show statu bar complet work green work progress purpl work start yet gray fairli easi see progress spack project board firm commit move work releas frequent need make releas task yet done simpli move next minor major releas rather delay releas complet use github project board see github document httpsdocsgithubcomengithubmanagingyourworkongithubaboutprojectboards_ _majorreleas make major releas assum project board alreadi creat requir work complet step make major releas creat two new project board one next major releas one next point releas move option task done one new project board gener small bugfix go next point releas major featur refactor chang could affect concret go next major releas creat branch releas base develop codeblock consol git checkout b releasesv develop version vxyz branch name releasesvxi creat releasesvxi branch prepar xy releas bump version libspackspack__init__pi see exampl httpsgithubcomspackspackcommiteebcbadcfececfba_ updat changelogmd major highlight bullet form use proper markdown format like exampl httpsgithubcomspackspackcommitdbfdfcfeecbdddbac_ push releas branch github make sure ci pass releas branch includ regular unit test build test es pipelin gitlabspackio httpsgitlabspackio_ ci pass submit pull request develop normal keep rebas releas branch develop ci pass make sure entir document date document outdat submit pull request develop normal keep rebas releas branch develop follow step refpublishingreleas follow step refmergingreleas follow step refannouncingreleas _pointreleas make point releas assum project board alreadi creat requir work complet step make point releas creat new project board next point releas move option task done next project board check releas branch alreadi exist xyz releas releas branch call releasesvxi v would check releasesv codeblock consol git checkout releasesv cherrypick pull request done column releas project board onto releas branch usual fairli simpl sinc squash commit vast major pull request mean one commit per pull request cherrypick exampl pull request httpsgithubcomspackspackpull_ three commit squash singl commit merg see commit creat imag imagesprcommitpng easili cherri pick like assum alreadi releas branch check codeblock consol git cherrypick eda pull request rebas squash youll need cherrypick associ commit individu warn import cherrypick commit order happen otherwis get conflict cherrypick cherrypick onto point releas look merg date number pull request date open sometim may still get merg conflict even cherrypick commit order gener mean interven pull request one your tri pick depend case youll need make judgment call regard pull request consid number affect file result differ depend chang small might cherrypick add task releas board chang larg may decid fix worth includ point releas case remov task releas project alway decid manual backport fix releas branch neither option make sens requir lot work seldom right choic bump version libspackspack__init__pi see exampl httpsgithubcomspackspackcommitffabbdfadebba_ updat changelogmd list chang typic summari commit cherrypick onto releas branch see changelog httpsgithubcomspackspackcommitffabbdfadebba_ push releas branch github make sure ci pass releas branch includ regular unit test build test es pipelin gitlabspackio httpsgitlabspackio_ ci pass youll need figur make chang releas branch make commit modifi remov cherrypick commit cherrypick develop make happen follow step refpublishingreleas follow step refmergingreleas follow step refannouncingreleas _publishingreleas publish releas github creat releas github go githubcomspackspackreleas httpsgithubcomspackspackreleases_ click draft new releas set tag version name tag creat name start v contain three part version eg v v set target releasesvxi branch eg releasesv set releas titl vxyz match tag eg v past latest releas markdown changelogmd file text save draft keep come back prepar releas readi final releas click publish releas immedi publish go back githubcomspackspackreleas httpsgithubcomspackspackreleases_ download autogener targz file releas sourc code targz link click edit releas made attach download releas tarbal binari two thing make sure hash releas chang time github sometim annoyingli chang way gener tarbal result hash chang reli autogener tarbal link get download count releas visibl github api github track download artifact sourc link see releas page httpsapigithubcomreposspackspackreleases_ search download_count see go readthedocsorg httpsreadthedocsorgprojectsspack_ activ releas tag build document make releas version select version menu _mergingreleas updat releaseslatest develop new releas highest spack releas yet also tag releaseslatest exampl suppos highest releas current releas tag releaseslatest higher make new releas older major version spack eg tag releaseslatest newer major version tag releaseslatest codeblock consol git checkout releasesvxi vxi new releas branch git tag forc releaseslatest git push forc tag forc argument git tag make git overwrit exist releaseslatest tag new one also merg releas tag releaseslatest develop make sure merg commit codeblock consol git checkout develop git merg noff vxyz vxyz new releas tag git push merg back develop updat version changelogmd develop ensur releas tag reachabl head develop must use real merg commit via noff option ensur releas tag reachabl tip develop necessari spack v work properli use git describ tag find last reachabl tag repositori report far exampl codeblock consol spack v bdee say commit bdee commit ahead releas put step last process best releas complet tag youv tag releas later decid want tag later commit youll need merg _announcingreleas announc releas announc releas major spack commun channel publish releas take care github remain channel twitter slack mail list step announc releas twitter compos tweet spackpm account per spacktwitt slack channel sure includ link releas page github base tweet exampl httpstwittercomspackpmstatus_ announc releas slack compos messag gener slack channel spackpmslackcom httpsspackpmslackcom_ prefac messag channel notifi even peopl current log sure includ link tweet tweet shown inlin retyp releas announc announc releas spack mail list compos email spack mail list sure includ link releas page github also help includ inform directli email base announc exampl email httpsgroupsgooglecomforumtopicspackwtcti_xs_ youv complet step congratul your done youv finish make releas copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _monitor monitor use spack monitor httpsgithubcomspackspackmonitor_ spackmon server store databas packag build associ metadata proven research kind develop follow instruct spack monitor document httpsspackmonitorreadthedocsorg_ first creat server along usernam token use guid interact server analysi monitor read monitor analysi mean want send analysi result server see refanalyze_monitor monitor instal sinc instal typic build packag logic want tell spack monitor step let start exampl want monitor instal hdf unless disabl authent server first want export spack monitor token usernam environ codeblock consol export spackmon_tokenafdfebdbffeec export spackmon_userspacki default host server expect http prefix ms case simpli add monitor flag instal command codeblock consol spack instal monitor hdf need custom host prefix well codeblock consol spack instal monitor monitorprefix monitor monitorhost httpsmonitorserviceio hdf precaut cut earli spack client provid authent credenti exampl run command without export usernam token youll see codeblock consol error requir export spackmon_token spackmon_us extra check ensur dont start build discov forgot export token howev monitor server authent disabl tell client skip step codeblock consol spack instal monitor monitordisableauth hdf servic run youll cleanli exit earli instal continu youv ask monitor servic exampl youll see monitor servic run codeblock consol errno connect refus want continu build stop monitor set monitorkeepgo flag codeblock consol spack instal monitor monitorkeepgo hdf could mean request fail partial data ad monitor databas set appli first request check server run subsequ request dont monitor server run want build simpli dont provid monitor flag final want provid one tag build codeblock consol add one tag pizza spack instal monitor monitortag pizza hdf add two tag pizza pasta spack instal monitor monitortag pizzapasta hdf monitor container argument group avail add container command docker add monitor docker contain recip gener use default assum monitor server run localhost would start spackyaml present work directori codeblock yaml spack spec samtool codeblock consol preview first spack container monitor write dockerfil spack container monitor dockerfil instal command edit includ command enabl monitor howev get secret contain monitor server someth done care specif never tri defin secret env arg use buildarg tri get secret contain via temporari file remov fact still exist layer instead recommend use buildkit explain httpspythonspeedcomarticlesdockerbuildsecrets_ youll need export environ variabl spack monitor server codeblock consol export spackmon_tokenafdfebdbffeec export spackmon_userspacki use buildkit along build identifi name secret codeblock consol docker_buildkit docker build secret idstenvspackmon_token secret idsuenvspackmon_us spackcontain secret expect come environ temporarili mount avail runsecretsnam forget suppli authent requir build fail need build host interact spack monitor localhost youll need tell docker use host network codeblock consol docker_buildkit docker build networkhost secret idstenvspackmon_token secret idsuenvspackmon_us spackcontain singular add monitor singular contain build spackyaml need modifi slightli specifi want differ format codeblock yaml spack spec samtool contain format singular gener recip codeblock consol preview first spack container monitor write singular recip spack container monitor singular singular doesnt direct way defin secret build time bit manual command add file sourc secret remov sinc singular doesnt layer like docker delet file truli remov contain histori let say file secretssh codeblock consol secretssh export spackmon_userspack export spackmon_tokenafdfebdbffeec would gener singular recip add file section sourc file start post importantli remov final end section codeblock bootstrap docker spackubuntubioniclatest stage build file secretssh optsecretssh post optsecretssh spack instal command dont forget remov rm optsecretssh build contain normal would codeblock consol sudo singular build containersif singular monitor offlin case want save monitor result filesystem upload later perhap environ dont credenti isnt safe use use monitorsaveloc flag codeblock consol spack instal monitor monitorsaveloc hdf save result subfold monitor design spack report folder default homespackreportsmonitor readi upload spack monitor server codeblock consol spack monitor upload spackreportsmonitor choos root directori result shown specif subdirectori command accept argument specifi configur monitor copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _pipelin pipelin spack provid command support gener run autom build pipelin design gitlab ci highest level work like provid spack environ describ set packag care includ within environ file descript packag map gitlab runner spack gener gitlabciyml file contain job descript packag run properli configur gitlab ci instanc run gener pipelin build deploy binari option report cdash instanc regard health build evolv time get start pipelin fairli straightforward get start autom build pipelin minimum youll need set gitlab instanc gitlab ci httpsaboutgitlabcomproductcontinuousintegration_ configur least one runner httpsdocsgitlabcomrunner_ basic step set build pipelin follow creat repositori gitlab instanc add spackyaml root contain pipelin environ add gitlabciyml root contain two job one gener pipelin dynam one run gener job push commit contain spackyaml gitlabciyml mention gitlab repositori see reffunctional_exampl section minim work exampl see also refcustom_workflow section link exampl custom workflow base spack pipelin possibl set pipelin gitlabcom illustr build limit minut gener hardwar also possibl hook httpsaboutgitlabcombloggettingstartedgitlabcigcp_ gitlab googl kubernet engin gke httpscloudgooglecomkubernetesengine_ amazon elast kubernet servic ek httpsawsamazoncomeks_ though topic outsid scope document spack pipelin make use trigger httpsdocsgitlabcomeeciyamltrigger_ syntax run dynam gener child pipelin httpsdocsgitlabcomeecipipelinesparent_child_pipelineshtml_ note use dynam child pipelin requir run gitlab version _functional_exampl function exampl simplest fulli function standalon exampl work pipelin examin live exampl project httpsgitlabcomscottwittenburgspackpipelinedemo_ gitlabcom here gitlabciyml file exampl build run pipelin codeblock yaml stage gener build variabl spack_repo httpsgithubcomscottwittenburgspackgit spack_ref pipelinesreproduciblebuild generatepipelin stage gener tag docker imag name ghcrioscottwittenburgecpesubunturunnerx_ entrypoint before_script git clone spack_repo pushd spack git checkout spack_ref popd spacksharespacksetupenvsh script spack env activ withoutview spack ci gener artifactsroot ci_project_dirjobs_scratch_dir outputfil ci_project_dirjobs_scratch_dirpipelineyml artifact path ci_project_dirjobs_scratch_dir buildjob stage build trigger includ artifact jobs_scratch_dirpipelineyml job generatepipelin strategi depend key thing note two job first job run generatepipelin run spack ci gener command gener dynam child pipelin write yaml file pick second job buildjob use trigger downstream pipelin here spack environ built pipelin repres spackyaml file codeblock yaml spack view fals concret separ definit pkg zlib bzip arch gcc archlinuxubuntux_ spec matrix pkg arch mirror mirror sspackpublicmirror gitlabci before_script git clone spack_repo pushd spack git checkout spack_checkout_vers popd spacksharespacksetupenvsh script pushd spack_concrete_env_dir spack env activ withoutview popd spack ci rebuild map match osubuntu runnerattribut imag name ghcrioscottwittenburgecpesubunturunnerx_ entrypoint tag docker enableartifactsbuildcach true rebuildindex fals element file import spack ci pipelin describ detail coupl thing note work exampl normal enableartifactsbuildcach recommend product result larg binari artifact get transfer back forth gitlab runner exampl gitlabcom share persist file system secret store give permiss write bucket enabledbuildcacheartifact way propag binari job depend also usual good idea let pipelin gener final rebuild buildcach index job subsequ pipelin gener quickli determin spec date need rebuilt good idea reason well scope discuss case disabl use rebuildindex fals index would gener artifact mirror anyway consequ would avail subesequ pipelin run note addit reproduc build previous work pipelin requir chang build job runnerattribut environ locat chang typic show keyerror fail job sure point spack_concrete_env_dir use includ environ sure make includ file avail build job mean ad file artifact directori file also miss reproduc artifact locat environ chang includ file rel path may adapt work project context gener job concret env dir context build job spack command support pipelin spack provid ci command subcommand support spack ci pipelin command cover detail section _cmdspackci spack ci supercommand function relat gener pipelin execut pipelin job _cmdspackcigener spack ci gener concret spec activ environ stage describ refstaging_algorithm write result gitlabciyml disk concret environ spack ci gener also write spacklock file provid gener child job made avail gener job artifact aid reproduc fail build local environ mean two artifact need export pipelin gener job defin gitlabciyml first output yaml file spack ci gener directori contain concret environ file reffunctional_exampl section mention one path artifact path list use artifactsroot top level directori contain gener pipelin yaml concret environ use prunedag noprunedag configur whether job gener spec alreadi date mirror enabl dag prune use prunedag inform may requir spackyaml file see refnoop_job section regard servicejobattribut option checkindexonli argument use speed pipelin gener tell spack consid remot buildcach indic check remot mirror determin spec dag date default behavior spack fetch index check spec found index also perform direct check spec mirror remot buildcach index date easili happen updat frequent behavior ensur spack way know certain statu concret spec remot mirror slow pipelin gener significantli optim argument experiment run gener pipelin document seri optim pass design reduc size gener file depend also experiment disabl gitlab refer dag schedul intern use depend keyword rather need list depend job drawback use option job begin job previou stage must first complet benefit gitlab allow depend list use depend instead need option outputfil argument absolut path includ file name gener pipelin given default gitlabciyml option artifactsroot argument use determin concret environ directori locat directori creat spack ci gener contain spackyaml gener spacklock pass child job artifact directori also root directori artifact gener job pipelin _cmdspackcirebuild spack ci rebuild purpos spack ci rebuild straightforward take assign spec job check whether target mirror alreadi binari spec build spec sourc push binari mirror accomplish reproduc way subcommand prepar spack instal command line build singl spec dag save command shell script installsh current work directori run instal spec shell script also export artifact aid reproduc build outsid ci environ necessari instal spec sourc spack ci rebuild also subsequ creat binari packag spec tri push mirror spack ci rebuild subcommand mainli expect input come either environ variabl gitlabci section spackyaml environ file two main sourc environ variabl written gitlabciyml spack ci gener provid gitlab ci runtim _cmdspackcirebuildindex spack ci rebuildindex conveni command rebuild buildcach index associ mirror activ gitlaben environ specifi mirror url name requir _cmdspackcireproducebuild spack ci reproducebuild given url gitlab pipelin rebuild job download unzip artifact local directori specifi option workingdir argument find target job gener pipelin extract detail run assum job use docker imag command print docker run command line basic instruct reproduc build local note job fail pipelin print messag give argument pass spack ci reproducebuild order reproduc particular build local pipelineen spack environ here exampl spack environ file enhanc section describ build pipelin codeblock yaml spack definit pkg readlin compil gcc ose osubuntu oscento spec matrix pkg compil ose mirror cloud_gitlab httpsmirrorspackio gitlabci map match osubuntu runnerattribut tag spackkub imag spackubuntubion match oscento runnerattribut tag spackkub imag spackcento cdash buildgroup releas test url httpscdashspackio project spack site spack aw gitlab instanc hope definit spec mirror etc section alreadi familiar part spack refenviron let take indepth look pipelinerel section environ file might familiar gitlabci section use configur pipelin workload gener mainli job build spec assign configur runner instanc entri within list map correspond known gitlab runner match section use assign releas spec one runner runnerattribut section use configur specjob particular runner toplevel gitlabci section well runnerattribut section also contain follow key imag tag variabl before_script script after_script key provid gitlabci level use default runnerattribut unless overridden section specifi key runnerattribut level gener overrid key specifi higher level coupl except variabl specifi level result dictionari get merg result gener job duplic variabl name get assign valu provid specif runnerattribut tag specifi gitlabci level well runnerattribut level list tag combin duplic remov see section use custom spack exampl key could use pipelin option configur within gitlabci section well bootstrap section allow specifi list spec definit stage ahead environ spec section describ detail enableartifactsbuildcach key take boolean determin whether pipelin use artifact store pass along buildcach one stage next default dont provid option fals option brokenspecsurl key tell spack check list spec known current broken develop spec found spack ci gener command fail error messag inform user broken spec encount allow pipelin fail earli avoid wast comput resourc attempt build packag succeed option cdash section provid inform use spack ci gener command invok spack ci start report cdash job gener environ belong build group within cdash track time releas progress build group may job ad remov url project site use specifi cdash instanc build result report take look schema httpsgithubcomspackspackblobdeveloplibspackspackschemagitlab_cipy_ gitlabci section spack environ file see precis syntax allow _rebuild_index note rebuild buildcach index default pipelin job may rebuild packag creat buildcach entri push mirror automat regener mirror buildcach index afterward index need default rebuild job pipelin updat index end job avoid possibl race condit simultan job avoid comput expens regener index potenti save minut per job depend number binari packag mirror result default mirror buildcach index may correctli reflect mirror content end pipelin make sure buildcach index date end pipelin spack gener job updat buildcach index target mirror end pipelin default disabl behavior ad rebuildindex fals insid gitlabci section spack environ spack assign job runner attribut found servicejobattribut provid spackyaml _noop_job note noop job spec environ need rebuilt given pipelin run mean alreadi date mirror singl succes job noop still gener avoid empti pipelin gitlab consid error option servicejobattribut section ad spackyaml provid tag imag variabl gener noop job section also support provid before_script script after_script case want take custom action case empti pipelin follow exampl section ad spackyaml codeblock yaml spack spec openmpi mirror cloud_gitlab httpsmirrorspackio gitlabci map match oscento runnerattribut tag custom tag imag spackcento servicejobattribut tag custom tag imag name someimageregistrycustomimagelatest entrypoint binbash script echo custom messag custom script exampl illustr provid attribut use run noop job case empti pipelin field noop job might gener script happen provid one assign spec runner map section correspond list runner assign spec runner list travers order look match first runner match releas spec assign build spec match section within runner map section list spec spec match releas spec specsatisfi method use runner consid match configur specsjob runner runner chosen build releas spec runnerattribut section provid inform determin detail job context runner runnerattribut section must tag key list contain least one tag use select runner among runner known gitlab instanc docker executor type runner imag key use specifi docker imag use build releas spec could also appear dictionari name specifi imag name well entrypoint overrid whatev default imag type runner variabl key use pass inform runner need work eg schedul paramet etc variabl provid ad verbatim job runnerattribut section also allow user suppli custom script before_script after_script section appli everi job schedul runner allow user custom prepar cleanup task fit particular workflow well complet custom rebuild spec choos spack gener before_script after_script job provid custom script spack gener one assum concret environ directori locat within artifacts_root provid within ci_project_dir activ environ invok spack ci rebuild _staging_algorithm summari gitlabciyml gener algorithm spec yield matrix spec environ depend comput entir result set spec stage togeth run gitlabcimap entri stage spec assign runner stage name given process figur order spec built take consider gitlab ci rule jobsstag stage process goal maxim number job stage pipelin ensur job stage depend job previou stage sinc job guarante complet alreadi runner determin job inform runnerattribut use popul variou part job descript use gitlab ci job assign runner gitlabciyml written disk short exampl provid would result readlin ncurs pkgconf packag get stage built runner chosen spackk tag exampl spack assum runner docker executor type runner thu certain job run cento contain other ubuntu contain result gitlabciyml contain job three stage job gener presenc spack_cdash_auth_token environ variabl spack ci gener command would result job put build group cdash call releas test group creat didnt alreadi exist option compil bootstrap spack pipelin also support bootstrap compil system may alreadi desir compil instal idea specifi list thing bootstrap definit spack guarante instal phase pipelin releas spec reli packag avail binari mirror need later pipelin moment viabl usecas bootstrap instal compil here exampl bootstrap compil might look like codeblock yaml spack definit compilerpkg llvmclang oscento gcc oscento llvmclang osubuntu gcc osubuntu pkg readlin compil gcc gcc gcc clang clang ose osubuntu oscento spec matrix pkg compil ose exclud gcc oscento gcc osubuntu gitlabci bootstrap name compilerpkg compileragnost true map map similar exampl higher descript exampl add list definit call compilerpkg add number list compil packag stage ahead full matrix releas spec exampl readlin within gitlabci section note addit bootstrap section contain list item refer list definit section item either dictionari string suppli dictionari must name key whose valu must match one list definit compileragnost key whose valu boolean suppli string need match one list provid definit think bootstrap list order list pipelin phase stage actual releas spec introduc anoth layer bottleneck pipelin job stage one phase must complet job next phase begin also mean guarante bootstrap compil avail need compileragnost key provid item bootstrap list tell spack ci gener command job stage particular list compil remov spec compil avail runner job run use build packag includ bootstrap phase exampl result bootstrap compil packag push binari mirror local artifact mirror actual releas spec built case job correspond subsequ releas spec configur install_missing_compil spack ask instal packag compil doesnt know quickli instal binari mirror first sinc bootstrap compil option item left environmentstack file case bootstrap done spec stage build runner expect alreadi need compil instal configur spack use use custom spack pipelin runner version spack readi invok reason want use custom version spack run pipelin section provid exampl could take advantag userprovid pipelin script accomplish fairli simpli first consid specifi sourc version spack want use variabl either written directli gitlabciyml provid ci variabl defin gitlab ui upstream pipelin let say choos variabl name spack_repo spack_ref refer particular fork spack branch want run pipelin refer custom shell script invok pipelin gener job rebuild job here generatepipelin job top document updat clone sourc custom spack codeblock yaml generatepipelin tag someothertag before_script git clone spack_repo pushd spack git checkout spack_ref popd spacksharespacksetupenvsh script spack env activ withoutview spack ci gener checkindexonli artifactsroot ci_project_dirjobs_scratch_dir outputfil ci_project_dirjobs_scratch_dirpipelineyml after_script rm rf spack artifact path ci_project_dirjobs_scratch_dir take care get desir version spack pipelin gener spack ci gener also want gener rebuild job clone version spack next would updat spackyaml follow codeblock yaml spack gitlabci map match osubuntu runnerattribut tag spackkub imag spackubuntubion before_script git clone spack_repo pushd spack git checkout spack_ref popd spacksharespacksetupenvsh script spack env activ withoutview spack_concrete_env_dir spack ci rebuild after_script rm rf spack gener rebuild job use shell script clone spack run actual workload imagin long pipelin mani spec built point spack repositori branch tendenc chang frequent main repo develop branch child job check develop branch could result job run one sha spack later job run anoth help avoid issu pipelin gener process save global variabl call spack_vers spack_checkout_vers captur version spack use gener pipelin spack_vers variabl simpli contain humanread valu produc spack v pipelin gener time spack_checkout_vers variabl use git checkout command make sure child job checkout version spack use gener pipelin take advantag could simpli replac git checkout spack_ref exampl spackyaml git checkout spack_checkout_vers hand your point spack repositori branch control may benefit use captur spack_checkout_vers instead clone use variabl defin spack_repo spack_ref exampl abov _custom_workflow custom workflow mani way take advantag spack ci pipelin achiev custom workflow build packag resourc one exampl custom pipelin workflow spack tutori contain repo httpsgithubcomspackspacktutorialcontainer_ project use github sourc control gitlab autom spack ci pipelin dockerhub autom build build docker imag complet fulli popul binari mirror use instructor particip spack tutori take look repo see accomplish use spack ci pipelin see follow markdown file root repositori descript document describ workflow descriptionmd dockerhub_setupmd gitlab_setupmd updatingmd _ci_environment_vari environ variabl affect pipelin oper certain secret inform provid pipelin infrastructur via environ variabl usual reason secur case support pipelin use case pr test environ variabl use pipelin infrastructur describ aws_access_key_id option need binari mirror bucket aws_secret_access_key option need binari mirror bucket s_endpoint_url option need binari mirror bucket aw cdash_auth_token option need order report build group cdash spack_signing_key option need want spack ci rebuild trust key store variabl case subsequ use sign verifi binari packag instal creat buildcach could also alreadi trust key spack know key present anywher spack instal spec use nochecksignatur creat buildcach use u unsign binari copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _contributionguid contribut guid guid intend develop administr want contribut new packag featur bugfix spack assum least familiar git vc github guid show exampl contribut workflow discuss granular pullrequest pr also discuss test pr must pass order accept spack first pr quot bitbucket tutori httpswwwatlassiancomgittutorialsmakingapullrequest_ pull request mechan develop notifi team member complet featur pull request notificationit dedic forum discuss propos featur import complet featur chang one propos pr correspond one featurebugfixextensionetc one creat pr chang relev differ idea howev review pr becom tediou error prone possibl tri follow onepronepackagefeatur rule branch spack develop branch latest contribut nearli pull request start develop target develop branch major releas seri releas branch origin develop tag point releas seri exampl releasesv tag etc version spack backport import bug fix branch advanc packag version make chang would chang way spack concret depend current maintain manag branch cherrypick develop see refreleas inform continu integr spack use github action httpsdocsgithubcomenactions_ continu integr test mean everi time submit pull request seri test run make sure didnt accident introduc bug spack pr accept pass test certainli wait result test submit pr recommend run local speed review process note oftentim ci fail reason problem pr exampl aptget pip homebrew fail download one depend test suit transient bug caus unit test timeout job fail click detail link click test fail doesnt look like fail reason relat pr two option write permiss spack repositori see restart workflow button righthand side close reopen pr rerun test test keep fail may problem pr notic everi recent pr fail error messag may issu occur ci infrastructur one spack depend put new releas caus problem case pleas file issu current test python maco linux perform type test _cmdspackunittest unit test unit test ensur core spack featur like fetch spec resolut work expect pr add new packag modifi exist one there littl chanc chang could caus unit test fail howev make chang spack core librari run unit test make sure didnt break anyth sinc test thing like fetch vc repo unit test requir git httpsgitscmcom_ mercuri httpswwwmercurialscmorg_ subvers httpssubversionapacheorg_ run make sure instal system found path instal spack system packag manag run unit test use codeblock consol spack unittest test may take sever minut complet know modifi singl spack featur run subset test time exampl would run test libspackspacktestarchitecturepi codeblock consol spack unittest libspackspacktestarchitecturepi would run test_platform test file codeblock consol spack unittest libspackspacktestarchitecturepytest_platform allow develop iter make chang test chang make anoth chang test chang etc use pytest httppytestorg_ test framework type argument pass pytest command underneath see pytest doc httpdocpytestorgenlatestusagehtmlspecifyingtestsselectingtests_ detail test select syntax spack unittest special option help understand test avail get list avail unit test file run commandoutput spack unittest list ellipsi see detail list avail unit test use spack unittest listlong commandoutput spack unittest listlong ellipsi see fulli qualifi name test use listnam commandoutput spack unittest listnam ellipsi combin pytest argument restrict test want know exampl see test architecturepi commandoutput spack unittest listlong libspackspacktestarchitecturepi also combin option pytest keyword search see pytest usag doc httpsdocspytestorgenstableusagehtmlspecifyingtestsselectingtests_ detail test select syntax exampl see name test spec concret somewher name commandoutput spack unittest listnam k spec concret default pytest captur output unit test print captur output fail test sometim help see output interact test run eg add print statement unit test see output live use argument pytest codeblock consol spack unittest listlong libspackspacktestarchitecturepytest_platform unit test crucial make sure bug arent introduc spack modifi core spack librari ad new function pleas add new unit test featur consid strengthen exist test like ask submit pull request spack project github check pytest doc httppytestorg_ feel free ask guidanc write test note may notic sharespackqarununittest script repositori script design ci run unit test report coverag statist back codecov want run unit test suggest use spack unittest style test spack use flake httpflakepycqaorgenlatest_ test pep httpswwwpythonorgdevpepspep_ conform mypi httpsmypyreadthedocsioenst type check pep seri style guid python provid suggest everyth variabl name indent order limit number pr mostli style chang decid enforc pep conform pr need compli pep order accept modifi spack librari need success typecheck mypi well test complianc spack style easi simpli run spack style command codeblock consol spack style spack style coupl advantag run tool hand test file modifi sinc branch develop work regardless directori automat add approv exempt flake check exampl url often longer charact exempt line length check also exempt line start homepag url version variant depends_on extend packagepi file also possibl directli run flake use spack formatt plugin includ spack approv flake exempt found httpsgithubcomspackspackblobdevelopflake_ well youll see someth like codeblock consol runflaketest depend found flake run flake code check spack modifi file varspackreposbuiltinpackageshdfpackagepi varspackreposbuiltinpackageshdfpackagepi varspackreposbuiltinpackagesnetcdfpackagepi flake check clean howev arent compliant pep flake complain codeblock consol varspackreposbuiltinpackagesnetcdfpackagepi f os import unus varspackreposbuiltinpackagesnetcdfpackagepi e mani blank line varspackreposbuiltinpackagesnetcdfpackagepi e line long charact flake found error error messag straightforward dont understand mean ask question submit pr line number chang add delet line simpli run spack style updat tip tri fix flake error revers order elimin need multipl run spack style recomput line number make much easier fix error directli ci output warn flake pepnam requir number depend order run instal pyflak pypepnam easiest way ensur right packag pythonpath run spack activ pyflak spack activ pepnam depend symlink central locat see error messag like codeblock consol traceback recent call last file usrbinflak line modul pkg_resourc import load_entry_point importerror modul name pkg_resourc mean flake couldnt find setuptool pythonpath document test spack use sphinx httpwwwsphinxdocorgenstable_ build document order prevent thing like broken link miss import ad document test build document fail warn error messag build document requir sever depend sphinx sphinxcontribprogramoutput sphinxrtdthem graphviz git mercuri subvers instal spack eg codeblock consol spack instal pysphinx pysphinxcontribprogramoutput pysphinxrtdthem graphviz git mercuri subvers warn sphinx sever requir depend httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackagespysphinxpackagepy_ your use python spack instal pysphinx friend need make avail python easiest way run codeblock consol spack activ pysphinx spack activ pysphinxrtdthem spack activ pysphinxcontribprogramoutput depend symlink python tree altern could arrang librari directori ad pythonpath see error messag like codeblock consol extens error could import extens sphinxcontribprogramoutput except modul name sphinxcontribprogramoutput make html error mean sphinx couldnt find pysphinxcontribprogramoutput pythonpath depend instal tri build document codeblock consol cd pathtospacklibspackdoc make clean make see warn error messag correct pr accept edit document obvious run document test even simpli ad new packag chang could caus document test fail codeblock consol package_listrst warn block quot end without blank line unexpect unind first error messag mean noth sinc didnt edit file look line file question codeblock rst descript netcdf set softwar librari selfdescrib machin independ data format support creation access share arrayori scientif data document includ refa list spack packag packagelist add new packag docstr ad page problem case docstr look like codeblock python class netcdfpackag netcdf set softwar librari selfdescrib machineindepend data format support creation access share arrayori scientif data docstr start newlin charact els sphinx complain instead look like codeblock python class netcdfpackag netcdf set softwar librari selfdescrib machineindepend data format support creation access share arrayori scientif data document chang result much obfusc warn messag dont understand mean feel free ask submit pr coverag spack use codecov httpscodecovio_ gener report unit test coverag help us tell percentag line code spack cover unit test although code cover unit test still contain bug much less error prone code cover unit test codecov provid browser extens httpsgithubcomcodecovsourcegraphcodecov_ googl chrome firefox extens integr github allow see coverag linebylin view spack repositori new spack great way get start write unit test increas coverag unlik ci github action codecov test requir pass order pr merg modifi core spack librari would greatli appreci unit test cover chang line otherwis way know whether chang introduc bug make substanti chang core may request unit test increas coverag note file modifi packag file care coverag pr may notic codecov test fail even though didnt modifi core file mean spack overal coverag increas sinc branch develop good thing realli want get codecov test pass rebas latest develop requir git workflow spack still beta stage develop user run develop branch fix new featur constantli merg keep uptod upstream maintain local differ contribut pr spack branch easiest way contribut pull request make chang new branch make sure develop uptod creat new branch codeblock consol git checkout develop git pull upstream develop git branch descriptive_branch_nam git checkout descriptive_branch_nam assum local develop branch track upstream develop branch spack requir could also remot branch conveni local branch track upstream normal prefer commit pertain packag packagenam messag packagenam descript messag import add descript messag other might look chang later year mayb two would understand rational behind make chang keep develop branch pure edit file commit run codeblock consol git add files_to_be_part_of_the_commit git commit messag descriptive_message_of_this_particular_commit next push remot fork creat pr codeblock consol git push origin descriptive_branch_nam setupstream github provid tutori httpshelpgithubcomarticlesaboutpullrequests_ file pull request send request make develop destin branch need chang immedi dont time wait pr merg alway work branch multipl pr anoth option maintain frankenstein branch combin branch codeblock consol git co develop git branch your_modified_develop_branch git checkout your_modified_develop_branch git merg descriptive_branch_nam done new pr submit make sure keep local branch uptod upstream develop cherrypick made chang local modifi develop branch alreadi commit later decid contribut spack use cherrypick creat new branch commit first check local modifi develop branch codeblock consol git checkout your_modified_develop_branch get hash commit want output codeblock consol git log next creat new branch upstream develop copi commit want pr codeblock consol git checkout develop git pull upstream develop git branch descriptive_branch_nam git checkout descriptive_branch_nam git cherrypick hash git push origin descriptive_branch_nam setupstream creat pr webinterfac github net result follow patch local version spack use cherrypick chang standalon branch submit pr upstream sever commit contribut could follow procedur get hash cherrypick pr branch note import whenev chang someth might import upstream creat pull request soon possibl wait weeksmonth might forget modifi certain file could get difficult isol chang standalon clean pr rebas develop constantli make contribut spack possibl file pr chang pr merg creat merg conflict mean pr longer automat merg without chanc break chang case ask rebas top latest upstream develop first make sure develop branch uptod codeblock consol git checkout develop git pull upstream develop need switch branch submit pr rebas top develop codeblock consol git checkout descriptive_branch_nam git rebas develop git like ask resolv conflict edit file say cant merg automat resolv conflict run codeblock consol git add file_that_could_not_be_merg git rebas continu may repeat process multipl time conflict resolv done simpli forc push rebas branch remot fork codeblock consol git push forc origin descriptive_branch_nam rebas cherrypick also perform rebas use cherrypick first creat temporari backup branch codeblock consol git checkout descriptive_branch_nam git branch tmp anyth goe wrong alway go back tmp branch look log save hash commit would like keep codeblock consol git log next go back origin branch reset develop make sure local develop branch uptod upstream codeblock consol git checkout develop git pull upstream develop git checkout descriptive_branch_nam git reset hard develop cherrypick relev commit codeblock consol git cherrypick hash git cherrypick hash push modifi branch fork codeblock consol git push forc origin descriptive_branch_nam everyth look good delet backup branch codeblock consol git branch delet forc tmp rewrit histori sometim may end branch diverg much develop easili rebas current commit histori experiment natur net result import may rewrit histori first merg upstream develop reset branch branch question run codeblock consol git merg develop git reset develop point branch point commit develop therebi two indistinguish howev file previous modifi stay word lose chang made chang review look diff codeblock consol git statu git diff next step rewrit histori ad file creat commit codeblock consol git add files_to_be_part_of_commit git commit messag descriptive_messag chang file commit push branch fork creat pr codeblock consol git push origin setupstream copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _basicusag basic usag spack command mani subcommand youll need small subset typic usag note spack color output less r use spack maintain color eg codeblock consol spack find less r recommend follow put bashrc file codeblock sh alia lessless r see color output use less r color disabl pipe output case tell spack forc color output flag codeblock consol spack color alway find less r environ variabl codeblock consol spack_coloralway spack find less r list avail packag instal softwar spack need know softwar avail see list avail packag name refpackagelist webpag use spack list command _cmdspacklist spack list spack list command print list packag spack instal commandoutput spack list ellipsi thousand weve truncat output find refful list packagelist packag list name alphabet order pattern match wildcard treat though start end util equival util pattern treat caseinsensit also add search descript packag addit name exampl packag whose name contain sql commandoutput spack list sql packag whose name descript contain document commandoutput spack list searchdescript document _cmdspackinfo spack info get inform particular packag spack list use spack info suppli name packag commandoutput spack info mpich inform selfexplanatori safe version version spack know checksum use checksum verifi version download without error virus refdepend secspec refvirtu depend secvirtualdepend describ detail later _cmdspackvers spack version see avail version packag run spack version exampl commandoutput spack version libelf two section output safe version version spack checksum file verifi version download correctli mani case spack also show version avail webthes remot version spack get inform scrape directli packag web page depend packag releas organ spack may may abl find remot version instal uninstal _cmdspackinstal spack instal spack instal instal packag shown spack list exampl instal latest version mpileak packag might type codeblock consol spack instal mpileak mpileak depend packag spack instal depend first fetch mpileak tarbal expand verifi download without error build instal directori spack_rootopt youll see number messag spack lot build output messag packag instal codeblock consol spack instal mpileak depend build output instal mpileaksphpbnhlwuhogmugriohcwempqri binari mpileaksphpbnhlwuhogmugriohcwempqri found instal sourc mpileak execut phase autoreconf mpileak execut phase configur mpileak execut phase build mpileak execut phase instal spackoptlinuxrhelbroadwellgccmpileaksphpbnhlwuhogmugriohcwempqri last line indic packag instal add spack debug option one time spack instal mpileak get addit even verbos output build specif version spack also build specif version packag add packag name follow version codeblock consol spack instal mpich number version packag instal without interf good multius site instal version one user need disrupt exist instal user addit differ version spack custom compil compiletim option variant compil flag platform cross compil instal spack uniqu also configur depend packag built exampl two configur version packag one built boost version built version coexist done command line use spec syntax spack call descriptor use refer particular packag configur spec command mpileak mpileak valid spec well talk use custom instal refsecspec reus instal depend warn reus option describ experiment like replac differ option configur set next spack releas default run spack instal spack tri build new version packag ask along updat version depend get latest version configur result unwant rebuild updat spack frequent want spack tri hard reus exist instal depend add reus option codeblock consol spack instal reus mpich anyth mpich alreadi instal mpich instal depend like hwloc libfabr mpich build instal version possibl use refspack spec cmdspackspec command see reus built instal _cmdspackuninstal spack uninstal uninstal packag type spack uninstal packag ask user confirm complet remov directori packag instal codeblock consol spack uninstal mpich still instal packag depend packag uninstal spack refus uninstal uninstal packag everi packag depend may give depend option codeblock consol spack uninstal depend mpich display list packag depend mpich upon confirm uninstal right order command like codeblock consol spack uninstal mpich may ambigu multipl mpich configur instal exampl mpich mpich instal mpich could refer either one determin one uninstal spack ask either provid version number remov ambigu use option uninstal match packag may forc uninstal packag forc option codeblock consol spack uninstal forc mpich risk break instal packag gener safer remov depend packag remov depend use depend option _nondownload garbag collect spack build softwar sourc often instal tool need build test softwar necessari runtim support case remov tool benefit spack provid spack gc garbag collector command uninstal unneed packag codeblock consol spack find instal packag linuxubuntubroadwel gcc autoconf findutil libiconv libszip openjpeg pkgconf utilmacro automak gdbm libpciaccess libtool mpich openssld readlin xz cmake hdf libsigsegv libxml ncurs perl texinfo zlib spack gc follow packag uninstal linuxubuntubroadwel gcc vnedz autoconf mfqn findutil ublbgk libtool pksawhz openssld urdwa readlin kinfw automak fkldeb gdbm bpswuo kscsi perl lpyat texinfo ylvgsov cmake omotir libsigsegv leuzbbh ncurs vmfbrq pkgconf bmvtg utilmacro want proceed yn spack find instal packag linuxubuntubroadwel gcc hdf libiconv libpciaccess libszip libxml mpich openjpeg xz zlib exampl spack went packag packag databas remov everyth either packag instal upon explicit request user link run depend even transit one packag point check refcmdspackfindmetadata see queri explicitli instal packag refdependencytyp thorough treatment depend type mark packag explicit implicit default spack mark packag user instal explicitli instal depend mark implicitli instal packag mark manual explicitli implicitli instal use spack mark use combin spack gc clean packag longer requir codeblock consol spack instal instal libsigsegv instal spack instal libsigsegv instal libsigsegv instal spack find instal packag linuxfedorahaswel gcc libsigsegv libsigsegv libsigsegv libsigsegv spack gc unus spec spack store clean spack mark libsigsegv mark packag implicit spack gc follow packag uninstal linuxfedorahaswel gcc fjpo libsigsegv censc want proceed yn exampl end two version sinc depend differ version libsigsegv spack gc remov packag sinc version instal explicitli version libsigsegv requir packag spack mark also use implement upgrad workflow follow exampl demonstr spack mark spack gc use keep current version packag instal updat spack via git pull new version either libsigsegv might introduc caus spack instal duplic sinc want keep one version mark everyth implicitli instal updat spack new version either packag spack instal simpli mark explicitli instal spack gc remov codeblock consol spack instal instal libsigsegv instal spack mark mark packag implicit git pull spack instal mark packag explicit spack gc unus spec spack store clean use workflow instal contain packag care taken either mark select packag issu spack instal packag kept check refcmdspackfindmetadata see queri explicitli implicitli instal packag nondownload tarbal tarbal packag automat download spack could number reason author requir user manual accept licens agreement download jdk galahad softwar proprietari download open internet instal packag one must creat mirror manual add tarbal question see refmirror creat directori mirror creat directori anywher like insid spack codeblock consol mkdir spackmanual_mirror regist mirror spack creat spackmirrorsyaml codeblock yaml mirror manual filespackmanual_mirror put tarbal tarbal name packagepackageversiontargz exampl codeblock consol ls l manual_mirrorgalahad rw jun galahadtargz instal usual codeblock consol spack instal galahad see instal packag know spack list show name avail packag figur alreadi instal _cmdspackfind spack find spack find show spec instal packag spec like name version compil architectur build option associ spack mani instal packag differ spec run spack find argument list instal packag codeblock consol spack find instal packag linuxdebianx_ gcc imagemagick libdwarf pydateutil adeptutil libdwarf pyipython atk libelf pymatplotlib boost libelf pynos bzip libffi pynumpi cairo libmng pypyg callpath libpng pypypars cmake libtiff pypysid dbu libtool pypytz dbu libxcb pysetuptool dyninst libxml pysix fontconfig libxml python freetyp llvm qhull gdkpixbuf memax qt glib mesa qt graphlib mpich readlin gtkplu mpileak sqlite harfbuzz mrnet stat hdf ncurs tcl icu netcdf tksrc jpega opensslh vtk launchmon pango xcbproto lcm pixman xz libdrm pydateutil zlib linuxdebianx_ gcc libelf mpich packag divid group accord architectur compil within group spack tri keep view simpl show version instal packag _cmdspackfindmetadata view metadata spack find filter packag list base packag name spec number properti instal statu exampl miss depend spec shown miss deprec packag includ deprec packag explicitli instal spack instal packag singl explicit pull depend implicit case may differ configur version packag instal exampl two instal libdwarf look detail use spack find dep ask show libdwarf packag codeblock consol spack find dep libdwarf instal packag linuxdebianx_ gcc libdwarfdb libelf libdwarfbfac libelf see two instanc libdwarf depend differ version libelf view becom complic packag mani depend want know whether two packag depend differ use spack find long codeblock consol spack find long libdwarf instal packag linuxdebianx_ gcc libdwarfdb libdwarfbfac libdwarf instal hash name hash depend packag hash packag depend configur want know path packag instal use spack find path codeblock consol spack find path instal packag linuxdebianx_ gcc imagemagick spackoptlinuxdebianx_gccimagemagickdfdd adeptutil spackoptlinuxdebianx_gccadeptutilsadefda atk spackoptlinuxdebianx_gccatkdac boost spackoptlinuxdebianx_gccboost bzip spackoptlinuxdebianx_gccbzip cairo spackoptlinuxdebianx_gcccairofccab callpath spackoptlinuxdebianx_gcccallpathdc restrict search particular packag suppli name codeblock consol spack find path libelf linuxdebianx_ gcc libelf spackoptlinuxdebianx_gcclibelf libelf spackoptlinuxdebianx_gcclibelf libelf spackoptlinuxdebianx_gcclibelf spec queri spack find actual lot use spec queri specif configur build packag want find libelf version greater version could say codeblock consol spack find libelf linuxdebianx_ gcc libelf libelf find version libdwarf built particular version libelf would look like codeblock consol spack find long libdwarf libelf instal packag linuxdebianx_ gcc libdwarfdb also search packag certain attribut exampl spack find libdwarf debug show instal libdwarf debug compiletim option enabl full spec syntax discuss detail refsecspec machineread output want see specif thing instal packag spack option spack find format use output specif field codeblock consol spack find format nameversionhash autoconficynozktihezzgonqejgwfulx automakeovtckesgonxjbmeqlwfmbqzjzi bzipsyohzwvjfagduxbowziwmp bzipzjnyjwfyvzbxviiuuekoxmtueyuj cmakecfonngywnddbmgpqkilhdoxpcb codeblock consol spack find format hash icynozk ovtc syohzw zjnyjw cfonn use syntax describ document methspackspecspecformat use option use pass metadata packag commandlin tool altern want someth even machin readabl output spec json record use spack find json output metadata spec depend json codeblock consol spack find json sqlite name sqlite hash wsbsihwbnghfepshyoeznv version arch platform darwin platform_o mojav target x_ compil name appleclang version namespac builtin paramet ft true function fals cflag cppflag cxxflag fflag ldflag ldlib depend readlin hash dzmgymxyxdovjvhkcetkqtf type build link use tool like jq httpsstedolangithubiojq_ quickli creat json record structur way want codeblock consol spack find json sqlite jq c name version hash name sqlite version hash wsbsihwbnghfepshyoeznv name readlin version hash dzmgymxyxdovjvhkcetkqtf name ncurs version hash zvaalhlhilypwqujakydapbqgap spack diff often case two version spec need disambigu let say weve instal two variant zlib one one without optim variant codeblock consol spack instal zlib spack instal zlib optim spack find see two version codeblock consol spack find zlib instal packag linuxubuntuskylak gcc zlib zlib let say want uninstal zlib run command hit problem real quickli sinc two codeblock consol spack uninstal zlib error zlib match multipl packag linuxubuntuskylak gcc efzjziy zlib slmm zlib error either use specif spec b specifi spec hash eg spack uninstal hash c use spack uninstal uninstal match spec oh see two differ version zlib instal differ two hash good use case spack diff easili show us diff set differ properti two packag let tri sinc differ see spack find view hash let use spack diff look detail provid two hash codeblock consol spack diff efzjziy slmm warn interfac subject chang zlibefzjziycdmbhuazsthgbgogmjg zlibslmmzkbejtkrajigjamygvu variant_valu zlib optim fals zlib optim true output color written style git diff mean copi past github markdown code block languag diff render nice exampl codeblock md diff zlibefzjziycdmbhuazsthgbgogmjg zlibslmmzkbejtkrajigjamygvu variant_valu zlib optim fals zlib optim true awesom let read diff tell us first zlib built optim fals second built optim true cant see doc output also color base content addit subtract small exampl abl see differ attribut instal spec run spack diff b mean well see spec attribut b green b red anoth exampl addit differ type version codeblock consol spack diff python python warn interfac subject chang pythontsxdigllihpqrmdnysnypufbf pythonyjtserunbpllbaxbqwfkyxbuvzxx variant_valu python patch acabcefbdaefaedbbdfcdb python patch debcfbcaedfbdaafaeafdbbbfcf version openssl u openssl k python python let say interest one kind attribut version ask command output attribut youd add attribut attribut paramet default would filter show version codeblock consol spack diff attribut version python python warn interfac subject chang pythontsxdigllihpqrmdnysnypufbf pythonyjtserunbpllbaxbqwfkyxbuvzxx version openssl u openssl k python python add mani attribut youd like multipl attribut argument lot attribut use short final want view data json possibl pipe output file add json codeblock consol spack diff json python python data much longer along differ vs b b vs json output also showsth intersect use instal packag sever differ way use spack packag instal youv seen spack packag instal long path hash need way get path easiest way use refspack load cmdspackload describ next section advanc way use spack packag includ refenviron environ use bundl number relat packag activ refenviron modul modul commonli use supercomput cluster spack gener modul file everi instal automat custom done _cmdspackload spack load unload refshel support shellsupport enabl use spack load command quickli get packag path exampl add mpich packag built gcc path codeblock consol spack instal mpich gcc wait instal spack load mpich gcc mpicc spackoptlinuxdebianx_gccmpichbinmpicc command add appropri directori path manpath cpath ld_library_path accord refprefix inspect customizeenvmodif defin modul configur longer want use packag type unload unus similarli codeblock consol spack unload mpich gcc ambigu spec spec use loadunload ambigu ie one instal packag match spack warn codeblock consol spack load libelf error libelf match multipl packag match packag qmmkso libelfgcc archlinuxdebianx_ cdujt libelfintel archlinuxdebianx_ use specif spec either type spack load command fulli qualifi argument add enough extra constraint identifi one packag exampl key differenti one libelf built intel compil use gcc could therefor type codeblock consol spack load libelf intel identifi one built intel compil want specif load hash exampl load first libelf would run codeblock consol spack load qmmkso see packag load enviorn would use spack find load codeblock consol spack find load instal packag linuxdebian gcc libelf linuxdebian intel libelf also use spack load list get output full set queri option spack find offer well learn spack spec syntax next section _secspec spec depend know spack instal spack uninstal command take packag name option version specifi spack descriptor call spec spack use spec refer particular build configur configur packag spec packag name version use specifi compil compil version architectur compil option depend option build section well go full syntax spec exampl much longer spec weve seen thu far codeblock none mpileak gcc debug qt targetx_ callpath gcc provid spack instal instal mpileak librari version inclus built use gcc version gener x_ architectur debug option enabl without qt support addit say link callpath librari depend build callpath gcc spec complic one good exampl possibl spec formal spec consist follow piec packag name identifi mpileak option version specifi option compil specifi option compil version gcc gcc option variant specifi debug qt qt boolean variant namevalu option variant specifi restrict boolean variant namevalu option compil flag specifi valid flag name cflag cxxflag fflag cppflag ldflag ldlib targetvalu osvalu option architectur specifi targethaswel oscnl depend spec callpath two thing notic first spec recurs defin depend spec second everyth option except initi packag name identifi user vagu specif want detail build packag make spack good beginn expert alik realli understand what go need think softwar structur execut librari gener artifact produc build softwar depend librari order run repres relationship packag depend graph full depend graph mpileak graphviz digraph mpileak mpich mpileak callpath mpich callpath dyninst dyninst libdwarf libelf dyninst libelf box packag arrow repres depend packag exampl say packag mpileak depend callpath mpich mpileak also depend indirectli dyninst libdwarf libelf librari depend callpath instal mpileak spack build packag depend graph spack acycl depend relationship direct direct acycl graph dag packag name identifi spec root depend dag dag implicit spack know precis depend among packag user need know full dag structur full spec refer depend root packag spack rais error suppli name root actual depend eg mpileak emac spack simplifi thing allow one configur packag within singl build mpileak callpath depend mpich mpich appear dag build mpileak version depend one version mpich callpath version depend version mpich gener configur would like behav unexpectedli runtim spack enforc ensur consist runtim environ point spec abstract full dag spack user user care dag refer mpileak simpli write mpileak know mpileak indirectli use dyninst want particular version dyninst refer mpileak dyninst spack fill rest pars spec user need know packag name minim detail relationship spack print spec sort packag name alphabet normal way display user need worri write spec restrict order depend within spec appear root packag exampl two spec repres exactli configur codeblock none mpileak callpath libelf mpileak libelf callpath put modifi depend spec would put root spec specifi version compil variant architectur like spec specifi associ nearest packag name left exampl gcc associ callpath packag gcc debug qt targethaswel oscnl associ mpileak packag diagram mpileak depend mpich unspecifi version packag depend packag constraint ad specifi exampl mpileak could depend mpich build version higher mpich detail specifi add spec version specifi version specifi come somewher packag name start singl version eg rang version version inclus version rang open eg mean version includ would includ mean version includ final version specifi set arbitrari version suppli specifi spack instal constrain set version spack instal version spec provid spack choos one accord polici set particular spack instal spec ambigu ie could match multipl version spack choos version within spec constraint accord polici set particular spack instal detail version compar spack determin one version less anoth discuss develop guid compil specifi compil specifi come somewher packag name start tell spack compil particular packag built come name regist spack compil might includ gcc intel specif compil avail depend site run spack compil get list compil spec follow option compil version compil version specifi look exactli like packag version specifi version specifi associ nearest packag name compil specifi left spec compil spec omit spack choos default compil base site polici _basicvari variant variant name option associ particular packag option packag must provid default valu variant make avail variant specifi use flexibl paramet syntax namevalu exampl spack instal mercuri debugtru instal mercuri built debug flag name particular variant avail packag depend provid packag author spack info packag provid inform build variant avail compat earlier version variant happen boolean natur specifi syntax repres turn option exampl previou spec could suppli mercuri debug effect enabl debug compil time option libelf packag depend packag variant may default valu mercuri debug fals default turn debugtru debug variant true default turn either ad name name spec two syntax depend context may mean differ thing shell follow result shell perform home directori substitut codeblock sh mpileak debug shell may tri substitut mpileaksdebug use instead user call debug incorrectli expand situat would want write libelf debug howev ambigu includ packag name without space codeblock sh mpileaksdebug wrong mpileak debug right spack allow charact part packag name interpret request mpileaksdebug packag request mpileak built without debug option scenario write mpileaksdebug avoid ambigu spack normal spec print space boolean variant use backward compat syntax use disabl boolean variant space command line provid conveni legibl compil flag compil flag specifi use syntax nonboolean variant fulfil differ purpos function variant set packag compil flag use compil wrapper inject flag compil line build addit compil flag inherit depend spack instal libdwarf cppflagsg instal libdwarf libelf g flag inject compil line notic valu compil flag must quot contain space cppflagso cppflagso cppflagso cppflagso fpic accept cppflagso fpic addit valu compil flag last thing line must follow space command spack instal libelf cppflagsointel interpret attempt set cppflagsointel six compil flag inject order implicit make command gnu autotool flag set order cppflag cflagscxxflag ldflag command ldlib c c fflag cppflag ldflag command ldlib fortran compil environ variabl addit rpath sometim compil requir set special environ variabl oper correctli spack handl case allow custom environ modif environ attribut compil configur section see also refconfiguration_environment_vari section configur file doc inform also possibl specifi addit rpath compil add execut gener compil use forc certain compil rpath runtim librari execut run without need set ld_library_path codeblock yaml compil compil spec gcc path cc optgccbingcc c optgccb f optgccbingfortran fc optgccbingfortran environ unset bad_vari set good_variable_num good_variable_str good prepend_path path pathtobinutil append_path ld_library_path optgcclib extra_rpath pathtosomecompilerruntimedirectori pathtosomeothercompilerruntimedirectori architectur specifi node depend graph spec architectur attribut attribut triplet platform oper system processor specifi element either separ use reserv keyword platform os target codeblock consol spack instal libelf platformlinux spack instal libelf osubuntu spack instal libelf targetbroadwel togeth use reserv keyword arch codeblock consol spack instal libelf archcraycnlhaswel normal user dont bother specifi architectur instal softwar current host case valu detect automat need finegrain control packag use target packag default target see refconcretizationprefer admonit cray machin situat littl bit differ cray machin detail explan architectur set found refcraysupport _supportformicroarchitectur support specif microarchitectur spack know detect optim mani specif microarchitectur includ recent intel amd ibm chip encod inform target portion architectur specif complet list microarchitectur known spack obtain follow way commandoutput spack arch knowntarget spec instal spack match compil use microarchitectur target inject appropri optim flag compil time give command follow codeblock consol spack instal zlibgcc targeticelak produc compil line similar codeblock consol usrbingcc marchicelakecli mtuneicelakecli c ztestc usrbingcc marchicelakecli mtuneicelakecli c fpic ztest flag marchicelakecli mtuneicelakecli inject spack base request target compil spack know request compil cant optim current target cant build binari target exit meaning error messag codeblock consol spack instal zlibgcc targeticelak error produc optim binari microarchitectur icelak gcc support compil version instead old compil select recent enough microarchitectur explicit target specif spack optim best match find instead fail codeblock consol spack arch linuxubuntubroadwel spack spec zlibgcc input spec zlibgcc concret zlibgccoptimizepicshar archlinuxubuntuhaswel spack spec zlibgcc input spec zlibgcc concret zlibgccoptimizepicshar archlinuxubuntubroadwel snippet instanc microarchitectur demot haswel compil gcc sinc support optim broadwel start gcc final spack inform match compil target proceed instal avoid inject microarchitectur specif flag warn current spack doesnt print warn user inform optim flag use given compil behavior might chang futur _secvirtualdepend virtual depend depend graph mpileak saw wasnt quit accur mpileak use mpi interfac mani differ implement show mpileak callpath depend mpich one particular implement mpi howev could build either anoth implement openmpi mvapich spack repres interfac like use virtual depend real depend dag mpileak look like graphviz digraph mpi color mpileak mpi mpileak callpath mpi callpath dyninst dyninst libdwarf libelf dyninst libelf notic mpich replac mpi real mpi packag packag provid mpi interfac packag substitut mpi mpileak built see virtual packag particular packag provid get info commandoutput spack info mpich spack uniqu virtual packag version like regular packag particular version packag may provid particular version virtual packag see mpich version provid mpi interfac version mpich version provid mpi version packag depend particular version virtual packag eg applic need mpi function depend mpi indic need implement provid mpi function constrain virtual packag instal packag depend virtual packag opt specifi particular provid want use let spack pick exampl type codeblock consol spack instal mpileak spack pick provid accord site polici realli want particular version say mpich could run instead codeblock consol spack instal mpileak mpich forc spack use version mpich implement alway even specif requir particular mpich version codeblock consol spack instal mpileak mpich mpileak packag particular need mpi command mpi implement anoth packag depend mpi tri give insuffici mpi implement eg one provid mpi spack rais error likewis tri plug packag doesnt provid mpi spack rais error specifi spec hash complic spec becom cumbersom enter command line especi mani qualif necessari distinguish similar instal avoid referenc exist spec spack allow refer spec hash previous discuss spec hash spack comput place spec command substitut hash hash amount begin spec hash exampl let say accident instal two differ mvapich instal want uninstal one dont know differ run codeblock consol spack find long mvapich instal packag linuxcentosx_ gcc qmttd mvapichgcc erdi mvapichgcc uninstal latter instal use codeblock consol spack uninstal erdi want build specif instal depend use codeblock consol spack instal trilino erdi given spec hash suffici long uniqu spack replac refer spec refer otherwis prompt qualifi hash note work reinstal depend uninstal spack uninstal forc _cmdspackprovid spack provid see packag provid particular virtual packag use spack provid want see packag provid mpi would run commandoutput spack provid mpi want see packag provid mpi would add version specifi spec commandoutput spack provid mpi notic packag version provid insuffici mpi version filter deprec insecur packag spack deprec allow remov insecur packag minim impact depend warn spack deprec command design use extraordinari circumst big hammer use care spack deprec command remov one packag replac anoth replac deprec packag prefix link deprec packag prefix warn spack deprec command make promis binari compat user ensur deprec suitabl deprec packag spack track concret deprec spec ensur futur packag concret deprec spec first spec given spack deprec command packag deprec abstract spec must describ singl instal packag second spec argument deprec spec default must abstract spec describ singl instal packag iinstalldeprec abstract spec spack instal use deprec inoinstalldeprec option ensur default behavior default spack deprec deprec depend deprec spec replac depend name deprec spec ddepend option ensur default dnodepend option deprec root deprec spec favor root deprec spec spack deprec use symbol link hard link default behavior symbol link llinktyp flag take option hard soft verifi instal spack verifi command use verifi valid spackinstal packag time instal instal time spack creat manifest everi file instal prefix link spack track mode ownership destin directori spack track mode ownership file spack track mode ownership modif time hash size spack verifi command check everi file packag whether attribut chang also check newli ad file delet file instal prefix spack either check instal packag use aall accept spec list command line verifi spack verifi command also verifi individu file havent alter sinc instal time given file spack instal prefix spack report own packag check individu file instead spec use ffile option spack instal manifest part tarbal sign spack binari packag distribut instal binari packag spack use packag instal manifest instead creat one instal time spack verifi command also accept llocal option check local packag oppos use transpar upstream spack instanc jjson option output machineread json data error _extens extens python support spack instal model assum packag live instal prefix howev certain packag typic instal within directori hierarchi packag exampl python httpswwwpythonorg_ packag typic instal prefixlibpythonsitepackag directori spack support type instal well spack packag live insid prefix anoth packag call extens suppos python instal like codeblock consol spack find python instal packag linuxdebianx_ gcc python _cmdspackextens spack extens find extens python instal like codeblock consol spack extens python pythongcc archlinuxdebianx_ca extens geo pyipython pypexpect pypysid pysip pybasemap pylibxml pypil pypytz pysix pybiopython pymako pypmw pyrpi pysympi pycython pymatplotlib pypycheck pyscientificpython pyvirtualenv pydateutil pympipi pypyg pyscikitlearn pyepydoc pymx pypylint pyscipi pygnuplot pynos pypypars pysetuptool pyhpi pynumpi pypyqt pyshiboken instal linuxdebianx_ gcc pydateutil pynos pypysid pydateutil pynumpi pypytz pyipython pypyg pysetuptool pymatplotlib pypypars pysix none activ extens subset what return spack list packag like instal prefix see spack find path codeblock consol spack find path pynumpi instal packag linuxdebianx_ gcc pynumpi spackoptlinuxdebianx_gccpynumpi howev even though packag instal use directli run python codeblock consol spack load python python python default feb gcc red hat linux type help copyright credit licens inform import numpi traceback recent call last file stdin line modul importerror modul name numpi use extens four way get numpi work python first use refshellsupport simpli load extens ad pythonpath current shell codeblock consol spack load python spack load pynumpi import numpi succeed long keep current session open load packag check use spack find load load extens via modul instead use spack environ modif capabl spack load command load numpi environ modul use environmentmodul lmod also add extens pythonpath current shell codeblock consol modul load name numpi modul know name specif numpi modul wish load use spack modul tcllmod load command get name modul spack spec activ extens view anoth way use extens creat view merg python instal along extens singl prefix see reffilesystemview indepth descript view refcmdspackview usag spack view command activ extens global altern creat merg prefix python extens prior support view spack provid mean instal extens spack instal prefix extende typic use sinc extend packag typic search instal path addon default global activ perform spack activ command _cmdspackactiv spack activ codeblock consol spack activ pynumpi activ extens pysetuptoolsgcc archlinuxdebianx_ceb pythongcc activ extens pynosegcc archlinuxdebianx_ff pythongcc activ extens pynumpygcc archlinuxdebianx_ pythongcc sever thing happen user request pynumpi activ python instal built spack know pynumpi depend pynos pysetuptool activ packag first final depend activ python instal pynumpi activ well run spack extens see three new packag list activ codeblock consol spack extens python pythongcc archlinuxdebianx_ca extens geo pyipython pypexpect pypysid pysip pybasemap pylibxml pypil pypytz pysix pybiopython pymako pypmw pyrpi pysympi pycython pymatplotlib pypycheck pyscientificpython pyvirtualenv pydateutil pympipi pypyg pyscikitlearn pyepydoc pymx pypylint pyscipi pygnuplot pynos pypypars pysetuptool pyhpi pynumpi pypyqt pyshiboken instal linuxdebianx_ gcc pydateutil pynos pypysid pydateutil pynumpi pypytz pyipython pypyg pysetuptool pymatplotlib pypypars pysix current activ linuxdebianx_ gcc pynos pynumpi pysetuptool user run python numpi avail import without user explicitli load python act like system python instal numpi instal insid spack accomplish symbol link entir prefix pynumpi packag prefix python packag python interpret look like numpi instal sitepackag directori limit global activ singl version extens activ time multipl version extens would conflict symbol link prefix user want differ version packag still get use environ modul view explicitli load prefer version spack activ forc reason want activ packag without depend use spack activ forc codeblock consol spack activ forc pynumpi activ extens pynumpygcc archlinuxdebianx_ pythongcc _cmdspackdeactiv spack deactiv weve seen activ extens use set default version python modul obvious may want chang point spack deactiv command sever variant spack deactiv extens deactiv singl extens anoth activ extens depend one spack warn exit error spack deactiv forc extens deactiv extens regardless packag depend spack deactiv extens deactiv extens depend use forc disregard depend spack deactiv extende deactiv activ extens packag exampl deactiv python extens use codeblock consol spack deactiv python filesystem requir default spack need run filesystem support flock lock semant nearli local filesystem recent version nf support parallel filesystem nf volum may configur without flock support enabl determin filesystem mount mount output lustr filesystem might look like codeblock consol mount grep lscratch mdslnetoiblsd plscratchd type lustr rwnosuidlazystatfsflock mdslnetoibls plscratch type lustr rwnosuidlazystatfsflock note flock option lustr mount see similar option filesystem option first move spack instal filesystem support lock second could ask system administr enabl flock filesystem none work disabl lock one two way run spack l disablelock option disabl lock callbycal basi edit refconfigyaml configyaml set lock option fals alway disabl lock warn disabl lock concurr instanc spack way avoid step must ensur one instanc spack run time otherwis spack may end corrupt databas file may abl see instal packag command like spack find unfortun enough run situat may abl fix run spack reindex issu typic manifest error codeblock consol spack find traceback recent call last file spack line modul main file spack line main return_v commandpars arg file spacklibspackspackcmdfindpi line find spec setspackinstalled_dbqueryq_arg file spacklibspackspackdatabasepi line queri selfread_transact file spacklibspackspackdatabasepi line __enter__ self_ent self_acquire_fn file spacklibspackspackdatabasepi line _enter return self_dblockacquire_readself_timeout file spacklibspackllnlutillockpi line acquire_read self_lockfcntllock_sh timeout rais lockerror file spacklibspackllnlutillockpi line _lock fcntllockfself_fd op fcntllock_nb ioerror errno function implement nicer error messag tbd futur version spack troubleshoot spack audit command commandoutput spack audit h use detect number configur issu command detect configur set might strictli wrong like use outsid special case also use detect depend issu packag exampl case packag constrain depend variant doesnt exist case spack could report problem ahead time automat perform check would slow run spack detail list check current implement subcommand print commandoutput spack v audit list depend use case user might run appropri subcommand obtain diagnost issu found report stdout codeblock consol spack audit packag lammp pkgdirect issu found lammp wrong variant conflict direct variant adio exist homespackspackvarspackreposbuiltinpackageslammpspackagepi get help _cmdspackhelp spack help dont find need help subcommand print list spack option subcommand commandoutput spack help ad argument eg spack help subcommand print usag inform particular subcommand commandoutput spack help instal altern use spack help place spack help spack subcommand help get help particular subcommand copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _getting_start get start system prerequisit spack follow minimum system requir assum present machin spack run csvtabl system prerequisit spack file tablessystem_prerequisitescsv headerrow requir easili instal modern linux system maco xcode requir spack design run hpc platform like cray packag expect work platform build matrix show packag work system plan yet avail instal get spack easi clone github repositori httpsgithubcomspackspack_ use command codeblock consol git clone c featuremanyfilestru httpsgithubcomspackspackgit creat directori call spack _shellsupport shell support clone spack recommend sourc appropri script shell codeblock consol bashzshsh spacksharespacksetupenvsh tcshcsh sourc spacksharespacksetupenvcsh fish spacksharespacksetupenvfish that your readi use spack sourc file put spack command path set modulepath use spack packag add use shell integr refcertain command packagingshellsupport refenviron environ refmodul modul bash zsh also set tab complet order know directori add modulepath script queri spack command share filesystem bit slow especi log frequent dont use modul want set modulepath manual instead set spack_skip_modul environ variabl skip step speed sourc file want use spack shell support alway run spack command directli spackbinspack spack command execut search appropri python interpret use explicitli overridden set spack_python environ variabl sourc appropri shell setup script spack_python set interpret found sourc time ensur futur invoc spack command continu use consist python version regardless chang environ bootstrap clingo spack use clingo hood resolv optim version variant depend instal packag sinc clingo binari spack instal initi use call bootstrap spack provid two way bootstrap clingo prebuilt binari default sourc fastest way get start bootstrap prebuilt binari note bootstrap prebuilt binari spack current requir patchelf linux otool maco patchelf path spack build sourc c compil requir first time concret spec spack bootstrap background codeblock consol time spack spec zlib input spec zlib concret zlibgccoptimizepicshar archlinuxubuntuzen real ms user ms sy ms command youll see clingo instal spack use codeblock consol spack find b show intern bootstrap store rootspackbootstrapstor instal packag linuxrhelx_ gcc clingobootstrapspack python linuxubuntuzen gcc patchelf subsequ call concret much faster codeblock consol time spack spec zlib real ms user ms sy ms secur concern bootstrap clingo prebuilt binari mark bootstrap method untrust make spack fall back bootstrap sourc codeblock consol spack bootstrap untrust githubact githubact untrust use bootstrap verifi new set effect codeblock consol spack bootstrap list name githubact untrust type buildcach info url httpsmirrorspackiobootstrapgithubactionsv homepag httpsgithubcomalalazospackbootstrapmirror releas httpsgithubcomalalazospackbootstrapmirrorsreleas descript buildcach gener public workflow use github action sha checksum binari check instal name spackinstal trust type instal descript spec built sourc spack may take long time note bootstrap sourc spack requir full instal python includ header file eg pythondev debian compil support c gcc linux appl clang maco static c standard librari linux spack build requir softwar first request concret spec codeblock consol spack spec zlib usr extern bisonwupgjchxzemkyalddqugdjveb usr extern cmakeakmcfzxxymzkuipmjkdiizab usr extern pythonxfouiqqlhydwddxpvfcwznfrqztv instal recexnxtkahgdykgympuvajhtdt zlibgccoptimizepicshar archlinuxubuntubroadwel bootstrap store tool spack need function instal separ store live homespack directori softwar instal queri codeblock consol spack find bootstrap show intern bootstrap store homespackspackbootstrapstor instal packag linuxubuntux_ gcc clingobootstrapspack python rec case need bootstrap store also clean codeblock consol spack clean b remov softwar homespackspackbootstrapstor check instal spack instal abl run basic spack command exampl commandoutput spack spec netcdfc theori spack doesnt need addit instal download run real life addit step usual requir spack work practic sens read clean environ mani packag instal broken chang environ variabl exampl packag might pick wrong buildtim depend specifi depend set path gcc seem particularli vulner issu therefor recommend spack user run clean environ especi path softwar come system know wish use spack includ procedur avoid mani strang build error option altern prefix may want run spack prefix git repositori clone spack clone command provid function instal spack new directori simpli type codeblock consol spack clone myfavoriteprefix instal new spack script myfavoriteprefixbin use like would regular spack script copi spack instal packag prefixopt directori _compilerconfig compil configur spack abil build packag multipl compil compil version compil made avail spack specifi manual compilersyaml automat run spack compil find conveni spack automat detect compil first time need _cmdspackcompil spack compil see compil avail spack run spack compil spack compil list codeblock consol spack compil avail compil gcc gcc gcc gcc gcc gcc gcc gcc gcc gcc gcc intel intel intel intel intel intel intel intel intel intel intel intel intel intel intel intel intel intel intel clang clang clang clang clang pgi pgi pgi pgi pgi pgi pgi pgi pgi pgi pgi pgi pgi pgi pgi pgi compil use build spack packag done refsecspec _cmdspackcompileradd spack compil add alia spack compil find _cmdspackcompilerfind spack compil find list compil current avail spack see compil list want use spack simpli run spack compil find path compil instal exampl codeblock consol spack compil find usrlocaltools ad new compil spacklinuxcompilersyaml intel run spack compil find argument forc autodetect use know compil instal know new compil ad path exampl might load modul like codeblock consol modul load gcc spack compil find ad new compil spacklinuxcompilersyaml gcc load environ modul gcc add path add compil spack note default spack fill modul field compilersyaml file use compil modul add field manual see section refcompilersrequiringmodul _cmdspackcompilerinfo spack compil info want see specif particular compil run spack compil info codeblock consol spack compil info intel intel path cc usrlocalbinicc cxx usrlocalbinicpc f usrlocalbinifort fc usrlocalbinifort modul operating_system cento show c c fortran compil detect spack notic also didnt specif version said intel inform match intel compil display manual compil configur autodetect fail manual configur compil edit spackplatformcompilersyaml file run spack config edit compil open file editor compil configur file look like codeblock yaml compil compil modul operating_system cento path cc usrlocalbiniccbeta cxx usrlocalbinicpcbeta f usrlocalbinifortbeta fc usrlocalbinifortbeta spec intel compil support fortran like clang put none f fc codeblock yaml compil compil modul operating_system cento path cc usrbinclang cxx usrbinclang f none fc none spec clangsvn save file configur compil show list display spack compil also add compil flag manual configur compil flag specifi flag section compil specif valid flag cflag cxxflag fflag cppflag ldflag ldlib exampl codeblock yaml compil compil modul operating_system cento path cc usrbingcc cxx usrb f usrbingfortran fc usrbingfortran flag cflag fpic cxxflag fpic cppflag fpic spec gcc flag treat spack enter command line time compil use compil wrapper inject flag compil command compil flag enter command line discuss detail follow section compil also requir addit environ configur exampl includ intel oneapi amd aocc compil suit custom script load environ variabl set path variabl specifi environ section compil specif oper avail modifi environ set unset prepend_path append_path remove_path exampl codeblock yaml compil compil modul operating_system cento path cc optinteloneapicompilerlatestlinuxbinicx cxx optinteloneapicompilerlatestlinuxbinicpx f optinteloneapicompilerlatestlinuxbinifx fc optinteloneapicompilerlatestlinuxbinifx spec oneapilatest environ set mkl_root pathtomklroot unset list environ variabl unset cc prepend_path similar appendremove_path ld_library_path ldpathsaddedbysetvarssh build compil particular compilervers use might wish spack build exampl codeblock consol spack instal gcc finish need add compilersyaml file set spack use default ad follow packagesyaml file codeblock yaml packag compil gcc _compilersrequiringmodul compil requir modul mani instal compil work regardless environ call howev instal compil requir ld_library_path environ variabl set order run typic intel proprietari compil case tell spack modul load order run chosen compil compil come modul file might consid make one hand spack load modul environ compil run gener packag instal method see exampl compilersyaml file codeblock yaml compil compil modul othercompgccsp operating_system suse path cc usrlocalotherslesgccbingcc cxx usrlocalotherslesgccb f usrlocalotherslesgccbingfortran fc usrlocalotherslesgccbingfortran spec gcc compil requir special environ set load run also execut code build break packag need execut code compil possibl practic use better compil youll need ensur environ set preserv compil like ie youll need load modul sourc compil shell script default spack tri ensur build reproduc clean environ build interfer compil set use spack instal dirti workaround note may interfer packag build _licensedcompil licens compil proprietari compil requir licens use need use licens compil eg pgi process similar mix build plu modul creat spack packag doesnt exist alreadi instal compil follow instruct instal reflicens compil instal abl test use spack load modul creat run simpl build eg cc helloworldc aout add newlyinstal compil compilersyaml shown _mixedtoolchain mix toolchain modern compil typic come relat compil c c fortran bundl togeth possibl result best compil use languag case possibl exampl start maco el capitan mani packag longer build gcc xcode provid fortran compil user therefor forc use mix toolchain xcodeprovid clang cc gnu gfortran fortran need make sure xcode instal run follow command codeblock consol xcodeselect instal xcode commandlin tool alreadi instal see error messag codeblock none xcodeselect error command line tool alreadi instal use softwar updat instal updat packag xcode commandlin tool suffici howev packag like qt requir full xcode suit check see instal run codeblock consol xcodeselect p output codeblock none applicationsxcodeappcontentsdevelop alreadi full xcode suit instal output codeblock none librarydevelopercommandlinetool commandlin tool instal full xcode suit instal app store make sure launch xcode applic accept licens agreement use spack may ask instal addit compon altern licens accept command line codeblock consol sudo xcodebuild licens accept note flag licens licens run spack compil find locat clang differ way get gfortran maco exampl instal gcc spack spack instal gcc homebrew brew instal gcc dmg instal httpsgithubcomfxcoudertgfortranformacosreleases_ thing left edit spackdarwincompilersyaml provid path gfortran codeblock yaml compil compil path cc usrbinclang cxx usrbinclang f pathtobingfortran fc pathtobingfortran spec appleclang use spack instal gcc get instal prefix spack locat gcc work singl version gcc instal wherea homebrew gcc instal usrlocalcellargccxyz dmg instal correct path usrlocalgfortran compil verif verifi compil configur properli instal simpl packag exampl codeblock consol spack instal zlibgcc _vendorspecificcompilerconfigur vendorspecif compil configur spack thing usual work gcc compil section provid detail get specif compil work intel compil intel compil unusu singl intel compil version emul multipl gcc version order provid function intel compil need gcc instal therefor follow step necessari success use intel compil instal version gcc implement desir languag featur spack instal gcc tell intel compil find desir gcc may done one two way default compil determin version gcc g instal path environ variabl want use version gcc g default version system need use either gccname gxxname compil option specifi path version gcc g want use intel refer guid httpssoftwareintelcomenusnode_ intel compil may therefor configur one two way spack use modul use compil flag configur modul one control gcc seen intel compil modul modul must load intel compil run gcc compil find intend gcc follow configur compilersyaml illustr techniqu codeblock yaml compil compil modul gcc intel operating_system cento path cc optintelbiniccbeta cxx optintelbinicpcbeta f optintelbinifortbeta fc optintelbinifortbeta spec intel note version number intel compil combin nativ intel version number gnu compil target command line configur one also control gcc seen intel compil ad flag icc command identifi locat compil instal codeblock consol spack locat installdir gcc spackoptspacklinuxcentosx_gcciyrw set compilersyaml exampl codeblock yaml compil compil modul intel operating_system cento path cc optintelbiniccbeta cxx optintelbinicpcbeta f optintelbinifortbeta fc optintelbinifortbeta flag cflag gccname spackoptspacklinuxcentosx_gcciyrwbingcc cxxflag gxxname spackoptspacklinuxcentosx_gcciyrwb fflag gccname spackoptspacklinuxcentosx_gcciyrwbingcc spec intel pgi pgi come two set compil c fortran distinguish name old compil codeblock yaml cc softpgilinuxbinpgcc cxx softpgilinuxbinpgcc f softpgilinuxbinpgf fc softpgilinuxbinpgf new compil codeblock yaml cc softpgilinuxbinpgcc cxx softpgilinuxbinpgc f softpgilinuxbinpgfortran fc softpgilinuxbinpgfortran older instal pgi contain old compil wherea newer instal contain old new new compil consid prefer packag hdf build old compil autodetect pgi compil case spack find old compil realli want find new compil best check compilersyaml old compil use chang pgf pgf pgfortran issu report packag build pgi includ libpciaccess openssl workaround build packag anoth compil use depend pgibuild packag exampl codeblock consol spack instal openmpipgi libpciaccessgcc pgi requir licens use see reflicensedcompil inform instal note believ problem hdf everyth compil f compil point fortran code slip compil handl fortran fortran gfortran pgfortran etc fine compil specif one pgf pgf wont work nag numer algorithm group provid licens fortran compil like clang requir set refmixedtoolchain recommend use gcc cc compil nag fortran compil bit strict compil mani packag fail instal error messag like codeblock none error mpi_comm_spawn_multiple_ff argument mpi_comm_spawn_multipl data type doubl precis refer mpi_comm_spawn_multiplen charact refer mpi_comm_spawn_multiplea order convinc nag compil picki call convent use fflagsmismatch fcflagsmismatch done command line codeblock consol spack instal openmpi fflagsmismatch set perman compilersyaml codeblock yaml compil modul operating_system cento path cc softspackoptspacklinuxx_gccgccqzosjigepipjnqtbwazmptrgpjbingcc cxx softspackoptspacklinuxx_gccgccqzosjigepipjnqtbwazmptrgpjb f softspackoptspacklinuxx_gccnagjthhwtmyezgqguhfsanzcskqenebinnagfor fc softspackoptspacklinuxx_gccnagjthhwtmyezgqguhfsanzcskqenebinnagfor flag fflag mismatch spec nag system packag compil configur one need determin preinstal system packag use build configur file spackpackagesyaml exampl use openmpi instal optloc one would use codeblock yaml packag openmpi extern spec openmpi prefix optloc buildabl fals gener spack easier use reliabl build depend howev sever packag one commonli need use system version mpi supercomput sysadmin alreadi built mpi version take account specif comput hardwar unless know built choos correct spack variant unlik get work mpi spack instead use appropri preinstal mpi choos preinstal mpi consid use preinstal compil use build mpi see compilersyaml openssl openssl packag underli much modern secur modern os attack easili pwn comput modifi ssl therefor openssl use system creat trust environ exampl os vendor openssl also updat os vendor time time respons secur problem discov wider commun everyon best interest use newli updat version soon come modern linux instal standard procedur secur updat without user involv spack run userlevel trust environ spack user gener keep uptod latest secur hole ssl reason spackinstal openssl like trust long systemprovid ssl work use instead one check work tri download http exampl codeblock consol curl httpsgithubcomimagemagickimagemagickarchivetargz tell spack use systemsuppli openssl first determin version codeblock consol openssl version openssl g mar add follow spackpackagesyaml codeblock yaml packag openssl extern spec opensslg prefix usr buildabl fals bla lapack recommend way use systemsuppli bla lapack packag add follow packagesyaml codeblock yaml packag netliblapack extern spec netliblapack prefix usr buildabl fals provid bla netliblapack lapack netliblapack note pretend systemprovid bla lapack netliblapack bla lapack provid use standard name librari oppos exampl libopenblasso although specifi extern packag usr spack smart enough add usrlib rpath could caus unrel system librari use instead spack equival usrbin present path howev lower preced compar path depend ensur binari spack depend prefer system binari git spack packag use git download might work comput exampl follow error encount macintosh spack instal juliamast codeblock consol clone git repositori httpsgithubcomjulialangjuliagit branch master clone julia fatal unabl access httpsgithubcomjulialangjuliagit ssl certif problem unabl get local issuer certif problem relat openssl case might solv instal new version git openssl run spack instal git add output spack modul tcl load git bashrc doesnt work also possibl disabl check ssl certif use codeblock consol spack insecur instal use insecur make spack disabl ssl check fetch websit git warn workaround use last resort without ssl certif verif spack git download site wouldnt normal trust code download run may compromis major issu archiv checksum especi problemat download name git branch tag reli entir trust certif secur verif util configur although spack need instal per se reli packag avail host system packag date miss spack work sometim appeal system packag manag fix problem solut spack instal requir packag spack use exampl curl doesnt work one could use follow step provid spack work curl codeblock consol spack instal curl spack load curl altern codeblock consol spack modul tcl load curl bashrc environ modul dont work codeblock consol export pathspack locat installdir curlbinpath extern command use spack two place within core spack packag recip bootstrap procedur two case somewhat differ treat separ core spack util core spack use follow packag mainli download unpack sourc code curl env git go hg svn tar unzip patch long user environ set success run program outsid spack work insid spack well gener activ curl exampl system might alreadi appropri handbuilt environ modul may load either way work note specif program list curl git mercuri etc spack depend curl download tarbal format spackinstal packag come system curl alway abl download unencrypt http howev curl system problem sslenabl http url due outdat insecur version openssl system prevent spack instal softwar requir http new curl instal use techniqu warn rememb instal curl via spack may reli userspac openssl upgrad regularli may fall date faster system openssl packag use sourc code control system download method git hg svn occasion go instal new curl chanc systemsuppli version program also work also reli openssl curl instal similarli instal other packag util spack may also encount bootstrap problem insid packag instal method case spack normal run insid sanit build environ includ packag depend none environ spack inherit user load modul modifi path launch spack effect case like need use dirti flag run spack instal caus spack sanit build environ respons make sure environ strang thing spack instal anoth way get spack use version someth add someth packag need exampl codeblock python depends_onbinutil typebuild consid best practic common build depend autotool autoreconf command need cmake cmake especi differ packag requir differ version cmake binutil httpsgroupsgooglecomforumtopicspacki_l_keevei sometim strang error messag happen build packag exampl ld might crash one receiv messag like codeblock consol ld final link fail nonrepresent section output codeblock consol ld _fftpackmoduleo unrecogn reloc xa section text problem often caus outdat binutil system unlik cmake autotool ad depends_onbinutil everi packag consid best practic everi packag written ccfortran would need potenti workaround load recent binutil environ use dirti flag gpg sign _cmdspackgpg spack gpg spack support sign verifi packag use gpg key separ keyr use spack key avail user home directori use spack gpg init spack first instal keyr empti key store filevarspackgpg default key spack instal key may import run spack gpg init import default key keyr trust key trust key addit key may ad keyr use spack gpg trust keyfil key trust packag sign owner key may instal creat key may also creat key may sign packag use spack gpg creat name email default key expir may set expir date flag see gnupg document accept date format also recommend add comment use key use comment comment flag public half key also export share other may use packag sign use export keyfil flag secret key may also later export use spack gpg export locat key command note key creation speed creation new gpg key requir gener lot random number depend entropi produc system entir process may take long time even appear hang virtual machin cloud instanc particularli like display behavior speed may instal tool like rngd usual avail packag host os eg ubuntu machin need give follow command codeblock consol sudo aptget instal rngtool sudo rngd r devurandom gener key anoth altern haveg instal rhelcento machin follow codeblock consol sudo yum instal haveg sudo chkconfig haveg digit ocean tutori httpswwwdigitaloceancomcommunitytutorialshowtosetupadditionalentropyforcloudserversusinghaveged_ provid good overview sourc random exampl creat key note provid name key first use refer key later email address codeblock consol spack gpg creat dinosaur dinosaurthedinosaurthingscom want export key creat codeblock consol spack gpg creat export keypub dinosaur dinosaurthedinosaurthingscom privat key codeblock consol spack gpg creat exportsecret keypriv dinosaur dinosaurthedinosaurthingscom includ export exportsecret output file choic export list key order list key avail keyr spack gpg list command list trust key trust flag key avail sign use sign would like remov key keyr spack gpg untrust keyid key id email address name best fingerprint exampl list key creat codeblock consol gpgconf socketdir runusergnupg homespackuserspackoptspackgpgpubringkbx pub rsa sc ddabaddbebbfaadcb uid ultim dinosaur gpg creat spack dinosaurthedinosaurthingscom note name dinosaur seen uid uniqu id might need refer want export otherwis refer key sign verifi packag order sign packag spack gpg sign file use default signatur written fileasc may chang use output file flag one sign key avail use one key use must specifi use key keyid flag clearsign flag may also use creat sign file contain content recommend sign packag may verifi use spack gpg verifi file export key like might want export public key look like let use previou exampl ask spack export key uid dinosaur provid output locat typic pub file name key codeblock consol spack gpg export dinosaurpub dinosaur look creat file dinosaurpub see export key want includ privat key add secret codeblock consol spack gpg export secret dinosaurpriv dinosaur write privat key file dinosaurpriv warn care export privat key like would want context move spack instal differ server want preserv key buildcach unsur export ask local system administr help issu spack slack _craysupport spack cray spack differ slightli use cray system architectur spec differenti frontend backend processor oper system exampl edison nersc backend target processor ivi bridg specifi use backend way codeblock consol spack instal zlib targetivybridg also use oper system build backend codeblock consol spack instal zlib oscnl notic name includ oper system name major version number concaten togeth altern want build someth frontend specifi frontend target processor processor login node edison sandi bridg specifi command line like codeblock consol spack instal zlib targetsandybridg frontend oper system codeblock consol spack instal zlib ossus cray compil detect spack detect compil use two method frontend treat everyth differ lie backend compil detect backend compil detect made via tcl modul avail command detect compil write appropri prgenv compil modul name compilersyaml set path compil cray compil wrapper name ie cc cc ftn build time spack load correct prgenv compil modul call appropri wrapper compilersyaml config file also differ modul section fill compil program environ modul name system field empti codeblock yaml compil modul prgenvintel intel mention earlier compil path look differ cray system sinc compil invok use cc cc ftn path compil replac respect cray compil wrapper name codeblock yaml path cc cc cxx cc f ftn fc ftn oppos explicit path compil execut allow spack call cray compil wrapper build time compil configur check refcompilerconfig spack set default cray link type dynam better match platform individu packag enabl static link default outsid spack cray system use static flag set default use cray modul want use default compil prgenv also abl load cray extern modul need set packagesyaml here exampl extern configur cray modul codeblock yaml packag mpich extern spec mpichgcc archcray_xchaswellcnl modul craympich spec mpichintel archcray_xchaswellcnl modul craympich provid mpi mpich tell spack whatev packag depend mpi load craympich modul environ abl use whatev environ variabl librari etc brought environ via modul load note crayprovid packag best use modul instead prefix packagesyaml cray program environ heavili reli modul eg load craympich modul add mpi librari compil wrapper link line set default compil spack use compil type want use cray default set packagesyaml compil field set compil spec order prefer whenev build compil type spack concret version exampl full packagesyaml use nersc codeblock yaml packag mpich extern spec mpichgcc archcray_xccnlivybridg modul craympich spec mpichintel archcray_xcsuseivybridg modul craympich buildabl fals netcdf extern spec netcdfgcc archcray_xccnlivybridg modul craynetcdf spec netcdfintel archcray_xccnlivybridg modul craynetcdf buildabl fals hdf extern spec hdfgcc archcray_xccnlivybridg modul crayhdf spec hdfintel archcray_xccnlivybridg modul crayhdf buildabl fals compil gcc intel provid mpi mpich tell spack whenev want build gcc use version want build intel compil use version add spec compil type cray modul ensur compil system use extern modul extern packag check section refsecexternalpackag use linux contain cray machin spack use environ variabl particular cray program environ determin system cray platform environ variabl may propag contain use cray program environ ensur spack autodetect cray program environ unset environ variabl modulepath caus spack treat linux contain cray system base linux distro copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _configyaml basic set spack basic configur option set configyaml see default set look etcspackdefaultsconfigyaml literalinclud _spack_rootetcspackdefaultsconfigyaml languag yaml set overridden etcspackconfigyaml spackconfigyaml see refconfigurationscop detail install_tre locat spack instal packag depend default spackoptspack install_hash_length install_path_schem default spack instal path long creat problem script hardcod shebang addit use intel compil also long list depend compil may segfault see follow codeblock consol intern error compil encount unexpect problem segment violat signal rais access violat stack overflow pleas contact intel support assist may variabl contain depend spec may long two paramet help long path name firstli install_hash_length paramet set length hash instal path default path use full charact secondli also possibl modifi entir instal scheme default spack use architecturecompilernamecompilerversionnameversionhash token avail use direct understood methspackspecspecformat method use paramet possibl use differ packag layout reduc depth instal path exampl codeblock yaml config install_path_schem nameversionhash would instal packag subdirectori use packag name version hash length charact use either paramet set hash length affect represent hash instal directori awar smaller hash length like name conflict occur paramet independ use configur modul name warn modifi instal hash length path scheme packag instal prevent spack abl find old instal directori module_root control spack instal gener modul file custom locat type modul eg codeblock yaml module_root tcl spacksharespackmodul lmod spacksharespacklmod see refmodul detail build_stag spack design run user home directori mani system home directori slow network file system system build temporari file system faster usual also space avail temporari locat home directori usernam alreadi path spack append valu user select build_stag path warn highli recommend specifi build_stag path distinguish stage activ ensur spack clean inadvert remov unrel file spack prepend spackstag temporari stage directori name reduc risk use combin spack stage specifi path shown default set document exampl add anoth layer protect default spack build_stag configur like codeblock yaml build_stag tempdiruserspackstag spackstag order list path spack search tri find temporari directori build stage list search order spack use first directori write access specifi spackstag first ensur user build home directori histor spack stage path spackvarspackstag build directli insid spack instanc see refconfigfilevari tempdir spack spack build packag creat temporari directori within build_stag packag success instal spack delet temporari directori use build unsuccess build delet manual purg refspack clean stage cmdspackclean note build fail writabl directori build_stag list user sitespecif set search first source_cach locat cach download tarbal repositori default store spackvarspackcach store indefinit default purg refspack clean download cmdspackclean misc_cach temporari directori store longliv cach file indic packag avail repositori default spackcach purg refspack clean misccach cmdspackclean verify_ssl set true default spack verifi certif remot host make ssl connect set fals disabl tool like curl use insecur option disabl expos attack use risk checksum set true spack verifi download sourc code use checksum refus build packag verifi set fals disabl check disabl expos attack use risk lock set true concurr instanc spack use lock avoid modifi instal tree databas file etc fals spack disabl lock must run concurr instanc spack file system dont support lock set fals run one spack time otherwis recommend enabl lock dirti default spack unset variabl environ chang way packag build includ ld_library_path cpath library_path dyld_library_path other default build clean machin compil tool may need custom ld_library_path set run set dirti true skip clean step make build dirti default awar reduc reproduc build _buildjob build_job unless overridden packag command line spack build packag parallel default parallel equal number core avail process default build_job build system use makefil spack instal run make jbuild_job build_job less number core avail make jncore build_job greater equal number core avail work share login node strict ulimit may necessari set default lower valu set build_job exampl command like spack instal run make j instead hog everi core build softwar serial set build_job note specifi number job command line alway take prioriti spack instal jn alway run make jn even exce number core avail ccach set true spack use ccach cach compil use specif two case use spack devbuild build packag mani differ variant default fals enabl spack look insid path ccach execut stop found system come ccach also instal use spack instal ccach ccach come reason default cach size locat see configur set section man ccach learn default set chang pleas note current disabl ccach hash_dir featur avoid issu stage directori see httpsgithubcomllnlspackpullissuecom shared_link control whether spack emb rpath runpath attribut elf binari find depend effect maco two option allow rpath use rpath forc disablenewtag flag pass linker runpath use runpath forc enablenewtag flag pass linker rpath search path higher preced ld_library_path ldso search librari transit rpath parent object runpath search path lower preced ld_library_path ldso search depend runpath load object mix two option within instal tree terminal_titl set option true spack updat termin titl provid inform current progress well current total packag number work properli requir termin reset titl spack finish work otherwis spack statu inform remain termin titl indefinit termin alreadi set way clear spack statu inform copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit chain chain spack instal point spack instal anoth instal use packag instal regist spack instanc add entri upstreamsyaml codeblock yaml upstream spackinst install_tre pathtootherspackoptspack spackinst install_tre pathtoanotherspackoptspack install_tre must point optspack directori insid spack base directori upstream spack instanc ad spack find automat check upstream instanc queri instal packag new packag instal local spack instal use depend instal upstream instanc instanc spack knowledg local spack instanc may permiss ownership local spack instanc follow consequ upstream spack instanc lock therefor user make sure local instanc use upstream instanc modifi user uninstal packag upstream instanc sinc upstream instanc doesnt know local instanc prevent uninstal packag local instanc depend detail upstream instal packag instal local upstream local instal alway use depend occur local spack instal packag present upstream later upstream spack instanc also instal packag upstream spack instanc regist instal extern packag local spack instanc treat spackinstal packag featur work upstream spack instanc includ upstream function ie commit march use multipl upstream spack instanc singl spack instanc use multipl upstream spack instal spack search upstream instanc order list configur instal refer instanc x order instanc x must list upstream upstreamsyaml use modul upstream packag local spack instanc gener modul packag instal upstream local spack instanc configur use modul gener upstream spack instanc two requir use modul creat upstream spack instanc firstli upstream instanc must spack modul tcl refresh gener index file map instal packag modul secondli local spack instanc must add modul entri configur codeblock yaml upstream spackinst install_tre pathtootherspackoptspack modul tcl pathtootherspacksharespackmodul time new packag instal upstream spack instanc upstream spack maintain run spack modul tcl refresh correspond command type modul intend use note spack gener modul refautomat load autoloadingdepend modul depend packag spack current modul upstream packag copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _modul modul use modul system manag user environ control way common practic hpc center often embrac also individu programm develop machin support common practic spack integr environ modul httpmodulessourceforgenet_ lmod httplmodreadthedocsioenlatest_ provid postinstal hook gener modul file command manipul modul one sever way use spack packag option may fit use case better also look refspack load spackload refenviron environ use modul file via spack instal support modul system abl run either modul avail use l spack see modul file instal sampl output program show lot instal packag codeblock consol modul avail spacksharespackmoduleslinuxubuntux_ autoconfgccqextxkq hwlocgccakcisez mgccevznoc openblasgccdhkm pysetuptoolsgccfadur automakegccmaqvukj islgccafitaq mgccuppywnz openmpigccgosz pysixgccpdhkaw binutilsgccscr libiconvgccatwg mawkgccacjez opensslkgccdklstk pythongcctyehea bisongccekluo libpciaccessgccgmufnvh mawkgccostdom opensslkgccgxgror readlinegccxhufqhn bzipgcciffrxzn libsigsegvgccppcvt mpcgccgmztc pcregccrpbrxb readlinegcczzcyicg bzipgccbequudr libsigsegvgccenifnh mpfrgccoxmaz perlgccdgju sqlitegcczoruzj cmakegccfowuubi libtoolgccaza mpichgccdmvdaw perlgccuzkpt targccwseass curlgccfzn libtoolgccnzmbzt ncursesgccdcpeia pkgconfiggccibt tclgcctfxzqbr expatgccmrvbd libxmlgccryzxnsu ncursesgccucbhcdi pkgconfiggccjpgubk utilmacrosgccxorzx flexgccyfoo libxmlgccrltzsdh netliblapackgccjsdog pyappdirsgccjxawmw xzgccmewlog gccgccpuqv lmodgccjesrhr netlibscalapackgccaidkl pynumpygccoemmoeu xzgccvqeuvb gettextgccyymghlh luagccimyaz netlibscalapackgcchjsemcn pypackaginggccindtl zipgccrward gmpgccubwu lualuafilesystem__gccwkeynl netlibscalapackgccjvab pypyparsinggcctbogmw zlibgccpgxsxv helpmangcckcnqmau lualuaposixgccmdodri netlibscalapackgccrgqfrd pyscipygcckrnat zlibgcccqpcj name look familiar resembl output spack find use modul directli exampl could type either command load cmake modul codeblock consol use cmakegccfowuubi codeblock consol modul load cmakegccfowuubi neither particularli pretti easi rememb easi type luckili spack offer mani facil custom modul scheme use site modul file custom modul file gener postinstal hook success instal packag note spack gener modulefil packag instal attempt instal packag alreadi instal spack regener modulefil packag may inconsist modulefil spack modul configur chang sinc packag instal either edit file chang scope environ later section subsect refregener modul cmdspackmodulerefresh allow bring modul consist state tabl summar essenti inform associ differ file format gener spack hook name default root directori default templat file compat tool tcl nonhierarch tcl sharespackmodul sharespacktemplatesmodulesmodulefiletcl env moduleslmod lua hierarch lmod sharespacklmod sharespacktemplatesmodulesmodulefilelua lmod spack ship sensibl default gener modul file custom mani aspect accommod packag site specif need gener overrid extend default behavior overrid certain callback api python packag write specif rule modulesyaml configur file write templat overrid extend default former method let express chang runtim environ need use instal softwar properli eg inject variabl languag interpret extens latter two instead permit fine tune filesystem layout content creation modul file meet site specif convent overrid api call packagepi two method overrid packagepi affect content modul file gener spack first one codeblock python def setup_run_environmentself env pass alter content modul file associ packag overridden second method codeblock python def setup_dependent_run_environmentself env dependent_spec pass instead inject runtim environ modif modul file packag depend case need fill run_env desir list environ modif admonit r packag callback api exampl crucial overrid method given r packag packag instal librari header nonstandard locat possibl prepend appropri directori correspond environ variabl ld_library_path selfprefixrlibrlib pkg_config_path selfprefixrlibpkgconfig follow snippet literalinclud _spack_rootvarspackreposbuiltinpackagesrpackagepi pyobject rsetup_run_environ r packag also know environ variabl modifi make languag extens provid packag avail modifi appropri overrid second method literalinclud _spack_rootvarspackreposbuiltinpackagesrpackagepi pyobject rsetup_dependent_run_environ _modulesyaml write configur file configur file control modul gener behavior name modulesyaml default configur literalinclud _spack_rootetcspackdefaultsmodulesyaml languag yaml activ hook gener tcl modul file inspect instal folder packag presenc set subdirectori bin man shareman etc found full path prepend environ variabl list folder name spack modul configur multipl modul set default modul set name default spack command oper modul default appli default modul set appli modul set configur set appli root configur eg modulesen rather modulesdefaulten appli default modul set backward compat chang modul root shown tabl default modul root lmod spacksharespacklmod default root tcl spacksharespackmodul overridden modul set chang root key configur codeblock yaml modul default root tcl pathtoinstalltclmodul my_custom_lmod_modul root lmod pathtoinstallcustomlmodmodul configur creat two modul set default modul set instal tcl modul pathtoinstalltclmodul still instal lmod modul default locat set my_custom_lmod_modul instal lmod modul pathtoinstallcustomlmodmodul still instal tcl modul default locat default architecturespecif directori ad root directori modul set may overrid behavior set arch_fold config valu fals codeblock yaml modul default root tcl pathtoinstalltclmodul arch_fold fals obvious multipl modul set instal modul default locat could confus user modul next section discuss enabl disabl modul type modul file gener modul set activ hook modul file gener ship spack activ ad list enabl key modul file current gener activ default lmod produc hierarch lua modul file modul system configur separ fact list configur option affect particular type modul file top level key correspond gener custom codeblock yaml modul default enabl tcl lmod tcl contain environ modul specif custom lmod contain lmod specif custom gener configur option use modulesyaml either chang layout modul file filesystem affect content latter point possibl use anonym spec fine tune set packag modif appli _anonymous_spec select anonym spec configur file use anonym spec ie spec requir root packag thu use express constraint appli certain modif select set instal softwar instanc snippet codeblock yaml modul default tcl keyword select everi packag environ set bar bar anonym spec select packag depend openmpi doubl colon end clear set rule match far openmpi environ set bar baz select zlib packag zlib environ prepend_path ld_library_path foo select zlib compil gcc zlibgcc environ unset foobar instruct spack set environ variabl barbar everi modul unless associ spec satisfi openmpi case barbaz addit spec satisfi zlib valu foo prepend ld_library_path spec satisfi zlibgcc variabl foobar unset note order matter modif associ keyword alway evalu first matter appear configur file spec constraint instead evalu top bottom blacklist whitelist specif modul file use anonym spec also prevent modul file written forc written consid case want hide user boilerpl softwar build order bootstrap new compil suppos instanc gcc compil provid system write configur file like codeblock yaml modul default tcl whitelist gcc llvm whitelist preced blacklist blacklist gcc assum gcc system compil prevent gener modul file packag compil gcc except gcc llvm instal _modulesproject custom name modul name environ modul gener spack alway easi fulli comprehend due long hash name three modul configur option help first global set adjust hash length set anywher default length represent hash modul file name affect size packag hash awar smaller hash length like name conflict occur follow snippet show set hash length modul file name codeblock yaml modul default tcl hash_length help make modul name readabl help allevi name conflict short hash one use suffix option modul configur file option add string modul match spec instanc follow config option codeblock yaml modul default tcl suffix python python openbla openbla add python version string packag compil python match spec python use know version python set python extens associ likewis openbla string attach program openbla spec like via bla variant specif heavyweight solut modul name chang entir name convent modul file use project format cover refadding_projections_to_view codeblock yaml modul default tcl project nameversioncompilernamecompilerversionmodul mpi nameversionmpinamempiversioncompilernamecompilerversionmodul creat modul file nest directori packag name contain version compil name version word modul hash spec depend mpi inform plu mpi implement name version packag depend mpi specifi modul name project lmod modul recommend includ name depend eg mpi compil alreadi lmod hierarchi note tcl modul tcl modul also allow explicit conflict modulefil codeblock yaml modul default enabl tcl tcl project nameversioncompilernamecompilervers conflict name intel creat modul file conflict intel base directori modul effect prevent possibl load two version softwar time token avail use direct understood methspackspecspecformat method note lmod hierarch modul file lmod activ spack gener set hierarch lua modul file understood lmod hierarchi alway contain two layer core compil extend virtual depend present spack case could use practic instanc codeblock yaml modul default enabl lmod lmod core_compil gcc core_spec python hierarchi mpi lapack gener hierarchi lapack mpi layer switch independ allow site build librari applic differ implement mpi lapack let lmod switch safe one packag built compil core_compil packag satisfi spec core_spec put core hierarchi lua modul warn consist core packag user respons maintin consist among core packag core_spec bypass hierarchi allow lmod safe switch coher softwar stack warn deep hierarchi lmod spider hierarchi deeper three layer lmod spider may issu see discuss lmod project httpsgithubcomtacclmodissues_ select default modul default multipl modul name share directori highest version number default modul behavior modul command overridden symlink name default desir default modul wish configur default modul spack add default key modul configur codeblock yaml modul mymoduleset tcl default gcc hdfmpihlgcc default may arbitrarili specif packag satisfi default spack gener modul file appropri path gener default symlink modul file well warn spack configur gener multipl default packag directori last modulefil gener default modul _customizeenvmodif custom environ modif control prefix spack packag ad environ variabl prefix_inspect section section map rel prefix list environ variabl updat prefix prefix_inspect configur differ set prefix_inspect configur modul level configur file appli modul set allow user make gener overrid default inspect custom permoduleset codeblock yaml modul prefix_inspect bin path lib library_path cmake_prefix_path prefix inspect appli rel path insid instal prefix exist case spack packag foo instal spackprefixfoo foo instal execut bin librari lib gener modul file foo would updat path contain spackprefixfoobin cmake_prefix_path contain spackprefixfoo would updat library_path special case prefix inspect rel environ view follow condit hold modul set configur configur refenviron environ never appli outsid environ environ question configur use refview filesystemview refenviron view configur configuring_environment_view project ensur everi packag link uniqu directori modul set may configur creat modul rel environ view specifi use_view configur option modul set true modul set construct rel default view environ otherwis valu must name environ view rel construct modul falseish disabl featur explicitli default fals use_view valu set config prefix inspect packag done rel packag path view codeblock yaml spack modul view_relative_modul use_view my_view prefix_inspect bin path view my_view project root pathtomyview namehash spack key relev refenviron environ configur view key discuss detail section refconfigur environ view configuring_environment_view configur gener modul packag foo would set path includ pathtomyviewfoohashbin instead spackprefixfoobin use_view option use deploy larg softwar stack user like inspect modul find full path softwar desir present user simpler set path gener spack instal tree filter environ modif modif certain environ variabl modul file default instanc gener prefix inspect want prevent modif environ variabl use environ blacklist codeblock yaml modul default tcl filter exclud chang variabl environment_blacklist cpath library_path configur gener modul file contain modif either cpath library_path _autoloadingdepend autoload depend often requir modul transient depend load well one exampl use one packag need use execut provid depend depend autoload execut path similarli script languag python packag depend load togeth autoload enabl default lmod great builtin support depends_on function environ modul disabl default autoload also enabl condit codeblock yaml modul default tcl autoload none python autoload direct configur file produc modul file load direct depend packag instal depend python allow valu autoload statement either none direct note tcl prerequisit tcl section configur file possibl use prerequisit direct accept valu autoload produc modul file prereq statement use autoload depend version environ modul maintain modul file type modul file command name associ action command permit usual associ mainten product environ here instanc sampl featur spack modul tcl command commandoutput spack modul tcl help _cmdspackmodulerefresh refresh set modul subcommand regener modul file updat content layout refresh commandoutput spack modul tcl refresh help set packag select use anonym spec option constraint posit argument option entir tree delet regener chang layout radic _cmdspackmodulerm delet modul file instead need delet modul file right subcommand rm commandoutput spack modul tcl rm help note care modul file everi modif done modul alreadi exist ask confirm default command use script possibl though pass argument skip safeti measur _modulesinshellscript use spack modul shell script easiest enabl addit spack command load unload modul file add correct path modulepath need sourc appropri setup file assum spack instal spack_root run appropri command shell codeblock consol bashzshsh spack_rootsharespacksetupenvsh tcshcsh sourc spack_rootsharespacksetupenvcsh fish spack_rootsharespacksetupenvfish want spack shell support avail command line login put sourc line one file sourc startup like profil bashrc cshrc awar shell startup time may increas slightli result _cmdspackmoduleload spack modul tcl load case desir use spackgener modul rather reli spack builtin userenviron modif capabl translat spec modul name use spack modul tcl load spack modul lmod load depend modul system desir load modul also modul depend use depend option requir modul spack build binari rpath support howev packag use rpath find depend true particular python extens current built rpath script load modul recurs may made command codeblock consol spack modul tcl load depend spec equival altern use process substitut httptldporgldpabshtmlprocesssubhtml_ codeblock consol sourc spack modul tcl load depend spec modul command shell script although spack flexibl modul command much faster could becom issu emit seri spack load command insid shell script ad depend flag spack modul tcl load may also use gener code cutandpast shell script exampl codeblock consol spack modul tcl load depend pynumpi git bzipgcclinuxx_ modul load bzipgccktnrhkrmbbtlvnagfatrarzjojmkvzsx ncursesgcclinuxx_ modul load ncursesgcckaazynehbjkfnalunchyqtygoemncv zlibgcclinuxx_ modul load zlibgccvufwaahjnviyvgjcelonywxufjz sqlitegcclinuxx_ modul load sqlitegccaeediswgdfrmtogszoewnhehbr readlinegcclinuxx_ modul load readlinegccserlsycrwxyhreglqirpxixxejh pythongcclinuxx_ modul load pythongccqrsrtjldujiicuvtnxmtfhegi pysetuptoolsgcclinuxx_ modul load pysetuptoolsgccqrsujpglepnedmwhlfxwxw pynosegcclinuxx_ modul load pynosegccpwhtjwdvdvfzjwuuztkzrblzepli openblasgccsharedlinuxx_ modul load openblasgccpwrmlomapfsnjtzfttyayzcnxey pynumpygccblaslapacklinuxx_ modul load pynumpygccmulodttwpcyjufvahtsktwtyqdr curlgcclinuxx_ modul load curlgccohzfwsepmbplnaquvopnaqbi autoconfgcclinuxx_ modul load autoconfgccbkibjqhgqmeoogfvyohuoq cmakegccdocncursesopensslqtlinuxx_ modul load cmakegccxxnsklmgwlaubfgzppamtbqkrwnt expatgcclinuxx_ modul load expatgccpkzucnkeimwakejjvbvegncppd gitrcgcccurlexpatlinuxx_ modul load gitrcgccbibhqtnvxjjoqugtinbltxrgkd script may edit remov unnecessari modul modul prefix system modul automat prefix certain string spack modul tcl load need know prefix issu modul load command add prefix option spack modul tcl load command necessari exampl consid follow one system codeblock consol modul avail linuxsusex_antlrgccbdpli spack modul tcl load antlr wrong antlrgcccsharpcxxjavapython archlinuxsusex_ modul load antlrgccbdpli spack modul tcl load prefix linuxsusex_ antlr antlrgcccsharpcxxjavapython archlinuxsusex_ modul load linuxsusex_antlrgccbdpli copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit spack document master file creat sphinxquickstart mon dec adapt file complet like least contain root toctre direct spack epigraph doc spack packag manag sphere pack see pyspack httpspyspackreadthedocsio_ spack packag manag tool design support multipl version configur softwar wide varieti platform environ design larg supercomput center mani user applic team share common instal softwar cluster exot architectur use librari standard abi spack nondestruct instal new version break exist instal mani configur coexist system importantli spack simpl offer simpl spec syntax user specifi version configur option concis spack also simpl packag author packag file written pure python spec allow packag author maintain singl file mani differ build packag see docfeatur exampl highlight get spack github repositori httpsgithubcomspackspack_ instal first packag codeblock consol git clone c featuremanyfilestru httpsgithubcomspackspackgit cd spackbin spack instal libelf your new spack want start use see docgetting_start refer full manual toctre maxdepth caption basic featur getting_start basic_usag workflow tutori spack httpsspacktutorialreadthedocsio known_issu toctre maxdepth caption refer configur config_yaml build_set environ contain monitor mirror module_file_support repositori binary_cach command_index package_list chain extens pipelin toctre maxdepth caption research analyz toctre maxdepth caption contribut contribution_guid packaging_guid build_system developer_guid toctre maxdepth caption api doc spack api doc spack llnl api doc llnl indic tabl refgenindex refmodindex refsearch copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit workflow process use spack involv build packag run binari packag develop softwar depend packag exampl one might use spack build netcdf packag use spack load run ncdump binari final write small c program readwrit particular netcdf file spack support varieti workflow suit varieti situat user prefer singl way thing chapter demonstr differ workflow develop point pro con definit first basic definit packag concret spec instal packag spack packag abstract recip build one piec softwar spack packag may use build principl version softwar set variant exampl packag includ curl zlib packag may instanti produc concret spec one possibl realiz particular packag combinatori mani realiz exampl concret spec instanti curl commandoutput spack spec curl spack core concret algorithm gener concret spec instanti packag repo base set hint includ user input packagesyaml file algorithm may access time spack spec command everi time spack instal packag instal correspond concret spec vanishingli small fraction possibl concret spec instal one spack site consist set set spack spec said consist packag instanti one way within two spec set packag must also version variant compil etc exampl follow set consist codeblock consol curlgcc archlinuxsusex_ opensslkgcc archlinuxsusex_ zlibgcc archlinuxsusex_ zlibgcc archlinuxsusex_ follow set consist codeblock consol curlgcc archlinuxsusex_ opensslkgcc archlinuxsusex_ zlibgcc archlinuxsusex_ zlibgcc archlinuxsusex_ compat set instal packag determin may done alway possibl spack load set instal packag whether consist run binari command line howev set instal packag link togeth one binari consist user produc seri spack spec spack load command gener guarante consist spack concret procedur guarante result singl spack spec call consist therefor best way ensur consist set spec creat spack packag depend instanti packag use techniqu build packag suppos task instal set softwar packag system order support one applic core applic program plu softwar prepar input analyz output requir softwar might sum seri spack instal command place script need script alway run futur exampl codeblock sh binsh spack instal modeleutil spack instal emac spack instal ncview spack instal nco spack instal modelecontrol spack instal pynumpi case script correctli instal softwar accord specif need choic need made variant version virtual depend choic may need possibl specifi choic extend spec command line howev choic must specifi repeatedli exampl wish use openmpi satisfi mpi depend openmpi appear everi spack instal line use mpi get repetit fast custom spack instal option easier spackpackagesyaml file file specifi prefer version variant use packag exampl codeblock yaml packag python version modeleutil version cmake everytrac version develop eigen variant suitespars netcdf variant mpi compil gcc provid mpi openmpi bla openbla lapack openbla approach work long build packag one applic multipl applic suppos instead your build multipl inconsist applic exampl user want packag built openmpi packag b mpich still share mani lowerlevel depend case singl packagesyaml file work plan implement perproject packagesyaml file meantim one could write shell script switch packagesyaml multipl version need use symlink combinatori set instal suppos task systemat build mani incompat version packag exampl need build petsc time differ mpi implement differ compil order support user need case need either creat differ packagesyaml file like creat differ spack instal command line correct option spec reallif exampl kind usag codeblock sh binbash compil gcc intel pgi mpi openmpipsmverb openmpipsmverb mvapichpsmmrail mvapichpsmmrail mpichverb compil compil serial instal spack instal szip compil spack instal hdf compil spack instal hdf compil spack instal netcdf compil spack instal netcdffortran compil spack instal ncview compil parallel instal mpi mpi spack instal mpi compil spack instal hdfcxxmpi compil mpi spack instal parallelnetcdf compil mpi done done run binari packag spack packag built next step use build packag mani way use depend use case find run simplest way run spack binari find run mani case noth need spack build binari rpath spack instal directori may found spack locat installdir command exampl codeblock consol spack locat installdir cmake spackoptspacklinuxsusex_gcccmakecxrynbesssjognjakfgxkwtx give root spack packag relev binari may found within exampl codeblock consol cmakespack locat installdir cmakebincmak standard unix tool find binari well exampl codeblock consol find spackopt name cmake grep bin spackoptspacklinuxsusex_gcccmakecxrynbesssjognjakfgxkwtxbincmak method suitabl exampl set build process gui need know locat particular tool howev power method gener prefer user environ use spack load manag user environ suppos spack use instal set commandlin program user wish use one principl put number spack load command bashrc exampl load set spack packag codeblock sh spack load modeleutil spack load emac spack load ncview spack load nco spack load modelecontrol although simpl load script like use mani case drawback set packag load gener consist decent way load command call command shell see better way assembl consist set packag build applic program spack spec spack instal command use sophist concret algorithm choos best among sever option take account packagesyaml file spack load spack modul tcl load command hand smart usersuppli spec match one instal packag spack modul tcl load fail default behavior may chang futur workaround either specif fail spack load command use spack load first allow spack load first match spec gener load script anoth problem use spack load slow typic user environ could take sever second load would appropri put bashrc directli requir full startup overhead pythonspack command circumst prefer use seri spack modul tcl load spack modul lmod load command precomput modul load gener modulenam load packag use environ modul rather spack builtin support environ modif put script run whenev instal spack packag chang exampl codeblock sh binsh gener modul load command envspackenv cat eof binsh homeenvspackenv findspack modul tcl load prefix linuxsusex_ find modeleutil find emac find ncview find nco find modelecontrol eof output file written envspackenv codeblock sh binutilsgccgoldkrellpatchlibiberti archlinuxsusex_ modul load linuxsusex_binutilsgccwdt pythongcctkuc archlinuxsusex_ modul load linuxsusex_pythongccazoju ncviewgcc archlinuxsusex_ modul load linuxsusex_ncviewgccuwknq ncogcc archlinuxsusex_ modul load linuxsusex_ncogccaqmimu modelecontroldevelopgcc archlinuxsusex_ modul load linuxsusex_modelecontroldevelopgccrddsij zlibgcc archlinuxsusex_ modul load linuxsusex_zlibgccfeonbi curlgcc archlinuxsusex_ modul load linuxsusex_curlgccvlev hdfpatchgcccxxdebugfortranmpisharedszipthreadsaf archlinuxsusex_ modul load linuxsusex_hdfpatchgccpwnsrw netcdfgcchdfmpi archlinuxsusex_ modul load linuxsusex_netcdfgccrlcanv netcdffortrangcc archlinuxsusex_ modul load linuxsusex_netcdffortrangccstdkxq modeleutilscmakegccauxdiags archlinuxsusex_ modul load linuxsusex_modeleutilscmakegccidyjul everytracedevelopgccfortranmpi archlinuxsusex_ modul load linuxsusex_everytracedevelopgccpwmb user may put sourc envspackenv bashrc note modul system put prefix name modul creat spack exampl prefix linuxsusex_ case prefix need may omit prefix flag spack modul tcl load transit depend script spack modul tcl load command gener singl modul load line transit depend usual need load modul user need path spack build binari rpath spack rpath polici nice featur modul multipl inconsist applic may load simultan exampl multipl applic packag packag b coexist togeth user path even though use differ mpi rpath elimin whole class strang error happen nonrpath binari wrong ld_library_path load recurs modul system lmod necessari modul need execut binari path binari known may execut exampl path spackbuilt compil given ide without requir ide load compil modul unfortun spack rpath support work everi case exampl softwar come mani form compil elf binari also interpret code python r jvm bytecod etc system almost univers use environ variabl analog ld_library_path dynam load librari although spack gener build binari rpath current compil python extens exampl pynumpi librari extens depend bla case exampl must specifi ld_library_path case spackgener binari end without function rpath discern reason case rpath support doesnt make thing work necessari load modul depend well modul done ad depend flag spack modul tcl load command exampl follow line ad script would use load scipi along numpi core python blaslapack anyth els need codeblock sh spack modul tcl load depend pyscipi dummi packag altern seri modul load command one might consid dummi packag way creat consist set packag may load one unit idea pretti simpl creat packag say mydummi url instal method depend run spack instal mydummi instal advantag method set packag produc consist mean reliabl build softwar disadvantag set packag consist mean load two applic way consist _filesystemview filesystem view filesystem view offer altern environ modul anoth way assembl packag use way load user environ singleprefix filesystem view singl directori tree union directori hierarchi number instal packag similar directori hierarchi might exist usrloc file view instal packag brought view symbol hard link referenc origin spack instal combinatori filesystem view contain softwar singleprefix view combinatori filesystem view creat defin project spec set spec syntax discuss section spack view command adding_projections_to_views_ project spec set spec specifi name scheme directori structur root view packag link exampl spec zlibgcc could project myviewzlibgcc softwar built instal absolut path frequent bake softwar make nonrelocat happen rpath also shebang configur file assort locat therefor program run spack view typic still look origin spackinstal locat share librari resourc behavior easili chang gener way know absolut path might written instal packag reloc therefor origin spack tree must kept place filesystem view work even view built hardlink fixm refer reloc work hegner gartung pr _cmdspackview spack view filesystem view creat packag link spack view command symlink hardlink subcommand spack view remov command use unlink filesystem view follow exampl creat filesystem view base instal cmake packag remov view file cmake packag retain depend codeblock consol spack view verbos symlink myview cmake link packag ncurs link packag zlib link packag openssl link packag cmake ls myview bin doc etc includ lib share ls myviewbin captoinfo clear cpack ctest infotocap openssl tab toe tset ccmake cmake c_rehash infocmp ncursesconfig reset tic tput spack view verbos depend fals rm myview cmake remov packag cmake ls myviewbin captoinfo c_rehash infotocap openssl tab toe tset clear infocmp ncursesconfig reset tic tput note set packag includ view inconsist possibl two packag provid file conflict type handl firstcomefirstserv basi warn print note packag remov view empti directori purg _adding_projections_to_view control view project default project view link everi packag root view chang ad projectionsyaml configur file view project configur file view locat myview store myviewspackprojectionsyaml creat view project configur file also specifi command line use projectionfil option spack view command project configur file map partial spec spec format string defin methspackspecspecformat function shown exampl codeblock yaml project zlib namevers mpi nameversionmpinamempiversioncompilernamecompilervers nameversioncompilernamecompilervers entri project configur file must either spec keyword spec project use first nonal entri spec satisfi entri entri satisfi spec keyword appear file matter given exampl spec satisfi zlib link myviewzlib spec satisfi hdfmpi gcc mvapich link myviewhdfmvapichgcc spec satisfi hdfmpi gcc link myviewhdfgcc keyword appear project configur file spec satisfi entri file link root view singleprefix view entri appear keyword project configur file use spec use project reach entri finegrain control exclud depend option flag allow finegrain control packag depend get includ view exampl suppos develop appsi packag wish build view appsi depend appsi codeblock consol spack view depend ye exclud appsi symlink pathtomyview appsi altern wish creat view whose purpos provid binari execut end user need includ applic might want applic depend case might use codeblock consol spack view depend symlink pathtomyview cmake hybrid filesystem view although filesystem view usual creat spack user free add mean exampl imagin filesystem view creat spack look someth like codeblock consol pathtomyviewbinprograma pathtospackbinprograma pathtomyviewliblibaso pathtospackliblibaso user may add view nonspack mean exampl run classic instal script exampl codeblock consol tar xf btargz cd b configur prefixpathtomyview withapathtomyview make make instal result hybrid view codeblock consol pathtomyviewbinprograma pathtospackbinprograma pathtomyviewbinprogramb pathtomyviewliblibaso pathtospackliblibaso pathtomyviewliblibbso case real file coexist interleav view symlink time one delet pathtomyview use spack view manag surgic none affect real spack instal area global activ refcmdspackactiv may use altern load python similar system packag directli creat view extens global activ spack load python also load extens activ given python reduc need user load larg number packag howev spack global activ two potenti drawback activ packag involv compil c extens may still need depend load manual exampl spack load openbla might requir make pynumpi work global activ break core featur spack multipl version packag coexist sidebysid exampl suppos wish run python packag two differ environ basic python one pynumpi one pynumpi spack extens support potenti debug use case discuss run binari modul extens packag filesystem view way assembl set spack packag use environ semant similar conflict instal packag simultan load activ includ view approach guarante environ creat consist possibl exampl simultan load applic use openmpi applic b use mpich applic run fine inconsist environ reli rpath environ find depend gener environ set use modul vs view work similarli use set ephemer longliv testingdevelop environ oper differ two approach make one prefer certain environ filesystem view requir environ modul infrastructur although spack instal environmentmodul user might hostil use filesystem view offer good solut sysadmin serv user want stuff need one place dont want hear spack although modern build system find depend wherev might applic handbuilt make file expect depend one place one common problem makefil assum netcdf netcdffortran instal tree one might use ide requir tediou configur depend path easier autom administr viewbuild script ide case view prefer way assembl environ system inod quota modul might prefer view extens packag view activ extens maintain state semant equival inform spack modul tcl load script administr might find thing easier maintain without ad heavyweight state view use spack replac homebrewconda spack incred power packag manag design supercomput user divers instal need spack also use handl simpl singleus instal laptop maco user alreadi familiar packag manag like homebrew conda instal packag symlink singl central locat like usrloc section show emul behavior homebrewconda use refenviron setup first let creat new environ well assum spack alreadi set correctli youv alreadi sourc setup script shell creat new environ simpli run codeblock consol spack env creat myenv updat view usersmespackvarspackenvironmentsmyenvspackenvview creat environ myenv usersmespackvarspackenvironmentsmyenv spack env activ myenv myenv anyth want name environ next add list packag would like instal environ let say want newer version bash one come maco want python librari run codeblock consol spack add bash ad bash environ myenv updat view usersmespackvarspackenvironmentsmyenvspackenvview spack add python ad python environ myenv updat view usersmespackvarspackenvironmentsmyenvspackenvview spack add pynumpi pyscipi pymatplotlib ad pynumpi environ myenv ad pyscipi environ myenv ad pymatplotlib environ myenv updat view usersmespackvarspackenvironmentsmyenvspackenvview packag list separ line combin singl line notic explicitli ask python use spec would normal use command line spack command next want manual configur coupl thing myenv directori find spackyaml actual defin environ codeblock consol vim spackvarspackenvironmentsmyenvspackyaml codeblock yaml spack environ file describ set packag instal along configur set spack add packag spec spec list spec bash python pynumpi pyscipi pymatplotlib view default root usersmespackvarspackenvironmentsmyenvspackenvview project config mirror modul enabl packag repo upstream definit concret separ see packag ad earlier spec section ever want add packag either use spack add manual edit file also need chang concret option default spack concret spec separ allow multipl version packag coexist sinc want singl consist environ want concret spec togeth spackyaml look like new set section dont plan use remov codeblock diff spack spec bash python pynumpi pyscipi pymatplotlib spec bash python pynumpi pyscipi pymatplotlib view default root usersmespackvarspackenvironmentsmyenvspackenvview project view usersmespackvarspackenvironmentsmyenvspackenvview config mirror modul enabl packag repo upstream definit concret togeth concret separ symlink locat spackyaml file youll notic default spack symlink instal usersmespackvarspackenvironmentsmyenvspackenvview actual chang directori want exampl homebrew use usrloc conda use usersmeanaconda order access file locat need updat path environ variabl point activ spack environ automat also manual set bashrc warn sever reason shouldnt use usrloc maco el capitan newer appl make hard may notic permiss issu usrloc due system integr protect httpssupportapplecomenusht_ default user dont permiss instal anyth usrloc cant even chang use sudo chown sudo chmod packag manag like homebrew tri instal thing directori plan use homebrew conjunct spack dont symlink thing usrloc share workstat dont sudo privileg cant still want anyway sever way around sip could disabl sip boot recoveri mode run csrutil disabl recommend open os secur vulner anoth techniqu run spack concret spack instal use sudo also recommend safest way ive found creat instal directori use sudo chang ownership back user like codeblock bash directori spack bin contrib includ lib man share sudo mkdir p usrlocaldirectori sudo chown id unid gn usrlocaldirectori done depend packag instal environ exact list directori need creat may vari may also find packag like java librari instal singl file instal prefix instead subdirectori case action replac mkdir p touch forloop safer use default symlink locat instal actual concret environ run codeblock consol spack concret tell packag alreadi instal alert conflict spec actual instal packag symlink view directori simpli run codeblock consol spack instal type python find one instal order chang default shell newer bash instal first need add list accept shell run codeblock consol sudo vim etcshel add absolut path bash execut run codeblock consol chsh pathtobash log log back echo shell point newer version bash updat instal packag let say upgrad new version maco new version python releas want rebuild entir softwar stack simpli run follow command codeblock consol spack env activ myenv spack concret forc spack instal forc flag tell spack overwrit previou concret decis allow choos new version python new packag like bash alreadi instal spack instal wont reinstal keep symlink place uninstal decid spack isnt right uninstal simpl run codeblock consol spack env activ myenv spack uninstal uninstal packag environ remov symlink use spack travisci spack deploy provid userland softwar travisci httpshttptravisciorg_ startingpoint travisyml file look follow use cach httpsdocstraviscicomusercaching_ alreadi built environ make sure clean travi cach run problem main point implement travi detect core avail actual alloc user limit parallel spack build config travi yaml parser bit buggi echo command without control user travi job run variou x_ microarchitectur plan cach build result eg acceler depend build consid build gener x_ target limit microarchitectur also find packag work es spack build cach httpsoacissuoregonedueses_buildcache_inventoryhtml_ build minut need prefix travis_wait altern gener output spack instal v travi build noninteract prevent use bash alias function modul fix sourc etcprofil first run everyth subshel bash l c codeblock yaml languag cpp sudo fals dist trusti cach apt true directori homecach addon apt sourc ubuntutoolchainrtest packag g environmentmodul env global spack_root homecachespack path pathhomecachespackbin before_instal export cxxg export ccgcc export fcgfortran export cxxflagsstdc instal spack devnul mkdir p spack_root git clone depth httpsgithubcomspackspackgit spack_root printf confign build_job n spack_rootetcspackconfigyaml printf packagesn alln target x_n spack_rootetcspackpackagesyaml fi travis_wait spack instal cmakeopensslncurs travis_wait spack instal boostgraphiostreamlocalelogwav spack clean sourc etcprofil sourc spack_rootsharespacksetupenvsh spack load cmake spack load boost script mkdir p homebuild cd homebuild cmake travis_build_dir make j make test upstream bug fix uncommon discov bug upstream project tri build spack typic bug packag serv depend someth els section describ procedur work around ultim resolv bug delay spack user main goal buggi new version sometim old version packag work fine new version buggi exampl found adio build hdf httpsgithubcomspackspackissues_ old version hdf work adio suggest procedur revert adio old version hdf put adiospackagepi codeblock python adio build hdf see httpsgithubcomspackspackissu depends_onhdf determin whether problem hdf adio report problem appropri upstream project case problem adio new version adio come bugfix modifi adiospackagepi reflect codeblock python adio v build hdf see httpsgithubcomspackspackissu depends_onhdf depends_onhdf version work sometim exist version depend work build typic happen develop new project develop notic exist version depend buggi nonbuggi version miss critic featur long run upstream project hope fix bug releas new version could take even bugfix alreadi push project repositori meantim spack user need thing work solut creat unoffici spack releas project soon bug fix repositori studi git histori httpsgithubcomcitibethspackcommitsefischerdevelopvarspackreposbuiltinpackagespyprojpackagepy_ pyprojpackagepi instruct april httpsgithubcomcitibethspackcommitadaaffeefacabdda_ initi bugfix identifi pyproj project pull request submit pyproj upstream author yet fix bug pyproj spack packag download fork repositori set packag author nonnumer version number use make easi upgrad packag without recomput checksum howev untrust download method distribut packag author becom temporarili maintain upstream project codeblock python need benefit pr httpsgithubcomjswhitpyprojpul versioncitibethlatlong githttpsgithubcomcitibethpyprojgit branchlatlong may upstream project accept pull request requir bugfix point fork repositori delet howev upstream project still releas new version bugfix therefor spackonli releas creat specifi desir hash main project repositori version number chosen releas descend offici releas version trust download method releas spack commun codeblock python tag releas pyproj chang version fix bug especi python use version debcddbbabbd urlhttpswwwgithubcomjswhitpyprojtarballbeccfebacabeabf note would simpler use spack git download method also trust download case codeblock python tag releas pyproj chang version fix bug especi python use version githttpsgithubcomjswhitpyprojgit commitbeccfebacabeabf note case upstream project fix bug repositori rel time manner case number version step could releas fork repositori author spack packag becom unoffici releas engin upstream project depend situat may advis put preferredtru latest offici releas version august upstream project still made new releas bugfix meantim spackbuilt pyproj provid bugfix need packag depend long work particular need upstream project make new offici releas upstream project releas new offici version bugfix unoffici version line remov spack packag patch spack sourc patch mechan provid anoth way fix bug upstream project advantag disadvantag compar procedur advantag fix bug exist releas version probabl futur releas well lightweight requir new fork set disadvantag harder develop debug patch vs branch repositori user lose autom provid version control system although patch line work ok larg patch file hard creat maintain copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _buildsystem build system spack defin number class understand use common build system httpsenwikipediaorgwikilist_of_build_automation_software_ makefil cmake etc spack packag definit inherit class order streamlin build guid provid inform specif particular build system assum youv read refpackagingguid expand idea distinct build system spack support toctre maxdepth caption makebas build_systemsmakefilepackag toctre maxdepth caption makeincompat build_systemsmavenpackag build_systemssconspackag build_systemswafpackag toctre maxdepth caption buildscript gener build_systemsautotoolspackag build_systemscmakepackag build_systemsmesonpackag build_systemsqmakepackag build_systemssippackag toctre maxdepth caption languagespecif build_systemsoctavepackag build_systemsperlpackag build_systemspythonpackag build_systemsrpackag build_systemsrubypackag toctre maxdepth caption build_systemsbundlepackag build_systemscudapackag build_systemsinteloneapipackag build_systemsintelpackag build_systemsrocmpackag build_systemscustompackag build_systemsmultiplepackag refer pymodbuild system api doc spackbuild_system provid list build system methodsattribut overridden curiou implement particular build system view sourc code run codeblock consol spack edit buildsystem autotool open autotoolspackag definit favorit editor addit work less common build system like qmake scon waf may use see exampl packag quickli find exampl run codeblock consol cd varspackreposbuiltinpackag grep l qmakepackag packagepi view packag spack edit guid intend supplement pymodbuild system api doc spackbuild_system exampl overrid commonli use method also provid rule thumb suggest packag develop unfamiliar particular build system copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _contain contain imag spack refenviron great tool creat contain imag prepar one suitabl product requir boilerpl codeblock docker copi spackyaml environ run spack e environ instal addit action may need minim size contain updat system softwar instal base imag set proper entrypoint run imag task usual necessari repetit spack come command gener recip contain imag start spackyaml quick introduct consid spack environ like follow codeblock yaml spack spec gromacsmpi mpich produc dockerfil simpl move directori spackyaml file store give follow command codeblock consol spack container dockerfil dockerfil get creat use multistag build techniqu minim size final imag codeblock docker build stage spack preinstal readi use spackubuntubioniclatest builder want instal want instal specifi manifest file spackyaml run mkdir optspackenviron echo spack echo spec echo gromacsmpi echo mpich echo concret togeth echo config echo install_tre optsoftwar echo view optview optspackenvironmentspackyaml instal softwar remov unnecessari dep run cd optspackenviron spack env activ spack instal failfast spack gc strip binari run find l optview type f exec readlink f xarg file grep charsetbinari grep xexecutablexarchivexsharedlib awk f print xarg strip modif environ necessari run run cd optspackenviron spack env activ sh etcprofiledz_spack_environmentsh bare os imag run instal execut ubuntu copi frombuild optspackenviron optspackenviron copi frombuild optsoftwar optsoftwar copi frombuild optview optview copi frombuild etcprofiledz_spack_environmentsh etcprofiledz_spack_environmentsh entrypoint binbash rcfile etcprofil l imag built run usual way tool suitabl task instanc decid use docker codeblock bash spack container dockerfil docker build myimag docker run myimag variou compon involv gener recip configur discuss detail section _container_spack_imag spack imag docker hub docker imag spack preinstal readi use built docker hub httpshubdockercomuspack_ everi push develop releas branch os current support summar tabl _containerssupportedo listtabl support oper system headerrow oper system base imag spack imag ubuntu ubuntu spackubuntuxeni ubuntu ubuntu spackubuntubion cento cento spackcento opensus leap opensuseleap spackleap imag tag correspond releas spack imag dockerhub_spackpng except latest tag point head develop branch imag avail anyon use take care repetit task necessari setup spack within contain contain recip gener spack use default base imag build stage even though handl use custom base imag provid user avail accommod complex use case creat imag environ spack environ use automat gener contain recip sensibl default provid thing like base imag version spack use imag finer tune need obtain ad relev metadata contain attribut environ codeblock yaml spack spec gromacsmpi mpich contain select format recip eg docker singular anyth els current support format docker set base imag stage spack build softwar softwar get instal built imag os cento spack develop whether strip binari strip true addit system packag need runtim os_packag final libgomp extra instruct extra_instruct final run echo export pstput boldtput setaf gromacstput setaf utput sgrw bashrc label imag label app gromac mpi mpich detail descript option avail found refcontainer_config_opt section set base imag imag subsect use select imag spack build softwar imag built softwar instal attribut set differ way one use depend use case hand use offici spack imag dockerhub gener recip use offici docker imag spack organ build softwar correspond offici os imag instal built softwar user specifi oper system imageso spack version imagesspack combin two valu map one imag discuss refcontainer_spack_imag allow instanc follow spackyaml codeblock yaml spack spec gromacsmpi mpich contain imag os cento spack use spackcento cento stage softwar respect built instal codeblock docker build stage spack preinstal readi use spackcento builder want instal want instal specifi manifest file spackyaml run mkdir optspackenviron echo spack echo spec echo gromacsmpi echo mpich echo concret togeth echo config echo install_tre optsoftwar echo view optview optspackenvironmentspackyaml bare os imag run instal execut cento copi frombuild optspackenviron optspackenviron copi frombuild optsoftwar optsoftwar copi frombuild optview optview copi frombuild etcprofiledz_spack_environmentsh etcprofiledz_spack_environmentsh entrypoint binbash rcfile etcprofil l simplest avail method select base imag advis use whenev possibl case though use spack offici imag enough fit product need situat user extend recip start bootstrap spack certain pin version manual select base imag start recip well see next use bootstrap stage spack case user may want pin commit sha use spack ensur later reproduc start fork offici spack repositori tri bugfix featur earli stage develop possibl littl verbos specifi inform spack spackyaml file codeblock yaml imag os amazonlinux spack url spack repositori use contain imag url touseafork either commit sha branch name tag ref shatagbranch true turn branch name tag correspond commit sha time recip gener resolve_sha truefals url specifi url clone spack default httpsgithubcomspackspack ref attribut either commit sha branch name tag default valu case use develop branch may chang futur point latest stabl releas final resolve_sha transform branch name tag correspond commit sha time recip gener allow greater reproduc result later time list oper system use bootstrap spack obtain commandoutput spack container listo note resolve_sha option use git revpars hood thu requir checkout correspond spack repositori temporari folder gener recip recip gener may take longer option set true addit step use custom imag provid user consid exampl build product grade imag cuda applic best strategi would probabl build top imag provid vendor regard cuda extern packag spack doesnt current provid offici imag cuda configur way user build configur environ explicitli pull requir user specifi imag use build softwar imagesbuild specifi imag use instal built softwar imagesfin spackyaml like follow codeblock yaml spack spec gromacscuda build_typereleas mpich fftw precisionfloat packag cuda buildabl fals extern spec cudagcc prefix usrlocalcuda contain imag build customcudaubuntulatest final nvidiacudabaseubuntu produc instanc follow dockerfil codeblock docker build stage spack preinstal readi use customcudaubuntulatest builder want instal want instal specifi manifest file spackyaml run mkdir optspackenviron echo spack echo spec echo gromacscuda build_typereleas echo mpich echo fftw precisionfloat echo packag echo cuda echo buildabl fals echo extern echo spec cudagcc echo prefix usrlocalcuda echo concret togeth echo config echo install_tre optsoftwar echo view optview optspackenvironmentspackyaml instal softwar remov unnecessari dep run cd optspackenviron spack env activ spack instal failfast spack gc strip binari run find l optview type f exec readlink f xarg file grep charsetbinari grep xexecutablexarchivexsharedlib awk f print xarg strip modif environ necessari run run cd optspackenviron spack env activ sh etcprofiledz_spack_environmentsh bare os imag run instal execut nvidiacudabaseubuntu copi frombuild optspackenviron optspackenviron copi frombuild optsoftwar optsoftwar copi frombuild optview optview copi frombuild etcprofiledz_spack_environmentsh etcprofiledz_spack_environmentsh entrypoint binbash rcfile etcprofil l base imag stage complet custom second mode select base imag flexibl choos oper system spack version also demand user may need gener base imag also respons ensur spack avail build stage set correctli instal requir softwar artifact produc build stage execut final stage therefor dont recommend use case otherwis cover simplifi mode shown first singular definit file addit produc recip dockerfil format spack produc singular definit file chang valu format attribut codeblock consol cat spackyaml spack spec hdfmpi contain format singular spack container hdfdef sudo singular build hdfsif hdfdef minimum version singular requir build sif singular imag format imag recip gener spack _container_config_opt configur refer tabl describ configur option current support custom gener contain recip listtabl gener configur option contain section spackyaml headerrow option name descript allow valu requir format format recip docker singular ye imageso oper system use base imag see refcontainerssupportedo ye use constrain select base imag imagesspack version spack use build stage valid tag baseimag ye use constrain select base imag imagesspackurl repositori spack clone fork spack imagesspackref refer checkout spack either commit sha branch name tag imagesspackresolve_sha resolv branch tag spackyaml commit gener recip true fals default fals imagesbuild imag use build stage valid contain imag ye use custom select base imag imagesfin imag use build stage valid contain imag ye use custom select base imag strip whether strip binari true default fals os_packagescommand tool use manag system packag apt yum custom base imag os_packagesupd whether updat list avail packag true fals default true os_packagesbuild system packag need buildtim valid packag current os os_packagesfin system packag need runtim valid packag current os extra_instructionsbuild extra instruct eg run copi etc end build stage anyth understood current format extra_instructionsfin extra instruct eg run copi etc end final stage anyth understood current format label label tag imag pair keyvalu string listtabl configur option specif singular headerrow option name descript allow valu requir singularityrunscript content runscript valid script singularitystartscript content startscript valid script singularitytest content test valid script singularityhelp descript imag descript string best practic mpi due depend fortran openmpi spack default implement consid ad gfortran aptget instal list recent version openmpi requir pass allowrunasroot mpirun call start root user insid docker execut hpc cluster help import docker imag singular order start program extern mpi otherwis also add opensshserv aptget instal list cuda start cuda nvidia provid minim cuda imag base ubuntu pleas see instruct httpshubdockercomrnvidiacuda_ avoid doubleinstal cuda ad eg codeblock yaml packag cuda extern spec cudagcc archlinuxubuntux_ prefix usrlocalcuda buildabl fals spackyaml user either need nvidiadock eg singular execut devic kernel docker window osx mac os window docker run hypervisor alloc much memori default spack packag may fail build due lack memori work around issu consid configur docker instal use host memori case also eas memori pressur parallel build limit parallel configyaml codeblock yaml config build_job copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _bundlepackag bundlepackag bundlepackag repres set packag expect work well togeth collect commonli use softwar librari associ softwar specifi bundl depend creation sure specifi bundl templat use spack creat gener packag templat exampl use follow command creat bundl packag whose class name mybundl codeblock consol spack creat templat bundl name mybundl phase bundlepackag base class provid phase default sinc bundl repres build system url url properti mean sinc packagespecif code fetch version least one version must specifi order packag build copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _autotoolspackag autotoolspackag autotool gnu build system provid buildscript gener run platformindepend configur script come packag gener platformdepend makefil phase autotoolspackag base class come follow phase autoreconf gener configur script configur gener makefil build build packag instal instal packag time autoreconf phase noth packag miss configur script autoreconf gener one phase run codeblock consol configur prefixpathtoinstallationprefix make make check option make instal make installcheck option cours may need add argument configur line import file import file autotoolsbas packag configur script script automat gener autotool gener appropri makefil run warn watch fake autotool packag autotool popular build system mani peopl use classic step instal packag codeblock consol configur make make instal reason develop write configur script noth autotool packag may accept flag autotool packag better use packag base class creat refcustom build system custompackag tell packag use autotool run configur help compar output known autotool packag also look file like configureac configurein makefileam packag dont use autotool arent like file build system depend whether packag requir autotool instal depend sourc code distribut time develop distribut tarbal alreadi contain configur script necessari instal case packag requir autotool depend howev basic rule version control system never commit code gener sourc code repositori like configur script develop typic write autogener configureac script contain configur prefer makefileam script contain build instruct autoconf use convert configureac configur automak use convert makefileam makefilein makefilein use configur gener platformdepend makefil follow diagram provid highlevel overview process figur autoconfautomakeprocess target httpscommonswikimediaorgwindexphpcurid gnu autoconf automak process gener makefil httpscommonswikimediaorgwikifileautoconfautomakeprocesssvg_ jdthood cc bysa httpscreativecommonsorglicensesbysadeeden_ configur script present tarbal need gener one luckili spack alreadi autoreconf phase work default autoreconf phase run codeblock consol autoreconf instal verbos forc aclocalprefixshareacloc case need add argument overrid autoreconf_extra_arg packagepi class scope like codeblock python autoreconf_extra_arg im need add autotool depend packag stabl releas come configur script check commit master branch would want add codeblock python depends_onautoconf typebuild whenmast depends_onautomak typebuild whenmast depends_onlibtool typebuild whenmast typic redund list macro processor packag depend sinc autoconf alreadi depend use custom autoreconf phase case might need replac default implement autoreconf phase one run script interpret exampl bash shell use run autogensh script codeblock python def autoreconfself spec prefix whichbashautogensh patch configur makefilein file case develop might need distribut patch modifi one file use gener configur makefilein case script need regener prefer regener manual use patch creat new patch directli modifi configur way spack use secondari patch addit build system depend arent necessari old autotool helper script autotool base tarbal come helper script configsub configguess respons develop keep file date run everi platform old softwar releas imposs case spack help replac file newer one without add heavi depend automak automat helper script replac current enabl default ppcle aarch known case old script fail target autotoolspackag add build depend gnuconfig lightweight packag newer version helper file spack tri run helper script find releas replac failur helper script gnuconfig opt featur use follow set codeblock python patch_config_fil fals enabl condit differ architectur defin properti make packag depend gnuconfig build depend codeblock depends_ongnuconfig properti def patch_config_filesself return selfspecsatisfi note exot architectur necessari use system provid configsub configguess file case transpar solut mark gnuconfig packag extern nonbuild prefix set directori contain file codeblock yaml gnuconfig buildabl fals extern spec gnuconfigmast prefix usrshareconfigure_fil force_autoreconf whatev reason realli want add origin patch tell spack regener configur use follow set codeblock python force_autoreconf true line tell spack wipe away exist configur script gener new one need singl version done like codeblock python properti def force_autoreconfself return selfvers version find configur flag configur script present next step determin option flag avail flag found run codeblock consol configur help configur display list valid flag separ follow section configur instal directori fine tune instal directori program name x featur system type option featur option packag influenti environ variabl part ignor last section option featur section list flag enabledis featur may interest option packag section often list depend flag need locat environ variabl section list environ variabl build system use pass flag compil linker ad flag configur flag encount want variant option enabledis option pass flag configur call overrid configure_arg function like codeblock python def configure_argsself arg mpi selfspec argsappendenablempi els argsappenddisablempi return arg note explicitli disabl mpi support request import mani autotool packag enabl option default depend found disabl otherwis want spack instal determinist possibl two user instal packag variant goal instal work way see httpswwwlinuxcomnewsbestpracticesautotools__ httpswikigentooorgwikiprojectquality_assuranceautomagic_dependencies__ rational socal automag depend problem default autotool instal packag usr dont want spack automat add prefixpathtoinstallationprefix list configure_arg dont need add helper function may notic autotool flag form enablefoo disablebar withbazprefix withoutbaz sinc flag common spack provid coupl helper function make life easier enable_or_dis autotool flag simpl boolean variant automat gener call enable_or_dis method typic use enabl disabl featur within packag codeblock python variant memcheck defaultfals descriptionmemcheck support debug degrad perform config_argsextendselfenable_or_disablememcheck exampl specifi variant memcheck gener follow configur option codeblock consol enablememcheck with_or_without autotool flag complex variant includ boolean variant multivalu variant automat gener call with_or_without method codeblock python variant schedul valuesdisjoint_set auto alp lsf tm slurm sge loadlevel with_non_feature_valuesauto none descriptionlist schedul support enabl auto let openmpi determin schedulersauto spec config_argsextendselfwith_or_withoutschedul exampl specifi variant schedulersslurmsg gener follow configur option codeblock consol withslurm withsg enable_or_dis actual function equival with_or_without accept argument variant type idiomat autotool packag often follow name convent activation_valu autotool paramet requir option still automat gener use activation_valu argument with_or_without rare enable_or_dis codeblock python variant fabric valuesdisjoint_set auto psm psm verb mxm ucx libfabr with_non_feature_valuesauto none descriptionlist fabric enabl auto let openmpi determin fabricsauto spec config_argsextendselfwith_or_withoutfabr activation_valueprefix activation_valu accept callabl gener configur paramet valu given variant valu special valu prefix tell spack automat use dependen instal prefix common use paramet exampl specifi variant fabricslibfabr gener follow configur option codeblock consol withlibfabricpathtolibfabr variant keyword spack variant configur flag correspond onetoon variant keyword pass with_or_without enable_or_dis exampl codeblock python variantdebug_tool defaultfals config_arg selfenable_or_disabledebugtool variantdebug_tool one variant control multipl flag codeblock python variantdebug_tool defaultfals config_arg selfwith_or_withoutmemcheck variantdebug_tool config_arg selfwith_or_withoutprofil variantdebug_tool condit variant variant condit condit met concret spec with_or_without enable_or_dis method simpli return empti list exampl codeblock python variantprofil config_arg selfwith_or_withoutprofil neither add withprofil withoutprofil version activ overrid final behavior either with_or_without enable_or_dis overridden specif variant valu use multivalu variant variant valu requir atyp behavior codeblock python def with_or_without_verbsself activ version option name withopenib version renam withverb opt verb selfspecsatisfi els openib activ return withoutformatopt return withformatopt selfspecrdmacoreprefix defin with_or_without_verb overrid behavior fabricsverb variant chang configuretim option withopenib older version packag specifi altern depend name codeblock withopenibpathtordmacor configur script subdirectori occasion develop hide sourc code configur script subdirectori like src happen spack wont abl automat detect build system properli run spack creat manual chang packag base class tell spack configur script resid like codeblock python configure_directori src build sourc packag like gcc recommend build softwar differ directori sourc code prevent build pollut done use build_directori variabl codeblock python build_directori spackbuild default spack build packag directori contain configur script build instal target autotool packag usual codeblock consol configur make make instal suffici instal packag howev need run make target exampl build option librari build document add like codeblock python build_target doc install_target instal doc test autotoolsbas packag typic provid unit test via check installcheck target build softwar spack instal testroot spack check presenc check test target makefil run make check instal check installcheck target run make installcheck find one extern document inform autotool build system see httpswwwgnuorgsoftwareautomakemanualhtml_nodeautotoolsintroductionhtml copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _pythonpackag pythonpackag python packag modul special build system document cover everyth youll need know order write spack build recip python librari terminolog python ecosystem number term import understand pypi python packag index httpspypiorg_ python librari host sdist sourc distribut distribut tarbal targz zip file zip contain sourc code packag bdist built distribut distribut wheel whl contain prebuilt librari wheel binari distribut format common python ecosystem file actual zip file contain specif metadata code see document httpspackagingpythonorgenlatestspecificationsbinarydistributionformat_ detail build frontend commandlin tool use build instal wheel exampl includ pip httpspippypaio_ build httpspypabuildreadthedocsio_ instal httpsinstallerreadthedocsio_ build backend librari use defin build wheel exampl includ setuptool httpssetuptoolspypaio__ flit httpsflitreadthedocsio_ poetri httpspythonpoetryorg_ download first step packag python librari figur download vast major python packag host pypi httpspypiorg_ refpref github pypivsgithub download packag search packag name pypi find project page project page usual locat httpspypiorgprojectpackagenam project page download file tab contain download url whenev possibl prefer build spack packag sourc pypi wheel check see project host github see github sourc distribut project page usual homepag andor sourc code link project closedsourc may wheel avail exampl pyazuremlsdk closedsourc download httpspypiiopackagespyaazureml_sdkazureml_sdkpynoneanywhl youv found url download packag run codeblock consol spack creat url creat new packag templat _pypivsgithub pypi vs github mani packag host pypi develop github anoth version control system host servic sourc code download either locat pypi prefer follow reason pypi contain bare minimum number file need instal packag may notic tarbal download pypi checksum tarbal download github develop upload new releas pypi doesnt contain everi file repositori file necessari instal packag pypi tarbal therefor smaller pypi offici sourc packag manag like pip let honest pip much popular spack github tarbal contain file present pypi tarbal caus bug develop may realiz quit time bug file contain pypi tarbal user would notic bug much quickli github releas may beta version develop releas new version packag github may intend user releas also make way pypi assum releas yet readi gener use checksum github releas may chang unfortun develop habit patch releas without increment version number result chang tarbal checksum packag manag like spack use checksum verifi integr download tarbal grind halt checksum known version chang time chang intent contain need bug fix howev sometim chang indic download sourc compromis tarbal contain viru happen must contact develop determin case pypi nice make physic imposs rereleas version packag differ checksum reason use github instead pypi pypi wheel pypi sdist miss file need build packag case pleas add comment url explain pypi sinc pypi commonli use host python librari pythonpackag base class pypi attribut set set pypi use defin homepag url list_url exampl follow codeblock python homepag httpspypiorgprojectsetuptool url httpspypiorgpackagessourcessetuptoolssetuptoolszip list_url httpspypiorgsimplesetuptool equival codeblock python pypi setuptoolssetuptoolszip packag differ homepag list pypi overrid set homepag descript top pypi project page contain short descript packag project descript tab may also contain longer descript packag either use popul packag docstr build backend youv determin basic metadata packag next step determin build backend pythonpackag use pip httpspippypaio_ instal packag pip requir backend actual build packag determin build backend look pyprojecttoml file pyprojecttoml file setuppi setupcfg file assum project use refsetuptool pyprojecttoml file see contain buildsystem section exampl codeblock toml buildsystem requir setuptool wheel buildbackend setuptoolsbuild_meta section two thing requir key list build depend project buildbackend key defin build backend build depend ad depend packag codeblock python depends_onpysetuptool typebuild note pywheel alreadi list build depend pythonpackag base class dont need add unless need specifi specif version requir chang depend type see pep httpswwwpythonorgdevpepspep_ pep httpswwwpythonorgdevpepspep_ inform design pyprojecttoml depend build backend project use variou place runtim depend list distutil introduct setuptool build backend python packag reli builtin distutil librari distutil miss mani featur setuptool build backend offer user encourag use setuptool instead fact distutil deprec python remov python pip actual replac import distutil setuptool packag use distutil instead add build depend setuptool check requirementstxt file may list depend project _setuptool setuptool pyprojecttoml list setuptoolsbuild_meta buildbackend packag setuppi import setuptool packag setupcfg file use setuptool build setuptool replac distutil librari almost exact api depend list setuppi setupcfg file look follow argument python_requir specifi version python requir setup_requir packag usual need buildtim add typebuild install_requir packag requir build instal add typebuild run extras_requir packag option depend enabl addit function add variant option add depend variant fals default tests_requir packag requir run unit test packag depend specifi use typetest depend type howev pypi tarbal rare contain unit test usual reason add see httpssetuptoolspypaioenlatestuserguidedependency_managementhtml inform setuptool handl depend manag see pep httpswwwpythonorgdevpepspepversionspecifiers_ document version specifi setuptool flit actual two possibl buildbackend flit flit flit_cor see pyprojecttoml add build depend packag flit depend list directli pyprojecttoml file older version flit use store info flitini file check either file may contain key like requirespython specifi version python requir depend requir packag requir build instal add typebuild run projectoptionaldepend requiresextra section includ key list option depend need enabl featur add variant option add depend variant fals default see httpsflitreadthedocsioenlatestpyproject_tomlhtml inform poetri like flit poetri also two possibl buildbackend poetri poetry_cor see pyprojecttoml add build depend packag poetri depend list directli pyprojecttoml file depend list toolpoetrydepend section use custom syntax httpspythonpoetryorgdocsdependencyspecificationversionconstraints_ specifi version requir note work differ poetri setuptool flit version start zero wheel python packag closedsourc distribut python wheel exampl pyazuremlsdk download whl file file simpli zip file extract use codeblock consol unzip whl zip file contain setuppi contain metadata file contain inform need write packagepi build recip check line like requirespython requiresdist azuremlcor requiresdist azuremldatasetruntimefus requiresdist azuremltrain requiresdist azuremltrainautomlcli requiresdist azuremlpipelin providesextra accelmodel requiresdist azuremlaccelmodel extra accelmodel providesextra automl requiresdist azuremltrainautoml extra automl requirespython equival python_requir requiresdist equival install_requir providesextra use name option featur variant requiresdist extra foo list depend need featur pass argument setuppi default instal phase suffici instal packag howev instal instruct packag may suggest pass certain flag setuppi call pythonpackag class two techniqu global option flag ad directli setuppi pip run python setuppi instal exampl pypyyaml packag option depend libyaml enabl like codeblock python def global_optionsself spec prefix option libyaml spec optionsappendwithlibyaml els optionsappendwithoutlibyaml return option instal option flag ad directli instal pip run python setuppi instal exampl pypyyaml packag allow specifi directori search libyaml codeblock python def install_optionsself spec prefix option libyaml spec optionsextend speclibyamllibssearch_flag speclibyamlheadersinclude_flag return option test pythonpackag provid coupl option test packag instal process import test packag success built mean built correctli reliabl test whether packag correctli instal attempt import modul get instal get list modul run follow command sourc directori codeblock consol python import setuptool setuptoolsfind_packag numpi numpy_build_util numpycompat numpycor numpydistutil numpydoc numpyfpi numpyfft numpylib numpylinalg numpyma numpymatrixlib numpypolynomi numpyrandom numpytest numpycorecode_gener numpydistutilscommand numpydistutilsfcompil larg complex packag like numpi return long list packag packag like six return empti list pysix instal singl sixpi file python packag lingo packag directori contain file like codeblock none foo__init__pi foobarpi foobazpi wherea modul singl python file pythonpackag base class automat detect packag modul name whatev reason modul name detect wrong provid name overrid import_modul like codeblock python import_modul six sometim list modul name import depend packag built exampl pypyyaml packag libyaml variant enabl build faster optim version librari user choos libyaml yaml librari import user choos libyaml yaml yamlcyaml librari avail express like codeblock python properti def import_modulesself modul yaml libyaml selfspec modulesappendyamlcyaml return modul test often catch miss depend nonrpath librari make sure add modulespackag contain word test like wont end instal directori may requir test depend like pytest instal import test run instal use spack instal testroot time instal use spack test run unit test packag may unit regress test spack run test instal ad test method instal exampl pynumpi add follow check run instal phase codeblock python run_afterinstal on_package_attributesrun_teststru def install_testself working_dirspacktest createtru pythonc import numpi numpytestful verbos test enabl instal ie spack instal testroot note addit inform avail refinstal phase test install_phasetest setup file subdirectori mani cc librari provid option python bind subdirectori tell pip directori build overrid build_directori attribut exampl packag provid python bind python directori use codeblock python build_directori python pythonpackag vs packag use python mani packag make use python packag depend python necessarili pythonpackag choos build system first need select build system spack creat usual whatev reason need manual choos pythonpackag packag contain one follow file pyprojecttoml setuppi setupcfg choos packag name select appropri packag name littl complic choos build system default spack creat prepend py begin packag name detect packag use pythonpackag build system howev occasion packag use pythonpackag shouldnt start py exampl awscli awsparallelclust busco easybuild httpie mercuri scon snakemak thing packag common commandlin tool happen written python someon want instal mercuri spack isnt go realiz written python certainli arent go assum packag call pymercuri reason manual renam packag mercuri likewis occasion packag dont use pythonpackag build system still prepend py exampl pygend pypycairo pypygobject pypygtk pypyqt pypyseri pysip pyxpyb packag primarili use python librari commandlin tool may see cc packag option python languagebind antlr cantera conduit pagmo vtk dont prepend kind packag py doubt think packag use primarili python librari import python script commandlin tool ccfortran program option python modul former prepend py latter extend vs depends_on similar name dilemma slight twist mention refpackag guid packaging_extens extend depends_on similar extend add abil activ packag activ involv symlink everyth instal prefix packag instal prefix python allow user import python modul without add modul pythonpath decid extend depends_on best rule thumb check instal prefix python librari instal prefixlibpythonxysitepackag use extend python librari instal elsewher file get instal resid prefixbin dont use extend symlink packag wouldnt use altern spack pypi hundr thousand packag yet spack pip may perfectli valid altern use spack main advantag spack pip abil compil nonpython depend also build cython version packag link optim blaslapack librari like mkl result calcul run order magnitud faster spack offer signific advantag pythonmanag system instal use tool like flake sphinx need packag nonpython depend like numpi scipi spack valuabl anaconda anoth great altern spack come conda packag manag like spack anaconda capabl compil nonpython depend anaconda contain mani python packag yet spack spack contain mani python packag yet anaconda main advantag spack anaconda abil choos specif compil blaslapack mpi librari spack also better platform support supercomput build optim binari specif microarchitectur hand anaconda offer window support extern document inform python packag see httpspackagingpythonorg inform build instal frontend tool see pip httpspippypaio build httpspypabuildreadthedocsio instal httpsinstallerreadthedocsio inform build backend tool see setuptool httpssetuptoolspypaio flit httpsflitreadthedocsio poetri httpspythonpoetryorg copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _mavenpackag mavenpackag apach maven generalpurpos build system reli makefil build softwar design build manag javabas project phase mavenpackag base class come follow phase build compil code packag jar file instal copi instal prefix default phase run codeblock consol mvn packag instal prefix import file maven packag identifi presenc pomxml file file list depend metadata project may also configur file mvn directori build system depend maven requir mvn execut build project also requir java build runtim base class automat add follow depend codeblock python depends_onjava typebuild run depends_onmaven typebuild pomxml file may see section like codeblock xml requirejavavers versionvers requirejavavers requiremavenvers versionvers requiremavenvers specifi version java maven requir build packag see httpsdocsoraclecommiddlewarecoremavenmaven_versionhtmmaven descript version rang syntax case add codeblock python depends_onjava typebuild depends_onmaven typebuild pass argument build phase default build instal phase suffici instal packag howev may want pass addit flag build phase exampl codeblock python def build_argsself return pdistn dtar dmavenjavadocskiptru extern document inform maven build system see httpsmavenapacheorgindexhtml copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _rocmpackag rocmpackag rocmpackag build system helper packag like cudapackag provid standard variant depend conflict facilit build packag use gpu though amd case find sourc packag suggest set compilersyaml packagesyaml file httpsgithubcomspackspackblobdeveloplibspackspackbuild_systemsrocmpy__ variant packag provid follow variant rocm variant use enabledis build rocm default disabl fals amdgpu_target variant support option specif amd gpu architectur valid valu name gpu eg gfx maintain amdgpu_target properti depend packag defin basic rocm depend includ llvm hip conflict conflict use prevent build known bug issu packag alreadi requir amdgpu_target alway specifi rocm build also defin conflict prevent build amdgpu_target rocm disabl refer conflict httpsspackreadthedocsioenlatestpackaging_guidehtmlhighlightconflictsconflicts__ inform packag conflict method packag provid one custom helper method use build standard amd hip compil flag hip_flag builtin static method return appropri format amdgputarget build option hipcc method must explicitli call creat argument build order use valu usag helper packag ad packag ad base class packag exampl add refcmakepackag cmakepackagebas packag follow codeblock python emphasizelin class myrocmpackagecmakepackag rocmpackag ensur rocm amdgpu_target pass depend depends_onmydeppackag whenrocm val rocmpackageamdgpu_target depends_onmydeppackag amdgpu_targetformatv whenamdgpu_targetformatv def cmake_argsself spec selfspec arg rocm spec set hip macro need build argsextend denable_hipon dhip_root_dirformatspechipprefix rocm_arch specvariantsamdgpu_targetvalu none rocm_arch argsappenddhip_hipcc_flagsamdgputarget formatjoinrocm_arch els ensur build hip disabl argsappenddenable_hipoff return arg assum enable_hip hip_root_dir hip_hipcc_flag macro requir set depend need rocm option mydeppackag need custom flag need build exampl also illustr check rocm variant use selfspec retriev amdgpu_target variant valu use selfspecvariantsamdgpu_targetvalu five packag use rocmpackag januari also use refcudapackag cudapackag worth look packag get idea creat packag support cuda rocm copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _qmakepackag qmakepackag much like autotool cmake qmake buildscript gener design develop qt simplest form spack qmakepackag run follow step codeblock consol qmake make make check option make instal qmake appear standard way specifi instal directori may set environ variabl edit pro file get thing work properli phase qmakepackag base class come follow phase qmake gener makefil build build project instal instal project default phase run codeblock consol qmake make make instal phase overridden packag necessari also check method look check target makefil check target exist user run codeblock consol spack instal testroot qmakepackag spack run make check build phase import file packag use qmake build system identifi presenc projectnamepro file file declar thing like build instruct depend one thing look minqtvers function codeblock none minqtvers mean qt earliest releas work specifi depends_on statement build system depend bare minimum packag use qmake build system need qt depend sinc alway case qmakepackag base class alreadi contain codeblock python depends_onqt typebuild want specifi particular version requir need link qt librari overrid packag codeblock python depends_onqt pass argument qmake need pass argument qmake call overrid qmake_arg method like codeblock python def qmake_argsself return recurs method use pass flag well variabl pro file subdirectori pro file use tell qmake build packag found subdirectori tell spack run phase subdirectori ad follow packag codeblock python build_directori src extern document inform qmake build system see httpdocqtioqtqmakemanualhtml copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _intelpackag intelpackag content intel packag spack spack instal use sever softwar develop product offer intel avail nocost term other requir paid licens share basic step configur instal applic licens manag spack python class intelpackag implement step spack interact intel tool sever rout like packag _rout accept systemprovid tool declar spack extern packag _rout instal product intern packag spack _rout use packag regardless instal rout instal well call client packag spack primari purpos auxiliari rout follow rout would spack packag name _rout make spackinstal intel tool avail outsid spack adhoc use typic spackmanag modulefil document cover rout packag nocost licens intel standalon perform librari product notabl mkl mpi avail use simplifi licens httpssoftwareintelcomenuslicenseintelsimplifiedsoftwarelicense_ sinc fn_ packag spack intelmkl math kernel librari linear algebra fft intelmpi intelmpi implement deriv mpich intelipp primit imag signal dataprocess intelda machin learn data analyt earlier version librari releas paid licens older version licens must avail instal time product compil client packag librari packag work well intel compil requir packag well use compil intel compil invoc command offer custom option simplifi link intel librari sometim consider spack alway use fairli explicit linkag anyway licens packag intel core softwar develop product provid compil analyz optim requir paid licens spack packag intelparallelstudio entir suit compil librari intel subset contain compil intelmpi runtim fn_ todo confirm possibl chang scope mpi compon runtim vs devel current previou clusterprofessionalcompos edit ie presenc download possibl subject licens coverag see disuss pr httpsgithubcomspackspackpullissuecomment_ nb mpi subdirectori indic full mpi sdk present ie mpicc header file directori may well contain mpi runtim mpirun share librari see also issu licens need instal time compil client packag never mere run result binari licens statu given spack packag normal specifi packag code direct like license_requir see reflicens softwar licens intel packag howev class code provid direct exchang forfeit measur oop puriti take care idiosyncasi like histor version depend librari provid standalon packag also includ allencompass intelparallelstudio complic matter bit packag sold edit upperti cluster edit support compil mpi applic henc edit provid mpi virtual packag mention fn_ edit provid support run mpi applic edit form lead part version number spack intel packag discuss differ primarili numer version number seen spack packag exampl codeblock consol spack info intelparallelstudio prefer version profession http safe version profession http compos http cluster http full studio suit capabl compil mpi applic current requir gb disk space instal see section instal step packag compil libraries_ detail instruct need save disk space instal time could instal intel compilersonli subset gb librari packag need exampl intelmpi gb intelmkl gb _intelunrelatedpackag unrel packag follow packag use intel instal class intelpackag discuss intelgputool test suit lowlevel tool linux direct render manag httpsenwikipediaorgwikidirect_rendering_manager_ intelmkldnn math kernel librari deep neural network cmakepackag intelx x machin instruct encoderdecod inteltbb standalon version intel thread build block note tbb runtim version includ intelmkl develop version provid packag intelparallelstudio edit intel subset configur spack use intel licens wish integr licens intel product spack extern packag rout _ assum licens configur place work fn_ case skip section integr intel tool instal extern spack_ plan spack instal licens product rout _ intel product instal spack run underneath must access licens either provid licens server licens file instal may abl locat licens alreadi configur system must configur spack provid either server locat licens file authorit inform intel licens see httpssoftwareintelcomenusfaqlicens httpssoftwareintelcomenusarticleshowdoimanagemylicens point exist licens server instal configur licens server outsid scope spack assum system administr licens server run licens server offer valid licens intel packag interest access licens user id run spack awar differ instal configur licens server b configur client softwar use server socal float licens concern b process obtain licens server temporari use call check licens client applic intel packag instal compil need know host name port number one licens server may queri fn_ follow one three method point client softwar float licens server httpssoftwareintelcomenusarticleslicensingsettinguptheclientfloatinglicense_ ideal licens administr alreadi implement one use unchang spack look environ variabl intel_license_fil file optintellicensesl contain server hostnam hostid_or_ani portnum use_serv relev token among possibl other use_serv line intend specif client one server line give network address find preexist optintellicensesl file intel_license_fil environ variabl set even load relev modulefil ask licens administr server address place global licens file within spack directori tree shown spackmanag file__ instal standalon licens file purchas userspecif licens follow intel instruct httpssoftwareintelcomenusfaqlicensinglicensemanagement_ activ serial number download result licens file need request file resent httpssoftwareintelcomenusarticlesresendlicensefile_ intel licens file text file contain token proprietari flexlm format whose name end lic intel instal compil look licens file sever locat run place licens one follow mean order decreas prefer default directori instal licens file directori optintellicens write permiss directori inspect intel tool therefor prefer configur need creat directori yet exist file name either keep download name use anoth suitabl plain yet descript name end lic adjust file permiss access licens user directori given environ variabl use default directori system alreadi set environ variabl intel_license_fil independ spack fn_ necessari write permiss place licens file one directori mention environ variabl adjust file permiss match licens user tip system yet set use environ variabl intel_license_fil could start use spack instal stage licens tool subsequ client packag would howev bind alway set variabl manner across updat reinstal perhap accommod addit may difficult long run recommend attempt start use variabl sole spack _spackmanag file spackmanag file first time spack encount intel packag requir licens initi spackglob intelspecif licens file templat instruct comment bring editor fn_ spack even work licens elsewher system proceed extern configur licens leav newli templat file contain comment close editor need touch file configur standalon licens copi content download licens file open file save close editor use licens server ie float network licens alreadi configur elsewher system suppli licens server address form server use_serv line begin file fn_ format shown section point exist licens server_ save file close editor revisit manual edit file prior subsequ instal attempt find spack_rootetcspacklicensesintelintel spack place symbol link file directori licens intel binari instal kept templat unchang intel tool simpli ignor _integrateexternalintel integr intel tool instal extern spack section discuss rout _ introduct site alreadi use intel tool especi licens one like version alreadi instal system especi time spack introduc use make previous instal tool avail use spack vari depend type tool integr extern compil spack use extern intel compil must tell find use present section document aspect involv compilersyaml case long absolut path aspect actual relat rout _ requir explicitli state compil spec compon form foo intel foo intelcompilervers instal client packag alter spack compil default packagesyaml see section select intel compil select intel compilers__ detail integr new set extern instal intel compil spack follow section refcompil configur compilerconfig briefli prepar shell environ like would use compil normal ie typic modul load shell sourc command use spack compil find make spack awar compil creat new entri suitabl scope possibl new compilersyaml file could certainli creat compil entri manual errorpron due indent differ data type involv intel compil need use system nativ gcc compil gcc system clang maco provid certain function notabl support c provid differ gcc compil intel tool gener set persist flag invoc intel compil locat compilersyaml entri defin intel compil use text editor chang one follow modul tag add gcc modul list flag tag add cflag cxxflag fflag keyvalu entri consult exampl refcompil configur compilerconfig refvendorspecif compil configur vendorspecificcompilerconfigur spack document done valid compil definit run spack compil info intelcompilervers replac compilervers version defin awar gcc integr persist compil flag also affect advanc third method modulefil provid intel compil could benefit user outsid spack implicitli integr specif gcc version via compil flag environ variabl hope via sneaki extra path addit next visit section select intel compilers_ learn tell spack use newli configur compil _intelintegratingexternallibrari integr extern librari configur extern librarytyp packag oppos compil file spack_rootetcspackpackagesyaml spackpackagesyaml follow spack document refextern packag secexternalpackag similar compilersyaml packagesyaml file defin packag extern spack term spack spec resolv spec via either path modul token specif preinstal packag version system sinc intel tool gener need environ variabl interoper convey mere path specif modul token sensibl use resolv spacksid spec modulefil gener manag outsid spack purview spack load intern transient correspond spec call upon compil client packag unlik compil spack find compil spec gener entri exist new compilersyaml file spack offer command gener entir new packagesyaml entri must creat new entri text editor though command spack config scope edit packag help select proper file see section refconfigur scope configurationscop explan differ file section refbuild custom buildset specif exampl packagesyaml file system administr provid modul preinstal intel tool could well ask instal multipl copi intel tool wont happen spack pictur bound stretch disk space patienc thin system administr still new modul perhap best follow next section instal intel tool within spack__ instal tool sole within spack follow exampl integr packag embodi hypothet extern modulefil intelmkl spack packag intelmkl codeblock consol spack config edit packag make sure file begin codeblock yaml packag adapt follow exampl sure maintain indent codeblock yaml content intelmkl extern spec intelmkl archlinuxcentosx_ modul intelmkl spec intelmkl archlinuxcentosx_ modul intelmkl version number intelmkl spec defin correspond file directori name intel use product adopt declar within spack packag repositori inspect version known current spack instal codeblock consol spack info intelmkl use version number extern packag packag known intern use clariti strictli necessari moreov packagesyaml entri go beyond intern known version _compilerneutralpackag note spack spec exampl contain compil specif intent intel librari packag use unmodifi differ compil slightli advanc exampl illustr provid refvari basicvari use buildabl fals direct prevent spack instal version variant name packag normal intern mechan codeblock yaml packag intelparallelstudio extern spec intelparallelstudioclust mklmpiipptbbdaal archlinuxcentosx_ modul intel spec intelparallelstudioclust mklmpiipptbbdaal archlinuxcentosx_ modul intel buildabl fals one addit exampl illustr use prefix instead modul use extern modulefil avail suitabl codeblock yaml packag intelparallelstudio extern spec intelparallelstudioclust mklmpiipptbbdaal prefix optintel spec intelparallelstudioclust mklmpiipptbbdaal prefix optintel buildabl fals note intel packag discuss directori valu prefix entri must highlevel typic versionless instal directori use intel product instal directori typic accumul variou product version amongst spack select correct versionspecif product directori base version spec compon path defin background detail see refextern packag secexternalpackag instal intel tool within spack section discuss rout _ introduct system yet intel tool instal alreadi instal version undesir spack instal tool like regular spack packag appropri pre postinstal configur use compil andor librari instal client packag _intelinstallstudio instal step packag compil librari packag intelparallelstudio intel subset former manyinon product contain compil set librari packag whose scope depend edit gener product gear toward shell environ somewhat involv integr packag full extent spack note instal libraryonli packag like intelmkl intelmpi intelda follow next section intelinstalllibs__ instead review section configur spack use intel licenses_ _intelcompileranticip instal version intelparallelstudio provid intel compil version yet declar spack follow preparatori step recommend determin compil spec new intelparallelstudio packag provid follow packag version combin last two digit version year liter zero version compon immedi follow year packag version compil spec provid intelparallelstudioeditionyyyyu intelyyu exampl packag intelparallelstudioclust provid compil spec intel _configcompileranticip b add new compil section newli anticip version end compilersyaml file suitabl scope exampl run codeblock consol spack config scopeuserlinux edit compil append stub entri codeblock yaml compil target x_ operating_system cento modul spec intel path cc usrbintru cxx usrbintru f usrbintru fc usrbintru replac version determin preced step exact content path matter yet path must exist temporari stub requir intelparallelstudio packag instal intel compil packag go provid instal rather arbitrari system compil path given cc cxx f fc must exist never use build anyth instal intelparallelstudio reason stub intelparallelstudio also provid mpi mkl packag concret spec spack ensur strong consist use compil across depend fn_ instal packag foo mkl intel make spack look packag mkl intel provid intelparallelstudiomkl intel intelparallelstudiomkl gcc failur may result addit instal mkl intelmpi even intelparallelstudio depend packag _verifycompileranticip verifi compil version provid new studio version would use expect compil client packag codeblock consol spack spec zlib intel version match explicitli state anticip compil version eg codeblock consol spack spec zlib intel problem review correct compil compilersyaml entri still stub form alreadi complet would reinstal instal new studio packag use spack regular instal command may wise provid anticip compil see verifycompileranticipated__ explicit concret element codeblock consol spack instal intelparallelstudioclust intel follow step integr extern compilers_ tell spack minutia actual use compil client packag place stub entri compilersyaml file time edit fill particular path give full path actual compil binari icc ifort etc locat within spack instal tree unsightli length fn_ determin full path c compil adapt run codeblock consol find spack locat intelparallelstudioclust name icc type f ls get hit intel ia almost certainli want use intel variant icpc ifort compil locat directori icc make sure specifi modul intelparallelstudioclusterintelhash hash short hash display run spack find l intelparallelstudioclust version adapt accordingli ensur correct complet environ intel compil get load run modern version intel compil may otherwis see issu miss librari pleas also note modul name must exactli match name return modul avail shown exampl use modul andor cflag token specifi suitabl accompani gcc version help pacifi picki client packag ask c standard recent support systemprovid gcc libstdcso specifi custom variant exampl vtune may want add prefer variant packag configur intelparallelstudio packag describ refconcretizationprefer otherwis specifi variant everytim intelparallelstudio use mkl fftw mpi implement avoid pull differ variant set intel compil default use spack instead usual gcc follow section select intel compilers_ tip compil packag like intelparallelstudio easili gb size tax disk space avail temporari file small busi restrict system like virtual machin intel instal stop report insuffici space installsh silent silentcfg miss critic prerequisit enough disk space first remedi clean spack exist stage area codeblock consol spack clean stage retri instal larg packag spack normal clean stage directori certain failur may prevent error persist tell spack use altern locat temporari file run df h identifi altern locat system tell spack use locat stage one follow run spack environ variabl tmpdir alter singl command exampl use home directori codeblock consol tmpdirhomespackstag spack instal exampl use bourn shell syntax adapt shell need altern custom spack build_stag refconfigur set configoverrid codeblock consol spack config edit config append codeblock yaml config build_stag homeuserspackstag duplic config line alreadi present adapt locat preced exampl retri instal larg packag _intelinstalllib instal step libraryonli packag instal libraryonli packag like intelmkl intelmpi intelda follow step given packag contain compil follow previou section intelinstallstudio__ instead pre product releas review section configur spack use intel licenses_ inspect packag spec specifi explicit compil necessari eg codeblock consol spack spec intelmpi spack spec intelmpi intel check packag use compil flavor version expect instal packag normal within spack use spec previou command ie gener specif need codeblock consol spack instal intelmpi spack instal intelmpi intel prepar new packag use client packag follow select librari satisfi virtual packages_ debug note trigger wall addit diagnost use spack option eg codeblock consol spack debug v instal intelmpi debug option also use instal client packag see use intel tool spack instal client packages__ confirm integr intel tool spack notabl mkl mpi spack subdirectori instal intelpackag contain besid spack usual archiv item copi silentcfg file pass intel instal codeblock consol grep compon intelmpihashspacksilentcfg componentsal instal error occur spack normal clean remov partial instal target directori direct spack keep use keepprefix eg codeblock consol spack instal keepprefix intelmpi must howev remov partial instal prior subsequ instal attempt otherwis intel instal behav incorrectli use intel tool spack instal client packag final section pertain rout _ introduct intel tool instal within spack extern intern packag use intend instal client packag _selectintelcompil select intel compil select intel compil compil client packag like compil spack one follow mean request intel compil explicitli client spec eg codeblock consol spack instal libxcintel altern request intel compil implicitli concret prefer configur order compil appropri packagesyaml file either clientpackagespecif entri compil list consult spack document configur packag prefer httpsspacktutorialreadthedocsioenlatesttutorial_configurationhtmlconfiguringpackagepreferences_ refconcret prefer concretizationprefer exampl etcspackpackagesyaml might simpli contain codeblock yaml packag compil intel gcc specif state partial full compil version number exampl codeblock yaml packag compil intel intel gcc gcc gcc _intelvirtualpackag select librari satisfi virtual packag intel packag whether integr spack extern packag instal within spack call upon satisfi requir client packag librari avail differ provid relev virtual packag intel bla lapack scalapack mpi integr rout intel packag option refvari basicvari alter list virtual packag satisfi spackextern packag activ variant combin default declar spack packag repositori spec declar packagesyaml needless say match compon actual present extern product instal likewis spackintern packag activ variant determin persist instal time default repositori spec select instal intel packag satisfi virtual packag request select client packag edit packagesyaml file custom either specif entri provid dictionari whose key virtual packag whose valu spack spec satisfi virtual packag order decreas prefer learn provid set see spack tutori configur packag prefer httpsspacktutorialreadthedocsioenlatesttutorial_configurationhtmlconfiguringpackagepreferences_ section refconcret prefer concretizationprefer exampl follow fairli minim exampl packagesyaml show exclus use standalon intelmkl packag linear algebra virtual packag spack intelmpi prefer mpi implement provid still chosen perpackag basi codeblock yaml packag provid mpi intelmpi bla intelmkl lapack intelmkl scalapack intelmkl access intelparallelstudioclust edit use instead codeblock yaml provid mpi intelparallelstudiompi note mpi vs mkl bla intelparallelstudiomkl lapack intelparallelstudiomkl scalapack intelparallelstudiomkl instal intelparallelstudio within spack rout _ make sure follow special instal step intelcompileranticipation__ ensur virtual packag match compil provid use intel tool explicit depend proper instal detail special step requir client packag specif thu deliber request intel packag depend one target use case spack _usingmkltip tip configur client packag use mkl math kernel librari mkl provid sever intel packag current intelparallelstudio variant mkl activ default standalon intelmkl differ provid packag virtual mkl packag declar spack use mklspecif api client packag declar depend mkl rather specif provid like intelmkl declar depend either absolut condit base variant packag might declar codeblock python exampl absolut condit depend depends_onmkl depends_onmkl whenmkl depends_onmkl whenfftwmkl mklroot environ variabl part document api set stage client packag instal avail spack packag code client code use mkl provid bla lapack scalapack packag provid mkl also provid narrow virtual bla lapack scalapack packag see relev refpackag guid section blas_lapack_scalapack introduct portabl use virtual packag construct preprocessor linker option string packag configur code use packag function header lib conjunct util function follow class pyclassllnlutilfilesystemfilelist pyclassllnlutilfilesystemheaderlist pyclassllnlutilfilesystemlibrarylist tip use construct like prefixinclud prefixlib intel implement bla lapack scalapack exampl refautotoolspackag autotoolspackag use libsld_flag transform librari file list linker option pass configur codeblock python def configure_argsself arg argsappendwithblass selfspecblaslibsld_flag argsappendwithlapack selfspeclapacklibsld_flag tip even though ld_flag return string multipl word use quot option like withbla spack pass configur without invok shell likewis refmakefilepackag makefilepackag similar packag use autotool may need provid includ link option use command line environ variabl exampl gener option string form idir use codeblock python selfspecblasheadersinclude_flag gener linker option ldir llibnam use codeblock python selfspecblaslibsld_flag see refmakefilepackag makefilepackag gener refpackag guid blas_lapack_scalapack background exampl footnot fn strictli speak version onward fn packag intel intent mpi variant sinc meant small nativ instal alway add mpi runtim compon follow default defin download packag even intelparallelstudio mpi request intelparallelstudio mpi class function pyfuncintelpackagepset_compon includ intelmpi intelimb list compon pattern pass intel instal instal extend pattern word impli globlik resolv packag name actual present product bom side effect pattern approach accommod occasion packag name chang eg captur intelmpirt intelmpirt fn could extern instal succeed otherwis fn accord intel document supposedli way instal product use network licens even flexlm server run httpssoftwareintelcomenusarticleslicensingsettinguptheclientfloatinglicense_ specifi licens form portserverhost intel_license_fil environ variabl mean specifi network licens requir licens server fn despit name intel_license_fil hold sever divers entri either directori presum contain lic file file name network locat form porthost linux mac item separ linux mac fn said editor turn vi better posit know use fn comment line flexlm file indic first nonwhitespac charact line gener allow anywher file report httpsgithubcomspackspackissues_ howev server use_serv line must preced comment line fnx name compon intel compil spec separ differ namespac name spack packag intelparallelstudio intel latter provid former fn spack close coupl instal packag compil necessit detour instal intelparallelstudio larg limit provid virtual packag singl compil heavili favor recommend instal intel parallel studio outsid spack integrateexternalintel__ declar spack packagesyaml compilerless spec compilerneutralpackage__ fn effort convinc spack use shorter path warn alter name scheme mean spack lose track packag instal far said time right kind custom defin new set compil relev tunabl set install_tre locat configyaml refse doc configyaml set hash length installpathschem also configyaml refqv configyaml want set hash length refmodul file modulesproject spack produc project modulesyaml copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _makefilepackag makefilepackag primit build system packag use plain makefil makefil simpl write small project usual requir edit makefil set platform compilerspecif variabl phase makefilepackag base class come phase edit edit makefil build build project instal instal project default edit noth overrid replac hardcod makefil variabl build instal phase run codeblock consol make make instal import file main file matter makefilepackag makefil file name one follow way gnumakefil work gnu make makefil common makefil makefil also includ configur file check includ direct makefil build system depend spack assum oper system valid make util instal alreadi dont need add depend make howev packag use gnumakefil develop recommend use gnu make add depend gmake codeblock python depends_ongmak typebuild type makefil packag work involv packag softwar use makefil involv overrid replac hardcod variabl mani packag make mistak hardcod compil usual gcc intel fine happen use particular compil spack design work compil need ensur case depend makefil design common strategi use set overrid appropri variabl environ variabl make multipl type assign oper httpswwwgnuorgsoftwaremakemanualmakehtmlsetting_ makefil use assign variabl way overrid variabl edit makefil overrid commandlin howev makefil use assign honor environ variabl sinc spack alreadi set cc cxx f fc wont need worri set variabl variabl need set edit method codeblock python def editself spec prefix envprefix prefix envblaslib specblaslibsld_flag cbench httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackagescbenchpackagepy_ good exampl simpl packag esmf httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackagesesmfpackagepy_ good exampl complex packag commandlin argument makefil ignor environ variabl next thing tri commandlin argument overrid build_target attribut dont need access spec like codeblock python build_target cccc need access spec creat properti like codeblock python properti def build_targetsself spec selfspec return cccc blaslibformatspecblaslibsld_flag cloverleaf httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackagescloverleafpackagepy_ good exampl packag use strategi edit makefil makefil plain stubborn ignor commandlin variabl way ensur packag build correctli directli edit makefil spack provid filefilt class filter_fil method help exampl codeblock python def editself spec prefix makefil filefiltermakefil makefilefilterrscc cc spack_cc makefilefilterrscxx cxx spack_cxx makefilefilterrsf f spack_f makefilefilterrsfc fc spack_fc stream httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackagesstreampackagepy_ good exampl packag involv edit makefil set appropri variabl config file complex packag often involv makefil includ configur file configur file primarili compos variabl relat compil platform locat depend name librari sinc config file depend compil platform often see entir directori exampl common compil architectur use exampl help determin possibl valu use config file long contain one two variabl need modifi use techniqu edit config file howev end need modifi variabl may easier write new file scratch variabl independ dictionari work well store variabl codeblock python def editself spec prefix config cc cc make make bla spec configblas_lib specblaslibsjoin openmakeinc w inc key config incwrit nformatkey configkey elk httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackageselkpackagepy_ good exampl packag use dictionari store configur variabl order variabl import may easier store list codeblock python def editself spec prefix config install_dir formatprefix include_dir install_dirinclud library_dir install_dirlib openmakeinc w inc var config incwritenformatvar hpl httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackageshplpackagepy_ good exampl packag use list store configur variabl variabl watch follow list common variabl watch first two section implicit variabl httpswwwgnuorgsoftwaremakemanualhtml_nodeimplicitvariableshtml_ defin make alway use name rest userdefin variabl may vari packag packag compil includ variabl cc cxx f f fc well variabl relat mpi compil wrapper like mpicc friend compil flag includ variabl specif compil like cflag cxxflag fflag fflag fcflag cppflag variabl often hardcod contain flag specif certain compil flag dont work everi compil may want consid filter variabl enabl disabl featur includ variabl like mpi openmp pic debug flag often requir creat variant either build without mpi support exampl flag often compilerdepend replac appropri compil flag selfcompileropenmp_flag selfcompilerpic_flag platform flag flag control type architectur execut compil watch variabl like plat arch depend look variabl sound like could use locat depend java_hom jpeg_root zlibdir also watch variabl control link lib ldflag includ variabl need set instal prefix depend correct linker flag link depend instal prefix makefil instal target need way know instal default mani packag instal usr usrloc sinc mani spack user wont sudo privileg imper packag instal proper prefix look variabl like prefix instal makefil subdirectori everi packag place makefil root packag tarbal makefil subdirectori like src tell spack locat like codeblock python build_directori src manual instal everi makefil includ instal target case overrid default instal method manual instal packag codeblock python def installself spec prefix mkdirprefixbin installfoo prefixbin install_treelib prefixlib extern document inform read write makefil see httpswwwgnuorgsoftwaremakemanualmakehtml copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _custompackag custom build system builtin build system meet need vast major packag packag provid custom build script guid intend follow use case packag softwar custom build system ad support new build system want add support new build system good place start look definit build system guid focus mostli spack build system work guid use perl httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackagesperlpackagepy_ cmake httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackagescmakepackagepy_ packag exampl perl build system handwritten configur shell script cmake bootstrap instal packag requir custom build system base class packag belong builtin build system spack alreadi support inherit packag base class packag simpl base class singl phase instal packag simpl may abl simpli write instal method get job done howev packag complex instal involv multipl step add separ phase mention next section creat new build system base class inherit packagebas superclass build system spack phase import concept spack build system support idea phase build system defin set phase necessari instal packag usual follow sort configur build instal guidelin phase may miss combin anoth phase look perl packag youll see codeblock python phase configur build instal similarli cmake defin codeblock python phase bootstrap build instal look cmake exampl tell spack packagebas class run bootstrap build instal function order defin method phase phase_arg function look perl see defin configur method codeblock python def configureself spec prefix configur executableconfigur configureselfconfigure_arg also correspond configure_arg function handl argument pass configur like autotoolspackag compar build instal phase pretti simpl codeblock python def buildself spec prefix make def installself spec prefix makeinstal cmake packag look similar bootstrap function instead configur codeblock python def bootstrapself spec prefix bootstrap executablebootstrap bootstrapselfbootstrap_arg def buildself spec prefix make def installself spec prefix makeinstal boostrap_arg function determin correct bootstrap flag use run_beforerun_aft occasion may want run extra step either given phase appli custom build system exist build system well may need patch file gener configur instal extra file addit make instal copi instal prefix run_befor run_aft come python decor allow write function call particular phase exampl perl see codeblock python run_afterinstal def install_cpanmself spec selfspec cpanm spec working_dirjoin_pathcpanm cpanm perl specperlcommand perlmakefilepl make makeinstal extra step automat instal cpanm addit base perl instal on_package_attribut run_beforerun_aft logic discuss becom particularli power combin on_package_attribut decor decor allow condit run certain function depend attribut packag common exampl condit test mani unit test prone failur even noth wrong instal unfortun nonport unit test test suppos fail common would like instead alway run unit test instal spack let user condit run test testroot flag want defin function would condit run flag set would use follow line codeblock python on_package_attributesrun_teststru test let put everyth togeth add unit test option run instal packag perl packag see codeblock python run_afterbuild on_package_attributesrun_teststru def testself maketest guess run make test build packag test request specif custom build system ad exist build system well warn order decor matter follow order codeblock python run_afterinstal on_package_attributesrun_teststru work expect howev revers order codeblock python on_package_attributesrun_teststru run_afterinstal test alway run regardless whether testroot request see httpsgithubcomspackspackissu inform ideal everi packag spack sort test ensur built correctli packag author make sure happen ad packag softwar develop list command test instal pleas add test packagepi inform form packag test refer refcheck instal checking_an_instal copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _wafpackag wafpackag like scon waf generalpurpos build system reli makefil build softwar phase wafpackag base class come follow phase configur configur project build build project instal instal project default phase run codeblock consol python waf configur prefixpathtoinstallationprefix python waf build python waf instal standard waf command found run codeblock consol python waf help phase provid phase function run codeblock consol python waf jjob phase job number parallel job build phase also phase_arg function pass argument call function empti configur phase automat add prefixpathtoinstallationprefix dont need add configure_arg test wafpackag also provid test installtest method run build instal phase respect default phase noth overrid run packagespecif unit test exampl pypycairo httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackagespypycairopackagepy_ packag use codeblock python def installtestself working_dirtest pytest whichpytest pytest import file waf packag come custom waf build script written python script contain instruct build project packag also come wscript file file use overrid default configur build instal phase custom waf project also allow develop overrid default waf help messag check file find use inform depend minimum version support build system depend wafpackag requir waf build waf need creat waf script sinc waf python script python need build project wafpackag add follow depend automat codeblock python depends_onpython typebuild waf support python pass argument waf previous mention phase come phase_arg function use pass argument particular phase exampl need pass argument build phase use codeblock python def build_argsself spec prefix arg selfrun_test argsappendtest return arg list valid option found run waf help extern document inform waf build system see httpswafiobook copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _octavepackag octavepackag octav build system instal packag phase octavepackag base class singl phase instal instal packag default phase run follow command codeblock consol octav eval pkg prefix prefix pkg instal archive_fil bewar uninstal implement moment uninstal packag via spack also need manual uninstal octav via pkg uninstal package_nam find octav packag octav packag list httpsoctavesourceforgeiopackagesphp depend usual homepag packag list depend ie depend octav struct inform avail descript file root archiv extern document inform octav build system see httpsoctaveorgdocvinstallingandremovingpackageshtml copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _cmakepackag cmakepackag like autotool cmake widelyus buildscript gener design kitwar cmake popular build system new c c fortran project mani older project switch well unlik autotool cmake gener build script builder make ninja visual studio etc therefor crossplatform wherea autotool unixonli phase cmakepackag base class come follow phase cmake gener makefil build build packag instal instal packag default phase run codeblock consol mkdir spackbuild cd spackbuild cmake dcmake_install_prefixpathtoinstallationprefix make make test option make instal flag pass cmake default includ flag set build type flag locat depend cours may need add argument import file cmakebas packag identifi presenc cmakeliststxt file file defin build flag pass cmake invoc well link instruct familiar cmake prove use determin depend depend version requir one thing look cmake_minimum_requir function codeblock cmake cmake_minimum_requiredvers mean cmake earliest releas work specifi depends_on statement cmakebas packag may also contain cmakeliststxt subdirectori modular help manag complex build hierarch fashion sometim nest cmakeliststxt requir addit depend mention toplevel file there also usual cmake cmake directori contain addit macro find script etc may prove use determin depend version requir build system depend everi packag use cmake build system requir cmake depend sinc alway case cmakepackag base class alreadi contain codeblock python depends_oncmak typebuild need specifi particular version requir overrid packag codeblock python depends_oncmak typebuild find cmake flag get list valid flag pass cmake run follow command directori contain cmakeliststxt codeblock consol cmake lah cmake start check compil depend eventu begin list build option youll notic build option top prefix cmake_ safe ignor option spack alreadi set includ flag need locat depend rpath librari set instal directori set build type rest flag one consid ad packag often includ flag enabledis support certain featur locat specif depend one thing youll notic make cmake differ autotool cmake understand build flag hierarchi certain flag display unless parent flag select exampl flag specifi lib includ directori packag might appear unless cmake found depend look may need manual specifi certain flag explor full depth support build flag check cmakeliststxt ad flag cmake add addit flag cmake call simpli overrid cmake_arg function follow exampl defin valu flag whatev enable_broken_featur detect_hdf thread without methspackbuild_systemscmakecmakepackagedefin methspackbuild_systemscmakecmakepackagedefine_from_vari helper function codeblock python def cmake_argsself arg dwhateverstringsomevalu selfdefineenable_broken_featur fals selfdefine_from_variantdetect_hdf hdf selfdefine_from_variantthread true thread return arg spack support cmake defin condit variant whenev condit variant met define_from_vari simpli return empti string cmake simpli ignor empti command line argument exampl follow codeblock python variantexampl defaulttru def cmake_argsself return selfdefine_from_variantexampl exampl gener cmake dexampleon exampl met result cmake spec version gener cmake autotool buildscript gener tool gener makefil use build softwar packag cmake actual support multipl gener makefil anoth common gener ninja switch ninja gener simpli add codeblock python gener ninja cmakepackag default unix makefil switch ninja gener make sure add codeblock python depends_onninja typebuild packag well asid shouldnt need anyth els spack automat detect use ninja run codeblock consol cmake g ninja ninja ninja instal spack current support unix makefil ninja valid gener simpl add support altern gener inform cmake gener see httpscmakeorgcmakehelplatestmanualcmakegeneratorshtml cmake_build_typ everi cmakebas packag accept dcmake_build_typ flag dictat level optim use order ensur uniform across packag cmakepackag base class add variant control codeblock python variantbuild_typ defaultrelwithdebinfo descriptioncmak build type valuesdebug releas relwithdebinfo minsizerel howev everi cmake packag accept four option grep cmakeliststxt file see default valu miss replac exampl dealii httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackagesdealiipackagepy_ packag overrid default variant codeblock python variantbuild_typ defaultdebugreleas descriptionth build type build valuesdebug releas debugreleas inform cmake_build_typ see httpscmakeorgcmakehelplatestvariablecmake_build_typehtml cmakeliststxt subdirectori occasion develop hide sourc code cmakeliststxt subdirectori like src happen spack wont abl automat detect build system properli run spack creat manual chang packag base class tell spack cmakeliststxt resid like codeblock python root_cmakelists_dir src note path rel root extract tarbal build_directori default current directori build sourc default spack build everi cmakepackag spackbuild subdirectori whatev reason would like build differ subdirectori simpli overrid build_directori like codeblock python build_directori mybuild build instal target cmake packag usual codeblock consol cmake make make instal suffici instal packag howev need run make target exampl build option librari build document add like codeblock python build_target doc install_target instal doc test cmakebas packag typic provid unit test via test target build softwar testroot spack check presenc test target makefil run make test want run differ test instead simpli overrid check method extern document inform cmake build system see httpscmakeorgcmakehelplatest copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _rpackag rpackag like python r builtin build system r build system remark uniform welltest make one easiest build system creat new spack packag phase rpackag base class singl phase instal instal packag default phase run follow command codeblock consol r cmd instal librarypathtoinstallationprefixrlibrlibrari find r packag vast major r packag host cran comprehens r archiv network look particular r packag search cran packagenam quickli find want isnt cran tri bioconductor anoth common r repositori purpos tutori walk rcaret httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackagesrcaretpackagepy_ exampl search cran caret quickli find look httpscranrprojectorgpackagecaret httpscranrprojectorg main cran websit howev cran also httpscloudrprojectorg site automat redirect mirror around world httpscloudrprojectorgmirrorshtml_ stabil perform reason use httpscloudrprojectorgpackagecaret search packag sourc find download url latest releas use url spack creat creat new packag packag name first thing youll notic spack prepend r front packag name spack separ r packag extens rest packag spack without would end packag name collis frequent would like instanc alreadi packag ape rape curl rcurl gmp rgmp jpeg rjpeg openssl ropenssl uuid ruuid xt rxt mani popular program written cc later port r separ project descript first thing youll need add new packag descript top homepag caret list follow descript classif regress train misc function train plot classif regress model first line short descript titl second line long descript case descript one line often descript sever line spack make use short long descript convent use creat r packag homepag look bottom page youll see link pleas use canon form httpscranrprojectorgpackagecaret link page pleas uphold wish cran admin use httpscloudrprojectorgpackagecaret homepag instead httpscloudrprojectorgwebpackagescaretindexhtml latter may chang without notic url previous mention download url latest releas found search packag sourc homepag list url cran maintain singl webpag contain latest releas everi singl packag httpscloudrprojectorgsrccontrib cours soon new releas come version use packag longer avail url move archiv directori search old sourc find httpscloudrprojectorgsrccontribarchivecaret specifi url latest releas packag longer abl fetch version soon new releas come get around add archiv directori list_url bioconductor packag bioconductor packag set similar way cran packag import distinct bioconductor packag found httpsbioconductororg bioconductor packag r packag follow packag scheme cran packag differ bioconductor version releas scheme use bioconductor packag instal allow specif minimum version r well restrict depend packag possibl nativ r packag system spack replic extra featur thu bioconductor packag spack need manag group updat order maintain packag consist bioconductor anoth key differ previou version packag avail avail site programmat set thu list_url attribut use howev packag also avail git repositori branch correspond bioconductor releas thu alway possibl retriev version packag correspond bioconductor releas simpli fetch branch correspond bioconductor releas packag repositori reason spack bioconductor r packag use git repositori commit respect branch use version attribut packag cran bioc attribut much like pypi attribut python packag due fact r packag obtain specif repositori possibl set shortcut attribut use set homepag url list_url git exampl follow cran attribut codeblock python cran caret equival codeblock python homepag httpscloudrprojectorgpackagecaret url httpscloudrprojectorgsrccontribcaret_targz list_url httpscloudrprojectorgsrccontribarchivecaret likewis follow bioc attribut codeblock python bioc biocvers equival codeblock python homepag httpsbioconductororgpackagesbiocvers git httpsgitbioconductororgpackagesbiocvers build system depend extens r ecosystem packag obvious depend r build run normal would use depends_on express r packag use extend extend similar depends_on add addit featur abil activ packag symlink r instal directori sinc everi r packag need rpackag base class contain codeblock python extendsr take close look homepag caret look depend section youll notic caret depend r add packag like codeblock python depends_onr typebuild run r depend r packag often small follow classic unix philosophi one thing well modular usual depend sever packag may find singl packag hundr depend luckili r packag welldocu list depend follow section depend import linkingto far spack concern depend type correspond typebuild run dont worri detail curiou mean httpsgithubcomspackspackissu pretti good summari depend requir caus r packag attach api expos user import load packag packag import packag access api expos user user call libraryfoo attach packag foo packag depend function one packag call directli bar conflict user also specifi pkgabar pkgbbar distinguish histor depend suggest henc confus name today mayb depend would name attach linkingto perfect recent extens discuss apiabi among thing rdevel mail list among skill r develop httpsstatethzchpipermailrdeveldecemberhtml httpsstatethzchpipermailrdeveljanuaryhtml packag also fourth section suggest option rarelyus depend user might find use add depend packag r packag alreadi enough depend ad option depend realli slow concret process also introduc circular depend fifth rare use section enhanc mean packag use option depend anoth packag packag list depend core recommend noncor packag look depend import linkingto notic differ type packag core packag look caret homepag youll notic depend dont link packag like method stat util packag part core r distribut tie r version instal basic consid r essenti r would make sens updat via cran would basic get differ version r thu theyr updat r updat find list core librari httpsgithubcomwchrsourcetreetrunksrclibrari recommend packag instal r option call withrecommendedpackag flag caus r instal includ recommend packag legaci term histor reason quit tie core r distribut develop r core team peopl close relat r core distribut know packag inde distribut via cran theyr distribut via cran also updat r version releas spack explicitli add withoutrecommendedpackag flag prevent instal packag due way spack handl packag activ symlink packag r instal directori preexist recommend packag caus conflict alreadyexist file could either includ recommend packag spack requir instal withrecommendedpackag could instal r let user choos version packag want instal chose latter sinc packag commonli distribut r system mani develop may assum packag exist fail list depend watch find list recommend packag httpsgithubcomwchrsourceblobtrunksharemakevarsmk noncor packag packag neither core recommend packag host cran alon packag type see specif version requir exampl lattic pleas add inform depend codeblock python depends_onrlattic typebuild run nonr depend packag depend nonr librari link check rstringi httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackagesrstringipackagepy_ packag exampl httpscloudrprojectorgpackagestringi search text systemrequir see icuc option nonr depend list make sure add depend default depend type suffic pass argument instal r packag provid addit flag pass r cmd instal often locat nonr depend rrmpi httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackagesrrmpipackagepy_ exampl flag link mpi librari pass instal command overrid configure_arg like codeblock python def configure_argsself mpi_nam selfspecmpinam type mpi support valu openmpi lam mpich mpich cray mpi_nam openmpi rmpi_typ openmpi elif mpi_nam mpich rmpi_typ mpich els rais installerrorunsupport mpi type return withrmpitypeformatrmpi_typ withmpiformatspecmpiprefix similar configure_var function overridden pass variabl build altern spack cran host r packag spack mani user may need advanc featur spack may prefer instal r packag normal way codeblock consol r installpackagesggplot r search cran ggplot packag instal necessari depend want updat instal r packag latest releas use codeblock consol updatepackagesask fals work great user internet access airgap cluster find easier let spack build download mirror instal packag spack realli shine abil instal nonr depend link properli someth r instal mechan handl extern document inform instal r packag see httpsstatethzchrmanualrdevellibraryutilshtmlinstallhtml inform write r packag see httpscloudrprojectorgdocmanualsrreleaserextshtml particular httpscloudrprojectorgdocmanualsrreleaserextshtmlpackagedepend great explan differ depend import linkingto copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _sconspackag sconspackag scon generalpurpos build system reli makefil build softwar scon written python handl build link far build system go scon nonuniform provid common framework develop write build script build script vari drastic develop add subcommand like codeblock consol scon clean scon build scon test scon instal other dont add subcommand configur option specifi variabl command line other dont phase previous mention scon allow develop add subcommand like build instal default instal usual look like codeblock consol scon scon instal facilit sconspackag base class provid follow phase build build packag instal instal packag packag develop often add unit test invok scon test scon check spack provid test method handl sinc dont know one packag develop chose test method noth default easili overridden like codeblock python def testself sconscheck import file scon packag identifi sconstruct file file handl everyth set subcommand commandlin option link compil one thing look ensuresconsvers function codeblock none ensuresconsvers mean scon earliest releas work specifi depends_on statement build system depend bare minimum packag use scon build system need scon depend sinc alway case sconspackag base class alreadi contain codeblock python depends_onscon typebuild want specifi particular version requir overrid packag codeblock python depends_onscon typebuild find avail option first place start look list valid option build packag scon help packag like kahip httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackageskahippackagepy_ dont bother overwrit default scon help messag isnt use packag like serf httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackagesserfpackagepy_ print list valid commandlin variabl codeblock consol scon help scon read sconscript file check gnucompat c compilery scon done read sconscript file prefix directori instal pathtoprefix default usrloc actual usrloc libdir directori instal architectur depend librari pathtolibdir default prefixlib actual usrlocallib apr path aprconfig apr instal area pathtoapr default usr actual usr apu path apuconfig apr instal area pathtoapu default usr actual usr openssl path openssl instal area pathtoopenssl default usr actual usr zlib path zlib instal area pathtozlib default usr actual usr gssapi path gssapi instal area pathtogssapi default none actual none debug enabl debug info strict compil warn yesno default fals actual fals apr_stat enabl use static compil apr yesno default fals actual fals cc command name path c compil default none actual gcc cflag extra flag c compil spacesepar default none actual lib extra librari pass linker eg llibrari llibrari space separ default none actual none linkflag extra flag linker spacesepar default none actual cppflag extra flag c preprocessor space separ default none actual none use scon h help commandlin option advanc packag like cantera httpsgithubcomspackspackblobdevelopvarspackreposbuiltinpackagescanterapackagepy_ use scon help print list subcommand codeblock consol scon help scon read sconscript file scon build script cantera basic usag scon help print descript userspecifi option scon build compil cantera languag interfac use default option scon clean delet file creat build cantera sudo scon instal instal cantera sudo scon uninstal uninstal cantera scon test run test previous pass result may chang scon testreset reset pass statu test scon testclean delet file creat run test scon testhelp list avail test scon testnam run test name name scon command dump dump state scon environ screen instead command eg scon build dump debug purpos scon sampl compil c fortran sampl scon msi build window instal msi cantera scon sphinx build sphinx document scon doxygen build doxygen document youll notic cantera provid scon help subcommand run scon help print list valid commandlin variabl pass argument scon know argument project accept add packag build phase done overrid build_arg like codeblock python def build_argsself spec prefix arg prefixformatprefix zlibformatspeczlibprefix debug spec argsappenddebugy els argsappenddebugno return arg sconspackag also provid install_arg function overrid pass addit argument scon instal compil wrapper default scon build packag separ execut environ doesnt pass environ variabl user environ even chang path propag unless packag develop particularli troublesom spack compil wrapper depend environ variabl manag depend link flag mani case scon packag compat spack compil wrapper link must done manual first check list valid option anyth relat environ variabl exampl cantera follow option codeblock none env_var string environ variabl propag scon either string comma separ list variabl name eg ld_library_pathhom default ld_library_pathpythonpath case cantera use env_varsal allow us use spack compil wrapper dont see option relat environ variabl tri use spack compil wrapper pass spack_cc spack_cxx spack_fc via cc cxx fc argument respect pass build see error messag like codeblock none spack compil must run spack input spack_prefix miss youll know packag isnt compat spack compil wrapper case youll use path actual compil store selfcompilercc friend note may involv pass addit flag build locat depend task normal done compil wrapper serf exampl packag limit extern document inform scon build system see httpsconsorgdocumentationhtml copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _inteloneapipackag inteloneapipackag content oneapi packag spack spack instal use intel oneapi product may either use spack instal oneapi tool use intel installers_ instal may use tool directli use spack build packag tool spack python class inteloneapipackag base class use inteloneapicompil inteloneapimkl inteloneapitbb class implement oneapi packag see refpackagelist full list avail oneapi packag use spack list oneapi inform specif packag spack info packagenam intel longer releas new version parallel studio use spack via refintelpackag compon found oneapi exampl build packag icx exampl build patchelf icc icx compil instal spack instal oneapi compil spack instal inteloneapicompil add compil compilersyaml spack use spack compil add spack locat inteloneapicompilerscompilerlatestlinuxbinintel spack compil add spack locat inteloneapicompilerscompilerlatestlinuxbin verifi compil avail spack compil list inteloneapicompil packag includ famili compil intel icc icpc ifort intel classic compil oneapi icx icpx ifx intel new gener compil base llvm build patchelf spack packag icc spack instal patchelfintel build icx spack instal patchelfoneapi use oneapi mpi satisfi virtual depend hdf packag work compat mpi implement build hdf intel oneapi mpi spack instal hdf mpi inteloneapimpi use extern instal oneapi spack also use oneapi tool manual instal intel installers_ procedur configur spack use extern compil librari differ compil use compil add inform instal compilersyaml user suffici spack compil add optinteloneapicompilerlatestlinuxbinintel spack compil add optinteloneapicompilerlatestlinuxbin adapt path instal tool default locat ad compil use instal inteloneapicompil packag anoth option manual add configur compilersyaml describ refcompil configur compilerconfig librari want spack use mkl instal without spack default locat add follow spackpackagesyaml adjust version appropri inteloneapimkl extern spec inteloneapimkl prefix optinteloneapi use oneapi tool instal spack spack conveni way instal configur compil libari even intend build spack packag want build makefil project use spackinstal oneapi compil use spack configur environ spack load inteloneapicompil build cxxicpx make also use spackinstal librari exampl spack load inteloneapimkl updat environ cpath library_path environ variabl build applic mkl inform section describ basic use oneapi especi chang compar parallel studio see refintelpackag inform refintelvirtualpackag refintelunrelatedpackag refintelintegratingexternallibrari refusingmkltip _intel instal httpssoftwareintelcomcontentwwwusendevelopdocumentationinstallationguideforinteloneapitoolkitslinuxtophtml copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _perlpackag perlpackag much like octav perl languagespecif build system phase perlpackag base class come phase overridden configur configur packag build build packag instal instal packag perl packag common modul use modul instal extutilsmakemak extutilsmakemak modul sound like modul design gener makefil identifi presenc makefilepl file follow instal step codeblock consol perl makefilepl install_basepathtoinstallationprefix make make test option make instal modulebuild modulebuild modul pureperl build system identifi presenc buildpl file follow instal step codeblock consol perl buildpl install_bas pathtoinstallationprefix build build test option build instal makefilepl buildpl file exist packag spack use makefilepl default packag use differ modul perlpackag need extend support perlpackag automat detect build step use shouldnt much work packag develop side get thing work find perl packag perl modul host cpan comprehens perl archiv network need find packag xmlparser exampl search cpan xmlparser cpan page version check link latest releas make sure latest version packag name use spack creat creat new perl packag spack automat prepend perl front packag name help keep perl modul separ packag name scheme use languag extens like python r descript cpan page short descript name longer descript descript use whichev think use still succinct homepag topright corner cpan page youll find permalink packag use instead current url doesnt contain version number alway link latest releas url havent found alreadi download url right side page permalink search download build system depend everi perlpackag obvious depend perl build runtim perlpackag contain codeblock python extendsperl packag requir specif version perl specifi although newer version perl includ extutilsmakemak modulebuild core modul may want add depend perlextutilsmakemak perlmodulebuild anyway mani peopl add perl extern packag want build work properli packag use makefilepl build add codeblock python depends_onperlextutilsmakemak typebuild packag use buildpl build add codeblock python depends_onperlmodulebuild typebuild perl depend download url find depend link take page list depend packag packag list core modul dont need ad depend direct depend ad dont add depend depend ad depend depend packag pass argument configur packag nonperl depend often use commandlin variabl specifi instal directori pass argument makefilepl buildpl overrid configure_arg like codeblock python def configure_argsself expat selfspecexpatprefix return expatlibpathformatexpatlib expatincpathformatexpatinclud altern spack need maintain stack perl modul user dont want add spack good altern cpanm perl alreadi instal system come cpan execut instal cpanm run follow command codeblock consol cpan appcpanminu instal perl modul want run codeblock consol cpanm modulenam obvious command run root privileg furthermor cpanm capabl instal nonperl depend need instal home directori need instal modul nonperl depend spack better option extern document find inform instal perl modul sourc httpwwwperlmonksorgnode_id gener perl modul instal instruct found httpwwwcpanorgmodulesinstallhtml copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _sippackag sippackag sip tool make easi creat python bind c c librari origin develop creat pyqt python bind qt toolkit use creat bind c c librari sip compris code gener python modul code gener process set specif file gener c c code compil creat bind extens modul sip python modul provid support function automat gener code phase sippackag base class come follow phase configur configur packag build build packag instal instal packag default phase run codeblock consol python configurepi bindir destdir make make instal import file sip packag come custom configurepi build script written python script contain instruct build project build system depend sippackag requir sever depend python need run configurepi build script run result python librari qt need provid qmake command sip also need build packag depend automat ad via base class codeblock python extendspython depends_onqt typebuild depends_onpysip typebuild pass argument configurepi phase come phase_arg function use pass argument particular phase exampl need pass argument configur phase use codeblock python def configure_argsself spec prefix return nopythondbu list valid option found run python configurepi help test packag success built mean built correctli reliabl test whether packag correctli instal attempt import modul get instal get list modul run follow command sitepackag directori codeblock consol python import setuptool setuptoolsfind_packag pyqt pyqtqtcor pyqtqtgui pyqtqthelp pyqtqtmultimedia pyqtqtmultimediawidget pyqtqtnetwork pyqtqtopengl pyqtqtprintsupport pyqtqtqml pyqtqtquick pyqtqtsvg pyqtqttest pyqtqtwebchannel pyqtqtwebsocket pyqtqtwidget pyqtqtxml pyqtqtxmlpattern larg complex packag like pypyqt return long list packag packag may return empti list packag instal singl foopi file python packag lingo packag directori contain file like codeblock none foo__init__pi foobarpi foobazpi wherea modul singl python file sippackag base class automat detect modul name whatev reason modul name detect wrong provid name overrid import_modul like codeblock python import_modul pyqt test often catch miss depend nonrpath librari make sure add modulespackag contain word test like wont end instal directori may requir test depend like pytest instal test trigger run spack instal testroot run spack test run instal finish extern document inform sip build system see httpswwwriverbankcomputingcomsoftwaresipintro httpswwwriverbankcomputingcomstaticdocssip httpswikipythonorgmoinsip copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _mesonpackag mesonpackag much like autotool cmake meson build system meant fast user friendli possibl gnome goal port modul use meson build system phase mesonpackag base class come follow phase meson gener ninja file build build project instal instal project default phase run codeblock consol mkdir spackbuild cd spackbuild meson prefixpathtoinstallationprefix ninja ninja test option ninja instal phase overridden packag necessari also check method look test target build file test target exist user run codeblock consol spack instal testroot mesonpackag spack run ninja test build phase import file packag use meson build system identifi presenc mesonbuild file file declar thing like build instruct depend one thing look meson_vers key get pass project function codeblock none emphasizelin projectgtk c version default_opt buildtypedebugoptim warning_level need c glib need gnuspecif featur httpsgithubcommesonbuildmesonissu c_stdgnu meson_vers licens lgplv mean meson earliest releas work specifi depends_on statement build system depend bare minimum packag use meson build system need meson ninja depend sinc alway case mesonpackag base class alreadi contain codeblock python depends_onmeson typebuild depends_onninja typebuild need specifi particular version requir overrid packag codeblock python depends_onmeson typebuild depends_onninja typebuild find meson flag get list valid flag pass meson run follow command directori contain mesonbuild codeblock consol meson setup help pass argument meson need pass argument meson call overrid meson_arg method like codeblock python def meson_argsself return warnlevel method use pass flag well variabl note mesonpackag base class alreadi defin variant buildtyp default_librari strip map default meson argument mean dont specifi extern document inform meson build system see httpsmesonbuildcomindexhtml copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _multiplepackag multipl build system quit frequent packag chang build system one version next exampl small project use singl makefil build may requir autotool handl increas number file need compil packag use autotool may switch cmake window support case becom bit challeng write singl build recip packag spack sever way handl spack subclass new build system overrid phase need prefer subclass packag implement instal need creat separ cmake autotool etc packag build system renam old packag legaci creat new packag move old packag legaci repositori creat new packag drop older version support older build system option prefer demonstr document option issu concret shouldnt use option also dont support two build system option work old version longer need option prefer make easier drop old build system entir exact syntax packag depend build system need support coupl common exampl makefil autotool let say follow packag codeblock python class foomakefilepackag version sha def editself spec prefix filter_filecc cc spack_cc makefil def installself spec prefix install_tre prefix packag subclass refmakefilepackag three phase edit noth default build run make default instal run make instal default case instal phase need overridden makefil instal target also modifi makefil use spack compil wrapper default build phase chang start version want use autotool build instead refautotoolspackag four phase autoreconf configur script alreadi exist configur run configur prefix default build run make default instal run make instal default version need support packag would look simpl codeblock python class fooautotoolspackag version sha def configure_argsself return enableshar case use default method phase overrid configure_arg specifi addit flag pass configur want write singl packag support version would look someth like codeblock python class fooautotoolspackag version sha version sha deprecatedtru def configure_argsself return enableshar remov follow version drop def patchself filter_filecc cc spack_cc makefil def autoreconfself spec prefix pass def configureself spec prefix pass def installself spec prefix install_tre prefix interest thing note ad deprecatedtru version signifi version deprec shouldnt use howev user still reli version still build fine move content edit phase patch function sinc autotoolspackag doesnt edit phase way step execut move patch function alway get run autoreconf configur phase becom noop sinc old makefilebas build system doesnt use ignor phase build foo decor use overrid phase older version default method use foo new spack releas come version everyth comment safe delet result written packag version scratch autotool cmake let say follow packag codeblock python class barautotoolspackag version sha def configure_argsself return enableshar packag subclass refautotoolspackag four phase autoreconf configur script alreadi exist configur run configur prefix default build run make default instal run make instal default case use default method phase overrid configure_arg specifi addit flag pass configur start version want use cmake build instead refcmakepackag three phase cmake run cmake default build run make default instal run make instal default version need support packag would look simpl codeblock python class barcmakepackag version sha def cmake_argsself return selfdefinebuild_shared_lib true case use default method phase overrid cmake_arg specifi addit flag pass cmake want write singl packag support version would look someth like codeblock python class barcmakepackag version sha version sha deprecatedtru def cmake_argsself return selfdefinebuild_shared_lib true remov follow version drop def configure_argsself return enableshar def cmakeself spec prefix configureprefix prefix selfconfigure_arg interest thing note ad deprecatedtru version signifi version deprec shouldnt use howev user still reli version still build fine sinc cmake autotool similar need overrid cmake phase use default build instal phase overrid cmake run configur older version configure_arg remain decor use overrid phase older version default method use bar new spack releas come version everyth comment safe delet result written packag version scratch multipl build system version transit one build system anoth develop often support multipl build system time spack use singl build system singl version decid build system use particular version take follow thing account develop explicitli state one build system prefer anoth use one one build system consid experiment anoth consid stabl use stabl build system otherwis use newer build system develop prefer build system use chang time newer build system becom stablerecommend drop support old build system older version packag dont support newer build system tempt simpli delet packag significantli reduc packag complex make build recip much easier maintain howev packag spack user may reli older version recommend approach first support build system demonstr refdeprec deprec version reli old build system remov version phase need overridden next spack releas three build system rare case packag may chang build system multipl time exampl packag may start makefil switch autotool switch cmake logic use extend number build system exampl codeblock python class bazcmakepackag version sha cmake version sha autotool version sha makefil def cmake_argsself return selfdefinebuild_shared_lib true remov follow version drop def configure_argsself return enableshar def cmakeself spec prefix configureprefix prefix selfconfigure_arg remov follow version drop def patchself filter_filecc cc spack_cc makefil def cmakeself spec prefix pass def installself spec prefix install_tre prefix addit exampl write new packag often help see exampl exist packag incomplet list exist spack packag chang build system packag previou build system new build system amber custom cmake arpackng autotool cmake atk autotool meson blast none autotool dyninst autotool cmake evtgen autotool cmake fish autotool cmake gdkpixbuf autotool meson glib autotool meson glog autotool cmake gmt autotool cmake gtkplu autotool meson hpl makefil autotool interproscan perl maven jasper autotool cmake kahip scon cmake kokko makefil cmake kokkoskernel makefil cmake leveldb makefil cmake libdrm autotool meson libjpegturbo autotool cmake mesa autotool meson meti none cmake mpifileutil autotool cmake mupars autotool cmake mxnet makefil cmake nest autotool cmake neuron autotool cmake nsimd cmake nsconfig opennurb makefil cmake optionallit none cmake plasma makefil cmake preseq makefil autotool protobuf autotool cmake pypygobject autotool python singular autotool makefil spanlit none cmake ssht makefil cmake stringviewlit none cmake superlu makefil cmake superludist makefil cmake uncrustifi autotool cmake packag support multipl build system bit confus write dont hesit open issu draft pull request ask advic spack develop copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _cudapackag cudapackag differ packag cudapackag repres build system instead goal simplifi unifi usag cuda packag provid mixinclass httpsenwikipediaorgwikimixin_ find sourc packag httpsgithubcomspackspackblobdeveloplibspackspackbuild_systemscudapy__ variant packag provid follow variant cuda variant use enabledis build cuda default disabl fals cuda_arch variant support option specif architectur valid valu maintain cuda_arch_valu properti numer charact equival comput capabl version eg version provid valu affect associ cuda depend compil conflict gpu comput capabl version list httpsdevelopernvidiacomcudagpu conflict conflict use prevent build known bug issu base cuda conflict includ packag may want add softwar exampl packag requir cuda_arch specifi cuda enabl add follow conflict packag termin build attempt suitabl messag codeblock python conflictscuda_archnon whencuda msgcuda architectur requir similarli softwar support version properti could add conflict packag version exampl suppos softwar work cuda comput capabl version prior sm add follow code display custom messag user attempt build codeblock python unsupported_cuda_arch valu unsupported_cuda_arch conflictscuda_archformatvalu whencuda msgcuda architectur supportedformatvalu method packag provid one custom helper method use build standard cuda compil flag cuda_flag builtin static method return list command line flag chosen cuda_arch valu flag intend pass cuda compil driver ie nvcc method must explicitli call creat argument build order use valu usag helper packag ad packag ad base class packag exampl add refcmakepackag cmakepackagebas packag follow codeblock python emphasizelin class mycudapackagecmakepackag cudapackag def cmake_argsself spec selfspec arg cuda spec set cuda macro need build argsappenddwith_cudaon cuda_arch_list specvariantscuda_archvalu cuda_arch cuda_arch_list cuda_arch none argsappenddcuda_flagsarchsm_formatcuda_arch els ensur build cuda disabl argsappenddwith_cudaoff return arg assum with_cuda cuda_flag flag requir need custom option need build exampl also illustr check cuda variant use selfspec retriev cuda_arch variant valu list use selfspecvariantscuda_archvalu packag use cudapackag januari lot exampl choos get idea use packag copyright lawrenc livermor nation secur llc spack project develop see toplevel copyright file detail spdxlicenseidentifi apach mit _rubypackag rubypackag like perl python r rubi build system instal rubi gem phase rubypackag base class provid follow phase overridden build build everyth need instal instal instal everyth build directori packag come gemspec file phase run codeblock consol gem build gemspec gem instal gem packag come rakefil file phase run codeblock consol rake packag gem instal gem packag come prepackag gem file build phase skip instal phase run codeblock consol gem instal gem standard gem command found run codeblock consol gem help command packag distribut gem file file download expandfals option version direct build phase automat skip import file build sourc rubi packag identifi presenc follow file gemspec rakefil setuprb yet support howev rubi packag releas sourc code releas gem file file extract use codeblock consol gem unpack gem descript gemspec file may contain someth like codeblock rubi summari implement asciidoc text processor publish toolchain descript fast open sourc text processor publish toolchain convert asciidoc content html docbook format either use descript spack packag homepag gemspec file may contain someth like codeblock rubi homepag httpsasciidoctororg use offici homepag spack packag build system depend rubi packag requir rubi build runtim reason base class contain codeblock python extendsrubi gemspec file may contain someth like codeblock rubi required_ruby_vers ad spack packag use codeblock python depends_onrubi typebuild run rubi depend instal packag gem read gemspec file order determin depend packag depend yet instal gem download instal may sound conveni spack reli behavior two reason spack need abl instal packag airgap network internet connect gem cant download packag depend explicitli list everi depend packagepi spack know download ahead time duplic instal depend may occur spack support activ rubi extens involv symlink packag instal prefix rubi instal prefix packag miss depend depend instal instal directori packag tri activ packag depend may caus problem packag alreadi activ reason must alway explicitli list depend although document may list packag depend often develop assum peopl use gem wont worri alway check gemspec file find true depend check follow clue gemspec file add_runtime_depend packag requir instal add_depend alia add_runtime_depend add_development_depend packag option depend use develop ad depend packag extern document inform rubi packag see httpsguidesrubygemsorg packagesspackio packag index rest api directori provid docker recip spack packag index httpspackagesspackio merg develop dockerhub build new imag spackpackagesspackio configur httpsclouddockercomuspackrepositorydockerspackpackagesspackiobuildsedit rest api api simpl filebas json index specif packag queri via uri syntax httpspackagesspackioapifirstletterpackagenamejson return http statu code json file valid packag content spack list format version_json http statu code packag name exampl httpspackagesspackioapiaadiosjson httpspackagesspackioapippypandasjson also full index avail httpspackagesspackioapipackagesjson current downstream depend eg httpsshieldsio servic httpsshieldsiocategoryvers httpsgithubcombadgesshieldspul local build test execut local spack sourc root directori codeblock bash docker build spackpackagesspackiolatest f sharespackdockerpackageindexdockerfil startup local http server httplocalhost via codeblock bash docker run p spackpackagesspackiolatest