titl salsa python packag construct synthet quasar absorpt line catalog astrophys hydrodynam simul tag python astronomi simul spectra author name brendan boyd orcid affili name devin w silvia affili name brian w oshea affili name jason tumlinson affili name molli peepl affili name nichola earl affili affili name depart physic astronomi michigan state univers index name depart comput mathemat scienc engin michigan state univers index name nation superconduct cyclotron laboratori michigan state univers index name space telescop scienc institut index name depart physic astronomi john hopkin univers index date juli bibliographi paperbib introduct hot low densiti ga surround galaxi call circumgalact medium cgm vital understand structur evolut galaxi tumlinson voit diffus natur cgm make difficult observ direct detect emiss much understand come studi absorpt line featur spectra light distant quasar pass interven galaxi howk lehner singl quasar sightlin contain inform rel small portion ga halo individu galaxi observ astronom conduct survey collect mani sightlin creat larg absorb catalog contain inform varieti absorpt line found individu sightlin catalog creat statist pictur cgm prove invalu understand dynam cgm complement observ survey hydrodynam simul also becom increasingli import studi cgm effort made appli absorpt line analysi simul data smith egan peepl trident python packag built yt turk extract artifici sightlin refer lightray code simul data gener synthet spectra sightlin hummel analys use trident provid opportun explor simul observ perspect facilit make direct comparison observ studi way trident provid new avenu studi simul howev straightforward streamlin process replic observ absorb catalog yet readili avail statement need order fill void introduc python packag salsa synthet absorpt line surveyor applic salsa packag gener synthet absorb catalog studi lightray andor spectra gener use trident salsa provid autom pipelin process larg number lightray extract absorb inform catalog analysi one larg benefit studi synthet catalog abil directli compar observ catalog give new insight data well help facilit collabor simul observ summari two separ method made avail extract absorb spectacl method use python packag spectacl fit voigt profil synthet spectra gener trident see autoreffig spectacl method provid tradit absorpt line inform eg doppler broaden equival width thu creat synthet absorb catalog similar made observ studi second method call spice simpl procedur iter cloud extract method novel method use cell level data simul find contigu group cell meaning contribut absorpt line featur synthet spectra iter process isol region along lightray highest number densiti valu return region observ detect column densiti individu absorb see autoreffig detail document method provid direct access inform contain simul eg temperatur veloc metal turn inform provid spectral absorpt line analysi alon plot gener use foggi simul data peepl top plot show number densiti profil vi along length lightray shade region found spice method repres absorb would extract bottom plot show synthet spectra lightray dash line repres two absorpt line spectacl fit spectra labelfigspice_spectacle_figpng method advantag disadvantag depend research goal spectacl extract absorb way much analog observ studi thu easili use make applestoappl comparison simul observ spice method hand retain much addit inform provid simul data allow indepth analysi properti absorb relat simul galaxi whole synthet absorb catalog gener analysi data proceed observ perspect coupl analysi unprocess simul data bring power insight cgm function observ might provid limit view complex medium current research effort foggi collabor leverag salsa studi vi absorb cgm work assuredli provid discoveri better connect cuttingedg research done comput observ astronom studi cgm httpstridentreadthedocsioenlatest httpsytprojectorg httpsspectaclepyreadthedocsioenlatest httpssalsareadthedocsioenlatest httpfoggiesci acknowledg work support stsci grant hstara nsf grant aag aag author would also like thank member foggi collabor develop trident softwar packag cameron hummel britton smith contribut help make salsa packag realiti refer salsa build statushttpstraviscicombiboydsalsasvgbranchmasterhttpstraviscicombiboydsalsa document statushttpsreadthedocsorgprojectssalsabadgeversionlatesthttpssalsareadthedocsioenlatestbadgelatest binderhttpsmybinderorgbadge_logosvghttpsmybinderorgvghbiboydsalsamasterfilepathnotebooksfexample_notebookipynb doihttpsjosstheojorgpapersjossstatussvghttpsdoiorgjoss doihttpszenodoorgbadgesvghttpszenodoorgbadgelatestdoi salsa synthet absorpt line surveyor applic python tool construct synthet absorb catalog hydrodynam galaxi simul salsa heavili util ythttpsytprojectorg access simul data tridenthttptridentprojectorg creat light rayssight line gener synthet spectra observ studi gener larg absorb catalog studi absorpt line spectra distant quasar light pass interven galaxi salsa gener similar catalog cosmolog galact simul allow research studi simul observ perspect give new insight data well help facilit comparison collabor simul observ salsa allow us dip galact simul start chip away mani unknown univers joss paperhttpsjosstheojorgpapersjoss publish salsa recommend read overview packag possibl use use salsa project ask cite paper detail inform instal run salsa read doc herehttpssalsareadthedocsio instal depend instal use pip run command instal stabl version pip instal astrosalsa python import salsa want instal latest develop version depend instal clone repositori run command git clone httpsgithubcombiboydsalsagit cd salsa pip instal e python import salsa set code instal depend help instal depend enivronmentyml includ repositori first instal condahttpsdocscondaioprojectscondaenlatestuserguideinstallindexhtml abl creat conda environ via conda env creat file environmentyml conda activ salsaenv note need gcc compil instal often alreadi machin detail descript see instal guidehttpssalsareadthedocsioenlatestinstallationhtml also includ tip want instal depend get start annot exampl go herehttpssalsareadthedocsioenlatestannotated_examplehtml launch interact jupyt host binder herehttpsmybinderorgvghbiboydsalsamasterfilepathnotebooksfexample_notebookipynb note notebook may take time load gener build repositori want explor easiest way get start use salsagenerate_catalog take simul dataset number light rayssightlin make directori save light ray list ion option paramet creat number light ray extract absorb ion pandasdatafram return inform absorb analyz contribut guidelin contribut welcom opensourc project built mani opensourc project contribut take mani form includ contribut code test experi offer idea differ featur interest contribut contact us directli boydbrendanstonybrookedu add issu github page _apirefer api refer automodapi salsa noinheritancediagram automodapi salsautil noinheritancediagram _instal instal instal salsa salsa built quit differ packag best instal instal salsa go refdependenciesinstal detail best stabl version depend alreadi instal use pip instal packag pip instal astrosalsa develop version latest develop version follow instruct depend alreadi instal next need clone repositori httpsgithubcombiboydsalsa_ enter main directori use pip instal packag git clone httpsgithubcombiboydsalsagit cd salsa pip instal e check depend instal instal might miss sinc somewhat complic environ best instal depend beforehand note instal depend gcc compil need instal problem machin rais error your set go python import salsa _dependenciesinstal instal depend may instal depend may instal alreadi ie numpi matplotlib depend environ make instal easier advis use conda conda environ instal _condainstal conda environ one easiest way make sure right depend use conda environ repositori enivronmentyml file packag necessari run salsa creat enivron first need instal conda httpsdocscondaioprojectscondaenlatestuserguideinstallindexhtml_ run follow git clone httpsgithubcombiboydsalsagit cd salsa conda env creat file environmentyml conda activ salsaenv abl painlessli instal salsa describ note instal mpipi use conda may caus problem alreadi mpi librari alreadi instal conda tri instal one alreadi mpi librari best use pip see refinstallmpipi detail _manual_instal manual instal depend differ prefer method instal depend welcom go rout see environmentyml andor setuppi github repo httpsgithubcombiboydsalsa_ specif packag need adviceguid instal coupl trickier packag _installyt instal yt yt instal differ way one easier way use conda first instal conda httpsdocscondaioprojectscondaenlatestuserguideinstallindexhtml_ run conda instal c httpuseytwith_conda c condaforg yt full detail differ way instal yt see yt document httpsytprojectorgdoc_ _installtrid instal trident trident instal via pip instal trident first time trident run though download ioniz tabl recommend run trident right pip instal also test make sure trident run properli python import trident tridentverifi detail see trident document httpstridentreadthedocsio_ _installmpipi instal mpipi mpipi httpsmpipyreadthedocsioenstableindexhtml_ packag enabl use mpi parallel python salsa use split lightray creation absorb extract across multipl processor becom necessari larg number lightray mpipi instal either use pip conda want pip instal mpipi need mpi librari alreadi instal like openmpi httpswwwopenmpiorg_ otherwis pip instal mpipi want use conda instal mpipi need care may problem mpi librari alreadi instal otherwis conda instal mpipi _absorberextract absorb extract main purpos salsa extract absorb lightray allow us creat synthet absorpt line catalogssurvey analog fashion real observ survey two method salsa extract absorb spice method look directli cell level data simul spectacl method use python packag spectacl httpsspectaclepyreadthedocsio_ fit voigt profil synthet spectra gener trident httpstridentreadthedocsio_ anoth opensourc python packag _spicemethod spice method spice simpl procedur iter cloud extract method look trident lightray attempt extract absorb identifi contigu group cell along ray contribut observ featur absorpt spectra algorithm iter process detail like easier comprehend explan see refdetailedspicemethod rundown algorithm function extract absorb light ray quick rundown spice method find cutoff number densiti column densiti contain cell number densiti threshold defin interv encompass cell meet cutoff mask interv along lightray found previou step repeat step find cutoff base column densiti left defin interv take interv found sensibl combin togeth combin overlap interv averag veloc interv within threshold set classsalsaabsorberextractorvelocity_r paramet default km repeat process start step total column densiti left lightray ie interv less lowest detect column densiti set classsalsaabsorberextractormin_absorb paramet default logn though vari base ion final check whether interv meet detect column densiti threshold return interv threshold defin absorb _spectaclemethod spectacl method util trident featur creat synthet spectra light ray object well spectacl abil fit line spectra detail spectacl work specif run fit see spectacl line find httpsspectaclepyreadthedocsioenlatestline_findinghtml_ spectacl fit httpsspectaclepyreadthedocsioenlatestfittinghtml_ _detailedspicemethod detail spice exampl want better understand spice method work real life exampl break step method see work see paramet may impact algorithm lightray look number densiti vi along length goal find regionsinterv cell along lightray highest column densiti thu meaning contribut absorpt spectra lightray imag _staticannotated_schematicraypng first step find cutoff valu number densiti cell cutoff make column densiti isol region high number densiti see two main region like largest absorb note valu default valu tweak found algorithm fairli insensit valu chang chang classsalsaabsorberextractorfrac paramet classsalsaabsorberextractor imag _staticannotated_schematiccutpng next defin interv cover region base cut lead us differ region small one right next eachoth two larg one could spot pretti easili eye ball imag _staticannotated_schematicintervalspng mask interv found witht first cutoff check enough column densiti remain lightray find logn remain lightray use threshold logn exampl continu iter note logn threshold set classsalsaabsorberextractorabsorber_min paramet set minimum detect column densiti absorb vari base ion research goal imag _staticannotated_schematicmaskpng defin new cut base left lightray isol new region lower column densiti could still significantli contribut spectra someth want extract imag _staticannotated_schematicmask_cutpng extract interv base cut time interv overlap mask region ok dealt sensibl combin phase come next combin interv two set cut left bit mess first step divid region overlap interv smaller compon part recombin sensibl interv captur observ distinct absorb imag _staticannotated_schematicall_intervalspng separ overlap region decid interv combin take account line sight veloc inform calcul averag veloc interv combin two interv veloc certain threshold km exampl note veloc threshold defin whether intervalsregion combin set classsalsaabsorberextractorvelocity_r valu motiv resolut observ spectra though found algorithm fairli insensit precis valu especi look catalog absorb imag _staticannotated_schematicall_dividedpng remain interv combin phase see overlap interv combin like around kpc other separatedremain separ like two larg absorb kpc combin small one either side combin imag _staticannotated_schematiccombined_intervalspng mask region interv calcul much column densiti left case find logn beneath minimum absorb threshold logn stop iter ray final cleanup interv throw interv low column densiti base classsalsaabsorberextractorabsorber_min leav us absorb studi extract inform eg temperatur radial veloc metal etc imag _staticannotated_schematicfinal_absorberspng salsa document master file creat sphinxquickstart tue jun adapt file complet like least contain root toctre direct welcom salsa document salsa opensourc python modul creat streamlin process gener synthet absorb catalog galact simul multipl opensourc softwar project util achiev access simul data done use yt trident use gener synthet sightlineslightray gener synthet spectra spectacl use fit voigt profil spectra extract absorb observ studi gener larg absorb catalog studi absorpt line spectra distant quasar light pass interven galaxi salsa gener similar catalog cosmolog galact simul allow research studi simul observ perspect give new insight data well help facilit comparison collabor simul observ addit novel method extract absorb spice method use cell level data extract absorb trident lightray return great deal inform analyz toctre maxdepth installationrst annotated_examplerst absorber_extractionrst referencerst index refgenindex lightray_index _annotatedexampl annot exampl understand salsa work annot exampl walk use case salsa _extractabsorbersexampl extract absorb one main goal salsa make easi construct catalog absorb analyz process construct absorb take two step step gener light ray trident use gener light ray pass simul dimension object connect seri cell save field inform contain cell ie densiti temperatur line sight veloc extract absorb along light ray inform see trident document httpstridentreadthedocsio_ aid gener light ray salsa contain classsalsagenerate_lray function gener number lightray uniformli randomli sampl impact paramet give us sampl consist sampl observ studi prevent sampl bia comparison get start need get dataset one use exampl found httpsytprojectorgdata_ use function first creat directori save ray mkdir my_ray load data set defin paramet look import yt import salsa import numpi np import panda pd load simul dataset ds_file hiresisolatedgalaxydddd ds ytloadds_fil defin center galaxi center directori lightray save ray_dir my_ray n_ray choos absorpt line add dataset well addit field data save ion_listh c iv vi other_field densiti temperatur metal maximum distanc lightray creat minimum default max_impact kpc paramet set gener lightray set seed use creat random light ray reproduc result set seed function produc random ray nprandomse run function ray save my_ray directori salsagenerate_lraysd center n_ray max_impact ion_listion_list fieldsother_field out_dirray_dir step extract absorb detail absorb extract see refabsorberextract quick synopsi spice method spectacl method spice look cell level data spectacl fit line synthet spectra gener trident classsalsaabsorberextractor class use method let extract absorb light ray made ray_fil fray_dirrayh construct absorb extractor abs_ext salsaabsorberextractord ray_fil ion_nameh use spice method extract absorb panda datafram units_dictdictdensitygcm metallicityzsun df_spice abs_extget_spice_absorbersother_field units_dictunits_dict df_spicehead csvtabl header namewaveredshiftcol_densdelta_vvel_dispersioninterval_startinterval_enddensitytemperaturemetal h h also extract use spectacl use spectacl df_spect abs_extget_spectacle_absorb df_specthead csvtabl header namewavecol_densv_dopdelta_vdelta_lambdaewdvfwhmredshift hi notic method contain differ inform spice includ detail simul data like densiti temperatur absorb someth easili detect spectra spectacl contain inform line like equival width doppler b paramet extract absorb multipl lightray use classsalsaget_absorb function loop list ray extract absorb one see ray_list fray_dirrayh fray_dirrayh fray_dirrayh fray_dirrayh initi new absorberextractor look c iv abs_ext_civ salsaabsorberextractord ray_fil ion_namec iv df_civ salsaget_absorbersabs_ext_civ ray_list methodspic fieldsother_field units_dictunits_dict df_civhead csvtabl header namewaveredshiftcol_densdelta_vvel_dispersioninterval_startinterval_enddensitytemperaturemetallicitylightray_index c iv c iv c iv notic spectacl method could also use also although absorberextractor take ray file construct new ray load retain inform absorb came lightray_index given number repres ray extract absorb extract rayh would index use comparinganalyz absorb sightlin _cataloggenerationexampl catalog gener gener full catalog absorb use classsalsagenerate_catalog function gener sampl tridentlightray object classsalsaabsorberextractor extract absorb list ion need setup run df_catalog salsagenerate_catalogd n_ray ray_dir ion_list fieldsother_field centercent impact_param_lim max_impact methodspic units_dictunits_dict df_cataloghead csvtabl header namewaveredshiftcol_densdelta_vvel_dispersioninterval_startinterval_enddensitytemperaturemetallicityabsorber_index h h h c iv c iv c iv function look first see ray creat given directori right number ray contain right ion field specifi case would densiti temperatur radiu ray use otherwis new ray creat use classsalsagenerate_lray next classsalsaget_absorb use find absorb ion ion_list final catalog return pandasdatafram note lighray index uniqu ionwavelength _visualizingabsorb visual absorb visual actual extract lightray object synthet spectra use classsalsaabsorberplott class built classsalsaabsorberextractor ad function make plot get full pictur happen level creat multi panel plot contain slice simul ray annot number densiti profil along ray path line sight veloc profil along ray path synthet spectra creat ray figur give good overview happen give valuabl context absorpt extract method addit plot made individu care less spectra dont want plot slice time consum depend detail simul creat multipanel plot import salsa import yt import matplotlibpyplot plt set dataset path load light ray ds_filehiresisolatedgalaxydddd ray ytloadmy_raysrayh set limit one plot num_dense_min num_dense_max plotter salsaabsorberplotterds_fil ray h center_g use_spectacletru plot_spectacletru plot_spicetru num_dense_maxnum_dense_max num_dense_minnum_dense_min fig axe plottercreate_multi_plotoutfnameexample_multiplotpng imag _staticexample_multiplotpng grey region middl two plot indic absorb spice method find three highest column densiti mark display legend last plot solid line indic raw spectra dot line show absorpt line spectacl fit three largest line plot column densiti record legend total column densiti along lightray total found via spice method total found spectacl record legend spectra plot see discrep spice spectacl method due chang veloc profil spice method extract two absorb spectacl fit one absorb larger absorb drown smaller one