chang log notabl chang project document file project adher semant versioninghttpsemverorg format describ httpskeepachangelogcomhttpskeepachangelogcomen unreleas ad version wflow model httpsgithubcomewatercycleewatercycleissu chang replac cartesiu section system setup doc snelliu httpsgithubcomewatercycleewatercycleissu fix test suit fail fresh conda env httpsgithubcomewatercycleewatercycleissu incompat numpi type httpsgithubcomewatercycleewatercycleissu ad version wflow model httpsgithubcomewatercycleewatercyclepul document add new version model httpsgithubcomewatercycleewatercyclepul ad type inform accord pephttpswwwpythonorgdevpepspep precommit hook black format httpsgithubcomewatercycleewatercycleissu chang timeout model setup set minut httpsgithubcomewatercycleewatercycleissu use mamba instal instruct httpsgithubcomewatercycleewatercycleissu use version httpsgithubcomcitationfileformatcitationfileformatreleasestag citationcff format move packag src httpsgithubcomewatercycleewatercycleissu fix name particl citationcff httpsgithubcomewatercycleewatercycleissu build sphinx local config file httpsgithubcomewatercycleewatercycleissu type error notebook httpsgithubcomewatercycleewatercycleissu lisfloodfin httpsgithubcomewatercycleewatercycleissu fix zenodo doi ad column name argument get_grdc_data httpsgithubcomewatercycleewatercycleissu copi clipboard button document httpsgithubcomewatercycleewatercycleissu chang compat esmvaltool older version esmvaltool longer support httpsgithubcomewatercycleewatercycleissu readm contribut changelog reform restructedtext markdown httpsgithubcomewatercycleewatercycleissu fix parameterset outsid cfgparametersets_dir httpsgithubcomewatercycleewatercycleissu link nbviewer httpsgithubcomewatercycleewatercycleissu pin esmpi temporari workaround singl cpu affin httpsgithubcomewatercycleewatercycleissu remov unus esmvaltool_config field cfg httpsgithubcomewatercycleewatercycleissu ad document exampl notebook setup guid httpsgithubcomewatercycleewatercycleissu hpc cluster guid forc gener use esmvaltoolhttpswwwesmvaltoolorg httpsgithubcomewatercycleewatercycleissu httpsgithubcomewatercycleewatercycleissu avail paramet set httpsgithubcomewatercycleewatercycleissu pymthttpspymtreadthedocsio inspir interfac follow model lisflood marrmot pcrglobwb wflow model method get set valu base spatial coordin httpsgithubcomewatercycleewatercycleissu httpsgithubcomewatercycleewatercycleissu model method get valu xarray dataset httpsgithubcomewatercycleewatercycleissu container model use grpcbmihttpsgithubcomewatercyclegrpcbmi configur file system setup hydrograph plot httpsgithubcomewatercycleewatercycleissu type iso time format httpsgithubcomewatercycleewatercycleissu chang grdc return panda datafram metadata dict instead xarray dataset httpsgithubcomewatercycleewatercycleissu ad observ grdc usg empti python project directori structur ad symlink base data file copier unreleas httpsgithubcomewatercycleewatercyclecomparehead httpsgithubcomewatercycleewatercyclecompar httpsgithubcomewatercycleewatercyclecompar httpsgithubcomewatercycleewatercyclecompar httpsgithubcomewatercycleewatercyclecompar httpsgithubcomewatercycleewatercyclecompar httpsgithubcomewatercycleewatercyclecomparexobservation_data httpsgithubcomewatercycleewatercyclereleasestagxobservation_data ewatercycl imagehttpsgithubcomewatercycleewatercyclerawmaindocsexampleslogopng python packag run hydrolog model imagehttpsgithubcomewatercycleewatercycleactionsworkflowsciymlbadgesvghttpsgithubcomewatercycleewatercycleactionsworkflowsciyml imagehttpssonarcloudioapiproject_badgesmeasureprojectewatercycle_ewatercyclemetricalert_statushttpssonarcloudiodashboardidewatercycle_ewatercycl imagehttpssonarcloudioapiproject_badgesmeasureprojectewatercycle_ewatercyclemetriccoveragehttpssonarcloudiocomponent_measuresidewatercycle_ewatercyclemetriccoverag document statushttpsreadthedocsorgprojectsewatercyclebadgeversionlatesthttpsewatercyclereadthedocsioenlatestbadgelatest pypihttpsimgshieldsiopypivewatercyclehttpspypiorgprojectewatercycl imagehttpsimgshieldsiobadgefairsoftwareeuefefefefebyellowhttpsfairsoftwareeu imagehttpszenodoorgbadgedoizenodosvghttpsdoiorgzenodo research softwar directori badgehttpsimgshieldsiobadgersdewatercycleaesvghttpswwwresearchsoftwarenlsoftwareewatercycl ewatercycl packag make easier use hydrolog model without intim knowledg instal run model use contain run model isol portabl way grpcbmihttpsgithubcomewatercyclegrpcbmi gener rain sunshin requir model use esmvaltoolhttpswwwesmvaltoolorg support observ data grdc usgshttpsewatercyclereadthedocsioenlatestobservationshtml expos simpl interfacehttpsewatercyclereadthedocsioenlatestexamplesewatercycle_api_notebookhtml quickli get run instal ewatercycl packag need geospati nonpython packag gener forc data prefer creat conda environ instal depend shell wget httpsrawgithubusercontentcomewatercycleewatercyclemainenvironmentyml conda instal mamba n base c condaforg mamba env creat file environmentyml conda activ ewatercycl ewatercycl packag instal shell pip instal ewatercycl besid instal softwar need creat configur file download sever data set get contain imag see system setup chapterhttpsewatercyclereadthedocsorgenlatestsystem_setuphtml instruct usag exampl use marrmot topmodelhttpsgithubcomwknobenmarrmotblobmastermarrmotmodelsmodelfilesm__topmodel_p_sm hydrolog model merrimack catchment gener forc run produc hydrograph python import panda pd import ewatercycleanalysi import ewatercycleforc import ewatercyclemodel import ewatercycleobservationgrdc forc ewatercycleforcinggener target_modelmarrmot datasetera start_timetz end_timetz shapemerrimackmerrimackshp model ewatercyclemodelsmarrmotmvers forcingforc cfg_file cfg_dir modelsetup threshold_flow_generation_evap_chang leakage_saturated_zone_flow_coeffici zero_deficit_base_flow_spe baseflow_coeffici gamma_distribution_phi_paramet modelinitializecfg_fil observations_df station_info ewatercycleobservationgrdcget_grdc_data station_id start_timemodelstart_time_as_isostr end_timemodelend_time_as_isostr columnobserv simulated_discharg timestamp modeltim modelend_tim modelupd valu modelget_valueflux_out_q flux_out_q unit convers factor mmday ms area shapefil conversion_mmdaym simulated_dischargeappendvalu area conversion_mmdaym timestampsappendmodeltime_as_datetimed simulated_discharge_df pddataframesimul simulated_discharg indexpdto_datetimetimestamp ewatercycleanalysishydrographsimulated_discharge_dfjoinobservations_df referenceobserv modelfin exampl found documentationhttpsewatercyclereadthedocsio contribut want contribut develop ewatercycl packag look contribut guidelinescontributingmd licens copyright c netherland escienc center delft univers technolog apach softwar licens contributor coven code conduct pledg interest foster open welcom environ contributor maintain pledg make particip project commun harassmentfre experi everyon regardless age bodi size disabl ethnic gender ident express level experi educ socioeconom statu nation person appear race religion sexual ident orient standard exampl behavior contribut creat posit environ includ use welcom inclus languag respect differ viewpoint experi grace accept construct critic focus best commun show empathi toward commun member exampl unaccept behavior particip includ use sexual languag imageri unwelcom sexual attent advanc troll insultingderogatori comment person polit attack public privat harass publish other privat inform physic electron address without explicit permiss conduct could reason consid inappropri profession set respons project maintain respons clarifi standard accept behavior expect take appropri fair correct action respons instanc unaccept behavior project maintain right respons remov edit reject comment commit code wiki edit issu contribut align code conduct ban temporarili perman contributor behavior deem inappropri threaten offens harm scope code conduct appli within project space public space individu repres project commun exampl repres project commun includ use offici project email address post via offici social media account act appoint repres onlin offlin event represent project may defin clarifi project maintain enforc instanc abus harass otherwis unaccept behavior may report contact project team sverhoevenesciencecenternl complaint review investig result respons deem necessari appropri circumst project team oblig maintain confidenti regard report incid detail specif enforc polici may post separ project maintain follow enforc code conduct good faith may face temporari perman repercuss determin member project leadership attribut code conduct adapt contributor covenanthttpswwwcontributorcovenantorg version avail httpswwwcontributorcovenantorgversioncodeofconducthtml contribut guidelin welcom kind contribut softwar simpl comment question full fledg pull requesthttpshelpgithubcomarticlesaboutpullrequest pleas read follow code conductcode_of_conductmd contribut one follow case question think may found bug includ unexpect behavior want make kind chang code base eg fix bug add new featur updat document want make releas section outlin step case question use search function herehttpsgithubcomewatercycleewatercycleissu see someon alreadi file issu issu search yield relev result make new issu appli question label appli label relev think may found bug use search function herehttpsgithubcomewatercycleewatercycleissu see someon alreadi file issu issu search yield relev result make new issu make sure provid enough inform rest commun understand caus context problem depend issu may want includ sha hashcodehttpshelpgithubcomarticlesautolinkedreferencesandurlscommitsha commit caus problem identifi inform name version number depend your use inform oper system appli relev label newli creat issu want make kind chang code base import announc plan rest commun start work announc form new issu import wait kind consensu reach idea good idea need fork repositori github profil creat featur branch latest main commit work featur branch make sure stay date main branch pull chang possibl upstream repositori follow instruct herehttpshelpgithubcomarticlesconfiguringaremoteforafork herehttpshelpgithubcomarticlessyncingafork instal packag edit mode depend pip instal e dev make sure pre commit hook instal run precommit instal caus lint format appli commit make sure exist test still work run pytest make sure exist document still gener without warn run cd doc make html pandochttpspandocorg requir gener doc instal conda instal c condaforg pandoc add test necessari updat expand document pleas add googl style python docstringshttpsgooglegithubiostyleguidepyguidehtmlcommentsanddocstr pushhttprogerdudlergithubiogitguid featur branch fork ewatercycl repositori github creat pull request eg follow instruct herehttpshelpgithubcomarticlescreatingapullrequest case feel like youv made valuabl contribut dont know write run test gener document dont let discourag make pull request help go ahead submit pull request keep mind might ask append addit commit pull request want make releas section maintain packag checkout head main branch git checkout main git pull determin new version major minor patch use packag use semant version httpssemverorg_ run bumpvers majorminorpatch updat version packag file updat changelogmd chang current new version make sure precommit hook green file run precommit run allfil commit push chang github wait github actionshttpsgithubcomewatercycleewatercycleactionsquerybranchamain complet green creat github releasehttpsgithubcomewatercycleewatercyclereleasesnew use version titl tag version descript use intro text readmemd give context zenodo record chang changelogmd creat pypi releas creat distribut archiv python build upload archiv pypi twine upload dist use person pypi account verifi new zenodo recordhttpszenodoorgsearchpagesizeqewatercycl creat stabl readthedocshttpsewatercyclereadthedocsioenst updat new version instal pip use pip instal ewatercyclenew version celebr small collect exampl notebook ewatercycl packag github fail render notebook also view use jupyt nbviewer httpsnbviewerjupyterorggithubewatercycleewatercycletreemaindocsexampl system setup use ewatercycl packag need setup system softwar data chapter system administr research softwar engin need set system ewatercycl platform setup step conda environ condaenvironment__ instal ewatercycl packag installewatercyclepackage__ configur esmvaltool configureesmvaltool__ download climat data downloadclimatedata__ instal contain engin installcontainerengine__ configur ewatercycl configureewatercycle__ model contain imag modelcontainerimages__ download exampl paramet set downloadexampleparametersets__ prepar paramet set prepareotherparametersets_ download exampl forc downloadexampleforcing__ download observ data downloadobservationdata__ conda environ ewatercycl python packag use lot geospati depend instal use conda httpscondaio__ packag manag system instal conda use miniconda instal httpsdocscondaioenlatestminicondahtml__ conda instal instal softwar depend conda environ file httpsgithubcomewatercycleewatercycleblobmainenvironmentyml__ code shell wget httpsrawgithubusercontentcomewatercycleewatercyclemainenvironmentyml conda instal mamba n base c condaforg mamba env creat file environmentyml conda activ ewatercycl forget termin jupyt kernel activ conda environ ewatercycl python packag use instal ewatercycl packag python packag instal use pip code shell pip instal ewatercycl configur esmvaltool esmvaltool use gener forc temperatur precipit etc file climat data hydrolog model esmvaltool instal depend packag see httpsdocsesmvaltoolorgenlatestquickstartconfigurationhtml configur esmvaltool download climat data era erainterim data use gener forc era download era data file use eracli httpseraclireadthedocsio__ tool code shell pip instal eracli follow instruct httpseraclireadthedocsioenstableinstructionshtml_ get access data exampl hourli era data year variabl pr psl ta taxmin tasmax tdp ua va rsd rsdt fx orog download code shell cd esmvaltool era raw directori exampl projectswtrcyclecomparisonrawobstierera eracli hourli startyear endyear variabl total_precipit eracli hourli startyear endyear variabl mean_sea_level_pressur eracli hourli startyear endyear variabl m_temperatur eracli hourli startyear endyear variabl minimum_m_temperature_since_previous_post_process eracli hourli startyear endyear variabl maximum_m_temperature_since_previous_post_process eracli hourli startyear endyear variabl m_dewpoint_temperatur eracli hourli startyear endyear variabl m_u_component_of_wind eracli hourli startyear endyear variabl m_v_component_of_wind eracli hourli startyear endyear variabl surface_solar_radiation_downward eracli hourli startyear endyear variabl toa_incident_solar_radi eracli hourli startyear endyear variabl orographi cd hourli data need need convert daili use esmvaltool recip httpsdocsesmvaltoolorgenlatestinputhtmlcmorizationasafix_ code shell esmvaltool run cmorizersrecipe_erayml erainterim erainterim superseed era could use reproduct studi smaller size erainterim data file download httpswwwecmwfintenforecastsdatasetsreanalysisdatasetserainterim use download_era_interimpi httpsgithubcomesmvalgroupesmvaltoolblobmainesmvaltoolcmorizersobsdownload_scriptsdownload_era_interimpy_ script download erainterim data file see first line script document file download esmvaltool erainterim raw directori exampl projectswtrcyclecomparisonrawobstiererainterim erainterim raw data file need cmoriz use script httpsdocsesmvaltoolorgenlatestinputhtmlusingacmorizerscript_ code shell cmorize_ob erainterim instal contain engin ewatercycl packag hydrolog model run contain engin like singular httpssingularitylblgov__ docker httpswwwdockercom__ least singular docker instal instal contain engin requir root permiss machin singular instal singular use instruct httpssingularityhpcngorguserdocsmasterquick_starthtml__ docker instal docker use instruct httpsdocsdockercomengineinstall__ docker configur call without sudo httpsdocsdockercomengineinstalllinuxpostinstallmanagedockerasanonrootuser__ configur ewatercycl ewatercycl packag simplifi api read directori set configur file configur set python code ipython import log loggingbasicconfiglevellogginginfo import ewatercycl import ewatercycleparameter_set contain engin use run hydrolog model ewatercyclecfgcontainer_engin singular docker container_enginesingular singular imag file sif found ewatercyclecfgsingularity_dir singularityimag directori output model run store model run gener sub directori insid output_dir ewatercyclecfgoutput_dir grdc observ file station identifier_q_daycmdtxt found ewatercyclecfggrdc_loc grdcobserv paramet set prepar system administ found ewatercyclecfgparameterset_dir parameterset configur save load ewatercyclecfgewatercycle_config ewatercycleyaml written disk code ipython ewatercyclecfgsave_to_fil later load use code ipython ewatercyclecfgload_from_fileewatercycleyaml make ewatercycl configur load default current user copi configewatercycleewatercycleyaml make ewatercycl configur avail user system copi etcewatercycleyaml configur file snelliu system user part ewatercycl project use follow configur snelliu system surf httpsservicedesksurfsaranlwikidisplaywikisnellius_ code yaml container_engin singular singularity_dir projectswtrcyclesingularityimag output_dir scratchsharedewatercycl grdc_locat projectswtrcyclegrdcgrdc_gcosgtnh___ parameterset_dir projectswtrcycleparameterset scratchsharedewatercycl output directori automat remov content older day output directori miss recreat code shell mkdir scratchsharedewatercycl chgrp wtrcycl scratchsharedewatercycl chmod scratchsharedewatercycl configur file ewatecycl jupyt machin user use follow configur system construct ewatercycl applic surf research cloud code yaml container_engin singular singularity_dir mntdatasingularityimag output_dir scratch grdc_locat mntdatagrdc parameterset_dir mntdataparameterset model contain imag hydrolog model run contain contain imag made avail system name imag found ewatercyclemodel class docker docker imag download docker pull code shell docker pull ewatercyclelisfloodgrpcbmi docker pull ewatercyclemarrmotgrpcbmi docker pull ewatercyclepcrggrpcbmisett docker pull ewatercyclewflowgrpcbmi docker pull ewatercyclewflowgrpcbmi docker pull ewatercyclewflowgrpcbmi singular singular imag store configur directori ewatercyclecfgsingularity_dir build docker code shell cd ewatercyclecfgsingularity_dir singular build ewatercyclelisfloodgrpcbmi_sif dockerewatercyclelisfloodgrpcbmi singular build ewatercyclemarrmotgrpcbmi_sif dockerewatercyclemarrmotgrpcbmi singular build ewatercyclepcrggrpcbmi_setterssif dockerewatercyclepcrggrpcbmisett singular build ewatercyclewflowgrpcbmi_sif dockerewatercyclewflowgrpcbmi singular build ewatercyclewflowgrpcbmi_sif dockerewatercyclewflowgrpcbmi singular build ewatercyclewflowgrpcbmi_sif dockerewatercyclewflowgrpcbmi cd download exampl paramet set quickli run model advis setup exampl paramet set model code ipython ewatercycleparameter_setsdownload_example_parameter_set parsedliter infoewatercycleparameter_sets_exampledownload exampl paramet set wflow_rhine_sbm_nc homeverhoesgitewatercycleewatercycledocsexamplesparametersetswflow_rhine_sbm_nc infoewatercycleparameter_sets_exampledownload complet infoewatercycleparameter_sets_examplead parameterset wflow_rhine_sbm_nc ewatercyclecfg infoewatercycleparameter_sets_exampledownload exampl paramet set pcrglobwb_rhinemeuse_min homeverhoesgitewatercycleewatercycledocsexamplesparametersetspcrglobwb_rhinemeuse_min infoewatercycleparameter_sets_exampledownload complet infoewatercycleparameter_sets_examplead parameterset pcrglobwb_rhinemeuse_min ewatercyclecfg infoewatercycleparameter_sets_exampledownload exampl paramet set lisflood_fras homeverhoesgitewatercycleewatercycledocsexamplesparametersetslisflood_fras infoewatercycleparameter_sets_exampledownload complet infoewatercycleparameter_sets_examplead parameterset lisflood_fras ewatercyclecfg infoewatercycleparameter_set exampl paramet set download infoewatercycleconfig_config_objectconfig written homeverhoesgitewatercycleewatercycledocsexamplesewatercycleyaml infoewatercycleparameter_setssav paramet set configur file homeverhoesgitewatercycleewatercycledocsexamplesewatercycleyaml exampl paramet set download ad configur file code shell cat ewatercycleyaml parsedliter container_engin null grdc_locat none output_dir none parameter_set lisflood_fras config lisflood_frasersettings_lat_lonrunxml directori lisflood_fras doi na supported_model_vers set null target_model lisflood pcrglobwb_rhinemeuse_min config pcrglobwb_rhinemeuse_minsetup_natural_testini directori pcrglobwb_rhinemeuse_min doi na supported_model_vers set setter null target_model pcrglobwb wflow_rhine_sbm_nc config wflow_rhine_sbm_ncwflow_sbm_ncini directori wflow_rhine_sbm_nc doi na supported_model_vers set null target_model wflow parameterset_dir homeverhoesgitewatercycleewatercycledocsexamplesparameterset singularity_dir none code ipython ewatercycleparameter_setsavailable_parameter_set parsedliter lisflood_fras pcrglobwb_rhinemeuse_min wflow_rhine_sbm_nc code ipython parameter_set ewatercycleparameter_setsget_parameter_setpcrglobwb_rhinemeuse_min printparameter_set parsedliter paramet set namepcrglobwb_rhinemeuse_min directoryhomeverhoesgitewatercycleewatercycledocsexamplesparametersetspcrglobwb_rhinemeuse_min confighomeverhoesgitewatercycleewatercycledocsexamplesparametersetspcrglobwb_rhinemeuse_minsetup_natural_testini doina target_modelpcrglobwb supported_model_versionssett parameter_set variabl pass model class constructor prepar paramet set exampl paramet set download previou section nice show platform featur bit small perform advanc experi addit paramet set need user could use pyclassewatercycleparameter_setsparameterset construct paramet set made avail via pyfuncewatercycleparameter_setsavailable_parameter_set pyfuncewatercycleparameter_setsget_parameter_set extend configur file ewatercycleyaml new paramet set ad keyvalu pair parameter_set map configur file key uniqu string current system valu dictionari follow item directori locat disk file paramet set store path rel rel pyconstewatercyclecfgparameterset_dir config model configur file use file directori path rel rel pyconstewatercyclecfgparameterset_dir doi persist identifi paramet set exampl doi zenodo record target_model name model paramet set work supported_model_vers set model version support paramet set set paramet set support version model exampl paramet set pcrglobwb httpsdoiorgzenodo download unpack datapcrglobwb_input could ad follow config code yaml pcrglobwb_rhinemeuse_min directori datapcrglobwb_inputglobal_min config datapcrglobwb_inputglobal_mininifileexamplesetup_min_nonnaturalini doi httpsdoiorgzenodo target_model pcrglobwb supported_model_vers set setter null download exampl forc abl run marrmot exampl notebook need forc file use ewatercycleforcinggener make use alreadi prepar forc file httpsgithubcomwknobenmarrmotblobmasterbmiconfigbmi_testcase_m_buffaloriver_tn_usamat__ code shell cd docsexampl wget httpsgithubcomwknobenmarrmotrawmasterbmiconfigbmi_testcase_m_buffaloriver_tn_usamat cd download observ data observ data need calcul metric model perform plot hydrograph ewatercycl packag use global runoff data centr grdc httpswwwbafgdegrdc__ us geolog survey water servic usg httpswaterservicesusgsgov__ data grdc daili data file order httpswwwbafgdegrdcen_srvcs_tmsrsriverdischarge_nodehtml grdc file store ewatercyclecfggrdc_loc directori exampl toctre gener forc examplesgenerate_forcingipynb lisflood exampleslisfloodipynb marrmot examplesmarrmotmipynb marrmot examplesmarrmotmipynb pcrglobwb examplespcrglobwbipynb wflow exampleswflowipynb irrig experi examplesirrigationipynb ad model integr new model ewatercycl system involv follow step creat model subclass abstractmodel srcewatercyclemodelsabstractpi import model srcewatercyclemodels__init__pi add srcewatercycleforcingmodelpi regist model srcewatercycleforcing__init__pyforcing_class add model docsconfpi write exampl notebook write test model need custom paramet set class add srcewatercycleparameter_sets_model namepi add exampl paramet set srcewatercycleparameter_sets__init__pi add contain imag docsystem_setup add contain imag infrastructur data prepar scripts_ expand document due time ad new version model model differ version model version ewatercycl python packag correspond tag docker imag version singular contain imag filenam version contain imag prefer one releas version model code alternativli version could name featur branch date also paramet set specifi version model support add new version model involv follow step creat contain imag creat docker contain imag name ewatercyclemodelgrpcbmivers grpcbmi server run entrypoint httpsgrpcbmireadthedocsioenlatestcontainerbuildinghtml_ host docker contain imag docker hub httpshubdockercomuewatercycle_ creat singular imag docker singular build ewatercyclemodelgrpcbmi_versionsif dockerewatercyclemodelgrpcbmivers add python packag add contain imag docsystem_setup page edit docssystem_setuprst srcewatercyclemodelsmodelpi add new version available_vers class properti __init__ method add support new version option add new version exist exampl paramet set add new paramet set srcewatercycleparameter_sets_modelpyexample_parameter_set add new version support paramet set local ewatercycl config file etcewatercycleyaml configewatercycleewatercycleyaml test local creat pull request get merg creat new releas python packag done packag maintain add platform platform develop deploy add singular imag dcach share folder ewcdcachesingularityimagesmodelgrpcbmi_versionsif add contain imag infrastructur repositori data prepar scripts_ config gener httpsgithubcomewatercycleinfrablobmainrolesewatercycletemplatesewatercycleyamlj_ instal versionbranch ewatercycl python packag new model version run virtual machin option add exampl paramet set explor catalog httpsgithubcomewatercycleterriamapblobewatercyclevwwwrootinitewatercyclejson_ forc paramet set model imag avail jupyt server connect explor _script httpsgithubcomewatercycleinfratreemainrolesprep_shared_data migrat hpc cluster snelliu guid hpc node jupyterewatercycleorg use small test experi actual work need run notebookscript cluster snelliu snelliu forc data alreadi present mani user run job time without interf familiar linux read simpl guid httpsmakerprolinuxtutorialbasiclinuxcommandsforbeginn migrat prepar creat github repositori start creat github repositori store code follow guid httpsdocsgithubcomengithubgettingstartedwithgithubsetupgit httpsdocsgithubcomengithubgettingstartedwithgithubcreatearepo creat conda environmentyml requir eas transfer help creat environmentyml file file contain list packag use run code good practic allow user github repositori quickli instal necessari packag requir httpsdocscondaioprojectscondaenlatestuserguidetasksmanageenvironmentshtmlcreateenvfilemanu copi file hpc snelliu copi file ewatercycl hpc snelliu follow command exampl use scp r yourusernameonthehpcjupyterewatercycleorgmntyourusernameonthehpcpathtofold homeyourusernameonthesnelliuspathtofold prompt enter ewatercycl hpc password login snelliu vpn connect cluster comput host institut strict polici ipaddress allow connect cluster snelliu reason need first establish vpn connect univers research institut whitelist ipaddress mobaxterm connect snelliu ssh client requir one free client mobaxterm download httpsmobaxtermmobateknet instal open client click session tab top left click ssh remot host fill snelliussurfnl tick specifi usernam box fill snelliu usernam click ok bottom fill snelliu password prompt login node comput node log login node node use run script portal commun comput node run background actual comput comput node calcul commun comput node use bash sh script explain later home directori scratch directori login direct home directori homeyourusernameonthesnelliu home directori slower diskspe scratch directori scratch directori need creat use follow command cd scratchshar mkdir yourusernameonthesnelliu access scratch directori scratchsharedyourusernameonthesnelliu best practic modifi code first copi requir file exclud code scratch directori follow run code complet copi file back home directori clean scratch directori first run prepar clone github repositori clone github repositori contain script use git clone httpsgithubcomexample_userexample_repo instal miniconda go home directori cd homeusernam download miniconda wget httpsrepoanacondacomminicondaminicondalatestlinuxx_sh instal miniconda bash minicondalatestlinuxx_sh restart connect snelliu conda updat conda creat conda environ creat conda enviro instal requir packag follow descript httpsdocscondaioprojectscondaenlatestuserguidetasksmanageenvironmentshtmlcreatinganenvironmentwithcommand make sure jupyt lab instal conda environ wget httpsrawgithubusercontentcomewatercycleewatercyclemainenvironmentyml conda instal mamba n base c condaforg mamba env creat file environmentyml conda activ ewatercycl conda instal c condaforg jupyterlab instal ewatercycl packag pip instal ewatercycl creat singular contain snelliu docker requir root access therefor use singular similar integr well docker also requir root access preinstal comput node snelliu first step run model comput node thu use singular creat singular imag sif file base docker imag done note srun command access comput node srun n p short singular build disablecach ewatercyclewflowgrpcbmisif dockerewatercyclewflowgrpcbmilatest exampl wflow_sbm model chang correct docker contain dockerewatercyclemodelgrpcbmivers adjust code run singular contain code adjust run singular instead docker follow grpcbmibmi_client_singular import bmiclientsingular model bmiclientsingularityimageewatercyclewflowgrpcbmisif input_dirsinput_dir work_dirwork_dir adjust code use scratch directori run model copi model instanc scratch directori scratchsharedyourusernameonthesnelliu run model directori copi output back home directori homeyourusernameonthesnelliu cleanup file scratch directori submit jupyt job cluster node briefli explain gener sbatch paramet launch jupyt lab environ snelliu start open text editor snelliu eg nano easier local machin eg notepad copi follow text insid text editor edit conda environ name save run_jupyter_on_snelliussh make sure extens sh binbash serv jupyt lab environ comput node snelliu usag sbatch run_jupyter_on_compute_nodesh slurm set sbatch j jupyter_lab sbatch sbatch n sbatch p normal sbatch outputslurm_jout sbatch errorslurm_jout use appropri conda environ minicondaetcprofiledcondash conda activ yourenvironmentnam secur stop script error undefin variabl set euo pipefail specifi random port serv notebook port hosthostnam print command creat ssh tunnel log file echo e command creat ssh tunnel run anoth termin session local machin ssh l porthostport whoamisnelliussurfnl jupyt print number address notebook serv due way tunnel set latter option work one look like httpporttokenlong_access_token_very_important_to_copy_as_wel copi address local browser your good go start notebook server start jupyt lab session jupyt lab nobrows port port iphost explan sbatch paramet sbatch j jupyter_lab set job name sbatch specifi job runtim snelliu budget half hour cpu runtim cost point budget node consist core mean specifi runtim hour cost point budget sbatch n specifi amount node use run keep default valu sbatch p normal specifi type node keep default valu normal sbatch outputslurm_jout specifi locat name job log file inform sbatch paramet found httpsservicedesksurfsaranlwikidisplaywikicreatingandrunningjob specifi job runtim good practic calcul job runtim exampl run model first year calcul time take multipli total amount year studi add time buffer around percent exampl year take hour total run year hour total add time buffer estim runtim equal hour run bash sh script enter command run bash script sbatch run_jupyter_on_snelliussh get do unix linebreak error run follow command dosunix run_jupyter_on_snelliussh job control view job run enter squeue u yourusernameonthesnelliu cancel run job enter scancel jobid inform job control found httpsuserinfosurfsaranlsystemslisauserguidecreatingandrunningjobsinteract launch jupyt lab cluster node open slurm output log file open slurm output log file doubl click file browser use text editor nano read output care creat ssh tunnel local machin cluster creat ssh connect local machin cluster need open command prompt interfac local machin exampl powershel cmd window copi line ssh l porthostport whoamisnelliussurfnl slurm log file bash script command prompt run connect browser open browser eg chrome go url localhostlab enter access token copi access token slurm otput log file past browser access token password succes launch jupyt lab environ cluster node ewatercycl document master file creat sphinxquickstart thu jun adapt file complet like least contain root toctre direct welcom ewatercycl document ewatercycl python packag bring togeth mani compon ewatercycl project httpswwwewatercycleorg_ overal goal project make hydrolog model fulli reproduc open fair model pymt httpspymtreadthedocsioenlatestindexhtml_ enabl interact run model python environ like codeblock python ewatercyclemodel import wflow model wflowvers parametersetexample_parameter_set forcingexample_forc cfg_file cfg_dir modelsetupend_timetz modelinitializecfg_fil output modeltim modelend_tim modelupd discharg modelget_value_at_coordsriverrunoff lat lon outputappenddischarg learn use packag see user guid user_guidehtml_ exampl page exampleshtml_ typic ewatercycl platform deploy system access browser via jupyterhub come preconfigur readili avail paramet set meteorolog forc data model imag etcetera make possibl research quickli run experi without hassl instal model creat suitabl input data learn system setup read system setup system_setuphtml_ page gener ewatercycl tri strike balanc make easi use standard avail element experi dataset model analysi algorithm suppli custom element mean simpl usecas sometim requir slightli line code strictli nescessari sake make easi adapt code complex andor custom usecas glossari avoid miscommun defin explicitli mean term commonli use throughout document experi notebook run one hydrolog model produc scientif result model softwar implement algorithm note exclud data requir model forc time depend data need run model impact model model paramet fix paramet depth river land use irrig channel dam consid constant model run paramet set file base collect paramet certain model resolut possibl area model instanc singl run instanc model includ data requir current state toctre maxdepth hidden user_guid system_setup adding_model exampl hpc_to_clust observ api refer apidocsewatercyclerst observ ewatercycl platform support observ relev calibr valid model current support usg grdc river discharg observ usg us geolog survey water servic httpswaterservicesusgsgov_ provid public discharg data larg number us base station ewatercycl make use usg web servic httpswaterservicesusgsgovrestivservicehtml_ automat retriev data discharg timestamp correct utc timezon unit convert cubic feet per second cubic meter per second grdc global runoff data centr httpswwwbafgdegrdcenhomehomepage_nodehtml_ provid discharg data larg number station around world ewatercycl support grdc data download automat requir present infrastructur ewatercycl platform deploy special permiss grdc instanc contain data arctichyco gcosgtnh gtnr project