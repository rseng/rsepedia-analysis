readmemd gener readmermd pleas edit file homepark spatial provis urban park badg start licens gpl vhttpsimgshieldsiobadgelicensegplvbluesvghttpswwwgnuorglicensesgpl lifecycl experimentalhttpsimgshieldsiobadgelifecycleexperimentalorangesvghttpswwwtidyverseorglifecycleexperiment rcmdcheckhttpsgithubcomecologicalcitieshomeparkworkflowsrcmdcheckbadgesvghttpsgithubcomecologicalcitieshomeparkact testcoveragehttpsgithubcomecologicalcitieshomeparkworkflowstestcoveragebadgesvghttpsgithubcomecologicalcitieshomeparkact doihttpsjosstheojorgpapersjossstatussvghttpsdoiorgjoss badg end hrefhttpsecologicalcitiesgithubiohomeparkimg srcmanfigureslogopng alignright height homepark r packag assess spatial provis urban park residenti build citywid refer packag websitehttpsecologicalcitiesgithubiohomepark demonstr packag may use instal instal develop version homepark github r devtoolsinstall_githubecologicalcitieshomepark ref main setup load packag r libraryhomepark citat cite homepark acknowledg use pleas cite follow song x p chong k homepark r packag assess spatial provis urban park journal open sourc softwar httpsdoiorgjoss br get bibtex entri run citationhomepark br background park import space recreat leisur citi convent measur park provis tend reli summari park area within given region eg per capita park area howev need characteris wide varieti park eg natur area garden waterfront park outdoor playground etc serv differ group peopl plan fine spatial scale current metric also limit coars spatial resolut presenc artifici boundari br use homepark packag homepark provid way measur multipl aspect park provis home resolut individu build key featur includ abil download relev data openstreetmap osm build park featur relat recreat user may also suppli data new build park purpos futur scenario plan redistribut coarsescal popul data per censu unit residenti build also known dasymetr map help highlight specif area peopl benefit presenc park summaris park multipl attribut import recreat eg dens veget length waterfront open space trail etc calcul suppli provis park attribut residenti build account distanc decay fact suppli park away reduc follow section provid highlevel overview variou step requir measur spatial provis park detail code exampl found packag vignett get startedarticleshomeparkhtml process citi popul residenti build home import compon analysi may obtain exampl download build polygon openstreetmap osm subset dataset area within residenti land use zone addit popul count per residenti build allow us calcul total spatial provis park resid help highlight import area peopl benefit presenc park coarsescal popul censu data redistribut residenti build via techniqu known dasymetr map number build level osm use proxi popul densiti ie resid per unit area here exampl screenshot show overlay multipl exampl dataset packag citi singapor use redistribut popul data per censu unit subzon across residenti build div classfigur styletextalign center img srcmanfiguresreadmedasymetricmappingpng altexampl screenshot show overlay multipl dataset use redistribut popul across build within residenti land use zone legend order top bottom increas spatial resolut width p classcapt exampl screenshot show overlay multipl dataset use redistribut popul across build within residenti land use zone legend order top bottom increas spatial resolut p div br residenti build polygon singapor popul count found follow exampl dataset r databuildings_pop_sgp headbuildings_pop_sgp simpl featur collect featur field geometri type polygon dimens xy bound box xmin ymin xmax ymax geodet cr wg popcount geometri polygon polygon polygon polygon polygon polygon br process park park import compon analysi may download osm process use packag follow exampl dataset contain park singapor select attribut relat recreationleisur r dataparks_sgp headparks_sgp subset relev column simpl featur collect featur field geometri type multipolygon dimens xy bound box xmin ymin xmax ymax geodet cr wg area perimet playground_count playground_ptdens trails_length trails_length_perim_ratio geometri multipolygon multipolygon multipolygon multipolygon multipolygon multipolygon br recreat suppli process build park polygon provis park attribut per residenti build calcul total suppli park attribut build calcul base follow equat valu depend distanc particular build park attribut park away reduc result neg exponenti function esupcdsup effect also known distanc decay rossi et al httpdxdoiorgjapgeog img srcmanfiguresreadmeequationpng width styledisplay block margin auto total suppli specif park attribut build park n n total number park citywid ssubisub suppli specif park attribut park perfect posit linear associ assum sinc focu suppli metric dsubisub distanc kilometr build park eg euclidean manhattan etc c coeffici determin rate decay suppli ssubisub increas distanc br note valu coeffici c depend park park visitor attribut sociodemograph factor prefer activ may impel shorter longer travel rossi et al httpdxdoiorgjapgeog tu et alhttpsdoiorgjufug lower valu impli park away access frequent visit resid ie still contribut recreat suppli particular build div classfigur styletextalign center img srcmanfiguresreadmecsensitivitypng altfigur valu coeffici c effect distanc decay build park width p classcapt figur valu coeffici c effect distanc decay build park p div br div classfigur styletextalign center img srcmanfiguresreadmecsensitivitymappng altscreenshot exampl show suppli osm park area residenti build singapor year valu coeffici c left panel right panel build denot point random subset shown color palett bin accord quantil valu width p classcapt screenshot exampl show suppli osm park area residenti build singapor year valu coeffici c left panel right panel build denot point random subset shown color palett bin accord quantil valu p div br calcul suppli park attribut first calcul pairwis distanc build park distanc matrix output suppli function recre_suppli exampl calcul suppli park area build suppli valu multipli popul count per build obtain total suppli resid r transform build park project cr buildings_pop_sgp sfst_transformbuildings_pop_sgp sfst_cr parks_sgp sfst_transformparks_sgp sfst_cr convert build point centroid calcul distanc everi park m_dist buildings_pop_sgp sfst_centroid sfst_distanceparks_sgp euclidean distanc unitsset_unitsnul m_dist m_dist convert distanc km new column suppli park area buildings_pop_sgparea_suppli recre_supplypark_attribut parks_sgparea dist_matrix m_dist c eg tu et al suppli resid per build buildings_pop_sgparea_supplytopop buildings_pop_sgparea_suppli buildings_pop_sgppopcount div classfigur styletextalign center img srcmanfiguresreadmesupplyparkareatobuildingresidentspng altscreenshot suppli park area build resid singapor base osm data build denot point random subset shown valu coeffici c set color palett bin accord quantil valu width p classcapt screenshot suppli park area build resid singapor base osm data build denot point random subset shown valu coeffici c set color palett bin accord quantil valu p div br data sourc singapor censu data depart statist singaporehttpswwwsingstatgovsgfinddatasearchbythemepopulationgeographicdistributionlatestdata releas term singapor open data licenc version httpsdatagovsgopendatalic singapor subzon polygon singapor master plan subzoneshttpsdatagovsgdatasetmasterplansubzoneboundarynosea releas term singapor open data licenc version httpsdatagovsgopendatalic singapor master plan land use zone year httpsdatagovsgdatasetmasterplanlandus httpsdatagovsgdatasetmasterplanlanduselay releas term singapor open data licensehttpsdatagovsgopendatalic build polygon deriv map data copyrightedhttpswwwopenstreetmaporgcopyright openstreetmap contributor avail httpswwwopenstreetmaporg releas term odbl licensehttpsopendatacommonsorglicensesodblsummari park polygon summaris attribut trail playground deriv map data copyrightedhttpswwwopenstreetmaporgcopyright openstreetmap contributor avail httpswwwopenstreetmaporg releas term odbl licensehttpsopendatacommonsorglicensesodblsummari br refer rossi byrn j picker c role distanc periurban nation park use visit far travel appli geographi tu x huang g wu j guo x travel distanc park size influenc urban park visit urban forestri urban green readmemd gener readmermd pleas edit file homepark hrefhttpsecologicalcitiesgithubiohomeparkimg srcmanfigureslogopng alignright height badg start licens gpl vhttpsimgshieldsiobadgelicensegplvbluesvghttpswwwgnuorglicensesgpl lifecycl experimentalhttpsimgshieldsiobadgelifecycleexperimentalorangesvghttpswwwtidyverseorglifecycleexperiment rcmdcheckhttpsgithubcomecologicalcitieshomeparkworkflowsrcmdcheckbadgesvghttpsgithubcomecologicalcitieshomeparkact testcoveragehttpsgithubcomecologicalcitieshomeparkworkflowstestcoveragebadgesvghttpsgithubcomecologicalcitieshomeparkact doihttpsjosstheojorgpapersjossstatussvghttpsdoiorgjoss badg end spatial provis urban park assess spatial provis urban park residenti build citywid refer packag websitehttpsecologicalcitiesgithubiohomepark demonstr packag may use instal instal develop version homepark github r devtoolsinstall_githubecologicalcitieshomepark ref main setup load packag r libraryhomepark citat cite homepark acknowledg use pleas cite follow song x p chong k homepark r packag assess spatial provis urban park journal open sourc softwar httpsdoiorgjoss br get bibtex entri run citationhomepark br background park import space recreat leisur citi convent measur park provis tend reli summari park area within given region eg per capita park area howev need characteris wide varieti park eg natur area garden waterfront park outdoor playground etc serv differ group peopl plan fine spatial scale current metric also limit coars spatial resolut presenc artifici boundari br use homepark packag homepark provid way measur multipl aspect park provis home resolut individu build key featur includ abil download relev data openstreetmap osm build park featur relat recreat user may also suppli data new build park purpos futur scenario plan redistribut coarsescal popul data per censu unit residenti build also known dasymetr map help highlight specif area peopl benefit presenc park summaris park multipl attribut import recreat eg dens veget length waterfront open space trail etc calcul suppli provis park attribut residenti build account distanc decay fact suppli park away reduc follow section provid highlevel overview variou step requir measur spatial provis park detail code exampl found packag vignett get startedhttpsecologicalcitiesgithubiohomeparkarticleshomeparkhtml process citi popul residenti build home import compon analysi may obtain exampl download build polygon openstreetmap osm subset dataset area within residenti land use zone addit popul count per residenti build allow us calcul total spatial provis park resid help highlight import area peopl benefit presenc park coarsescal popul censu data redistribut residenti build via techniqu known dasymetr map number build level osm use proxi popul densiti ie resid per unit area here exampl screenshot show overlay multipl exampl dataset packag citi singapor use redistribut popul data per censu unit subzon across residenti build div classfigur styletextalign center img srcmanfiguresreadmedasymetricmappingpng altexampl screenshot show overlay multipl dataset use redistribut popul across build within residenti land use zone legend order top bottom increas spatial resolut width p classcapt exampl screenshot show overlay multipl dataset use redistribut popul across build within residenti land use zone legend order top bottom increas spatial resolut p div br residenti build polygon singapor popul count found follow exampl dataset r databuildings_pop_sgp headbuildings_pop_sgp simpl featur collect featur field geometri type polygon dimens xy bound box xmin ymin xmax ymax geodet cr wg popcount geometri polygon polygon polygon polygon polygon polygon br process park park import compon analysi may download osm process use packag follow exampl dataset contain park singapor select attribut relat recreationleisur r dataparks_sgp headparks_sgp subset relev column simpl featur collect featur field geometri type multipolygon dimens xy bound box xmin ymin xmax ymax geodet cr wg area perimet playground_count playground_ptdens trails_length trails_length_perim_ratio geometri multipolygon multipolygon multipolygon multipolygon multipolygon multipolygon br recreat suppli process build park polygon provis park attribut per residenti build calcul total suppli park attribut build calcul base follow equat valu depend distanc particular build park attribut park away reduc result neg exponenti function esupcdsup effect also known distanc decay rossi et al httpdxdoiorgjapgeog img srcmanfiguresreadmeequationpng width styledisplay block margin auto total suppli specif park attribut build park n n total number park citywid ssubisub suppli specif park attribut park perfect posit linear associ assum sinc focu suppli metric dsubisub distanc kilometr build park eg euclidean manhattan etc c coeffici determin rate decay suppli ssubisub increas distanc br note valu coeffici c depend park park visitor attribut sociodemograph factor prefer activ may impel shorter longer travel rossi et al httpdxdoiorgjapgeog tu et alhttpsdoiorgjufug lower valu impli park away access frequent visit resid ie still contribut recreat suppli particular build div classfigur styletextalign center img srcmanfiguresreadmecsensitivitypng altfigur valu coeffici c effect distanc decay build park width p classcapt figur valu coeffici c effect distanc decay build park p div br div classfigur styletextalign center img srcmanfiguresreadmecsensitivitymappng altscreenshot exampl show suppli osm park area residenti build singapor year valu coeffici c left panel right panel build denot pount random subset shown color palett build point bin accord quantil valu width p classcapt screenshot exampl show suppli osm park area residenti build singapor year valu coeffici c left panel right panel build denot pount random subset shown color palett build point bin accord quantil valu p div br calcul suppli park attribut first calcul pairwis distanc build park distanc matrix output suppli function recre_suppli exampl calcul suppli park area build suppli valu multipli popul count per build obtain total suppli resid r transform build park project cr buildings_pop_sgp sfst_transformbuildings_pop_sgp sfst_cr parks_sgp sfst_transformparks_sgp sfst_cr convert build point centroid calcul distanc everi park m_dist buildings_pop_sgp sfst_centroid sfst_distanceparks_sgp euclidean distanc unitsset_unitsnul m_dist m_dist convert distanc km new column suppli park area buildings_pop_sgparea_suppli recre_supplypark_attribut parks_sgparea dist_matrix m_dist c eg tu et al suppli resid per build buildings_pop_sgparea_supplytopop buildings_pop_sgparea_suppli buildings_pop_sgppopcount div classfigur styletextalign center img srcmanfiguresreadmesupplyparkareatobuildingresidentspng altscreenshot suppli park area build resid singapor base osm data build denot point random subset shown valu coeffici c set color palett bin accord quantil valu width p classcapt screenshot suppli park area build resid singapor base osm data build denot point random subset shown valu coeffici c set color palett bin accord quantil valu p div br data sourc singapor censu data depart statist singaporehttpswwwsingstatgovsgfinddatasearchbythemepopulationgeographicdistributionlatestdata releas term singapor open data licenc version httpsdatagovsgopendatalic singapor subzon polygon singapor master plan subzoneshttpsdatagovsgdatasetmasterplansubzoneboundarynosea releas term singapor open data licenc version httpsdatagovsgopendatalic singapor master plan land use zone year httpsdatagovsgdatasetmasterplanlandus httpsdatagovsgdatasetmasterplanlanduselay releas term singapor open data licensehttpsdatagovsgopendatalic build polygon deriv map data copyrightedhttpswwwopenstreetmaporgcopyright openstreetmap contributor avail httpswwwopenstreetmaporg releas term odbl licensehttpsopendatacommonsorglicensesodblsummari park polygon summaris attribut trail playground deriv map data copyrightedhttpswwwopenstreetmaporgcopyright openstreetmap contributor avail httpswwwopenstreetmaporg releas term odbl licensehttpsopendatacommonsorglicensesodblsummari br refer rossi byrn j picker c role distanc periurban nation park use visit far travel appli geographi tu x huang g wu j guo x travel distanc park size influenc urban park visit urban forestri urban green homepark develop version bug fix remov line rasterise_build clear temporari file use terra packag may caus function output go miss later export directori specifi homepark bug fix helper function raster_class_area use terraextract may output addit third area column unus keep first column output fix error rasterise_build get file land use raster result error eg multipl file syntax renam output use glueglu function also work within packag environ get_buildings_osm add remov invalid build polygon remain spite st_make_valid relat httpsgithubcomrspatialsfissu also add argument sfst_write eg driver delete_dsn append rasterise_buildings_osm chang default argument year null multipl year may necessarili analys add section rasteris build without inform year assum one populationlandus raster gener preprocess step multipl use first object analysi allow raster templat terrarast object input directli argument altern suppli file path raster file check cr similar suppli object eg similar cr sf_build sf_pop suppli similar cr sf_build rastertempl pop_dasymap remov argument raster_templ replac raster argument land_relative_dens br homepark finish develop main function prepar journal submiss contribut homepark outlin propos chang homepark detail info contribut tidyvers packag pleas see develop contribut guidehttpsrstdiotidycontrib fix typo fix typo spell mistak grammat error document directli use github web interfac long chang made _source_ file gener mean youll need edit roxygen commentshttpsroxygenrliborgarticlesroxygenhtml r rd file find r file gener rd read comment first line bigger chang want make bigger chang good idea first file issu make sure someon team agre need youv found bug pleas file issu illustr bug minim reprexhttpswwwtidyverseorghelpreprex also help write unit test need pull request process fork packag clone onto comput havent done recommend use usethiscreate_from_githubecologicalcitieshomepark fork true instal develop depend devtoolsinstall_dev_dep make sure packag pass r cmd check run devtoolscheck r cmd check doesnt pass cleanli good idea ask help continu creat git branch pull request pr recommend use usethispr_initbriefdescriptionofchang make chang commit git creat pr run usethispr_push follow prompt browser titl pr briefli describ chang bodi pr contain fix issuenumb userfac chang add bullet top newsmd ie first header follow style describ httpsstyletidyverseorgnewshtml code style new code follow tidyvers style guidehttpsstyletidyverseorg use stylerhttpscranrprojectorgpackagestyl packag appli style pleas dont restyl code noth pr use roxygenhttpscranrprojectorgpackageroxygen markdown syntaxhttpscranrprojectorgwebpackagesroxygenvignettesrdformattinghtml document use testthathttpscranrprojectorgpackagetestthat unit test contribut test case includ easier accept titl homepark r packag assess spatial provis urban park tag r distanc decay dasymetr map outdoor recreat park provis recreat suppli servic area spatial distribut urban green space urban park author name xiao ping song orcid x affili name kwek yan chong orcid affili affili name depart biolog scienc nation univers singapor index citation_author song chong date jul year bibliographi paperbib output rticlesjoss_articl csl apacsl journal joss summari wake covid pandem signific chang human mobil work environ prompt rethink land use distribut citi particularli offic residenti public space park one promin trend rise demand outdoor urban dweller turn local park recreat leisur venter howev current metric park provis tend focu summari park area within given region tan need characteris wide varieti park serv differ group peopl songa deal limit artifici boundari plan fine spatial scale packag homepark provid way measur multipl aspect park provis home resolut individu build key featur includ abil download relev data openstreetmap osm citi worldwid eg build park featur relat recreat use r packag osmextract lovelac user may also suppli data new build park purpos futur scenario plan summaris park multipl attribut import recreat eg dens veget length waterfront open space trail etc calcul suppli provis park attribut residenti build account distanc decay rossi tub fact suppli park away reduc redistribut coarsescal popul data per censu unit residenti build also known dasymetr map dmowska help highlight specif area peopl benefit presenc park see packag websitehttpsecologicalcitiesgithubiohomepark detail document exampl region summari deriv buildinglevel metric vari wide convent metric park area provis statement need numer metric use measur spatial provis park citi includ summari per capita park area ie park provis ratio servic radiu distanc buffer around park within geograph areal unit censu block administr boundari tan metric use investig park use access well socialcultur issu relat spatial equiti environment justic sister tan howev presenc artifici boundari give rise modifi areal unit problem differ spatial scale result consider variat valu summaris metric sister sinc urban develop typic occur fine spatial scale metric scale individu build provid homepark help overcom limit gao final metric park provis differenti wide varieti park would like affect usag differ group peopl park area featur waterfront open lawn natur veget trail fit amen relat differ type park use user group songa songb holist measur park provis thu includ varieti park attribut import recreat leisur homepark enabl user summaris varieti spatial attribut point eg playground sport fit amen line eg cycl walk trail raster eg land cover type park customis paramet provid user flexibl summaris specif attribut specifi minimum patch size land cover class includ spatial featur within certain distanc beyond park boundari provid finegrain measur varieti park attribut hope homepark contribut toward nuanc understand recreat improv plan design park home across citi state field knowledg current softwar eg r packag measur spatial provis park recreat acknowledg thank edwin w tan justin k h nai use discuss methodolog refer output github_docu readmemd gener readmermd pleas edit file r includ fals knitropts_chunkset collaps true comment figpath manfiguresreadm outwidth homepark hrefhttpsecologicalcitiesgithubiohomeparkimg srcmanfigureslogopng alignright height badg start licens gpl vhttpsimgshieldsiobadgelicensegplvbluesvghttpswwwgnuorglicensesgpl lifecycl experimentalhttpsimgshieldsiobadgelifecycleexperimentalorangesvghttpswwwtidyverseorglifecycleexperiment rcmdcheckhttpsgithubcomecologicalcitieshomeparkworkflowsrcmdcheckbadgesvghttpsgithubcomecologicalcitieshomeparkact testcoveragehttpsgithubcomecologicalcitieshomeparkworkflowstestcoveragebadgesvghttpsgithubcomecologicalcitieshomeparkact doihttpsjosstheojorgpapersjossstatussvghttpsdoiorgjoss badg end spatial provis urban park assess spatial provis urban park residenti build citywid refer packag websitehttpsecologicalcitiesgithubiohomepark demonstr packag may use instal instal develop version homepark github r eval fals devtoolsinstall_githubecologicalcitieshomepark ref main setup load packag r eval fals libraryhomepark r includ fals eval true devtoolsload_al knit manual w latest chang builtinstal yet citat cite homepark acknowledg use pleas cite follow song x p chong k homepark r packag assess spatial provis urban park journal open sourc softwar httpsdoiorgjoss br get bibtex entri run citationhomepark br background park import space recreat leisur citi convent measur park provis tend reli summari park area within given region eg per capita park area howev need characteris wide varieti park eg natur area garden waterfront park outdoor playground etc serv differ group peopl plan fine spatial scale current metric also limit coars spatial resolut presenc artifici boundari br use homepark packag homepark provid way measur _multipl aspects_ park provis home resolut _individu buildings_ key featur includ abil download relev data openstreetmap osm build park featur relat recreat user may also suppli data new build park purpos futur scenario plan redistribut coarsescal popul data per censu unit residenti build also known dasymetr map help highlight specif area peopl benefit presenc park summaris park multipl attribut import recreat eg dens veget length waterfront open space trail etc calcul suppli provis park attribut residenti build account distanc decay fact suppli park away reduc follow section provid highlevel overview variou step requir measur spatial provis park detail code exampl found packag vignett get startedhttpsecologicalcitiesgithubiohomeparkarticleshomeparkhtml process citi popul residenti build home import compon analysi may obtain exampl download build polygon openstreetmap osm subset dataset area within residenti land use zone addit popul count per residenti build allow us calcul total spatial provis park resid help highlight import area peopl benefit presenc park coarsescal popul censu data redistribut residenti build via techniqu known dasymetr map number build level osm use proxi popul densiti ie resid per unit area here exampl screenshot show overlay multipl exampl dataset packag citi singapor use redistribut popul data per censu unit subzon across residenti build r echofals figalign center outwidth figcap pasteexampl screenshot show overlay multipl dataset use redistribut popul across build within residenti land use zone legend order top bottom increas spatial resolut knitrinclude_graphicsmanfiguresreadmedasymetricmappingpng br residenti build polygon singapor popul count found follow exampl dataset r databuildings_pop_sgp headbuildings_pop_sgp br process park park import compon analysi may download osm process use packag follow exampl dataset contain park singapor select attribut relat recreationleisur r dataparks_sgp headparks_sgp subset relev column br recreat suppli process build park polygon provis park attribut per residenti build calcul total suppli park attribut build calcul base follow equat valu depend distanc particular build park attribut park away reduc result neg exponenti function _esupcdsup_ effect also known distanc decay rossi et al httpdxdoiorgjapgeog r echofals figalign center outwidth knitrinclude_graphicsmanfiguresreadmeequationpng total suppli specif park attribut build park n n total number park citywid s_i suppli specif park attribut park perfect posit linear associ assum sinc focu suppli metric d_i distanc kilometr build park eg euclidean manhattan etc c coeffici determin rate decay suppli s_i increas distanc br note valu coeffici c depend park park visitor attribut sociodemograph factor prefer activ may impel shorter longer travel rossi et al httpdxdoiorgjapgeog tu et alhttpsdoiorgjufug lower valu impli park away access frequent visit resid ie still contribut recreat suppli particular build r echofals figalign center outwidth figcap pastefigur valu coeffici c effect distanc decay build park knitrinclude_graphicsmanfiguresreadmecsensitivitypng br r echofals figalign center outwidth figcap pastescreenshot exampl show suppli osm park area residenti build singapor year valu coeffici c left panel right panel build denot pount random subset shown color palett build point bin accord quantil valu knitrinclude_graphicsmanfiguresreadmecsensitivitymappng br calcul suppli park attribut first calcul pairwis distanc build park distanc matrix output suppli function recre_suppli exampl calcul suppli park _area_ build suppli valu multipli popul count per build obtain total suppli resid r calc distanc matrix suppli park area messag fals warn fals transform build park project cr buildings_pop_sgp sfst_transformbuildings_pop_sgp sfst_cr parks_sgp sfst_transformparks_sgp sfst_cr convert build point centroid calcul distanc everi park m_dist buildings_pop_sgp sfst_centroid sfst_distanceparks_sgp euclidean distanc unitsset_unitsnul m_dist m_dist convert distanc km new column suppli park area buildings_pop_sgparea_suppli recre_supplypark_attribut parks_sgparea dist_matrix m_dist c eg tu et al suppli resid per build buildings_pop_sgparea_supplytopop buildings_pop_sgparea_suppli buildings_pop_sgppopcount r echofals figalign center outwidth figcap pastescreenshot suppli park area build resid singapor base osm data build denot point random subset shown valu coeffici c set color palett bin accord quantil valu knitrinclude_graphicsmanfiguresreadmesupplyparkareatobuildingresidentspng r includ fals rmbuildings_pop_sgp parks_sgp pop_sgp m_dist br data sourc singapor censu data depart statist singaporehttpswwwsingstatgovsgfinddatasearchbythemepopulationgeographicdistributionlatestdata releas term singapor open data licenc version httpsdatagovsgopendatalic singapor subzon polygon singapor master plan subzoneshttpsdatagovsgdatasetmasterplansubzoneboundarynosea releas term singapor open data licenc version httpsdatagovsgopendatalic singapor master plan land use zone year httpsdatagovsgdatasetmasterplanlandus httpsdatagovsgdatasetmasterplanlanduselay releas term singapor open data licensehttpsdatagovsgopendatalic build polygon deriv map data copyrightedhttpswwwopenstreetmaporgcopyright openstreetmap contributor avail httpswwwopenstreetmaporg releas term odbl licensehttpsopendatacommonsorglicensesodblsummari park polygon summaris attribut trail playground deriv map data copyrightedhttpswwwopenstreetmaporgcopyright openstreetmap contributor avail httpswwwopenstreetmaporg releas term odbl licensehttpsopendatacommonsorglicensesodblsummari br refer rossi byrn j picker c role distanc periurban nation park use visit far travel _appli geography_ tu x huang g wu j guo x travel distanc park size influenc urban park visit _urban forestri urban greening_ output github_docu always_allow_html true readmemd gener readmermd pleas edit file r echo fals knitropts_chunkset collaps true comment figpath manfigur homepark spatial provis urban park badg start licens gpl vhttpsimgshieldsiobadgelicensegplvbluesvghttpswwwgnuorglicensesgpl lifecycl experimentalhttpsimgshieldsiobadgelifecycleexperimentalorangesvghttpswwwtidyverseorglifecycleexperiment rcmdcheckhttpsgithubcomecologicalcitieshomeparkworkflowsrcmdcheckbadgesvghttpsgithubcomecologicalcitieshomeparkact testcoveragehttpsgithubcomecologicalcitieshomeparkworkflowstestcoveragebadgesvghttpsgithubcomecologicalcitieshomeparkact doihttpsjosstheojorgpapersjossstatussvghttpsdoiorgjoss badg end hrefhttpsecologicalcitiesgithubiohomeparkimg srcmanfigureslogopng alignright height homepark r packag assess spatial provis urban park residenti build citywid refer packag websitehttpsecologicalcitiesgithubiohomepark demonstr packag may use instal instal develop version homepark github r eval fals devtoolsinstall_githubecologicalcitieshomepark ref main setup load packag r eval fals libraryhomepark r includ fals eval true devtoolsload_al knit manual w latest chang builtinstal yet citat cite homepark acknowledg use pleas cite follow song x p chong k homepark r packag assess spatial provis urban park journal open sourc softwar httpsdoiorgjoss br get bibtex entri run citationhomepark br background park import space recreat leisur citi convent measur park provis tend reli summari park area within given region eg per capita park area howev need characteris wide varieti park eg natur area garden waterfront park outdoor playground etc serv differ group peopl plan fine spatial scale current metric also limit coars spatial resolut presenc artifici boundari br use homepark packag homepark provid way measur _multipl aspects_ park provis home resolut _individu buildings_ key featur includ abil download relev data openstreetmap osm build park featur relat recreat user may also suppli data new build park purpos futur scenario plan redistribut coarsescal popul data per censu unit residenti build also known dasymetr map help highlight specif area peopl benefit presenc park summaris park multipl attribut import recreat eg dens veget length waterfront open space trail etc calcul suppli provis park attribut residenti build account distanc decay fact suppli park away reduc follow section provid highlevel overview variou step requir measur spatial provis park detail code exampl found packag vignett get startedarticleshomeparkhtml process citi popul residenti build home import compon analysi may obtain exampl download build polygon openstreetmap osm subset dataset area within residenti land use zone addit popul count per residenti build allow us calcul total spatial provis park resid help highlight import area peopl benefit presenc park coarsescal popul censu data redistribut residenti build via techniqu known dasymetr map number build level osm use proxi popul densiti ie resid per unit area here exampl screenshot show overlay multipl exampl dataset packag citi singapor use redistribut popul data per censu unit subzon across residenti build r echofals figalign center outwidth figcap pasteexampl screenshot show overlay multipl dataset use redistribut popul across build within residenti land use zone legend order top bottom increas spatial resolut knitrinclude_graphicsmanfiguresreadmedasymetricmappingpng br residenti build polygon singapor popul count found follow exampl dataset r databuildings_pop_sgp headbuildings_pop_sgp br process park park import compon analysi may download osm process use packag follow exampl dataset contain park singapor select attribut relat recreationleisur r dataparks_sgp headparks_sgp subset relev column br recreat suppli process build park polygon provis park attribut per residenti build calcul total suppli park attribut build calcul base follow equat valu depend distanc particular build park attribut park away reduc result neg exponenti function _esupcdsup_ effect also known distanc decay rossi et al httpdxdoiorgjapgeog r echofals figalign center outwidth knitrinclude_graphicsmanfiguresreadmeequationpng total suppli specif park attribut build park n n total number park citywid s_i suppli specif park attribut park perfect posit linear associ assum sinc focu suppli metric d_i distanc kilometr build park eg euclidean manhattan etc c coeffici determin rate decay suppli s_i increas distanc br note valu coeffici c depend park park visitor attribut sociodemograph factor prefer activ may impel shorter longer travel rossi et al httpdxdoiorgjapgeog tu et alhttpsdoiorgjufug lower valu impli park away access frequent visit resid ie still contribut recreat suppli particular build r echofals figalign center outwidth figcap pastefigur valu coeffici c effect distanc decay build park knitrinclude_graphicsmanfiguresreadmecsensitivitypng br r echofals figalign center outwidth figcap pastescreenshot exampl show suppli osm park area residenti build singapor year valu coeffici c left panel right panel build denot point random subset shown color palett bin accord quantil valu knitrinclude_graphicsmanfiguresreadmecsensitivitymappng br calcul suppli park attribut first calcul pairwis distanc build park distanc matrix output suppli function recre_suppli exampl calcul suppli park _area_ build suppli valu multipli popul count per build obtain total suppli resid r calc distanc matrix suppli park area messag fals warn fals transform build park project cr buildings_pop_sgp sfst_transformbuildings_pop_sgp sfst_cr parks_sgp sfst_transformparks_sgp sfst_cr convert build point centroid calcul distanc everi park m_dist buildings_pop_sgp sfst_centroid sfst_distanceparks_sgp euclidean distanc unitsset_unitsnul m_dist m_dist convert distanc km new column suppli park area buildings_pop_sgparea_suppli recre_supplypark_attribut parks_sgparea dist_matrix m_dist c eg tu et al suppli resid per build buildings_pop_sgparea_supplytopop buildings_pop_sgparea_suppli buildings_pop_sgppopcount r echofals figalign center outwidth figcap pastescreenshot suppli park area build resid singapor base osm data build denot point random subset shown valu coeffici c set color palett bin accord quantil valu knitrinclude_graphicsmanfiguresreadmesupplyparkareatobuildingresidentspng r includ fals rmbuildings_pop_sgp parks_sgp pop_sgp m_dist br data sourc singapor censu data depart statist singaporehttpswwwsingstatgovsgfinddatasearchbythemepopulationgeographicdistributionlatestdata releas term singapor open data licenc version httpsdatagovsgopendatalic singapor subzon polygon singapor master plan subzoneshttpsdatagovsgdatasetmasterplansubzoneboundarynosea releas term singapor open data licenc version httpsdatagovsgopendatalic singapor master plan land use zone year httpsdatagovsgdatasetmasterplanlandus httpsdatagovsgdatasetmasterplanlanduselay releas term singapor open data licensehttpsdatagovsgopendatalic build polygon deriv map data copyrightedhttpswwwopenstreetmaporgcopyright openstreetmap contributor avail httpswwwopenstreetmaporg releas term odbl licensehttpsopendatacommonsorglicensesodblsummari park polygon summaris attribut trail playground deriv map data copyrightedhttpswwwopenstreetmaporgcopyright openstreetmap contributor avail httpswwwopenstreetmaporg releas term odbl licensehttpsopendatacommonsorglicensesodblsummari br refer rossi byrn j picker c role distanc periurban nation park use visit far travel appli geographi tu x huang g wu j guo x travel distanc park size influenc urban park visit urban forestri urban green titl get start homepark author song xiao ping date r sysdat opengraph imag src manfigureslogopng output rmarkdownhtml_vignett vignett vignetteindexentryget start homepark vignetteengineknitrrmarkdown vignetteencodingutf r includ fals knitropts_chunkset collaps true comment overview park import space recreat leisur citi convent metric measur provis park citi resid usual summaris park area within given region eg per capita park area howev need characteris wide varieti park eg natur area garden waterfront park outdoor playground etc serv differ group peopl plan fine spatial scale metric also limit coars spatial resolut presenc artifici boundari packag homepark provid way measur _multipl aspects_ park provis home resolut _individu buildings_ key featur includ abil download relev data openstreetmap osm build park featur relat recreat user may also suppli data new build park purpos futur scenario plan redistribut coarsescal popul data per censu unit residenti build also known dasymetr map help highlight specif area peopl benefit presenc park summaris park multipl attribut import recreat eg dens veget length waterfront open space trail etc calcul suppli provis park attribut residenti build account distanc decay fact suppli park away reduc instal instal develop version homepark github r eval fals devtoolsinstall_githubecologicalcitieshomepark ref main setup load packag r eval true libraryhomepark r includ fals eval fals devtoolsload_al knit manual w latest chang builtinstal yet vignett check rcmd check packag build use libraryhomepark br process citi popul first step process data relat residenti popul eg popul censu count residenti build order get popul count per build packag come exampl data citi singapor includ popul countshttpswwwsingstatgovsgfinddatasearchbythemepopulationgeographicdistributionlatestdata per censu unithttpsdatagovsgdatasetmasterplansubzoneboundarynosea year land use zone base master plan releas year httpsdatagovsgdatasetmasterplanlandus httpsdatagovsgdatasetmasterplanlanduselay get residenti build popul censu conduct download build polygon openstreetmap subset area within residenti land use zone master plan process polygon rasteris prepar dasymetr map r load data eval fals datapop_sgp popul count per censu unit year pop_sgp sfst_transformpop_sgp sfst_cr transform project cr merg censu unit chosen year singl multipolygon next function requir polygon merg city_boundari pop_sgp dplyrfilteryear sfst_union sfst_as_sf smoothrfill_holesthreshold unitsset_unit km clean smoothrdrop_crumbsthreshold unitsset_unit km sfst_make_valid get build openstreetmap use closest match archiv date raw data save tempdir unless otherwis specifi build get_buildings_osmplac city_boundari date asdatec dplyrmutateyear rasteris popul specifi relev column name pop_rast rasterise_poppop_sgp census_block subzone_n pop_count pop_count year year rasteris land use specifi relev column name residenti land use class datalanduse_sgp landuse_sgp sfst_transformlanduse_sgp sfst_cr transform project cr landuse_rast rasterise_landuselanduse_sgp land_us lu_desc subset c residenti commerci residenti residenti commerci st storey residenti institut sf_pop pop_sgp rasteris build specifi relev column name column level proxi dens popul build ie resid per unit area buildings_rast rasterise_buildingsbuild proxy_pop_dens level year year sf_pop pop_sgp sf_landus landuse_sgp next perform dasymetr map redistribut popul count per censu unit region year residenti build number build level osm use proxi popul densiti ie resid per unit area r dasymetr map eval fals list element year popdens_rast pop_dasymappop_polygon pop_rasterspop_polygon pop_perblock_count pop_rasterspop_count pop_perblock_dens pop_rasterspop_dens land_relative_dens buildings_rast br here screenshot show overlay multipl dataset use redistribut popul data per censu unit subzon across residenti build r echofals figalign center outwidth figcap pasteexampl screenshot show overlay multipl dataset use redistribut popul across build within residenti land use zone legend order top bottom increas spatial resolut knitrinclude_graphicsmanfiguresreadmedasymetricmappingpng br final convert raster build polygon popul count note provid exampl dataset databuildings_pop_sgp packag r eval fals buildings_pop_sgp pop_density_polygoniseinput_rast popdens_rast headbuildings_pop_sgp r echo fals databuildings_pop_sgp buildings_pop_sgp sfst_transformbuildings_pop_sgp sfst_cr transform project cr headbuildings_pop_sgp br process park exampl dataset dataparks_sgp contain park singapor select attribut relat recreationleisur download osm download process follow park within citi provid polygon boundari download process similar manner r get park attribut eval fals get park polygon parks_sgp get_parks_osmcity_boundari date asdatec get playground point playground get_playgrounds_osmplac city_boundari date asdatec get trail line trail get_trails_osmplac city_boundari date asdatec convert list point_list listplayground calcul attribut requir input name list namespoint_list cplayground line_list listtrail namesline_list ctrail per park calcul point countdens line lengthratio parks_sgp parks_calc_attributespark parks_sgp data_point point_list data_lin line_list rel true headparks_sgp view park attribut r echo fals dataparks_sgp parks_sgp sfst_transformparks_sgp sfst_cr transform project cr headparks_sgp br recreat suppli process data use calcul provis park attribut per residenti build total suppli park attribut build calcul base follow equat valu depend distanc particular build park suppli park away gener reduc result neg exponenti function _esupcdsup_ effect also known distanc decay rossi et al httpdxdoiorgjapgeog r echofals figalign center outwidth knitrinclude_graphicsmanfiguresreadmeequationpng total suppli specif park attribut build park n n total number park citywid s_i suppli specif park attribut park perfect posit linear associ assum sinc focu suppli metric d_i distanc kilometr build park eg euclidean manhattan etc c coeffici determin rate decay suppli s_i increas distanc br valu coeffici c depend park park visitor attribut sociodemograph factor prefer activ may impel shorter longer travel rossi et al httpdxdoiorgjapgeog exampl noneuclidean distanc decay ratio visitor urban park beij tu et al httpsdoiorgjufug fit neg exponenti curv _esupcdsup_ coeffici c empir determin __ empir cutoff distanc km peopl would visit park km beyond peopl would visit park r echofals figalign center outwidth figcap pastefigur valu coeffici c effect distanc decay build park knitrinclude_graphicsmanfiguresreadmecsensitivitypng br r echofals figalign center outwidth figcap pastescreenshot exampl show suppli osm park area residenti build singapor year valu coeffici c left panel right panel build denot pount random subset shown color palett build point bin accord quantil valu knitrinclude_graphicsmanfiguresreadmecsensitivitymappng br calcul suppli park attribut first calcul pairwis distanc build park distanc matrix output suppli function recre_suppli exampl calcul suppli park _area_ build suppli valu multipli popul count per build obtain total suppli resid help highlight import area peopl would benefit presenc park r calc distanc matrix suppli park area messag fals warn fals convert build point centroid calcul distanc everi park m_dist buildings_pop_sgp sfst_centroid sfst_distanceparks_sgp euclidean distanc unitsset_unitsnul m_dist m_dist convert distanc km new column suppli park area buildings_pop_sgparea_suppli recre_supplypark_attribut parks_sgparea dist_matrix m_dist c eg tu et al suppli resid per build buildings_pop_sgparea_supplytopop buildings_pop_sgparea_suppli buildings_pop_sgppopcount r includ fals rmm_dist visualis suppli park area build resid use librarytmap r code plot use buildinglevel metric use tmap eval fals convert build point centroid plot buildings_pop_sgp buildings_pop_sgp sfst_centroid dplyrmutateacrosseveryth asvector remov attribut column plot dplyrmutateacrosscol containsarea convert km fn functionx xe tmaptmap_modeview tmaptm_basemapesriworldgraycanva tmaptm_shapeparks_sgp tmaptm_polygonscol ac alpha bordercol grey borderalpha tmaptm_shapebuildings_pop_sgp tmaptm_dotstitl suppli park area kmsupsup col area_supplytopop bordercol transpar palett viridisviridi style quantil size alpha showna fals r echofals figalign center outwidth figcap pastescreenshot suppli park area build resid singapor base osm data build denot point random subset shown color palett bin accord quantil valu knitrinclude_graphicsmanfiguresreadmesupplyparkareatobuildingresidentspng br final also possibl summaris suppli valu build within coarser spatial region allow us compar result convent park provis metric per capita park area select year r echo fals datapop_sgp pop_sgp sfst_transformpop_sgp sfst_cr transform project cr r calcul year pop_ pop_sgp dplyrfilteryear calcul summari statist eg sum median mean suppli park area within region r summaris suppli park area per subzon messag fals warn fals append subzon info build build intersect subzon buildings_subzon buildings_pop_sgp sfst_joinpop_ join sfst_intersect left true sfst_set_geometrynul summaris totalmedianaverag suppli valu build within subzon buildings_subzon buildings_subzon dplyrgroup_bysubzone_n dplyrsummariseacrosscol carea_suppli area_supplytopop fn sum name col_sum acrosscol carea_suppli area_supplytopop fn median name col_median acrosscol carea_suppli area_supplytopop fn mean name col_mean join inform pop_ calcul suppli per capita pop_ pop_ dplyrleft_joinbuildings_subzon dplyrmutatearea_supplyperpop area_supplytopop_sum pop_count e convert km dplyrmutatearea_supplyperpop ifelseisinfinitearea_supplyperpop na area_supplyperpop make infinit na calcul convent per capita park area censu unit r includ fals sfst_agrpop_ constant sfst_agrparks_sgp constant httpsgithubcomrspatialsfissu r convent park provis metric per capita park area messag fals warn fals subzones_park sfst_intersectionpop_ parks_sgp subset censu unit polygon intersect park append park info subzones_parksparkarea_m sfst_areasubzones_park calc area polygon calcul total park area per censu unit subzones_park subzones_park dplyrgroup_bysubzone_n dplyrsummariseparkarea_m asnumericsumparkarea_m sfst_drop_geometri join inform pop_ calcul park area per capita pop_ pop_ dplyrleft_joinsubzones_park dplyrmutateparkarea_m ifelseisnaparkarea_m parkarea_m make na dplyrmutateparkperpop_m parkarea_m pop_count e convert km dplyrmutateparkperpop_m ifelseisinfiniteparkperpop_m make infinit na na parkperpop_m dplyrmutateparkperpop_m ifelseisnanparkperpop_m make nan na na parkperpop_m r includ fals rmbuildings_subzon subzones_park similarli visualis park metric summaris per region r code plot subzonelevel metric use tmap eval fals tmaptm_basemapesriworldgraycanva tmaptm_shapepop_ tmaptm_polygonstitl park area per capita kmsupsup group subzon per capita park area convent col parkperpop_m palett green alpha style quantil bordercol white borderalpha lwd tmaptm_shapepop_ tmaptm_polygonstitl suppli park area per capita kmsupsup group subzon per capita suppli park area col area_supplyperpop palett green alpha style quantil bordercol white borderalpha lwd br follow figur provid visual comparison provis park area per capita summaris per region subzon base convent metric left panel deriv residenti build right panel interact map viewabl onlin httpsecologicalcitiesgithubiohomeparkarticlesonlinemetriccomparisonshtml r echofals figalign center outwidth figcap pastescreenshot provis park area per capita within subzon singapor measur total park area per subzon left panel suppli park area resid within residenti build right panel base osm data calcul suppli valu per build valu coeffici c set color palett bin accord quantil valu knitrinclude_graphicsmanfiguresvignettesubzoneparkareapng r includ fals rmtm buildings_pop_sgp parks_sgp pop_sgp pop_ br data sourc singapor censu data depart statist singaporehttpswwwsingstatgovsgfinddatasearchbythemepopulationgeographicdistributionlatestdata releas term singapor open data licenc version httpsdatagovsgopendatalic singapor subzon polygon singapor master plan subzoneshttpsdatagovsgdatasetmasterplansubzoneboundarynosea releas term singapor open data licenc version httpsdatagovsgopendatalic singapor master plan land use zone year httpsdatagovsgdatasetmasterplanlandus httpsdatagovsgdatasetmasterplanlanduselay releas term singapor open data licensehttpsdatagovsgopendatalic build polygon deriv map data copyrightedhttpswwwopenstreetmaporgcopyright openstreetmap contributor avail httpswwwopenstreetmaporg releas term odbl licensehttpsopendatacommonsorglicensesodblsummari park polygon summaris attribut trail playground deriv map data copyrightedhttpswwwopenstreetmaporgcopyright openstreetmap contributor avail httpswwwopenstreetmaporg releas term odbl licensehttpsopendatacommonsorglicensesodblsummari br refer rossi byrn j picker c role distanc periurban nation park use visit far travel appli geographi tu x huang g wu j guo x travel distanc park size influenc urban park visit urban forestri urban green titl park area provis metric comparison author song xiao ping date r sysdat opengraph imag src manfigureslogopng output rmarkdownhtml_docu r includ fals knitropts_chunkset collaps true comment r eval true includ fals libraryhomepark r includ fals eval fals devtoolsload_al knit manual w latest chang builtinstal yet vignett check rcmd check packag build use libraryhomepark r load data includ fals databuildings_pop_sgp buildings_pop_sgp sfst_transformbuildings_pop_sgp sfst_cr transform project cr dataparks_sgp parks_sgp sfst_transformparks_sgp sfst_cr transform project cr datapop_sgp pop_sgp sfst_transformpop_sgp sfst_cr transform project cr r calc distanc matrix suppli park area messag fals warn fals includ fals convert build point centroid calcul distanc everi park m_dist buildings_pop_sgp sfst_centroid sfst_distanceparks_sgp euclidean distanc unitsset_unitsnul m_dist m_dist convert distanc km new column suppli park area buildings_pop_sgparea_suppli recre_supplypark_attribut parks_sgparea dist_matrix m_dist c eg tu et al suppli resid per build buildings_pop_sgparea_supplytopop buildings_pop_sgparea_suppli buildings_pop_sgppopcount rmm_dist r includ fals calcul year pop_ pop_sgp dplyrfilteryear r summaris suppli park area per censu unit messag fals warn fals includ fals append subzon info build build intersect subzon buildings_subzon buildings_pop_sgp sfst_joinpop_ join sfst_intersect left true sfst_set_geometrynul summaris totalmedianaverag suppli valu build within subzon buildings_subzon buildings_subzon dplyrgroup_bysubzone_n dplyrsummariseacrosscol carea_suppli area_supplytopop fn sum name col_sum acrosscol carea_suppli area_supplytopop fn median name col_median acrosscol carea_suppli area_supplytopop fn mean name col_mean join inform pop_ calcul suppli per capita pop_ pop_ dplyrleft_joinbuildings_subzon dplyrmutatearea_supplyperpop area_supplytopop_sum pop_count e convert km dplyrmutatearea_supplyperpop ifelseisinfinitearea_supplyperpop na area_supplyperpop make infinit na r includ fals sfst_agrpop_ constant sfst_agrparks_sgp constant httpsgithubcomrspatialsfissu r convent park provis metric per capita park area messag fals warn fals includ fals subzones_park sfst_intersectionpop_ parks_sgp subset censu unit polygon intersect park append park info subzones_parksparkarea_m sfst_areasubzones_park calc area polygon calcul total park area per censu unit subzones_park subzones_park dplyrgroup_bysubzone_n dplyrsummariseparkarea_m asnumericsumparkarea_m sfst_drop_geometri join inform pop_ calcul park area per capita pop_ pop_ dplyrleft_joinsubzones_park dplyrmutateparkarea_m ifelseisnaparkarea_m parkarea_m make na dplyrmutateparkperpop_m parkarea_m pop_count e convert km dplyrmutateparkperpop_m ifelseisinfiniteparkperpop_m make infinit na na parkperpop_m dplyrmutateparkperpop_m ifelseisnanparkperpop_m make nan na na parkperpop_m r includ fals rmbuildings_subzon subzones_park br follow interact map provid visual comparison metric park area provis calcul get startedhttpsecologicalcitiesgithubiohomeparkarticleshomeparkhtml vignett toggl map layer view per capita provis park area summaris per region subzon r plot park metric map echo fals messag fals warn fals dpi figheight figwidth figcappastemap suppli park area singapor base osm data build denot point random subset shown color palett bin accord quantil valu convert build point centroid plot buildings_pop_sgp buildings_pop_sgp sfst_centroid dplyrmutateacrosseveryth asvector remov attribut column plot area relat var convert km buildings_pop_sgp buildings_pop_sgp dplyrmutateacrosscol containsarea fn functionx xe random sampl build setse process get proper rang color scale later get max valu per build particular round buildings_max buildings_pop_sgp tidyrpivot_longercol carea_suppli area_supplytopop names_to suppli values_to valu dplyrgroup_bysuppli dplyrslicewhichmaxvalu tidyrpivot_widernames_from suppli values_from valu subset random sampl alreadi done exampl dataset buildings_pop_sgp dplyrslice_samplebuildings_pop_sgp n nrowbuildings_pop_sgp append max build random subset buildings_pop_sgp buildings_pop_sgp dplyrbind_rowsbuildings_max tmaptmap_modeview tmaptmap_optionscheckandfix true tm tmaptm_basemapcesriworldgraycanva cartodbdarkmatt openstreetmap park tmaptm_shapeparks_sgp dplyrselectid name area tmaptm_polygonsgroup park col ac alpha bordercol grey borderalpha build tmaptm_shapebuildings_pop_sgp tmaptm_dotstitl build suppli park area kmsupsup group build suppli park area col area_suppli bordercol transpar palett viridisviridi style quantil size alpha interact fals glitch valu hover textpopup popupvar null showna fals tmaptm_shapebuildings_pop_sgp tmaptm_dotstitl build resid suppli park area kmsupsup group build suppli park area resid col area_supplytopop bordercol transpar palett viridisviridi style quantil size alpha interact fals glitch valu hover textpopup popupvar null showna fals censu unit tmaptm_shapepop_ tmaptm_polygonstitl suppli park area per capita kmsupsup group subzon per capita suppli park area col area_supplyperpop palett green alpha style quantil bordercol white borderalpha lwd tmaptm_shapepop_ tmaptm_polygonstitl park area per capita kmsupsup group subzon per capita park area convent col parkperpop_m palett green alpha style quantil bordercol white borderalpha lwd pipe tmap object tmap_leaflet creat leaflet widget use leaflethidegroup tm tmaptmap_leaflet leaflethidegroupbuild suppli park area leaflethidegroupsubzon per capita suppli park area leaflethidegroupsubzon per capita park area convent r includ fals rmtm buildings_pop_sgp parks_sgp pop_sgp pop_ br data sourc singapor censu data depart statist singaporehttpswwwsingstatgovsgfinddatasearchbythemepopulationgeographicdistributionlatestdata releas term singapor open data licenc version httpsdatagovsgopendatalic singapor subzon polygon singapor master plan subzoneshttpsdatagovsgdatasetmasterplansubzoneboundarynosea releas term singapor open data licenc version httpsdatagovsgopendatalic singapor master plan land use zone year httpsdatagovsgdatasetmasterplanlandus httpsdatagovsgdatasetmasterplanlanduselay releas term singapor open data licensehttpsdatagovsgopendatalic build polygon deriv map data copyrightedhttpswwwopenstreetmaporgcopyright openstreetmap contributor avail httpswwwopenstreetmaporg releas term odbl licensehttpsopendatacommonsorglicensesodblsummari park polygon summaris attribut trail playground deriv map data copyrightedhttpswwwopenstreetmaporgcopyright openstreetmap contributor avail httpswwwopenstreetmaporg releas term odbl licensehttpsopendatacommonsorglicensesodblsummari titl homepark r packag assess spatial provis urban park tag r distanc decay dasymetr map outdoor recreat park provis recreat suppli servic area spatial distribut urban green space urban park author name xiao ping song orcid x affili name kwek yan chong orcid affili affili name depart biolog scienc nation univers singapor index citation_author song chong date jul year bibliographi paperbib output rticlesjoss_articl csl apacsl journal joss summari wake covid pandem signific chang human mobil work environ prompt rethink land use distribut citi particularli offic residenti public space park one promin trend rise demand outdoor urban dweller turn local park recreat leisur venter howev current metric park provis tend focu summari park area within given region tan need characteris wide varieti park serv differ group peopl songa deal limit artifici boundari plan fine spatial scale packag homepark provid way measur multipl aspect park provis home resolut individu build key featur includ abil download relev data openstreetmap osm citi worldwid eg build park featur relat recreat use r packag osmextract lovelac user may also suppli data new build park purpos futur scenario plan summaris park multipl attribut import recreat eg dens veget length waterfront open space trail etc calcul suppli provis park attribut residenti build account distanc decay rossi tub fact suppli park away reduc redistribut coarsescal popul data per censu unit residenti build also known dasymetr map dmowska help highlight specif area peopl benefit presenc park see packag websitehttpsecologicalcitiesgithubiohomepark detail document exampl region summari deriv buildinglevel metric vari wide convent metric park area provis statement need numer metric use measur spatial provis park citi includ summari per capita park area ie park provis ratio servic radiu distanc buffer around park within geograph areal unit censu block administr boundari tan metric use investig park use access well socialcultur issu relat spatial equiti environment justic sister tan howev presenc artifici boundari give rise modifi areal unit problem differ spatial scale result consider variat valu summaris metric sister sinc urban develop typic occur fine spatial scale metric scale individu build provid homepark help overcom limit gao final metric park provis differenti wide varieti park would like affect usag differ group peopl park area featur waterfront open lawn natur veget trail fit amen relat differ type park use user group songa songb holist measur park provis thu includ varieti park attribut import recreat leisur homepark enabl user summaris varieti spatial attribut point eg playground sport fit amen line eg cycl walk trail raster eg land cover type park customis paramet provid user flexibl summaris specif attribut specifi minimum patch size land cover class includ spatial featur within certain distanc beyond park boundari provid finegrain measur varieti park attribut hope homepark contribut toward nuanc understand recreat improv plan design park home across citi state field knowledg current softwar eg r packag measur spatial provis park recreat acknowledg thank edwin w tan justin k h nai use discuss methodolog refer gener roxygen edit hand pleas edit document rpop_dasymapr namepop_dasymap aliaspop_dasymap titleperform dasymetr map rasteris popul data usag pop_dasymap pop_polygon pop_perblock_count pop_perblock_dens land_relative_dens filenam null overwrit true argument itempop_polygonscodesf polygon popul data singl time period may extract codepop_polygon list element gener coderasterise_pop itempop_perblock_countrast popul count per censu block singl time period may extract codepop_count_rast list element gener coderasterise_pop itempop_perblock_densityrast popul densiti per censu block singl time period may extract codepop_density_rast list element gener coderasterise_pop itemland_relative_densityrast rel densiti eg suitabl habit land singl time period may extract result gener coderasterise_build coderasterise_landus itemfilenamecharact option export output raster disk itemoverwritelog argument pass codeterrawriterast codetru codefilenam overwritten itemoth argument pass codeterrawriterast valu raster popul densiti base rel densiti valu land defin codeland_relative_dens descript distribut popul data per censu block across inhabit land defin codeland_relative_dens raster data provid snapshot popul singl time period eg year creat packag function eg coderasterise_pop coderasterise_build multipl year present intermedi dataset user extract relev list element singl year interest see exampl input data similar project coordin refer system specif target area exampl dontrun datapop_sgp popul censu block polygon datalanduse_sgp land use polygon transform project cr pop_sgp sfst_transformpop_sgp sfst_cr landuse_sgp sfst_transformlanduse_sgp sfst_cr merg censu block chosen year singl multipolygon function requir polygon merg city_boundari pop_sgp dplyrfilteryear sfst_union sfst_as_sf smoothrfill_holesthreshold unitsset_unit km clean smoothrdrop_crumbsthreshold unitsset_unit km sfst_make_valid build get_buildings_osmplac city_boundari date asdat mutateyear rasteris popul landus build pop_rast rasterise_poppop_sgp census_block subzone_n pop_count pop_count landuse_rast rasterise_landuselanduse_sgp land_us lu_desc subset c residenti commerci residenti residenti commerci st storey residenti institut sf_pop pop_sgp match_landuse_pop recent buildings_rast rasterise_buildingsbuild proxy_pop_dens level year year sf_pop pop_sgp sf_landus landuse_sgp match_buildings_pop closest final perform dasymetr map select year popdens_rast pop_dasymappop_polygon pop_rasterspop_polygon pop_perblock_count pop_rasterspop_count pop_perblock_dens pop_rasterspop_dens land_relative_dens buildings_rast filenam buildings_popdensitytif wopt listgdalccompresslzw gener roxygen edit hand pleas edit document rmatchyearr namematchyear aliasmatchyear titlematch year dataset interest anoth data sourc usag matchyear data data_tomatch match cexact closest recent soonest year null argument itemdatatabular object eg codedatafram codesf codetibbl contain data itemdata_tomatchtabular object eg codedatafram codesf codetibbl match data itemmatchtyp match either codeexact codeclosest coderec codesoonest itemyearspecifi column name year within dataset column dataset numer valu codedata addit column codeyear_match repres match year dataset descript helper function match year data either exact recent past closest past futur soonest futur year anoth dataset column name within dataset repres year must specifi dataset contain multipl year must long format gener roxygen edit hand pleas edit document rdatasingapor doctypedata nameparks_sgp aliasparks_sgp titlepubl park singapor format codesf polygon sourc map data hrefhttpswwwopenstreetmaporgcopyrightcopyright openstreetmap contributor avail httpswwwopenstreetmaporg made avail via hrefhttpsopendatacommonsorglicensesodblsummaryodbl licens usag parks_sgp descript exampl dataset park polygon singapor download openstreetmap data snapshot code hrefhttpsdownloadgeofabrikdegeofabrik databas use function codeget_parks_osm includ summari column select attribut relat outdoor recreat ie playground see codeget_playgrounds_osm trail see codeget_trails_osm calcul use function codeparks_calc_attribut exampl dataparks_sgp headparks_sgp keyworddataset gener roxygen edit hand pleas edit document rdatasingapor doctypedata namepop_sgp aliaspop_sgp titlepopul count within censu block polygon singapor format codesf polygon censu data year data long format row repeat censu year follow column use packag describ itemsubzone_ncensu block name itemyearcensu year itempop_countpopul count within censu block sourc contain censu data hrefhttpswwwsingstatgovsgfinddatasearchbythemepopulationgeographicdistributionlatestdatadepart statist singapor polygon hrefhttpsdatagovsgdatasetmasterplansubzoneboundarynoseasingapor master plan subzon made avail term hrefhttpsdatagovsgopendatalicencesingapor open data licenc version usag pop_sgp descript exampl dataset contain singapor censu data year hrefhttpswwwsingstatgovsgfinddatasearchbythemepopulationgeographicdistributionlatestdatadepart statist singapor join name master plan subzon polygon hrefhttpsdatagovsgdatasetmasterplansubzoneboundarynoseadatagovsg dataset releas hrefhttpsdatagovsgopendatalicencesingapor open data licens exampl datapop_sgp headpop_sgp keyworddataset gener roxygen edit hand pleas edit document rrasterise_buildingsr namerasterise_build aliasrasterise_build titlerasteris build polygon usag rasterise_build sf_build proxy_pop_dens null year null sf_pop null sf_landus null match_buildings_pop closest match_buildings_landus closest raster_templ null dir_process tempdir dir_export null overwrit true wopt listgdal ccompresslzw argument itemsf_buildingscodesf polygon build data project coordin refer system itemproxy_pop_densitycharact specifi column name build attribut use indic popul densiti eg build height level column use assign valu output raster provid popul densiti across build pixel assum similar itemyearcharact specifi column name year within codesf_build codesf_landus codesf_pop provid default codenul assum year column column data numer itemsf_popopt codesf polygon contain popul censu data column contain censu year absent output build raster associ specif popul censu year itemsf_landuseopt codesf polygon land use zone itemmatch_buildings_popcharact type match codesf_build codesf_pop provid pass codematch argument function codematchyear either codeexact codeclosest coderec codesoonest default codeclosest itemmatch_buildings_landusecharact type match codesf_build codesf_landus provid pass codematch argument function codematchyear either codeexact codeclosest coderec codesoonest default codeclosest argument use codesf_pop provid itemraster_templateeith codeterrarast object filepath raster use defin pixel resolut extent nrow ncol output raster default raster templat codetempdir process previou step object pass codey argument codeterraraster default templat raster gener function coderasterise_pop within codedir_process see next argument itemdir_processingcharact directori get intermedi file gener previou step eg rasteris populationland use data default codetempdir itemdir_exportcharact option file path directori export output raster itemoverwritelog argument pass codeterrawriterast default codetru itemwoptlist argument pass codeterrawriterast itemoth argument pass codeterrawriterast valu list raster file zero valu convert codena descript rasteris build polygon codesf_build refer popul codesf_pop andor land use data codesf_landus suppli multipl output list raster gener build data multipl year present detail popul codesf_pop andor land use data codesf_landus suppli raster must previous gener codetempdir use function coderasterise_pop coderasterise_landus respect rasteris build mask away ie convert pixel codena area zero popul andor land use data accord respect match year custom way match year dataset set via helper function codematchyear argument codematch_buildings_pop provid way match year codesf_pop provid specif year codesf_build build raster associ specif popul censu year remov match popul censu year necessari argument codematch_buildings_landus provid way match year codesf_build specif year codesf_landus codesf_pop provid main refer point dataset codesf_pop primari focu analysi popul data exampl dontrun load data datapop_sgp popul censu block polygon datalanduse_sgp land use polygon transform project cr pop_sgp sfst_transformpop_sgp sfst_cr landuse_sgp sfst_transformlanduse_sgp sfst_cr get osm build base censu block polygon year city_boundari pop_sgp dplyrfilteryear sfst_union sfst_as_sf smoothrfill_holesthreshold unitsset_unit km clean smoothrdrop_crumbsthreshold unitsset_unit km sfst_make_valid build get_buildings_osmplac city_boundari date asdat mutateyear run function buildings_rast rasterise_buildingsbuild proxy_pop_dens level year year sf_pop pop_sgp sf_landus landuse_sgp match_buildings_pop closest gener roxygen edit hand pleas edit document rget_parks_osmr nameget_beaches_osm aliasget_beaches_osm titleget public beach openstreetmap usag get_beaches_osm place date null mutually_exclusive_with list snap_toler min_area unitsset_unit aggregate_polygon dir_raw osmextractoe_download_directori filenam null argument itemplacecodesf object project coordin refer system geograph area match codeosmpbf file data archiv argument pass codeosmextractoe_match itemdated osm data snapshot download object class date format verbymd refer httpsdownloadgeofabrikd specif date avail default codenul download latest avail data itemmutually_exclusive_withlist codesf object may use ensur polygon eg park beach inform natur area mutuallyexclus ie nonoverlap remov output polygon hrefhttpspostgisnetdocsst_containshtmlcontain within well hrefhttpspostgisnetdocsst_intersectionhtmlintersect element list coordin refer system codeplac itemsnap_tolerancenumer argument codetoler level pass codesfst_snap use rectifi nearli coincid edg polygon process eg codesfst_contain codesfst_cov provid either unit object see codeunitsset_unit number unit coordin refer system default code set code wish rectifi minor overlap itemmin_areanumer specifi minimum area polygon retain output pass argument codethreshold codesmoothrdrop_crumb provid either unit object see codeunitsset_unit number unit coordin refer system default code itemaggregate_polygonsnumer argument codedist pass codesfst_buff buffer polygon overlap aggreg multipolygon set codenul wish aggreg multipolygon itemdir_rawcharact directori download raw unprocess osm data pass argument codedownload_directori codeosmextractoe_read itemfilenamecharact option file path export output data geojson format itemoth argument pass codeosmextractoe_read valu process beach polygon codesf object descript download process openstreetmap osm beach polygon within specifi geograph codeplac hrefhttpsdownloadgeofabrikdegeofabrik databas wrapper around function packag hrefhttpsdocsropensciorgosmextractindexhtmlcodeosmextract process download file subsequ analys refer packag codeosmextract detail option input argument download data detail osm polygon filter keyvalu attribut codenaturalbeach verbaccess codeno codepriv codemutually_exclusive_with provid hrefhttpspostgisnetdocsst_intersectionhtmlintersect output polygon exclud use codepolygons_mutually_exclud polygon clean use codepolygons_clean exampl dontrun datapop_sgp pop_sgp sfst_transformpop_sgp sfst_cr transform project cr merg censu block chosen year singl multipolygon function requir polygon merg city_boundari pop_sgp dplyrfilteryear sfst_union sfst_as_sf smoothrfill_holesthreshold unitsset_unit km clean smoothrdrop_crumbsthreshold unitsset_unit km sfst_make_valid dataparks_sgp exclud beach withinintersect polygon parks_sgp sfst_transformparks_sgp sfst_cr transform project cr run function get_beaches_osmplac city_boundari date asdat mutually_exclusive_with listparks_sgp snap_toler aggregate_polygon filenam publicbeaches_osmpolygons_geojson gener roxygen edit hand pleas edit document rrasterise_popr namerasterise_pop aliasrasterise_pop titlerasteris popul count within censu block polygon usag rasterise_pop sf re census_block null pop_count null year year dir_process tempdir argument itemsfcodesfpolygon contain popul censu data data project coordin refer system calcul pixel resolut itemresnumb specifi pixel resolut rasteris metr default code itemcensus_blockcharact specifi column name censu block uniqu identifi eg name itempop_countcharact specifi column name popul count per censu block itemyearcharact specifi column name censu year default codeyear itemdir_processingcharact directori store intermedi file default codetempdir set codenul wish export intermedi temporari file subsequ process valu list contain rasteris popul count per censu block rasteris popul densiti per censu block process polygon use gener raster name codepop_count_rast codepop_density_rast codepop_polygon respect list nest multipl year present one sublist censu year zero valu popul countsdens convert codena intermedi raster file export codetempdir process descript convert popul count per censu block polygon popul densiti grid raster subsequ analys polygon count divid area integr densiti censu block equal origin count censu data multipl year process output list raster one raster per year column name codeyear codesf must specifi even data contain multipl year combin data across multipl year must long format exampl dontrun datapop_sgp transform project cr pop_sgp sfst_transformpop_sgp sfst_cr run function pop_rast rasterise_poppop_sgp re census_block subzone_n pop_count pop_count year year gener roxygen edit hand pleas edit document rparks_calc_attributes_helpersr nameraster_class_area aliasraster_class_area titlecalcul total class area classifi raster park polygon usag raster_class_area polygon raster raster_min_patch_s unitsset_unit rel true argument itempolygonscodesf project coordin refer system itemrastercodespatrast object codeterrarast project coordin refer system similar codepolygon itemraster_min_patch_sizeminimum patch size includ result provid either unit object see codeunitsset_unit number unit coordin refer system default code itemrelativelog whether calcul rel amount ie percentag area default codetru itemoth argument pass codeterraextract valu codepolygon ad column verb class valu _area verb class valu _area_pct coderel set codetru note valu code summaris convert pixel codena wish exclud descript helper function within codeparks_calc_attribut uniqu pixel valu repres specif raster classcategori total area per class calcul gener roxygen edit hand pleas edit document rget_amenities_osmr nameget_sportfitness_osm aliasget_sportfitness_osm titleget public sportsfit amen openstreetmap usag get_sportfitness_osm place date null dir_raw osmextractoe_download_directori filenam null argument itemplacecodesf object project coordin refer system geograph area match codeosmpbf file data archiv argument pass codeosmextractoe_match itemdated osm data snapshot download object class date format verbymd refer httpsdownloadgeofabrikd specif date avail default codenul download latest avail data itemdir_rawcharact directori download raw unprocess osm data pass argument codedownload_directori codeosmextractoe_read itemfilenamecharact option file path export output data geojson format itemoth argument pass codeosmextractoe_read valu process sportfit amen codesf object descript download process openstreetmap osm public sportsfit amen point within codeplac hrefhttpsdownloadgeofabrikdegeofabrik databas wrapper around function packag hrefhttpsdocsropensciorgosmextractindexhtmlcodeosmextract process download file subsequ analys refer packag codeosmextract detail option input argument download data detail osm point filter keyvalu attribut codeleisurefitness_st verbsport verbaccess codeno codepriv exampl dontrun datapop_sgp pop_sgp sfst_transformpop_sgp sfst_cr transform project cr merg censu block chosen year singl multipolygon function requir polygon merg city_boundari pop_sgp dplyrfilteryear sfst_union sfst_as_sf smoothrfill_holesthreshold unitsset_unit km clean smoothrdrop_crumbsthreshold unitsset_unit km sfst_make_valid run function get_sportfitness_osmplac city_boundari date asdat filenam sportfitness_osmpoints_geojson gener roxygen edit hand pleas edit document rdatasingapor doctypedata namebuildings_pop_sgp aliasbuildings_pop_sgp titlepopul count per residenti build singapor format codesf polygon sourc build polygon hrefhttpswwwopenstreetmaporgcopyrightcopyright openstreetmap contributor avail httpswwwopenstreetmaporg made avail via hrefhttpsopendatacommonsorglicensesodblsummaryodbl licens popul data censu block polygon codedatapop_sgp hrefhttpswwwsingstatgovsgfinddatasearchbythemepopulationgeographicdistributionlatestdatadepart statist singapor hrefhttpsdatagovsgdatasetmasterplansubzoneboundarynoseasingapor master plan subzon respect land use polygon codedatalanduse_sgp singapor land use master plan releas hrefhttpsdatagovsgdatasetmasterplanlanduselay made avail term hrefhttpsdatagovsgopendatalicencesingapor open data licenc version usag buildings_pop_sgp descript exampl random subset dataset residenti build polygon singapor popul count column codepopcount estim via dasymetr map detail build polygon download openstreetmap data snapshot code hrefhttpsdownloadgeofabrikdegeofabrik databas use function codeget_buildings_osm popul count per censu block year redistribut across build locat within residenti land use zone perform dasymetr map use function codepop_dasymap codepop_density_polygonis see vignett exampl codepop_density_polygonis detail dataset random subset result polygon exampl databuildings_pop_sgp headbuildings_pop_sgp keyworddataset gener roxygen edit hand pleas edit document rget_parks_osmr nameget_informalnature_osm aliasget_informalnature_osm titleget inform natur area openstreetmap usag get_informalnature_osm place date null mutually_exclusive_with list snap_toler min_area unitsset_unit min_trail unitsset_unit aggregate_polygon dir_raw osmextractoe_download_directori filenam null argument itemplacecodesf object project coordin refer system geograph area match codeosmpbf file data archiv argument pass codeosmextractoe_match itemdated osm data snapshot download object class date format verbymd refer httpsdownloadgeofabrikd specif date avail default codenul download latest avail data itemmutually_exclusive_withlist codesf object may use ensur polygon eg park beach inform natur area mutuallyexclus ie nonoverlap remov output polygon hrefhttpspostgisnetdocsst_containshtmlcontain within well hrefhttpspostgisnetdocsst_intersectionhtmlintersect element list coordin refer system codeplac itemsnap_tolerancenumer argument codetoler level pass codesfst_snap use rectifi nearli coincid edg polygon process eg codesfst_contain codesfst_cov provid either unit object see codeunitsset_unit number unit coordin refer system default code set code wish rectifi minor overlap itemmin_areanumer specifi minimum area polygon retain output pass argument codethreshold codesmoothrdrop_crumb provid either unit object see codeunitsset_unit number unit coordin refer system default code itemmin_trailsnumer specifi minimum length osm trail line within natur area polygon polygon retain output provid either unit object see codeunitsset_unit number unit coordin refer system default code itemaggregate_polygonsnumer argument codedist pass codesfst_buff buffer polygon overlap aggreg multipolygon set codenul wish aggreg multipolygon itemdir_rawcharact directori download raw unprocess osm data pass argument codedownload_directori codeosmextractoe_read itemfilenamecharact option file path export output data geojson format itemoth argument pass codeosmextractoe_read valu process inform natur area polygon publicli access codesf object descript download process openstreetmap osm inform natur polygon within specifi geograph codeplac hrefhttpsdownloadgeofabrikdegeofabrik databas wrapper around function packag hrefhttpsdocsropensciorgosmextractindexhtmlcodeosmextract process download file subsequ analys refer packag codeosmextract detail option input argument download data detail osm polygon filter keyvalu attribut verblandus codeforest codemeadow verbnatur codewood codescrub codeheath codegrassland codewetland codemarsh codefel codetundra verbaccess codeno codepriv coderestrict polygon hrefhttpspostgisnetdocsst_containshtmlcontain within codeleisuregolf_cours exclud mutuallyhrefhttpspostgisnetdocsst_snaphtmlsnap vertic two see argument codesnap_toler hrefhttpspostgisnetdocsst_intersectionhtmlintersect codelandusemilitari polygon also remov exclud natur area inaccess osm trail line extract verbhighway codetrack codepath codefootway codecycleway verbaccess codeno codepriv remain polygon without trail hrefhttpspostgisnetdocsst_withinhtmlwithin boundari remov codemutually_exclusive_with provid hrefhttpspostgisnetdocsst_intersectionhtmlintersect output polygon exclud use codepolygons_mutually_exclud polygon clean use codepolygons_clean exampl dontrun datapop_sgp pop_sgp sfst_transformpop_sgp sfst_cr transform project cr merg censu block chosen year singl multipolygon function requir polygon merg city_boundari pop_sgp dplyrfilteryear sfst_union sfst_as_sf smoothrfill_holesthreshold unitsset_unit km clean smoothrdrop_crumbsthreshold unitsset_unit km sfst_make_valid dataparks_sgp exclud natur area withinintersect polygon parks_sgp sfst_transformparks_sgp sfst_cr transform project cr run function get_informalnature_osmplac city_boundari date asdat mutually_exclusive_with listparks_sgp snap_toler min_area unitsset_unit min_trail unitsset_unit aggregate_polygon filenam natureareas_osmpolygons_geojson gener roxygen edit hand pleas edit document rrasterise_landus namerasterise_landus aliasrasterise_landus titlerasteris residenti land use polygon usag rasterise_landus sf_landus subset null land_us null year year sf_pop null match_landuse_pop recent dir_rastertempl null dir_process tempdir dir_export tempdir overwrit true wopt listgdal ccompresslzw argument itemsf_landusecodesf polygon land use zone data project coordin refer system itemsubsetnam vector contain residenti land use class interest retain column codeland_us element name accord integ use repres class output raster default codenul integ alphabet assign land use class itemland_usecharact specifi column name land use class itemyearcharact specifi column name year within codesf_landus codesf_pop provid default codeyear column data numer itemsf_popopt codesf polygon contain popul censu data column contain censu year absent output land use raster associ specif popul censu year itemmatch_landuse_popcharact type match codesf_landus codesf_pop pass codematch argument function codematchyear either codeexact codeclosest coderec codesoonest default coderec ie assum land use preplan follow popul chang rather result postmonitor eg remotelysens itemdir_rastertemplatecharact filepath raster use defin pixel resolut extent nrow ncol output raster object pass codey argument codeterraraster default templat raster gener function coderasterise_pop within codedir_process see next argument itemdir_processingcharact directori get intermedi file gener previou step eg rasteris popul data default codetempdir itemdir_exportcharact file path directori export output raster default codetempdir set codenul wish export output subsequ process itemoverwritelog argument pass codeterrawriterast default codetru itemwoptlist argument pass codeterrawriterast itemoth argument pass codeterrawriterast valu list raster file zero valu convert codena raster also intermedi file export directori defin codedir_export default codetempdir process descript rasteris land use zone codesf_landus refer popul data codesf_pop suppli multipl list output raster gener land use data multipl year present land use data includ unnecessari land use class argument codesubset codelandus allow user first subset data polygon defin residenti land use detail popul data codesf_pop suppli raster must previous gener codetempdir use function coderasterise_pop year popul data match specif year land use data use helper function codematchyear land use raster associ specif popul censu year remov match popul censu year rasteris land use zone mask away ie convert pixel codena area zero popul data respect match year exampl dontrun datapop_sgp datalanduse_sgp transform project cr pop_sgp sfst_transformpop_sgp sfst_cr landuse_sgp sfst_transformlanduse_sgp sfst_cr run function landuse_rast rasterise_landuselanduse_sgp land_us lu_desc subset c residenti commerci residenti residenti commerci st storey residenti institut year year sf_pop pop_sgp match_landuse_pop recent gener roxygen edit hand pleas edit document rget_parks_osmr nameget_parks_osm aliasget_parks_osm titleget public park openstreetmap usag get_parks_osm place date null mutually_exclusive_with list snap_toler min_area unitsset_unit aggregate_polygon dir_raw osmextractoe_download_directori filenam null argument itemplacecodesf object project coordin refer system geograph area match codeosmpbf file data archiv argument pass codeosmextractoe_match itemdated osm data snapshot download object class date format verbymd refer httpsdownloadgeofabrikd specif date avail default codenul download latest avail data itemmutually_exclusive_withlist codesf object may use ensur polygon eg park beach inform natur area mutuallyexclus ie nonoverlap remov output polygon hrefhttpspostgisnetdocsst_containshtmlcontain within well hrefhttpspostgisnetdocsst_intersectionhtmlintersect element list coordin refer system codeplac itemsnap_tolerancenumer argument codetoler level pass codesfst_snap use rectifi nearli coincid edg polygon process eg codesfst_contain codesfst_cov provid either unit object see codeunitsset_unit number unit coordin refer system default code set code wish rectifi minor overlap itemmin_areanumer specifi minimum area polygon retain output pass argument codethreshold codesmoothrdrop_crumb provid either unit object see codeunitsset_unit number unit coordin refer system default code itemaggregate_polygonsnumer argument codedist pass codesfst_buff buffer polygon overlap aggreg multipolygon set codenul wish aggreg multipolygon itemdir_rawcharact directori download raw unprocess osm data pass argument codedownload_directori codeosmextractoe_read itemfilenamecharact option file path export output data geojson format itemoth argument pass codeosmextractoe_read valu process park polygon codesf object descript download process openstreetmap osm park polygon within specifi geograph codeplac hrefhttpsdownloadgeofabrikdegeofabrik databas wrapper around function packag hrefhttpsdocsropensciorgosmextractindexhtmlcodeosmextract process download file subsequ analys refer packag codeosmextract detail option input argument download data detail osm polygon filter keyvalu attribut verbleisur codepark codegarden codenature_reserv verbaccess codeno codepriv well keyvalu pair codetourismzoo codemutually_exclusive_with provid hrefhttpspostgisnetdocsst_intersectionhtmlintersect output polygon exclud use codepolygons_mutually_exclud polygon clean use codepolygons_clean exampl dontrun datapop_sgp pop_sgp sfst_transformpop_sgp sfst_cr transform project cr merg censu block chosen year singl multipolygon function requir polygon merg city_boundari pop_sgp dplyrfilteryear sfst_union sfst_as_sf smoothrfill_holesthreshold unitsset_unit km clean smoothrdrop_crumbsthreshold unitsset_unit km sfst_make_valid run function get_parks_osmplac city_boundari date asdat snap_toler aggregate_polygon filenam publicparks_osmpolygons_geojson gener roxygen edit hand pleas edit document rget_amenities_osmr nameget_playgrounds_osm aliasget_playgrounds_osm titleget public playground openstreetmap usag get_playgrounds_osm place date null dir_raw osmextractoe_download_directori filenam null argument itemplacecodesf object project coordin refer system geograph area match codeosmpbf file data archiv argument pass codeosmextractoe_match itemdated osm data snapshot download object class date format verbymd refer httpsdownloadgeofabrikd specif date avail default codenul download latest avail data itemdir_rawcharact directori download raw unprocess osm data pass argument codedownload_directori codeosmextractoe_read itemfilenamecharact option file path export output data geojson format itemoth argument pass codeosmextractoe_read valu process playground codesf object descript download process openstreetmap osm public playground point within specifi geograph codeplac hrefhttpsdownloadgeofabrikdegeofabrik databas wrapper around function packag hrefhttpsdocsropensciorgosmextractindexhtmlcodeosmextract process download file subsequ analys refer packag codeosmextract detail option input argument download data detail osm point filter keyvalu attribut codeleisureplayground verbaccess codeno codepriv exampl dontrun datapop_sgp pop_sgp sfst_transformpop_sgp sfst_cr transform project cr merg censu block chosen year singl multipolygon function requir polygon merg city_boundari pop_sgp dplyrfilteryear sfst_union sfst_as_sf smoothrfill_holesthreshold unitsset_unit km clean smoothrdrop_crumbsthreshold unitsset_unit km sfst_make_valid run function get_playgrounds_osmplac city_boundari date asdat filenam publicplaygrounds_osmpoints_geojson gener roxygen edit hand pleas edit document rpolygons_mutually_exclud namepolygons_mutually_exclud aliaspolygons_mutually_exclud titlemak polygon input mutual exclus overlap anoth usag polygons_mutually_excludeinput mutually_exclud snap_toler argument iteminputcodesf object process project coordin refer system itemmutually_excludecodesf object codeinput polygon hrefhttpspostgisnetdocsst_containshtmlcontain within object hrefhttpspostgisnetdocsst_intersectionhtmlintersect two remov coordin refer system codeinput itemsnap_tolerancenumer argument codetoler level pass codesfst_snap use rectifi nearli coincid edg polygon run codesfst_contain provid either unit object see codeunitsset_unit number unit coordin refer system default code valu process codeinput polygon codesf object descript helper function ensur polygon eg park beach inform natur area mutuallyexclus ie nonoverlap detail polygon vertic first hrefhttpspostgisnetdocsst_snaphtmlsnap toler level base codesnap_toler specifi rectifi nearli coincid edg remov codeinput polygon hrefhttpspostgisnetdocsst_containshtmlcontain codemutually_exclud hrefhttpspostgisnetdocsst_intersectionhtmlintersect two remov gener roxygen edit hand pleas edit document rget_amenities_osmr nameget_trails_osm aliasget_trails_osm titleget access trail openstreetmap usag get_trails_osm place date null dir_raw osmextractoe_download_directori filenam null argument itemplacecodesf object project coordin refer system geograph area match codeosmpbf file data archiv argument pass codeosmextractoe_match itemdated osm data snapshot download object class date format verbymd refer httpsdownloadgeofabrikd specif date avail default codenul download latest avail data itemdir_rawcharact directori download raw unprocess osm data pass argument codedownload_directori codeosmextractoe_read itemfilenamecharact option file path export output data geojson format itemoth argument pass codeosmextractoe_read valu process trail line codesf object descript download process openstreetmap osm access trail line within codeplac hrefhttpsdownloadgeofabrikdegeofabrik databas wrapper around function packag hrefhttpsdocsropensciorgosmextractindexhtmlcodeosmextract process download file subsequ analys refer packag codeosmextract detail option input argument download data detail osm line filter keyvalu attribut verbhighway codetrack codepath codefootway codecycleway verbaccess codeno codepriv exampl dontrun datapop_sgp pop_sgp sfst_transformpop_sgp sfst_cr transform project cr merg censu block chosen year singl multipolygon function requir polygon merg city_boundari pop_sgp dplyrfilteryear sfst_union sfst_as_sf smoothrfill_holesthreshold unitsset_unit km clean smoothrdrop_crumbsthreshold unitsset_unit km sfst_make_valid run function get_trails_osmplac city_boundari date asdat filenam accessibletrails_osmlines_geojson gener roxygen edit hand pleas edit document rpop_density_polygonis namepop_density_polygonis aliaspop_density_polygonis titlepolygonis popul densiti raster popul count per build polygon usag pop_density_polygonis input_rast write fals dsn driver geojson overwrit true delete_dsn true argument iteminput_rasterpopul densiti raster spatrast object codeterrarast output codepop_dasymap may use itemwritewheth export output default codefals itemdsnargu pass codesfst_writ itemdrivercharact argument pass codesfst_writ default codegeojson itemoverwritelog argument pass codesfst_writ default codetru itemdelete_dsnargu pass codesfst_writ default codetru itemoth argument pass codesfst_writ valu build codesf polygon column codepopcount descript convert raster popul densiti eg codepop_dasymap output popul count per polygon adjac polygon similar pixel valu merg thu raster suppli codepop_dasymap spatial resolut small enough delin individu build convers polygon use function would reflect popul count per build input data project coordin refer system specif target area exampl dontrun datapop_sgp popul censu block polygon datalanduse_sgp land use polygon transform project cr pop_sgp sfst_transformpop_sgp sfst_cr landuse_sgp sfst_transformlanduse_sgp sfst_cr merg censu block chosen year singl multipolygon function requir polygon merg city_boundari pop_sgp dplyrfilteryear sfst_union sfst_as_sf smoothrfill_holesthreshold unitsset_unit km clean smoothrdrop_crumbsthreshold unitsset_unit km sfst_make_valid build get_buildings_osmplac city_boundari date asdat dplyrmutateyear rasteris popul landus build pop_rast rasterise_poppop_sgp census_block subzone_n pop_count pop_count landuse_rast rasterise_landuselanduse_sgp land_us lu_desc subset c residenti commerci residenti residenti commerci st storey residenti institut sf_pop pop_sgp match_landuse_pop recent buildings_rast rasterise_buildingsbuild proxy_pop_dens level year year sf_pop pop_sgp sf_landus landuse_sgp match_buildings_pop closest perform dasymetr map select year popdens_rast pop_dasymappop_polygon pop_rasterspop_polygon pop_perblock_count pop_rasterspop_count pop_perblock_dens pop_rasterspop_dens land_relative_dens buildings_rast filenam buildings_popdensitytif wopt listgdalccompresslzw final convert popul count per build polygon pop_density_polygoniseinput_rast popdens_rast write true dsn buildings_popcountgeojson gener roxygen edit hand pleas edit document rrecre_supplyr namerecre_suppli aliasrecre_suppli titlecalcul cumul suppli attribut park build sourc rossi byrn j picker c role distanc periurban nation park use visit far travel appli geographi tu x huang g wu j guo x travel distanc park size influenc urban park visit urban forestri urban green usag recre_supplypark_attribut dist_matrix c argument itempark_attributenumer vector amount specif attribut per park length vector equal number park consid itemdist_matrixmatrix contain build row pairwis distanc park column order park column ident order park element codepark_attribut itemccoeffici determin rate decay recreat suppli increas distanc valu numer vector cumul suppli valu per build row input matrix codedist_matrix length vector equal number build consid descript sum total amount specif park attribut suppli build polygon amount per build depend distanc particular build park attribut park away gener reduc effect also known distanc decay rossi et al tu et al detail suppli eqn park attribut calcul base follow equat eqn sumlimits_in s_i cdot ecd_i eqn total suppli specif park attribut build park eqni eqni eqnn eqnn total number park eqns_i suppli specif park attribut park eqni perfect posit linear associ assum sinc focu suppli metric eqnd_i distanc kilometr build park eqni eg euclidean manhattan etc eqnc coeffici determin rate decay suppli eqni increas distanc exampl dontrun dataparks_sgp load park polygon databuildings_pop_sgp load build polygon w popul count transform project cr parks_sgp sfst_transformparks_sgp sfst_cr buildings_pop_sgp sfst_transformbuildings_pop_sgp sfst_cr calcul pairwis distanc centroid build park d_matrix buildings_pop_sgp st_centroid st_distanceparks_sgp euclidean distanc m_dist m_dist convert distanc km run function specif park attribut eg area recre_supplypark_attribut parks_sgparea dist_matrix d_matrix c exampl valu distanc decay coeffici c gener roxygen edit hand pleas edit document rutilspip name alia titlepip oper usag lh rh descript see codemagrittrlinkmagrittrpip detail keywordintern gener roxygen edit hand pleas edit document rget_buildings_osmr nameget_buildings_osm aliasget_buildings_osm titleget build polygon openstreetmap usag get_buildings_osm place date null dir_raw osmextractoe_download_directori filenam null driver geojson delete_dsn true append na argument itemplacecodesf object project coordin refer system geograph area match codeosmpbf file data archiv argument pass codeosmextractoe_match itemdated osm data snapshot download object class date format verbymd refer httpsdownloadgeofabrikd specif date avail default codenul download latest avail data itemdir_rawcharact directori download raw unprocess osm data pass argument codedownload_directori codeosmextractoe_read itemfilenamecharact option file path export output data itemdrivercharact option name driver use export output data pass codesfst_writ default geojson itemdelete_dsnlog option pass codesfst_writ itemappenddefault codena rais error layer exist pass codesfst_writ itemoth argument pass codeosmextractoe_read valu process build polygon codesf object descript download process openstreetmap osm build polygon within specifi geograph codeplac hrefhttpsdownloadgeofabrikdegeofabrik databas wrapper around function packag hrefhttpsdocsropensciorgosmextractindexhtmlcodeosmextract process download file subsequ analys refer packag codeosmextract detail option input argument download data detail data filter keyvalu attribut verbbuild codenul column codelevel deriv codebuildinglevel valu set code extract valu empti codena set codena verb ie underground valu round nearest whole number column codearea_m repres build footprint area codefloorarea_m calcul multipli codearea_m number codelevel exampl dontrun datapop_sgp pop_sgp sfst_transformpop_sgp sfst_cr transform project cr merg censu block chosen year singl multipolygon function requir polygon merg city_boundari pop_sgp dplyrfilteryear sfst_union sfst_as_sf smoothrfill_holesthreshold unitsset_unit km clean smoothrdrop_crumbsthreshold unitsset_unit km sfst_make_valid run function get_buildings_osmplac city_boundari date asdat filenam buildings_osmpolygons_geojson gener roxygen edit hand pleas edit document rparks_calc_attributesr nameparks_calc_attribut aliasparks_calc_attribut titlecalcul attribut per park polygon base suppli data usag parks_calc_attribut park data_point list data_lin list data_rast list rasters_summarise_fun null raster_min_patch_s unitsset_unit raster_edg null rel true filenam null argument itemparkscodesf polygon project coordin refer system itemdata_pointsnam list codesf object contain data geometri type codepoint codemultipoint list name use name park attribut column output itemdata_linesnam list codesf object contain data geometri type codelinestr codemultilinestr list name use name park attribut column output itemdata_rastersnam list singl codespatrast object codeterrarast list name use name park attribut column output itemrasters_summarise_funfunct summaris raster data pass codeterraextract default codenul tabul sum uniqu valu raster ie classifi raster number repres specif classcategori use function coderaster_class_area itemraster_min_patch_sizeminimum patch size includ tabul sum raster class relev coderasters_summarise_fun null provid either unit object see codeunitsset_unit number unit coordin refer system default code itemraster_edgenumer option calcul total edg length classifi raster associ codepark polygon use function coderaster_edge_length total edg length raster patch contain hrefhttpspostgisnetdocsst_withinhtmlwithin codepark calcul patch close proxim includ increas valu argument length codepark border hrefhttpspostgisnetdocsst_intersectionhtmlintersect buffer raster calcul provid way includ patch close proxim codepark eg total waterfront length close park note class uniqu valu raster summaris includ code convert pixel codena wish exclud provid either unit object see codeunitsset_unit number unit coordin refer system default codenul calcul set code includ patch hrefhttpspostgisnetdocsst_withinhtmlwithin codepark itemrelativelog whether calcul rel amount eg point densiti ratio linetoperimet length proport area default codetru itemfilenamecharact option file path export output data geojson format itemoth argument pass codeterraextract valu codepark ad column contain summari basic park attribut area perimet well summari suppli dataset summari method depend geometri type ie point line raster suppli argument exampl describ itemareaarea park polygon itemperimeterperimet park polygon item object name codedata_point _counttot count point within park polygon item object name codedata_point _ptdensitytot count divid area park polygon point densiti includ argument coderel set codetru item object name codedata_lin _lengthsum line length within park polygon item object name codedata_lin _length_perim_ratioratio linetoperimet length park polygon includ argument coderel set codetru item object name codedata_rast summaris valu specif raster class depend function provid coderasters_summarise_fun argument item object name codedata_rast class valu _areatot area specif raster class coderasters_summarise_fun null item object name codedata_rast class valu _area_pctpercentag area specif raster class coderasters_summarise_fun null includ argument coderel set codetru item object name codedata_rast class valu _lengthtot edg length specif raster class item object name codedata_rast class valu _length_perim_ratioedgetoperimet length specif raster class includ argument coderel set codetru descript summari calcul suppli dataset codedata_point codedata_lin codedata_rast append codepark data addit column ensur project coordin refer system similar codepark exampl dontrun datapop_sgp citi censu block dataparks_sgp park polygon transform project cr pop_sgp sfst_transformpop_sgp sfst_cr parks_sgp sfst_transformparks_sgp sfst_cr get playground point exampl attribut city_boundari pop_sgp dplyrfilteryear sfst_union sfst_as_sf smoothrfill_holesthreshold unitsset_unit km clean smoothrdrop_crumbsthreshold unitsset_unit km sfst_make_valid playground get_playgrounds_osmplac city_boundari date asdat point_list listplayground convert list add point data namespoint_list cplayground name element list calcul playground point count densiti per park parks_calc_attributespark parks_sgp data_point point_list rel true gener roxygen edit hand pleas edit document rparks_calc_attributes_helpersr nameraster_edge_length aliasraster_edge_length titlecalcul total edg length raster associ park polygon usag raster_edge_length polygon raster raster_min_patch_s unitsset_unit raster_edge_buff unitsset_unit rel true argument itempolygonscodesf project coordin refer system itemrastercodespatrast object codeterrarast project coordin refer system similar codepolygon itemraster_min_patch_sizeminimum patch size includ result provid either unit object see codeunitsset_unit number unit coordin refer system default code itemraster_edge_buffernumer specifi buffer distanc add polygonis raster total edg length codepolygon hrefhttpspostgisnetdocsst_intersectionhtmlintersect buffer coderast sum togeth total edg length contain hrefhttpspostgisnetdocsst_withinhtmlwithin codepolygon default code patch fulli contain hrefhttpspostgisnetdocsst_withinhtmlwithin polygon consid provid either unit object see codeunitsset_unit number unit coordin refer system itemrelativelog whether calcul rel amount ie ratio edgetoperimet length default codetru valu codepolygon ad column verb class valu _length verb class valu _length_perim_ratio coderel set codetru note valu code summaris convert pixel codena wish exclud descript helper function within codeparks_calc_attribut total edg length classifi raster patch contain hrefhttpspostgisnetdocsst_withinhtmlwithin codepolygon calcul addit argument coderaster_edge_buff provid way includ patch close proxim codepolygon total edg length sum togeth append codepolygon data addit column one column one raster class note oper may take complet involv convers raster polygon vice versa gener roxygen edit hand pleas edit document rpolygons_cleanr namepolygons_clean aliaspolygons_clean titleclean polygon download usag polygons_clean input snap_toler min_area unitsset_unit aggregate_polygon argument iteminputcodesf object project coordin refer system itemsnap_tolerancenumer argument codetoler level pass codesfst_snap use rectifi nearli coincid edg polygon provid either unit object see codeunitsset_unit number unit coordin refer system codesfst_snap run polygon hrefhttpspostgisnetdocsst_covershtmlcov anoth remov default code set code wish rectifi minor overlap itemmin_areanumer specifi minimum area polygon retain output pass argument codethreshold codesmoothrdrop_crumb provid either unit object see codeunitsset_unit number unit coordin refer system default code itemaggregate_polygonsnumer argument codedist pass codesfst_buff buffer polygon overlap aggreg multipolygon set codenul wish aggreg multipolygon valu process polygon codesf object descript helper function process clean polygon download openstreetmap detail polygon hrefhttpspostgisnetdocsst_containshtmlcontain hrefhttpspostgisnetdocsst_overlapshtmloverlap other remov polygon vertic hrefhttpspostgisnetdocsst_snaphtmlsnap toler level base codesnap_toler specifi rectifi nearli coincid edg polygon hrefhttpspostgisnetdocsst_covershtmlcov other subsequ remov polygon aggreg multipolygon base distanc set codeaggregate_polygon specifi spatial relat italicis follow hrefhttpsenwikipediaorgwikideimdeim standard gener roxygen edit hand pleas edit document rdatasingapor doctypedata namelanduse_sgp aliaslanduse_sgp titleland use master plan citi singapor format codesf polygon land use releas year data long format row repeat year follow column use packag describ itemlu_descland use type descript itemyearyear master plan sourc polygon singapor land use master plan releas year hrefhttpsdatagovsgdatasetmasterplanlandus hrefhttpsdatagovsgdatasetmasterplanlanduselay made avail term hrefhttpsdatagovsgopendatalicencesingapor open data licenc version usag landuse_sgp descript exampl dataset contain singapor master plan land use zone year hrefhttpsdatagovsgdatasetmasterplanlandus hrefhttpsdatagovsgdatasetmasterplanlanduselay releas hrefhttpsdatagovsgopendatalicencesingapor open data licens exampl datalanduse_sgp headlanduse_sgp keyworddataset