readmemd gener readmermd pleas edit file rhal rcmdcheckhttpsgithubcomtlversehalworkflowsrcmdcheckbadgesvghttpsgithubcomtlversehalact coverag statushttpscodecovioghtlversehalbranchmastergraphbadgesvghttpsappcodecovioghtlverseh cranhttpswwwrpkgorgbadgesversionhalhttpswwwrpkgorgpkgh cran downloadshttpscranlogsrpkgorgbadgeshalhttpscranrprojectorgpackageh cran total downloadshttpcranlogsrpkgorgbadgesgrandtotalhalhttpscranrprojectorgpackageh project statu activ project reach stabl usabl state activ developedhttpswwwrepostatusorgbadgeslatestactivesvghttpswwwrepostatusorgact licens gpl vhttpsimgshieldsiobadgelicensegplvbluesvghttpwwwgnuorglicensesgpl doihttpszenodoorgbadgedoizenodosvghttpsdoiorgzenodo doihttpsjosstheojorgpapersjossstatussvghttpsdoiorgjoss scalabl highli adapt lasso author jeremi coylehttpsgithubcomtlvers nima hejazihttpsnimahejaziorg rachael phillipshttpsgithubcomrachaelvp lar van der laanhttpsgithubcomlarsvanderlaan mark van der laanhttpsvanderlaanlaborg what hal hal r packag provid implement scalabl highli adapt lasso hal nonparametr regress estim appli lregular lasso regress design matrix compos indic function correspond support function set covari interact thereof hal regress allow arbitrarili complex function form estim fast nearparametr converg rate global smooth assumpt van der laan bibaut van der laan detail theoret discuss highli adapt lasso estim consid consult exampl van der laan van der laan b van der laan bibaut comput demonstr versatil hal regress see benkes van der laan recent theoret work demonstr success build effici estim complex paramet particular variat hal regress use estim nuisanc paramet eg van der laan benkes cai ertefai hejazi van der laan instal standard use recommend instal packag cranhttpscranrprojectorgpackageh via r installpackagesh contribut instal develop version hal github via remoteshttpscranrprojectorgpackageremot r remotesinstall_githubtlverseh issu encount bug specif featur request pleas file issuehttpsgithubcomtlversehalissu exampl consid follow minim exampl use hal gener predict via highli adapt lasso regress r load packag set seed libraryh load requir packag rcpp hal v scalabl highli adapt lasso note fit_hal default chang see fit_hal detail setse simul data n p x matrixrnormn p n p x sinx rnormn mean sd fit hal regress hal_fit fit_halx x yolo true im sorri dave im afraid cant hal_fittim userself sysself elaps userchild syschild enumerate_basi design_matrix reduce_basi remove_dupl lasso total train sampl predict pred predicthal_fit new_data x meanhal_ms pred contribut contribut welcom interest contributor consult contribut guidelineshttpsgithubcomtlversehalblobmastercontributingmd prior submit pull request citat use hal r packag pleas cite follow softwarecoylehalrpkg author coyl jeremi r hejazi nima phillip rachael v van der laan lar van der laan mark j titl hal scalabl highli adapt lasso year url httpsdoiorgzenodo doi zenodo note r packag version articlehejazihaljoss author hejazi nima coyl jeremi r van der laan mark j titl hal scalabl highli adapt lasso regress r year url httpsdoiorgjoss doi joss journal journal open sourc softwar publish open journal licens jeremi r coylehttpsgithubcomtlvers nima hejazihttpsnimahejaziorg content repositori distribut gpl licens see file licens detail refer div idref classrefer div idrefbenkeserh benkes david mark j van der laan highli adapt lasso estim ieee intern confer data scienc advanc analyt dsaa ieee httpsdoiorgdsaa div div idrefbibautfast bibaut aurélien f mark j van der laan fast rate empir risk minim càdlàg function bound section variat norm httpsarxivorgab div div idrefertefaienonparametr ertefai ashkan nima hejazi mark j van der laan nonparametr invers probabl weight estim base highli adapt lasso httpsarxivorgab div div idrefvdlgener van der laan mark j gener effici target minimum loss base estim base highli adapt lasso intern journal biostatist httpsdoiorgijb div div idrefvdlfinit b finit sampl infer target learn httpsarxivorgab div div idrefvdleffici van der laan mark j david benkes weixin cai effici estim pathwis differenti target paramet undersmooth highli adapt lasso httpsarxivorgab div div idrefvdluniform van der laan mark j aurélien f bibaut uniform consist highli adapt lasso estim infinitedimension paramet httpsarxivorgab div div hal version bump cran resubmiss follow archiv hal minor adjust speed unit test exampl version bump cran resubmiss hal septemb minor chang bin perform num_knot ensur minim number knot chosen num_knot result hal agre main term glmnet smoothness_ord num_knot revis formula interfac enhanc capabl allow specifci penal factor smoothness_ord number knot variabl everi singl term separ use new h function possibl specifi eg hx hw gener concaten two basi function term april default fit_hal first order smooth hal bin updat document formula_h fit_hal predict ad fit_control formula_control list argument move much text detail section shorten argument descript updat summari support higherord hal fit interpret ad check fit_hal missing dimension correspond x x_unpen check lead quicklyproduc error oppos enumer basi list let glmnet error someth trivial like modifi formula interfac fit_hal formula provid directli fit_hal formula_h run within fit_hal due chang longer made sens formula_h accept data take input x also formula_fit_h function remov longer need support custom lasso procedur implement rcpp discontinu accordingli lassi option argument fit_typ remov fit_hal read lambdaminratio fit_control argument fit_hal weve seen set lambdaminratio glmnet lead lambda valu fit data suffici well seem appropri overrid glmnet default hal februari support _higher order_ hal via new smoothness_ord argument smoothness_ord vector length length ncolx smoothness_ord length valu recycl form vector length ncolx given vector length ncolx ith element give level smooth variabl correspond ith column x degreedepend bin higher order term bin coars num_knot argument vector max_degre control degreespecif bin add formula_h allow formula specif hal model hal novemb allow support poisson famili glmnet begin consider support arbitrari statsfamili object pass call glmnet simplifi output fit_hal unifi redund hal_lasso glmnet_lasso slot new lasso_fit slot clean method throughout improv document reduc redund cleanersimpl code summaryh add link doi publish _journal open sourc software_ paper descript hal septemb add summari method interpret hal regress httpsgithubcomtlversehalpul add softwar paper public _journal open sourc software_ httpsgithubcomtlversehalpul hal june address bugsinconsist report predict method tri specifi valu lambda includ initi fit address bug aris silent failur glmnet ignor argument lambdaminratio famili gaussian set add short softwar paper submiss joss minor document updat hal march first cran releas contribut hal develop author hal r packag use guid use contribut develop popular tidyvers ecosystem r packag document simpli formal restat fact goal guid help get contribut hal quickli possibl guid divid two main piec file bug report featur request issu suggest chang via pull request issu file issu import thing includ minim reproduc exampl quickli verifi problem figur fix three thing need includ make exampl reproduc requir packag data code packag load top script easi see one exampl need easiest way includ data use dput gener r code recreat spend littl bit time ensur code easi other read make sure youv use space variabl name concis inform use comment indic problem lie best remov everyth relat problem shorter code easier understand check actual made reproduc exampl start fresh r session past script unless youv specif ask pleas dont includ output sessioninfo pull request contribut chang hal follow step creat branch git make chang push branch github issu pull request pr discuss pull request iter either accept pr decid good fit hal step describ detail might feel overwhelm first time get set get easier practic your familiar git github pleas start read httprpkgshadconzgithtml pull request evalu checklist __motivation__ pull request clearli concis motiv need chang pleas describ problem pr address show pull request solv concis possibl also includ motiv news new releas hal come easi user see what chang add item top file use markdown format news item end yourgithubusernam the_issue_numb __onli relat changes__ submit pull request pleas check make sure havent accident includ unrel chang make harder see exactli what chang evalu unexpect side effect pr correspond git branch expect submit multipl chang make sure creat multipl branch multipl chang depend start first one dont submit other first one process __use hal code style__ pleas follow offici tidyvers style guidehttpstyletidyverseorg maintain consist style across whole code base make much easier jump code your modifi exist hal code doesnt follow style guid separ pull request fix style would greatli appreci your ad new paramet new function youll also need document roxygenhttpsgithubcomklutometisroxygen make sure rerun devtoolsdocu code submit seem like lot work dont worri pull request isnt perfect learn process pull request process unless youv submit past unlik pull request accept pleas dont submit pull request chang exist behaviour instead think add new featur minim invas way test environ ubuntu local github action r maco local github action r window github action r r cmd check result error warn note instal size mb subdirectori mb lib mb downstream depend none present two haldensifi txshift also remov packag archiv resubmiss resubmiss packag remov cran due solari build failur though os longer test issu oss titl hal scalabl highli adapt lasso regress r tag machin learn target learn causal infer r author name nima hejazi orcid affili name jeremi r coyl orcid affili name mark j van der laan orcid affili affili name graduat group biostatist univers california berkeley index name divis biostatist school public health univers california berkeley index name depart statist univers california berkeley index name center comput biolog univers california berkeley index date septemb bibliographi refsbib summari hal r packag provid comput effici implement _highli adapt lasso_ hal flexibl nonparametr regress machin learn algorithm endow sever theoret conveni properti hal pair implement estim array practic variabl select tool sensibl default order improv scalabl algorithm build exist r packag lasso regress leverag compil code key intern function hal r packag provid famili highli adapt lasso estim suitabl use modern largescal data analysi cuttingedg research effort intersect statist machin learn includ emerg subfield comput causal infer wongcomput background highli adapt lasso hal nonparametr regress function capabl estim complex eg possibl infinitedimension function paramet fast n rate rel mild condit vdlgener vdluniform bibautfast hal requir space function paramet subset set càdlàg righthand continu lefthand limit function section variat norm bound constant contrast wealth data adapt regress techniqu make strong local smooth assumpt true form target function hal regress assumpt finit section variat norm constitut _global_ smooth assumpt make power versatil approach hal packag primarili implement zerothord hal estim construct select lasso penal linear combin indic basi function minim lossspecif empir risk constraint l_norm result vector coeffici bound finit constant importantli estim formul finit constant section variat norm target function intuit construct hal estim proce two step first design matrix compos basi function gener base avail set covari zerothord hal make use indic basi function result larg spars matrix binari entri higherord hal estim replac use indic basi function spline formul implement nascent stage represent target function f term indic basi function partit support f knot point basi function place subset section f gener numer basi function creat appropri set indic base select lasso penal thu second step fit hal model perform l_penal regress larg spars design matrix indic base select hal regress model approxim section variat norm target function absolut sum estim coeffici indic basi function l_ penal paramet lambda data adapt chosen via crossvalid selector vdlunifi vdvoracl howev altern select criteria may appropri estimand function target paramet instead nuisanc function possibl complex paramet eg vdleffici ertefaienonparametr extens set simul experi use assess predict perform hal regress benkeserh studi reli upon subsequ deprec halplu r packagehttpsgithubcombenkeserhalplu hal core function hal packag r languag environ statist comput r aim provid scalabl implement hal nonparametr regress function provid singl unifi interfac princip userfac function fit_hal minimum requir matrix predictor x outcom default invoc fit_hal build hal model use indic basi function limit number interact variabl x fit penal regress model via lasso procedur avail extrem popular glmnet r packag friedmanglmnet creation design matrix indic basi function comput expens sever util function eg make_design_matrix make_basis_list make_copy_map written c integr packag via rcpp framework eddelbuettelrcpp eddelbuettelseamless hal addit support fit standard gaussian logist cox proport hazard model via famili argument includ variat accommod offset via offset argument partial penal model via x_unpen argument sever year develop usag found perform hal regress suffer highdimension set allevi comput limit sever screen filter approach investig implement includ screen variabl prior creat design matrix filter indic basi function via reduce_basi argument well earli stop fit sequenc hal model l_norm penal paramet lambda futur softwar develop effort continu improv upon comput aspect perform hal regress option support hal current stabl releas hal packag made avail comprehens r archiv network httpscranrprojectorgpackageh stabl branch master develop branch devel version packag host httpsgithubcomtlverseh releas packag use github zenodo httpsdoitorgzenodo applic hal canon implement highli adapt lasso packag reli upon varieti statist applic speak gener hal regress often use order develop effici estim strategi challeng estim infer problem thu interpret _statist applications_ hal regress chiefli exampl novel theoret develop thoroughli investig simul experi illustr data analysi exampl sequel briefli point recent success exampl jurobust formul procedur base hal regress allow construct asymptot normal effici estim causal effect robust presenc instrument variabl often lead sever issu estim infer hernancaus varieti procedur propos overcom issu pose instrument variabl particularli success idea given shortreedoutcom propos standard lasso regress select covari exposur model base estim outcom model work jurobust replac standard lasso hal regress effect screen _infinitesim instrument basi functions_ rather instrument variabl provid much enhanc flexibl author demonstr hal regress provid except finegrain control screen problemat covari simultan facilit construct causal effect estim desir asymptot properti diazcaus introduc novel mediat effect base joint stochast intervent exposur mediat variabl complement new causal effect outlin work author introduc effici estim reli upon fast rate converg nuisanc paramet estim true counterpart author note hal current machin learn algorithm fast rate converg rigor proven minim global smooth assumpt reli upon hal regress construct propos estim diazcaus advanc stateoftheart causal mediat analysi also provid evid simul experi illustr data analysi hal regress brought bear challeng causal infer problem develop flexibl robust estim strategi hejazieffici develop novel theoret insight build effici estim causal effect twophas sampl design reli upon flexibl fast converg hal regress core theoret contribut correct twophas sampl famili procedur develop effici estim fullsampl effect spite censor introduc secondphas subsampl receiv much attent though develop applic larg unrestrict statist model limit author provid formul theori util causal effect estim base data subject twophas sampl attain asymptot effici way fast converg rate hal regress effect work demonstr hal regress properti suitabl flexibl estim effici infer set complex data structur author make methodolog avail txshift r packag hejazitxshiftrpkg hejazitxshiftjoss reli upon hal author addit provid exampl simul experi reanalysi recent hiv vaccin efficaci trial use propos statist approach ertefaienonparametr provid consid studi construct invers probabl weight ipw estim reli upon hal regress estim exposur mechan ipw estim classic requir use parametr model exposur mechan author propos investig novel variant estim instead reli upon fast converg rate hal regress requir nuisanc paramet function particular ertefaienonparametr show theoret advanc sever simul experi illustr data analysi data welldocu nhef studi ipw estim base hal regress made asymptot linear even effici undersmoothingbas debias procedur author simultan advanc literatur hal regress ipw estim establish interfac two area viabl futur research notabl demonstr propos ipw estim nhef data author show ipw estim base hal regress yield meaning substant conclus without typic restrict parametr assumpt requir ipw estim theoret advanc continu made hal regress result statist methodolog explor expect number varieti exampl steadili increas refer output rmarkdowngithub_docu bibliographi instreferencesbib readmemd gener readmermd pleas edit file r echo fals knitropts_chunkset collaps true comment figpath readm rhal rcmdcheckhttpsgithubcomtlversehalworkflowsrcmdcheckbadgesvghttpsgithubcomtlversehalact coverag statushttpscodecovioghtlversehalbranchmastergraphbadgesvghttpsappcodecovioghtlverseh cranhttpswwwrpkgorgbadgesversionhalhttpswwwrpkgorgpkgh cran downloadshttpscranlogsrpkgorgbadgeshalhttpscranrprojectorgpackageh cran total downloadshttpcranlogsrpkgorgbadgesgrandtotalhalhttpscranrprojectorgpackageh project statu activ project reach stabl usabl state activ developedhttpswwwrepostatusorgbadgeslatestactivesvghttpswwwrepostatusorgact licens gpl vhttpsimgshieldsiobadgelicensegplvbluesvghttpwwwgnuorglicensesgpl doihttpszenodoorgbadgedoizenodosvghttpsdoiorgzenodo doihttpsjosstheojorgpapersjossstatussvghttpsdoiorgjoss _scalable_ highli adapt lasso __authors__ jeremi coylehttpsgithubcomtlvers nima hejazihttpsnimahejaziorg rachael phillipshttpsgithubcomrachaelvp lar van der laanhttpsgithubcomlarsvanderlaan mark van der laanhttpsvanderlaanlaborg what hal hal r packag provid implement scalabl _highli adapt lasso_ hal nonparametr regress estim appli lregular lasso regress design matrix compos indic function correspond support function set covari interact thereof hal regress allow arbitrarili complex function form estim fast nearparametr converg rate global smooth assumpt vdlgener bibautfast detail theoret discuss highli adapt lasso estim consid consult exampl vdlgener vdlfinit vdluniform comput demonstr versatil hal regress see benkeserh recent theoret work demonstr success build effici estim complex paramet particular variat hal regress use estim nuisanc paramet eg vdleffici ertefaienonparametr instal standard use recommend instal packag cranhttpscranrprojectorgpackageh via r craninstal eval fals installpackagesh contribut instal _develop version_ hal github via remoteshttpscranrprojectorgpackageremot r ghmasterinstal eval fals remotesinstall_githubtlverseh issu encount bug specif featur request pleas file issuehttpsgithubcomtlversehalissu exampl consid follow minim exampl use hal gener predict via highli adapt lasso regress r exampl load packag set seed libraryh setse simul data n p x matrixrnormn p n p x sinx rnormn mean sd fit hal regress hal_fit fit_halx x yolo true hal_fittim train sampl predict pred predicthal_fit new_data x meanhal_ms pred contribut contribut welcom interest contributor consult contribut guidelineshttpsgithubcomtlversehalblobmastercontributingmd prior submit pull request citat use hal r packag pleas cite follow softwarecoylehalrpkg author coyl jeremi r hejazi nima phillip rachael v van der laan lar van der laan mark j titl hal scalabl highli adapt lasso year url httpsdoiorgzenodo doi zenodo note r packag version articlehejazihaljoss author hejazi nima coyl jeremi r van der laan mark j titl hal scalabl highli adapt lasso regress r year url httpsdoiorgjoss doi joss journal journal open sourc softwar publish open journal licens copi jeremi r coylehttpsgithubcomtlvers nima hejazihttpsnimahejaziorg content repositori distribut gpl licens see file licens detail refer titl benchmark hal packag author nima hejazihttpsnimahejaziorg jeremi coylehttpsgithubcomjeremyrcoyl date r sysdat output rmarkdownhtml_vignett bibliographi vignetterefsbib vignett vignetteindexentrybenchmark hal packag vignetteengineknitrrmarkdown vignetteencodingutf r setup includefals resultshid libraryknitr knitropts_chunksetecho true setse libraryggplot librarystringr librarytidyvers libraryfutur librarymicrobenchmark librarysuperlearn libraryh introduct document consist simpl benchmark variou choic hal implement purpos document twofold compar comput perform method illustr use differ method r mse_fun easili comput mse mse functionpr meanpr continu outcom case standard usecas simpl data structur r sim gener simpl test data n p x xmat matrixrnormn p n p sinx sinx rnormn mean sd test_n test_x matrixrnormtest_n p test_n p test_i sintest_x sintest_x rnormtest_n mean sd r hal_glmnet glmnet implement glmnet_hal_fit fit_halx x fit_typ glmnet glmnet_hal_fittim train sampl predict preds_glmnet predictglmnet_hal_fit new_data x glmnet_hal_ms msepreds_glmnet outofbag predict oob_preds_glmnet predictglmnet_hal_fit new_data test_x oob_glmnet_hal_ms mseoob_preds_glmnet test_i r hal_lassi lassi implement lassi_hal_fit fit_halx x fit_typ lassi lassi_hal_fittim train sampl predict preds_lassi predictlassi_hal_fit new_data x lassi_hal_ms msepreds_lassi outofbag predict oob_preds_lassi predictlassi_hal_fit new_data test_x oob_lassi_hal_ms mseoob_preds_lassi test_i r hal_microbenchmark mb_hal_lassi microbenchmarkunit time hal_fit_lassi fit_hali x x fit_typ lassi yolo fals summarymb_hal_lassi mb_hal_glmnet microbenchmarkunit time hal_fit_glmnet fit_hali x x fit_typ glmnet yolo fals summarymb_hal_glmnet visual p_fit_tim rbindmb_hal_lassi mb_hal_glmnet datafram transmut type ifelsestr_subascharacterexpr glmnet halglmnet hallassi time time e group_bytyp ggplot aesx type time colour type geom_boxplot geom_point stat_boxplotgeom errorbar scale_color_manualvalu wes_palettegrandbudapest xlab ylabtim sec ggtitl theme_bw themelegendposit none p_fit_tim advanc usecas drtmle r packag r sim_drtml makedata functionn n l dataframex runifn rbinomn plogislx l dataframex lx runifn rbinomn plogislx lx l rnormn lx lx returnlistl l l l l l dat makedatan add drtmle default abar c stratifi true r hal_benchmark_drtmle_estimateg mb_hal_lassi_estimateg microbenchmarkunit time hal_lassi_estimateg fit_hali asnumericdata abar x datl fit_typ lassi yolo fals summarymb_hal_lassi_estimateg mb_hal_glmnet_estimateg microbenchmarkunit time hal_glmnet_estimateg fit_hali asnumericdata abar x datl fit_typ glmnet yolo fals summarymb_hal_glmnet_estimateg visual p_estimateg_tim rbindmb_hal_lassi_estimateg mb_hal_glmnet_estimateg datafram transmut type ifelsestr_detectascharacterexpr glmnet halglmnet hallassi time time e group_bytyp ggplot aesx type time colour type geom_boxplot geom_point stat_boxplotgeom errorbar scale_color_manualvalu wes_palettegrandbudapest xlab ylabtim sec ggtitl theme_bw themelegendposit none p_estimateg_tim r hal_benchmark_drtmle_estimateq y_estq stratifi datldata abar data abar els datl x_estq asnumericunlistifelsestratifi cbinddatl datldata abar data abar cbinddatl datl data data mb_hal_lassi_estimateq microbenchmarkunit time hal_lassi_estimateq fit_hali y_estq x x_estq fit_typ lassi yolo fals summarymb_hal_lassi_estimateq mb_hal_glmnet_estimateq microbenchmarkunit time hal_glmnet_estimateq fit_hali y_estq x x_estq fit_typ glmnet yolo fals summarymb_hal_glmnet_estimateq visual p_estimateq_tim rbindmb_hal_lassi_estimateq mb_hal_glmnet_estimateq datafram transmut type ifelsestr_detectascharacterexpr glmnet halglmnet hallassi time time e group_bytyp ggplot aesx type time colour type geom_boxplot geom_point stat_boxplotgeom errorbar scale_color_manualvalu wes_palettegrandbudapest xlab ylabtim sec ggtitl theme_bw themelegendposit none p_estimateq_tim use hal superlearn hal r packag includ learner wrapper use superlearn r packag order use learner user need add slhal sllibrari input interest differ perform superlearn hal wrapper use lassi backend versu glmnet backend lasso comput facilit creat two new sl wrapper one includ r hal_sl_wrapp slhallassi function fit_typ lassi slhal fit_typ fit_typ slhalglmnet function fit_typ glmnet slhal fit_typ fit_typ r hal_benchmark_drtmle_estimateg_sl mb_hal_lassi_sl_estimateg microbenchmarkunit time hal_lassi_sl_estimateg superlearneri asnumericdata abar x datl sllibrari cslspeedglm slhallassi summarymb_hal_lassi_sl_estimateg mb_hal_glmnet_sl_estimateg microbenchmarkunit time hal_glmnet_sl_estimateg superlearneri asnumericdata abar x datl sllibrari cslspeedglm slhalglmnet summarymb_hal_glmnet_sl_estimateg visual p_sl_estimateg_tim rbindmb_hal_lassi_sl_estimateg mb_hal_glmnet_sl_estimateg datafram transmut type ifelsestr_detectascharacterexpr glmnet halglmnet hallassi time time e group_bytyp ggplot aesx type time colour type geom_boxplot geom_point stat_boxplotgeom errorbar scale_color_manualvalu wes_palettegrandbudapest xlab ylabtim sec ggtitlesuperlearn hal glmnet v lassi theme_bw themelegendposit none p_sl_estimateg_tim binari outcom case r sim_binari gener simpl test data n p x xmat matrixrnormn p n p y_p plogissinx sinx rnormn mean sd rbinomn size prob y_p glmnet_hal_bin fit_hali x x fit_typ glmnet famili binomi glmnet_hal_bintim mb_hal_bin_glmnet microbenchmarkunit time hal_bin_glmnet fit_hali x x fit_typ glmnet famili binomi yolo fals summarymb_hal_bin_glmnet titl evalu hal r vs rcpp author nima hejazihttpnimahejaziorg jeremi coyl date r sysdat output html_document r echofals setse librarydplyr librarybh libraryrcpp libraryrcpparmadillo libraryrcer librarymicrobenchmark introduct analysi hal pure r implement hal rcpp implement rcpp reflabelknitrall_rcpp_label cachetru includefals rcppdependsrcppeigen includ rcppeigenh includ mangolassi_typesh use namespac rcpp rcpp dedup evalfals return index vector indic index first copi column x rcppexport integervector index_first_copyconst mspmat x int p xcol colmap col_map integervector copy_indexp int j j p j mspmatcol current_colx j httpsstackoverflowcomquestionsstdmapinsertorstdmapfind colmapiter match col_maplower_boundcurrent_col match col_mapend col_mapkey_compcurrent_col match first column alreadi exist copy_indexj match second use index els column yet map col_mapinsertmatch colmapvalue_typecurrent_col j copy_indexj j use index returncopy_index return true iff col_ strictli less col_ order scheme rcppexport bool column_compareconst mspmat x int col_ int col_ colmap cmap mspmatcol x_x col_ mspmatcol x_x col_ returncmapkey_compx_ x_ or column x list col place result column col rcppexport void or_duplicate_columnsmspmat x const integervector col int first col col index int p_col colslength int n xrow int n ifxcoeffrefi first continu alreadi search remain column insert first found int j j p_col j int j_col colsj col index xcoeffrefi j_col xcoeffrefi j_col break rcpp lassi evalfals rcppexport numericvector lassi_predictmspmat x numericvector beta int n xrow numericvector predn beta initi intercept int k doubl current_beta k k xouters k current_beta betak minitermat it_x k it_ it_ predit_row current_beta returnpr doubl soft_thresholddoubl beta doubl lambda beta lambda beta lambda els beta lambda beta lambda els beta returnbeta _code coordin descent_ base httpwwwstanfordeduhastiepapersglmnetpdf todo implement scale center coordin descent ideal set exploit sparsiti obviou way innerproduct oper either naiv covari updat exploit sparsiti sum nonzero entri note case scale variabl alter sparsiti center scale perform front center incorpor algorithm effici obviou manner rcpp lassi evalfals rcppexport void update_coordmspmat x numericvector resid numericvector beta doubl lambda int j int n residslength doubl beta_j betaj intercept doubl new_beta doubl resid_sum minitermat i_x j i_ i_ resid_sum residsi_index new_beta resid_sum n beta_j new_beta soft_thresholdnew_beta lambda chang beta must updat residu new_beta beta_j rcout chang beta j stdendl doubl beta_diff new_betabeta_j minitermat i_x j i_ i_ residsi_index beta_diff betaj new_beta void update_coordsmspmat x numericvector resid numericvector beta doubl lambda updat coordin onebyon int k k k xouters k update_coordx resid beta lambda k updat intercept center predict doubl mean_resid meanresid resid residsmean_resid beta mean_resid rcpp lassi evalfals rcppexport numericvector lassi_fit_cdmspmat x numericvector doubl lambda int nstep int p xcol numericvector betap numericvector resid ylassi_predictx beta int step_num doubl mse meanresidsresid doubl last_ms mse doubl ratio step_num step_num nstep step_num last_ms mse update_coordsx resid beta lambda mse meanresidsresid ratio last_ms mse last_ms rcout step step_num mse mse ratio ratio stdendl ratio break returnbeta follow function enumer basi function rcpp halbasi evalfals popul map uniqu basi function base data xsub valu threshold key column indici basismap enumerate_basisconst numericmatrix x_sub const numericvector col basismap bmap find uniqu basi function int n x_subrow int n numericvector cutoff x_subrowi bmapinsertstdpairnumericvector numericvectorcutoff col returnbmap return sort list uniqu basi function base column col basi ordercolslength basi function listcolscutoff x_sub subset column x origin design matrix col index column subset rcpp halbasi evalfals rcppexport list make_basis_listconst numericmatrix x_sub const numericvector col basismap bmap enumerate_basisx_sub col list basis_listbmaps int index basismapiter bmapbegin bmapend list basi listcreat rcppnamedcol second rcppnamedcutoff first basis_listindex basi returnbasis_list function make design matrix base list basi function rcpp haldesign evalfals return indic valu basi describ colscutoff xrow_num x origin design matrix row_num row index evalu col column incid basi function cutoff threshold rcppexport bool meets_basisconst numericmatrix x const int row_num const integervector col const numericvector cutoff int p colslength int p doubl ob xrow_num colsi use index basi column ob cutoffsi returnfals returntru rcpp haldesign evalfals popul column index basis_col x_basi basi indic basi basi function x origin design matrix x_basi hal design matrix basis_col indic column popul rcppexport void evaluate_basisconst list basi const numericmatrix x spmat x_basi int basis_col int nxrow split basi x x find subbasis intersect integervector colsasintegervectorbasiscol numericvector cutoffsasnumericvectorbasiscutoff int row_num row_num n row_num meets_basisx row_num col cutoff add posit indic row basi x_basisinsertrow_num basis_col rcpp haldesign evalfals make hal design matrix base origin design matrix x list basi function blist rcppexport spmat make_design_matrixnumericmatrix x list blist gener indic vector int n xrow int basis_p blistsiz spmat x_basisnbasis_p x_basisreservenbasis_p list basi numericvector cutoff current_row integervector last_col col numericmatrix x_sub basi function int basis_col basis_col basis_p basis_col last_col col basi list blistbasis_col evaluate_basisbasi x x_basi basis_col x_basismakecompress returnx_basi discuss futur work refer titl hal benchmark author jeremi coyl date output html_document r setup includefals resultshid libraryknitr knitropts_chunksetecho true librarysl librarydelay librarysuperlearn libraryfutur libraryggplot librarydatat librarystringr libraryscal introduct document consist simpl benchmark variou choic superlearn implement wrapper function parallel scheme purpos document twofold compar comput perform method illustr use differ method test setup test system r systeminfo echofals resultsasi unam systemunam intern true os sub unam ifosdarwin cpu_model systemsysctl n machdepcpubrand_str intern true cpus_phys asnumericsystemsysctl n hwphysicalcpu intern true cpus_log asnumericsystemsysctl n hwlogicalcpu intern true cpu_clock systemsysctl n hwcpufrequency_max intern true memori systemsysctl n hwmemsiz intern true els ifoslinux cpu_model systemlscpu grep model name intern true cpu_model gsubmodel nameblank cpu_model cpus_log systemlscpu grep cpu intern true cpus_log asnumericgsubblank cpus_log tpc systemlscpu grep thread per core intern true tpc asnumericgsubblank tpc cpus_phys cpus_logicaltpc cpu_clock asnumericgsubghzgsubcpu_model memori systemcat procmeminfo grep memtot intern true memori asnumericgsubkbgsubmemori els stopunsupport os cpu model r cpu_model physic core r asnumericcpus_phys logic core r asnumericcpus_log clock speed r asnumericcpu_clockghz memori r roundasnumericmemori gb test data test r lassi microbenchmark glmnetglmnetx x_basi intercept true nlambda lambdaminratio famili gaussian alpha standard true time microbenchmark lassix_basi nlambda lambda_min_ratio center fals time microbenchmark lassix_basi nlambda lambda_min_ratio center true time microbenchmark glmnetcvglmnetx x_basi intercept true nlambda lambdaminratio famili gaussian alpha standard true time microbenchmark cv_lassox_basi center fals time microbenchmark cv_lassox_basi center true time setse cv_l_full cv_lassox_basi center fals setse cv_l_e cv_lasso_early_stoppingx_basi plotcv_l_ plotcv_l_fulllambdas_cvms microbenchmark cv_lasso_early_stoppingx_basi time session inform r sessioninfo echofals resultsasi sessioninfo titl fit highli adapt lasso hal author nima hejazihttpsnimahejaziorg jeremi coylehttpsgithubcomjeremyrcoyl rachael phillip lar van der laan date r sysdat output rmarkdownhtml_vignett bibliographi instreferencesbib vignett vignetteindexentryfit highli adapt lasso hal vignetteengineknitrrmarkdown vignetteencodingutf introduct _highli adapt lasso_ hal flexibl machin learn algorithm nonparametr estim function base avail data embed set input observ covari extrem highdimension space ie gener basi function avail data input data matrix n observ covari maximum number zeroord basi function gener approxim n cdot select set basi function among possibl reducedscreen set that gener lasso employ hal r packag hejazih coyleghh provid effici implement routin reli glmnet r packag friedmanglmnet compat canon lasso implement use lasso regress input matrix compos basi function consult benkeserh vdlgener vdlfinit detail theoret descript hal variou optim properti preliminari r simdata librarydatat libraryggplot simul constant setse n_ob n_covar make train data x replicaten_covar rnormn_ob sinx sinx rnormn_ob mean sd make test data test_x replicaten_covar rnormn_ob test_i sinx sinx rnormn_ob mean sd let look simul data r simview headx headi use highli adapt lasso r libraryh fit model hal use popular glmnet r packag lasso step r fithalglmnet hal_fit fit_halx x hal_fittim summar model raw output object may examin usual larg slot make quick examin challeng summari method provid interpret tabl basi function nonzero coeffici term ie includ term zero coeffici includ set only_nonzero_coef fals call summari hal model object r resultshalglmnet printsummaryhal_fit note length width tabl r environ might optim locat view summari tip tabl export r latex xtabl r packag here exampl printxtablesummaryfitt type latex file haltbl_meowtex obtain model predict r evalms train sampl predict hal vs hal mse functionpr meanpr preds_hal predictobject hal_fit new_data x mse_hal msepr preds_hal mse_hal r evaloob oob_hal predictobject hal_fit new_data test_x oob_hal_ms msepr oob_hal test_i oob_hal_ms reduc basi function describ benkeserh hal algorithm oper first construct set basi function subsequ fit lasso model set basi function design matrix sever approach consid reduc set basi function remov duplic basi function done default fit_hal function remov basi function correspond small set observ good rule thumb scale fracsqrtn default second two option may modifi specifi reduce_basi argument fit_hal function r fithalreduc hal_fit_reduc fit_halx x reduce_basi hal_fit_reducedtim basi function fewer observ meet criterion impos automat remov prior lasso step fit hal regress result appear r resultshalreduc summaryhal_fit_reducedt approach exist reduc set basi function actual creat essenti realworld applic hal current provid prescreen via num_knot argument hal_fit num_knot argument akin bin increas coars approxim num_knot allow one specifi number knot point use gener basi function eachal interact degre reduc total number basi function gener thu size optim problem dramat decreas runtim one pass vector length max_degre num_knot specifi number knot point use interact degre basi function thu one specifi interact higher degre eg two three way interact coars increas coars complex basi function help prevent combinatori explos basi function easili occur basi function gener possibl knot point show exampl num_knot section follow specifi smooth hal model one might wish enforc smooth function form hal fit done use smoothness_ord argument set smoothness_ord give piecewis constant fit via zeroord basi function allow discontinu jump function use one want assum smooth continu true function set smoothness_ord give piecewis linear fit via firstord basi function continu mostli differenti gener smoothness_ord k correspond piecewis polynomi fit degre k mathemat smoothness_ord k correspond find best fit constraint total variat function ktextth deriv bound constant select crossvalid let see action r setse num_knot tri chang valu see happen n_covar n_ob x replicaten_covar runifn_ob min max sinx rnormn_ob mean sd ytrue sinx hal_fit_ fit_hal x x smoothness_ord num_knot num_knot hal_fit_smooth_ fit_hal x x smoothness_ord num_knot num_knot hal_fit_smooth__al fit_hal x x smoothness_ord num_knot num_knot fit_control listcv_select fals hal_fit_smooth_ fit_hal x x smoothness_ord num_knot num_knot pred_ predicthal_fit_ new_data x pred_smooth_ predicthal_fit_smooth_ new_data x pred_smooth_ predicthal_fit_smooth_ new_data x pred_smooth__al predicthal_fit_smooth__al new_data x dt datatablex asvectorx dt cbinddt pred_smooth__al long meltdt id x ggplotlong aesx x valu group variabl geom_lin compar mean squar error mse predict true denois outcom first second order smooth hal abl recov coars basi function caus small num_knot argument also hal secondord smooth abl fit true function well expect sinc sinx smooth function main benefit impos higherord smooth fewer knot point requir nearoptim fit therefor one safe pass smaller valu num_knot big decreas runtim without sacrif perform r meanpred_ ytrue meanpred_smooth_ ytrue meanpred_smooth_ ytrue dt datatablex asvectorx ytrue ytrue pred pred_ pred pred_smooth_ pred pred_smooth_ long meltdt id x ggplotlong aesx x valu color variabl geom_lin plotx pred_ main zero order smooth fit plotx pred_smooth_ main first order smooth fit plotx pred_smooth_ main second order smooth fit gener basi function coars perform differ smooth order similar notic runtim fair bit slower knot point consid gener recommend either zero first order smooth secondord smooth tend less robust suffer extrapol new data one also use crossvalid dataadapt choos optim smooth invok fit_hal set adaptive_smooth true compar follow simul previou one hal secondord smooth perform better fewer knot point r setse n_covar n_ob x replicaten_covar runifn_ob min max sinx rnormn_ob mean sd ytrue sinx hal_fit_ fit_hal x x smoothness_ord num_knot hal_fit_smooth_ fit_hal x x smoothness_ord num_knot hal_fit_smooth_ fit_hal x x smoothness_ord num_knot pred_ predicthal_fit_ new_data x pred_smooth_ predicthal_fit_smooth_ new_data x pred_smooth_ predicthal_fit_smooth_ new_data x r meanpred_ ytrue meanpred_smooth_ ytrue meanpred_smooth_ ytrue plotx pred_ main zero order smooth fit plotx pred_smooth_ main first order smooth fit plotx pred_smooth_ main second order smooth fit formula interfac one might wish specifi function form hal fit done use formula interfac specif formula interfac allow one specifi monoton constraint compon hal fit also allow one specifi exactli basi function eg interact one wish model formula_h function gener formula object usersuppli charact string formula object contain necessari specif inform fit_hal glmnet formula_h function intend use within fit_hal usersuppli charact string input fit_hal call formula_h directli illustr purpos r setse num_knot n_ob x runifn_ob min max x runifn_ob min max runifn_ob min max x dataframex x x x rowmeanssinx rnormn_ob mean sd specifi addit model number way formula includ outcom formula_h doesnt fit hal model doesnt need outcom actual everyth tild ignor formula_h formula_h take input x matrix covari x follow includ formula without charact string r h function use specifi basi function given term hx gener oneway basi function variabl x addit model formula hx hx ha actual evalu h function well need specifi tune paramet current environ smoothness_ord num_knot look parent environ x tune paramet form_term hx hx ha form_termbasis_list dont need variabl parent environ specifi directli rmsmoothness_ord rmnum_knot h except argument k stand smooth equival smoothness_ord use k specifi number knot form_term_new hx k hx k ha k length form_term_newbasis_list lengthform_termbasis_list evalu unevalu formula object like formula hx hx ha use formula_h function formula formula_h hx hx ha x x smoothness_ord num_knot note argument smoothness_ord andor num_knot use andor k specifi h formula formula_h hx k hx k ha k x x smoothness_ord num_knot argument gener addit model subset variabl use variabl argument h default h treat wildcard basi function gener replac variabl x r smoothness_ord num_knot addit model colnamesx shortcut formula h longcut formula hx hx ha number basi function lengthformulabasis_list lengthformulabasis_list mayb want addit model x x use argument formula h cx x formula hx hx lengthformulabasis_list lengthformulabasis_list specifi interact follow r two way interact formula hx hx ha hx x formula h hx x lengthformulabasis_list lengthformulabasis_list formula h hx x hxa hxa formula h h lengthformulabasis_list lengthformulabasis_list three way interact formula h h hxax formula h h h lengthformulabasis_list lengthformulabasis_list sometim one might want build addit model includ twoway interact one variabl eg treatment done varieti way argument allow specifi subset variabl r write formula hx hx ha ha x hax use h stand add addit term manual add interact formula h hax hax use wildcard featur includ h term use mani variabl want write everi term formula h ha formula hax formula ha cx lengthformulabasis_list lengthformulabasis_list key featur hal formula monoton constraint specifi constraint achiev specifi monoton argument h note smoothness_ord monoton constrain function smoothness_ord monoton constraint function deriv eg convex constraint also specifi certain term penal lassoglmnet use pf argument h stand penalti factor r addit monoton increas model formula formula_h h monoton x smoothness_ord num_knot addit unpen monoton increas model npmle isoton regressio set penalti factor argument pf remov l penal formula formula_h h monoton pf x smoothness_ord num_knot addit unpen convex model npmle convex regressio set penalti factor argument pf remov l penal note second term equival ad unpen unconstrain mainterm eg mainterm glm formula formula_h h monoton pf k h monoton none pf k x biaddit monoton decreas model formula formula_h h monoton h monoton x smoothness_ord num_knot penal featur use reproduc glm r addit glm one knot origin first order smooth formula h k pf run hal formula equival run glm formula intract glm formula h k pf h k pf run hal formula equival run glm formula weve illustr option formula_h let show fit hal model specifi formula r get formula object fit fit_hal x x formula h smoothness_ord num_knot printsummaryfit print top row ie highest absolut coef plotpredictfit new_data x refer gener roxygen edit hand pleas edit document rsquash_halr namesquash_hal_fit aliassquash_hal_fit titlesquash hal object usag squash_hal_fitobject argument itemobjectan object class codeh contain result fit highli adapt lasso produc call codefit_h valu object class codeh similar input object reduc coeffici belong base coeffici equal zero remov descript reduc footprint drop basi function coeffici zero exampl donttest gener simpl test data n p x matrixrnormn p n p sinx sinx rnormn mean sd fit hal model squash result object reduc footprint hal_fit fit_halx x yolo fals squash squash_hal_fithal_fit gener roxygen edit hand pleas edit document rsummaryr nameprintsummaryh aliasprintsummaryh titleprint method summari class hal fit usag methodprintsummaryhalx length null argument itemxan object class codesummaryh itemlengthth number rank coeffici summar itemoth argument ignor descript print method summari class hal fit gener roxygen edit hand pleas edit document rformula_halr nameh aliash titleh formula term gener singl term hal basi usag h k null null pf monoton cnone null dot_args_as_str fals x null argument itemvari gener multivari interact basi function variabl found matrix codex parent environmentfram note like standard codeformula object variabl charact eg hww hw w hwww gener threeway hal basi function w w w codenot gener lower dimension basi function itemkth number knot univari basi function use gener tensor product basi function singl valu valu use univari basi function variabl otherwis variabl name list specifi variabl mani knot point use codehwww k listw w w equival first bin variabl codew codew codew code code code uniqu valu call codehwww coarsen data ensur fewer basi function gener lead substanti comput speedup provid variabl codenum_knot parent environ code set codenum_knot itemsth codesmoothness_ord basi function possibl valu code piecewis constant zeroord spline code piecewis linear firstord spline provid variabl codesmoothness_ord parent environ code set codesmoothness_ord itempfa codepenaltyfactor valu gener basi function use codeglmnet lasso penal procedur codepf default standard penal factor use codeglmnet codepf mean gener basi function unpen itemmonotonewheth basi function enforc monoton interact term verbcod monoton function verbcod monoton deriv eg enforc convex fit set codenon constraint codei monoton increas constraint code monoton decreas constraint use codei constrain basi function posit coeffici fit code constrain basi function neg coeffici itemjust like codeformula code codeh codeh treat wildcard variabl gener term use variabl data argument code charact vector variabl name code iter specif codeh k cw w w equival codehw k hw k hw k codeh k cw w w equival codehww k hww k hw w k itemdot_args_as_stringwheth argument code charact charact vector thu evalu directli codetru express hw w use itemxan option design matrix variabl given code found otherwis codex taken parent environ descript hal formula term gener singl term hal basi gener roxygen edit hand pleas edit document rrcppexportsr namecalc_pnz aliascalc_pnz titlecalcul proport nonzero entri usag calc_pnzx descript calcul proport nonzero entri keywordintern gener roxygen edit hand pleas edit document rmake_basisr nameenumerate_edge_basi aliasenumerate_edge_basi titleenumer basi function gener edg usag enumerate_edge_basi x max_degre smoothness_ord rep ncolx include_zero_ord fals include_lower_ord fals argument itemxan input codematrix contain observ covari follow standard convent problem statist learn itemmax_degreeth highest order interact term basi function ought gener default codenul correspond gener basi function full dimension input matrix itemsmoothness_ordersan integ vector length codencolx specifi desir smooth function covari k smooth indic basi k first order smooth addit model compon function covari degre smooth specifi smoothness_ord nonaddit compon tensor product univari basi function univari basi function tensor product smooth degre specifi smoothness_ord iteminclude_zero_ordera codelog indic whether zeroth order basi function includ covari codetru addit smooth basi function given codesmoothness_ord allow algorithm dataadapt choos appropri degre smooth iteminclude_lower_ordera codelog like codeinclude_zero_ord except includ basi function lower smooth degre specifi via codesmoothness_ord descript degre smooth greater must gener lower order smooth basi function use knot point edg hypercub exampl consid fx x x secondord smooth gener pure quadrat basi function also need includ x function correspond firstord hal basi function left valueedg x keywordintern gener roxygen edit hand pleas edit document rformula_halr nameformula_help aliasformula_help aliasfill_dots_help aliasfill_dot titleformula helper usag fill_dots_helpervar_nam fill_dotsvar_nam argument itemvar_namesa codecharact vector variabl name itemspecif variabl use formula descript formula helper gener roxygen edit hand pleas edit document rsl_halr namepredictslh aliaspredictslh titlepredictslh usag methodpredictslhalobject newdata argument itemobjecta fit object class codeh itemnewdataa matrix new observ obtain predict itemnot use valu codenumer vector predict codeslh object base provid codenewdata descript predict method object class codeslh gener roxygen edit hand pleas edit document rhalr nameh aliash titleh quot usag hal descript print quot hal robot space odyssey gener roxygen edit hand pleas edit document rcv_lasso_early_stoppingr namecv_lasso_early_stop aliascv_lasso_early_stop titlecrossvalid lasso indic base usag cv_lasso_early_stoppingx_basi n_lambda n_fold argument itemx_basisa codedgcmatrix object correspond spars matrix basi function gener hal algorithm itemya codenumer vector observ outcom variabl valu itemn_lambdaa codenumer scalar indic number valu l regular paramet lambda obtain fit lasso full data crossvalid use select optim lambda minim risk among itemn_foldsa codenumer scalar number fold use crossvalid procedur select optim valu lambda descript fit lasso regress use custom procedur crossvalid base pkgorigami gener roxygen edit hand pleas edit document rmake_basisr namebasis_of_degre aliasbasis_of_degre titlecomput degre basi function usag basis_of_degre x degre smoothness_ord include_zero_ord include_lower_ord argument itemxan input codematrix contain observ covari follow standard convent problem statist learn itemdegreeth highest order interact term basi function ought gener default codenul correspond gener basi function full dimension input matrix itemsmoothness_ordersan integ vector length codencolx specifi desir smooth function covari k smooth indic basi k first order smooth addit model compon function covari degre smooth specifi smoothness_ord nonaddit compon tensor product univari basi function univari basi function tensor product smooth degre specifi smoothness_ord iteminclude_zero_ordera codelog indic whether zeroth order basi function includ covari codetru addit smooth basi function given codesmoothness_ord allow algorithm dataadapt choos appropri degre smooth iteminclude_lower_ordera codelog like codeinclude_zero_ord except includ basi function lower smooth degre specifi via codesmoothness_ord valu codelist contain basi function cutoff gener set input column particular prespecifi degre descript find full list basi function particular degre gener roxygen edit hand pleas edit document rformula_halr nameprintformula_h aliasprintformula_h titleprint formula_h object usag methodprintformula_halx argument itemxa formula_h object itemoth argument ignor descript print formula_h object gener roxygen edit hand pleas edit document rrcppexportsr nameas_dgcmatrix aliasas_dgcmatrix titlefast coercion spars matrix usag as_dgcmatrixxx_ argument itemxx_an object class codematrix spars structur suitabl coercion spars matrix format codedgcmatrix valu object class codedgcmatrix coerc input codexx_ descript fast effici coercion standard matrix object spars matric borrow httpgalleryrcpporgarticlessparsematrixcoercion intern use gener roxygen edit hand pleas edit document rsl_halr nameslh aliasslh titlewrapp classic superlearn usag slhal x newx null famili statsgaussian obsweight rep lengthi id null max_degre ifelsencolx smoothness_ord num_knot ifelsesmoothness_ord reduce_basi sqrtlengthi lambda null argument itemya codenumer vector observ outcom variabl itemxan input codematrix dimens number observ number covari use deriv design matrix basi function itemnewxa matrix new observ obtain predict default codenul comput predict train input codex itemfamilya codelinkstatsfamili object one support codelinkglmnetglmnet specifi errorlink famili gener linear model itemobsweightsa codenumer vector observationallevel weight itemida codenumer vector id itemmax_degreeth highest order interact term basi function ought gener itemsmoothness_ordersan codeinteg vector length greater specifi smooth basi function see argument codesmoothness_ord codelinkfit_h inform itemnum_knotsan codeinteg vector length codemax_degre specifi maximum number knot point ie bin covari gener basi function see codenum_knot argument codelinkfit_h inform itemreduce_basisa codenumer valu bound open unit interv indic minimum proport basi function column need basi function includ procedur fit lasso basi function lower proport cutoff remov itemlambdaa userspecifi sequenc valu regular paramet lasso l regress codenul default sequenc codelinkglmnetcvglmnet use crossvalid optim valu regular paramet select codelinkglmnetcvglmnet itemnot use valu object class codeslh fit codeh object correspond predict base input data descript wrapper pkgsuperlearn object class codeh gener roxygen edit hand pleas edit document rreduce_basis_filterr namemake_reduced_basis_map aliasmake_reduced_basis_map titlemassbas reduct basi function usag make_reduced_basis_mapx_basi reduce_basis_crit argument itemx_basisa matrix basi function redund basi function alreadi remov itemreduce_basis_crita scalar codenumer valu bound open interv indic minimum proport basi function column need basi function includ procedur fit lasso basi function lower proport specifi cutoff remov argument default codenul case basi function use lassofit stage hal algorithm valu binari codenumer vector indic column matrix basi function keep given one discard given zero descript helper function find basi function keep equival discard base proport observ ie mass includ given basi function gener roxygen edit hand pleas edit document rhalr namefit_h aliasfit_h titleh highli adapt lasso usag fit_hal x formula null x_unpen null max_degre ifelsencolx smoothness_ord num_knot num_knots_generatormax_degre max_degre smoothness_ord smoothness_ord base_num_knots_ base_num_knots_ reduce_basi sqrtlengthi famili cgaussian binomi poisson cox lambda null id null offset null fit_control listcv_select true n_fold foldid null use_min true lambdaminratio e prediction_bound default basis_list null return_lasso true return_x_basi fals yolo fals argument itemxan input codematrix dimens number observ number covari use deriv design matrix basi function itemya codenumer vector observ outcom variabl itemformulaa charact string formula use codelinkformula_h see document detail itemx_unpenalizedan input codematrix number row codex l penal perform note codex_unpen directli append design matrix basi expans perform codex_unpen itemmax_degreeth highest order interact term basi function ought gener itemsmoothness_ordersan codeinteg specifi smooth basi function see detail codesmoothness_ord inform itemnum_knotsan codeinteg vector length codemax_degre specifi maximum number knot point ie bin covari gener basi function codenum_knot unitlength vector codenum_knot use degre recommend default set codenum_knot recommend default decreas codenum_knot increas codemax_degre codesmoothness_ord prevent expens combinatori explos number higherdegre higherord basi function gener allow complex optim problem grow scalabl see detail codenum_knot inform itemreduce_basisa codenumer valu bound open unit interv indic minimum proport basi function column need basi function includ procedur fit lasso basi function lower proport cutoff remov codereduce_basi set codenul basi function use lassofit stage codefit_h itemfamilya codecharact codelinkstatsfamili object support codelinkglmnetglmnet specifi errorlink famili gener linear model codecharact option limit gaussian fit standard penal linear model binomi penal logist regress poisson penal poisson regress cox penal proport hazard model note pass famili object lead slower perform rel pass charact famili support exampl one set codefamili binomi instead codefamili binomi call codefit_h itemlambdauserspecifi sequenc valu regular paramet lasso l regress codenul default sequenc codelinkglmnetcvglmnet use crossvalid optim valu regular paramet select codelinkglmnetcvglmnet codefit_control codecv_select argument set codefals lasso model fit via codelinkglmnetglmnet regular coeffici valu lambda input array return itemida vector id valu use gener crossvalid fold codelinkglmnetcvglmnet argument ignor codefit_control codecv_select argument codefals itemoffseta vector offset valu use fit itemfit_controllist argument fit includ follow argument other pass codelinkglmnetcvglmnet codelinkglmnetglmnet item item codecv_select codelog specifi sequenc specifi codelambda valu pass codelinkglmnetcvglmnet order singl optim valu codelambda select accord crossvalid codecv_select fals codelinkglmnetglmnet model use fit sequenc singl codelambda item coden_fold integ number fold use split data vfold crossvalid use codecv_select true item codefoldid option codenumer contain valu coden_fold identifi fold observ assign suppli coden_fold miss case vector pass directli codelinkglmnetcvglmnet use codecv_select true item codeuse_min specifi choic lambda select codelinkglmnetcvglmnet codetru codelambdamin use otherwis codelambdas use codecv_select true item codelambdaminratio codelinkglmnetglmnet argument specifi smallest valu codelambda fraction codelambdamax data deriv entri valu ie smallest valu coeffici zero weve seen set codelambdaminratio lead codelambda valu fit data suffici well item codeprediction_bound vector size two provid lower upper bound predict codeprediction_bound default predict bound codemini sdi codemaxi sdi bound ensur extrapol necessari crossvalid select andor super learn itembasis_listth full set basi function gener codex itemreturn_lassoa codelog indic whether return codelinkglmnetglmnet fit object lasso model itemreturn_x_basisa codelog indic whether return matrix possibl reduc basi function use codefit_h itemyoloa codelog indic whether print one curat select quot hal comput critic acclaim epic sciencefict film space odyssey valu object class codeh contain list basi function copi map coeffici estim basi function time result assess comput effici descript estim procedur hal highli adapt lasso detail procedur use custom c implement gener design matrix spline basi function covari interact covari lasso regress fit design matrix via codelinkglmnetcvglmnet custom implement deriv pkgorigami maximum dimens design matrix eqnn eqnn eqnn number observ eqnd number covari codesmoothness_ord zeroord spline piecewis constant gener assum true regress function smooth continu codesmoothness_ord firstord spline piecewis linear gener assum continu true regress function codesmoothness_ord secondord spline piecewis quadrat linear term gener assum true regress function singl order differenti codenum_knot argument specifi number knot point covari codemax_degre fewer knot point significantli decreas runtim might overli simplist consid codesmoothness_ord knot point eg significantli reduc perform codesmoothness_ord higher fewer knot point eg actual better perform recommend specifi codenum_knot respect codesmoothness_ord vector length codemax_degre valu decreas exponenti prevent combinatori explos number higherdegre basi function gener default behavior codenum_knot follow logic codesmoothness_ord codenum_knot set eqn j codesmoothness_ord higher codenum_knot set eqn j eqnj interact degre also includ suitabl set codenum_knot less complex default codenum_knot thu result faster runtim item item good set littl cost perform item item codesmoothness_ord codemax_degre codenum_knot c item codesmoothness_ord codemax_degre codenum_knot c item recommend set fairli fast runtim item item codesmoothness_ord codemax_degre codenum_knot c item codesmoothness_ord codemax_degre codenum_knot c item recommend set fast runtim item item codesmoothness_ord codemax_degre codenum_knot c item codesmoothness_ord codemax_degre codenum_knot c item recommend set fast runtim item item codesmoothness_ord codemax_degre codenum_knot c item codesmoothness_ord codemax_degre codenum_knot c exampl n p x xmat matrixrnormn p n p y_prob plogi sinx sinx rbinomn n size prob y_prob hal_fit fit_halx x famili binomi pred predicthal_fit new_data x gener roxygen edit hand pleas edit document rlassir namepredictlassi aliaspredictlassi titlepredict method lasso indic base usag methodpredictlassifit new_x_basi lambda null argument itemfit itemnew_x_basi itemlambda descript predict method lasso indic base keywordintern gener roxygen edit hand pleas edit document rrcppexportsr nameindex_first_copi aliasindex_first_copi titlefind copi column usag index_first_copyx argument itemxspars matrix contain column indic function descript index vector column x indic index first copi column gener roxygen edit hand pleas edit document rrcppexportsr nameevaluate_basi aliasevaluate_basi titlegener basi function usag evaluate_basisbasi x x_basi basis_col argument itembasisth basi function itemxth design matrix contain origin data itemx_basisth hal design matrix contain indic function itembasis_colnumer indic column popul descript popul column index basis_col x_basi basi indic gener roxygen edit hand pleas edit document rrcppexportsr namemeets_basi aliasmeets_basi titlecomput valu basi function usag meets_basisx row_num col cutoff order argument itemxth design matrix contain origin data itemrow_numnumeri row index evalu itemcolsnumer column indic basi function itemcutoffsnumer provid threshold itemordersnumer provid smooth order descript comput return indic valu basi describ col cutoff given row x gener roxygen edit hand pleas edit document rrcppexportsr namemake_basis_list aliasmake_basis_list titlesort basi function usag make_basis_listx_sub col order_map argument itemx_suba subset column x origin design matrix itemcolsan index column reduc subset itemorder_mapa vector length origin unsubset matrix x specifi smooth function covari descript build sort list uniqu basi function base column basi function list detail note sort column perform basi order equal colslength basi function listcol cutoff gener roxygen edit hand pleas edit document rformula_halr nameformula_h aliasformula_h titleh formula addit ad formula term object togeth singl formula object term usag methodformula_halx argument itemxa codeformula_h object output codeh itemya codeformula_h object output codeh descript hal formula addit ad formula term object togeth singl formula object term gener roxygen edit hand pleas edit document rhal_quotesr doctypedata namehal_quot aliashal_quot titleh quot space odyssey format vector quot usag hal_quot descript curat select quot hal comput critic acclaim epic sciencefict film space odyssey keyworddataset gener roxygen edit hand pleas edit document rfind_dupesr namemake_copy_map aliasmake_copy_map titlebuild copi map usag make_copy_mapx_basi argument itemx_basisa design matrix consist basi indic function covari x term interact thereof valu codelist codenumer vector indic indic basi function ident train set descript build copi map exampl donttest gendata functionn w runifn w rnormn w runifn w rnormn g plogi w w w w rbinomn g q plogi w w w rbinomn q dataframea w w w w setse data gendata covar setdiffnamesdata x asmatrixdata covar drop fals basis_list enumerate_basisx x_basi make_design_matrixx basis_list copy_map make_copy_mapx_basi gener roxygen edit hand pleas edit document rformula_halr nameformula_h aliasformula_h titleh formula convert formula string codeformula_h object usag formula_halformula smoothness_ord num_knot x null argument itemformulaa codeformula_h object output codeh itemsmoothness_ordersa default valu code provid explicitli function codeh itemnum_knotsa default valu codek provid explicitli function codeh itemxcontrol inherit variabl codex parent environ codenul default variabl inherit descript hal formula convert formula string codeformula_h object gener roxygen edit hand pleas edit document rhalr namenum_knots_gener aliasnum_knots_gener titlea default gener codenum_knot argument degre interact smooth order usag num_knots_gener max_degre smoothness_ord base_num_knots_ base_num_knots_ argument itemsmoothness_ordersse codelinkfit_h itembase_num_knots_th base number knot zerothord smooth basi function number knot degre interact decay codebase_num_knots_d code interact degre basi function itembase_num_knots_th base number knot greater order smooth basi function number knot degre interact decay codebase_num_knots_d code interact degre basi function itemdinteract degre descript default gener codenum_knot argument degre interact smooth order keywordintern gener roxygen edit hand pleas edit document rlassir namelassi aliaslassi titlecustom lasso implement matric indic function usag lassi x lambda null nlambda lambda_min_ratio center fals argument itemxth covari matrix itemyth outcom vector itemlambdasa sequenc valu l regular paramet lambda use fit lasso default codenul itemnlambdanumb lambda fit itemlambda_min_ratioratio largest smallest lambda fit itemcent descript custom lasso implement matric indic function keywordintern gener roxygen edit hand pleas edit document rsummaryr namesummaryh aliassummaryh titlesummari method hal fit object usag methodsummaryh object lambda null only_nonzero_coef true include_redundant_term fals round_cutoff argument itemobjectan object class codeh contain result fit highli adapt lasso produc codelinkfit_h itemlambdaopt codenumer valu lambda tune paramet correspond coeffici valu summar default codelinkfit_h optim valu codelambda_star minimum valu codelambda_star itemonly_nonzero_coefsa codelog specifi whether summari includ term nonzero coeffici iteminclude_redundant_termsa codelog specifi whether summari remov socal redund term defin redund term say x term basi function correspond exist basi function duplic duplic contain x term part term x term inclus would redund exampl say coeffici correspond three term iag ibmi iag ieduc codeinclude_redundant_term codefals default second basi function omit itemround_cutoffsan codeinteg indic number decim place use round cutoff valu term exampl bmi numer round third decim exampl would need specifi coderound_cutoff order yield term like ibmi oppos someth like ibmi round intend simplifi termwis part output round basi cutoff codeh model coeffici round itemaddit argument pass codesummari support valu list summar codeh object coeffici descript summari method hal fit object detail method summar coeffici highli adapt lasso estim term basi function correspond covari interact covari return singl object class codeh due natur basi function term summari tabl extrem wide r environ might optim locat view summari tabl export r latex pkgxtabl packag similar here exampl codeprintxtablesummaryfitt type latex file dttex gener roxygen edit hand pleas edit document rpredictr namepredicth aliaspredicth titlepredict hal fit usag methodpredicth object new_data new_x_unpen null offset null type crespons link p_reserv argument itemobjectan object class codeh contain result fit highli adapt lasso produc codelinkfit_h itemnew_dataa codematrix codedatafram contain new data ie observ use fit codeh object that pass via codeobject argument codeh object comput predict valu itemnew_x_unpenalizedif user suppli codex_unpen train user also suppli matrix number observ codenew_data itemoffseta vector offset must provid provid train itemtypeeith respons predict respons link untransform predict scale link function itemp_reservespars matrix prealloc proport anticip proport design matrix default valu recommend set dens design matrix expect would use set codep_reserv higher valu itemaddit argument pass codepredict necessari valu codenumer vector predict codeh object descript predict hal fit detail method comput extract predict fit highli adapt lasso estim return singl object class codeh note predict method function similarli equival method pkgglmnet particular procedur return subset lambda origin specifi call codelinkfit_h result refit instead return predict lambda specifi call codelinkfit_h construct codeobject codefit_control codecv_select set codefals codefit_control codecv_select set codetru predict return valu lambda select crossvalid gener roxygen edit hand pleas edit document rcv_lassor namecv_lasso aliascv_lasso titlecrossvalid lasso indic base usag cv_lassox_basi n_lambda n_fold center fals argument itemx_basisa codedgcmatrix object correspond spars matrix basi function gener hal algorithm itemya codenumer vector observ outcom variabl valu itemn_lambdaa codenumer scalar indic number valu l regular paramet lambda obtain fit lasso full data crossvalid use select optim lambda minim risk among itemn_foldsa codenumer scalar number fold use crossvalid procedur select optim valu lambda itemcenterbinari codetru covari center much slower match codeglmnet implement default codefals descript fit lasso regress use custom procedur crossvalid base pkgorigami gener roxygen edit hand pleas edit document rmake_basisr namequant aliasquant titlediscret variabl number bin uniqu valu usag quantizerx bin argument itemxa codenumer vector discret itembinsa codenumer scalar indic number bin codex discret descript discret variabl number bin uniqu valu keywordintern gener roxygen edit hand pleas edit document rrcppexportsr namelassi_predict aliaslassi_predict titlepredict lassi model usag lassi_predictx beta intercept argument itemxa spars matrix hal basi function itembetaa vector coeffici valu hal basi function itemintercepta numer valu give intercept hal model descript predict lassi model gener roxygen edit hand pleas edit document rrcppexportsr namemake_design_matrix aliasmake_design_matrix titlebuild hal design matrix usag make_design_matrixx blist p_reserv argument itemxmatrix covari contain observ data column itemblistlist basi function build hal design matrix itemp_reservespars matrix prealloc proport default valu one expect dens hal design matrix use set p_reserv higher valu valu codedgcmatrix spars matrix indic basi function correspond design matrix zeroord highli adapt lasso descript make hal design matrix base origin design matrix x list basi function argument blist exampl donttest gendata functionn w runifn w rnormn w runifn w rnormn g plogi w w w w rbinomn g q plogi w w w rbinomn q dataframea w w w w setse data gendata covar setdiffnamesdata x asmatrixdata covar drop fals basis_list enumerate_basisx x_basi make_design_matrixx basis_list gener roxygen edit hand pleas edit document rrcppexportsr nameapply_copy_map aliasapply_copy_map titleappli copi map usag apply_copy_mapx copy_map argument itemxspars matrix contain column indic function itemcopy_mapth copi map valu codedgcmatrix spars matrix correspond design matrix zeroth order highli adapt lasso duplic column basi function remov descript duplic train set column togeth exampl donttest gendata functionn w runifn w rnormn w runifn w rnormn g plogi w w w w rbinomn g q plogi w w w rbinomn q dataframea w w w w setse data gendata covar setdiffnamesdata x asmatrixdata covar drop fals basis_list enumerate_basisx x_basi make_design_matrixx basis_list copy_map make_copy_mapx_basi x_basis_uniq apply_copy_mapx_basi copy_map gener roxygen edit hand pleas edit document rmake_basisr namebasis_list_col aliasbasis_list_col titlelist basi function usag basis_list_col col x smoothness_ord include_zero_ord include_lower_ord fals argument itemcolsindex indic codenumer covari column interest data matrix codex basi function ought gener note basi function interact column comput automat itemxa codematrix contain observ row covari column basi function comput covari itemsmoothness_ordersan integ vector length codencolx specifi desir smooth function covari k smooth indic basi k first order smooth addit model compon function covari degre smooth specifi smoothness_ord nonaddit compon tensor product univari basi function univari basi function tensor product smooth degre specifi smoothness_ord iteminclude_zero_ordera codelog indic whether zeroth order basi function includ covari codetru addit smooth basi function given codesmoothness_ord allow algorithm dataadapt choos appropri degre smooth iteminclude_lower_ordera codelog like codeinclude_zero_ord except includ basi function lower smooth degre specifi via codesmoothness_ord valu codelist contain basi function gener set input column descript build list basi function set column gener roxygen edit hand pleas edit document rlassir namelassi_fit_modul aliaslassi_fit_modul titlercpp modul lassi_fit_modul descript rcpp modul lassi_fit_modul gener roxygen edit hand pleas edit document rrcppexportsr namecalc_xscal aliascalc_xscal titlecalcul center scale matric usag calc_xscalex xcenter argument itemxa spars matrix center itemxcentera vector column mean use center x descript calcul center scale matric keywordintern gener roxygen edit hand pleas edit document rhalpackag nameh aliash titleh descript packag fit highli adapt lasso hal estim gener roxygen edit hand pleas edit document rcv_lassor namelassi_origami aliaslassi_origami titlesingl lasso estim crossvalid origami usag lassi_origamifold data lambda center fals argument itemfolda codefold object produc call codemake_fold pkgorigami itemdataa codedgcmatrix object contain outcom valu first column vector correspond basi function hal column consult descript hal regress detail itemlambdasa codenumer vector correspond sequenc lambda valu obtain fit lasso full data itemcenterbinari codetru covari center much slower match codeglmnet implement default codefals descript fit lasso regress singl fold crossvalid data set meant call use codelinkorigamicross_valid done codelinkcv_lasso note procedur meant invok intern use gener roxygen edit hand pleas edit document rmake_basisr nameenumerate_basi aliasenumerate_basi titleenumer basi function usag enumerate_basi x max_degre null smoothness_ord rep ncolx include_zero_ord fals include_lower_ord fals num_knot null argument itemxan input codematrix contain observ covari follow standard convent problem statist learn itemmax_degreeth highest order interact term basi function ought gener default codenul correspond gener basi function full dimension input matrix itemsmoothness_ordersan integ vector length codencolx specifi desir smooth function covari k smooth indic basi k first order smooth addit model compon function covari degre smooth specifi smoothness_ord nonaddit compon tensor product univari basi function univari basi function tensor product smooth degre specifi smoothness_ord iteminclude_zero_ordera codelog indic whether zeroth order basi function includ covari codetru addit smooth basi function given codesmoothness_ord allow algorithm dataadapt choos appropri degre smooth iteminclude_lower_ordera codelog like codeinclude_zero_ord except includ basi function lower smooth degre specifi via codesmoothness_ord itemnum_knotsa vector length codemax_degre determin granular knot point gener basi function degre basi function first entri codenum_knot determin number knot point use univari basi function gener kth entri codenum_knot determin number knot point use kth degre basi function specif kth degre basi function tensor product k univari basi function determin number knot point use univari basi function tensor product valu codelist basi function gener covari interact thereof prespecifi degre descript gener basi function covari interact term thereof specifi orderdegre exampl donttest gendata functionn w runifn w rnormn w runifn w rnormn g plogi w w w w rbinomn g q plogi w w w rbinomn q dataframea w w w w setse data gendata covar setdiffnamesdata x asmatrixdata covar drop fals basis_list enumerate_basisx