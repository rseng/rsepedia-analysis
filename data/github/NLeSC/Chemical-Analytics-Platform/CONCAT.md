# Change Log
All notable changes to this project will be documented in this file.
This project adheres to [Semantic Versioning](http://semver.org/).

## [Unreleased]

## 0.8.6 - 2018-09-27

### Changed

* Upgraded Virtualbox Guest Additions to v5.2.10
* Upgrade KNIME to v3.5.2
* Upgraded RDKit to 2017_09_3

### Fixed

* Remove old kernels (#25)
* Updated cran url
* Unexpected disconnect

### Removed

* EU Openscreen nodes, no long available in community contributions

## 0.8.5 - 2017-11-12

### Changed

* Upgraded Virtualbox Guest Additions to v5.2.0
* Upgrade KNIME to v3.4.1
* Upgraded to Chembl to v23
* Upgraded Ubuntu to 16.04.3
* Upgraded RDKit to 2017_09_1

## 0.8.4 - 2017-03-10

### Changed

* Upgraded Virtualbox Guest Additions to v5.1.16
* Upgraded RDKit to 2016_09_4
* Upgraded KNIME to v3.3.1
* Erlwood nodes are now part of KNIME distro

## 0.8.3 - 2016-09-20

### Changed

* Upgraded Virtualbox Guest Additions to v5.1.6
* Upgraded to Chembl to v22

## 0.8.2 - 2016-09-04

### Added

* EU-OPENSCREEN KNIME nodes

### Changed

* Upgraded Virtualbox Guest Additions to v5.1.4
* Upgraded RDKit to 2016.03.4
* Upgraded KNIME to v3.2.1
* Upgraded Ubuntu to 16.04.1

## 0.8.0 - 2016-05-17

### Added

* Check distro version, give upgrade instructions when provision scripts require different distro version

### Changed

* Upgraded RDKit to 2016.03.1
* Upgraded Ubuntu to 16.04
* Upgraded KNIME to v3.1.2
* Upgraded Virtualbox Guest Additions to v5.0.20

## 0.7.2 - 2016-02-24

### Changed

- Start from Ubuntu 14.04.4 instead of 14.04.3
- Upgraded KNIME to version 3.1.

## 0.7.1 - 2016-01-22

### Changed

- Updated KNIME update sits

### Fixed

- Unable to update KNIME as vagrant user

## 0.7.0 - 2016-01-20

### Added

- Chembl database create script, see [wiki](https://github.com/NLeSC/Chemical-Analytics-Platform/wiki/Cheatsheet#chembl-database-tables)

### Deprecated

- Switched from starting from myCheml vagrant box to packer build system which starts from Ubuntu iso.

### Removed

- Chembl database

## 0.6.1 - 2016-01-06

### Changed

- Updated KNIME to 3.1
- Updated Virtualbox Guest Additions to 5.0.12

## 0.6.0 - 2016-11-10

### Added

- self upgrade script, see [wiki](https://github.com/NLeSC/Chemical-Analytics-Platform/wiki/Cheatsheet#performing-a-self-upgrade)

## 0.5.0 - 2015-10-16

### Added

- camb (https://github.com/cambDI/camb)
# Chemical-Analytics-Platform Virtual Machine

[![Build Status](https://travis-ci.org/NLeSC/Chemical-Analytics-Platform.svg?branch=master)](https://travis-ci.org/NLeSC/Chemical-Analytics-Platform)
[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.1436464.svg)](https://doi.org/10.5281/zenodo.1436464)

Scripts to create a Vagrant box using packer and ansible.

For available software inside Virtual machine see https://github.com/NLeSC/Chemical-Analytics-Platform/wiki

# Usage

Requirements:

* VirtualBox, https://www.virtualbox.org
* Vagrant, https://www.vagrantup.com

Start virtual machine with

```
vagrant init nlesc/chemical-analytics-platform
vagrant up
```

# Build

Requirements:

* VirtualBox, https://www.virtualbox.org/
* Vagrant, https://www.vagrantup.com/
* Packer, https://packer.io
* Enough disk space (15Gb)
  * Make sure temporary directory (/tmp by default on Linux) has enough space. Use TMPDIR environment variable to overwrite default location

```
packer build -force packer.json
```

The build will produce 2 files:
* packer_virtualbox-iso_virtualbox.box, Vagrant box, ca be used as base for a Vagrant virtual machine
* output-virtualbox-iso/cap.ova, Open Virtualization Format Archive, can be imported into VirtualBox as a virtual machine

# Test

Add box to Vagrant with

```
vagrant box remove --force --all nlesc/chemical-analytics-platform
vagrant box add --name nlesc/chemical-analytics-platform packer_virtualbox-iso_virtualbox.box
```

Then use steps described at [Usage](#Usage) chapter in a new directory.

# Push

Requirements:

* Atlas account, https://atlas.hashicorp.com

Publish box on https://atlas.hashicorp.com/nlesc/boxes/chemical-analytics-platform using the following steps:

1. Create a new version
2. Create a new provider
3. Choose `virtualbox` as provider
4. Choose Upload
5. Press `Continue to upload`
6. Upload the `packer_virtualbox-iso_virtualbox.box` file generated by `vagrant package`
7. Edit version
8. Press `Release version`

# Extending

The ova file produced during build can be used as as starting point in a another packer image build project using the 'virtualbox-ovf' packer builder.

To give another project also [self upgrade](https://github.com/NLeSC/Chemical-Analytics-Platform/wiki/Cheatsheet#performing-a-self-upgrade) capabilities add it's upgrade script to
 `/etc/vagrant_upgrade.d` directory.
