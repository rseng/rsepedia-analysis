doihttpszenodoorgbadgesvghttpszenodoorgbadgelatestdoi esalsampi project contain wide area mpi use esalsa project disclaim code still experiment goal esalsampi allow tradit mpi applic run combin multipl supercomput cluster without chang singl line code applic esalsampi capabl merg sever distict mpi job run differ supercomput present applic singl set mpi task way applic think run singl supercomput realiti run two work esalsampi consist three compon mpi wrapper gateway server shown exampl exampledocimagesesalsampisetuppng exampl esalsampi setup empi wrapper implement part regular mpi interfac allow applic compil link esalsampi instead normal mpi implement way mpi call perform applic intercept esalsampi howev esalsampi complet mpi implement instead mpi call simpl forward local mpi implement use mpi profil interfac mpi call requir wide area commun handl differ server act central contact point allow distict esalsampi job run differ supercomput locat addit server provid support oper commun group exampl server creat mpi_comm_world commun contain task partici machin task gateway forward local mpi messag wide area link vice versa gateway connect peer gateway remot site via one tcp stream site may use multipl gateway mpi call intercept esalsampi decis made call handl local exampl mpi_send differ process cluster must forward local gateway forward remot site exampl mpi_send cluster collect oper involv process mention code still experiment howev alreadi use run parallel ocean program pop commun earth system model cesm multiclust set pop found httpclimatelanlgovmodelspop cesm found httpwwwcesmucaredu instal esalsampi first make sure defin empi_hom environ variabl exampl export empi_homehomejasonesalsampi next set cc fc variabl empi_homeempiconfig refer c fortran compil use also set mpicc variabl refer mpi compil script provid local mpi wish use exampl ccgcc fcgfortran mpiccmpicc addit need set mpi_hom variabl point locat mpi instal wish use exampl mpi_homeusrlibopenmpi also mpi_includ mpi_lib mpi_lib variabl may need chang although default set often correct mpi_includempi_homeinclud mpi_libsmpi_homelib mpi_libmpi next build esalsampi like cd empi_hom make run esalsampi see examplehttpsgithubcomnlescesalsampitreedevelopexampl exampl use esalsampi applic esalsa project esalsa project cooper netherland escienc center nlesc institut marin atmospher research imau utrecht univers vrije universiteit amsterdam vu goal esalsa project determin extent region sea level eastern north atlant affect chang ocean circul next decad project improv extend pop support distribut comput techniqu acceler gpu inform esalsa project see httpwwwesciencecenternlprojectsprojectportfolioclimateresearch latest version detail latest version found esalsa mpi project web site httpsgithubcomnlescesalsampi copyright disclaim xenon copyright netherland escienc center releas apach licens version see httpwwwesciencecenternl inform netherland escienc center see licens file inform exampl esalsampi configur directori contain exampl esalsa mpi consist examplechttpsgithubcomnlescesalsampitreedevelopexampleexamplec exampl mpi applic serverconfighttpsgithubcomnlescesalsampitreedevelopexampleserverconfig server configur file locationconfighttpsgithubcomnlescesalsampitreedevelopexamplelocationconfig confur file locat locationconfighttpsgithubcomnlescesalsampitreedevelopexamplelocationconfig configur locat exampl applic simpl initi mpi print rank size mpi_comm_world exist includ stdioh includ mpih int mainint argc char argv int rank size error error mpi_initargc argv error mpi_success fprintfstderr init fail dn error mpi_comm_sizempi_comm_world size mpi_comm_rankmpi_comm_world rank fprintfstderr process dn rank size mpi_fin return compil exampl use empicc script make sure empi_hom variabl set point esalsampi directori run follow command empi_homescriptsempicc examplec exampl exampl compil esalsampi configur must creat run server configur serverconfig file describ server setup number locat use experi configur use locat exampl configur server support experi run two locat call locat locat name use identifi locat string may use long contain whitespac string uniqu server configur listnen incom connect locat exampl use port sinc singl gateway locat connect server connect server creat locat configur use one gateway task addit gateway task configur use one tcp stream connect peer gateway locat result gateway streams_per_gateway tcp stream creat exampl use singl gateway task singl tcp stream result serverconfig file look like name experi exampl port server listnen number locat use experi number gateway use per locat number stream use connect gateway next serverconfig file contain configur individu locat configur describ number applic task use port rang network interfac use gateway start port rang need specifi port ad tcp stream gateway therefor entir port rang n n gateway streams_per_gateway exampl one port need rest serverconfig file look like name first locat locat number applic task start tcp port rang network interfac use gateway name second locat locat number applic task start port rang network interfac use gateway locat configur addit serverconfig file two separ config file need locat config file read gateway locat use contact server identifi config file contain singl line name server address server port exampl locationconfig look like locat locationconfig look like locat note name config file match one name defin serverconfig file server address server port contain ip address port number server reach run exampl run exampl applic use configur shown first need start esalsampi server empi_homescriptsempiserversh serverconfig server start print someth like log start start esalsa mpi server experi exampl cluster gatewaysclust applic process total process parallel stream server listen port cluster name locat applic process port rang use network use cluster name locat applic process port rang use network use wait cluster connect next start test applic two separ mpi job mpi job must specifi esalsampi locat config file use exampl empi_configlocationconfig mpirun np exampl empi_configlocationconfig mpirun np exampl note empi_config variabl set differ locat config file exampl addit mpirun command must start applic task gateway task mpi task locat exampl locat need task locat need task applic start correctli print someth like locat process process process locat show esalsampi combin two mpi job present singl task job applic directori contain esalsampi server implement server implement java therefor build use ant instead make therefor toplevel makefil invok ant directori