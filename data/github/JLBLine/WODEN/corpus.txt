contribut woden cool featur request burn passion add function woden found annoy bug pleas reach welcom help quick guid go idea featur pleas rais issu suggest new featur chuck enhanc label issu tri describ featur complet possibl would use start dialogu work best way forward prioriti list new featur implement might lie found bug sadfac thing happen pleas rais issu add bug label issu pleas check issu doesnt alreadi exist includ descript what go wrong includ exampl command caus error ideafound bug want fix awesom go first make sure youv submit issu know bugfeatur isnt fix implement anoth branch somewher littl discuss clarifi goal make branch fork start work branchfork piec work id ask fix code ensur fix still pass exist unit test detail onlin document herehttpswodenreadthedocsioenjoss_reviewtestingcmake_testinghtmlwhatdothetestsactuallydo fix chang expect outcom discuss issu appropri updat exist unit test make new code write new unit test cover much new code possibl document whatev youv done know good stuff youv ad youv written test code made document via sphinx let know whatev git issu youv start mayb use help want label work togeth that done submit pull request well get main branch respons time moment jack line write code pleas patient ill get back fast schedul allow woden statushttpsjosstheojorgpapersbbceccdadeededstatussvghttpsjosstheojorgpapersbbceccdadeed document statushttpsreadthedocsorgprojectswodenbadgeversionlatesthttpswodenreadthedocsioenlatestbadgelatest codecovhttpscodecovioghjlblinewodenbranchjoss_reviewgraphbadgesvgtokenqjfcigochttpscodecovioghjlblinewoden _note code coverag appli python c code cuda code current support code coverag software_ woden document live readthedocshttpswodenreadthedocsioenlatest internet broken alreadi instal woden build local copi navig wodendocssphinx run make html youll need doxygen instal woden c cuda code design abl simul lowfrequ radio interferometr data written simplist fast allow allski simul although woden primarili written simul murchinson widefield array mwa tingay et al httpsdoiorgpasa visibl becom less instrumentspecif time goe woden output uvfit file uniqu part woden simul shapelet model sourc along point gaussian compat rt mitchel et al httpsieeexploreieeeorgdocumentarnumb ieeexplor model gener shapelet model interferomet shamfihttpsgithubcomjlblineshamfi specifi woden_srclist shamfi option also includ script convert multiscal clean compon list wscleanhttpssourceforgenetprojectswsclean wodenstyl srclist run wsclean use savesourcelist option woden also produc visibl fed directli rt allow test calibr model methodolog featur request want contribut woden read guid contributingcontribution_guidemd get start welcom feedback andor help jack line januari instal read comprehens instal guid readthedocshttpswodenreadthedocsioenlatestinstallationinstallationhtmldepend short need depend cmake httpscmakeorg version nvidia cuda httpsdevelopernvidiacomcudadownload jsonc httpsgithubcomjsoncjsonc erfa httpsgithubcomliberfaerfareleas hdf httpswwwhdfgrouporgdownloadshdf pal httpsgithubcomstarlinkpalreleas python instal done via cmake ideal enough bash cd woden mkdir build cd build cmake make j sudo make instal option coupl postcompil environ variabl need dont want make instal checkout instal guid readthedocshttpswodenreadthedocsioenlatestinstallationinstallationhtmldepend full detail test two rout test woden via unitintegr test run ctest test depend see cmake test readthedocshttpswodenreadthedocsioenlatesttestingcmake_testinghtml via simpl exampl script test instal see test via script readthedocshttpswodenreadthedocsioenlatesttestingscript_testinghtml usag python wrapper recommend way run woden via wrapper script run_wodenpi launch woden execut run_wodenpi argument explain readthedocshttpswodenreadthedocsioenlatestapi_referencepython_coderun_wodenhtml type run_wodenpi help woden written primarili mwa simplest way feed observ properti via metafit file obtain metafit file herehttpsasvomwatelescopeorg minimalist exampl command use metafit file look like bash run_wodenpi ra dec cat_filenamesrclist_msclean_fornaxa_phasetxt metafits_filename_metafits_ppdsfit primary_beammwa_fe array layout observ set frequenc time resolut read metafit file specifi phase centr ra dec sky model cat_filenam primari beam case mwa fulli embed element beam delay also read metafit full control also specifi observ set explicitli bash run_wodenpi ra dec cat_filenamesrclist_msclean_fornaxa_phasetxt primary_beammwa_fe mwa_fee_delay lowest_channel_freq freq_res num_time_step time_r datet array_layoutmwa_phase_extendedtxt woden read array layout specifi local east north height simul locat earth default mwa specifi earth locat longitud latitud direct command line altern one run woden directli via command line use json file sh woden input_filejson input_filejson read json ra dec num_freq num_time_step cat_filenam srclist_msclean_fornaxa_phasetxt time_r frequency_resolut chunking_s jd_date lst array_layout woden_array_layouttxt lowest_channel_freq e latitud coarse_band_width e band_num input valu match option list tabl creat binari output file howev uvfit file use multiscal clean compon wsclean gener wodenstyl sourc catalogu wsclean multiscal clean simpli use script convert_wsclean_list_to_wodenpi link build directori upon compil exmapl command sh convert_wsclean_list_to_wodenpi filemsclean_output_from_wscleansourcestxt outnamesrclistwoden_wscleanmodeltxt woden sky model woden sky model use point sourc ellipt gaussian shapelet model sourc current given powerlaw spectral behaviour full breakdown sky model live readthedocshttpswodenreadthedocsioenlatestoperating_principlesskymodelhtml idea simpl sky model thee point sourc sourc multi_point p g compon point linear e endcompon compon point linear e endcompon compon point linear e endcompon endsourc titl woden cudaen packag simul lowfrequ radio interferometr data tag python c cuda radio astronomi interferomet author name jack l b line orcid affili multipl affili must quot affili name intern centr radio astronomi research curtin institut radio astronomi perth wa australia index name arc centr excel sky astrophys dimens astro index date xxx bibliographi paperbib summari woden design simul respons class telescop known interferomet produc output visibl given astrophys sky model simul observ allow us test softwar packag design calibr analys real interferometr data includ verifi expect behaviour known input test new sky model techniqu woden sky model specifi diracdelta like function sky known field point sourc ellipt gaussian model built shapelet basi function allow complic morpholog creat user abl input bespok layout interferomet vari number observ paramet includ time day length observ frequenc coverag select number predefin primari beam encod respons receiv element interferomet allow simul number telescop undertaken woden work input stoke iquv polaris sky model simul telescop dual linear polaris output linear stoke polaris core function woden written cuda interferometr simul comput intens embarrassingli parallel perform cuda allow largescal simul run includ emiss direct sky paramount interferomet wide field view murchison widefield array mwa tingay python wrapper use take advantag commun packag astropyhttpswwwastropyorg astropi astropi pyerfahttpspypiorgprojectpyerfa pyerfa present userfriendli interfac woden simul mwa observ use mwa metafit file quickli feed observ paramet woden match real data woden run two level precis woden_float precis use mix bit float precis woden_doubl use nearli entir bit precis section titl estim accuraci comput speed woden shown produc visibl within expect valu run woden_float mode woden_doubl mode baselin length le km underli methodolgi interferomet creat visibl v crosscorrel signal detect pair antenna dish baselin describ coordin uvw visibl sensit entir sky direct describ direct cosin lmn ignor antenna respons full integr sky discretis beginequ labeleqrim v_su_iv_iw_i sum_j mathcals_sl_jm_j exppi iu_il_j v_im_j w_in_j endequ u_iv_iw_i visibl coordin imathrmth baselin l_j m_j n_j sky posit jmathrmth compon sky model mathcalsl_jm_j flux densiti compon given stoke polaris woden simul duallinear polaris antenna antennast primari beam shape defin respons dual polaris antenna direct lm mathbfjlm beginbmatrix g_mathrmnslm d_mathrmnslm d_mathrmewlm g_mathrmewlm endbmatrix g gain term leakag term mathrmn refer northsouth mathrmew eastwest align antenna calcul crosscorrel respons antenna toward direct lm produc linear polaris visibl gain leakag interact four stoke polaris iquv beginequationlabeleqrime_ful beginbmatrix v_xxlm v_xylm v_yxlm v_yylm endbmatrix mathbfj_lm otim mathbfj_lm beginbmatrix endbmatrix beginbmatrix v_ilm v_qlm v_ulm v_vlm endbmatrix endequ denot complex conjug otim outer product result outer product written explicitli woden document herehttpswodenreadthedocsioenjoss_reviewoperating_principlesvisibility_calcshtml baselin frequenc time step woden calcul four linear stoke polaris v_xx v_xi v_yx v_yy defin l_jm_j sky model sum j produc four fullski linear stoke polaris visibl per baselinefrequencytim telescop like mwa primari beam mathbfjlm complic pattern sky sensit emiss directli overhead way horizon truli captur effect astrophys foreground therefor simul entir sky mwa fulli embed element fee sokolowski model current accur represent mwa primari beam incorpor woden sky model woden list right ascens declin associ flux densiti user full control project sky visibl simul discret foreground one simpli input sky catalogu specifi radec diffus sky model one could exampl input list point sourceellipt gaussian follow healpix project healpix employ tan sin fit fit project woden simpli calcul measur equat direct sky model statement need discret sky formal upward jgetim compon requir achiev angular resolut requir furthermor uvw time frequenc depend sampl frequenc order time sampl time order visibl calcul make make cuda acceler paramount altern approach interferometr simul exist pyuvsimhttpsgithubcomradioastronomysoftwaregrouppyuvsim lanman sacrific speed excel precis rimezhttpsgithubcomupenneorrimez decompos sky spheric harmon rather discret point woden design australian mwa epoch reionis eor process pipelin mind use calibr foreground remov softwar call rt mitchel search signal first star see yoshiura recent use pipelin rt creat sky model use formal howev code optimis enough handl volum sourc simul entir sky test rt method sky gener therefor need fast discretis method anoth excel cuda acceler simul packag oskarhttpsgithubcomoxfordskaoskar oskar address two point howev rt also gener part sky model via shapelet see line overview oskar furthermor real data precessionnut earth rotat axi caus sourc move sky coordin specifi ra dec j coordin system rt design undo precessionnut simul fed rt contain precess woden add precess use method rt consist uniqu combin cuda shapelet foreground mwa fee primari beam along sourc precess creat need woden effect preclud calibr packag use woden output howev mean woden limit feed data rt alon estim accuraci comput speed goal section test accuraci function woden includ read input array coordin calcul precessionnut correct lmn uvw calcul flux densiti frequenc extrapol via spectral index calcul equat refeqrime_ful write data uvfit file test absolut accuraci woden first need set input paramet analyt predict outcom ignor beam respons polaris set flux densiti sourc one consid singl baselin sky direct measur equat equat refeqrim becom note neg front insid exponenti vuvw numer comparison simul packag imag check input sourc posit match find drop neg give correct output beginequ labeleqrime_simpl vuvw exppi iul vm wn endequ use euler formula split v real imaginari compon label phase particular sourc baselin phi pi left ul vm wnright real imaginari part visibl v_re v_im v_re cosphi quad v_im sinphi therefor set phi number valu produc known sine cosin output select specif combin uvw lmn simul visibl predict output first consid simplifi case phi_mathrmsimpl uvw case fracphi_mathrmsimplepi l n set l end beginalign fracphi_mathrmsimplepi l n l sqrtleft frac n right endalign shown via wolfram alphahttpswwwwolframalphacomwidgetsviewjspidcccfedfddfecfcd solut n n fracsqrtsqrtphi_mathrmsimpl piphi_mathrmsimpl pi phi_mathrmsimpl pipi use calcul valu lm l sqrtfrac n practic input follow combin lmn equat refeqrime_simpl output visibl exactli match cosphi sinphi valu begintableh begincent begintabular c c c c c hline phi_mathrmsimpl lm n cosphi sinphi hline hline pi sqrt pi sqrt sqrt pi sqrt pi pi sqrt pi sqrt sqrt pi sqrt pi pi sqrt pi sqrt sqrt hline endtabular captionlmn combin use accuraci test labeltablmn_combo endcent endtabl test rang baselin length make simplif set baselin coordin equal ie u v w b b length unit wavelength form phase includ baselin length phi_b phi_b pi bleft l n right bphi_mathrmsimpl sinecosin period function follow true phi_mathrmsimpl phi_mathrmsimpl pi mathrmn mathrmn integ mean given phi_mathrmsimpl find appropri b still result expect sine cosin output set begingath bphi_mathrmsimpl phi_mathrmsimpl pi mathrmn b fracphi_mathrmsimpl pi mathrmnphi_mathrmsimpl endgath rang mathrmn valu valu mathrmn result size b use test shown tabl reftabb_valu begintableh begincent begintabularc c c c c c hline phi_mathrmsimpl bmathrmn bmathrmn bmathrmn bmathrmn bmathrmn hline hline pi pi pi pi pi pi pi pi pi pi hline endtabular captionrang baselin length use conjunct lmn coordin tablereftablmn_combo labeltabb_valu endcent endtabl woden read input array layout specifi local east north height enh coordin convert local xyz coordin via equat begingath x sinphi_mathrmlatn cosphi_mathrmlath labeleqxyz_calc e labeleqxyz_calc z cosphi_mathrmlatn sinphi_mathrmlath labeleqxyz_calc endgath phi_mathrmlat latitud array xyz use calcul uvw coodin cf chapter tmsthird place interferomet phi_mathrmlat circ set local sider time lst zero calcul uvw becom beginequationlabelequvw_simpl u e v n w h endequ allow us set e n h b valu b tabl reftabb_valu furthermor convert lm valu tabl reftablmn_combo radec alpha delta via begingath delta arcsinl labeleqdec_simpl alpha arcsin left fraclcosarcsinl right labeleqra_simpl endgath follow rt woden first calcul xyz use array latitud time observ use pal pal palprenuthttpsgithubcomstarlinkpalblobmasterpalprenutc function gener rotat matrix rotat local xyz coordin back j epoch well lst latitud array account precessionnut earth respect j radec coordin sky model specifi manifest outcom equat refequvw_simpl refeqdec_simpl refeqra_simpl appli opposit rotat phi_mathrmlat defin equat refeqxyz_calc refeqxyz_calc refeqxyz_calc well rotat appli via palprenuthttpsgithubcomstarlinkpalblobmasterpalprenutc account precessionnut input enh coordin figur reffigwoden_accuraci show result run multipl simul array layout singl baselin singl time step frequenc channel singl point sourc sky model primari beam model gain one zero leakag possibl combin lmn b list tabl reftablmn_combo reftabb_valu run simul run paramet specifi tabl reftabacc_sim_set renewcommandarraystretch begintableh begincent begintabularplinewidth plinewidth plinewidth hline paramet valu manifest simul hline hline date utc textttwoden must correct precess nutat latitud deg precessnut correct latitud circ longitud deg precessnut correct lst circ frequenc mhz mean lambda wavelength scale uvw enh refer frequenc sky model mhz textttwoden extrapol flux densiti spectral index need extrapol flux densiti refer stoke flux densiti jy extrapol flux simul frequenc hline hline endtabular captioncommon set simul run produc result figur reffigwoden_accuraci labeltabacc_sim_set endcent endtabl absolut fraction differ percent visibl calcul woden compar expect valu real compon shown left imaginari shown right green triangl show older version woden use bit precis orang squar show v woden_float version use mixtur bit precis blue cross show woden_doubl mode use nearli entir bit precisionlabelfigwoden_accuracyquantify_woden_accuracypng array layout sky model simul run wodentest_installationabsolute_accuracyrun_the_absolute_accuracy_testsh run part test suit bundl woden script read valu output uvfit file produc plot figur reffigwoden_accuraci version httpsgithubcomjlblinewodenreleasestagv woden fulli bit produc green triangl figur reffigwoden_accuraci longer baselin consist percent expect two time process slow move combin bit woden_float mode orang squar improv accuraci le longer baselin entir bit woden_doubl precis mode consist precis across baselin length sit e accuraci woden_float woden_doubl execut avail version httpsgithubcomjlblinewodenreleasestagv switch via command line option run_wodenpi note offset error determinist mean comparison differ simul version httpsgithubcomjlblinewodenreleasestagv woden consist error matter compar real data bit precis calcul perform physic differ part nvidia gpu card typic less doubl precis hardwar singl woden_doubl version slower woden_float card show differ slowdown two mode test ran simul use catalogu sourc number sourc horizon simul set use list tabl reftabbenchmark_sim along speed differ woden_float woden_doubl execut two differ nvidia gpu card renewcommandarraystretch begintableh begincent begintabularl l hline paramet valu hline hline time step frequenc channel point sourc compon gaussian compon shapelet compon basi function primari beam model mwa fee gtx ti textttwoden_float simul time min sec gtx ti textttwoden_doubl simul time min sec v textttwoden_float simul time min sec v textttwoden_doubl simul time min sec endtabular captionbenchmark simul compar textttwoden_float textttwoden_doubl speed shapelet compon sever basi function calcul expens point sourc compon calcul mwa fee comput expens beam model includ textttwoden labeltabbenchmark_sim endcent endtabl given time slow desktop card option toggl woden_float woden_doubl allow quick experiment use woden_float longer sciencequ run woden_doubl luckili card like v slowdown around note simul easili broken run across multipl gpu avail reduc real time taken complet simul exampl applic line compar two method model fornax combin point ellipt gaussian compar shapelet see figur reffigfora abl quickli compar comput effici method use desktop comment respect strength weak regard foreground remov eor purpos furthermor could control simul could compar method absenc process systemat present real data mwa domin comparison use rt alon two method simul fornax visibl compar imag use wsclean offringa offringa point ellipt gaussian left shapelet rightlabelfigforafornaxa_model_comparisonpng document document woden found read doc wodenreadthedocsiohttpswodenreadthedocsioenlatest includ detail instal guid way test local instal detail calcul woden make hood work exampl also includ github repo acknowledg acknowledg direct contribut toni farli taught pointer arithmet work c contribut bart pindor daniel mitchel work rt advis cuda would like thank chri jordan act sound board learn c cuda final would like thank matthew kolopani paul la plant review code give use suggest improv code research support australian research council centr excel sky astrophys dimens astro project number ce intern centr radio astronomi research icrar joint ventur curtin univers univers western australia fund western australian state govern work support resourc provid pawsey supercomput centr fund australian govern govern western australia refer gener code coverag moment slightli stoneheng due fact cuda support code coverag cant autom gpu test free user must run unit test local use ctest see readthedocshttpswodenreadthedocsioenlatesttestingcmake_testinghtml instruct run sourc create_cov_reportssh grab output c test ctest covert appropri format well run python test use coverag also gener appropri output get coverag someth like bash pip instal coverag output creat run sourc send_reports_to_codecovsh updat codecovhttpsaboutcodecovio host coverag report need environ variabl woden_codecov_token abl read commun guidelin doesnt exist yet get hold token great power possibl futur separ cuda test cpython test autom whole part automag gener whole codecov report exampl simul mwa_eor eda_haslam simul need download two extra sky model larger total mb follow instruct onlin herehttpswodenreadthedocsioenlatestexamplesexample_simulationshtml run simul woden document master file creat sphinxquickstart mon mar adapt file complet like least contain root toctre direct toctre maxdepth caption content _wsclean httpssourceforgenetprojectswsclean _mitchel et al httpsieeexploreieeeorgdocumentarnumb _shamfi httpsgithubcomjlblineshamfi _tingay et al httpsdoiorgpasa woden visibl simul woden c cuda code design abl simul lowfrequ radio interferometr data written simplist fast allow allski simul although woden primarili written simul murchinson widefield array mwa tingay et al _ visibl becom less instrumentspecif time goe woden output uvfit file woden written stoke polaris mind user input fulli stoke iquv model propag fulli polaris instrument respons depend primari beam select output stoke xxxyyxyy polaris note howev current powerlaw sed support rotat measur current unsupport uniqu part woden simul shapelet model sourc along point gaussian compat rt mitchel et al _ model gener shapelet model interferomet shamfi_ specifi woden_srclist option also includ script convert multiscal clean compon list wsclean_ wodenstyl srclist run wsclean use savesourcelist option woden also produc visibl fed directli rt allow test calibr model methodolog document toctre maxdepth installationinstal testingcmake_test testingscript_test operating_principlesoperating_principl examplesexample_simul api_referenceapi_index indic tabl refgenindex refmodindex refsearch test instal via script straightforward way check instal work run simpl small simul check variou function easiest way check creat imag result ive includ second set script convert output measur set imag use wsclean note ive tri make test comput low need gb gpu ram gb system ram ive set precisionfloat test keep memori requir run simul need mb storag imag ad mb total gb storag simul take minut gpu imag less minut cpu far less fancier cpu ran test fine laptop intel ghz cpu gb system ram nvidia geforc mx card gb ram run simul youv built woden variabl defin call wodenbuildinit_wodensh navig wodentest_instal run test immedi youll need obtain defin environ variabl mwa_fee_hdf see refpost compil option instruct defin run script test includ mwa fee simul cd wodentest_instal run_all_simulationssh rattl number test variou combin compon type point gaussian shapelet differ primari beam dont want run mwa fee simul run run_all_but_mwafee_simulationssh want run mwa fee test alon later date run run_only_mwafee_simulationssh want increment run test navig single_component_model grid_component_model different_beam_model directori run set individu imag simul depend imag test youll need way convert uvfit file measur set imag mean depend casa httpscasanraoeducasa_obtainingshtml download appropri tarbal time best version python decompress wget httpscasanraoedudownloaddistrocasareleaserhelcasatarxz tar xvf casatarxz that doesnt need instal wsclean httpswscleanreadthedocsioenlatestinstallationhtml head link find instal wsclean cours use clean softwar want wsclean excel im assum want simul interferometr data youll kind fit file imag alreadi ds good place start httpssitesgooglecomcfaharvardedusaoimag imag script use imag script must set environ variabl casa_dir point toward casabin instal casa exampl export casa_dirusrlocalcasabin enabl script convert uvfit file measur set variabl set either imag test output run_all_imagingsh run follow requir run_all_but_mwafee_imagingsh run_only_mwafee_imagingsh expect outcom nearli simul use mwa phase array layout maximum baselin length km give resolut around arcmin absolut accuraci imag run endtoend simul set array layout sky model yield exact visibl exact method describ joss paper script run exact script use creat plot joss paper todo link joss paper publish singl compon model end three basic imag singl compon type point gaussian shapelet cd wodentest_installationsingle_component_modelsimag ls imagefit single_gaussimagefit single_pointimagefit single_shapeletimagefit look like imag single_component_plotspng width pt simul ive switch primari beam set spectral index zero ive also intent set gaussian shapelet model produc output first shapelet basi function gaussian sourc integr flux densiti jy your sadist like still use kvi httpswwwatnfcsiroaucomputingsoftwarekarma look fit file zoom sourc press measur integr flux command line quick dirti give us good indic flux scale sourc type work point mean mjybeam std dev min max sum total flux mji npoint mean mjybeam std dev min max sum total flux mji npoint mean mjybeam std dev min max sum total flux mji show within micro jy expect jy take account clean imag pixelis effect grid compon model end three grid three compon type cd wodentest_installationgrid_component_modelsimag ls imagefit grid_gaussimagefit grid_pointimagefit grid_shapeletimagefit look like imag grid_component_plotspng width pt clean isnt fantast ive intent simul small amount data keep size output test multipl compon locat request posit everi degre marker ive includ lowr model pica shapelet compon test multipl shapelet multipl basi function ive thrown random posit angl gaussian shapelet bit varieti differ beam model end larger grid mix compon differ beam type none gaussian eda analyt dipol mwa fee cd wodentest_installationdifferent_beam_modelsimag ls imagefit multicomp_grid_edaimagefit multicomp_grid_mwa_feeimagefit multicomp_grid_gaussianimagefit multicomp_grid_noneimagefit imag beam gaussian beam mwa fee beam look like imag different_beam_plotspng width pt sky model top half point sourc bottom left shapelet bottom right gaussian limit data clean residu weve success run simul three compon type also see differ result gaussian mwa fee beam plot weve use differ primari beam particular ive made gaussian small enough sky chop top left corner mwa fee beam larger foot print eda imag ive call eda array layout overrid set metafit eda short baselin maximum around metr compar mwa phase psf eda psf abl see differ imag mwavseda_psfpng width pt test overrid array layout specifi text file unsurprisingli turn eda imag sky model bunch blob imag eda_layout_imagepng width pt expect that simpl instal test want realli test simul capabl woden check refwoden demonstr via exampl section bigger better simul delet test output dont want bunch file hang around system reason run delete_sim_outputssh delete_imagessh nuke output test via ctest total option run unit integr test use develop woden check system code run expect test compil use cmake script main code test compil float doubl precis mean test code use test two differ precis version compil drop necessari precis unless explicitli note detail refwhat test actual test requir level accuraci float doubl precis version time float version accur absolut toler e doubl e read toler specif function section list refwhat test actual depend test use follow c librari uniti httpsgithubcomthrowtheswitchun instal uniti via git clone httpsgithubcomthrowtheswitchunitygit cd uniti mkdir build cd build cmake make j sudo make instal way cmake find uniti howev dont need instal uniti anywher woden use c code directli need tell woden uniti live system exampl could download releas version eg version see exampl link without instal youll also need initi git submodul run code coverag simpli navig woden directori run git submodul init git submodul updat pull relev cmakecodecov depend allow us track code coverag python c code free tool exist cuda time write boooo tell cmake build test add target_grouptest command tell cmake build test instead main code cd woden_dir cmake dtarget_grouptest dunity_rootusrlocalun make j dunity_root need didnt instal uniti warn done go back compil main woden execut need run cmake dtarget_groupproduct otherwis youll keep build test run test compil run test run ctest see someth like follow success ctest test project homejlinesoftwarewodenbuild start c_test_rts_enhxyz_local_float test c_test_rts_enhxyz_local_float pass sec start c_test_calc_xyz_diffs_float test c_test_calc_xyz_diffs_float pass sec start c_test_rts_precessxyztoj_float test c_test_rts_precessxyztoj_float pass sec start c_test_rts_enhxyz_local_doubl test c_test_rts_enhxyz_local_doubl pass sec start c_test_calc_xyz_diffs_doubl test c_test_calc_xyz_diffs_doubl pass sec start c_test_rts_precessxyztoj_doubl test c_test_rts_precessxyztoj_doubl pass sec start c_test_null_comps_float test c_test_null_comps_float pass sec start c_test_fill_chunk_src_with_pointgauss_float test c_test_fill_chunk_src_with_pointgauss_float pass sec start c_test_fill_chunk_src_with_shapelets_float etc etc note test mwa fulli embed element beam code must environ variabl mwa_fee_hdfpathtomwa_full_embedded_element_patternh declar dont mwa fee beam code test skip want detail test run ctest verbos test actual test locat wodencmake_test directori within contain test differ file wodensrc within test directori separ file test differ function includ function name exampl directori wodencmake_testingarray_layout contain test file wodensrcarray_layoutc contain test file test follow function cmake_testingarray_layouttest_calc_xyz_diffsc srcarray_layoutccalc_xyz_diff cmake_testingarray_layouttest_rts_enhxyz_localc srcarray_layoutcrts_enhxyz_loc cmake_testingarray_layouttest_rts_precessxyztojc srcarray_layoutcrts_precessxyztoj c cuda function test use unity_ librari use function like test_assert_float_equ test_assert_double_within test_assert_nul allow simpl test valu test say output test equal refer test_assert_float_equ test_assert_double_equ function _uniti httpsgithubcomthrowtheswitchun note unfamiliar cmake test even though test locat wodencmake_test run ctest test file copi run wodenbuildcmake_test output test locat section give outlin test perform directori c code test toctre maxdepth cmake_testingarray_layout cmake_testingchunk_sky_model cmake_testingcreate_sky_model cmake_testingfee_primary_beam cmake_testingprimary_beam cmake_testingshapelet_basi cmake_testingvisibility_set cmake_testingwoden_set cuda code test toctre maxdepth cmake_testingcalculate_vis cmake_testingfee_primary_beam_cuda cmake_testingfundamental_coord cmake_testingprimary_beam_cuda cmake_testingsource_compon python code test toctre maxdepth cmake_testingrun_woden note abl test cuda function design work sole gpu memori necessari write wrapper function alloc gpu memori pass data cuda code test copi result back host memori ive kept intermedi test function insid cu file contain code test straight forward perform degrad separ file casual inspect look like mani function cu file havent written test extra function test sigh create_sky_model test function wodensrccreate_sky_modelc function read sky model text file crop anyth horizon test_read_source_cataloguec create_sky_modelread_source_catalogu read sky model text file test read sky model use read_source_catalogu creat sky model test correct inform read read_source_catalogu return integ error messag good bad text file written caus failur see tabl test sky model expect result way sourc associ compon store affect way sky model crop test check gener source_catalogue_t struct structur correctli float point valu compil float mode test assert valu within absolut toler e e compil doubl mode listtabl width headerrow sky model test case test outcom srclist_nocomp_numberstxt miss line contain number compon sourc check fail srclist_badcoefftxt bad scoeff line one number sdfasdfasdfasdfasdfasf check fail srclist_badspelltxt contain incorrect spell compon check fail srclist_singlegausstxt contain singl gaussian sourc check sky model valu srclist_singlepointtxt contain singl point sourc check sky model valu srclist_commenttxt contain comment line singl point sourc check sky model valu srclist_singleshapetxt contain singl shapelet sourc check sky model valu srclist_empty_linetxt contain empti line singl point sourc check sky model valu srclist_threecomponentstxt contain one sourc three compon check sky model valu srclist_mulitple_sourcecomponentstxt contain multipl sourc multipl compon check sky model valu srclist_threesourcestxt contain multipl sourc singl compon check sky model valu srclist_lineartxt contain singl point compon linear keyword specifi sed check sky model valu test_horizon_testc create_sky_modehorizon_test take inform singl compon sourc test whether horizon depend whether crop sky model sourc compon updat variou counter effect sky model crop crop sourc throw away whole sourc one compon horizon crop compon throw away compon horizon shapelet complic factor singl posit match multipl basi function paramet length horizon_test logic count mani shapelet paramet retain first set test check crop pointgaussian type compon work crop sourc crop compon second set test check crop compon multipl shapelet compon correct number shapelet basi function paramet retain test_crop_sky_modelc create_sky_modecrop_sky_model calcul azimuth zenith angl compon sky model first lst step simul crop either sourc compon horizon use horizon_test crop calcul azza time step simul surviv compon test split across sky model point gaussian shapelet mix three sky model type test run crop sourc crop compon case test run four differ lst total test radec compon lst chosen way differ combin result differ componentsourc discard test check correct componentsourc retain includ shapelet basi function paramet correct azza calcul time step sky model setup expect result store test_crop_sky_modelh azimuth zenith angl output test match expect within absolut toler e float compil code e doubl primary_beam_cuda test function wodensrcprimary_beam_cudacu function calcul beam respons eda gaussian beam model test_gaussian_beamc call primary_beam_cudatest_kern_gaussian_beam turn test primary_beam_cudakern_gaussian_beam kernel calcul gaussian primari beam respons gaussian easi function calcul ive setup test calcul northsouth eastwest strip beam respons compar gaussian calcul kern_gaussian_beam take lm coord test gener lm coord span test check whether kernel produc expect coordin l strip well chang frequenc expect test input frequenc given refer frequenc input frequenc mathnu output check follow calcul set assert gain mathexpleftfrac left fraclsigma fracnunu_ right right set l assert gain mathexpleftfrac left fracmsigma fracnunu_ right right mathnu_ refer frequenc mathsigma_ std gaussian term lm coord calcul made use c bit precis beam respons test within absolut toler e expect float compil code e doubl compil code test_analytic_dipole_beamc call primary_beam_cudatest_analytic_dipole_beam turn test primary_beam_cudacalculate_analytic_dipole_beam code copi azza angl gpu memori calcul analyt dipol respons toward direct free azza coord gpu memori noth exit test call function direct sky two time step two frequenc total beam calcul check real beam gain match store expect valu imaginari valu equal zero expect valu gener use doubl precis compil code absolut toler within e set mani decim place ive store lookup tabl float precis must match within e store valu shapelet_basi test function wodensrcshapelet_basisc test_create_sbfc shapelet_basiscreate_sbf creat massiv lookup tabl shapelet basi function valu call function test differ array index assert equal expect valu excit stuff float compil code absolut toler threshold valu set e e doubl compil code calculate_vis test function wodensrccalculate_visibilitiescu one function calculate_visibilitiescalculate_vis gateway function cuda function woden take simul set sky model perform necessari coorind measur equat calcul well summat sky model compon gener visibl test fairli limit number variabl test integr test make sure function expect call calculate_visibilitiescalculate_vis abl talk gpu correctli rigor test function includ test suit cmake_test test use test_calculate_visibilities_commonc setup source_catalogue_t sky model struct follow sky model setup differ sky model cover compon combin possibl make sure calculate_vis call appropri function listtabl width headerrow num sourc num point sourc num gauss sourc num shapelet sourc total compon sourc given radec equal phase centr spectral index zero flux densiti jy way output visibl absenc primari beam fulli real equal sum number compon sky model multipli numer flux good test precis float doubl compil code gaussian shapelet compon size caus reduct real part visibl due extend size sky test ive set major minor axe e make behav similarli point sourc test setup simul three baselin three frequenc two timestep sky model frequenc time step baselin check uvw expect real part visibl equal number compon time jy modulu beam repsons see keep test uvw straight forward ive set baselin length mathx mathi equal ie mathx_mathrmdiff x_mathrmant x_mathrmant y_mathrmdiff length mathz zero configur follow true mathu x_mathrmdiffcosha_ sinha_ mathv x_mathrmdiffsinphi_mathrmlatcosha_ sinha_ mathw x_mathrmdiffcosphi_mathrmlatcosha_ sinha_ mathha_ hour angl phase centr mathphi_mathrmlat latitud array allow us check uvw chang time float compil code absolut toler threshold uvw valu set e e doubl compil code test_calculate_visibilities_nobeamc run test explain whilst switch primari beam realli check real visibl equal number compon time sky model configur imaginari equal zero float compil code absolut toler threshold valu set e e doubl compil code test_calculate_visibilities_gaussbeamc run test test_calculate_visibilities_nobeamc appli gaussian primari beam model sky model compon set locat one beam gain per time step appli visibl time step check whether visibl equal gain time number compon gaussian beam fulli real crosspol valu check real xx yy visibl valu ensur visibl inform zero float compil code absolut toler threshold valu set e e doubl compil code test_calculate_visibilities_edabeamc run exactli test test_calculate_visibilities_gaussbeamc use analyt singl dipol beam eda beam obvious test visibl match gain valu expect eda beam gaussian beam test float compil code absolut toler threshold valu set e e doubl compil code test_calculate_visibilities_mwafeebeamc run test test_calculate_visibilities_gaussbeamc time coars resolut mwa fee primari beam model complex includ mutual coupl real imaginari valu xx xy yx yy polaris test float compil code absolut toler threshold valu set e e doubl compil code expect gain mwa fee beam taken doubl compil code larg threshold float mostli due inaccuraci float mwa fee beam code see reffee_primary_beam_cuda_cmak discuss primary_beam test function wodensrcprimary_beamc function setup primari beam set readi calcul beam respons gpu test_calc_para_anglec primary_beamcalc_para_angl calcul parallact angl compon time step test call calc_para_angl three point three gaussian three shapelet compon three differ lst differ compon type given differ radec result compar expect valu store expected_para_anglesh float compil code absolut toler threshold set e e doubl compil code test_fill_primary_beam_settingsc primary_beamfill_primary_beam_set prepar beam_settings_t struct use calculate_visibilitiescalculate_vis azza coord alreadi calcul chunk_sky_modelcreate_chunked_sky_model suffici beam model two beam model need input gauss_beam gaussian beam function use lmn coord incorpor project effect fill_primary_beam_set calcul hour angl compon time step feed fundamental_coordskern_calc_lmn later line fee_beam need parallact angl rotat telescopebas coord stoke frame test call fill_primary_beam_set four primari beam type perform follow check gauss_beam assert beam_settingsbeamtyp gauss_beam assert number constant copi woden_set beam_set assert srcpoint_gaussbeam_dec srcpoint_gaussbeam_ha srcgauss_gaussbeam_dec srcgauss_gaussbeam_ha srcshape_gaussbeam_dec srcshape_gaussbeam_ha set correct valu compon time step fee_beam assert beam_settingsbeamtyp fee_beam assert srcsin_point_para_ang srccos_point_para_ang srcsin_gauss_para_ang srccos_gauss_para_ang srcsin_shape_para_ang srccos_shape_para_ang set correct valu compon time step analy_dipol assert beam_settingsbeamtyp analy_dipol no_beam assert beam_settingsbeamtyp no_beam float compil code absolut toler threshold valu set e e doubl compil code valu bit float doubl version valu test use test_assert_equal_doubl fee_primary_beam test function wodensrcfee_primary_beamc test_rts_mwafeeinitc create_sky_modelrts_mwafeeinit read store spheric harmon coeffici mwa_full_embedded_element_patternh store rts_mwa_fee_beam_t struct use later mwa fee beam calcul four gener array matter rts_mwa_fee_beam_tq doubl _complex rts_mwa_fee_beam_tq doubl _complex rts_mwa_fee_beam_tm doubl rts_mwa_fee_beam_tn doubl mwa beam point direct sky control set delay differ delay set store differ tabl hdf file test three differ delay set test mhz mhz mhz total nine test combin set valu four array test locat store known valu found test_rts_mwafeeinith must within absolut toler e pass six array entri test pure keep store valu compar reason number suffic test thing work correctli visibility_set test function wodensrcvisibility_setc function handl visibility_set_t struct hold output visibl function includ malloc fill free attribut test_fill_timefreq_visibility_setc call visibility_setfill_timefreq_visibility_set use popul woden_settings_t struct fill follow attribut visibility_set_t struct visibility_setallsteps_sha visibility_setallsteps_cha visibility_setallsteps_lst visibility_setallsteps_wavelength sha cha sine cosin hour angl phase centr respect test run three time step lst math mathpi mathpi allsteps_sha allsteps_cha analyt predict allsteps_wavelength calcul use input frequenc set mathc mathc mathc mean expect output wavelength math math math third let us test accuraci wavelength calcul angl lst store bit precis float doubl code version test within absolut toler e precis allsteps_wavelength set user test within e float e doubl test_malloc_and_freec basic test visibility_setsetup_visibility_set visibility_setfree_visi_set_input visibility_setfree_visi_set_output function either malloc free specif attribut visibility_set_t struct test call function check follow attribut null malloc call correct attribut null free call test_write_visi_set_binaryc test visibility_setwrite_visi_set_binari write content visibility_set_t struct binari file test fill visibility_set_t struct simpl nonrep valu use write_visi_set_binari read binari file check content match visibility_set_t struct test_write_visi_set_textc test visibility_setwrite_visi_set_text write subset content visibility_set_t struct text file test work similarli reftest_write_visi_set_binaryc call write_visi_set_text known set input check text file write contain known input run_woden test function wodensrcrun_wodenpi function handl pars user argument calcul astronom constant read variabl mwa metafit request write json file input woden execut call woden execut read binari file written woden creat uvfit file tidi simul follow rw short run_wodenpi rwcalc_jdcal mean function calc_jdcal run_wodenpi test_commandpi test rwcommand function call thing command line within python test run command echo chees exampletxt read word chees file exampletxt creat test_calc_jdcalpi test rwcalc_jdcal function calcul julian date split integ day fraction day valu test call rwcalc_jdcal two known date string check output valu match expect test_get_uvfits_date_and_position_constantspi test rwget_uvfits_date_and_position_const function calcul lst gst greenwich sider time hour given date degpdi rotat speed earth ututc differ ut utc given longlatheight array locat utc date test two combin differ utclonglatheight check return valu expect test_rts_encodingpi test rwrts_encode_baselin function take two antenna number creat baselin number per aip uvfit file convent test run four antenna pair ensur output valu match expect secondli test function rwrts_decode_baselin separ encod baselin number back two antenna number test decod four baselin number ensur correct antenna number found test_make_antenna_tablepi test rwmake_antenna_t function creat antenna tabl goe uvfit file test give known set input paramet check valu end correct locat format output antenna tabl follow paramet test correct codeblock python ant_tabledataannam ant_tabledatastabxyz ant_tabledataorbparm ant_tabledatanosta ant_tabledatamntsta ant_tabledatastaxof ant_tabledatapoltya ant_tabledatapolaa ant_tabledatapolcala ant_tabledatapoltyb ant_tabledatapolab ant_tabledatapolcalb ant_tableheaderarrayx ant_tableheaderarrayi ant_tableheaderarrayz ant_tableheaderfreq ant_tableheadergstia ant_tableheaderdegpdi ant_tableheaderututc ant_tableheaderxyzhand ant_tableheaderfram ant_tableheaderrd ant_tableheadertimsi ant_tableheaderarrnam ant_tableheadernumorb ant_tableheadernopc ant_tableheaderpoltyp ant_tableheadercr test_create_uvfitspi test rwcreate_uvfit function take whole heap input write uvfit test run function known set input read creat file check content match expect along check paramet antenna tabl check reftest_make_antenna_tablepi follow paramet check input codeblock python data_tabledatauu data_tabledatavv data_tabledataww data_tabledatabaselin astropi automat add header valu date array need subtract comparison data_tabledatad data_tableheaderpzero check actual visisbl valu correct data_tabledatadata data_tableheaderctyp data_tableheadercrv data_tableheadercrpix data_tableheadercdelt data_tableheaderctyp data_tableheadercrv data_tableheadercrpix data_tableheadercdelt data_tableheaderctyp data_tableheadercrv data_tableheadercrpix data_tableheadercdelt data_tableheaderctyp data_tableheadercrv data_tableheadercrpix data_tableheadercdelt data_tableheaderctyp data_tableheadercrv data_tableheadercrpix data_tableheadercdelt data_tableheaderpsc data_tableheaderpzero data_tableheaderpsc data_tableheaderpzero data_tableheaderpsc data_tableheaderpzero data_tableheaderpsc data_tableheaderpzero data_tableheaderpsc data_tableheaderpzero data_tableheaderobject data_tableheaderobsra data_tableheaderobsdec data_tableheadergitlabel data_tableheadertelescop data_tableheaderlat data_tableheaderlon data_tableheaderalt data_tableheaderinstrum test_enhxyzpi test rwenhxyz function calcul local xyz coord use local east north height test use case latitud deg analyt predict outcom run test descibr reftest_rts_enhxyz_localc test_load_datapi test rwload_data function read binari file output woden_float woden_doubl variou array test write binari file known input param read binari file use rwload_data compar input output test run bit precis test_write_jsonpi test rwwrite_json function write input file feed either woden_float woden_doubl number test run call rwwrite_json use minimum set exampl input argument result json read back follow paramet check correct codeblock python json_datara json_datadec json_datanum_freq json_datanum_time_step json_datacat_filenam json_datatime_r json_datafrequency_resolut json_datachunking_s json_datajd_d json_datalst json_dataarray_layout json_datalowest_channel_freq json_datalatitud json_datacoarse_band_width json_databand_num follow test run follow option argument test_write_gaussian_beam check extra argument control gaussian primari beam written correctli test_write_mwa_fee_beam check extra argument control mwa fee beam written correctli test_write_eda_beam check extra argument control eda beam written correctli test_write_no_precess check option turn precess ad ask test_make_baseline_date_arrayspi test rwmake_baseline_date_array function make date baselin array need popul uvfit file test give function known date string number antenna number time step time resolut check output array match expect test_remove_phase_trackingpi test rwremove_phase_track function remov phase track appli visibl origin mwa correl phase track rt expect phase track data input woden simul rt undo phasetrack rt calcul uvw fiddl visibl warn test start creat random array layout via codeblock python num_antenna make random array layout east nprandomuniform num_antenna north nprandomuniform num_antenna height nprandomuniform num_antenna coordin use calcul uvw coodin given array locat im use mwa site phasecentr first frequenc channel mhz mhz mhz resolut time step resolut calcul phasetrack measur equat math v_textrmphas expleftpi leftul vm wn right right mathuvw mathlmn calcul phase centr ra dec mathcirc circ calcul singl mathlmn sourc ra dec mathcirc circ setup mathuvw chang time mathlmn constant also calcul measur equat without phase track calcul mathu_mathrmzenv_mathrmzenw_mathrmzen mathl_mathrmzenm_mathrmzenn_mathrmzen use zenith instrument coordin system centr use follow equat math v_textrmunphas expleftpi leftu_mathrmzenl_mathrmzen v_mathrmzenm_mathrmzen w_mathrmzenn_mathrmzen right right setup mathu_mathrmzenv_mathrmzenw_mathrmzen constant time mathl_mathrmzenm_mathrmzenn_mathrmzen chang time use mathv_textrmphas input rwremove_phase_track along mathw use unwrap phase track assert output rwremove_phase_track match mathv_textrmunphas test_argument_inputspi test run rwget_pars run command line parser rwcheck_arg check arg collect rwget_pars pars correctli also saniti check certain combin arg dont feed woden argument wont work follow test run expect outcom test_parser_fail three requir argument ra dec cat_filenam check parser error miss test_missing_args_without_metafits_fail user doesnt suppli metafit arg minimum set argument must input check rwcheck_arg error miss test_metafits_read_fail check rwcheck_arg error bad path metafit file test_read_metafits_succe check correct valu read known metafit file test_eda_args_work check correct argument select eda beam simul test_gaussbeam_args_work check gaussian beam relat argument work expect iter check argument default given eg gauss_ra_point set default suppli match given valu test_mwafeebeam_args_work check mwa fee primari beam handl racheck_arg correctli function error certain path hdf file hold spheric harmon inform miss delay specifi incorrectli check thing work correct argument given test_read_uvfits_into_pyuvdatapi test absolut minim complianc pyuvdata_ test call rwcreate_uvfit set dummi input variabl make file call unittest_exampleuvfit simpli check follow line dont throw error codeblock python pyuvdata import uvdata uv uvdata uvreadunittest_exampleuvfit realli test correct keyword array present output unittest_exampleuvfit level appeas pyuvdata test setup skip user instal pyuvdata _pyuvdata httpspyuvdatareadthedocsioenlatestindexhtml chunk_sky_model test function wodensrcchunk_sky_modelc function handl split sky model chunk fit gpu memori simul variabl control user via chunking_s control maximum number measur equat calcul simultan function need know number baselin frequenc etc calcul maximum number compon put chunk test_null_compsc test function chunk_sky_modelnull_point_comp chunk_sky_modelnull_gauss_comp chunk_sky_modelnull_shapelet_comp function set either point gaussian shapelet compon attribut sky model null test set dummi popul sky model make sure function set correct attribut null also test compon attribut left test_fill_chunk_src_with_pointgaussc test chunk_sky_modelfill_chunk_src_with_pointgauss calcul mani point gaussian compon go chunk test tri differ combin number point number gaussian chunk size number time step number baselin number frequenc iter function check chunk sky model correct number output compon type check set attribut sky model array index origin full sky model check everi attribut split correctli result chunk sky model furthermor azimuth zenith angl store time step sky model dummi sky model setup repeatingtil array make sure correct azza coord copi full sky model crop sky model test_fill_chunk_src_with_shapeletsc test chunk_sky_modelfill_chunk_src_with_shapelet handl chunk shapelet compon sky model work pointgauss set sky model attribut array index check whether correct valu chunk smaller chunk sky model top due way shapelet multipl basi function per compon extra layer sky model trickeri repeat index insid basi function attribut trace check chunk perform test vari number shapelet number basi function per shapelet number time step test_create_chunked_sky_modelsc chunk_sky_modelcreate_chunked_sky_model use function take full sky model creat array chunk sky model test run test function sky model contain variou combin point gaussian shapelet compon well differ chunk size time set fundamental_coord test function wodensrcfundamental_coordscu test_lmn_coordsc run fundamental_coordstest_kern_calc_lmn test fundamental_coordskern_calc_lmn calcul lmn coord run two control test gener analyt predict outcom set phase centr ramath_textrmphas decmath_textrmphas mathcirc circ one test hold dec mathcirc vari ra hold ra mathcirc vari dec set follow true listtabl outcom dec mathcirc width headerrow ra l n mathfracpi math math math mathfracpi mathfracsqrt math math mathfracpi mathfracsqrt math mathfracsqrt mathfracpi math math mathfracsqrt math math math math mathfracpi math math mathfracsqrt mathfracpi mathfracsqrt math mathfracsqrt mathfracpi mathfracsqrt math math mathfracpi math math math listtabl outcom ra mathcirc width headerrow dec l n mathfracpi math math math mathfracpi math mathfracsqrt math mathfracpi math mathfracsqrt mathfracsqrt mathfracpi math math mathfracsqrt math math math math mathfracpi math math mathfracsqrt mathfracpi math mathfracsqrt mathfracsqrt mathfracpi math mathfracsqrt math mathfracpi math math math test ensur input yield output expect process check execut kernel yield correct number output note function entir bit whether float doubl compil mode absolut toler output vs expect tabl e function good un test_uvw_coordsc run fundamental_coordstest_kern_calc_uvw well fundamental_coordstest_kern_calc_uvw_shapelet turn test fundamental_coordskern_calc_uvw fundamental_coordskern_calc_uvw_shapelet respect kernel calcul uvw coord wavelenth slightli differ circumst kern_calc_uvw calcul uvw coord toward specifi radec phase centr given set baselin length mathx_mathrmdiff y_mathrmdiff z_mathrmdiff number lst frequenc mean uvw chang time frequenc kern_calc_uvw_shapelet number uvw coordin system centr differ shapelet compon kernel test scale wavelength chang time gener analyt predict outcom phase centr set ramath_textrmphas decmath_textrmphas mathcirc circ condit follow true math begineqnarray u leftsinh_textrmphas x_mathrmdiff cosh_textrmphas y_mathrmdiff right lambda v z_mathrmdiff lambda w leftcosh_textrmphas x_mathrmdiff sinh_textrmphas y_mathrmdiff right lambda endeqnarray mathh_textrmphas hour angl phase centr test check hold true multipl time frequenc step case kern_calc_uvw_shapelet check shapelet compon make sure output order expect float doubl version test within toler e test compar cuda code c code calcul equat agre nice _mwa_hyperbeam httpspypiorgprojectmwahyperbeam _fee_primary_beam_cuda_cmak fee_primary_beam_cuda test function wodensrcfee_primary_beam_cudacu integr test rather suit individu function test test_rts_fee_beamc run create_sky_modeltest_rts_cuda_fee_beam turn call follow function create_sky_modelget_hdfbeam_normalis get valu normalis zenith create_sky_modelcopy_fee_primary_beam_to_gpu move valu host devic create_sky_modelcalc_cuda_fee_beam calcul mwa fee beam respons create_sky_modelfree_fee_primary_beam_from_gpu free thing devic copi mwa fee beam valu devic back host test mwa beam point direct sky control set delay test three differ delay set test mhz mhz mhz total nine test test run sky direct span whole sky combin set beam gain output test_rts_cuda_fee_beam compar store header test_rts_fee_beamh header test_rts_fee_beamh stitch togeth valu store text file like hyperbeam_zenith_txt hyperbeam_zenith__rottxt gener use script compare_to_hyperdrivepi use python packag mwa_hyperbeam_ text file store azza real imaginari valu gain leakag northsouth eastwest dipol either parallact angl rotat appli delay frequenc combin run parallact angl rotat appli float precis real imaginari must match hyperbeam valu within absolut toler e doubl must match within e note given accuraci float precis suggest compar simul visibl real data doubl way go accur howev run comparison simul inaccuraci constant bia still good represent beam model probabl fine intern comparison convinc sensibl valu store test file rough plot script includ wodencmake_testingfee_primary_beam_cudaplot_beam_resultspi convert beam gain leakag stoke xx yy polaris assum fulli stoke sky script use python plot_beam_resultspi hyperbeam_zenith__rottxt produc plot like loggain parallact rotat zenith point mhz imag hyperbeam_zenith__rotpng width plot look littl warp pure ive done scatter plot quick dirti way show info realli interest differ run sourc plot_all_beam_diffssh produc bunch plot directori wodencmake_testingfee_primary_beam_cudabeam_plot includ differ plot show offset woden output hyperbeam real imaginari gain leakag term jone matrix exampl float precis zenith mhz note differ gain loggain imag hyperbeam_zenith__rotzenith__rot_float_diffpng width equival plot doubl shown show vast improv accuraci imag hyperbeam_zenith__rotzenith__rot_double_diffpng width array_layout test function wodensrcarray_layoutc function handl read array coord enh convert xyz use later calcul uvw also handl precess array layout lst simul date back j array coord frame sky model equival rotat sky model forward current day ensur output visibl j frame _test_rts_enhxyz_localc test_rts_enhxyz_localc array_layoutrts_enhxyz_loc transform local east north height coord xyz coord use calcul uvw test gener test enh coord test two latitud test case latitud mathcirc result mathx h mathi e mathz n latitud mathcirc result mathx fracn fracsqrth mathi e mathz fracsqrtn frach float doubl compil version bit precis test match bit c calcul equat within absolut toler e test_rts_precessxyztojc array_layoutrts_precessxyztoj take observ date xyz coord precess back j updat lst accordingli test give known set xyz coordin julian date check output precess xyz lst match expect valu store test_rts_xyz_commonh test_calc_xyx_diffsc test function array_layoutcalc_xyz_diff read array text file enh coord transform xyz precess locat back j request calcul baselin length xyz also rotat latitud array back j updat lst test simpli provid set known input coord read example_array_layouttxt run array_layoutcalc_xyz_diff precess precess case check output valu match expect valu store test_rts_xyz_commonh woden_set test function wodensrcwoden_settingsc function handl read input simul set json file fill woden_settings_t struct base woden_settings_t pass around function intern woden tell test_read_json_settingsc test function woden_settingsread_json_set function read simul set held json file usual written run_wodenpi test run read multipl json file differ set test json file share common core set codeblock json ra dec num_freq num_time_step cat_filenam srclist_singlepointtxt time_r frequency_resolut chunking_s jd_date lst array_layout example_array_layouttxt lowest_channel_freq e latitud coarse_band_width e sky_crop_compon true band_num test core attribut test read correctli woden_settings_t call read_json_set test file list tabl run test differ simul setup eventu listtabl width headerrow run_woden_nobeamjson no_beam primari beam select run_woden_edajson analy_dipol primari beam select run_woden_gaussian_bespokejson gaussian primari beam select use input valu set fwhm refer frequenc run_woden_gaussian_defaultjson gaussian primari beam select use default valu fwhm refer frequenc run_woden_mwafeejson mwa_fe primari beam select associ delay path hdf file read correctli run_woden_mwafee_baddelayjson contain bad set mwa fee delay throw error run_woden_mwafee_nopathjson path mwa fee hdf file throw error run_woden_multiple_beamsjson contain multipl primari beam select throw error run_woden_noprecessionjson check precess switch request test_setup_lsts_and_phase_centrec test woden_settingssetup_lsts_and_phase_centr use input simul paramet calcul sine cosin declin phase centr lst centr everi time integr run three test two mathmathrmdec_mathrmphas pi one zero initi lst anoth nonzero initi lst third test mathmathrmdec_mathrmphas set latitud mwa nonzero initi lst test multipl time step test equival calcul made c bit precis float code output test absolut toler e doubl toler e source_compon test function wodensrcsource_componentscu function calcul visibl differ compon type well call variou beam model appli visibl test_apply_beam_gainsc call source_componentstest_kern_apply_beam_gain test source_componentskern_apply_beam_gain kernel appli beam gain leakag term stoke visibl creat linear stoke polaris visibl via math begineqnarray mathrmvxx_ g_xg_xast d_xd_xastmathrmvi_ g_xg_xast d_xd_xastmathrmvq_ g_xd_xast d_xg_xastmathrmvu_ ig_xd_xast d_xg_xastmathrmvv_ endeqnarray math begineqnarray mathrmvxy_ g_xd_yast d_xg_yastmathrmvi_ g_xd_yast d_xg_yastmathrmvq_ g_xg_yast d_xd_yastmathrmvu_ ig_xg_yast d_xd_yastmathrmvv_ endeqnarray math begineqnarray mathrmvxy_ g_xd_yast d_xg_yastmathrmvi_ g_xd_yast d_xg_yastmathrmvq_ g_xg_yast d_xd_yastmathrmvu_ ig_xg_yast d_xd_yastmathrmvv_ endeqnarray math begineqnarray mathrmvyy_ d_yd_yast g_yg_yastmathrmvi_ d_yd_yast g_yg_yastmathrmvq_ d_yg_yast g_yd_yastmathrmvu_ id_yg_yast g_yd_yastmathrmvv_ endeqnarray mathast mean complex conjug mathg_x d_x d_i g_i beam gain leakag term subscript mean antenna mathmathrmvi mathrmvq mathrmvu mathrmvv stoke visibl test tri number combin valu simpl outcom test function return expect valu combin shown tabl combin beam gain leakag use antenna equat entri complex valu read realimag float doubl code test bit accuraci simpl number requir littl precis listtabl width headerrow mathg_x mathd_x mathd_i mathg_i mathmathrmvi mathmathrmvq mathmathrmvu mathmathrmvv mathmathrmvxx mathmathrmvxi mathmathrmvyx mathmathrmvyy test_calc_measurement_equationc call source_componentstest_kern_calc_measurement_equ call source_componentskern_calc_measurement_equ turn test devic code source_componentscalc_measurement_equ use intern woden anoth kernel call multipl devic function write new kernel test alon follow methodolog also written joss paper todo link joss paper accept use sky model array layout visibl endtoend version directli test fuction calc_measurement_equ calcul phasetrack measur equat math vuvw exp left pi ileft ul vm wn right right use euler formula split real imaginari compon label phase particular sourc baselin math phi pi left ul vm wnright real imaginari part visibl mathv_r mathv_im math v_re cosphi v_im sinphi definit test calc_measurement_equ function set mathphi number valu produc known sine cosin output select specif combin uvw lmn first consid case uvw case math fracphi_mathrmsimplepi l n set l end math fracphi_mathrmsimplepi l n l sqrtleft frac n right shove two equat wolfram alpha_ assur solut n _wolfram alpha httpswwwwolframalphacomwidgetsviewjspidcccfedfddfecfcd math n fracsqrtsqrtphi_mathrmsimpl piphi_mathrmsimpl pi phi_mathrmsimpl pipi use calcul valu lm math l sqrtfrac n select follow valu mathphi creat follow set lmn coord known set outcom listtabl width headerrow mathphi_mathrmsimpl lm n mathcosphi mathsinphi math math math mathpi mathsqrt math mathpi mathsqrt mathsqrt mathpi math mathsqrt mathpi math math mathpi math mathsqrt mathpi mathsqrt mathsqrt mathpi mathsqrt math mathpi math math mathpi mathsqrt math mathpi mathsqrt mathsqrt note tri go higher mathphi set mathl longer honour mathsqrtl n think rang angl good enough coverag though great test mathuvw want test rang baselin length check function consist short long baselin play anoth trick set baselin coord equal ie mathu v w b mathb baselin length form phase includ baselin length mathphi_b math phi_b pi bleft l n right bphi_mathrmsimpl sinecosin period function follow true math phi_mathrmsimpl phi_mathrmsimpl pi mathrmn mathmathrmn integ mean given mathphi_mathrmsimpl tabl find appropri mathb still result expect sine cosin output set math bphi_mathrmsimpl phi_mathrmsimpl pi mathrmn b fracphi_mathrmsimpl pi mathrmnphi_mathrmsimpl rang mathmathrmn valu valu mathmathrmn result size mathb use test shown tabl note mathphi_mathrmsimpl set mathb pi mathrmn effect mathlmn set everyth zero regardless baselin coord listtabl width headerrow mathphi_mathrmsimpl mathbmathrmn mathbmathrmn mathbmathrmn mathbmathrmn mathbmathrmn mathbmathrmn math mathpi mathpi mathpi mathpi mathpi mathpi mathpi mathpi mathpi mathpi give rang baselin length math wavelength test run everi combin mathlmn mathuvw b mathphi_mathrmsimpl tabl assert real imaginari everi output visibl match expect valu mathsinphi_mathrmsimpl mathcosphi_mathrmsimpl compil float precis assert output must within absolut toler e doubl toler e error scale length baselin shown plot plot fraction offset recov valu mathsinphi_mathrmsimpl imaginari part visibl mathcosphi_mathrmsimpl real part visibl compar analyt expect outcom ive plot mathphi_mathrmsimpl differ symbol float blue doubl orang imag measure_eq_resultspng width see increas baselin length gener trend increas error seen note absolut differ plot work log scale doubl result close neg posit offset expect float result perform worst mathphi_mathrmsimpl pi pi correspond valu mathb larg fraction valu see tabl show bit precis fail truth report larg fraction number second test setup uvw rang wavelength lmn coordin span entir sky run source_componentstest_kern_calc_measurement_equ check equal equival measur equat calcul c bit precis check kernel work rang input coordin assert cuda output must within absolut toler e float code e doubl code todo one day could add estim effect calibr test_extrap_stokesc call source_componentstest_kern_extrap_stok call source_componentskern_extrap_stok handl extrapol refer flux densiti number frequenc given spectral index five test case use follow paramet listtabl width headerrow refer freq mhz spectral index stoke stoke q stoke u stoke v test case extrapol mhz cuda output test equal math s_mathrmextrap s_mathrmref left fracnu_mathrmrefnu_mathrmextrap rightalpha calcul bit precis c code test_extrap_stokesc float compli code must match c estim within absolut toler e toler e doubl compil code test_get_beam_gainsc call source_componentstest_kern_get_beam_gain call source_componentskern_get_beam_gain turn test devic code source_componentsget_beam_gain function handl grab precalcul beam gain specif beam model time frequenc assum beam gain alreadi calcul kern_get_beam_gain setup call get_beam_gain multipl input recov set output array beam gain calcul store primay_beam_j array includ frequenc time step well direct sky test set real entri four primay_beam_j beam gain array valu index way easili predict expect valu output index beam gain want select ive set imaginari zero test run two time step two frequenc step three baselin four beam model three differ outcom expect given beam model analy_dipol gauss_beam valu gain test match expect index leakag term test zero model leakag term fee_beam beam gain leakag term test model includ leakag term no_beam gain term test leakag float doubl code test bit accuraci simpl number requir littl precis test_source_component_commonc call source_componentstest_source_component_common call source_componentssource_component_common source_component_common run visibl calcul function function kern_calc_visi_point kern_calc_visi_gauss kern_calc_visi_shap handl calcul lmn coordin beam respons compon sky model regardless type compon similarli test reftest_lmn_coordsc setup slice ra coordin hold dec constant set phase centr ramath_textrmphas decmath_textrmphas mathcirc circ way analyt predict lmn calcul coordin test within e expect valu test run three time step two frequenc step mhz five baselin coordin dont matter chang size output good nonon valu input set azza coord match radec coord lst test check sky move time set sky stationari time keep test clean primari beam type run compon test check calcualt lmn correct check calcul beam valu match set expect valu store test_source_component_commonc previou test vari primari beam check leakag term zero model doesnt includ absolut toler valu use differ beam model two differ precis shown tabl note ive store expect valu analy_dipol fee_beam e accuraci accuraci function beam function test elsewher gauss_beam valu calcul analyt test describ reftest_gaussian_beamc listtabl width headerrow beam type float toler doubl toler gauss_beam e e analy_dipol e e fee_beam e e test_kern_calc_visi_pointc call source_componentstest_kern_calc_visi_point call source_componentskern_calc_visi_point kernel calcul visibl respons point compon number sky direct time frequenc step baselin set grid lm coord lm coord rang run simul baselin set uvw math uv b_mathrmind w b_mathrmind mathb_mathrmind baselin index mean test cover baselin rang math uv math w test also run three frequnci mhz two time step provid predefin uvw dont need worri lst effect simul two time step make sure result visibl end right order overal run three group test keep beam gain flux densiti constant vari flux densiti frequenc keep beam gain constant vari flux set stoke flux compon index end rang flux set spectral index vari beam gain frequenc keep flux densiti constant beam vari time frequenc direct sky assign beam gain differ valu num_freqsnum_timesnum_compon set real beam gain mathfracb_mathrmind mathb_mathrmind beam valu index way get uniqu valu beam gain allow us test timefrequ handl correctli function test set test run four primari beam type total test call test call kern_calc_visi_point calcul measur equat baselin time step frequenc step compon also sum compon get result visibl baselin time freq test output creat equival c function bit precis test_kern_calc_visi_commonc calcul measur equat given input visibl float version assert cuda code output must match c code output within fraction toler e c valu real imaginari part doubl code fraction toler e ive switch fraction toler rang magnitud cover visibl mean small absolut tolernac fail larg magnitud visibl report valu correct e test_kern_calc_visi_gaussc call source_componentstest_kern_calc_visi_gauss call source_componentskern_calc_visi_gauss kernel calcul visibl respons gaussian compon number sky direct time frequenc step baselin run test describ reftest_kern_calc_visi_pointc plu fourth set test vari posit angl major minor axi input gaussian compon total test c code test cuda code assert cuda code output must match c code output within fraction toler e c valu real imaginari part doubl code fraction toler e test_kern_calc_visi_shapec call source_componentstest_kern_calc_visi_gauss call source_componentskern_calc_visi_gauss kernel calcul visibl respons gaussian compon number sky direct time frequenc step baselin run test describ reftest_kern_calc_visi_gaussc plu fifth set test give multipl shapelet basi function paramet input shapelet compon total test c code test cuda code final th test realli push float code hard rang magnitud visibl larg result float code test within fraction toler e c valu happen mostli expect valu around e jy fraction offset e absolut offset e jy real imaginari part doubl code fraction toler e test_update_sum_visisc call source_componentstest_kern_update_sum_visi turn call source_componentskern_update_sum_visi kernel gather precalcul primari beam valu unpolaris visibl stoke flux densiti combin linear polaris stoke visibl sum compon togeth onto final set linear polaris visibl code run three set test three baselin four time step three frequenc ten compon set test input array test valu set index valu make summat abl test whether correct time frequenc beam index sum result visibl three set test consist vari beam gain keep flux densiti unpolaris measur equat constant vari flux densiti keep beam gain unpolaris measur equat constant vari unpolaris measur equat keep beam gain flux densiti constant set test run primari beam type total test differ beam model differ expect valu depend whether includ leakag term instal woden built cuda need nvidia gpu run current woden test run linux specif ubuntu ozstar super cluster swinburn univers garrawarla cluster pawsey your mad keen run window mac pleas contact jack jacklblinegmailcom give go depend woden number depend doesnt reinvent wheel brief list follow detail instruct instal follow subsect note explicit instal instruct includ jsonc erfa pal way reliabl manag instal packag packag instal manag sometim whacki thing cmake httpscmakeorg version nvidia cuda httpsdevelopernvidiacomcudadownload jsonc httpsgithubcomjsoncjsonc erfa httpsgithubcomliberfaerfareleas hdf httpswwwhdfgrouporgdownloadshdf pal httpsgithubcomstarlinkpalreleas python instal depend instruct ubuntu use guid linuxlik system cmake httpscmakeorg version sudo snap instal cmake nvidia cuda httpsdevelopernvidiacomcudadownload typic download runfil option run sudo sh cuda___linuxrun instal driver point ill alreadi driver system work also dont ignor step ad someth like export ld_library_pathld_library_pathusrlocalcudalib bashrc system wont find cuda jsonc httpsgithubcomjsoncjsonc typic cmake instal git clone httpsgithubcomjsoncjsoncgit cd jsonc mkdir build cd build cmake make j sudo make instal run cmake find depend miss instal need erfa httpsgithubcomliberfaerfareleas think best instal releas version erfa come configur file git repo doesnt instal rout would look like wget httpsgithubcomliberfaerfareleasesdownloadverfatargz tar xvf erfatargz cd erfa configur make j sudo make instal hdf httpswwwhdfgrouporgdownloadshdf sudo apt instal libhdfserialdev pal httpsgithubcomstarlinkpalreleas pal littl mental default instal path highli recommend download releas version use withoutstarlink option wget httpsgithubcomstarlinkpalreleasesdownloadvpaltargz tar xvf paltargz cd pal configur prefixusrloc withoutstarlink make sudo make instal way instal thing normal locat make life easier link python best way run woden script run_wodenpi number packag depend one pyerfa use fstring instal use python version sorri requir found wodendocssphinxsphinxrequirements_testingtxt instal via someth like pip instal r requirements_testingtxt complet packag sphinx_argpars breath astropi numpi pyerfa palpi matplotlib sphinx_argpars breath packag use document packag palpi matplotlib use test_installationabsolute_accuraci test your aim minim instal need numpi astropi pyerfa phew that compil woden ideal world instal depend went perfectli newer nvidia gpu abl simpli run git clone httpsgithubcomjlblinewodengit cd woden mkdir build cd build cmake make j et voila code compil work your happi instal woden system default locat run sudo make instal usual default someth like usrloc henc need admin privileg complil fail your use cmake check machin specif help dont want instal dont admin right head post compil section finish instal warn even code compil gpu comput capabl newer version nvcc wont compil code work youll get error messag like kernel imag avail check fix machin specif machin specif cmake pretti good tri find necessari librari everi machin uniqu often youll need point cmake correct direct end ive includ keyword jsonc_root erfa_root hdf_root pal_root pass cmake pass option cmake add front exampl ozstar use command cmake djsonc_rootfredozjlinesoftwarejsoncinstal tell cmake look libjsoncso path like jsonc_rootlib jsonc_rootlib jsonh path like jsonc_rootinclud jsonc_rootincludejsonc read error cmake see librari cant find add whatev need cmake command point correct librari note instal depend unusu place machin make sure woden find run time compil jsonc librari cmake exampl youd need call export ld_library_pathld_library_pathfredozjlinesoftwarejsoncinstalllib call woden put line bashrc equival nvidia gpu specif comput capabl relat intern architectur tell compil architectur compil theori make compil quicker ensur code run correctli gpu find comput valu httpsdevelopernvidiacomcudagpu pass cmake via cmake dcuda_arch comput capabl exampl warn newer cuda version comput capabl deprec compil leav default exampl use cuda version comput capabl ignor card comput capabl must includ flag dcuda_arch otherwis nvcc compil creat execut capabl run devic need pass extra flag cuda compil ad someth like follow dcmake_cuda_flagsdsomeflag post compil requir dont run make instal dont run make instal run_wodenpi wont abl find woden execut default instal locat often need admin privileg cant instal want keep woden contain insid singl directori instead add sourc pathtoyourlocationwodenbuildinit_wodensh bash_rc replac pathtoyourloc wherev instal woden creat variabl woden_dir add path furthermor init_wodensh gener script srcupdate_init_wodenpi look cmakecachetxt locat erfa hdf jsonc pal append line init_wodensh add locat ld_library_path woden find librari run time exampl machin init_wodensh end look like line find current directori set env variabl woden_dir export woden_dir cd dirnam bash_sourc pwd add line path export pathwoden_dirpath add librari path ld_library_path found runtim export ld_library_pathusrlibx_linuxgnuhdfserialld_library_path export ld_library_pathusrlocallibld_library_path note everi time run make init_wodensh regener edit make overwritten suggest customis ld_library_path happen bashrc equival post compil option want use mwa fee primari beam model must store spheric harmon coeffici hdf file mwa_full_embedded_element_patternh defin environ variabl bash_rc export mwa_fee_hdfpathtoyourlocationmwa_full_embedded_element_patternh run_wodenpi find command line option hdf_beam_path run_wodenpi use instead environ variabl want dont spheric harmon file obtain via command wget httpwsmwatelescopeorgstaticmwa_full_embedded_element_patternh api refer find document function group code languag python script document also includ summari argument reproduc command line use scriptpi help note function begin rt either borrow adapt rt mitchel et al _ calibr packag permiss origin author credit origin author rt code current found rt github_ _mitchel et al httpsdoiorgjstsp _rt github httpsgithubcomicrarmwartsgit python code toctre maxdepth python_coderun_woden python_codeconvert_wsclean_list_to_woden python_codeuvm c code precis function determin compil time via follow ifdef statement found wodenincludewoden_precision_defsh codeblock c ifdef double_precis ddouble_precis flag ad compil user_precision_t set doubl typedef doubl user_precision_t ddouble_precis flag ad compil user_precision_complex_t set doubl _complex typedef doubl _complex user_precision_complex_t els ddouble_precis flag ad compil user_precision_t default float typedef float user_precision_t ddouble_precis flag ad compil user_precision_complex_t default float _complex typedef float _complex user_precision_complex_t endif see user_precision_t api either float doubl similarli user_precision_complex_t either float _complex doubl _complex toctre maxdepth c_codearray_layout c_codechunk_sky_model c_codeconst c_codecreate_sky_model c_codefee_primary_beam c_codeprimary_beam c_codeprint_help c_codeshapelet_basi c_codevisibility_set c_codewoden_precision_def c_codewoden_set c_codewoden_struct_def cuda code similarli c code precis function determin compil time via follow ifdef statement found wodenincludecudacomplexh codeblock c ifdef double_precis ddouble_precis flag ad compil cuusercomplex set cudoublecomplex typedef cudoublecomplex cuusercomplex els ddouble_precis flag note ad compil cuusercomplex set cufloatcomplex typedef cufloatcomplex cuusercomplex endif mean cuusercomplex api either mean cufloatcomplex cudoublecomplex depend compil flag toctre maxdepth cuda_codecalculate_vis cuda_codecudacheck cuda_codecudacomplex cuda_codefee_primary_beam_cuda cuda_codefundamental_coord cuda_codeprimary_beam_cuda cuda_codesource_compon create_sky_model api document create_sky_modelc todo stick bunch inform sky model format doxygenfil create_sky_modelh project woden shapelet_basi api document shapelet_basisc doxygenfil shapelet_basish project woden primary_beam api document primary_beamc doxygenfil primary_beamh project woden fee_primary_beam mwa fulli embed element primari beam model sokolowski et al _ time write accur advanc mwa primari beam model model store spheric harmon coeffici frequenc resolut mhz hdf file call mwa_full_embedded_element_patternh done best document rt code use rt code make use legendr polynomi code avail here_ john burkardt includ woden distribut legendre_polynomialc _sokolowski et al httpsdoiorgpasa _avail httpspeoplescfsuedujburkardtc_srclaguerre_polynomiallaguerre_polynomialhtml doxygenfil fee_primary_beamh project woden visibility_set api document visibility_setc doxygenfil visibility_seth project woden woden_precision_def header set precis requir intern woden note havent work get doxygensphinx show whole defint includ ifdef show definit float doxygenfil woden_precision_defsh project woden chunk_sky_model function take woden sky model break chunk number smaller sky model distribut process across gpu doxygenfil chunk_sky_modelh project woden constant api document constantsh doxygenfil constantsh project woden woden_struct_def api document woden_struct_defsh doxygenfil woden_struct_defsh project woden array_layout api document array_layoutc doxygenfil array_layouth project woden print_help api document print_helph doxygenfil print_helph project woden woden_set api document woden_settingsc doxygenfil woden_settingsh project woden uvmspi helper script convert uvfit file measur set use casa _uvm command line run option command line run option argpars filenam srcuvmspi func get_pars prog uvmspi convert_wsclean_list_to_wodenpi conveni script includ convert wsclean clean compon sky model compat woden _convert_wsclean command line run option command line run option argpars filenam srcconvert_wsclean_list_to_wodenpi func get_pars prog convert_wsclean_list_to_wodenpi run_wodenpi main way control woden execut ensur good argument suppli suggest run woden script _run_woden command line run option command line run option argpars filenam srcrun_wodenpi func get_pars prog run_wodenpi function document automodul run_woden member primary_beam_cuda api document primary_beam_cudacu doxygenfil primary_beam_cudah project woden cudacheck api document cudacheckh doxygenfil cudacheckh project woden calculate_vis api document calculate_visibilitiescu doxygenfil calculate_visibilitiesh project woden fundamental_coord api document fundamental_coordscu doxygenfil fundamental_coordsh project woden cudacomplex header rt contain use cuda oper credit origin author r g edgar ive ad doubl definit well cuusercomplex def allow float doubl select compil use flag ddouble_precis even though say typedef cufloatcomplex cuusercomplex depend compil doxygenfil cudacomplexh project woden fee_primary_beam_cuda mwa fulli embed element primari beam model sokolowski et al _ time write accur advanc mwa primari beam model model store spheric harmon coeffici frequenc resolut mhz hdf file call mwa_full_embedded_element_patternh done best document rt code use rt code make use legendr polynomi code avail here_ john burkardt includ woden distribut legendre_polynomialc _sokolowski et al httpsdoiorgpasa _avail httpspeoplescfsuedujburkardtc_srclaguerre_polynomiallaguerre_polynomialhtml doxygenfil fee_primary_beam_cudah project woden source_compon api document source_componentsc doxygenfil source_componentsh project woden _thi googledoc link wodensrclist_pumavtxt httpsdrivegooglecomfiledgfnqpxvgss_eeekturpnanoihnfiviewuspshar mwa eor simul note run simul make imag take around gb storag youll need download skymodel googledoc link wodensrclist_pumavtxt_ put correct directori your comfort wget cd wodenexamplesmwa_eor wget httpsdocsgooglecomucexportdownloadidgfnqpxvgss_eeekturpnanoihnfi wodensrclist_pumavtxt skymodel contain sourc base gleam catalogu embellish simul go run mwa eor field centr ra dec mathcirc circ field contain fornax good way demonstr sky point gaussian shapelet model well effect mwa fee primari beam run simul simpli run mwa_eor_simulationsh contain command time run_wodenpi ra dec num_freq_channel num_time_step freq_res time_r cat_filenamewodensrclist_pumavtxt metafits_filenamemetafits_metafits_ppdsfit band_num output_uvfits_prependdatamwa_eor primary_beammwa_fe sky_crop_compon run took min sec second gpu run precisionfloat flag run min sec ive reduc time frequenc resolut specifi metafit file keep size output smaller machin want run full resolut data observ khz remov num_freq_channel num_time_step freq_r time_r argument ive includ two imag command mwa_eor_smaller_imagingsh mwa_eor_larger_imagingsh larger imag pixel larg wterm took hour desktop dont want hang around run smaller imag smaller imag look like imag mwa_eor_plot_smallersvg width px ive blown colour scale highlight mani sourc especi fornaxa boom corner clean isnt great havent made imag big enough see alias fornax around imag patienc make bigger imag look like imag mwa_eor_plot_largersvg width px left see full imag clearli show main lobe mwa primari beam right zoom north main lobe see sourc sat northern beam sidelob primari top edg primari lobe bottom expect due mwa primari beam shape see refmwa fulli embed element section unfamiliar beam _woden demonstr via exampl woden demonstr via exampl number exampl simul variou set find run exampl wodenexampl directori ill let know much storag youll need set simul imag thing get larg radio data two sky model larg total mb instead bundl github ive ad link relev instruct download note simul time report use singl nvidia geforc gtx ti gb ram exampl toctre fornaxa_sim mwa_eor_sim eda_haslam_sim fornax simul two exampl compar pointgaussian model shapelet model serv gener introduct simul mwa observ use metafit file extra command also serv comparison run woden_float woden_doubl mwa eor simul demonstr use larger sourc catalogu eda haslam map simul demonstr use woden without metafit file use text file describ array layout use eda beam warn gpu small amount ram say gb simul wont work doubl precis wont enough memori add precisionfloat argument switch lower memori requir loss accuraci _thi googledoc link pygsm_wodenlist_mhz_ntxt httpsdrivegooglecomfiledteeluxuclrtizbfozgjhfxblnzjuvviewuspshar _pygdsm httpsgithubcomtelegraphicpygdsm eda haslam map simul note run simul make imag take around gb storag simul well use allski healpix imag nside gener use pygdsm_ sky model convert everi healpixel point sourc youll need download skymodel googledoc link pygsm_wodenlist_mhz_ntxt_ put correct directori your comfort wget cd wodenexampleseda_haslam wget httpsdocsgooglecomucexportdownloadidteeluxuclrtizbfozgjhfxblnzjuv pygsm_wodenlist_mhz_ntxt run command eda_haslam_simulationsh took hour min machin run doubl precis take hour min float precis simul point sourc array antenna command run run_wodenpi ra dec time_r num_time_step freq_res coarse_band_width lowest_channel_freq cat_filenamepygsm_wodenlist_mhz_ntxt array_layouttest_installationarray_layoutseda_layout_txt datet output_uvfits_prependdataeda_haslam primary_beameda sky_crop_compon band_num line line explan command ra dec set phase centr simul time_r num_time_step mean time sampl second sampl freq_res coarse_band_width lowest_channel_freq band_num combin argument creat uvfit file output contain frequenc channel width khz lowest band start mhz give total frequenc coverag mhz mhz cat_filenamepygsm_wodenlist_mhz_ntxt point toward sky model array_layouttest_installationarray_layoutseda_layout_txt point towrad array file contain local east north height coordin metr use conjunct latitud gener baselin coordin default latitud set mwa right next eda good enough exampl datet set utc date use conjunct longitud calcul lst default mwa good purpos output_uvfits_prependdataeda_haslam set name convent output conjunct band_num produc output dataeda_haslam_banduvfit dataeda_haslam_banduvfit dataeda_haslam_banduvfit dataeda_haslam_banduvfit dataeda_haslam_banduvfit primary_beameda select eda primari beam sky_crop_compon mean sky model crop compon sourc model diffus sky singl sourc compon alway horizon need flag crop whole sky note real eda instrument antenna casa allow maximum element array tabl imag becom nightmar exampl make imag ive left antenna make life easier youv run make imag via eda_haslam_imagingsh youll see imag eda_all_sky_imagepng width px see eda see essenti whole sky albeit poor resolut _line et al httpsdoiorgpasa fornax simul exampl compar two sky model type compar speed float vs doubl precis woden note run imag fornax simul need gb storag your itch immedi run someth run imag first simul follow command note youll follow refpost compil option get mwa fee beam work read find youv done read section run command cd wodenexamplesfornaxa fornaxa_msclean_simulationsh fornaxa_msclean_imagingsh simul well compar two differ model fornax use line et al _ first well look model made wsclean multiscal clean output command look like run_wodenpi ra dec freq_res num_freq_channel time_r num_time_step metafits_filenamemetafits_metafits_ppdsfit cat_filenamesrclist_msclean_fornaxa_phasetxt band_num output_uvfits_prependdatafornaxa_msclean primary_beammwa_fe precisionprecis precis either float doubl choos precis simul set phase centr ra dec fine channel frequenc khz fine channel per coars band time sampl everi second time sampl use metafit file observ set ive select run first coars band via band_num paramet combin output_uvfits_prepend argument creat uvfit file datafornaxa_msclean_precision_banduvfit datafornaxa_msclean_precision_banduvfit datafornaxa_msclean_precision_banduvfit datafornaxa_msclean_precision_banduvfit datafornaxa_msclean_precision_banduvfit contain frequenc time step ive select use mwa_fe primari beam use mwa fulli embed element fee primari beam pattern use delay specifi metafit point beam describ refpost compil option youll need grab hdf file set environ variabl point work sky model specifi use cat_filenam use convert_wsclean_list_to_wodenpi convert output wsclean woden sky model via convert_wsclean_list_to_wodenpi filemsclean_output_from_wscleansourcestxt outnamesrclist_msclean_fornaxa_phasetxt sky model contain point gaussian compon float precis version took second card doubl take second run imag get someth look like imag fornaxa_mscleanimagepng width pt mwa phase ii extend array simul henc arcmin resolut next compar equival shapelet simul chang command chang sky model cat_filenamesrclist_shapelets_fornaxa_phasetxt run imag shapelet simul via fornaxa_shapelet_simulationsh fornaxa_shapelet_imagingsh float simul take second gpu doubl take second imag look like imag fornaxa_shapeletsimagepng width pt woden sky model format _line et al httpsdoiorgpasa _shamfi readthedoc httpsshamfireadthedocsioenlatest woden sourc catalogu modifi version rt srclist current version woden creat one singl sourc includ mani compon desir type point gaussian shapelet point dirac delta point sourc model gaussian gaussian model major minor posit angl shapelet model use multipl shapelet basi function build model detail model type see line et al _ want build shapelet model use softwar shamfi read shamfi readthedocs_ current everi sourc given simpl powerlaw frequenc behaviour math s_ left fracnu_nu rightalpha math flux densiti frequenc mathnu refer flux densiti maths_ refer frequenc mathnu_ spectral index mathalpha point sourc exampl singl sourc singl point sourc compon sourc source_nam p g compon point linear e endcompon endsourc explan line valu follow sourc source_nam p g initialis sourc give name source_nam specifi number type compon p point g gaussian shapelet shapelet two number total number coeffici total number compon read explan shapelet compon point initialis compon specifi type either point gaussian shapelet ra dec hour deg line mean point sourc radec h deg linear e specifi refer stoke flux densiti linear freq q u v si freq hz stoke param iquv unit jy si spectral index label linear powerlaw linear loglog space exampl line specifi sourc flux densiti pure stoke jy mhz spectral index endcompon line end compon endsourc line end sourc add multipl point sourc simpli repeat compon endcompon section new detail ie sourc multi_point p g compon point linear e endcompon compon point linear e endcompon compon point linear e endcompon endsourc note top line updat p reflect three point sourc number use quickli alloc memori that includ note woden crop everyth horizon sky model one two way either compon sourc exampl three compon one sourc ask woden crop sourc one compon horizon itll crop entir sourc gaussian sourc exampl srclist contain singl gaussian sourc gaussian_sourc p g compon gaussian linear e gparam endcompon endsourc line mean point sourc mean extra line gparam specifi gaussian paramet gparam padeg major_axisarcmin minor_axisarcmin major minor axe specifi fwhm note line need sit line start compon gaussian endcompon shapelet sourc gener shapelet model compat woden simpli use shamfi fit imag woden_srclist option see shamfi readthedocs_ detail ensur normalis correct exampl sky model made hand normalis wont correct sourc shapelet_sourc p g compon shapelet freq e sparam scoeff scoeff scoeff endcompon endsourc gener singl shapelet compon includ shapelet basi function henc first line sparam line similar gaussian line sparam padeg major_axisarcmin minor_axisarcmin extra line like scoeff encod order shapelet basi function see line et al _ detail fit coeffici scoeff p p coeff_valu add mani scoeff line necessari maximum order use shamfi coeffici scale stoke flux densiti full sourc jy mhz exampl may notic sed inform differ freq e line still assum powerlaw frequenc behaviour refer flux jy mhz use default si put togeth exampl skymodel four sourc first compon type next three singl compon type would look someth like sourc multi_sourc p g compon shapelet freq e sparam scoeff scoeff scoeff endcompon compon shapelet freq e sparam scoeff scoeff scoeff scoeff endcompon compon gaussian linear e gparam endcompon compon point linear e endcompon compon point linear e endcompon compon point linear e endcompon endsourc sourc source_nam p g compon point linear e endcompon endsourc sourc gaussian_sourc p g compon gaussian linear e gparam endcompon endsourc sourc shapelet_sourc p g compon shapelet linear e sparam scoeff scoeff scoeff endcompon endsourc _sokolowski et al httpsdoiorgpasa _polarised_source_and_fee_beamipynb live httpsgithubcomjlblinepolarisation_tests_for_fe _tingay et al httpsdoiorgpasa _wayth et al httpsdoiorgpasa primari beam woden written includ stationari primari beam mean beam point constant azimuth zenith angl observ current three primari beam avail detail mwa fulli embed element murchison widefield array mwa tingay et al _ bowti dipol arrang grid reciev element yield gratinglob style primari beam woden incud gpuimplement mwa fulli embed element fee beam pattern sokolowski et al _ date accur model mwa primari beam model defin spheric harmon coordin system polarisationlock instrument azimuth elev coordin woden howev use stoke paramet defin visibl rotat beam parallact angl calcul use erfa appli align fee beam move stoke frame due convent issu whether x mean eastwest northsouth whether azimuth start toward north increas toward east also find necessari reorder output appli sign flip two output mwa fee code exhaust investig necessari obtain expect stoke paramet see polarised_source_and_fee_beamipynb live here_ defin jone matrix primari beam math mathbfj_mathrmlinear beginbmatrix g_x d_x d_i g_i endbmatrix subscript mathx mean polaris angl mathcirc mathi angl mathcirc mathg mean gain term mathd mean leakag term mathx mean northsouth mathi eastwest definit typic zenithpoint look like imag mwafee_jonespng width pt plot sky northward top assum sky total stoke yield instrument polaris xx northsouth yy eastwest like imag mwafee_instrumental_polspng width pt mwa beam electron steer defin via integ delay suppli mwa fee beam run_wodenpi read directli mwa metafit file directli suppli use mwa_fee_delay argument warn frequenc resolut mwa fee model mhz yet code frequenc interpol frequenc respons given direct look someth like come futur imag mwafee_beam_vs_freqsvg width pt fact run use mwa fee band calcul beam respons per coars band set coarse_band_width greater mhz youll make effect even wors stick normal mwa observ param default mhz fine eda nd version engin develop array eda wayth et al _ ska_low test station swap plan logarithm christma tree dipol mwa bowti dipol current woden assum perfect dipol infinit ground screen beam model make primari beam entir real leakag term explicitli beam model math mathcalg sinleftpi frachlambda costheta right g_x mathcalgarccosleftsinthetacosphiright g_i mathcalgarccosleftsinthetasinphiright mathh height dipol mathlambda wavelength maththeta zenith angl mathphi azimuth angl ive set mathh beam basic see whole sky imag show mathmathbfj_mathrmlinear valu mhz imag eda_jonespng width pt note eda beam neither physic electron steer alway point toward zenith gaussian toy case symmetr major minor gaussian primari beam beam get smaller sky increas frequenc polaris ident control point beam remain constant azza singl observ via initi radec point gauss_ra_point gauss_dec_point fwhm beam gauss_beam_fwhm refer frequenc gauss_beam_ref_freq ive implement beam creat cosin angl coordin system lock initi hour angl declin specifi radec point mathl_mathrmbeam m_mathrmbeam n_mathrmbeam beam calcul math gl_mathrmbeam m_mathrmbeam exp left left al_mathrmbeam bl_mathrmbeamm_mathrmbeam cm_mathrmbeam right right math fraccosphi_mathrmpasigma_l fracsinphi_mathrmpasigma_m b fracsinphi_mathrmpasigma_l fracsinphi_mathrmpasigma_m c fracsinphi_mathrmpasigma_l fraccosphi_mathrmpasigma_m current set posit angl beam mathphi_mathrmpa std mathsigma_l sigma_m equal math sigma_l sigma_m fracsinvarphi_ sqrtln fracnu_nu mathvarphi_ desir fwhm refer frequenc mathnu_ mathnu frequenc calcul beam exampl zenith point mathvarphi_ circ nu_ mhz look like imag gaussian_jones_zenithpng width pt use set offzenith point yield imag gaussian_jones_offzenithpng width pt least visual look like get realisticish project effect beam toward horizon note machineri differ major minor axe posit angl desir open issu github_ want implement _issu github httpsgithubcomjlblinewodenissu frequenc specif uvfit output woden write visibl uvfit file output linear polaris xx yy xy yx x refer northsouth align receiv eastwest align receiv output split across frequenc coars band coars band split fine channel like imag frequency_wordingsvg width pt run mwa simul use metafit file frequenc option fill automat user overridden altern suppli keyword run_wodenpi argument match diagram list listtabl width headerrow run_wodenpi argument diagram label coarse_band_width coars band width freq_r fine frequenc channel width lowest_channel_freq lowest frequenc channel band_num band band band mani coars band need run allow straightforward split simul across multipl gpu well look exampl later run follow argument run_wodenpi freq_res coarse_band_width time_r num_time_step lowest_channel_freq band_num output_uvfits_prependepic_output produc three uvfit file name follow properti listtabl width headerrow output name lowest frequenc channel hz number frequenc channel epic_output_banduvfit e epic_output_banduvfit e epic_output_banduvfit e note command wont work mani argument miss ive left concentr argument defin uvfit output run whatev band number want run_wodenpi freq_res coarse_band_width time_r num_time_step lowest_channel_freq band_num output_uvfits_prependepic_output creat uvfit file like listtabl width headerrow output name lowest frequenc channel hz number frequenc channel epic_output_banduvfit e epic_output_banduvfit e epic_output_banduvfit e woden oper principl read woden specif includ analyt equat use transform sky model visibl toctre maxdepth visibility_calc skymodel frequency_word primary_beam _thompson moran swenson httpslinkspringercombook _line et al httpsdoiorgpasa visibl calcul section assum basic understand radio interferometri assum know visibl baselin familiar mathuvw mathlmn coordin system recommend thompson moran swenson _ look learn refresh concept section basic copypast line et al _ note line et al _ detail use atomicadd function cuda longer true ive found loop insid kernel actual faster fulli parallel use atomicadd calcul made remain measur equat point sourc woden analyt gener sky model directli visibl space via measur equat cf thompson moran swenson _ ignor effect instrument polaris primari beam express math v_suvw int mathcals_slm exppi iul vm wn dfracdldmn mathv_suvw measur visibl stoke polaris math baselin coordin mathuvw given sky intens mathmathc function direct cosin mathlm mathnsqrtlm discretis point sourc math v_su_iv_iw_i sum_j mathcals_sl_jm_j exppi iu_il_j v_im_j w_in_j mathu_iv_iw_i visibl coordin mathimathrmth baselin mathl_j mathm_j mathn_j sky posit mathjmathrmth point sourc stoke paramet mathmathcals_i mathcals_q mathcals_u mathcals_v extrapol input catalogu along posit sky mathuvw set suppli array layout phase centr locat earth note mathu_iv_iw_i mathmathc also function frequenc must calcul frequenc step requir appli linear stoke polaris primari beam woden simul duallinear polaris antenna antennast primari beam shape defin respons dual polaris antenna direct mathlm math mathbfjlm beginbmatrix g_xlm d_xlm d_ylm g_ylm endbmatrix mathg gain term mathd leakag term mathx refer northsouth align antenna mathi eastwest align antenna calcul crosscorrel respons antenna toward direct mathlm produc linear polaris visibl gain leakag interact four stoke polaris mathiquv math beginbmatrix v_xxlm v_xylm v_yxlm v_yylm endbmatrix mathbfj_lm otim mathbfj_lm beginbmatrix endbmatrix beginbmatrix v_ilm v_qlm v_ulm v_vlm endbmatrix math denot complex conjug mathotim outer product explicitli visibl math begineqnarray v_xx g_xg_xast d_xd_xastmathrmvi_ g_xg_xast d_xd_xastmathrmvq_ g_xd_xast d_xg_xastmathrmvu_ ig_xd_xast d_xg_xastmathrmvv_ endeqnarray math begineqnarray v_xi g_xd_yast d_xg_yastmathrmvi_ g_xd_yast d_xg_yastmathrmvq_ g_xg_yast d_xd_yastmathrmvu_ ig_xg_yast d_xd_yastmathrmvv_ endeqnarray math begineqnarray v_yx d_yg_xast g_yd_xastmathrmvi_ d_yg_xast g_yd_xastmathrmvq_ d_yd_xast g_yg_xastmathrmvu_ id_yd_xast g_yg_xastmathrmvv_ endeqnarray math begineqnarray v_yy d_yd_yast g_yg_yastmathrmvi_ d_yd_yast g_yg_yastmathrmvq_ d_yg_yast g_yd_yastmathrmvu_ id_yg_yast g_yd_yastmathrmvv_ endeqnarray baselin frequenc time step woden calcul four linear polaris defin direct mathl_jm_j sky model sum mathj produc four fullski linear stoke polaris visibl per baselinefrequencytim gaussian shapelet sourc inject morpholog sourc analyt tranform visibl gaussian shapelet sourc utilis rt methodolog insert visibl envelop mathxi visibl equat math vu_iv_iw_i sum_j xi_ju_iv_imathcalsl_jm_j exppi iu_il_j v_im_j w_in_j gaussian envelop look like math beginalign xi_j expleft dfracpiln left k_xtheta_mathrmmaj k_ytheta_mathrmminright right k_x cosphi_textrmpav_i sinphi_textrmpau_i k_i sinphi_textrmpav_i cosphi_textrmpau_i endalign maththeta_mathrmmaj maththeta_mathrmmin major minor axe mathphi_textrmpa posit angl ellipt gaussian shapelet model envelop look like math beginalign xi_j sump_k p_l p_mathrmmax_kl c_p_kp_l tildeb_p_kp_lk_xk_i labeleqshapeenv k_x dfracpisqrtln leftcosphi_pav_ij sinphi_pau_ij right labeleqscaleshapex k_i dfracpisqrtln leftsinphi_pav_ij cosphi_pau_ij right labeleqscaleshapey endalign mathu_ijv_ij visibl coordin baselin mathi calcul phasecentr mathra_jdelta_j correspond central posit mathx_y_ use fit shapelet model imagespac shapelet basi function valu mathtildeb_p_kp_luv calcul interpol one dimension lookup tabl mathtildebk_x scale appropri mathbeta cf equat line et al _ see introduct breakdown shapelet bai function see differ three type sky model compon gener plot checkout section refgrid compon model imag testinggrid_component_plotspng width px